Project Path: arc_jammsen_docker-palworld-dedicated-server_s779hm69

Source Tree:

```txt
arc_jammsen_docker-palworld-dedicated-server_s779hm69
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ configs
â”‚   â”œâ”€â”€ PalWorldSettings.ini.template
â”‚   â””â”€â”€ rcon.yaml
â”œâ”€â”€ default.env
â”œâ”€â”€ docker-build.sh
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ docs
â”‚   â””â”€â”€ ENV_VARS.md
â”œâ”€â”€ entrypoint.sh
â”œâ”€â”€ gosu-amd64
â”œâ”€â”€ includes
â”‚   â”œâ”€â”€ colors.sh
â”‚   â”œâ”€â”€ config.sh
â”‚   â”œâ”€â”€ cron.sh
â”‚   â”œâ”€â”€ playerdetection.sh
â”‚   â”œâ”€â”€ rcon.sh
â”‚   â”œâ”€â”€ security.sh
â”‚   â”œâ”€â”€ server.sh
â”‚   â””â”€â”€ webhook.sh
â””â”€â”€ scripts
    â”œâ”€â”€ backupmanager.sh
    â”œâ”€â”€ rconcli.sh
    â”œâ”€â”€ restart.sh
    â””â”€â”€ servermanager.sh

```

`CHANGELOG.md`:

```md
# Changelog

[Back to main](README.md#changelog)

## 2025-09-06

- Made envsubst integration complete and useful, added strtolower checks, removed obsolete moreutils package from PR,  removed trailing spaces, added more error-fallbacks in config.sh around the envsubst integration - by @jammsen (idea by @codebam) (#311)

## 2025-07-18

- Updated supercronic to release v0.2.34 @GlitchApotamus (#304)

## 2025-07-17

- Added new config-settings for v0.6.0 @GlitchApotamus  (#301)
- Added different mechanics for ci/cd pipeline unit-tests and timeouts for PRs

## 2025-03-22

- Added complete coverage of new v0.4.0 and v0.5.0 variable changes @jammsen (#294)
- Added counter for all settings in the log, we are now at 87 gameserver settings, this makes logging and searching easier, also debugging in issues

## 2025-03-20

- Adding first part of new v0.5.0 changes @jammsen (#294)

## 2025-01-29

- Added unit-tests (Thanks to @thijsvanloef for the base) @jammsen (#291)

## 2025-01-14

- Fixed Player detection loop bug @jammsen (#287)

## 2025-01-11

- Fixed startup script failure if missing appmanifest @holysoles (#288)

## 2024-12-23

- Added new configs for Palworld: Feybreak @jammsen (#283)

## 2024-09-20

- Added process-based Healthcheck @jammsen (#275)

## 2024-08-15

- Added support for variable SUPPLY_DROP_SPAN @KyleDiao (#279)

## 2024-08-12

- Added support to turn off backup-announcements, to have less spammy chat ingame, but errors will always be announced @Jadiction @jammsen (#272)

## 2024-06-24

- Added support for new variables @jammsen (#276)

## 2024-06-24

- Add support-documentation for Xbox-Dedicated-Servers @jammsen (#269)

## 2024-04-28

- Log-Rotation by @Gornoka (#261)
- Throw error when not run as root by @StaleLoafOfBread (#246)
- Minimise user write access to container service file @Callum027 (#241)

## 2024-04-09

- Exclude save backup directory in backup @Dashboy1998  (#259)

## 2024-04-06

- Disabled recursive Backups by default @Callum027 (#257)

## 2024-04-04

- Fixed rcon-spaces by @Callum027 (#251)
- Added new config options from new default-settings-file
- Bugfix - Change pidof selector to current name "PalServer-Linux-Shipping" by @thijsvanloef 

## 2024-03-04

- Fixed typo
- Removed 0.1.5.0 -rcon workaround
- Cleanup code
- No default.env update needed, just update image, down and up and your good

## 2024-02-27

- Added clearer descriptions in the ENV_VARS documentation by @m1xzg
- Added new mechanic to comply with changes for update 0.1.5.0 by @jammsen and @Callum027 (#236)
  - Introduced new template file for PalWorldSettings.ini
  - Added new option for ShowPlayerList
  - Updated option for Community-Mode servers

## 2024-02-25

- Added new mechanic for customization of webhook content-titles (#223)

## 2024-02-24

- Added new mechanic for auto-restart, where the player count will be checked, 15 minutes grace-period (for dungeons, boss-fights, etc.) will only used if a player is online, if not the restart will be initiated (#230)
  - Renamed/extended webhook messages accordingly

## 2024-02-23

- Added new SERVER_SETTINGS_MODE called "rcononly" this will only setup up RCON, everything else is still manually to set (#221)
- Added RESTART_DEBUG_OVERRIDE for local testing
- Fixed expansion-bug from #224 & #225 by @Dashboy1998
- Refactoring of code-duplication in webhook.sh
- Extended fixing for edge-cases of playernames from #226, #227 & #228 by @Dashboy1998
  - Default mechanic checks more steamid oriented, not comparing playernames directly
  - Added mechanic for playername changes and temporary characters which are still in char-creation screen
  - Also cut down on text in the announces on RCON, because messages can only be 40 chars long
  - Stripped all special-chars from playername, using TR class [:alnum:] meaning only a-zA-z0-9 are valid

## 2024-02-22

- Added RCON-Based player detection, for join and leave messages on console, rcon-broadcast and webhooks (#216)
  - Important change: RCON is now on by default, was false in the Dockerfile before, not considered a breaking change

## 2024-02-21

- Fixed major CVEs and added re-compiled gosu-amd64 binary to the repository (#214 #215)

## 2024-02-19

- Added 15 seconds delay after save before backup (#209)
- Changed standard RESTART_CRON_EXPRESSION to only once a day at 6pm
  - Cause less illnesses on Pals that way

## 2024-02-13

- Added the option to enable webhook curl debugging for weird error edge-cases

## 2024-02-13
- **Breaking changes:** 
  - Changed the default BACKUP_RETENTION_POLICY to true and changed BACKUP_RETENTION_AMOUNT_TO_KEEP to 72, meaning 3 days worth of backup are kept in the default configuration
  - Added the ability to change the PUID and PGID via environment variables (#117)
    - This includes a user-process-jail mechanic including entrypoint-script, which makes sure that the gameserver is always working with the right permissions as only user steam and not root by accident or bug 
- Mayor refactoring of the code-base to enable more feature requests based around automatic restarts and such. This includes:
  - Adding new backupmanager
  - Adding color-based echos and feedback-signals by color
  - New structure and comments of Dockerfile environment variables
  - New structure and comments of default.env template
  - Added shell linting
  - Fixed cron duplication (#169)
  - Changed structure of the project and where files like documentation, includes, scripts and config-templates are to find
  - Fixed typos in various documents
  - Added multicore-bugfix, now multi-core-enhancment should be working (#190)
  - Removed sensitive information from the servermanger logs (#194)
  - Changed to always copy DefaultPalWorldSettings.ini at start mechanic (#195)
  - Updated outdated Pocketpair documentation links
  - Added automatic-restart-cron functionality (#50 #71 #139)
  - Extended webhook usage (#120)
- Requirements - What you need to do:
  - **Read the readme, a lot has changed, there is a new part about the backupmanager and how to interact now with rconcli**
  - Update to latest image
  - Download new docker-compose.yml and new default.env
    - Merge your settings and make sure that backup-settings, PGID and PUID are right

## 2024-02-03

- Added changes to shutdown-webhook notifications (#120)
- Added rcon.sh again for having alias function calls that do not bloat the servermanager
- Refactored how webhook messages function are called and added alias functions
- Added a changelog, from various request resources

[Back to main](README.md#changelog)

```

`Dockerfile`:

```
FROM golang:1.22.0-bookworm AS rconclibuilder

WORKDIR /build

ENV CGO_ENABLED=0 \
    GORCON_RCONCLI_URL=https://github.com/gorcon/rcon-cli/archive/refs/tags/v0.10.3.tar.gz \
    GORCON_RCONCLI_DIR=rcon-cli-0.10.3 \
    GORCON_RCONCLI_TGZ=v0.10.3.tar.gz \
    GORCON_RCONCLI_TGZ_SHA1SUM=33ee8077e66bea6ee097db4d9c923b5ed390d583

RUN curl -fsSLO "$GORCON_RCONCLI_URL" \
    && echo "${GORCON_RCONCLI_TGZ_SHA1SUM}  ${GORCON_RCONCLI_TGZ}" | sha1sum -c - \
    && tar -xzf "$GORCON_RCONCLI_TGZ" \
    && mv "$GORCON_RCONCLI_DIR"/* ./ \
    && rm "$GORCON_RCONCLI_TGZ" \
    && rm -Rf "$GORCON_RCONCLI_DIR" \
    && go build -v ./cmd/gorcon

FROM debian:bookworm-slim AS supercronicverify

# Latest releases available at https://github.com/aptible/supercronic/releases
ENV SUPERCRONIC_URL=https://github.com/aptible/supercronic/releases/download/v0.2.34/supercronic-linux-amd64 \
    SUPERCRONIC=supercronic-linux-amd64 \
    SUPERCRONIC_SHA1SUM=e8631edc1775000d119b70fd40339a7238eece14

RUN apt-get update \
    && apt-get install -y --no-install-recommends --no-install-suggests ca-certificates curl \
    && apt-get autoremove -y --purge \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

RUN curl -fsSLO "$SUPERCRONIC_URL" \
    && echo "${SUPERCRONIC_SHA1SUM}  ${SUPERCRONIC}" | sha1sum -c - \
    && chmod +x "$SUPERCRONIC" \
    && mv "$SUPERCRONIC" "/usr/local/bin/${SUPERCRONIC}" \
    && ln -s "/usr/local/bin/${SUPERCRONIC}" /usr/local/bin/supercronic

FROM cm2network/steamcmd:root

LABEL maintainer="Sebastian Schmidt - https://github.com/jammsen/docker-palworld-dedicated-server"
LABEL org.opencontainers.image.authors="Sebastian Schmidt"
LABEL org.opencontainers.image.source="https://github.com/jammsen/docker-palworld-dedicated-server"

SHELL ["/bin/bash", "-o", "pipefail", "-c"]

ENV DEBIAN_FRONTEND=noninteractive \
    # Path-vars
    GAME_ROOT="/palworld" \
    GAME_PATH="/palworld/Pal" \
    GAME_SAVE_PATH="/palworld/Pal/Saved" \
    GAME_CONFIG_PATH="/palworld/Pal/Saved/Config/LinuxServer" \
    GAME_SETTINGS_FILE="/palworld/Pal/Saved/Config/LinuxServer/PalWorldSettings.ini" \
    GAME_ENGINE_FILE="/palworld/Pal/Saved/Config/LinuxServer/Engine.ini" \
    STEAMCMD_PATH="/home/steam/steamcmd" \
    RCON_CONFIG_FILE="/home/steam/steamcmd/rcon.yaml" \
    PALWORLD_TEMPLATE_FILE="/PalWorldSettings.ini.template" \
    BACKUP_PATH="/palworld/backups" \
    # Container-setttings
    PUID=1000 \
    PGID=1000 \
    TZ="Europe/Berlin" \
    # SteamCMD-settings
    ALWAYS_UPDATE_ON_START=true \
    STEAMCMD_VALIDATE_FILES=true \
    # Backup-settings
    BACKUP_ENABLED=true \
    BACKUP_ANNOUNCE_MESSAGES_ENABLED=true \
    BACKUP_CRON_EXPRESSION="0 * * * *" \
    BACKUP_RETENTION_POLICY=true \
    BACKUP_RETENTION_AMOUNT_TO_KEEP=72 \
    # Restart-settings
    RESTART_ENABLED=false \
    RESTART_DEBUG_OVERRIDE=false \
    RESTART_CRON_EXPRESSION="0 18 * * *" \
    # RCON-Playerdetection - NEEDS RCON ENABLED!
    RCON_PLAYER_DETECTION=true \
    RCON_PLAYER_DEBUG=false \
    RCON_PLAYER_DETECTION_STARTUP_DELAY=60 \
    RCON_PLAYER_DETECTION_CHECK_INTERVAL=15 \
    # Webhook-settings
    WEBHOOK_ENABLED=false \
    WEBHOOK_DEBUG_ENABLED=false \
    WEBHOOK_URL= \
    WEBHOOK_CONTENT_TITLE="Status update" \
    WEBHOOK_INFO_TITLE="Info" \
    WEBHOOK_INFO_DESCRIPTION="This is an info from the server" \
    WEBHOOK_INFO_COLOR="2849520" \
    WEBHOOK_INSTALL_TITLE="Installing server" \
    WEBHOOK_INSTALL_DESCRIPTION="Server is being installed" \
    WEBHOOK_INSTALL_COLOR="2849520" \
    WEBHOOK_RESTART_TITLE="Automatic restart" \
    WEBHOOK_RESTART_DELAYED_DESCRIPTION="The automatic gameserver restart has been triggered, if the server has still players, restart will be in 15 minutes" \
    WEBHOOK_RESTART_NOW_DESCRIPTION="The gameserver is empty, restarting now" \
    WEBHOOK_RESTART_COLOR="15593515" \
    WEBHOOK_START_TITLE="Server is starting" \
    WEBHOOK_START_DESCRIPTION="The gameserver is starting" \
    WEBHOOK_START_COLOR="2328576" \
    WEBHOOK_STOP_TITLE="Server has been stopped" \
    WEBHOOK_STOP_DESCRIPTION="The gameserver has been stopped" \
    WEBHOOK_STOP_COLOR="7413016" \
    WEBHOOK_UPDATE_TITLE="Updating server" \
    WEBHOOK_UPDATE_DESCRIPTION="Server is being updated" \
    WEBHOOK_UPDATE_COLOR="2849520" \
    # Config-setting - Warning: Every setting below here will be affected!
    SERVER_SETTINGS_MODE=manual \
    # Gameserver-start-settings
    MULTITHREAD_ENABLED=true \
    COMMUNITY_SERVER=true \
    # Engine.ini settings
    NETSERVERMAXTICKRATE=120 \
    # PalWorldSettings.ini settings
    DIFFICULTY=None \
    RANDOMIZER_TYPE=None \
    RANDOMIZER_SEED="" \
    IS_RANDOMIZER_PAL_LEVEL_RANDOM=false \
    DAYTIME_SPEEDRATE=1.000000 \
    NIGHTTIME_SPEEDRATE=1.000000 \
    EXP_RATE=1.000000 \
    PAL_CAPTURE_RATE=1.000000 \
    PAL_SPAWN_NUM_RATE=1.000000 \
    PAL_DAMAGE_RATE_ATTACK=1.000000 \
    PAL_DAMAGE_RATE_DEFENSE=1.000000 \
    PLAYER_DAMAGE_RATE_ATTACK=1.000000 \
    PLAYER_DAMAGE_RATE_DEFENSE=1.000000 \
    PLAYER_STOMACH_DECREASE_RATE=1.000000 \
    PLAYER_STAMINA_DECREACE_RATE=1.000000 \
    PLAYER_AUTO_HP_REGENE_RATE=1.000000 \
    PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP=1.000000 \
    PAL_STOMACH_DECREACE_RATE=1.000000 \
    PAL_STAMINA_DECREACE_RATE=1.000000 \
    PAL_AUTO_HP_REGENE_RATE=1.000000 \
    PAL_AUTO_HP_REGENE_RATE_IN_SLEEP=1.000000 \
    BUILD_OBJECT_HP_RATE=1.000000 \
    BUILD_OBJECT_DAMAGE_RATE=1.000000 \
    BUILD_OBJECT_DETERIORATION_DAMAGE_RATE=1.000000 \
    COLLECTION_DROP_RATE=1.000000 \
    COLLECTION_OBJECT_HP_RATE=1.000000 \
    COLLECTION_OBJECT_RESPAWN_SPEED_RATE=1.000000 \
    ENEMY_DROP_ITEM_RATE=1.000000 \
    DEATH_PENALTY=All \
    ENABLE_PLAYER_TO_PLAYER_DAMAGE=false \
    ENABLE_FRIENDLY_FIRE=false \
    ENABLE_INVADER_ENEMY=true \
    ACTIVE_UNKO=false \
    ENABLE_AIM_ASSIST_PAD=true \
    ENABLE_AIM_ASSIST_KEYBOARD=false \
    DROP_ITEM_MAX_NUM=3000 \
    DROP_ITEM_MAX_NUM_UNKO=100 \
    BASE_CAMP_MAX_NUM=128 \
    BASE_CAMP_WORKER_MAXNUM=15 \
    DROP_ITEM_ALIVE_MAX_HOURS=1.000000 \
    AUTO_RESET_GUILD_NO_ONLINE_PLAYERS=false \
    AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS=72.000000 \
    GUILD_PLAYER_MAX_NUM=20 \
    BASE_CAMP_MAX_NUM_IN_GUILD=4 \
    PAL_EGG_DEFAULT_HATCHING_TIME=72.000000 \
    WORK_SPEED_RATE=1.000000 \
    AUTO_SAVE_SPAN=30.000000 \
    IS_MULTIPLAY=false \
    IS_PVP=false \
    HARDCORE=false \
    PAL_LOST=false \
    CHARACTER_RECREATE_IN_HARDCORE=false \
    CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP=false \
    ENABLE_NON_LOGIN_PENALTY=true \
    ENABLE_FAST_TRAVEL=true \
    IS_START_LOCATION_SELECT_BY_MAP=true \
    EXIST_PLAYER_AFTER_LOGOUT=false \
    ENABLE_DEFENSE_OTHER_GUILD_PLAYER=false \
    INVISBIBLE_OTHER_GUILD_BASE_CAMP_AREA_FX=false \
    BUILD_AREA_LIMIT=false \
    ITEM_WEIGHT_RATE=1.000000 \
    COOP_PLAYER_MAX_NUM=4 \
    MAX_PLAYERS=32 \
    SERVER_NAME="jammsen-docker-generated-###RANDOM###" \
    SERVER_DESCRIPTION="Palworld-Dedicated-Server running in Docker by jammsen" \
    ADMIN_PASSWORD=adminPasswordHere \
    SERVER_PASSWORD=serverPasswordHere \
    PUBLIC_PORT=8211 \
    PUBLIC_IP= \
    RCON_ENABLED=true \
    RCON_PORT=25575 \
    REGION= \
    USEAUTH=true \
    BAN_LIST_URL=https://api.palworldgame.com/api/banlist.txt \
    RESTAPI_ENABLED=true \
    RESTAPI_PORT=8212 \
    SHOW_PLAYER_LIST=false \
    CHAT_POST_LIMIT_PER_MINUTE=10 \
    CROSSPLAY_PLATFORMS="(Steam,Xbox,PS5,Mac)" \
    ENABLE_WORLD_BACKUP=false \
    LOG_FORMAT_TYPE=Text \
    SUPPLY_DROP_SPAN=180 \
    ENABLE_PREDATOR_BOSS_PAL=true \
    MAX_BUILDING_LIMIT_NUM=0 \
    SERVER_REPLICATE_PAWN_CULL_DISTANCE=15000.000000 \
    ALLOW_GLOBAL_PALBOX_EXPORT=true \
    ALLOW_GLOBAL_PALBOX_IMPORT=false \
    EQUIPMENT_DURABILITY_DAMAGE_RATE=1.000000 \
    ITEM_CONTAINER_FORCE_MARK_DIRTY_INTERVAL=1.000000
    
EXPOSE 8211/udp
EXPOSE 8212/tcp
EXPOSE 25575/tcp

# Install minimum required packages for dedicated server
COPY --from=rconclibuilder /build/gorcon /usr/local/bin/rcon
COPY --from=supercronicverify /usr/local/bin/supercronic /usr/local/bin/supercronic

RUN apt-get update \
    && apt-get install -y --no-install-recommends --no-install-suggests procps xdg-user-dirs gettext-base \
    && apt-get autoremove -y --purge \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

COPY --chmod=755 entrypoint.sh /
COPY --chmod=755 scripts/ /scripts
COPY --chmod=755 includes/ /includes
COPY --chmod=644 configs/rcon.yaml /home/steam/steamcmd/rcon.yaml
COPY --chmod=644 configs/PalWorldSettings.ini.template /
COPY --chmod=755 gosu-amd64 /usr/local/bin/gosu

RUN mkdir -p "$BACKUP_PATH" \
    && ln -s /scripts/backupmanager.sh /usr/local/bin/backup \
    && ln -s /scripts/rconcli.sh /usr/local/bin/rconcli \
    && ln -s /scripts/restart.sh /usr/local/bin/restart \
    && gosu --version \
    && gosu nobody true

VOLUME ["${GAME_ROOT}"]

HEALTHCHECK --interval=10s --timeout=10s --start-period=30s --retries=3 \
    CMD pgrep -x "PalServer-Linux" >/dev/null 2>&1 || exit 1

ENTRYPOINT  ["/entrypoint.sh"]
CMD ["/scripts/servermanager.sh"]

```

`LICENSE`:

```
MIT License

Copyright (c) 2024 Sebastian Schmidt

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```

`README.md`:

```md
# Docker - Palworld Dedicated Server

[![Build-Status master](https://github.com/jammsen/docker-palworld-dedicated-server/actions/workflows/docker-build-and-push-prod.yml/badge.svg)](https://github.com/jammsen/docker-palworld-dedicated-server/actions/workflows/docker-build-and-push-prod.yml)
[![Build-Status develop](https://github.com/jammsen/docker-palworld-dedicated-server/actions/workflows/docker-build-and-push-develop.yml/badge.svg)](https://github.com/jammsen/docker-palworld-dedicated-server/actions/workflows/docker-build-and-push-develop.yml)
![Docker Pulls](https://img.shields.io/docker/pulls/jammsen/palworld-dedicated-server)
![Docker Stars](https://img.shields.io/docker/stars/jammsen/palworld-dedicated-server)
![Image Size](https://img.shields.io/docker/image-size/jammsen/palworld-dedicated-server/latest)
[![Discord](https://img.shields.io/discord/532141442731212810?logo=discord&label=Discord&link=https%3A%2F%2Fdiscord.gg%2F7tacb9Q6tj)](https://discord.gg/7tacb9Q6tj)

> [!TIP]
> Do you want to chat with the community?
>
> **[Join us on Discord](https://discord.gg/7tacb9Q6tj)**

This Docker image includes a Palworld Dedicated Server based on Linux and Docker.

___

## Table of Contents

- [Docker - Palworld Dedicated Server](#docker---palworld-dedicated-server)
  - [Table of Contents](#table-of-contents)
  - [How to ask for support for this Docker image](#how-to-ask-for-support-for-this-docker-image)
  - [Requirements](#requirements)
  - [Minimum system requirements](#minimum-system-requirements)
  - [Changelog](#changelog)
  - [Credits / Shoutout / Contributions](#credits--shoutout--contributions)
  - [Getting started](#getting-started)
  - [Environment variables](#environment-variables)
  - [Docker-Compose examples](#docker-compose-examples)
    - [Gameserver with RCON-CLI-Tool](#gameserver-with-rcon-cli-tool)
  - [Run RCON commands](#run-rcon-commands)
  - [Backup Manager](#backup-manager)
  - [Webhook integration](#webhook-integration)
    - [Supported events](#supported-events)
  - [Deploy with Helm](#deploy-with-helm)
  - [FAQ](#faq)
    - [Does this image support Xbox Dedicated Servers?](#does-this-image-support-xbox-dedicated-servers)
    - [How can I use the interactive console in Portainer with this image?](#how-can-i-use-the-interactive-console-in-portainer-with-this-image)
    - [How can I look into the config of my Palworld container?](#how-can-i-look-into-the-config-of-my-palworld-container)
    - [I'm seeing S\_API errors in my logs when I start the container?](#im-seeing-s_api-errors-in-my-logs-when-i-start-the-container)
    - [I'm using Apple silicon type of hardware, can I run this?](#im-using-apple-silicon-type-of-hardware-can-i-run-this)
    - [I changed the `BaseCampWorkerMaxNum` setting, why didn't this update the server?](#i-changed-the-basecampworkermaxnum-setting-why-didnt-this-update-the-server)
  - [Planned features in the future](#planned-features-in-the-future)
  - [Software used](#software-used)

## How to ask for support for this Docker image

If you need support for this Docker image:

- Feel free to create a new issue.
  - You can reference other issues if you're experiencing a similar problem via #issue-number.
- Follow the instructions and answer the questions of people who are willing to help you.
- Once your issue is resolved, please close it and please consider giving this repo and the [Docker-Hub repository](https://hub.docker.com/repository/docker/jammsen/palworld-dedicated-server) a star.
- Please note that any issue that has been inactive for a week will be closed due to inactivity.

Please avoid:

- Reusing or necroing issues. This can lead to spam and may harass participants who didn't agree to be part of your new problem.
- If this happens, we reserve the right to lock the issue or delete the comments, you have been warned!

## Requirements

To run this Docker image, you need a basic understanding of Docker, Docker-Compose, Linux, and Networking (Port-Forwarding/NAT).

## Minimum system requirements

| Resource | 1-8 players                   | 8-12+ players                  |
| -------- | ----------------------------- | ------------------------------ |
| CPU      | 4 CPU-Cores @ High GHz        | 6-8 CPU Cores @ High GHz       |
| RAM      | 8GB RAM Base + 2GB per player | 12GB RAM Base + 2GB per player |
| Storage  | 30GB                          | 30GB+                          |

## Changelog

You can find the [changelog here](CHANGELOG.md)

## Credits / Shoutout / Contributions

This 2 persons helped a lot along to way and made me and this project better! So if you do not like my version of the Docker image or looking for other features, feel free to check out the following 2 images:
- [@thejcpalma](https://github.com/thejcpalma) - [https://github.com/thejcpalma/palworld-dedicated-server-docker](https://github.com/thejcpalma/palworld-dedicated-server-docker) - [https://hub.docker.com/r/thejcpalma/palworld-dedicated-server](https://hub.docker.com/r/thejcpalma/palworld-dedicated-server) - â¤ï¸ðŸ«¡
- [@thijsvanloef](https://github.com/thijsvanloef) - [https://github.com/thijsvanloef/palworld-server-docker](https://github.com/thijsvanloef/palworld-server-docker) - [https://hub.docker.com/r/thijsvanloef/palworld-server-docker](https://hub.docker.com/r/thijsvanloef/palworld-server-docker) - â¤ï¸ðŸ«¡

## Getting started

1. Create a `game` sub-directory on your Docker-Node in your game-server-directory 
   - (Examples: `/srv/palworld`, `/opt/palworld` or `/home/username/palworld`)
   - This directory will be used to store the game server files, including configs and savegames
   - In older versions we asked you to setup permissions via CHMOD or CHOWN, this should not be needed anymore!
2. Set up Port-Forwarding or NAT for the ports in the Docker-Compose file
3. Pull the latest version of the image with `docker pull jammsen/palworld-dedicated-server:latest`
4. Download the [docker-compose.yml](docker-compose.yml) and [default.env](default.env)
5. Set up the `docker-compose.yml` and `default.env` to your liking
   - Make sure you setup PUID and PGID according to the user you want to use
     - **PUID and PGID 0 will error out, thats on purpose!**
     - if you use Docker as root, then you can just use 1000 inside the container
   - Refer to the [Environment-Variables](#environment-variables) section for more information
6. Start the container via `docker-compose up -d && docker-compose logs -f`
   - Watch the log, if no errors occur you can close the logs with ctrl+c
7. Now have fun and happy gaming! ðŸŽ®ðŸ˜‰

## Environment variables

See [this file](/docs/ENV_VARS.md) for the documentation

## Docker-Compose examples

### Gameserver with RCON-CLI-Tool

See [example docker-compose.yml](docker-compose.yml).

## Run RCON commands

> [!NOTE]
> Please research the RCON-Commands on the official source: https://tech.palworldgame.com/settings-and-operation/commands

You can use `docker exec palworld-dedicated-server rconcli <command>` right on your terminal/shell.

```shell
$ docker exec palworld-dedicated-server rconcli showplayers
name,playeruid,steamid

$ docker exec palworld-dedicated-server rconcli info
Welcome to Pal Server[v0.1.4.1] jammsen-docker-generated-20384

$ docker exec palworld-dedicated-server rconcli save
Complete Save
```

## Backup Manager

> [!WARNING]
> If RCON is disabled, the backup manager won't do saves via RCON before creating a backup and will report warnings.
> This means that the backup will be created from the last auto-save of the server.
> This can lead to data-loss and/or savegame corruption.
>
> **Recommendation:** Please make sure that RCON is enabled before using the backup manager.

> [!WARNING]
> Please use in the following part always the `-user steam` option or your files will written as root


Usage: `docker exec -user steam palworld-dedicated-server backup [command] [arguments]`

| Command | Argument           | Required/Optional | Default Value                     | Values           | Description                                                                                                                                                                          |
| ------- | ------------------ | ----------------- | --------------------------------- | ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| create  | N/A                | N/A               | N/A                               | N/A              | Creates a backup.                                                                                                                                                                    |
| list    | `<number_to_list>` | Optional          | N/A                               | Positive numbers | Lists all backups.<br>If `<number_to_list>` is specified, only the most<br>recent `<number_to_list>` backups are listed.                                                             |
| clean   | `<number_to_keep>` | Optional          | `BACKUP_RETENTION_AMOUNT_TO_KEEP` | Positive numbers | Cleans up backups.<br>If `<number_to_list>` is specified, cleans and keeps<br>the most recent`<number_to_keep>` backups.<br>If not, default to `BACKUP_RETENTION_AMOUNT_TO_KEEP` var |

Examples:

```shell
$ docker exec -user steam palworld-dedicated-server backup
> Backup 'saved-20240203_032855.tar.gz' created successfully.
```

```shell
$ docker exec -user steam palworld-dedicated-server backup list
> Listing 2 backup file(s)!
2024-02-03 03:28:55 | saved-20240203_032855.tar.gz
2024-02-03 03:28:00 | saved-20240203_032800.tar.gz
```

```shell
$ docker exec -user steam palworld-dedicated-server backup_clean 3
> 1 backup(s) cleaned, keeping 2 backups(s).
```

```shell
$ docker exec -user steam palworld-dedicated-server backup_list   
> Listing 1 out of backup 2 file(s).
2024-02-03 03:30:00 | saved-20240203_033000.tar.gz
```

## Webhook integration

To enable webhook integrations, you need to set the following environment variables in the `default.env`:

```shell
WEBHOOK_ENABLED=true
WEBHOOK_URL="https://your.webhook.url"
```

After enabling the server should send messages in a Discord-Compatible way to your webhook url.

> You can find more details about these variables [here](/docs/ENV_VARS.md#webhook-settings).

### Supported events

- Server starting 
  - This even is not server started. Just add like 5 seconds on top and the server is online
- Server stopped
- Server updating
- Server updating and validating

## Deploy with Helm

A Helm chart to deploy this container can be found at [palworld-helm](https://github.com/caleb-devops/palworld-helm).

## FAQ

### Does this image support Xbox Dedicated Servers?

> Yes just change the value from `ALLOW_CONNECT_PLATFORM` from Steam to Xbox. See here for more documentation: https://tech.palworldgame.com/getting-started/for-xbox-dedicated-server

### How can I use the interactive console in Portainer with this image?

> You can run this `docker exec -ti palworld-dedicated-server bash' or you could navigate to the **"Stacks"** tab in Portainer, select your stack, and click on the container name. Then click on the **"Exec console"** button.

### How can I look into the config of my Palworld container?

> You can run this `docker exec -ti palworld-dedicated-server cat /palworld/Pal/Saved/Config/LinuxServer/PalWorldSettings.ini` and it will show you the config inside the container.

### I'm seeing S_API errors in my logs when I start the container?

> Errors like `[S_API FAIL] Tried to access Steam interface SteamUser021 before SteamAPI_Init succeeded.` are safe to ignore.

### I'm using Apple silicon type of hardware, can I run this?

> You can try to insert in your docker-compose file this parameter `platform: linux/amd64` at the palworld service. This isn't a special fix for Apple silicon, but to run on other than x86 hosts. The support for arm exists only by enforcing x86 emulation, if that isn't to host already. Rosetta is doing the translation/emulation.

### I changed the `BaseCampWorkerMaxNum` setting, why didn't this update the server?

> This is a confirmed bug. Changing `BaseCampWorkerMaxNum` in the `PalWorldSettings.ini` has no effect on the server. There are tools out there to help with this, like this one: <https://github.com/legoduded/palworld-worldoptions>

> [!WARNING]
> Adding `WorldOption.sav` will break `PalWorldSetting.ini`. So any new changes to the settings (either on the file or via ENV VARS), you will have to create a new `WorldOption.sav` and update it every time for those changes to have an effect.

## Planned features in the future

- Feel free to suggest something. Under `Issues` there is a Feature Request issue-type.

## Software used

- CM2Network SteamCMD - Debian-based (Officially recommended by Valve - https://developer.valvesoftware.com/wiki/SteamCMD#Docker)
- Supercronic - https://github.com/aptible/supercronic
- rcon-cli - https://github.com/gorcon/rcon-cli
- Palworld Dedicated Server (APP-ID: 2394010 - https://steamdb.info/app/2394010/config/)

```

`configs/PalWorldSettings.ini.template`:

```template
[/Script/Pal.PalGameWorldSettings]
OptionSettings=(Difficulty=${DIFFICULTY},RandomizerType=${RANDOMIZER_TYPE},RandomizerSeed="${RANDOMIZER_SEED}",bIsRandomizerPalLevelRandom=${IS_RANDOMIZER_PAL_LEVEL_RANDOM},DayTimeSpeedRate=${DAYTIME_SPEEDRATE},NightTimeSpeedRate=${NIGHTTIME_SPEEDRATE},ExpRate=${EXP_RATE},PalCaptureRate=${PAL_CAPTURE_RATE},PalSpawnNumRate=${PAL_SPAWN_NUM_RATE},PalDamageRateAttack=${PAL_DAMAGE_RATE_ATTACK},PalDamageRateDefense=${PAL_DAMAGE_RATE_DEFENSE},PlayerDamageRateAttack=${PLAYER_DAMAGE_RATE_ATTACK},PlayerDamageRateDefense=${PLAYER_DAMAGE_RATE_DEFENSE},PlayerStomachDecreaceRate=${PLAYER_STOMACH_DECREASE_RATE},PlayerStaminaDecreaceRate=${PLAYER_STAMINA_DECREACE_RATE},PlayerAutoHPRegeneRate=${PLAYER_AUTO_HP_REGENE_RATE},PlayerAutoHpRegeneRateInSleep=${PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP},PalStomachDecreaceRate=${PAL_STOMACH_DECREACE_RATE},PalStaminaDecreaceRate=${PAL_STAMINA_DECREACE_RATE},PalAutoHPRegeneRate=${PAL_AUTO_HP_REGENE_RATE},PalAutoHpRegeneRateInSleep=${PAL_AUTO_HP_REGENE_RATE_IN_SLEEP},BuildObjectHpRate=${BUILD_OBJECT_HP_RATE},BuildObjectDamageRate=${BUILD_OBJECT_DAMAGE_RATE},BuildObjectDeteriorationDamageRate=${BUILD_OBJECT_DETERIORATION_DAMAGE_RATE},CollectionDropRate=${COLLECTION_DROP_RATE},CollectionObjectHpRate=${COLLECTION_OBJECT_HP_RATE},CollectionObjectRespawnSpeedRate=${COLLECTION_OBJECT_RESPAWN_SPEED_RATE},EnemyDropItemRate=${ENEMY_DROP_ITEM_RATE},DeathPenalty=${DEATH_PENALTY},bEnablePlayerToPlayerDamage=${ENABLE_PLAYER_TO_PLAYER_DAMAGE},bEnableFriendlyFire=${ENABLE_FRIENDLY_FIRE},bEnableInvaderEnemy=${ENABLE_INVADER_ENEMY},bActiveUNKO=${ACTIVE_UNKO},bEnableAimAssistPad=${ENABLE_AIM_ASSIST_PAD},bEnableAimAssistKeyboard=${ENABLE_AIM_ASSIST_KEYBOARD},DropItemMaxNum=${DROP_ITEM_MAX_NUM},DropItemMaxNum_UNKO=${DROP_ITEM_MAX_NUM_UNKO},BaseCampMaxNum=${BASE_CAMP_MAX_NUM},BaseCampWorkerMaxNum=${BASE_CAMP_WORKER_MAXNUM},DropItemAliveMaxHours=${DROP_ITEM_ALIVE_MAX_HOURS},bAutoResetGuildNoOnlinePlayers=${AUTO_RESET_GUILD_NO_ONLINE_PLAYERS},AutoResetGuildTimeNoOnlinePlayers=${AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS},GuildPlayerMaxNum=${GUILD_PLAYER_MAX_NUM},BaseCampMaxNumInGuild=${BASE_CAMP_MAX_NUM_IN_GUILD},PalEggDefaultHatchingTime=${PAL_EGG_DEFAULT_HATCHING_TIME},WorkSpeedRate=${WORK_SPEED_RATE},AutoSaveSpan=${AUTO_SAVE_SPAN},bIsMultiplay=${IS_MULTIPLAY},bIsPvP=${IS_PVP},bHardcore=${HARDCORE},bPalLost=${PAL_LOST},bCharacterRecreateInHardcore=${CHARACTER_RECREATE_IN_HARDCORE},bCanPickupOtherGuildDeathPenaltyDrop=${CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP},bEnableNonLoginPenalty=${ENABLE_NON_LOGIN_PENALTY},bEnableFastTravel=${ENABLE_FAST_TRAVEL},bIsStartLocationSelectByMap=${IS_START_LOCATION_SELECT_BY_MAP},bExistPlayerAfterLogout=${EXIST_PLAYER_AFTER_LOGOUT},bEnableDefenseOtherGuildPlayer=${ENABLE_DEFENSE_OTHER_GUILD_PLAYER},bInvisibleOtherGuildBaseCampAreaFX=${INVISBIBLE_OTHER_GUILD_BASE_CAMP_AREA_FX},bBuildAreaLimit=${BUILD_AREA_LIMIT},ItemWeightRate=${ITEM_WEIGHT_RATE},CoopPlayerMaxNum=${COOP_PLAYER_MAX_NUM},ServerPlayerMaxNum=${MAX_PLAYERS},ServerName="${SERVER_NAME}",ServerDescription="${SERVER_DESCRIPTION}",AdminPassword="${ADMIN_PASSWORD}",ServerPassword="${SERVER_PASSWORD}",PublicPort=${PUBLIC_PORT},PublicIP="${PUBLIC_IP}",RCONEnabled=${RCON_ENABLED},RCONPort=${RCON_PORT},Region="${REGION}",bUseAuth=${USEAUTH},BanListURL="${BAN_LIST_URL}",RESTAPIEnabled=${RESTAPI_ENABLED},RESTAPIPort=${RESTAPI_PORT},bShowPlayerList=${SHOW_PLAYER_LIST},ChatPostLimitPerMinute=${CHAT_POST_LIMIT_PER_MINUTE},CrossplayPlatforms=${CROSSPLAY_PLATFORMS},bIsUseBackupSaveData=${ENABLE_WORLD_BACKUP},LogFormatType=${LOG_FORMAT_TYPE},SupplyDropSpan=${SUPPLY_DROP_SPAN},EnablePredatorBossPal=${ENABLE_PREDATOR_BOSS_PAL},MaxBuildingLimitNum=${MAX_BUILDING_LIMIT_NUM},ServerReplicatePawnCullDistance=${SERVER_REPLICATE_PAWN_CULL_DISTANCE},bAllowGlobalPalboxExport=${ALLOW_GLOBAL_PALBOX_EXPORT},bAllowGlobalPalboxImport=${ALLOW_GLOBAL_PALBOX_IMPORT},EquipmentDurabilityDamageRate=${EQUIPMENT_DURABILITY_DAMAGE_RATE},ItemContainerForceMarkDirtyInterval=${ITEM_CONTAINER_FORCE_MARK_DIRTY_INTERVAL})

```

`configs/rcon.yaml`:

```yaml
default:
  address: "127.0.0.1:${RCON_PORT}"
  password: "${ADMIN_PASSWORD}"

```

`default.env`:

```env
# Container-setttings
PUID=1000
PGID=1000
TZ=Europe/Berlin
# SteamCMD-settings
ALWAYS_UPDATE_ON_START=true
STEAMCMD_VALIDATE_FILES=true
# Backup-settings
BACKUP_ENABLED=true
BACKUP_ANNOUNCE_MESSAGES_ENABLED=true
BACKUP_CRON_EXPRESSION=0 * * * *
BACKUP_RETENTION_POLICY=true
BACKUP_RETENTION_AMOUNT_TO_KEEP=72
# Restart-settings
RESTART_ENABLED=false
RESTART_DEBUG_OVERRIDE=false
RESTART_CRON_EXPRESSION="0 18 * * *"
# RCON-Playerdetection - NEEDS RCON ENABLED!
RCON_PLAYER_DETECTION=true
RCON_PLAYER_DEBUG=false
RCON_PLAYER_DETECTION_STARTUP_DELAY=60
RCON_PLAYER_DETECTION_CHECK_INTERVAL=15
# Webhook-settings
WEBHOOK_ENABLED=false
WEBHOOK_DEBUG_ENABLED=false
WEBHOOK_URL="YOUR-URL-IN-HERE"
WEBHOOK_CONTENT_TITLE="Status update"
WEBHOOK_INFO_TITLE="Info"
WEBHOOK_INFO_DESCRIPTION="This is an info from the server"
WEBHOOK_INFO_COLOR="2849520"
WEBHOOK_INSTALL_TITLE="Installing server"
WEBHOOK_INSTALL_DESCRIPTION="Server is being installed"
WEBHOOK_INSTALL_COLOR="2849520"
WEBHOOK_RESTART_TITLE="Server is restarting soon"
WEBHOOK_RESTART_DESCRIPTION="The gameserver is restarting in 15 minutes"
WEBHOOK_RESTART_COLOR="15593515"
WEBHOOK_START_TITLE="Server is starting"
WEBHOOK_START_DESCRIPTION="The gameserver is starting"
WEBHOOK_START_COLOR="2328576"
WEBHOOK_STOP_TITLE="Server has been stopped"
WEBHOOK_STOP_DESCRIPTION="The gameserver has been stopped"
WEBHOOK_STOP_COLOR="7413016"
WEBHOOK_UPDATE_TITLE="Updating server"
WEBHOOK_UPDATE_DESCRIPTION="Server is being updated"
WEBHOOK_UPDATE_COLOR="2849520"
# Config-setting - Warning: Every setting below here will be affected!
SERVER_SETTINGS_MODE=auto
# Gameserver-start-settings
MULTITHREAD_ENABLED=true
COMMUNITY_SERVER=true
# Engine.ini settings
NETSERVERMAXTICKRATE=120
# PalWorldSettings.ini settings
DIFFICULTY=None
RANDOMIZER_TYPE=None
RANDOMIZER_SEED=""
IS_RANDOMIZER_PAL_LEVEL_RANDOM=false
DAYTIME_SPEEDRATE=1.000000
NIGHTTIME_SPEEDRATE=1.000000
EXP_RATE=1.000000
PAL_CAPTURE_RATE=1.000000
PAL_SPAWN_NUM_RATE=1.000000
PAL_DAMAGE_RATE_ATTACK=1.000000
PAL_DAMAGE_RATE_DEFENSE=1.000000
PLAYER_DAMAGE_RATE_ATTACK=1.000000
PLAYER_DAMAGE_RATE_DEFENSE=1.000000
PLAYER_STOMACH_DECREASE_RATE=1.000000
PLAYER_STAMINA_DECREACE_RATE=1.000000
PLAYER_AUTO_HP_REGENE_RATE=1.000000
PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP=1.000000
PAL_STOMACH_DECREACE_RATE=1.000000
PAL_STAMINA_DECREACE_RATE=1.000000
PAL_AUTO_HP_REGENE_RATE=1.000000
PAL_AUTO_HP_REGENE_RATE_IN_SLEEP=1.000000
BUILD_OBJECT_HP_RATE=1.000000
BUILD_OBJECT_DAMAGE_RATE=1.000000
BUILD_OBJECT_DETERIORATION_DAMAGE_RATE=1.000000
COLLECTION_DROP_RATE=1.000000
COLLECTION_OBJECT_HP_RATE=1.000000
COLLECTION_OBJECT_RESPAWN_SPEED_RATE=1.000000
ENEMY_DROP_ITEM_RATE=1.000000
DEATH_PENALTY=All
ENABLE_PLAYER_TO_PLAYER_DAMAGE=false
ENABLE_FRIENDLY_FIRE=false
ENABLE_INVADER_ENEMY=true
ACTIVE_UNKO=false
ENABLE_AIM_ASSIST_PAD=true
ENABLE_AIM_ASSIST_KEYBOARD=false
DROP_ITEM_MAX_NUM=3000
DROP_ITEM_MAX_NUM_UNKO=100
BASE_CAMP_MAX_NUM=128
BASE_CAMP_WORKER_MAXNUM=15
DROP_ITEM_ALIVE_MAX_HOURS=1.000000
AUTO_RESET_GUILD_NO_ONLINE_PLAYERS=false
AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS=72.000000
GUILD_PLAYER_MAX_NUM=20
BASE_CAMP_MAX_NUM_IN_GUILD=4
PAL_EGG_DEFAULT_HATCHING_TIME=72.000000
WORK_SPEED_RATE=1.000000
AUTO_SAVE_SPAN=30.000000
IS_MULTIPLAY=false
IS_PVP=false
HARDCORE=false
PAL_LOST=false
CHARACTER_RECREATE_IN_HARDCORE=false
CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP=false
ENABLE_NON_LOGIN_PENALTY=true
ENABLE_FAST_TRAVEL=true
IS_START_LOCATION_SELECT_BY_MAP=true
EXIST_PLAYER_AFTER_LOGOUT=false
ENABLE_DEFENSE_OTHER_GUILD_PLAYER=false
INVISBIBLE_OTHER_GUILD_BASE_CAMP_AREA_FX=false
BUILD_AREA_LIMIT=false
ITEM_WEIGHT_RATE=1.000000
COOP_PLAYER_MAX_NUM=4
MAX_PLAYERS=32
SERVER_NAME=jammsen-docker-generated-###RANDOM###
SERVER_DESCRIPTION=Palworld-Dedicated-Server running in Docker by jammsen
ADMIN_PASSWORD=adminPasswordHere
SERVER_PASSWORD=serverPasswordHere
PUBLIC_PORT=8211
PUBLIC_IP=
RCON_ENABLED=true
RCON_PORT=25575
REGION=
USEAUTH=true
BAN_LIST_URL=https://api.palworldgame.com/api/banlist.txt
RESTAPI_ENABLED=true
RESTAPI_PORT=8212
SHOW_PLAYER_LIST=false
CHAT_POST_LIMIT_PER_MINUTE=10
CROSSPLAY_PLATFORMS="(Steam,Xbox,PS5,Mac)"
ENABLE_WORLD_BACKUP=false
LOG_FORMAT_TYPE=Text
SUPPLY_DROP_SPAN=180
ENABLE_PREDATOR_BOSS_PAL=true
MAX_BUILDING_LIMIT_NUM=0
SERVER_REPLICATE_PAWN_CULL_DISTANCE=15000.000000
ALLOW_GLOBAL_PALBOX_EXPORT=true
ALLOW_GLOBAL_PALBOX_IMPORT=false
EQUIPMENT_DURABILITY_DAMAGE_RATE=1.000000
ITEM_CONTAINER_FORCE_MARK_DIRTY_INTERVAL=1.000000

```

`docker-build.sh`:

```sh
#!/usr/bin/env bash
docker build "$@" --tag=jammsen/palworld-dedicated-server:latest .
```

`docker-compose.yml`:

```yml
services:
  palworld-dedicated-server:
    container_name: palworld-dedicated-server
    image: jammsen/palworld-dedicated-server:latest
    restart: unless-stopped
    logging:
      driver: "local"
      options:
        max-size: "10m"
        max-file: "3"
    ports:
      - target: 8211 # Gamerserver port inside of the container
        published: 8211 # Gamerserver port on your host
        protocol: udp
        mode: host
      - target: 8212 # Gameserver API port inside of the container
        published: 8212 # Gameserver API port on your host
        protocol: tcp
        mode: host
      - target: 25575 # RCON port inside of the container
        published: 25575 # RCON port on your host
        protocol: tcp
        mode: host
    env_file:
      - ./default.env
    volumes:
      - ./game:/palworld

```

`docs/ENV_VARS.md`:

```md
# Environment Variables

[Back to main](../README.md#environment-variables)

In this section you will find a lot of environment variables to control your container-behavior and gameserver-settings. Due to the extensive control options, the settings are split into two parts for documentation: **Container-Settings** and **Gameserver-Settings**.

## Container-Settings

These settings control the behavior of the Docker container:

> **Important:** If you want to change the server settings via environment variables use the default value (`auto`) for the environment variable `SERVER_SETTINGS_MODE`, otherwise change it to `manual` and edit the config file directly.

| Variable                             | Description                                                                                                                                         | Default value                  | Allowed values                        |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ | ------------------------------------- |
| PUID                                 | PUID stands for Process User ID, also known as UID                                                                                                  | 1000                           | Integer                               |
| PGID                                 | PGID stands for Process Group ID, also known as GID                                                                                                 | 1000                           | Integer                               |
| TZ                                   | Timezone used for time stamping server backups                                                                                                      | Europe/Berlin                  | See [TZ identifiers](#tz-identifiers) |
| ALWAYS_UPDATE_ON_START               | Updates the server on startup                                                                                                                       | true                           | Boolean                               |
| STEAMCMD_VALIDATE_FILES              | Set to enabled SteamCMD will also validate the gameserver files, making sure nothing is corrupted and also overwrite any file changes of the source | true                           | Boolean                               |
| BACKUP_ENABLED                       | Backup function, creates backups in your `game` directory                                                                                           | true                           | Boolean                               |
| BACKUP_ANNOUNCE_MESSAGES_ENABLED     | While creating backups, this controls if announces are posted to the gameserver; Important: Errors will always be announced!                        | true                           | Boolean                               |
| BACKUP_CRON_EXPRESSION               | Needs a Cron-Expression - See [Cron expression](#cron-expression)                                                                                   | 0 * * * * (meaning every hour) | Cron-Expression                       |
| BACKUP_RETENTION_POLICY              | Set to enabled, will cleanup old backups                                                                                                            | true                           | Boolean                               |
| BACKUP_RETENTION_AMOUNT_TO_KEEP      | Defines how many backups in numbers to keep                                                                                                         | 72                             | Integer                               |
| RESTART_ENABLED                      | Automatic restarts the server                                                                                                                       | false                          | Boolean                               |
| RESTART_DEBUG_OVERRIDE               | Automatic restarts down to 15 seconds instead of 15 minutes                                                                                         | false                          | Boolean                               |
| RESTART_CRON_EXPRESSION              | Needs a Cron-Expression - See [Cron expression](#cron-expression)                                                                                   | 0 3,15 * * *                   | Cron-Expression                       |
| RCON_PLAYER_DETECTION                | Set to enabled will send player join and leaves to console, rcon and webhooks, NEEDS `RCON_ENABLED`                                                 | true                           | Boolean                               |
| RCON_PLAYER_DEBUG                    | Set to enabled will post debug messages to the console output                                                                                       | false                          | Boolean                               |
| RCON_PLAYER_DETECTION_STARTUP_DELAY  | Initial delay for start checking for players, consider steam-updates and server start up in seconds                                                 | 60                             | Integer                               |
| RCON_PLAYER_DETECTION_CHECK_INTERVAL | Interval in seconds to wait for next check in the infinite loop                                                                                     | 15                             | Integer                               |
| WEBHOOK_ENABLED                      | Set to enabled will send webhook notifications, NEEDS `WEBHOOK_URL`                                                                                 | false                          | Boolean                               |
| WEBHOOK_DEBUG_ENABLED                | Set to enabled will enable feedback of curl and not use --silent                                                                                    | false                          | Boolean                               |
| WEBHOOK_URL                          | Defines the url the webhook to send data to                                                                                                         |                                | Url                                   |
| WEBHOOK_CONTENT_TITLE                | If set to a value this will add the "content" segment for the webhook, set to empty removes it                                                      | Status update                  | String                                |
| WEBHOOK_*                            | See below the table "Webhook environment variables"                                                                                                 |                                | String                                |
| SERVER_SETTINGS_MODE                 | Determines whether settings can be modified via environment variables or via file, except `COMMUNITY_SERVER` and `MULTITHREAD_ENABLED`!             | `auto`                         | Enum                                  |

### SERVER_SETTINGS_MODE explained

SERVER_SETTINGS_MODE accepts 2 values:
- `auto`: Settings are modified only by environment variables, manual edits will be ignored
- `rcononly`: RCON-Settings are modified by environment variables (RCON_ENABLED, RCON_PORT, ADMIN_PASSWORD), everything else has to be done by editing the file directly, other environment variables are ignored
- `manual`: Settings are modified only by editing the file directly, environment variables are ignored


### Webhook environment variables

> [!WARNING]
> **IMPORTANT: Don't use Hex-Colors!**
>
> Go to the page, search for the Hex-Color, after that add the DECIMAL-Representation to the color field or it will break for Discord!
> >https://www.spycolor.com/

There are a lot of Variables to setup for messages and colors to send to the webhook url in the `default.env`

### TZ identifiers

The `TZ` setting affects logging output and the backup function. [TZ identifiers](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#Time_Zone_abbreviations) are a format for defining a timezone near you.

### Cron expression

The `BACKUP_CRON_EXPRESSION` setting affects the backup function. In a Cron-Expression, you define an interval for when to run jobs. This image uses Supercronic for crons, see https://github.com/aptible/supercronic#crontab-format or https://crontab-generator.org

## Gameserver-Settings

This section lists all the settings currently adjustable via Docker environment variables, based on the **order** and **contents of the DefaultPalWorldSettings.ini**.

Information sources and credits to the following websites:

- [Palworld Tech Guide](https://tech.palworldgame.com/settings-and-operation/configuration) for the game server documentation
- [PalworldSettingGenerator](https://dysoncheng.github.io/PalWorldSettingGenerator/setting.html) for variable descriptions

> **Important:** Please note that all of this is subject to change. **The game is still in early access.**
>
> To change a setting, you can set the environment variable to the value you want. If the environment variable is not set or is blank, the default value will be used.

| Variable                                  | Game setting                         | Description                                                                                                                                                                     | Default value                                          | Allowed value |
| ----------------------------------------- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------ | ------------- |
| MULTITHREAD_ENABLED                       | -                                    | Sets options for "Improved multi-threaded CPU performance"                                                                                                                      | true                                                   | Boolean       |
| COMMUNITY_SERVER                          | -                                    | Set to enabled, the server will appear in the Community-Serverlist                                                                                                              | true                                                   | Boolean       |
| NETSERVERMAXTICKRATE                      | NetServerMaxTickRate                 | Changes the TickRate of the server, be very careful with this setting!                                                                                                          | 120                                                    | 30-120        |
| DIFFICULTY                                | Difficulty                           | Choose one of the following:<br>`None`<br>`Normal`<br>`Difficult`                                                                                                               | None                                                   | Enum          |
| RANDOMIZER_TYPE                           | RandomizerType                       | None given                                                                                                                                                                      | None                                                   | Enum          |
| RANDOMIZER_SEED                           | RandomizerSeed                       | None given                                                                                                                                                                      | ""                                                     | String        |
| IS_RANDOMIZER_PAL_LEVEL_RANDOM            | bIsRandomizerPalLevelRandom          | If the parameter has been set to true, Wild pals level is fully randomized. set to false, Randomized within a level optimized with the area.                                    | false                                                  | Boolean       |
| DAYTIME_SPEEDRATE                         | DayTimeSpeedRate                     | Day Time Speed: The lower this number is, the longer each day will last.                                                                                                        | 1.000000                                               | Float         |
| NIGHTTIME_SPEEDRATE                       | NightTimeSpeedRate                   | Night Time Speed: The lower this number is, the longer each night will last.                                                                                                    | 1.000000                                               | Float         |
| EXP_RATE                                  | ExpRate                              | EXP Rate: The higher this number is, the more EXP you will gain.                                                                                                                | 1.000000                                               | Float         |
| PAL_CAPTURE_RATE                          | PalCaptureRate                       | Pal Capture Rate: The higher this number is, the greater your chance of capturing a Pal.                                                                                        | 1.000000                                               | Float         |
| PAL_SPAWN_NUM_RATE                        | PalSpawnNumRate                      | Pal Appearance Rate: The higher this number is, the more Pals that will spawn.                                                                                                  | 1.000000                                               | Float         |
| PAL_DAMAGE_RATE_ATTACK                    | PalDamageRateAttack                  | Damage From Pals Multiplier: The lower this number is, the less damage you and your Pals will take from wild Pals during combat. Also decreases the damage output of your Pals. | 1.000000                                               | Float         |
| PAL_DAMAGE_RATE_DEFENSE                   | PalDamageRateDefense                 | Damage To Pals Multiplier: The higher this number is, the more damage you and your Pals will do to wild Pals during combat. Also increases the damage your Pals receive.        | 1.000000                                               | Float         |
| PLAYER_DAMAGE_RATE_ATTACK                 | PlayerDamageRateAttack               | Damage From Player Multiplier: The higher this number is, the greater the damage output of your character.                                                                      | 1.000000                                               | Float         |
| PLAYER_DAMAGE_RATE_DEFENSE                | PlayerDamageRateDefense              | Damage To Player Multiplier: The lower this number is, the less damage your character will take during combat.                                                                  | 1.000000                                               | Float         |
| PLAYER_STOMACH_DECREASE_RATE              | PlayerStomachDecreaceRate            | Player Hunger Depletion Rate: The lower this number is, the longer it will take for your character to get hungry.                                                               | 1.000000                                               | Float         |
| PLAYER_STAMINA_DECREACE_RATE              | PlayerStaminaDecreaceRate            | Player Stamina Reduction Rate: The lower this number is, the longer it will take for your character to run out of stamina.                                                      | 1.000000                                               | Float         |
| PLAYER_AUTO_HP_REGENE_RATE                | PlayerAutoHPRegeneRate               | Player Auto HP Regeneration Rate: The higher this number is, the faster your character will recover health.                                                                     | 1.000000                                               | Float         |
| PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP       | PlayerAutoHpRegeneRateInSleep        | Player Sleep HP Regeneration Rate: The higher this number is, the faster your character will recover health when sleeping.                                                      | 1.000000                                               | Float         |
| PAL_STOMACH_DECREACE_RATE                 | PalStomachDecreaceRate               | Pal Hunger Depletion Rate: The lower this number is, the longer it will take for your Pals to get hungry.                                                                       | 1.000000                                               | Float         |
| PAL_STAMINA_DECREACE_RATE                 | PalStaminaDecreaceRate               | Pal Stamina Reduction Rate: The lower this number is, the longer it will take for your Pals stamina to run out.                                                                 | 1.000000                                               | Float         |
| PAL_AUTO_HP_REGENE_RATE                   | PalAutoHPRegeneRate                  | Pal Auto HP Regeneration Rate: The higher this number is, the faster your Pal will recover health.                                                                              | 1.000000                                               | Float         |
| PAL_AUTO_HP_REGENE_RATE_IN_SLEEP          | PalAutoHpRegeneRateInSleep           | Pal Sleep Health Regeneration Rate: The higher this number is, the faster your Pal will recover health when inside the Palbox.                                                  | 1.000000                                               | Float         |
| BUILD_OBJECT_HP_RATE                      | BuildObjectHpRate                    | None given                                                                                                                                                                      | 1.000000                                               | Float         |
| BUILD_OBJECT_DAMAGE_RATE                  | BuildObjectDamageRate                | Damage To Structure Multiplier: The lower this number is, the less damage your structures and builds will take.                                                                 | 1.000000                                               | Float         |
| BUILD_OBJECT_DETERIORATION_DAMAGE_RATE    | BuildObjectDeteriorationDamageRate   | Structure Deterioration Rate: The lower this number is, the slower the deterioration will be for structures and builds, with 0 meaning no deterioration.                        | 1.000000                                               | Float         |
| COLLECTION_DROP_RATE                      | CollectionDropRate                   | Gatherable Items Multiplier: The higher this number is, the more resources you will receive from mining, lumbering etc.                                                         | 1.000000                                               | Float         |
| COLLECTION_OBJECT_HP_RATE                 | CollectionObjectHpRate               | Gatherable Objects HP Multiplier: The lower this number is, the faster objects/resources like rocks will disintegrate when mining.                                              | 1.000000                                               | Float         |
| COLLECTION_OBJECT_RESPAWN_SPEED_RATE      | CollectionObjectRespawnSpeedRate     | Gatherable Objects Respawn Interval: The lower this number is, the faster resources will respawn.                                                                               | 1.000000                                               | Float         |
| ENEMY_DROP_ITEM_RATE                      | EnemyDropItemRate                    | Dropped Items Multiplier: The higher this number is, the more items/materials you will receive when defeating a Pal.                                                            | 1.000000                                               | Float         |
| DEATH_PENALTY                             | DeathPenalty                         | `None` : No lost<br> `Item` : Lost item without equipment<br>`ItemAndEquipment` : Lost item and equipment<br>`All`: Lost All item,   equipment, pal(in inventory)               | All                                                    | Enum          |
| ENABLE_PLAYER_TO_PLAYER_DAMAGE            | bEnablePlayerToPlayerDamage          | Allows players to cause damage to players                                                                                                                                       | false                                                  | Boolean       |
| ENABLE_FRIENDLY_FIRE                      | bEnableFriendlyFire                  | Allow friendly fire                                                                                                                                                             | false                                                  | Boolean       |
| ENABLE_INVADER_ENEMY                      | bEnableInvaderEnemy                  | Enable Raid Events: This setting will determine whether your bases are raided by Pals, syndicate members etc.                                                                   | true                                                   | Boolean       |
| ACTIVE_UNKO                               | bActiveUNKO                          | Enable UNKO                                                                                                                                                                     | false                                                  | Boolean       |
| ENABLE_AIM_ASSIST_PAD                     | bEnableAimAssistPad                  | Enable controller aim assist                                                                                                                                                    | true                                                   | Boolean       |
| ENABLE_AIM_ASSIST_KEYBOARD                | bEnableAimAssistKeyboard             | Enable Keyboard aim assist                                                                                                                                                      | false                                                  | Boolean       |
| DROP_ITEM_MAX_NUM                         | DropItemMaxNum                       | Maximum Number of Dropped Items in A World: Self-explanatory. Note: increasing this number could potentially cause the game to slow down.                                       | 3000                                                   | Integer       |
| DROP_ITEM_MAX_NUM_UNKO                    | DropItemMaxNum                       | Maximum number of UNKO drops in the world                                                                                                                                       | 100                                                    | Integer       |
| BASE_CAMP_MAX_NUM                         | BaseCampMaxNum                       | Maximum number of base camps                                                                                                                                                    | 128                                                    | Integer       |
| BASE_CAMP_WORKER_MAXNUM                   | BaseCampWorkerMaxNum                 | Max Pals Working at Base: The higher this number is, the more Pals you can deploy to your base. You will still need to complete base missions to increase the capacity.         | 15                                                     | Integer       |
| DROP_ITEM_ALIVE_MAX_HOURS                 | DropItemAliveMaxHours                | Time it takes for items to despawn in hours                                                                                                                                     | 1.000000                                               | Float         |
| AUTO_RESET_GUILD_NO_ONLINE_PLAYERS        | bAutoResetGuildNoOnlinePlayers       | Automatically reset guild when no players are online                                                                                                                            | false                                                  | Bool          |
| AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS   | AutoResetGuildTimeNoOnlinePlayers    | Time to automatically reset guild when no players are online                                                                                                                    | 72.000000                                              | Float         |
| GUILD_PLAYER_MAX_NUM                      | GuildPlayerMaxNum                    | Max player of Guild                                                                                                                                                             | 20                                                     | Integer       |
| BASE_CAMP_MAX_NUM_IN_GUILD                | BaseCampMaxNumInGuild                | Max BaseCamp count per guild. Default is 3. (MAX 10) Larger value will increase system load                                                                                     | 4                                                      | Integer       |
| PAL_EGG_DEFAULT_HATCHING_TIME             | PalEggDefaultHatchingTime            | Incubate Egg Timer: The lower this number is, the faster eggs will hatch.                                                                                                       | 72.000000                                              | Float         |
| WORK_SPEED_RATE                           | WorkSpeedRate                        | Work speed multiplier                                                                                                                                                           | 1.000000                                               | Float         |
| AUTO_SAVE_SPAN                            | AutoSaveSpan                         | Unclear                                                                                                                                                                         | 30.000000                                              | Float         |
| IS_MULTIPLAY                              | bIsMultiplay                         | Enable multiplayer                                                                                                                                                              | false                                                  | Boolean       |
| IS_PVP                                    | bIsPvP                               | Enable PVP                                                                                                                                                                      | false                                                  | Boolean       |
| HARDCORE                                  | bHardcore                            | Enable Hardcore. Cannot respawn upon death.                                                                                                                                     | false                                                  | Boolean       |
| PAL_LOST                                  | bPalLost                             | Permanent lose your Pals upon death                                                                                                                                             | false                                                  | Boolean       |
| CHARACTER_RECREATE_IN_HARDCORE            | bCharacterRecreateInHardcore         | Reserved parameter. doesn't work with this version.                                                                                                                             | false                                                  | Boolean       |
| CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP | bCanPickupOtherGuildDeathPenaltyDrop | Allow players from other guilds to pick up death penalty items                                                                                                                  | false                                                  | Boolean       |
| ENABLE_NON_LOGIN_PENALTY                  | bEnableNonLoginPenalty               | Enable non-login penalty                                                                                                                                                        | true                                                   | Boolean       |
| ENABLE_FAST_TRAVEL                        | bEnableFastTravel                    | Enable fast travel                                                                                                                                                              | true                                                   | Boolean       |
| IS_START_LOCATION_SELECT_BY_MAP           | bIsStartLocationSelectByMap          | Enable selecting of start location                                                                                                                                              | true                                                   | Boolean       |
| EXIST_PLAYER_AFTER_LOGOUT                 | bExistPlayerAfterLogout              | Toggle for deleting players when they log off                                                                                                                                   | false                                                  | Boolean       |
| ENABLE_DEFENSE_OTHER_GUILD_PLAYER         | bEnableDefenseOtherGuildPlayer       | Allows defense against other guild players                                                                                                                                      | false                                                  | Boolean       |
| INVISBIBLE_OTHER_GUILD_BASE_CAMP_AREA_FX  | bInvisibleOtherGuildBaseCampAreaFX   | Enable Show basecamp area                                                                                                                                                       | false                                                  | Boolean       |
| BUILD_AREA_LIMIT                          | bBuildAreaLimit                      | Prohibit building near structures such as fast travel                                                                                                                           | false                                                  | Boolean       |
| ITEM_WEIGHT_RATE                          | ItemWeightRate                       | Item weight ratio                                                                                                                                                               | 1.000000                                               | Float         |
| COOP_PLAYER_MAX_NUM                       | CoopPlayerMaxNum                     | Maximum number of players in a guild                                                                                                                                            | 4                                                      | Integer       |
| MAX_PLAYERS                               | ServerPlayerMaxNum                   | Maximum number of people who can join the server                                                                                                                                | 32                                                     | Integer       |
| SERVER_NAME                               | ServerName                           | Server name                                                                                                                                                                     | jammsen-docker-generated-###RANDOM###                  | Integer       |
| SERVER_DESCRIPTION                        | ServerDescription                    | Server description                                                                                                                                                              | Palworld-Dedicated-Server running in Docker by jammsen | String        |
| ADMIN_PASSWORD                            | server admin password                | AdminPassword                                                                                                                                                                   | adminPasswordHere                                      | String        |
| SERVER_PASSWORD                           | AdminPassword                        | Set the server password.                                                                                                                                                        | serverPasswordHere                                     | String        |
| PUBLIC_PORT                               | public port                          | Public port number                                                                                                                                                              | 8211                                                   | UInt16        |
| PUBLIC_IP                                 | public ip or FQDN                    | Public IP or FQDN                                                                                                                                                               |                                                        | String        |
| RCON_ENABLED                              | RCONEnabled                          | Enable RCON - Use ADMIN_PASSWORD to login                                                                                                                                       | true                                                   | Boolean       |
| RCON_PORT                                 | RCONPort                             | Port number for RCON                                                                                                                                                            | 25575                                                  | UInt16        |
| REGION                                    | Region                               | Area                                                                                                                                                                            |                                                        | String        |
| USEAUTH                                   | bUseAuth                             | Use authentication                                                                                                                                                              | true                                                   | Boolean       |
| BAN_LIST_URL                              | BanListURL                           | Which ban list to use                                                                                                                                                           | https://api.palworldgame.com/api/banlist.txt           | String        |
| RESTAPI_ENABLED                           | RESTAPIEnabled                       | Enables the RESTAPI                                                                                                                                                             | true                                                   | Boolean       |
| RESTAPI_PORT                              | RESTAPIPort                          | Defines the port inside the container where the API should be hosted - RESTAPI: Needs Basic Auth; admin:ADMIN_PASSWORD                                                          | 8212                                                   | UInt16        |
| SHOW_PLAYER_LIST                          | bShowPlayerList                      | Enables to view player-list ingame via the escape key                                                                                                                           | false                                                  | Boolean       |
| CHAT_POST_LIMIT_PER_MINUTE                | ChatPostLimitPerMinute               | Number of chats that can be posted per minute                                                                                                                                   | 10                                                     | Integer       |
| CROSSPLAY_PLATFORMS                       | CROSSPLAY_PLATFORMS                  | Allowed platform to connect the server; See: https://tech.palworldgame.com/settings-and-operation/configuration                                                                 | (Steam,Xbox,PS5,Mac)                                   | String        |
| ENABLE_WORLD_BACKUP                       | bIsUseBackupSaveData                 | Enables internal world backup inside the game-server; off by default, because we have our own backup solution                                                                   | false                                                  | Boolean       |
| LOG_FORMAT_TYPE                           | LogFormatType                        | Log format Text or Json                                                                                                                                                         | Text                                                   | Enum          |
| SUPPLY_DROP_SPAN                          | SupplyDropSpan                       | Interval for supply drop (and meteorite drop) (minutes)                                                                                                                         | 180                                                    | Integer       |
| ENABLE_PREDATOR_BOSS_PAL                  | EnablePredatorBossPal                | None given                                                                                                                                                                      | true                                                   | Boolean       |
| MAX_BUILDING_LIMIT_NUM                    | MaxBuildingLimitNum                  | Building num limit per player (0 = unlimit)                                                                                                                                     | 0                                                      | Integer       |
| SERVER_REPLICATE_PAWN_CULL_DISTANCE       | ServerReplicatePawnCullDistance      | Pal sync distance from player cm. Min 5000 ~ Max 15000                                                                                                                          | 15000.000000                                           | Float         |
| ALLOW_GLOBAL_PALBOX_EXPORT                | bAllowGlobalPalboxExport             | If set to True, saving to the global palbox is possible.                                                                                                                        | true                                                   | Boolean       |
| ALLOW_GLOBAL_PALBOX_IMPORT                | bAllowGlobalPalboxImport             | If set to True, importing from the global palbox is possible.                                                                                                                   | false                                                  | Boolean       |
| EQUIPMENT_DURABILITY_DAMAGE_RATE                | EquipmentDurabilityDamageRate             | Equipment Durability Loss Multiplierpossible.                                                                                                                   | 1.000000                                                  | Float       |
| ITEM_CONTAINER_FORCE_MARK_DIRTY_INTERVAL                | ItemContainerForceMarkDirtyInterval             | Interval for force sync when open the container. (sec)                                                                                                                  | 1.000000                                                  | Float       |

** Updates to descriptions taken from [this reddit post](https://www.reddit.com/r/Palworld/comments/19bumby/settings_explanation/) **


## Webhook-Settings

This section lists all the settings for the webhooks.

> [!WARNING]
>
> Please note that Hex-Colors (Example #eeeeee) are not supported. Instead, use the Decimal representation of the color.
> To convert a Hex-Color to its Decimal representation, you can use online tools such as [SpyColor](https://www.spycolor.com/).
> Search for the Hex-Color and use the Decimal representation of that color. Using Hex-Colors will cause errors!

| Variable                                | Description                                           | Default Value                           | Allowed Values    |
| --------------------------------------- | ----------------------------------------------------- | --------------------------------------- | ----------------- |
| `WEBHOOK_ENABLED`                       | Determines if the webhook is enabled                  | `false`                                 | false/true        |
| `WEBHOOK_URL`                           | The URL for the webhook                               | `YOUR-URL-IN-HERE`                      | Valid webhook URL |
| `WEBHOOK_START_TITLE`                   | The title for the start webhook                       | `Server is starting`                    | Message           |
| `WEBHOOK_START_DESCRIPTION`             | The description for the start webhook                 | `The gameserver is starting`            | Message           |
| `WEBHOOK_START_COLOR`                   | The color for the start webhook                       | `2328576`                               | Color (see below) |
| `WEBHOOK_STOP_TITLE`                    | The title for the stop webhook                        | `Server has been stopped`               | Message           |
| `WEBHOOK_STOP_DESCRIPTION`              | The description for the stop webhook                  | `The gameserver has been stopped`       | Message           |
| `WEBHOOK_STOP_COLOR`                    | The color for the stop webhook                        | `7413016"`                              | Color (see below) |
| `WEBHOOK_INFO_TITLE`                    | The title for the info webhook                        | `Info"`                                 | Message           |
| `WEBHOOK_INFO_DESCRIPTION`              | The description for the info webhook                  | `This is an info from the server`       | Message           |
| `WEBHOOK_INFO_COLOR`                    | The color for the info webhook                        | `2849520`                               | Color (see below) |
| `WEBHOOK_UPDATE_TITLE`                  | The title for the update webhook                      | `Updating server`                       | Message           |
| `WEBHOOK_UPDATE_DESCRIPTION`            | The description for the update webhook                | `Server is being updated`               | Message           |
| `WEBHOOK_UPDATE_COLOR`                  | The color for the update webhook                      | `2849520`                               | Color (see below) |
| `WEBHOOK_UPDATE_VALIDATION_TITLE`       | The title for the update and validation webhook       | `Updating and validating server`        | Message           |
| `WEBHOOK_UPDATE_VALIDATION_DESCRIPTION` | The description for the update and validation webhook | `Server is being updated and validated` | Message           |
| `WEBHOOK_UPDATE_VALIDATION_COLOR`       | The color for the update and validation webhook       | `2849520`                               | Color (see below) |

[Back to main](../README.md#environment-variables)

```

`entrypoint.sh`:

```sh
#!/bin/bash
# shellcheck disable=SC1091
# https://stackoverflow.com/questions/27669950/difference-between-euid-and-uid

set -e

APP_USER=steam
APP_GROUP=steam
APP_HOME=/home/$APP_USER

source /includes/colors.sh

if [[ "${EUID}" -ne 0 ]]; then
    ee ">>> This Docker-Container must be run as root! Please adjust how you started the container, to fix this error."
    exit 1
fi

if [[ "${PUID}" -eq 0 ]] || [[ "${PGID}" -eq 0 ]]; then
    ee ">>> Running Palworld as root is not supported, please fix your PUID and PGID!"
    exit 1
elif [[ "$(id -u steam)" -ne "${PUID}" ]] || [[ "$(id -g steam)" -ne "${PGID}" ]]; then
    ew "> Current $APP_USER user PUID is '$(id -u steam)' and PGID is '$(id -g steam)'"
    ew "> Setting new $APP_USER user PUID to '${PUID}' and PGID to '${PGID}'"
    groupmod -g "${PGID}" "$APP_GROUP" && usermod -u "${PUID}" -g "${PGID}" "$APP_USER"
else
    ew "> Current $APP_USER user PUID is '$(id -u steam)' and PGID is '$(id -g steam)'"
    ew "> PUID and PGID matching what is requested for user $APP_USER"
fi

chown -R "$APP_USER":"$APP_GROUP" "$APP_HOME"
chown -R "$APP_USER":"$APP_GROUP" "$GAME_ROOT"

ew_nn "> id steam: " ; e "$(id steam)"

exec gosu $APP_USER:$APP_GROUP "$@"

```

`includes/colors.sh`:

```sh
# shellcheck disable=SC2148
# Idea from https://colors.sh/
# ANSI Color Codes - https://www.shellhacks.com/bash-colors/
# Ansi Default Color Codes https://hyperskill.org/learn/step/18193#terminal-support
# Use ANSI whenever possible. Makes logs compatible with almost all systems.

# Aliases for colorful echos with newlines
function e() { 
    colorful_echos --base "${@}"
    echo ""
}

function ee() { 
    colorful_echos --error "${@}"
    echo ""
}

function ei() { 
    colorful_echos --info "${@}"
    echo ""
}

function es() { 
    colorful_echos --success "${@}"
    echo ""
}

function ew() { 
    colorful_echos --warning "${@}"
    echo ""
}

# Aliases for colorful echos without newlines
function e_nn() { 
    colorful_echos --base "${@}"
}

function ee_nn() { 
    colorful_echos --error "${@}"
}

function ei_nn() { 
    colorful_echos --info "${@}"
}

function es_nn() { 
    colorful_echos --success "${@}"
}

function ew_nn() { 
    colorful_echos --warning "${@}"
}

# This creates a wrapper for echo to add colors
function colorful_echos() {
    # Set color constants
    BASE="\e[97m"              # Clean color
    CLEAN="\e[0m"              # Clean color
    ERROR="\e[91m"       # Red color for error
    INFO="\e[94m"         # Blue color for info
    SUCCESS="\e[92m"      # Green color for success
    WARNING="\e[93m"      # Yellow color for warning

    if [ $# -gt 2 ]; then
        echo "Usage: $0 [--success|--error|--info|--warning|--base] <message>"
        exit 1
    fi

    # Parse arguments
    arg1=$1
    message=$2

    # Set color based on argument
    if [ "$arg1" == "--success" ]; then
        color="$SUCCESS"
    elif [ "$arg1" == "--error" ]; then
        color="$ERROR"
    elif [ "$arg1" == "--info" ]; then
        color="$INFO"
    elif [ "$arg1" == "--warning" ]; then
        color="$WARNING"
    elif [ "$arg1" == "--base" ]; then
        color="$BASE"
    else
        echo -ne "$message"
        return 0
    fi

    # print newlines in the beggining of the message
    while [ "${message:0:2}" = "\\n" ]; do
        # Print a newline
        echo ""
        # Remove the first two characters from the message
        message="${message:2}"
    done

    # Print message with the specified color
    echo -ne "${color}${message}${CLEAN}"
}

```

`includes/config.sh`:

```sh
# shellcheck disable=SC2148,SC1091

source /includes/colors.sh

current_setting=1
settings_amount=89

function setup_engine_ini() {
    pattern1="OnlineSubsystemUtils.IpNetDriver"
    pattern2="^NetServerMaxTickRate=[0-9]*"
    ei ">>> Setting up Engine.ini ..."
    e "> Checking if config already exists..."
    if [ ! -f "${GAME_ENGINE_FILE}" ]; then
        ew "> No config found, generating one!"
        if [ ! -d "${GAME_CONFIG_PATH}" ]; then
            mkdir -p "${GAME_CONFIG_PATH}/"
        fi
        # Create empty Engine.ini file
        echo "" > "${GAME_ENGINE_FILE}"
    else
        e "> Found existing config!"
    fi
    if grep -qE "${pattern1}" "${GAME_ENGINE_FILE}" 2>/dev/null; then
        e "> Found [/Script/OnlineSubsystemUtils.IpNetDriver] section"
    else
        ew "> Found no [/Script/OnlineSubsystemUtils.IpNetDriver], adding it"
        echo -e "[/Script/OnlineSubsystemUtils.IpNetDriver]" >> "${GAME_ENGINE_FILE}"
    fi
    if grep -qE "${pattern2}" "${GAME_ENGINE_FILE}" 2>/dev/null; then
        e "> Found NetServerMaxTickRate parameter, changing it to '${NETSERVERMAXTICKRATE}'"
        sed -E -i "s/${pattern2}/NetServerMaxTickRate=${NETSERVERMAXTICKRATE}/" "${GAME_ENGINE_FILE}"
    else
        ew "> Found no NetServerMaxTickRate parameter, adding it with value '${NETSERVERMAXTICKRATE}'"
        echo "NetServerMaxTickRate=${NETSERVERMAXTICKRATE}" >> "${GAME_ENGINE_FILE}"
    fi
    es ">>> Finished setting up Engine.ini!"
}

function e_with_counter() {
    local padded_number
    padded_number=$(printf "%02d" $current_setting)
    # shellcheck disable=SC2145
    e "> ($padded_number/$settings_amount) Setting $@"
    current_setting=$((current_setting + 1))
}

function setup_palworld_settings_ini() {
    ei ">>> Setting up PalWorldSettings.ini ..."
    if [ ! -d "${GAME_CONFIG_PATH}" ]; then
        mkdir -p "${GAME_CONFIG_PATH}/" || {
            ee "Failed to create directory ${GAME_CONFIG_PATH}"
            return 1
        }
    fi

    # if SERVER_NAME contains ###RANDOM###, replace it now
    if [[ "${SERVER_NAME:-}" == *"###RANDOM###"* ]]; then
        # generate a 6-char alphanumeric token
        rand="$(LC_ALL=C tr -dc 'A-Za-z0-9' </dev/urandom | head -c 6)"
        export SERVER_NAME="${SERVER_NAME//###RANDOM###/${rand}}"
    fi

    # Copy default-config, which comes with SteamCMD to gameserver save location
    ew "> Copying PalWorldSettings.ini.template to ${GAME_SETTINGS_FILE}"
    ENVSUBST_SELECTORS='$DIFFICULTY $RANDOMIZER_TYPE $RANDOMIZER_SEED $IS_RANDOMIZER_PAL_LEVEL_RANDOM 
        $DAYTIME_SPEEDRATE $NIGHTTIME_SPEEDRATE $EXP_RATE $PAL_CAPTURE_RATE 
        $PAL_SPAWN_NUM_RATE $PAL_DAMAGE_RATE_ATTACK $PAL_DAMAGE_RATE_DEFENSE 
        $PLAYER_DAMAGE_RATE_ATTACK $PLAYER_DAMAGE_RATE_DEFENSE 
        $PLAYER_STOMACH_DECREASE_RATE $PLAYER_STAMINA_DECREACE_RATE 
        $PLAYER_AUTO_HP_REGENE_RATE $PLAYER_AUTO_HP_REGENE_RATE_IN_SLEEP 
        $PAL_STOMACH_DECREACE_RATE $PAL_STAMINA_DECREACE_RATE 
        $PAL_AUTO_HP_REGENE_RATE $PAL_AUTO_HP_REGENE_RATE_IN_SLEEP 
        $BUILD_OBJECT_HP_RATE $BUILD_OBJECT_DAMAGE_RATE 
        $BUILD_OBJECT_DETERIORATION_DAMAGE_RATE $COLLECTION_DROP_RATE 
        $COLLECTION_OBJECT_HP_RATE $COLLECTION_OBJECT_RESPAWN_SPEED_RATE 
        $ENEMY_DROP_ITEM_RATE $DEATH_PENALTY $ENABLE_PLAYER_TO_PLAYER_DAMAGE 
        $ENABLE_FRIENDLY_FIRE $ENABLE_INVADER_ENEMY $ACTIVE_UNKO 
        $ENABLE_AIM_ASSIST_PAD $ENABLE_AIM_ASSIST_KEYBOARD $DROP_ITEM_MAX_NUM 
        $DROP_ITEM_MAX_NUM_UNKO $BASE_CAMP_MAX_NUM $BASE_CAMP_WORKER_MAXNUM 
        $DROP_ITEM_ALIVE_MAX_HOURS $AUTO_RESET_GUILD_NO_ONLINE_PLAYERS 
        $AUTO_RESET_GUILD_TIME_NO_ONLINE_PLAYERS $GUILD_PLAYER_MAX_NUM 
        $BASE_CAMP_MAX_NUM_IN_GUILD $PAL_EGG_DEFAULT_HATCHING_TIME 
        $WORK_SPEED_RATE $AUTO_SAVE_SPAN $IS_MULTIPLAY $IS_PVP $HARDCORE 
        $PAL_LOST $CHARACTER_RECREATE_IN_HARDCORE 
        $CAN_PICKUP_OTHER_GUILD_DEATH_PENALTY_DROP $ENABLE_NON_LOGIN_PENALTY 
        $ENABLE_FAST_TRAVEL $IS_START_LOCATION_SELECT_BY_MAP 
        $EXIST_PLAYER_AFTER_LOGOUT $ENABLE_DEFENSE_OTHER_GUILD_PLAYER 
        $INVISBIBLE_OTHER_GUILD_BASE_CAMP_AREA_FX $BUILD_AREA_LIMIT 
        $ITEM_WEIGHT_RATE $COOP_PLAYER_MAX_NUM $MAX_PLAYERS $SERVER_NAME 
        $SERVER_DESCRIPTION $ADMIN_PASSWORD $SERVER_PASSWORD $PUBLIC_PORT 
        $PUBLIC_IP $RCON_ENABLED $RCON_PORT $REGION $USEAUTH $BAN_LIST_URL 
        $RESTAPI_ENABLED $RESTAPI_PORT $SHOW_PLAYER_LIST 
        $CHAT_POST_LIMIT_PER_MINUTE $CROSSPLAY_PLATFORMS $ENABLE_WORLD_BACKUP 
        $LOG_FORMAT_TYPE $SUPPLY_DROP_SPAN $ENABLE_PREDATOR_BOSS_PAL 
        $MAX_BUILDING_LIMIT_NUM $SERVER_REPLICATE_PAWN_CULL_DISTANCE 
        $ALLOW_GLOBAL_PALBOX_EXPORT $ALLOW_GLOBAL_PALBOX_IMPORT 
        $EQUIPMENT_DURABILITY_DAMAGE_RATE $ITEM_CONTAINER_FORCE_MARK_DIRTY_INTERVAL'
    

    if ! envsubst "$ENVSUBST_SELECTORS" < "${PALWORLD_TEMPLATE_FILE}" > "${GAME_SETTINGS_FILE}"; then
        ee "Failed to generate ${GAME_SETTINGS_FILE}"
        return 1
    fi
    es ">>> Finished setting up PalWorldSettings.ini"
}

function setup_rcon_yaml () {
    if [[ -n ${RCON_ENABLED+x} ]] && [[ "${RCON_ENABLED,,}" == "true" ]] ; then
        ei ">>> RCON is enabled - Setting up rcon.yaml ..."
        if [[ -n ${RCON_PORT+x} ]] && [[ -n ${ADMIN_PASSWORD+x} ]]; then
            TEMP_FILE=$(mktemp)
            if envsubst '$RCON_PORT $ADMIN_PASSWORD' < "$RCON_CONFIG_FILE" > "$TEMP_FILE"; then
                mv "$TEMP_FILE" "$RCON_CONFIG_FILE"
            else
                ee "Failed to process rcon.yaml"
                rm -f "$TEMP_FILE"
                return 1
            fi
        else
            ee "> RCON_PORT and/or ADMIN_PASSWORD are not set; please set both for RCON to work!"
        fi
        es ">>> Finished setting up 'rcon.yaml' config file"
    else
        ei ">>> RCON is disabled, skipping 'rcon.yaml' config file!"
    fi
}

function setup_configs() {
    if [[ -n ${SERVER_SETTINGS_MODE} ]] && [[ ${SERVER_SETTINGS_MODE} == "auto" ]]; then
        ew ">>> SERVER_SETTINGS_MODE is set to '${SERVER_SETTINGS_MODE}', using environment variables to configure the server"
        setup_engine_ini
        setup_palworld_settings_ini
        setup_rcon_yaml
    elif [[ -n ${SERVER_SETTINGS_MODE} ]] && [[ ${SERVER_SETTINGS_MODE} == "rcononly" ]]; then
        ew ">>> SERVER_SETTINGS_MODE is set to '${SERVER_SETTINGS_MODE}', using environment variables to ONLY configure RCON!"
        ew ">>> ALL SETTINGS excluding setup of rcon.yaml has to be done manually by the user!"
        setup_rcon_yaml
    else
        ew ">>> SERVER_SETTINGS_MODE is set to '${SERVER_SETTINGS_MODE}', NOT using environment variables to configure the server!"
        ew ">>> ALL SETTINGS including setup of rcon.yaml has to be done manually by the user!"
    fi
}

```

`includes/cron.sh`:

```sh
# shellcheck disable=SC2148

# Start supercronic and load crons
function setup_crons() {
    echo "" > cronlist    
    ei ">>> Adding crons to Supercronic"
    if [[ -n ${BACKUP_ENABLED} ]] && [[ ${BACKUP_ENABLED} == "true" ]]; then
        echo "${BACKUP_CRON_EXPRESSION} backup create" >> cronlist
        e "> Added backup cron"
    fi
    if [[ -n ${RESTART_ENABLED} ]] && [[ ${RESTART_ENABLED} == "true" ]]; then
        echo "${RESTART_CRON_EXPRESSION} restart" >> cronlist
        e "> Added restart cron"
    fi
    /usr/local/bin/supercronic -passthrough-logs cronlist &
    es ">>> Supercronic started"
}

```

`includes/playerdetection.sh`:

```sh
# shellcheck disable=SC2148,SC1091

source /includes/colors.sh
source /includes/rcon.sh
source /includes/webhook.sh

current_players=()

player_detection_loop() {
    sleep "$RCON_PLAYER_DETECTION_STARTUP_DELAY"
    while true; do
        compare_players
        sleep "$RCON_PLAYER_DETECTION_CHECK_INTERVAL"
    done
}

rcon_showplayers_with_retry() {
    local amount_of_retries=5
    local wait_in_seconds=3
    local command_output

    for ((i=0; i<amount_of_retries; i++)); do
        command_output=$(rcon showplayers 2> /dev/null)
        if [[ -n $RCON_PLAYER_DEBUG ]] && [[ "${RCON_PLAYER_DEBUG,,}" == "true" ]]; then
            ew "Debug: command_output = '$command_output'"
            ew "Exitcode was: $?"
        fi
        if [[ $? -eq 0 ]]; then
            # Check if the command executed successfully, regardless of content
            if [[ -n "$command_output" && "$(echo "$command_output" | wc -l)" -gt 1 ]]; then
                # If there is output, we assume rconcli returned at least a single header line
                # then we try to process process it into current_players
                # Example output for empty server is:
                # root@contaierid:/home/steam/steamcmd# rcon showplayers
                # name,playeruid,steamid
                readarray -t current_players <<< "$(echo "$command_output" | tail -n +2)"
                if [[ -n $RCON_PLAYER_DEBUG ]] && [[ "${RCON_PLAYER_DEBUG,,}" == "true" ]]; then
                    ew "Debug: current_players = ${current_players[*]}"
                fi
            else
                # If there is no error exit code but data is missing at least 1 line, something is off
                # therefore we shouldnt set current_players to empty?
                # current_players=()
                if [[ -n $RCON_PLAYER_DEBUG ]] && [[ "${RCON_PLAYER_DEBUG,,}" == "true" ]]; then
                    ew "Debug: No player data available."
                fi
            fi
            return 0
        fi
        sleep $wait_in_seconds
    done

    ew ">>> RCON command failed after $amount_of_retries attempts."
    return 1
}

# Function to compare current and previous player lists
compare_players() {
    local old_players=("${current_players[@]}")

    if ! rcon_showplayers_with_retry; then
        ew "> Skipping player comparison due to RCON failure."
        return
    fi

    if [[ -n $RCON_PLAYER_DEBUG ]] && [[ "${RCON_PLAYER_DEBUG,,}" == "true" ]]; then
        ew "Debug: current_players = ${current_players[*]}"
    fi
    if [[ ${#current_players[@]} -eq 0 ]]; then
        e "No players currently on the server."
        return
    fi


    # Do we need a case where current_players is empty?
    # if [[ ${#current_players[@]} -eq 0 ]]; then
    #     echo "No players currently on the server."
    # fi

    for player_info in "${current_players[@]}"; do
        if [[ -n $RCON_PLAYER_DEBUG ]] && [[ "${RCON_PLAYER_DEBUG,,}" == "true" ]]; then
            ew "For-Loop-Debug: player_info = '$player_info'"
        fi
        # Extract player name, UID, and Steam ID from player info
        # This part sets the Internal Field Separator (IFS) variable to ','.
        # In Bash, the IFS variable determines how Bash recognizes word boundaries.
        # By default, it includes space, tab, and newline characters.
        # By setting it to ',', we're telling Bash to split input lines at commas.
        # https://tldp.org/LDP/abs/html/internalvariables.html#IFSREF
        IFS=',' read -r -a player_data <<< "$player_info"

        # Ensure player_data has the expected number of elements
        if [[ ${#player_data[@]} -lt 3 ]]; then
            ew "Error: Malformed player data: '$player_info'"
            continue
        fi

        local steamid="${player_data[-1]}"
        local playeruid="${player_data[-2]}"
        local name="${player_data[*]::${#player_data[@]}-2}"

        # Strip special characters from the player name
        name="$(echo "$name" | tr -cd '[:alnum:]')"

        local found=false
        for old_player_info in "${old_players[@]}"; do
            IFS=',' read -r -a old_player_data <<< "$old_player_info"
            local old_steamid="${old_player_data[-1]}"
            local old_playeruid="${old_player_data[-2]}"
            local old_name="${old_player_data[*]::${#old_player_data[@]}-2}"

            # Strip special characters from the old player name
            old_name="$(echo "$old_name" | tr -cd '[:alnum:]')"

            if [[ "$old_steamid" == "$steamid" ]]; then
                found=true
                if [[ "$old_playeruid" == "00000000" && "$playeruid" != "00000000" ]]; then
                    announce_name_change "$old_name" "$name"
                fi
                break
            fi
        done
        if ! $found; then
            announce_join "$name"
        fi
    done

    for old_player_info in "${old_players[@]}"; do
        IFS=',' read -r -a old_player_data <<< "$old_player_info"
        local old_steamid="${old_player_data[-1]}"
        local old_playeruid="${old_player_data[-2]}"
        local old_name="${old_player_data[*]::${#old_player_data[@]}-2}"

        # Strip special characters from the old player name
        old_name="$(echo "$old_name" | tr -cd '[:alnum:]')"

        local found=false
        for player_info in "${current_players[@]}"; do
            IFS=',' read -r -a player_data <<< "$player_info"
            local steamid="${player_data[-1]}"
            if [[ "$old_steamid" == "$steamid" ]]; then
                found=true
                break
            fi
        done
        if ! $found; then
            announce_leave "$old_name"
        fi
    done
}


# Function to announce a player join
announce_join() {
    time=$(date '+[%H:%M:%S]')
    message="Player $1 has joined the server."
    echo "${time}: $message"
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_info_notification "$message"
    fi
    if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
        broadcast_player_join "${1}"
    fi
}

# Function to announce a player join
announce_name_change() {
    time=$(date '+[%H:%M:%S]')
    message="Player $1 has changed their name to $2."
    echo "${time}: $message"
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_info_notification "$message"
    fi
    if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
        broadcast_player_name_change "${1}" "${2}"
    fi
}

# Function to announce a player leave
announce_leave() {
    time=$(date '+[%H:%M:%S]')
    message="Player $1 has left the server."
    echo "${time}: $message"
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_info_notification "$message"
    fi
    if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
        broadcast_player_leave "${1}"
    fi
}

```

`includes/rcon.sh`:

```sh
# shellcheck disable=SC2148

function get_time() {
    date '+[%H:%M:%S]'
}

function save_and_shutdown_server() {
    rconcli broadcast "$(get_time) Server shutdown requested. Saving..."
    rconcli save
    rconcli broadcast "$(get_time) Saving done. Server shutting down..."
}

function broadcast_automatic_restart() {
    for ((counter=1; counter<=15; counter++)); do
        rconcli "broadcast $(get_time)-AUTOMATIC-RESTART-IN-$counter-MINUTES"
        sleep 1
    done
    rconcli broadcast "$(get_time) Saving world before restart..."
    rconcli save
    rconcli broadcast "$(get_time) Saving done"
    rconcli broadcast "$(get_time) Creating backup..."
    rcon "Shutdown 10"
}

function broadcast_backup_start() {
    rconcli broadcast "$(get_time) Saving in 5 seconds..."
    sleep 5
    rconcli broadcast "$(get_time) Saving world..."
    rconcli save
    rconcli broadcast "$(get_time) Saving done"
    rconcli broadcast "$(get_time) Creating backup..."
}

function broadcast_backup_success() {
    rconcli broadcast "$(get_time) Backup done"
}

function broadcast_backup_failed() {
    rconcli broadcast "$(get_time) Backup failed"
}

function broadcast_player_join() {
    rconcli broadcast "$(get_time) $1 joined the server"
}

function broadcast_player_name_change() {
    rconcli broadcast "$(get_time) $1 renamed to $2"
}

function broadcast_player_leave() {
    rconcli broadcast "$(get_time) $1 left the server"
}

function check_is_server_empty() {
    num_players=$(rcon -c "$RCON_CONFIG_FILE" showplayers | tail -n +2 | wc -l)
    if [ "$num_players" -eq 0 ]; then
        return 0  # Server empty
    else
        return 1  # Server not empty
    fi
}

```

`includes/security.sh`:

```sh
# shellcheck disable=SC2148,SC1091

source /includes/colors.sh

function check_for_default_credentials() {
    e "> Checking for existence of default credentials"
    if [[ -n $ADMIN_PASSWORD ]] && [[ $ADMIN_PASSWORD == "adminPasswordHere" ]]; then
        ee ">>> Security threat detected: Please change the default admin password. Aborting server start ..."
        exit 1
    fi
    if [[ -n $SERVER_PASSWORD ]] && [[ $SERVER_PASSWORD == "serverPasswordHere" ]]; then
        ee ">>> Security threat detected: Please change the default server password. Aborting server start ..."
        exit 1
    fi
    es "> No default passwords found"
}

```

`includes/server.sh`:

```sh
# shellcheck disable=SC2148,SC1091

source /includes/colors.sh
source /includes/rcon.sh
source /includes/webhook.sh

function start_server() {
    cd "$GAME_ROOT" || exit
    setup_configs
    ei ">>> Preparing to start the gameserver"
    START_OPTIONS=()
    if [[ -n $COMMUNITY_SERVER ]] && [[ "${COMMUNITY_SERVER,,}" == "true" ]]; then
        e "> Setting Community-Mode to enabled"
        START_OPTIONS+=("-publiclobby")
    fi
    if [[ -n $MULTITHREAD_ENABLED ]] && [[ "${MULTITHREAD_ENABLED,,}" == "true" ]]; then
        e "> Setting Multi-Core-Enhancements to enabled"
        START_OPTIONS+=("-useperfthreads" "-NoAsyncLoadingThread" "-UseMultithreadForDS")
    fi
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_start_notification
    fi
    es ">>> Starting the gameserver"
    ./PalServer.sh "${START_OPTIONS[@]}"
}

function stop_server() {
    ew ">>> Stopping server..."
    kill -SIGTERM "${PLAYER_DETECTION_PID}"
    if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
        save_and_shutdown_server
    fi
	kill -SIGTERM "$(pidof PalServer-Linux-Shipping)"
	tail --pid="$(pidof PalServer-Linux-Shipping)" -f 2>/dev/null
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_stop_notification
    fi
    ew ">>> Server stopped gracefully"
    exit 143;
}

function fresh_install_server() {
    ei ">>> Doing a fresh install of the gameserver..."
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_install_notification
    fi
    "${STEAMCMD_PATH}"/steamcmd.sh +force_install_dir "$GAME_ROOT" +login anonymous +app_update 2394010 validate +quit
    es "> Done installing the gameserver"
}

function update_server() {
    # Workaround fix for 0x6 error
    ei ">>> Checking if appmainfest_2394010.acf exists, which can cause the 'Error! App '2394010' state is 0x6 after update job"
    if [[ -f /palworld/steamapps/appmanifest_2394010.acf ]]; then
        ei ">>> Applying workaround fix for 'Error! App '2394010' state is 0x6 after update job.' message, since update 0.3.X..."
        rm -f /palworld/steamapps/appmanifest_2394010.acf
    fi
    if [[ -n $STEAMCMD_VALIDATE_FILES ]] && [[ "${STEAMCMD_VALIDATE_FILES,,}" == "true" ]]; then
        ei ">>> Doing an update with validation of the gameserver files..."
        if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
            send_update_notification
        fi
        "${STEAMCMD_PATH}"/steamcmd.sh +force_install_dir "$GAME_ROOT" +login anonymous +app_update 2394010 validate +quit
        es ">>> Done updating and validating the gameserver files"
    else
        ei ">>> Doing an update of the gameserver files..."
        if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
            send_update_notification
        fi
        "${STEAMCMD_PATH}"/steamcmd.sh +force_install_dir "$GAME_ROOT" +login anonymous +app_update 2394010 +quit
        es ">>> Done updating the gameserver files"
    fi
}

```

`includes/webhook.sh`:

```sh
# shellcheck disable=SC2148
# Function to generate JSON data for the Discord message
# Webpage for COLOR-Calculation - https://www.spycolor.com/
# IMPORTANT: Don't use Hex-Colors! Go to the page, search for the Hex-Color, 
# after that add the DECIMAL-Representation to the color field or it will break for Discord!
generate_post_data() {
  if [[ -n "${WEBHOOK_CONTENT_TITLE}" ]]; then
    cat <<EOF
{
  "content": "${WEBHOOK_CONTENT_TITLE}",
  "embeds": [{
    "title": "$1",
    "description": "$2",
    "color": "$3"
  }]
}
EOF
  else
    cat <<EOF
{
  "embeds": [{
    "title": "$1",
    "description": "$2",
    "color": "$3"
  }]
}
EOF
  fi
}

send_webhook_notification() {
  local title="$1"
  local description="$2"
  local linecolor="$3"

  if [[ -n $WEBHOOK_DEBUG_ENABLED ]] && [[ $WEBHOOK_DEBUG_ENABLED == "true" ]]; then
    # Debug Curl
    curl --ssl-no-revoke -H "Content-Type: application/json" -X POST -d "$(generate_post_data "$title" "$description" "$linecolor")" "$WEBHOOK_URL"
  else
    # Prod Curl
    curl --silent --ssl-no-revoke -H "Content-Type: application/json" -X POST -d "$(generate_post_data "$title" "$description" "$linecolor")" "$WEBHOOK_URL"
  fi
}

#Aliases to use in scripts
send_install_notification() {
  send_webhook_notification "$WEBHOOK_INSTALL_TITLE" "$WEBHOOK_INSTALL_DESCRIPTION" "$WEBHOOK_INSTALL_COLOR"
}
send_restart_planned_notification() {
  send_webhook_notification "$WEBHOOK_RESTART_TITLE" "$WEBHOOK_RESTART_DELAYED_DESCRIPTION" "$WEBHOOK_RESTART_COLOR"
}
send_restart_now_notification() {
  send_webhook_notification "$WEBHOOK_RESTART_TITLE" "$WEBHOOK_RESTART_NOW_DESCRIPTION" "$WEBHOOK_RESTART_COLOR"
}
send_start_notification() {
  send_webhook_notification "$WEBHOOK_START_TITLE" "$WEBHOOK_START_DESCRIPTION" "$WEBHOOK_START_COLOR"
}
send_stop_notification() {
  send_webhook_notification "$WEBHOOK_STOP_TITLE" "$WEBHOOK_STOP_DESCRIPTION" "$WEBHOOK_STOP_COLOR"
}
send_update_notification() {
  send_webhook_notification "$WEBHOOK_UPDATE_TITLE" "$WEBHOOK_UPDATE_DESCRIPTION" "$WEBHOOK_UPDATE_COLOR"
}
send_info_notification() {
  send_webhook_notification "$WEBHOOK_INFO_TITLE" "$1" "$WEBHOOK_INFO_COLOR"
}

```

`scripts/backupmanager.sh`:

```sh
#!/bin/bash
# shellcheck disable=SC1091,SC2012,SC2004

source /includes/colors.sh
source /includes/rcon.sh

# Default values if the environment variables exist
LOCAL_BACKUP_ANNOUNCE_MESSAGES_ENABLED=${BACKUP_ANNOUNCE_MESSAGES_ENABLED} # Defines if messages should be announced via rcon
LOCAL_BACKUP_PATH=${BACKUP_PATH} # Directory where the backup files are stored
LOCAL_GAME_PATH=${GAME_PATH} # Directory where the game save files are stored
LOCAL_GAME_SAVE_PATH=${GAME_SAVE_PATH} # Directory where the game save files are stored
LOCAL_BACKUP_RETENTION_POLICY=${BACKUP_RETENTION_POLICY} # Number of backup files to keep
LOCAL_BACKUP_RETENTION_AMOUNT_TO_KEEP=${BACKUP_RETENTION_AMOUNT_TO_KEEP} # Number of backup files to keep

function get_time() {
    date '+[%H:%M:%S]'
}

function print_usage() {
    script_name=$(basename "$0")
    echo "Usage:"
    echo "  ${script_name} create"
    echo "  ${script_name} list [number_of_entries]"
    echo "  ${script_name} clean [number_to_keep]"
    echo "  ${script_name} help"
    echo ""
    echo "Options:"
    echo "  create                        Create a backup"
    echo "  list [number_to_list]         List the backup files. If number_to_list isn't"
    echo "                                  provided, all backup files will be listed"
    echo "  clean [number_to_keep]        Deletes old backups keeping the number_to_keep"
    echo "                                  most recent backups. If number_to_keep isn't"
    echo "                                  provided, keep 30 most recent backups"
    echo "  help                          Display this help message"
    echo ""
    echo "Arguments:"
    echo "  number_to_list (optional)       The number of backup files to list."
    echo "                                  If not provided, all backup files will be listed"
    echo "  number_to_keep (optional)       The number of the most recent backup files to keep."
    echo "                                  If not provided, the value of the BACKUP_RETENTION_AMOUNT_TO_KEEP"
    echo "                                  environment variable will be used if it exists."
    echo "                                  Defaults to the 30 most recent backups otherwise."
}

function parse_arguments() {
    if [ ${#} -lt 1 ]; then
        ew "> Not enough arguments"
        print_usage
        exit 1
    fi

    # Evaluate the command
    case "$1" in
        create)
            if [ ${#} -ne 1 ]; then
                ee ">>> Invalid number of arguments for 'create'"
                print_usage
                exit 1
            fi
            create_backup
            ;;
        list)
            if [ ${#} -gt 2 ]; then
                ee ">>> Invalid number of arguments for 'list'"
                print_usage
                exit 1
            fi

            local number_to_list=${2:-""}

            if [[ -n "${number_to_list}" ]] && [[ ! "${number_to_list}" =~ ^[0-9]+$ ]]; then
                ew ">>> Invalid argument '${number_to_list}'. Please provide a positive integer"
                exit 1
            fi

            list_backups "${number_to_list}"
            ;;
        clean)
            if [ ${#} -gt 2 ]; then
                ee ">>> Invalid number of arguments for 'clean'"
                print_usage
                exit 1
            fi

            local num_backup_entries=${2:-${LOCAL_BACKUP_RETENTION_AMOUNT_TO_KEEP}}

            if ! [[ "${num_backup_entries}" =~ ^[0-9]+$ ]]; then
                ew ">>> Invalid argument '${num_backup_entries}'. Please provide a positive integer"
                exit 1
            fi

            clean_backups "${num_backup_entries}"
            ;;
        help)
            if [ ${#} -ne 1 ]; then
                ee ">>> Invalid number of arguments for 'help'"
                print_usage
                exit 1
            fi
            print_usage
            ;;
        *)
            ee ">>> Illegal option '${1}'"
            print_usage
            exit 1
            ;;
    esac
}

function check_required_directories() {
    if [ -z "${LOCAL_BACKUP_PATH}" ]; then
        ee ">>> BACKUP_PATH environment variable not set. Exitting..."
        exit 1
    fi
    if [ -z "${LOCAL_GAME_PATH}" ]; then
        ee ">>> GAME_PATH environment variable not set Exiting..."
        exit 1
    fi
    if [ -z "${LOCAL_GAME_SAVE_PATH}" ]; then
        ee ">>> GAME_SAVE_PATH environment variable not set Exiting..."
        exit 1
    fi

    mkdir -p "${LOCAL_BACKUP_PATH}"

    if [ ! -d "${LOCAL_GAME_SAVE_PATH}" ]; then
            ee ">>> Game save directory '${LOCAL_GAME_SAVE_PATH}' doesn't exist yet"
            exit 1
    fi
}

function create_backup() {
    check_required_directories

    date=$(date +%Y%m%d_%H%M%S)
    backup_file_name="saved-${date}.tar.gz"

    mkdir -p "${LOCAL_BACKUP_PATH}"

    if [[ -n $LOCAL_BACKUP_ANNOUNCE_MESSAGES_ENABLED ]] && [[ "${LOCAL_BACKUP_ANNOUNCE_MESSAGES_ENABLED,,}" == "true" ]]; then
        rconcli broadcast "$(get_time) Saving in 5 seconds..."
        sleep 5
        rconcli broadcast "$(get_time) Saving world..."
        rconcli save
        rconcli broadcast "$(get_time) Saving done"
        sleep 15
        rconcli broadcast "$(get_time) Creating backup..."
    else
        rconcli save
    fi


    if ! tar cfz "${LOCAL_BACKUP_PATH}/${backup_file_name}" -C "${LOCAL_GAME_PATH}/" --exclude "backup" "Saved" ; then
        broadcast_backup_failed
        ee ">>> Backup failed"
    else
        if [[ -n $LOCAL_BACKUP_ANNOUNCE_MESSAGES_ENABLED ]] && [[ "${LOCAL_BACKUP_ANNOUNCE_MESSAGES_ENABLED,,}" == "true" ]]; then
            broadcast_backup_success
        fi
        es ">>> Backup '${backup_file_name}' created successfully"
    fi

    if [[ -n ${LOCAL_BACKUP_RETENTION_POLICY} ]] && [[ "${LOCAL_BACKUP_RETENTION_POLICY,,}" == "true" ]] && [[ ${LOCAL_BACKUP_RETENTION_AMOUNT_TO_KEEP} =~ ^[0-9]+$ ]]; then
        ls -1t "${LOCAL_BACKUP_PATH}"/saved-*.tar.gz | tail -n +"$(($LOCAL_BACKUP_RETENTION_AMOUNT_TO_KEEP + 1))" | xargs -d '\n' rm -f --
    fi
}

function list_backups() {
    local num_backup_entries=${1}

    if [ ! -d "${LOCAL_BACKUP_PATH}" ]; then
        ee ">>> Backup directory ${LOCAL_BACKUP_PATH} does not exist"
        exit 1
    fi

    if [ -z "$(ls -A "${LOCAL_BACKUP_PATH}")" ]; then
        ew ">>> No backups in the backup directory ${LOCAL_BACKUP_PATH}"
        exit 0
    fi

    files=$(ls -1t "${LOCAL_BACKUP_PATH}"/saved-*.tar.gz)
    total_file_count=$(echo "${files}" | wc -l)

    if [ -z "${num_backup_entries}" ]; then
        file_list=${files}
        es ">>> Listing ${total_file_count} backup file(s)!"
    else
        file_list=$(echo "${files}" | head -n "${num_backup_entries}")
        es ">>> Listing ${num_backup_entries} out of backup ${total_file_count} file(s)"
    fi

    for file in $file_list; do
        filename=$(basename "${file}")

        # get date from filename
        date_str=${filename#saved-}    # Remove 'saved-' prefix
        date_str=${date_str%.tar.gz}   # Remove '.tar.gz' suffix

        # Reformat the date string
        date=$(date -d "${date_str:0:8} ${date_str:9:2}:${date_str:11:2}:${date_str:13:2}" +'%Y-%m-%d %H:%M:%S')

        ei_nn "${date} | " && e "${filename}"
    done
}

function clean_backups() {
    local num_files_to_keep=${1}

    if [[ -z "$num_files_to_keep" ]]; then
        ew ">>> Number of backups to keep is empty. Using default value of ${LOCAL_BACKUP_RETENTION_AMOUNT_TO_KEEP}"
    fi

    if ! [[ "$num_files_to_keep" =~ ^[0-9]+$ ]]; then
        ee ">>> Invalid argument '${num_files_to_keep}'. Please provide a positive integer"
        exit 1
    fi

    if [ -z "$(ls -A "${LOCAL_BACKUP_PATH}")" ]; then
        ei "> No files in the backup directory ${LOCAL_BACKUP_PATH}. Exiting..."
        exit 0
    fi

    files=$(ls -1t "${LOCAL_BACKUP_PATH}"/saved-*.tar.gz)
    files_to_delete=$(echo "${files}" | tail -n +"$(($num_files_to_keep + 1))")
    num_files=$(echo -n "${files}" | grep -c '^')
    num_files_to_delete=$(echo -ne "${files_to_delete}" | grep -c '^')

    if [[ ${num_files_to_delete} -gt 0 ]]; then
        echo "$files_to_delete" | xargs -d '\n' rm -f --
        if [[ ${num_files} -lt ${num_files_to_keep} ]]; then
            num_files_to_keep="${num_files}"
        fi
        es ">>> ${num_files_to_delete} backup(s) cleaned, keeping ${num_files_to_keep} backups(s)"
    else
        ei "> No backups to clean"
    fi
}

function initializeBackupManager() {
    parse_arguments "${@}"
    if [ ! -d "${LOCAL_BACKUP_PATH}" ]; then
        es "> Backup directory ${LOCAL_BACKUP_PATH} doesn't exist. Creating it..."
        mkdir -p "${LOCAL_BACKUP_PATH}"
    fi
}

initializeBackupManager "${@}"

```

`scripts/rconcli.sh`:

```sh
#!/bin/bash
# shellcheck disable=SC2148,SC1091
# Sources: https://pubs.opengroup.org/onlinepubs/009604599/utilities/xcu_chap02.html#tag_02_05_02

source /includes/colors.sh

# Function to run RCON commands
# Arguments: <command>
# Example: run_rcon_cli "showplayers"
run_rcon_cli() {
    if [[ -z ${RCON_ENABLED+x} ]] || [[ "${RCON_ENABLED,,}" != "true" ]]; then
        ew ">>> RCON is not enabled. Aborting RCON command ..."
        exit
    fi
    local command=$1
    shift
    if [ $# -ge 1 ]; then
        # In the command value, replace ASCII space characters with
        # unicode non-breaking space characters.
        full_command="$command $(echo "$@" | tr ' ' '\240')"
    else
        full_command=$command
    fi
    output=$(rcon -c "$RCON_CONFIG_FILE" "$full_command" | tr -d '\0')
    ei_nn "> RCON: "; e "${output}"
}

run_rcon_cli "$@"

```

`scripts/restart.sh`:

```sh
#!/bin/bash
# shellcheck disable=SC1091

set -e

source /includes/colors.sh
source /includes/server.sh
source /includes/webhook.sh

function get_time() {
    date '+[%H:%M:%S]'
}

function schedule_restart() {
    ew ">>> Automatic restart was triggered..."
    PLAYER_DETECTION_PID=$(<PLAYER_DETECTION.PID)
    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_restart_planned_notification
    fi

    for ((counter=15; counter>=1; counter--)); do
        if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
            if check_is_server_empty; then
                ew ">>> Server is empty, restarting now"
                if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
                    send_restart_now_notification
                fi
                break
            else
                ew ">>> Server has still players"
            fi
            rconcli broadcast "$(get_time) AUTOMATIC RESTART IN $counter MINUTES"
        fi
        if [[ -n $RESTART_DEBUG_OVERRIDE ]] && [[ "${RESTART_DEBUG_OVERRIDE,,}" == "true" ]]; then
            sleep 1
        else
            sleep 60
        fi
    done

    if [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
        rconcli broadcast "$(get_time) Saving world before restart..."
        rconcli save
        rconcli broadcast "$(get_time) Saving done"
        sleep 15
        kill -SIGTERM "${PLAYER_DETECTION_PID}"
        rcon "Shutdown 10"
        if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
            send_stop_notification
        fi
    else
        ew ">>> Stopping server..."
        if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
            send_stop_notification
        fi
        kill -SIGTERM "$(pidof PalServer-Linux-Shipping)"
        tail --pid="$(pidof PalServer-Linux-Shipping)" -f 2>/dev/null
        kill -SIGTERM "${PLAYER_DETECTION_PID}"
        ew ">>> Server stopped gracefully"
        exit 143;
    fi
}

schedule_restart

```

`scripts/servermanager.sh`:

```sh
#!/bin/bash
# shellcheck disable=SC1091
# IF Bash extension used:
# https://stackoverflow.com/a/13864829
# https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02

set -e

source /includes/colors.sh
source /includes/config.sh
source /includes/cron.sh
source /includes/playerdetection.sh
source /includes/security.sh
source /includes/server.sh
source /includes/webhook.sh

START_MAIN_PID=
PLAYER_DETECTION_PID=



# Handler for SIGTERM from docker-based stop events
function term_handler() {
    stop_server
}

# Main process thread
function start_main() {
    check_for_default_credentials
    if [ ! -f "${GAME_ROOT}/PalServer.sh" ]; then
        fresh_install_server
    fi
    if [ "${ALWAYS_UPDATE_ON_START,,}" == "true" ]; then
        update_server
    fi
    setup_crons
    start_server
}

# Bash-Trap for exit signals to handle
trap 'kill ${!}; term_handler' SIGTERM

# Main process loop
while true
do
    current_date=$(date +%Y-%m-%d)
    current_time=$(date +%H:%M:%S)
    ei ">>> Starting server manager"
    e "> Started at: $current_date $current_time"
    start_main &
    START_MAIN_PID="$!"

    if [[ -n $RCON_PLAYER_DETECTION ]] && [[ "${RCON_PLAYER_DETECTION,,}" == "true" ]] && [[ -n $RCON_ENABLED ]] && [[ "${RCON_ENABLED,,}" == "true" ]]; then
       player_detection_loop &
       PLAYER_DETECTION_PID="$!"
       echo $PLAYER_DETECTION_PID > PLAYER_DETECTION.PID
       ew "> Player detection thread started with pid ${PLAYER_DETECTION_PID}"
    fi

    ew "> Server main thread started with pid ${START_MAIN_PID}"
    wait ${START_MAIN_PID}

    if [[ -n $WEBHOOK_ENABLED ]] && [[ "${WEBHOOK_ENABLED,,}" == "true" ]]; then
        send_stop_notification
    fi
    exit 0;
done

```