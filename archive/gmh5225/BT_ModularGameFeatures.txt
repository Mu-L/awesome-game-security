Project Path: arc_gmh5225_BT_ModularGameFeatures_nbcfmwqx

Source Tree:

```txt
arc_gmh5225_BT_ModularGameFeatures_nbcfmwqx
├── BT.png
├── Config
│   ├── DefaultEditor.ini
│   ├── DefaultEditorPerProjectUserSettings.ini
│   ├── DefaultEngine.ini
│   ├── DefaultGame.ini
│   ├── DefaultGameplayTags.ini
│   └── DefaultInput.ini
├── Content
│   ├── FPJetpack
│   │   ├── BP_PickUp_Jetpack.uasset
│   │   ├── Jetpack.uasset
│   │   └── T_Jetpack.uasset
│   ├── FPWeapon
│   │   ├── Audio
│   │   │   └── FirstPersonTemplateWeaponFire02.uasset
│   │   ├── Materials
│   │   │   ├── BaseMaterial.uasset
│   │   │   ├── FirstPersonProjectileMaterial.uasset
│   │   │   ├── M_FPGun.uasset
│   │   │   └── MaterialLayers
│   │   │       ├── ML_GlossyBlack_Latex_UE4.uasset
│   │   │       ├── ML_Plastic_Shiny_Beige.uasset
│   │   │       ├── ML_Screen.uasset
│   │   │       ├── ML_SoftMetal_UE4.uasset
│   │   │       ├── T_ML_Aluminum01.uasset
│   │   │       ├── T_ML_Aluminum01_N.uasset
│   │   │       ├── T_ML_FineRubber.uasset
│   │   │       ├── T_ML_Rubber_Blue_01_D.uasset
│   │   │       └── T_ML_Rubber_Blue_01_N.uasset
│   │   ├── Mesh
│   │   │   ├── FirstPersonProjectileMesh.uasset
│   │   │   ├── SK_FPGun.uasset
│   │   │   ├── SK_FPGun_Physics.uasset
│   │   │   ├── SK_FPGun_PhysicsAsset.uasset
│   │   │   └── SK_FPGun_Skeleton.uasset
│   │   └── Textures
│   │       ├── T_FPGun_M.uasset
│   │       └── T_FPGun_N.uasset
│   ├── FirstPerson
│   │   ├── Blueprints
│   │   │   ├── BP_FirstPersonCharacter.uasset
│   │   │   ├── BP_FirstPersonGameMode.uasset
│   │   │   ├── BP_FirstPersonPlayerController.uasset
│   │   │   ├── BP_FirstPersonProjectile.uasset
│   │   │   ├── BP_ModeActivator.uasset
│   │   │   ├── BP_PickUp_Generic.uasset
│   │   │   └── BP_PickUp_Rifle.uasset
│   │   ├── Input
│   │   │   ├── Actions
│   │   │   │   ├── IA_Jump.uasset
│   │   │   │   ├── IA_Look.uasset
│   │   │   │   ├── IA_Move.uasset
│   │   │   │   └── IA_Shoot.uasset
│   │   │   ├── IMC_Default.uasset
│   │   │   ├── IMC_Weapons.uasset
│   │   │   └── MobileControls.uasset
│   │   └── Maps
│   │       ├── FirstPersonMap.umap
│   │       └── MainScenario.umap
│   ├── FirstPersonArms
│   │   ├── Animations
│   │   │   ├── FP_Falling.uasset
│   │   │   ├── FP_Idle.uasset
│   │   │   ├── FP_Jump.uasset
│   │   │   ├── FP_Land.uasset
│   │   │   ├── FP_Rifle_Falling.uasset
│   │   │   ├── FP_Rifle_Fire.uasset
│   │   │   ├── FP_Rifle_Idle.uasset
│   │   │   ├── FP_Rifle_Jump.uasset
│   │   │   ├── FP_Rifle_Land.uasset
│   │   │   ├── FP_Rifle_Run.uasset
│   │   │   ├── FP_Rifle_Shoot_Montage.uasset
│   │   │   ├── FP_Run_Fwd.uasset
│   │   │   └── FirstPerson_AnimBP.uasset
│   │   └── Character
│   │       ├── Materials
│   │       │   ├── Functions
│   │       │   │   ├── CA_Mannequin.uasset
│   │       │   │   ├── ChromaticCurve.uasset
│   │       │   │   ├── MF_Diffraction.uasset
│   │       │   │   ├── MF_logo3layers.uasset
│   │       │   │   └── ML_BaseColorFallOff.uasset
│   │       │   ├── Instances
│   │       │   │   └── Manny
│   │       │   │       ├── MI_Manny_01.uasset
│   │       │   │       └── MI_Manny_02.uasset
│   │       │   └── M_Mannequin.uasset
│   │       ├── Mesh
│   │       │   ├── SK_Mannequin_Arms.uasset
│   │       │   ├── SK_Mannequin_Arms_PhysicsAsset.uasset
│   │       │   └── SK_Mannequin_Arms_Skeleton.uasset
│   │       └── Textures
│   │           ├── Manny
│   │           │   ├── T_Manny_01_ASAOPMASK_MSK.uasset
│   │           │   ├── T_Manny_01_BN.uasset
│   │           │   ├── T_Manny_01_CCRCCPlastic_MSK.uasset
│   │           │   ├── T_Manny_01_D.uasset
│   │           │   ├── T_Manny_01_MSR_MSK.uasset
│   │           │   ├── T_Manny_01_N.uasset
│   │           │   ├── T_Manny_01_Tan.uasset
│   │           │   ├── T_Manny_02_ASAOPMASK_MSK.uasset
│   │           │   ├── T_Manny_02_BN.uasset
│   │           │   ├── T_Manny_02_CCRCCPlastic_MSK.uasset
│   │           │   ├── T_Manny_02_D.uasset
│   │           │   ├── T_Manny_02_MSR_MSK.uasset
│   │           │   ├── T_Manny_02_N.uasset
│   │           │   └── T_Manny_02_Tan.uasset
│   │           └── Shared
│   │               └── T_UE_Logo_M.uasset
│   ├── LevelPrototyping
│   │   ├── Materials
│   │   │   ├── MF_ProcGrid.uasset
│   │   │   ├── MI_PrototypeGrid_Gray.uasset
│   │   │   ├── MI_PrototypeGrid_Gray_02.uasset
│   │   │   ├── MI_PrototypeGrid_TopDark.uasset
│   │   │   ├── MI_Solid_Blue.uasset
│   │   │   ├── M_PrototypeGrid.uasset
│   │   │   └── M_Solid.uasset
│   │   ├── Meshes
│   │   │   ├── SM_ChamferCube.uasset
│   │   │   ├── SM_Cube.uasset
│   │   │   ├── SM_Cylinder.uasset
│   │   │   ├── SM_QuarterCylinder.uasset
│   │   │   └── SM_Ramp.uasset
│   │   └── Textures
│   │       └── T_GridChecker_A.uasset
│   ├── __ExternalActors__
│   │   └── FirstPerson
│   │       └── Maps
│   │           ├── FirstPersonMap
│   │           │   ├── 0
│   │           │   │   ├── CL
│   │           │   │   │   └── 381LM03PFI8AF9NED1SEV2.uasset
│   │           │   │   ├── GO
│   │           │   │   │   └── I8WEFD3RY9V3NVQLSU6QM4.uasset
│   │           │   │   ├── NB
│   │           │   │   │   └── NWWEVRQSGT6ARVZ8HQLCM9.uasset
│   │           │   │   └── XV
│   │           │   │       └── VTAF5COFGLO9YT51MQCVTR.uasset
│   │           │   ├── 1
│   │           │   │   └── OD
│   │           │   │       └── YPSPM063O6XAJVKSDHY2JX.uasset
│   │           │   ├── 3
│   │           │   │   ├── 0O
│   │           │   │   │   └── 4IRR0TBO7VGKMMYSZRQTB1.uasset
│   │           │   │   ├── AI
│   │           │   │   │   └── 0XWE3RNM2XQC0ST1KXG02O.uasset
│   │           │   │   ├── BH
│   │           │   │   │   └── GMZDTF3QQ6GKZW8QLXQKIS.uasset
│   │           │   │   └── C8
│   │           │   │       └── Z38FT77DKZLKDXTQ7PZNM4.uasset
│   │           │   ├── 4
│   │           │   │   ├── CR
│   │           │   │   │   └── SRVPLA8UNZ8XIIP0E036DI.uasset
│   │           │   │   ├── E5
│   │           │   │   │   └── 6XON0XLIRNWJCBCE62P2VV.uasset
│   │           │   │   ├── G2
│   │           │   │   │   └── DXY1ROMU8NVTUPH999VNGV.uasset
│   │           │   │   ├── PT
│   │           │   │   │   └── ZXUQMNLL9GZ2UNQ5D0R4A4.uasset
│   │           │   │   └── TJ
│   │           │   │       └── CLISWDBC6X59BG3U4RD0F1.uasset
│   │           │   ├── 5
│   │           │   │   ├── 80
│   │           │   │   │   └── QQN0UFFAA797E1UT4IMD29.uasset
│   │           │   │   ├── DI
│   │           │   │   │   └── 1JZHHCOBVQ2F5XRUWSES1X.uasset
│   │           │   │   ├── P1
│   │           │   │   │   └── VIFCCVIPAOCGIAIUJ27R9B.uasset
│   │           │   │   └── W4
│   │           │   │       └── MXSOOLN47B2MJB5ZNQINHQ.uasset
│   │           │   ├── 6
│   │           │   │   ├── 0Z
│   │           │   │   │   └── 5RQIHCZ9W3UXRGL4LTLQAK.uasset
│   │           │   │   ├── AJ
│   │           │   │   │   └── 2XZ3RUK0LFB63FVNQE7P5R.uasset
│   │           │   │   └── O2
│   │           │   │       └── VZPD7IAJ5YWYREDRHKHLCW.uasset
│   │           │   ├── 7
│   │           │   │   ├── 8K
│   │           │   │   │   └── 0OLPBOSZCPU1X7E3PCLCGF.uasset
│   │           │   │   ├── GI
│   │           │   │   │   └── GZM47KS5FPIQH5TLSYC1ME.uasset
│   │           │   │   ├── I8
│   │           │   │   │   └── LH9T10MU22N3EEPTZ4GAFC.uasset
│   │           │   │   └── L5
│   │           │   │       └── 1ZJ54FMA0DAL3I2Q8RFAIB.uasset
│   │           │   ├── 8
│   │           │   │   ├── 3M
│   │           │   │   │   └── 4ATOKH0ZGPCVBS85MPKAXK.uasset
│   │           │   │   ├── 80
│   │           │   │   │   └── RCXALNT3NG94XMV0V6D4XE.uasset
│   │           │   │   ├── CF
│   │           │   │   │   └── ZNIOCRD90Z70MMV9NMW778.uasset
│   │           │   │   ├── CW
│   │           │   │   │   └── 6HT16P8P5RAXNJG3EVYWE9.uasset
│   │           │   │   ├── N6
│   │           │   │   │   └── 7HWHBG6K5ONLNTKPMLXMYR.uasset
│   │           │   │   ├── SZ
│   │           │   │   │   └── D1AHM62WL9TXSNPYQDXQMZ.uasset
│   │           │   │   ├── Y4
│   │           │   │   │   └── KY9ZXT77SAVGWBRTNCFCSC.uasset
│   │           │   │   └── Z7
│   │           │   │       └── W1SXRCM1KAKBJOIZDLHZ47.uasset
│   │           │   ├── 9
│   │           │   │   ├── OJ
│   │           │   │   │   └── 9MHHMH0XHVZ04YDZ7NPC32.uasset
│   │           │   │   ├── Q2
│   │           │   │   │   └── TOKV0KMMZ7RIQ78R0UEDQL.uasset
│   │           │   │   └── VP
│   │           │   │       └── FVTPO8KZ0WPMCSQLVJE6O9.uasset
│   │           │   ├── A
│   │           │   │   ├── 2W
│   │           │   │   │   └── U0XT0R08XQA6C15NK8ILFA.uasset
│   │           │   │   ├── KU
│   │           │   │   │   └── 12YG9I1QW2GU72MG8QQX1K.uasset
│   │           │   │   └── RJ
│   │           │   │       └── Z7CLKO8GGJ7RXH5PUAF4T4.uasset
│   │           │   ├── B
│   │           │   │   ├── EF
│   │           │   │   │   └── G3O7YJR3QU51OHQGRYB635.uasset
│   │           │   │   ├── NZ
│   │           │   │   │   └── XLBHK1P7DEOTLNASWU74HW.uasset
│   │           │   │   └── YQ
│   │           │   │       └── KT6JL4FVCNJJ9VFOCSF32J.uasset
│   │           │   ├── C
│   │           │   │   ├── 7R
│   │           │   │   │   └── IC42L98JTYQE09WU7UMD8P.uasset
│   │           │   │   ├── P8
│   │           │   │   │   └── 0GJ9TLQE2YKOIFZ6YHG33H.uasset
│   │           │   │   └── VO
│   │           │   │       └── VMN4G7K3NKKV6F8HTPHHDB.uasset
│   │           │   ├── D
│   │           │   │   └── 0W
│   │           │   │       └── E1FKEGVKGOLM7HGLQPCIPO.uasset
│   │           │   └── E
│   │           │       ├── MX
│   │           │       │   └── R1GV431P5FDO08OFULRA01.uasset
│   │           │       ├── UE
│   │           │       │   └── YUZ9741T50O1SYRX90OB0S.uasset
│   │           │       └── V3
│   │           │           └── ICWLYCF62EJ63XTK5ZSZWV.uasset
│   │           └── MainScenario
│   │               ├── 0
│   │               │   ├── B7
│   │               │   │   └── FUB07XABNC1R6VRLC0PFL9.uasset
│   │               │   ├── KF
│   │               │   │   └── H5ROWB6QIVB35W51S3DNJU.uasset
│   │               │   └── RY
│   │               │       └── UBZ5U4R9YX6TMCSW4E3YAB.uasset
│   │               ├── 1
│   │               │   ├── GX
│   │               │   │   └── 3S5ABD4IXGOE7AHKZ3EMBI.uasset
│   │               │   ├── HZ
│   │               │   │   └── U2I4SGX17JJBN3M98V4OF8.uasset
│   │               │   └── KE
│   │               │       └── 54U6M2DMJJUS2XJX0GI1N5.uasset
│   │               ├── 3
│   │               │   ├── 06
│   │               │   │   └── OENWJZJ7E4D1NQA67AV5M0.uasset
│   │               │   └── L6
│   │               │       └── Y2HDRT7I14LD3W5CKM9MOR.uasset
│   │               ├── 5
│   │               │   ├── 53
│   │               │   │   └── 5VK97AEUNSOAGOB2778AEG.uasset
│   │               │   ├── AW
│   │               │   │   └── PO0L7KUE8EGVYHI3Q0O2LK.uasset
│   │               │   ├── BL
│   │               │   │   └── 18EZ3KUE4AHV1YZCJTUJD2.uasset
│   │               │   └── VG
│   │               │       └── T1TH0DMO6SMTBD3D0V60YE.uasset
│   │               ├── 6
│   │               │   ├── 5L
│   │               │   │   └── 9JWNEWZNC2ZHTBIOC3LX3U.uasset
│   │               │   ├── K3
│   │               │   │   └── G8BDYWKTSU9FPC6T4QDI9J.uasset
│   │               │   └── KG
│   │               │       └── 87CX7PW9C64C3VUKSJXAIC.uasset
│   │               ├── 7
│   │               │   ├── B1
│   │               │   │   └── MZDSH5T10DHZLH3WMJ5QZA.uasset
│   │               │   ├── IA
│   │               │   │   └── UGMDTXNT1Q2BCMB2NUM0FK.uasset
│   │               │   └── XX
│   │               │       └── HEF7YRS51JLJBR60QT3PIM.uasset
│   │               ├── 8
│   │               │   ├── 43
│   │               │   │   └── 2C064K32HQM6EI1QN9063V.uasset
│   │               │   └── PU
│   │               │       └── FT4ULMUU8J2DSTJTASWS21.uasset
│   │               ├── 9
│   │               │   ├── 7X
│   │               │   │   └── JBC09YW51UKYAVWGC33PU8.uasset
│   │               │   ├── H9
│   │               │   │   └── 6FGMT6KKY3TWT1JLM8H57C.uasset
│   │               │   ├── L3
│   │               │   │   └── 1QBEORX9ZQRZZRHPUU89ZP.uasset
│   │               │   └── PT
│   │               │       └── Z2DXO01QPL54ONV24HRLBD.uasset
│   │               ├── A
│   │               │   ├── HK
│   │               │   │   └── I1RMPAA2G92OXHN8XNMRSU.uasset
│   │               │   └── V4
│   │               │       └── VUTY4QGL84D9LYD7XNZWIV.uasset
│   │               ├── B
│   │               │   └── NG
│   │               │       └── 19Z9W7IUECKR40AFW5S05L.uasset
│   │               ├── C
│   │               │   └── WN
│   │               │       └── ZDN3KNLJQ9IZK0JMRYANZK.uasset
│   │               ├── D
│   │               │   ├── 9Z
│   │               │   │   └── GKC22UR7HMPMHD72GEAVVJ.uasset
│   │               │   └── L3
│   │               │       └── IMDMQOLRXGW3YQCDN8Z8MN.uasset
│   │               └── E
│   │                   ├── 84
│   │                   │   └── QNEG4XMDWS5QQ12OSCOXNE.uasset
│   │                   ├── 8D
│   │                   │   └── 28HPBEJ068YXIXGJFV8TLH.uasset
│   │                   ├── 99
│   │                   │   └── 808S6FEBFW2SM9DG74UBR4.uasset
│   │                   └── M4
│   │                       └── EPQ3VT7QWDVWJLOYMJQQ9V.uasset
│   └── __ExternalObjects__
│       └── FirstPerson
│           └── Maps
│               ├── FirstPersonMap
│               │   ├── 1
│               │   │   └── KG
│               │   │       └── WXBHR5YF7EMN5ENSKZGERE.uasset
│               │   ├── 3
│               │   │   └── BY
│               │   │       └── K2NKB37FY83282ZJ5Q84B9.uasset
│               │   ├── 5
│               │   │   └── 68
│               │   │       └── DK3EWP7A4H1CU1MWJ4M3SR.uasset
│               │   ├── 6
│               │   │   ├── B8
│               │   │   │   └── RE8N15L5TGXIQNKLJO5ONQ.uasset
│               │   │   └── VE
│               │   │       └── TF378B0L0V6R2E9RYZ61WK.uasset
│               │   ├── 7
│               │   │   └── XG
│               │   │       └── B4XEEQD3M51IAE3XXUCIGI.uasset
│               │   ├── 9
│               │   │   └── NP
│               │   │       └── OGSW48O49NB75KV3Y5NAUU.uasset
│               │   └── E
│               │       └── D1
│               │           └── 9XTHNJ7RYMHRDCEYQKNIYP.uasset
│               └── MainScenario
│                   ├── 2
│                   │   └── VI
│                   │       └── AUVAA6SHLAE9J7S9D6ZIET.uasset
│                   ├── 5
│                   │   └── RR
│                   │       └── EJDW76HWIWLES04YNIIWN9.uasset
│                   ├── 6
│                   │   └── AK
│                   │       └── JSUT2KKP8WK5ESZQSXSN66.uasset
│                   ├── 7
│                   │   └── 4N
│                   │       └── 0TYYHG2JSK8L7BAHZLZLND.uasset
│                   ├── A
│                   │   └── EH
│                   │       └── VQ0IAGTPBQ0XX9Y9AQ240E.uasset
│                   ├── B
│                   │   └── 0C
│                   │       └── KSBYP0HSF5RZESYTE0SSOJ.uasset
│                   ├── C
│                   │   └── OO
│                   │       └── QS8H34TBNSICM9TCVLLWD8.uasset
│                   └── E
│                       └── 88
│                           └── IMJO2NPDDUGBXMDA5TWGTJ.uasset
├── FirstPerson.uproject
├── Plugins
│   └── GameFeatures
│       ├── BT_CoinGame
│       │   ├── BT_CoinGame.uplugin
│       │   ├── Content
│       │   │   ├── BP_CoinGameComponent.uasset
│       │   │   ├── BT_CoinGame.uasset
│       │   │   ├── T_Icon_VBucks.uasset
│       │   │   ├── T_VictoryRoyale.uasset
│       │   │   ├── WBP_CoinCounter.uasset
│       │   │   └── WBP_CoinVictoryRoyale.uasset
│       │   ├── Resources
│       │   │   └── Icon128.png
│       │   └── Source
│       │       └── BT_CoinGameRuntime
│       │           ├── BT_CoinGameRuntime.Build.cs
│       │           ├── Private
│       │           │   ├── BT_CoinGameComponent.cpp
│       │           │   └── BT_CoinGameRuntimeModule.cpp
│       │           └── Public
│       │               ├── BT_CoinGameComponent.h
│       │               └── BT_CoinGameRuntimeModule.h
│       ├── BT_NewGameMech
│       │   ├── BT_NewGameMech.uplugin
│       │   ├── Content
│       │   │   ├── BP_JetpackComponent.uasset
│       │   │   ├── BT_NewGameMech.uasset
│       │   │   └── WBP_JetpackOn.uasset
│       │   ├── Resources
│       │   │   └── Icon128.png
│       │   └── Source
│       │       └── BT_NewGameMechRuntime
│       │           ├── BT_NewGameMechRuntime.Build.cs
│       │           ├── Classes
│       │           │   ├── BT_NewGameMechComponent.h
│       │           │   └── BT_NewPickUpComponent.h
│       │           ├── Private
│       │           │   ├── BT_NewGameMechComponent.cpp
│       │           │   ├── BT_NewGameMechRuntimeModule.cpp
│       │           │   └── BT_NewPickUpComponent.cpp
│       │           └── Public
│       │               └── BT_NewGameMechRuntimeModule.h
│       ├── BT_NewGameMode
│       │   ├── BT_NewGameMode.uplugin
│       │   ├── Content
│       │   │   ├── BP_GameplayTriggerZone.uasset
│       │   │   ├── BT_MainScenario.uasset
│       │   │   └── BT_NewGameMode.uasset
│       │   ├── Resources
│       │   │   └── Icon128.png
│       │   └── Source
│       │       └── BT_NewGameModeRuntime
│       │           ├── BT_NewGameModeRuntime.build.cs
│       │           ├── Private
│       │           │   ├── BT_NewGameModeRuntimeModule.cpp
│       │           │   ├── Components
│       │           │   │   └── GamestateScenarioComponent.cpp
│       │           │   ├── GameplayActivateScenario.cpp
│       │           │   ├── GameplayAddComponents.cpp
│       │           │   ├── GameplayDeactivateScenario.cpp
│       │           │   ├── GameplayScenario.cpp
│       │           │   ├── GameplayScenarioFunctionLibrary.cpp
│       │           │   ├── GameplayStreamLevelInstance.cpp
│       │           │   ├── GameplayTriggerZone.cpp
│       │           │   └── ScenarioInstanceSubsystem.cpp
│       │           └── Public
│       │               ├── BT_NewGameModeRuntimeModule.h
│       │               ├── Components
│       │               │   └── GamestateScenarioComponent.h
│       │               ├── GameplayActivateScenario.h
│       │               ├── GameplayAddComponents.h
│       │               ├── GameplayApplyGASPrimitives.h
│       │               ├── GameplayDeactivateScenario.h
│       │               ├── GameplayScenario.h
│       │               ├── GameplayScenarioAction.h
│       │               ├── GameplayScenarioFunctionLibrary.h
│       │               ├── GameplayStreamLevelInstance.h
│       │               ├── GameplayTriggerZone.h
│       │               └── ScenarioInstanceSubsystem.h
│       └── BT_PlayerAbilities
│           ├── BT_PlayerAbilities.uplugin
│           ├── Content
│           │   ├── BT_NewAbility.uasset
│           │   ├── BT_PlayerAbilities.uasset
│           │   ├── IA_Jetpack.uasset
│           │   └── IMC_NewAbility.uasset
│           ├── Resources
│           │   └── Icon128.png
│           └── Source
│               └── BT_PlayerAbilitiesRuntime
│                   ├── BT_PlayerAbilitiesRuntime.Build.cs
│                   ├── Private
│                   │   └── BT_PlayerAbilitiesRuntimeModule.cpp
│                   └── Public
│                       └── BT_PlayerAbilitiesRuntimeModule.h
├── README.md
├── Source
│   ├── FirstPerson
│   │   ├── AbilitySystem
│   │   │   ├── AbilityInputBindingComponent.cpp
│   │   │   ├── AbilityInputBindingComponent.h
│   │   │   ├── FirstPersonAbilityAttributeSet.h
│   │   │   ├── FirstPersonAbilitySystemComponent.cpp
│   │   │   ├── FirstPersonAbilitySystemComponent.h
│   │   │   ├── FirstPersonAbilityTargetActor.cpp
│   │   │   └── FirstPersonAbilityTargetActor.h
│   │   ├── Animation
│   │   │   ├── FirstPersonAnimInstance.cpp
│   │   │   └── FirstPersonAnimInstance.h
│   │   ├── FirstPerson.Build.cs
│   │   ├── FirstPerson.cpp
│   │   ├── FirstPerson.h
│   │   ├── FirstPersonCharacter.cpp
│   │   ├── FirstPersonCharacter.h
│   │   ├── FirstPersonGameMode.cpp
│   │   ├── FirstPersonGameMode.h
│   │   ├── FirstPersonPlayerController.cpp
│   │   ├── FirstPersonPlayerController.h
│   │   ├── FirstPersonProjectile.cpp
│   │   ├── FirstPersonProjectile.h
│   │   ├── GameFeatures
│   │   │   ├── GameFeatureAction_AddAbilities.cpp
│   │   │   ├── GameFeatureAction_AddAbilities.h
│   │   │   ├── GameFeatureAction_AddInputContextMapping.cpp
│   │   │   ├── GameFeatureAction_AddInputContextMapping.h
│   │   │   ├── GameFeatureAction_WorldActionBase.cpp
│   │   │   └── GameFeatureAction_WorldActionBase.h
│   │   ├── Input
│   │   │   ├── PlayerControlsComponent.cpp
│   │   │   └── PlayerControlsComponent.h
│   │   ├── Private
│   │   │   └── FirstPersonAssetManager.cpp
│   │   ├── Public
│   │   │   └── FirstPersonAssetManager.h
│   │   ├── TP_PickUpComponent.cpp
│   │   ├── TP_PickUpComponent.h
│   │   ├── TP_WeaponComponent.cpp
│   │   └── TP_WeaponComponent.h
│   ├── FirstPerson.Target.cs
│   └── FirstPersonEditor.Target.cs
└── VD.png

```

`Config/DefaultEditor.ini`:

```ini
[UnrealEd.SimpleMap]
SimpleMapName=/Game/FirstPerson/Maps/FirstPersonExampleMap

[EditoronlyBP]
bAllowClassAndBlueprintPinMatching=true
bReplaceBlueprintWithClass= true
bDontLoadBlueprintOutsideEditor= true
bBlueprintIsNotBlueprintType= true

[/Script/AdvancedPreviewScene.SharedProfiles]
+Profiles=(ProfileName="Epic Headquarters",bSharedProfile=True,bIsEngineDefaultProfile=True,bUseSkyLighting=True,DirectionalLightIntensity=1.000000,DirectionalLightColor=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),SkyLightIntensity=1.000000,bRotateLightingRig=False,bShowEnvironment=True,bShowFloor=True,bShowGrid=False,EnvironmentColor=(R=0.200000,G=0.200000,B=0.200000,A=1.000000),EnvironmentIntensity=1.000000,EnvironmentCubeMapPath="/Engine/EditorMaterials/AssetViewer/EpicQuadPanorama_CC+EV1.EpicQuadPanorama_CC+EV1",bPostProcessingEnabled=True,PostProcessingSettings=(bOverride_TemperatureType=False,bOverride_WhiteTemp=False,bOverride_WhiteTint=False,bOverride_ColorSaturation=False,bOverride_ColorContrast=False,bOverride_ColorGamma=False,bOverride_ColorGain=False,bOverride_ColorOffset=False,bOverride_ColorSaturationShadows=False,bOverride_ColorContrastShadows=False,bOverride_ColorGammaShadows=False,bOverride_ColorGainShadows=False,bOverride_ColorOffsetShadows=False,bOverride_ColorSaturationMidtones=False,bOverride_ColorContrastMidtones=False,bOverride_ColorGammaMidtones=False,bOverride_ColorGainMidtones=False,bOverride_ColorOffsetMidtones=False,bOverride_ColorSaturationHighlights=False,bOverride_ColorContrastHighlights=False,bOverride_ColorGammaHighlights=False,bOverride_ColorGainHighlights=False,bOverride_ColorOffsetHighlights=False,bOverride_ColorCorrectionShadowsMax=False,bOverride_ColorCorrectionHighlightsMin=False,bOverride_ColorCorrectionHighlightsMax=False,bOverride_BlueCorrection=False,bOverride_ExpandGamut=False,bOverride_ToneCurveAmount=False,bOverride_FilmSlope=False,bOverride_FilmToe=False,bOverride_FilmShoulder=False,bOverride_FilmBlackClip=False,bOverride_FilmWhiteClip=False,bOverride_SceneColorTint=False,bOverride_SceneFringeIntensity=False,bOverride_ChromaticAberrationStartOffset=False,bOverride_bMegaLights=False,bOverride_AmbientCubemapTint=False,bOverride_AmbientCubemapIntensity=False,bOverride_BloomMethod=False,bOverride_BloomIntensity=False,bOverride_BloomThreshold=False,bOverride_Bloom1Tint=False,bOverride_Bloom1Size=False,bOverride_Bloom2Size=False,bOverride_Bloom2Tint=False,bOverride_Bloom3Tint=False,bOverride_Bloom3Size=False,bOverride_Bloom4Tint=False,bOverride_Bloom4Size=False,bOverride_Bloom5Tint=False,bOverride_Bloom5Size=False,bOverride_Bloom6Tint=False,bOverride_Bloom6Size=False,bOverride_BloomSizeScale=False,bOverride_BloomConvolutionTexture=False,bOverride_BloomConvolutionScatterDispersion=False,bOverride_BloomConvolutionSize=False,bOverride_BloomConvolutionCenterUV=False,bOverride_BloomConvolutionPreFilterMin=False,bOverride_BloomConvolutionPreFilterMax=False,bOverride_BloomConvolutionPreFilterMult=False,bOverride_BloomConvolutionBufferScale=False,bOverride_BloomDirtMaskIntensity=False,bOverride_BloomDirtMaskTint=False,bOverride_BloomDirtMask=False,bOverride_CameraShutterSpeed=False,bOverride_CameraISO=False,bOverride_AutoExposureMethod=False,bOverride_AutoExposureLowPercent=False,bOverride_AutoExposureHighPercent=False,bOverride_AutoExposureMinBrightness=False,bOverride_AutoExposureMaxBrightness=False,bOverride_AutoExposureSpeedUp=False,bOverride_AutoExposureSpeedDown=False,bOverride_AutoExposureBias=False,bOverride_AutoExposureBiasCurve=False,bOverride_AutoExposureMeterMask=False,bOverride_AutoExposureApplyPhysicalCameraExposure=False,bOverride_HistogramLogMin=False,bOverride_HistogramLogMax=False,bOverride_LocalExposureMethod=False,bOverride_LocalExposureHighlightContrastScale=False,bOverride_LocalExposureShadowContrastScale=False,bOverride_LocalExposureHighlightContrastCurve=False,bOverride_LocalExposureShadowContrastCurve=False,bOverride_LocalExposureHighlightThreshold=False,bOverride_LocalExposureShadowThreshold=False,bOverride_LocalExposureDetailStrength=False,bOverride_LocalExposureBlurredLuminanceBlend=False,bOverride_LocalExposureBlurredLuminanceKernelSizePercent=False,bOverride_LocalExposureMiddleGreyBias=False,bOverride_LensFlareIntensity=False,bOverride_LensFlareTint=False,bOverride_LensFlareTints=False,bOverride_LensFlareBokehSize=False,bOverride_LensFlareBokehShape=False,bOverride_LensFlareThreshold=False,bOverride_VignetteIntensity=False,bOverride_Sharpen=False,bOverride_FilmGrainIntensity=False,bOverride_FilmGrainIntensityShadows=False,bOverride_FilmGrainIntensityMidtones=False,bOverride_FilmGrainIntensityHighlights=False,bOverride_FilmGrainShadowsMax=False,bOverride_FilmGrainHighlightsMin=False,bOverride_FilmGrainHighlightsMax=False,bOverride_FilmGrainTexelSize=False,bOverride_FilmGrainTexture=False,bOverride_AmbientOcclusionIntensity=False,bOverride_AmbientOcclusionStaticFraction=False,bOverride_AmbientOcclusionRadius=False,bOverride_AmbientOcclusionFadeDistance=False,bOverride_AmbientOcclusionFadeRadius=False,bOverride_AmbientOcclusionRadiusInWS=False,bOverride_AmbientOcclusionPower=False,bOverride_AmbientOcclusionBias=False,bOverride_AmbientOcclusionQuality=False,bOverride_AmbientOcclusionMipBlend=False,bOverride_AmbientOcclusionMipScale=False,bOverride_AmbientOcclusionMipThreshold=False,bOverride_AmbientOcclusionTemporalBlendWeight=False,bOverride_RayTracingAO=False,bOverride_RayTracingAOSamplesPerPixel=False,bOverride_RayTracingAOIntensity=False,bOverride_RayTracingAORadius=False,bOverride_IndirectLightingColor=False,bOverride_IndirectLightingIntensity=False,bOverride_ColorGradingIntensity=False,bOverride_ColorGradingLUT=False,bOverride_DepthOfFieldFocalDistance=False,bOverride_DepthOfFieldFstop=False,bOverride_DepthOfFieldMinFstop=False,bOverride_DepthOfFieldBladeCount=False,bOverride_DepthOfFieldSensorWidth=False,bOverride_DepthOfFieldSqueezeFactor=False,bOverride_DepthOfFieldDepthBlurRadius=False,bOverride_DepthOfFieldUseHairDepth=False,bOverride_DepthOfFieldDepthBlurAmount=False,bOverride_DepthOfFieldFocalRegion=False,bOverride_DepthOfFieldNearTransitionRegion=False,bOverride_DepthOfFieldFarTransitionRegion=False,bOverride_DepthOfFieldScale=False,bOverride_DepthOfFieldNearBlurSize=False,bOverride_DepthOfFieldFarBlurSize=False,bOverride_MobileHQGaussian=False,bOverride_DepthOfFieldOcclusion=False,bOverride_DepthOfFieldSkyFocusDistance=False,bOverride_DepthOfFieldVignetteSize=False,bOverride_MotionBlurAmount=False,bOverride_MotionBlurMax=False,bOverride_MotionBlurTargetFPS=False,bOverride_MotionBlurPerObjectSize=False,bOverride_ReflectionMethod=False,bOverride_LumenReflectionQuality=False,bOverride_ScreenSpaceReflectionIntensity=False,bOverride_ScreenSpaceReflectionQuality=False,bOverride_ScreenSpaceReflectionMaxRoughness=False,bOverride_ScreenSpaceReflectionRoughnessScale=False,bOverride_UserFlags=False,bOverride_RayTracingReflectionsMaxRoughness=False,bOverride_RayTracingReflectionsMaxBounces=False,bOverride_RayTracingReflectionsSamplesPerPixel=False,bOverride_RayTracingReflectionsShadows=False,bOverride_RayTracingReflectionsTranslucency=False,bOverride_TranslucencyType=False,bOverride_RayTracingTranslucencyMaxRoughness=False,bOverride_RayTracingTranslucencyRefractionRays=False,bOverride_RayTracingTranslucencySamplesPerPixel=False,bOverride_RayTracingTranslucencyShadows=False,bOverride_RayTracingTranslucencyRefraction=False,bOverride_DynamicGlobalIlluminationMethod=False,bOverride_LumenSceneLightingQuality=False,bOverride_LumenSceneDetail=False,bOverride_LumenSceneViewDistance=False,bOverride_LumenSceneLightingUpdateSpeed=False,bOverride_LumenFinalGatherQuality=False,bOverride_LumenFinalGatherLightingUpdateSpeed=False,bOverride_LumenFinalGatherScreenTraces=False,bOverride_LumenMaxTraceDistance=False,bOverride_LumenDiffuseColorBoost=False,bOverride_LumenSkylightLeaking=False,bOverride_LumenFullSkylightLeakingDistance=False,bOverride_LumenRayLightingMode=False,bOverride_LumenReflectionsScreenTraces=False,bOverride_LumenFrontLayerTranslucencyReflections=False,bOverride_LumenMaxRoughnessToTraceReflections=False,bOverride_LumenMaxReflectionBounces=False,bOverride_LumenMaxRefractionBounces=False,bOverride_LumenSurfaceCacheResolution=False,bOverride_RayTracingGI=False,bOverride_RayTracingGIMaxBounces=False,bOverride_RayTracingGISamplesPerPixel=False,bOverride_PathTracingMaxBounces=False,bOverride_PathTracingSamplesPerPixel=False,bOverride_PathTracingMaxPathIntensity=False,bOverride_PathTracingEnableEmissiveMaterials=False,bOverride_PathTracingEnableReferenceDOF=False,bOverride_PathTracingEnableReferenceAtmosphere=False,bOverride_PathTracingEnableDenoiser=False,bOverride_PathTracingIncludeEmissive=False,bOverride_PathTracingIncludeDiffuse=False,bOverride_PathTracingIncludeIndirectDiffuse=False,bOverride_PathTracingIncludeSpecular=False,bOverride_PathTracingIncludeIndirectSpecular=False,bOverride_PathTracingIncludeVolume=False,bOverride_PathTracingIncludeIndirectVolume=False,bMobileHQGaussian=False,BloomMethod=BM_SOG,AutoExposureMethod=AEM_Histogram,TemperatureType=TEMP_WhiteBalance,WhiteTemp=6500.000000,WhiteTint=0.000000,ColorSaturation=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrast=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGamma=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGain=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffset=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetShadows=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetMidtones=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetHighlights=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorCorrectionHighlightsMin=0.500000,ColorCorrectionHighlightsMax=1.000000,ColorCorrectionShadowsMax=0.090000,BlueCorrection=0.600000,ExpandGamut=1.000000,ToneCurveAmount=1.000000,FilmSlope=0.880000,FilmToe=0.550000,FilmShoulder=0.260000,FilmBlackClip=0.000000,FilmWhiteClip=0.040000,SceneColorTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),SceneFringeIntensity=0.000000,ChromaticAberrationStartOffset=0.000000,BloomIntensity=0.675000,BloomThreshold=-1.000000,BloomSizeScale=4.000000,Bloom1Size=0.300000,Bloom2Size=1.000000,Bloom3Size=2.000000,Bloom4Size=10.000000,Bloom5Size=30.000000,Bloom6Size=64.000000,Bloom1Tint=(R=0.346500,G=0.346500,B=0.346500,A=1.000000),Bloom2Tint=(R=0.138000,G=0.138000,B=0.138000,A=1.000000),Bloom3Tint=(R=0.117600,G=0.117600,B=0.117600,A=1.000000),Bloom4Tint=(R=0.066000,G=0.066000,B=0.066000,A=1.000000),Bloom5Tint=(R=0.066000,G=0.066000,B=0.066000,A=1.000000),Bloom6Tint=(R=0.061000,G=0.061000,B=0.061000,A=1.000000),BloomConvolutionScatterDispersion=1.000000,BloomConvolutionSize=1.000000,BloomConvolutionTexture=None,BloomConvolutionCenterUV=(X=0.500000,Y=0.500000),BloomConvolutionPreFilterMin=7.000000,BloomConvolutionPreFilterMax=15000.000000,BloomConvolutionPreFilterMult=15.000000,BloomConvolutionBufferScale=0.133000,BloomDirtMask=None,BloomDirtMaskIntensity=0.000000,BloomDirtMaskTint=(R=0.500000,G=0.500000,B=0.500000,A=1.000000),DynamicGlobalIlluminationMethod=Lumen,IndirectLightingColor=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),IndirectLightingIntensity=1.000000,LumenRayLightingMode=Default,LumenSceneLightingQuality=1.000000,LumenSceneDetail=1.000000,LumenSceneViewDistance=20000.000000,LumenSceneLightingUpdateSpeed=1.000000,LumenFinalGatherQuality=1.000000,LumenFinalGatherLightingUpdateSpeed=1.000000,LumenFinalGatherScreenTraces=True,LumenMaxTraceDistance=20000.000000,LumenDiffuseColorBoost=1.000000,LumenSkylightLeaking=0.000000,LumenFullSkylightLeakingDistance=1000.000000,LumenSurfaceCacheResolution=1.000000,ReflectionMethod=Lumen,LumenReflectionQuality=1.000000,LumenReflectionsScreenTraces=True,LumenFrontLayerTranslucencyReflections=False,LumenMaxRoughnessToTraceReflections=0.400000,LumenMaxReflectionBounces=1,LumenMaxRefractionBounces=0,ScreenSpaceReflectionIntensity=100.000000,ScreenSpaceReflectionQuality=50.000000,ScreenSpaceReflectionMaxRoughness=0.600000,bMegaLights=True,AmbientCubemapTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),AmbientCubemapIntensity=1.000000,AmbientCubemap=None,CameraShutterSpeed=60.000000,CameraISO=100.000000,DepthOfFieldFstop=4.000000,DepthOfFieldMinFstop=1.200000,DepthOfFieldBladeCount=5,AutoExposureBias=1.000000,AutoExposureBiasBackup=0.000000,bOverride_AutoExposureBiasBackup=False,AutoExposureApplyPhysicalCameraExposure=True,AutoExposureBiasCurve=None,AutoExposureMeterMask=None,AutoExposureLowPercent=10.000000,AutoExposureHighPercent=90.000000,AutoExposureMinBrightness=-10.000000,AutoExposureMaxBrightness=20.000000,AutoExposureSpeedUp=3.000000,AutoExposureSpeedDown=1.000000,HistogramLogMin=-10.000000,HistogramLogMax=20.000000,LocalExposureMethod=Bilateral,LocalExposureHighlightContrastScale=1.000000,LocalExposureShadowContrastScale=1.000000,LocalExposureHighlightContrastCurve=None,LocalExposureShadowContrastCurve=None,LocalExposureHighlightThreshold=0.000000,LocalExposureShadowThreshold=0.000000,LocalExposureDetailStrength=1.000000,LocalExposureBlurredLuminanceBlend=0.600000,LocalExposureBlurredLuminanceKernelSizePercent=50.000000,LocalExposureMiddleGreyBias=0.000000,LensFlareIntensity=1.000000,LensFlareTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),LensFlareBokehSize=3.000000,LensFlareThreshold=8.000000,LensFlareBokehShape=None,LensFlareTints[0]=(R=1.000000,G=0.800000,B=0.400000,A=0.600000),LensFlareTints[1]=(R=1.000000,G=1.000000,B=0.600000,A=0.530000),LensFlareTints[2]=(R=0.800000,G=0.800000,B=1.000000,A=0.460000),LensFlareTints[3]=(R=0.500000,G=1.000000,B=0.400000,A=0.390000),LensFlareTints[4]=(R=0.500000,G=0.800000,B=1.000000,A=0.310000),LensFlareTints[5]=(R=0.900000,G=1.000000,B=0.800000,A=0.270000),LensFlareTints[6]=(R=1.000000,G=0.800000,B=0.400000,A=0.220000),LensFlareTints[7]=(R=0.900000,G=0.700000,B=0.700000,A=0.150000),VignetteIntensity=0.400000,Sharpen=0.000000,FilmGrainIntensity=0.000000,FilmGrainIntensityShadows=1.000000,FilmGrainIntensityMidtones=1.000000,FilmGrainIntensityHighlights=1.000000,FilmGrainShadowsMax=0.090000,FilmGrainHighlightsMin=0.500000,FilmGrainHighlightsMax=1.000000,FilmGrainTexelSize=1.000000,FilmGrainTexture=None,AmbientOcclusionIntensity=0.500000,AmbientOcclusionStaticFraction=1.000000,AmbientOcclusionRadius=200.000000,AmbientOcclusionRadiusInWS=False,AmbientOcclusionFadeDistance=8000.000000,AmbientOcclusionFadeRadius=5000.000000,AmbientOcclusionPower=2.000000,AmbientOcclusionBias=3.000000,AmbientOcclusionQuality=50.000000,AmbientOcclusionMipBlend=0.600000,AmbientOcclusionMipScale=1.700000,AmbientOcclusionMipThreshold=0.010000,AmbientOcclusionTemporalBlendWeight=0.100000,RayTracingAO=False,RayTracingAOSamplesPerPixel=1,RayTracingAOIntensity=1.000000,RayTracingAORadius=200.000000,ColorGradingIntensity=1.000000,ColorGradingLUT=None,DepthOfFieldSensorWidth=24.576000,DepthOfFieldSqueezeFactor=1.000000,DepthOfFieldFocalDistance=0.000000,DepthOfFieldDepthBlurAmount=1.000000,DepthOfFieldDepthBlurRadius=0.000000,DepthOfFieldUseHairDepth=False,DepthOfFieldFocalRegion=0.000000,DepthOfFieldNearTransitionRegion=300.000000,DepthOfFieldFarTransitionRegion=500.000000,DepthOfFieldScale=0.000000,DepthOfFieldNearBlurSize=15.000000,DepthOfFieldFarBlurSize=15.000000,DepthOfFieldOcclusion=0.400000,DepthOfFieldSkyFocusDistance=0.000000,DepthOfFieldVignetteSize=200.000000,MotionBlurAmount=0.500000,MotionBlurMax=5.000000,MotionBlurTargetFPS=30,MotionBlurPerObjectSize=0.000000,TranslucencyType=Raster,RayTracingTranslucencyMaxRoughness=0.600000,RayTracingTranslucencyRefractionRays=3,RayTracingTranslucencySamplesPerPixel=1,RayTracingTranslucencyShadows=Hard_shadows,RayTracingTranslucencyRefraction=True,PathTracingMaxBounces=32,PathTracingSamplesPerPixel=2048,PathTracingMaxPathIntensity=24.000000,PathTracingEnableEmissiveMaterials=True,PathTracingEnableReferenceDOF=False,PathTracingEnableReferenceAtmosphere=False,PathTracingEnableDenoiser=True,PathTracingIncludeEmissive=True,PathTracingIncludeDiffuse=True,PathTracingIncludeIndirectDiffuse=True,PathTracingIncludeSpecular=True,PathTracingIncludeIndirectSpecular=True,PathTracingIncludeVolume=True,PathTracingIncludeIndirectVolume=True,UserFlags=0,WeightedBlendables=(Array=)),LightingRigRotation=0.000000,RotationSpeed=2.000000,DirectionalLightRotation=(Pitch=-40.000000,Yaw=-67.500000,Roll=0.000000),bEnableToneMapping=True,bShowMeshEdges=False)
+Profiles=(ProfileName="Grey Wireframe",bSharedProfile=True,bIsEngineDefaultProfile=True,bUseSkyLighting=True,DirectionalLightIntensity=1.000000,DirectionalLightColor=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),SkyLightIntensity=1.000000,bRotateLightingRig=False,bShowEnvironment=False,bShowFloor=False,bShowGrid=True,EnvironmentColor=(R=0.039216,G=0.039216,B=0.039216,A=1.000000),EnvironmentIntensity=1.000000,EnvironmentCubeMapPath="/Engine/EditorMaterials/AssetViewer/EpicQuadPanorama_CC+EV1.EpicQuadPanorama_CC+EV1",bPostProcessingEnabled=False,PostProcessingSettings=(bOverride_TemperatureType=False,bOverride_WhiteTemp=False,bOverride_WhiteTint=False,bOverride_ColorSaturation=False,bOverride_ColorContrast=False,bOverride_ColorGamma=False,bOverride_ColorGain=False,bOverride_ColorOffset=False,bOverride_ColorSaturationShadows=False,bOverride_ColorContrastShadows=False,bOverride_ColorGammaShadows=False,bOverride_ColorGainShadows=False,bOverride_ColorOffsetShadows=False,bOverride_ColorSaturationMidtones=False,bOverride_ColorContrastMidtones=False,bOverride_ColorGammaMidtones=False,bOverride_ColorGainMidtones=False,bOverride_ColorOffsetMidtones=False,bOverride_ColorSaturationHighlights=False,bOverride_ColorContrastHighlights=False,bOverride_ColorGammaHighlights=False,bOverride_ColorGainHighlights=False,bOverride_ColorOffsetHighlights=False,bOverride_ColorCorrectionShadowsMax=False,bOverride_ColorCorrectionHighlightsMin=False,bOverride_ColorCorrectionHighlightsMax=False,bOverride_BlueCorrection=False,bOverride_ExpandGamut=False,bOverride_ToneCurveAmount=False,bOverride_FilmSlope=False,bOverride_FilmToe=False,bOverride_FilmShoulder=False,bOverride_FilmBlackClip=False,bOverride_FilmWhiteClip=False,bOverride_SceneColorTint=False,bOverride_SceneFringeIntensity=False,bOverride_ChromaticAberrationStartOffset=False,bOverride_bMegaLights=False,bOverride_AmbientCubemapTint=False,bOverride_AmbientCubemapIntensity=False,bOverride_BloomMethod=False,bOverride_BloomIntensity=False,bOverride_BloomThreshold=False,bOverride_Bloom1Tint=False,bOverride_Bloom1Size=False,bOverride_Bloom2Size=False,bOverride_Bloom2Tint=False,bOverride_Bloom3Tint=False,bOverride_Bloom3Size=False,bOverride_Bloom4Tint=False,bOverride_Bloom4Size=False,bOverride_Bloom5Tint=False,bOverride_Bloom5Size=False,bOverride_Bloom6Tint=False,bOverride_Bloom6Size=False,bOverride_BloomSizeScale=False,bOverride_BloomConvolutionTexture=False,bOverride_BloomConvolutionScatterDispersion=False,bOverride_BloomConvolutionSize=False,bOverride_BloomConvolutionCenterUV=False,bOverride_BloomConvolutionPreFilterMin=False,bOverride_BloomConvolutionPreFilterMax=False,bOverride_BloomConvolutionPreFilterMult=False,bOverride_BloomConvolutionBufferScale=False,bOverride_BloomDirtMaskIntensity=False,bOverride_BloomDirtMaskTint=False,bOverride_BloomDirtMask=False,bOverride_CameraShutterSpeed=False,bOverride_CameraISO=False,bOverride_AutoExposureMethod=False,bOverride_AutoExposureLowPercent=False,bOverride_AutoExposureHighPercent=False,bOverride_AutoExposureMinBrightness=False,bOverride_AutoExposureMaxBrightness=False,bOverride_AutoExposureSpeedUp=False,bOverride_AutoExposureSpeedDown=False,bOverride_AutoExposureBias=False,bOverride_AutoExposureBiasCurve=False,bOverride_AutoExposureMeterMask=False,bOverride_AutoExposureApplyPhysicalCameraExposure=False,bOverride_HistogramLogMin=False,bOverride_HistogramLogMax=False,bOverride_LocalExposureMethod=False,bOverride_LocalExposureHighlightContrastScale=False,bOverride_LocalExposureShadowContrastScale=False,bOverride_LocalExposureHighlightContrastCurve=False,bOverride_LocalExposureShadowContrastCurve=False,bOverride_LocalExposureHighlightThreshold=False,bOverride_LocalExposureShadowThreshold=False,bOverride_LocalExposureDetailStrength=False,bOverride_LocalExposureBlurredLuminanceBlend=False,bOverride_LocalExposureBlurredLuminanceKernelSizePercent=False,bOverride_LocalExposureMiddleGreyBias=False,bOverride_LensFlareIntensity=False,bOverride_LensFlareTint=False,bOverride_LensFlareTints=False,bOverride_LensFlareBokehSize=False,bOverride_LensFlareBokehShape=False,bOverride_LensFlareThreshold=False,bOverride_VignetteIntensity=False,bOverride_Sharpen=False,bOverride_FilmGrainIntensity=False,bOverride_FilmGrainIntensityShadows=False,bOverride_FilmGrainIntensityMidtones=False,bOverride_FilmGrainIntensityHighlights=False,bOverride_FilmGrainShadowsMax=False,bOverride_FilmGrainHighlightsMin=False,bOverride_FilmGrainHighlightsMax=False,bOverride_FilmGrainTexelSize=False,bOverride_FilmGrainTexture=False,bOverride_AmbientOcclusionIntensity=False,bOverride_AmbientOcclusionStaticFraction=False,bOverride_AmbientOcclusionRadius=False,bOverride_AmbientOcclusionFadeDistance=False,bOverride_AmbientOcclusionFadeRadius=False,bOverride_AmbientOcclusionRadiusInWS=False,bOverride_AmbientOcclusionPower=False,bOverride_AmbientOcclusionBias=False,bOverride_AmbientOcclusionQuality=False,bOverride_AmbientOcclusionMipBlend=False,bOverride_AmbientOcclusionMipScale=False,bOverride_AmbientOcclusionMipThreshold=False,bOverride_AmbientOcclusionTemporalBlendWeight=False,bOverride_RayTracingAO=False,bOverride_RayTracingAOSamplesPerPixel=False,bOverride_RayTracingAOIntensity=False,bOverride_RayTracingAORadius=False,bOverride_IndirectLightingColor=False,bOverride_IndirectLightingIntensity=False,bOverride_ColorGradingIntensity=False,bOverride_ColorGradingLUT=False,bOverride_DepthOfFieldFocalDistance=False,bOverride_DepthOfFieldFstop=False,bOverride_DepthOfFieldMinFstop=False,bOverride_DepthOfFieldBladeCount=False,bOverride_DepthOfFieldSensorWidth=False,bOverride_DepthOfFieldSqueezeFactor=False,bOverride_DepthOfFieldDepthBlurRadius=False,bOverride_DepthOfFieldUseHairDepth=False,bOverride_DepthOfFieldDepthBlurAmount=False,bOverride_DepthOfFieldFocalRegion=False,bOverride_DepthOfFieldNearTransitionRegion=False,bOverride_DepthOfFieldFarTransitionRegion=False,bOverride_DepthOfFieldScale=False,bOverride_DepthOfFieldNearBlurSize=False,bOverride_DepthOfFieldFarBlurSize=False,bOverride_MobileHQGaussian=False,bOverride_DepthOfFieldOcclusion=False,bOverride_DepthOfFieldSkyFocusDistance=False,bOverride_DepthOfFieldVignetteSize=False,bOverride_MotionBlurAmount=False,bOverride_MotionBlurMax=False,bOverride_MotionBlurTargetFPS=False,bOverride_MotionBlurPerObjectSize=False,bOverride_ReflectionMethod=False,bOverride_LumenReflectionQuality=False,bOverride_ScreenSpaceReflectionIntensity=False,bOverride_ScreenSpaceReflectionQuality=False,bOverride_ScreenSpaceReflectionMaxRoughness=False,bOverride_ScreenSpaceReflectionRoughnessScale=False,bOverride_UserFlags=False,bOverride_RayTracingReflectionsMaxRoughness=False,bOverride_RayTracingReflectionsMaxBounces=False,bOverride_RayTracingReflectionsSamplesPerPixel=False,bOverride_RayTracingReflectionsShadows=False,bOverride_RayTracingReflectionsTranslucency=False,bOverride_TranslucencyType=False,bOverride_RayTracingTranslucencyMaxRoughness=False,bOverride_RayTracingTranslucencyRefractionRays=False,bOverride_RayTracingTranslucencySamplesPerPixel=False,bOverride_RayTracingTranslucencyShadows=False,bOverride_RayTracingTranslucencyRefraction=False,bOverride_DynamicGlobalIlluminationMethod=False,bOverride_LumenSceneLightingQuality=False,bOverride_LumenSceneDetail=False,bOverride_LumenSceneViewDistance=False,bOverride_LumenSceneLightingUpdateSpeed=False,bOverride_LumenFinalGatherQuality=False,bOverride_LumenFinalGatherLightingUpdateSpeed=False,bOverride_LumenFinalGatherScreenTraces=False,bOverride_LumenMaxTraceDistance=False,bOverride_LumenDiffuseColorBoost=False,bOverride_LumenSkylightLeaking=False,bOverride_LumenFullSkylightLeakingDistance=False,bOverride_LumenRayLightingMode=False,bOverride_LumenReflectionsScreenTraces=False,bOverride_LumenFrontLayerTranslucencyReflections=False,bOverride_LumenMaxRoughnessToTraceReflections=False,bOverride_LumenMaxReflectionBounces=False,bOverride_LumenMaxRefractionBounces=False,bOverride_LumenSurfaceCacheResolution=False,bOverride_RayTracingGI=False,bOverride_RayTracingGIMaxBounces=False,bOverride_RayTracingGISamplesPerPixel=False,bOverride_PathTracingMaxBounces=False,bOverride_PathTracingSamplesPerPixel=False,bOverride_PathTracingMaxPathIntensity=False,bOverride_PathTracingEnableEmissiveMaterials=False,bOverride_PathTracingEnableReferenceDOF=False,bOverride_PathTracingEnableReferenceAtmosphere=False,bOverride_PathTracingEnableDenoiser=False,bOverride_PathTracingIncludeEmissive=False,bOverride_PathTracingIncludeDiffuse=False,bOverride_PathTracingIncludeIndirectDiffuse=False,bOverride_PathTracingIncludeSpecular=False,bOverride_PathTracingIncludeIndirectSpecular=False,bOverride_PathTracingIncludeVolume=False,bOverride_PathTracingIncludeIndirectVolume=False,bMobileHQGaussian=False,BloomMethod=BM_SOG,AutoExposureMethod=AEM_Histogram,TemperatureType=TEMP_WhiteBalance,WhiteTemp=6500.000000,WhiteTint=0.000000,ColorSaturation=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrast=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGamma=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGain=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffset=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainShadows=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetShadows=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainMidtones=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetMidtones=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorSaturationHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorContrastHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGammaHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorGainHighlights=(X=1.000000,Y=1.000000,Z=1.000000,W=1.000000),ColorOffsetHighlights=(X=0.000000,Y=0.000000,Z=0.000000,W=0.000000),ColorCorrectionHighlightsMin=0.500000,ColorCorrectionHighlightsMax=1.000000,ColorCorrectionShadowsMax=0.090000,BlueCorrection=0.600000,ExpandGamut=1.000000,ToneCurveAmount=1.000000,FilmSlope=0.880000,FilmToe=0.550000,FilmShoulder=0.260000,FilmBlackClip=0.000000,FilmWhiteClip=0.040000,SceneColorTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),SceneFringeIntensity=0.000000,ChromaticAberrationStartOffset=0.000000,BloomIntensity=0.675000,BloomThreshold=-1.000000,BloomSizeScale=4.000000,Bloom1Size=0.300000,Bloom2Size=1.000000,Bloom3Size=2.000000,Bloom4Size=10.000000,Bloom5Size=30.000000,Bloom6Size=64.000000,Bloom1Tint=(R=0.346500,G=0.346500,B=0.346500,A=1.000000),Bloom2Tint=(R=0.138000,G=0.138000,B=0.138000,A=1.000000),Bloom3Tint=(R=0.117600,G=0.117600,B=0.117600,A=1.000000),Bloom4Tint=(R=0.066000,G=0.066000,B=0.066000,A=1.000000),Bloom5Tint=(R=0.066000,G=0.066000,B=0.066000,A=1.000000),Bloom6Tint=(R=0.061000,G=0.061000,B=0.061000,A=1.000000),BloomConvolutionScatterDispersion=1.000000,BloomConvolutionSize=1.000000,BloomConvolutionTexture=None,BloomConvolutionCenterUV=(X=0.500000,Y=0.500000),BloomConvolutionPreFilterMin=7.000000,BloomConvolutionPreFilterMax=15000.000000,BloomConvolutionPreFilterMult=15.000000,BloomConvolutionBufferScale=0.133000,BloomDirtMask=None,BloomDirtMaskIntensity=0.000000,BloomDirtMaskTint=(R=0.500000,G=0.500000,B=0.500000,A=1.000000),DynamicGlobalIlluminationMethod=Lumen,IndirectLightingColor=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),IndirectLightingIntensity=1.000000,LumenRayLightingMode=Default,LumenSceneLightingQuality=1.000000,LumenSceneDetail=1.000000,LumenSceneViewDistance=20000.000000,LumenSceneLightingUpdateSpeed=1.000000,LumenFinalGatherQuality=1.000000,LumenFinalGatherLightingUpdateSpeed=1.000000,LumenFinalGatherScreenTraces=True,LumenMaxTraceDistance=20000.000000,LumenDiffuseColorBoost=1.000000,LumenSkylightLeaking=0.000000,LumenFullSkylightLeakingDistance=1000.000000,LumenSurfaceCacheResolution=1.000000,ReflectionMethod=Lumen,LumenReflectionQuality=1.000000,LumenReflectionsScreenTraces=True,LumenFrontLayerTranslucencyReflections=False,LumenMaxRoughnessToTraceReflections=0.400000,LumenMaxReflectionBounces=1,LumenMaxRefractionBounces=0,ScreenSpaceReflectionIntensity=100.000000,ScreenSpaceReflectionQuality=50.000000,ScreenSpaceReflectionMaxRoughness=0.600000,bMegaLights=True,AmbientCubemapTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),AmbientCubemapIntensity=1.000000,AmbientCubemap=None,CameraShutterSpeed=60.000000,CameraISO=100.000000,DepthOfFieldFstop=4.000000,DepthOfFieldMinFstop=1.200000,DepthOfFieldBladeCount=5,AutoExposureBias=1.000000,AutoExposureBiasBackup=0.000000,bOverride_AutoExposureBiasBackup=False,AutoExposureApplyPhysicalCameraExposure=True,AutoExposureBiasCurve=None,AutoExposureMeterMask=None,AutoExposureLowPercent=10.000000,AutoExposureHighPercent=90.000000,AutoExposureMinBrightness=-10.000000,AutoExposureMaxBrightness=20.000000,AutoExposureSpeedUp=3.000000,AutoExposureSpeedDown=1.000000,HistogramLogMin=-10.000000,HistogramLogMax=20.000000,LocalExposureMethod=Bilateral,LocalExposureHighlightContrastScale=1.000000,LocalExposureShadowContrastScale=1.000000,LocalExposureHighlightContrastCurve=None,LocalExposureShadowContrastCurve=None,LocalExposureHighlightThreshold=0.000000,LocalExposureShadowThreshold=0.000000,LocalExposureDetailStrength=1.000000,LocalExposureBlurredLuminanceBlend=0.600000,LocalExposureBlurredLuminanceKernelSizePercent=50.000000,LocalExposureMiddleGreyBias=0.000000,LensFlareIntensity=1.000000,LensFlareTint=(R=1.000000,G=1.000000,B=1.000000,A=1.000000),LensFlareBokehSize=3.000000,LensFlareThreshold=8.000000,LensFlareBokehShape=None,LensFlareTints[0]=(R=1.000000,G=0.800000,B=0.400000,A=0.600000),LensFlareTints[1]=(R=1.000000,G=1.000000,B=0.600000,A=0.530000),LensFlareTints[2]=(R=0.800000,G=0.800000,B=1.000000,A=0.460000),LensFlareTints[3]=(R=0.500000,G=1.000000,B=0.400000,A=0.390000),LensFlareTints[4]=(R=0.500000,G=0.800000,B=1.000000,A=0.310000),LensFlareTints[5]=(R=0.900000,G=1.000000,B=0.800000,A=0.270000),LensFlareTints[6]=(R=1.000000,G=0.800000,B=0.400000,A=0.220000),LensFlareTints[7]=(R=0.900000,G=0.700000,B=0.700000,A=0.150000),VignetteIntensity=0.400000,Sharpen=0.000000,FilmGrainIntensity=0.000000,FilmGrainIntensityShadows=1.000000,FilmGrainIntensityMidtones=1.000000,FilmGrainIntensityHighlights=1.000000,FilmGrainShadowsMax=0.090000,FilmGrainHighlightsMin=0.500000,FilmGrainHighlightsMax=1.000000,FilmGrainTexelSize=1.000000,FilmGrainTexture=None,AmbientOcclusionIntensity=0.500000,AmbientOcclusionStaticFraction=1.000000,AmbientOcclusionRadius=200.000000,AmbientOcclusionRadiusInWS=False,AmbientOcclusionFadeDistance=8000.000000,AmbientOcclusionFadeRadius=5000.000000,AmbientOcclusionPower=2.000000,AmbientOcclusionBias=3.000000,AmbientOcclusionQuality=50.000000,AmbientOcclusionMipBlend=0.600000,AmbientOcclusionMipScale=1.700000,AmbientOcclusionMipThreshold=0.010000,AmbientOcclusionTemporalBlendWeight=0.100000,RayTracingAO=False,RayTracingAOSamplesPerPixel=1,RayTracingAOIntensity=1.000000,RayTracingAORadius=200.000000,ColorGradingIntensity=1.000000,ColorGradingLUT=None,DepthOfFieldSensorWidth=24.576000,DepthOfFieldSqueezeFactor=1.000000,DepthOfFieldFocalDistance=0.000000,DepthOfFieldDepthBlurAmount=1.000000,DepthOfFieldDepthBlurRadius=0.000000,DepthOfFieldUseHairDepth=False,DepthOfFieldFocalRegion=0.000000,DepthOfFieldNearTransitionRegion=300.000000,DepthOfFieldFarTransitionRegion=500.000000,DepthOfFieldScale=0.000000,DepthOfFieldNearBlurSize=15.000000,DepthOfFieldFarBlurSize=15.000000,DepthOfFieldOcclusion=0.400000,DepthOfFieldSkyFocusDistance=0.000000,DepthOfFieldVignetteSize=200.000000,MotionBlurAmount=0.500000,MotionBlurMax=5.000000,MotionBlurTargetFPS=30,MotionBlurPerObjectSize=0.000000,TranslucencyType=Raster,RayTracingTranslucencyMaxRoughness=0.600000,RayTracingTranslucencyRefractionRays=3,RayTracingTranslucencySamplesPerPixel=1,RayTracingTranslucencyShadows=Hard_shadows,RayTracingTranslucencyRefraction=True,PathTracingMaxBounces=32,PathTracingSamplesPerPixel=2048,PathTracingMaxPathIntensity=24.000000,PathTracingEnableEmissiveMaterials=True,PathTracingEnableReferenceDOF=False,PathTracingEnableReferenceAtmosphere=False,PathTracingEnableDenoiser=True,PathTracingIncludeEmissive=True,PathTracingIncludeDiffuse=True,PathTracingIncludeIndirectDiffuse=True,PathTracingIncludeSpecular=True,PathTracingIncludeIndirectSpecular=True,PathTracingIncludeVolume=True,PathTracingIncludeIndirectVolume=True,UserFlags=0,WeightedBlendables=(Array=)),LightingRigRotation=0.000000,RotationSpeed=2.000000,DirectionalLightRotation=(Pitch=-40.000000,Yaw=-67.500000,Roll=0.000000),bEnableToneMapping=False,bShowMeshEdges=True)


```

`Config/DefaultEditorPerProjectUserSettings.ini`:

```ini
[ContentBrowser]
ContentBrowserTab1.SelectedPaths=/Game/FirstPerson
```

`Config/DefaultEngine.ini`:

```ini
[/Script/Engine.CollisionProfile]
+Profiles=(Name="Projectile",CollisionEnabled=QueryOnly,ObjectTypeName="Projectile",CustomResponses=,HelpMessage="Preset for projectiles",bCanModify=True)
+DefaultChannelResponses=(Channel=ECC_GameTraceChannel1,Name="Projectile",DefaultResponse=ECR_Block,bTraceType=False,bStaticObject=False)
+EditProfiles=(Name="Trigger",CustomResponses=((Channel=Projectile, Response=ECR_Ignore)))

[/Script/EngineSettings.GameMapsSettings]
EditorStartupMap=/Game/FirstPerson/Maps/FirstPersonMap.FirstPersonMap
LocalMapOptions=
TransitionMap=
bUseSplitscreen=True
TwoPlayerSplitscreenLayout=Horizontal
ThreePlayerSplitscreenLayout=FavorTop
GameInstanceClass=/Script/Engine.GameInstance
GameDefaultMap=/Game/FirstPerson/Maps/FirstPersonMap.FirstPersonMap
ServerDefaultMap=/Engine/Maps/Entry
GlobalDefaultGameMode=/Game/FirstPerson/Blueprints/BP_FirstPersonGameMode.BP_FirstPersonGameMode_C
GlobalDefaultServerGameMode=None

[/Script/Engine.RendererSettings]
r.Mobile.ShadingPath=0
r.Mobile.AllowDeferredShadingOpenGL=False
r.Mobile.SupportGPUScene=False
r.Mobile.AntiAliasing=1
r.Mobile.FloatPrecisionMode=0
r.Mobile.AllowDitheredLODTransition=False
r.Mobile.VirtualTextures=False
r.DiscardUnusedQuality=False
r.AllowOcclusionQueries=True
r.MinScreenRadiusForLights=0.030000
r.MinScreenRadiusForDepthPrepass=0.030000
r.PrecomputedVisibilityWarning=False
r.TextureStreaming=True
Compat.UseDXT5NormalMaps=False
r.VirtualTextures=False
r.VT.EnableAutoImport=True
r.VirtualTexturedLightmaps=False
r.VT.AnisotropicFiltering=False
bEnableVirtualTextureOpacityMask=True
bEnableVirtualTexturePostProcessing=False
r.VT.TileSize=128
r.VT.TileBorderSize=4
r.vt.FeedbackFactor=16
r.MeshPaintVirtualTexture.TileSize=32
r.MeshPaintVirtualTexture.TileBorderSize=2
r.MeshPaintVirtualTexture.UseCompression=True
r.StaticMesh.DefaultMeshPaintTextureSupport=True
r.MeshPaintVirtualTexture.DefaultTexelsPerVertex=4
r.MeshPaintVirtualTexture.MaxTextureSize=4096
r.vt.rvt.EnableBaseColor=True
r.vt.rvt.EnableBaseColorRoughness=True
r.vt.rvt.EnableBaseColorSpecular=True
r.vt.rvt.EnableMask4=True
r.vt.rvt.EnableWorldHeight=True
r.vt.rvt.EnableDisplacement=True
r.vt.rvt.HighQualityPerPixelHeight=True
WorkingColorSpaceChoice=sRGB
RedChromaticityCoordinate=(X=0.640000,Y=0.330000)
GreenChromaticityCoordinate=(X=0.300000,Y=0.600000)
BlueChromaticityCoordinate=(X=0.150000,Y=0.060000)
WhiteChromaticityCoordinate=(X=0.312700,Y=0.329000)
r.LegacyLuminanceFactors=False
r.ClearCoatNormal=False
r.DynamicGlobalIlluminationMethod=1
r.ReflectionMethod=1
r.ReflectionCaptureResolution=128
r.ReflectionEnvironmentLightmapMixBasedOnRoughness=True
r.Lumen.HardwareRayTracing=True
r.Lumen.HardwareRayTracing.LightingMode=0
r.Lumen.TranslucencyReflections.FrontLayer.EnableForProject=False
r.Lumen.TraceMeshSDFs=1
r.Lumen.ScreenTracingSource=0
r.Lumen.Reflections.HardwareRayTracing.Translucent.Refraction.EnableForProject=True
r.MegaLights.EnableForProject=False
r.RayTracing.Shadows=False
r.Shadow.Virtual.Enable=1
r.RayTracing=False
r.RayTracing.UseTextureLod=False
r.PathTracing=True
r.GenerateMeshDistanceFields=True
r.DistanceFields.DefaultVoxelDensity=0.200000
r.Nanite.ProjectEnabled=True
r.AllowStaticLighting=True
r.NormalMapsForStaticLighting=False
r.ForwardShading=False
r.VertexFoggingForOpaque=True
r.SeparateTranslucency=True
r.TranslucentSortPolicy=0
TranslucentSortAxis=(X=0.000000,Y=-1.000000,Z=0.000000)
r.LocalFogVolume.ApplyOnTranslucent=False
xr.VRS.FoveationLevel=0
xr.VRS.DynamicFoveation=False
r.CustomDepth=1
r.CustomDepthTemporalAAJitter=True
r.PostProcessing.PropagateAlpha=False
r.Deferred.SupportPrimitiveAlphaHoldout=False
r.DefaultFeature.Bloom=True
r.DefaultFeature.AmbientOcclusion=True
r.DefaultFeature.AmbientOcclusionStaticFraction=True
r.DefaultFeature.AutoExposure=False
r.DefaultFeature.AutoExposure.Method=0
r.DefaultFeature.AutoExposure.Bias=1.000000
r.DefaultFeature.AutoExposure.ExtendDefaultLuminanceRange=True
r.DefaultFeature.LocalExposure.HighlightContrastScale=0.800000
r.DefaultFeature.LocalExposure.ShadowContrastScale=0.800000
r.DefaultFeature.MotionBlur=False
r.DefaultFeature.LensFlare=False
r.TemporalAA.Upsampling=True
r.AntiAliasingMethod=0
r.MSAACount=4
r.DefaultFeature.LightUnits=1
r.DefaultBackBufferPixelFormat=4
r.ScreenPercentage.Default=100.000000
r.ScreenPercentage.Default.Desktop.Mode=1
r.ScreenPercentage.Default.Mobile.Mode=0
r.ScreenPercentage.Default.VR.Mode=0
r.ScreenPercentage.Default.PathTracer.Mode=0
r.Shadow.UnbuiltPreviewInGame=True
r.StencilForLODDither=False
r.EarlyZPass=3
r.EarlyZPassOnlyMaterialMasking=False
r.Shadow.CSMCaching=False
r.DBuffer=True
r.ClearSceneMethod=1
r.VelocityOutputPass=0
r.Velocity.EnableVertexDeformation=2
r.SelectiveBasePassOutputs=False
bDefaultParticleCutouts=False
fx.GPUSimulationTextureSizeX=1024
fx.GPUSimulationTextureSizeY=1024
r.AllowGlobalClipPlane=False
r.GBufferFormat=1
r.MorphTarget.Mode=True
r.MorphTarget.MaxBlendWeight=5.000000
r.SupportSkyAtmosphere=True
r.SupportSkyAtmosphereAffectsHeightFog=True
r.SupportExpFogMatchesVolumetricFog=False
r.SupportLocalFogVolumes=True
r.SupportCloudShadowOnForwardLitTranslucent=False
r.LightFunctionAtlas.Format=0
r.VolumetricFog.LightFunction=True
r.Deferred.UsesLightFunctionAtlas=True
r.SingleLayerWater.UsesLightFunctionAtlas=False
r.Translucent.UsesLightFunctionAtlas=False
r.Translucent.UsesIESProfiles=False
r.Translucent.UsesRectLights=False
r.GPUCrashDebugging=False
vr.InstancedStereo=False
r.MobileHDR=True
vr.MobileMultiView=False
r.Mobile.UseHWsRGBEncoding=False
vr.RoundRobinOcclusion=False
r.MeshStreaming=False
r.HeterogeneousVolumes=True
r.HeterogeneousVolumes.Shadows=False
r.Translucency.HeterogeneousVolumes=False
r.WireframeCullThreshold=5.000000
r.SupportStationarySkylight=True
r.SupportLowQualityLightmaps=True
r.SupportPointLightWholeSceneShadows=True
r.Shadow.TranslucentPerObject.ProjectEnabled=False
r.Water.SingleLayerWater.SupportCloudShadow=False
r.Substrate=False
r.Substrate.OpaqueMaterialRoughRefraction=False
r.Refraction.Blur=True
r.Substrate.Debug.AdvancedVisualizationShaders=False
r.Material.RoughDiffuse=False
r.Material.EnergyConservation=False
r.Material.DefaultAutoMaterialUsage=True
r.OIT.SortedPixels=False
r.HairStrands.LODMode=True
r.SkinCache.CompileShaders=False
r.VRS.Support=True
r.SkinCache.SkipCompilingGPUSkinVF=False
r.SkinCache.DefaultBehavior=1
r.SkinCache.SceneMemoryLimitInMB=128.000000
r.Mobile.EnableStaticAndCSMShadowReceivers=True
r.Mobile.EnableMovableLightCSMShaderCulling=True
r.Mobile.Forward.EnableLocalLights=1
r.Mobile.Forward.EnableClusteredReflections=False
r.Mobile.AllowDistanceFieldShadows=True
r.Mobile.EnableMovableSpotlightsShadow=False
r.GPUSkin.Support16BitBoneIndex=False
r.GPUSkin.Limit2BoneInfluences=False
r.SupportDepthOnlyIndexBuffers=False
r.SupportReversedIndexBuffers=False
r.Mobile.AmbientOcclusion=False
r.Mobile.DBuffer=False
r.GPUSkin.UnlimitedBoneInfluences=False
r.GPUSkin.AlwaysUseDeformerForUnlimitedBoneInfluences=False
r.GPUSkin.UnlimitedBoneInfluencesThreshold=8
DefaultBoneInfluenceLimit=(Default=0,PerPlatform=())
MaxSkinBones=(Default=65536,PerPlatform=(("Mobile", 256)))
r.Mobile.PlanarReflectionMode=0
r.Mobile.ScreenSpaceReflections=False
r.Mobile.SupportsGen4TAA=True
bStreamSkeletalMeshLODs=(Default=False,PerPlatform=())
bDiscardSkeletalMeshOptionalLODs=(Default=False,PerPlatform=())
VisualizeCalibrationColorMaterialPath=/Engine/EngineMaterials/PPM_DefaultCalibrationColor.PPM_DefaultCalibrationColor
VisualizeCalibrationCustomMaterialPath=None
VisualizeCalibrationGrayscaleMaterialPath=/Engine/EngineMaterials/PPM_DefaultCalibrationGrayscale.PPM_DefaultCalibrationGrayscale

[/Script/WindowsTargetPlatform.WindowsTargetSettings]
DefaultGraphicsRHI=DefaultGraphicsRHI_DX12
-D3D12TargetedShaderFormats=PCD3D_SM5
+D3D12TargetedShaderFormats=PCD3D_SM6
-D3D11TargetedShaderFormats=PCD3D_SM5
+D3D11TargetedShaderFormats=PCD3D_SM5
Compiler=Default
AudioSampleRate=48000
AudioCallbackBufferFrameSize=1024
AudioNumBuffersToEnqueue=1
AudioMaxChannels=0
AudioNumSourceWorkers=4
SpatializationPlugin=
SourceDataOverridePlugin=
ReverbPlugin=
OcclusionPlugin=
CompressionOverrides=(bOverrideCompressionTimes=False,DurationThreshold=5.000000,MaxNumRandomBranches=0,SoundCueQualityIndex=0)
CacheSizeKB=65536
MaxChunkSizeOverrideKB=0
bResampleForDevice=False
MaxSampleRate=48000.000000
HighSampleRate=32000.000000
MedSampleRate=24000.000000
LowSampleRate=12000.000000
MinSampleRate=8000.000000
CompressionQualityModifier=1.000000
AutoStreamingThreshold=0.000000
SoundCueCookQualityIndex=-1

[/Script/LinuxTargetPlatform.LinuxTargetSettings]
-TargetedRHIs=SF_VULKAN_SM5
+TargetedRHIs=SF_VULKAN_SM6


[/Script/HardwareTargeting.HardwareTargetingSettings]
TargetedHardwareClass=Desktop
AppliedTargetedHardwareClass=Desktop
DefaultGraphicsPerformance=Scalable
AppliedDefaultGraphicsPerformance=Scalable

[/Script/Engine.Engine]
+ActiveGameNameRedirects=(OldGameName="TP_FirstPerson",NewGameName="/Script/FirstPerson")
+ActiveGameNameRedirects=(OldGameName="/Script/TP_FirstPerson",NewGameName="/Script/FirstPerson")
+ActiveClassRedirects=(OldClassName="TP_FirstPersonProjectile",NewClassName="FirstPersonProjectile")
+ActiveClassRedirects=(OldClassName="TP_FirstPersonPlayerController",NewClassName="FirstPersonPlayerController")
+ActiveClassRedirects=(OldClassName="TP_FirstPersonGameMode",NewClassName="FirstPersonGameMode")
+ActiveClassRedirects=(OldClassName="TP_FirstPersonCharacter",NewClassName="FirstPersonCharacter")

[/Script/AndroidFileServerEditor.AndroidFileServerRuntimeSettings]
bEnablePlugin=True
bAllowNetworkConnection=True
SecurityToken=96FFB83F4CB4D43111CF828601E92E98
bIncludeInShipping=False
bAllowExternalStartInShipping=False
bCompileAFSProject=False
bUseCompression=False
bLogFiles=False
bReportStats=False
ConnectionType=USBOnly
bUseManualIPAddress=False
ManualIPAddress=


```

`Config/DefaultGame.ini`:

```ini
[ProjectSettings]
ProjectID=(A=1823396784,B=1298598689,C=1743498150,D=-2048051708)
ProjectName=First Person Template

[/Script/EngineSettings.GeneralProjectSettings]
ProjectID=7B2AD19345D468B3D4D6BD89EAA697C3

[StartupActions]
bAddPacks=True
InsertPack=(PackSource="StarterContent.upack",PackName="StarterContent")

[SectionsToSave]
+Section=StartupActions

[/Script/Engine.AssetManagerSettings]
-PrimaryAssetTypesToScan=(PrimaryAssetType="Map",AssetBaseClass=/Script/Engine.World,bHasBlueprintClasses=False,bIsEditorOnly=True,Directories=((Path="/Game/Maps")),SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=Unknown))
-PrimaryAssetTypesToScan=(PrimaryAssetType="PrimaryAssetLabel",AssetBaseClass=/Script/Engine.PrimaryAssetLabel,bHasBlueprintClasses=False,bIsEditorOnly=True,Directories=((Path="/Game")),SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=Unknown))
+PrimaryAssetTypesToScan=(PrimaryAssetType="Map",AssetBaseClass="/Script/Engine.World",bHasBlueprintClasses=False,bIsEditorOnly=True,Directories=((Path="/Game/Maps")),SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=Unknown))
+PrimaryAssetTypesToScan=(PrimaryAssetType="PrimaryAssetLabel",AssetBaseClass="/Script/Engine.PrimaryAssetLabel",bHasBlueprintClasses=False,bIsEditorOnly=True,Directories=((Path="/Game")),SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=Unknown))
+PrimaryAssetTypesToScan=(PrimaryAssetType="GameFeatureData",AssetBaseClass="/Script/GameFeatures.GameFeatureData",bHasBlueprintClasses=False,bIsEditorOnly=False,Directories=,SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=AlwaysCook))
+PrimaryAssetTypesToScan=(PrimaryAssetType="GameplayScenario",AssetBaseClass="/Script/BT_NewGameModeRuntime.GameplayScenario",bHasBlueprintClasses=False,bIsEditorOnly=False,Directories=((Path="/BT_NewGameMode")),SpecificAssets=,Rules=(Priority=-1,ChunkId=-1,bApplyRecursively=True,CookRule=Unknown))
bOnlyCookProductionAssets=False
bShouldManagerDetermineTypeAndName=False
bShouldGuessTypeAndNameInEditor=True
bShouldAcquireMissingChunksOnLoad=False
bShouldWarnAboutInvalidAssets=True
MetaDataTagsForAssetRegistry=()

[/Script/AssetReferenceRestrictions.AssetReferencingPolicySettings]
EnginePlugins=(DefaultRule=(CanReferenceTheseDomains=("ProjectContent"),bCanProjectAccessThesePlugins=True,bCanBeSeenByOtherDomainsWithoutDependency=True),AdditionalRules=)
ProjectPlugins=(DefaultRule=(CanReferenceTheseDomains=("ProjectContent"),bCanProjectAccessThesePlugins=True,bCanBeSeenByOtherDomainsWithoutDependency=True),AdditionalRules=)
DefaultProjectContentRule=(CanReferenceTheseDomains=("BT_NewGameMech"),bCanProjectAccessThesePlugins=True,bCanBeSeenByOtherDomainsWithoutDependency=True)
bEnableAssetFiltering=False
bEnableAssetValidator=False


```

`Config/DefaultGameplayTags.ini`:

```ini
;METADATA=(Diff=true, UseCommands=true)
[/Script/GameplayTags.GameplayTagsSettings]
ImportTagsFromConfig=True
WarnOnInvalidTags=True
ClearInvalidTags=False
AllowEditorTagUnloading=True
AllowGameTagUnloading=False
FastReplication=False
bDynamicReplication=False
InvalidTagCharacters="\"\',"
NumBitsForContainerSize=6
NetIndexFirstBitSegment=16
+GameplayTagList=(Tag="MainScenario",DevComment="")


```

`Config/DefaultInput.ini`:

```ini
[/Script/Engine.InputSettings]
-AxisConfig=(AxisKeyName="Gamepad_LeftX",AxisProperties=(DeadZone=0.25,Exponent=1.f,Sensitivity=1.f))
-AxisConfig=(AxisKeyName="Gamepad_LeftY",AxisProperties=(DeadZone=0.25,Exponent=1.f,Sensitivity=1.f))
-AxisConfig=(AxisKeyName="Gamepad_RightX",AxisProperties=(DeadZone=0.25,Exponent=1.f,Sensitivity=1.f))
-AxisConfig=(AxisKeyName="Gamepad_RightY",AxisProperties=(DeadZone=0.25,Exponent=1.f,Sensitivity=1.f))
-AxisConfig=(AxisKeyName="MouseX",AxisProperties=(DeadZone=0.f,Exponent=1.f,Sensitivity=0.07f))
-AxisConfig=(AxisKeyName="MouseY",AxisProperties=(DeadZone=0.f,Exponent=1.f,Sensitivity=0.07f))
-AxisConfig=(AxisKeyName="Mouse2D",AxisProperties=(DeadZone=0.f,Exponent=1.f,Sensitivity=0.07f))
+AxisConfig=(AxisKeyName="Mouse2D",AxisProperties=(DeadZone=0.000000,Sensitivity=0.070000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_LeftX",AxisProperties=(DeadZone=0.250000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_LeftY",AxisProperties=(DeadZone=0.250000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_RightX",AxisProperties=(DeadZone=0.250000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_RightY",AxisProperties=(DeadZone=0.250000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MouseX",AxisProperties=(DeadZone=0.000000,Sensitivity=0.070000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MouseY",AxisProperties=(DeadZone=0.000000,Sensitivity=0.070000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MouseWheelAxis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_LeftTriggerAxis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_RightTriggerAxis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_Special_Left_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Gamepad_Special_Left_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Left_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Left_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Left_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Right_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Right_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="Vive_Right_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Left_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Left_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Left_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Left_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Left_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Right_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Right_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Right_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Right_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="MixedReality_Right_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Grip_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Grip_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Grip_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Grip_Force",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Trackpad_Force",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Left_Trackpad_Touch",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Grip_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Grip_Force",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Trigger_Axis",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Thumbstick_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Thumbstick_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Trackpad_X",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Trackpad_Y",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="ValveIndex_Right_Trackpad_Force",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Thumbstick",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_FaceButton1",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_Trigger",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_FaceButton2",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_IndexPointing",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_ThumbUp",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Left_ThumbRest",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Thumbstick",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_FaceButton1",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_Trigger",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_FaceButton2",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_IndexPointing",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_ThumbUp",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusTouch_Right_ThumbRest",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Left_ThumbPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Left_IndexPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Left_MiddlePinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Left_RingPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Left_PinkPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Right_ThumbPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Right_IndexPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Right_MiddlePinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Right_RingPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
+AxisConfig=(AxisKeyName="OculusHand_Right_PinkPinchStrength",AxisProperties=(DeadZone=0.000000,Sensitivity=1.000000,Exponent=1.000000,bInvert=False))
bAltEnterTogglesFullscreen=True
bF11TogglesFullscreen=True
bUseMouseForTouch=False
bEnableMouseSmoothing=True
bEnableFOVScaling=True
bCaptureMouseOnLaunch=True
bEnableLegacyInputScales=True
bEnableMotionControls=True
bFilterInputByPlatformUser=False
bShouldFlushPressedKeysOnViewportFocusLost=True
bAlwaysShowTouchInterface=False
bShowConsoleOnFourFingerTap=True
bEnableGestureRecognizer=False
bUseAutocorrect=False
DefaultViewportMouseCaptureMode=CapturePermanently_IncludingInitialMouseDown
DefaultViewportMouseLockMode=LockOnCapture
FOVScale=0.011110
DoubleClickTime=0.200000
DefaultPlayerInputClass=/Script/EnhancedInput.EnhancedPlayerInput
DefaultInputComponentClass=/Script/EnhancedInput.EnhancedInputComponent
DefaultTouchInterface=/Game/FirstPerson/Input/MobileControls.MobileControls
-ConsoleKeys=Tilde
+ConsoleKeys=Tilde

[/Script/EnhancedInput.EnhancedInputDeveloperSettings]
UserSettingsClass=/Script/EnhancedInput.EnhancedInputUserSettings
DefaultPlayerMappableKeyProfileClass=/Script/EnhancedInput.EnhancedPlayerMappableKeyProfile
DefaultWorldInputClass=/Script/EnhancedInput.EnhancedPlayerInput
bSendTriggeredEventsWhenInputIsFlushed=True
bEnableUserSettings=False
EnhancedInput.EnableDefaultMappingContexts=True
EnhancedInput.OnlyTriggerLastActionInChord=True
bLogOnDeprecatedConfigUsed=True
bEnableWorldSubsystem=False
EnhancedInput.bShouldLogAllWorldSubsystemInputs=False


```

`FirstPerson.uproject`:

```uproject
{
	"FileVersion": 3,
	"EngineAssociation": "5.5",
	"Category": "",
	"Description": "",
	"Modules": [
		{
			"Name": "FirstPerson",
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"AdditionalDependencies": [
				"Engine"
			]
		}
	],
	"Plugins": [
		{
			"Name": "ModelingToolsEditorMode",
			"Enabled": true,
			"TargetAllowList": [
				"Editor"
			]
		},
		{
			"Name": "GameFeatures",
			"Enabled": true
		},
		{
			"Name": "ModularGameplay",
			"Enabled": true
		}
	]
}
```

`Plugins/GameFeatures/BT_CoinGame/BT_CoinGame.uplugin`:

```uplugin
{
	"FileVersion": 3,
	"Version": 1,
	"VersionName": "1.0",
	"FriendlyName": "BT_CoinGame",
	"Description": "Black Tower Studios - Test C",
	"Category": "Game Features",
	"CreatedBy": "Bruno Xavier",
	"CreatedByURL": "https://brunoxavierleite.com/",
	"DocsURL": "bruno_xavier_@msn.com",
	"SupportURL": "bruno_xavier_@msn.com",
	"EnabledByDefault": true,
	"CanContainContent": true,
	"IsBetaVersion": false,
	"IsExperimentalVersion": false,
	"Installed": true,
	"ExplicitlyLoaded": true,
	"BuiltInInitialFeatureState": "Loaded",
	"MarketplaceURL": "",
	"Modules": [
		{
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"Name": "BT_CoinGameRuntime",
			"PlatformAllowList": [
				"Win64",
				"Mac",
				"Linux"
			]
		}
	]
}
```

`Plugins/GameFeatures/BT_CoinGame/Source/BT_CoinGameRuntime/BT_CoinGameRuntime.Build.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using System.IO;
using UnrealBuildTool;

public class BT_CoinGameRuntime : ModuleRules
{
	public BT_CoinGameRuntime(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = ModuleRules.PCHUsageMode.UseExplicitOrSharedPCHs;
		DefaultBuildSettings = BuildSettingsVersion.V2;
		IWYUSupport = IWYUSupport.KeepAsIsForNow;

		PublicIncludePaths.AddRange(new string[] {
		});

		PrivateIncludePaths.AddRange(new string[] {
		});

		PublicDependencyModuleNames.AddRange(new string[] {
			"Core",
		});

		PrivateDependencyModuleNames.AddRange(new string[] {
			"CoreUObject", "Engine"
		});

		DynamicallyLoadedModuleNames.AddRange(new string[] {
		});

		PublicIncludePaths.Add(Path.Combine(ModuleDirectory,"Public"));
		PrivateIncludePaths.Add(Path.Combine(ModuleDirectory,"Private"));
	}
}

```

`Plugins/GameFeatures/BT_CoinGame/Source/BT_CoinGameRuntime/Private/BT_CoinGameComponent.cpp`:

```cpp
#include "BT_CoinGameComponent.h"

#include "Kismet/KismetSystemLibrary.h"

UBT_CoinGameComponent::UBT_CoinGameComponent()
	: Super()
{
	SphereRadius = 90.f;
}

void UBT_CoinGameComponent::BeginPlay()
{
	Super::BeginPlay();

	// Register our Overlap Event
	OnComponentBeginOverlap.AddDynamic(this, &UBT_CoinGameComponent::OnSphereBeginOverlap);
}

void UBT_CoinGameComponent::OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)
{
	if (ACharacter* Character = Cast<ACharacter>(OtherActor))
	{
		// Notify that the actor is being picked up
		OnCoinPickUp.Broadcast(Character);

		// Unregister from the Overlap Event so it is no longer triggered
		OnComponentBeginOverlap.RemoveAll(this);
	}
}

bool UBT_CoinGameComponent::IsLastCoin(int32& Count) const
{
	TInlineComponentArray<UBT_CoinGameComponent*, 100> CoinComponents{};
	for (TObjectIterator<UBT_CoinGameComponent> Itr; Itr; ++Itr)
	{
		if ((*Itr)->HasAnyFlags(RF_ClassDefaultObject | RF_ArchetypeObject | RF_BeginDestroyed)
			|| (*Itr)->IsBeingDestroyed() || (*Itr) == this)
		{
			continue;
		}
		CoinComponents.Add(*Itr);
	}
	Count = CoinComponents.Num();
	return Count < 1;
}

```

`Plugins/GameFeatures/BT_CoinGame/Source/BT_CoinGameRuntime/Private/BT_CoinGameRuntimeModule.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "BT_CoinGameRuntimeModule.h"

#define LOCTEXT_NAMESPACE "FBT_CoinGameRuntimeModule"

void FBT_CoinGameRuntimeModule::StartupModule()
{
}

void FBT_CoinGameRuntimeModule::ShutdownModule()
{
}

#undef LOCTEXT_NAMESPACE

IMPLEMENT_MODULE(FBT_CoinGameRuntimeModule, BT_CoinGameRuntime)

```

`Plugins/GameFeatures/BT_CoinGame/Source/BT_CoinGameRuntime/Public/BT_CoinGameComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "Components/SphereComponent.h"

#include "BT_CoinGameComponent.generated.h"

DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnCoinPickUp, ACharacter*, PickUpCharacter);

UCLASS(ClassGroup = BlackTower, Category = "Gameplay", BlueprintType, Blueprintable, meta = (BlueprintSpawnableComponent, DisplayName = "[BT] Coin Game Component"), hideCategories = ("Cooking", "Variable"))
class BT_COINGAMERUNTIME_API UBT_CoinGameComponent : public USphereComponent
{
	GENERATED_BODY()

	UBT_CoinGameComponent();

public:
	UPROPERTY(BlueprintAssignable, Category = "Interaction")
	FOnCoinPickUp OnCoinPickUp;

protected:
	/** Called when the game starts */
	virtual void BeginPlay() override;

	/** Code for when something overlaps this component */
	UFUNCTION()
	void OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);

	UFUNCTION(BlueprintCallable, Category = "Interaction")
	bool IsLastCoin(int32& Count) const;
};

```

`Plugins/GameFeatures/BT_CoinGame/Source/BT_CoinGameRuntime/Public/BT_CoinGameRuntimeModule.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "Modules/ModuleManager.h"

class FBT_CoinGameRuntimeModule : public IModuleInterface
{
public:
	//~IModuleInterface
	virtual void StartupModule() override;
	virtual void ShutdownModule() override;
	//~End of IModuleInterface
};

```

`Plugins/GameFeatures/BT_NewGameMech/BT_NewGameMech.uplugin`:

```uplugin
{
	"FileVersion": 3,
	"Version": 1,
	"VersionName": "1.0",
	"FriendlyName": "BT_NewGameMech",
	"Description": "Black Tower Studios - Test A",
	"Category": "Game Features",
	"CreatedBy": "Bruno Xavier",
	"CreatedByURL": "https://brunoxavierleite.com/",
	"DocsURL": "bruno_xavier_@msn.com",
	"SupportURL": "bruno_xavier_@msn.com",
	"EnabledByDefault": true,
	"CanContainContent": true,
	"IsBetaVersion": false,
	"IsExperimentalVersion": false,
	"Installed": true,
	"ExplicitlyLoaded": true,
	"BuiltInInitialFeatureState": "Loaded",
	"MarketplaceURL": "",
	"Modules": [
		{
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"Name": "BT_NewGameMechRuntime"
		}
	],
	"Plugins": [
		{
			"Name": "EnhancedInput",
			"Enabled": true
		}
	]
}
```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/BT_NewGameMechRuntime.Build.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using System.IO;
using UnrealBuildTool;

public class BT_NewGameMechRuntime : ModuleRules
{
	public BT_NewGameMechRuntime(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = ModuleRules.PCHUsageMode.UseExplicitOrSharedPCHs;
		DefaultBuildSettings = BuildSettingsVersion.V2;
		IWYUSupport = IWYUSupport.KeepAsIsForNow;

		PublicIncludePaths.AddRange(new string[] {
		});

		PrivateIncludePaths.AddRange(new string[] {
		});

		PublicDependencyModuleNames.AddRange(new string[] {
			"Core",
		});

		PrivateDependencyModuleNames.AddRange(new string[] {
			"CoreUObject", "Engine", "Slate", "SlateCore", "EnhancedInput"
		});

		DynamicallyLoadedModuleNames.AddRange(new string[] {
		});

		PublicIncludePaths.Add(Path.Combine(ModuleDirectory,"Public"));
		PublicIncludePaths.Add(Path.Combine(ModuleDirectory,"Classes"));
		PrivateIncludePaths.Add(Path.Combine(ModuleDirectory,"Private"));
	}
}

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Classes/BT_NewGameMechComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "EnhancedInputComponent.h"
#include "Components/ActorComponent.h"

#include "BT_NewGameMechComponent.generated.h"

UCLASS(ClassGroup = BlackTower, Category = "Gameplay", BlueprintType, Blueprintable, meta = (BlueprintSpawnableComponent, DisplayName = "[BT] Jetpack Component"), hideCategories = ("Cooking", "Variable"))
class BT_NEWGAMEMECHRUNTIME_API UJetpackComponent : public UActorComponent
{
	GENERATED_BODY()

	UPROPERTY(BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = "true"))
	TWeakObjectPtr<UInputAction> JetpackMoveAction;

public:
	UJetpackComponent();
	virtual void PostLoad() override;
	virtual void BeginPlay() override;
	virtual void EndPlay(const EEndPlayReason::Type EndPlayReason) override;

protected:
	/** Called for movement input */
	void JetpackMove(const FInputActionValue& Value);
};

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Classes/BT_NewPickUpComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "Components/SphereComponent.h"

#include "BT_NewPickUpComponent.generated.h"

DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnPickUp, ACharacter*, PickUpCharacter);

UCLASS(Blueprintable, BlueprintType, ClassGroup = (Custom), meta = (BlueprintSpawnableComponent))
class BT_NEWGAMEMECHRUNTIME_API UBT_NewPickUpComponent : public USphereComponent
{
	GENERATED_BODY()

	UBT_NewPickUpComponent();

public:
	UPROPERTY(BlueprintAssignable, Category = "Interaction")
	FOnPickUp OnPickUp;

protected:
	/** Called when the game starts */
	virtual void BeginPlay() override;

	/** Code for when something overlaps this component */
	UFUNCTION()
	void OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);
};

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Private/BT_NewGameMechComponent.cpp`:

```cpp
#include "BT_NewGameMechComponent.h"

#include "Kismet/KismetSystemLibrary.h"
#include "UObject/ConstructorHelpers.h"

UJetpackComponent::UJetpackComponent()
	: Super()
{
	if (!GetOuter()->HasAnyFlags(RF_ClassDefaultObject | RF_ArchetypeObject))
	{
		static ConstructorHelpers::FObjectFinder<UInputAction> InputActionFinder(TEXT("Script/Engine.UInputAction'/BT_NewGameMech/IA_Jetpack.IA_Jetpack'"));
		if (InputActionFinder.Succeeded())
		{
			JetpackMoveAction = InputActionFinder.Object;
		}
	}
}

void UJetpackComponent::PostLoad()
{
	Super::PostLoad();

	if (GetWorld() && !GetWorld()->IsGameWorld())
	{
		UKismetSystemLibrary::ExecuteConsoleCommand(GetWorld(), TEXT("DeactivateGameFeaturePlugin BT_NewGameMech"), nullptr);
	}
}

void UJetpackComponent::BeginPlay()
{
	Super::BeginPlay();

	if (GetOwner() && JetpackMoveAction.IsValid())
	{
		if (UEnhancedInputComponent* EnhancedInputComponent =
				Cast<UEnhancedInputComponent>(GetOwner()->GetComponentByClass(UEnhancedInputComponent::StaticClass())))
		{
			// Add Jetpack Moving Controls
			// EnhancedInputComponent->BindAction(JetpackMoveAction.Get(), ETriggerEvent::Triggered, this, &UJetpackComponent::JetpackMove);
		}
	}
}

void UJetpackComponent::EndPlay(const EEndPlayReason::Type EndPlayReason)
{
	JetpackMoveAction = nullptr;

	if (GetOwner())
	{
		if (UEnhancedInputComponent* EnhancedInputComponent =
				Cast<UEnhancedInputComponent>(GetOwner()->GetComponentByClass(UEnhancedInputComponent::StaticClass())))
		{
			// Remove Jetpack Moving Controls
			EnhancedInputComponent->ClearBindingsForObject(this);
		}
	}

	Super::EndPlay(EndPlayReason);
	UKismetSystemLibrary::ExecuteConsoleCommand(GetWorld(), TEXT("DeactivateGameFeaturePlugin BT_CoinGame"), nullptr);
	UKismetSystemLibrary::ExecuteConsoleCommand(GetWorld(), TEXT("DeactivateGameFeaturePlugin BT_NewGameMech"), nullptr);
	UKismetSystemLibrary::ExecuteConsoleCommand(GetWorld(), TEXT("DeactivateGameFeaturePlugin BT_PlayerAbilities"), nullptr);
}

void UJetpackComponent::JetpackMove(const FInputActionValue& Value)
{
	/// This is one way of having this done, however,
	/// I will go a bit further and do it the 'GAS' way with modular ability system.
}

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Private/BT_NewGameMechRuntimeModule.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "BT_NewGameMechRuntimeModule.h"

#define LOCTEXT_NAMESPACE "FBT_NewGameMechRuntimeModule"

void FBT_NewGameMechRuntimeModule::StartupModule()
{
}

void FBT_NewGameMechRuntimeModule::ShutdownModule()
{
}

#undef LOCTEXT_NAMESPACE

IMPLEMENT_MODULE(FBT_NewGameMechRuntimeModule, BT_NewGameMechRuntime)

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Private/BT_NewPickUpComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "BT_NewPickUpComponent.h"

UBT_NewPickUpComponent::UBT_NewPickUpComponent()
{
	SphereRadius = 90.f;
}

void UBT_NewPickUpComponent::BeginPlay()
{
	Super::BeginPlay();

	// Register our Overlap Event
	OnComponentBeginOverlap.AddDynamic(this, &UBT_NewPickUpComponent::OnSphereBeginOverlap);
}

void UBT_NewPickUpComponent::OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)
{
	if (ACharacter* Character = Cast<ACharacter>(OtherActor))
	{
		// Notify that the actor is being picked up
		OnPickUp.Broadcast(Character);

		// Unregister from the Overlap Event so it is no longer triggered
		OnComponentBeginOverlap.RemoveAll(this);
	}
}

```

`Plugins/GameFeatures/BT_NewGameMech/Source/BT_NewGameMechRuntime/Public/BT_NewGameMechRuntimeModule.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "Modules/ModuleManager.h"

class FBT_NewGameMechRuntimeModule : public IModuleInterface
{
public:
	//~IModuleInterface
	virtual void StartupModule() override;
	virtual void ShutdownModule() override;
	//~End of IModuleInterface
};

```

`Plugins/GameFeatures/BT_NewGameMode/BT_NewGameMode.uplugin`:

```uplugin
{
	"FileVersion": 3,
	"Version": 1,
	"VersionName": "1.0",
	"FriendlyName": "BT_NewGameMode",
	"Description": "Black Tower Studios - Test C",
	"Category": "Game Features",
	"CreatedBy": "Bruno Xavier",
	"CreatedByURL": "https://brunoxavierleite.com/",
	"DocsURL": "bruno_xavier_@msn.com",
	"SupportURL": "bruno_xavier_@msn.com",
	"EnabledByDefault": true,
	"CanContainContent": true,
	"IsBetaVersion": false,
	"IsExperimentalVersion": false,
	"Installed": true,
	"ExplicitlyLoaded": true,
	"BuiltInInitialFeatureState": "Activated",
	"MarketplaceURL": "",
	"Modules": [
		{
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"Name": "BT_NewGameModeRuntime",
			"PlatformAllowList": [
				"Win64",
				"Mac",
				"Linux"
			]
		}
	],
	"Plugins": [
		{
			"Name": "GameplayAbilities",
			"Enabled": true
		},
		{
			"Name": "ModularGameplay",
			"Enabled": true
		},
		{
			"Name": "GameFeatures",
			"Enabled": true
		}
	]
}
```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/BT_NewGameModeRuntime.build.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using System.IO;
using UnrealBuildTool;

public class BT_NewGameModeRuntime : ModuleRules
{
	public BT_NewGameModeRuntime(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = ModuleRules.PCHUsageMode.UseExplicitOrSharedPCHs;
		DefaultBuildSettings = BuildSettingsVersion.V2;
		IWYUSupport = IWYUSupport.KeepAsIsForNow;

		PublicDependencyModuleNames.AddRange
		(
			new string[]
			{
				"Core",
				"UMG",
				"InputCore",
				"GameFeatures",
				"GameplayTags",
				"GameplayTasks",
				"ModularGameplay",
				"GameplayAbilities",
				"DeveloperSettings",
				"NetCore",
			}
		);
		
		PrivateDependencyModuleNames.AddRange
		(
			new string[]
			{
				"CoreUObject",
				"Engine",
				"Slate",
				"SlateCore",
			}
		);

		PublicIncludePaths.Add(Path.Combine(ModuleDirectory,"Public"));
		PrivateIncludePaths.Add(Path.Combine(ModuleDirectory,"Private"));
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/BT_NewGameModeRuntimeModule.cpp`:

```cpp
#include "BT_NewGameModeRuntimeModule.h"
#include "EngineMinimal.h"

#define LOCTEXT_NAMESPACE "FBT_NewGameModeRuntimeModule"

void FBT_NewGameModeRuntimeModule::StartupModule()
{
}

void FBT_NewGameModeRuntimeModule::ShutdownModule()
{
}

#undef LOCTEXT_NAMESPACE

IMPLEMENT_MODULE(FBT_NewGameModeRuntimeModule, BT_NewGameModeRuntime)

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/Components/GamestateScenarioComponent.cpp`:

```cpp
/*
Copyright 2021 Empires Team

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/


#include "Components/GamestateScenarioComponent.h"
#include "ScenarioInstanceSubsystem.h"
#include "Net/UnrealNetwork.h"
#include "GameplayScenario.h"

UGamestateScenarioComponent::UGamestateScenarioComponent(const FObjectInitializer& ObjectInitializer)
	: Super(ObjectInitializer)
{
	Scenarios.ScenarioComp = this;
	SetIsReplicatedByDefault(true);
}

void UGamestateScenarioComponent::GetLifetimeReplicatedProps(TArray<class FLifetimeProperty>& OutLifetimeProps) const
{
	Super::GetLifetimeReplicatedProps(OutLifetimeProps);

	DOREPLIFETIME(UGamestateScenarioComponent, Scenarios);
}


void UGamestateScenarioComponent::OnRegister()
{
	Super::OnRegister();

	if (IsValid(GetGameInstance<UGameInstance>()))
	{
		if (UScenarioInstanceSubsystem* Subsys = GetGameInstance<UGameInstance>()->GetSubsystem<UScenarioInstanceSubsystem>())
		{
			Subsys->OnScenarioActivated.AddDynamic(this, &ThisClass::OnScenarioActivated);
			Subsys->OnScenarioDeactivated.AddDynamic(this, &ThisClass::OnScenarioDeactivated);

			//Gather any activated scenarios and add them to the list.
			for (UGameplayScenario* Scenario : Subsys->ActiveScenarios)
			{
				OnScenarioActivated(Scenario);
			}
		}
	}
}

void UGamestateScenarioComponent::OnScenarioActivated(UGameplayScenario* Scenario)
{
	FGameplayScenarioNetworkArrayItem Item;
	Item.Scenario = Scenario;

	Scenarios.Items.Add(Item);
	Scenarios.MarkArrayDirty();
	Scenarios.MarkItemDirty(Item);
}

void UGamestateScenarioComponent::OnScenarioDeactivated(UGameplayScenario* Scenario)
{
	Scenarios.Items.RemoveAll([Scenario](const FGameplayScenarioNetworkArrayItem& Item)
		{
			if (Item.Scenario == Scenario)
			{
				return true;
			}
			return false;
		});
	Scenarios.MarkArrayDirty();
}


void UGamestateScenarioComponent::ActivateScenarioLocally(UGameplayScenario* Scenario)
{
	if (UScenarioInstanceSubsystem* Subsys = GetGameInstance<UGameInstance>()->GetSubsystem<UScenarioInstanceSubsystem>())
	{
		Subsys->ActivateScenario(Scenario, false);
	}
}

void UGamestateScenarioComponent::DeactivateScenarioLocally(UGameplayScenario* Scenario)
{
	if (UScenarioInstanceSubsystem* Subsys = GetGameInstance<UGameInstance>()->GetSubsystem<UScenarioInstanceSubsystem>())
	{
		Subsys->DeactivateScenario(Scenario);
	}
}

void FGameplayScenarioNetworkArrayItem::PreReplicatedRemove(const struct FGameplayScenarioNetworkArray& InArraySerializer)
{
	if (IsValid(InArraySerializer.ScenarioComp))
	{
		InArraySerializer.ScenarioComp->DeactivateScenarioLocally(Scenario);
		PrevScenario = nullptr;
	}	
}

void FGameplayScenarioNetworkArrayItem::PostReplicatedAdd(const struct FGameplayScenarioNetworkArray& InArraySerializer)
{
	if (IsValid(InArraySerializer.ScenarioComp))
	{
		InArraySerializer.ScenarioComp->ActivateScenarioLocally(Scenario);
		PrevScenario = Scenario;
	}
}

void FGameplayScenarioNetworkArrayItem::PostReplicatedChange(const struct FGameplayScenarioNetworkArray& InArraySerializer)
{
	if (IsValid(InArraySerializer.ScenarioComp))
	{
		UGameplayScenario* Prev = PrevScenario.Get();
		PrevScenario = Scenario;

		if (IsValid(Prev))
		{
			InArraySerializer.ScenarioComp->DeactivateScenarioLocally(Prev);
		}
		if (IsValid(Scenario))
		{
			InArraySerializer.ScenarioComp->ActivateScenarioLocally(Scenario);
		}	
		
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayActivateScenario.cpp`:

```cpp
#include "GameplayActivateScenario.h"
#include "Engine/AssetManager.h"
#include "Engine/AssetManagerTypes.h"

#include "GameplayScenario.h"
#include "ScenarioInstanceSubsystem.h"

void UGameplayActivateScenario::OnScenarioPreActivated(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	for (FPrimaryAssetId ScenarioAsset : Scenarios)
	{
		ScenarioSubsystem->PreActivateScenario(ScenarioAsset, false);
	}
}

void UGameplayActivateScenario::OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem)
{	
	for (FPrimaryAssetId ScenarioAsset : Scenarios)
	{		
		ScenarioSubsystem->ActivateScenario(ScenarioAsset, false);
	}
}

void UGameplayActivateScenario::OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown)
{
	if (bTearDown)
	{
		return;
	}
	for (FPrimaryAssetId ScenarioAsset : Scenarios)
	{
		ScenarioSubsystem->DeactivateScenario(ScenarioAsset);
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayAddComponents.cpp`:

```cpp
#include "GameplayAddComponents.h"
#include "Components/GameFrameworkComponentManager.h"
#include "GameFeaturesSubsystemSettings.h"
#include "ScenarioInstanceSubsystem.h"

void UGameplayAddComponents::OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	UGameInstance* GameInstance = ScenarioSubsystem->GetGameInstance();

	if (!IsValid(GameInstance))
	{
		return;
	}

	if (UGameFrameworkComponentManager* GFCM = GameInstance->GetSubsystem<UGameFrameworkComponentManager>())
	{
		bool bIsServer = IsRunningDedicatedServer();
#if WITH_EDITOR
		checkSlow(GameInstance->GetWorldContext());
		bIsServer |= GameInstance->GetWorldContext()->RunAsDedicated;
#endif

		const bool bIsClient = !bIsServer;

		for (const FGameFeatureComponentEntry& Entry : ComponentList)
		{
			const bool bShouldAddRequest = (bIsServer && Entry.bServerComponent) || (bIsClient && Entry.bClientComponent);
			if (bShouldAddRequest)
			{
				if (!Entry.ActorClass.IsNull())
				{
					TSubclassOf<UActorComponent> ComponentClass = Entry.ComponentClass.LoadSynchronous();
					if (ComponentClass)
					{
						ComponentRequestHandles.Add(GFCM->AddComponentRequest(Entry.ActorClass, ComponentClass));
					}
					else if (!Entry.ComponentClass.IsNull())
					{
						UE_LOG(LogTemp, Error, TEXT("[GameFeatureData %s]: Failed to load component class %s. Not applying component."), *GetPathNameSafe(this), *Entry.ComponentClass.ToString());
					}
				}
			}
		}
	}
}

void UGameplayAddComponents::OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown)
{
	ComponentRequestHandles.Empty();
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayDeactivateScenario.cpp`:

```cpp
#include "GameplayDeactivateScenario.h"
#include "ScenarioInstanceSubsystem.h"
#include "GameplayScenario.h"

void UGameplayDeactivateScenario::OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	for (int32 i = 0; i < ScenarioSubsystem->ActiveScenarios.Num(); i++)
	{
		UGameplayScenario* Scenario = ScenarioSubsystem->ActiveScenarios[i];

		if(IsValid(Scenario))
		{
			FGameplayTagContainer Tags;
			Scenario->GetOwnedGameplayTags(Tags);

			if (DeactivateScenarioQuery.Matches(Tags))
			{
				ScenarioSubsystem->DeactivateScenario(Scenario);
				i--;
			}
		}
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayScenario.cpp`:

```cpp
#include "GameplayScenario.h"
#include "GameplayScenarioAction.h"
#include "ScenarioInstanceSubsystem.h"

UGameplayScenario::UGameplayScenario()
	: Super()
{

}

void UGameplayScenario::PreActivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	ForEachAction_Mutable([&ScenarioSubsystem](UGameplayScenarioAction* Action)
	{
		Action->OnScenarioPreActivated(ScenarioSubsystem);
	});	
}

void UGameplayScenario::ActivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	ForEachAction_Mutable([&ScenarioSubsystem](UGameplayScenarioAction* Action)
	{
		Action->OnScenarioActivated(ScenarioSubsystem);
	});
}

void UGameplayScenario::DeactivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown)
{
	ForEachAction_Mutable([&ScenarioSubsystem](UGameplayScenarioAction* Action)
	{
		Action->OnScenarioDeactivated(ScenarioSubsystem);
	});
}

void UGameplayScenario::ForEachAction_Mutable(Predicate Predicate)
{
	for (UGameplayScenarioAction* Action : ScenarioActions)
	{
		if(IsValid(Action))
		{
			Predicate(Action);
		}
	}
}

void UGameplayScenario::ForEachAction(ConstPredicate Predicate) const
{
	for (UGameplayScenarioAction* Action : ScenarioActions)
	{
		if (IsValid(Action))
		{
			Predicate(Action);
		}
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayScenarioFunctionLibrary.cpp`:

```cpp
#include "GameplayScenarioFunctionLibrary.h"

#include "AbilitySystemComponent.h"
#include "AbilitySystemBlueprintLibrary.h"

bool UGameplayScenarioFunctionLibrary::GetAssetTagAsString(FPrimaryAssetId Asset, FName Tag, FString& OutString)
{
	UAssetManager& LocalManager = UAssetManager::Get();
	FAssetData	   AssetData;

	if (!LocalManager.GetPrimaryAssetData(Asset, AssetData))
	{
		return false;
	}

	bool bFound = AssetData.GetTagValue<FString>(Tag, OutString);
	return bFound;
}

bool UGameplayScenarioFunctionLibrary::GetAssetTagAsText(FPrimaryAssetId Asset, FName Tag, FText& OutText)
{
	UAssetManager& LocalManager = UAssetManager::Get();
	FAssetData	   AssetData;

	if (!LocalManager.GetPrimaryAssetData(Asset, AssetData))
	{
		return false;
	}

	bool bFound = AssetData.GetTagValue<FText>(Tag, OutText);
	return bFound;
}

bool UGameplayScenarioFunctionLibrary::GetAssetTagAsBool(FPrimaryAssetId Asset, FName Tag, bool& OutBool)
{
	UAssetManager& LocalManager = UAssetManager::Get();
	FAssetData	   AssetData;

	if (!LocalManager.GetPrimaryAssetData(Asset, AssetData))
	{
		return false;
	}

	bool bFound = AssetData.GetTagValue<bool>(Tag, OutBool);
	return bFound;
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayStreamLevelInstance.cpp`:

```cpp
#include "GameplayStreamLevelInstance.h"

#include "Engine/AssetManager.h"
#include "Engine/AssetManagerTypes.h"
#include "Engine/LevelStreamingDynamic.h"

#include "ScenarioInstanceSubsystem.h"

void UGameplayStreamLevelInstance::OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem)
{
	UAssetManager& AssetManager = UAssetManager::Get();
	for (FPrimaryAssetId AssetId : StreamedInLevels)
	{
		FSoftObjectPath ObjPath = AssetManager.GetPrimaryAssetPath(AssetId);
		if (ObjPath.IsValid())
		{
			TSoftObjectPtr<UWorld> ObjPtr(ObjPath);

			bool bSuccess = false;
			ULevelStreamingDynamic* Streamer = ULevelStreamingDynamic::LoadLevelInstanceBySoftObjectPtr(ScenarioSubsystem->GetGameInstance(), ObjPtr, FVector::ZeroVector, FRotator::ZeroRotator, bSuccess);

			if (bSuccess)
			{
				Streamer->SetShouldBeLoaded(true);
				DynamicLevelStreams.AddUnique(Streamer);
			}
		}
	}
}

void UGameplayStreamLevelInstance::OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown)
{
	if (bTearDown)
	{
		return;
	}
	for (ULevelStreamingDynamic* LevelStream : DynamicLevelStreams)
	{
		LevelStream->SetIsRequestingUnloadAndRemoval(true);
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/GameplayTriggerZone.cpp`:

```cpp
#include "GameplayTriggerZone.h"
#include "Engine/TriggerBase.h"
#include "Engine.h"
#include "Components/GameFrameworkComponentManager.h"

AGameplayTriggerZone::AGameplayTriggerZone()
{
	PrimaryActorTick.bCanEverTick = false;
	RootComponent = CreateDefaultSubobject<USceneComponent>("Root");
}

void AGameplayTriggerZone::PostInitializeComponents()
{
	Super::PostInitializeComponents();

	if (!HasAnyFlags(RF_ClassDefaultObject) && IsValid(GetWorld()) && GetWorld()->IsGameWorld())
	{
		if (UGameFrameworkComponentManager* GameFrameworkSubsys = GetGameInstance()->GetSubsystem<UGameFrameworkComponentManager>())
		{
			GameFrameworkSubsys->AddReceiver(this);
		}
	}
}

void AGameplayTriggerZone::OnInternalVolumeBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)
{
	int32& Overlaps = OverlappingActors.FindOrAdd(OtherActor, 0);
	Overlaps += 1;

	if (Overlaps == 1)
	{
		OnZoneBeginOverlap.Broadcast(this, OtherActor);
	}
}

void AGameplayTriggerZone::OnInternalVolumeEndOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex)
{
	if (OverlappingActors.Contains(OtherActor))
	{
		int32& Overlaps = OverlappingActors[OtherActor];

		Overlaps--;

		if (Overlaps <= 0)
		{
			OnZoneEndOverlap.Broadcast(this, OtherActor);
			OverlappingActors.Remove(OtherActor);
		}
	}
}

void AGameplayTriggerZone::BeginPlay()
{
	Super::BeginPlay();

	if (GetLocalRole() == ROLE_Authority)
	{
		for (TSoftObjectPtr<ATriggerBase> TriggerActor : TriggerVolumes)
		{
			if (TriggerActor.IsValid())
			{
				TriggerActor.Get()->GetCollisionComponent()->OnComponentBeginOverlap.AddDynamic(this, &ThisClass::OnInternalVolumeBeginOverlap);
				TriggerActor.Get()->GetCollisionComponent()->OnComponentEndOverlap.AddDynamic(this, &ThisClass::OnInternalVolumeEndOverlap);
			}
		}
	}
}

void AGameplayTriggerZone::EndPlay(const EEndPlayReason::Type EndPlayReason)
{
	if (GetLocalRole() == ROLE_Authority)
	{
		for (TSoftObjectPtr<ATriggerBase> TriggerActor : TriggerVolumes)
		{
			TriggerActor.Get()->GetCollisionComponent()->OnComponentBeginOverlap.RemoveDynamic(this, &ThisClass::OnInternalVolumeBeginOverlap);
			TriggerActor.Get()->GetCollisionComponent()->OnComponentEndOverlap.RemoveDynamic(this, &ThisClass::OnInternalVolumeEndOverlap);
		}
	}

	Super::EndPlay(EndPlayReason);
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Private/ScenarioInstanceSubsystem.cpp`:

```cpp
#include "ScenarioInstanceSubsystem.h"
#include "Engine.h"

#include "GameplayScenario.h"
#include "GameplayScenarioAction.h"

#include "Engine/AssetManager.h"
#include "Engine/AssetManagerTypes.h"
#include "Engine/LevelStreamingDynamic.h"

#include "GameFeatureAction.h"
#include "GameFeaturesSubsystem.h"

DEFINE_LOG_CATEGORY_STATIC(LogGameplayScenario, Log, All);

UScenarioInstanceSubsystem::UScenarioInstanceSubsystem()
	: Super()
{
	bBecomeListenServerFromStandalone = true;
	MapTransitionScenario = nullptr;
}

void UScenarioInstanceSubsystem::Initialize(FSubsystemCollectionBase& Collection)
{
	IConsoleManager::Get().RegisterConsoleCommand(
		TEXT("StartScenario"),
		TEXT("Begin a Scenario, Changing maps if needed"),
		FConsoleCommandWithWorldArgsAndOutputDeviceDelegate::CreateLambda([this](const TArray<FString>& Args, UWorld* World, FOutputDevice& Ar) {
			if (Args.Num() != 1)
			{
				Ar.Logf(TEXT("Error loading Scenario: Expected one parameter to StartScenario"));
				return;
			}

			// Parse the primary asset id
			FPrimaryAssetId ScenarioAsset = FPrimaryAssetId::FromString(Args[0]);

			if (!ScenarioAsset.IsValid())
			{
				FString AssetId = (ScenarioAsset.ToString().IsEmpty()) ? TEXT("NONE") : ScenarioAsset.ToString();
				Ar.Logf(TEXT("Error loading Scenario (%s): Asset Id Is Not Valid"), *AssetId);
				return;
			}
			UAssetManager& Manager = UAssetManager::Get();

			FSoftObjectPath Path = Manager.GetPrimaryAssetPath(ScenarioAsset);

			if (!Path.IsValid())
			{
				Ar.Logf(TEXT("Error loading Scenario (%s): Scenario does not exist"), *ScenarioAsset.ToString());
				return;
			}

			auto Handle = Manager.LoadPrimaryAsset(ScenarioAsset);

			if (Handle.IsValid())
			{
				Handle->WaitUntilComplete(10);
			}

			UGameplayScenario* Scenario = Manager.GetPrimaryAssetObject<UGameplayScenario>(ScenarioAsset);

			UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: Going to Scenario %s"), *GetNameSafe(Scenario));

			SetPendingScenario(Scenario);
			TransitionToPendingScenario(true);
		}),
		ECVF_Default);
	FCoreUObjectDelegates::PostLoadMapWithWorld.AddUObject(this, &ThisClass::OnPostLoadMap);
	FCoreUObjectDelegates::PreLoadMap.AddUObject(this, &ThisClass::OnPreLoadMap);
}

void UScenarioInstanceSubsystem::SetPendingScenario(UGameplayScenario* Scenairo)
{
	PendingScenario = Scenairo;
}

void UScenarioInstanceSubsystem::TransitionToPendingScenario(bool bForce)
{
	if (!IsValid(PendingScenario))
	{
		UE_LOG(LogGameplayScenario, Warning, TEXT("ScenarioSubsystem: TransitionToPendingScenario called with no pending scenario"));
		return;
	}

	UGameplayScenario* Scenario = PendingScenario;
	PendingScenario = nullptr;

	StartActivatingScenario(Scenario, bForce);
}

void UScenarioInstanceSubsystem::PreActivateScenario(FPrimaryAssetId ScenarioAsset, bool bForce)
{
	UAssetManager& Manager = UAssetManager::Get();

	FSoftObjectPath Path = Manager.GetPrimaryAssetPath(ScenarioAsset);

	if (!ensure(Path.IsValid()))
	{
		return;
	}

	UGameplayScenario* Scenario = Manager.GetPrimaryAssetObject<UGameplayScenario>(ScenarioAsset);

	if (!IsValid(Scenario))
	{
		auto LoadHandle = Manager.LoadPrimaryAsset(ScenarioAsset);
		if (LoadHandle.IsValid())
		{
			LoadHandle->WaitUntilComplete();
		}

		Scenario = Manager.GetPrimaryAssetObject<UGameplayScenario>(ScenarioAsset);
	}

	if (IsValid(Scenario))
	{
		PreActivateScenario(Scenario, bForce);
	}
}

void UScenarioInstanceSubsystem::PreActivateScenario(UGameplayScenario* Scenario, bool bForce)
{
	if (!IsValid(Scenario))
	{
		return;
	}
	if (!bForce && IsScenarioActive(Scenario))
	{
		return;
	}

	UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: PreActivating Scenario %s"), *GetNameSafe(Scenario));

	Scenario->PreActivateScenario(this);
}

void UScenarioInstanceSubsystem::ActivateScenario(UGameplayScenario* Scenario, bool bForce)
{
	if (!IsValid(Scenario))
	{
		return;
	}
	if (!bForce && IsScenarioActive(Scenario))
	{
		return;
	}

	UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: Activating Scenario %s"), *GetNameSafe(Scenario));

	ActiveScenarios.Add(Scenario);

	for (UGameplayScenarioAction* Action : Scenario->ScenarioActions)
	{
		Action->OnScenarioActivated(this);
	}
	OnScenarioActivated.Broadcast(Scenario);
}

void UScenarioInstanceSubsystem::ActivateScenario(FPrimaryAssetId ScenarioAsset, bool bForce)
{
	UAssetManager& Manager = UAssetManager::Get();

	FSoftObjectPath Path = Manager.GetPrimaryAssetPath(ScenarioAsset);

	if (!ensure(Path.IsValid()))
	{
		return;
	}

	UGameplayScenario* Scenario = Manager.GetPrimaryAssetObject<UGameplayScenario>(ScenarioAsset);

	if (!IsValid(Scenario))
	{
		auto LoadHandle = Manager.LoadPrimaryAsset(ScenarioAsset);
		if (LoadHandle.IsValid())
		{
			LoadHandle->WaitUntilComplete();
		}

		Scenario = Manager.GetPrimaryAssetObject<UGameplayScenario>(ScenarioAsset);
	}

	if (IsValid(Scenario))
	{
		ActivateScenario(Scenario, bForce);
	}
}

void UScenarioInstanceSubsystem::DeactivateScenario(UGameplayScenario* Scenario)
{
	if (!IsScenarioActive(Scenario))
	{
		return;
	}

	UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: Deactivating Scenario %s"), *GetNameSafe(Scenario));

	Scenario->DeactivateScenario(this);

	ActiveScenarios.RemoveSwap(Scenario);

	OnScenarioDeactivated.Broadcast(Scenario);
}

void UScenarioInstanceSubsystem::DeactivateScenario(FPrimaryAssetId ScenarioAsset)
{
	UGameplayScenario** SearchedScenario = ActiveScenarios.FindByPredicate([ScenarioAsset](UGameplayScenario* Scenario) {
		if (Scenario->GetPrimaryAssetId() == ScenarioAsset)
		{
			return true;
		}
		return false;
	});

	if (SearchedScenario)
	{
		DeactivateScenario(*SearchedScenario);
	}
}

void UScenarioInstanceSubsystem::TearDownActiveScenarios()
{
	UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: Tearing Down all active scenarios"));
	for (UGameplayScenario* Scenario : ActiveScenarios)
	{
		if (IsValid(Scenario))
		{
			Scenario->DeactivateScenario(this, true);
			OnScenarioDeactivated.Broadcast(Scenario);
		}
	}
	ActiveScenarios.Empty();
}

bool UScenarioInstanceSubsystem::IsScenarioActive(UGameplayScenario* Scenario) const
{
	if (ActiveScenarios.Contains(Scenario))
	{
		return true;
	}

	return false;
}

void UScenarioInstanceSubsystem::OnPostLoadMap(UWorld* World)
{
	if (IsValid(MapTransitionScenario))
	{
		UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: After Map Load, Finishing Activating %s"), *GetNameSafe(PendingScenario));

		FinishActivatingScenario(MapTransitionScenario, true);
		MapTransitionScenario = nullptr;
	}

	if (IsValid(PendingScenario))
	{
		UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem: After Map Load, Transiting to pending Scenario %s"), *GetNameSafe(PendingScenario));

		TransitionToPendingScenario();
	}
}

void UScenarioInstanceSubsystem::OnPreLoadMap(const FString& MapName)
{
	TearDownActiveScenarios();
}
void UScenarioInstanceSubsystem::StartActivatingScenario(UGameplayScenario* Scenario, bool bForce)
{
	if (Scenario->Map.IsNull())
	{
		return;
	}
	Scenario->Map.LoadSynchronous();

	TearDownActiveScenarios();
	PreActivateScenario(Scenario, bForce);

	if (Scenario->Map.IsValid())
	{
		UE_LOG(LogGameplayScenario, Verbose, TEXT("ScenarioSubsystem:Transiting to world %s for scenario %s"), *Scenario->Map.ToString(), *GetNameSafe(Scenario));

		TransitionToWorld(Scenario->Map.Get());
		MapTransitionScenario = Scenario;
		return;
	}

	FinishActivatingScenario(Scenario, bForce);
}

void UScenarioInstanceSubsystem::FinishActivatingScenario(UGameplayScenario* Scenario, bool bForce)
{
	ActivateScenario(Scenario, bForce);
}

void UScenarioInstanceSubsystem::TransitionToWorld(TObjectPtr<UWorld> WorldAsset)
{
	const UWorld* const World = GetGameInstance()->GetWorld();

	const bool bIsClient = World->GetNetMode() == NM_Client;

	if (bIsClient)
	{
		return;
	}

	const bool bIsDedicatedServer = IsRunningDedicatedServer();
	const bool bIsListenServer = World->GetNetMode() == NM_ListenServer;
	const bool bIsStandalone = World->GetNetMode() == NM_Standalone;

	FURL NewMapURL = FURL(*WorldAsset->GetPrimaryAssetId().PrimaryAssetName.ToString());

	if (bIsStandalone || bIsListenServer)
	{
		NewMapURL.AddOption(TEXT("listen"));
	}

	if (AGameModeBase* GameMode = World->GetAuthGameMode())
	{
		if (GameMode->CanServerTravel(NewMapURL.ToString(), false))
		{
			GameMode->ProcessServerTravel(NewMapURL.ToString(), false);
		}
	}
}

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/BT_NewGameModeRuntimeModule.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "EngineMinimal.h"
#include "Modules/ModuleManager.h"

class FBT_NewGameModeRuntimeModule : public IModuleInterface
{
public:

	/** IModuleInterface implementation */
	virtual void StartupModule() override;
	virtual void ShutdownModule() override;
};
```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/Components/GamestateScenarioComponent.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "Engine/NetSerialization.h"
#include "Net/Serialization/FastArraySerializer.h"
#include "Components/GameStateComponent.h"

#include "GamestateScenarioComponent.generated.h"

class UGameplayScenario;

USTRUCT()
struct FGameplayScenarioNetworkArrayItem : public FFastArraySerializerItem
{
	GENERATED_BODY()
public:
	FGameplayScenarioNetworkArrayItem()
	{
		Scenario = nullptr;
		PrevScenario = nullptr;
	}

	UPROPERTY()
	UGameplayScenario* Scenario;

	TWeakObjectPtr<UGameplayScenario> PrevScenario;

	void PreReplicatedRemove(const struct FGameplayScenarioNetworkArray& InArraySerializer);
	void PostReplicatedAdd(const struct FGameplayScenarioNetworkArray& InArraySerializer);
	void PostReplicatedChange(const struct FGameplayScenarioNetworkArray& InArraySerializer);
};

USTRUCT()
struct FGameplayScenarioNetworkArray : public FFastArraySerializer
{
	GENERATED_BODY()
public:
	UPROPERTY()
	TArray<FGameplayScenarioNetworkArrayItem> Items;

	UPROPERTY()
	UGamestateScenarioComponent* ScenarioComp;

	bool NetDeltaSerialize(FNetDeltaSerializeInfo& DeltaParms)
	{
		return FFastArraySerializer::FastArrayDeltaSerialize<FGameplayScenarioNetworkArrayItem, FGameplayScenarioNetworkArray>(Items, DeltaParms, *this);
	}
};

template <>
struct TStructOpsTypeTraits<FGameplayScenarioNetworkArray> : public TStructOpsTypeTraitsBase2<FGameplayScenarioNetworkArray>
{
	enum
	{
		WithNetDeltaSerializer = true,
	};
};

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGamestateScenarioComponent : public UGameStateComponent
{
	GENERATED_BODY()

public:
	UGamestateScenarioComponent(const FObjectInitializer& ObjectInitializer);
	virtual void GetLifetimeReplicatedProps(TArray<class FLifetimeProperty>& OutLifetimeProps) const override;
	virtual void OnRegister() override;

	UFUNCTION()
	virtual void OnScenarioActivated(UGameplayScenario* Scenario);
	UFUNCTION()
	virtual void OnScenarioDeactivated(UGameplayScenario* Scenario);

	UPROPERTY(Replicated)
	FGameplayScenarioNetworkArray Scenarios;

	friend struct FGameplayScenarioNetworkArrayItem;

private:
	void ActivateScenarioLocally(UGameplayScenario* Scenario);
	void DeactivateScenarioLocally(UGameplayScenario* Scenario);
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayActivateScenario.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayScenarioAction.h"
#include "GameplayActivateScenario.generated.h"

class UGameplayScenario;

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayActivateScenario : public UGameplayScenarioAction
{
	GENERATED_BODY()
public:
	
	UPROPERTY(EditAnywhere, BlueprintReadOnly, meta = (AllowedTypes = "GameplayScenario"))
	TArray<FPrimaryAssetId> Scenarios;

	virtual void OnScenarioPreActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) override;
	virtual void OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) override;
	virtual void OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown) override;
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayAddComponents.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayScenarioAction.h"
#include "GameFeatureAction_AddComponents.h"
#include "GameplayAddComponents.generated.h"

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayAddComponents : public UGameplayScenarioAction
{
	GENERATED_BODY()
public: 
	UPROPERTY(EditAnywhere, Category = "Components", meta = (TitleProperty = "ComponentClass"))
		TArray<FGameFeatureComponentEntry> ComponentList;

	TArray<TSharedPtr<FComponentRequestHandle>> ComponentRequestHandles;

	virtual void OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) override;
	virtual void OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown) override;
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayApplyGASPrimitives.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayScenarioAction.h"
#include "GameplayApplyGASPrimitives.generated.h"

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayApplyGASPrimitives : public UGameplayScenarioAction
{
	GENERATED_BODY()	
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayDeactivateScenario.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayScenarioAction.h"
#include "GameplayTags.h"
#include "GameplayDeactivateScenario.generated.h"

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayDeactivateScenario : public UGameplayScenarioAction
{
	GENERATED_BODY()
	
	UPROPERTY(EditDefaultsOnly, Category="Scenario")
	FGameplayTagQuery DeactivateScenarioQuery;

	virtual void OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem);

};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayScenario.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "Engine/DataAsset.h"
#include "GameplayTags.h"
#include "GameplayScenario.generated.h"

class UGameplayScenarioAction;
class UScenarioInstanceSubsystem;

UCLASS(BlueprintType)
class BT_NEWGAMEMODERUNTIME_API UGameplayScenario : public UPrimaryDataAsset, public IGameplayTagAssetInterface
{
	GENERATED_BODY()
public:
	UGameplayScenario();

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Actions", meta = (AllowedTypes = "Map"), AssetRegistrySearchable)
	TSoftObjectPtr<UWorld> Map;

	UPROPERTY(EditDefaultsOnly, Instanced, Category = "Actions")
	TArray<UGameplayScenarioAction*> ScenarioActions;

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "UI", AssetRegistrySearchable)
	FText Name;

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "UI", AssetRegistrySearchable)
	FText Description;

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "UI")
	FGameplayTagContainer ScenarioTags;

	virtual void GetOwnedGameplayTags(FGameplayTagContainer& TagContainer) const { TagContainer.AppendTags(ScenarioTags); }

	void PreActivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem);
	void ActivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem);
	void DeactivateScenario(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown = false);

	using Predicate = TFunctionRef<void(UGameplayScenarioAction*)>;
	void ForEachAction_Mutable(Predicate Predicate);

	using ConstPredicate = TFunctionRef<void(const UGameplayScenarioAction*)>;
	void ForEachAction(ConstPredicate Predicate) const;
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayScenarioAction.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "UObject/NoExportTypes.h"
#include "GameplayScenarioAction.generated.h"

class UScenarioInstanceSubsystem;

UCLASS(DefaultToInstanced, EditInlineNew, Abstract)
class BT_NEWGAMEMODERUNTIME_API UGameplayScenarioAction : public UObject
{
	GENERATED_BODY()

public:
	virtual void OnScenarioPreActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) {}
	virtual void OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) {}
	virtual void OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown = false) {}
	
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayScenarioFunctionLibrary.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayTags.h"
#include "GameplayEffect.h"
#include "Engine/AssetManager.h"
#include "Abilities/GameplayAbilityTypes.h"
#include "Kismet/BlueprintFunctionLibrary.h"

#include "GameplayScenarioFunctionLibrary.generated.h"

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayScenarioFunctionLibrary : public UBlueprintFunctionLibrary
{
	GENERATED_BODY()

public:
	UFUNCTION(BlueprintPure, Category = "Assets")
	static bool GetAssetTagAsString(FPrimaryAssetId Asset, FName Tag, FString& OutString);

	UFUNCTION(BlueprintPure, Category = "Assets")
	static bool GetAssetTagAsText(FPrimaryAssetId Asset, FName Tag, FText& OutText);

	UFUNCTION(BlueprintPure, Category = "Assets")
	static bool GetAssetTagAsBool(FPrimaryAssetId Asset, FName Tag, bool& OutBool);
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayStreamLevelInstance.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayScenarioAction.h"
#include "GameplayStreamLevelInstance.generated.h"

class ULevelStreamingDynamic;

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UGameplayStreamLevelInstance : public UGameplayScenarioAction
{
	GENERATED_BODY()
public:
	
	virtual void OnScenarioActivated(UScenarioInstanceSubsystem* ScenarioSubsystem) override;
	virtual void OnScenarioDeactivated(UScenarioInstanceSubsystem* ScenarioSubsystem, bool bTearDown) override;

	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "World", meta = (AllowedTypes = "Map"))
		TArray<FPrimaryAssetId> StreamedInLevels;

	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Scenario")
		TArray<ULevelStreamingDynamic*> DynamicLevelStreams;
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/GameplayTriggerZone.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "GameplayTags.h"
#include "GameFramework/Actor.h"
#include "GameplayTriggerZone.generated.h"

class ATriggerBase;

DECLARE_DYNAMIC_MULTICAST_DELEGATE_TwoParams(FGameplayTriggerZoneEvent, AGameplayTriggerZone*, TriggerZone, AActor*, OverlappingActor);

UCLASS()
class BT_NEWGAMEMODERUNTIME_API AGameplayTriggerZone : public AActor, public IGameplayTagAssetInterface
{
	GENERATED_BODY()

public:
	AGameplayTriggerZone();

	virtual void PostInitializeComponents() override;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Trigger")
	TArray<TSoftObjectPtr<ATriggerBase>> TriggerVolumes;

	UFUNCTION()
	virtual void OnInternalVolumeBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);
	UFUNCTION()
	virtual void OnInternalVolumeEndOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex);

	UPROPERTY(BlueprintAssignable)
	FGameplayTriggerZoneEvent OnZoneBeginOverlap;
	UPROPERTY(BlueprintAssignable)
	FGameplayTriggerZoneEvent OnZoneEndOverlap;

	UPROPERTY(EditAnywhere, Category = "Trigger")
	FGameplayTagContainer TriggerTags;

	virtual void GetOwnedGameplayTags(FGameplayTagContainer& TagContainer) const
	{
		TagContainer.AppendTags(TagContainer);
	}

public:
	virtual void BeginPlay() override;

	virtual void EndPlay(const EEndPlayReason::Type EndPlayReason) override;

private:
	UPROPERTY()
	TMap<AActor*, int32> OverlappingActors;
};

```

`Plugins/GameFeatures/BT_NewGameMode/Source/BT_NewGameModeRuntime/Public/ScenarioInstanceSubsystem.h`:

```h
#pragma once

#include "CoreMinimal.h"
#include "Subsystems/GameInstanceSubsystem.h"
#include "ScenarioInstanceSubsystem.generated.h"

class UGameplayScenario;
class UGameplayChangeMap;
class ULevelStreamingDynamic;

DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FScenarioDelegate, UGameplayScenario*, Scenario);

UCLASS()
class BT_NEWGAMEMODERUNTIME_API UScenarioInstanceSubsystem : public UGameInstanceSubsystem
{
	GENERATED_BODY()

public:
	UScenarioInstanceSubsystem();

	virtual void Initialize(FSubsystemCollectionBase& Collection) override;

	UFUNCTION(BlueprintCallable, Category = "Scenario")
	virtual void SetPendingScenario(UGameplayScenario* Scenairo);
	UFUNCTION(BlueprintCallable, Category = "Scenario")
	virtual void TransitionToPendingScenario(bool bForce = false);

	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Scenario")
	TArray<UGameplayScenario*> ActiveScenarios;

	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "Scenario")
	UGameplayScenario* PendingScenario;

	UPROPERTY()
	UGameplayScenario* MapTransitionScenario;

	UPROPERTY(VisibleAnywhere, BlueprintReadWrite, Category = "Scenario")
	bool bBecomeListenServerFromStandalone;

	UPROPERTY(BlueprintAssignable)
	FScenarioDelegate OnScenarioActivated;

	UPROPERTY(BlueprintAssignable)
	FScenarioDelegate OnScenarioDeactivated;

	friend class UGameplayActivateScenario;
	friend class UGameplayDeactivateScenario;
	friend class UGamestateScenarioComponent;

protected:
	virtual void PreActivateScenario(FPrimaryAssetId ScenarioAsset, bool bForce);
	virtual void PreActivateScenario(UGameplayScenario* Scenario, bool bForce);

	virtual void ActivateScenario(FPrimaryAssetId ScenarioAsset, bool bForce);
	virtual void ActivateScenario(UGameplayScenario* Scenario, bool bForce);

	virtual void DeactivateScenario(UGameplayScenario* Scenario);
	virtual void DeactivateScenario(FPrimaryAssetId ScenarioAsset);

	void TearDownActiveScenarios();

	virtual bool IsScenarioActive(UGameplayScenario* Scenario) const;

	virtual void OnPostLoadMap(UWorld* World);
	virtual void OnPreLoadMap(const FString& MapName);

	void StartActivatingScenario(UGameplayScenario* Scenario, bool bForce);
	void FinishActivatingScenario(UGameplayScenario* Scenario, bool bForce);

	void TransitionToWorld(TObjectPtr<UWorld> World);
};

```

`Plugins/GameFeatures/BT_PlayerAbilities/BT_PlayerAbilities.uplugin`:

```uplugin
{
	"FileVersion": 3,
	"Version": 1,
	"VersionName": "1.0",
	"FriendlyName": "BT_PlayerAbilities",
	"Description": "Black Tower Studios - Test B",
	"Category": "Game Features",
	"CreatedBy": "Bruno Xavier",
	"CreatedByURL": "https://brunoxavierleite.com/",
	"DocsURL": "bruno_xavier_@msn.com",
	"SupportURL": "bruno_xavier_@msn.com",
	"EnabledByDefault": true,
	"CanContainContent": true,
	"IsBetaVersion": false,
	"IsExperimentalVersion": false,
	"Installed": true,
	"ExplicitlyLoaded": true,
	"BuiltInInitialFeatureState": "Loaded",
	"MarketplaceURL": "",
	"Modules": [
		{
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"Name": "BT_PlayerAbilitiesRuntime",
			"PlatformAllowList": [
				"Win64",
				"Mac",
				"Linux"
			]
		}
	]
}
```

`Plugins/GameFeatures/BT_PlayerAbilities/Source/BT_PlayerAbilitiesRuntime/BT_PlayerAbilitiesRuntime.Build.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using System.IO;
using UnrealBuildTool;

public class BT_PlayerAbilitiesRuntime : ModuleRules
{
	public BT_PlayerAbilitiesRuntime(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = ModuleRules.PCHUsageMode.UseExplicitOrSharedPCHs;
		DefaultBuildSettings = BuildSettingsVersion.V2;
		IWYUSupport = IWYUSupport.KeepAsIsForNow;

		PublicIncludePaths.AddRange(new string[] {
		});

		PrivateIncludePaths.AddRange(new string[] {
		});

		PublicDependencyModuleNames.AddRange(new string[] {
			"Core",
		});

		PrivateDependencyModuleNames.AddRange(new string[] {
			"CoreUObject", "Engine"
		});

		DynamicallyLoadedModuleNames.AddRange(new string[] {
		});

		PublicIncludePaths.Add(Path.Combine(ModuleDirectory,"Public"));
		PrivateIncludePaths.Add(Path.Combine(ModuleDirectory,"Private"));
	}
}

```

`Plugins/GameFeatures/BT_PlayerAbilities/Source/BT_PlayerAbilitiesRuntime/Private/BT_PlayerAbilitiesRuntimeModule.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "BT_PlayerAbilitiesRuntimeModule.h"

#define LOCTEXT_NAMESPACE "FBT_PlayerAbilitiesRuntimeModule"

void FBT_PlayerAbilitiesRuntimeModule::StartupModule()
{
}

void FBT_PlayerAbilitiesRuntimeModule::ShutdownModule()
{
}

#undef LOCTEXT_NAMESPACE

IMPLEMENT_MODULE(FBT_PlayerAbilitiesRuntimeModule, BT_PlayerAbilitiesRuntime)

```

`Plugins/GameFeatures/BT_PlayerAbilities/Source/BT_PlayerAbilitiesRuntime/Public/BT_PlayerAbilitiesRuntimeModule.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "Modules/ModuleManager.h"

class FBT_PlayerAbilitiesRuntimeModule : public IModuleInterface
{
public:
	//~IModuleInterface
	virtual void StartupModule() override;
	virtual void ShutdownModule() override;
	//~End of IModuleInterface
};

```

`README.md`:

```md
> Template taken from Unreal Engine "5.4.2 Release".<br>
> Project build on Unreal Engine "5.5.0 Preview".
<br>

>> [**BASE CONTROLS**]<br>
> * AWSD - Move / Walk
> * SPACEBAR - Jump
> * LMB - Shoot

>> [**JETPACK CONTROLS**]<br>
> * AWSD - Move / Fly
> * SPACEBAR - Thrust / Shut off


<br>
<p align="center">
    <img src="BT.png" alt="Modular Game Features">
</p>


[![Watch the video](VD.png)](https://youtu.be/nomjHl1sM0o)

```

`Source/FirstPerson.Target.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using UnrealBuildTool;
using System.Collections.Generic;

public class FirstPersonTarget : TargetRules
{
	public FirstPersonTarget(TargetInfo Target) : base(Target)
	{
		Type = TargetType.Game;
		DefaultBuildSettings = BuildSettingsVersion.V5;
		IncludeOrderVersion = EngineIncludeOrderVersion.Unreal5_4;
		ExtraModuleNames.Add("FirstPerson");
	}
}

```

`Source/FirstPerson/AbilitySystem/AbilityInputBindingComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "AbilityInputBindingComponent.h"
#include "FirstPerson/FirstPerson.h"
#include "InputAction.h"
#include "EnhancedInputComponent.h"
#include "AbilitySystemComponent.h"
#include "AbilitySystemGlobals.h"

namespace AbilityInputBindingComponent_Impl
{
	constexpr int32 InvalidInputID = 0;
	int32 IncrementingInputID = InvalidInputID;

	static int32 GetNextInputID()
	{
		return ++IncrementingInputID;
	}
}

void UAbilityInputBindingComponent::SetInputBinding(UInputAction* InputAction, FGameplayAbilitySpecHandle AbilityHandle)
{
	using namespace AbilityInputBindingComponent_Impl;

	FGameplayAbilitySpec* BindingAbility = FindAbilitySpec(AbilityHandle);

	FAbilityInputBinding* AbilityInputBinding = MappedAbilities.Find(InputAction);
	if (AbilityInputBinding)
	{
		FGameplayAbilitySpec* OldBoundAbility = FindAbilitySpec(AbilityInputBinding->BoundAbilitiesStack.Top());
		if (OldBoundAbility && OldBoundAbility->InputID == AbilityInputBinding->InputID)
		{
			OldBoundAbility->InputID = InvalidInputID;
		}
	}
	else
	{
		AbilityInputBinding = &MappedAbilities.Add(InputAction);
		AbilityInputBinding->InputID = GetNextInputID();
	}

	if (BindingAbility)
	{
		BindingAbility->InputID = AbilityInputBinding->InputID;
	}

	AbilityInputBinding->BoundAbilitiesStack.Push(AbilityHandle);
	TryBindAbilityInput(InputAction, *AbilityInputBinding);
}

void UAbilityInputBindingComponent::ClearInputBinding(FGameplayAbilitySpecHandle AbilityHandle)
{
	using namespace AbilityInputBindingComponent_Impl;

	if (FGameplayAbilitySpec* FoundAbility = FindAbilitySpec(AbilityHandle))
	{
		// Find the mapping for this ability
		auto MappedIterator = MappedAbilities.CreateIterator();
		while (MappedIterator)
		{
			if (MappedIterator.Value().InputID == FoundAbility->InputID)
			{
				break;
			}

			++MappedIterator;
		}

		if (MappedIterator)
		{
			FAbilityInputBinding& AbilityInputBinding = MappedIterator.Value();

			if (AbilityInputBinding.BoundAbilitiesStack.Remove(AbilityHandle) > 0)
			{
				if (AbilityInputBinding.BoundAbilitiesStack.Num() > 0)
				{
					FGameplayAbilitySpec* StackedAbility = FindAbilitySpec(AbilityInputBinding.BoundAbilitiesStack.Top());
					if (StackedAbility && StackedAbility->InputID == 0)
					{
						StackedAbility->InputID = AbilityInputBinding.InputID;
					}
				}
				else
				{
					// NOTE: This will invalidate the `AbilityInputBinding` ref above
					RemoveEntry(MappedIterator.Key());
				}
				// DO NOT act on `AbilityInputBinding` after here (it could have been removed)


				FoundAbility->InputID = InvalidInputID;
			}
		}
	}
}

void UAbilityInputBindingComponent::ClearAbilityBindings(UInputAction* InputAction)
{
	RemoveEntry(InputAction);
}

void UAbilityInputBindingComponent::ResetBindings()
{
	for (auto& InputBinding : MappedAbilities)
	{
		if (InputComponent)
		{
			InputComponent->RemoveBindingByHandle(InputBinding.Value.OnPressedHandle);
			InputComponent->RemoveBindingByHandle(InputBinding.Value.OnReleasedHandle);
		}

		if (AbilityComponent)
		{
			const int32 ExpectedInputID = InputBinding.Value.InputID;

			for (FGameplayAbilitySpecHandle AbilityHandle : InputBinding.Value.BoundAbilitiesStack)
			{
				FGameplayAbilitySpec* FoundAbility = AbilityComponent->FindAbilitySpecFromHandle(AbilityHandle);
				if (FoundAbility && FoundAbility->InputID == ExpectedInputID)
				{
					FoundAbility->InputID = AbilityInputBindingComponent_Impl::InvalidInputID;
				}
			}
		}
	}

	AbilityComponent = nullptr;
}

void UAbilityInputBindingComponent::SetupPlayerControls_Implementation(UEnhancedInputComponent* PlayerInputComponent)
{
	ResetBindings();

	for (auto& Ability : MappedAbilities)
	{
		UInputAction* InputAction = Ability.Key;

		// Pressed event
		InputComponent->BindAction(InputAction, ETriggerEvent::Started, this, &UAbilityInputBindingComponent::OnAbilityInputPressed, InputAction);

		// Released event
		InputComponent->BindAction(InputAction, ETriggerEvent::Completed, this, &UAbilityInputBindingComponent::OnAbilityInputReleased, InputAction);
	}

	RunAbilitySystemSetup();
}

void UAbilityInputBindingComponent::ReleaseInputComponent(AController* OldController)
{
	ResetBindings();

	Super::ReleaseInputComponent();
}

void UAbilityInputBindingComponent::RunAbilitySystemSetup()
{
	AActor* MyOwner = GetOwner();
	check(MyOwner);

	AbilityComponent = UAbilitySystemGlobals::GetAbilitySystemComponentFromActor(MyOwner);
	if (AbilityComponent)
	{
		for (auto& InputBinding : MappedAbilities)
		{
			const int32 NewInputID = AbilityInputBindingComponent_Impl::GetNextInputID();
			InputBinding.Value.InputID = NewInputID;

			for (FGameplayAbilitySpecHandle AbilityHandle : InputBinding.Value.BoundAbilitiesStack)
			{
				FGameplayAbilitySpec* FoundAbility = AbilityComponent->FindAbilitySpecFromHandle(AbilityHandle);
				if (FoundAbility != nullptr)
				{
					FoundAbility->InputID = NewInputID;
				}
			}
		}
	}
}

void UAbilityInputBindingComponent::OnAbilityInputPressed(UInputAction* InputAction)
{
	// The AbilitySystemComponent may not have been valid when we first bound input... try again.
	if (!AbilityComponent)
	{
		RunAbilitySystemSetup();
	}

	if (AbilityComponent)
	{
		using namespace AbilityInputBindingComponent_Impl;

		FAbilityInputBinding* FoundBinding = MappedAbilities.Find(InputAction);
		if (FoundBinding && ensure(FoundBinding->InputID != InvalidInputID))
		{
			AbilityComponent->AbilityLocalInputPressed(FoundBinding->InputID);
		}
	}
}

void UAbilityInputBindingComponent::OnAbilityInputReleased(UInputAction* InputAction)
{
	if (AbilityComponent)
	{
		using namespace AbilityInputBindingComponent_Impl;

		FAbilityInputBinding* FoundBinding = MappedAbilities.Find(InputAction);
		if (FoundBinding && ensure(FoundBinding->InputID != InvalidInputID))
		{
			AbilityComponent->AbilityLocalInputReleased(FoundBinding->InputID);
		}
	}
}

void UAbilityInputBindingComponent::RemoveEntry(UInputAction* InputAction)
{
	if (FAbilityInputBinding* Bindings = MappedAbilities.Find(InputAction))
	{
		if (InputComponent)
		{
			InputComponent->RemoveBindingByHandle(Bindings->OnPressedHandle);
			InputComponent->RemoveBindingByHandle(Bindings->OnReleasedHandle);
		}

		for (FGameplayAbilitySpecHandle AbilityHandle : Bindings->BoundAbilitiesStack)
		{
			using namespace AbilityInputBindingComponent_Impl;

			FGameplayAbilitySpec* AbilitySpec = FindAbilitySpec(AbilityHandle);
			if (AbilitySpec && AbilitySpec->InputID == Bindings->InputID)
			{
				AbilitySpec->InputID = InvalidInputID;
			}
		}

		MappedAbilities.Remove(InputAction);
	}
}

FGameplayAbilitySpec* UAbilityInputBindingComponent::FindAbilitySpec(FGameplayAbilitySpecHandle Handle)
{
	FGameplayAbilitySpec* FoundAbility = nullptr;
	if (AbilityComponent)
	{
		FoundAbility = AbilityComponent->FindAbilitySpecFromHandle(Handle);
	}
	return FoundAbility;
}

void UAbilityInputBindingComponent::TryBindAbilityInput(UInputAction* InputAction, FAbilityInputBinding& AbilityInputBinding)
{
	if (InputComponent)
	{
		// Pressed event
		if (AbilityInputBinding.OnPressedHandle == 0)
		{
			AbilityInputBinding.OnPressedHandle = InputComponent->BindAction(InputAction, ETriggerEvent::Started, this, &UAbilityInputBindingComponent::OnAbilityInputPressed, InputAction).GetHandle();
		}

		// Released event
		if (AbilityInputBinding.OnReleasedHandle == 0)
		{
			AbilityInputBinding.OnReleasedHandle = InputComponent->BindAction(InputAction, ETriggerEvent::Completed, this, &UAbilityInputBindingComponent::OnAbilityInputReleased, InputAction).GetHandle();
		}
	}
}
```

`Source/FirstPerson/AbilitySystem/AbilityInputBindingComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "FirstPerson/Input/PlayerControlsComponent.h"
#include "GameplayAbilitySpec.h" // for FGameplayAbilitySpecHandle
#include "EnhancedInputComponent.h" // for FInputBindingHandle
#include "AbilityInputBindingComponent.generated.h"

class UInputAction;
class UAbilitySystemComponent;
class UEnhancedInputComponent;

USTRUCT()
struct FAbilityInputBinding
{
	GENERATED_BODY()

	int32  InputID = 0;
	uint32 OnPressedHandle = 0;
	uint32 OnReleasedHandle = 0;
	TArray<FGameplayAbilitySpecHandle> BoundAbilitiesStack;
};

/** Component that hooks up enhanced input to the ability system input logic */
UCLASS(meta=(BlueprintSpawnableComponent))
class UAbilityInputBindingComponent : public UPlayerControlsComponent
{
	GENERATED_BODY()

public:
	UFUNCTION(BlueprintCallable, Category = "FirstPerson|Abilities")
	void SetInputBinding(UInputAction* InputAction, FGameplayAbilitySpecHandle AbilityHandle);

	UFUNCTION(BlueprintCallable, Category = "FirstPerson|Abilities")
	void ClearInputBinding(FGameplayAbilitySpecHandle AbilityHandle);

	UFUNCTION(BlueprintCallable, Category = "FirstPerson|Abilities")
	void ClearAbilityBindings(UInputAction* InputAction);

	//~ Begin UPlayerControlsComponent interface
	virtual void SetupPlayerControls_Implementation(UEnhancedInputComponent* PlayerInputComponent) override;
	virtual void ReleaseInputComponent(AController* OldController) override;
	//~ End UPlayerControlsComponent interface

private:
	void ResetBindings();
	void RunAbilitySystemSetup();
	void OnAbilityInputPressed(UInputAction* InputAction);
	void OnAbilityInputReleased(UInputAction* InputAction);

	void RemoveEntry(UInputAction* InputAction);

	FGameplayAbilitySpec* FindAbilitySpec(FGameplayAbilitySpecHandle Handle);
	void TryBindAbilityInput(UInputAction* InputAction, FAbilityInputBinding& AbilityInputBinding);

private:
	UPROPERTY(transient)
	UAbilitySystemComponent* AbilityComponent;

	UPROPERTY(transient)
	TMap<UInputAction*, FAbilityInputBinding> MappedAbilities;
};

```

`Source/FirstPerson/AbilitySystem/FirstPersonAbilityAttributeSet.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "AttributeSet.h"
#include "AbilitySystemComponent.h"
#include "FirstPersonAbilityAttributeSet.generated.h"

#define ATTRIBUTE_ACCESSORS(ClassName, PropertyName)           \
	GAMEPLAYATTRIBUTE_PROPERTY_GETTER(ClassName, PropertyName) \
	GAMEPLAYATTRIBUTE_VALUE_GETTER(PropertyName)               \
	GAMEPLAYATTRIBUTE_VALUE_SETTER(PropertyName)               \
	GAMEPLAYATTRIBUTE_VALUE_INITTER(PropertyName)

UCLASS(Abstract, EditInlineNew)
class FIRSTPERSON_API UFirstPersonAbilityAttributeSet : public UAttributeSet
{
	GENERATED_BODY()
};

```

`Source/FirstPerson/AbilitySystem/FirstPersonAbilitySystemComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonAbilitySystemComponent.h"
#include "FirstPerson/Animation/FirstPersonAnimInstance.h"
#include "Components/SkeletalMeshComponent.h"
#include "FirstPerson/AbilitySystem/FirstPersonAbilityAttributeSet.h"

void UFirstPersonAbilitySystemComponent::InitAbilityActorInfo(AActor* InOwnerActor, AActor* InAvatarActor)
{
	Super::InitAbilityActorInfo(InOwnerActor, InAvatarActor);

	if (AbilityActorInfo)
	{
		if (AbilityActorInfo->AnimInstance == nullptr)
		{
			AbilityActorInfo->AnimInstance = AbilityActorInfo->GetAnimInstance();
		}

		if (UFirstPersonAnimInstance* TopAnimInststance = Cast<UFirstPersonAnimInstance>(AbilityActorInfo->AnimInstance))
		{
			TopAnimInststance->InitializeWithAbilitySystem(this);
		}

		if (AbilityActorInfo->SkeletalMeshComponent.IsValid())
		{
			const USkeletalMeshComponent* SkeletalMeshComponent = AbilityActorInfo->SkeletalMeshComponent.Get();

			const TArray<UAnimInstance*>& AnimLayers = SkeletalMeshComponent->GetLinkedAnimInstances();
			for (UAnimInstance* AnimLayer : AnimLayers)
			{
				if (UFirstPersonAnimInstance* FirstPersonAnimLayer = Cast<UFirstPersonAnimInstance>(AnimLayer))
				{
					FirstPersonAnimLayer->InitializeWithAbilitySystem(this);
				}
			}
		}

		if (UGameInstance* GameInstance = InOwnerActor->GetGameInstance())
		{
			// Sign up for possess/unpossess events so that we can update the cached AbilityActorInfo accordingly
			GameInstance->GetOnPawnControllerChanged().AddDynamic(this, &UFirstPersonAbilitySystemComponent::OnPawnControllerChanged);
		}
	}

	GrantDefaultAbilitiesAndAttributes();
}

void UFirstPersonAbilitySystemComponent::BeginDestroy()
{
	if (AbilityActorInfo && AbilityActorInfo->OwnerActor.IsValid())
	{
		if (UGameInstance* GameInstance = AbilityActorInfo->OwnerActor->GetGameInstance())
		{
			GameInstance->GetOnPawnControllerChanged().RemoveAll(this);
		}
	}

	Super::BeginDestroy();
}

FGameplayAbilitySpecHandle UFirstPersonAbilitySystemComponent::GrantAbilityOfType(TSubclassOf<UGameplayAbility> AbilityType, bool bRemoveAfterActivation)
{
	FGameplayAbilitySpecHandle AbilityHandle;
	if (AbilityType)
	{
		FGameplayAbilitySpec AbilitySpec(AbilityType);
		AbilitySpec.RemoveAfterActivation = bRemoveAfterActivation;

		AbilityHandle = GiveAbility(AbilitySpec);
	}
	return AbilityHandle;
}

void UFirstPersonAbilitySystemComponent::GrantDefaultAbilitiesAndAttributes()
{
	// Reset/Remove abilities if we had already added them
	{
		for (UAttributeSet* AttribSetInstance : AddedAttributes)
		{
			GetSpawnedAttributes_Mutable().Remove(AttribSetInstance);
		}

		for (FGameplayAbilitySpecHandle AbilityHandle : DefaultAbilityHandles)
		{
			SetRemoveAbilityOnEnd(AbilityHandle);
		}

		AddedAttributes.Empty(DefaultAttributes.Num());
		DefaultAbilityHandles.Empty(DefaultAbilities.Num());
	}

	// Default abilities
	{
		DefaultAbilityHandles.Reserve(DefaultAbilities.Num());
		for (const TSubclassOf<UGameplayAbility>& Ability : DefaultAbilities)
		{
			if (*Ability)
			{
				DefaultAbilityHandles.Add(GiveAbility(FGameplayAbilitySpec(Ability)));
			}
		}
	}

	// Default attributes
	{
		for (const FFirstPersonAttributeApplication& Attributes : DefaultAttributes)
		{
			if (Attributes.AttributeSetType)
			{
				UAttributeSet* NewAttribSet = NewObject<UAttributeSet>(this, Attributes.AttributeSetType);
				if (Attributes.InitializationData)
				{
					NewAttribSet->InitFromMetaDataTable(Attributes.InitializationData);
				}
				AddedAttributes.Add(NewAttribSet);
				AddAttributeSetSubobject(NewAttribSet);
			}
		}
	}
}

void UFirstPersonAbilitySystemComponent::OnPawnControllerChanged(APawn* Pawn, AController* NewController)
{
	if (AbilityActorInfo && AbilityActorInfo->OwnerActor == Pawn && AbilityActorInfo->PlayerController != NewController)
	{
		// Reinit the cached ability actor info (specifically the player controller)
		AbilityActorInfo->InitFromActor(AbilityActorInfo->OwnerActor.Get(), AbilityActorInfo->AvatarActor.Get(), this);
	}
}

```

`Source/FirstPerson/AbilitySystem/FirstPersonAbilitySystemComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "AbilitySystemComponent.h"
#include "Delegates/DelegateCombinations.h"
#include "GameFramework/Actor.h"
#include "FirstPersonAbilitySystemComponent.generated.h"

class UAbilityAnimNotify;
class USkeletalMeshComponent;
class UAnimSequenceBase;
class UFirstPersonAbilityAttributeSet;
class UDataTable;
class APawn;
class AController;

USTRUCT()
struct FFirstPersonAttributeApplication
{
	GENERATED_BODY()

	// Ability set to grant
	UPROPERTY(EditAnywhere)
	TSubclassOf<UFirstPersonAbilityAttributeSet> AttributeSetType;

	// Data table reference to initialize the attributes with, if any (can be left unset)
	UPROPERTY(EditAnywhere)
	UDataTable* InitializationData = nullptr;
};

UCLASS(meta=(BlueprintSpawnableComponent))
class UFirstPersonAbilitySystemComponent : public UAbilitySystemComponent
{
	GENERATED_BODY()

public:
	UPROPERTY(EditDefaultsOnly, Category = Ability)
	TArray<TSubclassOf<UGameplayAbility>> DefaultAbilities;

	UPROPERTY(EditDefaultsOnly, Category = Ability)
	TArray<FFirstPersonAttributeApplication> DefaultAttributes;

	//~ Begin UAbilitySystemComponent interface
	virtual void InitAbilityActorInfo(AActor* InOwnerActor, AActor* InAvatarActor) override;
	//~ End UAbilitySystemComponent interface

	//~ Begin UObject interface
	virtual void BeginDestroy() override;
	//~ End UObject interface

	UFUNCTION(BlueprintCallable, Category = "FirstPerson|Abilities")
	FGameplayAbilitySpecHandle GrantAbilityOfType(TSubclassOf<UGameplayAbility> AbilityType, bool bRemoveAfterActivation);

protected:
	void GrantDefaultAbilitiesAndAttributes();

	UFUNCTION() // UFunction to be able to bind with dynamic delegate
	void OnPawnControllerChanged(APawn* Pawn, AController* NewController);
	TArray<FGameplayAbilitySpecHandle> DefaultAbilityHandles;

	UPROPERTY(transient)
	TArray<UAttributeSet*> AddedAttributes;
};

```

`Source/FirstPerson/AbilitySystem/FirstPersonAbilityTargetActor.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonAbilityTargetActor.h"
#include "FirstPerson/FirstPerson.h"
#include "Abilities/GameplayAbility.h"
#include "Engine/BlueprintGeneratedClass.h"

void AFirstPersonAbilityTargetActor::StartTargeting(UGameplayAbility* Ability)
{
	Super::StartTargeting(Ability);
	SourceActor = Ability->GetCurrentActorInfo()->AvatarActor.Get();
	
	RecieveStartTargeting(Ability);
}

bool AFirstPersonAbilityTargetActor::IsConfirmTargetingAllowed()
{
	return K2_IsConfirmTargetingAllowed();
}

void AFirstPersonAbilityTargetActor::ConfirmTargetingAndContinue()
{
	if (SourceActor && ensureAlways(ShouldProduceTargetData()))
	{
		auto ImplementedInBlueprint = [](const UFunction* Func) -> bool
		{
			return Func && ensure(Func->GetOuter())
				&& Func->GetOuter()->IsA(UBlueprintGeneratedClass::StaticClass());
		};
		UE_CLOG(
			!ImplementedInBlueprint(GetClass()->FindFunctionByName(GET_FUNCTION_NAME_CHECKED(AFirstPersonAbilityTargetActor, MakeTargetData))),
			LogFirstPerson,
			Error,
			TEXT("`%s` does not implement `MakeTargetData`. Invalid target data will be returned."),
			*GetClass()->GetName()
		);

		FGameplayAbilityTargetDataHandle Handle = MakeTargetData();
		TargetDataReadyDelegate.Broadcast(Handle);
	}
}

bool AFirstPersonAbilityTargetActor::K2_IsConfirmTargetingAllowed_Implementation()
{
	return Super::IsConfirmTargetingAllowed();
}
```

`Source/FirstPerson/AbilitySystem/FirstPersonAbilityTargetActor.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.
#pragma once

#include "CoreMinimal.h"
#include "UObject/ObjectMacros.h"
#include "Abilities/GameplayAbilityTargetActor.h"
#include "Abilities/GameplayAbilityTargetTypes.h" // for FGameplayAbilityTargetDataHandle
#include "FirstPersonAbilityTargetActor.generated.h"

class UGameplayAbility;

UCLASS(Abstract)
class AFirstPersonAbilityTargetActor : public AGameplayAbilityTargetActor
{
	GENERATED_BODY()

public:
	//~ Begin AGameplayAbilityTargetActor interface
	virtual void StartTargeting(UGameplayAbility* Ability) override;
	virtual bool IsConfirmTargetingAllowed() override;
	virtual void ConfirmTargetingAndContinue() override;
	//~ End AGameplayAbilityTargetActor interface

	UFUNCTION(BlueprintImplementableEvent, DisplayName = "StartTargeting")
	void RecieveStartTargeting(UGameplayAbility* Ability);

	UFUNCTION(BlueprintNativeEvent, DisplayName = "IsConfirmTargetingAllowed")
	bool K2_IsConfirmTargetingAllowed();

	UFUNCTION(BlueprintImplementableEvent)
	FGameplayAbilityTargetDataHandle MakeTargetData();
};
```

`Source/FirstPerson/Animation/FirstPersonAnimInstance.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonAnimInstance.h"
#include "AbilitySystemComponent.h"

void UFirstPersonAnimInstance::NativeInitializeAnimation()
{
	if (AActor* MyActor = GetOwningActor())
	{
		UAbilitySystemComponent* AbilityComponent = MyActor->FindComponentByClass<UAbilitySystemComponent>();
		if (AbilityComponent)
		{
			InitializeWithAbilitySystem(AbilityComponent);
		}
	}

	Super::NativeInitializeAnimation();
}

void UFirstPersonAnimInstance::InitializeWithAbilitySystem(UAbilitySystemComponent* AbilityComponent)
{
	GameplayTagPropertyMap.Initialize(this, AbilityComponent);
	ReceiveAbilitySystem(AbilityComponent);
}
```

`Source/FirstPerson/Animation/FirstPersonAnimInstance.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "Animation/AnimInstance.h"
#include "GameplayEffectTypes.h" // for FGameplayTagBlueprintPropertyMap
#include "FirstPersonAnimInstance.generated.h"

class UAbilitySystemComponent;

UCLASS()
class UFirstPersonAnimInstance : public UAnimInstance
{
	GENERATED_BODY()

	UPROPERTY(EditDefaultsOnly, Category = "Gameplay")
	FGameplayTagBlueprintPropertyMap GameplayTagPropertyMap;

public:
	//~ Begin UAnimInstance interface
	virtual void NativeInitializeAnimation() override;
	//~ End UAnimInstance interface

	void InitializeWithAbilitySystem(UAbilitySystemComponent* AbilityComponent);

	UFUNCTION(BlueprintImplementableEvent, DisplayName = "Initialize with Ability System")
	void ReceiveAbilitySystem(UAbilitySystemComponent* AbilitySystem);
};

```

`Source/FirstPerson/FirstPerson.Build.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using UnrealBuildTool;

public class FirstPerson : ModuleRules
{
	public FirstPerson(ReadOnlyTargetRules Target) : base(Target)
	{
		PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;

		PublicDependencyModuleNames.AddRange(new string[]
		{
			"Core",
			"Engine",
			"InputCore",
			"CoreUObject",
			"GameFeatures",
			"GameplayTags",
			"GameplayTasks",
			"EnhancedInput",
			"ModularGameplay",
			"GameplayAbilities"
		});
	}
}

```

`Source/FirstPerson/FirstPerson.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPerson.h"
#include "Modules/ModuleManager.h"

IMPLEMENT_PRIMARY_GAME_MODULE(FDefaultGameModuleImpl, FirstPerson, "FirstPerson");

DEFINE_LOG_CATEGORY(LogFirstPerson)

```

`Source/FirstPerson/FirstPerson.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"

DECLARE_LOG_CATEGORY_EXTERN(LogFirstPerson, Log, All)

```

`Source/FirstPerson/FirstPersonCharacter.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonCharacter.h"
#include "FirstPersonProjectile.h"
#include "Animation/AnimInstance.h"
#include "Camera/CameraComponent.h"
#include "Components/CapsuleComponent.h"
#include "Components/SkeletalMeshComponent.h"
#include "EnhancedInputComponent.h"
#include "EnhancedInputSubsystems.h"
#include "InputActionValue.h"
#include "Engine/LocalPlayer.h"

DEFINE_LOG_CATEGORY(LogTemplateCharacter);

//////////////////////////////////////////////////////////////////////////
// AFirstPersonCharacter

AFirstPersonCharacter::AFirstPersonCharacter()
{
	// Set size for collision capsule
	GetCapsuleComponent()->InitCapsuleSize(55.f, 96.0f);
		
	// Create a CameraComponent	
	FirstPersonCameraComponent = CreateDefaultSubobject<UCameraComponent>(TEXT("FirstPersonCamera"));
	FirstPersonCameraComponent->SetupAttachment(GetCapsuleComponent());
	FirstPersonCameraComponent->SetRelativeLocation(FVector(-10.f, 0.f, 60.f)); // Position the camera
	FirstPersonCameraComponent->bUsePawnControlRotation = true;

	// Create a mesh component that will be used when being viewed from a '1st person' view (when controlling this pawn)
	Mesh1P = CreateDefaultSubobject<USkeletalMeshComponent>(TEXT("CharacterMesh1P"));
	Mesh1P->SetOnlyOwnerSee(true);
	Mesh1P->SetupAttachment(FirstPersonCameraComponent);
	Mesh1P->bCastDynamicShadow = false;
	Mesh1P->CastShadow = false;
	//Mesh1P->SetRelativeRotation(FRotator(0.9f, -19.19f, 5.2f));
	Mesh1P->SetRelativeLocation(FVector(-30.f, 0.f, -150.f));

}

void AFirstPersonCharacter::BeginPlay()
{
	// Call the base class  
	Super::BeginPlay();
}

//////////////////////////////////////////////////////////////////////////// Input

void AFirstPersonCharacter::SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)
{	
	// Set up action bindings
	if (UEnhancedInputComponent* EnhancedInputComponent = Cast<UEnhancedInputComponent>(PlayerInputComponent))
	{
		// Jumping
		EnhancedInputComponent->BindAction(JumpAction, ETriggerEvent::Started, this, &ACharacter::Jump);
		EnhancedInputComponent->BindAction(JumpAction, ETriggerEvent::Completed, this, &ACharacter::StopJumping);

		// Moving
		EnhancedInputComponent->BindAction(MoveAction, ETriggerEvent::Triggered, this, &AFirstPersonCharacter::Move);

		// Looking
		EnhancedInputComponent->BindAction(LookAction, ETriggerEvent::Triggered, this, &AFirstPersonCharacter::Look);
	}
	else
	{
		UE_LOG(LogTemplateCharacter, Error, TEXT("'%s' Failed to find an Enhanced Input Component! This template is built to use the Enhanced Input system. If you intend to use the legacy system, then you will need to update this C++ file."), *GetNameSafe(this));
	}
}


void AFirstPersonCharacter::Move(const FInputActionValue& Value)
{
	// input is a Vector2D
	FVector2D MovementVector = Value.Get<FVector2D>();

	if (Controller != nullptr)
	{
		// add movement 
		AddMovementInput(GetActorForwardVector(), MovementVector.Y);
		AddMovementInput(GetActorRightVector(), MovementVector.X);
	}
}

void AFirstPersonCharacter::Look(const FInputActionValue& Value)
{
	// input is a Vector2D
	FVector2D LookAxisVector = Value.Get<FVector2D>();

	if (Controller != nullptr)
	{
		// add yaw and pitch input to controller
		AddControllerYawInput(LookAxisVector.X);
		AddControllerPitchInput(LookAxisVector.Y);
	}
}
```

`Source/FirstPerson/FirstPersonCharacter.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "Logging/LogMacros.h"
#include "FirstPersonCharacter.generated.h"

class UInputComponent;
class USkeletalMeshComponent;
class UCameraComponent;
class UInputAction;
class UInputMappingContext;
struct FInputActionValue;

DECLARE_LOG_CATEGORY_EXTERN(LogTemplateCharacter, Log, All);

UCLASS(config=Game)
class AFirstPersonCharacter : public ACharacter
{
	GENERATED_BODY()

	/** Pawn mesh: 1st person view (arms; seen only by self) */
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category=Mesh, meta = (AllowPrivateAccess = "true"))
	USkeletalMeshComponent* Mesh1P;

	/** First person camera */
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = Camera, meta = (AllowPrivateAccess = "true"))
	UCameraComponent* FirstPersonCameraComponent;

	/** Jump Input Action */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category=Input, meta=(AllowPrivateAccess = "true"))
	UInputAction* JumpAction;

	/** Move Input Action */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category=Input, meta=(AllowPrivateAccess = "true"))
	UInputAction* MoveAction;
	
public:
	AFirstPersonCharacter();

protected:
	virtual void BeginPlay();

public:
		
	/** Look Input Action */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input, meta = (AllowPrivateAccess = "true"))
	class UInputAction* LookAction;

protected:
	/** Called for movement input */
	void Move(const FInputActionValue& Value);

	/** Called for looking input */
	void Look(const FInputActionValue& Value);

protected:
	// APawn interface
	virtual void SetupPlayerInputComponent(UInputComponent* InputComponent) override;
	// End of APawn interface

public:
	/** Returns Mesh1P subobject **/
	USkeletalMeshComponent* GetMesh1P() const { return Mesh1P; }
	/** Returns FirstPersonCameraComponent subobject **/
	UCameraComponent* GetFirstPersonCameraComponent() const { return FirstPersonCameraComponent; }

};


```

`Source/FirstPerson/FirstPersonGameMode.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonGameMode.h"
#include "FirstPersonCharacter.h"
#include "UObject/ConstructorHelpers.h"

AFirstPersonGameMode::AFirstPersonGameMode()
	: Super()
{
	// set default pawn class to our Blueprinted character
	static ConstructorHelpers::FClassFinder<APawn> PlayerPawnClassFinder(TEXT("/Game/FirstPerson/Blueprints/BP_FirstPersonCharacter"));
	DefaultPawnClass = PlayerPawnClassFinder.Class;

}

```

`Source/FirstPerson/FirstPersonGameMode.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/GameModeBase.h"
#include "FirstPersonGameMode.generated.h"

UCLASS(minimalapi)
class AFirstPersonGameMode : public AGameModeBase
{
	GENERATED_BODY()

public:
	AFirstPersonGameMode();
};




```

`Source/FirstPerson/FirstPersonPlayerController.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.


#include "FirstPersonPlayerController.h"
#include "EnhancedInputSubsystems.h"
#include "Engine/LocalPlayer.h"

void AFirstPersonPlayerController::BeginPlay()
{
	Super::BeginPlay();

	// get the enhanced input subsystem
	if (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::GetSubsystem<UEnhancedInputLocalPlayerSubsystem>(GetLocalPlayer()))
	{
		// add the mapping context so we get controls
		Subsystem->AddMappingContext(InputMappingContext, 0);
	}
}
```

`Source/FirstPerson/FirstPersonPlayerController.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/PlayerController.h"
#include "FirstPersonPlayerController.generated.h"

class UInputMappingContext;

/**
 *
 */
UCLASS()
class FIRSTPERSON_API AFirstPersonPlayerController : public APlayerController
{
	GENERATED_BODY()
	
protected:

	/** Input Mapping Context to be used for player input */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = Input)
	UInputMappingContext* InputMappingContext;

	// Begin Actor interface
protected:

	virtual void BeginPlay() override;

	// End Actor interface
};

```

`Source/FirstPerson/FirstPersonProjectile.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "FirstPersonProjectile.h"
#include "GameFramework/ProjectileMovementComponent.h"
#include "Components/SphereComponent.h"

AFirstPersonProjectile::AFirstPersonProjectile() 
{
	// Use a sphere as a simple collision representation
	CollisionComp = CreateDefaultSubobject<USphereComponent>(TEXT("SphereComp"));
	CollisionComp->InitSphereRadius(5.0f);
	CollisionComp->BodyInstance.SetCollisionProfileName("Projectile");
	CollisionComp->OnComponentHit.AddDynamic(this, &AFirstPersonProjectile::OnHit);		// set up a notification for when this component hits something blocking

	// Players can't walk on it
	CollisionComp->SetWalkableSlopeOverride(FWalkableSlopeOverride(WalkableSlope_Unwalkable, 0.f));
	CollisionComp->CanCharacterStepUpOn = ECB_No;

	// Set as root component
	RootComponent = CollisionComp;

	// Use a ProjectileMovementComponent to govern this projectile's movement
	ProjectileMovement = CreateDefaultSubobject<UProjectileMovementComponent>(TEXT("ProjectileComp"));
	ProjectileMovement->UpdatedComponent = CollisionComp;
	ProjectileMovement->InitialSpeed = 3000.f;
	ProjectileMovement->MaxSpeed = 3000.f;
	ProjectileMovement->bRotationFollowsVelocity = true;
	ProjectileMovement->bShouldBounce = true;

	// Die after 3 seconds by default
	InitialLifeSpan = 3.0f;
}

void AFirstPersonProjectile::OnHit(UPrimitiveComponent* HitComp, AActor* OtherActor, UPrimitiveComponent* OtherComp, FVector NormalImpulse, const FHitResult& Hit)
{
	// Only add impulse and destroy projectile if we hit a physics
	if ((OtherActor != nullptr) && (OtherActor != this) && (OtherComp != nullptr) && OtherComp->IsSimulatingPhysics())
	{
		OtherComp->AddImpulseAtLocation(GetVelocity() * 100.0f, GetActorLocation());

		Destroy();
	}
}
```

`Source/FirstPerson/FirstPersonProjectile.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "FirstPersonProjectile.generated.h"

class USphereComponent;
class UProjectileMovementComponent;

UCLASS(config=Game)
class AFirstPersonProjectile : public AActor
{
	GENERATED_BODY()

	/** Sphere collision component */
	UPROPERTY(VisibleDefaultsOnly, Category=Projectile)
	USphereComponent* CollisionComp;

	/** Projectile movement component */
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = Movement, meta = (AllowPrivateAccess = "true"))
	UProjectileMovementComponent* ProjectileMovement;

public:
	AFirstPersonProjectile();

	/** called when projectile hits something */
	UFUNCTION()
	void OnHit(UPrimitiveComponent* HitComp, AActor* OtherActor, UPrimitiveComponent* OtherComp, FVector NormalImpulse, const FHitResult& Hit);

	/** Returns CollisionComp subobject **/
	USphereComponent* GetCollisionComp() const { return CollisionComp; }
	/** Returns ProjectileMovement subobject **/
	UProjectileMovementComponent* GetProjectileMovement() const { return ProjectileMovement; }
};


```

`Source/FirstPerson/GameFeatures/GameFeatureAction_AddAbilities.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "GameFeatureAction_AddAbilities.h"
#include "FirstPerson/FirstPerson.h"
#include "Components/GameFrameworkComponentManager.h"
#include "GameFeaturesSubsystemSettings.h"
#include "Engine/AssetManager.h"
#include "FirstPerson/AbilitySystem/FirstPersonAbilitySystemComponent.h"
#include "FirstPerson/AbilitySystem/FirstPersonAbilityAttributeSet.h"
#include "FirstPerson/AbilitySystem/AbilityInputBindingComponent.h"

#define LOCTEXT_NAMESPACE "FirstPersonFeatures"

//////////////////////////////////////////////////////////////////////
// UGameFeatureAction_AddAbilities

void UGameFeatureAction_AddAbilities::OnGameFeatureActivating()
{
	if (!ensureAlways(ActiveExtensions.IsEmpty()) ||
		!ensureAlways(ComponentRequests.IsEmpty()))
	{
		Reset();
	}
	Super::OnGameFeatureActivating();
}

void UGameFeatureAction_AddAbilities::OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context)
{
	Super::OnGameFeatureDeactivating(Context);
	Reset();
}

#if WITH_EDITORONLY_DATA
void UGameFeatureAction_AddAbilities::AddAdditionalAssetBundleData(FAssetBundleData& AssetBundleData)
{
	if (UAssetManager::IsValid())
	{
		auto AddBundleAsset = [&AssetBundleData](const FSoftObjectPath& SoftObjectPath)
		{
			AssetBundleData.AddBundleAsset(UGameFeaturesSubsystemSettings::LoadStateClient, SoftObjectPath);
			AssetBundleData.AddBundleAsset(UGameFeaturesSubsystemSettings::LoadStateServer, SoftObjectPath);
		};

		for (const FGameFeatureAbilitiesEntry& Entry : AbilitiesList)
		{
			for (const FFirstPersonAbilityMapping& Ability : Entry.GrantedAbilities)
			{
				AddBundleAsset(Ability.AbilityType.ToSoftObjectPath());
				if (!Ability.InputAction.IsNull())
				{
					AddBundleAsset(Ability.InputAction.ToSoftObjectPath());
				}
			}

			for (const FFirstPersonAttributesMapping& Attributes : Entry.GrantedAttributes)
			{
				AddBundleAsset(Attributes.AttributeSetType.ToSoftObjectPath());
				if (!Attributes.InitializationData.IsNull())
				{
					AddBundleAsset(Attributes.InitializationData.ToSoftObjectPath());
				}
			}
		}
	}
}
#endif

#if WITH_EDITOR
EDataValidationResult UGameFeatureAction_AddAbilities::IsDataValid(TArray<FText>& ValidationErrors)
{
	EDataValidationResult Result = CombineDataValidationResults(Super::IsDataValid(ValidationErrors), EDataValidationResult::Valid);

	int32 EntryIndex = 0;
	for (const FGameFeatureAbilitiesEntry& Entry : AbilitiesList)
	{
		if (Entry.ActorClass.IsNull())
		{
			Result = EDataValidationResult::Invalid;
			ValidationErrors.Add(FText::Format(LOCTEXT("EntryHasNullActor", "Null ActorClass at index {0} in AbilitiesList"), FText::AsNumber(EntryIndex)));
		}

		if (Entry.GrantedAbilities.IsEmpty() && Entry.GrantedAttributes.IsEmpty())
		{
			Result = EDataValidationResult::Invalid;
			ValidationErrors.Add(FText::Format(LOCTEXT("EntryHasNoAddOns", "Empty GrantedAbilities and GrantedAttributes at index {0} in AbilitiesList"), FText::AsNumber(EntryIndex)));
		}

		int32 AbilityIndex = 0;
		for (const FFirstPersonAbilityMapping& Ability : Entry.GrantedAbilities)
		{
			if (Ability.AbilityType.IsNull())
			{
				Result = EDataValidationResult::Invalid;
				ValidationErrors.Add(FText::Format(LOCTEXT("EntryHasNullAbility", "Null AbilityType at index {0} in AbilitiesList[{1}].GrantedAbilities"), FText::AsNumber(AbilityIndex), FText::AsNumber(EntryIndex)));
			}
			++AbilityIndex;
		}

		int32 AttributesIndex = 0;
		for (const FFirstPersonAttributesMapping& Attributes : Entry.GrantedAttributes)
		{
			if (Attributes.AttributeSetType.IsNull())
			{
				Result = EDataValidationResult::Invalid;
				ValidationErrors.Add(FText::Format(LOCTEXT("EntryHasNullAttributeSet", "Null AttributeSetType at index {0} in AbilitiesList[{1}].GrantedAttributes"), FText::AsNumber(AttributesIndex), FText::AsNumber(EntryIndex)));
			}
			++AttributesIndex;
		}

		++EntryIndex;
	}

	return Result;

	return EDataValidationResult::NotValidated;
}
#endif

void UGameFeatureAction_AddAbilities::AddToWorld(const FWorldContext& WorldContext)
{
	UWorld* World = WorldContext.World();
	UGameInstance* GameInstance = WorldContext.OwningGameInstance;

	if ((GameInstance != nullptr) && (World != nullptr) && World->IsGameWorld())
	{
		if (UGameFrameworkComponentManager* ComponentMan = UGameInstance::GetSubsystem<UGameFrameworkComponentManager>(GameInstance))
		{			
			int32 EntryIndex = 0;
			for (const FGameFeatureAbilitiesEntry& Entry : AbilitiesList)
			{
				if (!Entry.ActorClass.IsNull())
				{
					UGameFrameworkComponentManager::FExtensionHandlerDelegate AddAbilitiesDelegate = UGameFrameworkComponentManager::FExtensionHandlerDelegate::CreateUObject(
						this, &UGameFeatureAction_AddAbilities::HandleActorExtension, EntryIndex);
					TSharedPtr<FComponentRequestHandle> ExtensionRequestHandle = ComponentMan->AddExtensionHandler(Entry.ActorClass, AddAbilitiesDelegate);

					ComponentRequests.Add(ExtensionRequestHandle);
					EntryIndex++;
				}
			}
		}
	}
}

void UGameFeatureAction_AddAbilities::Reset()
{
	while (!ActiveExtensions.IsEmpty())
	{
		auto ExtensionIt = ActiveExtensions.CreateIterator();
		RemoveActorAbilities(ExtensionIt->Key);
	}

	ComponentRequests.Empty();
}

void UGameFeatureAction_AddAbilities::HandleActorExtension(AActor* Actor, FName EventName, int32 EntryIndex)
{
	if (AbilitiesList.IsValidIndex(EntryIndex))
	{
		const FGameFeatureAbilitiesEntry& Entry = AbilitiesList[EntryIndex];
		if (EventName == UGameFrameworkComponentManager::NAME_ExtensionRemoved || EventName == UGameFrameworkComponentManager::NAME_ReceiverRemoved)
		{
			RemoveActorAbilities(Actor);
		}
		else if (EventName == UGameFrameworkComponentManager::NAME_ExtensionAdded || EventName == UGameFrameworkComponentManager::NAME_GameActorReady)
		{
			AddActorAbilities(Actor, Entry);
		}
	}
}

void UGameFeatureAction_AddAbilities::AddActorAbilities(AActor* Actor, const FGameFeatureAbilitiesEntry& AbilitiesEntry)
{
	UE_LOG(LogFirstPerson, Error, TEXT("Added ability"), *Actor->GetPathName());
	if (UAbilitySystemComponent* AbilitySystemComponent = FindOrAddComponentForActor<UAbilitySystemComponent>(Actor, AbilitiesEntry))
	{
		FActorExtensions AddedExtensions;
		AddedExtensions.Abilities.Reserve(AbilitiesEntry.GrantedAbilities.Num());
		AddedExtensions.Attributes.Reserve(AbilitiesEntry.GrantedAttributes.Num());

		for (const FFirstPersonAbilityMapping& Ability : AbilitiesEntry.GrantedAbilities)
		{
			if (!Ability.AbilityType.IsNull())
			{
				FGameplayAbilitySpec NewAbilitySpec(Ability.AbilityType.LoadSynchronous());
				FGameplayAbilitySpecHandle AbilityHandle = AbilitySystemComponent->GiveAbility(NewAbilitySpec);

				if (!Ability.InputAction.IsNull())
				{
					UAbilityInputBindingComponent* InputComponent = FindOrAddComponentForActor<UAbilityInputBindingComponent>(Actor, AbilitiesEntry);
					if (InputComponent)
					{
						InputComponent->SetInputBinding(Ability.InputAction.LoadSynchronous(), AbilityHandle);
					}
					else
					{
						 UE_LOG(LogFirstPerson, Error, TEXT("Failed to find/add an ability input binding component to '%s' -- are you sure it's a pawn class?"), *Actor->GetPathName());
					}
				}

				AddedExtensions.Abilities.Add(AbilityHandle);
			}
		}

		for (const FFirstPersonAttributesMapping& Attributes : AbilitiesEntry.GrantedAttributes)
		{
			if (!Attributes.AttributeSetType.IsNull())
			{
				TSubclassOf<UFirstPersonAbilityAttributeSet> SetType = Attributes.AttributeSetType.LoadSynchronous();
				if (SetType)
				{
					UAttributeSet* NewSet = NewObject<UAttributeSet>(AbilitySystemComponent, SetType);
					if (!Attributes.InitializationData.IsNull())
					{
						UDataTable* InitData = Attributes.InitializationData.LoadSynchronous();
						if (InitData)
						{
							NewSet->InitFromMetaDataTable(InitData);
						}
					}

					AddedExtensions.Attributes.Add(NewSet);
					AbilitySystemComponent->AddAttributeSetSubobject(NewSet);
				}
			}
		}

		ActiveExtensions.Add(Actor, AddedExtensions);
	}
	else
	{
		UE_LOG(LogFirstPerson, Error, TEXT("Failed to find/add an ability component to '%s'. Abilities will not be granted."), *Actor->GetPathName());
	}
}

void UGameFeatureAction_AddAbilities::RemoveActorAbilities(AActor* Actor)
{
	if (FActorExtensions* ActorExtensions = ActiveExtensions.Find(Actor))
	{
		if (UAbilitySystemComponent* AbilitySystemComponent = Actor->FindComponentByClass<UAbilitySystemComponent>())
		{
			for (UAttributeSet* AttribSetInstance : ActorExtensions->Attributes)
			{
				AbilitySystemComponent->GetSpawnedAttributes_Mutable().Remove(AttribSetInstance);
			}

			UAbilityInputBindingComponent* InputComponent = Actor->FindComponentByClass<UAbilityInputBindingComponent>();
			for (FGameplayAbilitySpecHandle AbilityHandle : ActorExtensions->Abilities)
			{
				if (InputComponent)
				{
					InputComponent->ClearInputBinding(AbilityHandle);
				}
				AbilitySystemComponent->SetRemoveAbilityOnEnd(AbilityHandle);
			}
		}

		ActiveExtensions.Remove(Actor);
	}
}

UActorComponent* UGameFeatureAction_AddAbilities::FindOrAddComponentForActor(UClass* ComponentType, AActor* Actor, const FGameFeatureAbilitiesEntry& AbilitiesEntry)
{
	UActorComponent* Component = Actor->FindComponentByClass(ComponentType);
	
	bool bMakeComponentRequest = (Component == nullptr);
	if (Component)
	{
		// Check to see if this component was created from a different `UGameFrameworkComponentManager` request.
		// `Native` is what `CreationMethod` defaults to for dynamically added components.
		if (Component->CreationMethod == EComponentCreationMethod::Native)
		{
			// Attempt to tell the difference between a true native component and one created by the GameFrameworkComponent system.
			// If it is from the UGameFrameworkComponentManager, then we need to make another request (requests are ref counted).
			UObject* ComponentArchetype = Component->GetArchetype();
			bMakeComponentRequest = ComponentArchetype->HasAnyFlags(RF_ClassDefaultObject);
		}
	}

	if (bMakeComponentRequest)
	{
		UWorld* World = Actor->GetWorld();
		UGameInstance* GameInstance = World->GetGameInstance();

		if (UGameFrameworkComponentManager* ComponentMan = UGameInstance::GetSubsystem<UGameFrameworkComponentManager>(GameInstance))
		{
			TSharedPtr<FComponentRequestHandle> RequestHandle = ComponentMan->AddComponentRequest(AbilitiesEntry.ActorClass, ComponentType);
			ComponentRequests.Add(RequestHandle);
		}

		if (!Component)
		{
			Component = Actor->FindComponentByClass(ComponentType);
			ensureAlways(Component);
		}
	}

	return Component;
}

#undef LOCTEXT_NAMESPACE

```

`Source/FirstPerson/GameFeatures/GameFeatureAction_AddAbilities.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFeatureAction_WorldActionBase.h"
#include "Abilities/GameplayAbility.h"
#include "GameFeatureAction_AddAbilities.generated.h"

struct FWorldContext;
class UInputAction;
class UFirstPersonAbilityAttributeSet;
class UDataTable;
struct FComponentRequestHandle;

USTRUCT(BlueprintType)
struct FFirstPersonAbilityMapping
{
	GENERATED_BODY()

	// Type of ability to grant
	UPROPERTY(EditAnywhere, BlueprintReadOnly)
	TSoftClassPtr<UGameplayAbility> AbilityType;

	// Input action to bind the ability to, if any (can be left unset)
	UPROPERTY(EditAnywhere, BlueprintReadOnly)
	TSoftObjectPtr<UInputAction> InputAction;
};

USTRUCT(BlueprintType)
struct FFirstPersonAttributesMapping
{
	GENERATED_BODY()

	// Ability set to grant
	UPROPERTY(EditAnywhere, BlueprintReadOnly)
	TSoftClassPtr<UFirstPersonAbilityAttributeSet> AttributeSetType;

	// Data table referent to initialize the attributes with, if any (can be left unset)
	UPROPERTY(EditAnywhere, BlueprintReadOnly)
	TSoftObjectPtr<UDataTable> InitializationData;
};

USTRUCT()
struct FGameFeatureAbilitiesEntry
{
	GENERATED_BODY()

	// The base actor class to add to
	UPROPERTY(EditAnywhere, Category="Abilities")
	TSoftClassPtr<AActor> ActorClass;

	// List of abilities to grant to actors of the specified class
	UPROPERTY(EditAnywhere, Category="Abilities")
	TArray<FFirstPersonAbilityMapping> GrantedAbilities;

	// List of attribute sets to grant to actors of the specified class 
	UPROPERTY(EditAnywhere, Category="Attributes")
	TArray<FFirstPersonAttributesMapping> GrantedAttributes;
};

//////////////////////////////////////////////////////////////////////
// UGameFeatureAction_AddAbilities

/**
 * GameFeatureAction responsible for granting abilities (and attributes) to actors of a specified type.
 */
UCLASS(MinimalAPI, meta = (DisplayName = "Add Abilities"))
class UGameFeatureAction_AddAbilities final : public UGameFeatureAction_WorldActionBase
{
	GENERATED_BODY()

public:
	//~ Begin UGameFeatureAction interface
	virtual void OnGameFeatureActivating() override;
	virtual void OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context) override;
#if WITH_EDITORONLY_DATA
	virtual void AddAdditionalAssetBundleData(FAssetBundleData& AssetBundleData) override;
#endif
	//~ End UGameFeatureAction interface

	//~ Begin UObject interface
#if WITH_EDITOR
	virtual EDataValidationResult IsDataValid(TArray<FText>& ValidationErrors) override;
#endif
	//~ End UObject interface

	/**  */
	UPROPERTY(EditAnywhere, Category="Abilities", meta=(TitleProperty="ActorClass", ShowOnlyInnerProperties))
	TArray<FGameFeatureAbilitiesEntry> AbilitiesList;

private:
	//~ Begin UGameFeatureAction_WorldActionBase interface
	virtual void AddToWorld(const FWorldContext& WorldContext) override;
	//~ End UGameFeatureAction_WorldActionBase interface

	void Reset();
	void HandleActorExtension(AActor* Actor, FName EventName, int32 EntryIndex);
	void AddActorAbilities(AActor* Actor, const FGameFeatureAbilitiesEntry& AbilitiesEntry);
	void RemoveActorAbilities(AActor* Actor);

	template<class ComponentType>
	ComponentType* FindOrAddComponentForActor(AActor* Actor, const FGameFeatureAbilitiesEntry& AbilitiesEntry)
	{
		return Cast<ComponentType>(FindOrAddComponentForActor(ComponentType::StaticClass(), Actor, AbilitiesEntry));
	}
	UActorComponent* FindOrAddComponentForActor(UClass* ComponentType, AActor* Actor, const FGameFeatureAbilitiesEntry& AbilitiesEntry);

private:
	struct FActorExtensions
	{
		TArray<FGameplayAbilitySpecHandle> Abilities;
		TArray<UAttributeSet*> Attributes;
	};
	TMap<AActor*, FActorExtensions> ActiveExtensions;

	TArray<TSharedPtr<FComponentRequestHandle>> ComponentRequests;
};

```

`Source/FirstPerson/GameFeatures/GameFeatureAction_AddInputContextMapping.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "GameFeatureAction_AddInputContextMapping.h"
#include "FirstPerson/FirstPerson.h"
#include "Engine/AssetManager.h"
#include "GameFeaturesSubsystemSettings.h"
#include "Components/GameFrameworkComponentManager.h"
#include "GameFramework/PlayerController.h"
#include "EnhancedInputSubsystems.h"
#include "InputMappingContext.h"

#define LOCTEXT_NAMESPACE "FirstPersonFeatures"

//////////////////////////////////////////////////////////////////////
// UGameFeatureAction_AddInputContextMapping

void UGameFeatureAction_AddInputContextMapping::OnGameFeatureActivating()
{
	if (!ensure(ExtensionRequestHandles.IsEmpty()) ||
		!ensure(ControllersAddedTo.IsEmpty()))
	{
		Reset();
	}
	Super::OnGameFeatureActivating();
}

void UGameFeatureAction_AddInputContextMapping::OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context)
{
	Super::OnGameFeatureDeactivating(Context);
	Reset();
}

#if WITH_EDITORONLY_DATA
void UGameFeatureAction_AddInputContextMapping::AddAdditionalAssetBundleData(FAssetBundleData& AssetBundleData)
{
	if (UAssetManager::IsValid())
	{
		AssetBundleData.AddBundleAsset(UGameFeaturesSubsystemSettings::LoadStateClient, InputMapping.ToSoftObjectPath());
		AssetBundleData.AddBundleAsset(UGameFeaturesSubsystemSettings::LoadStateServer, InputMapping.ToSoftObjectPath());
	}
}
#endif

#if WITH_EDITOR
EDataValidationResult UGameFeatureAction_AddInputContextMapping::IsDataValid(TArray<FText>& ValidationErrors)
{
	EDataValidationResult Result = CombineDataValidationResults(Super::IsDataValid(ValidationErrors), EDataValidationResult::Valid);

	if (InputMapping.IsNull())
	{
		Result = EDataValidationResult::Invalid;
		ValidationErrors.Add(LOCTEXT("NullInputMapping", "Null InputMapping."));
	}

	return Result;
}
#endif

void UGameFeatureAction_AddInputContextMapping::AddToWorld(const FWorldContext& WorldContext)
{
	UWorld* World = WorldContext.World();
	UGameInstance* GameInstance = WorldContext.OwningGameInstance;

	if ((GameInstance != nullptr) && (World != nullptr) && World->IsGameWorld())
	{
		if (UGameFrameworkComponentManager* ComponentMan = UGameInstance::GetSubsystem<UGameFrameworkComponentManager>(GameInstance))
		{
			if (!InputMapping.IsNull())
			{
				UGameFrameworkComponentManager::FExtensionHandlerDelegate AddAbilitiesDelegate = UGameFrameworkComponentManager::FExtensionHandlerDelegate::CreateUObject(
					this, &UGameFeatureAction_AddInputContextMapping::HandleControllerExtension);
				TSharedPtr<FComponentRequestHandle> ExtensionRequestHandle = ComponentMan->AddExtensionHandler(APlayerController::StaticClass(), AddAbilitiesDelegate);

				ExtensionRequestHandles.Add(ExtensionRequestHandle);
			}
		}
	}
}

void UGameFeatureAction_AddInputContextMapping::Reset()
{
	ExtensionRequestHandles.Empty();

	while (!ControllersAddedTo.IsEmpty())
	{
		TWeakObjectPtr<APlayerController> ControllerPtr = ControllersAddedTo.Top();
		if (ControllerPtr.IsValid())
		{
			RemoveInputMapping(ControllerPtr.Get());
		}
		else
		{
			ControllersAddedTo.Pop();
		}
	}
}

void UGameFeatureAction_AddInputContextMapping::HandleControllerExtension(AActor* Actor, FName EventName)
{
	APlayerController* AsController = CastChecked<APlayerController>(Actor);

	if (EventName == UGameFrameworkComponentManager::NAME_ExtensionRemoved || EventName == UGameFrameworkComponentManager::NAME_ReceiverRemoved)
	{
		RemoveInputMapping(AsController);
	}
	else if (EventName == UGameFrameworkComponentManager::NAME_ExtensionAdded || EventName == UGameFrameworkComponentManager::NAME_GameActorReady)
	{
		AddInputMappingForPlayer(AsController->GetLocalPlayer());
	}
}

void UGameFeatureAction_AddInputContextMapping::AddInputMappingForPlayer(UPlayer* Player)
{
	if (ULocalPlayer* LocalPlayer = Cast<ULocalPlayer>(Player))
	{
		if (UEnhancedInputLocalPlayerSubsystem* InputSystem = LocalPlayer->GetSubsystem<UEnhancedInputLocalPlayerSubsystem>())
		{
			if (!InputMapping.IsNull())
			{
				InputSystem->AddMappingContext(InputMapping.LoadSynchronous(), Priority);
			}
		}
		else
		{
			UE_LOG(LogFirstPerson, Error, TEXT("Failed to find `UEnhancedInputLocalPlayerSubsystem` for local player. Input mappings will not be added. Make sure you're set to use the EnhancedInput system via config file."));
		}
	}
}

void UGameFeatureAction_AddInputContextMapping::RemoveInputMapping(APlayerController* PlayerController)
{
	if (ULocalPlayer* LocalPlayer = PlayerController->GetLocalPlayer())
	{
		if (UEnhancedInputLocalPlayerSubsystem* InputSystem = LocalPlayer->GetSubsystem<UEnhancedInputLocalPlayerSubsystem>())
		{
			InputSystem->RemoveMappingContext(InputMapping.Get());
		}
	}

	ControllersAddedTo.Remove(PlayerController);
}

#undef LOCTEXT_NAMESPACE
```

`Source/FirstPerson/GameFeatures/GameFeatureAction_AddInputContextMapping.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFeatureAction_WorldActionBase.h"
#include "GameFeatureAction_AddInputContextMapping.generated.h"

class AActor;
class UInputMappingContext;
class UPlayer;
class APlayerController;
struct FComponentRequestHandle;

/**
 * Adds InputMappingContext to local players' EnhancedInput system. 
 * Expects that local players are set up to use the EnhancedInput system.
 */
UCLASS(MinimalAPI, meta = (DisplayName = "Add Input Mapping"))
class UGameFeatureAction_AddInputContextMapping final : public UGameFeatureAction_WorldActionBase
{
	GENERATED_BODY()

public:
	//~ Begin UGameFeatureAction interface
	virtual void OnGameFeatureActivating() override;
	virtual void OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context) override;
#if WITH_EDITORONLY_DATA
	virtual void AddAdditionalAssetBundleData(FAssetBundleData& AssetBundleData) override;
#endif
	//~ End UGameFeatureAction interface

	//~ Begin UObject interface
#if WITH_EDITOR
	virtual EDataValidationResult IsDataValid(TArray<FText>& ValidationErrors) override;
#endif
	//~ End UObject interface

	UPROPERTY(EditAnywhere, Category="Input")
	TSoftObjectPtr<UInputMappingContext> InputMapping;

	// Higher priority input mappings will be prioritized over mappings with a lower priority.
	UPROPERTY(EditAnywhere, Category="Input")
	int32 Priority = 0;

private:
	//~ Begin UGameFeatureAction_WorldActionBase interface
	virtual void AddToWorld(const FWorldContext& WorldContext) override;
	//~ End UGameFeatureAction_WorldActionBase interface

	void Reset();
	void HandleControllerExtension(AActor* Actor, FName EventName);
	void AddInputMappingForPlayer(UPlayer* Player);
	void RemoveInputMapping(APlayerController* PlayerController);

	TArray<TSharedPtr<FComponentRequestHandle>> ExtensionRequestHandles;
	TArray<TWeakObjectPtr<APlayerController>> ControllersAddedTo;
};

```

`Source/FirstPerson/GameFeatures/GameFeatureAction_WorldActionBase.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "GameFeatureAction_WorldActionBase.h"
#include "GameFeaturesSubsystemSettings.h"
#include "Engine/World.h" // for FWorldDelegates::OnStartGameInstance
#include "Engine/Engine.h" // for FWorldContext

void UGameFeatureAction_WorldActionBase::OnGameFeatureActivating()
{
	GameInstanceStartHandle = FWorldDelegates::OnStartGameInstance.AddUObject(this, &UGameFeatureAction_WorldActionBase::HandleGameInstanceStart);

	// Add to any worlds with associated game instances that have already been initialized
	for (const FWorldContext& WorldContext : GEngine->GetWorldContexts())
	{
		AddToWorld(WorldContext);
	}
}

void UGameFeatureAction_WorldActionBase::OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context)
{
	FWorldDelegates::OnStartGameInstance.Remove(GameInstanceStartHandle);
}

void UGameFeatureAction_WorldActionBase::HandleGameInstanceStart(UGameInstance* GameInstance)
{
	if (FWorldContext* WorldContext = GameInstance->GetWorldContext())
	{
		AddToWorld(*WorldContext);
	}
}

```

`Source/FirstPerson/GameFeatures/GameFeatureAction_WorldActionBase.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "GameFeatureAction.h"
#include "GameFeatureAction_WorldActionBase.generated.h"

class UGameInstance;
struct FWorldContext;

/**
 * Base class for GameFeatureActions that wish to do something world specific.
 */
UCLASS(Abstract)
class UGameFeatureAction_WorldActionBase : public UGameFeatureAction
{
	GENERATED_BODY()

public:
	//~ Begin UGameFeatureAction interface
	virtual void OnGameFeatureActivating() override;
	virtual void OnGameFeatureDeactivating(FGameFeatureDeactivatingContext& Context) override;
	//~ End UGameFeatureAction interface

private:
	void HandleGameInstanceStart(UGameInstance* GameInstance);
	virtual void AddToWorld(const FWorldContext& WorldContext) PURE_VIRTUAL(UGameFeatureAction_WorldActionBase::AddToWorld,);

private:
	FDelegateHandle GameInstanceStartHandle;
};

```

`Source/FirstPerson/Input/PlayerControlsComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "PlayerControlsComponent.h"
#include "GameFramework/Pawn.h"
#include "GameFramework/PlayerController.h"
#include "EnhancedInputComponent.h"
#include "Engine/InputDelegateBinding.h"
#include "Engine/LocalPlayer.h"
#include "EnhancedInputSubsystems.h"

void UPlayerControlsComponent::OnRegister()
{
	Super::OnRegister();

	UWorld* World = GetWorld();
	APawn* MyOwner = GetPawn<APawn>();

	if (ensure(MyOwner) && World->IsGameWorld())
	{
		MyOwner->ReceiveRestartedDelegate.AddDynamic(this, &UPlayerControlsComponent::OnPawnRestarted);
		MyOwner->ReceiveControllerChangedDelegate.AddDynamic(this, &UPlayerControlsComponent::OnControllerChanged);

		// If our pawn has an input component we were added after restart
		if (MyOwner->InputComponent)
		{
			OnPawnRestarted(MyOwner);
		}
	}
}

void UPlayerControlsComponent::OnUnregister()
{
	UWorld* World = GetWorld();
	if (World && World->IsGameWorld())
	{
		ReleaseInputComponent();

		APawn* MyOwner = GetPawn<APawn>();
		if (MyOwner)
		{
			MyOwner->ReceiveRestartedDelegate.RemoveAll(this);
			MyOwner->ReceiveControllerChangedDelegate.RemoveAll(this);
		}
	}

	Super::OnUnregister();
}

void UPlayerControlsComponent::OnPawnRestarted(APawn* Pawn)
{
	if (ensure(Pawn && Pawn == GetOwner()) && Pawn->InputComponent)
	{
		ReleaseInputComponent();

		if (Pawn->InputComponent)
		{
			SetupInputComponent(Pawn);
		}
	}
}

void UPlayerControlsComponent::OnControllerChanged(APawn* Pawn, AController* OldController, AController* NewController)
{
	// Only handle releasing, restart is a better time to handle binding
	if (ensure(Pawn && Pawn == GetOwner()) && OldController)
	{
		ReleaseInputComponent(OldController);
	}
}

void UPlayerControlsComponent::SetupInputComponent(APawn* Pawn)
{
	InputComponent = CastChecked<UEnhancedInputComponent>(Pawn->InputComponent);

	if (ensureMsgf(InputComponent, TEXT("Project must use EnhancedInputComponent to support PlayerControlsComponent")))
	{
		UEnhancedInputLocalPlayerSubsystem* Subsystem = GetEnhancedInputSubsystem();
		check(Subsystem);

		if (InputMappingContext)
		{
			Subsystem->AddMappingContext(InputMappingContext, InputPriority);
		}

		SetupPlayerControls(InputComponent);
	}
}

void UPlayerControlsComponent::ReleaseInputComponent(AController* OldController)
{
	UEnhancedInputLocalPlayerSubsystem* Subsystem = GetEnhancedInputSubsystem(OldController);
	if (Subsystem && InputComponent)
	{
		TeardownPlayerControls(InputComponent);

		if (InputMappingContext)
		{
			Subsystem->RemoveMappingContext(InputMappingContext);
		}
	}
	InputComponent = nullptr;
}

void UPlayerControlsComponent::SetupPlayerControls_Implementation(UEnhancedInputComponent* PlayerInputComponent)
{

}

void UPlayerControlsComponent::TeardownPlayerControls_Implementation(UEnhancedInputComponent* PlayerInputComponent)
{

}

UEnhancedInputLocalPlayerSubsystem* UPlayerControlsComponent::GetEnhancedInputSubsystem(AController* OldController) const
{
	const APlayerController* PC = GetController<APlayerController>();
	if (!PC)
	{
		PC = Cast<APlayerController>(OldController);
		if (!PC)
		{
			return nullptr;
		}
	}

	const ULocalPlayer* LP = PC->GetLocalPlayer();
	if (!LP)
	{
		return nullptr;
	}

	return LP->GetSubsystem<UEnhancedInputLocalPlayerSubsystem>();
}
```

`Source/FirstPerson/Input/PlayerControlsComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "EnhancedInputComponent.h"
#include "InputTriggers.h"
#include "Components/PawnComponent.h"
#include "PlayerControlsComponent.generated.h"

class UEnhancedInputLocalPlayerSubsystem;
class UEnhancedInputComponent;
class UInputMappingContext;
class UInputAction;

/** Modular pawn component for adding input actions and an optional input mapping to a pawn */
UCLASS(Blueprintable, BlueprintType, Category = "Input", meta = (BlueprintSpawnableComponent))
class FIRSTPERSON_API UPlayerControlsComponent : public UPawnComponent
{
	GENERATED_BODY()

public:

	//~ Begin UActorComponent interface
	virtual void OnRegister() override;
	virtual void OnUnregister() override;
	//~ End UActorComponent interface

	/** Input mapping to add to the input system */
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Player Controls")
	UInputMappingContext* InputMappingContext = nullptr;

	/** Priority to bind mapping context with */
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Player Controls")
	int InputPriority = 0;

protected:
	
	/** Native/BP Event to set up player controls */
	UFUNCTION(BlueprintNativeEvent, Category = "Player Controls")
	void SetupPlayerControls(UEnhancedInputComponent* PlayerInputComponent);

	/** Native/BP Event to undo control setup */
	UFUNCTION(BlueprintNativeEvent, Category = "Player Controls")
	void TeardownPlayerControls(UEnhancedInputComponent* PlayerInputComponent);

	/** Wrapper function for binding to this input component */
	template<class UserClass, typename FuncType>
	bool BindInputAction(const UInputAction* Action, const ETriggerEvent EventType, UserClass* Object, FuncType Func)
	{
		if (ensure(InputComponent != nullptr) && ensure(Action != nullptr))
		{
			InputComponent->BindAction(Action, EventType, Object, Func);
			return true;
		}

		return false;
	}
	
	/** Called when pawn restarts, bound to dynamic delegate */
	UFUNCTION()
	virtual void OnPawnRestarted(APawn* Pawn);

	/** Called when pawn restarts, bound to dynamic delegate */
	UFUNCTION()
	virtual void OnControllerChanged(APawn* Pawn, AController* OldController, AController* NewController);

	virtual void SetupInputComponent(APawn* Pawn);
	virtual void ReleaseInputComponent(AController* OldController = nullptr);
	UEnhancedInputLocalPlayerSubsystem* GetEnhancedInputSubsystem(AController* OldController = nullptr) const;

	/** The bound input component. */
	UPROPERTY(transient)
	UEnhancedInputComponent* InputComponent;
};

```

`Source/FirstPerson/Private/FirstPersonAssetManager.cpp`:

```cpp
// Fill out your copyright notice in the Description page of Project Settings.

#include "FirstPersonAssetManager.h"
#include "AbilitySystemGlobals.h"

void UFirstPersonAssetManager::StartInitialLoading()
{
	Super::StartInitialLoading();

	UAbilitySystemGlobals::Get().InitGlobalData();
}

```

`Source/FirstPerson/Public/FirstPersonAssetManager.h`:

```h
// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "Engine/AssetManager.h"

#include "FirstPersonAssetManager.generated.h"

UCLASS()
class FIRSTPERSON_API UFirstPersonAssetManager : public UAssetManager
{
	GENERATED_BODY()

public:
	virtual void StartInitialLoading() override;
};

```

`Source/FirstPerson/TP_PickUpComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "TP_PickUpComponent.h"

UTP_PickUpComponent::UTP_PickUpComponent()
{
	// Setup the Sphere Collision
	SphereRadius = 32.f;
}

void UTP_PickUpComponent::BeginPlay()
{
	Super::BeginPlay();

	// Register our Overlap Event
	OnComponentBeginOverlap.AddDynamic(this, &UTP_PickUpComponent::OnSphereBeginOverlap);
}

void UTP_PickUpComponent::OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult)
{
	// Checking if it is a First Person Character overlapping
	AFirstPersonCharacter* Character = Cast<AFirstPersonCharacter>(OtherActor);
	if(Character != nullptr)
	{
		// Notify that the actor is being picked up
		OnPickUp.Broadcast(Character);

		// Unregister from the Overlap Event so it is no longer triggered
		OnComponentBeginOverlap.RemoveAll(this);
	}
}

```

`Source/FirstPerson/TP_PickUpComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "Components/SphereComponent.h"
#include "FirstPersonCharacter.h"
#include "TP_PickUpComponent.generated.h"

// Declaration of the delegate that will be called when someone picks this up
// The character picking this up is the parameter sent with the notification
DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FOnPickUp, AFirstPersonCharacter*, PickUpCharacter);

UCLASS(Blueprintable, BlueprintType, ClassGroup = (Custom), meta = (BlueprintSpawnableComponent))
class FIRSTPERSON_API UTP_PickUpComponent : public USphereComponent
{
	GENERATED_BODY()

public:
	
	/** Delegate to whom anyone can subscribe to receive this event */
	UPROPERTY(BlueprintAssignable, Category = "Interaction")
	FOnPickUp OnPickUp;

	UTP_PickUpComponent();
protected:

	/** Called when the game starts */
	virtual void BeginPlay() override;

	/** Code for when something overlaps this component */
	UFUNCTION()
	void OnSphereBeginOverlap(UPrimitiveComponent* OverlappedComponent, AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult& SweepResult);
};
```

`Source/FirstPerson/TP_WeaponComponent.cpp`:

```cpp
// Copyright Epic Games, Inc. All Rights Reserved.

#include "TP_WeaponComponent.h"
#include "FirstPersonCharacter.h"
#include "FirstPersonProjectile.h"
#include "GameFramework/PlayerController.h"
#include "Camera/PlayerCameraManager.h"
#include "Kismet/GameplayStatics.h"
#include "EnhancedInputComponent.h"
#include "EnhancedInputSubsystems.h"
#include "Animation/AnimInstance.h"
#include "Engine/LocalPlayer.h"
#include "Engine/World.h"

// Sets default values for this component's properties
UTP_WeaponComponent::UTP_WeaponComponent()
{
	// Default offset from the character location for projectiles to spawn
	MuzzleOffset = FVector(100.0f, 0.0f, 10.0f);
}

void UTP_WeaponComponent::Fire()
{
	if (Character == nullptr || Character->GetController() == nullptr)
	{
		return;
	}

	// Try and fire a projectile
	if (ProjectileClass != nullptr)
	{
		UWorld* const World = GetWorld();
		if (World != nullptr)
		{
			APlayerController* PlayerController = Cast<APlayerController>(Character->GetController());
			const FRotator	   SpawnRotation = PlayerController->PlayerCameraManager->GetCameraRotation();
			// MuzzleOffset is in camera space, so transform it to world space before offsetting from the character location to find the final muzzle position
			const FVector SpawnLocation = GetOwner()->GetActorLocation() + SpawnRotation.RotateVector(MuzzleOffset);

			// Set Spawn Collision Handling Override
			FActorSpawnParameters ActorSpawnParams;
			ActorSpawnParams.SpawnCollisionHandlingOverride = ESpawnActorCollisionHandlingMethod::AdjustIfPossibleButDontSpawnIfColliding;

			// Spawn the projectile at the muzzle
			World->SpawnActor<AFirstPersonProjectile>(ProjectileClass, SpawnLocation, SpawnRotation, ActorSpawnParams);
		}
	}

	// Try and play the sound if specified
	if (FireSound != nullptr)
	{
		UGameplayStatics::PlaySoundAtLocation(this, FireSound, Character->GetActorLocation());
	}

	// Try and play a firing animation if specified
	if (FireAnimation != nullptr)
	{
		// Get the animation object for the arms mesh
		UAnimInstance* AnimInstance = Character->GetMesh1P()->GetAnimInstance();
		if (AnimInstance != nullptr)
		{
			AnimInstance->Montage_Play(FireAnimation, 1.f);
		}
	}
}

bool UTP_WeaponComponent::AttachWeapon(AFirstPersonCharacter* TargetCharacter)
{
	Character = TargetCharacter;

	// Check that the character is valid, and has no weapon component yet
	if (Character == nullptr || Character->GetInstanceComponents().FindItemByClass<UTP_WeaponComponent>())
	{
		return false;
	}

	// Attach the weapon to the First Person Character
	FAttachmentTransformRules AttachmentRules(EAttachmentRule::SnapToTarget, true);
	AttachToComponent(Character->GetMesh1P(), AttachmentRules, FName(TEXT("GripPoint")));

	// add the weapon as an instance component to the character
	Character->AddInstanceComponent(this);

	// Set up action bindings
	if (APlayerController* PlayerController = Cast<APlayerController>(Character->GetController()))
	{
		if (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::GetSubsystem<UEnhancedInputLocalPlayerSubsystem>(PlayerController->GetLocalPlayer()))
		{
			// Set the priority of the mapping to 1, so that it overrides the Jump action with the Fire action when using touch input
			Subsystem->AddMappingContext(FireMappingContext, 1);
		}

		if (UEnhancedInputComponent* EnhancedInputComponent = Cast<UEnhancedInputComponent>(PlayerController->InputComponent))
		{
			// Fire
			EnhancedInputComponent->BindAction(FireAction, ETriggerEvent::Triggered, this, &UTP_WeaponComponent::Fire);
		}
	}

	return true;
}

void UTP_WeaponComponent::EndPlay(const EEndPlayReason::Type EndPlayReason)
{
	Super::EndPlay(EndPlayReason);

	if (Character == nullptr)
	{
		return;
	}

	if (APlayerController* PlayerController = Cast<APlayerController>(Character->GetController()))
	{
		if (UEnhancedInputLocalPlayerSubsystem* Subsystem = ULocalPlayer::GetSubsystem<UEnhancedInputLocalPlayerSubsystem>(PlayerController->GetLocalPlayer()))
		{
			Subsystem->RemoveMappingContext(FireMappingContext);
		}
	}
}

```

`Source/FirstPerson/TP_WeaponComponent.h`:

```h
// Copyright Epic Games, Inc. All Rights Reserved.

#pragma once

#include "CoreMinimal.h"
#include "Components/SkeletalMeshComponent.h"
#include "TP_WeaponComponent.generated.h"

class AFirstPersonCharacter;

UCLASS(Blueprintable, BlueprintType, ClassGroup=(Custom), meta=(BlueprintSpawnableComponent) )
class FIRSTPERSON_API UTP_WeaponComponent : public USkeletalMeshComponent
{
	GENERATED_BODY()

public:
	/** Projectile class to spawn */
	UPROPERTY(EditDefaultsOnly, Category=Projectile)
	TSubclassOf<class AFirstPersonProjectile> ProjectileClass;

	/** Sound to play each time we fire */
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category=Gameplay)
	USoundBase* FireSound;
	
	/** AnimMontage to play each time we fire */
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = Gameplay)
	UAnimMontage* FireAnimation;

	/** Gun muzzle's offset from the characters location */
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category=Gameplay)
	FVector MuzzleOffset;

	/** MappingContext */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category=Input, meta=(AllowPrivateAccess = "true"))
	class UInputMappingContext* FireMappingContext;

	/** Fire Input Action */
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category=Input, meta=(AllowPrivateAccess = "true"))
	class UInputAction* FireAction;

	/** Sets default values for this component's properties */
	UTP_WeaponComponent();

	/** Attaches the actor to a FirstPersonCharacter */
	UFUNCTION(BlueprintCallable, Category="Weapon")
	bool AttachWeapon(AFirstPersonCharacter* TargetCharacter);

	/** Make the weapon Fire a Projectile */
	UFUNCTION(BlueprintCallable, Category="Weapon")
	void Fire();

protected:
	/** Ends gameplay for this component. */
	UFUNCTION()
	virtual void EndPlay(const EEndPlayReason::Type EndPlayReason) override;

private:
	/** The Character holding this weapon*/
	AFirstPersonCharacter* Character;
};

```

`Source/FirstPersonEditor.Target.cs`:

```cs
// Copyright Epic Games, Inc. All Rights Reserved.

using UnrealBuildTool;
using System.Collections.Generic;

public class FirstPersonEditorTarget : TargetRules
{
	public FirstPersonEditorTarget(TargetInfo Target) : base(Target)
	{
		Type = TargetType.Editor;
		DefaultBuildSettings = BuildSettingsVersion.V5;
		IncludeOrderVersion = EngineIncludeOrderVersion.Unreal5_4;
		ExtraModuleNames.Add("FirstPerson");
	}
}

```