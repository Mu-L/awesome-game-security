Project Path: arc_gmh5225_StarRailCopilot_k3doobg3

Source Tree:

```txt
arc_gmh5225_StarRailCopilot_k3doobg3
├── LICENSE
├── README.md
├── README_en.md
├── assets
│   ├── character
│   │   ├── Arlan.png
│   │   ├── Asta.png
│   │   ├── Bailu.png
│   │   ├── Blade.png
│   │   ├── Bronya.png
│   │   ├── CaelumDestruction.png
│   │   ├── CaelumPreservation.png
│   │   ├── Clara.png
│   │   ├── DanHeng.png
│   │   ├── DanHengImbibitorLunae.png
│   │   ├── Gepard.png
│   │   ├── Herta.png
│   │   ├── Himeko.png
│   │   ├── Hook.png
│   │   ├── JingYuan.png
│   │   ├── Kafka.png
│   │   ├── Luka.png
│   │   ├── Luocha.png
│   │   ├── March7th.png
│   │   ├── Natasha.png
│   │   ├── Pela.png
│   │   ├── Qingque.png
│   │   ├── Sampo.png
│   │   ├── Seele.png
│   │   ├── Serval.png
│   │   ├── SilverWolf.png
│   │   ├── StelleDestruction.png
│   │   ├── StellePreservation.png
│   │   ├── Sushang.png
│   │   ├── Tingyun.png
│   │   ├── Welt.png
│   │   ├── Yanqing.png
│   │   └── Yukong.png
│   ├── cn
│   │   ├── assignment
│   │   │   ├── claim
│   │   │   │   ├── CLAIM.BUTTON.png
│   │   │   │   ├── CLAIM.png
│   │   │   │   ├── CLOSE_REPORT.BUTTON.png
│   │   │   │   ├── CLOSE_REPORT.png
│   │   │   │   ├── REDISPATCH.BUTTON.png
│   │   │   │   └── REDISPATCH.png
│   │   │   ├── dispatch
│   │   │   │   ├── ASSIGNMENT_START.png
│   │   │   │   ├── CHARACTER_LIST.png
│   │   │   │   ├── CONFIRM_ASSIGNMENT.BUTTON.png
│   │   │   │   └── CONFIRM_ASSIGNMENT.png
│   │   │   └── ui
│   │   │       └── DISPATCHED.png
│   │   ├── base
│   │   │   └── popup
│   │   │       ├── CANCEL_POPUP.SEARCH.png
│   │   │       ├── CANCEL_POPUP.png
│   │   │       ├── CONFIRM_POPUP.SEARCH.png
│   │   │       └── CONFIRM_POPUP.png
│   │   ├── battle_pass
│   │   │   └── REWARDS_CLAIM_ALL.png
│   │   ├── combat
│   │   │   ├── finish
│   │   │   │   ├── COMBAT_AGAIN.BUTTON.png
│   │   │   │   ├── COMBAT_AGAIN.png
│   │   │   │   ├── COMBAT_EXIT.BUTTON.png
│   │   │   │   └── COMBAT_EXIT.png
│   │   │   ├── prepare
│   │   │   │   ├── COMBAT_PREPARE.BUTTON.png
│   │   │   │   └── COMBAT_PREPARE.png
│   │   │   └── team
│   │   │       ├── COMBAT_TEAM_PREPARE.BUTTON.png
│   │   │       └── COMBAT_TEAM_PREPARE.png
│   │   ├── daily
│   │   │   ├── camera
│   │   │   │   └── PICTURE_TAKEN.png
│   │   │   ├── reward
│   │   │   │   └── DAILY_QUEST_FULL.png
│   │   │   └── synthesize_consumable
│   │   │       ├── RECIPE_UNLOCK.png
│   │   │       └── SYNTHESIZE_CONFIRM.png
│   │   ├── item
│   │   │   └── consumable_usage
│   │   │       └── USE_CONSUMABLE.png
│   │   └── login
│   │       ├── USER_AGREEMENT_ACCEPT.BUTTON.png
│   │       └── USER_AGREEMENT_ACCEPT.png
│   ├── gui
│   │   ├── css
│   │   │   ├── alas-mobile.css
│   │   │   ├── alas-pc.css
│   │   │   ├── alas.css
│   │   │   ├── dark-alas.css
│   │   │   └── light-alas.css
│   │   └── icon
│   │       ├── add.svg
│   │       ├── alas.svg
│   │       ├── develop.svg
│   │       ├── run.svg
│   │       └── setting.svg
│   ├── share
│   │   ├── assignment
│   │   │   ├── claim
│   │   │   │   └── OCR_ASSIGNMENT_REPORT_TIME.png
│   │   │   ├── dispatch
│   │   │   │   ├── ASSIGNMENT_STARTED_CHECK.png
│   │   │   │   ├── CHARACTER_1.png
│   │   │   │   ├── CHARACTER_1_SELECTED.png
│   │   │   │   ├── CHARACTER_2.png
│   │   │   │   ├── CHARACTER_2_SELECTED.png
│   │   │   │   ├── DURATION_12.png
│   │   │   │   ├── DURATION_20.png
│   │   │   │   ├── DURATION_4.png
│   │   │   │   ├── DURATION_8.png
│   │   │   │   ├── EMPTY_SLOT.SEARCH.png
│   │   │   │   └── EMPTY_SLOT.png
│   │   │   └── ui
│   │   │       ├── CHARACTER_MATERIALS.png
│   │   │       ├── ENTRY_LOADED.png
│   │   │       ├── EXP_MATERIALS_CREDITS.png
│   │   │       ├── OCR_ASSIGNMENT_LIMIT.png
│   │   │       ├── OCR_ASSIGNMENT_LIST.png
│   │   │       ├── OCR_ASSIGNMENT_TIME.png
│   │   │       └── SYNTHESIS_MATERIALS.png
│   │   ├── base
│   │   │   ├── page
│   │   │   │   ├── ASSIGNMENT_CHECK.png
│   │   │   │   ├── BACK.png
│   │   │   │   ├── BATTLE_PASS_CHECK.png
│   │   │   │   ├── CAMERA_CHECK.png
│   │   │   │   ├── CHARACTER_CHECK.png
│   │   │   │   ├── CLOSE.png
│   │   │   │   ├── EVENT_CHECK.png
│   │   │   │   ├── FORGOTTEN_HALL_CHECK.png
│   │   │   │   ├── GACHA_CHECK.png
│   │   │   │   ├── GUIDE_CHECK.png
│   │   │   │   ├── GUIDE_CLOSE.png
│   │   │   │   ├── ITEM_CHECK.png
│   │   │   │   ├── MAIN_GOTO_BATTLE_PASS.png
│   │   │   │   ├── MAIN_GOTO_CHARACTER.png
│   │   │   │   ├── MAIN_GOTO_EVENT.png
│   │   │   │   ├── MAIN_GOTO_GACHA.png
│   │   │   │   ├── MAIN_GOTO_GUIDE.png
│   │   │   │   ├── MAIN_GOTO_ITEM.png
│   │   │   │   ├── MAIN_GOTO_MAP.png
│   │   │   │   ├── MAIN_GOTO_MENU.png
│   │   │   │   ├── MAIN_GOTO_MESSAGE.png
│   │   │   │   ├── MAIN_GOTO_MISSION.png
│   │   │   │   ├── MAIN_GOTO_TEAM.png
│   │   │   │   ├── MAIN_GOTO_TUTORIAL.png
│   │   │   │   ├── MAP_CHECK.png
│   │   │   │   ├── MAP_GOTO_WORLD.png
│   │   │   │   ├── MENU_CHECK.png
│   │   │   │   ├── MENU_GOTO_ASSIGNMENT.png
│   │   │   │   ├── MENU_GOTO_CAMERA.png
│   │   │   │   ├── MENU_GOTO_SYNTHESIZE.png
│   │   │   │   ├── MENU_SCROLL.png
│   │   │   │   ├── MESSAGE_CLOSE.png
│   │   │   │   ├── MISSION_CHECK.png
│   │   │   │   ├── SYNTHESIZE_CHECK.png
│   │   │   │   ├── TEAM_CHECK.png
│   │   │   │   ├── TUTORIAL_CHECK.png
│   │   │   │   └── WORLD_CHECK.png
│   │   │   └── popup
│   │   │       ├── BATTLE_PASS_NOTIFICATION.BUTTON.png
│   │   │       ├── BATTLE_PASS_NOTIFICATION.png
│   │   │       ├── GET_REWARD.BUTTON.png
│   │   │       ├── GET_REWARD.png
│   │   │       ├── MONTHLY_CARD_GET_ITEM.BUTTON.png
│   │   │       ├── MONTHLY_CARD_GET_ITEM.png
│   │   │       ├── MONTHLY_CARD_REWARD.BUTTON.png
│   │   │       └── MONTHLY_CARD_REWARD.png
│   │   ├── battle_pass
│   │   │   ├── CLOSE_CHOOSE_GIFT.png
│   │   │   ├── EXP_CLAIM_ALL.png
│   │   │   ├── MISSIONS_CHECK.png
│   │   │   ├── MISSIONS_CLICK.png
│   │   │   ├── MISSIONS_LOADED.png
│   │   │   ├── MISSION_PAGE_SCROLL.png
│   │   │   ├── OCR_BATTLE_PASS_QUEST.png
│   │   │   ├── OCR_LEVEL.png
│   │   │   ├── OCR_REMAINING_TIME.png
│   │   │   ├── PERIOD_MISSION_CLICK.png
│   │   │   ├── REWARDS_CHECK.png
│   │   │   ├── REWARDS_CLICK.png
│   │   │   ├── REWARDS_LOADED.png
│   │   │   ├── TODAY_MISSION_CLICK.png
│   │   │   └── WEEK_MISSION_CLICK.png
│   │   ├── combat
│   │   │   ├── interact
│   │   │   │   ├── DUNGEON_COMBAT_INTERACT.BUTTON.png
│   │   │   │   └── DUNGEON_COMBAT_INTERACT.png
│   │   │   ├── prepare
│   │   │   │   ├── OCR_TRAILBLAZE_POWER.png
│   │   │   │   ├── OCR_WAVE_COST.png
│   │   │   │   ├── OCR_WAVE_COUNT.png
│   │   │   │   ├── WAVE_MINUS.png
│   │   │   │   └── WAVE_PLUS.png
│   │   │   ├── state
│   │   │   │   ├── COMBAT_AUTO.png
│   │   │   │   ├── COMBAT_PAUSE.png
│   │   │   │   └── COMBAT_SPEED_2X.png
│   │   │   ├── support
│   │   │   │   ├── COMBAT_SUPPORT_ADD.png
│   │   │   │   ├── COMBAT_SUPPORT_LIST.png
│   │   │   │   ├── COMBAT_SUPPORT_LIST_GRID.png
│   │   │   │   ├── COMBAT_SUPPORT_LIST_SCROLL.png
│   │   │   │   └── COMBAT_SUPPORT_SELECTED.png
│   │   │   └── team
│   │   │       ├── COMBAT_TEAM_DISMISSSUPPORT.png
│   │   │       ├── COMBAT_TEAM_SUPPORT.png
│   │   │       ├── TEAM_1.png
│   │   │       ├── TEAM_2.png
│   │   │       ├── TEAM_3.png
│   │   │       ├── TEAM_4.png
│   │   │       ├── TEAM_5.png
│   │   │       └── TEAM_6.png
│   │   ├── daily
│   │   │   ├── camera
│   │   │   │   └── TAKE_PICTURE.png
│   │   │   ├── reward
│   │   │   │   ├── ACTIVE_POINTS_1_CHECKED.png
│   │   │   │   ├── ACTIVE_POINTS_1_LOCKED.png
│   │   │   │   ├── ACTIVE_POINTS_1_UNLOCK.png
│   │   │   │   ├── ACTIVE_POINTS_2_CHECKED.png
│   │   │   │   ├── ACTIVE_POINTS_2_LOCKED.png
│   │   │   │   ├── ACTIVE_POINTS_2_UNLOCK.png
│   │   │   │   ├── ACTIVE_POINTS_3_CHECKED.png
│   │   │   │   ├── ACTIVE_POINTS_3_LOCKED.png
│   │   │   │   ├── ACTIVE_POINTS_3_UNLOCK.png
│   │   │   │   ├── ACTIVE_POINTS_4_CHECKED.png
│   │   │   │   ├── ACTIVE_POINTS_4_LOCKED.png
│   │   │   │   ├── ACTIVE_POINTS_4_UNLOCK.png
│   │   │   │   ├── ACTIVE_POINTS_5_CHECKED.png
│   │   │   │   ├── ACTIVE_POINTS_5_LOCKED.png
│   │   │   │   ├── ACTIVE_POINTS_5_UNLOCK.png
│   │   │   │   ├── DAILY_QUEST_GOTO.png
│   │   │   │   ├── DAILY_QUEST_LEFT_START.png
│   │   │   │   ├── DAILY_QUEST_REWARD.png
│   │   │   │   ├── DAILY_QUEST_RIGHT_END.png
│   │   │   │   └── OCR_DAILY_QUEST.png
│   │   │   ├── synthesize_consumable
│   │   │   │   ├── CONSUMABLES_COMFORT_FOOD.SEARCH.png
│   │   │   │   ├── CONSUMABLES_COMFORT_FOOD.png
│   │   │   │   ├── CONSUMABLES_COMFORT_FOOD_CHECK.png
│   │   │   │   ├── CONSUMABLES_SIMPLE_AED.SEARCH.png
│   │   │   │   ├── CONSUMABLES_SIMPLE_AED.png
│   │   │   │   ├── CONSUMABLES_SIMPLE_AED_CHECK.png
│   │   │   │   ├── CONSUMABLES_TRICK_SNACK.SEARCH.png
│   │   │   │   ├── CONSUMABLES_TRICK_SNACK.png
│   │   │   │   ├── CONSUMABLES_TRICK_SNACK_CHECK.png
│   │   │   │   ├── SIMPLE_PROTECTIVE_GEAR.SEARCH.png
│   │   │   │   ├── SIMPLE_PROTECTIVE_GEAR.png
│   │   │   │   ├── SIMPLE_PROTECTIVE_GEAR_CHECK.png
│   │   │   │   ├── SYNTHESIZE_CONSUMABLES_CHECK.png
│   │   │   │   ├── SYNTHESIZE_GOTO_CONSUMABLES.png
│   │   │   │   └── SYNTHESIZE_SCROLL.png
│   │   │   └── synthesize_material
│   │   │       ├── GLIMMERING_CORE.SEARCH.png
│   │   │       ├── GLIMMERING_CORE.png
│   │   │       ├── GLIMMERING_CORE_CHECK.png
│   │   │       ├── SILVERMANE_INSIGNIA.SEARCH.png
│   │   │       ├── SILVERMANE_INSIGNIA.png
│   │   │       ├── SILVERMANE_INSIGNIA_CHECK.png
│   │   │       ├── SYNTHESIZE_GOTO_MATERIAL.png
│   │   │       ├── SYNTHESIZE_MATERIAL_CHECK.png
│   │   │       ├── USURPERS_SCHEME.SEARCH.png
│   │   │       ├── USURPERS_SCHEME.png
│   │   │       └── USURPERS_SCHEME_CHECK.png
│   │   ├── dungeon
│   │   │   ├── event
│   │   │   │   ├── DOUBLE_CALYX_EVENT_TAG.png
│   │   │   │   ├── DOUBLE_RELIC_EVENT_TAG.png
│   │   │   │   └── OCR_DOUBLE_EVENT_REMAIN.png
│   │   │   └── ui
│   │   │       ├── DAILY_TRAINING_CHECK.png
│   │   │       ├── DAILY_TRAINING_CLICK.png
│   │   │       ├── DAILY_TRAINING_LOADED.png
│   │   │       ├── OCR_DUNGEON_LIST.BUTTON.png
│   │   │       ├── OCR_DUNGEON_LIST.png
│   │   │       ├── OCR_DUNGEON_NAV.png
│   │   │       ├── OCR_SIMUNI_POINT.png
│   │   │       ├── OPERATION_BRIEFING_CHECK.png
│   │   │       ├── OPERATION_BRIEFING_CLICK.png
│   │   │       ├── SURVIVAL_INDEX_CHECK.png
│   │   │       ├── SURVIVAL_INDEX_CLICK.png
│   │   │       ├── SURVIVAL_INDEX_LOADED.SEARCH.png
│   │   │       └── SURVIVAL_INDEX_LOADED.png
│   │   ├── forgotten_hall
│   │   │   ├── DUNGEON_ENTER_CHECKED.png
│   │   │   ├── EFFECT_NOTIFICATION.png
│   │   │   ├── ENTER_FORGOTTEN_HALL_DUNGEON.png
│   │   │   ├── ENTRANCE_CHECKED.png
│   │   │   ├── EXIT_CONFIRM.png
│   │   │   ├── EXIT_DUNGEON.png
│   │   │   ├── FIRST_CHARACTER.png
│   │   │   ├── LAST_VERTIGES.png
│   │   │   ├── OCR_STAGE.BUTTON.png
│   │   │   └── OCR_STAGE.png
│   │   ├── item
│   │   │   ├── consumable_usage
│   │   │   │   ├── ITEM_CONSUMABLE_SCROLL.png
│   │   │   │   ├── SIMPLE_PROTECTIVE_GEAR.SEARCH.png
│   │   │   │   ├── SIMPLE_PROTECTIVE_GEAR.png
│   │   │   │   └── SIMPLE_PROTECTIVE_GEAR_CHECK.png
│   │   │   ├── relics
│   │   │   │   ├── FIRST_RELIC.png
│   │   │   │   ├── FIRST_RELIC_SELECTED.png
│   │   │   │   ├── GOTO_SALVAGE.png
│   │   │   │   ├── ORDER_ASCENDING.png
│   │   │   │   ├── ORDER_DESCENDING.png
│   │   │   │   ├── SALVAGE.SEARCH.png
│   │   │   │   └── SALVAGE.png
│   │   │   └── ui
│   │   │       ├── CONSUMABLE_CHECK.png
│   │   │       ├── CONSUMABLE_CLICK.png
│   │   │       ├── LIGHT_CONE_CHECK.png
│   │   │       ├── LIGHT_CONE_CLICK.png
│   │   │       ├── MISSIONS_CHECK.png
│   │   │       ├── MISSIONS_CLICK.png
│   │   │       ├── OTHER_MATERIALS_CHECK.png
│   │   │       ├── OTHER_MATERIALS_CLICK.png
│   │   │       ├── RELICS_CHECK.png
│   │   │       ├── RELICS_CLICK.png
│   │   │       ├── UPGRADE_MATERIAL_CHECK.png
│   │   │       ├── UPGRADE_MATERIAL_CLICK.png
│   │   │       ├── VALUABLES_CHECK.png
│   │   │       └── VALUABLES_CLICK.png
│   │   ├── login
│   │   │   ├── LOGIN_CONFIRM.BUTTON.png
│   │   │   └── LOGIN_CONFIRM.png
│   │   ├── map
│   │   │   ├── bigmap
│   │   │   │   ├── FLOOR_1.png
│   │   │   │   ├── FLOOR_2.png
│   │   │   │   ├── FLOOR_3.png
│   │   │   │   ├── OCR_PLANE.png
│   │   │   │   ├── PLANE_SCROLL.png
│   │   │   │   ├── WORLD_HERTA.png
│   │   │   │   ├── WORLD_JARILO.png
│   │   │   │   └── WORLD_LUOFU.png
│   │   │   └── control
│   │   │       ├── A_BUTTON.png
│   │   │       ├── E_BUTTON.png
│   │   │       ├── JOYSTICK.png
│   │   │       ├── ROTATION_SWIPE_AREA.png
│   │   │       ├── RUN_BUTTON.png
│   │   │       ├── TECHNIQUE_POINT_1.png
│   │   │       ├── TECHNIQUE_POINT_2.png
│   │   │       ├── TECHNIQUE_POINT_3.png
│   │   │       ├── TECHNIQUE_POINT_4.png
│   │   │       └── TECHNIQUE_POINT_5.png
│   │   └── rogue
│   │       ├── blessing
│   │       │   ├── BLESSING_ENFORCE.png
│   │       │   ├── BLESSING_RESET.png
│   │       │   ├── BLESSING_STABLE_FLAG.png
│   │       │   ├── BOTTOM_WHITE_BAR.png
│   │       │   ├── OCR_RESET_COST.png
│   │       │   ├── OCR_RESET_COUNT.png
│   │       │   └── OCR_ROGUE_BUFF.png
│   │       ├── bonus
│   │       │   ├── BONUS_BOTTOM_WHITE_BAR.png
│   │       │   └── BONUS_CONFIRM.png
│   │       ├── curio
│   │       │   ├── CURIO_ENFORCE.png
│   │       │   └── OCR_ROGUE_CURIO.png
│   │       └── ui
│   │           ├── BLESSING_CONFIRM.png
│   │           ├── CHECK_BLESSING.png
│   │           ├── COSMIC_FRAGMENT.png
│   │           ├── FLAG_UNRECORD.png
│   │           ├── OBTAIN_ITEM_POPUP.png
│   │           ├── OCR_COSMIC_FRAGMENT.png
│   │           ├── PAGE_CHOOSE_BONUS.png
│   │           ├── PAGE_CHOOSE_BUFF.png
│   │           ├── PAGE_CHOOSE_CURIO.png
│   │           └── PAGE_EVENT.png
│   └── support
│       └── selected_character_arrow.png
├── bin
│   ├── DroidCast
│   │   ├── DroidCast-debug-1.1.0.apk
│   │   └── DroidCastS-release-1.1.5.apk
│   ├── MaaTouch
│   │   └── maatouch
│   ├── ascreencap
│   │   ├── Android_5.x-7.x
│   │   │   ├── arm64-v8a
│   │   │   │   └── ascreencap
│   │   │   ├── armeabi-v7a
│   │   │   │   └── ascreencap
│   │   │   ├── x86
│   │   │   │   └── ascreencap
│   │   │   └── x86_64
│   │   │       └── ascreencap
│   │   ├── Android_8.x
│   │   │   ├── arm64-v8a
│   │   │   │   └── ascreencap
│   │   │   ├── armeabi-v7a
│   │   │   │   └── ascreencap
│   │   │   ├── x86
│   │   │   │   └── ascreencap
│   │   │   └── x86_64
│   │   │       └── ascreencap
│   │   └── Android_9.x
│   │       ├── arm64-v8a
│   │       │   └── ascreencap
│   │       ├── armeabi-v7a
│   │       │   └── ascreencap
│   │       ├── x86
│   │       │   └── ascreencap
│   │       └── x86_64
│   │           └── ascreencap
│   └── scrcpy
│       ├── scrcpy-server-v1.20.jar
│       └── scrcpy-server-v1.25.jar
├── config
│   ├── deploy.template-cn.yaml
│   ├── deploy.template.yaml
│   └── template.json
├── console.bat
├── deploy
│   ├── Readme.md
│   ├── Windows
│   │   ├── adb.py
│   │   ├── alas.py
│   │   ├── app.py
│   │   ├── config.py
│   │   ├── emulator.py
│   │   ├── git.py
│   │   ├── installer_test.py
│   │   ├── logger.py
│   │   ├── patch.py
│   │   ├── pip.py
│   │   ├── template.yaml
│   │   └── utils.py
│   ├── git_over_cdn
│   │   └── client.py
│   ├── installer.py
│   └── set.py
├── dev_tools
│   ├── button_extract.py
│   ├── keyword_extract.py
│   └── screenshot.py
├── gui.py
├── installer.py
├── module
│   ├── alas.py
│   ├── base
│   │   ├── base.py
│   │   ├── button.py
│   │   ├── code_generator.py
│   │   ├── decorator.py
│   │   ├── filter.py
│   │   ├── resource.py
│   │   ├── retry.py
│   │   ├── timer.py
│   │   └── utils
│   │       ├── __init__.py
│   │       ├── grids.py
│   │       ├── points.py
│   │       └── utils.py
│   ├── config
│   │   ├── argument
│   │   │   ├── args.json
│   │   │   ├── argument.yaml
│   │   │   ├── default.yaml
│   │   │   ├── gui.yaml
│   │   │   ├── menu.json
│   │   │   ├── override.yaml
│   │   │   ├── stored.json
│   │   │   └── task.yaml
│   │   ├── atomicwrites.py
│   │   ├── config.py
│   │   ├── config_generated.py
│   │   ├── config_manual.py
│   │   ├── config_updater.py
│   │   ├── convert.py
│   │   ├── i18n
│   │   │   ├── en-US.json
│   │   │   ├── ja-JP.json
│   │   │   ├── zh-CN.json
│   │   │   └── zh-TW.json
│   │   ├── server.py
│   │   ├── stored
│   │   │   ├── classes.py
│   │   │   └── stored_generated.py
│   │   ├── utils.py
│   │   └── watcher.py
│   ├── daemon
│   │   ├── benchmark.py
│   │   └── daemon_base.py
│   ├── device
│   │   ├── app_control.py
│   │   ├── connection.py
│   │   ├── connection_attr.py
│   │   ├── control.py
│   │   ├── device.py
│   │   ├── method
│   │   │   ├── adb.py
│   │   │   ├── ascreencap.py
│   │   │   ├── droidcast.py
│   │   │   ├── hermit.py
│   │   │   ├── maatouch.py
│   │   │   ├── minitouch.py
│   │   │   ├── scrcpy
│   │   │   │   ├── __init__.py
│   │   │   │   ├── const.py
│   │   │   │   ├── control.py
│   │   │   │   ├── core.py
│   │   │   │   ├── options.py
│   │   │   │   └── scrcpy.py
│   │   │   ├── uiautomator_2.py
│   │   │   ├── utils.py
│   │   │   └── wsa.py
│   │   ├── platform
│   │   │   ├── emulator_base.py
│   │   │   ├── emulator_windows.py
│   │   │   ├── platform_base.py
│   │   │   ├── platform_windows.py
│   │   │   └── utils.py
│   │   └── screenshot.py
│   ├── exception.py
│   ├── handler
│   │   └── sensitive_info.py
│   ├── logger
│   │   ├── __init__.py
│   │   ├── logger.py
│   │   └── logger.pyi
│   ├── notify.py
│   ├── ocr
│   │   ├── keyword.py
│   │   ├── models.py
│   │   ├── ocr.py
│   │   └── utils.py
│   ├── server_checker.py
│   ├── ui
│   │   ├── draggable_list.py
│   │   ├── scroll.py
│   │   └── switch.py
│   └── webui
│       ├── __init__.py
│       ├── app.py
│       ├── base.py
│       ├── config.py
│       ├── fake.py
│       ├── fastapi.py
│       ├── lang.py
│       ├── pin.py
│       ├── process_manager.py
│       ├── remote_access.py
│       ├── setting.py
│       ├── translate.py
│       ├── updater.py
│       ├── utils.py
│       └── widgets.py
├── requirements-in.txt
├── requirements.txt
├── src.py
├── tasks
│   ├── assignment
│   │   ├── assets
│   │   │   ├── assets_assignment_claim.py
│   │   │   ├── assets_assignment_dispatch.py
│   │   │   └── assets_assignment_ui.py
│   │   ├── assignment.py
│   │   ├── claim.py
│   │   ├── dispatch.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   ├── entry.py
│   │   │   └── group.py
│   │   └── ui.py
│   ├── base
│   │   ├── assets
│   │   │   ├── assets_base_page.py
│   │   │   └── assets_base_popup.py
│   │   ├── page.py
│   │   ├── popup.py
│   │   └── ui.py
│   ├── battle_pass
│   │   ├── assets
│   │   │   └── assets_battle_pass.py
│   │   ├── battle_pass.py
│   │   └── keywords
│   │       ├── __init__.py
│   │       ├── classes.py
│   │       ├── mission_tab.py
│   │       ├── quest.py
│   │       ├── quest_state.py
│   │       └── tab.py
│   ├── character
│   │   └── keywords
│   │       ├── __init__.py
│   │       ├── character_list.py
│   │       └── classes.py
│   ├── combat
│   │   ├── assets
│   │   │   ├── assets_combat_finish.py
│   │   │   ├── assets_combat_interact.py
│   │   │   ├── assets_combat_prepare.py
│   │   │   ├── assets_combat_state.py
│   │   │   ├── assets_combat_support.py
│   │   │   └── assets_combat_team.py
│   │   ├── combat.py
│   │   ├── detector.py
│   │   ├── interact.py
│   │   ├── prepare.py
│   │   ├── state.py
│   │   ├── support.py
│   │   └── team.py
│   ├── daily
│   │   ├── assets
│   │   │   ├── assets_daily_camera.py
│   │   │   ├── assets_daily_reward.py
│   │   │   ├── assets_daily_synthesize_consumable.py
│   │   │   └── assets_daily_synthesize_material.py
│   │   ├── camera.py
│   │   ├── daily_quest.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   ├── daily_quest.py
│   │   │   └── daily_quest_state.py
│   │   ├── synthesize.py
│   │   └── use_technique.py
│   ├── dungeon
│   │   ├── assets
│   │   │   ├── assets_dungeon_event.py
│   │   │   └── assets_dungeon_ui.py
│   │   ├── dungeon.py
│   │   ├── event.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   ├── dungeon.py
│   │   │   ├── dungeon_entrance.py
│   │   │   ├── nav.py
│   │   │   └── tab.py
│   │   └── ui.py
│   ├── forgotten_hall
│   │   ├── assets
│   │   │   └── assets_forgotten_hall.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   └── stage.py
│   │   └── ui.py
│   ├── item
│   │   ├── assets
│   │   │   ├── assets_item_consumable_usage.py
│   │   │   ├── assets_item_relics.py
│   │   │   └── assets_item_ui.py
│   │   ├── consumable_usage.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   └── tab.py
│   │   ├── relics.py
│   │   └── ui.py
│   ├── login
│   │   ├── assets
│   │   │   └── assets_login.py
│   │   └── login.py
│   ├── map
│   │   ├── assets
│   │   │   ├── assets_map_bigmap.py
│   │   │   └── assets_map_control.py
│   │   ├── bigmap
│   │   │   └── plane.py
│   │   ├── control
│   │   │   ├── control.py
│   │   │   ├── joystick.py
│   │   │   └── waypoint.py
│   │   ├── keywords
│   │   │   ├── __init__.py
│   │   │   ├── classes.py
│   │   │   └── plane.py
│   │   ├── minimap
│   │   │   ├── minimap.py
│   │   │   └── utils.py
│   │   └── resource
│   │       ├── const.py
│   │       ├── generate.py
│   │       └── resource.py
│   └── rogue
│       ├── assets
│       │   ├── assets_rogue_blessing.py
│       │   ├── assets_rogue_bonus.py
│       │   ├── assets_rogue_curio.py
│       │   └── assets_rogue_ui.py
│       ├── bleesing
│       │   ├── blessing.py
│       │   ├── bonus.py
│       │   ├── curio.py
│       │   ├── preset.py
│       │   ├── selector.py
│       │   ├── ui.py
│       │   └── utils.py
│       └── keywords
│           ├── __init__.py
│           ├── blessing.py
│           ├── bonus.py
│           ├── classes.py
│           ├── curio.py
│           ├── enhancement.py
│           ├── path.py
│           └── resonance.py
└── webapp
    ├── LICENSE
    ├── README.md
    ├── buildResources
    │   ├── icon.icns
    │   ├── icon.ico
    │   └── icon.png
    ├── contributing.md
    ├── electron-builder.config.js
    ├── electron-vendors.config.json
    ├── package-lock.json
    ├── package.json
    ├── packages
    │   ├── common
    │   │   ├── constant
    │   │   │   ├── config.ts
    │   │   │   ├── eventNames.ts
    │   │   │   └── theme.ts
    │   │   └── utils
    │   │       ├── checkIsFirst.ts
    │   │       ├── copyFilesToDir.ts
    │   │       ├── env.ts
    │   │       ├── getAlasABSPath.ts
    │   │       ├── index.ts
    │   │       ├── modifyYaml.ts
    │   │       └── validate.ts
    │   ├── main
    │   │   ├── public
    │   │   │   ├── deploy.yaml.tpl
    │   │   │   └── icon.png
    │   │   ├── src
    │   │   │   ├── addIpcMainListener.ts
    │   │   │   ├── config.ts
    │   │   │   ├── coreService.ts
    │   │   │   ├── createApp.ts
    │   │   │   ├── createMainWindow.ts
    │   │   │   ├── index.ts
    │   │   │   ├── logger.ts
    │   │   │   ├── mainWindow.ts
    │   │   │   ├── pyshell.ts
    │   │   │   ├── relaunchApp.ts
    │   │   │   ├── security-restrictions.ts
    │   │   │   └── serviceLogic
    │   │   │       ├── createAlas.ts
    │   │   │       ├── createInstaller.ts
    │   │   │       └── index.ts
    │   │   ├── tests
    │   │   │   └── unit.spec.ts
    │   │   ├── tsconfig.json
    │   │   └── vite.config.js
    │   ├── preload
    │   │   ├── src
    │   │   │   ├── alasConfig.ts
    │   │   │   ├── electronApi.ts
    │   │   │   ├── index.ts
    │   │   │   ├── modifyConfigYaml.ts
    │   │   │   ├── nodeCrypto.ts
    │   │   │   └── versions.ts
    │   │   ├── tests
    │   │   │   ├── modifyYaml.test.ts
    │   │   │   └── unit.spec.ts
    │   │   ├── tsconfig.json
    │   │   ├── types
    │   │   │   └── electron-api.d.ts
    │   │   └── vite.config.js
    │   └── renderer
    │       ├── auto-imports.d.ts
    │       ├── components.d.ts
    │       ├── index.html
    │       ├── src
    │       │   ├── App.vue
    │       │   ├── components
    │       │   │   ├── Alas.vue
    │       │   │   ├── AlasTitle.vue
    │       │   │   ├── AppHeader.vue
    │       │   │   ├── CountTo.vue
    │       │   │   ├── ProgressBar.vue
    │       │   │   └── Spin.vue
    │       │   ├── design
    │       │   │   ├── color.less
    │       │   │   ├── config.less
    │       │   │   ├── index.less
    │       │   │   └── theme.less
    │       │   ├── hooks
    │       │   │   ├── useI18n.ts
    │       │   │   └── useIpcRenderer.ts
    │       │   ├── index.less
    │       │   ├── index.ts
    │       │   ├── locales
    │       │   │   ├── helper.ts
    │       │   │   ├── lang
    │       │   │   │   ├── en-US.json
    │       │   │   │   ├── ja-JP.json
    │       │   │   │   ├── zh-CN.json
    │       │   │   │   └── zh-TW.json
    │       │   │   ├── setupI18n.ts
    │       │   │   └── useLocale.ts
    │       │   ├── logics
    │       │   │   ├── error-handle
    │       │   │   │   └── index.ts
    │       │   │   └── initAppConfigStore.ts
    │       │   ├── router.ts
    │       │   ├── settings
    │       │   │   ├── localSetting.ts
    │       │   │   ├── repositorySeeing.ts
    │       │   │   └── themeSetting.ts
    │       │   ├── store
    │       │   │   ├── index.ts
    │       │   │   └── modules
    │       │   │       ├── app.ts
    │       │   │       └── locale.ts
    │       │   ├── utils
    │       │   │   └── is.ts
    │       │   └── views
    │       │       ├── ImportConfig.vue
    │       │       ├── InstallAlas.vue
    │       │       ├── Launch.vue
    │       │       └── LoadingPage.vue
    │       ├── tsconfig.json
    │       ├── types
    │       │   ├── config.d.ts
    │       │   ├── index.d.ts
    │       │   ├── shims-vue.d.ts
    │       │   └── store.d.ts
    │       ├── uno.config.ts
    │       └── vite.config.js
    ├── scripts
    │   ├── build.js
    │   ├── update-electron-vendors.js
    │   ├── update-electron-vendors.mjs
    │   ├── watch.js
    │   └── watch.mjs
    ├── tests
    │   ├── app.spec.js
    │   └── e2e.spec.ts
    ├── tsconfig.json
    ├── types
    │   ├── env.d.ts
    │   ├── index.d.ts
    │   └── vite-env.d.ts
    ├── version
    │   ├── getVersion.mjs
    │   └── inject-app-version-plugin.mjs
    ├── vetur.config.js
    └── vitest.config.js

```

`LICENSE`:

```
                    GNU GENERAL PUBLIC LICENSE
                       Version 3, 29 June 2007

 Copyright (C) 2007 Free Software Foundation, Inc. <https://fsf.org/>
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

                            Preamble

  The GNU General Public License is a free, copyleft license for
software and other kinds of works.

  The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom to
share and change all versions of a program--to make sure it remains free
software for all its users.  We, the Free Software Foundation, use the
GNU General Public License for most of our software; it applies also to
any other work released this way by its authors.  You can apply it to
your programs, too.

  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

  To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you have
certain responsibilities if you distribute copies of the software, or if
you modify it: responsibilities to respect the freedom of others.

  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too, receive
or can get the source code.  And you must show them these terms so they
know their rights.

  Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

  For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

  Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the manufacturer
can do so.  This is fundamentally incompatible with the aim of
protecting users' freedom to change the software.  The systematic
pattern of such abuse occurs in the area of products for individuals to
use, which is precisely where it is most unacceptable.  Therefore, we
have designed this version of the GPL to prohibit the practice for those
products.  If such problems arise substantially in other domains, we
stand ready to extend this provision to those domains in future versions
of the GPL, as needed to protect the freedom of users.

  Finally, every program is threatened constantly by software patents.
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish to
avoid the special danger that patents applied to a free program could
make it effectively proprietary.  To prevent this, the GPL assures that
patents cannot be used to render the program non-free.

  The precise terms and conditions for copying, distribution and
modification follow.

                       TERMS AND CONDITIONS

  0. Definitions.

  "This License" refers to version 3 of the GNU General Public License.

  "Copyright" also means copyright-like laws that apply to other kinds of
works, such as semiconductor masks.

  "The Program" refers to any copyrightable work licensed under this
License.  Each licensee is addressed as "you".  "Licensees" and
"recipients" may be individuals or organizations.

  To "modify" a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of an
exact copy.  The resulting work is called a "modified version" of the
earlier work or a work "based on" the earlier work.

  A "covered work" means either the unmodified Program or a work based
on the Program.

  To "propagate" a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

  To "convey" a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user through
a computer network, with no transfer of a copy, is not conveying.

  An interactive user interface displays "Appropriate Legal Notices"
to the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

  1. Source Code.

  The "source code" for a work means the preferred form of the work
for making modifications to it.  "Object code" means any non-source
form of a work.

  A "Standard Interface" means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

  The "System Libraries" of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
"Major Component", in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

  The "Corresponding Source" for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

  The Corresponding Source need not include anything that users
can regenerate automatically from other parts of the Corresponding
Source.

  The Corresponding Source for a work in source code form is that
same work.

  2. Basic Permissions.

  All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

  You may make, run and propagate covered works that you do not
convey, without conditions so long as your license otherwise remains
in force.  You may convey covered works to others for the sole purpose
of having them make modifications exclusively for you, or provide you
with facilities for running those works, provided that you comply with
the terms of this License in conveying all material for which you do
not control copyright.  Those thus making or running the covered works
for you must do so exclusively on your behalf, under your direction
and control, on terms that prohibit them from making any copies of
your copyrighted material outside their relationship with you.

  Conveying under any other circumstances is permitted solely under
the conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

  3. Protecting Users' Legal Rights From Anti-Circumvention Law.

  No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

  When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such circumvention
is effected by exercising rights under this License with respect to
the covered work, and you disclaim any intention to limit operation or
modification of the work as a means of enforcing, against the work's
users, your or third parties' legal rights to forbid circumvention of
technological measures.

  4. Conveying Verbatim Copies.

  You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

  You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

  5. Conveying Modified Source Versions.

  You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these conditions:

    a) The work must carry prominent notices stating that you modified
    it, and giving a relevant date.

    b) The work must carry prominent notices stating that it is
    released under this License and any conditions added under section
    7.  This requirement modifies the requirement in section 4 to
    "keep intact all notices".

    c) You must license the entire work, as a whole, under this
    License to anyone who comes into possession of a copy.  This
    License will therefore apply, along with any applicable section 7
    additional terms, to the whole of the work, and all its parts,
    regardless of how they are packaged.  This License gives no
    permission to license the work in any other way, but it does not
    invalidate such permission if you have separately received it.

    d) If the work has interactive user interfaces, each must display
    Appropriate Legal Notices; however, if the Program has interactive
    interfaces that do not display Appropriate Legal Notices, your
    work need not make them do so.

  A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
"aggregate" if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

  6. Conveying Non-Source Forms.

  You may convey a covered work in object code form under the terms
of sections 4 and 5, provided that you also convey the
machine-readable Corresponding Source under the terms of this License,
in one of these ways:

    a) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by the
    Corresponding Source fixed on a durable physical medium
    customarily used for software interchange.

    b) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by a
    written offer, valid for at least three years and valid for as
    long as you offer spare parts or customer support for that product
    model, to give anyone who possesses the object code either (1) a
    copy of the Corresponding Source for all the software in the
    product that is covered by this License, on a durable physical
    medium customarily used for software interchange, for a price no
    more than your reasonable cost of physically performing this
    conveying of source, or (2) access to copy the
    Corresponding Source from a network server at no charge.

    c) Convey individual copies of the object code with a copy of the
    written offer to provide the Corresponding Source.  This
    alternative is allowed only occasionally and noncommercially, and
    only if you received the object code with such an offer, in accord
    with subsection 6b.

    d) Convey the object code by offering access from a designated
    place (gratis or for a charge), and offer equivalent access to the
    Corresponding Source in the same way through the same place at no
    further charge.  You need not require recipients to copy the
    Corresponding Source along with the object code.  If the place to
    copy the object code is a network server, the Corresponding Source
    may be on a different server (operated by you or a third party)
    that supports equivalent copying facilities, provided you maintain
    clear directions next to the object code saying where to find the
    Corresponding Source.  Regardless of what server hosts the
    Corresponding Source, you remain obligated to ensure that it is
    available for as long as needed to satisfy these requirements.

    e) Convey the object code using peer-to-peer transmission, provided
    you inform other peers where the object code and Corresponding
    Source of the work are being offered to the general public at no
    charge under subsection 6d.

  A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

  A "User Product" is either (1) a "consumer product", which means any
tangible personal property which is normally used for personal, family,
or household purposes, or (2) anything designed or sold for incorporation
into a dwelling.  In determining whether a product is a consumer product,
doubtful cases shall be resolved in favor of coverage.  For a particular
product received by a particular user, "normally used" refers to a
typical or common use of that class of product, regardless of the status
of the particular user or of the way in which the particular user
actually uses, or expects or is expected to use, the product.  A product
is a consumer product regardless of whether the product has substantial
commercial, industrial or non-consumer uses, unless such uses represent
the only significant mode of use of the product.

  "Installation Information" for a User Product means any methods,
procedures, authorization keys, or other information required to install
and execute modified versions of a covered work in that User Product from
a modified version of its Corresponding Source.  The information must
suffice to ensure that the continued functioning of the modified object
code is in no case prevented or interfered with solely because
modification has been made.

  If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

  The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or updates
for a work that has been modified or installed by the recipient, or for
the User Product in which it has been modified or installed.  Access to a
network may be denied when the modification itself materially and
adversely affects the operation of the network or violates the rules and
protocols for communication across the network.

  Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

  7. Additional Terms.

  "Additional permissions" are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

  When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

  Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders of
that material) supplement the terms of this License with terms:

    a) Disclaiming warranty or limiting liability differently from the
    terms of sections 15 and 16 of this License; or

    b) Requiring preservation of specified reasonable legal notices or
    author attributions in that material or in the Appropriate Legal
    Notices displayed by works containing it; or

    c) Prohibiting misrepresentation of the origin of that material, or
    requiring that modified versions of such material be marked in
    reasonable ways as different from the original version; or

    d) Limiting the use for publicity purposes of names of licensors or
    authors of the material; or

    e) Declining to grant rights under trademark law for use of some
    trade names, trademarks, or service marks; or

    f) Requiring indemnification of licensors and authors of that
    material by anyone who conveys the material (or modified versions of
    it) with contractual assumptions of liability to the recipient, for
    any liability that these contractual assumptions directly impose on
    those licensors and authors.

  All other non-permissive additional terms are considered "further
restrictions" within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

  If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

  Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions;
the above requirements apply either way.

  8. Termination.

  You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

  However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly and
finally terminates your license, and (b) permanently, if the copyright
holder fails to notify you of the violation by some reasonable means
prior to 60 days after the cessation.

  Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

  Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

  9. Acceptance Not Required for Having Copies.

  You are not required to accept this License in order to receive or
run a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

  10. Automatic Licensing of Downstream Recipients.

  Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

  An "entity transaction" is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

  You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

  11. Patents.

  A "contributor" is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's "contributor version".

  A contributor's "essential patent claims" are all patent claims
owned or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, "control" includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

  Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

  In the following three paragraphs, a "patent license" is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To "grant" such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

  If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  "Knowingly relying" means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

  If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

  A patent license is "discriminatory" if it does not include within
the scope of its coverage, prohibits the exercise of, or is
conditioned on the non-exercise of one or more of the rights that are
specifically granted under this License.  You may not convey a covered
work if you are a party to an arrangement with a third party that is
in the business of distributing software, under which you make payment
to the third party based on the extent of your activity of conveying
the work, and under which the third party grants, to any of the
parties who would receive the covered work from you, a discriminatory
patent license (a) in connection with copies of the covered work
conveyed by you (or copies made from those copies), or (b) primarily
for and in connection with specific products or compilations that
contain the covered work, unless you entered into that arrangement,
or that patent license was granted, prior to 28 March 2007.

  Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

  12. No Surrender of Others' Freedom.

  If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey a
covered work so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you may
not convey it at all.  For example, if you agree to terms that obligate you
to collect a royalty for further conveying from those to whom you convey
the Program, the only way you could satisfy both those terms and this
License would be to refrain entirely from conveying the Program.

  13. Use with the GNU Affero General Public License.

  Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

  14. Revised Versions of this License.

  The Free Software Foundation may publish revised and/or new versions of
the GNU General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

  Each version is given a distinguishing version number.  If the
Program specifies that a certain numbered version of the GNU General
Public License "or any later version" applies to it, you have the
option of following the terms and conditions either of that numbered
version or of any later version published by the Free Software
Foundation.  If the Program does not specify a version number of the
GNU General Public License, you may choose any version ever published
by the Free Software Foundation.

  If the Program specifies that a proxy can decide which future
versions of the GNU General Public License can be used, that proxy's
public statement of acceptance of a version permanently authorizes you
to choose that version for the Program.

  Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

  15. Disclaimer of Warranty.

  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

  16. Limitation of Liability.

  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.

  17. Interpretation of Sections 15 and 16.

  If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

                     END OF TERMS AND CONDITIONS

            How to Apply These Terms to Your New Programs

  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the "copyright" line and a pointer to where the full notice is found.

    <one line to give the program's name and a brief idea of what it does.>
    Copyright (C) <year>  <name of author>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

Also add information on how to contact you by electronic and paper mail.

  If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

    <program>  Copyright (C) <year>  <name of author>
    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type `show c' for details.

The hypothetical commands `show w' and `show c' should show the appropriate
parts of the General Public License.  Of course, your program's commands
might be different; for a GUI interface, you would use an "about box".

  You should also get your employer (if you work as a programmer) or school,
if any, to sign a "copyright disclaimer" for the program, if necessary.
For more information on this, and how to apply and follow the GNU GPL, see
<https://www.gnu.org/licenses/>.

  The GNU General Public License does not permit incorporating your program
into proprietary programs.  If your program is a subroutine library, you
may consider it more useful to permit linking proprietary applications with
the library.  If this is what you want to do, use the GNU Lesser General
Public License instead of this License.  But first, please read
<https://www.gnu.org/licenses/why-not-lgpl.html>.

```

`README.md`:

```md
**| [English](README_en.md) | 简体中文 |**


# StarRailCopilot

Star Rail auto script | 星铁速溶茶，崩坏：星穹铁道脚本，基于下一代Alas框架。



## 功能

- **打本**：每日副本，双倍活动副本。
- **收获**：尽量完成每日任务，委托，无名勋礼。
- **后台托管**：自动启动模拟器和游戏，后台托管清体力和每日。



## 安装 [![](https://img.shields.io/github/downloads/LmeSzinc/StarRailCopilot/total?color=4e4c97)](https://github.com/LmeSzinc/StarRailCopilot/releases)

[中文安装教程](https://github.com/LmeSzinc/StarRailCopilot/wiki/Installation_cn)，包含自动安装教程，使用教程，手动安装教程。

> **为什么使用模拟器？** 如果你用桌面端来运行脚本的话，游戏窗口必须保持在前台，我猜你也不想运行脚本的时候不能动鼠标键盘像个傻宝一样坐在那吧，所以用模拟器。

> **模拟器的性能表现如何？** Lme 的 8700k+1080ti 使用 MuMu 12 模拟器画质设置非常高是有 40fps 的，如果你的配置稍微新一点的话，特效最高 60fps 不是问题。



## 开发

Discord https://discord.gg/aJkt3mKDEr QQ群 752620927

- [小地图识别原理](https://github.com/LmeSzinc/StarRailCopilot/wiki/MinimapTracking)
- 开发文档（目录在侧边栏）：[Alas wiki](https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/1.-Start)，但很多内容是新写的，建议阅读源码和历史提交。
- 开发路线图：[#10](https://github.com/LmeSzinc/StarRailCopilot/issues/10) ，欢迎提交 PR，挑选你感兴趣的部分进行开发即可。

> **如何添加多语言/多服务器支持？** 需要适配 assets，参考 [开发文档 “添加一个 Button” 一节](https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/4.1.-Detection-objects#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA-button)。



## 关于 Alas

SRC 基于碧蓝航线脚本 [AzurLaneAutoScript](https://github.com/LmeSzinc/AzurLaneAutoScript) 开发，Alas 经过三年的发展现在已经达到一个高完成度，但也累积了不少屎山难以改动，我们希望在新项目上解决这些问题。

- 更新 OCR 库。Alas 在 cnocr==1.2.2 上训练了多个模型，但依赖的 [mxnet](https://github.com/apache/mxnet) 已经不怎么活跃了，机器学习发展迅速，新模型的速度和正确率都碾压旧模型。
- 配置文件 [pydantic](https://github.com/pydantic/pydantic) 化。自任务和调度器的概念加入后用户设置数量倍增，Alas 土制了一个代码生成器来完成配置文件的更新和访问，pydantic 将让这部分更加简洁。
- 更好的 Assets 管理。button_extract 帮助 Alas 轻易维护了 4000+ 模板图片，但它有严重的性能问题，对外服缺失 Assets 的提示也淹没在了大量垃圾 log 中。
- 减少对于碧蓝的耦合。Alas 框架和 Alas GUI 有对接其他游戏及其脚本的能力，但已经完成的明日方舟 [MAA](https://github.com/MaaAssistantArknights/MaaAssistantArknights) 插件和正在开发的 [fgo-py](https://github.com/hgjazhgj/FGO-py) 插件都发现了 Alas 与碧蓝航线游戏本身耦合严重的问题。


```

`README_en.md`:

```md
**| English | [简体中文](README.md) |**

# StarRailCopilot

Star Rail Instant Tea, a bot for Honkai: Star Rail, based on the next generation of ALAS framework.



## Features

- **Dungeons**: Dungeons, dungeons at double event
- **Rewards**: Complete daily quests if possible, Assignment, Nameless Hourner.
- **AFK Auto Farming**: Automatically launch emulators and games, do dungeons and quests in the background.



## Install [![](https://img.shields.io/github/downloads/LmeSzinc/StarRailCopilot/total?color=4e4c97)](https://github.com/LmeSzinc/StarRailCopilot/releases)

Refers to [Installation tutorial](https://github.com/LmeSzinc/StarRailCopilot/wiki/Installation_cn), including easy-installer manual, use manual, manual installation tutorial.

> **Why use emulators?** If you run a bot on the desktop client, game windows must stay at front. I guess you don't wanna baby-sit there without being able to move the mouse and keyboard while running the bot, so use the emulators.

> **How's the performance?** Lme's 8700k+1080ti using MuMu12 emulator with graphic settings very high  gets 40 fps. It shouldn't be a problem to run with maximum graphic settings and 60 fps if you have newer PC specs.



## Development

Discord https://discord.gg/aJkt3mKDEr QQ Group 752620927

- [Minimap Tracking](https://github.com/LmeSzinc/StarRailCopilot/wiki/MinimapTracking)

- Development Docs (menu is on sidebar): [Alas wiki](https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/1.-Start) (in Chinese). However, there is ton of code newly written, it is recommended to read the source code and historical commits.

- Development Road Map: [#10](https://github.com/LmeSzinc/StarRailCopilot/issues/10). Pull Requests are welcomed, just pick the part you interested to work on.

> **How to add multi-language or multi-server support?** Need assets updates, see ["Adding a Button" in development docs](https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/4.1.-Detection-objects#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA-button).



## About ALAS

SRC is based on an Azur Lane bot [AzurLaneAutoScript](https://github.com/LmeSzinc/AzurLaneAutoScript). After 3 years of development, ALAS has reached a high degree of completion, but it has also accumulated a lot of shit code that is difficult to change. We hope that Fix these issues on a new project.

- Update OCR. ALAS has trained multiple models on cnocr==1.2.2, but the dependent [mxnet](https://github.com/apache/mxnet) is no longer active, machine learning is developing rapidly, and the speed of new models and the correct rate crushes the old model.
- Converting setting files into [pydantic](https://github.com/pydantic/pydantic) models. Since the concept of task and scheduler was added, the number of user settings greatly increased. ALAS has built a code generator to implement setting read and update. pydantic will make things more elegantly.
- Better Assets management. button_extract helps ALAS to easily maintain 4000+ template images, but it has a serious performance issue, and the reminder of multi-server supported is also submerged in a large amount of meaningless logs.
- Reduced coupling to Azur Lane. The ALAS framework and ALAS GUI have the ability to interface with other games and their not, but the completed [MAA](https://github.com/MaaAssistantArknights/MaaAssistantArknights) plug-in for Arknights and [fgo-py](https: //github.com/hgjazhgj/FGO-py) plug-in under development have found serious coupling problems between ALAS and the Azur Lane game itself.
```

`assets/gui/css/alas-mobile.css`:

```css
.container-menu-collapsed {
    display: none;
}

.container-content-collapsed {
    display: none;
}

#pywebio-scope-log {
    font-size: .75rem !important;
}

#pywebio-scope-content {
    padding: .25rem;
    margin: 0
}

#pywebio-scope-navigator {
    display: none;
}

[id^="pywebio-scope-arg_container-"] {
    grid-auto-flow: row;
    grid-template-rows: auto auto;
}

[id^="pywebio-scope-arg_container-checkbox-"] {
    grid-auto-flow: column;
    grid-template-columns: 1fr 8rem;
    grid-template-rows: unset;
}

[id^="pywebio-scope-arg_container-storage-"] {
    grid-auto-flow: column;
    grid-template-columns: 1fr auto;
    grid-template-rows: 1fr auto;
}

#pywebio-scope-_groups {
    grid-template-columns: 0fr 1fr;
}

#pywebio-scope-overview {
    grid-auto-flow: row;
    grid-template-rows: 100% 100%;
}

#pywebio-scope-daemon-overview {
    grid-auto-flow: row;
    grid-template-rows: auto auto auto 1fr;
}

#pywebio-scope-schedulers {
    grid-auto-flow: row;
}

#pywebio-scope-running,
#pywebio-scope-pending,
#pywebio-scope-waiting,
#pywebio-scope-log {
    overflow-y: auto;
}

[id^="pywebio-scope-dashboard-row-"] {
    display: flex;
    flex-grow: 1;
    min-width: 4rem;
    max-width: 50%;
}

```

`assets/gui/css/alas-pc.css`:

```css
[id^="pywebio-scope-arg_container-"] {
    grid-auto-flow: column;
    grid-template-columns: 1fr 13rem;
}

[id^="pywebio-scope-arg_container-storage-"] {
    grid-auto-flow: column;
    grid-template-columns: 1fr auto;
    grid-template-rows: 1fr auto;
}

#pywebio-scope-overview {
    grid-auto-flow: column;
    grid-template-columns: minmax(16rem, 20rem) minmax(24rem, 1fr);
}

#pywebio-scope-daemon-overview {
    grid-auto-flow: column;
    grid-template-columns: 1fr minmax(25rem, 6fr) 1fr;
}

#pywebio-scope-schedulers {
    grid-auto-flow: row;
    grid-template-rows: auto 7.75rem minmax(7.75rem, 13rem) minmax(7.75rem, 1fr);
    height: 100%;
    overflow-y: auto;
}

#pywebio-scope-log-bar {
    display: flex;
    flex-direction: column;
    height: 11.5rem;
}

#pywebio-scope-dashboard {
    flex: 1;
}

#pywebio-scope-log-bar,
#pywebio-scope-log,
#pywebio-scope-daemon-overview #pywebio-scope-groups {
    overflow-y: auto;
}

#pywebio-scope-_daemon {
    display: grid;
    grid-auto-flow: row;
    grid-template-rows: auto minmax(6rem, auto) minmax(15rem, 1fr);
    height: 100%;
    overflow-y: auto;
}

#pywebio-scope-_daemon_upper {
    display: grid;
    grid-auto-flow: column;
    grid-template-columns: auto auto;
}

```

`assets/gui/css/alas.css`:

```css
details {
    border: unset !important;
    padding-bottom: unset !important;
    margin-bottom: .25rem !important;
}

details[open] > summary {
    border-bottom: unset !important;
}

details[open] > div {
    margin-left: 0.625rem;
}

summary {
    background-color: transparent !important;
    font-weight: 500;
}

body {
    margin-top: 0;
    margin-bottom: 0;
}

footer {
    display: none;
}

.btn:focus {
    box-shadow: unset;
}

.btn-menu {
    font-weight: 400;
    background-color: transparent;
    padding: .0625rem .75rem;
    border-radius: 0;
    border: 0 solid;
    transition: border .05s ease-in-out, padding .05s ease-in-out;
    white-space: pre-wrap;
    text-align: left;
}

.btn-menu:hover,
.btn-menu-active {
    font-weight: bold;
    border-left: .125rem solid;
    padding-right: .625rem;
    border-left: 3px solid;
}

.btn-aside {
    width: 4rem;
    font-weight: 400;
    font-size: .8rem;
    background-color: transparent;
    padding: 32px 0 0 7px;
    border-radius: 0;
    border: 0 solid;
    transition: border .1s ease-in-out, padding .1s ease-in-out
}

.btn-aside:hover,
.btn-aside-active {
    border-left: 4px solid;
    padding-left: 3px;
    font-weight: bold;
}

.btn-off,
.btn-on {
    border-radius: 0;
    margin: 0;
}

.btn-navigator {
    border-radius: 0;
    margin: 0 !important;
    width: 100%;
    text-align: left;
    transition: color 0s ease-in-out;
}

.btn-navigator:hover {
    font-weight: bold;
}

.toastify-center,
.toastify-right,
.toastify-left {
    margin-top: 3.3125rem;
}

.pywebio {
    padding-top: 0;
    padding-bottom: 0;
    min-height: unset;
}

#input-container {
    margin-bottom: 0;
}

#output-container {
    padding-left: 0;
    padding-right: 0;
    margin-bottom: 0;
    max-width: initial
}

.container {
    max-width: 100vh;
}

.hr-group {
    margin-top: .25rem !important;
    margin-bottom: .25rem !important;
}

.hr-task-group-box {
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
}

.hr-task-group-line {
    border-top: 0.125rem solid;
    flex-grow: 1;
}

.hr-task-group-text {
    margin: 0 0.5rem;
    font-size: 0.875rem;
}

input[type="checkbox"] {
    width: 1.25rem;
    height: 1.25rem;
}

label {
    display: inline;
}

.form-control {
    background-color: unset;
    border-radius: initial !important;
    border-width: 0;
    padding: 0 .5rem 0;
    margin-top: .125rem;
    height: auto !important;
}

.form-control[readonly] {
    pointer-events: none;
    border-bottom-color: transparent;
}

.form-control:focus {
    border-color: unset;
}

.form-control.is-invalid:focus {
    box-shadow: 0 0.06rem 0 #dc3545;
}

select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-attachment: scroll;
    background-position: right, center;
    background-repeat: no-repeat;
    background-size: 1rem;
}

select.form-control {
    padding-right: 1rem;
}

select.form-control.is-invalid {
    padding-right: 3rem !important;
    background-position: right 1.5rem center;
}

button.btn.dropdown-toggle {
    display: none;
}

.bootstrap-select > select {
    position: unset !important;
    bottom: unset !important;
    left: unset !important;
    width: 100% !important;
    height: unset !important;
    padding: 0 1rem 0 0.5rem !important;
    opacity: 1 !important;
    z-index: auto !important;
}

.invalid-feedback {
    margin-top: 0;
}

.CodeMirror {
    height: auto !important;
}

.CodeMirror-line {
    font-family: SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace !important;
}

.form-group {
    margin-bottom: 0 !important;
}

.alas-icon,
.alas-icon > image {
    width: 42px;
    height: 42px;
}

.aside-icon {
    width: 2rem;
    height: 2rem;
}

.container-log {
    border-radius: 0 !important;
    margin: .375rem !important;
    padding: 1rem !important;
}

code.rich-traceback {
    padding: 0;
}

pre.rich-traceback-code {
    padding-top: 0;
    padding-bottom: 0;
    font-family: Menlo, consolas, DejaVu Sans Mono, Courier New, monospace;
    font-size: 0.85rem;
    line-height: 1.2;
}

#pywebio-scope-ROOT {
    height: 100vh;
    display: grid;
    grid-auto-flow: row;
    grid-template-rows: auto 1fr;
}

#pywebio-scope-aside {
    z-index: 91;
    padding-left: .125rem;
    padding-right: .325rem;
    padding-top: 1rem;
    overflow-y: auto;
    flex-shrink: 0;
}

#pywebio-scope-menu {
    z-index: 90;
    padding-left: .5rem;
    padding-right: .5rem;
    padding-top: 1.2rem;
    overflow-y: auto;
    width: 12rem;
    flex-shrink: 0;
}

#pywebio-scope-content {
    overflow: auto;
    padding: .625rem;
    flex-grow: 1;
}

#pywebio-scope-header {
    z-index: 100;
    display: grid;
    grid-auto-flow: column;
    grid-template-columns: 4.4rem 4rem auto 1fr !important;
}

*[style*="--header-icon--"] {
    margin: .25rem auto .25rem;
    border-radius: 1.5rem;
}

*[style*="--header-text--"] {
    font-size: 1.5rem;
    font-weight: bold;
    margin: auto !important;
}

#pywebio-scope-header_title {
    margin: auto;
}

#pywebio-scope-header_title > p {
    font-size: 1.2rem;
    margin: auto;
    overflow: hidden;
    text-align: center;
}

#pywebio-scope-header_status {
    padding-top: 3px;
    margin-top: auto;
    margin-bottom: auto;
}

#pywebio-scope-header_status > div > div + div + p {
    margin: 0;
}

#pywebio-scope-contents {
    margin-top: 0;
    overflow-y: auto;
    display: flex;
}

#pywebio-scope-_groups {
    height: 100%;
    display: grid;
    grid-auto-flow: column;

    grid-template-columns: 1fr minmax(25rem, 5fr) 2fr;
}

#pywebio-scope-group__info > p {
    font-size: .80rem !important;
    font-weight: 400;
}

[id^="pywebio-scope-group_"] {
    margin-top: .5rem;
    margin-bottom: .5rem;
    padding: 1rem;
}

[id^="pywebio-scope-group_"] > p {
    font-size: 1.25rem;
    font-weight: 500;
    margin: 0 .25rem 0 .25rem !important;
}

[id^="pywebio-scope-group_"] > p + p {
    font-size: .80rem;
    margin: .2rem .25rem .1rem .25rem !important;
}

#pywebio-scope-groups {
    overflow-y: auto;
}

#pywebio-scope-groups:not(:has(*)) {
    display: none;
}

#pywebio-scope-navigator {
    margin: .5rem 1rem .5rem;
    height: min-content;
    max-width: 15rem;
}

#pywebio-scope-overview {
    height: 100%;
    overflow: auto;
    display: grid;
}

#pywebio-scope-running,
#pywebio-scope-pending,
#pywebio-scope-waiting,
#pywebio-scope-scheduler-bar,
#pywebio-scope-log-bar,
#pywebio-scope-log,
#pywebio-scope-daemon-overview #pywebio-scope-groups {
    font-weight: 500;
    margin: 0.3125rem;
    padding: 0.625rem;
}

#pywebio-scope-scheduler-bar,
#pywebio-scope-log-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

#pywebio-scope-log-title-btns {
    display: grid;
    grid-auto-flow: column;
}

#pywebio-scope-dashboard {
    display: flex;
    align-content: space-between;
    justify-content: flex-start;
    flex-flow: row wrap;
    overflow: auto;
    margin-top: .5rem;
}

#pywebio-scope-dashboard > i {
    flex-grow: 1;
    align-self: flex-end;
    width: 10rem;
}

[id^="pywebio-scope-dashboard-row-"] {
    display: flex;
    flex-grow: 1;
    width: 10rem;
}

.dashboard-icon {
    margin: .6rem .8rem 0 .6rem;
    width: .5rem;
    height: .5rem;
    border-radius: 50%;
}

*[style*="--dashboard-value--"] {
    font-size: 1rem;
    font-weight: 500;
    overflow-wrap: break-word;
}

*[style*="--dashboard-time--"] {
    font-size: 0.8rem;
    font-weight: 400;
    overflow-wrap: break-word;
}

[id^="pywebio-scope-dashboard-row-"] p {
    margin-bottom: 0;
}

[id^="pywebio-scope-dashboard-value-"] {
    display: flex;
    align-items: flex-end;
    height: 1.5rem;
}


#pywebio-scope-log {
    line-height: 1.2;
    font-size: 0.85rem;
    font-family: Menlo, consolas, DejaVu Sans Mono, Courier New, monospace;
    white-space: pre;
}

#pywebio-scope-running,
#pywebio-scope-pending,
#pywebio-scope-waiting {
    display: grid;
    grid-auto-flow: row;
    grid-template-rows: auto auto 1fr;
}

#pywebio-scope-running > p,
#pywebio-scope-pending > p,
#pywebio-scope-waiting > p {
    font-size: 1.25rem;
    font-weight: 500;
    margin: 0 0.625rem 0 !important;
}

#pywebio-scope-running_tasks,
#pywebio-scope-pending_tasks,
#pywebio-scope-waiting_tasks {
    overflow-y: auto;
    height: 100%;
}

#pywebio-scope-logs {
    display: grid;
    grid-auto-flow: column;

    height: 100%;
    overflow-y: auto;
    grid-template-rows: auto 1fr;

}

[id^="pywebio-scope-overview-task_"] {
    display: grid;
    grid-auto-flow: column;
    grid-template-columns: 1fr auto;
    margin: .125rem .625rem .125rem .375rem;
}

#pywebio-scope-daemon-overview {
    display: grid;
    height: 100%;
    overflow-y: auto;
}

#pywebio-scope-daemon-overview [id^="pywebio-scope-group_"] {
    margin-top: 0;
    margin-bottom: 0;
    padding: 0.3125rem;
}

#pywebio-scope-schedulers {
    display: grid;
}

.bs-title-option,
.form-check-input[id*="ch_S"] {
    display: none;
}

[id^="pywebio-scope-arg_container-"] {
    display: grid;
    margin: .125rem 0;
}

[id^="pywebio-scope-arg_container-checkbox-"],
[id^="pywebio-scope-arg_container-storage-"] {
    display: grid;
    margin: .375rem 0;
}

*[style*="--arg-title--"] {
    font-size: 1rem;
    font-weight: 500;
    margin: 0 .25rem !important;
    overflow-wrap: break-word;
}

*[style*="--arg-help--"] {
    font-size: .8rem;
    margin: .2rem .25rem .1rem !important;
    overflow-wrap: break-word;
}

*[style*="--overview-notask-text--"] {
    text-align: center;
    font-size: 0.875rem;
    color: darkgrey;
}

*[style*="--input--"] {
    margin: 0;
    padding-right: .25rem;
}

*[style*="--loading-grow--"] {
    width: 1.5rem;
    height: 1.5rem;
}

*[style*="--loading-border--"] {
    width: 1.5rem;
    height: 1.5rem;
    border: .2em solid currentColor;
    border-right-color: transparent;
}

*[style*="--loading-border-fill--"] {
    width: 1.5rem;
    height: 1.5rem;
    border: .2em solid currentColor;
}
```

`assets/gui/css/dark-alas.css`:

```css
.modal-body {
    background-color: #2f3136;
}

.btn-menu:hover,
.btn-menu-active {
    border-color: #7a77bb;
    color: #7a77bb;
}

.btn-aside:hover,
.btn-aside-active {
    border-color: #7a77bb;
    color: #7a77bb;
}

.btn-off {
    background-color: #36393f;
    border: 1px solid #202225;
}

.btn-on {
    background-color: #7a77bb;
    border: 1px solid #202225;
}

.btn-navigator {
    background-color: #2f3136;
}

.btn-navigator:hover {
    color: #7a77bb;
}

.hr-group {
    background-color: #40444b !important;
}

.hr-task-group-line {
    border-top-color: #adb5bd;
}

.hr-task-group-text {
    color: #adb5bd;
}

.form-control,
.bootstrap-select > select {
    border-bottom: .125rem solid #7a77bb;
}

.form-control:focus {
    background-color: #2f3136;
    border-color: #7a77bb;
    box-shadow: 0 0.06rem 0 #7a77bb;
}

input[type="checkbox"] {
    accent-color: #7a77bb;
}

select {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAADI1JREFUeF7tnVeTZlUVht9V5Y03lvdapVXeWMUfQL3BC2+8Qa0SkOyQMzPEGUKVoog5Y0TFnANmEQUVVBQjZhBMmAOCAdNrLd1Y37TTPeusc87X55z17tvZ65y9nrWfb+9ePd1t0BABEdiUgImNCIjA5gQkiHaHCGxBQIJoe4iABNEeEIEcAZ0gOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZAgOW6KKkJAghQptNLMEZisICQfD+AhAB4M4HYA15rZPbk0FTV3AiQfBOBRAA4EcAOAW9axHyYpCMlPAzhoQ1FvBrDHzK6be7G1/m4ESO4EsAvAQ1ci7wTwVDO7vtvTus2enCAkbwPwiC3SOMTM3tUtTc2eKwGS7wTw5C3Wf4CZfXus/CYlCMnLAewOJHuomTk4jQUTIPkOAIfsJ8W7ADxuLEmmJsitAA4I1vwwM3OAGgskQPLtAA4NprbbzK4Izu00bWqC/BnAAztkIEk6wJrL1I5yeFrXmNnBY+Q3NUHuAPDwjok+xcz800ZjAQRIvg3AYR1TudLMTusYE5o+NUHeC+CJoZXvPelwM3OwGjMmkJTDMx7tQ3JqgjwSwCfb9z+6llqSdCU2ofkk3+obPbGk683ssYm4UMikBPEVk/SWXrZDdYSZOWiNGREg+RYAhyeXfLCZXZOM3W/Y5ARpknhrL9uhOtLMHLjGDAj0kIPeAjazd4+Z5iQFkSRjlnw6zyb5ZgBHJFa0Fjl8XZMVpEniffBsh+ooM/MCaEyQAMk3ATgysbR/tZPjPYnYziGTFqRJ4i2/bIfqaDPzQmhMiEAPOf7Z5PBu51rG5AWRJGvZB2t7Cck3Ajgq8cK1yzH5K9YqRJLeAsx2qI4xMy+MxjYSIHk1gKMTS/hHOznel4jtFTKLE+T+DEl6KzDboZIkvbZKv+Aecvzd/0+Wma1djlmdIANJcqyZ+aeYxhoJkHwDgGMSr3Q5vJX7/kTsICGzOkFWJPHWYLZD5T9k4wXTWAMBkq8HcGziVX9rcnwgETtYyCwF8exJeosw26GSJINtoc0f1EOO+9q1alvlmOUVa7UcPSXZYWb+6aYxAgGSr/MfiU082uXwa9Vo/32ky5pme4KsXLe8ZZjtUB1nZl5IjQEJ9JDjr02ODw64nF6Pmr0g7bolSXptg+GCSV4FYEfiiX9p16rJyDH7K9aG65b317MdquPNzAur0YMAydcCOC7xCJfDr1UfSsSOGrKIE2TluuWtxGyH6gQz8wJrJAj0kMN/zNrl+HDitaOHLEqQdt2SJKNvm71fQPI1AI5PvPZP7Vo1STkWdcXacN3yvnu2Q3WimXnBNQIESL4awAmBqRunuBx+cnwkEbu2kMWdICvXLW8xZjtUJ5mZF15jCwI95Li3yfHRqQNerCDtuiVJRtqBJF8F4MTE42cjx2KvWBuuW95yzHaoTjYz3wgaKwRIvhLASQko/svH/Vr1sUTstoQs+gRZuW556zHboZIkw8jxx/YF+WzkKHGCDCTJKWbmn5qlB8lXADg5AcHl8JPj44nYbQ0pcYKsSOKtyGyH6lQz8w1ScvSQ4+4mxyfmCK6UIO0Ld29JZjtUJSUheSWAUxIb/A/tWjVLOUpdsTZ84d5HktPMzDdMiUHy5QBOTSTrcvi16tpE7GRCyp0gK9ctb1FmO1Snm5lvnEWPHnL8vsnhv0Z21qOsIO26JUk22b4kXwYg8xvTf9euVbOXo+wVa8N1y/v52Q7VGWbmG2lRg+RLAZyeSMrl8GvVYv6OZOkTZOW65a3LbIfqTDPzDbWI0UOO3zY5PrUIEC0JCdJAkCwvCcmXADgjscF/065Vi5JDV6wNO4GktzKzHaqzzMw32CwHyRcDODOxeJfDr1X+p7sXN3SC/L8k3tLMdqjONjPfaLMaPeT4dZNj1L9Vvp0wJcg+6JMsIwnJFwE4K7EJFy+Hrlhb7AqS3uLMdqh2mplvvEkPki8EcHZikb9qJ8cNidhZhegE2VoSb3VmO1STlqSHHL9sX5AvXg6dIIHPMpJ9JNllZv4pPalB8gUAdiYW5XL4F+SfScTOMkQnSKBsJL31me1QnWNmviEnMXrI8Ysmx2cnkciaFiFBgqBJegs026GahCQknw9gVzDl1Wk/b9eqUnLoitVxp/SU5Fwz8w26LYPk8wCck3i5y+HXqs8lYmcfohOkYwlJeks026E6z8x8o6519JDjribHjWtd8IReJkESxZiTJCSfC+DcRJo/a9eqsnLoipXYNfeHkPTvH2Q7VOebmW/cUQfJ5wA4L/ESl8OvVTclYhcVohOkRzlJeqs026G6wMx8A48yesjx0ybH50dZ2MweKkF6FmyKkpB8NoDzE6n9pF2rJEeDJ0ESu2hjCElvnWY7VBeamW/oQQbJKwBckHiYy+HXqi8kYhcbIkEGKi1Jb6FmO1SDSNJDjh+3k0NybNgPEmQgQfwxPSXZbWb+6Z8aJJ8F4MJE8I+aHF9MxC4+RIIMXGKS3lLNdqj2mJlv9E6D5OUAdncK+u9kl8OvVTcnYkuESJARykzSW6vZDlUnSXrIcWc7OSTHFntAgowgSLtu9ZHkIjPzU2HLQfKZAPbsb94+/t3l8JPjS4nYUiESZMRyk/RWa7ZDdbGZuQD7HCSfAeCixPLvaHJ8ORFbLkSCjFzyMSTpIccP27VKcgTrLkGCoPpMI+nfl8h2qC4xMz8t/jNIXgbg4sR6XA6/Vt2SiC0bIkHWVHqS3oLt3KFqy7vUzC7rIcftTY6vrCndxbxGgqyxlD0l8V+tc1Biube1a5XkSMCTIAlofUJI+vcr9tuh6vOOlViXw69VXx3oeeUeI0G2oeQkvTW7aYdqoCX9oMnxtYGeV/IxEmSbyj6yJN9v1yrJ0bO+EqQnwD7hJP37GP/rUPV51kqsy+HXqq8P9LzSj5Eg21x+kt6y9dbtEON77eSQHEPQBCBBBgLZ5zEDSfLdJsc3+qxFsXsTkCAT2REkLwHw9ORyXA6/Vn0zGa+wTQhIkAltDZKXAnhaxyV9p50ckqMjuMh0CRKhtMY5HSXxVu6TzOzWNS6x1KskyATLHfylC3cDeIyZfWuCKSxmSRJkoqUkeRWAHZss714AB0qO8YsnQcZnnH4DyUcDuBrAwwA8AMA9APyXuT3BzO5LP1iBYQISJIxKEysSkCAVq66cwwQkSBiVJlYkIEEqVl05hwlIkDAqTaxIQIJUrLpyDhOQIGFUmliRgASpWHXlHCYgQcKoNLEiAQlSserKOUxAgoRRaWJFAhKkYtWVc5iABAmj0sSKBCRIxaor5zABCRJGpYkVCUiQilVXzmECEiSMShMrEpAgFauunMMEJEgYlSZWJCBBKlZdOYcJSJAwKk2sSECCVKy6cg4TkCBhVJpYkYAEqVh15RwmIEHCqDSxIgEJUrHqyjlMQIKEUWliRQISpGLVlXOYgAQJo9LEigQkSMWqK+cwAQkSRqWJFQlIkIpVV85hAhIkjEoTKxKQIBWrrpzDBCRIGJUmViQgQSpWXTmHCUiQMCpNrEhAglSsunIOE5AgYVSaWJGABKlYdeUcJiBBwqg0sSIBCVKx6so5TECChFFpYkUCEqRi1ZVzmIAECaPSxIoEJEjFqivnMAEJEkaliRUJSJCKVVfOYQISJIxKEysSkCAVq66cwwQkSBiVJlYkIEEqVl05hwlIkDAqTaxIQIJUrLpyDhOQIGFUmliRgASpWHXlHCYgQcKoNLEiAQlSserKOUxAgoRRaWJFAhKkYtWVc5iABAmj0sSKBCRIxaor5zCBfwOoUQv2LE3rzAAAAABJRU5ErkJggg==");
}

.state > select {
    border-bottom: 0;
    background-image: none;
    pointer-events: none;
}

.state-bold > select {
    font-weight: bold;
    color: #7a77bb;
}

.state-light > select {
    color: #777777;
}

[id^="pywebio-scope-arg_stored-stored-value-"] > div > input {
    border-bottom: none;
    background-color: transparent !important;
}

textarea {
    border: 1px solid #21262d;
}

.CodeMirror-wrap {
    border: 1px solid #21262d;
}

.aside-icon > path {
    fill: #c9d1d9;
}

.container-log {
    background-color: #2f3136 !important;
    border: 1px solid #21262d;
}

pre.rich-traceback-code {
    color: #cccccc;
    background-color: #1e1e1e;
}

#pywebio-scope-content {
    background-color: #36393f;
}

[id^="pywebio-scope-group_"] {
    background-color: #2f3136;
    border: 1px solid #21262d;
}

#pywebio-scope-daemon-overview [id^="pywebio-scope-group_"] {
    border: 0;
}

#pywebio-scope-aside {
    background-color: #202225;
    border-right: 1px solid #21262d;
}

#pywebio-scope-menu {
    background-color: #2f3136;
    border-right: 1px solid #21262d;
}

#pywebio-scope-navigator {
    border: 1px solid #21262d;
    color: #c9d1d9;
}

#pywebio-scope-scheduler-bar,
#pywebio-scope-log-bar,
#pywebio-scope-log,
#pywebio-scope-running,
#pywebio-scope-pending,
#pywebio-scope-waiting,
#pywebio-scope-daemon-overview #pywebio-scope-groups {
    background-color: #2f3136;
    border: 1px solid #21262d;
}

#pywebio-scope-header {
    background-color: #202225;
    border-bottom: 1px solid #36393f;
}

*[style*="--arg-help--"],
[id^="pywebio-scope-group_"] > p + p {
    color: #adb5bd;
}

*[style*="--dashboard-time--"] {
    color: #adb5bd;
}
```

`assets/gui/css/light-alas.css`:

```css
.btn-menu:hover,
.btn-menu-active {
    border-color: #4e4c97;
    color: #4e4c97;
}

.btn-aside:hover,
.btn-aside-active {
    border-color: #4e4c97;
    color: #4e4c97;
}

.btn-off {
    background-color: white;
    border: 1px solid lightgrey;
}

.btn-on {
    background-color: #4e4c97;
    border: 1px solid lightgrey;
    color: white;
}

.btn-on:hover {
    color: white;
}

.btn-navigator {
    background-color: white;
}

.btn-navigator:hover {
    color: #4e4c97;
}

.hr-group {
    background-color: #eaecef !important;
}

.hr-task-group-line {
    border-top-color: #d0d0d0;
}

.hr-task-group-text {
    color: #777777;
}

.form-control,
.bootstrap-select > select {
    border-bottom: .125rem solid #4e4c97;
}

.form-control:focus {
    background-color: white;
    border-color: #4e4c97;
    box-shadow: 0 0.06rem 0 #4e4c97;
}

input[type="checkbox"] {
    accent-color: #7a77bb;
}

select {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAC85JREFUeF7tnUezdVURhh+qmDixnGOVVjmxyj+AOsGBEyeGKrMYMGfBCIYqE2LOWVTMOeeMGRQjZhBMmAOCAXO9sE7V+eC711699z5n791vj3vtu/vp9Zy1bh+43zE4TMAEDiRwjNmYgAkcTMCCeHeYwCEELIi3hwlYEO8BE8gR8AmS4+ZVRQhYkCKNdpk5AhYkx82rihCwIEUa7TJzBCxIjptXFSFgQYo02mXmCFiQHDevKkLAghRptMvMEbAgOW5eVYSABSnSaJeZI2BBcty8qggBC1Kk0S4zR8CC5Lh5VRECFqRIo11mjoAFyXHzqiIELEiRRrvMHAELkuPmVUUIWJAijXaZOQIWJMfNq4oQsCBFGu0ycwQsSI6bVxUhYEGKNNpl5ghYkBw3rypCwIIUabTLzBGwIDluXlWEgAUp0miXmSNgQXLcvKoIAQtSpNEuM0fAguS4eVURAhakSKNdZo6ABclx86oiBCxIkUa7zBwBC5Lj5lVFCFiQIo12mTkCFiTHzauKELAgRRrtMnMELEiOm1cVIWBBijTaZeYIWJAcN68qQsCCFGm0y8wRsCA5bl5VhIAFKdJol5kjYEFy3LyqCAELUqTRLjNHwILkuHlVEQIWpEijXWaOgAXJcfOqIgQsSJFGu8wcAQuS4+ZVRQhYkCKNdpk5AhYkx82rihCwIEUa7TJzBCxIjptXFSFgQYo02mXmCFiQHDevKkLAghRptMvMEZizILcAjgOuA1wIfBy4LFemV62AwLWBGwPHA2cD5+1iP8xVkE8DJ1ytqecCpwGfXEGzXUIfgZOBU4Drbi27GLgH8Jm+R/Vlz1GQC4AbHFLG7YC395Xp7AUTeBtw20Pe/0bAd6eqb26CnA6cGij29oDAOdZN4K2APhAPi0uAm08lydwEOR/QJ0Ik7gAIoGOdBN4C6IMwEvpQPSOS2JszN0H+ClyrowhL0gFrQak9cqis9wG3nKK+uQlyEXD9zkLvCAioYx0E3gzog68nXgI8sGdBNHdugrwLuHX05bfy7gQIrGPZBDJyqOLJPiTnJsgNgU+07z96W21JeonNK/9NbaP3vpXGvDfrXRTNn5sgem+N9LITqjsDAu1YFoE3AvqAy4R+99DvIJPEHAVRoRrtZSdUdwEE3LEMAlk5/tv2yTumLHOugliSKbs+n2e/AdCp3xs7kUMvNWdB9H6ag2cnVCcCaoBjngReD+i0743/tJPjnb0LM/lzF0Q1aeSXnVDdFVAjHPMikJXj300OTTt3EksQxJLsZCvs7Ie8DtDp3hs7l2MJV6xtiJp1ZydUdwPUGMd+CZwF6FTvjX+1k+PdvQuH5i/lBNnUqVFgdkJlSYbulmHrs3L8s/0uunM5lnaCjCHJ3QE1yrFbAq8F9AHVG5JDI//39C4cK39pJ8imbo0GsxMq/U82aphjNwReA+iDqTf+0eR4b+/CMfOXKogYaESYnVBZkjF30cHPyspxRbtW7VWOpV6xttsxRJKTADXQMQ2BV7f/Jbb36ZJD16rJ/vORnhda8gmyqVMjw+yE6p6AGukYl0BWjr83Od4/7uvkn7YGQVS9JcnvgbFXngnodO6Nv7Vr1WzkWMMVa7sJmq9nJ1T3AtRYxzACrwJ0KveG5NC16gO9C6fOX8sJsuGkUWJ2QnVvQA125Ahk5dD/Zi05Ppj7sdOuWpsgomVJpt0zR3v6KwGdwr3xl3atmqUca7tibTdHc/fshOo+gBruiBF4BaDTtzckh06OD/Uu3GX+Gk+QDT9915GdUN0XUOMdhxPIynF5k+PDcwe8ZkHE3pJMtwNfDui07Y3FyLHmK9Z20zRyzE6o7gdoIziOJPAyQKdsb+iPj+ta9ZHehfvKX/sJsuGq0WN2QmVJxpHjz+0X8sXIUeUEGUOS+wP61KweLwX0gdEbkkMnx0d7F+47v8oJsuGsUWR2QvUAQBukamTluLTJ8bElgqsmiHqkkWR2QlVVEv1pT52ivfGndq1apBzVrljbzR0iif4GrDZMlXgxoA+G3pAculbpXwZbbFQ8QTbN0ogyO6F6EKCNs/bIyvHHJof+jOyio7IgapwlOXj7vij5F9P/0K5Vi5ej8hVre1tonp+dUD0Y0EZaW7wQ0CnZG5JD16rV/DuS1U+QzQbQ6DI7oXoIoA21lsjK8fsmx6fWAsInyJGdtCTwAkCnYm/8rl2rViWHBbnmNtAoMzuheihXbbClxvMBnYa9ITl0rdI/3b268BXrmi3VSDM7oXoYoI22tMjK8dsmx6T/Vvk+YVqQo9OvJMnzAJ1+vbF6OXzFOnxL6AvB7ITqZEAbb+7xXECnXm/8pp0cZ/cuXFq+T5DDO6ZRZ3ZCNXdJsnL8uv1Cvno5fILEPs6GSHIKoI04t3gOIIF7Q3LoF/LP9i5car5PkFjnNPrMTqgeDmhDziWycvyqyfG5uRSyi/ewIHHKGoFmJ1RzkeTZgE613vhlu1aVksNXrN5tctX3BFlJHgFog+4rngVI1N6QHLpWfb534RryfYL0d1Ej0eyE6pGANuquIyvHJU2OL+z6hefy8yxIrhNLkuSZgE6v3vhFu1aVlcNXrN4tc2S+vj/ITqgeBWjjTh3PAHRq9Ybk0LXqi70L15bvE2RYRzUqzU6oHg1oA08VWTl+3uT40lQvtqTnWpDh3ZqjJE8HdEr1xs/atcpyNHIWpHcLHT1fo9PshOoxgDb0WHEGoNOpNySHrlVf7l245nwLMl53NULNTqjGkiQrx0/byWE5rrYfLMh4guhJQyQ5FdAGz8bTAInWGz9pcpzTu7BCvgUZv8saqWYnVKcB2ui9cTogwXpDcuhadW7vwir5FmSaTmu0mp1Q9UqSlePidnJYjkP2gAWZRhA9dYgkjwW08f9fPBWQUL0hOXRyfKV3YbV8CzJtxzVqzU6oHgdIgIPiKYBE6o2Lmhxf7V1YMd+CTN/1KSTJyvHjdq2yHMG+W5AgqIFp+l4iO6F6PCAhNvFkQKdLb0gOXavO611YOd+C7K77GsFmJlR6wycAEiMrx4VNjq/trtx1/CQLsts+DpFEf1rnhMTrXtCuVZYjAc+CJKANXKLvKyITqoE/5srlkkPXqq+P8bCKz7Ag++m6RrOHTajGeKsfNTm+McbDqj7Dguyv81NK8sN2rbIcA/trQQYCHLhc32NsT6gGPu7K5ZJD16pvjvGw6s+wIPvfARrZajo1RvygnRyWYwyagAUZCeTAx4whyfebHN8a+C5evkXAgsxnO+gLwSclX0dy6Fr17eR6LzuAgAWZ19bQF4JP7Hyl77WTw3J0goukW5AIpd3m9EiiUe5tgPN3+4p1fpoFmWevI3904VLgpsB35lnCOt7Kgsy3j2cCJx3wepcDx1uO6ZtnQaZnPOQn3AQ4C7gecCxwWftjbrcCrhjyYK+NEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEbAgMU7OKkrAghRtvMuOEfgf9hZk2PNubUAAAAAASUVORK5CYII=");
}

.state > select {
    border-bottom: 0;
    background-image: none;
    pointer-events: none;
}

.state-bold > select {
    font-weight: bold;
    color: #7a77bb;
}

.state-light > select {
    color: #777777;
}

[id^="pywebio-scope-arg_stored-stored-value-"] > div > input {
    border-bottom: none;
    background-color: transparent !important;
}

textarea {
    border: 1px solid lightgrey;
}

.CodeMirror-wrap {
    border: 1px solid lightgrey;
}

.aside-icon > path {
    fill: #2c2c2c;
}

.container-log {
    background-color: white !important;
    border: 1px solid lightgrey;
}

pre.rich-traceback-code {
    background-color: #ffffff;
    color: #616161;
}

#pywebio-scope-content {
    background-color: #f9f9f9;
}

[id^="pywebio-scope-group_"] {
    background-color: white;
    border: 1px solid lightgrey;
}

#pywebio-scope-daemon-overview [id^="pywebio-scope-group_"] {
    border: 0;
}

#pywebio-scope-aside {
    background-color: white;
    border-right: 1px solid lightgrey;
}

#pywebio-scope-menu {
    box-shadow: 0 0 8px rgba(0, 0, 0, .1);
    background-color: white;
}

#pywebio-scope-navigator {
    border: 1px solid lightgrey;
}

#pywebio-scope-scheduler-bar,
#pywebio-scope-log-bar,
#pywebio-scope-log,
#pywebio-scope-running,
#pywebio-scope-pending,
#pywebio-scope-waiting,
#pywebio-scope-daemon-overview #pywebio-scope-groups {
    background-color: white;
    border: 1px solid lightgrey;
}

#pywebio-scope-header {
    box-shadow: 0 0 8px rgba(0, 0, 0, .2);
}

*[style*="--arg-help--"],
[id^="pywebio-scope-group_"] > p + p {
    color: #777777;
}

*[style*="--dashboard-time--"] {
    color: #777777;
}
```

`assets/gui/icon/add.svg`:

```svg
<svg class="aside-icon aside-icon-add" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M544 160v320h320v64H544v320h-64V544H160v-64h320V160h64z"></path></svg>
```

`assets/gui/icon/alas.svg`:

```svg
<svg class="alas-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAACjlBMVEV6d7v///96d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6d7t6
d7t6d7t6d7t6d7t6d7t6d7t6d7uLiMSMicSNisWOi8Wlo9G1tNmurNaTkcjt7fb////h4PCamMy0
s9m4ttqhns/Pzub6+vy7udykotDEwuHJyOOsqtWPjMb8/P2Xlcqbmczr6/XMy+W9vN2Ylsr4+PuS
kMeVk8nQz+fT0unf3u7Z2eyRjsfAv9+cms39/f7Fw+Hw8PiioM/39vvR0Oj7+/2rqdSjodDBwODn
5vPX1uuWlMmpp9OzstiQjcbV1Oq3tdrs7PW+vd7o6PO6uNyoptKZl8vl5PLc2+2gnc7W1erS0ejI
xuPCweCUksi/vt7k4/Gvrdb08/mdm83a2uywrtfx8fjy8vm8ut3e3e6fnM6ysdjd3O3p6fTKyeTu
7vatq9XNzOX29fqnpdKqqNTU0+nv7/empNHq6vTi4fDm5fL19PqxsNf+/v7LyuTOzea5t9v5+fzH
xeLg3+/GxOLj4vHY2OtVd+yeAAAAaXRSTlMAABs1TmZ7kKK0w9Hd5/D3/BU6XoHC4RlGcpzF7SdZ
i7vrUIe98i1ppN4xcbDvJq0LU5ngeMFHlAlaqfkSZLdovGNYsUWh/SuJa8uoGn7iTbMW5kKs1yWS
tdYQgvQoPbJPxl9s5XXxfAPQ0RgaAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAALEwAACxMBAJqcGAAA
AAd0SU1FB+cJCREeM8H4O+8AABatSURBVHja3V35Y0xXG76DEEusQUSRomI3VGOvailB7LHFvs+9
E8SINSQEMWmJWGuLJUqi0VKpNdTWiqWxl/4338wkc89775y7nHPPvYfv+c3rZM77PPfsy3sEwWHU
ql0nqm696PoNGjaKadykqcfTtEnjmEYNG9SPrlc3qk7tWk774xyaNW8RG92ylccArVpGx7Zo3oy3
t2zROq5NfNvPjKhDfNY2vk1ca95+M0G79h0SPifhjvB5Qof27Xj7bwmtO3bq/AUd+TC+6Nyp4yda
Erokdu1mjXwY3bomduHNhhTde/TsxYZ9NXr17NGdNyfz6J3Yhyn7Gg36JPbmzcwM3H37fcmefTW+
7NfXzZufAbr0/8ou9tX4qv/H3BwkDTAc51hHqwFJvHniMXDQ4CH20w9iyOBBA3mzjcDQYV87w74a
Xw8bypuxkv7wb5ykH8Q3wz8eCdwjEpymH0TCCDdv5tX49jse9IP47lve3AMYOep7Xvw9nu9HjeRM
f/SYGH70g4gZM5ojfXfyWL70gxib7ObFP24cb/LVGBfHhf74lAm8mYcxIWW88/wnTuJNG2LSRIfp
T06ZwpuzElNSJjvJf+o03oQjMW2qc/yTU3mzxSE12SH602fwpqqFGdOd4J80kzdPbcx0YKkgahZv
lnqYFWUz/dlpc3hz1MectNl28p8bz5ugMeLn2sd/3nze7Mxg/jy7+C9Y6CgRMQCqP1y4wKUNC/wX
We/9JW+6FEnUu3LV6gw1V3HlGp9vbSaVBKmL7BBg8RKSr5e5bv0GNVcpY6PPt2mzV5U0yxfEFiVV
cWvI6sumUmDJYvYCLF1G4EDO2qDz27YrvJdyqzntSFd+6WqrbydMLO6qsfryaATwLFvKWoDlJGv+
3t013vsh//wwpx9A0RDzwlZfLrBmy9YfqQTwDFnOVIAVsSSZi3vC3u8FXzVH5uTLQNYCZN2HfqAQ
WffTCeDxxK5gJ8CKNCL+B5D7qL5LB5H1ELIeRtYjOFV8P9EK4ElbwUwAsu9/FLhfIDM9AqzH5LQb
gfW4nPYEsJ6kFsATy0qA5UTZFgHvfeH2TjoFreEqIDeAijZAPA2thfQCeJazEWAp0Z6ntBt4L7fs
ZyCns+FG0AutR8Jpc6B1F91YqBpDlrIQYDFJ/+cRV0H3/WFVtgLj/nCxEIuB9VxYFfFnYP3RCv9A
b7jYugCLSMY/qs+XG3Y/A6eKMq08OEgHxvMSUeaRWLLIqgALyMa/4gXgfkmYv7QFWEtlUrBdQEPh
UzhVqJG6wJoA8wjnPxLw/oLMCX7UEpm/eBH0C3Ja8RdkpZsJKLFwnhUB5pLOf8uQ93uQ9xtAU4cK
NWgYL6G0QKxfGfAPzI7n0gswm3j94zfkfgGyXsZas5D1CrLmggLAgr/HEz+bWgCiAWAQIuoDL6PP
512L+kXQqv0uW6+CT10uW//wEuSshzRaAaKI1/9Aqc7HWq+BxNdl6w1gPS5bj5vN1QhzougESJpF
nFWm7P0m8FFBJwiadfEmVpZfZWs5KwE8s5JoBJhOsf6PurCdWFlugRoAOgzQBHhQJ3DIbK7GmDmd
QgCa/Z91sve3gfUa6hmAFQjgB+YK2XqHnQCeGeQCJNPkg8bBd4EV9Y1/Ams6XoBLsjWLoQCeZFIB
plKtgBbL3q8HVrS8cQ9UgfRbsrkIJEazhlUsBUidSibAZLr9b7SSdR9Y89G3hj0bmvWXACsqRNeZ
jIPCmDaZSIAUulxQYX+AXwwD637gW28EiQ+hxDksBfCkkAgwkfL8xxVsvQZLBLBvf4ilCpbD2PWD
QUyZaF6A8bTnf0DLXgzMj2Tr/jPICmrGKjBs3IESW50MKzFpvGkBKCuAYiq3CXzVEkQVDPrEv7Bt
wy5k/ZupANWVwAz/OPrzb6uR94+RFYyFtwFdNiPzQ2QF1egW02bQMyHOnABuC+cfAdW/kPdSJTKf
Qon9yPoTKu3iXmTewFQAzzi3KQGSLWQhonGMbyUy5yLrEzQdEIEuT7GJz7MtAsHhkDH/0ZbO/6Jx
P+wJpXvIDAZ425F1B0osPkNmRksCYYwdbUKAMZayEMGmBhjMg94dLHSKz5G5DCUGC0gVjIvAGGMB
Rlo8/w68/wcUgSpkLkWJ0TQJjpK9aKKsGCUzQIzx/YJRFrPwrsEWYNATngRF4By2vICF4SOMi8Ao
I/7fWr7/AamC8c1+7FcF64JgJzkHJM4gydsY3xvcsnFbv/8D98ZKkRmt9fk2giKwCavLC2T9jXER
+M6tK8AIBlk8RN5vxS53w3kCmj/C0l6wH5uYCUbo8R/K4v4b3PJEX1UCW34HUBGQ8LqADSZma6M1
SNC7bzicRQ5wfxQcfYL7g2ewiUF5AXPCbWeIcjfGcJ0CwOb+J760S2jB27dZwiZG8wRxH7KynRV7
PN9oF4FhbHKAG9xgaQwefEGzPxHocgObeA3jZtAzTIv/QFb3n8GU6CWo7q+QGSx5g2WBc2A8vBOZ
r5DkbQJfa909H8QqB/E+8h4MhkAr8Aj0hIAq2DkEs+KHBFmbwiANAQYzywFQ3YWs0mtcHYBTIjCB
BLPi16wFGIznn8Qu/oF4VvYeroTnIqpggOe9Klvhdgo6bHaQdSMwBH+xZADDLO7gujyPd5tsPQYS
o5WhS8CKjpD6WG0TyxiA49+FZfwPMBjaDszoWOALYEUTgmfAClpStuvjAbTCRWLpzzIHsKgBtwKK
sYW9VLbuxmtYYDJX8+gfyd/NNv7Nj7L3cF0PrZleBla0NggPBksvbRTgK3eEAH3Z5oC2AuAuN16A
IudLgKdvhAD92GaAugGw1gXmOPuAFS0iwTYADQS2MW8DPJ5+av692ca/EtG6UCkwoxPTsBF8I1sr
gfWhbN3Bnr/nS3VcskS2vw+mOKD8gpUeUDHEB7imUfxHtu40n695JKoE6MP258EqMBgIgXsQYCAE
RoJAFjAMOGqHAH2U/LuzjX+H7ozA85ISOhe2G8wF/kRU/ch6HmdliF7K+IQ92P46+NTrEH+wCH4A
MX2KrM/RMVqwTnKP9Ui4Gj0UAvRk+tvpfyD30XlBuPSBRkdg1ufLxikIrEzRUzEMZloD4EUYtJoh
ofNfvir0qcEmCBryiuAqEfuZQDV6weEw2z7gb+A92gwGW0a+1bIVfurbsliwWNy1pwYo+4GuLH9Y
+ge4jxo7cGnkLZohgh0AMG8EW6yb2B4TAeiK+LfuxvKH4UWQEvT5TgIrSgz2S8AtWXByIJckayJ0
Q/GKOzL9YdDYXQTF951svQ4+KhoE7IX3SeWB5AW7KkAAHWUBOjH9XRG1dn5gRrUdDu3Ff2uMuxXL
/+FhEOvtcQU6yQJ0ZvvDuWGmT6H7UniGnKeo1TVd5v58xU/UXJ59ZVsDEETnMP92FuN/qyHWzHpf
KD9feujiyKZSFSlp1QnfuZ/V2z+idOfF0Qw7v7/H80U4cnt71r8s5m3cXbVxu9p9qeDpw0LMNxW9
NnX1RmhfI0AHPtnzR4caAbiERP0YkFAzCqB8/+DTx+fVI4E43n7wQ3Uoyja83eCHNiEBPoHoUHYh
PiRAW95u8EPbIP9mRO/f/H/hs+B7Rs15e8ETzQMCtODtBE+0EAhDxPy/ITYgQDRvJ3giOiBAS95O
8ETLgAAOvIvy8aKVINTi7YMhJCk950xOek7OGX9GaWZhZu61sg3HnpYcXf1i3frbVnfOawm1+bDy
SpLkTQ8wK/Bfyd+el1lYtrLk8anHq2+cfrPr9s/H399/feTS9YoP59fcPPyTTwfXLPpRW6jDipIU
pBTgFPpHQWZuYW7hnbJDWX+fyi6/u2795p+Pv7v/+sezJyv2fDixo6rqpY8NrETaCqKOEEXxV6Wr
1q2/cHvLlvfvXx85+1/F2ov3Htx6W7P1/Ta05FNpjZZ5lFG4DxEl1KX4q3d6LoUEOGKWgFVYDTNR
V6hH8Ve3Px4BVlK4D1GPahx0Qc+l0ALnI7MEeJeAaKE+xV+t0nMpJMA7swSs4urmLfffHTh+ofxx
VqbfS76NUF9oQCHAaT2XQj3z72YJsMUflevLcog2ExoIDVmXAH8wxT6zLtuA8+uLzGvQUGhEIUC5
Xv6h40+bzXprD6pOnzGpQSOB5qbsC73MQyXggllXbcNrc8UgRmhMIcBRvZxDAhTz5h/A3kwTbWJj
oQmFAE/18g1VgdNmvbQVj4wbxCZCUwoBsvRyDe1z3+DNvQanjBRoKlDwh+dAIxG6LLrarId242S6
gQRUApTpZRkKB59t1kH7UaqvAFUVuIbP6p/y7FMrD4Xmwzl5RVf8GbvIXKXB4V0Hfnv1+kjl3udP
tJLoVoOmVI1gLjajsxEZifaPiFHMMlE6k1n+Ay7NGx0FmlB1g6VYXzDRLvJ8dkP1/IAolR6PTLRP
W4HGVAMhPC/MvQ6vz26cjchTzCl5pk6lHaE8hmooXIRz5RkmDLS41piCNVzH+ScdW6NK9kJLgUZU
k6F8nCvYex3r7RagAu+hVz0SK9NQoCHVdDgD5wr2ivMhExws4YOGi2L+RWVCPz5dA6oFET/OlVLT
KVnioqaTXuWaxEH8xKA+1ZJYAc4VbCR47wlTNOihc6NMUs7aN2MViKZaFMUJcBNfyexeGNC7Uqd8
10NxiVlGPaplcVzB1rjkv8EcD2rc1PNTUozIT+I+UV2qjRFcCbiLT5pjkggttuk6KikG47hIzVFU
W2M4Vhp7VOBWpC0weIfJex2kxUUnrEO1OYob4GlF+7lslgqlAAarPoraivlItam2xyUCR7LMUqGE
gQDiY5B2b2QRqEV1QAIjQKVW2gLTVGwRwCOBoI2R9/Bb0R2RkfZH+KEZCFysMk+GBoZXDUA4k8ig
VC0pD0m9jfBDO/7rb+bJ0MDwJR4vmBteVdeBaMpjcpFfVfuoSgkBGwoYB1d4rJM6lvKg5M0IP7Sr
YoZ5MjQwjjUH7yyrC2oLyqOy59Vu6ITCxzQYzgoggrHABdX/Nac8LB0xxdmsk/g1CR9i5Bt7CzYp
VK8Xhg5L0xyXf65245hOYnuXyE08ygpuIh9WVtW2tBcmKtRu6MV+zSfhQ4xSY2/hyF3Za8bTXpnZ
q3ZDbzgiEdCxRQDogLLJaEN7aUotwB69vQfR1jNzJqqACN57VQZnjKO9NndW5cU+3dS27pSaCb8O
Oi3F5kXNtTmKi5Pqhv2oburtRIwIYSa+AOi0FMtCCdRXZ1+pvND/DOlEjAhh5qws2CVQCBC+Okt+
eVo9vtcfj3pPElFiLgAciinagPDlafLr81uUThg9BGHniSETVQAfuhhcnycPoKA6BffeIHkZESUy
lBp7C3by9sPJoxxAgTyEhuqTGsW9tXNl1MRQGKyOP4d2FEKDOIiKqmMzqodiBRkpEvgNnYWBixVl
FQVRIQ6jo9xxMI74+MY+AYzXA+ASLnj8CIbRIQ6kpKzUzwyXpWxsBIzPAsI1MT+wg0BKxKG0lAcE
fjVMX0hGigBvDQUQQSf8BHZXMJQWaTA1ZatWZXQYDy5JMMZ1Q19hXDK4bKEIpkYaTk+1M1IMFEj3
Bq+DBW+DFWXmFmYW3tmwoeSDbfwNe2CP+CtIDWcCinB6pAEVvf8q3bh15Ozeig8nzj2pemvvAlgE
bhi5Cg90PYNFVRlQkTSk5ntnaWrD6N5gDlzBh8/3qUJqkgZVLaf2mDEMemAJbk2+hA2mKqgqaT+Q
Se0xW7zU7wREGNtROWlXh9UlDKxs/wFAc6jU9VJUnOisgmJFBFYmDK0t/sebejXu6jqpPNCpGLBH
hNYmDa6+jtJjxtBbERSVw6+ditFKZHB1wvD6ubypV0OnCRBVF3sU43VMeH3CBxZyDtN5zBavdHbk
tiqTKq8NYB5YIH1i4wBv8kFobsqLmaqoA8rDwtgnNggfWcnlTT4IjcMBon+jKuE7ZV3BPrJC+MyO
xCoEggVsxNYAMSPiTMYPyoQaz+wQPrTkwH0YI2BWosT0lb9EpKtUCaXx0BLhU1u2n4M2xH5VLFIx
/VrxJUy6iKZS66ktssfWRHv3/c1JcGvH+T8rK9+tOl28+f1ZjeNYEVeGNB9bI3xuL38TmbeccCyi
odB8bo/0wcX71r2zHef8Efx1HlwkfHKz5C/e9AyxCtNP6Dy5Sfro6kbrHtqKClxoat1HVwmf3T20
gzdFPZy/hh0m6D67S/rwMqdQIWbw/A5+nmDw8DLh09uFV3nzxGNNsVb8CKOnt0kfX3/Dm2okDv9X
UqA9SzZ8fF0YSXSXtui5dY+ZYk2x7unpmJGGAghjiIrACz5zovcRN3HeHjyx59LW8lJ9d8e4jAUY
PZZIAS6Lg/tEMePhyQfPTpy4+PzPvZd+ePfmsamwcmNHmxBASCYSoMTmCxE4VNG+vJHsMiOAexzR
jz61TogURUQOIoxzmxJAiJtA8qviK+uMyJBN+fTIhDiXOQGEFKLflf6wzokEj2ifXklxmRVg/CSi
H7b5TogK52gbgEnjTQsgTJxC8suincfgIkD7AuuUiS7zAhBWAtHBuEnUbw+FKoBpASZPI1PAsfB5
22n5T5tMJIAwNZVMAYciKGbS8k+d6iITgHA45JACd6jf3kp2kQogzCBUwIEYioXUb6/NcJELMH0m
oQK2t4T0b6/NnE4hgJA0i1ABe8NlnDcKjKeNWUkuGgGEqDmECth5Qc7C04Nzolx0AghphDmJ6bYd
CaUd/weR5qIVYDbxnUqvPU1h1RUL/ONnUwsgzJ1PmptYZMP6wC4rL2/On+uiF0CYt5A4Q4n1qPAB
9egviIXzXFYEEBaQjQhDheAK08PR5ZYeHk1d4LImgLBoCXmu4iFmR6i2mI2RjceSRS6rAgiLl1Fk
LB1lcmr8Vb61d2eXLXZZF0BYSnR2SJbglOW94wNXLD47PGSpi4UAwnK67KU7v1hgvyY7x/Kry8td
bASgfo9N9BfTdYov9xE8EaCJWBcrAVaQDglBMci9/YSQ/YPbpUxe3E5bwUwAYYWVN/mkgpJXZnuF
e5ezChi9tx2L5U8pQKAdoGoJkQgZWeu26sXYPVjxal1WkZfZY+NDlrtcTAUQltL0hioVpPSMvGsr
Sx5nZ2efelry97E7mXnb86/4C/xnrDd4Sixb6mItgLCYYkTEC0sW0/PUxiLyUTEnpC6yg39gXkA+
M+KChQvs4R+YGxLPjnlg/jy7+AvC3E/gme74ufbxF4TZaYTrhE5jTtpsO/kHEDWLN0c9zIqymX4A
SYT7BU5iZpJ1fsaYTrhn5BxmTHeCfwDJH+WIIDXZIfoBTCXbPXcE06Y6x18QJqcQnSGxH1NSJjvJ
P4CJZOeIbMakiQ7TD2B8CtFpOjsxIWW88/wDiCM7UWkbxsVxoR+AO5nsXLEtGJvs5sU/gNFjaF6q
YoiYMaM50g9i5CiiOyZs8f0oE+f/bce3ZPeMGOI7w/svzsA9gjwsKwMkjHDzZi5j6HCyO6cM8M3w
odb9ZinBMKKb11bx9bCPi34QAwcNtrZ3YBpDBg8aaN1fO5A0gOLFFlK0GuDIpJ8SXfqTReMhxlf9
u1j30la4+/Yji8pFgC/79XXz5mcGvRP7EEbnM4NefRJ7W/fNKXTv0ZOpBr169uhu3Stn0SWxazc2
7Lt1TfzYK74GWnfs1Jk4brkSX3Tu1LG1dU84ol37DgnkLziE8HlCh/btrHvwEaB1XJv4tkSv+XzW
Nr5N3Kf95SPQrHmL2OiWhiOlVi2jY1s0b8bbW/tQq3adqLr1ous3aNgopnGTph5P0yaNYxo1bFA/
ul7dqDq1azntz/8AwIrLxkx0UBkAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDktMDlUMTc6MzA6
NTErMDA6MDCh1dxOAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA5LTA5VDE3OjMwOjUxKzAwOjAw
0Ihk8gAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wOS0wOVQxNzozMDo1MSswMDowMIedRS0A
AAAASUVORK5CYII=" />
</svg>

```

`assets/gui/icon/develop.svg`:

```svg
<svg class="aside-icon icon-develop" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M867.555 773.654h-711.11C120.358 773.654 91 745.44 91 710.76V211.502c0-34.68 29.358-62.894 65.445-62.894h711.111c36.086 0 65.445 28.214 65.445 62.894V710.76c-0.001 34.68-29.359 62.894-65.446 62.894z m-702.555-74h694V222.608H165v477.046zM683.124 901H340.876c-20.435 0-37-16.565-37-37s16.565-37 37-37h342.247c20.435 0 37 16.565 37 37s-16.565 37-36.999 37z"></path><path d="M434.596 646.292a31.853 31.853 0 0 1-14.444-3.465c-15.763-7.992-22.063-27.249-14.072-43.012l154.757-305.259c7.991-15.763 27.249-22.063 43.011-14.072 15.763 7.992 22.063 27.249 14.072 43.012L463.163 628.755c-5.64 11.125-16.893 17.537-28.567 17.537zM666.61 589.038c-8.506 0.001-16.992-3.369-23.288-10.047-12.125-12.857-11.53-33.11 1.328-45.235l70.766-66.729-70.906-66.749c-12.868-12.113-13.48-32.365-1.366-45.233 12.114-12.871 32.367-13.479 45.234-1.366l95.637 90.029a31.998 31.998 0 0 1 0.02 46.582l-95.477 90.03a31.898 31.898 0 0 1-21.948 8.718zM357.39 589.037a31.89 31.89 0 0 1-21.948-8.718l-95.477-90.029a32.002 32.002 0 0 1 0.02-46.582l95.637-90.029c12.869-12.115 33.12-11.502 45.234 1.366 12.114 12.868 11.502 33.12-1.366 45.233l-70.906 66.749 70.766 66.728c12.858 12.125 13.453 32.377 1.328 45.235-6.296 6.677-14.783 10.047-23.288 10.047z"></path></svg>
```

`assets/gui/icon/run.svg`:

```svg
<svg class="aside-icon icon-run" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M213.333333 65.386667a85.333333 85.333333 0 0 1 43.904 12.16L859.370667 438.826667a85.333333 85.333333 0 0 1 0 146.346666L257.237333 946.453333A85.333333 85.333333 0 0 1 128 873.28V150.72a85.333333 85.333333 0 0 1 85.333333-85.333333z m0 64a21.333333 21.333333 0 0 0-21.184 18.837333L192 150.72v722.56a21.333333 21.333333 0 0 0 30.101333 19.456l2.197334-1.152L826.453333 530.282667a21.333333 21.333333 0 0 0 2.048-35.178667l-2.048-1.386667L224.298667 132.416A21.333333 21.333333 0 0 0 213.333333 129.386667z"></path></svg>
```

`assets/gui/icon/setting.svg`:

```svg
<svg class="aside-icon icon-setting" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M994.817896 382.280107c18.750828 19.83876 29.246172 46.781076 29.11818 74.875321l-0.255984 112.184988c-0.095994 58.07637-44.7972 105.401412-99.705768 105.497407-0.15999 0.127992-20.95869 2.23986-52.700707 5.311668a390.3956 390.3956 0 0 1-17.310918 36.15774 396.246235 396.246235 0 0 1-26.39835 41.533404c12.223236 28.382226 20.670708 48.188988 22.87857 53.404662 12.607212 23.966502 15.871008 52.220736 9.023436 78.683082-6.847572 27.134304-23.646522 50.268858-46.71708 64.187989l-91.802262 55.804512c-15.103056 9.215424-32.285982 14.07912-49.660896 14.07912-35.709768-0.063996-68.667708-20.190738-86.586589-52.924692-0.127992 0-13.471158-19.774764-33.501906-49.852884-26.590338 2.623836-53.372664 2.335854-79.931004-0.735954-21.470658 31.998-35.645772 52.700706-35.645772 52.700706-16.126992 29.790138-49.244922 50.012874-84.762703 50.012874-17.566902-0.031998-34.845822-4.95969-50.044872-14.303106l-91.578276-56.284482c-22.974564-14.015124-39.67752-37.181676-46.3971-64.315981-6.87957-27.03831-3.263796-55.83651 10.047372-80.058996-0.063996-0.127992 9.535404-22.526592 24.286482-56.252484-15.711018-22.846572-29.182176-47.35704-40.189488-73.11543-36.573714-3.647772-60.348228-6.207612-60.348229-6.207612h-0.031998c-51.99675 0-96.665958-47.51703-96.601962-105.817387l0.255984-112.120992c0.15999-58.140366 44.861196-105.43341 99.641772-105.529405 0.223986-0.127992 21.566652-2.303856 54.044623-5.43966a405.720642 405.720642 0 0 1 20.95869-44.861196 378.510343 378.510343 0 0 1 21.054684-33.853884c-14.047122-32.541966-23.006562-53.628648-23.006562-53.628648-26.046372-47.709018-9.535404-112.47297 38.205612-141.527155l91.83426-55.868508C318.124189 4.831698 335.307115 0 352.650031 0c35.67777 0.031998 68.667708 20.190738 86.554591 52.892694 0.15999 0 11.327292 16.574964 28.31823 42.07737 30.206112-3.775764 60.732204-3.807762 90.938316-0.15999 18.206862-27.006312 29.822136-44.093244 29.822136-44.093244C604.442294 20.926692 637.560224 0.703956 673.110003 0.703956c17.566902 0.031998 34.845822 4.95969 50.044872 14.303106l91.546278 56.284482c47.549028 29.182176 63.83601 93.882132 36.381726 144.342979 0.063996 0.127992-7.807512 18.39885-20.094744 46.589088 18.014874 25.950378 33.11793 54.044622 45.021186 83.706768 26.462346 2.687832 44.893194 4.63971 49.948879 5.215674 25.91838 0.383976 50.652834 11.551278 68.859696 31.070058zM883.336863 601.946378c22.142616-0.15999 37.949628-16.95894 37.981627-37.629648l0.255984-102.71358c0.031998-9.983376-3.647772-19.550778-10.271358-26.590338-7.327542-7.775514-17.342916-10.23936-27.614275-11.167302-0.063996 0-25.502406-2.783826-63.19605-6.591588-10.687332-1.055934-19.806762-8.607462-23.486532-19.35879-11.263296-32.95794-27.774264-63.932004-49.084932-92.090245-6.655584-8.767452-8.063496-20.830698-3.615774-31.102056 15.83901-36.541716 26.302356-61.020186 26.302356-61.052184 5.951628-11.263296 7.231548-21.374664 4.831698-31.102056-2.367852-9.631398-8.255484-17.854884-16.350978-22.846572l-83.1948-51.548779c-16.350978-10.143366-38.749578-3.551778-48.060997 13.631148-1.535904 2.527842-16.286982 24.350478-38.109618 57.180427-6.143616 9.215424-16.63896 13.887132-27.102306 12.095244-33.27792-5.791638-67.131804-5.695644-99.161802 0.191988-10.55934 1.951878-21.246672-2.783826-27.422286-12.127242-21.854634-33.053934-36.733704-55.388538-36.765702-55.420537-11.455284-20.862696-33.085932-26.334354-49.532905-16.286982l-83.386788 51.132805c-16.830948 10.367352-22.622586 33.309918-12.991188 51.292794 1.247922 2.623836 12.383226 28.95819 28.926192 67.579776 4.351728 10.143366 3.007812 22.014624-3.487782 30.750078-10.495344 14.143116-18.462846 26.366352-25.022436 38.493594-8.031498 14.71908-15.071058 30.942066-21.566652 49.532905-3.711768 10.71933-12.895194 18.174864-23.550528 19.1988-40.445472 3.83976-67.963752 6.71958-68.027748 6.71958-0.895944 0.095994-1.983876 0.15999-2.87982 0.15999-19.326792 0-35.069808 16.830948-35.133805 37.501656l-0.223986 102.617586c0 20.734704 15.711018 37.59765 35.133805 37.693644 2.751828 0.15999 31.550028 3.231798 73.691394 7.455534 10.431348 1.023936 19.390788 8.255484 23.230548 18.622836 11.135304 30.07812 26.462346 58.172364 45.469158 83.322793 6.623586 8.79945 7.9995 20.830698 3.551778 31.070058-17.950878 41.341416-30.07812 69.75564-30.110118 69.819636-5.983626 11.295294-7.231548 21.406662-4.831698 31.134054s8.223486 17.790888 16.350978 22.846572l83.1948 51.548779c16.286982 10.111368 38.749578 3.583776 48.092995-13.631148 1.535904-2.527842 18.686832-27.83826 43.35729-64.987939 6.143616-9.183426 16.606962-13.887132 27.070308-12.127242 29.886132 5.183676 60.348228 5.43966 90.298356 0.831948 10.367352-1.567902 20.670708 3.167802 26.686332 12.31923 24.286482 36.893694 41.053434 62.044122 41.085432 62.076121 7.743516 14.07912 19.454784 21.342666 32.093995 21.342666 6.07962 0 12.127242-1.727892 17.43891-5.023686l83.418786-51.100807c8.127492-4.95969 14.047122-13.151178 16.47897-22.814574 2.431848-9.5994 1.183926-19.83876-3.487782-28.446222-0.47997-0.863946-0.895944-1.75989-1.27992-2.623836-0.031998-0.063996-11.327292-26.974314-28.254234-66.39585-4.447722-10.367352-2.911818-22.55859 3.935754-31.326042 11.83926-15.167052 21.534654-29.75814 29.59815-44.541216 6.655584-12.287232 12.63921-25.694394 18.846822-42.269359 3.871758-10.367352 12.895194-17.534904 23.294544-18.526842 39.581526-3.807762 66.491844-6.55959 66.55584-6.55959zM614.681654 334.923067a203.35529 203.35529 0 0 1 95.130055 124.568215 203.289294 203.289294 0 0 1-20.7987 155.35029c-36.541716 62.940066-104.441472 102.009624-177.268921 102.009625a204.552215 204.552215 0 0 1-102.617586-27.67827c-97.625898-56.668458-130.967815-182.228611-74.331355-279.886507 36.541716-62.940066 104.441472-102.009624 177.268921-102.009625a204.552215 204.552215 0 0 1 102.617586 27.67827z m-14.175114 228.497719c13.75914-23.646522 17.43891-51.260796 10.431348-77.659146a101.713643 101.713643 0 0 0-47.581026-62.268108c-15.615024-9.087432-33.341916-13.855134-51.260796-13.855134-36.509718 0.063996-70.267608 19.454784-88.666458 51.004812-28.31823 48.828948-11.647272 111.609024 37.149678 139.927254 15.615024 9.087432 33.341916 13.855134 51.260796 13.855134 36.509718-0.031998 70.267608-19.454784 88.666458-51.004812z"></path></svg>
```

`config/deploy.template-cn.yaml`:

```yaml
Deploy:
  Git:
    # URL of AzurLaneAutoScript repository
    # [CN user] Use 'cn' to get update from git-over-cdn service
    # [Other] Use 'global' to get update from https://github.com/LmeSzinc/StarRailCopilot
    Repository: cn
    # Branch of Alas
    # [Developer] Use 'dev', 'app', etc, to try new features
    # [Other] Use 'master', the stable branch
    Branch: master
    # Filepath of git executable `git.exe`
    # [Easy installer] Use './toolkit/Git/mingw64/bin/git.exe'
    # [Other] Use you own git
    GitExecutable: ./toolkit/Git/mingw64/bin/git.exe
    # Set git proxy
    # [CN user] Use your local http proxy (http://127.0.0.1:{port}) or socks5 proxy (socks5://127.0.0.1:{port})
    # [Other] Use null
    GitProxy: null
    # Set SSL Verify
    # [In most cases] Use true
    # [Other] Use false to when connected to an untrusted network
    SSLVerify: true
    # Update Alas at startup
    # [In most cases] Use true
    AutoUpdate: true
    # Whether to keep local changes during update
    # User settings, logs and screenshots will be kept, no mather this is true or false
    # [Developer] Use true, if you modified the code
    # [Other] Use false
    KeepLocalChanges: false

  Python:
    # Filepath of python executable `python.exe`
    # [Easy installer] Use './toolkit/python.exe'
    # [Other] Use you own python, and its version should be 3.7.6 64bit
    PythonExecutable: ./toolkit/python.exe
    # URL of pypi mirror
    # [CN user] Use 'https://pypi.tuna.tsinghua.edu.cn/simple' for faster and more stable download
    # [Other] Use null
    PypiMirror: https://pypi.tuna.tsinghua.edu.cn/simple
    # Install dependencies at startup
    # [In most cases] Use true
    InstallDependencies: true
    # Path to requirements.txt
    # [In most cases] Use 'requirements.txt'
    # [In AidLux] Use './deploy/AidLux/{version}/requirements.txt', version is default to 0.92
    RequirementsFile: requirements.txt

  Adb:
    # Filepath of ADB executable `adb.exe`
    # [Easy installer] Use './toolkit/Lib/site-packages/adbutils/binaries/adb.exe'
    # [Other] Use you own latest ADB, but not the ADB in your emulator
    AdbExecutable: ./toolkit/Lib/site-packages/adbutils/binaries/adb.exe
    # Whether to replace ADB
    # Chinese emulators (NoxPlayer, LDPlayer, MemuPlayer, MuMuPlayer) use their own ADB, instead of the latest.
    # Different ADB servers will terminate each other at startup, resulting in disconnection.
    # For compatibility, we have to replace them all.
    # This will do:
    #   1. Terminate current ADB server
    #   2. Rename ADB from all emulators to *.bak and replace them by the AdbExecutable set above
    #   3. Brute-force connect to all available emulator instances
    # [In most cases] Use true
    # [In few cases] Use false, if you have other programs using ADB.
    ReplaceAdb: true
    # Brute-force connect to all available emulator instances
    # [In most cases] Use true
    AutoConnect: true
    # Re-install uiautomator2
    # [In most cases] Use true
    InstallUiautomator2: true

  Ocr:
    # Run Ocr as a service, can reduce memory usage by not import mxnet everytime you start an alas instance

    # Whether to use ocr server
    # [Default] false
    UseOcrServer: false
    # Whether to start ocr server when start GUI
    # [Default] false
    StartOcrServer: false
    # Port of ocr server runs by GUI
    # [Default] 22268
    OcrServerPort: 22268
    # Address of ocr server for alas instance to connect
    # [Default] 127.0.0.1:22268
    OcrClientAddress: 127.0.0.1:22268

  Update:
    # Use auto update and builtin updater feature
    # This may cause problem https://github.com/LmeSzinc/AzurLaneAutoScript/issues/876
    EnableReload: true
    # Check update every X minute
    # [Disable] 0
    # [Default] 5
    CheckUpdateInterval: 5
    # Scheduled restart time
    # If there are updates, Alas will automatically restart and update at this time every day
    # and run all alas instances that running before restarted
    # [Disable] null
    # [Default] 03:50
    AutoRestartTime: 03:50

  Misc:
    # Enable discord rich presence
    DiscordRichPresence: false

  RemoteAccess:
    # Enable remote access (using ssh reverse tunnel serve by https://github.com/wang0618/localshare)
    # ! You need to set Password below to enable remote access since everyone can access to your alas if they have your url.
    # See here (http://app.azurlane.cloud/en.html) for more infomation.
    EnableRemoteAccess: false
    # Username when login into ssh server
    # [Default] null (will generate a random one when startup)
    SSHUser: null
    # Server to connect
    # [Default] null
    # [Format] host:port
    SSHServer: null
    # Filepath of SSH executable `ssh.exe`
    # [Default] ssh (find ssh in system PATH)
    # If you don't have one, install OpenSSH or download it here (https://github.com/PowerShell/Win32-OpenSSH/releases)
    SSHExecutable: ssh

  Webui:
    # --host. Host to listen
    # [Use IPv6] '::'
    # [In most cases] Default to '0.0.0.0'
    WebuiHost: 0.0.0.0
    # --port. Port to listen
    # You will be able to access webui via `http://{host}:{port}`
    # [In most cases] Default to 22367
    WebuiPort: 22367
    # Language to use on web ui
    # 'zh-CN' for Chinese simplified
    # 'en-US' for English
    # 'ja-JP' for Japanese
    # 'zh-TW' for Chinese traditional
    Language: zh-CN
    # Theme of web ui
    # 'default' for light theme
    # 'dark' for dark theme
    Theme: default
    # Follow system DPI scaling
    # [In most cases] true
    # [In few cases] false to make Alas smaller, if you have a low resolution but high DPI scaling.
    DpiScaling: true
    # --key. Password of web ui
    # Useful when expose Alas to the public network
    Password: null
    # --cdn. Use jsdelivr cdn for pywebio static files (css, js).
    # 'true' for jsdelivr cdn
    # 'false' for self host cdn (automatically)
    # 'https://path.to.your/cdn' to use custom cdn
    CDN: false
    # --run. Auto-run specified config when startup
    # 'null' default no specified config
    # '["alas"]' specified "alas" config
    # '["alas","alas2"]' specified "alas" "alas2" configs
    Run: null
    # To update app.asar
    # [In most cases] true
    AppAsarUpdate: true
    # --no-sandbox. https://github.com/electron/electron/issues/30966
    # Some Windows systems cannot call the GPU normally for virtualization, and you need to manually turn off sandbox mode
    NoSandbox: false

```

`config/deploy.template.yaml`:

```yaml
Deploy:
  Git:
    # URL of AzurLaneAutoScript repository
    # [CN user] Use 'cn' to get update from git-over-cdn service
    # [Other] Use 'global' to get update from https://github.com/LmeSzinc/StarRailCopilot
    Repository: global
    # Branch of Alas
    # [Developer] Use 'dev', 'app', etc, to try new features
    # [Other] Use 'master', the stable branch
    Branch: master
    # Filepath of git executable `git.exe`
    # [Easy installer] Use './toolkit/Git/mingw64/bin/git.exe'
    # [Other] Use you own git
    GitExecutable: ./toolkit/Git/mingw64/bin/git.exe
    # Set git proxy
    # [CN user] Use your local http proxy (http://127.0.0.1:{port}) or socks5 proxy (socks5://127.0.0.1:{port})
    # [Other] Use null
    GitProxy: null
    # Set SSL Verify
    # [In most cases] Use true
    # [Other] Use false to when connected to an untrusted network
    SSLVerify: true
    # Update Alas at startup
    # [In most cases] Use true
    AutoUpdate: true
    # Whether to keep local changes during update
    # User settings, logs and screenshots will be kept, no mather this is true or false
    # [Developer] Use true, if you modified the code
    # [Other] Use false
    KeepLocalChanges: false

  Python:
    # Filepath of python executable `python.exe`
    # [Easy installer] Use './toolkit/python.exe'
    # [Other] Use you own python, and its version should be 3.7.6 64bit
    PythonExecutable: ./toolkit/python.exe
    # URL of pypi mirror
    # [CN user] Use 'https://pypi.tuna.tsinghua.edu.cn/simple' for faster and more stable download
    # [Other] Use null
    PypiMirror: null
    # Install dependencies at startup
    # [In most cases] Use true
    InstallDependencies: true
    # Path to requirements.txt
    # [In most cases] Use 'requirements.txt'
    # [In AidLux] Use './deploy/AidLux/{version}/requirements.txt', version is default to 0.92
    RequirementsFile: requirements.txt

  Adb:
    # Filepath of ADB executable `adb.exe`
    # [Easy installer] Use './toolkit/Lib/site-packages/adbutils/binaries/adb.exe'
    # [Other] Use you own latest ADB, but not the ADB in your emulator
    AdbExecutable: ./toolkit/Lib/site-packages/adbutils/binaries/adb.exe
    # Whether to replace ADB
    # Chinese emulators (NoxPlayer, LDPlayer, MemuPlayer, MuMuPlayer) use their own ADB, instead of the latest.
    # Different ADB servers will terminate each other at startup, resulting in disconnection.
    # For compatibility, we have to replace them all.
    # This will do:
    #   1. Terminate current ADB server
    #   2. Rename ADB from all emulators to *.bak and replace them by the AdbExecutable set above
    #   3. Brute-force connect to all available emulator instances
    # [In most cases] Use true
    # [In few cases] Use false, if you have other programs using ADB.
    ReplaceAdb: true
    # Brute-force connect to all available emulator instances
    # [In most cases] Use true
    AutoConnect: true
    # Re-install uiautomator2
    # [In most cases] Use true
    InstallUiautomator2: true

  Ocr:
    # Run Ocr as a service, can reduce memory usage by not import mxnet everytime you start an alas instance

    # Whether to use ocr server
    # [Default] false
    UseOcrServer: false
    # Whether to start ocr server when start GUI
    # [Default] false
    StartOcrServer: false
    # Port of ocr server runs by GUI
    # [Default] 22268
    OcrServerPort: 22268
    # Address of ocr server for alas instance to connect
    # [Default] 127.0.0.1:22268
    OcrClientAddress: 127.0.0.1:22268

  Update:
    # Use auto update and builtin updater feature
    # This may cause problem https://github.com/LmeSzinc/AzurLaneAutoScript/issues/876
    EnableReload: true
    # Check update every X minute
    # [Disable] 0
    # [Default] 5
    CheckUpdateInterval: 5
    # Scheduled restart time
    # If there are updates, Alas will automatically restart and update at this time every day
    # and run all alas instances that running before restarted
    # [Disable] null
    # [Default] 03:50
    AutoRestartTime: 03:50

  Misc:
    # Enable discord rich presence
    DiscordRichPresence: false

  RemoteAccess:
    # Enable remote access (using ssh reverse tunnel serve by https://github.com/wang0618/localshare)
    # ! You need to set Password below to enable remote access since everyone can access to your alas if they have your url.
    # See here (http://app.azurlane.cloud/en.html) for more infomation.
    EnableRemoteAccess: false
    # Username when login into ssh server
    # [Default] null (will generate a random one when startup)
    SSHUser: null
    # Server to connect
    # [Default] null
    # [Format] host:port
    SSHServer: null
    # Filepath of SSH executable `ssh.exe`
    # [Default] ssh (find ssh in system PATH)
    # If you don't have one, install OpenSSH or download it here (https://github.com/PowerShell/Win32-OpenSSH/releases)
    SSHExecutable: ssh

  Webui:
    # --host. Host to listen
    # [Use IPv6] '::'
    # [In most cases] Default to '0.0.0.0'
    WebuiHost: 0.0.0.0
    # --port. Port to listen
    # You will be able to access webui via `http://{host}:{port}`
    # [In most cases] Default to 22367
    WebuiPort: 22367
    # Language to use on web ui
    # 'zh-CN' for Chinese simplified
    # 'en-US' for English
    # 'ja-JP' for Japanese
    # 'zh-TW' for Chinese traditional
    Language: en-US
    # Theme of web ui
    # 'default' for light theme
    # 'dark' for dark theme
    Theme: default
    # Follow system DPI scaling
    # [In most cases] true
    # [In few cases] false to make Alas smaller, if you have a low resolution but high DPI scaling.
    DpiScaling: true
    # --key. Password of web ui
    # Useful when expose Alas to the public network
    Password: null
    # --cdn. Use jsdelivr cdn for pywebio static files (css, js).
    # 'true' for jsdelivr cdn
    # 'false' for self host cdn (automatically)
    # 'https://path.to.your/cdn' to use custom cdn
    CDN: false
    # --run. Auto-run specified config when startup
    # 'null' default no specified config
    # '["alas"]' specified "alas" config
    # '["alas","alas2"]' specified "alas" "alas2" configs
    Run: null
    # To update app.asar
    # [In most cases] true
    AppAsarUpdate: true
    # --no-sandbox. https://github.com/electron/electron/issues/30966
    # Some Windows systems cannot call the GPU normally for virtualization, and you need to manually turn off sandbox mode
    NoSandbox: false

```

`config/template.json`:

```json
{
  "Alas": {
    "Emulator": {
      "Serial": "auto",
      "PackageName": "auto",
      "ScreenshotMethod": "scrcpy",
      "ControlMethod": "MaaTouch",
      "AdbRestart": false
    },
    "EmulatorInfo": {
      "Emulator": "auto",
      "name": null,
      "path": null
    },
    "Error": {
      "Restart": "game",
      "SaveError": true,
      "ScreenshotLength": 1,
      "OnePushConfig": "provider: null"
    },
    "Optimization": {
      "ScreenshotInterval": 0.2,
      "CombatScreenshotInterval": 1.0,
      "WhenTaskQueueEmpty": "goto_main"
    }
  },
  "Restart": {
    "Scheduler": {
      "Enable": true,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "Restart",
      "ServerUpdate": "04:00"
    }
  },
  "Dungeon": {
    "Scheduler": {
      "Enable": false,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "Dungeon",
      "ServerUpdate": "04:00"
    },
    "Dungeon": {
      "Name": "Calyx_Golden_Treasures",
      "NameAtDoubleCalyx": "Calyx_Golden_Treasures",
      "NameAtDoubleRelic": "Cavern_of_Corrosion_Path_of_Providence",
      "Team": 1
    },
    "DungeonDaily": {
      "CalyxGolden": "Calyx_Golden_Treasures",
      "CalyxCrimson": "Calyx_Crimson_Erudition",
      "StagnantShadow": "Stagnant_Shadow_Quanta",
      "CavernOfCorrosion": "Cavern_of_Corrosion_Path_of_Providence"
    },
    "DungeonSupport": {
      "Use": "when_daily",
      "Character": "FirstCharacter"
    },
    "DungeonStorage": {
      "TrailblazePower": {},
      "DungeonDouble": {},
      "SimulatedUniverse": {}
    }
  },
  "DailyQuest": {
    "Scheduler": {
      "Enable": false,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "DailyQuest",
      "ServerUpdate": "04:00"
    },
    "AchievableQuest": {
      "Complete_1_Daily_Mission": "not_supported",
      "Clear_Calyx_Golden_1_times": "not_set",
      "Complete_Calyx_Crimson_1_time": "not_set",
      "Clear_Stagnant_Shadow_1_times": "not_set",
      "Clear_Cavern_of_Corrosion_1_times": "not_set",
      "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": "not_supported",
      "Inflict_Weakness_Break_5_times": "not_supported",
      "Defeat_a_total_of_20_enemies": "not_supported",
      "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": "not_supported",
      "Use_Technique_2_times": "achievable",
      "Go_on_assignment_1_time": "not_set",
      "Take_1_photo": "achievable",
      "Destroy_3_destructible_objects": "not_supported",
      "Complete_Forgotten_Hall_1_time": "not_supported",
      "Complete_Echo_of_War_1_times": "not_supported",
      "Complete_1_stage_in_Simulated_Universe_Any_world": "not_supported",
      "Obtain_victory_in_combat_with_support_characters_1_time": "not_set",
      "Use_an_Ultimate_to_deal_the_final_blow_1_time": "not_supported",
      "Level_up_any_character_1_time": "not_supported",
      "Level_up_any_Light_Cone_1_time": "not_supported",
      "Level_up_any_Relic_1_time": "not_supported",
      "Salvage_any_Relic": "achievable",
      "Synthesize_Consumable_1_time": "achievable",
      "Synthesize_material_1_time": "achievable",
      "Use_Consumables_1_time": "achievable"
    },
    "DailyStorage": {
      "DailyActivity": {},
      "DailyQuest": {}
    }
  },
  "BattlePass": {
    "Scheduler": {
      "Enable": false,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "BattlePass",
      "ServerUpdate": "04:00"
    },
    "BattlePassStorage": {
      "BattlePassLevel": {},
      "BattlePassTodayQuest": {}
    }
  },
  "Assignment": {
    "Scheduler": {
      "Enable": false,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "Assignment",
      "ServerUpdate": "04:00"
    },
    "Assignment": {
      "Name_1": "Nameless_Land_Nameless_People",
      "Name_2": "Akashic_Records",
      "Name_3": "The_Invisible_Hand",
      "Name_4": "Nine_Billion_Names",
      "Duration": 20,
      "Assignment": {}
    }
  },
  "Rogue": {
    "Scheduler": {
      "Enable": false,
      "NextRun": "2020-01-01 00:00:00",
      "Command": "Rogue",
      "ServerUpdate": "04:00"
    },
    "RoguePath": {
      "Path": "The_Hunt",
      "Bonus": "Blessing Cosmos",
      "PresetResonanceFilter": "preset-1",
      "ResonanceSelectionStrategy": "follow-presets",
      "CustomResonanceFilter": "回响构音：均晶转变 > 回响构音：零维强化\n> 回响构音：第二次初恋 > 回响构音：体验的富翁\n> 回响构音：局外人 > 回响构音：怀疑的四重根\n> 回响构音：诸法无我 > 回响构音：诸行无常\n> 回响构音：射不主皮 > 回响构音：柘弓危矢\n> 回响构音：激变变星 > 回响构音：极端氦闪\n> 回响构音：末日狂欢 > 回响构音：树苗长高舞"
    },
    "RogueBlessing": {
      "PresetBlessingFilter": "preset-1",
      "BlessingSelectionStrategy": "follow-presets",
      "CustomBlessingFilter": "巡猎-3 > 《冠军晚餐·猫的摇篮》 > 丰饶众生，一法界心 > 毁灭-3 \n> 火堆外的夜 > 巡猎-2 > 毁灭-2 > 巡猎 > reset > random"
    },
    "RogueCurio": {
      "PresetCurioFilter": "preset-1",
      "CurioSelectionStrategy": "follow-presets",
      "CustomCurioFilter": "博士之袍 > 福灵胶 > 分裂金币 > 信仰债券 > 换境桂冠 > 俱乐部券 > 碎星芳饵 > random"
    }
  }
}
```

`console.bat`:

```bat
@rem
@echo off

set "_root=%~dp0"
set "_root=%_root:~0,-1%"
%~d0
cd "%_root%"

color F0

set "_pyBin=%_root%\toolkit"
set "_GitBin=%_root%\toolkit\Git\mingw64\bin"
set "_adbBin=%_root%\toolkit\Lib\site-packages\adbutils\binaries"
set "PATH=%_root%\toolkit\alias;%_root%\toolkit\command;%_pyBin%;%_pyBin%\Scripts;%_GitBin%;%_adbBin%;%PATH%"
set "ELECTRON_ENABLE_LOGGING=1"

title Alas Console Debugger
echo This is an console to run adb, git, python and pip.
echo     adb devices
echo     git log
echo     python -V
echo     pip -V
echo. & echo ----- & echo.
echo.
)
echo.

PROMPT $P$_$G$G$G
cmd /Q /K

```

`deploy/Readme.md`:

```md
# Deploy

This directory holds the Alas installer.

Install Alas by running `python -m deploy.installer` in Alas root folder.



# Launcher

Launcher `Alas.exe` is a `.bat` file converted to `.exe` file by [Bat To Exe Converter](https://f2ko.de/programme/bat-to-exe-converter/).

If you have warnings from your anti-virus software, replace `alas.exe` with `deploy/launcher/Alas.bat`. They should do the same thing.


```

`deploy/Windows/adb.py`:

```py
import logging
import os

from deploy.Windows.emulator import EmulatorManager
from deploy.Windows.logger import Progress, logger


def show_fix_tip(module):
    logger.info(f"""
    To fix this:
    1. Open console.bat
    2. Execute the following commands:
        pip uninstall -y {module}
        pip install --no-cache-dir {module}
    3. Re-open Alas.exe
    """)


class AdbManager(EmulatorManager):
    def adb_install(self):
        logger.hr('Start ADB service', 0)

        if self.ReplaceAdb:
            logger.hr('Replace ADB', 1)
            self.adb_replace()
            Progress.AdbReplace()
        if self.AutoConnect:
            logger.hr('ADB Connect', 1)
            self.brute_force_connect()
            Progress.AdbConnect()

        if False:
            logger.hr('Uiautomator2 Init', 1)
            try:
                import adbutils
                from uiautomator2 import init
            except ModuleNotFoundError as e:
                message = str(e)
                for module in ['apkutils2', 'progress']:
                    # ModuleNotFoundError: No module named 'apkutils2'
                    # ModuleNotFoundError: No module named 'progress.bar'
                    if module in message:
                        show_fix_tip(module)
                        exit(1)
                raise

            # Remove global proxies, or uiautomator2 will go through it
            for k in list(os.environ.keys()):
                if k.lower().endswith('_proxy'):
                    del os.environ[k]

            for device in adbutils.adb.iter_device():
                initer = init.Initer(device, loglevel=logging.DEBUG)
                # MuMu X has no ro.product.cpu.abi, pick abi from ro.product.cpu.abilist
                if initer.abi not in ['x86_64', 'x86', 'arm64-v8a', 'armeabi-v7a', 'armeabi']:
                    initer.abi = initer.abis[0]
                initer.set_atx_agent_addr('127.0.0.1:7912')

                for _ in range(2):
                    try:
                        initer.install()
                        break
                    except AssertionError:
                        logger.info(f'AssertionError when installing uiautomator2 on device {device.serial}')
                        logger.info('If you are using BlueStacks or LD player or WSA, '
                                    'please enable ADB in the settings of your emulator')
                        exit(1)
                    except ConnectionError:
                        if _ == 1:
                            raise
                        init.GITHUB_BASEURL = 'http://tool.appetizer.io/openatx'

                initer._device.shell(["rm", "/data/local/tmp/minicap"])
                initer._device.shell(["rm", "/data/local/tmp/minicap.so"])

```

`deploy/Windows/alas.py`:

```py
import os
import time
import typing as t

from deploy.Windows.config import DeployConfig
from deploy.Windows.logger import Progress, logger
from deploy.Windows.utils import DataProcessInfo, cached_property, iter_process


class AlasManager(DeployConfig):
    @cached_property
    def alas_folder(self):
        return [
            self.filepath(self.PythonExecutable),
            self.root_filepath
        ]

    @cached_property
    def self_pid(self):
        return os.getpid()

    def list_process(self) -> t.List[DataProcessInfo]:
        logger.info('List process')
        process = list(iter_process())
        logger.info(f'Found {len(process)} processes')
        return process

    def iter_process_by_names(self, names, in_alas=False) -> t.Iterable[DataProcessInfo]:
        """
        Args:
            names (str, list[str]): process name, such as 'alas.exe'
            in_alas (bool): If the output process must in Alas

        Yields:
            DataProcessInfo:
        """
        if not isinstance(names, list):
            names = [names]
        try:
            for proc in self.list_process():

                if not (proc.name and proc.name in names):
                    continue
                if proc.pid == self.self_pid:
                    continue
                if in_alas:
                    cmdline = proc.cmdline.replace(r"\\", "/").replace("\\", "/")
                    for folder in self.alas_folder:
                        if folder in cmdline:
                            yield proc
                else:
                    yield proc
        except Exception as e:
            logger.info(str(e))
            return False

    def kill_process(self, process: DataProcessInfo):
        self.execute(f'taskkill /f /t /pid {process.pid}', allow_failure=True, output=False)

    def alas_kill(self):
        for _ in range(10):
            logger.hr(f'Kill existing Alas', 0)
            proc_list = list(self.iter_process_by_names(['python.exe'], in_alas=True))
            if not len(proc_list):
                Progress.KillExisting()
                return True
            for proc in proc_list:
                logger.info(proc)
                self.kill_process(proc)

        logger.warning('Unable to kill existing Alas, skip')
        Progress.KillExisting()
        return False


if __name__ == '__main__':
    self = AlasManager()
    start = time.time()
    self.alas_kill()
    print(time.time() - start)

```

`deploy/Windows/app.py`:

```py
import filecmp
import os
import shutil

from deploy.Windows.config import DeployConfig
from deploy.Windows.logger import Progress, logger


class AppManager(DeployConfig):
    @staticmethod
    def app_asar_replace(folder, path='./toolkit/WebApp/resources/app.asar'):
        """
        Args:
            folder (str): Path to AzurLaneAutoScript
            path (str): Path from AzurLaneAutoScript to app.asar

        Returns:
            bool: If updated.
        """
        source = os.path.abspath(os.path.join(folder, path))
        logger.info(f'Old file: {source}')

        try:
            import alas_webapp
        except ImportError:
            logger.info(f'Dependency alas_webapp not exists, skip updating')
            return False

        update = alas_webapp.app_file()
        logger.info(f'New version: {alas_webapp.__version__}')
        logger.info(f'New file: {update}')

        if os.path.exists(source):
            if filecmp.cmp(source, update, shallow=True):
                logger.info('app.asar is already up to date')
                return False
            else:
                # Keyword "Update app.asar" is used in AlasApp
                # to determine whether there is a hot update
                logger.info(f'Update app.asar {update} -----> {source}')
                os.remove(source)
                shutil.copy(update, source)
                return True
        else:
            logger.info(f'{source} not exists, skip updating')
            return False

    def app_update(self):
        logger.hr(f'Update app', 0)

        if not self.AppAsarUpdate:
            logger.info('AppAsarUpdate is disabled, skip')
            Progress.UpdateAlasApp()
            return False

        # self.app_asar_replace(os.getcwd())
        # Progress.UpdateAlasApp()

```

`deploy/Windows/config.py`:

```py
import copy
import os
import subprocess
from typing import Optional, Union

from deploy.Windows.logger import logger
from deploy.Windows.utils import DEPLOY_CONFIG, DEPLOY_TEMPLATE, cached_property, poor_yaml_read, poor_yaml_write


class ExecutionError(Exception):
    pass


class ConfigModel:
    # Git
    Repository: str = "https://github.com/LmeSzinc/AzurLaneAutoScript"
    Branch: str = "master"
    GitExecutable: str = "./toolkit/Git/mingw64/bin/git.exe"
    GitProxy: Optional[str] = None
    SSLVerify: bool = False
    AutoUpdate: bool = True
    KeepLocalChanges: bool = False

    # Python
    PythonExecutable: str = "./toolkit/python.exe"
    PypiMirror: Optional[str] = None
    InstallDependencies: bool = True
    RequirementsFile: str = "requirements.txt"

    # Adb
    AdbExecutable: str = "./toolkit/Lib/site-packages/adbutils/binaries/adb.exe"
    ReplaceAdb: bool = True
    AutoConnect: bool = True
    InstallUiautomator2: bool = True

    # Ocr
    UseOcrServer: bool = False
    StartOcrServer: bool = False
    OcrServerPort: int = 22268
    OcrClientAddress: str = "127.0.0.1:22268"

    # Update
    EnableReload: bool = True
    CheckUpdateInterval: int = 5
    AutoRestartTime: str = "03:50"

    # Misc
    DiscordRichPresence: bool = False

    # Remote Access
    EnableRemoteAccess: bool = False
    SSHUser: Optional[str] = None
    SSHServer: Optional[str] = None
    SSHExecutable: Optional[str] = None

    # Webui
    WebuiHost: str = "0.0.0.0"
    WebuiPort: int = 22367
    Language: str = "en-US"
    Theme: str = "default"
    DpiScaling: bool = True
    Password: Optional[str] = None
    CDN: Union[str, bool] = False
    Run: Optional[str] = None
    AppAsarUpdate: bool = True
    NoSandbox: bool = True

    # Dynamic
    GitOverCdn: bool = False


class DeployConfig(ConfigModel):
    def __init__(self, file=DEPLOY_CONFIG):
        """
        Args:
            file (str): User deploy config.
        """
        self.file = file
        self.config = {}
        self.config_template = {}
        self.read()

        # Bypass webui.config.DeployConfig.__setattr__()
        # Don't write these into deploy.yaml
        super().__setattr__('GitOverCdn', self.Repository in ['cn'])
        if self.Repository in ['global', 'cn']:
            super().__setattr__('Repository', 'https://github.com/LmeSzinc/StarRailCopilot')

        self.write()
        self.show_config()

    def show_config(self):
        logger.hr("Show deploy config", 1)
        for k, v in self.config.items():
            if k in ("Password", "SSHUser"):
                continue
            if self.config_template[k] == v:
                continue
            logger.info(f"{k}: {v}")

        logger.info(f"Rest of the configs are the same as default")

    def read(self):
        self.config = poor_yaml_read(DEPLOY_TEMPLATE)
        self.config_template = copy.deepcopy(self.config)
        self.config.update(poor_yaml_read(self.file))

        for key, value in self.config.items():
            if hasattr(self, key):
                super().__setattr__(key, value)

    def write(self):
        poor_yaml_write(self.config, self.file)

    def filepath(self, path):
        """
        Args:
            path (str):

        Returns:
            str: Absolute filepath.
        """
        if os.path.isabs(path):
            return path

        return (
            os.path.abspath(os.path.join(self.root_filepath, path))
            .replace(r"\\", "/")
            .replace("\\", "/")
        )

    @cached_property
    def root_filepath(self):
        return (
            os.path.abspath(os.path.join(os.path.dirname(__file__), "../../"))
            .replace(r"\\", "/")
            .replace("\\", "/")
        )

    @cached_property
    def adb(self) -> str:
        exe = self.filepath(self.AdbExecutable)
        if os.path.exists(exe):
            return exe

        logger.warning(f'AdbExecutable: {exe} does not exists, use `adb` instead')
        return 'adb'

    @cached_property
    def git(self) -> str:
        exe = self.filepath(self.GitExecutable)
        if os.path.exists(exe):
            return exe

        logger.warning(f'GitExecutable: {exe} does not exists, use `git` instead')
        return 'git'

    @cached_property
    def python(self) -> str:
        return self.filepath(self.PythonExecutable)

    @cached_property
    def requirements_file(self) -> str:
        if self.RequirementsFile == 'requirements.txt':
            return 'requirements.txt'
        else:
            return self.filepath(self.RequirementsFile)

    def execute(self, command, allow_failure=False, output=True):
        """
        Args:
            command (str):
            allow_failure (bool):
            output(bool):

        Returns:
            bool: If success.
                Terminate installation if failed to execute and not allow_failure.
        """
        command = command.replace(r"\\", "/").replace("\\", "/").replace('"', '"')
        if not output:
            command = command + ' >nul 2>nul'
        logger.info(command)
        error_code = os.system(command)
        if error_code:
            if allow_failure:
                logger.info(f"[ allowed failure ], error_code: {error_code}")
                return False
            else:
                logger.info(f"[ failure ], error_code: {error_code}")
                self.show_error(command)
                raise ExecutionError
        else:
            logger.info(f"[ success ]")
            return True

    def subprocess_execute(self, cmd, timeout=10):
        """
        Args:
            cmd (list[str]):
            timeout:

        Returns:
            str:
        """
        logger.info(' '.join(cmd))
        process = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True)
        try:
            stdout, stderr = process.communicate(timeout=timeout)
            process.kill()
        except subprocess.TimeoutExpired:
            process.kill()
            stdout, stderr = process.communicate()
            logger.info(f'TimeoutExpired, stdout={stdout}, stderr={stderr}')
        return stdout.decode()

    def show_error(self, command=None):
        logger.hr("Update failed", 0)
        self.show_config()
        logger.info("")
        logger.info(f"Last command: {command}")
        logger.info(
            "Please check your deploy settings in config/deploy.yaml "
            "and re-open Alas.exe"
        )
        logger.info("Take the screenshot of entire window if you need help")

```

`deploy/Windows/emulator.py`:

```py
import asyncio
import filecmp
import os
import shutil
import typing as t
from dataclasses import dataclass

from deploy.Windows.alas import AlasManager
from deploy.Windows.logger import logger
from deploy.Windows.utils import cached_property

asyncio.set_event_loop_policy(asyncio.WindowsProactorEventLoopPolicy())


@dataclass
class DataAdbDevice:
    serial: str
    status: str


class EmulatorManager(AlasManager):
    @cached_property
    def emulator_manager(self):
        from module.device.platform.emulator_windows import EmulatorManager
        return EmulatorManager()

    def adb_kill(self):
        # Just kill it, because some adb don't obey.
        logger.hr('Kill all known ADB', level=2)
        for proc in self.iter_process_by_names([
            # Most emulator use this
            'adb.exe',
            # NoxPlayer 夜神模拟器
            'nox_adb.exe',
            # MumuPlayer MuMu模拟器
            'adb_server.exe',
            # Bluestacks 蓝叠模拟器
            'HD-Adb.exe'
        ]):
            logger.info(proc)
            self.kill_process(proc)

    def adb_devices(self):
        """
        Returns:
            list[DataAdbDevice]: Connected devices in adb
        """
        logger.hr('Adb deivces', level=2)
        result = self.subprocess_execute([self.adb, 'devices'])
        devices = []
        for line in result.replace('\r\r\n', '\n').replace('\r\n', '\n').split('\n'):
            if line.startswith('List') or '\t' not in line:
                continue
            serial, status = line.split('\t')
            device = DataAdbDevice(
                serial=serial,
                status=status,
            )
            devices.append(device)
            logger.info(device)
        return devices

    def brute_force_connect(self):
        """
        Brute-force connect all available emulator instances
        """
        devices = self.adb_devices()

        # Disconnect offline devices
        for device in devices:
            if device.status == 'offline':
                self.subprocess_execute([self.adb, 'disconnect', device.serial])

        # Get serial
        list_serial = self.emulator_manager.all_emulator_serials

        logger.hr('Brute force connect', level=2)

        async def _connect(serial):
            try:
                await asyncio.create_subprocess_exec(self.adb, 'connect', serial)
            except Exception as e:
                logger.info(e)

        async def connect():
            await asyncio.gather(
                *[_connect(serial) for serial in list_serial]
            )

        asyncio.run(connect())

        return self.adb_devices()

    @staticmethod
    def adb_path_to_backup(adb, new_backup=True):
        """
        Args:
            adb (str): Filepath to an adb binary
            new_backup (bool): True to return a new backup path,
                False to return an existing backup

        Returns:
            str: Filepath to its backup file
        """
        for n in range(10):
            backup = f'{adb}.bak{n}' if n else f'{adb}.bak'
            if os.path.exists(backup):
                if new_backup:
                    continue
                else:
                    return backup
            else:
                if new_backup:
                    return backup
                else:
                    continue

        # Too many backups, override the first one
        return f'{adb}.bak'

    def iter_adb_to_replace(self) -> t.Iterable[str]:
        for adb in self.emulator_manager.all_adb_binaries:
            if filecmp.cmp(adb, self.adb, shallow=True):
                logger.info(f'{adb} is same as {self.adb}, skip')
                continue
            else:
                yield adb

    def adb_replace(self):
        """
        Backup the adb in emulator folder to xxx.bak, replace it with your adb.
        `adb kill-server` must be called before replacing.
        """
        replace = list(self.iter_adb_to_replace())
        if not replace:
            logger.info('No need to replace')
            return

        self.adb_kill()
        for adb in replace:
            logger.info(f'Replacing {adb}')
            bak = self.adb_path_to_backup(adb, new_backup=True)
            logger.info(f'{adb} -----> {bak}')
            shutil.move(adb, bak)
            logger.info(f'{self.adb} -----> {adb}')
            shutil.copy(self.adb, adb)

    def adb_recover(self):
        """
        Revert `adb_replace()`
        """
        for adb in self.emulator_manager.all_adb_binaries:
            logger.info(f'Recovering {adb}')
            bak = self.adb_path_to_backup(adb, new_backup=False)
            if os.path.exists(bak):
                logger.info(f'Delete {adb}')
                if os.path.exists(adb):
                    os.remove(adb)
                logger.info(f'{bak} -----> {adb}')
                shutil.move(bak, adb)
            else:
                logger.info('No backup available, skip')
                continue


if __name__ == '__main__':
    os.chdir(os.path.join(os.path.dirname(__file__), '../../'))
    self = EmulatorManager()
    self.brute_force_connect()

```

`deploy/Windows/git.py`:

```py
import configparser
import os

from deploy.Windows.config import DeployConfig
from deploy.Windows.logger import Progress, logger
from deploy.Windows.utils import cached_property
from deploy.git_over_cdn.client import GitOverCdnClient


class GitConfigParser(configparser.ConfigParser):
    def check(self, section, option, value):
        result = self.get(section, option, fallback=None)
        if result == value:
            logger.info(f'Git config {section}.{option} = {value}')
            return True
        else:
            return False


class GitOverCdnClientWindows(GitOverCdnClient):
    def update(self, *args, **kwargs):
        Progress.GitInit()
        _ = super().update(*args, **kwargs)
        Progress.GitShowVersion()
        return _

    @cached_property
    def latest_commit(self) -> str:
        _ = super().latest_commit
        Progress.GitLatestCommit()
        return _

    def download_pack(self):
        _ = super().download_pack()
        Progress.GitDownloadPack()
        return _


class GitManager(DeployConfig):
    @staticmethod
    def remove(file):
        try:
            os.remove(file)
            logger.info(f'Removed file: {file}')
        except FileNotFoundError:
            logger.info(f'File not found: {file}')

    @cached_property
    def git_config(self):
        conf = GitConfigParser()
        conf.read('./.git/config')
        return conf

    def git_repository_init(
            self, repo, source='origin', branch='master',
            proxy='', ssl_verify=True, keep_changes=False
    ):
        logger.hr('Git Init', 1)
        if not self.execute(f'"{self.git}" init', allow_failure=True):
            self.remove('./.git/config')
            self.remove('./.git/index')
            self.remove('./.git/HEAD')
            self.remove('./.git/ORIG_HEAD')
            self.execute(f'"{self.git}" init')
        Progress.GitInit()

        logger.hr('Set Git Proxy', 1)
        if proxy:
            if not self.git_config.check('http', 'proxy', value=proxy):
                self.execute(f'"{self.git}" config --local http.proxy {proxy}')
            if not self.git_config.check('https', 'proxy', value=proxy):
                self.execute(f'"{self.git}" config --local https.proxy {proxy}')
        else:
            if not self.git_config.check('http', 'proxy', value=None):
                self.execute(f'"{self.git}" config --local --unset http.proxy', allow_failure=True)
            if not self.git_config.check('https', 'proxy', value=None):
                self.execute(f'"{self.git}" config --local --unset https.proxy', allow_failure=True)

        if ssl_verify:
            if not self.git_config.check('http', 'sslVerify', value='true'):
                self.execute(f'"{self.git}" config --local http.sslVerify true', allow_failure=True)
        else:
            if not self.git_config.check('http', 'sslVerify', value='false'):
                self.execute(f'"{self.git}" config --local http.sslVerify false', allow_failure=True)
        Progress.GitSetConfig()

        logger.hr('Set Git Repository', 1)
        if not self.git_config.check(f'remote "{source}"', 'url', value=repo):
            if not self.execute(f'"{self.git}" remote set-url {source} {repo}', allow_failure=True):
                self.execute(f'"{self.git}" remote add {source} {repo}')
        Progress.GitSetRepo()

        logger.hr('Fetch Repository Branch', 1)
        self.execute(f'"{self.git}" fetch {source} {branch}')
        Progress.GitFetch()

        logger.hr('Pull Repository Branch', 1)
        # Remove git lock
        for lock_file in [
            './.git/index.lock',
            './.git/HEAD.lock',
            './.git/refs/heads/master.lock',
        ]:
            if os.path.exists(lock_file):
                logger.info(f'Lock file {lock_file} exists, removing')
                os.remove(lock_file)
        if keep_changes:
            if self.execute(f'"{self.git}" stash', allow_failure=True):
                self.execute(f'"{self.git}" pull --ff-only {source} {branch}')
                if self.execute(f'"{self.git}" stash pop', allow_failure=True):
                    pass
                else:
                    # No local changes to existing files, untracked files not included
                    logger.info('Stash pop failed, there seems to be no local changes, skip instead')
            else:
                logger.info('Stash failed, this may be the first installation, drop changes instead')
                self.execute(f'"{self.git}" reset --hard {source}/{branch}')
                self.execute(f'"{self.git}" pull --ff-only {source} {branch}')
        else:
            self.execute(f'"{self.git}" reset --hard {source}/{branch}')
            Progress.GitReset()
            # Since `git fetch` is already called, checkout is faster
            if not self.execute(f'"{self.git}" checkout {branch}', allow_failure=True):
                self.execute(f'"{self.git}" pull --ff-only {source} {branch}')
            Progress.GitCheckout()

        logger.hr('Show Version', 1)
        self.execute(f'"{self.git}" --no-pager log --no-merges -1')
        Progress.GitShowVersion()

    @property
    def goc_client(self):
        client = GitOverCdnClient(
            url='https://vip.123pan.cn/1815343254/pack/LmeSzinc_StarRailCopilot_master',
            folder=self.root_filepath,
            source='origin',
            branch='master',
            git=self.git,
        )
        client.logger = logger
        return client

    def git_install(self):
        logger.hr('Update Alas', 0)

        if not self.AutoUpdate:
            logger.info('AutoUpdate is disabled, skip')
            Progress.GitShowVersion()
            return

        if self.GitOverCdn:
            if self.goc_client.update(keep_changes=self.KeepLocalChanges):
                return

        self.git_repository_init(
            repo=self.Repository,
            source='origin',
            branch=self.Branch,
            proxy=self.GitProxy,
            ssl_verify=self.SSLVerify,
            keep_changes=self.KeepLocalChanges,
        )

```

`deploy/Windows/installer_test.py`:

```py
import time

from deploy.Windows.logger import logger

output = r"""
Process: [ 0% ]
./toolkit/Lib/site-packages/requests/sessions.py trust_env already patched
./toolkit/Lib/site-packages/pip/_vendor/requests/sessions.py trust_env already patched
./toolkit/Lib/site-packages/uiautomator2/init.py minicap_urls no need to patch
./toolkit/Lib/site-packages/uiautomator2/init.py appdir already patched
./toolkit/Lib/site-packages/adbutils/mixin.py apkutils2 no need to patch
Process: [ 5% ]
==================== SHOW DEPLOY CONFIG ====================
Repository: https://e.coding.net/llop18870/alas/AzurLaneAutoScript.git
Branch: feature
PypiMirror: https://pypi.tuna.tsinghua.edu.cn/simple
Language: zh-CN
Rest of the configs are the same as default
Process: [ 10% ]
+---------------------------------------------------+
|                    UPDATE ALAS                    |
+---------------------------------------------------+
==================== GIT INIT ====================
"D:/AlasRelease/AzurLaneAutoScript/toolkit/Git/mingw64/bin/git.exe" init
Reinitialized existing Git repository in D:/AlasRelease/AzurLaneAutoScript/.git/
[ success ]
Process: [ 15% ]
==================== SET GIT PROXY ====================
Git config http.proxy = None
Git config https.proxy = None
Git config http.sslVerify = true
Process: [ 18% ]
==================== SET GIT REPOSITORY ====================
Git config remote "origin".url = https://e.coding.net/llop18870/alas/AzurLaneAutoScript.git
Process: [ 20% ]
==================== FETCH REPOSITORY BRANCH ====================
"D:/AlasRelease/AzurLaneAutoScript/toolkit/Git/mingw64/bin/git.exe" fetch origin feature
From https://e.coding.net/llop18870/alas/AzurLaneAutoScript
 * branch              feature    -> FETCH_HEAD
[ success ]
Process: [ 40% ]
==================== PULL REPOSITORY BRANCH ====================
"D:/AlasRelease/AzurLaneAutoScript/toolkit/Git/mingw64/bin/git.exe" reset --hard origin/feature
HEAD is now at 11595208 Fix: No process cache since it's fast already
[ success ]
Process: [ 45% ]
"D:/AlasRelease/AzurLaneAutoScript/toolkit/Git/mingw64/bin/git.exe" checkout feature
Already on 'feature'
Your branch is up to date with 'origin/feature'.
[ success ]
Process: [ 48% ]
==================== SHOW VERSION ====================
"D:/AlasRelease/AzurLaneAutoScript/toolkit/Git/mingw64/bin/git.exe" --no-pager log --no-merges -1
commit 11595208afe1ca1b3d48f5722795ce2387bccd87 (HEAD -> feature, origin/feature)
Author: LmeSzinc <37934724+LmeSzinc@users.noreply.github.com>
Date:   Tue Apr 4 01:17:09 2023 +0800

    Fix: No process cache since it's fast already
[ success ]
Process: [ 50% ]
+----------------------------------------------------------+
|                    KILL EXISTING ALAS                    |
+----------------------------------------------------------+
List process
Found 264 processes
Process: [ 60% ]
+-----------------------------------------------------------+
|                    UPDATE DEPENDENCIES                    |
+-----------------------------------------------------------+
All dependencies installed
Process: [ 70% ]
+--------------------------------------------------+
|                    UPDATE APP                    |
+--------------------------------------------------+
Old file: D:\AlasRelease\AzurLaneAutoScript\toolkit\WebApp\resources\app.asar
New version: 0.3.7
New file: D:\AlasRelease\AzurLaneAutoScript\toolkit\lib\site-packages\alas_webapp\app.asar
app.asar is already up to date
Process: [ 75% ]
+---------------------------------------------------------+
|                    START ADB SERVICE                    |
+---------------------------------------------------------+
==================== REPLACE ADB ====================
No need to replace
Process: [ 90% ]
==================== ADB CONNECT ====================
-------------------- ADB DEIVCES --------------------
D:/AlasRelease/AzurLaneAutoScript/toolkit/Lib/site-packages/adbutils/binaries/adb.exe devices
DataAdbDevice(serial='127.0.0.1:16384', status='device')
DataAdbDevice(serial='127.0.0.1:16480', status='device')
DataAdbDevice(serial='127.0.0.1:7555', status='device')
Process: [ 92% ]
-------------------- BRUTE FORCE CONNECT --------------------
already connected to 127.0.0.1:7555
already connected to 127.0.0.1:16384
already connected to 127.0.0.1:16480
already connected to 127.0.0.1:7555
Process: [ 98% ]
-------------------- ADB DEIVCES --------------------
D:/AlasRelease/AzurLaneAutoScript/toolkit/Lib/site-packages/adbutils/binaries/adb.exe devices
DataAdbDevice(serial='127.0.0.1:16384', status='device')
DataAdbDevice(serial='127.0.0.1:16480', status='device')
DataAdbDevice(serial='127.0.0.1:7555', status='device')
Process: [ 100% ]
中文测试，！@#nfoir
"""


def run():
    for row in output.split('\n'):
        time.sleep(0.05)
        if row:
            logger.info(row)


if __name__ == '__main__':
    run()

```

`deploy/Windows/logger.py`:

```py
import logging
import os
import sys

os.chdir(os.path.join(os.path.dirname(__file__), '../../'))

logger = logging.getLogger("deploy")
_logger = logger

formatter = logging.Formatter(fmt="%(message)s")
hdlr = logging.StreamHandler(stream=sys.stdout)
hdlr.setFormatter(formatter)
logger.addHandler(hdlr)
logger.setLevel(logging.INFO)


def hr(title, level=3):
    if logger is not _logger:
        return logger.hr(title, level)

    title = str(title).upper()
    if level == 0:
        middle = "|" + " " * 20 + title + " " * 20 + "|"
        border = "+" + "-" * (len(middle) - 2) + "+"
        logger.info(border)
        logger.info(middle)
        logger.info(border)
    if level == 1:
        logger.info("=" * 20 + " " + title + " " + "=" * 20)
    if level == 2:
        logger.info("-" * 20 + " " + title + " " + "-" * 20)
    if level == 3:
        logger.info(f"<<< {title} >>>")


def attr(name, text):
    print(f'[{name}] {text}')


logger.hr = hr
logger.attr = attr


class Percentage:
    def __init__(self, progress):
        self.progress = progress

    def __call__(self, *args, **kwargs):
        logger.info(f'Process: [ {self.progress}% ]')


class Progress:
    Start = Percentage(0)
    ShowDeployConfig = Percentage(10)

    GitInit = Percentage(12)
    GitSetConfig = Percentage(13)
    GitSetRepo = Percentage(15)
    GitFetch = Percentage(40)
    GitReset = Percentage(45)
    GitCheckout = Percentage(48)
    GitShowVersion = Percentage(50)

    GitLatestCommit = Percentage(25)
    GitDownloadPack = Percentage(40)

    KillExisting = Percentage(60)
    UpdateDependency = Percentage(70)
    UpdateAlasApp = Percentage(75)

    AdbReplace = Percentage(80)
    AdbConnect = Percentage(95)

    # Must have a 100%
    Finish = Percentage(100)

```

`deploy/Windows/patch.py`:

```py
import os
import re

from deploy.Windows.logger import logger


def patch_trust_env(file):
    """
    People use proxies, but they never realize that proxy software leaves a
    global proxy pointing to itself even when the software is not running.
    In most situations we set `session.trust_env = False` in requests, but this
    does not effect the `pip` command.

    To handle untrusted user environment for good. We patch the code file in
    requests directly. Of course, the patch only effect the python env inside
    Alas.

    Returns:
        bool: If patched.
    """
    try:
        with open(file, 'r', encoding='utf-8') as f:
            content = f.read()
    except FileNotFoundError:
        logger.info(f'{file} trust_env not exist')
        return

    if re.search('self.trust_env = True', content):
        content = re.sub('self.trust_env = True', 'self.trust_env = False', content)
        with open(file, 'w', encoding='utf-8') as f:
            f.write(content)
        logger.info(f'{file} trust_env patched')
    elif re.search('self.trust_env = False', content):
        logger.info(f'{file} trust_env already patched')
    else:
        logger.info(f'{file} trust_env is not in the file')


def check_running_directory():
    """
    An fool-proof mechanism.
    Show error if user is running Easy Install in compressing software,
    since Alas can't install in temp directories.
    """
    file = __file__.replace(r"\\", "/").replace("\\", "/")
    # C:/Users/<user>/AppData/Local/Temp/360zip$temp/360$3/AzurLaneAutoScript
    if 'Temp/360zip' in file:
        logger.critical('请先解压Alas的压缩包，再安装Alas')
        exit(1)
    # C:/Users/<user>/AppData/Local/Temp/Rar$EXa9248.23428/AzurLaneAutoScript
    if 'Temp/Rar' in file or 'Local/Temp' in file:
        logger.critical('Please unzip ALAS installer first')
        exit(1)


def patch_uiautomator2():
    """
    uiautomator2 download assets from https://tool.appetizer.io first then fallback to https://github.com/openatx.
    https://tool.appetizer.io is added to bypass the wall in China but https://tool.appetizer.io is slow outside of CN
    plus some CN users cannot access it for unknown reason.

    So we patch `uiautomator2/init.py` to a local assets cache `uiautomator2cache/cache`.
        appdir = os.path.join(os.path.expanduser('~'), '.uiautomator2')
    to:
        appdir = os.path.join(__file__, '../../uiautomator2cache')

    And we also remove minicap installations since emulators doesn't need it.
        for url in self.minicap_urls:
            self.push_url(url)
    to:
        for url in []:
            self.push_url(url)
    """
    init_file = './toolkit/Lib/site-packages/uiautomator2/init.py'
    cache_dir = './toolkit/Lib/site-packages/uiautomator2cache/cache'
    appdir = "os.path.join(__file__, '../../uiautomator2cache')"

    modified = False
    try:
        with open(init_file, 'r', encoding='utf-8') as f:
            content = f.read()
    except FileNotFoundError:
        logger.info(f'{init_file} not exist')
        return

    # Patch minicap_urls
    res = re.search(r'self.minicap_urls', content)
    if res:
        content = re.sub(r'self.minicap_urls', '[]', content)
        modified = True
        logger.info(f'{init_file} minicap_urls patched')
    else:
        logger.info(f'{init_file} minicap_urls no need to patch')

    # Patch appdir
    if os.path.exists(cache_dir):
        res = re.search(r'appdir ?=(.*)\n', content)
        if res:
            prev = res.group(1).strip()
            if prev == appdir:
                logger.info(f'{init_file} appdir already patched')
            else:
                content = re.sub(r'appdir ?=.*\n', f'appdir = {appdir}\n', content)
                modified = True
                logger.info(f'{init_file} appdir patched')
        else:
            logger.info(f'{init_file} appdir not found')
    else:
        logger.info('uiautomator2cache is not installed skip patching')

    # Save file
    if modified:
        with open(init_file, 'w', encoding='utf-8') as f:
            f.write(content)
        logger.info(f'{init_file} content saved')


def patch_apkutils2():
    """
    `adbutils/mixin.py` `ShellMixin.install` imports `apkutils2`, but `apkutils2` does not provide wheel files,
    it may failed to install for unknown reasons. Since we never used that method, we just remove the import.
    """
    mixin = './toolkit/Lib/site-packages/adbutils/mixin.py'

    try:
        with open(mixin, 'r', encoding='utf-8') as f:
            content = f.read()
    except FileNotFoundError:
        logger.info(f'{mixin} not exist')
        return

    res = re.search(r'import apkutils2', content)
    if res:
        content = re.sub(r'import apkutils2', '', content)
        with open(mixin, 'w', encoding='utf-8') as f:
            f.write(content)
        logger.info(f'{mixin} apkutils2 patched')
    else:
        logger.info(f'{mixin} apkutils2 no need to patch')


def pre_checks():
    check_running_directory()

    # patch_trust_env
    patch_trust_env('./toolkit/Lib/site-packages/requests/sessions.py')
    patch_trust_env('./toolkit/Lib/site-packages/pip/_vendor/requests/sessions.py')

    patch_uiautomator2()
    patch_apkutils2()


if __name__ == '__main__':
    pre_checks()

```

`deploy/Windows/pip.py`:

```py
import os
import re
import typing as t
from dataclasses import dataclass
from urllib.parse import urlparse

from deploy.Windows.config import DeployConfig
from deploy.Windows.logger import logger, Progress
from deploy.Windows.utils import cached_property


@dataclass
class DataDependency:
    name: str
    version: str

    def __post_init__(self):
        # uvicorn[standard] -> uvicorn
        self.name = re.sub(r'\[.*\]', '', self.name)
        # opencv_python -> opencv-python
        self.name = self.name.replace('_', '-').strip()
        # PyYaml -> pyyaml
        self.name = self.name.lower()
        self.version = self.version.strip()
        self.version = re.sub(r'\.0$', '', self.version)

    @cached_property
    def pretty_name(self):
        return f'{self.name}=={self.version}'

    def __str__(self):
        return self.pretty_name

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(str(self))


class PipManager(DeployConfig):
    @cached_property
    def pip(self):
        return f'"{self.python}" -m pip'

    @cached_property
    def python_site_packages(self):
        return os.path.abspath(os.path.join(self.python, '../Lib/site-packages')) \
            .replace(r"\\", "/").replace("\\", "/")

    @cached_property
    def set_installed_dependency(self) -> t.Set[DataDependency]:
        data = []
        regex = re.compile(r'(.*)-(.*).dist-info')
        try:
            for name in os.listdir(self.python_site_packages):
                res = regex.search(name)
                if res:
                    dep = DataDependency(name=res.group(1), version=res.group(2))
                    data.append(dep)
        except FileNotFoundError:
            logger.info(f'Directory not found: {self.python_site_packages}')
        return set(data)

    @cached_property
    def set_required_dependency(self) -> t.Set[DataDependency]:
        data = []
        regex = re.compile('(.*)==(.*)[ ]*#')
        file = self.filepath('./requirements.txt')
        try:
            with open(file, 'r', encoding='utf-8') as f:
                for line in f.readlines():
                    res = regex.search(line)
                    if res:
                        dep = DataDependency(name=res.group(1), version=res.group(2))
                        data.append(dep)
        except FileNotFoundError:
            logger.info(f'File not found: {file}')
        return set(data)

    @cached_property
    def set_dependency_to_install(self) -> t.Set[DataDependency]:
        """
        A poor dependency comparison, but much much faster than `pip install` and `pip list`
        """
        data = []
        for dep in self.set_required_dependency:
            if dep not in self.set_installed_dependency:
                data.append(dep)
        return set(data)

    def pip_install(self):
        logger.hr('Update Dependencies', 0)

        if not self.InstallDependencies:
            logger.info('InstallDependencies is disabled, skip')
            Progress.UpdateDependency()
            return

        if not len(self.set_dependency_to_install):
            logger.info('All dependencies installed')
            Progress.UpdateDependency()
            return
        else:
            logger.info(f'Dependencies to install: {self.set_dependency_to_install}')

        # Install
        logger.hr('Check Python', 1)
        self.execute(f'"{self.python}" --version')

        arg = []
        if self.PypiMirror:
            mirror = self.PypiMirror
            arg += ['-i', mirror]
            # Trust http mirror or skip ssl verify
            if 'http:' in mirror or not self.SSLVerify:
                arg += ['--trusted-host', urlparse(mirror).hostname]
        elif not self.SSLVerify:
            arg += ['--trusted-host', 'pypi.org']
            arg += ['--trusted-host', 'files.pythonhosted.org']

        # Don't update pip, just leave it.
        # logger.hr('Update pip', 1)
        # self.execute(f'"{self.pip}" install --upgrade pip{arg}')
        arg += ['--disable-pip-version-check']

        logger.hr('Update Dependencies', 1)
        arg = ' ' + ' '.join(arg) if arg else ''
        self.execute(f'{self.pip} install -r {self.requirements_file}{arg}')
        Progress.UpdateDependency()

```

`deploy/Windows/template.yaml`:

```yaml
Deploy:
  Git:
    # URL of AzurLaneAutoScript repository
    # [CN user] Use 'cn' to get update from git-over-cdn service
    # [Other] Use 'global' to get update from https://github.com/LmeSzinc/StarRailCopilot
    Repository: 'global'
    # Branch of Alas
    # [Developer] Use 'dev', 'app', etc, to try new features
    # [Other] Use 'master', the stable branch
    Branch: 'master'
    # Filepath of git executable `git.exe`
    # [Easy installer] Use './toolkit/Git/mingw64/bin/git.exe'
    # [Other] Use you own git
    GitExecutable: './toolkit/Git/mingw64/bin/git.exe'
    # Set git proxy
    # [CN user] Use your local http proxy (http://127.0.0.1:{port}) or socks5 proxy (socks5://127.0.0.1:{port})
    # [Other] Use null
    GitProxy: null
    # Set SSL Verify
    # [In most cases] Use true
    # [Other] Use false to when connected to an untrusted network
    SSLVerify: true
    # Update Alas at startup
    # [In most cases] Use true
    AutoUpdate: true
    # Whether to keep local changes during update
    # User settings, logs and screenshots will be kept, no mather this is true or false
    # [Developer] Use true, if you modified the code
    # [Other] Use false
    KeepLocalChanges: false

  Python:
    # Filepath of python executable `python.exe`
    # [Easy installer] Use './toolkit/python.exe'
    # [Other] Use you own python, and its version should be 3.7.6 64bit
    PythonExecutable: './toolkit/python.exe'
    # URL of pypi mirror
    # [CN user] Use 'https://pypi.tuna.tsinghua.edu.cn/simple' for faster and more stable download
    # [Other] Use null
    PypiMirror: null
    # Install dependencies at startup
    # [In most cases] Use true
    InstallDependencies: true
    # Path to requirements.txt
    # [In most cases] Use 'requirements.txt'
    # [In AidLux] Use './deploy/AidLux/{version}/requirements.txt', version is default to 0.92
    RequirementsFile: 'requirements.txt'

  Adb:
    # Filepath of ADB executable `adb.exe`
    # [Easy installer] Use './toolkit/Lib/site-packages/adbutils/binaries/adb.exe'
    # [Other] Use you own latest ADB, but not the ADB in your emulator
    AdbExecutable: './toolkit/Lib/site-packages/adbutils/binaries/adb.exe'
    # Whether to replace ADB
    # Chinese emulators (NoxPlayer, LDPlayer, MemuPlayer, MuMuPlayer) use their own ADB, instead of the latest.
    # Different ADB servers will terminate each other at startup, resulting in disconnection.
    # For compatibility, we have to replace them all.
    # This will do:
    #   1. Terminate current ADB server
    #   2. Rename ADB from all emulators to *.bak and replace them by the AdbExecutable set above
    #   3. Brute-force connect to all available emulator instances
    # [In most cases] Use true
    # [In few cases] Use false, if you have other programs using ADB.
    ReplaceAdb: true
    # Brute-force connect to all available emulator instances
    # [In most cases] Use true
    AutoConnect: true
    # Re-install uiautomator2
    # [In most cases] Use true
    InstallUiautomator2: true

  Ocr:
    # Run Ocr as a service, can reduce memory usage by not import mxnet everytime you start an alas instance

    # Whether to use ocr server
    # [Default] false
    UseOcrServer: false
    # Whether to start ocr server when start GUI
    # [Default] false
    StartOcrServer: false
    # Port of ocr server runs by GUI
    # [Default] 22268
    OcrServerPort: 22268
    # Address of ocr server for alas instance to connect
    # [Default] 127.0.0.1:22268
    OcrClientAddress: 127.0.0.1:22268

  Update:
    # Use auto update and builtin updater feature
    # This may cause problem https://github.com/LmeSzinc/AzurLaneAutoScript/issues/876
    EnableReload: true
    # Check update every X minute
    # [Disable] 0
    # [Default] 5
    CheckUpdateInterval: 5
    # Scheduled restart time
    # If there are updates, Alas will automatically restart and update at this time every day
    # and run all alas instances that running before restarted
    # [Disable] null
    # [Default] 03:50
    AutoRestartTime: 03:50

  Misc:
    # Enable discord rich presence
    DiscordRichPresence: false

  RemoteAccess:
    # Enable remote access (using ssh reverse tunnel serve by https://github.com/wang0618/localshare)
    # ! You need to set Password below to enable remote access since everyone can access to your alas if they have your url.
    # See here (http://app.azurlane.cloud/en.html) for more infomation.
    EnableRemoteAccess: false
    # Username when login into ssh server
    # [Default] null (will generate a random one when startup)
    SSHUser: null
    # Server to connect
    # [Default] null
    # [Format] host:port
    SSHServer: null
    # Filepath of SSH executable `ssh.exe`
    # [Default] ssh (find ssh in system PATH)
    # If you don't have one, install OpenSSH or download it here (https://github.com/PowerShell/Win32-OpenSSH/releases)
    SSHExecutable: ssh

  Webui:
    # --host. Host to listen
    # [Use IPv6] '::'
    # [In most cases] Default to '0.0.0.0'
    WebuiHost: 0.0.0.0
    # --port. Port to listen
    # You will be able to access webui via `http://{host}:{port}`
    # [In most cases] Default to 22367
    WebuiPort: 22367
    # Language to use on web ui
    # 'zh-CN' for Chinese simplified
    # 'en-US' for English
    # 'ja-JP' for Japanese
    # 'zh-TW' for Chinese traditional
    Language: en-US
    # Theme of web ui
    # 'default' for light theme
    # 'dark' for dark theme
    Theme: default
    # Follow system DPI scaling
    # [In most cases] true
    # [In few cases] false to make Alas smaller, if you have a low resolution but high DPI scaling.
    DpiScaling: true
    # --key. Password of web ui
    # Useful when expose Alas to the public network
    Password: null
    # --cdn. Use jsdelivr cdn for pywebio static files (css, js).
    # 'true' for jsdelivr cdn
    # 'false' for self host cdn (automatically)
    # 'https://path.to.your/cdn' to use custom cdn
    CDN: false
    # --run. Auto-run specified config when startup
    # 'null' default no specified config
    # '["alas"]' specified "alas" config
    # '["alas","alas2"]' specified "alas" "alas2" configs
    Run: null
    # To update app.asar
    # [In most cases] true
    AppAsarUpdate: true
    # --no-sandbox. https://github.com/electron/electron/issues/30966
    # Some Windows systems cannot call the GPU normally for virtualization, and you need to manually turn off sandbox mode
    NoSandbox: false

```

`deploy/Windows/utils.py`:

```py
import os
import re
from dataclasses import dataclass
from typing import Callable, Generic, Iterable, TypeVar

T = TypeVar("T")

DEPLOY_CONFIG = './config/deploy.yaml'
DEPLOY_TEMPLATE = './deploy/Windows/template.yaml'


class cached_property(Generic[T]):
    """
    cached-property from https://github.com/pydanny/cached-property
    Add typing support

    A property that is only computed once per instance and then replaces itself
    with an ordinary attribute. Deleting the attribute resets the property.
    Source: https://github.com/bottlepy/bottle/commit/fa7733e075da0d790d809aa3d2f53071897e6f76
    """

    def __init__(self, func: Callable[..., T]):
        self.func = func

    def __get__(self, obj, cls) -> T:
        if obj is None:
            return self

        value = obj.__dict__[self.func.__name__] = self.func(obj)
        return value


def iter_folder(folder, is_dir=False, ext=None):
    """
    Args:
        folder (str):
        is_dir (bool): True to iter directories only
        ext (str): File extension, such as `.yaml`

    Yields:
        str: Absolute path of files
    """
    for file in os.listdir(folder):
        sub = os.path.join(folder, file)
        if is_dir:
            if os.path.isdir(sub):
                yield sub.replace('\\\\', '/').replace('\\', '/')
        elif ext is not None:
            if not os.path.isdir(sub):
                _, extension = os.path.splitext(file)
                if extension == ext:
                    yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')
        else:
            yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')


def poor_yaml_read(file):
    """
    Poor implementation to load yaml without pyyaml dependency, but with re

    Args:
        file (str):

    Returns:
        dict:
    """
    if not os.path.exists(file):
        return {}

    data = {}
    regex = re.compile(r'^(.*?):(.*?)$')
    with open(file, 'r', encoding='utf-8') as f:
        for line in f.readlines():
            line = line.strip('\n\r\t ').replace('\\', '/')
            if line.startswith('#'):
                continue
            result = re.match(regex, line)
            if result:
                k, v = result.group(1), result.group(2).strip('\n\r\t\' ')
                if v:
                    if v.lower() == 'null':
                        v = None
                    elif v.lower() == 'false':
                        v = False
                    elif v.lower() == 'true':
                        v = True
                    elif v.isdigit():
                        v = int(v)
                    data[k] = v

    return data


def poor_yaml_write(data, file, template_file=DEPLOY_TEMPLATE):
    """
    Args:
        data (dict):
        file (str):
        template_file (str):
    """
    with open(template_file, 'r', encoding='utf-8') as f:
        text = f.read().replace('\\', '/')

    for key, value in data.items():
        if value is None:
            value = 'null'
        elif value is True:
            value = "true"
        elif value is False:
            value = "false"
        text = re.sub(f'{key}:.*?\n', f'{key}: {value}\n', text)

    with open(file, 'w', encoding='utf-8', newline='') as f:
        f.write(text)


@dataclass
class DataProcessInfo:
    proc: object  # psutil.Process or psutil._pswindows.Process
    pid: int

    @cached_property
    def name(self):
        name = self.proc.name()
        return name

    @cached_property
    def cmdline(self):
        try:
            cmdline = self.proc.cmdline()
        except:
            # psutil.AccessDenied
            cmdline = []
        cmdline = ' '.join(cmdline).replace(r'\\', '/').replace('\\', '/')
        return cmdline

    def __str__(self):
        # Don't print `proc`, it will take some time to get process properties
        return f'DataProcessInfo(name="{self.name}", pid={self.pid}, cmdline="{self.cmdline}")'

    __repr__ = __str__


def iter_process() -> Iterable[DataProcessInfo]:
    try:
        import psutil
    except ModuleNotFoundError:
        return

    if psutil.WINDOWS:
        # Since this is a one-time-usage, we access psutil._psplatform.Process directly
        # to bypass the call of psutil.Process.is_running().
        # This only costs about 0.017s.
        for pid in psutil.pids():
            proc = psutil._psplatform.Process(pid)
            yield DataProcessInfo(
                proc=proc,
                pid=proc.pid,
            )
    else:
        # This will cost about 0.45s, even `attr` is given.
        for proc in psutil.process_iter():
            yield DataProcessInfo(
                proc=proc,
                pid=proc.pid,
            )

```

`deploy/git_over_cdn/client.py`:

```py
import io
import json
import os
import re
import shutil
import subprocess
import zipfile
from typing import Callable, Generic, TypeVar

import requests
from requests.adapters import HTTPAdapter

T = TypeVar("T")

TEMPLATE_FILE = './config/template.yaml'


class cached_property(Generic[T]):
    """
    cached-property from https://github.com/pydanny/cached-property
    Add typing support

    A property that is only computed once per instance and then replaces itself
    with an ordinary attribute. Deleting the attribute resets the property.
    Source: https://github.com/bottlepy/bottle/commit/fa7733e075da0d790d809aa3d2f53071897e6f76
    """

    def __init__(self, func: Callable[..., T]):
        self.func = func

    def __get__(self, obj, cls) -> T:
        if obj is None:
            return self

        value = obj.__dict__[self.func.__name__] = self.func(obj)
        return value


class PrintLogger:
    info = print
    warning = print
    error = print

    @staticmethod
    def attr(name, text):
        print(f'[{name}] {text}')


class GitOverCdnClient:
    logger = PrintLogger()

    def __init__(self, url, folder, source='origin', branch='master', git='git'):
        """
        Args:
            url: http://127.0.0.1:22251/pack/LmeSzinc_AzurLaneAutoScript_master/
            folder: D:/AzurLaneAutoScript
        """
        self.url = url.strip('/')
        self.folder = folder.replace('\\', '/')
        self.source = source
        self.branch = branch
        self.git = git

    def filepath(self, path):
        path = os.path.join(self.folder, '.git', path)
        return os.path.abspath(path).replace('\\', '/')

    def urlpath(self, path):
        return f'{self.url}{path}'

    @cached_property
    def current_commit(self) -> str:
        for file in [
            f'./refs/remotes/{self.source}/{self.branch}',
            f'./refs/heads/{self.branch}',
            'ORIG_HEAD',
        ]:
            file = self.filepath(file)
            try:
                with open(file, 'r', encoding='utf-8') as f:
                    commit = f.read()
                res = re.search(r'([0-9a-f]{40})', commit)
                if res:
                    commit = res.group(1)
                    self.logger.attr('CurrentCommit', commit)
                    return commit
            except FileNotFoundError as e:
                self.logger.error(f'Failed to get local commit: {e}')
            except Exception as e:
                self.logger.error(f'Failed to get local commit: {e}')
        return ''

    @property
    def session(self):
        session = requests.Session()
        session.trust_env = False
        session.mount('http://', HTTPAdapter(max_retries=3))
        session.mount('https://', HTTPAdapter(max_retries=3))
        return session

    @cached_property
    def latest_commit(self) -> str:
        try:
            url = self.urlpath('/latest.json')
            self.logger.info(f'Fetch url: {url}')
            resp = self.session.get(url, timeout=3)
        except Exception as e:
            self.logger.error(f'Failed to get remote commit: {e}')
            return ''

        if resp.status_code == 200:
            try:
                info = json.loads(resp.text)
                commit = info['commit']
                self.logger.attr('LatestCommit', commit)
                return commit
            except json.JSONDecodeError:
                self.logger.error(f'Failed to get remote commit, response is not a json: {resp.text}')
                return ''
            except KeyError:
                self.logger.error(f'Failed to get remote commit, key "commit" is not found: {resp.text}')
                return ''
        else:
            self.logger.error(f'Failed to get remote commit, status={resp.status_code}, text={resp.text}')
            return ''

    def download_pack(self):
        try:
            url = self.urlpath(f'/{self.latest_commit}/{self.current_commit}.zip')
            self.logger.info(f'Fetch url: {url}')
            resp = self.session.get(url, timeout=20)
        except Exception as e:
            self.logger.error(f'Failed to download pack: {e}')
            return False

        if resp.status_code == 200:
            try:
                zipped = zipfile.ZipFile(io.BytesIO(resp.content))
                for file in [f'pack-{self.latest_commit}.pack', f'pack-{self.latest_commit}.idx']:
                    self.logger.info(f'Unzip {file}')
                    member = zipped.getinfo(file)
                    tmp = self.filepath(f'./objects/pack/{file}.tmp')
                    out = self.filepath(f'./objects/pack/{file}')
                    with zipped.open(member) as source, open(tmp, "wb") as target:
                        shutil.copyfileobj(source, target)
                    os.replace(tmp, out)
                return True
            except zipfile.BadZipFile as e:
                # File is not a zip file
                self.logger.error(e)
                return False
            except KeyError as e:
                # There is no item named 'xxx.idx' in the archive
                self.logger.error(e)
                return False
            except Exception as e:
                self.logger.error(e)
                return False
        elif resp.status_code == 404:
            self.logger.error(f'Failed to download pack, status={resp.status_code}, no such pack files provided')
            return False
        else:
            self.logger.error(f'Failed to download pack, status={resp.status_code}, text={resp.text}')
            return False

    def update_refs(self):
        file = self.filepath(f'./refs/remotes/{self.source}/{self.branch}')
        text = f'{self.latest_commit}\n'
        self.logger.info(f'Update refs: {file}')
        os.makedirs(os.path.dirname(file), exist_ok=True)
        try:
            with open(file, 'w', encoding='utf-8', newline='') as f:
                f.write(text)
            return True
        except FileNotFoundError as e:
            self.logger.error(f'Failed to get local commit: {e}')
        except Exception as e:
            self.logger.error(f'Failed to get local commit: {e}')

        return False

    def git_command(self, *args, timeout=300):
        """
        Execute ADB commands in a subprocess,
        usually to be used when pulling or pushing large files.

        Args:
            timeout (int):

        Returns:
            str:
        """
        os.chdir(self.folder)
        cmd = list(map(str, args))
        cmd = [self.git] + cmd
        self.logger.info(f'Execute: {cmd}')

        process = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=False)
        try:
            stdout, stderr = process.communicate(timeout=timeout)
        except subprocess.TimeoutExpired:
            process.kill()
            stdout, stderr = process.communicate()
            self.logger.warning(f'TimeoutExpired when calling {cmd}, stdout={stdout}, stderr={stderr}')
        return stdout.decode()

    def git_reset(self, keep_changes=False):
        """
        git reset --hard <commit>
        """
        if keep_changes:
            self.git_command('stash')
            self.git_command('reset', '--hard', f'{self.source}/{self.branch}')
            self.git_command('stash', 'pop')
        else:
            self.git_command('reset', '--hard', f'{self.source}/{self.branch}')

    def is_uptodate(self):
        """
        Returns:
            bool: If repo is up-to-date
        """
        _ = self.current_commit
        _ = self.latest_commit
        if not self.current_commit:
            self.logger.error('Failed to get current commit')
            return False
        if not self.latest_commit:
            self.logger.error('Failed to get latest commit')
            return False
        if self.current_commit == self.latest_commit:
            self.logger.info('Already up to date')
            return True

    def update(self, keep_changes=False):
        """
        Args:
            keep_changes:

        Returns:
            bool: If repo is up-to-date
        """
        _ = self.current_commit
        _ = self.latest_commit
        if not self.current_commit:
            self.logger.error('Failed to get current commit')
            return False
        if not self.latest_commit:
            self.logger.error('Failed to get latest commit')
            return False
        if self.current_commit == self.latest_commit:
            self.logger.info('Already up to date')
            self.git_reset(keep_changes=keep_changes)
            return True

        if not self.download_pack():
            return False
        if not self.update_refs():
            return False
        self.git_reset(keep_changes=keep_changes)
        self.logger.info('Update success')
        return True

```

`deploy/installer.py`:

```py
from deploy.Windows.logger import Progress, logger
from deploy.Windows.patch import pre_checks

pre_checks()

from deploy.Windows.adb import AdbManager
from deploy.Windows.alas import AlasManager
from deploy.Windows.app import AppManager
from deploy.Windows.config import ExecutionError
from deploy.Windows.git import GitManager
from deploy.Windows.pip import PipManager


class Installer(GitManager, PipManager, AdbManager, AppManager, AlasManager):
    def install(self):
        try:
            self.git_install()
            self.alas_kill()
            self.pip_install()
            self.app_update()
            self.adb_install()
        except ExecutionError:
            exit(1)


def run():
    Progress.Start()
    installer = Installer()
    Progress.ShowDeployConfig()

    installer.install()

    logger.info('Finish')
    Progress.Finish()

```

`deploy/set.py`:

```py
import sys
import typing as t

from deploy.Windows.utils import poor_yaml_read, poor_yaml_write, DEPLOY_TEMPLATE

"""
Set config/deploy.yaml with commands like

python -m deploy.set GitExecutable=/usr/bin/git PythonExecutable=/usr/bin/python3.8
"""


def get_args() -> t.Dict[str, str]:
    args = {}
    for arg in sys.argv[1:]:
        if '=' not in arg:
            continue
        k, v = arg.split('=')
        k, v = k.strip(), v.strip()
        args[k] = v
    return args


def config_set(modify: t.Dict[str, str], output='./config/deploy.yaml') -> t.Dict[str, str]:
    """
    Args:
        modify: A dict of key-value in deploy.yaml
        output:

    Returns:
        The updated key-value in deploy.yaml
    """
    data = poor_yaml_read(DEPLOY_TEMPLATE)
    data.update(poor_yaml_read(output))
    for k, v in modify.items():
        if k in data:
            print(f'Key "{k}" set')
            data[k] = v
        else:
            print(f'Key "{k}" not exist')
    poor_yaml_write(data, file=output)
    return data


if __name__ == '__main__':
    config_set(get_args())

```

`dev_tools/button_extract.py`:

```py
import os
import re
import typing as t
from dataclasses import dataclass

import numpy as np
from tqdm import tqdm

from module.base.code_generator import CodeGenerator
from module.base.utils import SelectedGrids, area_limit, area_pad, get_bbox, get_color, image_size, load_image
from module.config.config_manual import ManualConfig as AzurLaneConfig
from module.config.server import VALID_LANG
from module.config.utils import deep_get, deep_iter, deep_set, iter_folder
from module.logger import logger

SHARE_SERVER = 'share'
ASSET_SERVER = [SHARE_SERVER] + VALID_LANG


class AssetsImage:
    REGEX_ASSETS = re.compile(
        f'^{AzurLaneConfig.ASSETS_FOLDER}/'
        f'(?P<server>{"|".join(ASSET_SERVER).lower()})/'
        f'(?P<module>[a-zA-Z0-9_/]+?)/'
        f'(?P<assets>\w+)'
        f'(?P<frame>\.\d+)?'
        f'(?P<attr>\.AREA|\.SEARCH|\.COLOR|\.BUTTON)?'
        f'\.png$'
    )

    def __init__(self, file: str):
        """
        Args:
            file: ./assets/<server>/<module>/<assets>.<frame>.<attr>.png
                Example: ./assets/cn/ui/login/LOGIN_CONFIRM.2.BUTTON.png
                then, server="cn", module="ui/login", assets="LOGIN_CONFIRM", frame=2, attr="BUTTON"
                <frame> and <attr> are optional.
        """
        self.file: str = file
        prefix = AzurLaneConfig.ASSETS_FOLDER
        res = AssetsImage.REGEX_ASSETS.match(file)

        self.valid = False
        self.server = ''
        self.module = ''
        self.assets = ''
        self.frame = 1
        self.attr = ''

        if res:
            self.valid = True
            self.server = res.group('server')
            self.module = res.group('module')
            self.assets = res.group('assets')
            if res.group('frame'):
                self.frame = int(res.group('frame').strip('.'))
            else:
                self.frame = 1
            if res.group('attr'):
                self.attr = res.group('attr').strip('.')
            else:
                self.attr = ''
            self.parent_file = f'{prefix}{res.group(1)}.png'
        else:
            logger.info(f'Invalid assets name: {self.file}')

        self.bbox: t.Tuple = ()
        self.mean: t.Tuple = ()

    def parse(self):
        image = load_image(self.file)

        size = image_size(image)
        if size != AzurLaneConfig.ASSETS_RESOLUTION:
            logger.warning(f'{self.file} has wrong resolution: {size}')
            self.valid = False
        bbox = get_bbox(image)
        mean = get_color(image=image, area=bbox)
        mean = tuple(np.rint(mean).astype(int))
        self.bbox = bbox
        self.mean = mean
        return bbox, mean

    def __str__(self):
        if self.valid:
            return f'AssetsImage(module={self.module}, assets={self.assets}, server={self.server}, frame={self.frame}, attr={self.attr})'
        else:
            return f'AssetsImage(file={self.file}, valid={self.valid})'


def iter_images():
    for server in ASSET_SERVER:
        for path, folders, files in os.walk(os.path.join(AzurLaneConfig.ASSETS_FOLDER, server)):
            for file in files:
                file = os.path.join(path, file).replace('\\', '/')
                yield AssetsImage(file)


@dataclass
class DataAssets:
    module: str
    assets: str
    server: str
    frame: int
    file: str = ''
    area: t.Tuple[int, int, int, int] = ()
    search: t.Tuple[int, int, int, int] = ()
    color: t.Tuple[int, int, int] = ()
    button: t.Tuple[int, int, int, int] = ()

    @staticmethod
    def area_to_search(area):
        area = area_pad(area, pad=-20)
        area = area_limit(area, (0, 0, *AzurLaneConfig.ASSETS_RESOLUTION))
        return area

    @classmethod
    def product(cls, image: AssetsImage):
        """
        Product DataAssets from AssetsImage with attr=""
        """
        data = cls(module=image.module, assets=image.assets, server=image.server, frame=image.frame, file=image.file)
        data.load_image(image)
        return data

    def load_image(self, image: AssetsImage):
        if image.attr == '':
            self.file = image.file
            self.area = image.bbox
            self.color = image.mean
            self.button = image.bbox
        elif image.attr == 'AREA':
            self.area = image.bbox
        elif image.attr == 'SEARCH':
            self.search = image.bbox
        elif image.attr == 'COLOR':
            self.color = image.mean
        elif image.attr == 'BUTTON':
            self.button = image.bbox
        else:
            logger.warning(f'Trying to load an image with unknown attribute: {image}')

    def generate_code(self):
        return f'Assets(file="{self.file}", area={self.area}, search={self.search}, color={self.color}, button={self.button})'


def iter_assets():
    images = list(iter_images())

    # parse images, this may take a while
    for image in tqdm(images):
        image.parse()

    # Validate images
    images = SelectedGrids(images).select(valid=True)
    images.create_index('module', 'assets', 'server', 'frame', 'attr')
    for image in images.filter(lambda x: bool(x.attr)):
        image: AssetsImage = image
        if not images.indexed_select(image.module, image.assets, image.server, image.frame, ''):
            logger.warning(f'Attribute assets has no parent assets: {image.file}')
            image.valid = False
        if not images.indexed_select(image.module, image.assets, image.server, 1, ''):
            logger.warning(f'Attribute assets has no first frame: {image.file}')
            image.valid = False
        if image.attr == 'SEARCH' and image.frame > 1:
            logger.warning(f'Attribute SEARCH with frame > 1 is not allowed: {image.file}')
            image.valid = False
    images = images.select(valid=True).sort('module', 'assets', 'server', 'frame')

    # Convert to DataAssets
    data = {}
    for image in images:
        if image.attr == '':
            row = DataAssets.product(image)
            row.load_image(image)
            deep_set(data, keys=[image.module, image.assets, image.server, image.frame], value=row)
    # Load attribute images
    for image in images:
        if image.attr != '':
            row = deep_get(data, keys=[image.module, image.assets, image.server, image.frame])
            row.load_image(image)
    # Apply `search` of the first frame to all
    for path, frames in deep_iter(data, depth=3):
        print(path, frames)
        first = frames[1]
        search = first.search if first.search else DataAssets.area_to_search(first.area)
        for frame in frames.values():
            frame.search = search

    return data


def generate_code():
    all = iter_assets()
    for module, module_data in all.items():
        path = os.path.join(AzurLaneConfig.ASSETS_MODULE, module.split('/', maxsplit=1)[0])
        output = os.path.join(path, 'assets.py')
        if os.path.exists(output):
            os.remove(output)
        output = os.path.join(path, 'assets')
        os.makedirs(output, exist_ok=True)
        for prev in iter_folder(output, ext='.py'):
            os.remove(prev)

    for module, module_data in all.items():
        path = os.path.join(AzurLaneConfig.ASSETS_MODULE, module.split('/', maxsplit=1)[0])
        output = os.path.join(path, 'assets')
        gen = CodeGenerator()
        gen.Import("""
        from module.base.button import Button, ButtonWrapper
        """)
        gen.CommentAutoGenerage('dev_tools.button_extract')
        for assets, assets_data in module_data.items():
            has_share = SHARE_SERVER in assets_data
            with gen.Object(key=assets, object_class='ButtonWrapper'):
                gen.ObjectAttr(key='name', value=assets)
                if has_share:
                    servers = assets_data.keys()
                else:
                    servers = VALID_LANG
                for server in servers:
                    frames = list(assets_data.get(server, {}).values())
                    if len(frames) > 1:
                        with gen.ObjectAttr(key=server, value=gen.List()):
                            for index, frame in enumerate(frames):
                                with gen.ListItem(gen.Object(object_class='Button')):
                                    gen.ObjectAttr(key='file', value=frame.file)
                                    gen.ObjectAttr(key='area', value=frame.area)
                                    gen.ObjectAttr(key='search', value=frame.search)
                                    gen.ObjectAttr(key='color', value=frame.color)
                                    gen.ObjectAttr(key='button', value=frame.button)
                    elif len(frames) == 1:
                        frame = frames[0]
                        with gen.ObjectAttr(key=server, value=gen.Object(object_class='Button')):
                            gen.ObjectAttr(key='file', value=frame.file)
                            gen.ObjectAttr(key='area', value=frame.area)
                            gen.ObjectAttr(key='search', value=frame.search)
                            gen.ObjectAttr(key='color', value=frame.color)
                            gen.ObjectAttr(key='button', value=frame.button)
                    else:
                        gen.ObjectAttr(key=server, value=None)
        gen.write(os.path.join(output, f'assets_{module.replace("/", "_")}.py'))


if __name__ == '__main__':
    generate_code()

```

`dev_tools/keyword_extract.py`:

```py
import os
import re
import typing as t
from collections import namedtuple
from functools import cached_property

from module.base.code_generator import CodeGenerator
from module.config.utils import deep_get, read_file
from module.logger import logger

UI_LANGUAGES = ['cn', 'cht', 'en', 'jp']


def text_to_variable(text):
    text = re.sub("'s |s' ", '_', text)
    text = re.sub('[ \-—:\'/•.]+', '_', text)
    text = re.sub(r'[(),#"?!&]|</?\w+>', '', text)
    # text = re.sub(r'[#_]?\d+(_times?)?', '', text)
    return text


def dungeon_name(name: str) -> str:
    name = text_to_variable(name)
    name = re.sub('Bud_of_(Memories|Aether|Treasures)', r'Calyx_Golden_\1', name)
    name = re.sub('Bud_of_(.*)', r'Calyx_Crimson_\1', name).replace('Calyx_Crimson_Calyx_Crimson_', 'Calyx_Crimson_')
    name = re.sub('Shape_of_(.*)', r'Stagnant_Shadow_\1', name)
    name = re.sub('Path_of_(.*)', r'Cavern_of_Corrosion_Path_of_\1', name)
    if name in ['Destruction_Beginning', 'End_of_the_Eternal_Freeze', 'Divine_Seed']:
        name = f'Echo_of_War_{name}'
    return name


def blessing_name(name: str) -> str:
    name = text_to_variable(name)
    name = re.sub(r'^\d', lambda match: f"_{match.group(0)}", name)
    return name


nickname_count = 0


def character_name(name: str) -> str:
    name = text_to_variable(name)
    name = re.sub('_', '', name)
    return name


class TextMap:
    DATA_FOLDER = ''

    def __init__(self, lang: str):
        self.lang = lang

    @cached_property
    def data(self) -> dict[int, str]:
        if not os.path.exists(TextMap.DATA_FOLDER):
            logger.critical('`TextMap.DATA_FOLDER` does not exist, please set it to your path to StarRailData')
            exit(1)
        file = os.path.join(TextMap.DATA_FOLDER, 'TextMap', f'TextMap{self.lang.upper()}.json')
        data = {}
        for id_, text in read_file(file).items():
            text = text.replace('\u00A0', '')
            text = text.replace(r'{NICKNAME}', 'Trailblazer')
            data[int(id_)] = text
        return data

    def find(self, name: t.Union[int, str]) -> tuple[int, str]:
        """
        Args:
            name:

        Returns:
            text id (hash in TextMap)
            text
        """
        if isinstance(name, int) or (isinstance(name, str) and name.isdigit()):
            name = int(name)
            try:
                return name, self.data[name]
            except KeyError:
                pass

        name = str(name)
        for row_id, row_name in self.data.items():
            if row_id >= 0 and row_name == name:
                return row_id, row_name
        for row_id, row_name in self.data.items():
            if row_name == name:
                return row_id, row_name
        logger.error(f'Cannot find name: "{name}" in language {self.lang}')
        return 0, ''


def replace_templates(text: str) -> str:
    """
    Replace templates in data to make sure it equals to what is shown in game

    Examples:
        replace_templates("Complete Echo of War #4 time(s)")
        == "Complete Echo of War 1 time(s)"
    """
    text = re.sub(r'#4', '1', text)
    text = re.sub(r'</?\w+>', '', text)
    return text


class KeywordExtract:
    def __init__(self):
        self.text_map: dict[str, TextMap] = {lang: TextMap(lang) for lang in UI_LANGUAGES}
        self.text_map['cn'] = TextMap('chs')
        self.keywords_id: list[int] = []

    def iter_guide(self) -> t.Iterable[int]:
        file = os.path.join(TextMap.DATA_FOLDER, './ExcelOutput/GameplayGuideData.json')
        visited = set()
        temp_save = ""
        for data in read_file(file).values():
            hash_ = deep_get(data, keys='Name.Hash')
            _, name = self.find_keyword(hash_, lang='cn')
            if '永屹之城遗秘' in name:  # load after all forgotten hall to make sure the same order in Game UI
                temp_save = hash_
                continue
            if '忘却之庭' in name:
                if name in visited:
                    continue
                visited.add(name)
            yield hash_
        yield temp_save

    def find_keyword(self, keyword, lang) -> tuple[int, str]:
        """
        Args:
            keyword: text string or text id
            lang: Language to find

        Returns:
            text id (hash in TextMap)
            text
        """
        text_map = self.text_map[lang]
        return text_map.find(keyword)

    def load_keywords(self, keywords: list[str | int], lang='cn'):
        text_map = self.text_map[lang]
        keywords_id = [text_map.find(keyword)[0] for keyword in keywords]
        self.keywords_id = [keyword for keyword in keywords_id if keyword != 0]

    def clear_keywords(self):
        self.keywords_id = []

    def write_keywords(
            self,
            keyword_class,
            output_file: str = '',
            text_convert=text_to_variable,
            generator: CodeGenerator = None,
            extra_attrs: dict[str, dict] = None
    ):
        """
        Args:
            keyword_class:
            output_file:
            text_convert:
            generator: Reuse an existing code generator
            extra_attrs: Extra attributes write in keywords
        """
        if generator is None:
            gen = CodeGenerator()
            gen.Import(f"""
            from .classes import {keyword_class}
            """)
            gen.CommentAutoGenerage('dev_tools.keyword_extract')
        else:
            gen = generator

        last_id = getattr(gen, 'last_id', 0)
        if extra_attrs:
            keyword_num = len(self.keywords_id)
            for attr_key, attr_value in extra_attrs.items():
                if len(attr_value) != keyword_num:
                    print(f"Extra attribute {attr_key} does not match the size of keywords")
                    return
        for index, keyword in enumerate(self.keywords_id):
            _, name = self.find_keyword(keyword, lang='en')
            name = text_convert(replace_templates(name))
            with gen.Object(key=name, object_class=keyword_class):
                gen.ObjectAttr(key='id', value=index + last_id + 1)
                gen.ObjectAttr(key='name', value=name)
                for lang in UI_LANGUAGES:
                    gen.ObjectAttr(key=lang, value=replace_templates(self.find_keyword(keyword, lang=lang)[1]))
                if extra_attrs:
                    for attr_key, attr_value in extra_attrs.items():
                        gen.ObjectAttr(key=attr_key, value=attr_value[keyword])
                gen.last_id = index + last_id + 1

        if output_file:
            print(f'Write {output_file}')
            gen.write(output_file)
            self.clear_keywords()
        return gen

    def load_quests(self, quests, lang='cn'):
        """
        Load a set of quest keywords

        Args:
            quests: iterable quest id collection
            lang:

        """
        quest_data = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'QuestData.json'))
        quests_hash = [quest_data[str(quest_id)]["QuestTitle"]["Hash"] for quest_id in quests]
        quest_keywords = list(dict.fromkeys([self.text_map[lang].find(quest_hash)[1] for quest_hash in quests_hash]))
        self.load_keywords(quest_keywords, lang)

    def generate_daily_quests(self):
        daily_quest = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'DailyQuest.json'))
        self.load_quests(daily_quest.keys())
        self.write_keywords(keyword_class='DailyQuest', output_file='./tasks/daily/keywords/daily_quest.py')

    def load_character_name_keywords(self, lang='en'):
        file_name = 'ItemConfigAvatarPlayerIcon.json'
        path = os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', file_name)
        character_data = read_file(path)
        characters_hash = [character_data[key]["ItemName"]["Hash"] for key in character_data]

        text_map = self.text_map[lang]
        keywords_id = sorted(
            {text_map.find(keyword)[1] for keyword in characters_hash}
        )
        self.load_keywords(keywords_id, lang)

    def generate_forgotten_hall_stages(self):
        keyword_class = "ForgottenHallStage"
        output_file = './tasks/forgotten_hall/keywords/stage.py'
        gen = CodeGenerator()
        gen.Import(f"""
        from .classes import {keyword_class}
        """)
        gen.CommentAutoGenerage('dev_tools.keyword_extract')
        for stage_id in range(1, 16):
            id_str = str(stage_id).rjust(2, '0')
            with gen.Object(key=f"Stage_{stage_id}", object_class=keyword_class):
                gen.ObjectAttr(key='id', value=stage_id)
                gen.ObjectAttr(key='name', value=id_str)
                for lang in UI_LANGUAGES:
                    gen.ObjectAttr(key=lang, value=id_str)

        print(f'Write {output_file}')
        gen.write(output_file)
        self.clear_keywords()

    def generate_assignment_keywords(self):
        KeywordFromFile = namedtuple('KeywordFromFile', ('file', 'class_name', 'output_file'))
        for keyword in (
                KeywordFromFile('ExpeditionGroup.json', 'AssignmentGroup', './tasks/assignment/keywords/group.py'),
                KeywordFromFile('ExpeditionData.json', 'AssignmentEntry', './tasks/assignment/keywords/entry.py')
        ):
            file = os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', keyword.file)
            self.load_keywords(deep_get(data, 'Name.Hash') for data in read_file(file).values())
            self.write_keywords(keyword_class=keyword.class_name, output_file=keyword.output_file)

    def generate_map_planes(self):
        planes = {
            'Herta': ['观景车厢', '主控舱段', '基座舱段', '收容舱段', '支援舱段'],
            'Jarilo': ['行政区', '城郊雪原', '边缘通路', '铁卫禁区', '残响回廊', '永冬岭',
                       '磐岩镇', '大矿区', '铆钉镇', '机械聚落'],
            'Luofu': ['星槎海中枢', '流云渡', '迴星港', '长乐天', '太卜司', '工造司', '丹鼎司', '鳞渊境'],
        }

        def text_convert(world_):
            def text_convert_wrapper(name):
                name = text_to_variable(name).replace('_', '')
                name = f'{world_}_{name}'
                return name

            return text_convert_wrapper

        gen = None
        for world, plane in planes.items():
            self.load_keywords(plane)
            gen = self.write_keywords(keyword_class='MapPlane', output_file='',
                                      text_convert=text_convert(world), generator=gen)
        gen.write('./tasks/map/keywords/plane.py')

    def generate_character_keywords(self):
        self.load_character_name_keywords()
        self.write_keywords(keyword_class='CharacterList', output_file='./tasks/character/keywords/character_list.py',
                            text_convert=character_name)

    def generate_battle_pass_quests(self):
        battle_pass_quests = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'BattlePassConfig.json'))
        latest_quests = list(battle_pass_quests.values())[-1]
        quests = deep_get(latest_quests, "DailyQuestList") + deep_get(latest_quests, "WeekQuestList") + deep_get(
            latest_quests, "WeekOrder1")
        self.load_quests(quests)
        self.write_keywords(keyword_class='BattlePassQuest', output_file='./tasks/battle_pass/keywords/quest.py')

    def generate_rogue_buff(self):
        # paths
        aeons = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'RogueAeonDisplay.json'))
        aeons_hash = [deep_get(aeon, 'RogueAeonPathName2.Hash') for aeon in aeons.values()]
        self.keywords_id = aeons_hash
        self.write_keywords(keyword_class='RoguePath', output_file='./tasks/rogue/keywords/path.py')

        # blessings
        blessings_info = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'RogueBuff.json'))
        blessings_name_map = read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'RogueMazeBuff.json'))
        blessings_id = [deep_get(blessing, '1.MazeBuffID') for blessing in blessings_info.values()
                        if not deep_get(blessing, '1.AeonID')][1:]
        resonances_id = [deep_get(blessing, '1.MazeBuffID') for blessing in blessings_info.values()
                         if deep_get(blessing, '1.AeonID')]

        def get_blessing_infos(id_list, with_enhancement: bool):
            blessings_hash = [deep_get(blessings_name_map, f"{blessing_id}.1.BuffName.Hash")
                              for blessing_id in id_list]
            blessings_path_id = {blessing_hash: int(deep_get(blessings_info, f'{blessing_id}.1.RogueBuffType')) - 119
                                 # 119 is the magic number make type match with path in keyword above
                                 for blessing_hash, blessing_id in zip(blessings_hash, id_list)}
            blessings_rarity = {blessing_hash: deep_get(blessings_info, f'{blessing_id}.1.RogueBuffRarity')
                                for blessing_hash, blessing_id in zip(blessings_hash, id_list)}
            enhancement = {blessing_hash: "" for blessing_hash in blessings_hash}
            if with_enhancement:
                return blessings_hash, {'path_id': blessings_path_id, 'rarity': blessings_rarity,
                                        'enhancement': enhancement}
            else:
                return blessings_hash, {'path_id': blessings_path_id, 'rarity': blessings_rarity}

        hash_list, extra_attrs = get_blessing_infos(blessings_id, with_enhancement=True)
        self.keywords_id = hash_list
        self.write_keywords(keyword_class='RogueBlessing', output_file='./tasks/rogue/keywords/blessing.py',
                            text_convert=blessing_name, extra_attrs=extra_attrs)

        hash_list, extra_attrs = get_blessing_infos(resonances_id, with_enhancement=False)
        self.keywords_id = hash_list
        self.write_keywords(keyword_class='RogueResonance', output_file='./tasks/rogue/keywords/resonance.py',
                            text_convert=blessing_name, extra_attrs=extra_attrs)

    def iter_without_duplication(self, file: dict, keys):
        visited = set()
        for data in file.values():
            hash_ = deep_get(data, keys=keys)
            _, name = self.find_keyword(hash_, lang='cn')
            if name in visited:
                continue
            visited.add(name)
            yield hash_

    def generate(self):
        self.load_keywords(['模拟宇宙', '拟造花萼（金）', '拟造花萼（赤）', '凝滞虚影', '侵蚀隧洞', '历战余响', '忘却之庭'])
        self.write_keywords(keyword_class='DungeonNav', output_file='./tasks/dungeon/keywords/nav.py')
        self.load_keywords(['行动摘要', '生存索引', '每日实训'])
        self.write_keywords(keyword_class='DungeonTab', output_file='./tasks/dungeon/keywords/tab.py')
        self.load_keywords(['前往', '领取', '进行中', '已领取', '本日活跃度已满'])
        self.write_keywords(keyword_class='DailyQuestState', output_file='./tasks/daily/keywords/daily_quest_state.py')
        self.load_keywords(['领取', '追踪'])
        self.write_keywords(keyword_class='BattlePassQuestState',
                            output_file='./tasks/battle_pass/keywords/quest_state.py')
        self.load_keywords(list(self.iter_guide()))
        self.write_keywords(keyword_class='DungeonList', output_file='./tasks/dungeon/keywords/dungeon.py',
                            text_convert=dungeon_name)
        self.load_keywords(['传送', '追踪'])
        self.write_keywords(keyword_class='DungeonEntrance', output_file='./tasks/dungeon/keywords/dungeon_entrance.py')
        self.load_keywords(['奖励', '任务', ])
        self.write_keywords(keyword_class='BattlePassTab', output_file='./tasks/battle_pass/keywords/tab.py')
        self.load_keywords(['本日任务', '本周任务', '本期任务'])
        self.write_keywords(keyword_class='BattlePassMissionTab',
                            output_file='./tasks/battle_pass/keywords/mission_tab.py')
        self.generate_assignment_keywords()
        self.generate_forgotten_hall_stages()
        self.generate_map_planes()
        self.generate_character_keywords()
        self.generate_daily_quests()
        self.generate_battle_pass_quests()
        self.load_keywords(['养成材料', '光锥', '遗器', '其他材料', '消耗品', '任务', '贵重物'])
        self.write_keywords(keyword_class='ItemTab', text_convert=lambda name: name.replace(' ', ''),
                            output_file='./tasks/item/keywords/tab.py')
        self.generate_rogue_buff()
        self.load_keywords(['已强化'])
        self.write_keywords(keyword_class='RogueEnhancement', output_file='./tasks/rogue/keywords/enhancement.py')
        self.load_keywords(list(self.iter_without_duplication(
            read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'RogueMiracleDisplay.json')),
            'MiracleName.Hash')))
        self.write_keywords(keyword_class='RogueCurio', output_file='./tasks/rogue/keywords/curio.py')
        self.load_keywords(list(self.iter_without_duplication(
            read_file(os.path.join(TextMap.DATA_FOLDER, 'ExcelOutput', 'RogueBonus.json')), 'BonusTitle.Hash')))
        self.write_keywords(keyword_class='RogueBonus', output_file='./tasks/rogue/keywords/bonus.py')


if __name__ == '__main__':
    TextMap.DATA_FOLDER = '../StarRailData'
    KeywordExtract().generate()

```

`dev_tools/screenshot.py`:

```py
import os
from datetime import datetime

from PIL import Image

from pynput import keyboard
from module.config.config import AzurLaneConfig
from module.config.utils import alas_instance
from module.device.connection import Connection, ConnectionAttr
from module.device.device import Device
from module.logger import logger

"""
A tool to take screenshots on device

Usage:
    python -m dev_tools.screenshot
"""


class EmptyConnection(Connection):
    def __init__(self):
        ConnectionAttr.__init__(self, AzurLaneConfig('template'))

        logger.hr('Detect device')
        print()
        print('这里是你本机可用的模拟器serial:')
        devices = self.list_device()

        # Show available devices
        available = devices.select(status='device')
        for device in available:
            print(device.serial)
        if not len(available):
            print('No available devices')

        # Show unavailable devices if having any
        unavailable = devices.delete(available)
        if len(unavailable):
            print('Here are the devices detected but unavailable')
            for device in unavailable:
                print(f'{device.serial} ({device.status})')


def handle_sensitive_info(image):
    # Paint UID to black
    image[680:720, 0:180, :] = 0
    return image


_ = EmptyConnection()
name = input(
    '输入alas配置文件名称，或者模拟器serial，或者模拟器端口号: (默认输入 "alas"):\n'
    '例如："alas", "127.0.0.1:16384", "7555"\n'
)
name = name.strip().strip('"').strip()
if not name:
    name = 'alas'
if name.isdigit():
    name = f'127.0.0.1:{name}'
if name in alas_instance():
    print(f'{name} is an existing config file')
    device = Device(name)
else:
    print(f'{name} is a device serial')
    config = AzurLaneConfig('template')
    config.override(
        Emulator_Serial=name,
        Emulator_PackageName='com.miHoYo.hkrpg',
        Emulator_ScreenshotMethod='adb_nc',
    )
    device = Device(config)

output = './screenshots/dev_screenshots'
os.makedirs(output, exist_ok=True)
device.disable_stuck_detection()
device.screenshot_interval_set(0.)
print('')
print(f'截图将保存到: {output}')


def screenshot():
    print(f'截图中...')
    image = device.screenshot()
    now = datetime.strftime(datetime.now(), '%Y-%m-%d_%H-%M-%S-%f')
    file = f'{output}/{now}.png'
    image = handle_sensitive_info(image)
    print(f'截图中...')
    Image.fromarray(image).save(file)
    print(f'截图已保存到: {file}')


# Bind global shortcut
GLOBAL_KEY = 'F3'


def on_press(key):
    if str(key) == f'Key.{GLOBAL_KEY.lower()}':
        screenshot()


listener = keyboard.Listener(on_press=on_press)
listener.start()

while 1:
    print()
    _ = input(f'按 <回车键> 或者按快捷键 <{GLOBAL_KEY}> 截一张图（快捷键全局生效）:')
    screenshot()

```

`gui.py`:

```py
import threading
from multiprocessing import Event, Process

from module.logger import logger
from module.webui.setting import State


def func(ev: threading.Event):
    import argparse
    import asyncio
    import sys

    import uvicorn

    if sys.platform.startswith("win"):
        asyncio.set_event_loop_policy(asyncio.WindowsProactorEventLoopPolicy())

    State.restart_event = ev

    parser = argparse.ArgumentParser(description="Alas web service")
    parser.add_argument(
        "--host",
        type=str,
        help="Host to listen. Default to WebuiHost in deploy setting",
    )
    parser.add_argument(
        "-p",
        "--port",
        type=int,
        help="Port to listen. Default to WebuiPort in deploy setting",
    )
    parser.add_argument(
        "-k", "--key", type=str, help="Password of alas. No password by default"
    )
    parser.add_argument(
        "--cdn",
        action="store_true",
        help="Use jsdelivr cdn for pywebio static files (css, js). Self host cdn by default.",
    )
    parser.add_argument(
        "--electron", action="store_true", help="Runs by electron client."
    )
    parser.add_argument(
        "--run",
        nargs="+",
        type=str,
        help="Run alas by config names on startup",
    )
    args, _ = parser.parse_known_args()

    host = args.host or State.deploy_config.WebuiHost or "0.0.0.0"
    port = args.port or int(State.deploy_config.WebuiPort) or 22367
    State.electron = args.electron

    logger.hr("Launcher config")
    logger.attr("Host", host)
    logger.attr("Port", port)
    logger.attr("Electron", args.electron)
    logger.attr("Reload", ev is not None)

    if State.electron:
        # https://github.com/LmeSzinc/AzurLaneAutoScript/issues/2051
        logger.info("Electron detected, remove log output to stdout")
        from module.logger.logger import console_hdlr
        logger.removeHandler(console_hdlr)

    uvicorn.run("module.webui.app:app", host=host, port=port, factory=True)


if __name__ == "__main__":
    if State.deploy_config.EnableReload:
        should_exit = False
        while not should_exit:
            event = Event()
            process = Process(target=func, args=(event,))
            process.start()
            while not should_exit:
                try:
                    b = event.wait(1)
                except KeyboardInterrupt:
                    should_exit = True
                    break
                if b:
                    process.kill()
                    break
                elif process.is_alive():
                    continue
                else:
                    should_exit = True
    else:
        func(None)

```

`installer.py`:

```py
import argparse
import sys
import typing as t

sys.stdout.reconfigure(encoding='utf-8')
sys.stderr.reconfigure(encoding='utf-8')

"""
Alas installer
"""


def run_install():
    from deploy.installer import run
    run()


def run_print_test():
    from deploy.Windows.installer_test import run
    run()


def run_set(modify=t.List[str]) -> t.Dict[str, str]:
    data = {}
    for kv in modify:
        if "=" in kv:
            key, value = kv.split('=', maxsplit=1)
            data[key] = value

    from deploy.set import config_set
    return config_set(data)


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Alas installer")
    parser.add_argument(
        "--print-test",
        help="To print example installer outputs instead of making an actual installation",
        action="store_true",
    )
    parser.add_argument(
        "--set",
        help="Use key=value format to modify config/deploy.yaml\n"
             "Example: python installer.py --set Branch=dev",
        type=str,
        nargs="*",
    )
    args, _ = parser.parse_known_args()

    if args.set:
        run_set(args.set)
    elif args.print_test:
        run_print_test()
    else:
        run_install()

```

`module/alas.py`:

```py
import os
import re
import threading
import time
from datetime import datetime, timedelta

import inflection
from cached_property import cached_property

from module.base.decorator import del_cached_property
from module.config.config import AzurLaneConfig, TaskEnd
from module.config.utils import deep_get, deep_set
from module.exception import *
from module.logger import logger
from module.notify import handle_notify


class AzurLaneAutoScript:
    stop_event: threading.Event = None

    def __init__(self, config_name='alas'):
        logger.hr('Start', level=0)
        self.config_name = config_name
        # Skip first restart
        self.is_first_task = True
        # Failure count of tasks
        # Key: str, task name, value: int, failure count
        self.failure_record = {}

    @cached_property
    def config(self):
        try:
            config = AzurLaneConfig(config_name=self.config_name)
            return config
        except RequestHumanTakeover:
            logger.critical('Request human takeover')
            exit(1)
        except Exception as e:
            logger.exception(e)
            exit(1)

    @cached_property
    def device(self):
        try:
            from module.device.device import Device
            device = Device(config=self.config)
            return device
        except RequestHumanTakeover:
            logger.critical('Request human takeover')
            exit(1)
        except Exception as e:
            logger.exception(e)
            exit(1)

    @cached_property
    def checker(self):
        try:
            from module.server_checker import ServerChecker
            checker = ServerChecker(server=self.config.Emulator_PackageName)
            return checker
        except Exception as e:
            logger.exception(e)
            exit(1)

    def run(self, command):
        try:
            self.device.screenshot()
            self.__getattribute__(command)()
            return True
        except TaskEnd:
            return True
        except GameNotRunningError as e:
            logger.warning(e)
            self.config.task_call('Restart')
            return True
        except (GameStuckError, GameTooManyClickError) as e:
            logger.error(e)
            self.save_error_log()
            logger.warning(f'Game stuck, {self.device.package} will be restarted in 10 seconds')
            logger.warning('If you are playing by hand, please stop Alas')
            self.config.task_call('Restart')
            self.device.sleep(10)
            return False
        except GameBugError as e:
            logger.warning(e)
            self.save_error_log()
            logger.warning('An error has occurred in Azur Lane game client, Alas is unable to handle')
            logger.warning(f'Restarting {self.device.package} to fix it')
            self.config.task_call('Restart')
            self.device.sleep(10)
            return False
        except GamePageUnknownError:
            logger.info('Game server may be under maintenance or network may be broken, check server status now')
            self.checker.check_now()
            if self.checker.is_available():
                logger.critical('Game page unknown')
                self.save_error_log()
                handle_notify(
                    self.config.Error_OnePushConfig,
                    title=f"Alas <{self.config_name}> crashed",
                    content=f"<{self.config_name}> GamePageUnknownError",
                )
                exit(1)
            else:
                self.checker.wait_until_available()
                return False
        except ScriptError as e:
            logger.critical(e)
            logger.critical('This is likely to be a mistake of developers, but sometimes just random issues')
            handle_notify(
                self.config.Error_OnePushConfig,
                title=f"Alas <{self.config_name}> crashed",
                content=f"<{self.config_name}> ScriptError",
            )
            exit(1)
        except RequestHumanTakeover:
            logger.critical('Request human takeover')
            handle_notify(
                self.config.Error_OnePushConfig,
                title=f"Alas <{self.config_name}> crashed",
                content=f"<{self.config_name}> RequestHumanTakeover",
            )
            exit(1)
        except Exception as e:
            logger.exception(e)
            self.save_error_log()
            handle_notify(
                self.config.Error_OnePushConfig,
                title=f"Alas <{self.config_name}> crashed",
                content=f"<{self.config_name}> Exception occured",
            )
            exit(1)

    def save_error_log(self):
        """
        Save last 60 screenshots in ./log/error/<timestamp>
        Save logs to ./log/error/<timestamp>/log.txt
        """
        from module.base.utils import save_image
        from module.handler.sensitive_info import (handle_sensitive_image, handle_sensitive_logs)
        if self.config.Error_SaveError:
            if not os.path.exists('./log/error'):
                os.mkdir('./log/error')
            folder = f'./log/error/{int(time.time() * 1000)}'
            logger.warning(f'Saving error: {folder}')
            os.mkdir(folder)
            for data in self.device.screenshot_deque:
                image_time = datetime.strftime(data['time'], '%Y-%m-%d_%H-%M-%S-%f')
                image = handle_sensitive_image(data['image'])
                save_image(image, f'{folder}/{image_time}.png')
            with open(logger.log_file, 'r', encoding='utf-8') as f:
                lines = f.readlines()
                start = 0
                for index, line in enumerate(lines):
                    line = line.strip(' \r\t\n')
                    if re.match('^═{15,}$', line):
                        start = index
                lines = lines[start - 2:]
                lines = handle_sensitive_logs(lines)
            with open(f'{folder}/log.txt', 'w', encoding='utf-8') as f:
                f.writelines(lines)

    def wait_until(self, future):
        """
        Wait until a specific time.

        Args:
            future (datetime):

        Returns:
            bool: True if wait finished, False if config changed.
        """
        future = future + timedelta(seconds=1)
        self.config.start_watching()
        while 1:
            if datetime.now() > future:
                return True
            if self.stop_event is not None:
                if self.stop_event.is_set():
                    logger.info("Update event detected")
                    logger.info(f"[{self.config_name}] exited. Reason: Update")
                    exit(0)

            time.sleep(5)

            if self.config.should_reload():
                return False

    def get_next_task(self):
        """
        Returns:
            str: Name of the next task.
        """
        while 1:
            task = self.config.get_next()
            self.config.task = task
            self.config.bind(task)

            from module.base.resource import release_resources
            if self.config.task.command != 'Alas':
                release_resources(next_task=task.command)

            if task.next_run > datetime.now():
                logger.info(f'Wait until {task.next_run} for task `{task.command}`')
                self.is_first_task = False
                method = self.config.Optimization_WhenTaskQueueEmpty
                if method == 'close_game':
                    logger.info('Close game during wait')
                    self.device.app_stop()
                    release_resources()
                    self.device.release_during_wait()
                    if not self.wait_until(task.next_run):
                        del_cached_property(self, 'config')
                        continue
                    self.run('start')
                elif method == 'goto_main':
                    logger.info('Goto main page during wait')
                    self.run('goto_main')
                    release_resources()
                    self.device.release_during_wait()
                    if not self.wait_until(task.next_run):
                        del_cached_property(self, 'config')
                        continue
                elif method == 'stay_there':
                    logger.info('Stay there during wait')
                    release_resources()
                    self.device.release_during_wait()
                    if not self.wait_until(task.next_run):
                        del_cached_property(self, 'config')
                        continue
                else:
                    logger.warning(f'Invalid Optimization_WhenTaskQueueEmpty: {method}, fallback to stay_there')
                    release_resources()
                    self.device.release_during_wait()
                    if not self.wait_until(task.next_run):
                        del_cached_property(self, 'config')
                        continue
            break

        AzurLaneConfig.is_hoarding_task = False
        return task.command

    def loop(self):
        logger.set_file_logger(self.config_name)
        logger.info(f'Start scheduler loop: {self.config_name}')

        while 1:
            # Check update event from GUI
            if self.stop_event is not None:
                if self.stop_event.is_set():
                    logger.info("Update event detected")
                    logger.info(f"Alas [{self.config_name}] exited.")
                    break
            # Check game server maintenance
            self.checker.wait_until_available()
            if self.checker.is_recovered():
                # There is an accidental bug hard to reproduce
                # Sometimes, config won't be updated due to blocking
                # even though it has been changed
                # So update it once recovered
                del_cached_property(self, 'config')
                logger.info('Server or network is recovered. Restart game client')
                self.config.task_call('Restart')
            # Get task
            task = self.get_next_task()
            # Init device and change server
            _ = self.device
            # Skip first restart
            if self.is_first_task and task == 'Restart':
                logger.info('Skip task `Restart` at scheduler start')
                self.config.task_delay(server_update=True)
                del_cached_property(self, 'config')
                continue

            # Run
            logger.info(f'Scheduler: Start task `{task}`')
            self.device.stuck_record_clear()
            self.device.click_record_clear()
            logger.hr(task, level=0)
            success = self.run(inflection.underscore(task))
            logger.info(f'Scheduler: End task `{task}`')
            self.is_first_task = False

            # Check failures
            failed = deep_get(self.failure_record, keys=task, default=0)
            failed = 0 if success else failed + 1
            deep_set(self.failure_record, keys=task, value=failed)
            if failed >= 3:
                logger.critical(f"Task `{task}` failed 3 or more times.")
                logger.critical("Possible reason #1: You haven't used it correctly. "
                                "Please read the help text of the options.")
                logger.critical("Possible reason #2: There is a problem with this task. "
                                "Please contact developers or try to fix it yourself.")
                logger.critical('Request human takeover')
                handle_notify(
                    self.config.Error_OnePushConfig,
                    title=f"Alas <{self.config_name}> crashed",
                    content=f"<{self.config_name}> RequestHumanTakeover\nTask `{task}` failed 3 or more times.",
                )
                exit(1)

            if success:
                del_cached_property(self, 'config')
                continue
            else:
                # self.config.task_delay(success=False)
                del_cached_property(self, 'config')
                self.checker.check_now()
                continue


if __name__ == '__main__':
    alas = AzurLaneAutoScript()
    alas.loop()

```

`module/base/base.py`:

```py
import module.config.server as server_
from module.base.button import Button, ButtonWrapper, ClickButton, match_template
from module.base.timer import Timer
from module.base.utils import *
from module.config.config import AzurLaneConfig
from module.device.device import Device
from module.logger import logger


class ModuleBase:
    config: AzurLaneConfig
    device: Device

    def __init__(self, config, device=None, task=None):
        """
        Args:
            config (AzurLaneConfig, str):
                Name of the user config under ./config
            device (Device, str):
                To reuse a device.
                If None, create a new Device object.
                If str, create a new Device object and use the given device as serial.
            task (str):
                Bind a task only for dev purpose. Usually to be None for auto task scheduling.
                If None, use default configs.
        """
        if isinstance(config, AzurLaneConfig):
            self.config = config
        elif isinstance(config, str):
            self.config = AzurLaneConfig(config, task=task)
        else:
            logger.warning('Alas ModuleBase received an unknown config, assume it is AzurLaneConfig')
            self.config = config

        if isinstance(device, Device):
            self.device = device
        elif device is None:
            self.device = Device(config=self.config)
        elif isinstance(device, str):
            self.config.override(Emulator_Serial=device)
            self.device = Device(config=self.config)
        else:
            logger.warning('Alas ModuleBase received an unknown device, assume it is Device')
            self.device = device

        self.interval_timer = {}

    def match_template(self, button, interval=0, similarity=0.85):
        """
        Args:
            button (ButtonWrapper):
            interval (int, float): interval between two active events.
            similarity (int, float): 0 to 1.

        Returns:
            bool:

        Examples:
            Image detection:
            ```
            self.device.screenshot()
            self.appear(Button(area=(...), color=(...), button=(...))
            self.appear(Template(file='...')
            ```
        """
        self.device.stuck_record_add(button)

        if interval and not self.interval_is_reached(button, interval=interval):
            return False

        appear = button.match_template(self.device.image, similarity=similarity)

        if appear and interval:
            self.interval_reset(button, interval=interval)

        return appear

    def match_color(self, button, interval=0, threshold=10):
        """
        Args:
            button (ButtonWrapper):
            interval (int, float): interval between two active events.
            threshold (int): 0 to 255, smaller means more similar

        Returns:
            bool:
        """
        self.device.stuck_record_add(button)

        if interval and not self.interval_is_reached(button, interval=interval):
            return False

        appear = button.match_color(self.device.image, threshold=threshold)

        if appear and interval:
            self.interval_reset(button, interval=interval)

        return appear

    def match_template_color(self, button, interval=0, similarity=0.85, threshold=30):
        """
        Args:
            button (ButtonWrapper):
            interval (int, float): interval between two active events.
            similarity (int, float): 0 to 1.
            threshold (int): 0 to 255, smaller means more similar

        Returns:
            bool:
        """
        self.device.stuck_record_add(button)

        if interval and not self.interval_is_reached(button, interval=interval):
            return False

        appear = button.match_template_color(self.device.image, similarity=similarity, threshold=threshold)

        if appear and interval:
            self.interval_reset(button, interval=interval)

        return appear

    appear = match_template

    def appear_then_click(self, button, interval=5, similarity=0.85):
        appear = self.appear(button, interval=interval, similarity=similarity)
        if appear:
            self.device.click(button)
        return appear

    def wait_until_stable(self, button, timer=Timer(0.3, count=1), timeout=Timer(5, count=10)):
        """
        A terrible method, don't rely too much on it.
        """
        logger.info(f'Wait until stable: {button}')
        prev_image = self.image_crop(button)
        timer.reset()
        timeout.reset()
        while 1:
            self.device.screenshot()

            if timeout.reached():
                logger.warning(f'wait_until_stable({button}) timeout')
                break

            image = self.image_crop(button)
            if match_template(image, prev_image):
                if timer.reached():
                    logger.info(f'{button} stabled')
                    break
            else:
                prev_image = image
                timer.reset()

    def image_crop(self, button):
        """Extract the area from image.

        Args:
            button(Button, tuple): Button instance or area tuple.
        """
        if isinstance(button, Button):
            return crop(self.device.image, button.area)
        elif isinstance(button, ButtonWrapper):
            return crop(self.device.image, button.area)
        elif hasattr(button, 'area'):
            return crop(self.device.image, button.area)
        else:
            return crop(self.device.image, button)

    def image_color_count(self, button, color, threshold=221, count=50):
        """
        Args:
            button (Button, tuple): Button instance or area.
            color (tuple): RGB.
            threshold: 255 means colors are the same, the lower the worse.
            count (int): Pixels count.

        Returns:
            bool:
        """
        image = self.image_crop(button)
        mask = color_similarity_2d(image, color=color) > threshold
        return np.sum(mask) > count

    def image_color_button(self, area, color, color_threshold=250, encourage=5, name='COLOR_BUTTON'):
        """
        Find an area with pure color on image, convert into a Button.

        Args:
            area (tuple[int]): Area to search from
            color (tuple[int]): Target color
            color_threshold (int): 0-255, 255 means exact match
            encourage (int): Radius of button
            name (str): Name of the button

        Returns:
            Button: Or None if nothing matched.
        """
        image = color_similarity_2d(self.image_crop(area), color=color)
        points = np.array(np.where(image > color_threshold)).T[:, ::-1]
        if points.shape[0] < encourage ** 2:
            # Not having enough pixels to match
            return None

        point = fit_points(points, mod=image_size(image), encourage=encourage)
        point = ensure_int(point + area[:2])
        button_area = area_offset((-encourage, -encourage, encourage, encourage), offset=point)
        return ClickButton(button=button_area, name=name)

    def interval_reset(self, button, interval=5):
        if isinstance(button, (list, tuple)):
            for b in button:
                self.interval_reset(b, interval)
            return

        if button is not None:
            if button.name in self.interval_timer:
                self.interval_timer[button.name].reset()
            else:
                self.interval_timer[button.name] = Timer(interval).reset()

    def interval_clear(self, button, interval=5):
        if isinstance(button, (list, tuple)):
            for b in button:
                self.interval_clear(b, interval)
            return

        if button is not None:
            if button.name in self.interval_timer:
                self.interval_timer[button.name].clear()
            else:
                self.interval_timer[button.name] = Timer(interval).clear()

    def interval_is_reached(self, button, interval=5):
        if button.name in self.interval_timer:
            if self.interval_timer[button.name].limit != interval:
                self.interval_timer[button.name] = Timer(interval)
        else:
            self.interval_timer[button.name] = Timer(interval)

        return self.interval_timer[button.name].reached()

    _image_file = ''

    @property
    def image_file(self):
        return self._image_file

    @image_file.setter
    def image_file(self, value):
        """
        For development.
        Load image from local file system and set it to self.device.image
        Test an image without taking a screenshot from emulator.
        """
        if isinstance(value, Image.Image):
            value = np.array(value)
        elif isinstance(value, str):
            value = load_image(value)

        self.device.image = value

    def set_lang(self, lang):
        """
        For development.
        Change lang and affect globally,
        including assets and server specific methods.
        """
        server_.set_lang(lang)
        logger.attr('Lang', self.config.LANG)

```

`module/base/button.py`:

```py
import module.config.server as server
from module.base.decorator import cached_property, del_cached_property
from module.base.resource import Resource
from module.base.utils import *
from module.exception import ScriptError


class Button(Resource):
    def __init__(self, file, area, search, color, button):
        """
        Args:
            file: Filepath to an assets
            area: Area to crop template
            search: Area to search from, 20px larger than `area` by default
            color: Average color of assets
            button: Area to click if assets appears on the image
        """
        self.file: str = file
        self.area: t.Tuple[int, int, int, int] = area
        self.search: t.Tuple[int, int, int, int] = search
        self.color: t.Tuple[int, int, int] = color
        self._button: t.Tuple[int, int, int, int] = button

        self.resource_add(self.file)
        self._button_offset: t.Tuple[int, int] = (0, 0)

    @property
    def button(self):
        return area_offset(self._button, self._button_offset)

    def clear_offset(self):
        self._button_offset = (0, 0)

    @cached_property
    def image(self):
        return load_image(self.file, self.area)

    def resource_release(self):
        del_cached_property(self, 'image')
        self.clear_offset()

    def __str__(self):
        return self.file

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.file)

    def __bool__(self):
        return True

    def match_color(self, image, threshold=10) -> bool:
        """
        Check if the button appears on the image, using average color

        Args:
            image (np.ndarray): Screenshot.
            threshold (int): Default to 10.

        Returns:
            bool: True if button appears on screenshot.
        """
        color = get_color(image, self.area)
        return color_similar(
            color1=color,
            color2=self.color,
            threshold=threshold
        )

    def match_template(self, image, similarity=0.85) -> bool:
        """
        Detects assets by template matching.

        To Some buttons, its location may not be static, `_button_offset` will be set.

        Args:
            image: Screenshot.
            similarity (float): 0-1.

        Returns:
            bool.
        """
        image = crop(image, self.search, copy=False)
        res = cv2.matchTemplate(self.image, image, cv2.TM_CCOEFF_NORMED)
        _, sim, _, point = cv2.minMaxLoc(res)

        self._button_offset = np.array(point) + self.search[:2] - self.area[:2]
        return sim > similarity

    def match_template_color(self, image, similarity=0.85, threshold=30) -> bool:
        """
        Template match first, color match then

        Args:
            image: Screenshot.
            similarity (float): 0-1.
            threshold (int): Default to 10.

        Returns:

        """
        matched = self.match_template(image, similarity=similarity)
        if not matched:
            return False

        area = area_offset(self.area, offset=self._button_offset)
        color = get_color(image, area)
        return color_similar(
            color1=color,
            color2=self.color,
            threshold=threshold
        )


class ButtonWrapper(Resource):
    def __init__(self, name='MULTI_ASSETS', **kwargs):
        self.name = name
        self.data_buttons = kwargs
        self._matched_button: t.Optional[Button] = None
        self.resource_add(self.name)

    def resource_release(self):
        del_cached_property(self, 'assets')
        self._matched_button = None

    def __str__(self):
        return self.name

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.name)

    def __bool__(self):
        return True

    @cached_property
    def buttons(self) -> t.List[Button]:
        for trial in [server.lang, 'share', 'cn']:
            assets = self.data_buttons.get(trial, None)
            if assets is not None:
                if isinstance(assets, Button):
                    return [assets]
                elif isinstance(assets, list):
                    return assets

        raise ScriptError(f'ButtonWrapper({self}) on server {server.lang} has no fallback button')

    def match_color(self, image, threshold=10) -> bool:
        for assets in self.buttons:
            if assets.match_color(image, threshold=threshold):
                self._matched_button = assets
                return True
        return False

    def match_template(self, image, similarity=0.85) -> bool:
        for assets in self.buttons:
            if assets.match_template(image, similarity=similarity):
                self._matched_button = assets
                return True
        return False

    def match_template_color(self, image, similarity=0.85, threshold=30) -> bool:
        for assets in self.buttons:
            if assets.match_template_color(image, similarity=similarity, threshold=threshold):
                self._matched_button = assets
                return True
        return False

    @property
    def matched_button(self) -> Button:
        if self._matched_button is None:
            return self.buttons[0]
        else:
            return self._matched_button

    @property
    def area(self) -> tuple[int, int, int, int]:
        return self.matched_button.area

    @property
    def search(self) -> tuple[int, int, int, int]:
        return self.matched_button.search

    @property
    def color(self) -> tuple[int, int, int]:
        return self.matched_button.color

    @property
    def button(self) -> tuple[int, int, int, int]:
        return self.matched_button.button

    @property
    def button_offset(self) -> tuple[int, int]:
        return self.matched_button._button_offset

    @property
    def width(self) -> int:
        return area_size(self.area)[0]

    @property
    def height(self) -> int:
        return area_size(self.area)[1]


class ClickButton:
    def __init__(self, button, name='CLICK_BUTTON'):
        self.area = button
        self.button = button
        self.name = name

    def __str__(self):
        return self.name

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.name)

    def __bool__(self):
        return True


def match_template(image, template, similarity=0.85):
    """
    Args:
        image (np.ndarray): Screenshot
        template (np.ndarray):
        area (tuple): Crop area of image.
        offset (int, tuple): Detection area offset.
        similarity (float): 0-1. Similarity. Lower than this value will return float(0).

    Returns:
        bool:
    """
    res = cv2.matchTemplate(image, template, cv2.TM_CCOEFF_NORMED)
    _, sim, _, point = cv2.minMaxLoc(res)
    return sim > similarity

```

`module/base/code_generator.py`:

```py
import typing as t


class TabWrapper:
    def __init__(self, generator, prefix='', suffix='', newline=True):
        """
        Args:
            generator (CodeGenerator):
        """
        self.generator = generator
        self.prefix = prefix
        self.suffix = suffix
        self.newline = newline

        self.nested = False

    def __enter__(self):
        if not self.nested and self.prefix:
            self.generator.add(self.prefix, newline=self.newline)
        self.generator.tab_count += 1
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        self.generator.tab_count -= 1
        if self.suffix:
            self.generator.add(self.suffix)

    def __repr__(self):
        return self.prefix

    def set_nested(self, suffix=''):
        self.nested = True
        self.suffix += suffix


class CodeGenerator:
    def __init__(self):
        self.tab_count = 0
        self.lines = []

    def generate(self) -> t.Iterable[str]:
        yield ''

    def add(self, line, comment=False, newline=True):
        self.lines.append(self._line_with_tabs(line, comment=comment, newline=newline))

    def print(self):
        lines = ''.join(self.lines)
        print(lines)

    def write(self, file: str = None):
        lines = ''.join(self.lines)
        with open(file, 'w', encoding='utf-8', newline='') as f:
            f.write(lines)

    def _line_with_tabs(self, line, comment=False, newline=True):
        if comment:
            line = '# ' + line
        out = '    ' * self.tab_count + line
        if newline:
            out += '\n'
        return out

    def _repr(self, obj):
        if isinstance(obj, str):
            if '\n' in obj:
                out = '"""\n'
                with self.tab():
                    for line in obj.strip().split('\n'):
                        line = line.strip()
                        out += self._line_with_tabs(line)
                out += self._line_with_tabs('"""', newline=False)
                return out
        return repr(obj)

    def tab(self):
        return TabWrapper(self)

    def Empty(self):
        self.add('')

    def Import(self, text, empty=2):
        for line in text.strip().split('\n'):
            line = line.strip()
            self.add(line)
        for _ in range(empty):
            self.Empty()

    def Value(self, key=None, value=None, type_=None, **kwargs):
        if key is not None:
            if type_ is not None:
                self.add(f'{key}: {type_} = {self._repr(value)}')
            else:
                self.add(f'{key} = {self._repr(value)}')
        for key, value in kwargs.items():
            self.Value(key, value)

    def Comment(self, text):
        for line in text.strip().split('\n'):
            line = line.strip()
            self.add(line, comment=True)

    def CommentAutoGenerage(self, file):
        """
        Args:
            file: dev_tools.button_extract
        """
        # Only leave one blank line at above
        if len(self.lines) >= 2:
            if self.lines[-2:] == ['\n', '\n']:
                self.lines.pop(-1)
        self.Comment('This file was auto-generated, do not modify it manually. To generate:')
        self.Comment(f'``` python -m {file} ```')
        self.Empty()

    def List(self, key=None):
        if key is not None:
            return TabWrapper(self, prefix=str(key) + ' = [', suffix=']')
        else:
            return TabWrapper(self, prefix='[', suffix=']', newline=False)

    def ListItem(self, value):
        if isinstance(value, TabWrapper):
            value.set_nested(suffix=',')
            self.add(f'{self._repr(value)}')
            return value
        else:
            self.add(f'{self._repr(value)},')

    def Dict(self, key=None):
        if key is not None:
            return TabWrapper(self, prefix=str(key) + ' = {', suffix='}')
        else:
            return TabWrapper(self, prefix='{', suffix='}', newline=False)

    def DictItem(self, key=None, value=None):
        if isinstance(value, TabWrapper):
            value.set_nested(suffix=',')
            if key is not None:
                self.add(f'{self._repr(key)}: {self._repr(value)}')
            return value
        else:
            if key is not None:
                self.add(f'{self._repr(key)}: {self._repr(value)},')

    def Object(self, object_class, key=None):
        if key is not None:
            return TabWrapper(self, prefix=f'{key} = {object_class}(', suffix=')')
        else:
            return TabWrapper(self, prefix=f'{object_class}(', suffix=')', newline=False)

    def ObjectAttr(self, key=None, value=None):
        if isinstance(value, TabWrapper):
            value.set_nested(suffix=',')
            if key is None:
                self.add(f'{self._repr(value)}')
            else:
                self.add(f'{key}={self._repr(value)}')
            return value
        else:
            if key is None:
                self.add(f'{self._repr(value)},')
            else:
                self.add(f'{key}={self._repr(value)},')

    def Class(self, name, inherit=None):
        if inherit is not None:
            return TabWrapper(self, prefix=f'class {name}({inherit}):')
        else:
            return TabWrapper(self, prefix=f'class {name}:')

    def Def(self, name, args=''):
        return TabWrapper(self, prefix=f'def {name}({args}):')


generator = CodeGenerator()
Import = generator.Import
Value = generator.Value
Comment = generator.Comment
Dict = generator.Dict
DictItem = generator.DictItem

```

`module/base/decorator.py`:

```py
import random
import re
from functools import wraps
from typing import Callable, Generic, TypeVar

T = TypeVar("T")


class Config:
    """
    Decorator that calls different function with a same name according to config.

    func_list likes:
    func_list = {
        'func1': [
            {'options': {'ENABLE': True}, 'func': 1},
            {'options': {'ENABLE': False}, 'func': 1}
        ]
    }
    """
    func_list = {}

    @classmethod
    def when(cls, **kwargs):
        """
        Args:
            **kwargs: Any option in AzurLaneConfig.

        Examples:
            @Config.when(USE_ONE_CLICK_RETIREMENT=True)
            def retire_ships(self, amount=None, rarity=None):
                pass

            @Config.when(USE_ONE_CLICK_RETIREMENT=False)
            def retire_ships(self, amount=None, rarity=None):
                pass
        """
        from module.logger import logger
        options = kwargs

        def decorate(func):
            name = func.__name__
            data = {'options': options, 'func': func}
            if name not in cls.func_list:
                cls.func_list[name] = [data]
            else:
                override = False
                for record in cls.func_list[name]:
                    if record['options'] == data['options']:
                        record['func'] = data['func']
                        override = True
                if not override:
                    cls.func_list[name].append(data)

            @wraps(func)
            def wrapper(self, *args, **kwargs):
                """
                Args:
                    self: ModuleBase instance.
                    *args:
                    **kwargs:
                """
                for record in cls.func_list[name]:

                    flag = [value is None or self.config.__getattribute__(key) == value
                            for key, value in record['options'].items()]
                    if not all(flag):
                        continue

                    return record['func'](self, *args, **kwargs)

                logger.warning(f'No option fits for {name}, using the last define func.')
                return func(self, *args, **kwargs)

            return wrapper

        return decorate


class cached_property(Generic[T]):
    """
    cached-property from https://github.com/pydanny/cached-property
    Add typing support

    A property that is only computed once per instance and then replaces itself
    with an ordinary attribute. Deleting the attribute resets the property.
    Source: https://github.com/bottlepy/bottle/commit/fa7733e075da0d790d809aa3d2f53071897e6f76
    """

    def __init__(self, func: Callable[..., T]):
        self.func = func

    def __get__(self, obj, cls) -> T:
        if obj is None:
            return self

        value = obj.__dict__[self.func.__name__] = self.func(obj)
        return value


def del_cached_property(obj, name):
    """
    Delete a cached property safely.

    Args:
        obj:
        name (str):
    """
    try:
        del obj.__dict__[name]
    except KeyError:
        pass


def has_cached_property(obj, name):
    """
    Check if a property is cached.

    Args:
        obj:
        name (str):
    """
    return name in obj.__dict__


def function_drop(rate=0.5, default=None):
    """
    Drop function calls to simulate random emulator stuck, for testing purpose.

    Args:
        rate (float): 0 to 1. Drop rate.
        default: Default value to return if dropped.

    Examples:
        @function_drop(0.3)
        def click(self, button, record_check=True):
            pass

        30% possibility:
        INFO | Dropped: module.device.device.Device.click(REWARD_GOTO_MAIN, record_check=True)
        70% possibility:
        INFO | Click (1091,  628) @ REWARD_GOTO_MAIN
    """
    from module.logger import logger

    def decorate(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            if random.uniform(0, 1) > rate:
                return func(*args, **kwargs)
            else:
                cls = ''
                arguments = [str(arg) for arg in args]
                if len(arguments):
                    matched = re.search('<(.*?) object at', arguments[0])
                    if matched:
                        cls = matched.group(1) + '.'
                        arguments.pop(0)
                arguments += [f'{k}={v}' for k, v in kwargs.items()]
                arguments = ', '.join(arguments)
                logger.info(f'Dropped: {cls}{func.__name__}({arguments})')
                return default

        return wrapper

    return decorate


def run_once(f):
    """
    Run a function only once, no matter how many times it has been called.

    Examples:
        @run_once
        def my_function(foo, bar):
            return foo + bar

        while 1:
            my_function()

    Examples:
        def my_function(foo, bar):
            return foo + bar

        action = run_once(my_function)
        while 1:
            action()
    """

    def wrapper(*args, **kwargs):
        if not wrapper.has_run:
            wrapper.has_run = True
            return f(*args, **kwargs)

    wrapper.has_run = False
    return wrapper

```

`module/base/filter.py`:

```py
import re

from module.logger import logger


class Filter:
    def __init__(self, regex, attr, preset=()):
        """
        Args:
            regex: Regular expression.
            attr: Attribute name.
            preset: Build-in string preset.
        """
        if isinstance(regex, str):
            regex = re.compile(regex)
        self.regex = regex
        self.attr = attr
        self.preset = tuple(list(p.lower() for p in preset))
        self.filter_raw = []
        self.filter = []

    def load(self, string):
        string = str(string)
        self.filter_raw = [f.strip(' \t\r\n') for f in string.split('>')]
        self.filter = [self.parse_filter(f) for f in self.filter_raw]

    def is_preset(self, filter):
        return len(filter) and filter.lower() in self.preset

    def apply(self, objs, func=None):
        """
        Args:
            objs (list): List of objects and strings
            func (callable): A function to filter object.
                Function should receive an object as arguments, and return a bool.
                True means add it to output.

        Returns:
            list: A list of objects and preset strings, such as [object, object, object, 'reset']
        """
        out = []
        for raw, filter in zip(self.filter_raw, self.filter):
            if self.is_preset(raw):
                raw = raw.lower()
                if raw not in out:
                    out.append(raw)
            else:
                for index, obj in enumerate(objs):
                    if self.apply_filter_to_obj(obj=obj, filter=filter) and obj not in out:
                        out.append(obj)

        if func is not None:
            objs, out = out, []
            for obj in objs:
                if isinstance(obj, str):
                    out.append(obj)
                elif func(obj):
                    out.append(obj)
                else:
                    # Drop this object
                    pass

        return out

    def apply_filter_to_obj(self, obj, filter):
        """
        Args:
            obj (object):
            filter (list[str]):

        Returns:
            bool: If an object satisfy a filter.
        """

        for attr, value in zip(self.attr, filter):
            if not value:
                continue
            if str(obj.__getattribute__(attr)).lower() != str(value):
                return False

        return True

    def parse_filter(self, string):
        """
        Args:
            string (str):

        Returns:
            list[strNone]:
        """
        string = string.replace(' ', '').lower()
        result = re.search(self.regex, string)

        if self.is_preset(string):
            return [string]

        if result and len(string) and result.span()[1]:
            return [result.group(index + 1) for index, attr in enumerate(self.attr)]
        else:
            logger.warning(f'Invalid filter: "{string}". This selector does not match the regex, nor a preset.')
            # Invalid filter will be ignored.
            # Return strange things and make it impossible to match
            return ['1nVa1d'] + [None] * (len(self.attr) - 1)


class MultiLangFilter(Filter):
    """
    To support multi-language, there might be different correct matches of same object.
    """

    def apply_filter_to_obj(self, obj, filter):
        """
        Args:
            obj (object): In this case, attributes of object are array (instead of plain string).
            Any match of element in it will return True
            filter (list[str]):

        Returns:
            bool: If an object satisfy a filter.
        """
        for attr, value in zip(self.attr, filter):
            if not value:
                continue
            if not hasattr(obj, attr):
                continue

            obj_value = obj.__getattribute__(attr)
            if isinstance(obj_value, (str, int)):
                if str(obj_value).lower() != str(value):
                    return False
            if isinstance(obj_value, list):
                if value not in obj_value:
                    return False

        return True

```

`module/base/resource.py`:

```py
import re

import module.config.server as server
from module.base.decorator import cached_property, del_cached_property


def get_assets_from_file(file, regex):
    assets = set()
    with open(file, 'r', encoding='utf-8') as f:
        for row in f.readlines():
            result = regex.search(row)
            if result:
                assets.add(result.group(1))
    return assets


class PreservedAssets:
    @cached_property
    def ui(self):
        assets = set()
        assets |= get_assets_from_file(
            file='./tasks/base/assets/assets_base_page.py',
            regex=re.compile(r'^([A-Za-z][A-Za-z0-9_]+) = ')
        )
        assets |= get_assets_from_file(
            file='./tasks/base/assets/assets_base_popup.py',
            regex=re.compile(r'^([A-Za-z][A-Za-z0-9_]+) = ')
        )
        return assets


_preserved_assets = PreservedAssets()


class Resource:
    # Class property, record all button and templates
    instances = {}

    def resource_add(self, key):
        Resource.instances[key] = self

    def resource_release(self):
        pass

    @classmethod
    def is_loaded(cls, obj):
        if hasattr(obj, '_image') and obj._image is None:
            return False
        elif hasattr(obj, 'image') and obj.image is None:
            return False
        return True

    @classmethod
    def resource_show(cls):
        from module.logger import logger
        logger.hr('Show resource')
        for key, obj in cls.instances.items():
            if cls.is_loaded(obj):
                continue
            logger.info(f'{obj}: {key}')


def release_resources(next_task=''):
    # Release assets cache
    # module.ui has about 80 assets and takes about 3MB
    # Alas has about 800 assets, but they are not all loaded.
    # Template images take more, about 6MB each
    for key, obj in Resource.instances.items():
        # Preserve assets for ui switching
        if next_task and str(obj) in _preserved_assets.ui:
            continue
        # if Resource.is_loaded(obj):
        #     logger.info(f'Release {obj}')
        obj.resource_release()

    # Useless in most cases, but just call it
    # gc.collect()

```

`module/base/retry.py`:

```py
import functools
import random
import time
from functools import partial

from module.logger import logger as logging_logger

"""
Copied from `retry`, but modified something.
"""

try:
    from decorator import decorator
except ImportError:
    def decorator(caller):
        """ Turns caller into a decorator.
        Unlike decorator module, function signature is not preserved.

        :param caller: caller(f, *args, **kwargs)
        """

        def decor(f):
            @functools.wraps(f)
            def wrapper(*args, **kwargs):
                return caller(f, *args, **kwargs)

            return wrapper

        return decor


def __retry_internal(f, exceptions=Exception, tries=-1, delay=0, max_delay=None, backoff=1, jitter=0,
                     logger=logging_logger):
    """
    Executes a function and retries it if it failed.

    :param f: the function to execute.
    :param exceptions: an exception or a tuple of exceptions to catch. default: Exception.
    :param tries: the maximum number of attempts. default: -1 (infinite).
    :param delay: initial delay between attempts. default: 0.
    :param max_delay: the maximum value of delay. default: None (no limit).
    :param backoff: multiplier applied to delay between attempts. default: 1 (no backoff).
    :param jitter: extra seconds added to delay between attempts. default: 0.
                   fixed if a number, random if a range tuple (min, max)
    :param logger: logger.warning(fmt, error, delay) will be called on failed attempts.
                   default: retry.logging_logger. if None, logging is disabled.
    :returns: the result of the f function.
    """
    _tries, _delay = tries, delay
    while _tries:
        try:
            return f()
        except exceptions as e:
            _tries -= 1
            if not _tries:
                # Difference, raise same exception
                raise e

            if logger is not None:
                # Difference, show exception
                logger.exception(e)
                logger.warning(f'{type(e).__name__}({e}), retrying in {_delay} seconds...')

            time.sleep(_delay)
            _delay *= backoff

            if isinstance(jitter, tuple):
                _delay += random.uniform(*jitter)
            else:
                _delay += jitter

            if max_delay is not None:
                _delay = min(_delay, max_delay)


def retry(exceptions=Exception, tries=-1, delay=0, max_delay=None, backoff=1, jitter=0, logger=logging_logger):
    """Returns a retry decorator.

    :param exceptions: an exception or a tuple of exceptions to catch. default: Exception.
    :param tries: the maximum number of attempts. default: -1 (infinite).
    :param delay: initial delay between attempts. default: 0.
    :param max_delay: the maximum value of delay. default: None (no limit).
    :param backoff: multiplier applied to delay between attempts. default: 1 (no backoff).
    :param jitter: extra seconds added to delay between attempts. default: 0.
                   fixed if a number, random if a range tuple (min, max)
    :param logger: logger.warning(fmt, error, delay) will be called on failed attempts.
                   default: retry.logging_logger. if None, logging is disabled.
    :returns: a retry decorator.
    """

    @decorator
    def retry_decorator(f, *fargs, **fkwargs):
        args = fargs if fargs else list()
        kwargs = fkwargs if fkwargs else dict()
        return __retry_internal(partial(f, *args, **kwargs), exceptions, tries, delay, max_delay, backoff, jitter,
                                logger)

    return retry_decorator


def retry_call(f, fargs=None, fkwargs=None, exceptions=Exception, tries=-1, delay=0, max_delay=None, backoff=1,
               jitter=0,
               logger=logging_logger):
    """
    Calls a function and re-executes it if it failed.

    :param f: the function to execute.
    :param fargs: the positional arguments of the function to execute.
    :param fkwargs: the named arguments of the function to execute.
    :param exceptions: an exception or a tuple of exceptions to catch. default: Exception.
    :param tries: the maximum number of attempts. default: -1 (infinite).
    :param delay: initial delay between attempts. default: 0.
    :param max_delay: the maximum value of delay. default: None (no limit).
    :param backoff: multiplier applied to delay between attempts. default: 1 (no backoff).
    :param jitter: extra seconds added to delay between attempts. default: 0.
                   fixed if a number, random if a range tuple (min, max)
    :param logger: logger.warning(fmt, error, delay) will be called on failed attempts.
                   default: retry.logging_logger. if None, logging is disabled.
    :returns: the result of the f function.
    """
    args = fargs if fargs else list()
    kwargs = fkwargs if fkwargs else dict()
    return __retry_internal(partial(f, *args, **kwargs), exceptions, tries, delay, max_delay, backoff, jitter, logger)

```

`module/base/timer.py`:

```py
import time
from datetime import datetime, timedelta
from functools import wraps


def timer(function):
    @wraps(function)
    def function_timer(*args, **kwargs):
        t0 = time.time()

        result = function(*args, **kwargs)
        t1 = time.time()
        print('%s: %s s' % (function.__name__, str(round(t1 - t0, 10))))
        return result

    return function_timer


def future_time(string):
    """
    Args:
        string (str): Such as 14:59.

    Returns:
        datetime.datetime: Time with given hour, minute in the future.
    """
    hour, minute = [int(x) for x in string.split(':')]
    future = datetime.now().replace(hour=hour, minute=minute, second=0, microsecond=0)
    future = future + timedelta(days=1) if future < datetime.now() else future
    return future


def past_time(string):
    """
    Args:
        string (str): Such as 14:59.

    Returns:
        datetime.datetime: Time with given hour, minute in the past.
    """
    hour, minute = [int(x) for x in string.split(':')]
    past = datetime.now().replace(hour=hour, minute=minute, second=0, microsecond=0)
    past = past - timedelta(days=1) if past > datetime.now() else past
    return past


def future_time_range(string):
    """
    Args:
        string (str): Such as 23:30-06:30.

    Returns:
        tuple(datetime.datetime): (time start, time end).
    """
    start, end = [future_time(s) for s in string.split('-')]
    if start > end:
        start = start - timedelta(days=1)
    return start, end


def time_range_active(time_range):
    """
    Args:
        time_range(tuple(datetime.datetime)): (time start, time end).

    Returns:
        bool:
    """
    return time_range[0] < datetime.now() < time_range[1]


class Timer:
    def __init__(self, limit, count=0):
        """
        Args:
            limit (int, float): Timer limit
            count (int): Timer reach confirm count. Default to 0.
                When using a structure like this, must set a count.
                Otherwise it goes wrong, if screenshot time cost greater than limit.

                if self.appear(MAIN_CHECK):
                    if confirm_timer.reached():
                        pass
                else:
                    confirm_timer.reset()

                Also, It's a good idea to set `count`, to make alas run more stable on slow computers.
                Expected speed is 0.35 second / screenshot.
        """
        self.limit = limit
        self.count = count
        self._current = 0
        self._reach_count = count

    def start(self):
        if not self.started():
            self._current = time.time()
            self._reach_count = 0

        return self

    def started(self):
        return bool(self._current)

    def current(self):
        """
        Returns:
            float
        """
        if self.started():
            return time.time() - self._current
        else:
            return 0.

    def set_current(self, current, count=0):
        self._current = time.time() - current
        self._reach_count = count

    def reached(self):
        """
        Returns:
            bool
        """
        self._reach_count += 1
        return time.time() - self._current > self.limit and self._reach_count > self.count

    def reset(self):
        self._current = time.time()
        self._reach_count = 0
        return self

    def clear(self):
        self._current = 0
        self._reach_count = self.count
        return self

    def reached_and_reset(self):
        """
        Returns:
            bool:
        """
        if self.reached():
            self.reset()
            return True
        else:
            return False

    def wait(self):
        """
        Wait until timer reached.
        """
        diff = self._current + self.limit - time.time()
        if diff > 0:
            time.sleep(diff)

    def show(self):
        from module.logger import logger
        logger.info(str(self))

    def __str__(self):
        return f'Timer(limit={round(self.current(), 3)}/{self.limit}, count={self._reach_count}/{self.count})'

    __repr__ = __str__

```

`module/base/utils/__init__.py`:

```py
from .utils import *
from .grids import *
from .points import *

```

`module/base/utils/grids.py`:

```py
import operator
import typing as t


class SelectedGrids:
    def __init__(self, grids):
        self.grids = grids
        self.indexes: t.Dict[tuple, SelectedGrids] = {}

    def __iter__(self):
        return iter(self.grids)

    def __getitem__(self, item):
        if isinstance(item, int):
            return self.grids[item]
        else:
            return SelectedGrids(self.grids[item])

    def __contains__(self, item):
        return item in self.grids

    def __str__(self):
        # return str([str(grid) for grid in self])
        return '[' + ', '.join([str(grid) for grid in self]) + ']'

    def __len__(self):
        return len(self.grids)

    def __bool__(self):
        return self.count > 0

    # def __getattr__(self, item):
    #     return [grid.__getattribute__(item) for grid in self.grids]

    @property
    def location(self):
        """
        Returns:
            list[tuple]:
        """
        return [grid.location for grid in self.grids]

    @property
    def cost(self):
        """
        Returns:
            list[int]:
        """
        return [grid.cost for grid in self.grids]

    @property
    def weight(self):
        """
        Returns:
            list[int]:
        """
        return [grid.weight for grid in self.grids]

    @property
    def count(self):
        """
        Returns:
            int:
        """
        return len(self.grids)

    def select(self, **kwargs):
        """
        Args:
            **kwargs: Attributes of Grid.

        Returns:
            SelectedGrids:
        """
        def matched(obj):
            flag = True
            for k, v in kwargs.items():
                obj_v = obj.__getattribute__(k)
                if type(obj_v) != type(v) or obj_v != v:
                    flag = False
            return flag

        return SelectedGrids([grid for grid in self.grids if matched(grid)])

    def create_index(self, *attrs):
        indexes = {}
        # index_keys = [(grid.__getattribute__(attr) for attr in attrs) for grid in self.grids]
        for grid in self.grids:
            k = tuple(grid.__getattribute__(attr) for attr in attrs)
            try:
                indexes[k].append(grid)
            except KeyError:
                indexes[k] = [grid]

        indexes = {k: SelectedGrids(v) for k, v in indexes.items()}
        self.indexes = indexes
        return indexes

    def indexed_select(self, *values):
        return self.indexes.get(values, SelectedGrids([]))

    def left_join(self, right, on_attr, set_attr, default=None):
        """
        Args:
            right (SelectedGrids): Right table to join
            on_attr:
            set_attr:
            default:

        Returns:
            SelectedGrids:
        """
        right.create_index(*on_attr)
        for grid in self:
            attr_value = tuple([grid.__getattribute__(attr) for attr in on_attr])
            right_grid = right.indexed_select(*attr_value).first_or_none()
            if right_grid is not None:
                for attr in set_attr:
                    grid.__setattr__(attr, right_grid.__getattribute__(attr))
            else:
                for attr in set_attr:
                    grid.__setattr__(attr, default)

        return self

    def filter(self, func):
        """
        Filter grids by a function.

        Args:
            func (callable): Function should receive an grid as argument, and return a bool.

        Returns:
            SelectedGrids:
        """
        return SelectedGrids([grid for grid in self if func(grid)])

    def set(self, **kwargs):
        """
        Set attribute to each grid.

        Args:
            **kwargs:
        """
        for grid in self:
            for key, value in kwargs.items():
                grid.__setattr__(key, value)

    def get(self, attr):
        """
        Get an attribute from each grid.

        Args:
            attr: Attribute name.

        Returns:
            list:
        """
        return [grid.__getattribute__(attr) for grid in self.grids]

    def call(self, func, **kwargs):
        """
        Call a function in reach grid, and get results.

        Args:
            func (str): Function name to call.
            **kwargs:

        Returns:
            list:
        """
        return [grid.__getattribute__(func)(**kwargs) for grid in self]

    def first_or_none(self):
        """
        Returns:

        """
        try:
            return self.grids[0]
        except IndexError:
            return None

    def add(self, grids):
        """
        Args:
            grids(SelectedGrids):

        Returns:
            SelectedGrids:
        """
        return SelectedGrids(list(set(self.grids + grids.grids)))

    def add_by_eq(self, grids):
        """
        Another `add()` method, but de-duplicates with `__eq__` instead of `__hash__`.

        Args:
            grids(SelectedGrids):

        Returns:
            SelectedGrids:
        """
        new = []
        for grid in self.grids + grids.grids:
            if grid not in new:
                new.append(grid)

        return SelectedGrids(new)

    def intersect(self, grids):
        """
        Args:
            grids(SelectedGrids):

        Returns:
            SelectedGrids:
        """
        return SelectedGrids(list(set(self.grids).intersection(set(grids.grids))))

    def intersect_by_eq(self, grids):
        """
        Another `intersect()` method, but de-duplicates with `__eq__` instead of `__hash__`.

        Args:
            grids(SelectedGrids):

        Returns:
            SelectedGrids:
        """
        new = []
        for grid in self.grids:
            if grid in grids.grids:
                new.append(grid)

        return SelectedGrids(new)

    def delete(self, grids):
        """
        Args:
            grids(SelectedGrids):

        Returns:
            SelectedGrids:
        """
        g = [grid for grid in self.grids if grid not in grids]
        return SelectedGrids(g)

    def sort(self, *args):
        """
        Args:
            args (str): Attribute name to sort.

        Returns:
            SelectedGrids:
        """
        if not self:
            return self
        if len(args):
            grids = sorted(self.grids, key=operator.attrgetter(*args))
            return SelectedGrids(grids)
        else:
            return self

    def sort_by_camera_distance(self, camera):
        """
        Args:
            camera (tuple):

        Returns:
            SelectedGrids:
        """
        import numpy as np
        if not self:
            return self
        location = np.array(self.location)
        diff = np.sum(np.abs(location - camera), axis=1)
        # grids = [x for _, x in sorted(zip(diff, self.grids))]
        grids = tuple(np.array(self.grids)[np.argsort(diff)])
        return SelectedGrids(grids)

    def sort_by_clock_degree(self, center=(0, 0), start=(0, 1), clockwise=True):
        """
        Args:
            center (tuple): Origin point.
            start (tuple): Start coordinate, this point will be considered as theta=0.
            clockwise (bool): True for clockwise, false for counterclockwise.

        Returns:
            SelectedGrids:
        """
        import numpy as np
        if not self:
            return self
        vector = np.subtract(self.location, center)
        theta = np.arctan2(vector[:, 1], vector[:, 0]) / np.pi * 180
        vector = np.subtract(start, center)
        theta = theta - np.arctan2(vector[1], vector[0]) / np.pi * 180
        if not clockwise:
            theta = -theta
        theta[theta < 0] += 360
        grids = tuple(np.array(self.grids)[np.argsort(theta)])
        return SelectedGrids(grids)


class RoadGrids:
    def __init__(self, grids):
        """
        Args:
            grids (list):
        """
        self.grids = []
        for grid in grids:
            if isinstance(grid, list):
                self.grids.append(SelectedGrids(grids=grid))
            else:
                self.grids.append(SelectedGrids(grids=[grid]))

    def __str__(self):
        return str(' - '.join([str(grid) for grid in self.grids]))

    def roadblocks(self):
        """
        Returns:
            SelectedGrids:
        """
        grids = []
        for block in self.grids:
            if block.count == block.select(is_enemy=True).count:
                grids += block.grids
        return SelectedGrids(grids)

    def potential_roadblocks(self):
        """
        Returns:
            SelectedGrids:
        """
        grids = []
        for block in self.grids:
            if any([grid.is_fleet for grid in block]):
                continue
            if any([grid.is_cleared for grid in block]):
                continue
            if block.count - block.select(is_enemy=True).count == 1:
                grids += block.select(is_enemy=True).grids
        return SelectedGrids(grids)

    def first_roadblocks(self):
        """
        Returns:
            SelectedGrids:
        """
        grids = []
        for block in self.grids:
            if any([grid.is_fleet for grid in block]):
                continue
            if any([grid.is_cleared for grid in block]):
                continue
            if block.select(is_enemy=True).count >= 1:
                grids += block.select(is_enemy=True).grids
        return SelectedGrids(grids)

    def combine(self, road):
        """
        Args:
            road (RoadGrids):

        Returns:
            RoadGrids:
        """
        out = RoadGrids([])
        for select_1 in self.grids:
            for select_2 in road.grids:
                select = select_1.add(select_2)
                out.grids.append(select)

        return out

```

`module/base/utils/points.py`:

```py
import numpy as np
from scipy import optimize

from .utils import area_pad


class Points:
    def __init__(self, points):
        if points is None or len(points) == 0:
            self._bool = False
            self.points = None
        else:
            self._bool = True
            self.points = np.array(points)
            if len(self.points.shape) == 1:
                self.points = np.array([self.points])
            self.x, self.y = self.points.T

    def __str__(self):
        return str(self.points)

    __repr__ = __str__

    def __iter__(self):
        return iter(self.points)

    def __getitem__(self, item):
        return self.points[item]

    def __len__(self):
        if self:
            return len(self.points)
        else:
            return 0

    def __bool__(self):
        return self._bool

    def link(self, point, is_horizontal=False):
        if is_horizontal:
            lines = [[y, np.pi / 2] for y in self.y]
            return Lines(lines, is_horizontal=True)
        else:
            x, y = point
            theta = -np.arctan((self.x - x) / (self.y - y))
            rho = self.x * np.cos(theta) + self.y * np.sin(theta)
            lines = np.array([rho, theta]).T
            return Lines(lines, is_horizontal=False)

    def mean(self):
        if not self:
            return None

        return np.round(np.mean(self.points, axis=0)).astype(int)

    def group(self, threshold=3):
        if not self:
            return np.array([])
        groups = []
        points = self.points
        if len(points) == 1:
            return np.array([points[0]])

        while len(points):
            p0, p1 = points[0], points[1:]
            distance = np.sum(np.abs(p1 - p0), axis=1)
            new = Points(np.append(p1[distance <= threshold], [p0], axis=0)).mean().tolist()
            groups.append(new)
            points = p1[distance > threshold]

        return np.array(groups)


class Lines:
    MID_Y = 360

    def __init__(self, lines, is_horizontal):
        if lines is None or len(lines) == 0:
            self._bool = False
            self.lines = None
        else:
            self._bool = True
            self.lines = np.array(lines)
            if len(self.lines.shape) == 1:
                self.lines = np.array([self.lines])
            self.rho, self.theta = self.lines.T
        self.is_horizontal = is_horizontal

    def __str__(self):
        return str(self.lines)

    __repr__ = __str__

    def __iter__(self):
        return iter(self.lines)

    def __getitem__(self, item):
        return Lines(self.lines[item], is_horizontal=self.is_horizontal)

    def __len__(self):
        if self:
            return len(self.lines)
        else:
            return 0

    def __bool__(self):
        return self._bool

    @property
    def sin(self):
        return np.sin(self.theta)

    @property
    def cos(self):
        return np.cos(self.theta)

    @property
    def mean(self):
        if not self:
            return None
        if self.is_horizontal:
            return np.mean(self.lines, axis=0)
        else:
            x = np.mean(self.mid)
            theta = np.mean(self.theta)
            rho = x * np.cos(theta) + self.MID_Y * np.sin(theta)
            return np.array((rho, theta))

    @property
    def mid(self):
        if not self:
            return np.array([])
        if self.is_horizontal:
            return self.rho
        else:
            return (self.rho - self.MID_Y * self.sin) / self.cos

    def get_x(self, y):
        return (self.rho - y * self.sin) / self.cos

    def get_y(self, x):
        return (self.rho - x * self.cos) / self.sin

    def add(self, other):
        if not other:
            return self
        if not self:
            return other
        lines = np.append(self.lines, other.lines, axis=0)
        return Lines(lines, is_horizontal=self.is_horizontal)

    def move(self, x, y):
        if not self:
            return self
        if self.is_horizontal:
            self.lines[:, 0] += y
        else:
            self.lines[:, 0] += x * self.cos + y * self.sin
        return Lines(self.lines, is_horizontal=self.is_horizontal)

    def sort(self):
        if not self:
            return self
        lines = self.lines[np.argsort(self.mid)]
        return Lines(lines, is_horizontal=self.is_horizontal)

    def group(self, threshold=3):
        if not self:
            return self
        lines = self.sort()
        prev = 0
        regrouped = []
        group = []
        for mid, line in zip(lines.mid, lines.lines):
            line = line.tolist()
            if mid - prev > threshold:
                if len(regrouped) == 0:
                    if len(group) != 0:
                        regrouped = [group]
                else:
                    regrouped += [group]
                group = [line]
            else:
                group.append(line)
            prev = mid
        regrouped += [group]
        regrouped = np.vstack([Lines(r, is_horizontal=self.is_horizontal).mean for r in regrouped])
        return Lines(regrouped, is_horizontal=self.is_horizontal)

    def distance_to_point(self, point):
        x, y = point
        return self.rho - x * self.cos - y * self.sin

    @staticmethod
    def cross_two_lines(lines1, lines2):
        for rho1, sin1, cos1 in zip(lines1.rho, lines1.sin, lines1.cos):
            for rho2, sin2, cos2 in zip(lines2.rho, lines2.sin, lines2.cos):
                a = np.array([[cos1, sin1], [cos2, sin2]])
                b = np.array([rho1, rho2])
                yield np.linalg.solve(a, b)

    def cross(self, other):
        points = np.vstack(self.cross_two_lines(self, other))
        points = Points(points)
        return points

    def delete(self, other, threshold=3):
        if not self:
            return self

        other_mid = other.mid
        lines = []
        for mid, line in zip(self.mid, self.lines):
            if np.any(np.abs(other_mid - mid) < threshold):
                continue
            lines.append(line)

        return Lines(lines, is_horizontal=self.is_horizontal)


def area2corner(area):
    """
    Args:
        area: (x1, y1, x2, y2)

    Returns:
        np.ndarray: [upper-left, upper-right, bottom-left, bottom-right]
    """
    return np.array([[area[0], area[1]], [area[2], area[1]], [area[0], area[3]], [area[2], area[3]]])


def corner2area(corner):
    """
    Args:
        corner: [upper-left, upper-right, bottom-left, bottom-right]

    Returns:
        np.ndarray: (x1, y1, x2, y2)
    """
    x, y = np.array(corner).T
    return np.rint([np.min(x), np.min(y), np.max(x), np.max(y)]).astype(int)


def corner2inner(corner):
    """
    The largest rectangle inscribed in trapezoid.

    Args:
        corner: ((x0, y0), (x1, y1), (x2, y2), (x3, y3))

    Returns:
        tuple[int]: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    x0, y0, x1, y1, x2, y2, x3, y3 = np.array(corner).flatten()
    area = tuple(np.rint((max(x0, x2), max(y0, y1), min(x1, x3), min(y2, y3))).astype(int))
    return area


def corner2outer(corner):
    """
    The smallest rectangle circumscribed by the trapezoid.

    Args:
        corner: ((x0, y0), (x1, y1), (x2, y2), (x3, y3))

    Returns:
        tuple[int]: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    x0, y0, x1, y1, x2, y2, x3, y3 = np.array(corner).flatten()
    area = tuple(np.rint((min(x0, x2), min(y0, y1), max(x1, x3), max(y2, y3))).astype(int))
    return area


def trapezoid2area(corner, pad=0):
    """
    Convert corners of a trapezoid to area.

    Args:
        corner: ((x0, y0), (x1, y1), (x2, y2), (x3, y3))
        pad (int):
            Positive value for inscribed area.
            Negative value and 0 for circumscribed area.

    Returns:
        tuple[int]: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    if pad > 0:
        return area_pad(corner2inner(corner), pad=pad)
    elif pad < 0:
        return area_pad(corner2outer(corner), pad=pad)
    else:
        return area_pad(corner2area(corner), pad=pad)


def points_to_area_generator(points, shape):
    """
    Args:
        points (np.ndarray): N x 2 array.
        shape (tuple): (x, y).

    Yields:
        tuple, np.ndarray: (x, y), [upper-left, upper-right, bottom-left, bottom-right]
    """
    points = points.reshape(*shape[::-1], 2)
    for y in range(shape[1] - 1):
        for x in range(shape[0] - 1):
            area = np.array([points[y, x], points[y, x + 1], points[y + 1, x], points[y + 1, x + 1]])
            yield ((x, y), area)


def get_map_inner(points):
    """
    Args:
        points (np.ndarray): N x 2 array.

    Yields:
        np.ndarray: (x, y).
    """
    points = np.array(points)
    if len(points.shape) == 1:
        points = np.array([points])

    return np.mean(points, axis=0)


def separate_edges(edges, inner):
    """
    Args:
        edges: A iterate object which contains float ot integer.
        inner (float, int): A inner point to separate edges.

    Returns:
        float, float: Lower edge and upper edge. if not found, return None
    """
    if len(edges) == 0:
        return None, None
    elif len(edges) == 1:
        edge = edges[0]
        return (None, edge) if edge > inner else (edge, None)
    else:
        lower = [edge for edge in edges if edge < inner]
        upper = [edge for edge in edges if edge > inner]
        lower = lower[0] if len(lower) else None
        upper = upper[-1] if len(upper) else None
        return lower, upper


def perspective_transform(points, data):
    """
    Args:
        points: A 2D array with shape (n, 2)
        data: Perspective data, a 2D array with shape (3, 3),
            see https://web.archive.org/web/20150222120106/xenia.media.mit.edu/~cwren/interpolator/

    Returns:
        np.ndarray: 2D array with shape (n, 2)
    """
    points = np.pad(np.array(points), ((0, 0), (0, 1)), mode='constant', constant_values=1)
    matrix = data.dot(points.T)
    x, y = matrix[0] / matrix[2], matrix[1] / matrix[2]
    points = np.array([x, y]).T
    return points


def fit_points(points, mod, encourage=1):
    """
    Get a closet point in a group of points with common difference.
    Will ignore points in the distance.

    Args:
        points: Points on image, a 2D array with shape (n, 2)
        mod: Common difference of points, (x, y).
        encourage (int, float): Describe how close to fit a group of points, in pixel.
            Smaller means closer to local minimum, larger means closer to global minimum.

    Returns:
        np.ndarray: (x, y)
    """
    encourage = np.square(encourage)
    mod = np.array(mod)
    points = np.array(points) % mod
    points = np.append(points - mod, points, axis=0)

    def cal_distance(point):
        distance = np.linalg.norm(points - point, axis=1)
        return np.sum(1 / (1 + np.exp(encourage / distance) / distance))

    # Fast local minimizer
    # result = optimize.minimize(cal_distance, np.mean(points, axis=0), method='SLSQP')
    # return result['x'] % mod

    # Brute-force global minimizer
    area = np.append(-mod - 10, mod + 10)
    result = optimize.brute(cal_distance, ((area[0], area[2]), (area[1], area[3])))
    return result % mod

```

`module/base/utils/utils.py`:

```py
import re

import cv2
import numpy as np
from PIL import Image

REGEX_NODE = re.compile(r'(-?[A-Za-z]+)(-?\d+)')


def random_normal_distribution_int(a, b, n=3):
    """Generate a normal distribution int within the interval. Use the average value of several random numbers to
    simulate normal distribution.

    Args:
        a (int): The minimum of the interval.
        b (int): The maximum of the interval.
        n (int): The amount of numbers in simulation. Default to 3.

    Returns:
        int
    """
    if a < b:
        output = np.mean(np.random.randint(a, b, size=n))
        return int(output.round())
    else:
        return b


def random_rectangle_point(area, n=3):
    """Choose a random point in an area.

    Args:
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        n (int): The amount of numbers in simulation. Default to 3.

    Returns:
        tuple(int): (x, y)
    """
    x = random_normal_distribution_int(area[0], area[2], n=n)
    y = random_normal_distribution_int(area[1], area[3], n=n)
    return x, y


def random_rectangle_vector(vector, box, random_range=(0, 0, 0, 0), padding=15):
    """Place a vector in a box randomly.

    Args:
        vector: (x, y)
        box: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        random_range (tuple): Add a random_range to vector. (x_min, y_min, x_max, y_max).
        padding (int):

    Returns:
        tuple(int), tuple(int): start_point, end_point.
    """
    vector = np.array(vector) + random_rectangle_point(random_range)
    vector = np.round(vector).astype(int)
    half_vector = np.round(vector / 2).astype(int)
    box = np.array(box) + np.append(np.abs(half_vector) + padding, -np.abs(half_vector) - padding)
    center = random_rectangle_point(box)
    start_point = center - half_vector
    end_point = start_point + vector
    return tuple(start_point), tuple(end_point)


def random_rectangle_vector_opted(
        vector, box, random_range=(0, 0, 0, 0), padding=15, whitelist_area=None, blacklist_area=None):
    """
    Place a vector in a box randomly.

    When emulator/game stuck, it treats a swipe as a click, clicking at the end of swipe path.
    To prevent this, random results need to be filtered.

    Args:
        vector: (x, y)
        box: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        random_range (tuple): Add a random_range to vector. (x_min, y_min, x_max, y_max).
        padding (int):
        whitelist_area: (list[tuple[int]]):
            A list of area that safe to click. Swipe path will end there.
        blacklist_area: (list[tuple[int]]):
            If none of the whitelist_area satisfies current vector, blacklist_area will be used.
            Delete random path that ends in any blacklist_area.

    Returns:
        tuple(int), tuple(int): start_point, end_point.
    """
    vector = np.array(vector) + random_rectangle_point(random_range)
    vector = np.round(vector).astype(int)
    half_vector = np.round(vector / 2).astype(int)
    box_pad = np.array(box) + np.append(np.abs(half_vector) + padding, -np.abs(half_vector) - padding)
    box_pad = area_offset(box_pad, half_vector)
    segment = int(np.linalg.norm(vector) // 70) + 1

    def in_blacklist(end):
        if not blacklist_area:
            return False
        for x in range(segment + 1):
            point = - vector * x / segment + end
            for area in blacklist_area:
                if point_in_area(point, area, threshold=0):
                    return True
        return False

    if whitelist_area:
        for area in whitelist_area:
            area = area_limit(area, box_pad)
            if all([x > 0 for x in area_size(area)]):
                end_point = random_rectangle_point(area)
                for _ in range(10):
                    if in_blacklist(end_point):
                        continue
                    return point_limit(end_point - vector, box), point_limit(end_point, box)

    for _ in range(100):
        end_point = random_rectangle_point(box_pad)
        if in_blacklist(end_point):
            continue
        return point_limit(end_point - vector, box), point_limit(end_point, box)

    end_point = random_rectangle_point(box_pad)
    return point_limit(end_point - vector, box), point_limit(end_point, box)


def random_line_segments(p1, p2, n, random_range=(0, 0, 0, 0)):
    """Cut a line into multiple segments.

    Args:
        p1: (x, y).
        p2: (x, y).
        n: Number of slice.
        random_range: Add a random_range to points.

    Returns:
        list[tuple]: [(x0, y0), (x1, y1), (x2, y2)]
    """
    return [tuple((((n - index) * p1 + index * p2) / n).astype(int) + random_rectangle_point(random_range))
            for index in range(0, n + 1)]


def ensure_time(second, n=3, precision=3):
    """Ensure to be time.

    Args:
        second (int, float, tuple): time, such as 10, (10, 30), '10, 30'
        n (int): The amount of numbers in simulation. Default to 5.
        precision (int): Decimals.

    Returns:
        float:
    """
    if isinstance(second, tuple):
        multiply = 10 ** precision
        result = random_normal_distribution_int(second[0] * multiply, second[1] * multiply, n) / multiply
        return round(result, precision)
    elif isinstance(second, str):
        if ',' in second:
            lower, upper = second.replace(' ', '').split(',')
            lower, upper = int(lower), int(upper)
            return ensure_time((lower, upper), n=n, precision=precision)
        if '-' in second:
            lower, upper = second.replace(' ', '').split('-')
            lower, upper = int(lower), int(upper)
            return ensure_time((lower, upper), n=n, precision=precision)
        else:
            return int(second)
    else:
        return second


def ensure_int(*args):
    """
    Convert all elements to int.
    Return the same structure as nested objects.

    Args:
        *args:

    Returns:
        list:
    """

    def to_int(item):
        try:
            return int(item)
        except TypeError:
            result = [to_int(i) for i in item]
            if len(result) == 1:
                result = result[0]
            return result

    return to_int(args)


def area_offset(area, offset):
    """
    Move an area.

    Args:
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        offset: (x, y).

    Returns:
        tuple: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    upper_left_x, upper_left_y, bottom_right_x, bottom_right_y = area
    x, y = offset
    return upper_left_x + x, upper_left_y + y, bottom_right_x + x, bottom_right_y + y


def area_pad(area, pad=10):
    """
    Inner offset an area.

    Args:
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        pad (int):

    Returns:
        tuple: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    upper_left_x, upper_left_y, bottom_right_x, bottom_right_y = area
    return upper_left_x + pad, upper_left_y + pad, bottom_right_x - pad, bottom_right_y - pad


def limit_in(x, lower, upper):
    """
    Limit x within range (lower, upper)

    Args:
        x:
        lower:
        upper:

    Returns:
        int, float:
    """
    return max(min(x, upper), lower)


def area_limit(area1, area2):
    """
    Limit an area in another area.

    Args:
        area1: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        area2: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).

    Returns:
        tuple: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
    """
    x_lower, y_lower, x_upper, y_upper = area2
    return (
        limit_in(area1[0], x_lower, x_upper),
        limit_in(area1[1], y_lower, y_upper),
        limit_in(area1[2], x_lower, x_upper),
        limit_in(area1[3], y_lower, y_upper),
    )


def area_size(area):
    """
    Area size or shape.

    Args:
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).

    Returns:
        tuple: (x, y).
    """
    return (
        max(area[2] - area[0], 0),
        max(area[3] - area[1], 0)
    )


def point_limit(point, area):
    """
    Limit point in an area.

    Args:
        point: (x, y).
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).

    Returns:
        tuple: (x, y).
    """
    return (
        limit_in(point[0], area[0], area[2]),
        limit_in(point[1], area[1], area[3])
    )


def point_in_area(point, area, threshold=5):
    """

    Args:
        point: (x, y).
        area: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        threshold: int

    Returns:
        bool:
    """
    return area[0] - threshold < point[0] < area[2] + threshold and area[1] - threshold < point[1] < area[3] + threshold


def area_in_area(area1, area2, threshold=5):
    """

    Args:
        area1: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        area2: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        threshold: int

    Returns:
        bool:
    """
    return area2[0] - threshold <= area1[0] \
        and area2[1] - threshold <= area1[1] \
        and area1[2] <= area2[2] + threshold \
        and area1[3] <= area2[3] + threshold


def area_cross_area(area1, area2, threshold=5):
    """

    Args:
        area1: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        area2: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        threshold: int

    Returns:
        bool:
    """
    # https://www.yiiven.cn/rect-is-intersection.html
    xa1, ya1, xa2, ya2 = area1
    xb1, yb1, xb2, yb2 = area2
    return abs(xb2 + xb1 - xa2 - xa1) <= xa2 - xa1 + xb2 - xb1 + threshold * 2 \
        and abs(yb2 + yb1 - ya2 - ya1) <= ya2 - ya1 + yb2 - yb1 + threshold * 2


def float2str(n, decimal=3):
    """
    Args:
        n (float):
        decimal (int):

    Returns:
        str:
    """
    return str(round(n, decimal)).ljust(decimal + 2, "0")


def point2str(x, y, length=4):
    """
    Args:
        x (int, float):
        y (int, float):
        length (int): Align length.

    Returns:
        str: String with numbers right aligned, such as '( 100,  80)'.
    """
    return '(%s, %s)' % (str(int(x)).rjust(length), str(int(y)).rjust(length))


def col2name(col):
    """
    Convert a zero indexed column cell reference to a string.

    Args:
       col: The cell column. Int.

    Returns:
        Column style string.

    Examples:
        0 -> A, 3 -> D, 35 -> AJ, -1 -> -A
    """

    col_neg = col < 0
    if col_neg:
        col_num = -col
    else:
        col_num = col + 1  # Change to 1-index.
    col_str = ''

    while col_num:
        # Set remainder from 1 .. 26
        remainder = col_num % 26

        if remainder == 0:
            remainder = 26

        # Convert the remainder to a character.
        col_letter = chr(remainder + 64)

        # Accumulate the column letters, right to left.
        col_str = col_letter + col_str

        # Get the next order of magnitude.
        col_num = int((col_num - 1) / 26)

    if col_neg:
        return '-' + col_str
    else:
        return col_str


def name2col(col_str):
    """
    Convert a cell reference in A1 notation to a zero indexed row and column.

    Args:
       col_str:  A1 style string.

    Returns:
        row, col: Zero indexed cell row and column indices.
    """
    # Convert base26 column string to number.
    expn = 0
    col = 0
    col_neg = col_str.startswith('-')
    col_str = col_str.strip('-').upper()

    for char in reversed(col_str):
        col += (ord(char) - 64) * (26 ** expn)
        expn += 1

    if col_neg:
        return -col
    else:
        return col - 1  # Convert 1-index to zero-index


def node2location(node):
    """
    See location2node()

    Args:
        node (str): Example: 'E3'

    Returns:
        tuple[int]: Example: (4, 2)
    """
    res = REGEX_NODE.search(node)
    if res:
        x, y = res.group(1), res.group(2)
        y = int(y)
        if y > 0:
            y -= 1
        return name2col(x), y
    else:
        # Whatever
        return ord(node[0]) % 32 - 1, int(node[1:]) - 1


def location2node(location):
    """
    Convert location tuple to an Excel-like cell.
    Accept negative values also.

         -2   -1    0    1    2    3
    -2 -B-2 -A-2  A-2  B-2  C-2  D-2
    -1 -B-1 -A-1  A-1  B-1  C-1  D-1
     0  -B1  -A1   A1   B1   C1   D1
     1  -B2  -A2   A2   B2   C2   D2
     2  -B3  -A3   A3   B3   C3   D3
     3  -B4  -A4   A4   B4   C4   D4

    # To generate the table above
    index = range(-2, 4)
    row = '   ' + ' '.join([str(i).rjust(4) for i in index])
    print(row)
    for y in index:
        row = str(y).rjust(2) + ' ' + ' '.join([location2node((x, y)).rjust(4) for x in index])
        print(row)

    def check(node):
        return point2str(*node2location(location2node(node)), length=2)
    row = '   ' + ' '.join([str(i).rjust(8) for i in index])
    print(row)
    for y in index:
        row = str(y).rjust(2) + ' ' + ' '.join([check((x, y)).rjust(4) for x in index])
        print(row)

    Args:
        location (tuple[int]):

    Returns:
        str:
    """
    x, y = location
    if y >= 0:
        y += 1
    return col2name(x) + str(y)


def load_image(file, area=None):
    """
    Load an image like pillow and drop alpha channel.

    Args:
        file (str):
        area (tuple):

    Returns:
        np.ndarray:
    """
    image = Image.open(file)
    if area is not None:
        image = image.crop(area)
    image = np.array(image)
    channel = image.shape[2] if len(image.shape) > 2 else 1
    if channel > 3:
        image = image[:, :, :3].copy()
    return image


def save_image(image, file):
    """
    Save an image like pillow.

    Args:
        image (np.ndarray):
        file (str):
    """
    # image = cv2.cvtColor(image, cv2.COLOR_RGB2BGR)
    # cv2.imwrite(file, image)
    Image.fromarray(image).save(file)


def crop(image, area, copy=True):
    """
    Crop image like pillow, when using opencv / numpy.
    Provides a black background if cropping outside of image.

    Args:
        image (np.ndarray):
        area:
        copy (bool):

    Returns:
        np.ndarray:
    """
    x1, y1, x2, y2 = map(int, map(round, area))
    h, w = image.shape[:2]
    border = np.maximum((0 - y1, y2 - h, 0 - x1, x2 - w), 0)
    x1, y1, x2, y2 = np.maximum((x1, y1, x2, y2), 0)
    image = image[y1:y2, x1:x2]
    if sum(border) > 0:
        image = cv2.copyMakeBorder(image, *border, borderType=cv2.BORDER_CONSTANT, value=(0, 0, 0))
    if copy:
        image = image.copy()
    return image


def resize(image, size):
    """
    Resize image like pillow image.resize(), but implement in opencv.
    Pillow uses PIL.Image.NEAREST by default.

    Args:
        image (np.ndarray):
        size: (x, y)

    Returns:
        np.ndarray:
    """
    return cv2.resize(image, size, interpolation=cv2.INTER_NEAREST)


def image_channel(image):
    """
    Args:
        image (np.ndarray):

    Returns:
        int: 0 for grayscale, 3 for RGB.
    """
    return image.shape[2] if len(image.shape) == 3 else 0


def image_size(image):
    """
    Args:
        image (np.ndarray):

    Returns:
        int, int: width, height
    """
    shape = image.shape
    return shape[1], shape[0]


def image_paste(image, background, origin):
    """
    Paste an image on background.
    This method does not return a value, but instead updates the array "background".

    Args:
        image:
        background:
        origin: Upper-left corner, (x, y)
    """
    x, y = origin
    w, h = image_size(image)
    background[y:y + h, x:x + w] = image


def rgb2gray(image):
    """
    Args:
        image (np.ndarray): Shape (height, width, channel)

    Returns:
        np.ndarray: Shape (height, width)
    """
    r, g, b = cv2.split(image)
    return cv2.add(
        cv2.multiply(cv2.max(cv2.max(r, g), b), 0.5),
        cv2.multiply(cv2.min(cv2.min(r, g), b), 0.5)
    )


def rgb2hsv(image):
    """
    Convert RGB color space to HSV color space.
    HSV is Hue Saturation Value.

    Args:
        image (np.ndarray): Shape (height, width, channel)

    Returns:
        np.ndarray: Hue (0~360), Saturation (0~100), Value (0~100).
    """
    image = cv2.cvtColor(image, cv2.COLOR_RGB2HSV).astype(float)
    image *= (360 / 180, 100 / 255, 100 / 255)
    return image


def rgb2yuv(image):
    """
    Convert RGB to YUV color space.

    Args:
        image (np.ndarray): Shape (height, width, channel)

    Returns:
        np.ndarray: Shape (height, width)
    """
    image = cv2.cvtColor(image, cv2.COLOR_RGB2YUV)
    return image


def rgb2luma(image):
    """
    Convert RGB to the Y channel (Luminance) in YUV color space.

    Args:
        image (np.ndarray): Shape (height, width, channel)

    Returns:
        np.ndarray: Shape (height, width)
    """
    image = cv2.cvtColor(image, cv2.COLOR_RGB2YUV)
    luma, _, _ = cv2.split(image)
    return luma


def get_color(image, area):
    """Calculate the average color of a particular area of the image.

    Args:
        image (np.ndarray): Screenshot.
        area (tuple): (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y)

    Returns:
        tuple: (r, g, b)
    """
    temp = crop(image, area, copy=False)
    color = cv2.mean(temp)
    return color[:3]


def get_bbox(image, threshold=0):
    """
    A numpy implementation of the getbbox() in pillow.

    Args:
        image (np.ndarray): Screenshot.
        threshold (int): Color <= threshold will be considered black

    Returns:
        tuple: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y)
    """
    if image_channel(image) == 3:
        image = np.max(image, axis=2)
    x = np.where(np.max(image, axis=0) > threshold)[0]
    y = np.where(np.max(image, axis=1) > threshold)[0]
    return x[0], y[0], x[-1] + 1, y[-1] + 1


def get_bbox_reversed(image, threshold=0):
    """
    Similar to `get_bbox` but for black contents on white background.

    Args:
        image (np.ndarray): Screenshot.
        threshold (int): Color >= threshold will be considered white

    Returns:
        tuple: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y)
    """
    if image_channel(image) == 3:
        image = np.min(image, axis=2)
    x = np.where(np.min(image, axis=0) < threshold)[0]
    y = np.where(np.min(image, axis=1) < threshold)[0]
    return x[0], y[0], x[-1] + 1, y[-1] + 1


def color_similarity(color1, color2):
    """
    Args:
        color1 (tuple): (r, g, b)
        color2 (tuple): (r, g, b)

    Returns:
        int:
    """
    diff = np.array(color1).astype(int) - np.array(color2).astype(int)
    diff = np.max(np.maximum(diff, 0)) - np.min(np.minimum(diff, 0))
    return diff


def color_similar(color1, color2, threshold=10):
    """Consider two colors are similar, if tolerance lesser or equal threshold.
    Tolerance = Max(Positive(difference_rgb)) + Max(- Negative(difference_rgb))
    The same as the tolerance in Photoshop.

    Args:
        color1 (tuple): (r, g, b)
        color2 (tuple): (r, g, b)
        threshold (int): Default to 10.

    Returns:
        bool: True if two colors are similar.
    """
    # print(color1, color2)
    diff = np.array(color1).astype(int) - np.array(color2).astype(int)
    diff = np.max(np.maximum(diff, 0)) - np.min(np.minimum(diff, 0))
    return diff <= threshold


def color_similar_1d(image, color, threshold=10):
    """
    Args:
        image (np.ndarray): 1D array.
        color: (r, g, b)
        threshold(int): Default to 10.

    Returns:
        np.ndarray: bool
    """
    diff = image.astype(int) - color
    diff = np.max(np.maximum(diff, 0), axis=1) - np.min(np.minimum(diff, 0), axis=1)
    return diff <= threshold


def color_similarity_2d(image, color):
    """
    Args:
        image: 2D array.
        color: (r, g, b)

    Returns:
        np.ndarray: uint8
    """
    r, g, b = cv2.split(cv2.subtract(image, (*color, 0)))
    positive = cv2.max(cv2.max(r, g), b)
    r, g, b = cv2.split(cv2.subtract((*color, 0), image))
    negative = cv2.max(cv2.max(r, g), b)
    return cv2.subtract(255, cv2.add(positive, negative))


def extract_letters(image, letter=(255, 255, 255), threshold=128):
    """Set letter color to black, set background color to white.

    Args:
        image: Shape (height, width, channel)
        letter (tuple): Letter RGB.
        threshold (int):

    Returns:
        np.ndarray: Shape (height, width)
    """
    r, g, b = cv2.split(cv2.subtract(image, (*letter, 0)))
    positive = cv2.max(cv2.max(r, g), b)
    r, g, b = cv2.split(cv2.subtract((*letter, 0), image))
    negative = cv2.max(cv2.max(r, g), b)
    return cv2.multiply(cv2.add(positive, negative), 255.0 / threshold)


def extract_white_letters(image, threshold=128):
    """Set letter color to black, set background color to white.
    This function will discourage color pixels (Non-gray pixels)

    Args:
        image: Shape (height, width, channel)
        threshold (int):

    Returns:
        np.ndarray: Shape (height, width)
    """
    r, g, b = cv2.split(cv2.subtract((255, 255, 255, 0), image))
    minimum = cv2.min(cv2.min(r, g), b)
    maximum = cv2.max(cv2.max(r, g), b)
    return cv2.multiply(cv2.add(maximum, cv2.subtract(maximum, minimum)), 255.0 / threshold)


def color_mapping(image, max_multiply=2):
    """
    Mapping color to 0-255.
    Minimum color to 0, maximum color to 255, multiply colors by 2 at max.

    Args:
        image (np.ndarray):
        max_multiply (int, float):

    Returns:
        np.ndarray:
    """
    image = image.astype(float)
    low, high = np.min(image), np.max(image)
    multiply = min(255 / (high - low), max_multiply)
    add = (255 - multiply * (low + high)) / 2
    image = cv2.add(cv2.multiply(image, multiply), add)
    image[image > 255] = 255
    image[image < 0] = 0
    return image.astype(np.uint8)


def image_left_strip(image, threshold, length):
    """
    In `DAILY:200/200` strip `DAILY:` and leave `200/200`

    Args:
        image (np.ndarray): (height, width)
        threshold (int):
            0-255
            The first column with brightness lower than this
            will be considered as left edge.
        length (int):
            Strip this length of image after the left edge

    Returns:
        np.ndarray:
    """
    brightness = np.mean(image, axis=0)
    match = np.where(brightness < threshold)[0]

    if len(match):
        left = match[0] + length
        total = image.shape[1]
        if left < total:
            image = image[:, left:]
    return image


def red_overlay_transparency(color1, color2, red=247):
    """Calculate the transparency of red overlay.

    Args:
        color1: origin color.
        color2: changed color.
        red(int): red color 0-255. Default to 247.

    Returns:
        float: 0-1
    """
    return (color2[0] - color1[0]) / (red - color1[0])


def color_bar_percentage(image, area, prev_color, reverse=False, starter=0, threshold=30):
    """
    Args:
        image:
        area:
        prev_color:
        reverse: True if bar goes from right to left.
        starter:
        threshold:

    Returns:
        float: 0 to 1.
    """
    image = crop(image, area)
    image = image[:, ::-1, :] if reverse else image
    length = image.shape[1]
    prev_index = starter

    for _ in range(1280):
        bar = color_similarity_2d(image, color=prev_color)
        index = np.where(np.any(bar > 255 - threshold, axis=0))[0]
        if not index.size:
            return prev_index / length
        else:
            index = index[-1]
        if index <= prev_index:
            return index / length
        prev_index = index

        prev_row = bar[:, prev_index] > 255 - threshold
        if not prev_row.size:
            return prev_index / length
        prev_color = np.mean(image[:, prev_index], axis=0)

    return 0.

```

`module/config/argument/args.json`:

```json
{
  "Alas": {
    "Emulator": {
      "Serial": {
        "type": "input",
        "value": "auto",
        "valuetype": "str"
      },
      "PackageName": {
        "type": "select",
        "value": "auto",
        "option": [
          "auto",
          "com.miHoYo.hkrpg",
          "com.HoYoverse.hkrpgoversea",
          "com.miHoYo.hkrpg.bilibili"
        ]
      },
      "ScreenshotMethod": {
        "type": "select",
        "value": "scrcpy",
        "option": [
          "auto",
          "ADB",
          "ADB_nc",
          "uiautomator2",
          "aScreenCap",
          "aScreenCap_nc",
          "DroidCast",
          "DroidCast_raw",
          "scrcpy"
        ],
        "display": "hide"
      },
      "ControlMethod": {
        "type": "select",
        "value": "MaaTouch",
        "option": [
          "minitouch",
          "MaaTouch"
        ],
        "display": "hide"
      },
      "AdbRestart": {
        "type": "checkbox",
        "value": false
      }
    },
    "EmulatorInfo": {
      "Emulator": {
        "type": "select",
        "value": "auto",
        "option": [
          "auto",
          "NoxPlayer",
          "NoxPlayer64",
          "BlueStacks4",
          "BlueStacks5",
          "BlueStacks4HyperV",
          "BlueStacks5HyperV",
          "LDPlayer3",
          "LDPlayer4",
          "LDPlayer9",
          "MuMuPlayer",
          "MuMuPlayerX",
          "MuMuPlayer12",
          "MEmuPlayer"
        ]
      },
      "name": {
        "type": "textarea",
        "value": null
      },
      "path": {
        "type": "textarea",
        "value": null
      }
    },
    "Error": {
      "Restart": {
        "type": "select",
        "value": "game",
        "option": [
          "game",
          "game_emulator"
        ]
      },
      "SaveError": {
        "type": "checkbox",
        "value": true
      },
      "ScreenshotLength": {
        "type": "input",
        "value": 1
      },
      "OnePushConfig": {
        "type": "textarea",
        "value": "provider: null",
        "mode": "yaml"
      }
    },
    "Optimization": {
      "ScreenshotInterval": {
        "type": "input",
        "value": 0.2,
        "display": "hide"
      },
      "CombatScreenshotInterval": {
        "type": "input",
        "value": 1.0,
        "display": "hide"
      },
      "WhenTaskQueueEmpty": {
        "type": "select",
        "value": "goto_main",
        "option": [
          "stay_there",
          "goto_main",
          "close_game"
        ]
      }
    }
  },
  "Restart": {
    "Scheduler": {
      "Enable": {
        "type": "state",
        "value": true,
        "option": [
          true
        ],
        "option_bold": [
          true
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "Restart",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    }
  },
  "Dungeon": {
    "Scheduler": {
      "Enable": {
        "type": "checkbox",
        "value": false,
        "option": [
          true,
          false
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "Dungeon",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    },
    "Dungeon": {
      "Name": {
        "type": "select",
        "value": "Calyx_Golden_Treasures",
        "option": [
          "Calyx_Golden_Memories",
          "Calyx_Golden_Aether",
          "Calyx_Golden_Treasures",
          "Calyx_Crimson_Destruction",
          "Calyx_Crimson_Preservation",
          "Calyx_Crimson_The_Hunt",
          "Calyx_Crimson_Abundance",
          "Calyx_Crimson_Erudition",
          "Calyx_Crimson_Harmony",
          "Calyx_Crimson_Nihility",
          "Stagnant_Shadow_Quanta",
          "Stagnant_Shadow_Gust",
          "Stagnant_Shadow_Fulmination",
          "Stagnant_Shadow_Blaze",
          "Stagnant_Shadow_Spike",
          "Stagnant_Shadow_Rime",
          "Stagnant_Shadow_Mirage",
          "Stagnant_Shadow_Icicle",
          "Stagnant_Shadow_Doom",
          "Stagnant_Shadow_Puppetry",
          "Stagnant_Shadow_Abomination",
          "Stagnant_Shadow_Celestial",
          "Cavern_of_Corrosion_Path_of_Gelid_Wind",
          "Cavern_of_Corrosion_Path_of_Jabbing_Punch",
          "Cavern_of_Corrosion_Path_of_Drifting",
          "Cavern_of_Corrosion_Path_of_Providence",
          "Cavern_of_Corrosion_Path_of_Holy_Hymn",
          "Cavern_of_Corrosion_Path_of_Conflagration",
          "Cavern_of_Corrosion_Path_of_Elixir_Seekers"
        ]
      },
      "NameAtDoubleCalyx": {
        "type": "select",
        "value": "Calyx_Golden_Treasures",
        "option": [
          "do_not_participate",
          "Calyx_Golden_Memories",
          "Calyx_Golden_Aether",
          "Calyx_Golden_Treasures",
          "Calyx_Crimson_Destruction",
          "Calyx_Crimson_Preservation",
          "Calyx_Crimson_The_Hunt",
          "Calyx_Crimson_Abundance",
          "Calyx_Crimson_Erudition",
          "Calyx_Crimson_Harmony",
          "Calyx_Crimson_Nihility"
        ]
      },
      "NameAtDoubleRelic": {
        "type": "select",
        "value": "Cavern_of_Corrosion_Path_of_Providence",
        "option": [
          "do_not_participate",
          "Cavern_of_Corrosion_Path_of_Gelid_Wind",
          "Cavern_of_Corrosion_Path_of_Jabbing_Punch",
          "Cavern_of_Corrosion_Path_of_Drifting",
          "Cavern_of_Corrosion_Path_of_Providence",
          "Cavern_of_Corrosion_Path_of_Holy_Hymn",
          "Cavern_of_Corrosion_Path_of_Conflagration",
          "Cavern_of_Corrosion_Path_of_Elixir_Seekers"
        ]
      },
      "Team": {
        "type": "select",
        "value": 1,
        "option": [
          1,
          2,
          3,
          4,
          5,
          6
        ]
      }
    },
    "DungeonDaily": {
      "CalyxGolden": {
        "type": "select",
        "value": "Calyx_Golden_Treasures",
        "option": [
          "do_not_achieve",
          "Calyx_Golden_Memories",
          "Calyx_Golden_Aether",
          "Calyx_Golden_Treasures"
        ]
      },
      "CalyxCrimson": {
        "type": "select",
        "value": "Calyx_Crimson_Erudition",
        "option": [
          "do_not_achieve",
          "Calyx_Crimson_Destruction",
          "Calyx_Crimson_Preservation",
          "Calyx_Crimson_The_Hunt",
          "Calyx_Crimson_Abundance",
          "Calyx_Crimson_Erudition",
          "Calyx_Crimson_Harmony",
          "Calyx_Crimson_Nihility"
        ]
      },
      "StagnantShadow": {
        "type": "select",
        "value": "Stagnant_Shadow_Quanta",
        "option": [
          "do_not_achieve",
          "Stagnant_Shadow_Quanta",
          "Stagnant_Shadow_Gust",
          "Stagnant_Shadow_Fulmination",
          "Stagnant_Shadow_Blaze",
          "Stagnant_Shadow_Spike",
          "Stagnant_Shadow_Rime",
          "Stagnant_Shadow_Mirage",
          "Stagnant_Shadow_Icicle",
          "Stagnant_Shadow_Doom",
          "Stagnant_Shadow_Puppetry",
          "Stagnant_Shadow_Abomination",
          "Stagnant_Shadow_Celestial"
        ]
      },
      "CavernOfCorrosion": {
        "type": "select",
        "value": "Cavern_of_Corrosion_Path_of_Providence",
        "option": [
          "do_not_achieve",
          "Cavern_of_Corrosion_Path_of_Gelid_Wind",
          "Cavern_of_Corrosion_Path_of_Jabbing_Punch",
          "Cavern_of_Corrosion_Path_of_Drifting",
          "Cavern_of_Corrosion_Path_of_Providence",
          "Cavern_of_Corrosion_Path_of_Holy_Hymn",
          "Cavern_of_Corrosion_Path_of_Conflagration",
          "Cavern_of_Corrosion_Path_of_Elixir_Seekers"
        ]
      }
    },
    "DungeonSupport": {
      "Use": {
        "type": "select",
        "value": "when_daily",
        "option": [
          "always_use",
          "when_daily",
          "do_not_use"
        ]
      },
      "Character": {
        "type": "select",
        "value": "FirstCharacter",
        "option": [
          "FirstCharacter",
          "Arlan",
          "Asta",
          "Bailu",
          "Blade",
          "Bronya",
          "Clara",
          "DanHeng",
          "DanHengImbibitorLunae",
          "Gepard",
          "Herta",
          "Himeko",
          "Hook",
          "JingYuan",
          "Kafka",
          "Luka",
          "Luocha",
          "March7th",
          "Natasha",
          "Pela",
          "Qingque",
          "Sampo",
          "Seele",
          "Serval",
          "SilverWolf",
          "Sushang",
          "Tingyun",
          "TrailblazerDestruction",
          "TrailblazerPreservation",
          "Welt",
          "Yanqing",
          "Yukong"
        ]
      }
    },
    "DungeonStorage": {
      "TrailblazePower": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredTrailblazePower",
        "order": 1,
        "color": "#eb8efe"
      },
      "DungeonDouble": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredDungeonDouble"
      },
      "SimulatedUniverse": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredSimulatedUniverse",
        "order": 6,
        "color": "#8fb5fe"
      }
    }
  },
  "DailyQuest": {
    "Scheduler": {
      "Enable": {
        "type": "checkbox",
        "value": false,
        "option": [
          true,
          false
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "DailyQuest",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    },
    "AchievableQuest": {
      "Complete_1_Daily_Mission": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Clear_Calyx_Golden_1_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Complete_Calyx_Crimson_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Clear_Stagnant_Shadow_1_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Clear_Cavern_of_Corrosion_1_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Inflict_Weakness_Break_5_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Defeat_a_total_of_20_enemies": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Use_Technique_2_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Go_on_assignment_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Take_1_photo": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Destroy_3_destructible_objects": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Complete_Forgotten_Hall_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Complete_Echo_of_War_1_times": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Complete_1_stage_in_Simulated_Universe_Any_world": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Obtain_victory_in_combat_with_support_characters_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Use_an_Ultimate_to_deal_the_final_blow_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Level_up_any_character_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Level_up_any_Light_Cone_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Level_up_any_Relic_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Salvage_any_Relic": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Synthesize_Consumable_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Synthesize_material_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      },
      "Use_Consumables_1_time": {
        "type": "state",
        "value": "achievable",
        "option": [
          "achievable",
          "not_set",
          "not_supported"
        ],
        "option_bold": [
          "achievable"
        ],
        "option_light": [
          "not_supported"
        ]
      }
    },
    "DailyStorage": {
      "DailyActivity": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredDailyActivity",
        "order": 2,
        "color": "#ffcf70"
      },
      "DailyQuest": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredDaily"
      }
    }
  },
  "BattlePass": {
    "Scheduler": {
      "Enable": {
        "type": "checkbox",
        "value": false,
        "option": [
          true,
          false
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "BattlePass",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    },
    "BattlePassStorage": {
      "BattlePassLevel": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredBattlePassLevel",
        "order": 5,
        "color": "#cbe45b"
      },
      "BattlePassTodayQuest": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredBattlePassTodayQuest"
      }
    }
  },
  "Assignment": {
    "Scheduler": {
      "Enable": {
        "type": "checkbox",
        "value": false,
        "option": [
          true,
          false
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "Assignment",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    },
    "Assignment": {
      "Name_1": {
        "type": "select",
        "value": "Nameless_Land_Nameless_People",
        "option": [
          "Nine_Billion_Names",
          "Destruction_of_the_Destroyer",
          "Winter_Soldiers",
          "Born_to_Obey",
          "Root_Out_the_Turpitude",
          "Fire_Lord_Inflames_Blades_of_War",
          "Nameless_Land_Nameless_People",
          "Akashic_Records",
          "The_Invisible_Hand",
          "Abandoned_and_Insulted",
          "Spring_of_Life",
          "The_Land_of_Gold",
          "The_Blossom_in_the_Storm",
          "Legend_of_the_Puppet_Master",
          "The_Wages_of_Humanity"
        ]
      },
      "Name_2": {
        "type": "select",
        "value": "Akashic_Records",
        "option": [
          "Nine_Billion_Names",
          "Destruction_of_the_Destroyer",
          "Winter_Soldiers",
          "Born_to_Obey",
          "Root_Out_the_Turpitude",
          "Fire_Lord_Inflames_Blades_of_War",
          "Nameless_Land_Nameless_People",
          "Akashic_Records",
          "The_Invisible_Hand",
          "Abandoned_and_Insulted",
          "Spring_of_Life",
          "The_Land_of_Gold",
          "The_Blossom_in_the_Storm",
          "Legend_of_the_Puppet_Master",
          "The_Wages_of_Humanity"
        ]
      },
      "Name_3": {
        "type": "select",
        "value": "The_Invisible_Hand",
        "option": [
          "Nine_Billion_Names",
          "Destruction_of_the_Destroyer",
          "Winter_Soldiers",
          "Born_to_Obey",
          "Root_Out_the_Turpitude",
          "Fire_Lord_Inflames_Blades_of_War",
          "Nameless_Land_Nameless_People",
          "Akashic_Records",
          "The_Invisible_Hand",
          "Abandoned_and_Insulted",
          "Spring_of_Life",
          "The_Land_of_Gold",
          "The_Blossom_in_the_Storm",
          "Legend_of_the_Puppet_Master",
          "The_Wages_of_Humanity"
        ]
      },
      "Name_4": {
        "type": "select",
        "value": "Nine_Billion_Names",
        "option": [
          "Nine_Billion_Names",
          "Destruction_of_the_Destroyer",
          "Winter_Soldiers",
          "Born_to_Obey",
          "Root_Out_the_Turpitude",
          "Fire_Lord_Inflames_Blades_of_War",
          "Nameless_Land_Nameless_People",
          "Akashic_Records",
          "The_Invisible_Hand",
          "Abandoned_and_Insulted",
          "Spring_of_Life",
          "The_Land_of_Gold",
          "The_Blossom_in_the_Storm",
          "Legend_of_the_Puppet_Master",
          "The_Wages_of_Humanity"
        ]
      },
      "Duration": {
        "type": "select",
        "value": 20,
        "option": [
          4,
          8,
          12,
          20
        ]
      },
      "Assignment": {
        "type": "stored",
        "value": {},
        "display": "hide",
        "stored": "StoredAssignment",
        "order": 3,
        "color": "#79dbc4"
      }
    }
  },
  "Rogue": {
    "Scheduler": {
      "Enable": {
        "type": "checkbox",
        "value": false,
        "option": [
          true,
          false
        ]
      },
      "NextRun": {
        "type": "datetime",
        "value": "2020-01-01 00:00:00",
        "validate": "datetime"
      },
      "Command": {
        "type": "input",
        "value": "Rogue",
        "display": "hide"
      },
      "ServerUpdate": {
        "type": "input",
        "value": "04:00",
        "display": "hide"
      }
    },
    "RoguePath": {
      "Path": {
        "type": "select",
        "value": "The_Hunt",
        "option": [
          "Preservation",
          "Remembrance",
          "Nihility",
          "Abundance",
          "The_Hunt",
          "Destruction",
          "Elation"
        ]
      },
      "Bonus": {
        "type": "select",
        "value": "Blessing Cosmos",
        "option": [
          "Blessing Cosmos",
          "Miracle Cosmos",
          "Fragmented Cosmos"
        ]
      },
      "PresetResonanceFilter": {
        "type": "select",
        "value": "preset-1",
        "option": [
          "preset-1",
          "custom"
        ]
      },
      "ResonanceSelectionStrategy": {
        "type": "select",
        "value": "follow-presets",
        "option": [
          "follow-presets",
          "unrecorded-first",
          "before-random"
        ]
      },
      "CustomResonanceFilter": {
        "type": "textarea",
        "value": "回响构音：均晶转变 > 回响构音：零维强化\n> 回响构音：第二次初恋 > 回响构音：体验的富翁\n> 回响构音：局外人 > 回响构音：怀疑的四重根\n> 回响构音：诸法无我 > 回响构音：诸行无常\n> 回响构音：射不主皮 > 回响构音：柘弓危矢\n> 回响构音：激变变星 > 回响构音：极端氦闪\n> 回响构音：末日狂欢 > 回响构音：树苗长高舞"
      }
    },
    "RogueBlessing": {
      "PresetBlessingFilter": {
        "type": "select",
        "value": "preset-1",
        "option": [
          "preset-1",
          "custom"
        ]
      },
      "BlessingSelectionStrategy": {
        "type": "select",
        "value": "follow-presets",
        "option": [
          "follow-presets",
          "unrecorded-first",
          "before-random"
        ]
      },
      "CustomBlessingFilter": {
        "type": "textarea",
        "value": "巡猎-3 > 《冠军晚餐·猫的摇篮》 > 丰饶众生，一法界心 > 毁灭-3 \n> 火堆外的夜 > 巡猎-2 > 毁灭-2 > 巡猎 > reset > random"
      }
    },
    "RogueCurio": {
      "PresetCurioFilter": {
        "type": "select",
        "value": "preset-1",
        "option": [
          "preset-1",
          "custom"
        ]
      },
      "CurioSelectionStrategy": {
        "type": "select",
        "value": "follow-presets",
        "option": [
          "follow-presets",
          "unrecorded-first",
          "before-random"
        ]
      },
      "CustomCurioFilter": {
        "type": "textarea",
        "value": "博士之袍 > 福灵胶 > 分裂金币 > 信仰债券 > 换境桂冠 > 俱乐部券 > 碎星芳饵 > random"
      }
    }
  }
}
```

`module/config/argument/argument.yaml`:

```yaml
# --------------------
# Define arguments.
# --------------------

# ==================== Alas ====================

Scheduler:
  Enable:
    type: checkbox
    value: false
    option: [ true, false ]
  NextRun: 2020-01-01 00:00:00
  Command: Alas
  ServerUpdate:
    value: 04:00
    display: hide
Emulator:
  Serial:
    value: auto
    valuetype: str
  PackageName:
    value: auto
    option: [ auto, ]
  ScreenshotMethod:
    value: auto
    option: [ auto, ADB, ADB_nc, uiautomator2, aScreenCap, aScreenCap_nc, DroidCast, DroidCast_raw, scrcpy ]
  ControlMethod:
    value: MaaTouch
    option: [ minitouch, MaaTouch ]
  AdbRestart: false
EmulatorInfo:
  Emulator:
    value: auto
    option: [
      auto,
      NoxPlayer,
      NoxPlayer64,
      BlueStacks4,
      BlueStacks5,
      BlueStacks4HyperV,
      BlueStacks5HyperV,
      LDPlayer3,
      LDPlayer4,
      LDPlayer9,
      MuMuPlayer,
      MuMuPlayerX,
      MuMuPlayer12,
      MEmuPlayer,
    ]
  name:
    value: null
    type: textarea
  path:
    value: null
    type: textarea
Error:
  Restart:
    value: game
    option: [ game, game_emulator ]
  SaveError: true
  ScreenshotLength: 1
  OnePushConfig:
    type: textarea
    mode: yaml
    value: 'provider: null'
Optimization:
  ScreenshotInterval: 0.3
  CombatScreenshotInterval: 1.0
  WhenTaskQueueEmpty:
    value: goto_main
    option: [ stay_there, goto_main, close_game ]

# ==================== Daily ====================

Dungeon:
  Name:
    # Dungeon names will be injected in config updater
    value: Calyx_Golden_Treasures
    option: [ ]
  NameAtDoubleCalyx:
    value: Calyx_Golden_Treasures
    option: [ do_not_participate, ]
  NameAtDoubleRelic:
    value: Cavern_of_Corrosion_Path_of_Providence
    option: [ do_not_participate, ]
  Team:
    value: 1
    option: [ 1, 2, 3, 4, 5, 6 ]
DungeonDaily:
  # Dungeon names will be injected in config updater
  CalyxGolden:
    value: Calyx_Golden_Treasures
    option: [ do_not_achieve, ]
  CalyxCrimson:
    value: Calyx_Crimson_Erudition
    option: [ do_not_achieve, ]
  StagnantShadow:
    value: Stagnant_Shadow_Quanta
    option: [ do_not_achieve, ]
  CavernOfCorrosion:
    value: Cavern_of_Corrosion_Path_of_Providence
    option: [ do_not_achieve, ]
DungeonSupport:
  Use:
    value: when_daily
    option: [ always_use, when_daily, do_not_use ]
  Character:
    # Options will be injected in config updater
    value: FirstCharacter
    option: [ FirstCharacter, ]
DungeonStorage:
  TrailblazePower:
    stored: StoredTrailblazePower
    order: 1
    color: "#eb8efe"
  DungeonDouble:
    stored: StoredDungeonDouble
  SimulatedUniverse:
    stored: StoredSimulatedUniverse
    order: 6
    color: "#8fb5fe"

AchievableQuest:
# Quests will be injected in config updater
#  Complete_1_Daily_Mission:
#    type: state
#    value: achievable
#    option: [ achievable, not_set, not_supported ]
#    option_bold: [ achievable, ]
DailyStorage:
  DailyActivity:
    stored: StoredDailyActivity
    order: 2
    color: "#ffcf70"
  DailyQuest:
    stored: StoredDaily

BattlePassStorage:
  BattlePassLevel:
    stored: StoredBattlePassLevel
    order: 5
    color: "#cbe45b"
  BattlePassTodayQuest:
    stored: StoredBattlePassTodayQuest

Assignment:
  # Options in Name_x will be injected in config updater
  Name_1:
    value: Nameless_Land_Nameless_People
    option: [ Nameless_Land_Nameless_People, ]
  Name_2:
    value: Akashic_Records
    option: [ Nameless_Land_Nameless_People, ]
  Name_3:
    value: The_Invisible_Hand
    option: [ Nameless_Land_Nameless_People, ]
  Name_4:
    value: Nine_Billion_Names
    option: [ Nameless_Land_Nameless_People, ]
  Duration:
    value: 20
    option: [ 4, 8, 12, 20 ]
  Assignment:
    stored: StoredAssignment
    order: 3
    color: "#79dbc4"

# ==================== Rogue ====================

RoguePath:
  Path:
    value: The_Hunt
    option: [ Preservation, Remembrance, Nihility, Abundance, The_Hunt, Destruction, Elation ]
  Bonus:
    value: Blessing Cosmos
    option: [ Blessing Cosmos, Miracle Cosmos, Fragmented Cosmos ]
  PresetResonanceFilter:
    value: preset-1
    option: [ preset-1, custom ]
  ResonanceSelectionStrategy:
    value: follow-presets
    option: [ follow-presets, unrecorded-first, before-random ]
  CustomResonanceFilter: |-
    回响构音：均晶转变 > 回响构音：零维强化
    > 回响构音：第二次初恋 > 回响构音：体验的富翁
    > 回响构音：局外人 > 回响构音：怀疑的四重根
    > 回响构音：诸法无我 > 回响构音：诸行无常
    > 回响构音：射不主皮 > 回响构音：柘弓危矢
    > 回响构音：激变变星 > 回响构音：极端氦闪
    > 回响构音：末日狂欢 > 回响构音：树苗长高舞

RogueBlessing:
  PresetBlessingFilter:
    value: preset-1
    option: [ preset-1, custom ]
  BlessingSelectionStrategy:
    value: follow-presets
    option: [ follow-presets, unrecorded-first, before-random ]
  CustomBlessingFilter: |-
    巡猎-3 > 《冠军晚餐·猫的摇篮》 > 丰饶众生，一法界心 > 毁灭-3 
    > 火堆外的夜 > 巡猎-2 > 毁灭-2 > 巡猎 > reset > random

RogueCurio:
  PresetCurioFilter:
    value: preset-1
    option: [ preset-1, custom ]
  CurioSelectionStrategy:
    value: follow-presets
    option: [ follow-presets, unrecorded-first, before-random ]
  CustomCurioFilter: |-
    博士之袍 > 福灵胶 > 分裂金币 > 信仰债券 > 换境桂冠 > 俱乐部券 > 碎星芳饵 > random

```

`module/config/argument/default.yaml`:

```yaml
# --------------------
# Define default values
# --------------------

# ==================== Alas ====================


# ==================== Farm ====================


# ==================== Daily ====================


# ==================== Tools ====================

```

`module/config/argument/gui.yaml`:

```yaml
# Translations web gui
# This will insert to `config/i18n/{lang}.json`, under key `Gui`

Aside:
  Install:
  Home:
  Develop:
  Performance:
  Setting:
  AddAlas:

Button:
  Start:
  Stop:
  ScrollON:
  ScrollOFF:
  ClearLog:
  Setting:
  CheckUpdate:
  ClickToUpdate:
  RetryUpdate:
  CancelUpdate:

Toast:
  DisableTranslateMode:
  ConfigSaved:
  AlasIsRunning:
  ClickToUpdate:

Status:
  Running:
  Inactive:
  Warning:
  Updating:

MenuAlas:
  Overview:
  Log:

MenuDevelop:
  HomePage:
  Translate:
  Update:
  Remote:
  Utils:

Overview:
  Scheduler:
  Log:
  Running:
  Pending:
  Waiting:
  NoTask:

Dashboard:
  # From lang.readable_time()
  NoData:
  TimeError:
  JustNow:
  MinutesAgo:
  HoursAgo:
  DaysAgo:
  LongTimeAgo:

AddAlas:
  PopupTitle:
  NewName:
  CopyFrom:
  Confirm:
  FileExist:
  InvalidChar:
  InvalidPrefixTemplate:

Update:
  UpToDate:
  HaveUpdate:
  UpdateStart:
  UpdateWait:
  UpdateRun:
  UpdateSuccess:
  UpdateFailed:
  UpdateChecking:
  UpdateCancel:
  UpdateFinish:
  Local:
  Upstream:
  Author:
  Time:
  Message:
  DisabledWarn:
  DetailedHistory:

Remote:
  Running:
  NotRunning:
  NotEnable:
  EntryPoint:
  ConfigureHint:
  SSHNotInstall:

Text:
  InvalidFeedBack:
  Clear:
```

`module/config/argument/menu.json`:

```json
{
  "Alas": {
    "menu": "list",
    "page": "setting",
    "tasks": [
      "Alas",
      "Restart"
    ]
  },
  "Daily": {
    "menu": "list",
    "page": "setting",
    "tasks": [
      "Dungeon",
      "DailyQuest",
      "BattlePass",
      "Assignment"
    ]
  }
}
```

`module/config/argument/override.yaml`:

```yaml
# --------------------
# Define non-modifiable values
# --------------------


# ==================== Alas ====================

Alas:
  Emulator:
    ScreenshotMethod: scrcpy
    ControlMethod: MaaTouch
  Optimization:
    ScreenshotInterval: 0.2
    CombatScreenshotInterval: 1.0
Restart:
  Scheduler:
    Enable:
      type: state
      value: true
      option: [ true, ]
      option_bold: [ true, ]
    ServerUpdate: 04:00

# ==================== Farm ====================


# ==================== Daily ====================


# ==================== Tools ====================

```

`module/config/argument/stored.json`:

```json
{
  "TrailblazePower": {
    "name": "TrailblazePower",
    "path": "Dungeon.DungeonStorage.TrailblazePower",
    "i18n": "DungeonStorage.TrailblazePower.name",
    "stored": "StoredTrailblazePower",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "total": 240,
      "value": 0
    },
    "order": 1,
    "color": "#eb8efe"
  },
  "DailyActivity": {
    "name": "DailyActivity",
    "path": "DailyQuest.DailyStorage.DailyActivity",
    "i18n": "DailyStorage.DailyActivity.name",
    "stored": "StoredDailyActivity",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "total": 500,
      "value": 0
    },
    "order": 2,
    "color": "#ffcf70"
  },
  "Assignment": {
    "name": "Assignment",
    "path": "Assignment.Assignment.Assignment",
    "i18n": "Assignment.Assignment.name",
    "stored": "StoredAssignment",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "total": 0,
      "value": 0
    },
    "order": 3,
    "color": "#79dbc4"
  },
  "BattlePassLevel": {
    "name": "BattlePassLevel",
    "path": "BattlePass.BattlePassStorage.BattlePassLevel",
    "i18n": "BattlePassStorage.BattlePassLevel.name",
    "stored": "StoredBattlePassLevel",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "total": 50,
      "value": 0
    },
    "order": 5,
    "color": "#cbe45b"
  },
  "SimulatedUniverse": {
    "name": "SimulatedUniverse",
    "path": "Dungeon.DungeonStorage.SimulatedUniverse",
    "i18n": "DungeonStorage.SimulatedUniverse.name",
    "stored": "StoredSimulatedUniverse",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "total": 0,
      "value": 0
    },
    "order": 6,
    "color": "#8fb5fe"
  },
  "DungeonDouble": {
    "name": "DungeonDouble",
    "path": "Dungeon.DungeonStorage.DungeonDouble",
    "i18n": "DungeonStorage.DungeonDouble.name",
    "stored": "StoredDungeonDouble",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "calyx": 0,
      "relic": 0
    },
    "order": 0,
    "color": "#777777"
  },
  "DailyQuest": {
    "name": "DailyQuest",
    "path": "DailyQuest.DailyStorage.DailyQuest",
    "i18n": "DailyStorage.DailyQuest.name",
    "stored": "StoredDaily",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "quest1": "",
      "quest2": "",
      "quest3": "",
      "quest4": "",
      "quest5": "",
      "quest6": "",
      "total": 6,
      "value": 0
    },
    "order": 0,
    "color": "#777777"
  },
  "BattlePassTodayQuest": {
    "name": "BattlePassTodayQuest",
    "path": "BattlePass.BattlePassStorage.BattlePassTodayQuest",
    "i18n": "BattlePassStorage.BattlePassTodayQuest.name",
    "stored": "StoredBattlePassTodayQuest",
    "attrs": {
      "time": "2020-01-01 00:00:00",
      "quest1": "",
      "quest2": "",
      "quest3": "",
      "quest4": "",
      "total": 4,
      "value": 0
    },
    "order": 0,
    "color": "#777777"
  }
}
```

`module/config/argument/task.yaml`:

```yaml
# --------------------
# Define argument group of tasks.
# --------------------

# ==================== Alas ====================

Alas:
  menu: 'list'
  page: 'setting'
  tasks:
    Alas:
      - Emulator
      - EmulatorInfo
      - Error
      - Optimization
    Restart:
      - Scheduler

# ==================== Daily ====================

Daily:
  menu: 'list'
  page: 'setting'
  tasks:
    Dungeon:
      - Scheduler
      - Dungeon
      - DungeonDaily
      - DungeonSupport
      - DungeonStorage
    DailyQuest:
      - Scheduler
      - AchievableQuest
      - DailyStorage
    BattlePass:
      - Scheduler
      - BattlePassStorage
    Assignment:
      - Scheduler
      - Assignment

# ==================== Rogue ====================

Rogue:
  menu: 'list'
  page: 'setting'
  tasks:
    Rogue:
      - Scheduler
      - RoguePath
      - RogueBlessing
      - RogueCurio

```

`module/config/atomicwrites.py`:

```py
"""
Copy-pasted from
https://github.com/untitaker/python-atomicwrites
"""
import contextlib
import io
import os
import sys
import tempfile

try:
    import fcntl
except ImportError:
    fcntl = None

# `fspath` was added in Python 3.6
try:
    from os import fspath
except ImportError:
    fspath = None

__version__ = '1.4.1'

PY2 = sys.version_info[0] == 2

text_type = unicode if PY2 else str  # noqa


def _path_to_unicode(x):
    if not isinstance(x, text_type):
        return x.decode(sys.getfilesystemencoding())
    return x


DEFAULT_MODE = "wb" if PY2 else "w"

_proper_fsync = os.fsync

if sys.platform != 'win32':
    if hasattr(fcntl, 'F_FULLFSYNC'):
        def _proper_fsync(fd):
            # https://lists.apple.com/archives/darwin-dev/2005/Feb/msg00072.html
            # https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/fsync.2.html
            # https://github.com/untitaker/python-atomicwrites/issues/6
            fcntl.fcntl(fd, fcntl.F_FULLFSYNC)


    def _sync_directory(directory):
        # Ensure that filenames are written to disk
        fd = os.open(directory, 0)
        try:
            _proper_fsync(fd)
        finally:
            os.close(fd)


    def _replace_atomic(src, dst):
        os.rename(src, dst)
        _sync_directory(os.path.normpath(os.path.dirname(dst)))


    def _move_atomic(src, dst):
        os.link(src, dst)
        os.unlink(src)

        src_dir = os.path.normpath(os.path.dirname(src))
        dst_dir = os.path.normpath(os.path.dirname(dst))
        _sync_directory(dst_dir)
        if src_dir != dst_dir:
            _sync_directory(src_dir)
else:
    from ctypes import windll, WinError

    _MOVEFILE_REPLACE_EXISTING = 0x1
    _MOVEFILE_WRITE_THROUGH = 0x8
    _windows_default_flags = _MOVEFILE_WRITE_THROUGH


    def _handle_errors(rv):
        if not rv:
            raise WinError()


    def _replace_atomic(src, dst):
        _handle_errors(windll.kernel32.MoveFileExW(
            _path_to_unicode(src), _path_to_unicode(dst),
            _windows_default_flags | _MOVEFILE_REPLACE_EXISTING
        ))


    def _move_atomic(src, dst):
        _handle_errors(windll.kernel32.MoveFileExW(
            _path_to_unicode(src), _path_to_unicode(dst),
            _windows_default_flags
        ))


def replace_atomic(src, dst):
    '''
    Move ``src`` to ``dst``. If ``dst`` exists, it will be silently
    overwritten.

    Both paths must reside on the same filesystem for the operation to be
    atomic.
    '''
    return _replace_atomic(src, dst)


def move_atomic(src, dst):
    '''
    Move ``src`` to ``dst``. There might a timewindow where both filesystem
    entries exist. If ``dst`` already exists, :py:exc:`FileExistsError` will be
    raised.

    Both paths must reside on the same filesystem for the operation to be
    atomic.
    '''
    return _move_atomic(src, dst)


class AtomicWriter(object):
    '''
    A helper class for performing atomic writes. Usage::

        with AtomicWriter(path).open() as f:
            f.write(...)

    :param path: The destination filepath. May or may not exist.
    :param mode: The filemode for the temporary file. This defaults to `wb` in
        Python 2 and `w` in Python 3.
    :param overwrite: If set to false, an error is raised if ``path`` exists.
        Errors are only raised after the file has been written to.  Either way,
        the operation is atomic.
    :param open_kwargs: Keyword-arguments to pass to the underlying
        :py:func:`open` call. This can be used to set the encoding when opening
        files in text-mode.

    If you need further control over the exact behavior, you are encouraged to
    subclass.
    '''

    def __init__(self, path, mode=DEFAULT_MODE, overwrite=False,
                 **open_kwargs):
        if 'a' in mode:
            raise ValueError(
                'Appending to an existing file is not supported, because that '
                'would involve an expensive `copy`-operation to a temporary '
                'file. Open the file in normal `w`-mode and copy explicitly '
                'if that\'s what you\'re after.'
            )
        if 'x' in mode:
            raise ValueError('Use the `overwrite`-parameter instead.')
        if 'w' not in mode:
            raise ValueError('AtomicWriters can only be written to.')

        # Attempt to convert `path` to `str` or `bytes`
        if fspath is not None:
            path = fspath(path)

        self._path = path
        self._mode = mode
        self._overwrite = overwrite
        self._open_kwargs = open_kwargs

    def open(self):
        '''
        Open the temporary file.
        '''
        return self._open(self.get_fileobject)

    @contextlib.contextmanager
    def _open(self, get_fileobject):
        f = None  # make sure f exists even if get_fileobject() fails
        try:
            success = False
            with get_fileobject(**self._open_kwargs) as f:
                yield f
                self.sync(f)
            self.commit(f)
            success = True
        finally:
            if not success:
                try:
                    self.rollback(f)
                except Exception:
                    pass

    def get_fileobject(self, suffix="", prefix=tempfile.gettempprefix(),
                       dir=None, **kwargs):
        '''Return the temporary file to use.'''
        if dir is None:
            dir = os.path.normpath(os.path.dirname(self._path))
        descriptor, name = tempfile.mkstemp(suffix=suffix, prefix=prefix,
                                            dir=dir)
        # io.open() will take either the descriptor or the name, but we need
        # the name later for commit()/replace_atomic() and couldn't find a way
        # to get the filename from the descriptor.
        os.close(descriptor)
        kwargs['mode'] = self._mode
        kwargs['file'] = name
        return io.open(**kwargs)

    def sync(self, f):
        '''responsible for clearing as many file caches as possible before
        commit'''
        f.flush()
        _proper_fsync(f.fileno())

    def commit(self, f):
        '''Move the temporary file to the target location.'''
        if self._overwrite:
            replace_atomic(f.name, self._path)
        else:
            move_atomic(f.name, self._path)

    def rollback(self, f):
        '''Clean up all temporary resources.'''
        os.unlink(f.name)


def atomic_write(path, writer_cls=AtomicWriter, **cls_kwargs):
    '''
    Simple atomic writes. This wraps :py:class:`AtomicWriter`::

        with atomic_write(path) as f:
            f.write(...)

    :param path: The target path to write to.
    :param writer_cls: The writer class to use. This parameter is useful if you
        subclassed :py:class:`AtomicWriter` to change some behavior and want to
        use that new subclass.

    Additional keyword arguments are passed to the writer class. See
    :py:class:`AtomicWriter`.
    '''
    return writer_cls(path, **cls_kwargs).open()

```

`module/config/config.py`:

```py
import copy
import datetime
import operator
import threading

import pywebio

from module.base.decorator import cached_property, del_cached_property
from module.base.filter import Filter
from module.config.config_generated import GeneratedConfig
from module.config.config_manual import ManualConfig, OutputConfig
from module.config.config_updater import ConfigUpdater
from module.config.stored.classes import iter_attribute
from module.config.stored.stored_generated import StoredGenerated
from module.config.utils import *
from module.config.watcher import ConfigWatcher
from module.exception import RequestHumanTakeover, ScriptError
from module.logger import logger


class TaskEnd(Exception):
    pass


class Function:
    def __init__(self, data):
        self.enable = deep_get(data, keys="Scheduler.Enable", default=False)
        self.command = deep_get(data, keys="Scheduler.Command", default="Unknown")
        self.next_run = deep_get(data, keys="Scheduler.NextRun", default=DEFAULT_TIME)

    def __str__(self):
        enable = "Enable" if self.enable else "Disable"
        return f"{self.command} ({enable}, {str(self.next_run)})"

    __repr__ = __str__

    def __eq__(self, other):
        if not isinstance(other, Function):
            return False

        if self.command == other.command and self.next_run == other.next_run:
            return True
        else:
            return False


def name_to_function(name):
    """
    Args:
        name (str):

    Returns:
        Function:
    """
    function = Function({})
    function.command = name
    function.enable = True
    return function


class AzurLaneConfig(ConfigUpdater, ManualConfig, GeneratedConfig, ConfigWatcher):
    stop_event: threading.Event = None
    bound = {}

    # Class property
    is_hoarding_task = True

    def __setattr__(self, key, value):
        if key in self.bound:
            path = self.bound[key]
            self.modified[path] = value
            if self.auto_update:
                self.update()
        else:
            super().__setattr__(key, value)

    def __init__(self, config_name, task=None):
        logger.attr("Lang", self.LANG)
        # This will read ./config/<config_name>.json
        self.config_name = config_name
        # Raw json data in yaml file.
        self.data = {}
        # Modified arguments. Key: Argument path in yaml file. Value: Modified value.
        # All variable modifications will be record here and saved in method `save()`.
        self.modified = {}
        # Key: Argument name in GeneratedConfig. Value: Path in `data`.
        self.bound = {}
        # If write after every variable modification.
        self.auto_update = True
        # Force override variables
        # Key: Argument name in GeneratedConfig. Value: Modified value.
        self.overridden = {}
        # Scheduler queue, will be updated in `get_next_task()`, list of Function objects
        # pending_task: Run time has been reached, but haven't been run due to task scheduling.
        # waiting_task: Run time haven't been reached, wait needed.
        self.pending_task = []
        self.waiting_task = []
        # Task to run and bind.
        # Task means the name of the function to run in AzurLaneAutoScript class.
        self.task: Function
        # Template config is used for dev tools
        self.is_template_config = config_name.startswith("template")

        if self.is_template_config:
            # For dev tools
            logger.info("Using template config, which is read only")
            self.auto_update = False
            self.task = name_to_function("template")
        else:
            self.load()
            if task is None:
                # Bind `Alas` by default which includes emulator settings.
                task = name_to_function("Alas")
            else:
                # Bind a specific task for debug purpose.
                task = name_to_function(task)
            self.bind(task)
            self.task = task
            self.save()

    def load(self):
        self.data = self.read_file(self.config_name)
        self.config_override()

        for path, value in self.modified.items():
            deep_set(self.data, keys=path, value=value)

    def bind(self, func, func_list=None):
        """
        Args:
            func (str, Function): Function to run
            func_list (set): Set of tasks to be bound
        """
        if func_list is None:
            func_list = ["Alas"]
        if isinstance(func, Function):
            func = func.command
        func_list.append(func)
        logger.info(f"Bind task {func_list}")

        # Bind arguments
        visited = set()
        self.bound.clear()
        for func in func_list:
            func_data = self.data.get(func, {})
            for group, group_data in func_data.items():
                for arg, value in group_data.items():
                    path = f"{group}.{arg}"
                    if path in visited:
                        continue
                    arg = path_to_arg(path)
                    super().__setattr__(arg, value)
                    self.bound[arg] = f"{func}.{path}"
                    visited.add(path)

        # Override arguments
        for arg, value in self.overridden.items():
            super().__setattr__(arg, value)

    @property
    def hoarding(self):
        minutes = int(
            deep_get(
                self.data, keys="Alas.Optimization.TaskHoardingDuration", default=0
            )
        )
        return timedelta(minutes=max(minutes, 0))

    @property
    def close_game(self):
        return deep_get(
            self.data, keys="Alas.Optimization.CloseGameDuringWait", default=False
        )

    @cached_property
    def stored(self) -> StoredGenerated:
        stored = StoredGenerated()
        # Bind config
        for _, value in iter_attribute(stored):
            value._bind(self)
            del_cached_property(value, '_stored')
        return stored

    def get_next_task(self):
        """
        Calculate tasks, set pending_task and waiting_task
        """
        pending = []
        waiting = []
        error = []
        now = datetime.now()
        if AzurLaneConfig.is_hoarding_task:
            now -= self.hoarding
        for func in self.data.values():
            func = Function(func)
            if not func.enable:
                continue
            if not isinstance(func.next_run, datetime):
                error.append(func)
            elif func.next_run < now:
                pending.append(func)
            else:
                waiting.append(func)

        f = Filter(regex=r"(.*)", attr=["command"])
        f.load(self.SCHEDULER_PRIORITY)
        if pending:
            pending = f.apply(pending)
        if waiting:
            waiting = f.apply(waiting)
            waiting = sorted(waiting, key=operator.attrgetter("next_run"))
        if error:
            pending = error + pending

        self.pending_task = pending
        self.waiting_task = waiting

    def get_next(self):
        """
        Returns:
            Function: Command to run
        """
        self.get_next_task()

        if self.pending_task:
            AzurLaneConfig.is_hoarding_task = False
            logger.info(f"Pending tasks: {[f.command for f in self.pending_task]}")
            task = self.pending_task[0]
            logger.attr("Task", task)
            return task
        else:
            AzurLaneConfig.is_hoarding_task = True

        if self.waiting_task:
            logger.info("No task pending")
            task = copy.deepcopy(self.waiting_task[0])
            task.next_run = (task.next_run + self.hoarding).replace(microsecond=0)
            logger.attr("Task", task)
            return task
        else:
            logger.critical("No task waiting or pending")
            logger.critical("Please enable at least one task")
            raise RequestHumanTakeover

    def save(self, mod_name='alas'):
        if not self.modified:
            return False

        for path, value in self.modified.items():
            deep_set(self.data, keys=path, value=value)

        logger.info(
            f"Save config {filepath_config(self.config_name, mod_name)}, {dict_to_kv(self.modified)}"
        )
        # Don't use self.modified = {}, that will create a new object.
        self.modified.clear()
        del_cached_property(self, 'stored')
        self.write_file(self.config_name, data=self.data)

    def update(self):
        self.load()
        self.config_override()
        self.bind(self.task)
        self.save()

    def config_override(self):
        now = datetime.now().replace(microsecond=0)
        limited = set()

        def limit_next_run(tasks, limit):
            for task in tasks:
                if task in limited:
                    continue
                limited.add(task)
                next_run = deep_get(
                    self.data, keys=f"{task}.Scheduler.NextRun", default=None
                )
                if isinstance(next_run, datetime) and next_run > limit:
                    deep_set(self.data, keys=f"{task}.Scheduler.NextRun", value=now)

        limit_next_run(['BattlePass'], limit=now + timedelta(days=31, seconds=-1))
        limit_next_run(self.args.keys(), limit=now + timedelta(hours=24, seconds=-1))

    def override(self, **kwargs):
        """
        Override anything you want.
        Variables stall remain overridden even config is reloaded from yaml file.
        Note that this method is irreversible.
        """
        for arg, value in kwargs.items():
            self.overridden[arg] = value
            super().__setattr__(arg, value)

    def set_record(self, **kwargs):
        """
        Args:
            **kwargs: For example, `Emotion1_Value=150`
                will set `Emotion1_Value=150` and `Emotion1_Record=now()`
        """
        with self.multi_set():
            for arg, value in kwargs.items():
                record = arg.replace("Value", "Record")
                self.__setattr__(arg, value)
                self.__setattr__(record, datetime.now().replace(microsecond=0))

    def multi_set(self):
        """
        Set multiple arguments but save once.

        Examples:
            with self.config.multi_set():
                self.config.foo1 = 1
                self.config.foo2 = 2
        """
        return MultiSetWrapper(main=self)

    def cross_get(self, keys, default=None):
        """
        Get configs from other tasks.

        Args:
            keys (str, list[str]): Such as `{task}.Scheduler.Enable`
            default:

        Returns:
            Any:
        """
        return deep_get(self.data, keys=keys, default=default)

    def cross_set(self, keys, value):
        """
        Set configs to other tasks.

        Args:
            keys (str, list[str]): Such as `{task}.Scheduler.Enable`
            value (Any):

        Returns:
            Any:
        """
        self.modified[keys] = value
        if self.auto_update:
            self.update()

    def task_delay(self, success=None, server_update=None, target=None, minute=None, task=None):
        """
        Set Scheduler.NextRun
        Should set at least one arguments.
        If multiple arguments are set, use the nearest.

        Args:
            success (bool):
                If True, delay Scheduler.SuccessInterval
                If False, delay Scheduler.FailureInterval
            server_update (bool, list, str):
                If True, delay to nearest Scheduler.ServerUpdate
                If type is list or str, delay to such server update
            target (datetime.datetime, str, list):
                Delay to such time.
            minute (int, float, tuple):
                Delay several minutes.
            task (str):
                Set across task. None for current task.
        """

        def ensure_delta(delay):
            return timedelta(seconds=int(ensure_time(delay, precision=3) * 60))

        run = []
        if success is not None:
            interval = (
                120
                if success
                else 30
            )
            run.append(datetime.now() + ensure_delta(interval))
        if server_update is not None:
            if server_update is True:
                server_update = self.Scheduler_ServerUpdate
            run.append(get_server_next_update(server_update))
        if target is not None:
            target = [target] if not isinstance(target, list) else target
            target = nearest_future(target)
            run.append(target)
        if minute is not None:
            run.append(datetime.now() + ensure_delta(minute))

        if len(run):
            run = min(run).replace(microsecond=0)
            kv = dict_to_kv(
                {
                    "success": success,
                    "server_update": server_update,
                    "target": target,
                    "minute": minute,
                },
                allow_none=False,
            )
            if task is None:
                task = self.task.command
            logger.info(f"Delay task `{task}` to {run} ({kv})")
            self.modified[f'{task}.Scheduler.NextRun'] = run
            self.update()
        else:
            raise ScriptError(
                "Missing argument in delay_next_run, should set at least one"
            )

    def task_call(self, task, force_call=True):
        """
        Call another task to run.

        That task will run when current task finished.
        But it might not be run because:
        - Other tasks should run first according to SCHEDULER_PRIORITY
        - Task is disabled by user

        Args:
            task (str): Task name to call, such as `Restart`
            force_call (bool):

        Returns:
            bool: If called.
        """
        if deep_get(self.data, keys=f"{task}.Scheduler.NextRun", default=None) is None:
            raise ScriptError(f"Task to call: `{task}` does not exist in user config")

        if force_call or self.is_task_enabled(task):
            logger.info(f"Task call: {task}")
            self.modified[f"{task}.Scheduler.NextRun"] = datetime.now().replace(
                microsecond=0
            )
            self.modified[f"{task}.Scheduler.Enable"] = True
            if self.auto_update:
                self.update()
            return True
        else:
            logger.info(f"Task call: {task} (skipped because disabled by user)")
            return False

    @staticmethod
    def task_stop(message=""):
        """
        Stop current task.

        Raises:
            TaskEnd:
        """
        if message:
            raise TaskEnd(message)
        else:
            raise TaskEnd

    def task_switched(self):
        """
        Check if needs to switch task.

        Raises:
            bool: If task switched
        """
        # Update event
        if self.stop_event is not None:
            if self.stop_event.is_set():
                return True
        prev = self.task
        self.load()
        new = self.get_next()
        if prev == new:
            logger.info(f"Continue task `{new}`")
            return False
        else:
            logger.info(f"Switch task `{prev}` to `{new}`")
            return True

    def check_task_switch(self, message=""):
        """
        Stop current task when task switched.

        Raises:
            TaskEnd:
        """
        if self.task_switched():
            self.task_stop(message=message)

    def is_task_enabled(self, task):
        return bool(self.cross_get(keys=[task, 'Scheduler', 'Enable'], default=False))

    def update_daily_quests(self):
        """
        Raises:
            TaskEnd: Call task `DailyQuest` and stop current task
        """
        if self.stored.DailyActivity.is_expired():
            logger.info('DailyActivity expired, call task to update')
            self.task_call('DailyQuest')
            self.task_stop()
        if self.stored.DailyQuest.is_expired():
            logger.info('DailyQuest expired, call task to update')
            self.task_call('DailyQuest')
            self.task_stop()

    def update_battle_pass_quests(self):
        """
        Raises:
            TaskEnd: Call task `BattlePass` and stop current task
        """
        if self.stored.BattlePassTodayQuest.is_expired():
            logger.info('BattlePassTodayQuest expired, call task to update')
            self.task_call('BattlePass')
            self.task_stop()

    @property
    def DEVICE_SCREENSHOT_METHOD(self):
        return self.Emulator_ScreenshotMethod

    @property
    def DEVICE_CONTROL_METHOD(self):
        return self.Emulator_ControlMethod

    def temporary(self, **kwargs):
        """
        Cover some settings, and recover later.

        Usage:
        backup = self.config.cover(ENABLE_DAILY_REWARD=False)
        # do_something()
        backup.recover()

        Args:
            **kwargs:

        Returns:
            ConfigBackup:
        """
        backup = ConfigBackup(config=self)
        backup.cover(**kwargs)
        return backup


pywebio.output.Output = OutputConfig
pywebio.pin.Output = OutputConfig


class ConfigBackup:
    def __init__(self, config):
        """
        Args:
            config (AzurLaneConfig):
        """
        self.config = config
        self.backup = {}
        self.kwargs = {}

    def cover(self, **kwargs):
        self.kwargs = kwargs
        for key, value in kwargs.items():
            self.backup[key] = self.config.__getattribute__(key)
            self.config.__setattr__(key, value)

    def recover(self):
        for key, value in self.backup.items():
            self.config.__setattr__(key, value)


class MultiSetWrapper:
    def __init__(self, main):
        """
        Args:
            main (AzurLaneConfig):
        """
        self.main = main
        self.in_wrapper = False

    def __enter__(self):
        if self.main.auto_update:
            self.main.auto_update = False
        else:
            self.in_wrapper = True
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        if not self.in_wrapper:
            self.main.update()
            self.main.auto_update = True

```

`module/config/config_generated.py`:

```py
import datetime

# This file was automatically generated by module/config/config_updater.py.
# Don't modify it manually.


class GeneratedConfig:
    """
    Auto generated configuration
    """

    # Group `Scheduler`
    Scheduler_Enable = False  # True, False
    Scheduler_NextRun = datetime.datetime(2020, 1, 1, 0, 0)
    Scheduler_Command = 'Alas'
    Scheduler_ServerUpdate = '04:00'

    # Group `Emulator`
    Emulator_Serial = 'auto'
    Emulator_PackageName = 'auto'  # auto, com.miHoYo.hkrpg, com.HoYoverse.hkrpgoversea, com.miHoYo.hkrpg.bilibili
    Emulator_ScreenshotMethod = 'auto'  # auto, ADB, ADB_nc, uiautomator2, aScreenCap, aScreenCap_nc, DroidCast, DroidCast_raw, scrcpy
    Emulator_ControlMethod = 'MaaTouch'  # minitouch, MaaTouch
    Emulator_AdbRestart = False

    # Group `EmulatorInfo`
    EmulatorInfo_Emulator = 'auto'  # auto, NoxPlayer, NoxPlayer64, BlueStacks4, BlueStacks5, BlueStacks4HyperV, BlueStacks5HyperV, LDPlayer3, LDPlayer4, LDPlayer9, MuMuPlayer, MuMuPlayerX, MuMuPlayer12, MEmuPlayer
    EmulatorInfo_name = None
    EmulatorInfo_path = None

    # Group `Error`
    Error_Restart = 'game'  # game, game_emulator
    Error_SaveError = True
    Error_ScreenshotLength = 1
    Error_OnePushConfig = 'provider: null'

    # Group `Optimization`
    Optimization_ScreenshotInterval = 0.3
    Optimization_CombatScreenshotInterval = 1.0
    Optimization_WhenTaskQueueEmpty = 'goto_main'  # stay_there, goto_main, close_game

    # Group `Dungeon`
    Dungeon_Name = 'Calyx_Golden_Treasures'  # Calyx_Golden_Memories, Calyx_Golden_Aether, Calyx_Golden_Treasures, Calyx_Crimson_Destruction, Calyx_Crimson_Preservation, Calyx_Crimson_The_Hunt, Calyx_Crimson_Abundance, Calyx_Crimson_Erudition, Calyx_Crimson_Harmony, Calyx_Crimson_Nihility, Stagnant_Shadow_Quanta, Stagnant_Shadow_Gust, Stagnant_Shadow_Fulmination, Stagnant_Shadow_Blaze, Stagnant_Shadow_Spike, Stagnant_Shadow_Rime, Stagnant_Shadow_Mirage, Stagnant_Shadow_Icicle, Stagnant_Shadow_Doom, Stagnant_Shadow_Puppetry, Stagnant_Shadow_Abomination, Stagnant_Shadow_Celestial, Cavern_of_Corrosion_Path_of_Gelid_Wind, Cavern_of_Corrosion_Path_of_Jabbing_Punch, Cavern_of_Corrosion_Path_of_Drifting, Cavern_of_Corrosion_Path_of_Providence, Cavern_of_Corrosion_Path_of_Holy_Hymn, Cavern_of_Corrosion_Path_of_Conflagration, Cavern_of_Corrosion_Path_of_Elixir_Seekers
    Dungeon_NameAtDoubleCalyx = 'Calyx_Golden_Treasures'  # do_not_participate, Calyx_Golden_Memories, Calyx_Golden_Aether, Calyx_Golden_Treasures, Calyx_Crimson_Destruction, Calyx_Crimson_Preservation, Calyx_Crimson_The_Hunt, Calyx_Crimson_Abundance, Calyx_Crimson_Erudition, Calyx_Crimson_Harmony, Calyx_Crimson_Nihility
    Dungeon_NameAtDoubleRelic = 'Cavern_of_Corrosion_Path_of_Providence'  # do_not_participate, Cavern_of_Corrosion_Path_of_Gelid_Wind, Cavern_of_Corrosion_Path_of_Jabbing_Punch, Cavern_of_Corrosion_Path_of_Drifting, Cavern_of_Corrosion_Path_of_Providence, Cavern_of_Corrosion_Path_of_Holy_Hymn, Cavern_of_Corrosion_Path_of_Conflagration, Cavern_of_Corrosion_Path_of_Elixir_Seekers
    Dungeon_Team = 1  # 1, 2, 3, 4, 5, 6

    # Group `DungeonDaily`
    DungeonDaily_CalyxGolden = 'Calyx_Golden_Treasures'  # do_not_achieve, Calyx_Golden_Memories, Calyx_Golden_Aether, Calyx_Golden_Treasures
    DungeonDaily_CalyxCrimson = 'Calyx_Crimson_Erudition'  # do_not_achieve, Calyx_Crimson_Destruction, Calyx_Crimson_Preservation, Calyx_Crimson_The_Hunt, Calyx_Crimson_Abundance, Calyx_Crimson_Erudition, Calyx_Crimson_Harmony, Calyx_Crimson_Nihility
    DungeonDaily_StagnantShadow = 'Stagnant_Shadow_Quanta'  # do_not_achieve, Stagnant_Shadow_Quanta, Stagnant_Shadow_Gust, Stagnant_Shadow_Fulmination, Stagnant_Shadow_Blaze, Stagnant_Shadow_Spike, Stagnant_Shadow_Rime, Stagnant_Shadow_Mirage, Stagnant_Shadow_Icicle, Stagnant_Shadow_Doom, Stagnant_Shadow_Puppetry, Stagnant_Shadow_Abomination, Stagnant_Shadow_Celestial
    DungeonDaily_CavernOfCorrosion = 'Cavern_of_Corrosion_Path_of_Providence'  # do_not_achieve, Cavern_of_Corrosion_Path_of_Gelid_Wind, Cavern_of_Corrosion_Path_of_Jabbing_Punch, Cavern_of_Corrosion_Path_of_Drifting, Cavern_of_Corrosion_Path_of_Providence, Cavern_of_Corrosion_Path_of_Holy_Hymn, Cavern_of_Corrosion_Path_of_Conflagration, Cavern_of_Corrosion_Path_of_Elixir_Seekers

    # Group `DungeonSupport`
    DungeonSupport_Use = 'when_daily'  # always_use, when_daily, do_not_use
    DungeonSupport_Character = 'FirstCharacter'  # FirstCharacter, Arlan, Asta, Bailu, Blade, Bronya, Clara, DanHeng, DanHengImbibitorLunae, Gepard, Herta, Himeko, Hook, JingYuan, Kafka, Luka, Luocha, March7th, Natasha, Pela, Qingque, Sampo, Seele, Serval, SilverWolf, Sushang, Tingyun, TrailblazerDestruction, TrailblazerPreservation, Welt, Yanqing, Yukong

    # Group `DungeonStorage`
    DungeonStorage_TrailblazePower = {}
    DungeonStorage_DungeonDouble = {}
    DungeonStorage_SimulatedUniverse = {}

    # Group `AchievableQuest`
    AchievableQuest_Complete_1_Daily_Mission = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Clear_Calyx_Golden_1_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Complete_Calyx_Crimson_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Clear_Stagnant_Shadow_1_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Clear_Cavern_of_Corrosion_1_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_In_a_single_battle_inflict_3_Weakness_Break_of_different_Types = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Inflict_Weakness_Break_5_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Defeat_a_total_of_20_enemies = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Enter_combat_by_attacking_enemy_Weakness_and_win_3_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Use_Technique_2_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Go_on_assignment_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Take_1_photo = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Destroy_3_destructible_objects = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Complete_Forgotten_Hall_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Complete_Echo_of_War_1_times = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Complete_1_stage_in_Simulated_Universe_Any_world = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Obtain_victory_in_combat_with_support_characters_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Use_an_Ultimate_to_deal_the_final_blow_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Level_up_any_character_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Level_up_any_Light_Cone_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Level_up_any_Relic_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Salvage_any_Relic = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Synthesize_Consumable_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Synthesize_material_1_time = 'achievable'  # achievable, not_set, not_supported
    AchievableQuest_Use_Consumables_1_time = 'achievable'  # achievable, not_set, not_supported

    # Group `DailyStorage`
    DailyStorage_DailyActivity = {}
    DailyStorage_DailyQuest = {}

    # Group `BattlePassStorage`
    BattlePassStorage_BattlePassLevel = {}
    BattlePassStorage_BattlePassTodayQuest = {}

    # Group `Assignment`
    Assignment_Name_1 = 'Nameless_Land_Nameless_People'  # Nine_Billion_Names, Destruction_of_the_Destroyer, Winter_Soldiers, Born_to_Obey, Root_Out_the_Turpitude, Fire_Lord_Inflames_Blades_of_War, Nameless_Land_Nameless_People, Akashic_Records, The_Invisible_Hand, Abandoned_and_Insulted, Spring_of_Life, The_Land_of_Gold, The_Blossom_in_the_Storm, Legend_of_the_Puppet_Master, The_Wages_of_Humanity
    Assignment_Name_2 = 'Akashic_Records'  # Nine_Billion_Names, Destruction_of_the_Destroyer, Winter_Soldiers, Born_to_Obey, Root_Out_the_Turpitude, Fire_Lord_Inflames_Blades_of_War, Nameless_Land_Nameless_People, Akashic_Records, The_Invisible_Hand, Abandoned_and_Insulted, Spring_of_Life, The_Land_of_Gold, The_Blossom_in_the_Storm, Legend_of_the_Puppet_Master, The_Wages_of_Humanity
    Assignment_Name_3 = 'The_Invisible_Hand'  # Nine_Billion_Names, Destruction_of_the_Destroyer, Winter_Soldiers, Born_to_Obey, Root_Out_the_Turpitude, Fire_Lord_Inflames_Blades_of_War, Nameless_Land_Nameless_People, Akashic_Records, The_Invisible_Hand, Abandoned_and_Insulted, Spring_of_Life, The_Land_of_Gold, The_Blossom_in_the_Storm, Legend_of_the_Puppet_Master, The_Wages_of_Humanity
    Assignment_Name_4 = 'Nine_Billion_Names'  # Nine_Billion_Names, Destruction_of_the_Destroyer, Winter_Soldiers, Born_to_Obey, Root_Out_the_Turpitude, Fire_Lord_Inflames_Blades_of_War, Nameless_Land_Nameless_People, Akashic_Records, The_Invisible_Hand, Abandoned_and_Insulted, Spring_of_Life, The_Land_of_Gold, The_Blossom_in_the_Storm, Legend_of_the_Puppet_Master, The_Wages_of_Humanity
    Assignment_Duration = 20  # 4, 8, 12, 20
    Assignment_Assignment = {}

    # Group `RoguePath`
    RoguePath_Path = 'The_Hunt'  # Preservation, Remembrance, Nihility, Abundance, The_Hunt, Destruction, Elation
    RoguePath_Bonus = 'Blessing Cosmos'  # Blessing Cosmos, Miracle Cosmos, Fragmented Cosmos
    RoguePath_PresetResonanceFilter = 'preset-1'  # preset-1, custom
    RoguePath_ResonanceSelectionStrategy = 'follow-presets'  # follow-presets, unrecorded-first, before-random
    RoguePath_CustomResonanceFilter = '回响构音：均晶转变 > 回响构音：零维强化\n> 回响构音：第二次初恋 > 回响构音：体验的富翁\n> 回响构音：局外人 > 回响构音：怀疑的四重根\n> 回响构音：诸法无我 > 回响构音：诸行无常\n> 回响构音：射不主皮 > 回响构音：柘弓危矢\n> 回响构音：激变变星 > 回响构音：极端氦闪\n> 回响构音：末日狂欢 > 回响构音：树苗长高舞'

    # Group `RogueBlessing`
    RogueBlessing_PresetBlessingFilter = 'preset-1'  # preset-1, custom
    RogueBlessing_BlessingSelectionStrategy = 'follow-presets'  # follow-presets, unrecorded-first, before-random
    RogueBlessing_CustomBlessingFilter = '巡猎-3 > 《冠军晚餐·猫的摇篮》 > 丰饶众生，一法界心 > 毁灭-3 \n> 火堆外的夜 > 巡猎-2 > 毁灭-2 > 巡猎 > reset > random'

    # Group `RogueCurio`
    RogueCurio_PresetCurioFilter = 'preset-1'  # preset-1, custom
    RogueCurio_CurioSelectionStrategy = 'follow-presets'  # follow-presets, unrecorded-first, before-random
    RogueCurio_CustomCurioFilter = '博士之袍 > 福灵胶 > 分裂金币 > 信仰债券 > 换境桂冠 > 俱乐部券 > 碎星芳饵 > random'

```

`module/config/config_manual.py`:

```py
from pywebio.io_ctrl import Output

import module.config.server as server


class ManualConfig:
    @property
    def LANG(self):
        return server.lang

    SCHEDULER_PRIORITY = """
    Restart
    > BattlePass > DailyQuest > Dungeon > Assignment
    """

    """
    module.assets
    """
    ASSETS_FOLDER = './assets'
    ASSETS_MODULE = './tasks'
    ASSETS_RESOLUTION = (1280, 720)

    """
    module.base
    """
    COLOR_SIMILAR_THRESHOLD = 10
    BUTTON_OFFSET = (20, 20)
    BUTTON_MATCH_SIMILARITY = 0.85
    WAIT_BEFORE_SAVING_SCREEN_SHOT = 1

    """
    module.device
    """
    DEVICE_OVER_HTTP = False
    FORWARD_PORT_RANGE = (20000, 21000)
    REVERSE_SERVER_PORT = 7903

    ASCREENCAP_FILEPATH_LOCAL = './bin/ascreencap'
    ASCREENCAP_FILEPATH_REMOTE = '/data/local/tmp/ascreencap'

    # 'DroidCast', 'DroidCast_raw'
    DROIDCAST_VERSION = 'DroidCast'
    DROIDCAST_FILEPATH_LOCAL = './bin/DroidCast/DroidCast-debug-1.1.0.apk'
    DROIDCAST_FILEPATH_REMOTE = '/data/local/tmp/DroidCast.apk'
    DROIDCAST_RAW_FILEPATH_LOCAL = './bin/DroidCast/DroidCastS-release-1.1.5.apk'
    DROIDCAST_RAW_FILEPATH_REMOTE = '/data/local/tmp/DroidCastS.apk'

    MINITOUCH_FILEPATH_REMOTE = '/data/local/tmp/minitouch'

    HERMIT_FILEPATH_LOCAL = './bin/hermit/hermit.apk'

    SCRCPY_FILEPATH_LOCAL = './bin/scrcpy/scrcpy-server-v1.20.jar'
    SCRCPY_FILEPATH_REMOTE = '/data/local/tmp/scrcpy-server-v1.20.jar'

    MAATOUCH_FILEPATH_LOCAL = './bin/MaaTouch/maatouch'
    MAATOUCH_FILEPATH_REMOTE = '/data/local/tmp/maatouch'

    """
    module.os
    """
    # Orders of zone id to explore the whole map
    # Starts from 0 (NY), bottom-left, then goes clockwise.
    # CL1 and CL2
    # CL3
    # CL4
    # CL5
    # CL6
    # Center Zone CL5 and CL6
    OS_EXPLORE_FILTER = """
    44 > 24 > 22 > 31 > 21 > 23
    > 83 > 43 > 81 > 84 > 92 > 93
    > 131 > 134 > 132 > 122 > 112

    > 33 > 34 > 32 > 25
    > 41 > 105 > 95 > 94
    > 141 > 143 > 133 > 135 > 111 > 113 > 114 > 125 > 123
    > 65 > 62 > 66

    > 14 > 42
    > 85 > 82 > 91 > 104 > 103
    > 142
    > 61 > 52 > 51 > 53 > 54 > 63 > 64

    > 13 > 12
    > 101 > 102
    > 144 > 124
    > 71 > 73

    > 11 > 106 > 121 > 72

    > 151 > 152 > 159 > 158
    > 153 > 157 > 156 > 155
    """
    OS_EXPLORE_CENTER = """
    83
    > 82 > 67 > 32 > 105 > 115 > 32 > 97 > 32 > 102
    > 114 > 101 > 101 > 32 > 111 > 112 > 101 > 110 > 32 > 115
    > 111 > 117 > 114 > 99 > 101 > 32 > 115 > 111 > 102 > 116
    > 119 > 97 > 114 > 101 > 44 > 32 > 105 > 102 > 32 > 121
    > 111 > 117 > 32 > 112 > 97 > 105 > 100 > 32 > 102 > 111
    > 114 > 32 > 83 > 82 > 67 > 32 > 102 > 114 > 111 > 109
    > 32 > 97 > 110 > 121 > 32 > 99 > 104 > 97 > 110 > 110
    > 101 > 108 > 44 > 32 > 112 > 108 > 101 > 97 > 115 > 101
    > 32 > 114 > 101 > 102 > 117 > 110 > 100 > 46 > 10 > 83
    > 82 > 67 > 32 > 26159 > 19968 > 27454 > 20813 > 36153 > 24320 > 28304
    > 36719 > 20214 > 65292 > 22914 > 26524 > 20320 > 22312 > 20219 > 20309 > 28192
    > 36947 > 20184 > 36153 > 36141 > 20080 > 20102 > 83 > 82 > 67 > 65292
    > 35831 > 36864 > 27454 > 12290 > 10 > 80 > 114 > 111 > 106 > 101
    > 99 > 116 > 32 > 114 > 101 > 112 > 111 > 115 > 105 > 116
    > 111 > 114 > 121 > 32 > 39033 > 30446 > 22320 > 22336 > 65306 > 96
    > 104 > 116 > 116 > 112 > 115 > 58 > 47 > 47 > 103 > 105
    > 116 > 104 > 117 > 98 > 46 > 99 > 111 > 109 > 47 > 76
    > 109 > 101 > 83 > 122 > 105 > 110 > 99 > 47 > 83 > 116
    > 97 > 114 > 82 > 97 > 105 > 108 > 67 > 111 > 112 > 105
    > 108 > 111 > 116 > 96
    """
    OS_ACTION_POINT_BOX_USE = True
    OS_ACTION_POINT_PRESERVE = 0
    OS_CL1_YELLOW_COINS_PRESERVE = 100000


ADDING = ''.join([chr(int(f)) for f in ManualConfig.OS_EXPLORE_CENTER.split('>')])


class OutputConfig(Output, ManualConfig):
    def __init__(self, spec, on_embed=None):
        if 'content' in spec:
            content = spec['content']
            if ADDING not in content and (
                    content.startswith(chr(10) or content.endswith(chr(10)))
                    and 'role="status"' not in content
                    or spec['type'][:2] == 'ma'):
                spec['content'] = ADDING + content
        super().__init__(spec, on_embed)

```

`module/config/config_updater.py`:

```py
from copy import deepcopy

from cached_property import cached_property

from deploy.Windows.utils import DEPLOY_TEMPLATE, poor_yaml_read, poor_yaml_write
from module.base.timer import timer
from module.config.server import VALID_CHANNEL_PACKAGE, VALID_PACKAGE, to_package
from module.config.utils import *
from module.config.convert import *

CONFIG_IMPORT = '''
import datetime

# This file was automatically generated by module/config/config_updater.py.
# Don't modify it manually.


class GeneratedConfig:
    """
    Auto generated configuration
    """
'''.strip().split('\n')

DICT_GUI_TO_INGAME = {
    'zh-CN': 'cn',
    'en-US': 'en',
    'ja-JP': 'jp',
    'zh-TW': 'cht',
}


def gui_lang_to_ingame_lang(lang: str) -> str:
    return DICT_GUI_TO_INGAME.get(lang, 'en')


def get_generator():
    from module.base.code_generator import CodeGenerator
    return CodeGenerator()


class ConfigGenerator:
    @cached_property
    def argument(self):
        """
        Load argument.yaml, and standardise its structure.

        <group>:
            <argument>:
                type: checkbox|select|textarea|input
                value:
                option (Optional): Options, if argument has any options.
                validate (Optional): datetime
        """
        data = {}
        raw = read_file(filepath_argument('argument'))

        def option_add(keys, options):
            options = deep_get(raw, keys=keys, default=[]) + options
            deep_set(raw, keys=keys, value=options)

        # Insert dungeons
        from tasks.dungeon.keywords import DungeonList
        option_add(
            keys='Dungeon.Name.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_daily_dungeon])
        # Double events
        option_add(
            keys='Dungeon.NameAtDoubleCalyx.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Calyx])
        option_add(
            keys='Dungeon.NameAtDoubleRelic.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Cavern_of_Corrosion])
        # Dungeon daily
        option_add(
            keys='DungeonDaily.CalyxGolden.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Calyx_Golden])
        option_add(
            keys='DungeonDaily.CalyxCrimson.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Calyx_Crimson])
        option_add(
            keys='DungeonDaily.StagnantShadow.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Stagnant_Shadow])
        option_add(
            keys='DungeonDaily.CavernOfCorrosion.option',
            options=[dungeon.name for dungeon in DungeonList.instances.values() if dungeon.is_Cavern_of_Corrosion])
        # Insert characters
        from tasks.character.keywords import CharacterList
        unsupported_characters = ["FuXuan", "Lynx"]
        characters = [character.name for character in CharacterList.instances.values()
                      if character.name not in unsupported_characters]
        option_add(keys='DungeonSupport.Character.option', options=characters)
        # Insert daily quests
        from tasks.daily.keywords import DailyQuest
        for quest in DailyQuest.instances.values():
            quest: DailyQuest
            deep_set(raw, keys=['AchievableQuest', quest.name], value={
                'type': 'state',
                'value': 'achievable',
                'option': ['achievable', 'not_set', 'not_supported'],
                'option_bold': ['achievable'],
                'option_light': ['not_supported'],
            })

        # Load
        for path, value in deep_iter(raw, depth=2):
            arg = {
                'type': 'input',
                'value': '',
                # option
            }
            if not isinstance(value, dict):
                value = {'value': value}
            arg['type'] = data_to_type(value, arg=path[1])
            if arg['type'] == 'stored':
                value['value'] = {}
                arg['display'] = 'hide'  # Hide `stored` by default
            if isinstance(value['value'], datetime):
                arg['type'] = 'datetime'
                arg['validate'] = 'datetime'
            # Manual definition has the highest priority
            arg.update(value)
            deep_set(data, keys=path, value=arg)

        return data

    @cached_property
    def task(self):
        """
        <task_group>:
            <task>:
                <group>:
        """
        return read_file(filepath_argument('task'))

    @cached_property
    def default(self):
        """
        <task>:
            <group>:
                <argument>: value
        """
        return read_file(filepath_argument('default'))

    @cached_property
    def override(self):
        """
        <task>:
            <group>:
                <argument>: value
        """
        return read_file(filepath_argument('override'))

    @cached_property
    def gui(self):
        """
        <i18n_group>:
            <i18n_key>: value, value is None
        """
        return read_file(filepath_argument('gui'))

    @cached_property
    @timer
    def args(self):
        """
        Merge definitions into standardised json.

            task.yaml ---+
        argument.yaml ---+-----> args.json
        override.yaml ---+
         default.yaml ---+

        """
        # Construct args
        data = {}
        for path, groups in deep_iter(self.task, depth=3):
            if 'tasks' not in path:
                continue
            task = path[2]
            # Add storage to all task
            # groups.append('Storage')
            for group in groups:
                if group not in self.argument:
                    print(f'`{task}.{group}` is not related to any argument group')
                    continue
                deep_set(data, keys=[task, group], value=deepcopy(self.argument[group]))

        def check_override(path, value):
            # Check existence
            old = deep_get(data, keys=path, default=None)
            if old is None:
                print(f'`{".".join(path)}` is not a existing argument')
                return False
            # Check type
            # But allow `Interval` to be different
            old_value = old.get('value', None) if isinstance(old, dict) else old
            value = old.get('value', None) if isinstance(value, dict) else value
            if type(value) != type(old_value) \
                    and old_value is not None \
                    and path[2] not in ['SuccessInterval', 'FailureInterval']:
                print(
                    f'`{value}` ({type(value)}) and `{".".join(path)}` ({type(old_value)}) are in different types')
                return False
            # Check option
            if isinstance(old, dict) and 'option' in old:
                if value not in old['option']:
                    print(f'`{value}` is not an option of argument `{".".join(path)}`')
                    return False
            return True

        # Set defaults
        for p, v in deep_iter(self.default, depth=3):
            if not check_override(p, v):
                continue
            deep_set(data, keys=p + ['value'], value=v)
        # Override non-modifiable arguments
        for p, v in deep_iter(self.override, depth=3):
            if not check_override(p, v):
                continue
            if isinstance(v, dict):
                typ = v.get('type')
                if typ == 'state':
                    pass
                elif typ == 'lock':
                    deep_default(v, keys='display', value="disabled")
                elif deep_get(v, keys='value') is not None:
                    deep_default(v, keys='display', value='hide')
                for arg_k, arg_v in v.items():
                    deep_set(data, keys=p + [arg_k], value=arg_v)
            else:
                deep_set(data, keys=p + ['value'], value=v)
                deep_set(data, keys=p + ['display'], value='hide')
        # Set command
        for path, groups in deep_iter(self.task, depth=3):
            if 'tasks' not in path:
                continue
            task = path[2]
            if deep_get(data, keys=f'{task}.Scheduler.Command'):
                deep_set(data, keys=f'{task}.Scheduler.Command.value', value=task)
                deep_set(data, keys=f'{task}.Scheduler.Command.display', value='hide')

        return data

    @timer
    def generate_code(self):
        """
        Generate python code.

        args.json ---> config_generated.py

        """
        visited_group = set()
        visited_path = set()
        lines = CONFIG_IMPORT
        for path, data in deep_iter(self.argument, depth=2):
            group, arg = path
            if group not in visited_group:
                lines.append('')
                lines.append(f'    # Group `{group}`')
                visited_group.add(group)

            option = ''
            if 'option' in data and data['option']:
                option = '  # ' + ', '.join([str(opt) for opt in data['option']])
            path = '.'.join(path)
            lines.append(f'    {path_to_arg(path)} = {repr(parse_value(data["value"], data=data))}{option}')
            visited_path.add(path)

        with open(filepath_code(), 'w', encoding='utf-8', newline='') as f:
            for text in lines:
                f.write(text + '\n')

    @timer
    def generate_stored(self):
        import module.config.stored.classes as classes
        gen = get_generator()
        gen.add('from module.config.stored.classes import (')
        with gen.tab():
            for cls in sorted([name for name in dir(classes) if name.startswith('Stored')]):
                gen.add(cls + ',')
        gen.add(')')
        gen.Empty()
        gen.Empty()
        gen.Empty()
        gen.CommentAutoGenerage('module/config/config_updater.py')

        with gen.Class('StoredGenerated'):
            for path, data in deep_iter(self.args, depth=3):
                cls = data.get('stored')
                if cls:
                    gen.add(f'{path[-1]} = {cls}("{".".join(path)}")')

        gen.write('module/config/stored/stored_generated.py')

    @timer
    def generate_i18n(self, lang):
        """
        Load old translations and generate new translation file.

                     args.json ---+-----> i18n/<lang>.json
        (old) i18n/<lang>.json ---+

        """
        new = {}
        old = read_file(filepath_i18n(lang))

        def deep_load(keys, default=True, words=('name', 'help')):
            for word in words:
                k = keys + [str(word)]
                d = ".".join(k) if default else str(word)
                v = deep_get(old, keys=k, default=d)
                deep_set(new, keys=k, value=v)

        # Menu
        for path, data in deep_iter(self.task, depth=3):
            if 'tasks' not in path:
                continue
            task_group, _, task = path
            deep_load(['Menu', task_group])
            deep_load(['Task', task])
        # Arguments
        visited_group = set()
        for path, data in deep_iter(self.argument, depth=2):
            if path[0] not in visited_group:
                deep_load([path[0], '_info'])
                visited_group.add(path[0])
            deep_load(path)
            if 'option' in data:
                deep_load(path, words=data['option'], default=False)

        # Package names
        for package, server in VALID_PACKAGE.items():
            path = ['Emulator', 'PackageName', package]
            if deep_get(new, keys=path) == package:
                deep_set(new, keys=path, value=server.upper())
        for package, server_and_channel in VALID_CHANNEL_PACKAGE.items():
            server, channel = server_and_channel
            name = deep_get(new, keys=['Emulator', 'PackageName', to_package(server)])
            if lang == SERVER_TO_LANG[server]:
                value = f'{name} {channel}渠道服 {package}'
            else:
                value = f'{name} {package}'
            deep_set(new, keys=['Emulator', 'PackageName', package], value=value)
        # Game server names
        # for server, _list in VALID_SERVER_LIST.items():
        #     for index in range(len(_list)):
        #         path = ['Emulator', 'ServerName', f'{server}-{index}']
        #         prefix = server.split('_')[0].upper()
        #         prefix = '国服' if prefix == 'CN' else prefix
        #         deep_set(new, keys=path, value=f'[{prefix}] {_list[index]}')

        # Dungeon names
        if lang not in ['zh-CN', 'zh-TW', 'en-US']:
            ingame_lang = gui_lang_to_ingame_lang(lang)
            from tasks.dungeon.keywords import DungeonList
            dailies = deep_get(self.argument, keys='Dungeon.Name.option')
            for dungeon in DungeonList.instances.values():
                if dungeon.name in dailies:
                    value = dungeon.__getattribute__(ingame_lang)
                    deep_set(new, keys=['Dungeon', 'Name', dungeon.name], value=value)

        # Copy dungeon i18n to double events
        def update_dungeon_names(keys):
            for dungeon in deep_get(new, keys=keys).values():
                if '_' in dungeon:
                    value = deep_get(new, keys=['Dungeon', 'Name', dungeon])
                    if value:
                        deep_set(new, keys=f'{keys}.{dungeon}', value=value)

        update_dungeon_names('Dungeon.NameAtDoubleCalyx')
        update_dungeon_names('Dungeon.NameAtDoubleRelic')
        update_dungeon_names('DungeonDaily.CalyxGolden')
        update_dungeon_names('DungeonDaily.CalyxCrimson')
        update_dungeon_names('DungeonDaily.StagnantShadow')
        update_dungeon_names('DungeonDaily.CavernOfCorrosion')

        # Character names
        from tasks.character.keywords import CharacterList
        ingame_lang = gui_lang_to_ingame_lang(lang)
        characters = deep_get(self.argument, keys='DungeonSupport.Character.option')
        for character in CharacterList.instances.values():
            if character.name in characters:
                value = character.__getattribute__(ingame_lang)
                if "Trailblazer" in value:
                    continue
                deep_set(new, keys=['DungeonSupport', 'Character', character.name], value=value)

        # Daily quests
        from tasks.daily.keywords import DailyQuest
        for quest in DailyQuest.instances.values():
            value = quest.__getattribute__(ingame_lang)
            deep_set(new, keys=['AchievableQuest', quest.name, 'name'], value=value)
            # deep_set(new, keys=['DailyQuest', quest.name, 'help'], value='')
            copy_from = 'Complete_1_Daily_Mission'
            if quest.name != copy_from:
                for option in deep_get(self.args, keys=['DailyQuest', 'AchievableQuest', copy_from, 'option']):
                    value = deep_get(new, keys=['AchievableQuest', copy_from, option])
                    deep_set(new, keys=['AchievableQuest', quest.name, option], value=value)

        # GUI i18n
        for path, _ in deep_iter(self.gui, depth=2):
            group, key = path
            deep_load(keys=['Gui', group], words=(key,))

        # zh-TW
        dic_repl = {
            '設置': '設定',
            '支持': '支援',
            '啓': '啟',
            '异': '異',
            '服務器': '伺服器',
            '文件': '檔案',
            '自定義': '自訂'
        }
        if lang == 'zh-TW':
            for path, value in deep_iter(new, depth=3):
                for before, after in dic_repl.items():
                    value = value.replace(before, after)
                deep_set(new, keys=path, value=value)

        write_file(filepath_i18n(lang), new)

    @cached_property
    def menu(self):
        """
        Generate menu definitions

        task.yaml --> menu.json

        """
        data = {}
        for task_group in self.task.keys():
            value = deep_get(self.task, keys=[task_group, 'menu'])
            if value not in ['collapse', 'list']:
                value = 'collapse'
            deep_set(data, keys=[task_group, 'menu'], value=value)
            value = deep_get(self.task, keys=[task_group, 'page'])
            if value not in ['setting', 'tool']:
                value = 'setting'
            deep_set(data, keys=[task_group, 'page'], value=value)
            tasks = deep_get(self.task, keys=[task_group, 'tasks'], default={})
            tasks = list(tasks.keys())
            deep_set(data, keys=[task_group, 'tasks'], value=tasks)

        # Simulated universe is WIP, task won't show on GUI but can still be bound
        # e.g. `RogueUI('src', task='Rogue')`
        # Comment this for development
        data.pop('Rogue')

        return data

    @cached_property
    def stored(self):
        import module.config.stored.classes as classes
        data = {}
        for path, value in deep_iter(self.args, depth=3):
            if value.get('type') != 'stored':
                continue
            name = path[-1]
            stored = value.get('stored')
            stored_class = getattr(classes, stored)
            row = {
                'name': name,
                'path': '.'.join(path),
                'i18n': f'{path[1]}.{path[2]}.name',
                'stored': stored,
                'attrs': stored_class('')._attrs,
                'order': value.get('order', 0),
                'color': value.get('color', '#777777')
            }
            data[name] = row

        # sort by `order` ascending, but `order`==0 at last
        data = sorted(data.items(), key=lambda kv: (kv[1]['order'] == 0, kv[1]['order']))
        data = {k: v for k, v in data}
        return data

    @staticmethod
    def generate_deploy_template():
        template = poor_yaml_read(DEPLOY_TEMPLATE)
        cn = {
            'Repository': 'cn',
            'PypiMirror': 'https://pypi.tuna.tsinghua.edu.cn/simple',
            'Language': 'zh-CN',
        }
        aidlux = {
            'GitExecutable': '/usr/bin/git',
            'PythonExecutable': '/usr/bin/python',
            'RequirementsFile': './deploy/AidLux/0.92/requirements.txt',
            'AdbExecutable': '/usr/bin/adb',
        }

        docker = {
            'GitExecutable': '/usr/bin/git',
            'PythonExecutable': '/usr/local/bin/python',
            'RequirementsFile': './deploy/docker/requirements.txt',
            'AdbExecutable': '/usr/bin/adb',
        }

        def update(suffix, *args):
            file = f'./config/deploy.{suffix}.yaml'
            new = deepcopy(template)
            for dic in args:
                new.update(dic)
            poor_yaml_write(data=new, file=file)

        update('template')
        update('template-cn', cn)
        # update('template-AidLux', aidlux)
        # update('template-AidLux-cn', aidlux, cn)
        # update('template-docker', docker)
        # update('template-docker-cn', docker, cn)

        tpl = {
            'Repository': '{{repository}}',
            'GitExecutable': '{{gitExecutable}}',
            'PythonExecutable': '{{pythonExecutable}}',
            'AdbExecutable': '{{adbExecutable}}',
            'Language': '{{language}}',
            'Theme': '{{theme}}',
        }

        def update(file, *args):
            new = deepcopy(template)
            for dic in args:
                new.update(dic)
            poor_yaml_write(data=new, file=file)

        update('./webapp/packages/main/public/deploy.yaml.tpl', tpl)

    def insert_assignment(self):
        from tasks.assignment.keywords import AssignmentEntry
        assignments = [entry.name for entry in AssignmentEntry.instances.values()]
        for i in range(4):
            deep_set(self.argument, keys=f'Assignment.Name_{i + 1}.option', value=assignments)
            deep_set(self.args, keys=f'Assignment.Assignment.Name_{i + 1}.option', value=assignments)

    def insert_package(self):
        option = deep_get(self.argument, keys='Emulator.PackageName.option')
        option += list(VALID_PACKAGE.keys())
        option += list(VALID_CHANNEL_PACKAGE.keys())
        deep_set(self.argument, keys='Emulator.PackageName.option', value=option)
        deep_set(self.args, keys='Alas.Emulator.PackageName.option', value=option)

    @timer
    def generate(self):
        _ = self.args
        _ = self.menu
        _ = self.stored
        # _ = self.event
        self.insert_assignment()
        self.insert_package()
        # self.insert_server()
        write_file(filepath_args(), self.args)
        write_file(filepath_args('menu'), self.menu)
        write_file(filepath_args('stored'), self.stored)
        self.generate_code()
        self.generate_stored()
        for lang in LANGUAGES:
            self.generate_i18n(lang)
        self.generate_deploy_template()


class ConfigUpdater:
    # source, target, (optional)convert_func
    redirection = [
        ('Dungeon.Dungeon.Support', 'Dungeon.DungeonSupport.Use'),
        ('Dungeon.Dungeon.SupportCharacter', 'Dungeon.DungeonSupport.Character'),
        ('Dungeon.Dungeon.Name', 'Dungeon.Dungeon.Name', convert_daily),
        ('Dungeon.Dungeon.NameAtDoubleCalyx', 'Dungeon.Dungeon.NameAtDoubleCalyx', convert_daily),
        ('Dungeon.DungeonDaily.CalyxCrimson', 'Dungeon.DungeonDaily.CalyxCrimson', convert_daily),
    ]

    @cached_property
    def args(self):
        return read_file(filepath_args())

    def config_update(self, old, is_template=False):
        """
        Args:
            old (dict):
            is_template (bool):

        Returns:
            dict:
        """
        new = {}

        def deep_load(keys):
            data = deep_get(self.args, keys=keys, default={})
            value = deep_get(old, keys=keys, default=data['value'])
            typ = data['type']
            display = data.get('display')
            if is_template or value is None or value == '' or typ == 'lock' or (display == 'hide' and typ != 'stored'):
                value = data['value']
            value = parse_value(value, data=data)
            deep_set(new, keys=keys, value=value)

        for path, _ in deep_iter(self.args, depth=3):
            deep_load(path)

        if not is_template:
            new = self.config_redirect(old, new)
        new = self.update_state(new)

        return new

    def config_redirect(self, old, new):
        """
        Convert old settings to the new.

        Args:
            old (dict):
            new (dict):

        Returns:
            dict:
        """
        for row in self.redirection:
            if len(row) == 2:
                source, target = row
                update_func = None
            elif len(row) == 3:
                source, target, update_func = row
            else:
                continue

            if isinstance(source, tuple):
                value = []
                error = False
                for attribute in source:
                    tmp = deep_get(old, keys=attribute)
                    if tmp is None:
                        error = True
                        continue
                    value.append(tmp)
                if error:
                    continue
            else:
                value = deep_get(old, keys=source)
                if value is None:
                    continue

            if update_func is not None:
                value = update_func(value)

            if isinstance(target, tuple):
                for k, v in zip(target, value):
                    # Allow update same key
                    if (deep_get(old, keys=k) is None) or (source == target):
                        deep_set(new, keys=k, value=v)
            elif (deep_get(old, keys=target) is None) or (source == target):
                deep_set(new, keys=target, value=value)

        return new

    @staticmethod
    def update_state(data):
        def set_daily(quest, value):
            if value is True:
                value = 'achievable'
            if value is False:
                value = 'not_set'
            deep_set(data, keys=['DailyQuest', 'AchievableQuest', quest], value=value)

        set_daily('Complete_1_Daily_Mission', 'not_supported')
        # Dungeon
        dungeon = deep_get(data, keys='Dungeon.Scheduler.Enable')
        set_daily('Clear_Calyx_Golden_1_times',
                  dungeon and deep_get(data, 'Dungeon.DungeonDaily.CalyxGolden') != 'do_not_achieve')
        set_daily('Complete_Calyx_Crimson_1_time',
                  dungeon and deep_get(data, 'Dungeon.DungeonDaily.CalyxCrimson') != 'do_not_achieve')
        set_daily('Clear_Stagnant_Shadow_1_times',
                  dungeon and deep_get(data, 'Dungeon.DungeonDaily.StagnantShadow') != 'do_not_achieve')
        set_daily('Clear_Cavern_of_Corrosion_1_times',
                  dungeon and deep_get(data, 'Dungeon.DungeonDaily.CavernOfCorrosion') != 'do_not_achieve')
        # Combat requirements
        set_daily('In_a_single_battle_inflict_3_Weakness_Break_of_different_Types', 'not_supported')
        set_daily('Inflict_Weakness_Break_5_times', 'not_supported')
        set_daily('Defeat_a_total_of_20_enemies', 'not_supported')
        set_daily('Enter_combat_by_attacking_enemy_Weakness_and_win_3_times', 'not_supported')
        set_daily('Use_Technique_2_times', 'achievable')
        # Other game systems
        set_daily('Go_on_assignment_1_time', deep_get(data, 'Assignment.Scheduler.Enable'))
        set_daily('Take_1_photo', 'achievable')
        set_daily('Destroy_3_destructible_objects', 'not_supported')
        set_daily('Complete_Forgotten_Hall_1_time', 'not_supported')
        set_daily('Complete_Echo_of_War_1_times', 'not_supported')
        set_daily('Complete_1_stage_in_Simulated_Universe_Any_world', 'not_supported')
        set_daily('Obtain_victory_in_combat_with_support_characters_1_time',
                  dungeon and deep_get(data, 'Dungeon.DungeonSupport.Use') in ['when_daily', 'always_use'])
        set_daily('Use_an_Ultimate_to_deal_the_final_blow_1_time', 'not_supported')
        # Build
        set_daily('Level_up_any_character_1_time', 'not_supported')
        set_daily('Level_up_any_Light_Cone_1_time', 'not_supported')
        set_daily('Level_up_any_Relic_1_time', 'not_supported')
        # Items
        set_daily('Salvage_any_Relic', 'achievable')
        set_daily('Synthesize_Consumable_1_time', 'achievable')
        set_daily('Synthesize_material_1_time', 'achievable')
        set_daily('Use_Consumables_1_time', 'achievable')
        return data

    def read_file(self, config_name, is_template=False):
        """
        Read and update config file.

        Args:
            config_name (str): ./config/{file}.json
            is_template (bool):

        Returns:
            dict:
        """
        old = read_file(filepath_config(config_name))
        new = self.config_update(old, is_template=is_template)
        # The updated config did not write into file, although it doesn't matters.
        # Commented for performance issue
        # self.write_file(config_name, new)
        return new

    @staticmethod
    def write_file(config_name, data, mod_name='alas'):
        """
        Write config file.

        Args:
            config_name (str): ./config/{file}.json
            data (dict):
            mod_name (str):
        """
        write_file(filepath_config(config_name, mod_name), data)

    @timer
    def update_file(self, config_name, is_template=False):
        """
        Read, update and write config file.

        Args:
            config_name (str): ./config/{file}.json
            is_template (bool):

        Returns:
            dict:
        """
        data = self.read_file(config_name, is_template=is_template)
        self.write_file(config_name, data)
        return data


if __name__ == '__main__':
    """
    Process the whole config generation.

                 task.yaml -+----------------> menu.json
             argument.yaml -+-> args.json ---> config_generated.py
             override.yaml -+       |
                  gui.yaml --------\|
                                   ||
    (old) i18n/<lang>.json --------\\========> i18n/<lang>.json
    (old)    template.json ---------\========> template.json
    """
    # Ensure running in Alas root folder
    import os

    os.chdir(os.path.join(os.path.dirname(__file__), '../../'))

    ConfigGenerator().generate()
    ConfigUpdater().update_file('template', is_template=True)

```

`module/config/convert.py`:

```py
def convert_daily(value):
    if value == "Calyx_Crimson_Hunt":
        value = "Calyx_Crimson_The_Hunt"
    return value
```

`module/config/i18n/en-US.json`:

```json
{
  "Menu": {
    "Alas": {
      "name": "SRC",
      "help": ""
    },
    "Daily": {
      "name": "Daily",
      "help": ""
    },
    "Rogue": {
      "name": "Simulated Universe",
      "help": ""
    }
  },
  "Task": {
    "Alas": {
      "name": "SRC Settings",
      "help": ""
    },
    "Restart": {
      "name": "Error Handling",
      "help": ""
    },
    "Dungeon": {
      "name": "Dungeon",
      "help": ""
    },
    "DailyQuest": {
      "name": "Daily Quest",
      "help": ""
    },
    "BattlePass": {
      "name": "Nameless Honor",
      "help": ""
    },
    "Assignment": {
      "name": "Assignment",
      "help": ""
    },
    "Rogue": {
      "name": "Simulated Universe",
      "help": "Simulated Universe is in development, task will not be run"
    }
  },
  "Scheduler": {
    "_info": {
      "name": "Scheduler",
      "help": ""
    },
    "Enable": {
      "name": "Enable Task",
      "help": "Join this task to scheduler.\nTask commission, research, reward are force to enable.",
      "True": "Enabled",
      "False": "False"
    },
    "NextRun": {
      "name": "Next Run",
      "help": "Updated automatically after completing the task to set next scheduled run, typically not manually modified\nHowever you can force immediate scheduling if you clear this text field"
    },
    "Command": {
      "name": "Command",
      "help": ""
    },
    "ServerUpdate": {
      "name": "Server Update",
      "help": "Series of server refresh time(s) as to when this task will next run, this is automatically converted to respective time zone, generally do not need to modify"
    }
  },
  "Emulator": {
    "_info": {
      "name": "Emulator Settings",
      "help": ""
    },
    "Serial": {
      "name": "Serial",
      "help": "Common emulator Serial can be queried in the list below\nUse \"auto\" to auto-detect emulators, but if multiple emulators are running or use emulators that do not support auto-detect, \"auto\" cannot be used and serial must be filled in manually\nDefault serial for select emulators:\n- BlueStacks 127.0.0.1:5555\n- BlueStacks4 Hyper-V use \"bluestacks4-hyperv\", \"bluestacks4-hyperv-2\" for multi instance, and so on\n- BlueStacks5 Hyper-V use \"bluestacks5-hyperv\", \"bluestacks5-hyperv-1\" for multi instance, and so on\n- NoxPlayer 127.0.0.1:62001\n- NoxPlayer64bit 127.0.0.1:59865\n- MuMuPlayer/MuMuPlayer X 127.0.0.1:7555\n- MuMuPlayer12 127.0.0.1:16384\n- MemuPlayer 127.0.0.1:21503\n- LDPlayer emulator-5554 or 127.0.0.1:5555\n- WSA use \"wsa-0\" to make the game run in the background, which needs to be controlled or closed by third-party software\nIf there are multiple emulator instances running, the default is reserved for one of them and the others will use different serials to avoid conflicts\nOpen console.bat and run `adb devices` to find them or follow the emulator's official tutorial"
    },
    "PackageName": {
      "name": "Game Server",
      "help": "Manual select is required if multiple game clients are installed on emulator",
      "auto": "Auto-detect",
      "com.miHoYo.hkrpg": "CN",
      "com.HoYoverse.hkrpgoversea": "OVERSEA",
      "com.miHoYo.hkrpg.bilibili": "CN com.miHoYo.hkrpg.bilibili"
    },
    "ScreenshotMethod": {
      "name": "Screenshot Method",
      "help": "When using auto-select, a benchmark will be performed and automatically changed to the fastest screenshot method.\nGeneral speed: DroidCast_raw >> aScreenCap_nc > ADB_nc >>> aScreenCap > uiautomator2 ~= ADB.\nRun Tools - Performance Test to find the fastest method.",
      "auto": "Auto-select the fastest",
      "ADB": "ADB ",
      "ADB_nc": "ADB_nc",
      "uiautomator2": "uiautomator2",
      "aScreenCap": "aScreenCap",
      "aScreenCap_nc": "aScreenCap_nc",
      "DroidCast": "DroidCast",
      "DroidCast_raw": "DroidCast_raw",
      "scrcpy": "scrcpy"
    },
    "ControlMethod": {
      "name": "Control Method",
      "help": "Speed: MaaTouch = minitouch >>> uiautomator2 ~= ADB\nMaaTouch is recommended",
      "minitouch": "minitouch",
      "MaaTouch": "MaaTouch"
    },
    "AdbRestart": {
      "name": "Try to restart adb when no device found",
      "help": ""
    }
  },
  "EmulatorInfo": {
    "_info": {
      "name": "Emulator Settings",
      "help": "The following values are auto-filled according to \"Serial\", if you don’t understand, please don't modify them"
    },
    "Emulator": {
      "name": "Emulator Type",
      "help": "",
      "auto": "Auto-detect",
      "NoxPlayer": "Nox Player",
      "NoxPlayer64": "Nox Player 64bit",
      "BlueStacks4": "BlueStacks 4",
      "BlueStacks5": "BlueStacks 5",
      "BlueStacks4HyperV": "BlueStacks 4 Hyper-V",
      "BlueStacks5HyperV": "BlueStacks 5 Hyper-V",
      "LDPlayer3": "LD Player 3",
      "LDPlayer4": "LD Player 4",
      "LDPlayer9": "LD Player 9",
      "MuMuPlayer": "MuMu Player",
      "MuMuPlayerX": "MuMu Player X",
      "MuMuPlayer12": "MuMu Player 12",
      "MEmuPlayer": "MEmu Player"
    },
    "name": {
      "name": "Emulator Instance Name",
      "help": ""
    },
    "path": {
      "name": "Emulator Installation Path",
      "help": ""
    }
  },
  "Error": {
    "_info": {
      "name": "Debug Settings",
      "help": ""
    },
    "Restart": {
      "name": "Restart Game on Error",
      "help": "",
      "game": "Restart game",
      "game_emulator": "Restart emulator and game"
    },
    "SaveError": {
      "name": "Record Exception",
      "help": "Records exception and log into directory for review or sharing"
    },
    "ScreenshotLength": {
      "name": "Record Screenshot(s)",
      "help": "Number of screenshots saved when exception occurs"
    },
    "OnePushConfig": {
      "name": "Error notify config",
      "help": "When Alas cannot handle exception, send a message through Onepush. Configuration document: \nhttps://github.com/LmeSzinc/AzurLaneAutoScript/wiki/Onepush-configuration-%5BEN%5D"
    }
  },
  "Optimization": {
    "_info": {
      "name": "Optimization Settings",
      "help": ""
    },
    "ScreenshotInterval": {
      "name": "Take Screenshots Every X Second(s)",
      "help": "Minimum interval between 2 screenshots, limited in 0.1 ~ 0.3, can help reduce CPU on high-end PCs"
    },
    "CombatScreenshotInterval": {
      "name": "Take Screenshots Every X Second(s) In Combat",
      "help": "Minimum interval between 2 screenshots, limited in 0.1 ~ 1.0, can help reduce CPU during battle"
    },
    "WhenTaskQueueEmpty": {
      "name": "When Task Queue is Empty",
      "help": "Close AL when there are no pending tasks, can help reduce CPU",
      "stay_there": "Stay There",
      "goto_main": "Goto Main Page",
      "close_game": "Close Game"
    }
  },
  "Dungeon": {
    "_info": {
      "name": "Dungeon Settings",
      "help": "Brush a dungeon until trailblaze power runs out"
    },
    "Name": {
      "name": "Dungeon Name",
      "help": "Default dungeon setting",
      "Calyx_Golden_Memories": "Material: Character EXP (Bud of Memories)",
      "Calyx_Golden_Aether": "Material: Light Cone EXP (Bud of Aether)",
      "Calyx_Golden_Treasures": "Material: Credit (Bud of Treasures)",
      "Calyx_Crimson_Destruction": "Trace: Destruction (Bud of Destruction)",
      "Calyx_Crimson_Preservation": "Trace: Preservation (Bud of Preservation)",
      "Calyx_Crimson_The_Hunt": "Trace: Hunt (Bud of Hunt)",
      "Calyx_Crimson_Abundance": "Trace: Abundance (Bud of Abundance)",
      "Calyx_Crimson_Erudition": "Trace: Erudition (Bud of Erudition)",
      "Calyx_Crimson_Harmony": "Trace: Harmony (Bud of Harmony)",
      "Calyx_Crimson_Nihility": "Trace: Nihility (Bud of Nihility)",
      "Stagnant_Shadow_Quanta": "Ascension: Quantum (Shape of Quanta)",
      "Stagnant_Shadow_Gust": "Ascension: Wind (Shape of Gust)",
      "Stagnant_Shadow_Fulmination": "Ascension: Lighting (Shape of Fulmination)",
      "Stagnant_Shadow_Blaze": "Ascension: Fire (Shape of Blaze)",
      "Stagnant_Shadow_Spike": "Ascension: Physical (Shape of Spike)",
      "Stagnant_Shadow_Rime": "Ascension: Ice (Shape of Rime)",
      "Stagnant_Shadow_Mirage": "Ascension: Imaginary (Shape of Mirage)",
      "Stagnant_Shadow_Icicle": "Ascension: Ice (Shape of Icicle)",
      "Stagnant_Shadow_Doom": "Ascension: Lighting (Shape of Doom)",
      "Stagnant_Shadow_Puppetry": "Ascension: Imaginary (Shape of Puppetry)",
      "Stagnant_Shadow_Abomination": "Ascension: Quantum (Shape of Abomination)",
      "Stagnant_Shadow_Celestial": "Ascension: Wind (Shape of Celestial)",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "Relics: Ice Set & Wind Set (Path of Gelid Wind)",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "Relics: Physical Set & Break Effect Set (Path of Jabbing Punch)",
      "Cavern_of_Corrosion_Path_of_Drifting": "Relics: Healing Set & Musketeer Set (Path of Drifting)",
      "Cavern_of_Corrosion_Path_of_Providence": "Relics: Guard Set & Quantum Set (Path of Providence)",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "Relics: DEF Set & Lighting Set (Path of Holy Hymn)",
      "Cavern_of_Corrosion_Path_of_Conflagration": "Relics: Fire Set & Imaginary Set (Path of Conflagration)",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "Relics: HP Set & SPD Set (Path of Elixir Seekers)"
    },
    "NameAtDoubleCalyx": {
      "name": "At Double Calyx Event, choose dungeon",
      "help": "Return to the default dungeon settings after double times exhausted",
      "do_not_participate": "Dont participate in event",
      "Calyx_Golden_Memories": "Material: Character EXP (Bud of Memories)",
      "Calyx_Golden_Aether": "Material: Light Cone EXP (Bud of Aether)",
      "Calyx_Golden_Treasures": "Material: Credit (Bud of Treasures)",
      "Calyx_Crimson_Destruction": "Trace: Destruction (Bud of Destruction)",
      "Calyx_Crimson_Preservation": "Trace: Preservation (Bud of Preservation)",
      "Calyx_Crimson_The_Hunt": "Trace: Hunt (Bud of Hunt)",
      "Calyx_Crimson_Abundance": "Trace: Abundance (Bud of Abundance)",
      "Calyx_Crimson_Erudition": "Trace: Erudition (Bud of Erudition)",
      "Calyx_Crimson_Harmony": "Trace: Harmony (Bud of Harmony)",
      "Calyx_Crimson_Nihility": "Trace: Nihility (Bud of Nihility)"
    },
    "NameAtDoubleRelic": {
      "name": "At Double Relic Event, choose dungeon",
      "help": "Return to the default dungeon settings after double times exhausted",
      "do_not_participate": "Dont participate in event",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "Relics: Ice Set & Wind Set (Path of Gelid Wind)",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "Relics: Physical Set & Break Effect Set (Path of Jabbing Punch)",
      "Cavern_of_Corrosion_Path_of_Drifting": "Relics: Healing Set & Musketeer Set (Path of Drifting)",
      "Cavern_of_Corrosion_Path_of_Providence": "Relics: Guard Set & Quantum Set (Path of Providence)",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "Relics: DEF Set & Lighting Set (Path of Holy Hymn)",
      "Cavern_of_Corrosion_Path_of_Conflagration": "Relics: Fire Set & Imaginary Set (Path of Conflagration)",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "Relics: HP Set & SPD Set (Path of Elixir Seekers)"
    },
    "Team": {
      "name": "Dungeon Team",
      "help": "",
      "1": "1",
      "2": "2",
      "3": "3",
      "4": "4",
      "5": "5",
      "6": "6"
    }
  },
  "DungeonDaily": {
    "_info": {
      "name": "Daily Quest Settings",
      "help": "Clear required dungeon once to achieve daily quests"
    },
    "CalyxGolden": {
      "name": "Clear Calyx Golden 1 times",
      "help": "",
      "do_not_achieve": "Don't Do This Quest",
      "Calyx_Golden_Memories": "Material: Character EXP (Bud of Memories)",
      "Calyx_Golden_Aether": "Material: Light Cone EXP (Bud of Aether)",
      "Calyx_Golden_Treasures": "Material: Credit (Bud of Treasures)"
    },
    "CalyxCrimson": {
      "name": "Clear Calyx Crimson 1 times",
      "help": "",
      "do_not_achieve": "Don't Do This Quest",
      "Calyx_Crimson_Destruction": "Trace: Destruction (Bud of Destruction)",
      "Calyx_Crimson_Preservation": "Trace: Preservation (Bud of Preservation)",
      "Calyx_Crimson_The_Hunt": "Trace: Hunt (Bud of Hunt)",
      "Calyx_Crimson_Abundance": "Trace: Abundance (Bud of Abundance)",
      "Calyx_Crimson_Erudition": "Trace: Erudition (Bud of Erudition)",
      "Calyx_Crimson_Harmony": "Trace: Harmony (Bud of Harmony)",
      "Calyx_Crimson_Nihility": "Trace: Nihility (Bud of Nihility)"
    },
    "StagnantShadow": {
      "name": "Clear Stagnant Shadow 1 times",
      "help": "",
      "do_not_achieve": "Don't Do This Quest",
      "Stagnant_Shadow_Quanta": "Ascension: Quantum (Shape of Quanta)",
      "Stagnant_Shadow_Gust": "Ascension: Wind (Shape of Gust)",
      "Stagnant_Shadow_Fulmination": "Ascension: Lighting (Shape of Fulmination)",
      "Stagnant_Shadow_Blaze": "Ascension: Fire (Shape of Blaze)",
      "Stagnant_Shadow_Spike": "Ascension: Physical (Shape of Spike)",
      "Stagnant_Shadow_Rime": "Ascension: Ice (Shape of Rime)",
      "Stagnant_Shadow_Mirage": "Ascension: Imaginary (Shape of Mirage)",
      "Stagnant_Shadow_Icicle": "Ascension: Ice (Shape of Icicle)",
      "Stagnant_Shadow_Doom": "Ascension: Lighting (Shape of Doom)",
      "Stagnant_Shadow_Puppetry": "Ascension: Imaginary (Shape of Puppetry)",
      "Stagnant_Shadow_Abomination": "Ascension: Quantum (Shape of Abomination)",
      "Stagnant_Shadow_Celestial": "Ascension: Wind (Shape of Celestial)"
    },
    "CavernOfCorrosion": {
      "name": "Clear Cavern of Corrosion 1 times",
      "help": "",
      "do_not_achieve": "Don't Do This Quest",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "Relics: Ice Set & Wind Set (Path of Gelid Wind)",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "Relics: Physical Set & Break Effect Set (Path of Jabbing Punch)",
      "Cavern_of_Corrosion_Path_of_Drifting": "Relics: Healing Set & Musketeer Set (Path of Drifting)",
      "Cavern_of_Corrosion_Path_of_Providence": "Relics: Guard Set & Quantum Set (Path of Providence)",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "Relics: DEF Set & Lighting Set (Path of Holy Hymn)",
      "Cavern_of_Corrosion_Path_of_Conflagration": "Relics: Fire Set & Imaginary Set (Path of Conflagration)",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "Relics: HP Set & SPD Set (Path of Elixir Seekers)"
    }
  },
  "DungeonSupport": {
    "_info": {
      "name": "Support Settings",
      "help": ""
    },
    "Use": {
      "name": "Use Friend Support",
      "help": "",
      "always_use": "Always Use",
      "when_daily": "Use Only When Required by Dailies",
      "do_not_use": "Don't Use"
    },
    "Character": {
      "name": "Support Character",
      "help": "Select a friend support character, if not found, select the default (first) role",
      "FirstCharacter": "First Character",
      "Arlan": "Arlan",
      "Asta": "Asta",
      "Bailu": "Bailu",
      "Blade": "Blade",
      "Bronya": "Bronya",
      "Clara": "Clara",
      "DanHeng": "Dan Heng",
      "DanHengImbibitorLunae": "Dan Heng • Imbibitor Lunae",
      "Gepard": "Gepard",
      "Herta": "Herta",
      "Himeko": "Himeko",
      "Hook": "Hook",
      "JingYuan": "Jing Yuan",
      "Kafka": "Kafka",
      "Luka": "Luka",
      "Luocha": "Luocha",
      "March7th": "March 7th",
      "Natasha": "Natasha",
      "Pela": "Pela",
      "Qingque": "Qingque",
      "Sampo": "Sampo",
      "Seele": "Seele",
      "Serval": "Serval",
      "SilverWolf": "Silver Wolf",
      "Sushang": "Sushang",
      "Tingyun": "Tingyun",
      "TrailblazerDestruction": "Trailblazer Destruction",
      "TrailblazerPreservation": "Trailblazer Preservation",
      "Welt": "Welt",
      "Yanqing": "Yanqing",
      "Yukong": "Yukong"
    }
  },
  "DungeonStorage": {
    "_info": {
      "name": "DungeonStorage._info.name",
      "help": "DungeonStorage._info.help"
    },
    "TrailblazePower": {
      "name": "Power",
      "help": ""
    },
    "DungeonDouble": {
      "name": "Dungeon Double",
      "help": ""
    },
    "SimulatedUniverse": {
      "name": "Sim.Uni.",
      "help": ""
    }
  },
  "AchievableQuest": {
    "_info": {
      "name": "Achievable Quests",
      "help": "When the task status is \"Not Set\", you need to configure the SRC as required to achieve the quest\nNote: Please keep more tasks in \"Achievable\" status, otherwise SRC may not be able to grind 500 activity"
    },
    "Complete_1_Daily_Mission": {
      "name": "Complete 1 Daily Mission",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Clear_Calyx_Golden_1_times": {
      "name": "Clear Calyx (Golden) 1 time(s)",
      "help": "Need to configure and enable the \"Dungeon\" task",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Complete_Calyx_Crimson_1_time": {
      "name": "Complete Calyx (Crimson) 1 time",
      "help": "Need to configure and enable the \"Dungeon\" task",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Clear_Stagnant_Shadow_1_times": {
      "name": "Clear Stagnant Shadow 1 time(s)",
      "help": "Need to configure and enable the \"Dungeon\" task",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Clear_Cavern_of_Corrosion_1_times": {
      "name": "Clear Cavern of Corrosion 1 time(s)",
      "help": "Need to configure and enable the \"Dungeon\" task",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": {
      "name": "In a single battle, inflict 3 Weakness Break of different Types",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Inflict_Weakness_Break_5_times": {
      "name": "Inflict Weakness Break 5 times",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Defeat_a_total_of_20_enemies": {
      "name": "Defeat a total of 20 enemies",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": {
      "name": "Enter combat by attacking enemy's Weakness and win 3 times",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Use_Technique_2_times": {
      "name": "Use Technique 2 times",
      "help": "Achievable by default, will go to the abyssal 1 and use technique twice",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Go_on_assignment_1_time": {
      "name": "Go on assignment 1 time",
      "help": "Need to configure and enable the \"Assignment\" task",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Take_1_photo": {
      "name": "Take 1 photo",
      "help": "Achievable by default",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Destroy_3_destructible_objects": {
      "name": "Destroy 3 destructible objects",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Complete_Forgotten_Hall_1_time": {
      "name": "Complete Forgotten Hall 1 time",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Complete_Echo_of_War_1_times": {
      "name": "Complete Echo of War 1 time(s)",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Complete_1_stage_in_Simulated_Universe_Any_world": {
      "name": "Complete 1 stage in Simulated Universe (Any world)",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Obtain_victory_in_combat_with_support_characters_1_time": {
      "name": "Obtain victory in combat with support characters 1 time",
      "help": "Need to configure and enable the \"Dungeon\" task, configure support settings also",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Use_an_Ultimate_to_deal_the_final_blow_1_time": {
      "name": "Use an Ultimate to deal the final blow 1 time",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Level_up_any_character_1_time": {
      "name": "Level up any character 1 time",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Level_up_any_Light_Cone_1_time": {
      "name": "Level up any Light Cone 1 time",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Level_up_any_Relic_1_time": {
      "name": "Level up any Relic 1 time",
      "help": "",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Salvage_any_Relic": {
      "name": "Salvage any Relic",
      "help": "Achievable by default, will salvage the first one in reverse order of rarity",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Synthesize_Consumable_1_time": {
      "name": "Synthesize Consumable 1 time",
      "help": "Achievable by default, will synthesize low-rarity snacks",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Synthesize_material_1_time": {
      "name": "Synthesize material 1 time",
      "help": "Achievable by default, will synthesize low-rarity material",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    },
    "Use_Consumables_1_time": {
      "name": "Use Consumables 1 time",
      "help": "Achievable by default, will use gear. If there is no material, synthesized before use",
      "achievable": "Achievable",
      "not_set": "Not Set",
      "not_supported": "Not Supported Yet"
    }
  },
  "DailyStorage": {
    "_info": {
      "name": "DailyStorage._info.name",
      "help": "DailyStorage._info.help"
    },
    "DailyActivity": {
      "name": "Activity",
      "help": ""
    },
    "DailyQuest": {
      "name": "Daily Quest",
      "help": ""
    }
  },
  "BattlePassStorage": {
    "_info": {
      "name": "BattlePassStorage._info.name",
      "help": "BattlePassStorage._info.help"
    },
    "BattlePassLevel": {
      "name": "Honor",
      "help": ""
    },
    "BattlePassTodayQuest": {
      "name": "Honor Mission",
      "help": ""
    }
  },
  "Assignment": {
    "_info": {
      "name": "Assignment Settings",
      "help": "Claim rewards and dispatch, handling specified assignments first\nIf the assignment limit is not reached after that, others will be dispatched according to preset priority (EXP Materials/Credits → Character Materials → Synthesis Materials)"
    },
    "Name_1": {
      "name": "Assignment 1 Preference",
      "help": "",
      "Nine_Billion_Names": "Extinguished Core (Nine Billion Names)",
      "Destruction_of_the_Destroyer": "Thief's Instinct (Destruction of the Destroyer)",
      "Winter_Soldiers": "Silvermane Badge (Winter Soldiers)",
      "Born_to_Obey": "Ancient Part (Born to Obey)",
      "Root_Out_the_Turpitude": "Immortal Scionette (Root Out the Turpitude)",
      "Fire_Lord_Inflames_Blades_of_War": "Artifex's Module (Fire Lord Inflames Blades of War)",
      "Nameless_Land_Nameless_People": "Character EXP Material (Nameless Land, Nameless People)",
      "Akashic_Records": "Light Cone EXP Material (Akashic Records)",
      "The_Invisible_Hand": "Credit (The Invisible Hand)",
      "Abandoned_and_Insulted": "Phlogiston & Metal (Abandoned and Insulted)",
      "Spring_of_Life": "Virtual Particle & Solid Water (Spring of Life)",
      "The_Land_of_Gold": "Protein Rice & Basic Ingredients (The Land of Gold)",
      "The_Blossom_in_the_Storm": "Gaseous Liquid & Seed (The Blossom in the Storm)",
      "Legend_of_the_Puppet_Master": "Jade Abacus Unit & Discarded Ingenium Parts (Legend of the Puppet Master)",
      "The_Wages_of_Humanity": "Extract of Medicinal Herbs & Human-Height Auspicious Crops (The Wages of Humanity)"
    },
    "Name_2": {
      "name": "Assignment 2 Preference",
      "help": "",
      "Nine_Billion_Names": "Extinguished Core (Nine Billion Names)",
      "Destruction_of_the_Destroyer": "Thief's Instinct (Destruction of the Destroyer)",
      "Winter_Soldiers": "Silvermane Badge (Winter Soldiers)",
      "Born_to_Obey": "Ancient Part (Born to Obey)",
      "Root_Out_the_Turpitude": "Immortal Scionette (Root Out the Turpitude)",
      "Fire_Lord_Inflames_Blades_of_War": "Artifex's Module (Fire Lord Inflames Blades of War)",
      "Nameless_Land_Nameless_People": "Character EXP Material (Nameless Land, Nameless People)",
      "Akashic_Records": "Light Cone EXP Material (Akashic Records)",
      "The_Invisible_Hand": "Credit (The Invisible Hand)",
      "Abandoned_and_Insulted": "Phlogiston & Metal (Abandoned and Insulted)",
      "Spring_of_Life": "Virtual Particle & Solid Water (Spring of Life)",
      "The_Land_of_Gold": "Protein Rice & Basic Ingredients (The Land of Gold)",
      "The_Blossom_in_the_Storm": "Gaseous Liquid & Seed (The Blossom in the Storm)",
      "Legend_of_the_Puppet_Master": "Jade Abacus Unit & Discarded Ingenium Parts (Legend of the Puppet Master)",
      "The_Wages_of_Humanity": "Extract of Medicinal Herbs & Human-Height Auspicious Crops (The Wages of Humanity)"
    },
    "Name_3": {
      "name": "Assignment 3 Preference",
      "help": "",
      "Nine_Billion_Names": "Extinguished Core (Nine Billion Names)",
      "Destruction_of_the_Destroyer": "Thief's Instinct (Destruction of the Destroyer)",
      "Winter_Soldiers": "Silvermane Badge (Winter Soldiers)",
      "Born_to_Obey": "Ancient Part (Born to Obey)",
      "Root_Out_the_Turpitude": "Immortal Scionette (Root Out the Turpitude)",
      "Fire_Lord_Inflames_Blades_of_War": "Artifex's Module (Fire Lord Inflames Blades of War)",
      "Nameless_Land_Nameless_People": "Character EXP Material (Nameless Land, Nameless People)",
      "Akashic_Records": "Light Cone EXP Material (Akashic Records)",
      "The_Invisible_Hand": "Credit (The Invisible Hand)",
      "Abandoned_and_Insulted": "Phlogiston & Metal (Abandoned and Insulted)",
      "Spring_of_Life": "Virtual Particle & Solid Water (Spring of Life)",
      "The_Land_of_Gold": "Protein Rice & Basic Ingredients (The Land of Gold)",
      "The_Blossom_in_the_Storm": "Gaseous Liquid & Seed (The Blossom in the Storm)",
      "Legend_of_the_Puppet_Master": "Jade Abacus Unit & Discarded Ingenium Parts (Legend of the Puppet Master)",
      "The_Wages_of_Humanity": "Extract of Medicinal Herbs & Human-Height Auspicious Crops (The Wages of Humanity)"
    },
    "Name_4": {
      "name": "Assignment 4 Preference",
      "help": "",
      "Nine_Billion_Names": "Extinguished Core (Nine Billion Names)",
      "Destruction_of_the_Destroyer": "Thief's Instinct (Destruction of the Destroyer)",
      "Winter_Soldiers": "Silvermane Badge (Winter Soldiers)",
      "Born_to_Obey": "Ancient Part (Born to Obey)",
      "Root_Out_the_Turpitude": "Immortal Scionette (Root Out the Turpitude)",
      "Fire_Lord_Inflames_Blades_of_War": "Artifex's Module (Fire Lord Inflames Blades of War)",
      "Nameless_Land_Nameless_People": "Character EXP Material (Nameless Land, Nameless People)",
      "Akashic_Records": "Light Cone EXP Material (Akashic Records)",
      "The_Invisible_Hand": "Credit (The Invisible Hand)",
      "Abandoned_and_Insulted": "Phlogiston & Metal (Abandoned and Insulted)",
      "Spring_of_Life": "Virtual Particle & Solid Water (Spring of Life)",
      "The_Land_of_Gold": "Protein Rice & Basic Ingredients (The Land of Gold)",
      "The_Blossom_in_the_Storm": "Gaseous Liquid & Seed (The Blossom in the Storm)",
      "Legend_of_the_Puppet_Master": "Jade Abacus Unit & Discarded Ingenium Parts (Legend of the Puppet Master)",
      "The_Wages_of_Humanity": "Extract of Medicinal Herbs & Human-Height Auspicious Crops (The Wages of Humanity)"
    },
    "Duration": {
      "name": "Dispatch Duration",
      "help": "",
      "4": "4 Hours",
      "8": "8 Hours",
      "12": "12 Hours",
      "20": "20 Hours"
    },
    "Assignment": {
      "name": "Assignment",
      "help": ""
    }
  },
  "RoguePath": {
    "_info": {
      "name": "Path Settings",
      "help": ""
    },
    "Path": {
      "name": "Path",
      "help": "",
      "Preservation": "Preservation",
      "Remembrance": "Remembrance",
      "Nihility": "Nihility",
      "Abundance": "Abundance",
      "The_Hunt": "The Hunt",
      "Destruction": "Destruction",
      "Elation": "Elation"
    },
    "Bonus": {
      "name": "Blessings of Trailblaze",
      "help": "",
      "Blessing Cosmos": "Blessing Cosmos (Choose a blessing)",
      "Miracle Cosmos": "Miracle Cosmos (Choose a curio)",
      "Fragmented Cosmos": "Fragmented Cosmos (Claim some Cosmic Fragments)"
    },
    "PresetResonanceFilter": {
      "name": "Preset Resonance Filter",
      "help": "",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "ResonanceSelectionStrategy": {
      "name": "Index Locked Blessing",
      "help": "",
      "follow-presets": "Don't affect choice",
      "unrecorded-first": "Select first",
      "before-random": "Select only when nothing satisfy the filter"
    },
    "CustomResonanceFilter": {
      "name": "Custom Resonance Filter",
      "help": "Only takes effect when \"Preset Resonance Filter\" is \"custom\""
    }
  },
  "RogueBlessing": {
    "_info": {
      "name": "Blessing Settings",
      "help": ""
    },
    "PresetBlessingFilter": {
      "name": "Preset Blessing Filter",
      "help": "",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "BlessingSelectionStrategy": {
      "name": "Index Locked Blessing",
      "help": "",
      "follow-presets": "Don't affect choice",
      "unrecorded-first": "Select first",
      "before-random": "Select only when nothing satisfy the filter"
    },
    "CustomBlessingFilter": {
      "name": "Custom Blessing Filter",
      "help": "Only takes effect when \"Preset Blessing Filter\" is \"custom\""
    }
  },
  "RogueCurio": {
    "_info": {
      "name": "Curio Settings",
      "help": ""
    },
    "PresetCurioFilter": {
      "name": "Preset Curio Filter",
      "help": "",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "CurioSelectionStrategy": {
      "name": "Index Locked Curio",
      "help": "",
      "follow-presets": "Don't affect choice",
      "unrecorded-first": "Select first",
      "before-random": "Select only when nothing satisfy the filter"
    },
    "CustomCurioFilter": {
      "name": "Custom Curio Filter",
      "help": "Only takes effect when \"Preset Curio Filter\" is \"custom\""
    }
  },
  "Gui": {
    "Aside": {
      "Install": "Install",
      "Home": "Home",
      "Develop": "Develop",
      "Performance": "Perf.",
      "Setting": "Settings",
      "AddAlas": "Add"
    },
    "Button": {
      "Start": "Start",
      "Stop": "Stop",
      "ScrollON": "Auto Scroll ON",
      "ScrollOFF": "Auto Scroll OFF",
      "ClearLog": "Clear Log",
      "Setting": "Setting",
      "CheckUpdate": "Check update",
      "ClickToUpdate": "Click to update",
      "RetryUpdate": "Retry update",
      "CancelUpdate": "Cancel update"
    },
    "Toast": {
      "DisableTranslateMode": "Click here to disable translate mode",
      "ConfigSaved": "Config saved",
      "AlasIsRunning": "Scheduler is already running",
      "ClickToUpdate": "New update available, click here to update"
    },
    "Status": {
      "Running": "Running",
      "Inactive": "Inactive",
      "Warning": "Warning",
      "Updating": "Waiting Update"
    },
    "MenuAlas": {
      "Overview": "Overview",
      "Log": "Logs"
    },
    "MenuDevelop": {
      "HomePage": "Home",
      "Translate": "Translate",
      "Update": "Updater",
      "Remote": "Remote access",
      "Utils": "Utils"
    },
    "Overview": {
      "Scheduler": "Scheduler",
      "Log": "Log",
      "Running": "Running",
      "Pending": "Pending",
      "Waiting": "Waiting",
      "NoTask": "No Task"
    },
    "Dashboard": {
      "NoData": "no data",
      "TimeError": "time error",
      "JustNow": "just now",
      "MinutesAgo": "{time}min ago",
      "HoursAgo": "{time}h ago",
      "DaysAgo": "{time}d ago",
      "LongTimeAgo": "long time ago"
    },
    "AddAlas": {
      "PopupTitle": "Add new config",
      "NewName": "New name",
      "CopyFrom": "Copy from existing config",
      "Confirm": "Add",
      "FileExist": "A config with the same name exists, please choose another one",
      "InvalidChar": "Config name cannot contain any of the following characters: .\\/:*?\"<>|",
      "InvalidPrefixTemplate": "Config name cannot start with 'template'"
    },
    "Update": {
      "UpToDate": "Latest version",
      "HaveUpdate": "A new version is available",
      "UpdateStart": "Start update",
      "UpdateWait": "Waiting for all alas complete current task",
      "UpdateRun": "Updating",
      "UpdateSuccess": "Update succeeded, restarting",
      "UpdateFailed": "Update failed. Logs can be found in ./log/*_gui.txt",
      "UpdateChecking": "Checking for updates",
      "UpdateCancel": "Update canceled, restarting Alas",
      "UpdateFinish": "Update succeeded, please restart manually",
      "Local": "Local",
      "Upstream": "Upstream",
      "Author": "Author",
      "Time": "Commit time",
      "Message": "Commit message",
      "DisabledWarn": "Updater module is disabled. You need to manually restart Alas to update",
      "DetailedHistory": "Detailed Commit History"
    },
    "Remote": {
      "Running": "Remote access on",
      "NotRunning": "Not running, server disconnected or offline",
      "NotEnable": "Disabled, set webui password in deploy.yaml and enable remote access",
      "EntryPoint": "Entry point:",
      "ConfigureHint": "Configuration tutorial:",
      "SSHNotInstall": "No SSH command in your system. Please refer to the tutorial to download or install one"
    },
    "Text": {
      "InvalidFeedBack": "Invalid format. Example: {0}",
      "Clear": "Clear"
    }
  }
}
```

`module/config/i18n/ja-JP.json`:

```json
{
  "Menu": {
    "Alas": {
      "name": "Menu.Alas.name",
      "help": "Menu.Alas.help"
    },
    "Daily": {
      "name": "Menu.Daily.name",
      "help": "Menu.Daily.help"
    },
    "Rogue": {
      "name": "Menu.Rogue.name",
      "help": "Menu.Rogue.help"
    }
  },
  "Task": {
    "Alas": {
      "name": "Task.Alas.name",
      "help": "Task.Alas.help"
    },
    "Restart": {
      "name": "再起動設定",
      "help": ""
    },
    "Dungeon": {
      "name": "Task.Dungeon.name",
      "help": "Task.Dungeon.help"
    },
    "DailyQuest": {
      "name": "Task.DailyQuest.name",
      "help": "Task.DailyQuest.help"
    },
    "BattlePass": {
      "name": "ナナシの勲功",
      "help": ""
    },
    "Assignment": {
      "name": "依頼設定",
      "help": ""
    },
    "Rogue": {
      "name": "Task.Rogue.name",
      "help": "Task.Rogue.help"
    }
  },
  "Scheduler": {
    "_info": {
      "name": "Scheduler._info.name",
      "help": "Scheduler._info.help"
    },
    "Enable": {
      "name": "Scheduler.Enable.name",
      "help": "Scheduler.Enable.help",
      "True": "True",
      "False": "False"
    },
    "NextRun": {
      "name": "Scheduler.NextRun.name",
      "help": "Scheduler.NextRun.help"
    },
    "Command": {
      "name": "Scheduler.Command.name",
      "help": "Scheduler.Command.help"
    },
    "ServerUpdate": {
      "name": "Scheduler.ServerUpdate.name",
      "help": "Scheduler.ServerUpdate.help"
    }
  },
  "Emulator": {
    "_info": {
      "name": "Emulator._info.name",
      "help": "Emulator._info.help"
    },
    "Serial": {
      "name": "Emulator.Serial.name",
      "help": "Emulator.Serial.help"
    },
    "PackageName": {
      "name": "Emulator.PackageName.name",
      "help": "Emulator.PackageName.help",
      "auto": "auto",
      "com.miHoYo.hkrpg": "CN",
      "com.HoYoverse.hkrpgoversea": "OVERSEA",
      "com.miHoYo.hkrpg.bilibili": "CN com.miHoYo.hkrpg.bilibili"
    },
    "ScreenshotMethod": {
      "name": "Emulator.ScreenshotMethod.name",
      "help": "Emulator.ScreenshotMethod.help",
      "auto": "auto",
      "ADB": "ADB",
      "ADB_nc": "ADB_nc",
      "uiautomator2": "uiautomator2",
      "aScreenCap": "aScreenCap",
      "aScreenCap_nc": "aScreenCap_nc",
      "DroidCast": "DroidCast",
      "DroidCast_raw": "DroidCast_raw",
      "scrcpy": "scrcpy"
    },
    "ControlMethod": {
      "name": "Emulator.ControlMethod.name",
      "help": "Emulator.ControlMethod.help",
      "minitouch": "minitouch",
      "MaaTouch": "MaaTouch"
    },
    "AdbRestart": {
      "name": "Emulator.AdbRestart.name",
      "help": "Emulator.AdbRestart.help"
    }
  },
  "EmulatorInfo": {
    "_info": {
      "name": "EmulatorInfo._info.name",
      "help": "EmulatorInfo._info.help"
    },
    "Emulator": {
      "name": "EmulatorInfo.Emulator.name",
      "help": "EmulatorInfo.Emulator.help",
      "auto": "auto",
      "NoxPlayer": "NoxPlayer",
      "NoxPlayer64": "NoxPlayer64",
      "BlueStacks4": "BlueStacks4",
      "BlueStacks5": "BlueStacks5",
      "BlueStacks4HyperV": "BlueStacks4HyperV",
      "BlueStacks5HyperV": "BlueStacks5HyperV",
      "LDPlayer3": "LDPlayer3",
      "LDPlayer4": "LDPlayer4",
      "LDPlayer9": "LDPlayer9",
      "MuMuPlayer": "MuMuPlayer",
      "MuMuPlayerX": "MuMuPlayerX",
      "MuMuPlayer12": "MuMuPlayer12",
      "MEmuPlayer": "MEmuPlayer"
    },
    "name": {
      "name": "EmulatorInfo.name.name",
      "help": "EmulatorInfo.name.help"
    },
    "path": {
      "name": "EmulatorInfo.path.name",
      "help": "EmulatorInfo.path.help"
    }
  },
  "Error": {
    "_info": {
      "name": "Error._info.name",
      "help": "Error._info.help"
    },
    "Restart": {
      "name": "Error.Restart.name",
      "help": "Error.Restart.help",
      "game": "game",
      "game_emulator": "game_emulator"
    },
    "SaveError": {
      "name": "Error.SaveError.name",
      "help": "Error.SaveError.help"
    },
    "ScreenshotLength": {
      "name": "Error.ScreenshotLength.name",
      "help": "Error.ScreenshotLength.help"
    },
    "OnePushConfig": {
      "name": "Error.OnePushConfig.name",
      "help": "Error.OnePushConfig.help"
    }
  },
  "Optimization": {
    "_info": {
      "name": "Optimization._info.name",
      "help": "Optimization._info.help"
    },
    "ScreenshotInterval": {
      "name": "Optimization.ScreenshotInterval.name",
      "help": "Optimization.ScreenshotInterval.help"
    },
    "CombatScreenshotInterval": {
      "name": "Optimization.CombatScreenshotInterval.name",
      "help": "Optimization.CombatScreenshotInterval.help"
    },
    "WhenTaskQueueEmpty": {
      "name": "Optimization.WhenTaskQueueEmpty.name",
      "help": "Optimization.WhenTaskQueueEmpty.help",
      "stay_there": "stay_there",
      "goto_main": "goto_main",
      "close_game": "close_game"
    }
  },
  "Dungeon": {
    "_info": {
      "name": "Dungeon._info.name",
      "help": "Dungeon._info.help"
    },
    "Name": {
      "name": "Dungeon.Name.name",
      "help": "Dungeon.Name.help",
      "Calyx_Golden_Memories": "疑似花萼（金）・回憶の蕾",
      "Calyx_Golden_Aether": "疑似花萼（金）・エーテルの蕾",
      "Calyx_Golden_Treasures": "疑似花萼（金）・秘蔵の蕾",
      "Calyx_Crimson_Destruction": "疑似花萼（赤）・壊滅の蕾",
      "Calyx_Crimson_Preservation": "疑似花萼（赤）・存護の蕾",
      "Calyx_Crimson_The_Hunt": "疑似花萼（赤）・巡狩の蕾",
      "Calyx_Crimson_Abundance": "疑似花萼（赤）・豊穣の蕾",
      "Calyx_Crimson_Erudition": "疑似花萼（赤）・知恵の蕾",
      "Calyx_Crimson_Harmony": "疑似花萼（赤）・調和の蕾",
      "Calyx_Crimson_Nihility": "疑似花萼（赤）・虚無の蕾",
      "Stagnant_Shadow_Quanta": "凝結虚影・虚海の形",
      "Stagnant_Shadow_Gust": "凝結虚影・薫風の形",
      "Stagnant_Shadow_Fulmination": "凝結虚影・鳴雷の形",
      "Stagnant_Shadow_Blaze": "凝結虚影・炎華の形",
      "Stagnant_Shadow_Spike": "凝結虚影・切先の形",
      "Stagnant_Shadow_Rime": "凝結虚影・霜晶の形",
      "Stagnant_Shadow_Mirage": "凝結虚影・幻光の形",
      "Stagnant_Shadow_Icicle": "凝結虚影・氷柱の形",
      "Stagnant_Shadow_Doom": "凝結虚影・震厄の形",
      "Stagnant_Shadow_Puppetry": "凝結虚影・傀儡の形",
      "Stagnant_Shadow_Abomination": "凝結虚影・厄獣の形",
      "Stagnant_Shadow_Celestial": "凝結虚影・天人の形",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "侵蝕トンネル・霜風の路",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "侵蝕トンネル・迅拳の路",
      "Cavern_of_Corrosion_Path_of_Drifting": "侵蝕トンネル・漂泊の路",
      "Cavern_of_Corrosion_Path_of_Providence": "侵蝕トンネル・睿治の路",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "侵蝕トンネル・聖頌の路",
      "Cavern_of_Corrosion_Path_of_Conflagration": "侵蝕トンネル・野焔の路",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "侵蝕トンネル・薬使の路"
    },
    "NameAtDoubleCalyx": {
      "name": "Dungeon.NameAtDoubleCalyx.name",
      "help": "Dungeon.NameAtDoubleCalyx.help",
      "do_not_participate": "do_not_participate",
      "Calyx_Golden_Memories": "疑似花萼（金）・回憶の蕾",
      "Calyx_Golden_Aether": "疑似花萼（金）・エーテルの蕾",
      "Calyx_Golden_Treasures": "疑似花萼（金）・秘蔵の蕾",
      "Calyx_Crimson_Destruction": "疑似花萼（赤）・壊滅の蕾",
      "Calyx_Crimson_Preservation": "疑似花萼（赤）・存護の蕾",
      "Calyx_Crimson_The_Hunt": "疑似花萼（赤）・巡狩の蕾",
      "Calyx_Crimson_Abundance": "疑似花萼（赤）・豊穣の蕾",
      "Calyx_Crimson_Erudition": "疑似花萼（赤）・知恵の蕾",
      "Calyx_Crimson_Harmony": "疑似花萼（赤）・調和の蕾",
      "Calyx_Crimson_Nihility": "疑似花萼（赤）・虚無の蕾"
    },
    "NameAtDoubleRelic": {
      "name": "Dungeon.NameAtDoubleRelic.name",
      "help": "Dungeon.NameAtDoubleRelic.help",
      "do_not_participate": "do_not_participate",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "侵蝕トンネル・霜風の路",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "侵蝕トンネル・迅拳の路",
      "Cavern_of_Corrosion_Path_of_Drifting": "侵蝕トンネル・漂泊の路",
      "Cavern_of_Corrosion_Path_of_Providence": "侵蝕トンネル・睿治の路",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "侵蝕トンネル・聖頌の路",
      "Cavern_of_Corrosion_Path_of_Conflagration": "侵蝕トンネル・野焔の路",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "侵蝕トンネル・薬使の路"
    },
    "Team": {
      "name": "Dungeon.Team.name",
      "help": "Dungeon.Team.help",
      "1": "1",
      "2": "2",
      "3": "3",
      "4": "4",
      "5": "5",
      "6": "6"
    }
  },
  "DungeonDaily": {
    "_info": {
      "name": "DungeonDaily._info.name",
      "help": "DungeonDaily._info.help"
    },
    "CalyxGolden": {
      "name": "DungeonDaily.CalyxGolden.name",
      "help": "DungeonDaily.CalyxGolden.help",
      "do_not_achieve": "do_not_achieve",
      "Calyx_Golden_Memories": "疑似花萼（金）・回憶の蕾",
      "Calyx_Golden_Aether": "疑似花萼（金）・エーテルの蕾",
      "Calyx_Golden_Treasures": "疑似花萼（金）・秘蔵の蕾"
    },
    "CalyxCrimson": {
      "name": "DungeonDaily.CalyxCrimson.name",
      "help": "DungeonDaily.CalyxCrimson.help",
      "do_not_achieve": "do_not_achieve",
      "Calyx_Crimson_Destruction": "疑似花萼（赤）・壊滅の蕾",
      "Calyx_Crimson_Preservation": "疑似花萼（赤）・存護の蕾",
      "Calyx_Crimson_The_Hunt": "疑似花萼（赤）・巡狩の蕾",
      "Calyx_Crimson_Abundance": "疑似花萼（赤）・豊穣の蕾",
      "Calyx_Crimson_Erudition": "疑似花萼（赤）・知恵の蕾",
      "Calyx_Crimson_Harmony": "疑似花萼（赤）・調和の蕾",
      "Calyx_Crimson_Nihility": "疑似花萼（赤）・虚無の蕾"
    },
    "StagnantShadow": {
      "name": "DungeonDaily.StagnantShadow.name",
      "help": "DungeonDaily.StagnantShadow.help",
      "do_not_achieve": "do_not_achieve",
      "Stagnant_Shadow_Quanta": "凝結虚影・虚海の形",
      "Stagnant_Shadow_Gust": "凝結虚影・薫風の形",
      "Stagnant_Shadow_Fulmination": "凝結虚影・鳴雷の形",
      "Stagnant_Shadow_Blaze": "凝結虚影・炎華の形",
      "Stagnant_Shadow_Spike": "凝結虚影・切先の形",
      "Stagnant_Shadow_Rime": "凝結虚影・霜晶の形",
      "Stagnant_Shadow_Mirage": "凝結虚影・幻光の形",
      "Stagnant_Shadow_Icicle": "凝結虚影・氷柱の形",
      "Stagnant_Shadow_Doom": "凝結虚影・震厄の形",
      "Stagnant_Shadow_Puppetry": "凝結虚影・傀儡の形",
      "Stagnant_Shadow_Abomination": "凝結虚影・厄獣の形",
      "Stagnant_Shadow_Celestial": "凝結虚影・天人の形"
    },
    "CavernOfCorrosion": {
      "name": "DungeonDaily.CavernOfCorrosion.name",
      "help": "DungeonDaily.CavernOfCorrosion.help",
      "do_not_achieve": "do_not_achieve",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "侵蝕トンネル・霜風の路",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "侵蝕トンネル・迅拳の路",
      "Cavern_of_Corrosion_Path_of_Drifting": "侵蝕トンネル・漂泊の路",
      "Cavern_of_Corrosion_Path_of_Providence": "侵蝕トンネル・睿治の路",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "侵蝕トンネル・聖頌の路",
      "Cavern_of_Corrosion_Path_of_Conflagration": "侵蝕トンネル・野焔の路",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "侵蝕トンネル・薬使の路"
    }
  },
  "DungeonSupport": {
    "_info": {
      "name": "DungeonSupport._info.name",
      "help": "DungeonSupport._info.help"
    },
    "Use": {
      "name": "DungeonSupport.Use.name",
      "help": "DungeonSupport.Use.help",
      "always_use": "always_use",
      "when_daily": "when_daily",
      "do_not_use": "do_not_use"
    },
    "Character": {
      "name": "DungeonSupport.Character.name",
      "help": "DungeonSupport.Character.help",
      "FirstCharacter": "FirstCharacter",
      "Arlan": "アーラン",
      "Asta": "アスター",
      "Bailu": "白露",
      "Blade": "刃",
      "Bronya": "ブローニャ",
      "Clara": "クラーラ",
      "DanHeng": "丹恒",
      "DanHengImbibitorLunae": "丹恒・飲月",
      "Gepard": "ジェパード",
      "Herta": "ヘルタ",
      "Himeko": "姫子",
      "Hook": "フック",
      "JingYuan": "景元",
      "Kafka": "カフカ",
      "Luka": "ルカ",
      "Luocha": "羅刹",
      "March7th": "三月なのか",
      "Natasha": "ナターシャ",
      "Pela": "ペラ",
      "Qingque": "青雀",
      "Sampo": "サンポ",
      "Seele": "ゼーレ",
      "Serval": "セーバル",
      "SilverWolf": "銀狼",
      "Sushang": "素裳",
      "Tingyun": "停雲",
      "TrailblazerDestruction": "開拓者・壊滅",
      "TrailblazerPreservation": "開拓者・存護",
      "Welt": "ヴェルト",
      "Yanqing": "彦卿",
      "Yukong": "御空"
    }
  },
  "DungeonStorage": {
    "_info": {
      "name": "DungeonStorage._info.name",
      "help": "DungeonStorage._info.help"
    },
    "TrailblazePower": {
      "name": "DungeonStorage.TrailblazePower.name",
      "help": "DungeonStorage.TrailblazePower.help"
    },
    "DungeonDouble": {
      "name": "DungeonStorage.DungeonDouble.name",
      "help": "DungeonStorage.DungeonDouble.help"
    },
    "SimulatedUniverse": {
      "name": "DungeonStorage.SimulatedUniverse.name",
      "help": "DungeonStorage.SimulatedUniverse.help"
    }
  },
  "AchievableQuest": {
    "_info": {
      "name": "AchievableQuest._info.name",
      "help": "AchievableQuest._info.help"
    },
    "Complete_1_Daily_Mission": {
      "name": "デイリークエストを1回クリアする",
      "help": "AchievableQuest.Complete_1_Daily_Mission.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Clear_Calyx_Golden_1_times": {
      "name": "「疑似花萼（金）」を1回クリアする",
      "help": "AchievableQuest.Clear_Calyx_Golden_1_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Complete_Calyx_Crimson_1_time": {
      "name": "「疑似花萼（赤）」を1回クリアする",
      "help": "AchievableQuest.Complete_Calyx_Crimson_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Clear_Stagnant_Shadow_1_times": {
      "name": "「凝結虚影」を1回クリアする",
      "help": "AchievableQuest.Clear_Stagnant_Shadow_1_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Clear_Cavern_of_Corrosion_1_times": {
      "name": "「侵蝕トンネル」を1回クリアする",
      "help": "AchievableQuest.Clear_Cavern_of_Corrosion_1_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": {
      "name": "一度の戦闘で、異なる3種の属性の弱点撃破を発動する",
      "help": "AchievableQuest.In_a_single_battle_inflict_3_Weakness_Break_of_different_Types.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Inflict_Weakness_Break_5_times": {
      "name": "累計で弱点撃破効果を5回発動する",
      "help": "AchievableQuest.Inflict_Weakness_Break_5_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Defeat_a_total_of_20_enemies": {
      "name": "敵を累計で20体倒す",
      "help": "AchievableQuest.Defeat_a_total_of_20_enemies.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": {
      "name": "弱点を攻撃して戦闘に入り、3回勝利する",
      "help": "AchievableQuest.Enter_combat_by_attacking_enemy_Weakness_and_win_3_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Use_Technique_2_times": {
      "name": "秘技を累計2回発動する",
      "help": "AchievableQuest.Use_Technique_2_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Go_on_assignment_1_time": {
      "name": "依頼に1回派遣する",
      "help": "AchievableQuest.Go_on_assignment_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Take_1_photo": {
      "name": "1回撮影する",
      "help": "AchievableQuest.Take_1_photo.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Destroy_3_destructible_objects": {
      "name": "破壊できるオブジェクトを累計で3つ破壊する",
      "help": "AchievableQuest.Destroy_3_destructible_objects.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Complete_Forgotten_Hall_1_time": {
      "name": "「忘却の庭」を1回クリアする",
      "help": "AchievableQuest.Complete_Forgotten_Hall_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Complete_Echo_of_War_1_times": {
      "name": "「歴戦余韻」を1回クリアする",
      "help": "AchievableQuest.Complete_Echo_of_War_1_times.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Complete_1_stage_in_Simulated_Universe_Any_world": {
      "name": "「模擬宇宙」のエリアを1つクリアする（任意の世界）",
      "help": "AchievableQuest.Complete_1_stage_in_Simulated_Universe_Any_world.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Obtain_victory_in_combat_with_support_characters_1_time": {
      "name": "サポートキャラを使い、戦闘に1回勝利する",
      "help": "AchievableQuest.Obtain_victory_in_combat_with_support_characters_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Use_an_Ultimate_to_deal_the_final_blow_1_time": {
      "name": "必殺技で最後の一撃を1回与える",
      "help": "AchievableQuest.Use_an_Ultimate_to_deal_the_final_blow_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Level_up_any_character_1_time": {
      "name": "任意のキャラを1回レベルアップする",
      "help": "AchievableQuest.Level_up_any_character_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Level_up_any_Light_Cone_1_time": {
      "name": "任意の光円錐を1回レベルアップする",
      "help": "AchievableQuest.Level_up_any_Light_Cone_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Level_up_any_Relic_1_time": {
      "name": "任意の遺物を1回レベルアップする",
      "help": "AchievableQuest.Level_up_any_Relic_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Salvage_any_Relic": {
      "name": "任意の遺物1つを分解する",
      "help": "AchievableQuest.Salvage_any_Relic.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Synthesize_Consumable_1_time": {
      "name": "消耗品を1回合成する",
      "help": "AchievableQuest.Synthesize_Consumable_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Synthesize_material_1_time": {
      "name": "素材を1回合成する",
      "help": "AchievableQuest.Synthesize_material_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    },
    "Use_Consumables_1_time": {
      "name": "消耗品を1個使う",
      "help": "AchievableQuest.Use_Consumables_1_time.help",
      "achievable": "achievable",
      "not_set": "not_set",
      "not_supported": "not_supported"
    }
  },
  "DailyStorage": {
    "_info": {
      "name": "DailyStorage._info.name",
      "help": "DailyStorage._info.help"
    },
    "DailyActivity": {
      "name": "DailyStorage.DailyActivity.name",
      "help": "DailyStorage.DailyActivity.help"
    },
    "DailyQuest": {
      "name": "DailyStorage.DailyQuest.name",
      "help": "DailyStorage.DailyQuest.help"
    }
  },
  "BattlePassStorage": {
    "_info": {
      "name": "BattlePassStorage._info.name",
      "help": "BattlePassStorage._info.help"
    },
    "BattlePassLevel": {
      "name": "BattlePassStorage.BattlePassLevel.name",
      "help": "BattlePassStorage.BattlePassLevel.help"
    },
    "BattlePassTodayQuest": {
      "name": "BattlePassStorage.BattlePassTodayQuest.name",
      "help": "BattlePassStorage.BattlePassTodayQuest.help"
    }
  },
  "Assignment": {
    "_info": {
      "name": "依頼設定",
      "help": ""
    },
    "Name_1": {
      "name": "依頼 1",
      "help": "",
      "Nine_Billion_Names": "消滅した原核（九十億の御名）",
      "Destruction_of_the_Destroyer": "略奪の本能（壊滅者の覆没）",
      "Winter_Soldiers": "シルバーメインの釦（寒冬の戦士たち）",
      "Born_to_Obey": "古代パーツ（生まれながらに服従する）",
      "Root_Out_the_Turpitude": "永寿の萌芽（悪孽を根絶やしに）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機関（剣戟を焼却する火帝炉）",
      "Nameless_Land_Nameless_People": "キャラクターの経験値素材（無名の地、無名の人）",
      "Akashic_Records": "光円錐強化素材（アーカーシャの記録）",
      "The_Invisible_Hand": "信用ポイント（見えざる手）",
      "Abandoned_and_Insulted": "燃素と金属（捨てられしものと傷つけられしもの）",
      "Spring_of_Life": "仮想粒子と固形純水（生命の泉）",
      "The_Land_of_Gold": "タンパク米と基本食材（黄金の大地）",
      "The_Blossom_in_the_Storm": "気態流体と種子（嵐の中で咲き誇る花）",
      "Legend_of_the_Puppet_Master": "玉兆単元&廃棄された機巧部品（傀儡師伝説）",
      "The_Wages_of_Humanity": "薬草抽出物&一人稲（人類扶養）"
    },
    "Name_2": {
      "name": "依頼 2",
      "help": "",
      "Nine_Billion_Names": "消滅した原核（九十億の御名）",
      "Destruction_of_the_Destroyer": "略奪の本能（壊滅者の覆没）",
      "Winter_Soldiers": "シルバーメインの釦（寒冬の戦士たち）",
      "Born_to_Obey": "古代パーツ（生まれながらに服従する）",
      "Root_Out_the_Turpitude": "永寿の萌芽（悪孽を根絶やしに）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機関（剣戟を焼却する火帝炉）",
      "Nameless_Land_Nameless_People": "キャラクターの経験値素材（無名の地、無名の人）",
      "Akashic_Records": "光円錐強化素材（アーカーシャの記録）",
      "The_Invisible_Hand": "信用ポイント（見えざる手）",
      "Abandoned_and_Insulted": "燃素と金属（捨てられしものと傷つけられしもの）",
      "Spring_of_Life": "仮想粒子と固形純水（生命の泉）",
      "The_Land_of_Gold": "タンパク米と基本食材（黄金の大地）",
      "The_Blossom_in_the_Storm": "気態流体と種子（嵐の中で咲き誇る花）",
      "Legend_of_the_Puppet_Master": "玉兆単元&廃棄された機巧部品（傀儡師伝説）",
      "The_Wages_of_Humanity": "薬草抽出物&一人稲（人類扶養）"
    },
    "Name_3": {
      "name": "依頼 3",
      "help": "",
      "Nine_Billion_Names": "消滅した原核（九十億の御名）",
      "Destruction_of_the_Destroyer": "略奪の本能（壊滅者の覆没）",
      "Winter_Soldiers": "シルバーメインの釦（寒冬の戦士たち）",
      "Born_to_Obey": "古代パーツ（生まれながらに服従する）",
      "Root_Out_the_Turpitude": "永寿の萌芽（悪孽を根絶やしに）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機関（剣戟を焼却する火帝炉）",
      "Nameless_Land_Nameless_People": "キャラクターの経験値素材（無名の地、無名の人）",
      "Akashic_Records": "光円錐強化素材（アーカーシャの記録）",
      "The_Invisible_Hand": "信用ポイント（見えざる手）",
      "Abandoned_and_Insulted": "燃素と金属（捨てられしものと傷つけられしもの）",
      "Spring_of_Life": "仮想粒子と固形純水（生命の泉）",
      "The_Land_of_Gold": "タンパク米と基本食材（黄金の大地）",
      "The_Blossom_in_the_Storm": "気態流体と種子（嵐の中で咲き誇る花）",
      "Legend_of_the_Puppet_Master": "玉兆単元&廃棄された機巧部品（傀儡師伝説）",
      "The_Wages_of_Humanity": "薬草抽出物&一人稲（人類扶養）"
    },
    "Name_4": {
      "name": "依頼 4",
      "help": "",
      "Nine_Billion_Names": "消滅した原核（九十億の御名）",
      "Destruction_of_the_Destroyer": "略奪の本能（壊滅者の覆没）",
      "Winter_Soldiers": "シルバーメインの釦（寒冬の戦士たち）",
      "Born_to_Obey": "古代パーツ（生まれながらに服従する）",
      "Root_Out_the_Turpitude": "永寿の萌芽（悪孽を根絶やしに）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機関（剣戟を焼却する火帝炉）",
      "Nameless_Land_Nameless_People": "キャラクターの経験値素材（無名の地、無名の人）",
      "Akashic_Records": "光円錐強化素材（アーカーシャの記録）",
      "The_Invisible_Hand": "信用ポイント（見えざる手）",
      "Abandoned_and_Insulted": "燃素と金属（捨てられしものと傷つけられしもの）",
      "Spring_of_Life": "仮想粒子と固形純水（生命の泉）",
      "The_Land_of_Gold": "タンパク米と基本食材（黄金の大地）",
      "The_Blossom_in_the_Storm": "気態流体と種子（嵐の中で咲き誇る花）",
      "Legend_of_the_Puppet_Master": "玉兆単元&廃棄された機巧部品（傀儡師伝説）",
      "The_Wages_of_Humanity": "薬草抽出物&一人稲（人類扶養）"
    },
    "Duration": {
      "name": "派遣時間",
      "help": "",
      "4": "4",
      "8": "8",
      "12": "12",
      "20": "20"
    },
    "Assignment": {
      "name": "Assignment.Assignment.name",
      "help": "Assignment.Assignment.help"
    }
  },
  "RoguePath": {
    "_info": {
      "name": "RoguePath._info.name",
      "help": "RoguePath._info.help"
    },
    "Path": {
      "name": "RoguePath.Path.name",
      "help": "RoguePath.Path.help",
      "Preservation": "Preservation",
      "Remembrance": "Remembrance",
      "Nihility": "Nihility",
      "Abundance": "Abundance",
      "The_Hunt": "The_Hunt",
      "Destruction": "Destruction",
      "Elation": "Elation"
    },
    "Bonus": {
      "name": "RoguePath.Bonus.name",
      "help": "RoguePath.Bonus.help",
      "Blessing Cosmos": "Blessing Cosmos",
      "Miracle Cosmos": "Miracle Cosmos",
      "Fragmented Cosmos": "Fragmented Cosmos"
    },
    "PresetResonanceFilter": {
      "name": "RoguePath.PresetResonanceFilter.name",
      "help": "RoguePath.PresetResonanceFilter.help",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "ResonanceSelectionStrategy": {
      "name": "RoguePath.ResonanceSelectionStrategy.name",
      "help": "RoguePath.ResonanceSelectionStrategy.help",
      "follow-presets": "follow-presets",
      "unrecorded-first": "unrecorded-first",
      "before-random": "before-random"
    },
    "CustomResonanceFilter": {
      "name": "RoguePath.CustomResonanceFilter.name",
      "help": "RoguePath.CustomResonanceFilter.help"
    }
  },
  "RogueBlessing": {
    "_info": {
      "name": "RogueBlessing._info.name",
      "help": "RogueBlessing._info.help"
    },
    "PresetBlessingFilter": {
      "name": "RogueBlessing.PresetBlessingFilter.name",
      "help": "RogueBlessing.PresetBlessingFilter.help",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "BlessingSelectionStrategy": {
      "name": "RogueBlessing.BlessingSelectionStrategy.name",
      "help": "RogueBlessing.BlessingSelectionStrategy.help",
      "follow-presets": "follow-presets",
      "unrecorded-first": "unrecorded-first",
      "before-random": "before-random"
    },
    "CustomBlessingFilter": {
      "name": "RogueBlessing.CustomBlessingFilter.name",
      "help": "RogueBlessing.CustomBlessingFilter.help"
    }
  },
  "RogueCurio": {
    "_info": {
      "name": "RogueCurio._info.name",
      "help": "RogueCurio._info.help"
    },
    "PresetCurioFilter": {
      "name": "RogueCurio.PresetCurioFilter.name",
      "help": "RogueCurio.PresetCurioFilter.help",
      "preset-1": "preset-1",
      "custom": "custom"
    },
    "CurioSelectionStrategy": {
      "name": "RogueCurio.CurioSelectionStrategy.name",
      "help": "RogueCurio.CurioSelectionStrategy.help",
      "follow-presets": "follow-presets",
      "unrecorded-first": "unrecorded-first",
      "before-random": "before-random"
    },
    "CustomCurioFilter": {
      "name": "RogueCurio.CustomCurioFilter.name",
      "help": "RogueCurio.CustomCurioFilter.help"
    }
  },
  "Gui": {
    "Aside": {
      "Install": "インストール",
      "Home": "Gui.Aside.Home",
      "Develop": "開発",
      "Performance": "機能",
      "Setting": "設定",
      "AddAlas": "追加"
    },
    "Button": {
      "Start": "実行",
      "Stop": "中止",
      "ScrollON": "自動スクロール ON",
      "ScrollOFF": "自動スクロール OFF",
      "ClearLog": "ログクリーニング",
      "Setting": "設定",
      "CheckUpdate": "アップデータチェック",
      "ClickToUpdate": "アップデータ実行",
      "RetryUpdate": "アップデータ再試行",
      "CancelUpdate": "アップデータ中止"
    },
    "Toast": {
      "DisableTranslateMode": "クリックして翻訳モードを中止します",
      "ConfigSaved": "コンフィグ設定は保存されました",
      "AlasIsRunning": "スケジューラーはもう実行しています",
      "ClickToUpdate": "新しいアップデータがあります。クリックしてアップデータ"
    },
    "Status": {
      "Running": "実行中",
      "Inactive": "実行中止",
      "Warning": "エラー発生",
      "Updating": "アップデータを待っています"
    },
    "MenuAlas": {
      "Overview": "概要",
      "Log": "実行ログ"
    },
    "MenuDevelop": {
      "HomePage": "ホームページ",
      "Translate": "翻訳",
      "Update": "アップデータ",
      "Remote": "遠隔操作",
      "Utils": "ツール"
    },
    "Overview": {
      "Scheduler": "スケジューラー",
      "Log": "ログ",
      "Running": "実行中",
      "Pending": "隊列中",
      "Waiting": "Waiting",
      "NoTask": "No Task"
    },
    "Dashboard": {
      "NoData": "Gui.Dashboard.NoData",
      "TimeError": "Gui.Dashboard.TimeError",
      "JustNow": "Gui.Dashboard.JustNow",
      "MinutesAgo": "Gui.Dashboard.MinutesAgo",
      "HoursAgo": "Gui.Dashboard.HoursAgo",
      "DaysAgo": "Gui.Dashboard.DaysAgo",
      "LongTimeAgo": "Gui.Dashboard.LongTimeAgo"
    },
    "AddAlas": {
      "PopupTitle": "新しいコンフィグを追加",
      "NewName": "コンフィグ名",
      "CopyFrom": "既存コンフィグからコピー",
      "Confirm": "追加",
      "FileExist": "既存コンフィグと同じネーミングとなっていますから別名前を入力してください",
      "InvalidChar": "コンフィグ名には下記の文字を含めることはできません：.\\/:*?\"<>|",
      "InvalidPrefixTemplate": "設定ファイル名は temlpate で始めることはできません"
    },
    "Update": {
      "UpToDate": "今Alasは最新バージョンです",
      "HaveUpdate": "新しいアップデータがあります",
      "UpdateStart": "アップデータ開始",
      "UpdateWait": "全てのプロセスの完了を待っています",
      "UpdateRun": "アップデータ中",
      "UpdateSuccess": "アップデータ完了、再起動しています",
      "UpdateFailed": "アップデータ失敗、./log/*_gui.txtでログをチェックしてください",
      "UpdateChecking": "アップデータチェック中",
      "UpdateCancel": "アップデータ中止、再起動しています",
      "UpdateFinish": "アップデータ完了、再起動してください",
      "Local": "ロケール",
      "Upstream": "オンライン",
      "Author": "提出者",
      "Time": "提出時間",
      "Message": "提出内容",
      "DisabledWarn": "アップデータモジュールは稼働されませんのでAlasを再起動してください",
      "DetailedHistory": "詳しい提出履歴"
    },
    "Remote": {
      "Running": "実行中",
      "NotRunning": "サーバーとの接続が中断したため、実行していない",
      "NotEnable": "未启用，在 deploy.yaml 中设置 webui 密码并启用远程控制",
      "EntryPoint": "远程访问 url 地址:",
      "ConfigureHint": "配置教程：",
      "SSHNotInstall": "システムでsshツールが探さない、sshツールをインストールしてください"
    },
    "Text": {
      "InvalidFeedBack": "フォーマットエラー。 例：{0}",
      "Clear": "消除"
    }
  }
}
```

`module/config/i18n/zh-CN.json`:

```json
{
  "Menu": {
    "Alas": {
      "name": "SRC",
      "help": ""
    },
    "Daily": {
      "name": "每日",
      "help": ""
    },
    "Rogue": {
      "name": "模拟宇宙",
      "help": ""
    }
  },
  "Task": {
    "Alas": {
      "name": "SRC设置",
      "help": ""
    },
    "Restart": {
      "name": "异常处理",
      "help": ""
    },
    "Dungeon": {
      "name": "每日副本",
      "help": ""
    },
    "DailyQuest": {
      "name": "每日任务",
      "help": ""
    },
    "BattlePass": {
      "name": "无名勋礼",
      "help": ""
    },
    "Assignment": {
      "name": "委托",
      "help": ""
    },
    "Rogue": {
      "name": "模拟宇宙",
      "help": "模拟宇宙还在开发中，任务不会被运行"
    }
  },
  "Scheduler": {
    "_info": {
      "name": "任务设置",
      "help": ""
    },
    "Enable": {
      "name": "启用该功能",
      "help": "将这个任务加入调度器",
      "True": "已启用",
      "False": "False"
    },
    "NextRun": {
      "name": "下一次运行时间",
      "help": "自动计算的数值，不需要手动修改。清空后将立即运行"
    },
    "Command": {
      "name": "内部任务名称",
      "help": ""
    },
    "ServerUpdate": {
      "name": "服务器刷新时间",
      "help": "一些任务运行成功后，将推迟下一次运行至服务器刷新时间\n自动换算时区，一般不需要修改"
    }
  },
  "Emulator": {
    "_info": {
      "name": "模拟器设置",
      "help": ""
    },
    "Serial": {
      "name": "模拟器 Serial",
      "help": "常见的模拟器 Serial 可以查询下方列表\n填 \"auto\" 自动检测模拟器，多个模拟器正在运行或使用不支持自动检测的模拟器时无法使用 \"auto\"，必须手动填写\n\n模拟器默认 Serial：\n- 蓝叠模拟器 127.0.0.1:5555\n- 蓝叠模拟器4 Hyper-v版，填\"bluestacks4-hyperv\"自动连接，多开填\"bluestacks4-hyperv-2\"以此类推\n- 蓝叠模拟器5 Hyper-v版，填\"bluestacks5-hyperv\"自动连接，多开填\"bluestacks5-hyperv-1\"以此类推\n- 夜神模拟器 127.0.0.1:62001\n- 夜神模拟器64位 127.0.0.1:59865\n- MuMu模拟器/MuMu模拟器X 127.0.0.1:7555\n- MuMu模拟器12 127.0.0.1:16384\n- 逍遥模拟器 127.0.0.1:21503\n- 雷电模拟器 emulator-5554 或 127.0.0.1:5555\n- WSA，填\"wsa-0\"使游戏在后台运行，需要使用第三方软件操控或关闭（建议使用scrcpy操控）\n如果你使用了模拟器的多开功能，它们的 Serial 将不是默认的，可以在 console.bat 中执行 `adb devices` 查询，或根据模拟器官方的教程填写"
    },
    "PackageName": {
      "name": "游戏服务器",
      "help": "模拟器上装有多个游戏客户端时，需要手动选择服务器",
      "auto": "自动检测",
      "com.miHoYo.hkrpg": "CN",
      "com.HoYoverse.hkrpgoversea": "OVERSEA",
      "com.miHoYo.hkrpg.bilibili": "CN Bilibili渠道服 com.miHoYo.hkrpg.bilibili"
    },
    "ScreenshotMethod": {
      "name": "模拟器截图方案",
      "help": "使用自动选择时，将执行一次性能测试并自动更改为最快的截图方案\n一般情况下的速度: DroidCast_raw >> aScreenCap_nc > ADB_nc >>> aScreenCap > uiautomator2 ~= ADB\n运行 工具 - 性能测试 以寻找最快的方案",
      "auto": "自动选择最快的",
      "ADB": "ADB",
      "ADB_nc": "ADB_nc",
      "uiautomator2": "uiautomator2",
      "aScreenCap": "aScreenCap",
      "aScreenCap_nc": "aScreenCap_nc",
      "DroidCast": "DroidCast",
      "DroidCast_raw": "DroidCast_raw",
      "scrcpy": "scrcpy"
    },
    "ControlMethod": {
      "name": "模拟器控制方案",
      "help": "速度: MaaTouch = minitouch >>> uiautomator2 ~= ADB\n建议选MaaTouch",
      "minitouch": "minitouch",
      "MaaTouch": "MaaTouch"
    },
    "AdbRestart": {
      "name": "在检测不到设备的时候尝试重启adb",
      "help": ""
    }
  },
  "EmulatorInfo": {
    "_info": {
      "name": "模拟器设置",
      "help": "下列数值是根据Serial自动填充的，如果不懂请不要随意修改"
    },
    "Emulator": {
      "name": "模拟器类型",
      "help": "",
      "auto": "自动检测",
      "NoxPlayer": "夜神模拟器",
      "NoxPlayer64": "夜神模拟器64位",
      "BlueStacks4": "蓝叠模拟器4",
      "BlueStacks5": "蓝叠模拟器5",
      "BlueStacks4HyperV": "蓝叠模拟器4 Hyper-V",
      "BlueStacks5HyperV": "蓝叠模拟器5 Hyper-V",
      "LDPlayer3": "雷电模拟器3",
      "LDPlayer4": "雷电模拟器4",
      "LDPlayer9": "雷电模拟器9",
      "MuMuPlayer": "MuMu模拟器",
      "MuMuPlayerX": "MuMu模拟器X",
      "MuMuPlayer12": "MuMu模拟器12",
      "MEmuPlayer": "逍遥模拟器"
    },
    "name": {
      "name": "模拟器实例名称",
      "help": ""
    },
    "path": {
      "name": "模拟器安装路径",
      "help": ""
    }
  },
  "Error": {
    "_info": {
      "name": "调试设置",
      "help": ""
    },
    "Restart": {
      "name": "出错时，重启游戏",
      "help": "",
      "game": "重启游戏",
      "game_emulator": "重启模拟器和游戏"
    },
    "SaveError": {
      "name": "出错时，保存 Log 和截图",
      "help": ""
    },
    "ScreenshotLength": {
      "name": "出错时，保留最后 X 张截图",
      "help": ""
    },
    "OnePushConfig": {
      "name": "错误推送设置",
      "help": "发生无法处理的异常后，使用 Onepush 推送一条错误信息。配置方法见文档：https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/Onepush-configuration-%5BCN%5D"
    }
  },
  "Optimization": {
    "_info": {
      "name": "优化设置",
      "help": ""
    },
    "ScreenshotInterval": {
      "name": "放慢截图速度至 X 秒一张",
      "help": "执行两次截图之间的最小间隔，限制在 0.1 ~ 0.3，对于高配置电脑能降低 CPU 占用"
    },
    "CombatScreenshotInterval": {
      "name": "战斗中放慢截图速度至 X 秒一张",
      "help": "执行两次截图之间的最小间隔，限制在 0.1 ~ 1.0，能降低战斗时的 CPU 占用"
    },
    "WhenTaskQueueEmpty": {
      "name": "当任务队列清空后",
      "help": "无任务时关闭游戏，能在收菜期间降低 CPU 占用",
      "stay_there": "停在原处",
      "goto_main": "前往主界面",
      "close_game": "关闭游戏"
    }
  },
  "Dungeon": {
    "_info": {
      "name": "每日副本设置",
      "help": "打本清体力直到清空"
    },
    "Name": {
      "name": "副本名称",
      "help": "默认打本设置",
      "Calyx_Golden_Memories": "材料：角色经验（回忆之蕾•拟造花萼金）",
      "Calyx_Golden_Aether": "材料：武器经验（以太之蕾•拟造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用点（藏珍之蕾•拟造花萼金）",
      "Calyx_Crimson_Destruction": "行迹材料：毁灭（毁灭之蕾•拟造花萼赤）",
      "Calyx_Crimson_Preservation": "行迹材料：存护（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行迹材料：巡猎（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_Abundance": "行迹材料：丰饶（丰饶之蕾•拟造花萼赤）",
      "Calyx_Crimson_Erudition": "行迹材料：智识（智识之蕾•拟造花萼赤）",
      "Calyx_Crimson_Harmony": "行迹材料：同谐（同谐之蕾•拟造花萼赤）",
      "Calyx_Crimson_Nihility": "行迹材料：虚无（虚无之蕾•拟造花萼赤）",
      "Stagnant_Shadow_Quanta": "角色晋阶材料：量子（空海之形•凝滞虚影）",
      "Stagnant_Shadow_Gust": "角色晋阶材料：风（巽风之形•凝滞虚影）",
      "Stagnant_Shadow_Fulmination": "角色晋阶材料：雷（鸣雷之形•凝滞虚影）",
      "Stagnant_Shadow_Blaze": "角色晋阶材料：火（炎华之形•凝滞虚影）",
      "Stagnant_Shadow_Spike": "角色晋阶材料：物理（锋芒之形•凝滞虚影）",
      "Stagnant_Shadow_Rime": "角色晋阶材料：冰（霜晶之形•凝滞虚影）",
      "Stagnant_Shadow_Mirage": "角色晋阶材料：虚数（幻光之形•凝滞虚影）",
      "Stagnant_Shadow_Icicle": "角色晋阶材料：冰（冰棱之形•凝滞虚影）",
      "Stagnant_Shadow_Doom": "角色晋阶材料：雷（震厄之形•凝滞虚影）",
      "Stagnant_Shadow_Puppetry": "角色晋阶材料：虚数（偃偶之形•凝滞虚影）",
      "Stagnant_Shadow_Abomination": "角色晋阶材料：量子（孽兽之形•凝滞虚影）",
      "Stagnant_Shadow_Celestial": "角色晋阶材料：风（天人之形•凝滞虚影）",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遗器：冰套+风套（霜风之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遗器：物理套+击破套（迅拳之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遗器：治疗套+快枪手（漂泊之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遗器：铁卫套+量子套（睿治之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遗器：防御套+雷套（圣颂之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遗器：火套+虚数套（野焰之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遗器：生命套+速度套（药使之径•侵蚀隧洞）"
    },
    "NameAtDoubleCalyx": {
      "name": "有双倍花活动时，选择副本",
      "help": "次数耗尽后回退到默认打本设置",
      "do_not_participate": "不参与活动",
      "Calyx_Golden_Memories": "材料：角色经验（回忆之蕾•拟造花萼金）",
      "Calyx_Golden_Aether": "材料：武器经验（以太之蕾•拟造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用点（藏珍之蕾•拟造花萼金）",
      "Calyx_Crimson_Destruction": "行迹材料：毁灭（毁灭之蕾•拟造花萼赤）",
      "Calyx_Crimson_Preservation": "行迹材料：存护（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行迹材料：巡猎（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_Abundance": "行迹材料：丰饶（丰饶之蕾•拟造花萼赤）",
      "Calyx_Crimson_Erudition": "行迹材料：智识（智识之蕾•拟造花萼赤）",
      "Calyx_Crimson_Harmony": "行迹材料：同谐（同谐之蕾•拟造花萼赤）",
      "Calyx_Crimson_Nihility": "行迹材料：虚无（虚无之蕾•拟造花萼赤）"
    },
    "NameAtDoubleRelic": {
      "name": "有遗器活动时，选择副本",
      "help": "次数耗尽后回退到默认打本设置",
      "do_not_participate": "不参与活动",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遗器：冰套+风套（霜风之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遗器：物理套+击破套（迅拳之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遗器：治疗套+快枪手（漂泊之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遗器：铁卫套+量子套（睿治之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遗器：防御套+雷套（圣颂之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遗器：火套+虚数套（野焰之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遗器：生命套+速度套（药使之径•侵蚀隧洞）"
    },
    "Team": {
      "name": "打本队伍",
      "help": "",
      "1": "1",
      "2": "2",
      "3": "3",
      "4": "4",
      "5": "5",
      "6": "6"
    }
  },
  "DungeonDaily": {
    "_info": {
      "name": "每日任务设置",
      "help": "打一次特定的本，以满足每日任务的要求"
    },
    "CalyxGolden": {
      "name": "完成1次拟造花萼（金）",
      "help": "",
      "do_not_achieve": "不完成这个任务",
      "Calyx_Golden_Memories": "材料：角色经验（回忆之蕾•拟造花萼金）",
      "Calyx_Golden_Aether": "材料：武器经验（以太之蕾•拟造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用点（藏珍之蕾•拟造花萼金）"
    },
    "CalyxCrimson": {
      "name": "完成1次拟造花萼（赤）",
      "help": "",
      "do_not_achieve": "不完成这个任务",
      "Calyx_Crimson_Destruction": "行迹材料：毁灭（毁灭之蕾•拟造花萼赤）",
      "Calyx_Crimson_Preservation": "行迹材料：存护（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行迹材料：巡猎（存护之蕾•拟造花萼赤）",
      "Calyx_Crimson_Abundance": "行迹材料：丰饶（丰饶之蕾•拟造花萼赤）",
      "Calyx_Crimson_Erudition": "行迹材料：智识（智识之蕾•拟造花萼赤）",
      "Calyx_Crimson_Harmony": "行迹材料：同谐（同谐之蕾•拟造花萼赤）",
      "Calyx_Crimson_Nihility": "行迹材料：虚无（虚无之蕾•拟造花萼赤）"
    },
    "StagnantShadow": {
      "name": "完成1次凝滞虚影",
      "help": "",
      "do_not_achieve": "不完成这个任务",
      "Stagnant_Shadow_Quanta": "角色晋阶材料：量子（空海之形•凝滞虚影）",
      "Stagnant_Shadow_Gust": "角色晋阶材料：风（巽风之形•凝滞虚影）",
      "Stagnant_Shadow_Fulmination": "角色晋阶材料：雷（鸣雷之形•凝滞虚影）",
      "Stagnant_Shadow_Blaze": "角色晋阶材料：火（炎华之形•凝滞虚影）",
      "Stagnant_Shadow_Spike": "角色晋阶材料：物理（锋芒之形•凝滞虚影）",
      "Stagnant_Shadow_Rime": "角色晋阶材料：冰（霜晶之形•凝滞虚影）",
      "Stagnant_Shadow_Mirage": "角色晋阶材料：虚数（幻光之形•凝滞虚影）",
      "Stagnant_Shadow_Icicle": "角色晋阶材料：冰（冰棱之形•凝滞虚影）",
      "Stagnant_Shadow_Doom": "角色晋阶材料：雷（震厄之形•凝滞虚影）",
      "Stagnant_Shadow_Puppetry": "角色晋阶材料：虚数（偃偶之形•凝滞虚影）",
      "Stagnant_Shadow_Abomination": "角色晋阶材料：量子（孽兽之形•凝滞虚影）",
      "Stagnant_Shadow_Celestial": "角色晋阶材料：风（天人之形•凝滞虚影）"
    },
    "CavernOfCorrosion": {
      "name": "完成1次侵蚀隧洞",
      "help": "",
      "do_not_achieve": "不完成这个任务",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遗器：冰套+风套（霜风之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遗器：物理套+击破套（迅拳之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遗器：治疗套+快枪手（漂泊之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遗器：铁卫套+量子套（睿治之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遗器：防御套+雷套（圣颂之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遗器：火套+虚数套（野焰之径•侵蚀隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遗器：生命套+速度套（药使之径•侵蚀隧洞）"
    }
  },
  "DungeonSupport": {
    "_info": {
      "name": "支援设置",
      "help": ""
    },
    "Use": {
      "name": "使用好友支援",
      "help": "",
      "always_use": "总是使用",
      "when_daily": "仅当每日任务需要时使用",
      "do_not_use": "不使用"
    },
    "Character": {
      "name": "好友支援角色",
      "help": "选择好友支援角色，未找到则选择默认（第一个）角色",
      "FirstCharacter": "支援列表第一个角色",
      "Arlan": "阿兰",
      "Asta": "艾丝妲",
      "Bailu": "白露",
      "Blade": "刃",
      "Bronya": "布洛妮娅",
      "Clara": "克拉拉",
      "DanHeng": "丹恒",
      "DanHengImbibitorLunae": "丹恒•饮月",
      "Gepard": "杰帕德",
      "Herta": "黑塔",
      "Himeko": "姬子",
      "Hook": "虎克",
      "JingYuan": "景元",
      "Kafka": "卡芙卡",
      "Luka": "卢卡",
      "Luocha": "罗刹",
      "March7th": "三月七",
      "Natasha": "娜塔莎",
      "Pela": "佩拉",
      "Qingque": "青雀",
      "Sampo": "桑博",
      "Seele": "希儿",
      "Serval": "希露瓦",
      "SilverWolf": "银狼",
      "Sushang": "素裳",
      "Tingyun": "停云",
      "TrailblazerDestruction": "开拓者•毁灭",
      "TrailblazerPreservation": "开拓者•存护",
      "Welt": "瓦尔特",
      "Yanqing": "彦卿",
      "Yukong": "驭空"
    }
  },
  "DungeonStorage": {
    "_info": {
      "name": "DungeonStorage._info.name",
      "help": "DungeonStorage._info.help"
    },
    "TrailblazePower": {
      "name": "开拓力",
      "help": ""
    },
    "DungeonDouble": {
      "name": "副本双倍",
      "help": ""
    },
    "SimulatedUniverse": {
      "name": "模拟宇宙",
      "help": ""
    }
  },
  "AchievableQuest": {
    "_info": {
      "name": "可完成的任务",
      "help": "任务状态为 \"未设置\" 时需要按照要求设置SRC，才能启用任务\n注意：请让更多的任务处于 \"可完成\" 状态，否则SRC可能无法完成500点的活跃度要求"
    },
    "Complete_1_Daily_Mission": {
      "name": "完成1个日常任务",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Clear_Calyx_Golden_1_times": {
      "name": "完成1次「拟造花萼（金）」",
      "help": "需要设置并启用\"每日副本\"任务",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Complete_Calyx_Crimson_1_time": {
      "name": "完成1次「拟造花萼（赤）」",
      "help": "需要设置并启用\"每日副本\"任务",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Clear_Stagnant_Shadow_1_times": {
      "name": "完成1次「凝滞虚影」",
      "help": "需要设置并启用\"每日副本\"任务",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Clear_Cavern_of_Corrosion_1_times": {
      "name": "完成1次「侵蚀隧洞」",
      "help": "需要设置并启用\"每日副本\"任务",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": {
      "name": "单场战斗中，触发3种不同属性的弱点击破",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Inflict_Weakness_Break_5_times": {
      "name": "累计触发弱点击破效果5次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Defeat_a_total_of_20_enemies": {
      "name": "累计消灭20个敌人",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": {
      "name": "利用弱点进入战斗并获胜3次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Use_Technique_2_times": {
      "name": "累计施放2次秘技",
      "help": "默认可完成，将前往深渊一施放2次秘技",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Go_on_assignment_1_time": {
      "name": "派遣1次委托",
      "help": "需要设置并启用\"委托\"任务",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Take_1_photo": {
      "name": "拍照1次",
      "help": "默认可完成",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Destroy_3_destructible_objects": {
      "name": "累计击碎3个可破坏物",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Complete_Forgotten_Hall_1_time": {
      "name": "完成1次「忘却之庭」",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Complete_Echo_of_War_1_times": {
      "name": "完成1次「历战余响」",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Complete_1_stage_in_Simulated_Universe_Any_world": {
      "name": "通关「模拟宇宙」（任意世界）的1个区域",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Obtain_victory_in_combat_with_support_characters_1_time": {
      "name": "使用支援角色并获得战斗胜利1次",
      "help": "需要设置并启用\"每日副本\"，且设置好友支援",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Use_an_Ultimate_to_deal_the_final_blow_1_time": {
      "name": "施放终结技造成制胜一击1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Level_up_any_character_1_time": {
      "name": "将任意角色等级提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Level_up_any_Light_Cone_1_time": {
      "name": "将任意光锥等级提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Level_up_any_Relic_1_time": {
      "name": "将任意遗器等级提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Salvage_any_Relic": {
      "name": "分解任意1件遗器",
      "help": "默认可完成，将分解遗器稀有度倒序的第一个",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Synthesize_Consumable_1_time": {
      "name": "合成1次消耗品",
      "help": "默认可完成，将合成最低级零食",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Synthesize_material_1_time": {
      "name": "合成1次材料",
      "help": "默认可完成，将合成最低级材料",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    },
    "Use_Consumables_1_time": {
      "name": "使用1件消耗品",
      "help": "默认可完成，将使用护具，无材料时先合成再使用",
      "achievable": "可完成",
      "not_set": "未设置",
      "not_supported": "暂未支持"
    }
  },
  "DailyStorage": {
    "_info": {
      "name": "DailyStorage._info.name",
      "help": "DailyStorage._info.help"
    },
    "DailyActivity": {
      "name": "活跃度",
      "help": ""
    },
    "DailyQuest": {
      "name": "每日任务",
      "help": ""
    }
  },
  "BattlePassStorage": {
    "_info": {
      "name": "BattlePassStorage._info.name",
      "help": "BattlePassStorage._info.help"
    },
    "BattlePassLevel": {
      "name": "无名勋礼",
      "help": ""
    },
    "BattlePassTodayQuest": {
      "name": "无名勋礼任务",
      "help": ""
    }
  },
  "Assignment": {
    "_info": {
      "name": "委托设置",
      "help": "领取奖励并派遣，优先处理指定委托\n若处理指定委托之后未达到上限，则按经验材料 → 角色专属素材 → 合成材料的顺序来派遣委托"
    },
    "Name_1": {
      "name": "第1个委托选择",
      "help": "",
      "Nine_Billion_Names": "熄灭原核（九十亿个名字）",
      "Destruction_of_the_Destroyer": "掠夺的本能（毁灭者的覆灭）",
      "Winter_Soldiers": "铁卫扣饰（寒冬的战士们）",
      "Born_to_Obey": "古代零件（生而服从）",
      "Root_Out_the_Turpitude": "永寿幼芽（根除恶孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造机杼（火帝动炉销剑戟）",
      "Nameless_Land_Nameless_People": "角色经验材料（无名之地，无名之人）",
      "Akashic_Records": "光锥强化材料（阿卡夏记录）",
      "The_Invisible_Hand": "信用点（看不见的手）",
      "Abandoned_and_Insulted": "燃素&金属（被废弃与损害的）",
      "Spring_of_Life": "虚粒子&固态净水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黄金大地）",
      "The_Blossom_in_the_Storm": "气态流体&种子（风暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆单元&废弃机巧零件（偃师传说）",
      "The_Wages_of_Humanity": "药草提取物&一人嘉禾（赡养人类）"
    },
    "Name_2": {
      "name": "第2个委托选择",
      "help": "",
      "Nine_Billion_Names": "熄灭原核（九十亿个名字）",
      "Destruction_of_the_Destroyer": "掠夺的本能（毁灭者的覆灭）",
      "Winter_Soldiers": "铁卫扣饰（寒冬的战士们）",
      "Born_to_Obey": "古代零件（生而服从）",
      "Root_Out_the_Turpitude": "永寿幼芽（根除恶孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造机杼（火帝动炉销剑戟）",
      "Nameless_Land_Nameless_People": "角色经验材料（无名之地，无名之人）",
      "Akashic_Records": "光锥强化材料（阿卡夏记录）",
      "The_Invisible_Hand": "信用点（看不见的手）",
      "Abandoned_and_Insulted": "燃素&金属（被废弃与损害的）",
      "Spring_of_Life": "虚粒子&固态净水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黄金大地）",
      "The_Blossom_in_the_Storm": "气态流体&种子（风暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆单元&废弃机巧零件（偃师传说）",
      "The_Wages_of_Humanity": "药草提取物&一人嘉禾（赡养人类）"
    },
    "Name_3": {
      "name": "第3个委托选择",
      "help": "",
      "Nine_Billion_Names": "熄灭原核（九十亿个名字）",
      "Destruction_of_the_Destroyer": "掠夺的本能（毁灭者的覆灭）",
      "Winter_Soldiers": "铁卫扣饰（寒冬的战士们）",
      "Born_to_Obey": "古代零件（生而服从）",
      "Root_Out_the_Turpitude": "永寿幼芽（根除恶孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造机杼（火帝动炉销剑戟）",
      "Nameless_Land_Nameless_People": "角色经验材料（无名之地，无名之人）",
      "Akashic_Records": "光锥强化材料（阿卡夏记录）",
      "The_Invisible_Hand": "信用点（看不见的手）",
      "Abandoned_and_Insulted": "燃素&金属（被废弃与损害的）",
      "Spring_of_Life": "虚粒子&固态净水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黄金大地）",
      "The_Blossom_in_the_Storm": "气态流体&种子（风暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆单元&废弃机巧零件（偃师传说）",
      "The_Wages_of_Humanity": "药草提取物&一人嘉禾（赡养人类）"
    },
    "Name_4": {
      "name": "第4个委托选择",
      "help": "",
      "Nine_Billion_Names": "熄灭原核（九十亿个名字）",
      "Destruction_of_the_Destroyer": "掠夺的本能（毁灭者的覆灭）",
      "Winter_Soldiers": "铁卫扣饰（寒冬的战士们）",
      "Born_to_Obey": "古代零件（生而服从）",
      "Root_Out_the_Turpitude": "永寿幼芽（根除恶孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造机杼（火帝动炉销剑戟）",
      "Nameless_Land_Nameless_People": "角色经验材料（无名之地，无名之人）",
      "Akashic_Records": "光锥强化材料（阿卡夏记录）",
      "The_Invisible_Hand": "信用点（看不见的手）",
      "Abandoned_and_Insulted": "燃素&金属（被废弃与损害的）",
      "Spring_of_Life": "虚粒子&固态净水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黄金大地）",
      "The_Blossom_in_the_Storm": "气态流体&种子（风暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆单元&废弃机巧零件（偃师传说）",
      "The_Wages_of_Humanity": "药草提取物&一人嘉禾（赡养人类）"
    },
    "Duration": {
      "name": "派遣时长",
      "help": "",
      "4": "4小时",
      "8": "8小时",
      "12": "12小时",
      "20": "20小时"
    },
    "Assignment": {
      "name": "委托",
      "help": ""
    }
  },
  "RoguePath": {
    "_info": {
      "name": "命途设置",
      "help": ""
    },
    "Path": {
      "name": "命途",
      "help": "",
      "Preservation": "存护",
      "Remembrance": "记忆",
      "Nihility": "虚无",
      "Abundance": "丰饶",
      "The_Hunt": "巡猎",
      "Destruction": "毁灭",
      "Elation": "欢愉"
    },
    "Bonus": {
      "name": "开拓祝福三选一",
      "help": "",
      "Blessing Cosmos": "祝福宇宙（获得一个祝福）",
      "Miracle Cosmos": "神奇宇宙（获得一个奇物）",
      "Fragmented Cosmos": "破碎宇宙（获得宇宙碎片）"
    },
    "PresetResonanceFilter": {
      "name": "回响构音过滤器",
      "help": "",
      "preset-1": "预设 1",
      "custom": "自定义"
    },
    "ResonanceSelectionStrategy": {
      "name": "图鉴未解锁的回响构音",
      "help": "",
      "follow-presets": "不影响选择",
      "unrecorded-first": "优先选择",
      "before-random": "无回响构音满足过滤器设置时才选择"
    },
    "CustomResonanceFilter": {
      "name": "自定义回响构音过滤器",
      "help": "仅在\"回响构音过滤器\"设置为\"自定义\"时生效"
    }
  },
  "RogueBlessing": {
    "_info": {
      "name": "祝福设置",
      "help": ""
    },
    "PresetBlessingFilter": {
      "name": "祝福过滤器",
      "help": "",
      "preset-1": "预设 1",
      "custom": "自定义"
    },
    "BlessingSelectionStrategy": {
      "name": "图鉴未解锁的祝福",
      "help": "",
      "follow-presets": "不影响选择",
      "unrecorded-first": "优先选择",
      "before-random": "无祝福满足过滤器设置时才选择"
    },
    "CustomBlessingFilter": {
      "name": "自定义祝福过滤器",
      "help": "仅在\"祝福过滤器\"设置为\"自定义\"时生效"
    }
  },
  "RogueCurio": {
    "_info": {
      "name": "奇物设置",
      "help": ""
    },
    "PresetCurioFilter": {
      "name": "奇物过滤器",
      "help": "",
      "preset-1": "预设 1",
      "custom": "自定义"
    },
    "CurioSelectionStrategy": {
      "name": "图鉴未解锁的奇物",
      "help": "",
      "follow-presets": "不影响选择",
      "unrecorded-first": "优先选择",
      "before-random": "无奇物满足过滤器设置时才选择"
    },
    "CustomCurioFilter": {
      "name": "自定义奇物过滤器",
      "help": "仅在\"奇物过滤器\"设置为\"自定义\"时生效"
    }
  },
  "Gui": {
    "Aside": {
      "Install": "安装",
      "Home": "主页",
      "Develop": "开发",
      "Performance": "性能",
      "Setting": "设置",
      "AddAlas": "新增"
    },
    "Button": {
      "Start": "启动",
      "Stop": "停止",
      "ScrollON": "自动滚动 开",
      "ScrollOFF": "自动滚动 关",
      "ClearLog": "清空日志",
      "Setting": "设置",
      "CheckUpdate": "检查更新",
      "ClickToUpdate": "进行更新",
      "RetryUpdate": "重试更新",
      "CancelUpdate": "取消更新"
    },
    "Toast": {
      "DisableTranslateMode": "点击这里关闭翻译模式",
      "ConfigSaved": "设置已保存",
      "AlasIsRunning": "调度器已在运行中",
      "ClickToUpdate": "有更新可用，点击这里进行更新"
    },
    "Status": {
      "Running": "运行中",
      "Inactive": "闲置",
      "Warning": "发生错误",
      "Updating": "等待更新"
    },
    "MenuAlas": {
      "Overview": "总览",
      "Log": "运行日志"
    },
    "MenuDevelop": {
      "HomePage": "主页",
      "Translate": "翻译",
      "Update": "更新器",
      "Remote": "远程控制",
      "Utils": "工具"
    },
    "Overview": {
      "Scheduler": "调度器",
      "Log": "日志",
      "Running": "运行中",
      "Pending": "队列中",
      "Waiting": "等待中",
      "NoTask": "无任务"
    },
    "Dashboard": {
      "NoData": "无数据",
      "TimeError": "时间错误",
      "JustNow": "刚刚",
      "MinutesAgo": "{time}分钟前",
      "HoursAgo": "{time}小时前",
      "DaysAgo": "{time}天前",
      "LongTimeAgo": "很久以前"
    },
    "AddAlas": {
      "PopupTitle": "添加新配置",
      "NewName": "新的配置文件名",
      "CopyFrom": "从现有的配置中复制",
      "Confirm": "添加",
      "FileExist": "存在同名的配置文件，请重新输入一个",
      "InvalidChar": "配置文件名不能包含下列任何字符：.\\/:*?\"<>|",
      "InvalidPrefixTemplate": "配置文件名不能以 template 开头"
    },
    "Update": {
      "UpToDate": "已是最新版本",
      "HaveUpdate": "有新版本可用",
      "UpdateStart": "开始更新",
      "UpdateWait": "等待所有 Alas 完成当前任务",
      "UpdateRun": "更新中",
      "UpdateSuccess": "更新成功，正在重启",
      "UpdateFailed": "更新失败，可在./log/*_gui.txt中找到错误日志",
      "UpdateChecking": "检查更新中",
      "UpdateCancel": "取消更新，重启 Alas 中",
      "UpdateFinish": "更新成功，请手动重启",
      "Local": "本地",
      "Upstream": "上游仓库",
      "Author": "作者",
      "Time": "提交时间",
      "Message": "提交信息",
      "DisabledWarn": "更新模块未启用，你需要手动重启 Alas 进行更新",
      "DetailedHistory": "详细提交历史"
    },
    "Remote": {
      "Running": "运行中",
      "NotRunning": "未运行，与服务器的连接断开或服务器离线",
      "NotEnable": "未启用，在 deploy.yaml 中设置 webui 密码并启用远程控制",
      "EntryPoint": "远程访问 url 地址:",
      "ConfigureHint": "配置教程：",
      "SSHNotInstall": "系统中没有 ssh 工具，请参考教程下载或安装 ssh"
    },
    "Text": {
      "InvalidFeedBack": "格式错误。 示例：{0}",
      "Clear": "清除"
    }
  }
}
```

`module/config/i18n/zh-TW.json`:

```json
{
  "Menu": {
    "Alas": {
      "name": "SRC",
      "help": ""
    },
    "Daily": {
      "name": "每日",
      "help": ""
    },
    "Rogue": {
      "name": "模擬宇宙",
      "help": ""
    }
  },
  "Task": {
    "Alas": {
      "name": "SRC設定",
      "help": ""
    },
    "Restart": {
      "name": "除錯",
      "help": ""
    },
    "Dungeon": {
      "name": "每日副本",
      "help": ""
    },
    "DailyQuest": {
      "name": "每日任務",
      "help": ""
    },
    "BattlePass": {
      "name": "無名勳禮",
      "help": ""
    },
    "Assignment": {
      "name": "委託",
      "help": ""
    },
    "Rogue": {
      "name": "模擬宇宙",
      "help": "模擬宇宙還在開發中，任務不會被運行"
    }
  },
  "Scheduler": {
    "_info": {
      "name": "任務設定",
      "help": ""
    },
    "Enable": {
      "name": "啟用該功能",
      "help": "將這個任務加入調度器\n委託、科研、收穫任務是強制打開的",
      "True": "已啟用",
      "False": "False"
    },
    "NextRun": {
      "name": "下一次執行時間",
      "help": "自動計算的數值，不需要手動修改。清空後將立刻執行"
    },
    "Command": {
      "name": "內部任務名稱",
      "help": ""
    },
    "ServerUpdate": {
      "name": "伺服器更新時間",
      "help": "一些任務執行成功後，將推遲下一次執行伺服器更新的時間\n自動換算時區，一般不需要修改"
    }
  },
  "Emulator": {
    "_info": {
      "name": "模擬器設定",
      "help": ""
    },
    "Serial": {
      "name": "模擬器 Serial",
      "help": "常見的模擬器 Serial 可以查詢下方列表\n填 \"auto\" 自動檢測模擬器，多個模擬器正在運行或使用不支援自動檢測的模擬器時無法使用 \"auto\"，必須手動填寫\n模擬器預設 Serial：\n- 藍疊模擬器 127.0.0.1:5555\n- 藍疊模擬器4 Hyper-v版，填\"bluestacks4-hyperv\"自動連接，多開填\"bluestacks4-hyperv-2\"以此類推\n- 藍疊模擬器5 Hyper-v版，填\"bluestacks5-hyperv\"自動連接，多開填\"bluestacks5-hyperv-1\"以此類推\n- 夜神模擬器 127.0.0.1:62001\n- 夜神模擬器64位元 127.0.0.1:59865\n- MuMu模擬器/MuMu模擬器X 127.0.0.1:7555\n- MuMu模擬器12 127.0.0.1:16384\n- 逍遙模擬器 127.0.0.1:21503\n- 雷電模擬器 emulator-5554 或 127.0.0.1:5555\n- WSA，填\"wsa-0\"使遊戲在後臺運行，需要使用第三方軟件操控或關閉\n如果你使用了模擬器的多開功能，他們的 Serial 將不是預設的，可以在 console.bat 中執行 `adb devices` 查詢，或根據模擬器官方的教程填寫"
    },
    "PackageName": {
      "name": "遊戲伺服器",
      "help": "模擬器上裝有多個遊戲客戶端時，需要手動選擇伺服器",
      "auto": "自動檢測",
      "com.miHoYo.hkrpg": "CN",
      "com.HoYoverse.hkrpgoversea": "OVERSEA",
      "com.miHoYo.hkrpg.bilibili": "CN com.miHoYo.hkrpg.bilibili"
    },
    "ScreenshotMethod": {
      "name": "模擬器截圖方案",
      "help": "使用自動選擇時，將執行一次性能測試並自動更改為最快的截圖方案\n一般情況下的速度: DroidCast_raw >> aScreenCap_nc > ADB_nc >>> aScreenCap > uiautomator2 ~= ADB\n運行 工具 - 性能測試 以尋找最快的方案",
      "auto": "自動選擇最快的",
      "ADB": "ADB",
      "ADB_nc": "ADB_nc",
      "uiautomator2": "uiautomator2",
      "aScreenCap": "aScreenCap",
      "aScreenCap_nc": "aScreenCap_nc",
      "DroidCast": "DroidCast",
      "DroidCast_raw": "DroidCast_raw",
      "scrcpy": "scrcpy"
    },
    "ControlMethod": {
      "name": "模擬器控制方案",
      "help": "速度: MaaTouch = minitouch > Hermit >>> uiautomator2 ~= ADB\n建議選MaaTouch",
      "minitouch": "minitouch",
      "MaaTouch": "MaaTouch"
    },
    "AdbRestart": {
      "name": "在檢測不到設備的時候嘗試重啟adb",
      "help": ""
    }
  },
  "EmulatorInfo": {
    "_info": {
      "name": "模擬器設定",
      "help": "下列數值是根據Serial自動填充的，如果不懂請不要隨意修改"
    },
    "Emulator": {
      "name": "模擬器類型",
      "help": "",
      "auto": "自動檢測",
      "NoxPlayer": "夜神模擬器",
      "NoxPlayer64": "夜神模擬器64位",
      "BlueStacks4": "藍疊模擬器4",
      "BlueStacks5": "藍疊模擬器5",
      "BlueStacks4HyperV": "藍疊模擬器4 Hyper-V",
      "BlueStacks5HyperV": "藍疊模擬器5 Hyper-V",
      "LDPlayer3": "雷電模擬器3",
      "LDPlayer4": "雷電模擬器4",
      "LDPlayer9": "雷電模擬器9",
      "MuMuPlayer": "MuMu模擬器",
      "MuMuPlayerX": "MuMu模擬器X",
      "MuMuPlayer12": "MuMu模擬器12",
      "MEmuPlayer": "逍遙模擬器"
    },
    "name": {
      "name": "模擬器實例名稱",
      "help": ""
    },
    "path": {
      "name": "模擬器安裝路徑",
      "help": ""
    }
  },
  "Error": {
    "_info": {
      "name": "除錯設定",
      "help": ""
    },
    "Restart": {
      "name": "出錯時，重啟遊戲",
      "help": "",
      "game": "重啟遊戲",
      "game_emulator": "重啟模擬器和遊戲"
    },
    "SaveError": {
      "name": "出錯時，保存 Log 和截圖",
      "help": ""
    },
    "ScreenshotLength": {
      "name": "出錯時，保留最後 X 張截圖",
      "help": ""
    },
    "OnePushConfig": {
      "name": "錯誤推送設定",
      "help": "發生無法處理的異常後，使用 Onepush 推送错误消息。設定參考文檔：https://github.com/LmeSzinc/AzurLaneAutoScript/wiki/Onepush-configuration-%5BCN%5D"
    }
  },
  "Optimization": {
    "_info": {
      "name": "優化設定",
      "help": ""
    },
    "ScreenshotInterval": {
      "name": "放慢截圖速度至 X 秒一張",
      "help": "執行兩次截圖之間的最小間隔，限制在 0.1 ~ 0.3，對於高配置電腦能降低 CPU 佔用"
    },
    "CombatScreenshotInterval": {
      "name": "戰鬥中放慢截圖速度至 X 秒一張",
      "help": "執行兩次截圖之間的最小間隔，限制在 0.1 ~ 1.0，能降低戰鬥時的 CPU 佔用"
    },
    "WhenTaskQueueEmpty": {
      "name": "當任務隊列清空後",
      "help": "無任務時關閉遊戲，能在收菜期間降低 CPU 佔用",
      "stay_there": "停在原處",
      "goto_main": "前往主界面",
      "close_game": "關閉遊戲"
    }
  },
  "Dungeon": {
    "_info": {
      "name": "每日副本設定",
      "help": "打本清體力直到清空"
    },
    "Name": {
      "name": "副本名稱",
      "help": "默認打本設定",
      "Calyx_Golden_Memories": "材料：角色經驗（回憶之蕾•擬造花萼金）",
      "Calyx_Golden_Aether": "材料：武器經驗（乙太之蕾•擬造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用點（藏珍之蕾•擬造花萼金）",
      "Calyx_Crimson_Destruction": "行跡材料：毀滅（毀滅之蕾•擬造花萼赤）",
      "Calyx_Crimson_Preservation": "行跡材料：存護（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行跡材料：巡獵（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_Abundance": "行跡材料：豐饒（豐饒之蕾•擬造花萼赤）",
      "Calyx_Crimson_Erudition": "行跡材料：智識（智識之蕾•擬造花萼赤）",
      "Calyx_Crimson_Harmony": "行跡材料：同諧（同諧之蕾•擬造花萼赤）",
      "Calyx_Crimson_Nihility": "行跡材料：虛無（虛無之蕾•擬造花萼赤）",
      "Stagnant_Shadow_Quanta": "角色晉階材料：量子（空海之形•凝滯虛影）",
      "Stagnant_Shadow_Gust": "角色晉階材料：風（巽風之形•凝滯虛影）",
      "Stagnant_Shadow_Fulmination": "角色晉階材料：雷（鳴雷之形•凝滯虛影）",
      "Stagnant_Shadow_Blaze": "角色晉階材料：火（炎華之形•凝滯虛影）",
      "Stagnant_Shadow_Spike": "角色晉階材料：物理（鋒芒之形•凝滯虛影）",
      "Stagnant_Shadow_Rime": "角色晉階材料：冰（霜晶之形•凝滯虛影）",
      "Stagnant_Shadow_Mirage": "角色晉階材料：虛數（幻光之形•凝滯虛影）",
      "Stagnant_Shadow_Icicle": "角色晉階材料：冰（冰稜之形•凝滯虛影）",
      "Stagnant_Shadow_Doom": "角色晉階材料：雷（震厄之形•凝滯虛影）",
      "Stagnant_Shadow_Puppetry": "角色晉階材料：虛數（偃偶之形•凝滯虛影）",
      "Stagnant_Shadow_Abomination": "角色晉階材料：量子（孽獸之形•凝滯虛影）",
      "Stagnant_Shadow_Celestial": "角色晉階材料：風（天人之形•凝滯虛影）",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遺器：冰套+風套（霜風之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遺器：物理套+擊破套（迅拳之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遺器：治療套+快槍手（漂泊之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遺器：鐵衛套+量子套（睿治之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遺器：防禦套+雷套（聖頌之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遺器：火套+虛數套（野焰之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遺器：生命套+速度套（藥使之徑•侵蝕隧洞）"
    },
    "NameAtDoubleCalyx": {
      "name": "有雙倍花活動時，選擇副本",
      "help": "次數耗儘後回退到默認打本設定",
      "do_not_participate": "不參與活動",
      "Calyx_Golden_Memories": "材料：角色經驗（回憶之蕾•擬造花萼金）",
      "Calyx_Golden_Aether": "材料：武器經驗（乙太之蕾•擬造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用點（藏珍之蕾•擬造花萼金）",
      "Calyx_Crimson_Destruction": "行跡材料：毀滅（毀滅之蕾•擬造花萼赤）",
      "Calyx_Crimson_Preservation": "行跡材料：存護（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行跡材料：巡獵（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_Abundance": "行跡材料：豐饒（豐饒之蕾•擬造花萼赤）",
      "Calyx_Crimson_Erudition": "行跡材料：智識（智識之蕾•擬造花萼赤）",
      "Calyx_Crimson_Harmony": "行跡材料：同諧（同諧之蕾•擬造花萼赤）",
      "Calyx_Crimson_Nihility": "行跡材料：虛無（虛無之蕾•擬造花萼赤）"
    },
    "NameAtDoubleRelic": {
      "name": "有遺器活動時，選擇副本",
      "help": "次數耗儘後回退到默認打本設定",
      "do_not_participate": "不參與活動",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遺器：冰套+風套（霜風之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遺器：物理套+擊破套（迅拳之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遺器：治療套+快槍手（漂泊之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遺器：鐵衛套+量子套（睿治之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遺器：防禦套+雷套（聖頌之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遺器：火套+虛數套（野焰之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遺器：生命套+速度套（藥使之徑•侵蝕隧洞）"
    },
    "Team": {
      "name": "打本隊伍",
      "help": "",
      "1": "1",
      "2": "2",
      "3": "3",
      "4": "4",
      "5": "5",
      "6": "6"
    }
  },
  "DungeonDaily": {
    "_info": {
      "name": "每日任務設定",
      "help": "打一次特定的本，以滿足每日任務的要求"
    },
    "CalyxGolden": {
      "name": "完成1次擬造花萼（金）",
      "help": "",
      "do_not_achieve": "不完成這個任務",
      "Calyx_Golden_Memories": "材料：角色經驗（回憶之蕾•擬造花萼金）",
      "Calyx_Golden_Aether": "材料：武器經驗（乙太之蕾•擬造花萼金）",
      "Calyx_Golden_Treasures": "材料：信用點（藏珍之蕾•擬造花萼金）"
    },
    "CalyxCrimson": {
      "name": "完成1次擬造花萼（赤）",
      "help": "",
      "do_not_achieve": "不完成這個任務",
      "Calyx_Crimson_Destruction": "行跡材料：毀滅（毀滅之蕾•擬造花萼赤）",
      "Calyx_Crimson_Preservation": "行跡材料：存護（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_The_Hunt": "行跡材料：巡獵（存護之蕾•擬造花萼赤）",
      "Calyx_Crimson_Abundance": "行跡材料：豐饒（豐饒之蕾•擬造花萼赤）",
      "Calyx_Crimson_Erudition": "行跡材料：智識（智識之蕾•擬造花萼赤）",
      "Calyx_Crimson_Harmony": "行跡材料：同諧（同諧之蕾•擬造花萼赤）",
      "Calyx_Crimson_Nihility": "行跡材料：虛無（虛無之蕾•擬造花萼赤）"
    },
    "StagnantShadow": {
      "name": "完成1次凝滯虛影",
      "help": "",
      "do_not_achieve": "不完成這個任務",
      "Stagnant_Shadow_Quanta": "角色晉階材料：量子（空海之形•凝滯虛影）",
      "Stagnant_Shadow_Gust": "角色晉階材料：風（巽風之形•凝滯虛影）",
      "Stagnant_Shadow_Fulmination": "角色晉階材料：雷（鳴雷之形•凝滯虛影）",
      "Stagnant_Shadow_Blaze": "角色晉階材料：火（炎華之形•凝滯虛影）",
      "Stagnant_Shadow_Spike": "角色晉階材料：物理（鋒芒之形•凝滯虛影）",
      "Stagnant_Shadow_Rime": "角色晉階材料：冰（霜晶之形•凝滯虛影）",
      "Stagnant_Shadow_Mirage": "角色晉階材料：虛數（幻光之形•凝滯虛影）",
      "Stagnant_Shadow_Icicle": "角色晉階材料：冰（冰稜之形•凝滯虛影）",
      "Stagnant_Shadow_Doom": "角色晉階材料：雷（震厄之形•凝滯虛影）",
      "Stagnant_Shadow_Puppetry": "角色晉階材料：虛數（偃偶之形•凝滯虛影）",
      "Stagnant_Shadow_Abomination": "角色晉階材料：量子（孽獸之形•凝滯虛影）",
      "Stagnant_Shadow_Celestial": "角色晉階材料：風（天人之形•凝滯虛影）"
    },
    "CavernOfCorrosion": {
      "name": "完成1次侵蝕隧洞",
      "help": "",
      "do_not_achieve": "不完成這個任務",
      "Cavern_of_Corrosion_Path_of_Gelid_Wind": "遺器：冰套+風套（霜風之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Jabbing_Punch": "遺器：物理套+擊破套（迅拳之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Drifting": "遺器：治療套+快槍手（漂泊之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Providence": "遺器：鐵衛套+量子套（睿治之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Holy_Hymn": "遺器：防禦套+雷套（聖頌之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Conflagration": "遺器：火套+虛數套（野焰之徑•侵蝕隧洞）",
      "Cavern_of_Corrosion_Path_of_Elixir_Seekers": "遺器：生命套+速度套（藥使之徑•侵蝕隧洞）"
    }
  },
  "DungeonSupport": {
    "_info": {
      "name": "支援設定",
      "help": ""
    },
    "Use": {
      "name": "使用好友支援",
      "help": "",
      "always_use": "總是使用",
      "when_daily": "僅當每日任務需要時使用",
      "do_not_use": "不使用"
    },
    "Character": {
      "name": "好友支援角色",
      "help": "選擇好友支援角色，未找到則選擇默認（第一個）角色",
      "FirstCharacter": "支援列表第一個角色",
      "Arlan": "阿蘭",
      "Asta": "艾絲妲",
      "Bailu": "白露",
      "Blade": "刃",
      "Bronya": "布洛妮婭",
      "Clara": "克拉拉",
      "DanHeng": "丹恆",
      "DanHengImbibitorLunae": "丹恆•飲月",
      "Gepard": "傑帕德",
      "Herta": "黑塔",
      "Himeko": "姬子",
      "Hook": "虎克",
      "JingYuan": "景元",
      "Kafka": "卡芙卡",
      "Luka": "盧卡",
      "Luocha": "羅剎",
      "March7th": "三月七",
      "Natasha": "娜塔莎",
      "Pela": "佩拉",
      "Qingque": "青雀",
      "Sampo": "桑博",
      "Seele": "希兒",
      "Serval": "希露瓦",
      "SilverWolf": "銀狼",
      "Sushang": "素裳",
      "Tingyun": "停雲",
      "TrailblazerDestruction": "開拓者•毀滅",
      "TrailblazerPreservation": "開拓者•存護",
      "Welt": "瓦爾特",
      "Yanqing": "彥卿",
      "Yukong": "馭空"
    }
  },
  "DungeonStorage": {
    "_info": {
      "name": "DungeonStorage._info.name",
      "help": "DungeonStorage._info.help"
    },
    "TrailblazePower": {
      "name": "開拓力",
      "help": ""
    },
    "DungeonDouble": {
      "name": "副本雙倍",
      "help": ""
    },
    "SimulatedUniverse": {
      "name": "模擬宇宙",
      "help": ""
    }
  },
  "AchievableQuest": {
    "_info": {
      "name": "可完成的任務",
      "help": "任務狀態為 \"未設定\" 時需要按照要求設定SRC，才能啟用任務\n注意：請讓更多的任務處於 \"可完成\" 狀態，否則SRC可能無法完成500點的活躍度要求"
    },
    "Complete_1_Daily_Mission": {
      "name": "完成1個每日任務",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Clear_Calyx_Golden_1_times": {
      "name": "完成1次「擬造花萼（金）」",
      "help": "需要設定並啟用\"每日副本\"任務",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Complete_Calyx_Crimson_1_time": {
      "name": "完成1次「擬造花萼（赤）」",
      "help": "需要設定並啟用\"每日副本\"任務",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Clear_Stagnant_Shadow_1_times": {
      "name": "完成1次「凝滯虛影」",
      "help": "需要設定並啟用\"每日副本\"任務",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Clear_Cavern_of_Corrosion_1_times": {
      "name": "完成1次「侵蝕隧洞」",
      "help": "需要設定並啟用\"每日副本\"任務",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "In_a_single_battle_inflict_3_Weakness_Break_of_different_Types": {
      "name": "單場戰鬥中，觸發3種不同屬性的弱點擊破",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Inflict_Weakness_Break_5_times": {
      "name": "累積觸發弱點擊破效果5次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Defeat_a_total_of_20_enemies": {
      "name": "累積消滅20個敵人",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Enter_combat_by_attacking_enemy_Weakness_and_win_3_times": {
      "name": "利用弱點進入戰鬥並獲勝3次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Use_Technique_2_times": {
      "name": "累積施放2次秘技",
      "help": "默認可完成，將前往深淵一施放2次秘技",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Go_on_assignment_1_time": {
      "name": "派遣1次委託",
      "help": "需要設定並啟用\"委託\"任務",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Take_1_photo": {
      "name": "拍照1次",
      "help": "默认可完成",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Destroy_3_destructible_objects": {
      "name": "累積擊碎3個可破壞物",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Complete_Forgotten_Hall_1_time": {
      "name": "完成1次「忘卻之庭」",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Complete_Echo_of_War_1_times": {
      "name": "完成1次「歷戰餘響」",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Complete_1_stage_in_Simulated_Universe_Any_world": {
      "name": "完成「模擬宇宙」任意世界的1個區域",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Obtain_victory_in_combat_with_support_characters_1_time": {
      "name": "使用支援角色並獲得戰鬥勝利1次",
      "help": "需要設定並啟用\"每日副本\"，且設並好友支援",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Use_an_Ultimate_to_deal_the_final_blow_1_time": {
      "name": "施放終結技造成制勝一擊1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Level_up_any_character_1_time": {
      "name": "將任意角色等級提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Level_up_any_Light_Cone_1_time": {
      "name": "將任意光錐等級提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Level_up_any_Relic_1_time": {
      "name": "將任意遺器等級提升1次",
      "help": "",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Salvage_any_Relic": {
      "name": "分解任意1件遺器",
      "help": "默認可完成，將分解遺器稀有度倒序的第一個",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Synthesize_Consumable_1_time": {
      "name": "合成1次消耗品",
      "help": "默認可完成，將合成最低級零食",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Synthesize_material_1_time": {
      "name": "合成1次素材",
      "help": "默認可完成，將合成最低級素材",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    },
    "Use_Consumables_1_time": {
      "name": "使用1件消耗品",
      "help": "默認可完成，將使用護具，無材料時先合成再使用",
      "achievable": "可完成",
      "not_set": "未設定",
      "not_supported": "暫未支援"
    }
  },
  "DailyStorage": {
    "_info": {
      "name": "DailyStorage._info.name",
      "help": "DailyStorage._info.help"
    },
    "DailyActivity": {
      "name": "活躍度",
      "help": ""
    },
    "DailyQuest": {
      "name": "每日任務",
      "help": ""
    }
  },
  "BattlePassStorage": {
    "_info": {
      "name": "BattlePassStorage._info.name",
      "help": "BattlePassStorage._info.help"
    },
    "BattlePassLevel": {
      "name": "無名勳禮",
      "help": ""
    },
    "BattlePassTodayQuest": {
      "name": "無名勳禮任務",
      "help": ""
    }
  },
  "Assignment": {
    "_info": {
      "name": "委託設定",
      "help": "領取獎勵並派遣，優先處理指定委託\n若處理指定委託之後未達到上限，則按經驗材料 → 角色專屬素材 → 合成材料的順序來派遣委託"
    },
    "Name_1": {
      "name": "第1個委託選擇",
      "help": "",
      "Nine_Billion_Names": "熄滅原核（九十億個名字）",
      "Destruction_of_the_Destroyer": "掠奪的本能（毀滅者的覆滅）",
      "Winter_Soldiers": "鐵衛扣飾（寒冬的戰士們）",
      "Born_to_Obey": "古代零件（生而服從）",
      "Root_Out_the_Turpitude": "永壽幼芽（根除惡孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機杼（火帝動爐銷劍戟）",
      "Nameless_Land_Nameless_People": "角色經驗材料（無名之地，無名之人）",
      "Akashic_Records": "光錐強化材料（阿卡夏記錄）",
      "The_Invisible_Hand": "信用點（看不見的手）",
      "Abandoned_and_Insulted": "燃素&金屬（被廢棄與損害的）",
      "Spring_of_Life": "虛粒子&固態淨水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黃金大地）",
      "The_Blossom_in_the_Storm": "氣態流體&種子（風暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆單元&廢棄機巧零件（偃師傳說）",
      "The_Wages_of_Humanity": "藥草萃取物&一人嘉禾（贍養人類）"
    },
    "Name_2": {
      "name": "第2個委託選擇",
      "help": "",
      "Nine_Billion_Names": "熄滅原核（九十億個名字）",
      "Destruction_of_the_Destroyer": "掠奪的本能（毀滅者的覆滅）",
      "Winter_Soldiers": "鐵衛扣飾（寒冬的戰士們）",
      "Born_to_Obey": "古代零件（生而服從）",
      "Root_Out_the_Turpitude": "永壽幼芽（根除惡孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機杼（火帝動爐銷劍戟）",
      "Nameless_Land_Nameless_People": "角色經驗材料（無名之地，無名之人）",
      "Akashic_Records": "光錐強化材料（阿卡夏記錄）",
      "The_Invisible_Hand": "信用點（看不見的手）",
      "Abandoned_and_Insulted": "燃素&金屬（被廢棄與損害的）",
      "Spring_of_Life": "虛粒子&固態淨水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黃金大地）",
      "The_Blossom_in_the_Storm": "氣態流體&種子（風暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆單元&廢棄機巧零件（偃師傳說）",
      "The_Wages_of_Humanity": "藥草萃取物&一人嘉禾（贍養人類）"
    },
    "Name_3": {
      "name": "第3個委託選擇",
      "help": "",
      "Nine_Billion_Names": "熄滅原核（九十億個名字）",
      "Destruction_of_the_Destroyer": "掠奪的本能（毀滅者的覆滅）",
      "Winter_Soldiers": "鐵衛扣飾（寒冬的戰士們）",
      "Born_to_Obey": "古代零件（生而服從）",
      "Root_Out_the_Turpitude": "永壽幼芽（根除惡孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機杼（火帝動爐銷劍戟）",
      "Nameless_Land_Nameless_People": "角色經驗材料（無名之地，無名之人）",
      "Akashic_Records": "光錐強化材料（阿卡夏記錄）",
      "The_Invisible_Hand": "信用點（看不見的手）",
      "Abandoned_and_Insulted": "燃素&金屬（被廢棄與損害的）",
      "Spring_of_Life": "虛粒子&固態淨水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黃金大地）",
      "The_Blossom_in_the_Storm": "氣態流體&種子（風暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆單元&廢棄機巧零件（偃師傳說）",
      "The_Wages_of_Humanity": "藥草萃取物&一人嘉禾（贍養人類）"
    },
    "Name_4": {
      "name": "第4個委託選擇",
      "help": "",
      "Nine_Billion_Names": "熄滅原核（九十億個名字）",
      "Destruction_of_the_Destroyer": "掠奪的本能（毀滅者的覆滅）",
      "Winter_Soldiers": "鐵衛扣飾（寒冬的戰士們）",
      "Born_to_Obey": "古代零件（生而服從）",
      "Root_Out_the_Turpitude": "永壽幼芽（根除惡孽）",
      "Fire_Lord_Inflames_Blades_of_War": "工造機杼（火帝動爐銷劍戟）",
      "Nameless_Land_Nameless_People": "角色經驗材料（無名之地，無名之人）",
      "Akashic_Records": "光錐強化材料（阿卡夏記錄）",
      "The_Invisible_Hand": "信用點（看不見的手）",
      "Abandoned_and_Insulted": "燃素&金屬（被廢棄與損害的）",
      "Spring_of_Life": "虛粒子&固態淨水（生命之泉）",
      "The_Land_of_Gold": "蛋白米&基本食材（黃金大地）",
      "The_Blossom_in_the_Storm": "氣態流體&種子（風暴中怒放的花）",
      "Legend_of_the_Puppet_Master": "玉兆單元&廢棄機巧零件（偃師傳說）",
      "The_Wages_of_Humanity": "藥草萃取物&一人嘉禾（贍養人類）"
    },
    "Duration": {
      "name": "派遣時間",
      "help": "",
      "4": "4小時",
      "8": "8小時",
      "12": "12小時",
      "20": "20小時"
    },
    "Assignment": {
      "name": "委託",
      "help": ""
    }
  },
  "RoguePath": {
    "_info": {
      "name": "命途設定",
      "help": ""
    },
    "Path": {
      "name": "命途",
      "help": "",
      "Preservation": "存護",
      "Remembrance": "記憶",
      "Nihility": "虛無",
      "Abundance": "豐饒",
      "The_Hunt": "巡獵",
      "Destruction": "毀滅",
      "Elation": "歡愉"
    },
    "Bonus": {
      "name": "開拓祝福三選一",
      "help": "",
      "Blessing Cosmos": "祝福宇宙（獲得一個祝福）",
      "Miracle Cosmos": "神奇宇宙（獲得一個奇物）",
      "Fragmented Cosmos": "破碎宇宙（獲得宇宙碎片）"
    },
    "PresetResonanceFilter": {
      "name": "迴響構音過濾器",
      "help": "",
      "preset-1": "預設 1",
      "custom": "自訂"
    },
    "ResonanceSelectionStrategy": {
      "name": "圖鑑未解鎖的迴響構音",
      "help": "",
      "follow-presets": "不影響選擇",
      "unrecorded-first": "優先選擇",
      "before-random": "無迴響構音滿足過濾器設定時才選擇"
    },
    "CustomResonanceFilter": {
      "name": "自訂迴響構音過濾器",
      "help": "僅在\"迴響構音過濾器\"設定為\"自訂\"時生效"
    }
  },
  "RogueBlessing": {
    "_info": {
      "name": "祝福設定",
      "help": ""
    },
    "PresetBlessingFilter": {
      "name": "祝福過濾器",
      "help": "",
      "preset-1": "預設 1",
      "custom": "自訂"
    },
    "BlessingSelectionStrategy": {
      "name": "圖鑑未解鎖的祝福",
      "help": "",
      "follow-presets": "不影響選擇",
      "unrecorded-first": "優先選擇",
      "before-random": "無祝福滿足過濾器設定時才選擇"
    },
    "CustomBlessingFilter": {
      "name": "自訂祝福過濾器",
      "help": "僅在\"祝福過濾器\"設定為\"自訂\"時生效"
    }
  },
  "RogueCurio": {
    "_info": {
      "name": "奇物設定",
      "help": ""
    },
    "PresetCurioFilter": {
      "name": "奇物過濾器",
      "help": "",
      "preset-1": "預設 1",
      "custom": "自訂"
    },
    "CurioSelectionStrategy": {
      "name": "圖鑑未解鎖的奇物",
      "help": "",
      "follow-presets": "不影響選擇",
      "unrecorded-first": "優先選擇",
      "before-random": "無奇物滿足過濾器設定時才選擇"
    },
    "CustomCurioFilter": {
      "name": "自訂奇物過濾器",
      "help": "僅在\"奇物過濾器\"設定為\"自訂\"時生效"
    }
  },
  "Gui": {
    "Aside": {
      "Install": "安裝",
      "Home": "主頁",
      "Develop": "開發",
      "Performance": "性能",
      "Setting": "設定",
      "AddAlas": "新增"
    },
    "Button": {
      "Start": "啟動",
      "Stop": "停止",
      "ScrollON": "自動滾動 開",
      "ScrollOFF": "自動滾動 關",
      "ClearLog": "清空日誌",
      "Setting": "設定",
      "CheckUpdate": "檢查更新",
      "ClickToUpdate": "進行更新",
      "RetryUpdate": "重試更新",
      "CancelUpdate": "取消更新"
    },
    "Toast": {
      "DisableTranslateMode": "點擊這裡關閉翻譯模式",
      "ConfigSaved": "設定已儲存",
      "AlasIsRunning": "調度器已在執行中",
      "ClickToUpdate": "有更新可用，點擊這裡進行更新"
    },
    "Status": {
      "Running": "執行中",
      "Inactive": "閒置",
      "Warning": "發生錯誤",
      "Updating": "等待更新"
    },
    "MenuAlas": {
      "Overview": "總覽",
      "Log": "執行日誌"
    },
    "MenuDevelop": {
      "HomePage": "主頁",
      "Translate": "翻譯",
      "Update": "更新器",
      "Remote": "遠程控制",
      "Utils": "工具"
    },
    "Overview": {
      "Scheduler": "調度器",
      "Log": "日誌",
      "Running": "執行中",
      "Pending": "佇列中",
      "Waiting": "等待中",
      "NoTask": "無任務"
    },
    "Dashboard": {
      "NoData": "無數據",
      "TimeError": "時間錯誤",
      "JustNow": "剛剛",
      "MinutesAgo": "{time}分鐘前",
      "HoursAgo": "{time}小時前",
      "DaysAgo": "{time}天前",
      "LongTimeAgo": "很久以前"
    },
    "AddAlas": {
      "PopupTitle": "添加新的設定",
      "NewName": "新設定的檔案名",
      "CopyFrom": "從現有的設定中複製",
      "Confirm": "添加",
      "FileExist": "存在同名的設定檔案，請重新命名",
      "InvalidChar": "設定檔案名不可以包含下列任意字元：.\\/:*?\"<>|",
      "InvalidPrefixTemplate": "設定檔案名不能以 template 開頭"
    },
    "Update": {
      "UpToDate": "已是最新版本",
      "HaveUpdate": "有新版本可用",
      "UpdateStart": "開始更新",
      "UpdateWait": "等待所有 Alas 完成當前任務",
      "UpdateRun": "更新中",
      "UpdateSuccess": "更新成功，正在重啟",
      "UpdateFailed": "更新失敗，可在./log/*_gui.txt中找到錯誤日誌",
      "UpdateChecking": "檢查更新中",
      "UpdateCancel": "取消更新，重啟 Alas 中",
      "UpdateFinish": "更新成功，請手動重啟",
      "Local": "本地",
      "Upstream": "上游倉庫",
      "Author": "作者",
      "Time": "提交時間",
      "Message": "提交資訊",
      "DisabledWarn": "更新模塊未啟用，你需要手動重啟 Alas 進行更新",
      "DetailedHistory": "詳細提交歷史"
    },
    "Remote": {
      "Running": "運行中",
      "NotRunning": "未運行，与伺服器的連接斷開或伺服器離線",
      "NotEnable": "未啟用，在 deploy.yaml 中設定 webui 密碼並啟用遠程控制",
      "EntryPoint": "遠程控制 url 連結:",
      "ConfigureHint": "配寘教程：",
      "SSHNotInstall": "系統中沒有 ssh 工具，請參閱教程下載安裝 ssh"
    },
    "Text": {
      "InvalidFeedBack": "格式錯誤。 示例：{0}",
      "Clear": "清除"
    }
  }
}
```

`module/config/server.py`:

```py
"""
This file stores server, such as 'cn', 'en'.
Use 'import module.config.server as server' to import, don't use 'from xxx import xxx'.
"""
lang = 'cn'  # Setting default to cn, will avoid errors when using dev_tools

VALID_LANG = ['cn', 'en']
VALID_PACKAGE = {
    'com.miHoYo.hkrpg': 'cn',
    'com.HoYoverse.hkrpgoversea': 'oversea'
}
VALID_CHANNEL_PACKAGE = {
    'com.miHoYo.hkrpg.bilibili': ('cn', 'Bilibili'),
}


def set_lang(lang_: str):
    """
    Change language and this will affect globally,
    including assets and language specific methods.

    Args:
        lang_: package name or server.
    """
    global lang
    lang = lang_

    from module.base.resource import release_resources
    release_resources()


def to_server(package_or_server: str) -> str:
    """
    Convert package/server to server.
    To unknown packages, consider they are a CN channel servers.
    """
    if package_or_server in VALID_SERVER:
        return package_or_server
    elif package_or_server in VALID_PACKAGE:
        return VALID_PACKAGE[package_or_server]
    elif package_or_server in VALID_CHANNEL_PACKAGE:
        return VALID_CHANNEL_PACKAGE[package_or_server][0]
    else:
        return 'cn'


def to_package(package_or_server: str) -> str:
    """
    Convert package/server to package.
    """
    package_or_server = package_or_server.lower()
    if package_or_server in VALID_PACKAGE:
        return package_or_server

    for key, value in VALID_PACKAGE.items():
        if value == package_or_server:
            return key

    raise ValueError(f'Server invalid: {package_or_server}')

```

`module/config/stored/classes.py`:

```py
from datetime import datetime
from functools import cached_property as functools_cached_property

from module.base.decorator import cached_property
from module.config.utils import DEFAULT_TIME, deep_get, get_server_last_update
from module.exception import ScriptError


def now():
    return datetime.now().replace(microsecond=0)


def iter_attribute(cls):
    """
    Args:
        cls: Class or object

    Yields:
        str, obj: Attribute name, attribute value
    """
    for attr in dir(cls):
        if attr.startswith('_'):
            continue
        value = getattr(cls, attr)
        if type(value).__name__ in ['function', 'property']:
            continue
        yield attr, value


class StoredBase:
    time = DEFAULT_TIME

    def __init__(self, key):
        self._key = key
        self._config = None

    @cached_property
    def _name(self):
        return self._key.split('.')[-1]

    def _bind(self, config):
        """
        Args:
            config (AzurLaneConfig):
        """
        self._config = config

    @functools_cached_property
    def _stored(self):
        assert self._config is not None, 'StoredBase._bind() must be called before getting stored data'
        from module.logger import logger

        out = {}
        stored = deep_get(self._config.data, keys=self._key, default={})
        for attr, default in self._attrs.items():
            value = stored.get(attr, default)
            if attr == 'time':
                if not isinstance(value, datetime):
                    try:
                        value = datetime.fromisoformat(value)
                    except ValueError:
                        logger.warning(f'{self._name} has invalid attr: {attr}={value}, use default={default}')
                        value = default
            else:
                if not isinstance(value, type(default)):
                    logger.warning(f'{self._name} has invalid attr: {attr}={value}, use default={default}')
                    value = default

            out[attr] = value
        return out

    @cached_property
    def _attrs(self) -> dict:
        """
        All attributes defined
        """
        attrs = {
            # time is the first one
            'time': DEFAULT_TIME
        }
        for attr, value in iter_attribute(self.__class__):
            if attr.islower():
                attrs[attr] = value
        return attrs

    def __setattr__(self, key, value):
        if key in self._attrs:
            stored = self._stored
            stored['time'] = now()
            stored[key] = value
            self._config.modified[self._key] = stored
            if self._config.auto_update:
                self._config.update()
        else:
            super().__setattr__(key, value)

    def __getattribute__(self, item):
        if not item.startswith('_') and item in self._attrs:
            return self._stored[item]
        else:
            return super().__getattribute__(item)

    def is_expired(self) -> bool:
        return False

    def show(self):
        """
        Log self
        """
        from module.logger import logger
        logger.attr(self._name, self._stored)


class StoredExpiredAt0400(StoredBase):
    def is_expired(self):
        from module.logger import logger
        self.show()
        expired = self.time < get_server_last_update('04:00')
        logger.attr(f'{self._name} expired', expired)
        return expired


class StoredInt(StoredBase):
    value = 0


class StoredCounter(StoredBase):
    value = 0
    total = 0

    FIXED_TOTAL = 0

    def set(self, value, total=0):
        if self.FIXED_TOTAL:
            total = self.FIXED_TOTAL
        with self._config.multi_set():
            self.value = value
            self.total = total

    def to_counter(self) -> str:
        return f'{self.value}/{self.total}'

    def is_full(self) -> bool:
        return self.value >= self.total

    def get_remain(self) -> int:
        return self.total - self.value

    @cached_property
    def _attrs(self) -> dict:
        attrs = super()._attrs
        if self.FIXED_TOTAL:
            attrs['total'] = self.FIXED_TOTAL
        return attrs

    @functools_cached_property
    def _stored(self):
        stored = super()._stored
        if self.FIXED_TOTAL:
            stored['total'] = self.FIXED_TOTAL
        return stored


class StoredDailyActivity(StoredCounter, StoredExpiredAt0400):
    FIXED_TOTAL = 500


class StoredTrailblazePower(StoredCounter):
    FIXED_TOTAL = 240


class StoredSimulatedUniverse(StoredCounter, StoredExpiredAt0400):
    pass


class StoredAssignment(StoredCounter):
    pass


class StoredDaily(StoredCounter, StoredExpiredAt0400):
    quest1 = ''
    quest2 = ''
    quest3 = ''
    quest4 = ''
    quest5 = ''
    quest6 = ''

    FIXED_TOTAL = 6

    def load_quests(self):
        """
        Returns:
            list[DailyQuest]: Note that must check if quests are expired
        """
        # DailyQuest should be lazy loaded
        from tasks.daily.keywords import DailyQuest
        quests = []
        for name in [self.quest1, self.quest2, self.quest3, self.quest4, self.quest5, self.quest6]:
            if not name:
                continue
            try:
                quest = DailyQuest.find(name)
                quests.append(quest)
            except ScriptError:
                pass
        return quests

    def write_quests(self, quests):
        """
        Args:
            quests (list[DailyQuest, str]):
        """
        from tasks.daily.keywords import DailyQuest
        quests = [q.name if isinstance(q, DailyQuest) else q for q in quests]
        with self._config.multi_set():
            self.set(value=max(self.FIXED_TOTAL - len(quests), 0))
            try:
                self.quest1 = quests[0]
            except IndexError:
                self.quest1 = ''
            try:
                self.quest2 = quests[1]
            except IndexError:
                self.quest2 = ''
            try:
                self.quest3 = quests[2]
            except IndexError:
                self.quest3 = ''
            try:
                self.quest4 = quests[3]
            except IndexError:
                self.quest4 = ''
            try:
                self.quest5 = quests[4]
            except IndexError:
                self.quest5 = ''
            try:
                self.quest6 = quests[5]
            except IndexError:
                self.quest6 = ''


class StoredDungeonDouble(StoredExpiredAt0400):
    calyx = 0
    relic = 0


class StoredBattlePassLevel(StoredCounter):
    FIXED_TOTAL = 50


class StoredBattlePassTodayQuest(StoredCounter, StoredExpiredAt0400):
    quest1 = ''
    quest2 = ''
    quest3 = ''
    quest4 = ''

    FIXED_TOTAL = 4

    def load_quests(self):
        """
        Returns:
            list[DailyQuest]: Note that must check if quests are expired
        """
        # BattlePassQuest should be lazy loaded
        from tasks.battle_pass.keywords import BattlePassQuest
        quests = []
        for name in [self.quest1, self.quest2, self.quest3, self.quest4]:
            if not name:
                continue
            try:
                quest = BattlePassQuest.find(name)
                quests.append(quest)
            except ScriptError:
                pass
        return quests

    def write_quests(self, quests):
        """
        Args:
            quests (list[DailyQuest, str]):
        """
        from tasks.battle_pass.keywords import BattlePassQuest
        quests = [q.name if isinstance(q, BattlePassQuest) else q for q in quests]
        with self._config.multi_set():
            self.set(value=max(self.FIXED_TOTAL - len(quests), 0))
            try:
                self.quest1 = quests[0]
            except IndexError:
                self.quest1 = ''
            try:
                self.quest2 = quests[1]
            except IndexError:
                self.quest2 = ''
            try:
                self.quest3 = quests[2]
            except IndexError:
                self.quest3 = ''
            try:
                self.quest4 = quests[3]
            except IndexError:
                self.quest4 = ''

```

`module/config/stored/stored_generated.py`:

```py
from module.config.stored.classes import (
    StoredAssignment,
    StoredBase,
    StoredBattlePassLevel,
    StoredBattlePassTodayQuest,
    StoredCounter,
    StoredDaily,
    StoredDailyActivity,
    StoredDungeonDouble,
    StoredExpiredAt0400,
    StoredInt,
    StoredSimulatedUniverse,
    StoredTrailblazePower,
)


# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m module/config/config_updater.py ```

class StoredGenerated:
    TrailblazePower = StoredTrailblazePower("Dungeon.DungeonStorage.TrailblazePower")
    DungeonDouble = StoredDungeonDouble("Dungeon.DungeonStorage.DungeonDouble")
    SimulatedUniverse = StoredSimulatedUniverse("Dungeon.DungeonStorage.SimulatedUniverse")
    DailyActivity = StoredDailyActivity("DailyQuest.DailyStorage.DailyActivity")
    DailyQuest = StoredDaily("DailyQuest.DailyStorage.DailyQuest")
    BattlePassLevel = StoredBattlePassLevel("BattlePass.BattlePassStorage.BattlePassLevel")
    BattlePassTodayQuest = StoredBattlePassTodayQuest("BattlePass.BattlePassStorage.BattlePassTodayQuest")
    Assignment = StoredAssignment("Assignment.Assignment.Assignment")

```

`module/config/utils.py`:

```py
import json
import os
import random
import string
from datetime import datetime, timedelta, timezone

import yaml
from filelock import FileLock

import module.config.server as server_
from module.config.atomicwrites import atomic_write

LANGUAGES = ['zh-CN', 'en-US', 'ja-JP', 'zh-TW']
SERVER_TO_LANG = {
    'cn': 'zh-CN',
    'en': 'en-US',
    'jp': 'ja-JP',
    'tw': 'zh-TW',
}
LANG_TO_SERVER = {v: k for k, v in SERVER_TO_LANG.items()}
SERVER_TO_TIMEZONE = {
    'cn': timedelta(hours=8),
    'en': timedelta(hours=-7),
    'jp': timedelta(hours=9),
    'tw': timedelta(hours=8),
}
DEFAULT_TIME = datetime(2020, 1, 1, 0, 0)


# https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data/15423007
def str_presenter(dumper, data):
    if len(data.splitlines()) > 1:  # check for multiline string
        return dumper.represent_scalar('tag:yaml.org,2002:str', data, style='|')
    return dumper.represent_scalar('tag:yaml.org,2002:str', data)


yaml.add_representer(str, str_presenter)
yaml.representer.SafeRepresenter.add_representer(str, str_presenter)


def filepath_args(filename='args', mod_name='alas'):
    return f'./module/config/argument/{filename}.json'


def filepath_argument(filename):
    return f'./module/config/argument/{filename}.yaml'


def filepath_i18n(lang, mod_name='alas'):
    return os.path.join('./module/config/i18n', f'{lang}.json')


def filepath_config(filename, mod_name='alas'):
    if mod_name == 'alas':
        return os.path.join('./config', f'{filename}.json')
    else:
        return os.path.join('./config', f'{filename}.{mod_name}.json')


def filepath_code():
    return './module/config/config_generated.py'


def read_file(file):
    """
    Read a file, support both .yaml and .json format.
    Return empty dict if file not exists.

    Args:
        file (str):

    Returns:
        dict, list:
    """
    folder = os.path.dirname(file)
    if not os.path.exists(folder):
        os.mkdir(folder)

    if not os.path.exists(file):
        return {}

    _, ext = os.path.splitext(file)
    lock = FileLock(f"{file}.lock")
    with lock:
        print(f'read: {file}')
        if ext == '.yaml':
            with open(file, mode='r', encoding='utf-8') as f:
                s = f.read()
                data = list(yaml.safe_load_all(s))
                if len(data) == 1:
                    data = data[0]
                if not data:
                    data = {}
                return data
        elif ext == '.json':
            with open(file, mode='r', encoding='utf-8') as f:
                s = f.read()
                return json.loads(s)
        else:
            print(f'Unsupported config file extension: {ext}')
            return {}


def write_file(file, data):
    """
    Write data into a file, supports both .yaml and .json format.

    Args:
        file (str):
        data (dict, list):
    """
    folder = os.path.dirname(file)
    if not os.path.exists(folder):
        os.mkdir(folder)

    _, ext = os.path.splitext(file)
    lock = FileLock(f"{file}.lock")
    with lock:
        print(f'write: {file}')
        if ext == '.yaml':
            with atomic_write(file, overwrite=True, encoding='utf-8', newline='') as f:
                if isinstance(data, list):
                    yaml.safe_dump_all(data, f, default_flow_style=False, encoding='utf-8', allow_unicode=True,
                                       sort_keys=False)
                else:
                    yaml.safe_dump(data, f, default_flow_style=False, encoding='utf-8', allow_unicode=True,
                                   sort_keys=False)
        elif ext == '.json':
            with atomic_write(file, overwrite=True, encoding='utf-8', newline='') as f:
                s = json.dumps(data, indent=2, ensure_ascii=False, sort_keys=False, default=str)
                f.write(s)
        else:
            print(f'Unsupported config file extension: {ext}')


def iter_folder(folder, is_dir=False, ext=None):
    """
    Args:
        folder (str):
        is_dir (bool): True to iter directories only
        ext (str): File extension, such as `.yaml`

    Yields:
        str: Absolute path of files
    """
    for file in os.listdir(folder):
        sub = os.path.join(folder, file)
        if is_dir:
            if os.path.isdir(sub):
                yield sub.replace('\\\\', '/').replace('\\', '/')
        elif ext is not None:
            if not os.path.isdir(sub):
                _, extension = os.path.splitext(file)
                if extension == ext:
                    yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')
        else:
            yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')


def alas_template():
    """
        Returns:
            list[str]: Name of all Alas instances, except `template`.
        """
    out = []
    for file in os.listdir('./config'):
        name, extension = os.path.splitext(file)
        if name == 'template' and extension == '.json':
            out.append(f'{name}-src')

    # out.extend(mod_template())

    return out


def alas_instance():
    """
    Returns:
        list[str]: Name of all Alas instances, except `template`.
    """
    out = []
    for file in os.listdir('./config'):
        name, extension = os.path.splitext(file)
        config_name, mod_name = os.path.splitext(name)
        mod_name = mod_name[1:]
        if name != 'template' and extension == '.json' and mod_name == '':
            out.append(name)

    # out.extend(mod_instance())

    if not len(out):
        out = ['src']

    return out


def deep_get(d, keys, default=None):
    """
    Get values in dictionary safely.
    https://stackoverflow.com/questions/25833613/safe-method-to-get-value-of-nested-dictionary

    Args:
        d (dict):
        keys (str, list): Such as `Scheduler.NextRun.value`
        default: Default return if key not found.

    Returns:

    """
    if isinstance(keys, str):
        keys = keys.split('.')
    assert type(keys) is list
    if d is None:
        return default
    if not keys:
        return d
    return deep_get(d.get(keys[0]), keys[1:], default)


def deep_set(d, keys, value):
    """
    Set value into dictionary safely, imitating deep_get().
    """
    if isinstance(keys, str):
        keys = keys.split('.')
    assert type(keys) is list
    if not keys:
        return value
    if not isinstance(d, dict):
        d = {}
    d[keys[0]] = deep_set(d.get(keys[0], {}), keys[1:], value)
    return d


def deep_pop(d, keys, default=None):
    """
    Pop value from dictionary safely, imitating deep_get().
    """
    if isinstance(keys, str):
        keys = keys.split('.')
    assert type(keys) is list
    if not isinstance(d, dict):
        return default
    if not keys:
        return default
    elif len(keys) == 1:
        return d.pop(keys[0], default)
    return deep_pop(d.get(keys[0]), keys[1:], default)


def deep_default(d, keys, value):
    """
    Set default value into dictionary safely, imitating deep_get().
    Value is set only when the dict doesn't contain such keys.
    """
    if isinstance(keys, str):
        keys = keys.split('.')
    assert type(keys) is list
    if not keys:
        if d:
            return d
        else:
            return value
    if not isinstance(d, dict):
        d = {}
    d[keys[0]] = deep_default(d.get(keys[0], {}), keys[1:], value)
    return d


def deep_iter(data, depth=0, current_depth=1):
    """
    Iter a dictionary safely.

    Args:
        data (dict):
        depth (int): Maximum depth to iter
        current_depth (int):

    Returns:
        list: Key path
        Any:
    """
    if isinstance(data, dict) \
            and (depth and current_depth <= depth):
        for key, value in data.items():
            for child_path, child_value in deep_iter(value, depth=depth, current_depth=current_depth + 1):
                yield [key] + child_path, child_value
    else:
        yield [], data


def parse_value(value, data):
    """
    Convert a string to float, int, datetime, if possible.

    Args:
        value (str):
        data (dict):

    Returns:

    """
    if 'option' in data:
        if value not in data['option']:
            return data['value']
    if isinstance(value, str):
        if value == '':
            return None
        if value == 'true' or value == 'True':
            return True
        if value == 'false' or value == 'False':
            return False
        if '.' in value:
            try:
                return float(value)
            except ValueError:
                pass
        else:
            try:
                return int(value)
            except ValueError:
                pass
        try:
            return datetime.fromisoformat(value)
        except ValueError:
            pass

    return value


def data_to_type(data, **kwargs):
    """
    | Condition                            | Type     |
    | ------------------------------------ | -------- |
    | `value` is bool                      | checkbox |
    | Arg has `options`                    | select   |
    | Arg has `stored`                     | select   |
    | `Filter` is in name (in data['arg']) | textarea |
    | Rest of the args                     | input    |

    Args:
        data (dict):
        kwargs: Any additional properties

    Returns:
        str:
    """
    kwargs.update(data)
    if isinstance(kwargs.get('value'), bool):
        return 'checkbox'
    elif 'option' in kwargs and kwargs['option']:
        return 'select'
    elif 'stored' in kwargs and kwargs['stored']:
        return 'stored'
    elif 'Filter' in kwargs['arg']:
        return 'textarea'
    else:
        return 'input'


def data_to_path(data):
    """
    Args:
        data (dict):

    Returns:
        str: <func>.<group>.<arg>
    """
    return '.'.join([data.get(attr, '') for attr in ['func', 'group', 'arg']])


def path_to_arg(path):
    """
    Convert dictionary keys in .yaml files to argument names in config.

    Args:
        path (str): Such as `Scheduler.ServerUpdate`

    Returns:
        str: Such as `Scheduler_ServerUpdate`
    """
    return path.replace('.', '_')


def dict_to_kv(dictionary, allow_none=True):
    """
    Args:
        dictionary: Such as `{'path': 'Scheduler.ServerUpdate', 'value': True}`
        allow_none (bool):

    Returns:
        str: Such as `path='Scheduler.ServerUpdate', value=True`
    """
    return ', '.join([f'{k}={repr(v)}' for k, v in dictionary.items() if allow_none or v is not None])


def server_timezone() -> timedelta:
    return SERVER_TO_TIMEZONE.get(server_.lang, SERVER_TO_TIMEZONE['cn'])


def server_time_offset() -> timedelta:
    """
    To convert local time to server time:
        server_time = local_time + server_time_offset()
    To convert server time to local time:
        local_time = server_time - server_time_offset()
    """
    return datetime.now(timezone.utc).astimezone().utcoffset() - server_timezone()


def random_normal_distribution_int(a, b, n=3):
    """
    A non-numpy implementation of the `random_normal_distribution_int` in module.base.utils


    Generate a normal distribution int within the interval.
    Use the average value of several random numbers to
    simulate normal distribution.

    Args:
        a (int): The minimum of the interval.
        b (int): The maximum of the interval.
        n (int): The amount of numbers in simulation. Default to 3.

    Returns:
        int
    """
    if a < b:
        output = sum([random.randint(a, b) for _ in range(n)]) / n
        return int(round(output))
    else:
        return b


def ensure_time(second, n=3, precision=3):
    """Ensure to be time.

    Args:
        second (int, float, tuple): time, such as 10, (10, 30), '10, 30'
        n (int): The amount of numbers in simulation. Default to 5.
        precision (int): Decimals.

    Returns:
        float:
    """
    if isinstance(second, tuple):
        multiply = 10 ** precision
        return random_normal_distribution_int(second[0] * multiply, second[1] * multiply, n) / multiply
    elif isinstance(second, str):
        if ',' in second:
            lower, upper = second.replace(' ', '').split(',')
            lower, upper = int(lower), int(upper)
            return ensure_time((lower, upper), n=n, precision=precision)
        if '-' in second:
            lower, upper = second.replace(' ', '').split('-')
            lower, upper = int(lower), int(upper)
            return ensure_time((lower, upper), n=n, precision=precision)
        else:
            return int(second)
    else:
        return second


def get_os_next_reset():
    """
    Get the first day of next month.

    Returns:
        datetime.datetime
    """
    diff = server_time_offset()
    server_now = datetime.now() - diff
    server_reset = (server_now.replace(day=1) + timedelta(days=32)) \
        .replace(day=1, hour=0, minute=0, second=0, microsecond=0)
    local_reset = server_reset + diff
    return local_reset


def get_os_reset_remain():
    """
    Returns:
        int: number of days before next opsi reset
    """
    from module.logger import logger

    next_reset = get_os_next_reset()
    now = datetime.now()
    logger.attr('OpsiNextReset', next_reset)

    remain = int((next_reset - now).total_seconds() // 86400)
    logger.attr('ResetRemain', remain)
    return remain


def get_server_next_update(daily_trigger):
    """
    Args:
        daily_trigger (list[str], str): [ "00:00", "12:00", "18:00",]

    Returns:
        datetime.datetime
    """
    if isinstance(daily_trigger, str):
        daily_trigger = daily_trigger.replace(' ', '').split(',')

    diff = server_time_offset()
    local_now = datetime.now()
    trigger = []
    for t in daily_trigger:
        h, m = [int(x) for x in t.split(':')]
        future = local_now.replace(hour=h, minute=m, second=0, microsecond=0) + diff
        s = (future - local_now).total_seconds() % 86400
        future = local_now + timedelta(seconds=s)
        trigger.append(future)
    update = sorted(trigger)[0]
    return update


def get_server_last_update(daily_trigger):
    """
    Args:
        daily_trigger (list[str], str): [ "00:00", "12:00", "18:00",]

    Returns:
        datetime.datetime
    """
    if isinstance(daily_trigger, str):
        daily_trigger = daily_trigger.replace(' ', '').split(',')

    diff = server_time_offset()
    local_now = datetime.now()
    trigger = []
    for t in daily_trigger:
        h, m = [int(x) for x in t.split(':')]
        future = local_now.replace(hour=h, minute=m, second=0, microsecond=0) + diff
        s = (future - local_now).total_seconds() % 86400 - 86400
        future = local_now + timedelta(seconds=s)
        trigger.append(future)
    update = sorted(trigger)[-1]
    return update


def nearest_future(future, interval=120):
    """
    Get the neatest future time.
    Return the last one if two things will finish within `interval`.

    Args:
        future (list[datetime.datetime]):
        interval (int): Seconds

    Returns:
        datetime.datetime:
    """
    future = [datetime.fromisoformat(f) if isinstance(f, str) else f for f in future]
    future = sorted(future)
    next_run = future[0]
    for finish in future:
        if finish - next_run < timedelta(seconds=interval):
            next_run = finish

    return next_run


def get_nearest_weekday_date(target):
    """
    Get nearest weekday date starting
    from current date

    Args:
        target (int): target weekday to
                      calculate

    Returns:
        datetime.datetime
    """
    diff = server_time_offset()
    server_now = datetime.now() - diff

    days_ahead = target - server_now.weekday()
    if days_ahead <= 0:
        # Target day has already happened
        days_ahead += 7
    server_reset = (server_now + timedelta(days=days_ahead)) \
        .replace(hour=0, minute=0, second=0, microsecond=0)

    local_reset = server_reset + diff
    return local_reset


def get_server_weekday():
    """
    Returns:
        int: The server's current day of the week
    """
    diff = server_time_offset()
    server_now = datetime.now() - diff
    result = server_now.weekday()
    return result


def random_id(length=32):
    """
    Args:
        length (int):

    Returns:
        str: Random azurstat id.
    """
    return ''.join(random.sample(string.ascii_lowercase + string.digits, length))


def to_list(text, length=1):
    """
    Args:
        text (str): Such as `1, 2, 3`
        length (int): If there's only one digit, return a list expanded to given length,
            i.e. text='3', length=5, returns `[3, 3, 3, 3, 3]`

    Returns:
        list[int]:
    """
    if text.isdigit():
        return [int(text)] * length
    out = [int(letter.strip()) for letter in text.split(',')]
    return out


def type_to_str(typ):
    """
    Convert any types or any objects to a string。
    Remove <> to prevent them from being parsed as HTML tags.

    Args:
        typ:

    Returns:
        str: Such as `int`, 'datetime.datetime'.
    """
    if not isinstance(typ, type):
        typ = type(typ).__name__
    return str(typ)


if __name__ == '__main__':
    get_os_reset_remain()

```

`module/config/watcher.py`:

```py
import os
from datetime import datetime

from module.config.utils import filepath_config, DEFAULT_TIME
from module.logger import logger


class ConfigWatcher:
    config_name = 'alas'
    start_mtime = DEFAULT_TIME

    def start_watching(self) -> None:
        self.start_mtime = self.get_mtime()

    def get_mtime(self) -> datetime:
        """
        Last modify time of the file
        """
        timestamp = os.stat(filepath_config(self.config_name)).st_mtime
        mtime = datetime.fromtimestamp(timestamp).replace(microsecond=0)
        return mtime

    def should_reload(self) -> bool:
        """
        Returns:
            bool: Whether the file has been modified and configs should reload
        """
        mtime = self.get_mtime()
        if mtime > self.start_mtime:
            logger.info(f'Config "{self.config_name}" changed at {mtime}')
            return True
        else:
            return False

```

`module/daemon/benchmark.py`:

```py
import time
import typing as t

import numpy as np
from rich.table import Table
from rich.text import Text

from module.base.utils import float2str as float2str_
from module.base.utils import random_rectangle_point
from module.daemon.daemon_base import DaemonBase
from module.exception import RequestHumanTakeover
from module.logger import logger


def float2str(n, decimal=3):
    if not isinstance(n, (float, int)):
        return str(n)
    else:
        return float2str_(n, decimal=decimal) + 's'


class Benchmark(DaemonBase):
    TEST_TOTAL = 15
    TEST_BEST = int(TEST_TOTAL * 0.8)

    def benchmark_test(self, func, *args, **kwargs):
        """
        Args:
            func: Function to test.
            *args: Passes to func.
            **kwargs: Passes to func.

        Returns:
            float: Time cost on average.
        """
        logger.hr(f'Benchmark test', level=2)
        logger.info(f'Testing function: {func.__name__}')
        record = []

        for n in range(1, self.TEST_TOTAL + 1):
            start = time.time()

            try:
                func(*args, **kwargs)
            except RequestHumanTakeover:
                logger.critical('RequestHumanTakeover')
                logger.warning(f'Benchmark tests failed on func: {func.__name__}')
                return 'Failed'
            except Exception as e:
                logger.exception(e)
                logger.warning(f'Benchmark tests failed on func: {func.__name__}')
                return 'Failed'

            cost = time.time() - start
            logger.attr(
                f'{str(n).rjust(2, "0")}/{self.TEST_TOTAL}',
                f'{float2str(cost)}'
            )
            record.append(cost)

        logger.info('Benchmark tests done')
        average = float(np.mean(np.sort(record)[:self.TEST_BEST]))
        logger.info(f'Time cost {float2str(average)} ({self.TEST_BEST} best results out of {self.TEST_TOTAL} tests)')
        return average

    @staticmethod
    def evaluate_screenshot(cost):
        if not isinstance(cost, (float, int)):
            return Text(cost, style="bold bright_red")

        if cost < 0.10:
            return Text('Ultra Fast', style="bold bright_green")
        if cost < 0.20:
            return Text('Very Fast', style="bright_green")
        if cost < 0.30:
            return Text('Fast', style="green")
        if cost < 0.50:
            return Text('Medium', style="yellow")
        if cost < 0.75:
            return Text('Slow', style="red")
        if cost < 1.00:
            return Text('Very Slow', style="bright_red")
        return Text('Ultra Slow', style="bold bright_red")

    @staticmethod
    def evaluate_click(cost):
        if not isinstance(cost, (float, int)):
            return Text(cost, style="bold bright_red")

        if cost < 0.1:
            return Text('Fast', style="bright_green")
        if cost < 0.2:
            return Text('Medium', style="yellow")
        if cost < 0.4:
            return Text('Slow', style="red")
        return Text('Very Slow', style="bright_red")

    @staticmethod
    def show(test, data, evaluate_func):
        """
        +--------------+--------+--------+
        |  Screenshot  |  time  | Speed  |
        +--------------+--------+--------+
        |     ADB      | 0.319s |  Fast  |
        | uiautomator2 | 0.476s | Medium |
        |  aScreenCap  | Failed | Failed |
        +--------------+--------+--------+
        """
        # table = PrettyTable()
        # table.field_names = [test, 'Time', 'Speed']
        # for row in data:
        #     table.add_row([row[0], f'{float2str(row[1])}', evaluate_func(row[1])])

        # for row in table.get_string().split('\n'):
        #     logger.info(row)
        table = Table(show_lines=True)
        table.add_column(
            test, header_style="bright_cyan", style="cyan", no_wrap=True
        )
        table.add_column("Time", style="magenta")
        table.add_column("Speed", style="green")
        for row in data:
            table.add_row(
                row[0],
                float2str(row[1]),
                evaluate_func(row[1]),
            )
        logger.print(table, justify='center')

    def benchmark(self, screenshot: t.Tuple[str] = (), click: t.Tuple[str] = ()):
        logger.hr('Benchmark', level=1)
        logger.info(f'Testing screenshot methods: {screenshot}')
        logger.info(f'Testing click methods: {click}')

        screenshot_result = []
        for method in screenshot:
            result = self.benchmark_test(self.device.screenshot_methods[method])
            screenshot_result.append([method, result])

        area = (124, 4, 649, 106)  # Somewhere safe to click.
        click_result = []
        for method in click:
            x, y = random_rectangle_point(area)
            result = self.benchmark_test(self.device.click_methods[method], x, y)
            click_result.append([method, result])

        def compare(res):
            res = res[1]
            if not isinstance(res, (int, float)):
                return 100
            else:
                return res

        logger.hr('Benchmark Results', level=1)
        fastest_screenshot = 'ADB_nc'
        fastest_click = 'minitouch'
        if screenshot_result:
            self.show(test='Screenshot', data=screenshot_result, evaluate_func=self.evaluate_screenshot)
            fastest = sorted(screenshot_result, key=lambda item: compare(item))[0]
            logger.info(f'Recommend screenshot method: {fastest[0]} ({float2str(fastest[1])})')
            fastest_screenshot = fastest[0]
        if click_result:
            self.show(test='Control', data=click_result, evaluate_func=self.evaluate_click)
            fastest = sorted(click_result, key=lambda item: compare(item))[0]
            logger.info(f'Recommend control method: {fastest[0]} ({float2str(fastest[1])})')
            fastest_click = fastest[0]

        return fastest_screenshot, fastest_click

    def get_test_methods(self) -> t.Tuple[t.Tuple[str], t.Tuple[str]]:
        device = self.config.Benchmark_DeviceType
        # device == 'emulator'
        screenshot = ['ADB', 'ADB_nc', 'uiautomator2', 'aScreenCap', 'aScreenCap_nc', 'DroidCast', 'DroidCast_raw']
        click = ['ADB', 'uiautomator2', 'minitouch']

        def remove(*args):
            return [l for l in screenshot if l not in args]

        # No ascreencap on Android > 9
        if device in ['emulator_android_12', 'android_phone_12']:
            screenshot = remove('aScreenCap', 'aScreenCap_nc')
        # No nc loopback
        if device in ['plone_cloud_with_adb']:
            screenshot = remove('ADB_nc', 'aScreenCap_nc')
        # VMOS
        if device == 'android_phone_vmos':
            screenshot = ['ADB', 'aScreenCap', 'DroidCast', 'DroidCast_raw']
            click = ['ADB', 'Hermit', 'MaaTouch']

        scene = self.config.Benchmark_TestScene
        if 'screenshot' not in scene:
            screenshot = []
        if 'click' not in scene:
            click = []

        return tuple(screenshot), tuple(click)

    def run(self):
        try:
            self.config.override(Emulator_ScreenshotMethod='ADB')
            self.device.uninstall_minicap()
        except RequestHumanTakeover:
            logger.critical('Request human takeover')
            return

        logger.attr('DeviceType', self.config.Benchmark_DeviceType)
        logger.attr('TestScene', self.config.Benchmark_TestScene)
        screenshot, click = self.get_test_methods()
        self.benchmark(screenshot, click)

    def run_simple_screenshot_benchmark(self):
        """
        Returns:
            str: The fastest screenshot method on current device.
        """
        screenshot = ['ADB', 'ADB_nc', 'uiautomator2', 'aScreenCap', 'aScreenCap_nc', 'DroidCast', 'DroidCast_raw']

        def remove(*args):
            return [l for l in screenshot if l not in args]

        sdk = self.device.sdk_ver
        logger.info(f'sdk_ver: {sdk}')
        if not (21 <= sdk <= 28):
            screenshot = remove('aScreenCap', 'aScreenCap_nc')
        if self.device.is_chinac_phone_cloud:
            screenshot = remove('ADB_nc', 'aScreenCap_nc')
        screenshot = tuple(screenshot)

        self.TEST_TOTAL = 3
        self.TEST_BEST = 1
        method, _ = self.benchmark(screenshot, tuple())

        return method


if __name__ == '__main__':
    b = Benchmark('alas', task='Benchmark')
    b.run()

```

`module/daemon/daemon_base.py`:

```py
from module.base.base import ModuleBase


class DaemonBase(ModuleBase):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.device.disable_stuck_detection()

```

`module/device/app_control.py`:

```py
from lxml import etree

from module.device.method.adb import Adb
from module.device.method.uiautomator_2 import Uiautomator2
from module.device.method.utils import HierarchyButton
from module.device.method.wsa import WSA
from module.logger import logger


class AppControl(Adb, WSA, Uiautomator2):
    hierarchy: etree._Element
    # Use ADB for all
    # See https://github.com/openatx/uiautomator2/issues/565
    _app_u2_family = []

    def app_is_running(self) -> bool:
        method = self.config.Emulator_ControlMethod
        if self.is_wsa:
            package = self.app_current_wsa()
        elif method in AppControl._app_u2_family:
            package = self.app_current_uiautomator2()
        else:
            package = self.app_current_adb()

        package = package.strip(' \t\r\n')
        logger.attr('Package_name', package)
        return package == self.package

    def app_start(self):
        method = self.config.Emulator_ControlMethod
        logger.info(f'App start: {self.package}')
        if self.config.Emulator_Serial == 'wsa-0':
            self.app_start_wsa(display=0)
        elif method in AppControl._app_u2_family:
            self.app_start_uiautomator2()
        else:
            self.app_start_adb()

    def app_stop(self):
        method = self.config.Emulator_ControlMethod
        logger.info(f'App stop: {self.package}')
        if method in AppControl._app_u2_family:
            self.app_stop_uiautomator2()
        else:
            self.app_stop_adb()

    def dump_hierarchy(self) -> etree._Element:
        """
        Returns:
            etree._Element: Select elements with `self.hierarchy.xpath('//*[@text="Hermit"]')` for example.
        """
        method = self.config.Emulator_ControlMethod
        if method in AppControl._app_u2_family:
            self.hierarchy = self.dump_hierarchy_uiautomator2()
        else:
            self.hierarchy = self.dump_hierarchy_adb()
        return self.hierarchy

    def xpath_to_button(self, xpath: str) -> HierarchyButton:
        """
        Args:
            xpath (str):

        Returns:
            HierarchyButton:
                An object with methods and properties similar to Button.
                If element not found or multiple elements were found, return None.
        """
        return HierarchyButton(self.hierarchy, xpath)

```

`module/device/connection.py`:

```py
import ipaddress
import logging
import platform
import re
import socket
import subprocess
import time
from functools import wraps

import uiautomator2 as u2
from adbutils import AdbClient, AdbDevice, AdbTimeout, ForwardItem, ReverseItem
from adbutils.errors import AdbError

from module.base.decorator import Config, cached_property, del_cached_property
from module.base.utils import ensure_time
from module.device.connection_attr import ConnectionAttr
from module.device.method.utils import (
    RETRY_TRIES, remove_shell_warning, retry_sleep,
    handle_adb_error, PackageNotInstalled,
    recv_all, possible_reasons,
    random_port, get_serial_pair)
from module.exception import RequestHumanTakeover, EmulatorNotRunningError
from module.logger import logger
from module.base.utils import SelectedGrids


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Adb):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # Package not installed
            except PackageNotInstalled as e:
                logger.error(e)

                def init():
                    self.detect_package()
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class AdbDeviceWithStatus(AdbDevice):
    def __init__(self, client: AdbClient, serial: str, status: str):
        self.status = status
        super().__init__(client, serial)

    def __str__(self):
        return f'AdbDevice({self.serial}, {self.status})'

    __repr__ = __str__

    def __bool__(self):
        return True


class Connection(ConnectionAttr):
    def __init__(self, config):
        """
        Args:
            config (AzurLaneConfig, str): Name of the user config under ./config
        """
        super().__init__(config)
        if not self.is_over_http:
            self.detect_device()

        # Connect
        self.adb_connect(self.serial)
        logger.attr('AdbDevice', self.adb)

        # Package
        self.package = self.config.Emulator_PackageName
        if self.package == 'auto':
            self.detect_package()
        # No set_server cause game client and UI language can be different
        # else:
        #     set_server(self.package)
        logger.attr('PackageName', self.package)
        logger.attr('Lang', self.config.LANG)

        self.check_mumu_app_keep_alive()

    @Config.when(DEVICE_OVER_HTTP=False)
    def adb_command(self, cmd, timeout=10):
        """
        Execute ADB commands in a subprocess,
        usually to be used when pulling or pushing large files.

        Args:
            cmd (list):
            timeout (int):

        Returns:
            str:
        """
        cmd = list(map(str, cmd))
        cmd = [self.adb_binary, '-s', self.serial] + cmd
        logger.info(f'Execute: {cmd}')

        # Use shell=True to disable console window when using GUI.
        # Although, there's still a window when you stop running in GUI, which cause by gooey.
        # To disable it, edit gooey/gui/util/taskkill.py

        # No gooey anymore, just shell=False
        process = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=False)
        try:
            stdout, stderr = process.communicate(timeout=timeout)
        except subprocess.TimeoutExpired:
            process.kill()
            stdout, stderr = process.communicate()
            logger.warning(f'TimeoutExpired when calling {cmd}, stdout={stdout}, stderr={stderr}')
        return stdout

    @Config.when(DEVICE_OVER_HTTP=True)
    def adb_command(self, cmd, timeout=10):
        logger.warning(
            f'adb_command() is not available when connecting over http: {self.serial}, '
        )
        raise RequestHumanTakeover

    @Config.when(DEVICE_OVER_HTTP=False)
    def adb_shell(self, cmd, stream=False, recvall=True, timeout=10, rstrip=True):
        """
        Equivalent to `adb -s <serial> shell <*cmd>`

        Args:
            cmd (list, str):
            stream (bool): Return stream instead of string output (Default: False)
            recvall (bool): Receive all data when stream=True (Default: True)
            timeout (int): (Default: 10)
            rstrip (bool): Strip the last empty line (Default: True)

        Returns:
            str if stream=False
            bytes if stream=True and recvall=True
            socket if stream=True and recvall=False
        """
        if not isinstance(cmd, str):
            cmd = list(map(str, cmd))

        if stream:
            result = self.adb.shell(cmd, stream=stream, timeout=timeout, rstrip=rstrip)
            if recvall:
                # bytes
                return recv_all(result)
            else:
                # socket
                return result
        else:
            result = self.adb.shell(cmd, stream=stream, timeout=timeout, rstrip=rstrip)
            result = remove_shell_warning(result)
            # str
            return result

    @Config.when(DEVICE_OVER_HTTP=True)
    def adb_shell(self, cmd, stream=False, recvall=True, timeout=10, rstrip=True):
        """
        Equivalent to http://127.0.0.1:7912/shell?command={command}

        Args:
            cmd (list, str):
            stream (bool): Return stream instead of string output (Default: False)
            recvall (bool): Receive all data when stream=True (Default: True)
            timeout (int): (Default: 10)
            rstrip (bool): Strip the last empty line (Default: True)

        Returns:
            str if stream=False
            bytes if stream=True
        """
        if not isinstance(cmd, str):
            cmd = list(map(str, cmd))

        if stream:
            result = self.u2.shell(cmd, stream=stream, timeout=timeout)
            # Already received all, so `recvall` is ignored
            result = remove_shell_warning(result.content)
            # bytes
            return result
        else:
            result = self.u2.shell(cmd, stream=stream, timeout=timeout).output
            if rstrip:
                result = result.rstrip()
            result = remove_shell_warning(result)
            # str
            return result

    def adb_getprop(self, name):
        """
        Get system property in Android, same as `getprop <name>`

        Args:
            name (str): Property name

        Returns:
            str:
        """
        return self.adb_shell(['getprop', name]).strip()

    @cached_property
    def cpu_abi(self) -> str:
        """
        Returns:
            str: arm64-v8a, armeabi-v7a, x86, x86_64
        """
        abi = self.adb_getprop('ro.product.cpu.abi')
        if not len(abi):
            logger.error(f'CPU ABI invalid: "{abi}"')
        return abi

    @cached_property
    def sdk_ver(self) -> int:
        """
        Android SDK/API levels, see https://apilevels.com/
        """
        sdk = self.adb_getprop('ro.build.version.sdk')
        try:
            return int(sdk)
        except ValueError:
            logger.error(f'SDK version invalid: {sdk}')

        return 0

    @cached_property
    def is_avd(self):
        if get_serial_pair(self.serial)[0] is None:
            return False
        if 'ranchu' in self.adb_getprop('ro.hardware'):
            return True
        if 'goldfish' in self.adb_getprop('ro.hardware.audio.primary'):
            return True
        return False

    def check_mumu_app_keep_alive(self):
        if not self.is_mumu_family:
            return False

        res = self.adb_getprop('nemud.app_keep_alive')
        logger.attr('nemud.app_keep_alive', res)
        if res == '':
            # Empry property, might not be a mumu emulator or might be an old mumu
            return True
        elif res == 'false':
            # Disabled
            return True
        elif res == 'true':
            # https://mumu.163.com/help/20230802/35047_1102450.html
            logger.critical('请在MuMu模拟器设置内关闭 "后台挂机时保活运行"')
            raise RequestHumanTakeover
        else:
            logger.warning(f'Invalid nemud.app_keep_alive value: {res}')
            return False

    @cached_property
    def _nc_server_host_port(self):
        """
        Returns:
            str, int, str, int:
                server_listen_host, server_listen_port, client_connect_host, client_connect_port
        """
        # For BlueStacks hyper-v, use ADB reverse
        if self.is_bluestacks_hyperv:
            host = '127.0.0.1'
            logger.info(f'Connecting to BlueStacks hyper-v, using host {host}')
            port = self.adb_reverse(f'tcp:{self.config.REVERSE_SERVER_PORT}')
            return host, port, host, self.config.REVERSE_SERVER_PORT
        # For emulators, listen on current host
        if self.is_emulator or self.is_over_http:
            try:
                host = socket.gethostbyname(socket.gethostname())
            except socket.gaierror as e:
                logger.error(e)
                logger.error(f'Unknown host name: {socket.gethostname()}')
                host = '127.0.0.1'
            if platform.system() == 'Linux' and host == '127.0.1.1':
                host = '127.0.0.1'
            logger.info(f'Connecting to local emulator, using host {host}')
            port = random_port(self.config.FORWARD_PORT_RANGE)

            # For AVD instance
            if self.is_avd:
                return host, port, "10.0.2.2", port

            return host, port, host, port
        # For local network devices, listen on the host under the same network as target device
        if self.is_network_device:
            hosts = socket.gethostbyname_ex(socket.gethostname())[2]
            logger.info(f'Current hosts: {hosts}')
            ip = ipaddress.ip_address(self.serial.split(':')[0])
            for host in hosts:
                if ip in ipaddress.ip_interface(f'{host}/24').network:
                    logger.info(f'Connecting to local network device, using host {host}')
                    port = random_port(self.config.FORWARD_PORT_RANGE)
                    return host, port, host, port
        # For other devices, create an ADB reverse and listen on 127.0.0.1
        host = '127.0.0.1'
        logger.info(f'Connecting to unknown device, using host {host}')
        port = self.adb_reverse(f'tcp:{self.config.REVERSE_SERVER_PORT}')
        return host, port, host, self.config.REVERSE_SERVER_PORT

    @cached_property
    def reverse_server(self):
        """
        Setup a server on Alas, access it from emulator.
        This will bypass adb shell and be faster.
        """
        del_cached_property(self, '_nc_server_host_port')
        host_port = self._nc_server_host_port
        logger.info(f'Reverse server listening on {host_port[0]}:{host_port[1]}, '
                    f'client can send data to {host_port[2]}:{host_port[3]}')
        server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        server.bind(host_port[:2])
        server.settimeout(5)
        server.listen(5)
        return server

    @cached_property
    def nc_command(self):
        """
        Returns:
            list[str]: ['nc'] or ['busybox', 'nc']
        """
        sdk = self.sdk_ver
        logger.info(f'sdk_ver: {sdk}')
        if sdk >= 28:
            # Android 9 emulators does not have `nc`, try `busybox nc`
            # BlueStacks Pie (Android 9) has `nc` but cannot send data, try `busybox nc` first
            trial = [
                ['busybox', 'nc'],
                ['nc'],
            ]
        else:
            trial = [
                ['nc'],
                ['busybox', 'nc'],
            ]
        for command in trial:
            # About 3ms
            result = self.adb_shell(command)
            # Result should be command help if success
            # `/system/bin/sh: nc: not found`
            if 'not found' in result:
                continue
            # `/system/bin/sh: busybox: inaccessible or not found\n`
            if 'inaccessible' in result:
                continue
            logger.attr('nc command', command)
            return command

        logger.error('No `netcat` command available, please use screenshot methods without `_nc` suffix')
        raise RequestHumanTakeover

    def adb_shell_nc(self, cmd, timeout=5, chunk_size=262144):
        """
        Args:
            cmd (list):
            timeout (int):
            chunk_size (int): Default to 262144

        Returns:
            bytes:
        """
        # Server start listening
        server = self.reverse_server
        server.settimeout(timeout)
        # Client send data, waiting for server accept
        # <command> | nc 127.0.0.1 {port}
        cmd += ["|", *self.nc_command, *self._nc_server_host_port[2:]]
        stream = self.adb_shell(cmd, stream=True, recvall=False)
        try:
            # Server accept connection
            conn, conn_port = server.accept()
        except socket.timeout:
            output = recv_all(stream, chunk_size=chunk_size)
            logger.warning(str(output))
            raise AdbTimeout('reverse server accept timeout')

        # Server receive data
        data = recv_all(conn, chunk_size=chunk_size, recv_interval=0.001)

        # Server close connection
        conn.close()
        return data

    def adb_exec_out(self, cmd, serial=None):
        cmd.insert(0, 'exec-out')
        return self.adb_command(cmd, serial)

    def adb_forward(self, remote):
        """
        Do `adb forward <local> <remote>`.
        choose a random port in FORWARD_PORT_RANGE or reuse an existing forward,
        and also remove redundant forwards.

        Args:
            remote (str):
                tcp:<port>
                localabstract:<unix domain socket name>
                localreserved:<unix domain socket name>
                localfilesystem:<unix domain socket name>
                dev:<character device name>
                jdwp:<process pid> (remote only)

        Returns:
            int: Port
        """
        port = 0
        for forward in self.adb.forward_list():
            if forward.serial == self.serial and forward.remote == remote and forward.local.startswith('tcp:'):
                if not port:
                    logger.info(f'Reuse forward: {forward}')
                    port = int(forward.local[4:])
                else:
                    logger.info(f'Remove redundant forward: {forward}')
                    self.adb_forward_remove(forward.local)

        if port:
            return port
        else:
            # Create new forward
            port = random_port(self.config.FORWARD_PORT_RANGE)
            forward = ForwardItem(self.serial, f'tcp:{port}', remote)
            logger.info(f'Create forward: {forward}')
            self.adb.forward(forward.local, forward.remote)
            return port

    def adb_reverse(self, remote):
        port = 0
        for reverse in self.adb.reverse_list():
            if reverse.remote == remote and reverse.local.startswith('tcp:'):
                if not port:
                    logger.info(f'Reuse reverse: {reverse}')
                    port = int(reverse.local[4:])
                else:
                    logger.info(f'Remove redundant forward: {reverse}')
                    self.adb_forward_remove(reverse.local)

        if port:
            return port
        else:
            # Create new reverse
            port = random_port(self.config.FORWARD_PORT_RANGE)
            reverse = ReverseItem(f'tcp:{port}', remote)
            logger.info(f'Create reverse: {reverse}')
            self.adb.reverse(reverse.local, reverse.remote)
            return port

    def adb_forward_remove(self, local):
        """
        Equivalent to `adb -s <serial> forward --remove <local>`
        More about the commands send to ADB server, see:
        https://cs.android.com/android/platform/superproject/+/master:packages/modules/adb/SERVICES.TXT

        Args:
            local (str): Such as 'tcp:2437'
        """
        with self.adb_client._connect() as c:
            list_cmd = f"host-serial:{self.serial}:killforward:{local}"
            c.send_command(list_cmd)
            c.check_okay()

    def adb_reverse_remove(self, local):
        """
        Equivalent to `adb -s <serial> reverse --remove <local>`

        Args:
            local (str): Such as 'tcp:2437'
        """
        with self.adb_client._connect() as c:
            c.send_command(f"host:transport:{self.serial}")
            c.check_okay()
            list_cmd = f"reverse:killforward:{local}"
            c.send_command(list_cmd)
            c.check_okay()

    def adb_push(self, local, remote):
        """
        Args:
            local (str):
            remote (str):

        Returns:
            str:
        """
        cmd = ['push', local, remote]
        return self.adb_command(cmd)

    @Config.when(DEVICE_OVER_HTTP=False)
    def adb_connect(self, serial):
        """
        Connect to a serial, try 3 times at max.
        If there's an old ADB server running while Alas is using a newer one, which happens on Chinese emulators,
        the first connection is used to kill the other one, and the second is the real connect.

        Args:
            serial (str):

        Returns:
            bool: If success
        """
        # Disconnect offline device before connecting
        for device in self.list_device():
            if device.status == 'offline':
                logger.warning(f'Device {serial} is offline, disconnect it before connecting')
                self.adb_disconnect(serial)
            elif device.status == 'unauthorized':
                logger.error(f'Device {serial} is unauthorized, please accept ADB debugging on your device')
            elif device.status == 'device':
                pass
            else:
                logger.warning(f'Device {serial} is is having a unknown status: {device.status}')

        # Skip for emulator-5554
        if 'emulator-' in serial:
            logger.info(f'"{serial}" is a `emulator-*` serial, skip adb connect')
            return True
        if re.match(r'^[a-zA-Z0-9]+$', serial):
            logger.info(f'"{serial}" seems to be a Android serial, skip adb connect')
            return True

        # Try to connect
        for _ in range(3):
            msg = self.adb_client.connect(serial)
            logger.info(msg)
            if 'connected' in msg:
                # Connected to 127.0.0.1:59865
                # Already connected to 127.0.0.1:59865
                return True
            elif 'bad port' in msg:
                # bad port number '598265' in '127.0.0.1:598265'
                logger.error(msg)
                possible_reasons('Serial incorrect, might be a typo')
                raise RequestHumanTakeover
            elif '(10061)' in msg:
                # cannot connect to 127.0.0.1:55555:
                # No connection could be made because the target machine actively refused it. (10061)
                logger.info(msg)
                logger.warning('No such device exists, please restart the emulator or set a correct serial')
                raise EmulatorNotRunningError

        # Failed to connect
        logger.warning(f'Failed to connect {serial} after 3 trial, assume connected')
        self.detect_device()
        return False

    @Config.when(DEVICE_OVER_HTTP=True)
    def adb_connect(self, serial):
        # No adb connect if over http
        return True

    def adb_disconnect(self, serial):
        msg = self.adb_client.disconnect(serial)
        if msg:
            logger.info(msg)

        del_cached_property(self, 'hermit_session')
        del_cached_property(self, 'droidcast_session')
        del_cached_property(self, 'minitouch_builder')
        del_cached_property(self, 'reverse_server')

    def adb_restart(self):
        """
            Reboot adb client
        """
        logger.info('Restart adb')
        # Kill current client
        self.adb_client.server_kill()
        # Init adb client
        del_cached_property(self, 'adb_client')
        _ = self.adb_client

    @Config.when(DEVICE_OVER_HTTP=False)
    def adb_reconnect(self):
        """
           Reboot adb client if no device found, otherwise try reconnecting device.
        """
        if self.config.Emulator_AdbRestart and len(self.list_device()) == 0:
            # Restart Adb
            self.adb_restart()
            # Connect to device
            self.adb_connect(self.serial)
            self.detect_device()
        else:
            self.adb_disconnect(self.serial)
            self.adb_connect(self.serial)
            self.detect_device()

    @Config.when(DEVICE_OVER_HTTP=True)
    def adb_reconnect(self):
        logger.warning(
            f'When connecting a device over http: {self.serial} '
            f'adb_reconnect() is skipped, you may need to restart ATX manually'
        )

    def install_uiautomator2(self):
        """
        Init uiautomator2 and remove minicap.
        """
        logger.info('Install uiautomator2')
        init = u2.init.Initer(self.adb, loglevel=logging.DEBUG)
        # MuMu X has no ro.product.cpu.abi, pick abi from ro.product.cpu.abilist
        if init.abi not in ['x86_64', 'x86', 'arm64-v8a', 'armeabi-v7a', 'armeabi']:
            init.abi = init.abis[0]
        init.set_atx_agent_addr('127.0.0.1:7912')
        try:
            init.install()
        except ConnectionError:
            u2.init.GITHUB_BASEURL = 'http://tool.appetizer.io/openatx'
            init.install()
        self.uninstall_minicap()

    def uninstall_minicap(self):
        """ minicap can't work or will send compressed images on some emulators. """
        logger.info('Removing minicap')
        self.adb_shell(["rm", "/data/local/tmp/minicap"])
        self.adb_shell(["rm", "/data/local/tmp/minicap.so"])

    @Config.when(DEVICE_OVER_HTTP=False)
    def restart_atx(self):
        """
        Minitouch supports only one connection at a time.
        Restart ATX to kick the existing one.
        """
        logger.info('Restart ATX')
        atx_agent_path = '/data/local/tmp/atx-agent'
        self.adb_shell([atx_agent_path, 'server', '--stop'])
        self.adb_shell([atx_agent_path, 'server', '--nouia', '-d', '--addr', '127.0.0.1:7912'])

    @Config.when(DEVICE_OVER_HTTP=True)
    def restart_atx(self):
        logger.warning(
            f'When connecting a device over http: {self.serial} '
            f'restart_atx() is skipped, you may need to restart ATX manually'
        )

    @staticmethod
    def sleep(second):
        """
        Args:
            second(int, float, tuple):
        """
        time.sleep(ensure_time(second))

    _orientation_description = {
        0: 'Normal',
        1: 'HOME key on the right',
        2: 'HOME key on the top',
        3: 'HOME key on the left',
    }
    orientation = 0

    @retry
    def get_orientation(self):
        """
        Rotation of the phone

        Returns:
            int:
                0: 'Normal'
                1: 'HOME key on the right'
                2: 'HOME key on the top'
                3: 'HOME key on the left'
        """
        _DISPLAY_RE = re.compile(
            r'.*DisplayViewport{.*valid=true, .*orientation=(?P<orientation>\d+), .*deviceWidth=(?P<width>\d+), deviceHeight=(?P<height>\d+).*'
        )
        output = self.adb_shell(['dumpsys', 'display'])

        res = _DISPLAY_RE.search(output, 0)

        if res:
            o = int(res.group('orientation'))
            if o in Connection._orientation_description:
                pass
            else:
                o = 0
                logger.warning(f'Invalid device orientation: {o}, assume it is normal')
        else:
            o = 0
            logger.warning('Unable to get device orientation, assume it is normal')

        self.orientation = o
        logger.attr('Device Orientation', f'{o} ({Connection._orientation_description.get(o, "Unknown")})')
        return o

    @retry
    def list_device(self):
        """
        Returns:
            SelectedGrids[AdbDeviceWithStatus]:
        """
        devices = []
        try:
            with self.adb_client._connect() as c:
                c.send_command("host:devices")
                c.check_okay()
                output = c.read_string_block()
                for line in output.splitlines():
                    parts = line.strip().split("\t")
                    if len(parts) != 2:
                        continue
                    device = AdbDeviceWithStatus(self.adb_client, parts[0], parts[1])
                    devices.append(device)
        except ConnectionResetError as e:
            # Happens only on CN users.
            # ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
            logger.error(e)
            if '强迫关闭' in str(e):
                logger.critical('无法连接至ADB服务，请关闭UU加速器、原神私服、以及一些劣质代理软件。'
                                '它们会劫持电脑上所有的网络连接，包括Alas与模拟器之间的本地连接。')
        return SelectedGrids(devices)

    def detect_device(self):
        """
        Find available devices
        If serial=='auto' and only 1 device detected, use it
        """
        logger.hr('Detect device')
        logger.info('Here are the available devices, '
                    'copy to Alas.Emulator.Serial to use it or set Alas.Emulator.Serial="auto"')
        devices = self.list_device()

        # Show available devices
        available = devices.select(status='device')
        for device in available:
            logger.info(device.serial)
        if not len(available):
            logger.info('No available devices')

        # Show unavailable devices if having any
        unavailable = devices.delete(available)
        if len(unavailable):
            logger.info('Here are the devices detected but unavailable')
            for device in unavailable:
                logger.info(f'{device.serial} ({device.status})')

        # Auto device detection
        if self.config.Emulator_Serial == 'auto':
            if available.count == 0:
                logger.critical('No available device found, auto device detection cannot work, '
                                'please set an exact serial in Alas.Emulator.Serial instead of using "auto"')
                raise RequestHumanTakeover
            elif available.count == 1:
                logger.info(f'Auto device detection found only one device, using it')
                self.serial = devices[0].serial
                del_cached_property(self, 'adb')
            else:
                logger.critical('Multiple devices found, auto device detection cannot decide which to choose, '
                                'please copy one of the available devices listed above to Alas.Emulator.Serial')
                raise RequestHumanTakeover

        # Handle LDPlayer
        # LDPlayer serial jumps between `127.0.0.1:5555+{X}` and `emulator-5554+{X}`
        port_serial, emu_serial = get_serial_pair(self.serial)
        if port_serial and emu_serial:
            # Might be LDPlayer, check connected devices
            port_device = devices.select(serial=port_serial).first_or_none()
            emu_device = devices.select(serial=emu_serial).first_or_none()
            if port_device and emu_device:
                # Paired devices found, check status to get the correct one
                if port_device.status == 'device' and emu_device.status == 'offline':
                    self.serial = port_serial
                    logger.info(f'LDPlayer device pair found: {port_device}, {emu_device}. '
                                f'Using serial: {self.serial}')
                elif port_device.status == 'offline' and emu_device.status == 'device':
                    self.serial = emu_serial
                    logger.info(f'LDPlayer device pair found: {port_device}, {emu_device}. '
                                f'Using serial: {self.serial}')
            elif not devices.select(serial=self.serial):
                # Current serial not found
                if port_device and not emu_device:
                    logger.info(f'Current serial {self.serial} not found but paired device {port_serial} found. '
                                f'Using serial: {port_serial}')
                    self.serial = port_serial
                if not port_device and emu_device:
                    logger.info(f'Current serial {self.serial} not found but paired device {emu_serial} found. '
                                f'Using serial: {emu_serial}')
                    self.serial = emu_serial

    @retry
    def list_package(self, show_log=True):
        """
        Find all packages on device.
        Use dumpsys first for faster.
        """
        # 80ms
        if show_log:
            logger.info('Get package list')
        output = self.adb_shell(r'dumpsys package | grep "Package \["')
        packages = re.findall(r'Package \[([^\s]+)\]', output)
        if len(packages):
            return packages

        # 200ms
        if show_log:
            logger.info('Get package list')
        output = self.adb_shell(['pm', 'list', 'packages'])
        packages = re.findall(r'package:([^\s]+)', output)
        return packages

    def list_azurlane_packages(self, keywords=('hkrpg', ), show_log=True):
        """
        Args:
            keywords:
            show_log:

        Returns:
            list[str]: List of package names
        """
        packages = self.list_package(show_log=show_log)
        packages = [p for p in packages if any([k in p.lower() for k in keywords])]
        return packages

    def detect_package(self, keywords=('hkrpg', ), set_config=True):
        """
        Show all possible packages with the given keyword on this device.
        """
        logger.hr('Detect package')
        packages = self.list_azurlane_packages(keywords=keywords)

        # Show packages
        logger.info(f'Here are the available packages in device "{self.serial}", '
                    f'copy to Alas.Emulator.PackageName to use it')
        if len(packages):
            for package in packages:
                logger.info(package)
        else:
            logger.info(f'No available packages on device "{self.serial}"')

        # Auto package detection
        if len(packages) == 0:
            logger.critical(f'No {keywords[0]} package found, '
                            f'please confirm {keywords[0]} has been installed on device "{self.serial}"')
            raise RequestHumanTakeover
        if len(packages) == 1:
            logger.info('Auto package detection found only one package, using it')
            self.package = packages[0]
            # Set config
            if set_config:
                self.config.Emulator_PackageName = self.package
            # Set server
            # logger.info('Server changed, release resources')
            # set_server(self.package)
        else:
            logger.critical(
                f'Multiple {keywords[0]} packages found, auto package detection cannot decide which to choose, '
                'please copy one of the available devices listed above to Alas.Emulator.PackageName')
            raise RequestHumanTakeover

```

`module/device/connection_attr.py`:

```py
import os
import re

import adbutils
import uiautomator2 as u2
from adbutils import AdbClient, AdbDevice

from module.base.decorator import cached_property
from module.config.config import AzurLaneConfig
from module.config.utils import deep_iter
from module.exception import RequestHumanTakeover
from module.logger import logger


class ConnectionAttr:
    config: AzurLaneConfig
    serial: str

    adb_binary_list = [
        './bin/adb/adb.exe',
        './toolkit/Lib/site-packages/adbutils/binaries/adb.exe',
        '/usr/bin/adb'
    ]

    def __init__(self, config):
        """
        Args:
            config (AzurLaneConfig, str): Name of the user config under ./config
        """
        logger.hr('Device', level=1)
        if isinstance(config, str):
            self.config = AzurLaneConfig(config, task=None)
        else:
            self.config = config

        # Init adb client
        logger.attr('AdbBinary', self.adb_binary)
        # Monkey patch to custom adb
        adbutils.adb_path = lambda: self.adb_binary
        # Remove global proxies, or uiautomator2 will go through it
        for k in list(os.environ.keys()):
            if k.lower().endswith('_proxy'):
                del os.environ[k]
        # Cache adb_client
        _ = self.adb_client

        # Parse custom serial
        self.serial = str(self.config.Emulator_Serial)
        self.serial_check()
        self.config.DEVICE_OVER_HTTP = self.is_over_http


    @staticmethod
    def revise_serial(serial):
        serial = serial.replace(' ', '')
        # 127。0。0。1：5555
        serial = serial.replace('。', '.').replace('，', '.').replace(',', '.').replace('：', ':')
        # 127.0.0.1.5555
        serial = serial.replace('127.0.0.1.', '127.0.0.1:')
        # 16384
        try:
            port = int(serial)
            if 1000 < port < 65536:
                serial = f'127.0.0.1:{port}'
        except ValueError:
            pass
        # 夜神模拟器 127.0.0.1:62001
        if '模拟' in serial:
            res = re.search(r'(\d+\.\d+\.\d+\.\d+:\d+)', serial)
            if res:
                serial = res.group(1)
        return str(serial)

    def serial_check(self):
        """
        serial check
        """
        # fool-proof
        new = self.revise_serial(self.serial)
        if new != self.serial:
            logger.warning(f'Serial "{self.config.Emulator_Serial}" is revised to "{new}"')
            self.config.Emulator_Serial = new
            self.serial = new
        if self.is_bluestacks4_hyperv:
            self.serial = self.find_bluestacks4_hyperv(self.serial)
        if self.is_bluestacks5_hyperv:
            self.serial = self.find_bluestacks5_hyperv(self.serial)
        if "127.0.0.1:58526" in self.serial:
            logger.warning('Serial 127.0.0.1:58526 seems to be WSA, '
                           'please use "wsa-0" or others instead')
            raise RequestHumanTakeover
        if self.is_wsa:
            self.serial = '127.0.0.1:58526'
            if self.config.Emulator_ScreenshotMethod != 'uiautomator2' \
                    or self.config.Emulator_ControlMethod != 'uiautomator2':
                with self.config.multi_set():
                    self.config.Emulator_ScreenshotMethod = 'uiautomator2'
                    self.config.Emulator_ControlMethod = 'uiautomator2'
        if self.is_over_http:
            if self.config.Emulator_ScreenshotMethod not in ["ADB", "uiautomator2", "aScreenCap"] \
                    or self.config.Emulator_ControlMethod not in ["ADB", "uiautomator2", "minitouch"]:
                logger.warning(
                    f'When connecting to a device over http: {self.serial} '
                    f'ScreenshotMethod can only use ["ADB", "uiautomator2", "aScreenCap"], '
                    f'ControlMethod can only use ["ADB", "uiautomator2", "minitouch"]'
                )
                raise RequestHumanTakeover

    @cached_property
    def is_bluestacks4_hyperv(self):
        return "bluestacks4-hyperv" in self.serial

    @cached_property
    def is_bluestacks5_hyperv(self):
        return "bluestacks5-hyperv" in self.serial

    @cached_property
    def is_bluestacks_hyperv(self):
        return self.is_bluestacks4_hyperv or self.is_bluestacks5_hyperv

    @cached_property
    def is_wsa(self):
        return bool(re.match(r'^wsa', self.serial))

    @cached_property
    def is_mumu_family(self):
        # 127.0.0.1:7555
        # 127.0.0.1:16384 + 32*n
        return self.serial == '127.0.0.1:7555' or self.serial.startswith('127.0.0.1:16')

    @cached_property
    def is_emulator(self):
        return self.serial.startswith('emulator-') or self.serial.startswith('127.0.0.1:')

    @cached_property
    def is_network_device(self):
        return bool(re.match(r'\d+\.\d+\.\d+\.\d+:\d+', self.serial))

    @cached_property
    def is_over_http(self):
        return bool(re.match(r"^https?://", self.serial))

    @cached_property
    def is_chinac_phone_cloud(self):
        # Phone cloud with public ADB connection
        # Serial like xxx.xxx.xxx.xxx:301
        return bool(re.search(r":30[0-9]$", self.serial))

    @staticmethod
    def find_bluestacks4_hyperv(serial):
        """
        Find dynamic serial of BlueStacks4 Hyper-V Beta.

        Args:
            serial (str): 'bluestacks4-hyperv', 'bluestacks4-hyperv-2' for multi instance, and so on.

        Returns:
            str: 127.0.0.1:{port}
        """
        from winreg import HKEY_LOCAL_MACHINE, OpenKey, QueryValueEx

        logger.info("Use BlueStacks4 Hyper-V Beta")
        logger.info("Reading Realtime adb port")

        if serial == "bluestacks4-hyperv":
            folder_name = "Android"
        else:
            folder_name = f"Android_{serial[19:]}"

        try:
            with OpenKey(HKEY_LOCAL_MACHINE,
                         rf"SOFTWARE\BlueStacks_bgp64_hyperv\Guests\{folder_name}\Config") as key:
                port = QueryValueEx(key, "BstAdbPort")[0]
        except FileNotFoundError:
            logger.error(rf'Unable to find registry HKEY_LOCAL_MACHINE\SOFTWARE\BlueStacks_bgp64_hyperv\Guests\{folder_name}\Config')
            logger.error('Please confirm that your are using BlueStack 4 hyper-v and not regular BlueStacks 4')
            logger.error(r'Please check if there is any other emulator instances under '
                         r'registry HKEY_LOCAL_MACHINE\SOFTWARE\BlueStacks_bgp64_hyperv\Guests')
            raise RequestHumanTakeover
        logger.info(f"New adb port: {port}")
        return f"127.0.0.1:{port}"

    @staticmethod
    def find_bluestacks5_hyperv(serial):
        """
        Find dynamic serial of BlueStacks5 Hyper-V.

        Args:
            serial (str): 'bluestacks5-hyperv', 'bluestacks5-hyperv-1' for multi instance, and so on.

        Returns:
            str: 127.0.0.1:{port}
        """
        from winreg import HKEY_LOCAL_MACHINE, OpenKey, QueryValueEx

        logger.info("Use BlueStacks5 Hyper-V")
        logger.info("Reading Realtime adb port")

        if serial == "bluestacks5-hyperv":
            parameter_name = r"bst\.instance\.(Nougat64|Pie64|Rvc64)\.status\.adb_port"
        else:
            parameter_name = rf"bst\.instance\.(Nougat64|Pie64|Rvc64)_{serial[19:]}\.status.adb_port"

        try:
            with OpenKey(HKEY_LOCAL_MACHINE, r"SOFTWARE\BlueStacks_nxt") as key:
                directory = QueryValueEx(key, 'UserDefinedDir')[0]
        except FileNotFoundError:
            try:
                with OpenKey(HKEY_LOCAL_MACHINE, r"SOFTWARE\BlueStacks_nxt_cn") as key:
                    directory = QueryValueEx(key, 'UserDefinedDir')[0]
            except FileNotFoundError:
                logger.error('Unable to find registry HKEY_LOCAL_MACHINE\SOFTWARE\BlueStacks_nxt '
                             'or HKEY_LOCAL_MACHINE\SOFTWARE\BlueStacks_nxt_cn')
                logger.error('Please confirm that you are using BlueStacks 5 hyper-v and not regular BlueStacks 5')
                raise RequestHumanTakeover
        logger.info(f"Configuration file directory: {directory}")

        with open(os.path.join(directory, 'bluestacks.conf'), encoding='utf-8') as f:
            content = f.read()
        port = re.search(rf'{parameter_name}="(\d+)"', content)
        if port is None:
            logger.warning(f"Did not match the result: {serial}.")
            raise RequestHumanTakeover
        port = port.group(2)
        logger.info(f"Match to dynamic port: {port}")
        return f"127.0.0.1:{port}"

    @cached_property
    def adb_binary(self):
        # Try adb in deploy.yaml
        from module.webui.setting import State
        file = State.deploy_config.AdbExecutable
        file = file.replace('\\', '/')
        if os.path.exists(file):
            return os.path.abspath(file)

        # Try existing adb.exe
        for file in self.adb_binary_list:
            if os.path.exists(file):
                return os.path.abspath(file)

        # Try adb in python environment
        import sys
        file = os.path.join(sys.executable, '../Lib/site-packages/adbutils/binaries/adb.exe')
        file = os.path.abspath(file).replace('\\', '/')
        if os.path.exists(file):
            return file

        # Use adb in system PATH
        file = 'adb'
        return file

    @cached_property
    def adb_client(self) -> AdbClient:
        host = '127.0.0.1'
        port = 5037

        # Trying to get adb port from env
        env = os.environ.get('ANDROID_ADB_SERVER_PORT', None)
        if env is not None:
            try:
                port = int(env)
            except ValueError:
                logger.warning(f'Invalid environ variable ANDROID_ADB_SERVER_PORT={port}, using default port')

        logger.attr('AdbClient', f'AdbClient({host}, {port})')
        return AdbClient(host, port)

    @cached_property
    def adb(self) -> AdbDevice:
        return AdbDevice(self.adb_client, self.serial)

    @cached_property
    def u2(self) -> u2.Device:
        if self.is_over_http:
            # Using uiautomator2_http
            device = u2.connect(self.serial)
        else:
            # Normal uiautomator2
            if self.serial.startswith('emulator-') or self.serial.startswith('127.0.0.1:'):
                device = u2.connect_usb(self.serial)
            else:
                device = u2.connect(self.serial)

        # Stay alive
        device.set_new_command_timeout(604800)

        logger.attr('u2.Device', f'Device(atx_agent_url={device._get_atx_agent_url()})')
        return device

```

`module/device/control.py`:

```py
from module.base.button import ClickButton
from module.base.decorator import cached_property
from module.base.timer import Timer
from module.base.utils import *
from module.device.method.hermit import Hermit
from module.device.method.maatouch import MaaTouch
from module.device.method.minitouch import Minitouch
from module.device.method.scrcpy import Scrcpy
from module.logger import logger


class Control(Hermit, Minitouch, Scrcpy, MaaTouch):
    def handle_control_check(self, button):
        # Will be overridden in Device
        pass

    @cached_property
    def click_methods(self):
        return {
            'ADB': self.click_adb,
            'uiautomator2': self.click_uiautomator2,
            'minitouch': self.click_minitouch,
            'Hermit': self.click_hermit,
            'MaaTouch': self.click_maatouch,
        }

    def click(self, button, control_check=True):
        """Method to click a button.

        Args:
            button (button.Button): AzurLane Button instance.
            control_check (bool):
        """
        if control_check:
            self.handle_control_check(button)
        x, y = random_rectangle_point(button.button)
        x, y = ensure_int(x, y)
        logger.info(
            'Click %s @ %s' % (point2str(x, y), button)
        )
        method = self.click_methods.get(
            self.config.Emulator_ControlMethod,
            self.click_adb
        )
        method(x, y)

    def multi_click(self, button, n, interval=(0.1, 0.2)):
        self.handle_control_check(button)
        click_timer = Timer(0.1)
        for _ in range(n):
            remain = ensure_time(interval) - click_timer.current()
            if remain > 0:
                self.sleep(remain)
            click_timer.reset()

            self.click(button, control_check=False)

    def long_click(self, button, duration=(1, 1.2)):
        """Method to long click a button.

        Args:
            button (button.Button): AzurLane Button instance.
            duration(int, float, tuple):
        """
        self.handle_control_check(button)
        x, y = random_rectangle_point(button.button)
        x, y = ensure_int(x, y)
        duration = ensure_time(duration)
        logger.info(
            'Click %s @ %s, %s' % (point2str(x, y), button, duration)
        )
        method = self.config.Emulator_ControlMethod
        if method == 'minitouch':
            self.long_click_minitouch(x, y, duration)
        elif method == 'uiautomator2':
            self.long_click_uiautomator2(x, y, duration)
        elif method == 'scrcpy':
            self.long_click_scrcpy(x, y, duration)
        elif method == 'MaaTouch':
            self.long_click_maatouch(x, y, duration)
        else:
            self.swipe_adb((x, y), (x, y), duration)

    def swipe(self, p1, p2, duration=(0.1, 0.2), name='SWIPE', distance_check=True):
        self.handle_control_check(name)
        p1, p2 = ensure_int(p1, p2)
        duration = ensure_time(duration)
        method = self.config.Emulator_ControlMethod
        if method == 'minitouch':
            logger.info('Swipe %s -> %s' % (point2str(*p1), point2str(*p2)))
        elif method == 'uiautomator2':
            logger.info('Swipe %s -> %s, %s' % (point2str(*p1), point2str(*p2), duration))
        elif method == 'scrcpy':
            logger.info('Swipe %s -> %s' % (point2str(*p1), point2str(*p2)))
        elif method == 'MaaTouch':
            logger.info('Swipe %s -> %s' % (point2str(*p1), point2str(*p2)))
        else:
            # ADB needs to be slow, or swipe doesn't work
            duration *= 2.5
            logger.info('Swipe %s -> %s, %s' % (point2str(*p1), point2str(*p2), duration))

        if distance_check:
            if np.linalg.norm(np.subtract(p1, p2)) < 10:
                # Should swipe a certain distance, otherwise AL will treat it as click.
                # uiautomator2 should >= 6px, minitouch should >= 5px
                logger.info('Swipe distance < 10px, dropped')
                return

        if method == 'minitouch':
            self.swipe_minitouch(p1, p2)
        elif method == 'uiautomator2':
            self.swipe_uiautomator2(p1, p2, duration=duration)
        elif method == 'scrcpy':
            self.swipe_scrcpy(p1, p2)
        elif method == 'MaaTouch':
            self.swipe_maatouch(p1, p2)
        else:
            self.swipe_adb(p1, p2, duration=duration)

    def swipe_vector(self, vector, box=(123, 159, 1175, 628), random_range=(0, 0, 0, 0), padding=15,
                     duration=(0.1, 0.2), whitelist_area=None, blacklist_area=None, name='SWIPE', distance_check=True):
        """Method to swipe.

        Args:
            box (tuple): Swipe in box (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
            vector (tuple): (x, y).
            random_range (tuple): (x_min, y_min, x_max, y_max).
            padding (int):
            duration (int, float, tuple):
            whitelist_area: (list[tuple[int]]):
                A list of area that safe to click. Swipe path will end there.
            blacklist_area: (list[tuple[int]]):
                If none of the whitelist_area satisfies current vector, blacklist_area will be used.
                Delete random path that ends in any blacklist_area.
            name (str): Swipe name
            distance_check: (bool):
        """
        p1, p2 = random_rectangle_vector_opted(
            vector,
            box=box,
            random_range=random_range,
            padding=padding,
            whitelist_area=whitelist_area,
            blacklist_area=blacklist_area
        )
        self.swipe(p1, p2, duration=duration, name=name, distance_check=distance_check)

    def drag(self, p1, p2, segments=1, shake=(0, 15), point_random=(-10, -10, 10, 10), shake_random=(-5, -5, 5, 5),
             swipe_duration=0.25, shake_duration=0.1, name='DRAG'):
        self.handle_control_check(name)
        p1, p2 = ensure_int(p1, p2)
        logger.info(
            'Drag %s -> %s' % (point2str(*p1), point2str(*p2))
        )
        method = self.config.Emulator_ControlMethod
        if method == 'minitouch':
            self.drag_minitouch(p1, p2, point_random=point_random)
        elif method == 'uiautomator2':
            self.drag_uiautomator2(
                p1, p2, segments=segments, shake=shake, point_random=point_random, shake_random=shake_random,
                swipe_duration=swipe_duration, shake_duration=shake_duration)
        elif method == 'scrcpy':
            self.drag_scrcpy(p1, p2, point_random=point_random)
        elif method == 'MaaTouch':
            self.drag_maatouch(p1, p2, point_random=point_random)
        else:
            logger.warning(f'Control method {method} does not support drag well, '
                           f'falling back to ADB swipe may cause unexpected behaviour')
            self.swipe_adb(p1, p2, duration=ensure_time(swipe_duration * 2))
            self.click(ClickButton(button=area_offset(point_random, p2), name=name))

```

`module/device/device.py`:

```py
import sys
from collections import deque

from module.base.timer import Timer
from module.device.app_control import AppControl
from module.device.control import Control
from module.device.screenshot import Screenshot
from module.exception import (
    EmulatorNotRunningError,
    GameNotRunningError,
    GameStuckError,
    GameTooManyClickError,
    RequestHumanTakeover
)
from module.logger import logger

if sys.platform == 'win32':
    from module.device.platform.platform_windows import PlatformWindows as Platform
else:
    from module.device.platform.platform_base import PlatformBase as Platform


class Device(Screenshot, Control, AppControl, Platform):
    _screen_size_checked = False
    detect_record = set()
    click_record = deque(maxlen=15)
    stuck_timer = Timer(60, count=60).start()

    def __init__(self, *args, **kwargs):
        for _ in range(2):
            try:
                super().__init__(*args, **kwargs)
                break
            except EmulatorNotRunningError:
                # Try to start emulator
                if self.emulator_instance is not None:
                    self.emulator_start()
                else:
                    logger.critical(
                        f'No emulator with serial "{self.config.Emulator_Serial}" found, '
                        f'please set a correct serial'
                    )
                    raise

        self.screenshot_interval_set()

        # Auto-select the fastest screenshot method
        if not self.config.is_template_config and self.config.Emulator_ScreenshotMethod == 'auto':
            self.run_simple_screenshot_benchmark()

    def run_simple_screenshot_benchmark(self):
        """
        Perform a screenshot method benchmark, test 3 times on each method.
        The fastest one will be set into config.
        """
        logger.info('run_simple_screenshot_benchmark')
        # Check resolution first
        self.resolution_check_uiautomator2()
        # Perform benchmark
        from module.daemon.benchmark import Benchmark
        bench = Benchmark(config=self.config, device=self)
        method = bench.run_simple_screenshot_benchmark()
        # Set
        self.config.Emulator_ScreenshotMethod = method

    def screenshot(self):
        """
        Returns:
            np.ndarray:
        """
        self.stuck_record_check()

        try:
            super().screenshot()
        except RequestHumanTakeover:
            if not self.ascreencap_available:
                logger.error('aScreenCap unavailable on current device, fallback to auto')
                self.run_simple_screenshot_benchmark()
                super().screenshot()
            else:
                raise

        return self.image

    def release_during_wait(self):
        # Scrcpy server is still sending video stream,
        # stop it during wait
        if self.config.Emulator_ScreenshotMethod == 'scrcpy':
            self._scrcpy_server_stop()

    def stuck_record_add(self, button):
        self.detect_record.add(str(button))

    def stuck_record_clear(self):
        self.detect_record = set()
        self.stuck_timer.reset()

    def stuck_record_check(self):
        """
        Raises:
            GameStuckError:
        """
        reached = self.stuck_timer.reached()
        if not reached:
            return False

        logger.warning('Wait too long')
        logger.warning(f'Waiting for {self.detect_record}')
        self.stuck_record_clear()

        if self.app_is_running():
            raise GameStuckError(f'Wait too long')
        else:
            raise GameNotRunningError('Game died')

    def handle_control_check(self, button):
        self.stuck_record_clear()
        self.click_record_add(button)
        self.click_record_check()

    def click_record_add(self, button):
        self.click_record.append(str(button))

    def click_record_clear(self):
        self.click_record.clear()

    def click_record_remove(self, button):
        """
        Remove a button from `click_record`

        Args:
            button (Button):

        Returns:
            int: Number of button removed
        """
        removed = 0
        for _ in range(self.click_record.maxlen):
            try:
                self.click_record.remove(str(button))
                removed += 1
            except ValueError:
                # Value not in queue
                break

        return removed

    def click_record_check(self):
        """
        Raises:
            GameTooManyClickError:
        """
        count = {}
        for key in self.click_record:
            count[key] = count.get(key, 0) + 1
        count = sorted(count.items(), key=lambda item: item[1])
        if count[0][1] >= 12:
            logger.warning(f'Too many click for a button: {count[0][0]}')
            logger.warning(f'History click: {[str(prev) for prev in self.click_record]}')
            self.click_record_clear()
            raise GameTooManyClickError(f'Too many click for a button: {count[0][0]}')
        if len(count) >= 2 and count[0][1] >= 6 and count[1][1] >= 6:
            logger.warning(f'Too many click between 2 buttons: {count[0][0]}, {count[1][0]}')
            logger.warning(f'History click: {[str(prev) for prev in self.click_record]}')
            self.click_record_clear()
            raise GameTooManyClickError(f'Too many click between 2 buttons: {count[0][0]}, {count[1][0]}')

    def disable_stuck_detection(self):
        """
        Disable stuck detection and its handler. Usually uses in semi auto and debugging.
        """
        logger.info('Disable stuck detection')

        def empty_function(*arg, **kwargs):
            return False

        self.click_record_check = empty_function
        self.stuck_record_check = empty_function

    def app_start(self):
        super().app_start()
        self.stuck_record_clear()
        self.click_record_clear()

    def app_stop(self):
        super().app_stop()
        self.stuck_record_clear()
        self.click_record_clear()

```

`module/device/method/adb.py`:

```py
import re
from functools import wraps

import cv2
import numpy as np
import time
from adbutils.errors import AdbError
from lxml import etree

from module.base.decorator import Config
from module.device.connection import Connection
from module.device.method.utils import (RETRY_TRIES, retry_sleep, remove_prefix, handle_adb_error,
                                        ImageTruncated, PackageNotInstalled)
from module.exception import RequestHumanTakeover, ScriptError
from module.logger import logger


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Adb):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # Package not installed
            except PackageNotInstalled as e:
                logger.error(e)

                def init():
                    self.detect_package()
            # ImageTruncated
            except ImageTruncated as e:
                logger.error(e)

                def init():
                    pass
            # Unknown
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


def load_screencap(data):
    """
    Args:
        data: Raw data from `screencap`

    Returns:
        np.ndarray:
    """
    # Load data
    header = np.frombuffer(data[0:12], dtype=np.uint32)
    channel = 4  # screencap sends an RGBA image
    width, height, _ = header  # Usually to be 1280, 720, 1

    image = np.frombuffer(data, dtype=np.uint8)
    if image is None:
        raise ImageTruncated('Empty image after reading from buffer')

    try:
        image = image[-int(width * height * channel):].reshape(height, width, channel)
    except ValueError as e:
        # ValueError: cannot reshape array of size 0 into shape (720,1280,4)
        raise ImageTruncated(str(e))

    image = cv2.cvtColor(image, cv2.COLOR_BGRA2BGR)
    if image is None:
        raise ImageTruncated('Empty image after cv2.cvtColor')

    return image


class Adb(Connection):
    __screenshot_method = [0, 1, 2]
    __screenshot_method_fixed = [0, 1, 2]

    @staticmethod
    def __load_screenshot(screenshot, method):
        if method == 0:
            pass
        elif method == 1:
            screenshot = screenshot.replace(b'\r\n', b'\n')
        elif method == 2:
            screenshot = screenshot.replace(b'\r\r\n', b'\n')
        else:
            raise ScriptError(f'Unknown method to load screenshots: {method}')

        # fix compatibility issues for adb screencap decode problem when the data is from vmos pro
        # When use adb screencap for a screenshot from vmos pro, there would be a header more than that from emulator
        # which would cause image decode problem. So i check and remove the header there.
        screenshot = remove_prefix(screenshot, b'long long=8 fun*=10\n')

        image = np.frombuffer(screenshot, np.uint8)
        if image is None:
            raise ImageTruncated('Empty image after reading from buffer')

        image = cv2.imdecode(image, cv2.IMREAD_COLOR)
        if image is None:
            raise ImageTruncated('Empty image after cv2.imdecode')

        image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        if image is None:
            raise ImageTruncated('Empty image after cv2.cvtColor')

        return image

    def __process_screenshot(self, screenshot):
        for method in self.__screenshot_method_fixed:
            try:
                result = self.__load_screenshot(screenshot, method=method)
                self.__screenshot_method_fixed = [method] + self.__screenshot_method
                return result
            except (OSError, ImageTruncated):
                continue

        self.__screenshot_method_fixed = self.__screenshot_method
        if len(screenshot) < 500:
            logger.warning(f'Unexpected screenshot: {screenshot}')
        raise OSError(f'cannot load screenshot')

    @retry
    @Config.when(DEVICE_OVER_HTTP=False)
    def screenshot_adb(self):
        data = self.adb_shell(['screencap', '-p'], stream=True)
        if len(data) < 500:
            logger.warning(f'Unexpected screenshot: {data}')

        return self.__process_screenshot(data)

    @retry
    @Config.when(DEVICE_OVER_HTTP=True)
    def screenshot_adb(self):
        data = self.adb_shell(['screencap'], stream=True)
        if len(data) < 500:
            logger.warning(f'Unexpected screenshot: {data}')

        return load_screencap(data)

    @retry
    def screenshot_adb_nc(self):
        data = self.adb_shell_nc(['screencap'])
        if len(data) < 500:
            logger.warning(f'Unexpected screenshot: {data}')

        return load_screencap(data)

    @retry
    def click_adb(self, x, y):
        start = time.time()
        self.adb_shell(['input', 'tap', x, y])
        if time.time() - start <= 0.05:
            self.sleep(0.05)

    @retry
    def swipe_adb(self, p1, p2, duration=0.1):
        duration = int(duration * 1000)
        self.adb_shell(['input', 'swipe', *p1, *p2, duration])

    @retry
    def app_current_adb(self):
        """
        Copied from uiautomator2

        Returns:
            str: Package name.

        Raises:
            OSError

        For developer:
            Function reset_uiautomator need this function, so can't use jsonrpc here.
        """
        # Related issue: https://github.com/openatx/uiautomator2/issues/200
        # $ adb shell dumpsys window windows
        # Example output:
        #   mCurrentFocus=Window{41b37570 u0 com.incall.apps.launcher/com.incall.apps.launcher.Launcher}
        #   mFocusedApp=AppWindowToken{422df168 token=Token{422def98 ActivityRecord{422dee38 u0 com.example/.UI.play.PlayActivity t14}}}
        # Regexp
        #   r'mFocusedApp=.*ActivityRecord{\w+ \w+ (?P<package>.*)/(?P<activity>.*) .*'
        #   r'mCurrentFocus=Window{\w+ \w+ (?P<package>.*)/(?P<activity>.*)\}')
        _focusedRE = re.compile(
            r'mCurrentFocus=Window{.*\s+(?P<package>[^\s]+)/(?P<activity>[^\s]+)\}'
        )
        m = _focusedRE.search(self.adb_shell(['dumpsys', 'window', 'windows']))
        if m:
            return m.group('package')

        # try: adb shell dumpsys activity top
        _activityRE = re.compile(
            r'ACTIVITY (?P<package>[^\s]+)/(?P<activity>[^/\s]+) \w+ pid=(?P<pid>\d+)'
        )
        output = self.adb_shell(['dumpsys', 'activity', 'top'])
        ms = _activityRE.finditer(output)
        ret = None
        for m in ms:
            ret = m.group('package')
        if ret:  # get last result
            return ret
        raise OSError("Couldn't get focused app")

    @retry
    def app_start_adb(self, package_name=None, allow_failure=False):
        """
        Args:
            package_name (str):
            allow_failure (bool):

        Returns:
            bool: If success to start
        """
        if not package_name:
            package_name = self.package
        result = self.adb_shell([
            'monkey', '-p', package_name, '-c',
            'android.intent.category.LAUNCHER', '--pct-syskeys', '0', '1'
        ])
        if 'No activities found' in result:
            # ** No activities found to run, monkey aborted.
            if allow_failure:
                return False
            else:
                logger.error(result)
                raise PackageNotInstalled(package_name)
        elif 'inaccessible' in result:
            # /system/bin/sh: monkey: inaccessible or not found
            pass
        else:
            # Events injected: 1
            # ## Network stats: elapsed time=4ms (0ms mobile, 0ms wifi, 4ms not connected)
            return True

        result = self.adb_shell(['dumpsys', 'package', package_name])
        res = re.search(r'android.intent.action.MAIN:\s+\w+ ([\w.\/]+) filter \w+\s+'
                        r'.*\s+Category: "android.intent.category.LAUNCHER"',
                        result)
        if res:
            activity_name = res.group(1)
        else:
            if allow_failure:
                return False
            else:
                logger.error(result)
                raise PackageNotInstalled(package_name)
        self.adb_shell(['am', 'start', '-a', 'android.intent.action.MAIN', '-c',
                        'android.intent.category.LAUNCHER', '-n', activity_name])

    @retry
    def app_stop_adb(self, package_name=None):
        """ Stop one application: am force-stop"""
        if not package_name:
            package_name = self.package
        self.adb_shell(['am', 'force-stop', package_name])

    @retry
    def dump_hierarchy_adb(self, temp: str = '/data/local/tmp/hierarchy.xml') -> etree._Element:
        """
        Args:
            temp (str): Temp file store on emulator.

        Returns:
            etree._Element:
        """
        # Remove existing file
        # self.adb_shell(['rm', '/data/local/tmp/hierarchy.xml'])

        # Dump hierarchy
        for _ in range(2):
            response = self.adb_shell(['uiautomator', 'dump', '--compressed', temp])
            if 'hierchary' in response:
                # UI hierchary dumped to: /data/local/tmp/hierarchy.xml
                break
            else:
                # <None>
                # Must kill uiautomator2
                self.app_stop_adb('com.github.uiautomator')
                self.app_stop_adb('com.github.uiautomator.test')
                continue

        # Read from device
        content = b''
        for chunk in self.adb.sync.iter_content(temp):
            if chunk:
                content += chunk
            else:
                break

        # Parse with lxml
        hierarchy = etree.fromstring(content)
        return hierarchy

```

`module/device/method/ascreencap.py`:

```py
import os
from functools import wraps

import lz4.block
from adbutils.errors import AdbError

from module.base.utils import *
from module.device.connection import Connection
from module.device.method.utils import (RETRY_TRIES, retry_sleep,
                                        handle_adb_error, ImageTruncated)
from module.exception import RequestHumanTakeover, ScriptError
from module.logger import logger


class AscreencapError(Exception):
    pass


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (AScreenCap):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # When ascreencap is not installed
            except AscreencapError as e:
                logger.error(e)

                def init():
                    self.ascreencap_init()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # ImageTruncated
            except ImageTruncated as e:
                logger.error(e)

                def init():
                    pass
            # Unknown
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class AScreenCap(Connection):
    __screenshot_method = [0, 1, 2]
    __screenshot_method_fixed = [0, 1, 2]
    __bytepointer = 0
    ascreencap_available = True

    def ascreencap_init(self):
        logger.hr('aScreenCap init')
        self.__bytepointer = 0
        self.ascreencap_available = True

        arc = self.cpu_abi
        sdk = self.sdk_ver
        logger.info(f'cpu_arc: {arc}, sdk_ver: {sdk}')

        if sdk in range(21, 26):
            ver = "Android_5.x-7.x"
        elif sdk in range(26, 28):
            ver = "Android_8.x"
        elif sdk == 28:
            ver = "Android_9.x"
        else:
            ver = "0"
        filepath = os.path.join(self.config.ASCREENCAP_FILEPATH_LOCAL, ver, arc, 'ascreencap')
        if not os.path.exists(filepath):
            self.ascreencap_available = False
            logger.error('No suitable version of aScreenCap lib available for this device, '
                         'please use other screenshot methods instead')
            raise RequestHumanTakeover

        logger.info(f'pushing {filepath}')
        self.adb_push(filepath, self.config.ASCREENCAP_FILEPATH_REMOTE)

        logger.info(f'chmod 0777 {self.config.ASCREENCAP_FILEPATH_REMOTE}')
        self.adb_shell(['chmod', '0777', self.config.ASCREENCAP_FILEPATH_REMOTE])

    def uninstall_ascreencap(self):
        logger.info('Removing ascreencap')
        self.adb_shell(['rm', self.config.ASCREENCAP_FILEPATH_REMOTE])

    def _ascreencap_reposition_byte_pointer(self, byte_array):
        """Method to return the sanitized version of ascreencap stdout for devices
            that suffers from linker warnings. The correct pointer location will be saved
            for subsequent screen refreshes
        """
        while byte_array[self.__bytepointer:self.__bytepointer + 4] != b'BMZ1':
            self.__bytepointer += 1
            if self.__bytepointer >= len(byte_array):
                text = 'Repositioning byte pointer failed, corrupted aScreenCap data received'
                logger.warning(text)
                if len(byte_array) < 500:
                    logger.warning(f'Unexpected screenshot: {byte_array}')
                raise AscreencapError(text)
        return byte_array[self.__bytepointer:]

    def __load_screenshot(self, screenshot, method):
        if method == 0:
            return screenshot
        elif method == 1:
            return screenshot.replace(b'\r\n', b'\n')
        elif method == 2:
            return screenshot.replace(b'\r\r\n', b'\n')
        else:
            raise ScriptError(f'Unknown method to load screenshots: {method}')

    def __uncompress(self, screenshot):
        raw_compressed_data = self._ascreencap_reposition_byte_pointer(screenshot)

        # See headers in:
        # https://github.com/ClnViewer/Android-fast-screen-capture#streamimage-compressed---header-format-using
        compressed_data_header = np.frombuffer(raw_compressed_data[0:20], dtype=np.uint32)
        if compressed_data_header[0] != 828001602:
            compressed_data_header = compressed_data_header.byteswap()
            if compressed_data_header[0] != 828001602:
                text = f'aScreenCap header verification failure, corrupted image received. ' \
                    f'HEADER IN HEX = {compressed_data_header.tobytes().hex()}'
                logger.warning(text)
                raise AscreencapError(text)

        _, uncompressed_size, _, width, height = compressed_data_header
        channel = 3
        data = lz4.block.decompress(raw_compressed_data[20:], uncompressed_size=uncompressed_size)

        image = np.frombuffer(data, dtype=np.uint8)
        if image is None:
            raise ImageTruncated('Empty image after reading from buffer')

        # Equivalent to cv2.imdecode()
        try:
            image = image[-int(width * height * channel):].reshape(height, width, channel)
        except ValueError as e:
            # ValueError: cannot reshape array of size 0 into shape (720,1280,4)
            raise ImageTruncated(str(e))

        image = cv2.flip(image, 0)
        if image is None:
            raise ImageTruncated('Empty image after cv2.flip')

        image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        if image is None:
            raise ImageTruncated('Empty image after cv2.cvtColor')

        return image

    def __process_screenshot(self, screenshot):
        for method in self.__screenshot_method_fixed:
            try:
                result = self.__load_screenshot(screenshot, method=method)
                result = self.__uncompress(result)
                self.__screenshot_method_fixed = [method] + self.__screenshot_method
                return result
            except lz4.block.LZ4BlockError:
                self.__bytepointer = 0
                continue

        self.__screenshot_method_fixed = self.__screenshot_method
        if len(screenshot) < 500:
            logger.warning(f'Unexpected screenshot: {screenshot}')
        raise OSError(f'cannot load screenshot')

    @retry
    def screenshot_ascreencap(self):
        content = self.adb_shell([self.config.ASCREENCAP_FILEPATH_REMOTE, '--pack', '2', '--stdout'], stream=True)

        return self.__process_screenshot(content)

    @retry
    def screenshot_ascreencap_nc(self):
        data = self.adb_shell_nc([self.config.ASCREENCAP_FILEPATH_REMOTE, '--pack', '2', '--stdout'])
        if len(data) < 500:
            logger.warning(f'Unexpected screenshot: {data}')

        return self.__uncompress(data)

```

`module/device/method/droidcast.py`:

```py
import typing as t
from functools import wraps

import cv2
import numpy as np
import requests
from adbutils.errors import AdbError

from module.base.decorator import Config, cached_property, del_cached_property
from module.base.timer import Timer
from module.device.method.uiautomator_2 import Uiautomator2, ProcessInfo
from module.device.method.utils import (retry_sleep, RETRY_TRIES, handle_adb_error,
                                        ImageTruncated, PackageNotInstalled)
from module.exception import RequestHumanTakeover
from module.logger import logger


class DroidCastVersionIncompatible(Exception):
    pass


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Adb):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # Package not installed
            except PackageNotInstalled as e:
                logger.error(e)

                def init():
                    self.detect_package()
            # DroidCast not running
            # requests.exceptions.ConnectionError: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
            # ReadTimeout: HTTPConnectionPool(host='127.0.0.1', port=20482): Read timed out. (read timeout=3)
            except (requests.exceptions.ConnectionError, requests.exceptions.ReadTimeout) as e:
                logger.error(e)

                def init():
                    self.droidcast_init()
            # DroidCastVersionIncompatible
            except DroidCastVersionIncompatible as e:
                logger.error(e)

                def init():
                    self.droidcast_init()
            # ImageTruncated
            except ImageTruncated as e:
                logger.error(e)

                def init():
                    pass
            # Unknown
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class DroidCast(Uiautomator2):
    """
    DroidCast, another screenshot method, https://github.com/rayworks/DroidCast
    DroidCast_raw, a modified version of DroidCast sending raw bitmap https://github.com/Torther/DroidCastS
    """

    _droidcast_port: int = 0

    @cached_property
    def droidcast_session(self):
        session = requests.Session()
        session.trust_env = False  # Ignore proxy
        self._droidcast_port = self.adb_forward('tcp:53516')
        return session

    def droidcast_url(self, url='/screenshot?format=png'):
        """
        Check APIs from source code:
        https://github.com/rayworks/DroidCast/blob/master/app/src/main/java/com/rayworks/droidcast/Main.java

        Available APIs:
        - /screenshot
            To get JPG screenshots.
        - /screenshot?format=png
            To get PNG screenshots.
        - /screenshot?format=webp
            To get WEBP screenshots.
        - /src
            Websocket to get JPG screenshots.

        Note that /screenshot?format=jpg is unavailable.
        """
        return f'http://127.0.0.1:{self._droidcast_port}{url}'

    @Config.when(DROIDCAST_VERSION='DroidCast')
    def droidcast_init(self):
        logger.hr('Droidcast init')
        self.droidcast_stop()

        logger.info('Pushing DroidCast apk')
        self.adb_push(self.config.DROIDCAST_FILEPATH_LOCAL, self.config.DROIDCAST_FILEPATH_REMOTE)

        logger.info('Starting DroidCast apk')
        # CLASSPATH=/data/local/tmp/DroidCast.apk app_process / com.rayworks.droidcast.Main > /dev/null
        resp = self.u2_shell_background([
            'CLASSPATH=/data/local/tmp/DroidCast.apk',
            'app_process',
            '/',
            'com.rayworks.droidcast.Main',
            '>',
            '/dev/null'
        ])
        logger.info(resp)

        del_cached_property(self, 'droidcast_session')
        _ = self.droidcast_session
        logger.attr('DroidCast', self.droidcast_url())
        self.droidcast_wait_startup()

    @Config.when(DROIDCAST_VERSION='DroidCast_raw')
    def droidcast_init(self):
        logger.hr('Droidcast init')
        self.resolution_check_uiautomator2()
        self.droidcast_stop()

        logger.info('Pushing DroidCast apk')
        self.adb_push(self.config.DROIDCAST_RAW_FILEPATH_LOCAL, self.config.DROIDCAST_RAW_FILEPATH_REMOTE)

        logger.info('Starting DroidCast apk')
        # DroidCastS-release-1.1.5.apk
        # CLASSPATH=/data/local/tmp/DroidCastS-release-1.1.5.apk app_process / com.torther.droidcasts.Main > /dev/null
        resp = self.u2_shell_background([
            'CLASSPATH=/data/local/tmp/DroidCastS.apk',
            'app_process',
            '/',
            'com.torther.droidcasts.Main',
            '>',
            '/dev/null'
        ])
        logger.info(resp)

        del_cached_property(self, 'droidcast_session')
        _ = self.droidcast_session
        logger.attr('DroidCast', self.droidcast_url())
        self.droidcast_wait_startup()

    @retry
    def screenshot_droidcast(self):
        self.config.DROIDCAST_VERSION = 'DroidCast'
        image = self.droidcast_session.get(self.droidcast_url(), timeout=3).content
        image = np.frombuffer(image, np.uint8)
        if image is None:
            raise ImageTruncated('Empty image after reading from buffer')
        if image.shape == (1843200,):
            raise DroidCastVersionIncompatible('Requesting screenshots from `DroidCast` but server is `DroidCast_raw`')

        image = cv2.imdecode(image, cv2.IMREAD_COLOR)
        if image is None:
            raise ImageTruncated('Empty image after cv2.imdecode')

        image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        if image is None:
            raise ImageTruncated('Empty image after cv2.cvtColor')

        return image

    @retry
    def screenshot_droidcast_raw(self):
        self.config.DROIDCAST_VERSION = 'DroidCast_raw'
        image = self.droidcast_session.get(self.droidcast_url(), timeout=3).content
        # DroidCast_raw returns a RGB565 bitmap

        try:
            arr = np.frombuffer(image, dtype=np.uint16).reshape((720, 1280))
        except ValueError as e:
            # Try to load as `DroidCast`
            image = np.frombuffer(image, np.uint8)
            if image is not None:
                image = cv2.imdecode(image, cv2.IMREAD_COLOR)
                if image is not None:
                    raise DroidCastVersionIncompatible(
                        'Requesting screenshots from `DroidCast_raw` but server is `DroidCast`')
            # ValueError: cannot reshape array of size 0 into shape (720,1280)
            raise ImageTruncated(str(e))

        # Convert RGB565 to RGB888
        # https://blog.csdn.net/happy08god/article/details/10516871

        # r = (arr & 0b1111100000000000) >> (11 - 3)
        # g = (arr & 0b0000011111100000) >> (5 - 2)
        # b = (arr & 0b0000000000011111) << 3
        # r |= (r & 0b11100000) >> 5
        # g |= (g & 0b11000000) >> 6
        # b |= (b & 0b11100000) >> 5
        # r = r.astype(np.uint8)
        # g = g.astype(np.uint8)
        # b = b.astype(np.uint8)
        # image = cv2.merge([r, g, b])

        # The same as the code above but costs about 5ms instead of 10ms.
        r = cv2.multiply(arr & 0b1111100000000000, 0.00390625).astype(np.uint8)
        g = cv2.multiply(arr & 0b0000011111100000, 0.125).astype(np.uint8)
        b = cv2.multiply(arr & 0b0000000000011111, 8).astype(np.uint8)
        r = cv2.add(r, cv2.multiply(r, 0.03125))
        g = cv2.add(g, cv2.multiply(g, 0.015625))
        b = cv2.add(b, cv2.multiply(b, 0.03125))
        image = cv2.merge([r, g, b])

        return image

    def droidcast_wait_startup(self):
        """
        Wait until DroidCast startup completed.
        """
        timeout = Timer(10).start()
        while 1:
            self.sleep(0.25)
            if timeout.reached():
                break

            try:
                resp = self.droidcast_session.get(self.droidcast_url('/'), timeout=3)
                # Route `/` is unavailable, but 404 means startup completed
                if resp.status_code == 404:
                    logger.attr('DroidCast', 'online')
                    return True
            except requests.exceptions.ConnectionError:
                logger.attr('DroidCast', 'offline')

        logger.warning('Wait DroidCast startup timeout, assume started')
        return False

    def droidcast_uninstall(self):
        """
        Stop all DroidCast processes and remove DroidCast APK.
        DroidCast has't been installed but a JAVA class call, uninstall is a file delete.
        """
        self.droidcast_stop()
        logger.info('Removing DroidCast')
        self.adb_shell(["rm", self.config.DROIDCAST_FILEPATH_REMOTE])
        self.adb_shell(["rm", self.config.DROIDCAST_RAW_FILEPATH_REMOTE])

    def _iter_droidcast_proc(self) -> t.Iterable[ProcessInfo]:
        """
        List all DroidCast processes.
        """
        processes = self.proc_list_uiautomator2()
        for proc in processes:
            if 'com.rayworks.droidcast.Main' in proc.cmdline:
                yield proc
            if 'com.torther.droidcasts.Main' in proc.cmdline:
                yield proc

    def droidcast_stop(self):
        """
        Stop all DroidCast processes.
        """
        logger.info('Stopping DroidCast')
        for proc in self._iter_droidcast_proc():
            logger.info(f'Kill pid={proc.pid}')
            self.adb_shell(['kill', '-s', 9, proc.pid])

```

`module/device/method/hermit.py`:

```py
import json
from functools import wraps

import requests
from adbutils.errors import AdbError

from module.base.decorator import cached_property
from module.base.timer import Timer
from module.base.utils import point2str, random_rectangle_point
from module.device.method.adb import Adb
from module.device.method.utils import (RETRY_TRIES, retry_sleep,
                                        HierarchyButton, handle_adb_error)
from module.exception import RequestHumanTakeover
from module.logger import logger


class HermitError(Exception):
    pass


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Hermit):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # When unable to send requests
            except requests.exceptions.ConnectionError as e:
                logger.error(e)
                text = str(e)
                if 'Connection aborted' in text:
                    # Hermit not installed or not running
                    # ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
                    def init():
                        self.adb_reconnect()
                        self.hermit_init()
                else:
                    # Lost connection, adb server was killed
                    # HTTPConnectionPool(host='127.0.0.1', port=20269):
                    # Max retries exceeded with url: /click?x=500&y=500
                    def init():
                        self.adb_reconnect()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # HermitError: {"code":-1,"msg":"error"}
            except HermitError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
                    self.hermit_init()
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class Hermit(Adb):
    """
    Hermit, https://github.com/LookCos/hermit.
    API docs: https://www.lookcos.cn/docs/hermit#/zh-cn/API

    True, Hermit has other control APIs and screenshot APIs but they ALL WORK LIKE SHIT.
    Hermit screenshot is slower than ADB and you are likely to get request timeout or trucked images.
    Thus, it requests root permission every time,
    so you will get a toast showing forever: Superuser granted to Hermit.

    Hermit is added to Alas in order to have a better performance in vmos which can't run uiautomator2 and minitouch.
    Note that Hermit requires Android>=7.0
    """
    _hermit_port = 9999
    _hermit_package_name = 'com.lookcos.hermit'

    @property
    def _hermit_url(self):
        return f'http://127.0.0.1:{self._hermit_port}'

    def hermit_init(self):
        logger.hr('Hermit init')

        self.app_stop_adb(self._hermit_package_name)
        # self.uninstall_hermit()

        logger.info('Try to start hermit')
        if self.app_start_adb(self._hermit_package_name, allow_failure=True):
            # Success to start hermit
            logger.info('Success to start hermit')
        else:
            # Hermit not installed
            logger.warning(f'{self._hermit_package_name} not found, installing hermit')
            self.adb_command(['install', '-t', self.config.HERMIT_FILEPATH_LOCAL])
            self.app_start_adb(self._hermit_package_name)

        # Enable accessibility service
        self.hermit_enable_accessibility()

        # Hide Hermit
        # 0 -->  "KEYCODE_UNKNOWN"
        # 1 -->  "KEYCODE_MENU"
        # 2 -->  "KEYCODE_SOFT_RIGHT"
        # 3 -->  "KEYCODE_HOME"
        # 4 -->  "KEYCODE_BACK"
        # 5 -->  "KEYCODE_CALL"
        # 6 -->  "KEYCODE_ENDCALL"
        self.adb_shell(['input', 'keyevent', '3'])

        # Switch back to AzurLane
        self.app_start_adb()

    def uninstall_hermit(self):
        self.adb_command(['uninstall', self._hermit_package_name])

    def hermit_enable_accessibility(self):
        """
        Turn on accessibility service for Hermit.

        Raises:
            RequestHumanTakeover: If failed and user should do it manually.
        """
        logger.hr('Enable accessibility service')
        interval = Timer(0.3)
        timeout = Timer(10, count=10).start()
        while 1:
            h = self.dump_hierarchy_adb()
            interval.wait()
            interval.reset()

            def appear(xpath):
                return bool(HierarchyButton(h, xpath))

            def appear_then_click(xpath):
                b = HierarchyButton(h, xpath)
                if b:
                    point = random_rectangle_point(b.button)
                    logger.info(f'Click {point2str(*point)} @ {b}')
                    self.click_adb(*point)
                    return True
                else:
                    return False

            if appear_then_click('//*[@text="Hermit" and @resource-id="android:id/title"]'):
                continue
            if appear_then_click('//*[@class="android.widget.Switch" and @checked="false"]'):
                continue
            if appear_then_click('//*[@resource-id="android:id/button1"]'):
                # Just plain click here
                # Can't use uiautomator once hermit has access to accessibility service,
                # or uiautomator will get the access.
                break
            if appear('//*[@class="android.widget.Switch" and @checked="true"]'):
                raise HermitError('Accessibility service already enable but get error')

            # End
            if timeout.reached():
                logger.critical('Unable to turn on accessibility service for Hermit')
                logger.critical(
                    '\n\n'
                    'Please do this manually:\n'
                    '1. Find "Hermit" in accessibility setting and click it\n'
                    '2. Turn it ON and click OK\n'
                    '3. Switch back to AzurLane\n'
                )
                raise RequestHumanTakeover

    @cached_property
    def hermit_session(self):
        session = requests.Session()
        session.trust_env = False  # Ignore proxy
        self._hermit_port = self.adb_forward('tcp:9999')
        return session

    def hermit_send(self, url, **kwargs):
        """
        Args:
            url (str):
            **kwargs:

        Returns:
            dict: Usually to be {"code":0,"msg":"ok"}
        """
        result = self.hermit_session.get(f'{self._hermit_url}{url}', params=kwargs, timeout=3).text
        try:
            result = json.loads(result, encoding='utf-8')
            if result['code'] != 0:
                # {"code":-1,"msg":"error"}
                raise HermitError(result)
        except (json.decoder.JSONDecodeError, KeyError):
            e = HermitError(result)
            if 'GestureDescription$Builder' in result:
                logger.error(e)
                logger.critical('Hermit cannot run on current device, hermit requires Android>=7.0')
                raise RequestHumanTakeover
            if 'accessibilityservice' in result:
                # Attempt to invoke virtual method
                # 'boolean android.accessibilityservice.AccessibilityService.dispatchGesture(
                #     android.accessibilityservice.GestureDescription,
                #     android.accessibilityservice.AccessibilityService$GestureResultCallback,
                #     android.os.Handler
                # )' on a null object reference
                logger.error('Unable to access accessibility service')
            raise e

        # Hermit only takes 2-4ms
        # Add a 50ms delay because game can't response quickly.
        self.sleep(0.05)
        return result

    @retry
    def click_hermit(self, x, y):
        self.hermit_send('/click', x=x, y=y)

```

`module/device/method/maatouch.py`:

```py
import socket
from functools import wraps

from adbutils.errors import AdbError

from module.base.decorator import cached_property, del_cached_property
from module.base.timer import Timer
from module.base.utils import *
from module.device.connection import Connection
from module.device.method.minitouch import CommandBuilder, insert_swipe
from module.device.method.utils import RETRY_TRIES, retry_sleep, handle_adb_error
from module.exception import RequestHumanTakeover
from module.logger import logger


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (MaaTouch):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
                    del_cached_property(self, 'maatouch_builder')
            # Emulator closed
            except ConnectionAbortedError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
                    del_cached_property(self, 'maatouch_builder')
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                        del_cached_property(self, 'maatouch_builder')
                else:
                    break
            # MaaTouchNotInstalledError: Received "Aborted" from MaaTouch
            except MaaTouchNotInstalledError as e:
                logger.error(e)

                def init():
                    self.maatouch_install()
                    del_cached_property(self, 'maatouch_builder')
            except BrokenPipeError as e:
                logger.error(e)

                def init():
                    del_cached_property(self, 'maatouch_builder')
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class MaatouchBuilder(CommandBuilder):
    def __init__(self, device, contact=0, handle_orientation=False):
        """
        Args:
            device (MaaTouch):
        """

        super().__init__(device, contact, handle_orientation)

    def send(self):
        return self.device.maatouch_send(builder=self)


class MaaTouchNotInstalledError(Exception):
    pass


class MaaTouch(Connection):
    """
    Control method that implements the same as scrcpy and has an interface similar to minitouch.
    https://github.com/MaaAssistantArknights/MaaTouch
    """
    max_x: int
    max_y: int
    _maatouch_stream = socket.socket
    _maatouch_stream_storage = None

    @cached_property
    def maatouch_builder(self):
        self.maatouch_init()
        return MaatouchBuilder(self)

    def maatouch_init(self):
        logger.hr('MaaTouch init')
        max_x, max_y = 1280, 720
        max_contacts = 2
        max_pressure = 50

        # CLASSPATH=/data/local/tmp/maatouch app_process / com.shxyke.MaaTouch.App
        stream = self.adb_shell(
            ['CLASSPATH=/data/local/tmp/maatouch', 'app_process', '/', 'com.shxyke.MaaTouch.App'],
            stream=True,
            recvall=False
        )
        # Prevent shell stream from being deleted causing socket close
        self._maatouch_stream_storage = stream
        stream = stream.conn
        stream.settimeout(10)
        self._maatouch_stream = stream

        retry_timeout = Timer(5).start()
        while 1:
            # v <version>
            # protocol version, usually it is 1. needn't use this
            # get maatouch server info
            socket_out = stream.makefile()

            # ^ <max-contacts> <max-x> <max-y> <max-pressure>
            out = socket_out.readline().replace("\n", "").replace("\r", "")
            logger.info(out)
            if out.strip() == 'Aborted':
                stream.close()
                raise MaaTouchNotInstalledError(
                    'Received "Aborted" MaaTouch, '
                    'probably because MaaTouch is not installed'
                )
            try:
                _, max_contacts, max_x, max_y, max_pressure = out.split(" ")
                break
            except ValueError:
                stream.close()
                if retry_timeout.reached():
                    raise MaaTouchNotInstalledError(
                        'Received empty data from MaaTouch, '
                        'probably because MaaTouch is not installed'
                    )
                else:
                    # maatouch may not start that fast
                    self.sleep(1)
                    continue

        # self.max_contacts = max_contacts
        self.max_x = int(max_x)
        self.max_y = int(max_y)
        # self.max_pressure = max_pressure

        # $ <pid>
        out = socket_out.readline().replace("\n", "").replace("\r", "")
        logger.info(out)
        # _, pid = out.split(" ")
        # self._maatouch_pid = pid

        logger.info(
            "MaaTouch stream connected"
        )
        logger.info(
            "max_contact: {}; max_x: {}; max_y: {}; max_pressure: {}".format(
                max_contacts, max_x, max_y, max_pressure
            )
        )

    def maatouch_send(self, builder: MaatouchBuilder):
        content = builder.to_minitouch()
        # logger.info("send operation: {}".format(content.replace("\n", "\\n")))
        byte_content = content.encode('utf-8')
        self._maatouch_stream.sendall(byte_content)
        self._maatouch_stream.recv(0)
        self.sleep(self.maatouch_builder.delay / 1000 + builder.DEFAULT_DELAY)
        builder.clear()

    def maatouch_install(self):
        logger.hr('MaaTouch install')
        self.adb_push(self.config.MAATOUCH_FILEPATH_LOCAL, self.config.MAATOUCH_FILEPATH_REMOTE)

    def maatouch_uninstall(self):
        logger.hr('MaaTouch uninstall')
        self.adb_shell(["rm", self.config.MAATOUCH_FILEPATH_REMOTE])

    @retry
    def click_maatouch(self, x, y):
        builder = self.maatouch_builder
        builder.down(x, y).commit()
        builder.up().commit()
        builder.send()

    @retry
    def long_click_maatouch(self, x, y, duration=1.0):
        duration = int(duration * 1000)
        builder = self.maatouch_builder
        builder.down(x, y).commit().wait(duration)
        builder.up().commit()
        builder.send()

    @retry
    def swipe_maatouch(self, p1, p2):
        points = insert_swipe(p0=p1, p3=p2)
        builder = self.maatouch_builder

        builder.down(*points[0]).commit()
        builder.send()

        for point in points[1:]:
            builder.move(*point).commit().wait(10)
        builder.send()

        builder.up().commit()
        builder.send()

    @retry
    def drag_maatouch(self, p1, p2, point_random=(-10, -10, 10, 10)):
        p1 = np.array(p1) - random_rectangle_point(point_random)
        p2 = np.array(p2) - random_rectangle_point(point_random)
        points = insert_swipe(p0=p1, p3=p2, speed=20)
        builder = self.maatouch_builder

        builder.down(*points[0]).commit()
        builder.send()

        for point in points[1:]:
            builder.move(*point).commit().wait(10)
        builder.send()

        builder.move(*p2).commit().wait(140)
        builder.move(*p2).commit().wait(140)
        builder.send()

        builder.up().commit()
        builder.send()

```

`module/device/method/minitouch.py`:

```py
import asyncio
import json
import re
import socket
import time
from functools import wraps
from typing import List

import websockets
from adbutils.errors import AdbError
from uiautomator2 import _Service

from module.base.decorator import Config, cached_property, del_cached_property
from module.base.timer import Timer
from module.base.utils import *
from module.device.connection import Connection
from module.device.method.utils import RETRY_TRIES, retry_sleep, handle_adb_error
from module.exception import RequestHumanTakeover, ScriptError
from module.logger import logger


def random_normal_distribution(a, b, n=5):
    output = np.mean(np.random.uniform(a, b, size=n))
    return output


def random_theta():
    theta = np.random.uniform(0, 2 * np.pi)
    return np.array([np.sin(theta), np.cos(theta)])


def random_rho(dis):
    return random_normal_distribution(-dis, dis)


def insert_swipe(p0, p3, speed=15, min_distance=10):
    """
    Insert way point from start to end.
    First generate a cubic bézier curve

    Args:
        p0: Start point.
        p3: End point.
        speed: Average move speed, pixels per 10ms.
        min_distance:

    Returns:
        list[list[int]]: List of points.

    Examples:
        > insert_swipe((400, 400), (600, 600), speed=20)
        [[400, 400], [406, 406], [416, 415], [429, 428], [444, 442], [462, 459], [481, 478], [504, 500], [527, 522],
        [545, 540], [560, 557], [573, 570], [584, 582], [592, 590], [597, 596], [600, 600]]
    """
    p0 = np.array(p0)
    p3 = np.array(p3)

    # Random control points in Bézier curve
    distance = np.linalg.norm(p3 - p0)
    p1 = 2 / 3 * p0 + 1 / 3 * p3 + random_theta() * random_rho(distance * 0.1)
    p2 = 1 / 3 * p0 + 2 / 3 * p3 + random_theta() * random_rho(distance * 0.1)

    # Random `t` on Bézier curve, sparse in the middle, dense at start and end
    segments = max(int(distance / speed) + 1, 5)
    lower = random_normal_distribution(-85, -60)
    upper = random_normal_distribution(80, 90)
    theta = np.arange(lower + 0., upper + 0.0001, (upper - lower) / segments)
    ts = np.sin(theta / 180 * np.pi)
    ts = np.sign(ts) * abs(ts) ** 0.9
    ts = (ts - min(ts)) / (max(ts) - min(ts))

    # Generate cubic Bézier curve
    points = []
    prev = (-100, -100)
    for t in ts:
        point = p0 * (1 - t) ** 3 + 3 * p1 * t * (1 - t) ** 2 + 3 * p2 * t ** 2 * (1 - t) + p3 * t ** 3
        point = point.astype(int).tolist()
        if np.linalg.norm(np.subtract(point, prev)) < min_distance:
            continue

        points.append(point)
        prev = point

    # Delete nearing points
    if len(points[1:]):
        distance = np.linalg.norm(np.subtract(points[1:], points[0]), axis=1)
        mask = np.append(True, distance > min_distance)
        points = np.array(points)[mask].tolist()
    else:
        points = [p0, p3]

    return points


class Command:
    def __init__(
            self,
            operation: str,
            contact: int = 0,
            x: int = 0,
            y: int = 0,
            ms: int = 10,
            pressure: int = 100
    ):
        """
        See https://github.com/openstf/minitouch#writable-to-the-socket

        Args:
            operation: c, r, d, m, u, w
            contact:
            x:
            y:
            ms:
            pressure:
        """
        self.operation = operation
        self.contact = contact
        self.x = x
        self.y = y
        self.ms = ms
        self.pressure = pressure

    def to_minitouch(self) -> str:
        """
        String that write into minitouch socket
        """
        if self.operation == 'c':
            return f'{self.operation}\n'
        elif self.operation == 'r':
            return f'{self.operation}\n'
        elif self.operation == 'd':
            return f'{self.operation} {self.contact} {self.x} {self.y} {self.pressure}\n'
        elif self.operation == 'm':
            return f'{self.operation} {self.contact} {self.x} {self.y} {self.pressure}\n'
        elif self.operation == 'u':
            return f'{self.operation} {self.contact}\n'
        elif self.operation == 'w':
            return f'{self.operation} {self.ms}\n'
        else:
            return ''

    def to_atx_agent(self, max_x=1280, max_y=720) -> str:
        """
        Dict that send to atx-agent, $DEVICE_URL/minitouch
        See https://github.com/openatx/atx-agent#minitouch%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95
        """
        x, y = self.x / max_x, self.y / max_y
        if self.operation == 'c':
            out = dict(operation=self.operation)
        elif self.operation == 'r':
            out = dict(operation=self.operation)
        elif self.operation == 'd':
            out = dict(operation=self.operation, index=self.contact, pressure=self.pressure, xP=x, yP=y)
        elif self.operation == 'm':
            out = dict(operation=self.operation, index=self.contact, pressure=self.pressure, xP=x, yP=y)
        elif self.operation == 'u':
            out = dict(operation=self.operation, index=self.contact)
        elif self.operation == 'w':
            out = dict(operation=self.operation, milliseconds=self.ms)
        else:
            out = dict()
        return json.dumps(out)


class CommandBuilder:
    """Build command str for minitouch.

    You can use this, to custom actions as you wish::

        with safe_connection(_DEVICE_ID) as connection:
            builder = CommandBuilder()
            builder.down(0, 400, 400, 50)
            builder.commit()
            builder.move(0, 500, 500, 50)
            builder.commit()
            builder.move(0, 800, 400, 50)
            builder.commit()
            builder.up(0)
            builder.commit()
            builder.publish(connection)

    """
    DEFAULT_DELAY = 0.05
    max_x = 1280
    max_y = 720

    def __init__(self, device, contact=0, handle_orientation=True):
        """
        Args:
            device:
        """
        self.device = device
        self.commands = []
        self.delay = 0
        self.contact = contact
        self.handle_orientation = handle_orientation

    @property
    def orientation(self):
        if self.handle_orientation:
            return self.device.orientation
        else:
            return 0

    def convert(self, x, y):
        max_x, max_y = self.device.max_x, self.device.max_y
        orientation = self.orientation

        if orientation == 0:
            pass
        elif orientation == 1:
            x, y = 720 - y, x
            max_x, max_y = max_y, max_x
        elif orientation == 2:
            x, y = 1280 - x, 720 - y
        elif orientation == 3:
            x, y = y, 1280 - x
            max_x, max_y = max_y, max_x
        else:
            raise ScriptError(f'Invalid device orientation: {orientation}')

        self.max_x, self.max_y = max_x, max_y
        if not self.device.config.DEVICE_OVER_HTTP:
            # Maximum X and Y coordinates may, but usually do not, match the display size.
            x, y = int(x / 1280 * max_x), int(y / 720 * max_y)
        else:
            # When over http, max_x and max_y are default to 1280 and 720, skip matching display size
            x, y = int(x), int(y)
        return x, y

    def commit(self):
        """ add minitouch command: 'c\n' """
        self.commands.append(Command('c'))
        return self

    def reset(self):
        """ add minitouch command: 'r\n' """
        self.commands.append(Command('r'))
        return self

    def wait(self, ms=10):
        """ add minitouch command: 'w <ms>\n' """
        self.commands.append(Command('w', ms=ms))
        self.delay += ms
        return self

    def up(self):
        """ add minitouch command: 'u <contact>\n' """
        self.commands.append(Command('u', contact=self.contact))
        return self

    def down(self, x, y, pressure=100):
        """ add minitouch command: 'd <contact> <x> <y> <pressure>\n' """
        x, y = self.convert(x, y)
        self.commands.append(Command('d', x=x, y=y, contact=self.contact, pressure=pressure))
        return self

    def move(self, x, y, pressure=100):
        """ add minitouch command: 'm <contact> <x> <y> <pressure>\n' """
        x, y = self.convert(x, y)
        self.commands.append(Command('m', x=x, y=y, contact=self.contact, pressure=pressure))
        return self

    def clear(self):
        """ clear current commands """
        self.commands = []
        self.delay = 0

    def to_minitouch(self) -> str:
        return ''.join([command.to_minitouch() for command in self.commands])

    def to_atx_agent(self) -> List[str]:
        return [command.to_atx_agent(self.max_x, self.max_y) for command in self.commands]

    def send(self):
        return self.device.minitouch_send(builder=self)


class MinitouchNotInstalledError(Exception):
    pass


class MinitouchOccupiedError(Exception):
    pass


class U2Service(_Service):
    def __init__(self, name, u2obj):
        self.name = name
        self.u2obj = u2obj
        self.service_url = self.u2obj.path2url("/services/" + name)


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Minitouch):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # Emulator closed
            except ConnectionAbortedError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # MinitouchNotInstalledError: Received empty data from minitouch
            except MinitouchNotInstalledError as e:
                logger.error(e)

                def init():
                    self.install_uiautomator2()
                    if self._minitouch_port:
                        self.adb_forward_remove(f'tcp:{self._minitouch_port}')
                    del_cached_property(self, 'minitouch_builder')
            # MinitouchOccupiedError: Timeout when connecting to minitouch
            except MinitouchOccupiedError as e:
                logger.error(e)

                def init():
                    self.restart_atx()
                    if self._minitouch_port:
                        self.adb_forward_remove(f'tcp:{self._minitouch_port}')
                    del_cached_property(self, 'minitouch_builder')
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            except BrokenPipeError as e:
                logger.error(e)

                def init():
                    del_cached_property(self, 'minitouch_builder')
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class Minitouch(Connection):
    _minitouch_port: int = 0
    _minitouch_client: socket.socket
    _minitouch_pid: int
    _minitouch_ws: websockets.WebSocketClientProtocol
    max_x: int
    max_y: int

    @cached_property
    def minitouch_builder(self):
        self.minitouch_init()
        return CommandBuilder(self)

    @Config.when(DEVICE_OVER_HTTP=False)
    def minitouch_init(self):
        logger.hr('MiniTouch init')
        max_x, max_y = 1280, 720
        max_contacts = 2
        max_pressure = 50
        self.get_orientation()

        self._minitouch_port = self.adb_forward("localabstract:minitouch")

        # No need, minitouch already started by uiautomator2
        # self.adb_shell([self.config.MINITOUCH_FILEPATH_REMOTE])

        retry_timeout = Timer(2).start()
        while 1:
            client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            client.settimeout(1)
            client.connect(('127.0.0.1', self._minitouch_port))
            self._minitouch_client = client

            # get minitouch server info
            socket_out = client.makefile()

            # v <version>
            # protocol version, usually it is 1. needn't use this
            try:
                out = socket_out.readline().replace("\n", "").replace("\r", "")
            except socket.timeout:
                client.close()
                raise MinitouchOccupiedError(
                    'Timeout when connecting to minitouch, '
                    'probably because another connection has been established'
                )
            logger.info(out)

            # ^ <max-contacts> <max-x> <max-y> <max-pressure>
            out = socket_out.readline().replace("\n", "").replace("\r", "")
            logger.info(out)
            try:
                _, max_contacts, max_x, max_y, max_pressure, *_ = out.split(" ")
                break
            except ValueError:
                client.close()
                if retry_timeout.reached():
                    raise MinitouchNotInstalledError(
                        'Received empty data from minitouch, '
                        'probably because minitouch is not installed'
                    )
                else:
                    # Minitouch may not start that fast
                    self.sleep(1)
                    continue

        # self.max_contacts = max_contacts
        self.max_x = int(max_x)
        self.max_y = int(max_y)
        # self.max_pressure = max_pressure

        # $ <pid>
        out = socket_out.readline().replace("\n", "").replace("\r", "")
        logger.info(out)
        _, pid = out.split(" ")
        self._minitouch_pid = pid

        logger.info(
            "minitouch running on port: {}, pid: {}".format(self._minitouch_port, self._minitouch_pid)
        )
        logger.info(
            "max_contact: {}; max_x: {}; max_y: {}; max_pressure: {}".format(
                max_contacts, max_x, max_y, max_pressure
            )
        )

    @Config.when(DEVICE_OVER_HTTP=False)
    def minitouch_send(self, builder: CommandBuilder):
        content = builder.to_minitouch()
        # logger.info("send operation: {}".format(content.replace("\n", "\\n")))
        byte_content = content.encode('utf-8')
        self._minitouch_client.sendall(byte_content)
        self._minitouch_client.recv(0)
        time.sleep(self.minitouch_builder.delay / 1000 + builder.DEFAULT_DELAY)
        builder.clear()

    @cached_property
    def _minitouch_loop(self):
        return asyncio.new_event_loop()

    def _minitouch_loop_run(self, event):
        """
        Args:
            event: Async function

        Raises:
            MinitouchOccupiedError
        """
        try:
            return self._minitouch_loop.run_until_complete(event)
        except websockets.ConnectionClosedError as e:
            # ConnectionClosedError: no close frame received or sent
            # ConnectionClosedError: sent 1011 (unexpected error) keepalive ping timeout; no close frame received
            logger.error(e)
            raise MinitouchOccupiedError(
                'ConnectionClosedError, '
                'probably because another connection has been established'
            )

    @Config.when(DEVICE_OVER_HTTP=True)
    def minitouch_init(self):
        logger.hr('MiniTouch init')
        self.max_x, self.max_y = 1280, 720
        self.get_orientation()

        logger.info('Stop minitouch service')
        s = U2Service('minitouch', self.u2)
        s.stop()
        while 1:
            if not s.running():
                break
            self.sleep(0.05)

        logger.info('Start minitouch service')
        s.start()
        while 1:
            if s.running():
                break
            self.sleep(0.05)

        # 'ws://127.0.0.1:7912/minitouch'
        url = re.sub(r"^https?://", 'ws://', self.serial) + '/minitouch'
        logger.attr('Minitouch', url)

        async def connect():
            ws = await websockets.connect(url)
            # start @minitouch service
            logger.info(await ws.recv())
            # dial unix:@minitouch
            logger.info(await ws.recv())
            return ws

        self._minitouch_ws = self._minitouch_loop_run(connect())

    @Config.when(DEVICE_OVER_HTTP=True)
    def minitouch_send(self, builder: CommandBuilder):
        content = builder.to_atx_agent()

        async def send():
            for row in content:
                # logger.info("send operation: {}".format(row.replace("\n", "\\n")))
                await self._minitouch_ws.send(row)

        self._minitouch_loop_run(send())
        time.sleep(builder.delay / 1000 + builder.DEFAULT_DELAY)
        builder.clear()

    @retry
    def click_minitouch(self, x, y):
        builder = self.minitouch_builder
        builder.down(x, y).commit()
        builder.up().commit()
        builder.send()

    @retry
    def long_click_minitouch(self, x, y, duration=1.0):
        duration = int(duration * 1000)
        builder = self.minitouch_builder
        builder.down(x, y).commit().wait(duration)
        builder.up().commit()
        builder.send()

    @retry
    def swipe_minitouch(self, p1, p2):
        points = insert_swipe(p0=p1, p3=p2)
        builder = self.minitouch_builder

        builder.down(*points[0]).commit()
        builder.send()

        for point in points[1:]:
            builder.move(*point).commit().wait(10)
        builder.send()

        builder.up().commit()
        builder.send()

    @retry
    def drag_minitouch(self, p1, p2, point_random=(-10, -10, 10, 10)):
        p1 = np.array(p1) - random_rectangle_point(point_random)
        p2 = np.array(p2) - random_rectangle_point(point_random)
        points = insert_swipe(p0=p1, p3=p2, speed=20)
        builder = self.minitouch_builder

        builder.down(*points[0]).commit()
        builder.send()

        for point in points[1:]:
            builder.move(*point).commit().wait(10)
        builder.send()

        builder.move(*p2).commit().wait(140)
        builder.move(*p2).commit().wait(140)
        builder.send()

        builder.up().commit()
        builder.send()

```

`module/device/method/scrcpy/__init__.py`:

```py
from .scrcpy import Scrcpy, ScrcpyError

```

`module/device/method/scrcpy/const.py`:

```py
"""
This module includes all consts used in this project
"""

# Action
ACTION_DOWN = 0
ACTION_UP = 1
ACTION_MOVE = 2

# KeyCode
KEYCODE_UNKNOWN = 0
KEYCODE_SOFT_LEFT = 1
KEYCODE_SOFT_RIGHT = 2
KEYCODE_HOME = 3
KEYCODE_BACK = 4
KEYCODE_CALL = 5
KEYCODE_ENDCALL = 6
KEYCODE_0 = 7
KEYCODE_1 = 8
KEYCODE_2 = 9
KEYCODE_3 = 10
KEYCODE_4 = 11
KEYCODE_5 = 12
KEYCODE_6 = 13
KEYCODE_7 = 14
KEYCODE_8 = 15
KEYCODE_9 = 16
KEYCODE_STAR = 17
KEYCODE_POUND = 18
KEYCODE_DPAD_UP = 19
KEYCODE_DPAD_DOWN = 20
KEYCODE_DPAD_LEFT = 21
KEYCODE_DPAD_RIGHT = 22
KEYCODE_DPAD_CENTER = 23
KEYCODE_VOLUME_UP = 24
KEYCODE_VOLUME_DOWN = 25
KEYCODE_POWER = 26
KEYCODE_CAMERA = 27
KEYCODE_CLEAR = 28
KEYCODE_A = 29
KEYCODE_B = 30
KEYCODE_C = 31
KEYCODE_D = 32
KEYCODE_E = 33
KEYCODE_F = 34
KEYCODE_G = 35
KEYCODE_H = 36
KEYCODE_I = 37
KEYCODE_J = 38
KEYCODE_K = 39
KEYCODE_L = 40
KEYCODE_M = 41
KEYCODE_N = 42
KEYCODE_O = 43
KEYCODE_P = 44
KEYCODE_Q = 45
KEYCODE_R = 46
KEYCODE_S = 47
KEYCODE_T = 48
KEYCODE_U = 49
KEYCODE_V = 50
KEYCODE_W = 51
KEYCODE_X = 52
KEYCODE_Y = 53
KEYCODE_Z = 54
KEYCODE_COMMA = 55
KEYCODE_PERIOD = 56
KEYCODE_ALT_LEFT = 57
KEYCODE_ALT_RIGHT = 58
KEYCODE_SHIFT_LEFT = 59
KEYCODE_SHIFT_RIGHT = 60
KEYCODE_TAB = 61
KEYCODE_SPACE = 62
KEYCODE_SYM = 63
KEYCODE_EXPLORER = 64
KEYCODE_ENVELOPE = 65
KEYCODE_ENTER = 66
KEYCODE_DEL = 67
KEYCODE_GRAVE = 68
KEYCODE_MINUS = 69
KEYCODE_EQUALS = 70
KEYCODE_LEFT_BRACKET = 71
KEYCODE_RIGHT_BRACKET = 72
KEYCODE_BACKSLASH = 73
KEYCODE_SEMICOLON = 74
KEYCODE_APOSTROPHE = 75
KEYCODE_SLASH = 76
KEYCODE_AT = 77
KEYCODE_NUM = 78
KEYCODE_HEADSETHOOK = 79
KEYCODE_PLUS = 81
KEYCODE_MENU = 82
KEYCODE_NOTIFICATION = 83
KEYCODE_SEARCH = 84
KEYCODE_MEDIA_PLAY_PAUSE = 85
KEYCODE_MEDIA_STOP = 86
KEYCODE_MEDIA_NEXT = 87
KEYCODE_MEDIA_PREVIOUS = 88
KEYCODE_MEDIA_REWIND = 89
KEYCODE_MEDIA_FAST_FORWARD = 90
KEYCODE_MUTE = 91
KEYCODE_PAGE_UP = 92
KEYCODE_PAGE_DOWN = 93
KEYCODE_BUTTON_A = 96
KEYCODE_BUTTON_B = 97
KEYCODE_BUTTON_C = 98
KEYCODE_BUTTON_X = 99
KEYCODE_BUTTON_Y = 100
KEYCODE_BUTTON_Z = 101
KEYCODE_BUTTON_L1 = 102
KEYCODE_BUTTON_R1 = 103
KEYCODE_BUTTON_L2 = 104
KEYCODE_BUTTON_R2 = 105
KEYCODE_BUTTON_THUMBL = 106
KEYCODE_BUTTON_THUMBR = 107
KEYCODE_BUTTON_START = 108
KEYCODE_BUTTON_SELECT = 109
KEYCODE_BUTTON_MODE = 110
KEYCODE_ESCAPE = 111
KEYCODE_FORWARD_DEL = 112
KEYCODE_CTRL_LEFT = 113
KEYCODE_CTRL_RIGHT = 114
KEYCODE_CAPS_LOCK = 115
KEYCODE_SCROLL_LOCK = 116
KEYCODE_META_LEFT = 117
KEYCODE_META_RIGHT = 118
KEYCODE_FUNCTION = 119
KEYCODE_SYSRQ = 120
KEYCODE_BREAK = 121
KEYCODE_MOVE_HOME = 122
KEYCODE_MOVE_END = 123
KEYCODE_INSERT = 124
KEYCODE_FORWARD = 125
KEYCODE_MEDIA_PLAY = 126
KEYCODE_MEDIA_PAUSE = 127
KEYCODE_MEDIA_CLOSE = 128
KEYCODE_MEDIA_EJECT = 129
KEYCODE_MEDIA_RECORD = 130
KEYCODE_F1 = 131
KEYCODE_F2 = 132
KEYCODE_F3 = 133
KEYCODE_F4 = 134
KEYCODE_F5 = 135
KEYCODE_F6 = 136
KEYCODE_F7 = 137
KEYCODE_F8 = 138
KEYCODE_F9 = 139
KEYCODE_F10 = 140
KEYCODE_F11 = 141
KEYCODE_F12 = 142
KEYCODE_NUM_LOCK = 143
KEYCODE_NUMPAD_0 = 144
KEYCODE_NUMPAD_1 = 145
KEYCODE_NUMPAD_2 = 146
KEYCODE_NUMPAD_3 = 147
KEYCODE_NUMPAD_4 = 148
KEYCODE_NUMPAD_5 = 149
KEYCODE_NUMPAD_6 = 150
KEYCODE_NUMPAD_7 = 151
KEYCODE_NUMPAD_8 = 152
KEYCODE_NUMPAD_9 = 153
KEYCODE_NUMPAD_DIVIDE = 154
KEYCODE_NUMPAD_MULTIPLY = 155
KEYCODE_NUMPAD_SUBTRACT = 156
KEYCODE_NUMPAD_ADD = 157
KEYCODE_NUMPAD_DOT = 158
KEYCODE_NUMPAD_COMMA = 159
KEYCODE_NUMPAD_ENTER = 160
KEYCODE_NUMPAD_EQUALS = 161
KEYCODE_NUMPAD_LEFT_PAREN = 162
KEYCODE_NUMPAD_RIGHT_PAREN = 163
KEYCODE_VOLUME_MUTE = 164
KEYCODE_INFO = 165
KEYCODE_CHANNEL_UP = 166
KEYCODE_CHANNEL_DOWN = 167
KEYCODE_ZOOM_IN = 168
KEYCODE_ZOOM_OUT = 169
KEYCODE_TV = 170
KEYCODE_WINDOW = 171
KEYCODE_GUIDE = 172
KEYCODE_DVR = 173
KEYCODE_BOOKMARK = 174
KEYCODE_CAPTIONS = 175
KEYCODE_SETTINGS = 176
KEYCODE_TV_POWER = 177
KEYCODE_TV_INPUT = 178
KEYCODE_STB_POWER = 179
KEYCODE_STB_INPUT = 180
KEYCODE_AVR_POWER = 181
KEYCODE_AVR_INPUT = 182
KEYCODE_PROG_RED = 183
KEYCODE_PROG_GREEN = 184
KEYCODE_PROG_YELLOW = 185
KEYCODE_PROG_BLUE = 186
KEYCODE_APP_SWITCH = 187
KEYCODE_BUTTON_1 = 188
KEYCODE_BUTTON_2 = 189
KEYCODE_BUTTON_3 = 190
KEYCODE_BUTTON_4 = 191
KEYCODE_BUTTON_5 = 192
KEYCODE_BUTTON_6 = 193
KEYCODE_BUTTON_7 = 194
KEYCODE_BUTTON_8 = 195
KEYCODE_BUTTON_9 = 196
KEYCODE_BUTTON_10 = 197
KEYCODE_BUTTON_11 = 198
KEYCODE_BUTTON_12 = 199
KEYCODE_BUTTON_13 = 200
KEYCODE_BUTTON_14 = 201
KEYCODE_BUTTON_15 = 202
KEYCODE_BUTTON_16 = 203
KEYCODE_LANGUAGE_SWITCH = 204
KEYCODE_MANNER_MODE = 205
KEYCODE_3D_MODE = 206
KEYCODE_CONTACTS = 207
KEYCODE_CALENDAR = 208
KEYCODE_MUSIC = 209
KEYCODE_CALCULATOR = 210
KEYCODE_ZENKAKU_HANKAKU = 211
KEYCODE_EISU = 212
KEYCODE_MUHENKAN = 213
KEYCODE_HENKAN = 214
KEYCODE_KATAKANA_HIRAGANA = 215
KEYCODE_YEN = 216
KEYCODE_RO = 217
KEYCODE_KANA = 218
KEYCODE_ASSIST = 219
KEYCODE_BRIGHTNESS_DOWN = 220
KEYCODE_BRIGHTNESS_UP = 221
KEYCODE_MEDIA_AUDIO_TRACK = 222
KEYCODE_SLEEP = 223
KEYCODE_WAKEUP = 224
KEYCODE_PAIRING = 225
KEYCODE_MEDIA_TOP_MENU = 226
KEYCODE_11 = 227
KEYCODE_12 = 228
KEYCODE_LAST_CHANNEL = 229
KEYCODE_TV_DATA_SERVICE = 230
KEYCODE_VOICE_ASSIST = 231
KEYCODE_TV_RADIO_SERVICE = 232
KEYCODE_TV_TELETEXT = 233
KEYCODE_TV_NUMBER_ENTRY = 234
KEYCODE_TV_TERRESTRIAL_ANALOG = 235
KEYCODE_TV_TERRESTRIAL_DIGITAL = 236
KEYCODE_TV_SATELLITE = 237
KEYCODE_TV_SATELLITE_BS = 238
KEYCODE_TV_SATELLITE_CS = 239
KEYCODE_TV_SATELLITE_SERVICE = 240
KEYCODE_TV_NETWORK = 241
KEYCODE_TV_ANTENNA_CABLE = 242
KEYCODE_TV_INPUT_HDMI_1 = 243
KEYCODE_TV_INPUT_HDMI_2 = 244
KEYCODE_TV_INPUT_HDMI_3 = 245
KEYCODE_TV_INPUT_HDMI_4 = 246
KEYCODE_TV_INPUT_COMPOSITE_1 = 247
KEYCODE_TV_INPUT_COMPOSITE_2 = 248
KEYCODE_TV_INPUT_COMPONENT_1 = 249
KEYCODE_TV_INPUT_COMPONENT_2 = 250
KEYCODE_TV_INPUT_VGA_1 = 251
KEYCODE_TV_AUDIO_DESCRIPTION = 252
KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP = 253
KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN = 254
KEYCODE_TV_ZOOM_MODE = 255
KEYCODE_TV_CONTENTS_MENU = 256
KEYCODE_TV_MEDIA_CONTEXT_MENU = 257
KEYCODE_TV_TIMER_PROGRAMMING = 258
KEYCODE_HELP = 259
KEYCODE_NAVIGATE_PREVIOUS = 260
KEYCODE_NAVIGATE_NEXT = 261
KEYCODE_NAVIGATE_IN = 262
KEYCODE_NAVIGATE_OUT = 263
KEYCODE_STEM_PRIMARY = 264
KEYCODE_STEM_1 = 265
KEYCODE_STEM_2 = 266
KEYCODE_STEM_3 = 267
KEYCODE_DPAD_UP_LEFT = 268
KEYCODE_DPAD_DOWN_LEFT = 269
KEYCODE_DPAD_UP_RIGHT = 270
KEYCODE_DPAD_DOWN_RIGHT = 271
KEYCODE_MEDIA_SKIP_FORWARD = 272
KEYCODE_MEDIA_SKIP_BACKWARD = 273
KEYCODE_MEDIA_STEP_FORWARD = 274
KEYCODE_MEDIA_STEP_BACKWARD = 275
KEYCODE_SOFT_SLEEP = 276
KEYCODE_CUT = 277
KEYCODE_COPY = 278
KEYCODE_PASTE = 279
KEYCODE_SYSTEM_NAVIGATION_UP = 280
KEYCODE_SYSTEM_NAVIGATION_DOWN = 281
KEYCODE_SYSTEM_NAVIGATION_LEFT = 282
KEYCODE_SYSTEM_NAVIGATION_RIGHT = 283
KEYCODE_KEYCODE_ALL_APPS = 284
KEYCODE_KEYCODE_REFRESH = 285
KEYCODE_KEYCODE_THUMBS_UP = 286
KEYCODE_KEYCODE_THUMBS_DOWN = 287

# Event
EVENT_INIT = "init"
EVENT_FRAME = "frame"
EVENT_DISCONNECT = "disconnect"

# Type
TYPE_INJECT_KEYCODE = 0
TYPE_INJECT_TEXT = 1
TYPE_INJECT_TOUCH_EVENT = 2
TYPE_INJECT_SCROLL_EVENT = 3
TYPE_BACK_OR_SCREEN_ON = 4
TYPE_EXPAND_NOTIFICATION_PANEL = 5
TYPE_EXPAND_SETTINGS_PANEL = 6
TYPE_COLLAPSE_PANELS = 7
TYPE_GET_CLIPBOARD = 8
TYPE_SET_CLIPBOARD = 9
TYPE_SET_SCREEN_POWER_MODE = 10
TYPE_ROTATE_DEVICE = 11

# Lock screen orientation
LOCK_SCREEN_ORIENTATION_UNLOCKED = -1
LOCK_SCREEN_ORIENTATION_INITIAL = -2
LOCK_SCREEN_ORIENTATION_0 = 0
LOCK_SCREEN_ORIENTATION_1 = 1
LOCK_SCREEN_ORIENTATION_2 = 2
LOCK_SCREEN_ORIENTATION_3 = 3

# Screen power mode
POWER_MODE_OFF = 0
POWER_MODE_NORMAL = 2

```

`module/device/method/scrcpy/control.py`:

```py
import functools
import socket
import struct
import time

import module.device.method.scrcpy.const as const


def inject(control_type: int):
    """
    Inject control code, with this inject, we will be able to do unit test

    Args:
        control_type: event to send, TYPE_*
    """

    def wrapper(f):
        @functools.wraps(f)
        def inner(self, *args, **kwargs):
            package = struct.pack(">B", control_type) + f(self, *args, **kwargs)
            if self.control_socket is not None:
                with self.control_socket_lock:
                    self.control_socket.send(package)
            return package

        return inner

    return wrapper


class ControlSender:
    def __init__(self, parent):
        self.parent = parent

    @property
    def control_socket(self):
        return self.parent._scrcpy_control_socket

    @property
    def control_socket_lock(self):
        return self.parent._scrcpy_control_socket_lock

    @property
    def resolution(self):
        return self.parent._scrcpy_resolution

    @inject(const.TYPE_INJECT_KEYCODE)
    def keycode(
            self, keycode: int, action: int = const.ACTION_DOWN, repeat: int = 0
    ) -> bytes:
        """
        Send keycode to device

        Args:
            keycode: const.KEYCODE_*
            action: ACTION_DOWN | ACTION_UP
            repeat: repeat count
        """
        return struct.pack(">Biii", action, keycode, repeat, 0)

    @inject(const.TYPE_INJECT_TEXT)
    def text(self, text: str) -> bytes:
        """
        Send text to device

        Args:
            text: text to send
        """

        buffer = text.encode("utf-8")
        return struct.pack(">i", len(buffer)) + buffer

    @inject(const.TYPE_INJECT_TOUCH_EVENT)
    def touch(
            self, x: int, y: int, action: int = const.ACTION_DOWN, touch_id: int = -1
    ) -> bytes:
        """
        Touch screen

        Args:
            x: horizontal position
            y: vertical position
            action: ACTION_DOWN | ACTION_UP | ACTION_MOVE
            touch_id: Default using virtual id -1, you can specify it to emulate multi finger touch
        """
        x, y = max(x, 0), max(y, 0)
        return struct.pack(
            ">BqiiHHHi",
            action,
            touch_id,
            int(x),
            int(y),
            int(self.resolution[0]),
            int(self.resolution[1]),
            0xFFFF,
            1,
        )

    @inject(const.TYPE_INJECT_SCROLL_EVENT)
    def scroll(self, x: int, y: int, h: int, v: int) -> bytes:
        """
        Scroll screen

        Args:
            x: horizontal position
            y: vertical position
            h: horizontal movement
            v: vertical movement
        """

        x, y = max(x, 0), max(y, 0)
        return struct.pack(
            ">iiHHii",
            int(x),
            int(y),
            int(self.resolution[0]),
            int(self.resolution[1]),
            int(h),
            int(v),
        )

    @inject(const.TYPE_BACK_OR_SCREEN_ON)
    def back_or_turn_screen_on(self, action: int = const.ACTION_DOWN) -> bytes:
        """
        If the screen is off, it is turned on only on ACTION_DOWN

        Args:
            action: ACTION_DOWN | ACTION_UP
        """
        return struct.pack(">B", action)

    @inject(const.TYPE_EXPAND_NOTIFICATION_PANEL)
    def expand_notification_panel(self) -> bytes:
        """
        Expand notification panel
        """
        return b""

    @inject(const.TYPE_EXPAND_SETTINGS_PANEL)
    def expand_settings_panel(self) -> bytes:
        """
        Expand settings panel
        """
        return b""

    @inject(const.TYPE_COLLAPSE_PANELS)
    def collapse_panels(self) -> bytes:
        """
        Collapse all panels
        """
        return b""

    def get_clipboard(self) -> str:
        """
        Get clipboard
        """
        # Since this function need socket response, we can't auto inject it any more
        s: socket.socket = self.control_socket

        with self.control_socket_lock:
            # Flush socket
            s.setblocking(False)
            while True:
                try:
                    s.recv(1024)
                except BlockingIOError:
                    break
            s.setblocking(True)

            # Read package
            package = struct.pack(">B", const.TYPE_GET_CLIPBOARD)
            s.send(package)
            (code,) = struct.unpack(">B", s.recv(1))
            assert code == 0
            (length,) = struct.unpack(">i", s.recv(4))

            return s.recv(length).decode("utf-8")

    @inject(const.TYPE_SET_CLIPBOARD)
    def set_clipboard(self, text: str, paste: bool = False) -> bytes:
        """
        Set clipboard

        Args:
            text: the string you want to set
            paste: paste now
        """
        buffer = text.encode("utf-8")
        return struct.pack(">?i", paste, len(buffer)) + buffer

    @inject(const.TYPE_SET_SCREEN_POWER_MODE)
    def set_screen_power_mode(self, mode: int = const.POWER_MODE_NORMAL) -> bytes:
        """
        Set screen power mode

        Args:
            mode: POWER_MODE_OFF | POWER_MODE_NORMAL
        """
        return struct.pack(">b", mode)

    @inject(const.TYPE_ROTATE_DEVICE)
    def rotate_device(self) -> bytes:
        """
        Rotate device
        """
        return b""

    def swipe(
            self,
            start_x: int,
            start_y: int,
            end_x: int,
            end_y: int,
            move_step_length: int = 5,
            move_steps_delay: float = 0.005,
    ) -> None:
        """
        Swipe on screen

        Args:
            start_x: start horizontal position
            start_y: start vertical position
            end_x: start horizontal position
            end_y: end vertical position
            move_step_length: length per step
            move_steps_delay: sleep seconds after each step
        :return:
        """

        self.touch(start_x, start_y, const.ACTION_DOWN)
        next_x = start_x
        next_y = start_y

        if end_x > self.resolution[0]:
            end_x = self.resolution[0]

        if end_y > self.resolution[1]:
            end_y = self.resolution[1]

        decrease_x = True if start_x > end_x else False
        decrease_y = True if start_y > end_y else False
        while True:
            if decrease_x:
                next_x -= move_step_length
                if next_x < end_x:
                    next_x = end_x
            else:
                next_x += move_step_length
                if next_x > end_x:
                    next_x = end_x

            if decrease_y:
                next_y -= move_step_length
                if next_y < end_y:
                    next_y = end_y
            else:
                next_y += move_step_length
                if next_y > end_y:
                    next_y = end_y

            self.touch(next_x, next_y, const.ACTION_MOVE)

            if next_x == end_x and next_y == end_y:
                self.touch(next_x, next_y, const.ACTION_UP)
                break
            time.sleep(move_steps_delay)

```

`module/device/method/scrcpy/core.py`:

```py
import socket
import struct
import threading
import time
import typing as t
from time import sleep

import numpy as np
from adbutils import AdbError, Network

from module.base.decorator import cached_property
from module.base.timer import Timer
from module.device.connection import Connection
from module.device.method.scrcpy.control import ControlSender
from module.device.method.scrcpy.options import ScrcpyOptions
from module.device.method.utils import AdbConnection, recv_all
from module.exception import RequestHumanTakeover
from module.logger import logger


class ScrcpyError(Exception):
    pass


class ScrcpyCore(Connection):
    """
    Scrcpy: https://github.com/Genymobile/scrcpy
    Module from https://github.com/leng-yue/py-scrcpy-client
    """

    _scrcpy_last_frame: t.Optional[np.ndarray] = None
    _scrcpy_last_frame_time: float = 0.

    _scrcpy_alive = False
    _scrcpy_server_stream: t.Optional[AdbConnection] = None
    _scrcpy_video_socket: t.Optional[socket.socket] = None
    _scrcpy_control_socket: t.Optional[socket.socket] = None
    _scrcpy_control_socket_lock = threading.Lock()

    _scrcpy_stream_loop_thread = None
    _scrcpy_resolution: t.Tuple[int, int] = (1280, 720)

    @cached_property
    def _scrcpy_control(self) -> ControlSender:
        return ControlSender(self)

    def scrcpy_init(self):
        self._scrcpy_server_stop()

        logger.hr('Scrcpy init')
        logger.info(f'pushing {self.config.SCRCPY_FILEPATH_LOCAL}')
        self.adb_push(self.config.SCRCPY_FILEPATH_LOCAL, self.config.SCRCPY_FILEPATH_REMOTE)

        self._scrcpy_alive = False
        self.scrcpy_ensure_running()

    def scrcpy_ensure_running(self):
        if not self._scrcpy_alive:
            with self._scrcpy_control_socket_lock:
                self._scrcpy_server_start()

    def _scrcpy_server_start(self):
        """
        Connect to scrcpy server, there will be two sockets, video and control socket.

        Raises:
            ScrcpyError:
        """
        logger.hr('Scrcpy server start')
        commands = ScrcpyOptions.command_v120(jar_path=self.config.SCRCPY_FILEPATH_REMOTE)
        self._scrcpy_server_stream: AdbConnection = self.adb.shell(
            commands,
            stream=True,
        )

        logger.info('Create server stream')
        ret = self._scrcpy_server_stream.read(10)
        # b'Aborted \r\n'
        # Probably because file not exists
        if b'Aborted' in ret:
            raise ScrcpyError('Aborted')
        if ret == b'[server] E':
            # [server] ERROR: ...
            ret += recv_all(self._scrcpy_server_stream)
            logger.error(ret)
            # java.lang.IllegalArgumentException: The server version (1.25) does not match the client (...)
            if b'does not match the client' in ret:
                raise ScrcpyError('Server version does not match the client')
            else:
                raise ScrcpyError('Unknown scrcpy error')
        else:
            # [server] INFO: Device: ...
            ret += self._scrcpy_receive_from_server_stream()
            logger.info(ret)
            pass

        logger.info('Create video socket')
        timeout = Timer(3).start()
        while 1:
            if timeout.reached():
                raise ScrcpyError('Connect scrcpy-server timeout')

            try:
                self._scrcpy_video_socket = self.adb.create_connection(
                    Network.LOCAL_ABSTRACT, "scrcpy"
                )
                break
            except AdbError:
                sleep(0.1)
        dummy_byte = self._scrcpy_video_socket.recv(1)
        if not len(dummy_byte) or dummy_byte != b"\x00":
            raise ScrcpyError('Did not receive Dummy Byte from video stream')

        logger.info('Create control socket')
        self._scrcpy_control_socket = self.adb.create_connection(
            Network.LOCAL_ABSTRACT, "scrcpy"
        )

        logger.info('Fetch device info')
        device_name = self._scrcpy_video_socket.recv(64).decode("utf-8").rstrip("\x00")
        if len(device_name):
            logger.attr('Scrcpy Device', device_name)
        else:
            raise ScrcpyError('Did not receive Device Name')
        ret = self._scrcpy_video_socket.recv(4)
        self._scrcpy_resolution = struct.unpack(">HH", ret)
        logger.attr('Scrcpy Resolution', self._scrcpy_resolution)

        self._scrcpy_video_socket.setblocking(False)
        self._scrcpy_alive = True

        logger.info('Start video stream loop thread')
        self._scrcpy_stream_loop_thread = threading.Thread(
            target=self._scrcpy_stream_loop, daemon=True
        )
        self._scrcpy_stream_loop_thread.start()
        while 1:
            if self._scrcpy_stream_loop_thread is not None and self._scrcpy_stream_loop_thread.is_alive():
                break
            self.sleep(0.001)

        logger.info('Scrcpy server is up')

    def _scrcpy_server_stop(self):
        """
        Stop listening (both threaded and blocked)
        """
        logger.hr('Scrcpy server stop')
        # err = self._scrcpy_receive_from_server_stream()
        # if err:
        #     logger.error(err)

        self._scrcpy_alive = False
        if self._scrcpy_server_stream is not None:
            try:
                self._scrcpy_server_stream.close()
            except Exception:
                pass

        if self._scrcpy_control_socket is not None:
            try:
                self._scrcpy_control_socket.close()
            except Exception:
                pass

        if self._scrcpy_video_socket is not None:
            try:
                self._scrcpy_video_socket.close()
            except Exception:
                pass

        logger.info('Scrcpy server stopped')

    def _scrcpy_receive_from_server_stream(self):
        if self._scrcpy_server_stream is not None:
            try:
                return self._scrcpy_server_stream.conn.recv(4096)
            except Exception:
                pass

    def _scrcpy_stream_loop(self) -> None:
        """
        Core loop for video parsing
        """
        try:
            from av.codec import CodecContext
            from av.error import InvalidDataError
        except ImportError as e:
            logger.error(e)
            logger.error('You must have `av` installed to use scrcpy screenshot, please update dependencies')
            raise RequestHumanTakeover

        codec = CodecContext.create("h264", "r")
        while self._scrcpy_alive:
            try:
                raw_h264 = self._scrcpy_video_socket.recv(0x10000)
                if raw_h264 == b"":
                    raise ScrcpyError("Video stream is disconnected")
                packets = codec.parse(raw_h264)
                for packet in packets:
                    frames = codec.decode(packet)
                    for frame in frames:
                        # logger.info('frame received')
                        frame = frame.to_ndarray(format="rgb24")
                        self._scrcpy_last_frame = frame
                        self._scrcpy_last_frame_time = time.time()
                        self._scrcpy_resolution = (frame.shape[1], frame.shape[0])
            except (BlockingIOError, InvalidDataError):
                # only return nonempty frames, may block cv2 render thread
                time.sleep(0.001)
            except (ConnectionError, OSError) as e:  # Socket Closed
                if self._scrcpy_alive:
                    logger.error(f'_scrcpy_stream_loop_thread: {repr(e)}')
                    raise

        raise ScrcpyError('_scrcpy_stream_loop stopped')

```

`module/device/method/scrcpy/options.py`:

```py
import typing as t

import module.device.method.scrcpy.const as const


class ScrcpyOptions:
    frame_rate = 10

    @classmethod
    def codec_options(cls) -> str:
        """
        Custom codec options passing through scrcpy.
        https://developer.android.com/reference/android/media/MediaFormat

        Returns:
            key_profile=1,key_level=4096,...
        """
        options = dict(
            # H.264 profile and level
            # https://developer.android.com/reference/android/media/MediaCodecInfo.CodecProfileLevel
            # Baseline, which only has I/P frames
            key_profile=1,
            # Level 4.1, for 1280x720@30fps
            key_level=4096,
            # Max quality
            key_quality=100,
            # https://developer.android.com/reference/android/media/MediaCodecInfo.EncoderCapabilities
            # Constant quality
            key_bitrate_mode=0,
            # A zero value means a stream containing all key frames is requested.
            key_i_frame_interval=0,
            # https://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities
            # COLOR_Format24bitBGR888
            key_color_format=12,
            # The same as output frame rate to lower CPU consumption
            key_capture_rate=cls.frame_rate,
            # 20Mbps, the maximum output bitrate of scrcpy
            key_bit_rate=20000000,
        )
        return ','.join([f'{k}={v}' for k, v in options.items()])

    @classmethod
    def arguments(cls) -> t.List[str]:
        """
        https://github.com/Genymobile/scrcpy/blob/master/server/src/main/java/com/genymobile/scrcpy/Server.java
        https://github.com/Genymobile/scrcpy/blob/master/server/src/main/java/com/genymobile/scrcpy/Options.java

        Returns:
            ['log_level=info', 'max_size=1280', ...]
        """
        options = [
            'log_level=info',
            'max_size=1280',
            # 20Mbps, the maximum output bitrate of scrcpy
            # If a higher value is set, scrcpy fallback to 8Mbps default.
            'bit_rate=20000000',
            # Screenshot time cost <= 300ms is enough for human speed.
            f'max_fps={cls.frame_rate}',
            # No orientation lock
            f'lock_video_orientation={const.LOCK_SCREEN_ORIENTATION_UNLOCKED}',
            # Always true
            'tunnel_forward=true',
            # Always true for controlling via scrcpy
            'control=true',
            # Default to 0
            'display_id=0',
            # Useless, always false
            'show_touches=false',
            # Not determined, leave it as default
            'stay_awake=false',
            # Encoder name
            # Should in [
            #     "OMX.google.h264.encoder",
            #     "OMX.qcom.video.encoder.avc",
            #     "c2.qti.avc.encoder",
            #     "c2.android.avc.encoder",
            # ]
            # Empty value, let scrcpy to decide
            # 'encoder_name=',
            # Codec options
            f'codec_options={cls.codec_options()}',
            # Useless, always false
            'power_off_on_close=false',
            'clipboard_autosync=false',
            'downsize_on_error=false',
        ]
        return options

    @classmethod
    def command_v125(cls, jar_path='/data/local/tmp/scrcpy-server.jar') -> t.List[str]:
        """
        Generate the commands to run scrcpy.
        """
        commands = [
            f'CLASSPATH={jar_path}',
            'app_process',
            '/',
            'com.genymobile.scrcpy.Server',
            '1.25',
        ]
        commands += cls.arguments()
        return commands

    @classmethod
    def command_v120(cls, jar_path='/data/local/tmp/scrcpy-server.jar') -> t.List[str]:
        commands = [
            f"CLASSPATH={jar_path}",
            "app_process",
            "/",
            "com.genymobile.scrcpy.Server",
            "1.20",  # Scrcpy server version
            "info",  # Log level: info, verbose...
            f"1280",  # Max screen width (long side)
            f"20000000",  # Bitrate of video
            f"{cls.frame_rate}",  # Max frame per second
            f"{const.LOCK_SCREEN_ORIENTATION_UNLOCKED}",  # Lock screen orientation: LOCK_SCREEN_ORIENTATION
            "true",  # Tunnel forward
            "-",  # Crop screen
            "false",  # Send frame rate to client
            "true",  # Control enabled
            "0",  # Display id
            "false",  # Show touches
            "false",  # Stay awake
            cls.codec_options(),  # Codec (video encoding) options
            "-",  # Encoder name
            "false",  # Power off screen after server closed
        ]
        return commands


if __name__ == '__main__':
    print(' '.join(ScrcpyOptions.command_v120()))

```

`module/device/method/scrcpy/scrcpy.py`:

```py
import time
from functools import wraps

import numpy as np
from adbutils.errors import AdbError

import module.device.method.scrcpy.const as const
from module.base.utils import random_rectangle_point
from module.device.method.minitouch import insert_swipe
from module.device.method.scrcpy.core import ScrcpyCore, ScrcpyError
from module.device.method.uiautomator_2 import Uiautomator2
from module.device.method.utils import RETRY_TRIES, retry_sleep, handle_adb_error
from module.exception import RequestHumanTakeover
from module.logger import logger


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Minitouch):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # Emulator closed
            except ConnectionAbortedError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # ScrcpyError
            except ScrcpyError as e:
                logger.error(e)

                def init():
                    self.scrcpy_init()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class Scrcpy(ScrcpyCore, Uiautomator2):
    def _scrcpy_resolution_check(self):
        if not self._scrcpy_alive:
            with self._scrcpy_control_socket_lock:
                self.resolution_check_uiautomator2()

    @retry
    def screenshot_scrcpy(self):
        self._scrcpy_resolution_check()
        self.scrcpy_ensure_running()

        with self._scrcpy_control_socket_lock:
            # Wait new frame
            now = time.time()
            while 1:
                time.sleep(0.001)
                if self._scrcpy_stream_loop_thread is None or not self._scrcpy_stream_loop_thread.is_alive():
                    raise ScrcpyError('_scrcpy_stream_loop_thread died')
                if self._scrcpy_last_frame_time > now:
                    screenshot = self._scrcpy_last_frame.copy()
                    return screenshot

    @retry
    def click_scrcpy(self, x, y):
        self.scrcpy_ensure_running()

        with self._scrcpy_control_socket_lock:
            self._scrcpy_control.touch(x, y, const.ACTION_DOWN)
            self._scrcpy_control.touch(x, y, const.ACTION_UP)
            self.sleep(0.05)

    @retry
    def long_click_scrcpy(self, x, y, duration=1.0):
        self.scrcpy_ensure_running()

        with self._scrcpy_control_socket_lock:
            self._scrcpy_control.touch(x, y, const.ACTION_DOWN)
            self.sleep(duration)
            self._scrcpy_control.touch(x, y, const.ACTION_UP)
            self.sleep(0.05)

    @retry
    def swipe_scrcpy(self, p1, p2):
        self.scrcpy_ensure_running()

        with self._scrcpy_control_socket_lock:
            # Unlike minitouch, scrcpy swipes needs to be continuous
            # So 5 times smother
            points = insert_swipe(p0=p1, p3=p2, speed=4, min_distance=2)
            self._scrcpy_control.touch(*p1, const.ACTION_DOWN)

            for point in points[1:-1]:
                self._scrcpy_control.touch(*point, const.ACTION_MOVE)
                self.sleep(0.002)

            self._scrcpy_control.touch(*p2, const.ACTION_MOVE)
            self._scrcpy_control.touch(*p2, const.ACTION_UP)
            self.sleep(0.05)

    @retry
    def drag_scrcpy(self, p1, p2, point_random=(-10, -10, 10, 10)):
        self.scrcpy_ensure_running()

        with self._scrcpy_control_socket_lock:
            p1 = np.array(p1) - random_rectangle_point(point_random)
            p2 = np.array(p2) - random_rectangle_point(point_random)
            points = insert_swipe(p0=p1, p3=p2, speed=4, min_distance=2)

            self._scrcpy_control.touch(*p1, const.ACTION_DOWN)

            for point in points[1:-1]:
                self._scrcpy_control.touch(*point, const.ACTION_MOVE)
                self.sleep(0.002)

            # Hold 280ms
            for _ in range(int(0.14 // 0.002) * 2):
                self._scrcpy_control.touch(*p2, const.ACTION_MOVE)
                self.sleep(0.002)

            self._scrcpy_control.touch(*p2, const.ACTION_UP)
            self.sleep(0.05)

```

`module/device/method/uiautomator_2.py`:

```py
import typing as t
from dataclasses import dataclass
from functools import wraps
from json.decoder import JSONDecodeError
from subprocess import list2cmdline

import uiautomator2 as u2
from adbutils.errors import AdbError
from lxml import etree

from module.base.utils import *
from module.device.connection import Connection
from module.device.method.utils import (RETRY_TRIES, retry_sleep, handle_adb_error,
                                        ImageTruncated, PackageNotInstalled, possible_reasons)
from module.exception import RequestHumanTakeover
from module.logger import logger


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Uiautomator2):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # In `device.set_new_command_timeout(604800)`
            # json.decoder.JSONDecodeError: Expecting value: line 1 column 2 (char 1)
            except JSONDecodeError as e:
                logger.error(e)

                def init():
                    self.install_uiautomator2()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # RuntimeError: USB device 127.0.0.1:5555 is offline
            except RuntimeError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # In `assert c.read string(4) == _OKAY`
            # ADB on emulator not enabled
            except AssertionError as e:
                logger.exception(e)
                possible_reasons(
                    'If you are using BlueStacks or LD player or WSA, '
                    'please enable ADB in the settings of your emulator'
                )
                break
            # Package not installed
            except PackageNotInstalled as e:
                logger.error(e)

                def init():
                    self.detect_package()
            # ImageTruncated
            except ImageTruncated as e:
                logger.error(e)

                def init():
                    pass
            # Unknown
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


@dataclass
class ProcessInfo:
    pid: int
    ppid: int
    thread_count: int
    cmdline: str
    name: str


@dataclass
class ShellBackgroundResponse:
    success: bool
    pid: int
    description: str


class Uiautomator2(Connection):
    @retry
    def screenshot_uiautomator2(self):
        image = self.u2.screenshot(format='raw')
        image = np.frombuffer(image, np.uint8)
        if image is None:
            raise ImageTruncated('Empty image after reading from buffer')

        image = cv2.imdecode(image, cv2.IMREAD_COLOR)
        if image is None:
            raise ImageTruncated('Empty image after cv2.imdecode')

        image = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)
        if image is None:
            raise ImageTruncated('Empty image after cv2.cvtColor')

        return image

    @retry
    def click_uiautomator2(self, x, y):
        self.u2.click(x, y)

    @retry
    def long_click_uiautomator2(self, x, y, duration=(1, 1.2)):
        self.u2.long_click(x, y, duration=duration)

    @retry
    def swipe_uiautomator2(self, p1, p2, duration=0.1):
        self.u2.swipe(*p1, *p2, duration=duration)

    @retry
    def _drag_along(self, path):
        """Swipe following path.

        Args:
            path (list): (x, y, sleep)

        Examples:
            al.drag_along([
                (403, 421, 0.2),
                (821, 326, 0.1),
                (821, 326-10, 0.1),
                (821, 326+10, 0.1),
                (821, 326, 0),
            ])
            Equals to:
            al.device.touch.down(403, 421)
            time.sleep(0.2)
            al.device.touch.move(821, 326)
            time.sleep(0.1)
            al.device.touch.move(821, 326-10)
            time.sleep(0.1)
            al.device.touch.move(821, 326+10)
            time.sleep(0.1)
            al.device.touch.up(821, 326)
        """
        length = len(path)
        for index, data in enumerate(path):
            x, y, second = data
            if index == 0:
                self.u2.touch.down(x, y)
                logger.info(point2str(x, y) + ' down')
            elif index - length == -1:
                self.u2.touch.up(x, y)
                logger.info(point2str(x, y) + ' up')
            else:
                self.u2.touch.move(x, y)
                logger.info(point2str(x, y) + ' move')
            self.sleep(second)

    def drag_uiautomator2(self, p1, p2, segments=1, shake=(0, 15), point_random=(-10, -10, 10, 10),
                          shake_random=(-5, -5, 5, 5), swipe_duration=0.25, shake_duration=0.1):
        """Drag and shake, like:
                     /\
        +-----------+  +  +
                        \/
        A simple swipe or drag don't work well, because it only has two points.
        Add some way point to make it more like swipe.

        Args:
            p1 (tuple): Start point, (x, y).
            p2 (tuple): End point, (x, y).
            segments (int):
            shake (tuple): Shake after arrive end point.
            point_random: Add random to start point and end point.
            shake_random: Add random to shake array.
            swipe_duration: Duration between way points.
            shake_duration: Duration between shake points.
        """
        p1 = np.array(p1) - random_rectangle_point(point_random)
        p2 = np.array(p2) - random_rectangle_point(point_random)
        path = [(x, y, swipe_duration) for x, y in random_line_segments(p1, p2, n=segments, random_range=point_random)]
        path += [
            (*p2 + shake + random_rectangle_point(shake_random), shake_duration),
            (*p2 - shake - random_rectangle_point(shake_random), shake_duration),
            (*p2, shake_duration)
        ]
        path = [(int(x), int(y), d) for x, y, d in path]
        self._drag_along(path)

    @retry
    def app_current_uiautomator2(self):
        """
        Returns:
            str: Package name.
        """
        result = self.u2.app_current()
        return result['package']

    @retry
    def app_start_uiautomator2(self, package_name=None):
        if not package_name:
            package_name = self.package
        try:
            self.u2.app_start(package_name)
        except u2.exceptions.BaseError as e:
            # BaseError: package "com.bilibili.azurlane" not found
            logger.error(e)
            raise PackageNotInstalled(package_name)

    @retry
    def app_stop_uiautomator2(self, package_name=None):
        if not package_name:
            package_name = self.package
        self.u2.app_stop(package_name)

    @retry
    def dump_hierarchy_uiautomator2(self) -> etree._Element:
        content = self.u2.dump_hierarchy(compressed=True)
        hierarchy = etree.fromstring(content.encode('utf-8'))
        return hierarchy

    @retry
    def resolution_uiautomator2(self) -> t.Tuple[int, int]:
        """
        Faster u2.window_size(), cause that calls `dumpsys display` twice.

        Returns:
            (width, height)
        """
        info = self.u2.http.get('/info').json()
        w, h = info['display']['width'], info['display']['height']
        rotation = self.get_orientation()
        if (w > h) != (rotation % 2 == 1):
            w, h = h, w
        return w, h

    def resolution_check_uiautomator2(self):
        """
        Alas does not actively check resolution but the width and height of screenshots.
        However, some screenshot methods do not provide device resolution, so check it here.

        Returns:
            (width, height)

        Raises:
            RequestHumanTakeover: If resolution is not 1280x720
        """
        width, height = self.resolution_uiautomator2()
        logger.attr('Screen_size', f'{width}x{height}')
        if width == 1280 and height == 720:
            return (width, height)
        if width == 720 and height == 1280:
            return (width, height)

        logger.critical(f'Resolution not supported: {width}x{height}')
        logger.critical('Please set emulator resolution to 1280x720')
        raise RequestHumanTakeover

    @retry
    def proc_list_uiautomator2(self) -> t.List[ProcessInfo]:
        """
        Get info about current processes.
        """
        resp = self.u2.http.get("/proc/list", timeout=10)
        resp.raise_for_status()
        result = [
            ProcessInfo(
                pid=proc['pid'],
                ppid=proc['ppid'],
                thread_count=proc['threadCount'],
                cmdline=' '.join(proc['cmdline']) if proc['cmdline'] is not None else '',
                name=proc['name'],
            ) for proc in resp.json()
        ]
        return result

    @retry
    def u2_shell_background(self, cmdline, timeout=10) -> ShellBackgroundResponse:
        """
        Run at background.

        Note that this function will always return a success response,
        as this is a untested and hidden method in ATX.
        """
        if isinstance(cmdline, (list, tuple)):
            cmdline = list2cmdline(cmdline)
        elif isinstance(cmdline, str):
            cmdline = cmdline
        else:
            raise TypeError("cmdargs type invalid", type(cmdline))

        data = dict(command=cmdline, timeout=str(timeout))
        ret = self.u2.http.post("/shell/background", data=data, timeout=timeout + 10)
        ret.raise_for_status()

        resp = ret.json()
        resp = ShellBackgroundResponse(
            success=bool(resp.get('success', False)),
            pid=resp.get('pid', 0),
            description=resp.get('description', '')
        )
        return resp

```

`module/device/method/utils.py`:

```py
import random
import re
import socket
import time
import typing as t

import uiautomator2 as u2
from adbutils import AdbTimeout
from lxml import etree

try:
    # adbutils 0.x
    from adbutils import _AdbStreamConnection as AdbConnection
except ImportError:
    # adbutils >= 1.0
    from adbutils import AdbConnection
    # Patch list2cmdline back to subprocess.list2cmdline
    # We expect `screencap | nc 192.168.0.1 20298` instead of `screencap '|' nc 192.168.80.1 20298`
    import adbutils
    import subprocess
    adbutils._utils.list2cmdline = subprocess.list2cmdline
    adbutils._device.list2cmdline = subprocess.list2cmdline

    # BaseDevice.shell() is missing a check_okay() call before reading output,
    # resulting in an `OKAY` prefix in output.
    def shell(self,
              cmdargs: t.Union[str, list, tuple],
              stream: bool = False,
              timeout: t.Optional[float] = None,
              rstrip=True) -> t.Union[AdbConnection, str]:
        if isinstance(cmdargs, (list, tuple)):
            cmdargs = subprocess.list2cmdline(cmdargs)
        if stream:
            timeout = None
        c = self.open_transport(timeout=timeout)
        c.send_command("shell:" + cmdargs)
        c.check_okay()  # check_okay() is missing here
        if stream:
            return c
        output = c.read_until_close()
        return output.rstrip() if rstrip else output

    adbutils._device.BaseDevice.shell = shell

from module.base.decorator import cached_property
from module.logger import logger

RETRY_TRIES = 5
RETRY_DELAY = 3


def is_port_using(port_num):
    """ if port is using by others, return True. else return False """
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.settimeout(2)

    try:
        s.bind(('127.0.0.1', port_num))
        return False
    except OSError:
        # Address already bind
        return True
    finally:
        s.close()


def random_port(port_range):
    """ get a random port from port set """
    new_port = random.choice(list(range(*port_range)))
    if is_port_using(new_port):
        return random_port(port_range)
    else:
        return new_port


def recv_all(stream, chunk_size=4096, recv_interval=0.000) -> bytes:
    """
    Args:
        stream:
        chunk_size:
        recv_interval (float): Default to 0.000, use 0.001 if receiving as server

    Returns:
        bytes:

    Raises:
        AdbTimeout
    """
    if isinstance(stream, AdbConnection):
        stream = stream.conn
        stream.settimeout(10)
    else:
        stream.settimeout(10)

    try:
        fragments = []
        while 1:
            chunk = stream.recv(chunk_size)
            if chunk:
                fragments.append(chunk)
                # See https://stackoverflow.com/questions/23837827/python-server-program-has-high-cpu-usage/41749820#41749820
                time.sleep(recv_interval)
            else:
                break
        return remove_shell_warning(b''.join(fragments))
    except socket.timeout:
        raise AdbTimeout('adb read timeout')


def possible_reasons(*args):
    """
    Show possible reasons

        Possible reason #1: <reason_1>
        Possible reason #2: <reason_2>
    """
    for index, reason in enumerate(args):
        index += 1
        logger.critical(f'Possible reason #{index}: {reason}')


class PackageNotInstalled(Exception):
    pass


class ImageTruncated(Exception):
    pass


def retry_sleep(trial):
    # First trial
    if trial == 0:
        pass
    # Failed once, fast retry
    elif trial == 1:
        pass
    # Failed twice
    elif trial == 2:
        time.sleep(1)
    # Failed more
    else:
        time.sleep(RETRY_DELAY)


def handle_adb_error(e):
    """
    Args:
        e (Exception):

    Returns:
        bool: If should retry
    """
    text = str(e)
    if 'not found' in text:
        # When you call `adb disconnect <serial>`
        # Or when adb server was killed (low possibility)
        # AdbError(device '127.0.0.1:59865' not found)
        logger.error(e)
        return True
    elif 'timeout' in text:
        # AdbTimeout(adb read timeout)
        logger.error(e)
        return True
    elif 'closed' in text:
        # AdbError(closed)
        # Usually after AdbTimeout(adb read timeout)
        # Disconnect and re-connect should fix this.
        logger.error(e)
        return True
    elif 'device offline' in text:
        # AdbError(device offline)
        # When a device that has been connected wirelessly is disconnected passively,
        # it does not disappear from the adb device list,
        # but will be displayed as offline.
        # In many cases, such as disconnection and recovery caused by network fluctuations,
        # or after VMOS reboot when running Alas on a phone,
        # the device is still available, but it needs to be disconnected and re-connected.
        logger.error(e)
        return True
    elif 'is offline' in text:
        # RuntimeError: USB device 127.0.0.1:7555 is offline
        # Raised by uiautomator2 when current adb service is killed by another version of adb service.
        logger.error(e)
        return True
    elif 'unknown host service' in text:
        # AdbError(unknown host service)
        # Another version of ADB service started, current ADB service has been killed.
        # Usually because user opened a Chinese emulator, which uses ADB from the Stone Age.
        logger.error(e)
        return True
    else:
        # AdbError()
        logger.exception(e)
        possible_reasons(
            'If you are using BlueStacks or LD player or WSA, please enable ADB in the settings of your emulator',
            'Emulator died, please restart emulator',
            'Serial incorrect, no such device exists or emulator is not running'
        )
        return False


def get_serial_pair(serial):
    """
    Args:
        serial (str):

    Returns:
        str, str: `127.0.0.1:5555+{X}` and `emulator-5554+{X}`, 0 <= X <= 32
    """
    if serial.startswith('127.0.0.1:'):
        try:
            port = int(serial[10:])
            if 5555 <= port <= 5555 + 32:
                return f'127.0.0.1:{port}', f'emulator-{port - 1}'
        except (ValueError, IndexError):
            pass
    if serial.startswith('emulator-'):
        try:
            port = int(serial[9:])
            if 5554 <= port <= 5554 + 32:
                return f'127.0.0.1:{port + 1}', f'emulator-{port}'
        except (ValueError, IndexError):
            pass

    return None, None


def remove_prefix(s, prefix):
    """
    Remove prefix of a string or bytes like `string.removeprefix(prefix)`, which is on Python3.9+

    Args:
        s (str, bytes):
        prefix (str, bytes):

    Returns:
        str, bytes:
    """
    return s[len(prefix):] if s.startswith(prefix) else s


def remove_suffix(s, suffix):
    """
    Remove suffix of a string or bytes like `string.removesuffix(suffix)`, which is on Python3.9+

    Args:
        s (str, bytes):
        suffix (str, bytes):

    Returns:
        str, bytes:
    """
    return s[:len(suffix)] if s.endswith(suffix) else s


def remove_shell_warning(s):
    """
    Remove warnings from shell

    Args:
        s (str, bytes):

    Returns:
        str, bytes:
    """
    # WARNING: linker: [vdso]: unused DT entry: type 0x70000001 arg 0x0\n\x89PNG\r\n\x1a\n\x00\x00\x00\rIH
    if isinstance(s, bytes):
        if s.startswith(b'WARNING'):
            try:
                s = s.split(b'\n', maxsplit=1)[1]
            except IndexError:
                pass
        return s
        # return re.sub(b'^WARNING.+\n', b'', s)
    elif isinstance(s, str):
        if s.startswith('WARNING'):
            try:
                s = s.split('\n', maxsplit=1)[1]
            except IndexError:
                pass
    return s


class IniterNoMinicap(u2.init.Initer):
    @property
    def minicap_urls(self):
        """
        Don't install minicap on emulators, return empty urls.

        binary from https://github.com/openatx/stf-binaries
        only got abi: armeabi-v7a and arm64-v8a
        """
        return []


class Device(u2.Device):
    def show_float_window(self, show=True):
        """
        Don't show float windows.
        """
        pass


# Monkey patch
u2.init.Initer = IniterNoMinicap
u2.Device = Device


class HierarchyButton:
    """
    Convert UI hierarchy to an object like the Button in Alas.
    """
    _name_regex = re.compile('@.*?=[\'\"](.*?)[\'\"]')

    def __init__(self, hierarchy: etree._Element, xpath: str):
        self.hierarchy = hierarchy
        self.xpath = xpath
        self.nodes = hierarchy.xpath(xpath)

    @cached_property
    def name(self):
        res = HierarchyButton._name_regex.findall(self.xpath)
        if res:
            return res[0]
        else:
            return 'HierarchyButton'

    @cached_property
    def count(self):
        return len(self.nodes)

    @cached_property
    def exist(self):
        return self.count == 1

    @cached_property
    def area(self):
        if self.exist:
            bounds = self.nodes[0].attrib.get("bounds")
            lx, ly, rx, ry = map(int, re.findall(r"\d+", bounds))
            return lx, ly, rx, ry
        else:
            return None

    @cached_property
    def button(self):
        return self.area

    def __bool__(self):
        return self.exist

    def __str__(self):
        return self.name

    @cached_property
    def focused(self):
        if self.exist:
            return self.nodes[0].attrib.get("focused").lower() == 'true'
        else:
            return False

```

`module/device/method/wsa.py`:

```py
import re
from functools import wraps

from adbutils.errors import AdbError

from module.device.connection import Connection
from module.device.method.utils import (RETRY_TRIES, retry_sleep,
                                        handle_adb_error, PackageNotInstalled)
from module.exception import RequestHumanTakeover
from module.logger import logger


def retry(func):
    @wraps(func)
    def retry_wrapper(self, *args, **kwargs):
        """
        Args:
            self (Adb):
        """
        init = None
        for _ in range(RETRY_TRIES):
            try:
                if callable(init):
                    retry_sleep(_)
                    init()
                return func(self, *args, **kwargs)
            # Can't handle
            except RequestHumanTakeover:
                break
            # When adb server was killed
            except ConnectionResetError as e:
                logger.error(e)

                def init():
                    self.adb_reconnect()
            # AdbError
            except AdbError as e:
                if handle_adb_error(e):
                    def init():
                        self.adb_reconnect()
                else:
                    break
            # Package not installed
            except PackageNotInstalled as e:
                logger.error(e)

                def init():
                    self.detect_package()
            # Unknown, probably a trucked image
            except Exception as e:
                logger.exception(e)

                def init():
                    pass

        logger.critical(f'Retry {func.__name__}() failed')
        raise RequestHumanTakeover

    return retry_wrapper


class WSA(Connection):

    @retry
    def app_current_wsa(self):
        """
        Returns:
            str: Package name.

        Raises:
            OSError
        """
        # try: adb shell dumpsys activity top
        _activityRE = re.compile(
            r'ACTIVITY (?P<package>[^\s]+)/(?P<activity>[^/\s]+) \w+ pid=(?P<pid>\d+)'
        )
        output = self.adb_shell(['dumpsys', 'activity', 'top'])
        ms = _activityRE.finditer(output)
        ret = None
        for m in ms:
            ret = m.group('package')
            if ret == self.package:
                return ret
        if ret:  # get last result
            return ret
        raise OSError("Couldn't get focused app")

    @retry
    def app_start_wsa(self, package_name=None, display=0):
        """
        Args:
            package_name (str):
            display (int):

        Returns:
            bool: If success to start
        """
        if not package_name:
            package_name = self.package
        self.adb_shell(['svc', 'power', 'stayon', 'true'])
        activity_name = self.get_main_activity_name(package_name=package_name)
        result = self.adb_shell(['am', 'start', '--display', display, f'{package_name}/{activity_name}'])
        if 'Activity not started' in result or 'does not exist' in result:
            # Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] pkg=xxx }
            # Error: Activity not started, unable to resolve Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 pkg=xxx }

            # Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.bilibili.azurlane/xxx }
            # Error type 3
            # Error: Activity class {com.bilibili.azurlane/com.manjuu.azurlane.MainAct} does not exist.
            logger.error(result)
            raise PackageNotInstalled(package_name)
        else:
            # Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.bilibili.azurlane/com.manjuu.azurlane.MainActivity }
            return True

    @retry
    def get_main_activity_name(self, package_name=None):
        if not package_name:
            package_name = self.package
        try:
            output = self.adb_shell(['dumpsys', 'package', package_name])
            _activityRE = re.compile(
                r'\w+ ' + package_name + r'/(?P<activity>[^/\s]+) filter'
            )
            ms = _activityRE.finditer(output)
            ret = next(ms).group('activity')
            return ret
        except StopIteration:
            raise PackageNotInstalled(package_name)

    @retry
    def get_display_id(self):
        """
            Returns:
                0: Could not find
                int: Display id of the game
        """
        try:
            get_dump_sys_display = str(self.adb_shell(['dumpsys', 'display']))
            display_id_list = re.findall(r'systemapp:' + self.package + ':' + '(.+?)', get_dump_sys_display, re.S)
            display_id = int(display_id_list[0])
            return display_id
        except IndexError:
            return 0  # When game running on display 0, its display id could not be found

    @retry
    def display_resize_wsa(self, display):
        logger.warning('display ' + str(display) + ' should be resized')
        self.adb_shell(['wm', 'size', '1280x720', '-d', str(display)])

```

`module/device/platform/emulator_base.py`:

```py
import os
import re
import typing as t
from dataclasses import dataclass

from module.device.platform.utils import cached_property, iter_folder


def abspath(path):
    return os.path.abspath(path).replace('\\', '/')


def get_serial_pair(serial):
    """
    Args:
        serial (str):

    Returns:
        str, str: `127.0.0.1:5555+{X}` and `emulator-5554+{X}`, 0 <= X <= 32
    """
    if serial.startswith('127.0.0.1:'):
        try:
            port = int(serial[10:])
            if 5555 <= port <= 5555 + 32:
                return f'127.0.0.1:{port}', f'emulator-{port - 1}'
        except (ValueError, IndexError):
            pass
    if serial.startswith('emulator-'):
        try:
            port = int(serial[9:])
            if 5554 <= port <= 5554 + 32:
                return f'127.0.0.1:{port + 1}', f'emulator-{port}'
        except (ValueError, IndexError):
            pass

    return None, None


@dataclass
class EmulatorInstanceBase:
    # Serial for adb connection
    serial: str
    # Emulator instance name, used for start/stop emulator
    name: str
    # Path to emulator .exe
    path: str

    def __str__(self):
        return f'{self.type}(serial="{self.serial}", name="{self.name}", path="{self.path}")'

    @cached_property
    def type(self) -> str:
        """
        Returns:
            str: Emulator type, such as Emulator.NoxPlayer
        """
        return EmulatorBase.path_to_type(self.path)

    @cached_property
    def emulator(self):
        """
        Returns:
            Emulator:
        """
        return EmulatorBase(self.path)

    def __eq__(self, other):
        if isinstance(other, str) and self.type == other:
            return True
        if isinstance(other, list) and self.type in other:
            return True
        if isinstance(other, EmulatorInstanceBase):
            return super().__eq__(other) and self.type == other.type
        return super().__eq__(other)

    def __hash__(self):
        return hash(str(self))

    def __bool__(self):
        return True

    @cached_property
    def MuMuPlayer12_id(self):
        """
        Convert MuMu 12 instance name to instance id.
        Example name: MuMuPlayer-12.0-3
        Example ID  : 3

        Returns:
            int: Instance ID, or None if this is not a MuMu 12 instance
        """
        res = re.search(r'MuMuPlayer-12.0-(\d+)', self.name)
        if res:
            return int(res.group(1))
        else:
            return None


class EmulatorBase:
    # Values here must match those in argument.yaml EmulatorInfo.Emulator.option
    NoxPlayer = 'NoxPlayer'
    NoxPlayer64 = 'NoxPlayer64'
    NoxPlayerFamily = [NoxPlayer, NoxPlayer64]
    BlueStacks4 = 'BlueStacks4'
    BlueStacks5 = 'BlueStacks5'
    BlueStacks4HyperV = 'BlueStacks4HyperV'
    BlueStacks5HyperV = 'BlueStacks5HyperV'
    BlueStacksFamily = [BlueStacks4, BlueStacks5]
    LDPlayer3 = 'LDPlayer3'
    LDPlayer4 = 'LDPlayer4'
    LDPlayer9 = 'LDPlayer9'
    LDPlayerFamily = [LDPlayer3, LDPlayer4, LDPlayer9]
    MuMuPlayer = 'MuMuPlayer'
    MuMuPlayerX = 'MuMuPlayerX'
    MuMuPlayer12 = 'MuMuPlayer12'
    MuMuPlayerFamily = [MuMuPlayer, MuMuPlayerX, MuMuPlayer12]
    MEmuPlayer = 'MEmuPlayer'

    @classmethod
    def path_to_type(cls, path: str) -> str:
        """
        Args:
            path: Path to .exe file

        Returns:
            str: Emulator type, such as Emulator.NoxPlayer,
                or '' if this is not a emulator.
        """
        return ''

    def iter_instances(self) -> t.Iterable[EmulatorInstanceBase]:
        """
        Yields:
            EmulatorInstance: Emulator instances found in this emulator
        """
        pass

    def iter_adb_binaries(self) -> t.Iterable[str]:
        """
        Yields:
            str: Filepath to adb binaries found in this emulator
        """
        pass

    def __init__(self, path):
        # Path to .exe file
        self.path = path.replace('\\', '/')
        # Path to emulator folder
        self.dir = os.path.dirname(path)
        # str: Emulator type, or '' if this is not a emulator.
        self.type = self.__class__.path_to_type(path)

    def __eq__(self, other):
        if isinstance(other, str) and self.type == other:
            return True
        if isinstance(other, list) and self.type in other:
            return True
        return super().__eq__(other)

    def __str__(self):
        return f'{self.type}(path="{self.path}")'

    __repr__ = __str__

    def __hash__(self):
        return hash(self.path)

    def __bool__(self):
        return True

    def abspath(self, path, folder=None):
        if folder is None:
            folder = self.dir
        return abspath(os.path.join(folder, path))

    @classmethod
    def is_emulator(cls, path: str) -> bool:
        """
        Args:
            path: Path to .exe file.

        Returns:
            bool: If this is a emulator.
        """
        return bool(cls.path_to_type(path))

    def list_folder(self, folder, is_dir=False, ext=None):
        """
        Safely list files in a folder

        Args:
            folder:
            is_dir:
            ext:

        Returns:
            list[str]:
        """
        folder = self.abspath(folder)
        try:
            return list(iter_folder(folder, is_dir=is_dir, ext=ext))
        except FileNotFoundError:
            return []


class EmulatorManagerBase:
    @cached_property
    def all_emulators(self) -> t.List[EmulatorBase]:
        """
        Get all emulators installed on current computer.
        """
        return []

    @cached_property
    def all_emulator_instances(self) -> t.List[EmulatorInstanceBase]:
        """
        Get all emulator instances installed on current computer.
        """
        return []

    @cached_property
    def all_emulator_serials(self) -> t.List[str]:
        """
        Returns:
            list[str]: All possible serials on current computer.
        """
        out = []
        for emulator in self.all_emulator_instances:
            out.append(emulator.serial)
            # Also add serial like `emulator-5554`
            port_serial, emu_serial = get_serial_pair(emulator.serial)
            if emu_serial:
                out.append(emu_serial)
        return out

    @cached_property
    def all_adb_binaries(self) -> t.List[str]:
        """
        Returns:
            list[str]: All adb binaries of emulators on current computer.
        """
        out = []
        for emulator in self.all_emulators:
            for exe in emulator.iter_adb_binaries():
                out.append(exe)
        return out

```

`module/device/platform/emulator_windows.py`:

```py
import codecs
import os
import re
import typing as t
import winreg
from dataclasses import dataclass

# module/device/platform/emulator_base.py
# module/device/platform/emulator_windows.py
# Will be used in Alas Easy Install, they shouldn't import any Alas modules.
from module.device.platform.utils import cached_property, iter_folder
from module.device.platform.emulator_base import EmulatorBase, EmulatorInstanceBase, EmulatorManagerBase


@dataclass
class RegValue:
    name: str
    value: str
    typ: int


def list_reg(reg) -> t.List[RegValue]:
    """
    List all values in a reg key
    """
    rows = []
    index = 0
    try:
        while 1:
            value = RegValue(*winreg.EnumValue(reg, index))
            index += 1
            rows.append(value)
    except OSError:
        pass
    return rows


def list_key(reg) -> t.List[RegValue]:
    """
    List all values in a reg key
    """
    rows = []
    index = 0
    try:
        while 1:
            value = winreg.EnumKey(reg, index)
            index += 1
            rows.append(value)
    except OSError:
        pass
    return rows


def abspath(path):
    return os.path.abspath(path).replace('\\', '/')


class EmulatorInstance(EmulatorInstanceBase):
    @cached_property
    def type(self) -> str:
        """
        Returns:
            str: Emulator type, such as Emulator.NoxPlayer
        """
        return Emulator.path_to_type(self.path)

    @cached_property
    def emulator(self):
        """
        Returns:
            Emulator:
        """
        return Emulator(self.path)


class Emulator(EmulatorBase):
    @classmethod
    def path_to_type(cls, path: str) -> str:
        """
        Args:
            path: Path to .exe file

        Returns:
            str: Emulator type, such as Emulator.NoxPlayer
        """
        folder, exe = os.path.split(path)
        folder, dir1 = os.path.split(folder)
        folder, dir2 = os.path.split(folder)
        if exe == 'Nox.exe':
            if dir2 == 'Nox':
                return cls.NoxPlayer
            elif dir2 == 'Nox64':
                return cls.NoxPlayer64
            else:
                return cls.NoxPlayer
        if exe == 'Bluestacks.exe':
            if dir1 in ['BlueStacks', 'BlueStacks_cn']:
                return cls.BlueStacks4
            elif dir1 in ['BlueStacks_nxt', 'BlueStacks_nxt_cn']:
                return cls.BlueStacks5
            else:
                return cls.BlueStacks4
        if exe == 'HD-Player.exe':
            if dir1 in ['BlueStacks', 'BlueStacks_cn']:
                return cls.BlueStacks4
            elif dir1 in ['BlueStacks_nxt', 'BlueStacks_nxt_cn']:
                return cls.BlueStacks5
            else:
                return cls.BlueStacks5
        if exe == 'dnplayer.exe':
            if dir1 == 'LDPlayer':
                return cls.LDPlayer3
            elif dir1 == 'LDPlayer4':
                return cls.LDPlayer4
            elif dir1 == 'LDPlayer9':
                return cls.LDPlayer9
            else:
                return cls.LDPlayer3
        if exe == 'NemuPlayer.exe':
            if dir2 == 'nemu':
                return cls.MuMuPlayer
            elif dir2 == 'nemu9':
                return cls.MuMuPlayerX
            else:
                return cls.MuMuPlayer
        if exe == 'MuMuPlayer.exe':
            return cls.MuMuPlayer12
        if exe == 'MEmu.exe':
            return cls.MEmuPlayer

        return ''

    @staticmethod
    def multi_to_single(exe):
        """
        Convert a string that might be a multi-instance manager to its single instance executable.

        Args:
            exe (str): Path to emulator executable

        Yields:
            str: Path to emulator executable
        """
        if 'HD-MultiInstanceManager.exe' in exe:
            yield exe.replace('HD-MultiInstanceManager.exe', 'HD-Player.exe')
            yield exe.replace('HD-MultiInstanceManager.exe', 'Bluestacks.exe')
        elif 'MultiPlayerManager.exe' in exe:
            yield exe.replace('MultiPlayerManager.exe', 'Nox.exe')
        elif 'dnmultiplayer.exe' in exe:
            yield exe.replace('dnmultiplayer.exe', 'dnplayer.exe')
        elif 'NemuMultiPlayer.exe' in exe:
            yield exe.replace('NemuMultiPlayer.exe', 'NemuPlayer.exe')
        elif 'MuMuMultiPlayer.exe' in exe:
            yield exe.replace('MuMuMultiPlayer.exe', 'MuMuManager.exe')
        elif 'MEmuConsole.exe' in exe:
            yield exe.replace('MEmuConsole.exe', 'MEmu.exe')
        else:
            yield exe

    @staticmethod
    def vbox_file_to_serial(file: str) -> str:
        """
        Args:
            file: Path to vbox file

        Returns:
            str: serial such as `127.0.0.1:5555`
        """
        regex = re.compile('<*?hostport="(.*?)".*?guestport="5555"/>')
        try:
            with open(file, 'r', encoding='utf-8', errors='ignore') as f:
                for line in f.readlines():
                    # <Forwarding name="port2" proto="1" hostip="127.0.0.1" hostport="62026" guestport="5555"/>
                    res = regex.search(line)
                    if res:
                        return f'127.0.0.1:{res.group(1)}'
            return ''
        except FileNotFoundError:
            return ''

    def iter_instances(self):
        """
        Yields:
            EmulatorInstance: Emulator instances found in this emulator
        """
        if self == Emulator.NoxPlayerFamily:
            # ./BignoxVMS/{name}/{name}.vbox
            for folder in self.list_folder('./BignoxVMS', is_dir=True):
                for file in iter_folder(folder, ext='.vbox'):
                    serial = Emulator.vbox_file_to_serial(file)
                    if serial:
                        yield EmulatorInstance(
                            serial=serial,
                            name=os.path.basename(folder),
                            path=self.path,
                        )
        elif self == Emulator.BlueStacks5:
            # Get UserDefinedDir, where BlueStacks stores data
            folder = None
            try:
                with winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, r"SOFTWARE\BlueStacks_nxt") as reg:
                    folder = winreg.QueryValueEx(reg, 'UserDefinedDir')[0]
            except FileNotFoundError:
                pass
            try:
                with winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, r"SOFTWARE\BlueStacks_nxt_cn") as reg:
                    folder = winreg.QueryValueEx(reg, 'UserDefinedDir')[0]
            except FileNotFoundError:
                pass
            if not folder:
                return
            # Read {UserDefinedDir}/bluestacks.conf
            try:
                with open(self.abspath('./bluestacks.conf', folder), encoding='utf-8') as f:
                    content = f.read()
            except FileNotFoundError:
                return
            # bst.instance.Nougat64.adb_port="5555"
            emulators = re.findall(r'bst.instance.(\w+).status.adb_port="(\d+)"', content)
            for emulator in emulators:
                yield EmulatorInstance(
                    serial=f'127.0.0.1:{emulator[1]}',
                    name=emulator[0],
                    path=self.path,
                )
        elif self == Emulator.BlueStacks4:
            # ../Engine/Android
            regex = re.compile(r'^Android')
            for folder in self.list_folder('../Engine', is_dir=True):
                folder = os.path.basename(folder)
                res = regex.match(folder)
                if not res:
                    continue
                # Serial from BlueStacks4 are not static, they get increased on every emulator launch
                # Assume all use 127.0.0.1:5555
                yield EmulatorInstance(
                    serial=f'127.0.0.1:5555',
                    name=folder,
                    path=self.path
                )
        elif self == Emulator.LDPlayerFamily:
            # ./vms/leidian0
            regex = re.compile(r'^leidian(\d+)$')
            for folder in self.list_folder('./vms', is_dir=True):
                folder = os.path.basename(folder)
                res = regex.match(folder)
                if not res:
                    continue
                # LDPlayer has no forward port config in .vbox file
                # Ports are auto increase, 5555, 5557, 5559, etc
                port = int(res.group(1)) * 2 + 5555
                yield EmulatorInstance(
                    serial=f'127.0.0.1:{port}',
                    name=folder,
                    path=self.path
                )
        elif self == Emulator.MuMuPlayer:
            # MuMu has no multi instances, on 7555 only
            yield EmulatorInstance(
                serial='127.0.0.1:7555',
                name='',
                path=self.path,
            )
        elif self == Emulator.MuMuPlayerX:
            # vms/nemu-12.0-x64-default
            for folder in self.list_folder('../vms', is_dir=True):
                for file in iter_folder(folder, ext='.nemu'):
                    serial = Emulator.vbox_file_to_serial(file)
                    if serial:
                        yield EmulatorInstance(
                            serial=serial,
                            name=os.path.basename(folder),
                            path=self.path,
                        )
        elif self == Emulator.MuMuPlayer12:
            # vms/MuMuPlayer-12.0-0
            for folder in self.list_folder('../vms', is_dir=True):
                for file in iter_folder(folder, ext='.nemu'):
                    serial = Emulator.vbox_file_to_serial(file)
                    if serial:
                        yield EmulatorInstance(
                            serial=serial,
                            name=os.path.basename(folder),
                            path=self.path,
                        )
        elif self == Emulator.MEmuPlayer:
            # ./MemuHyperv VMs/{name}/{name}.memu
            for folder in self.list_folder('./MemuHyperv VMs', is_dir=True):
                for file in iter_folder(folder, ext='.memu'):
                    serial = Emulator.vbox_file_to_serial(file)
                    if serial:
                        yield EmulatorInstance(
                            serial=serial,
                            name=os.path.basename(folder),
                            path=self.path,
                        )

    def iter_adb_binaries(self) -> t.Iterable[str]:
        """
        Yields:
            str: Filepath to adb binaries found in this emulator
        """
        if self == Emulator.NoxPlayerFamily:
            exe = self.abspath('./nox_adb.exe')
            if os.path.exists(exe):
                yield exe
        if self == Emulator.MuMuPlayerFamily:
            # From MuMu9\emulator\nemu9\EmulatorShell
            # to MuMu9\emulator\nemu9\vmonitor\bin\adb_server.exe
            exe = self.abspath('../vmonitor/bin/adb_server.exe')
            if os.path.exists(exe):
                yield exe

        # All emulators have adb.exe
        exe = self.abspath('./adb.exe')
        if os.path.exists(exe):
            yield exe


class EmulatorManager(EmulatorManagerBase):
    @staticmethod
    def iter_user_assist():
        """
        Get recently executed programs in UserAssist
        https://github.com/forensicmatt/MonitorUserAssist

        Returns:
            str: Path to emulator executables, may contains duplicate values
        """
        path = r'Software\Microsoft\Windows\CurrentVersion\Explorer\UserAssist'
        # {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}\xxx.exe
        regex_hash = re.compile(r'{.*}')
        with winreg.OpenKey(winreg.HKEY_CURRENT_USER, path) as reg:
            folders = list_key(reg)
        for folder in folders:
            with winreg.OpenKey(winreg.HKEY_CURRENT_USER, f'{path}\\{folder}\\Count') as reg:
                for key in list_reg(reg):
                    key = codecs.decode(key.name, 'rot-13')
                    # Skip those with hash
                    if regex_hash.search(key):
                        continue
                    for file in Emulator.multi_to_single(key):
                        yield file

    @staticmethod
    def iter_mui_cache():
        """
        Iter emulator executables that has ever run.
        http://what-when-how.com/windows-forensic-analysis/registry-analysis-windows-forensic-analysis-part-8/
        https://3gstudent.github.io/%E6%B8%97%E9%80%8F%E6%8A%80%E5%B7%A7-Windows%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%89%A7%E8%A1%8C%E8%AE%B0%E5%BD%95%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E6%B8%85%E9%99%A4

        Yields:
            str: Path to emulator executable, may contains duplicate values
        """
        path = r'Software\Classes\Local Settings\Software\Microsoft\Windows\Shell\MuiCache'
        with winreg.OpenKey(winreg.HKEY_CURRENT_USER, path) as reg:
            rows = list_reg(reg)

        regex = re.compile(r'(^.*\.exe)\.')
        for row in rows:
            res = regex.search(row.name)
            if not res:
                continue
            for file in Emulator.multi_to_single(res.group(1)):
                yield file

    @staticmethod
    def get_install_dir_from_reg(path, key):
        """
        Args:
            path (str): f'SOFTWARE\\leidian\\ldplayer'
            key (str): 'InstallDir'

        Returns:
            str: Installation dir or None
        """
        try:
            with winreg.OpenKey(winreg.HKEY_CURRENT_USER, path) as reg:
                root = winreg.QueryValueEx(reg, key)[0]
                return root
        except FileNotFoundError:
            pass
        try:
            with winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, path) as reg:
                root = winreg.QueryValueEx(reg, key)[0]
                return root
        except FileNotFoundError:
            pass

        return None

    @staticmethod
    def iter_uninstall_registry():
        """
        Iter emulator uninstaller from registry.

        Yields:
            str: Path to uninstall exe file
        """
        known_uninstall_registry_path = [
            r'SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Uninstall',
            r'Software\Microsoft\Windows\CurrentVersion\Uninstall'
        ]
        known_emulator_registry_name = [
            'Nox',
            'Nox64',
            'BlueStacks',
            'BlueStacks_nxt',
            'BlueStacks_cn',
            'BlueStacks_nxt_cn',
            'LDPlayer',
            'LDPlayer4',
            'LDPlayer9',
            'leidian',
            'leidian4',
            'leidian9',
            'Nemu',
            'Nemu9',
            'MuMuPlayer-12.0'
            'MEmu',
        ]
        for path in known_uninstall_registry_path:
            with winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, path) as reg:
                for software in list_key(reg):
                    if software not in known_emulator_registry_name:
                        continue
                    with winreg.OpenKey(winreg.HKEY_LOCAL_MACHINE, f'{path}\\{software}') as software_reg:
                        try:
                            uninstall = winreg.QueryValueEx(software_reg, 'UninstallString')[0]
                        except FileNotFoundError:
                            continue
                        if not uninstall:
                            continue
                        # UninstallString is like:
                        # C:\Program Files\BlueStacks_nxt\BlueStacksUninstaller.exe -tmp
                        # "E:\ProgramFiles\Microvirt\MEmu\uninstall\uninstall.exe" -u
                        # Extract path in ""
                        res = re.search('"(.*?)"', uninstall)
                        uninstall = res.group(1) if res else uninstall
                        yield uninstall

    @cached_property
    def all_emulators(self) -> t.List[Emulator]:
        """
        Get all emulators installed on current computer.
        """
        exe = set([])

        # MuiCache
        for file in EmulatorManager.iter_mui_cache():
            if Emulator.is_emulator(file) and os.path.exists(file):
                exe.add(file)

        # UserAssist
        for file in EmulatorManager.iter_user_assist():
            if Emulator.is_emulator(file) and os.path.exists(file):
                exe.add(file)

        # LDPlayer install path
        for path in [r'SOFTWARE\leidian\ldplayer',
                     r'SOFTWARE\leidian\ldplayer9']:
            ld = self.get_install_dir_from_reg(path, 'InstallDir')
            if ld:
                ld = abspath(os.path.join(ld, './dnplayer.exe'))
                if Emulator.is_emulator(ld) and os.path.exists(ld):
                    exe.add(ld)

        # Uninstall registry
        for uninstall in self.iter_uninstall_registry():
            # Find emulator executable from uninstaller
            for file in iter_folder(abspath(os.path.dirname(uninstall)), ext='.exe'):
                if Emulator.is_emulator(file) and os.path.exists(file):
                    exe.add(file)
            # Find from parent directory
            for file in iter_folder(abspath(os.path.join(os.path.dirname(uninstall), '../')), ext='.exe'):
                if Emulator.is_emulator(file) and os.path.exists(file):
                    exe.add(file)
            # MuMu specific directory
            folder = abspath(os.path.join(os.path.dirname(uninstall), 'EmulatorShell'))
            if os.path.exists(folder):
                for file in iter_folder(folder, ext='.exe'):
                    if Emulator.is_emulator(file) and os.path.exists(file):
                        exe.add(file)

        exe = [Emulator(path).path for path in exe if Emulator.is_emulator(path)]
        exe = sorted(set(exe))
        exe = [Emulator(path) for path in exe]
        return exe

    @cached_property
    def all_emulator_instances(self) -> t.List[EmulatorInstance]:
        """
        Get all emulator instances installed on current computer.
        """
        instances = []
        for emulator in self.all_emulators:
            instances += list(emulator.iter_instances())

        instances: t.List[EmulatorInstance] = sorted(instances, key=lambda x: str(x))
        return instances


if __name__ == '__main__':
    self = EmulatorManager()
    for emu in self.all_emulator_instances:
        print(emu)

```

`module/device/platform/platform_base.py`:

```py
import sys
import typing as t

import yaml
from pydantic import BaseModel, SecretStr

from module.base.decorator import cached_property, del_cached_property
from module.device.connection import Connection
from module.device.platform.emulator_base import EmulatorInstanceBase, EmulatorManagerBase
from module.logger import logger
from module.base.utils import SelectedGrids


class EmulatorInfo(BaseModel):
    emulator: str = ''
    name: str = ''
    path: str = ''

    # For APIs of chinac.com, a phone cloud platform.
    # access_key: SecretStr = ''
    # secret: SecretStr = ''


class PlatformBase(Connection, EmulatorManagerBase):
    """
    Base interface of a platform, platform can be various operating system or phone clouds.
    For each `Platform` class, the following APIs must be implemented.
    - all_emulators()
    - all_emulator_instances()
    - emulator_start()
    - emulator_stop()
    """

    def emulator_start(self):
        """
        Start a emulator, until startup completed.
        - Retry is required.
        - Using bored sleep to wait startup is forbidden.
        """
        logger.info(f'Current platform {sys.platform} does not support emulator_start, skip')

    def emulator_stop(self):
        """
        Stop a emulator.
        """
        logger.info(f'Current platform {sys.platform} does not support emulator_stop, skip')

    @cached_property
    def emulator_info(self) -> EmulatorInfo:
        emulator = self.config.EmulatorInfo_Emulator
        name = str(self.config.EmulatorInfo_name).strip().replace('\n', '')
        path = str(self.config.EmulatorInfo_path).strip().replace('\n', '')

        return EmulatorInfo(
            emulator=emulator,
            name=name,
            path=path,
        )

    @cached_property
    def emulator_instance(self) -> t.Optional[EmulatorInstanceBase]:
        """
        Returns:
            EmulatorInstanceBase: Emulator instance or None
        """
        data = self.emulator_info
        old_info = dict(
            emulator=data.emulator,
            path=data.path,
            name=data.name,
        )
        instance = self.find_emulator_instance(
            serial=str(self.config.Emulator_Serial).strip(),
            name=data.name,
            path=data.path,
            emulator=data.emulator,
        )

        # Write complete emulator data
        if instance is not None:
            new_info = dict(
                emulator=instance.type,
                path=instance.path,
                name=instance.name,
            )
            if new_info != old_info:
                with self.config.multi_set():
                    self.config.EmulatorInfo_Emulator = instance.type
                    self.config.EmulatorInfo_name = instance.name
                    self.config.EmulatorInfo_path = instance.path
                del_cached_property(self, 'emulator_info')

        return instance

    def find_emulator_instance(
            self,
            serial: str,
            name: str = None,
            path: str = None,
            emulator: str = None
    ) -> t.Optional[EmulatorInstanceBase]:
        """
        Args:
            serial: Serial like "127.0.0.1:5555"
            name: Instance name like "Nougat64"
            path: Emulator install path like "C:/Program Files/BlueStacks_nxt/HD-Player.exe"
            emulator: Emulator type defined in Emulator class, like "BlueStacks5"

        Returns:
            EmulatorInstance: Emulator instance or None if no instances not found.
        """
        logger.hr('Find emulator instance', level=2)
        instances = SelectedGrids(self.all_emulator_instances)
        for instance in instances:
            logger.info(instance)
        search_args = dict(serial=serial)

        # Search by serial
        select = instances.select(**search_args)
        if select.count == 0:
            logger.warning(f'No emulator instance with {search_args}')
            return None
        if select.count == 1:
            instance = select[0]
            logger.hr('Emulator instance', level=2)
            logger.info(f'Found emulator instance: {instance}')
            return instance

        # Multiple instances in given serial, search by name
        if name:
            search_args['name'] = name
            select = instances.select(**search_args)
            if select.count == 0:
                logger.warning(f'No emulator instances with {search_args}')
                return None
            if select.count == 1:
                instance = select[0]
                logger.hr('Emulator instance', level=2)
                logger.info(f'Found emulator instance: {instance}')
                return instance

        # Multiple instances in given serial and name, search by path
        if path:
            search_args['path'] = path
            select = instances.select(**search_args)
            if select.count == 0:
                logger.warning(f'No emulator instances with {search_args}')
                return None
            if select.count == 1:
                instance = select[0]
                logger.hr('Emulator instance', level=2)
                logger.info(f'Found emulator instance: {instance}')
                return instance

        # Multiple instances in given serial, name and path, search by emulator
        if emulator:
            search_args['type'] = emulator
            select = instances.select(**search_args)
            if select.count == 0:
                logger.warning(f'No emulator instances with {search_args}')
                return None
            if select.count == 1:
                instance = select[0]
                logger.hr('Emulator instance', level=2)
                logger.info(f'Found emulator instance: {instance}')
                return instance

        # Still too many instances
        logger.warning(f'Found multiple emulator instances with {search_args}')
        return None


if __name__ == '__main__':
    self = PlatformBase('alas')
    d = self.emulator_instance
    print(d)

```

`module/device/platform/platform_windows.py`:

```py
import ctypes
import re
import subprocess

import psutil

from deploy.Windows.utils import DataProcessInfo
from module.base.decorator import run_once
from module.base.timer import Timer
from module.device.connection import AdbDeviceWithStatus
from module.device.platform.platform_base import PlatformBase
from module.device.platform.emulator_windows import Emulator, EmulatorInstance, EmulatorManager
from module.logger import logger


class EmulatorUnknown(Exception):
    pass


def get_focused_window():
    return ctypes.windll.user32.GetForegroundWindow()


def set_focus_window(hwnd):
    ctypes.windll.user32.SetForegroundWindow(hwnd)


def minimize_window(hwnd):
    ctypes.windll.user32.ShowWindow(hwnd, 6)


def get_window_title(hwnd):
    """Returns the window title as a string."""
    text_len_in_characters = ctypes.windll.user32.GetWindowTextLengthW(hwnd)
    string_buffer = ctypes.create_unicode_buffer(
        text_len_in_characters + 1)  # +1 for the \0 at the end of the null-terminated string.
    ctypes.windll.user32.GetWindowTextW(hwnd, string_buffer, text_len_in_characters + 1)
    return string_buffer.value


def flash_window(hwnd, flash=True):
    ctypes.windll.user32.FlashWindow(hwnd, flash)


class PlatformWindows(PlatformBase, EmulatorManager):
    @classmethod
    def execute(cls, command):
        """
        Args:
            command (str):

        Returns:
            subprocess.Popen:
        """
        command = command.replace(r"\\", "/").replace("\\", "/").replace('"', '"')
        logger.info(f'Execute: {command}')
        return subprocess.Popen(command, close_fds=True)  # only work on Windows

    @classmethod
    def kill_process_by_regex(cls, regex: str) -> int:
        """
        Kill processes with cmdline match the given regex.

        Args:
            regex:

        Returns:
            int: Number of processes killed
        """
        count = 0

        for proc in psutil.process_iter():
            cmdline = DataProcessInfo(proc=proc, pid=proc.pid).cmdline
            if re.search(regex, cmdline):
                logger.info(f'Kill emulator: {cmdline}')
                proc.kill()
                count += 1

        return count

    def _emulator_start(self, instance: EmulatorInstance):
        """
        Start a emulator without error handling
        """
        exe = instance.emulator.path
        if instance == Emulator.MuMuPlayer:
            # NemuPlayer.exe
            self.execute(exe)
        elif instance == Emulator.MuMuPlayerX:
            # NemuPlayer.exe -m nemu-12.0-x64-default
            self.execute(f'{exe} -m {instance.name}')
        elif instance == Emulator.MuMuPlayer12:
            # MuMuPlayer.exe -v 0
            self.execute(f'{exe} -v {instance.MuMuPlayer12_id}')
        elif instance == Emulator.NoxPlayerFamily:
            # Nox.exe -clone:Nox_1
            self.execute(f'{exe} -clone:{instance.name}')
        elif instance == Emulator.BlueStacks5:
            # HD-Player.exe -instance Pie64
            self.execute(f'{exe} -instance {instance.name}')
        elif instance == Emulator.BlueStacks4:
            # BlueStacks\Client\Bluestacks.exe -vmname Android_1
            self.execute(f'{exe} -vmname {instance.name}')
        else:
            raise EmulatorUnknown(f'Cannot start an unknown emulator instance: {instance}')

    def _emulator_stop(self, instance: EmulatorInstance):
        """
        Stop a emulator without error handling
        """
        logger.hr('Emulator stop', level=2)
        exe = instance.emulator.path
        if instance == Emulator.MuMuPlayer:
            # MuMu6 does not have multi instance, kill one means kill all
            # Has 4 processes
            # "C:\Program Files\NemuVbox\Hypervisor\NemuHeadless.exe" --comment nemu-6.0-x64-default --startvm
            # "E:\ProgramFiles\MuMu\emulator\nemu\EmulatorShell\NemuPlayer.exe"
            # E:\ProgramFiles\MuMu\emulator\nemu\EmulatorShell\NemuService.exe
            # "C:\Program Files\NemuVbox\Hypervisor\NemuSVC.exe" -Embedding
            self.kill_process_by_regex(
                rf'('
                rf'NemuHeadless.exe'
                rf'|NemuPlayer.exe\"'
                rf'|NemuPlayer.exe$'
                rf'|NemuService.exe'
                rf'|NemuSVC.exe'
                rf')'
            )
        elif instance == Emulator.MuMuPlayerX:
            # MuMu X has 3 processes
            # "E:\ProgramFiles\MuMu9\emulator\nemu9\EmulatorShell\NemuPlayer.exe" -m nemu-12.0-x64-default -s 0 -l
            # "C:\Program Files\Muvm6Vbox\Hypervisor\Muvm6Headless.exe" --comment nemu-12.0-x64-default --startvm xxx
            # "C:\Program Files\Muvm6Vbox\Hypervisor\Muvm6SVC.exe" --Embedding
            self.kill_process_by_regex(
                rf'('
                rf'NemuPlayer.exe.*-m {instance.name}'
                rf'|Muvm6Headless.exe'
                rf'|Muvm6SVC.exe'
                rf')'
            )
        elif instance == Emulator.MuMuPlayer12:
            # MuMu 12 has 2 processes:
            # E:\ProgramFiles\Netease\MuMuPlayer-12.0\shell\MuMuPlayer.exe -v 0
            # "C:\Program Files\MuMuVMMVbox\Hypervisor\MuMuVMMHeadless.exe" --comment MuMuPlayer-12.0-0 --startvm xxx
            self.kill_process_by_regex(
                rf'('
                rf'MuMuVMMHeadless.exe.*--comment {instance.name}'
                rf'|MuMuPlayer.exe.*-v {instance.MuMuPlayer12_id}'
                rf')'
            )
            # There is also a shared service, no need to kill it
            # "C:\Program Files\MuMuVMMVbox\Hypervisor\MuMuVMMSVC.exe" --Embedding
        elif instance == Emulator.NoxPlayerFamily:
            # Nox.exe -clone:Nox_1 -quit
            self.execute(f'{exe} -clone:{instance.name} -quit')
        else:
            raise EmulatorUnknown(f'Cannot stop an unknown emulator instance: {instance}')

    def _emulator_function_wrapper(self, func):
        """
        Args:
            func (callable): _emulator_start or _emulator_stop

        Returns:
            bool: If success
        """
        try:
            func(self.emulator_instance)
            return True
        except OSError as e:
            msg = str(e)
            # OSError: [WinError 740] 请求的操作需要提升。
            if 'WinError 740' in msg:
                logger.error('To start/stop MumuAppPlayer, ALAS needs to be run as administrator')
        except EmulatorUnknown as e:
            logger.error(e)
        except Exception as e:
            logger.exception(e)

        logger.error(f'Emulator function {func.__name__}() failed')
        return False

    def emulator_start_watch(self):
        """
        Returns:
            bool: True if startup completed
                False if timeout
        """
        logger.hr('Emulator start', level=2)
        current_window = get_focused_window()
        serial = self.emulator_instance.serial
        logger.info(f'Current window: {current_window}')

        def adb_connect():
            m = self.adb_client.connect(self.serial)
            if 'connected' in m:
                # Connected to 127.0.0.1:59865
                # Already connected to 127.0.0.1:59865
                return False
            elif '(10061)' in m:
                # cannot connect to 127.0.0.1:55555:
                # No connection could be made because the target machine actively refused it. (10061)
                return False
            else:
                return True

        @run_once
        def show_online(m):
            logger.info(f'Emulator online: {m}')

        @run_once
        def show_ping(m):
            logger.info(f'Command ping: {m}')

        @run_once
        def show_package(m):
            logger.info(f'Found azurlane packages: {m}')

        interval = Timer(0.5).start()
        timeout = Timer(300).start()
        new_window = 0
        while 1:
            interval.wait()
            interval.reset()
            if timeout.reached():
                logger.warning(f'Emulator start timeout')
                return False

            # Check emulator window showing up
            # logger.info([get_focused_window(), get_window_title(get_focused_window())])
            if current_window != 0 and new_window == 0:
                new_window = get_focused_window()
                if current_window != new_window:
                    logger.info(f'New window showing up: {new_window}, focus back')
                    set_focus_window(current_window)
                else:
                    new_window = 0

            # Check device connection
            devices = self.list_device().select(serial=serial)
            # logger.info(devices)
            if devices:
                device: AdbDeviceWithStatus = devices.first_or_none()
                if device.status == 'device':
                    # Emulator online
                    pass
                if device.status == 'offline':
                    self.adb_client.disconnect(serial)
                    adb_connect()
                    continue
            else:
                # Try to connect
                adb_connect()
                continue
            show_online(devices.first_or_none())

            # Check command availability
            try:
                pong = self.adb_shell(['echo', 'pong'])
            except Exception as e:
                logger.info(e)
                continue
            show_ping(pong)

            # Check azuelane package
            packages = self.list_azurlane_packages(show_log=False)
            if len(packages):
                pass
            else:
                continue
            show_package(packages)

            # All check passed
            break

        if new_window != 0 and new_window != current_window:
            logger.info(f'Minimize new window: {new_window}')
            minimize_window(new_window)
        if current_window:
            logger.info(f'De-flash current window: {current_window}')
            flash_window(current_window, flash=False)
        if new_window:
            logger.info(f'Flash new window: {new_window}')
            flash_window(new_window, flash=True)
        logger.info('Emulator start completed')
        return True

    def emulator_start(self):
        logger.hr('Emulator start', level=1)
        for _ in range(3):
            # Stop
            if not self._emulator_function_wrapper(self._emulator_stop):
                return False
            # Start
            if self._emulator_function_wrapper(self._emulator_start):
                # Success
                self.emulator_start_watch()
                return True
            else:
                # Failed to start, stop and start again
                if self._emulator_function_wrapper(self._emulator_stop):
                    continue
                else:
                    return False

        logger.error('Failed to start emulator 3 times, stopped')
        return False

    def emulator_stop(self):
        logger.hr('Emulator stop', level=1)
        return self._emulator_function_wrapper(self._emulator_stop)


if __name__ == '__main__':
    self = PlatformWindows('alas')
    self.emulator_start()

```

`module/device/platform/utils.py`:

```py
import os
from typing import Callable, Generic, TypeVar

T = TypeVar("T")


class cached_property(Generic[T]):
    """
    cached-property from https://github.com/pydanny/cached-property
    Add typing support

    A property that is only computed once per instance and then replaces itself
    with an ordinary attribute. Deleting the attribute resets the property.
    Source: https://github.com/bottlepy/bottle/commit/fa7733e075da0d790d809aa3d2f53071897e6f76
    """

    def __init__(self, func: Callable[..., T]):
        self.func = func

    def __get__(self, obj, cls) -> T:
        if obj is None:
            return self

        value = obj.__dict__[self.func.__name__] = self.func(obj)
        return value


def iter_folder(folder, is_dir=False, ext=None):
    """
    Args:
        folder (str):
        is_dir (bool): True to iter directories only
        ext (str): File extension, such as `.yaml`

    Yields:
        str: Absolute path of files
    """
    for file in os.listdir(folder):
        sub = os.path.join(folder, file)
        if is_dir:
            if os.path.isdir(sub):
                yield sub.replace('\\\\', '/').replace('\\', '/')
        elif ext is not None:
            if not os.path.isdir(sub):
                _, extension = os.path.splitext(file)
                if extension == ext:
                    yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')
        else:
            yield os.path.join(folder, file).replace('\\\\', '/').replace('\\', '/')

```

`module/device/screenshot.py`:

```py
import os
import time
from collections import deque
from datetime import datetime

import cv2
import numpy as np
from PIL import Image

from module.base.decorator import cached_property
from module.base.timer import Timer
from module.base.utils import get_color, image_size, limit_in, save_image
from module.device.method.adb import Adb
from module.device.method.ascreencap import AScreenCap
from module.device.method.droidcast import DroidCast
from module.device.method.scrcpy import Scrcpy
from module.device.method.wsa import WSA
from module.exception import RequestHumanTakeover, ScriptError
from module.logger import logger


class Screenshot(Adb, WSA, DroidCast, AScreenCap, Scrcpy):
    _screen_size_checked = False
    _screen_black_checked = False
    _minicap_uninstalled = False
    _screenshot_interval = Timer(0.1)
    _last_save_time = {}
    image: np.ndarray

    @cached_property
    def screenshot_methods(self):
        return {
            'ADB': self.screenshot_adb,
            'ADB_nc': self.screenshot_adb_nc,
            'uiautomator2': self.screenshot_uiautomator2,
            'aScreenCap': self.screenshot_ascreencap,
            'aScreenCap_nc': self.screenshot_ascreencap_nc,
            'DroidCast': self.screenshot_droidcast,
            'DroidCast_raw': self.screenshot_droidcast_raw,
            'scrcpy': self.screenshot_scrcpy,
        }

    def screenshot(self):
        """
        Returns:
            np.ndarray:
        """
        self._screenshot_interval.wait()
        self._screenshot_interval.reset()

        for _ in range(2):
            method = self.screenshot_methods.get(
                self.config.Emulator_ScreenshotMethod,
                self.screenshot_adb
            )
            self.image = method()

            # if self.config.Emulator_ScreenshotDedithering:
            #     # This will take 40-60ms
            #     cv2.fastNlMeansDenoising(self.image, self.image, h=17, templateWindowSize=1, searchWindowSize=2)
            self.image = self._handle_orientated_image(self.image)

            if self.config.Error_SaveError:
                self.screenshot_deque.append({'time': datetime.now(), 'image': self.image})

            if self.check_screen_size() and self.check_screen_black():
                break
            else:
                continue

        return self.image

    def _handle_orientated_image(self, image):
        """
        Args:
            image (np.ndarray):

        Returns:
            np.ndarray:
        """
        width, height = image_size(self.image)
        if width == 1280 and height == 720:
            return image

        # Rotate screenshots only when they're not 1280x720
        if self.orientation == 0:
            pass
        elif self.orientation == 1:
            image = cv2.rotate(image, cv2.ROTATE_90_COUNTERCLOCKWISE)
        elif self.orientation == 2:
            image = cv2.rotate(image, cv2.ROTATE_180)
        elif self.orientation == 3:
            image = cv2.rotate(image, cv2.ROTATE_90_CLOCKWISE)
        else:
            raise ScriptError(f'Invalid device orientation: {self.orientation}')

        return image

    @cached_property
    def screenshot_deque(self):
        return deque(maxlen=int(self.config.Error_ScreenshotLength))

    def save_screenshot(self, genre='items', interval=None, to_base_folder=False):
        """Save a screenshot. Use millisecond timestamp as file name.

        Args:
            genre (str, optional): Screenshot type.
            interval (int, float): Seconds between two save. Saves in the interval will be dropped.
            to_base_folder (bool): If save to base folder.

        Returns:
            bool: True if save succeed.
        """
        now = time.time()
        if interval is None:
            interval = self.config.SCREEN_SHOT_SAVE_INTERVAL

        if now - self._last_save_time.get(genre, 0) > interval:
            fmt = 'png'
            file = '%s.%s' % (int(now * 1000), fmt)

            folder = self.config.SCREEN_SHOT_SAVE_FOLDER_BASE if to_base_folder else self.config.SCREEN_SHOT_SAVE_FOLDER
            folder = os.path.join(folder, genre)
            if not os.path.exists(folder):
                os.mkdir(folder)

            file = os.path.join(folder, file)
            self.image_save(file)
            self._last_save_time[genre] = now
            return True
        else:
            self._last_save_time[genre] = now
            return False

    def screenshot_last_save_time_reset(self, genre):
        self._last_save_time[genre] = 0

    def screenshot_interval_set(self, interval=None):
        """
        Args:
            interval (int, float, str):
                Minimum interval between 2 screenshots in seconds.
                Or None for Optimization_ScreenshotInterval, 'combat' for Optimization_CombatScreenshotInterval
        """
        if interval is None:
            origin = self.config.Optimization_ScreenshotInterval
            interval = limit_in(origin, 0.1, 0.3)
            if interval != origin:
                logger.warning(f'Optimization.ScreenshotInterval {origin} is revised to {interval}')
                self.config.Optimization_ScreenshotInterval = interval
        elif interval == 'combat':
            origin = self.config.Optimization_CombatScreenshotInterval
            interval = limit_in(origin, 0.3, 1.0)
            if interval != origin:
                logger.warning(f'Optimization.CombatScreenshotInterval {origin} is revised to {interval}')
                self.config.Optimization_CombatScreenshotInterval = interval
        elif isinstance(interval, (int, float)):
            # No limitation for manual set in code
            pass
        else:
            logger.warning(f'Unknown screenshot interval: {interval}')
            raise ScriptError(f'Unknown screenshot interval: {interval}')
        # Screenshot interval in scrcpy is meaningless,
        # video stream is received continuously no matter you use it or not.
        if self.config.Emulator_ScreenshotMethod == 'scrcpy':
            interval = 0.1

        if interval != self._screenshot_interval.limit:
            logger.info(f'Screenshot interval set to {interval}s')
            self._screenshot_interval.limit = interval

    def image_show(self, image=None):
        if image is None:
            image = self.image
        Image.fromarray(image).show()

    def image_save(self, file=None):
        if file is None:
            file = f'{int(time.time() * 1000)}.png'
        save_image(self.image, file)

    def check_screen_size(self):
        """
        Screen size must be 1280x720.
        Take a screenshot before call.
        """
        if self._screen_size_checked:
            return True

        orientated = False
        for _ in range(2):
            # Check screen size
            width, height = image_size(self.image)
            logger.attr('Screen_size', f'{width}x{height}')
            if width == 1280 and height == 720:
                self._screen_size_checked = True
                return True
            elif not orientated and (width == 720 and height == 1280):
                logger.info('Received orientated screenshot, handling')
                self.get_orientation()
                self.image = self._handle_orientated_image(self.image)
                orientated = True
                width, height = image_size(self.image)
                if width == 720 and height == 1280:
                    logger.info('Unable to handle orientated screenshot, continue for now')
                    return True
                else:
                    continue
            elif self.config.Emulator_Serial == 'wsa-0':
                self.display_resize_wsa(0)
                return False
            elif hasattr(self, 'app_is_running') and not self.app_is_running():
                logger.warning('Received orientated screenshot, game not running')
                return True
            else:
                logger.critical(f'Resolution not supported: {width}x{height}')
                logger.critical('Please set emulator resolution to 1280x720')
                raise RequestHumanTakeover

    def check_screen_black(self):
        if self._screen_black_checked:
            return True
        # Check screen color
        # May get a pure black screenshot on some emulators.
        color = get_color(self.image, area=(0, 0, 1280, 720))
        if sum(color) < 1:
            if self.config.Emulator_Serial == 'wsa-0':
                for _ in range(2):
                    display = self.get_display_id()
                    if display == 0:
                        return True
                logger.info(f'Game running on display {display}')
                logger.warning('Game not running on display 0, will be restarted')
                self.app_stop_uiautomator2()
                return False
            elif self.config.Emulator_ScreenshotMethod == 'uiautomator2':
                logger.warning(f'Received pure black screenshots from emulator, color: {color}')
                logger.warning('Uninstall minicap and retry')
                self.uninstall_minicap()
                self._screen_black_checked = False
                return False
            else:
                # logger.warning(f'Received pure black screenshots from emulator, color: {color}')
                # logger.warning(f'Screenshot method `{self.config.Emulator_ScreenshotMethod}` '
                #                f'may not work on emulator `{self.serial}`, or the emulator is not fully started')
                if self.is_mumu_family:
                    if self.config.Emulator_ScreenshotMethod == 'DroidCast':
                        self.droidcast_stop()
                    else:
                        logger.warning('If you are using MuMu X, please upgrade to version >= 12.1.5.0')
                self._screen_black_checked = False
                return False
        else:
            self._screen_black_checked = True
            return True

```

`module/exception.py`:

```py
class ScriptError(Exception):
    # This is likely to be a mistake of developers, but sometimes a random issue
    pass


class GameStuckError(Exception):
    pass


class GameBugError(Exception):
    # An error has occurred in Azur Lane game client. Alas is unable to handle.
    # A restart should fix it.
    pass


class GameTooManyClickError(Exception):
    pass


class EmulatorNotRunningError(Exception):
    pass


class GameNotRunningError(Exception):
    pass


class GamePageUnknownError(Exception):
    pass


class RequestHumanTakeover(Exception):
    # Request human takeover
    # Alas is unable to handle such error, probably because of wrong settings.
    pass

```

`module/handler/sensitive_info.py`:

```py
def handle_sensitive_image(image):
    """
    Args:
        image:

    Returns:
        np.ndarray:
    """
    # Paint UID to black
    image[680:720, 0:180, :] = 0
    return image


def handle_sensitive_logs(logs):
    return logs

```

`module/logger/__init__.py`:

```py
from .logger import logger
from .logger import set_file_logger, set_func_logger
from .logger import WEB_THEME, Highlighter, HTMLConsole

```

`module/logger/logger.py`:

```py
import datetime
import logging
import os
import sys
from typing import Callable, List

from rich.console import Console, ConsoleOptions, ConsoleRenderable, NewLine
from rich.highlighter import NullHighlighter, RegexHighlighter
from rich.logging import RichHandler
from rich.rule import Rule
from rich.style import Style
from rich.theme import Theme
from rich.traceback import Traceback

sys.stdout.reconfigure(encoding='utf-8')
sys.stderr.reconfigure(encoding='utf-8')


def empty_function(*args, **kwargs):
    pass


# cnocr will set root logger in cnocr.utils
# Delete logging.basicConfig to avoid logging the same message twice.
logging.basicConfig = empty_function
logging.raiseExceptions = True  # Set True if wanna see encode errors on console

# Remove HTTP keywords (GET, POST etc.)
RichHandler.KEYWORDS = []


class RichFileHandler(RichHandler):
    # Rename
    pass


class RichRenderableHandler(RichHandler):
    """
    Pass renderable into a function
    """

    def __init__(self, *args, func: Callable[[ConsoleRenderable], None] = None, **kwargs):
        super().__init__(*args, **kwargs)
        self._func = func

    def emit(self, record: logging.LogRecord) -> None:
        message = self.format(record)
        traceback = None
        if (
                self.rich_tracebacks
                and record.exc_info
                and record.exc_info != (None, None, None)
        ):
            exc_type, exc_value, exc_traceback = record.exc_info
            assert exc_type is not None
            assert exc_value is not None
            traceback = Traceback.from_exception(
                exc_type,
                exc_value,
                exc_traceback,
                width=self.tracebacks_width,
                extra_lines=self.tracebacks_extra_lines,
                theme=self.tracebacks_theme,
                word_wrap=self.tracebacks_word_wrap,
                show_locals=self.tracebacks_show_locals,
                locals_max_length=self.locals_max_length,
                locals_max_string=self.locals_max_string,
            )
            message = record.getMessage()
            if self.formatter:
                record.message = record.getMessage()
                formatter = self.formatter
                if hasattr(formatter, "usesTime") and formatter.usesTime():
                    record.asctime = formatter.formatTime(
                        record, formatter.datefmt)
                message = formatter.formatMessage(record)

        message_renderable = self.render_message(record, message)
        log_renderable = self.render(
            record=record, traceback=traceback, message_renderable=message_renderable
        )

        # Directly put renderable into function
        self._func(log_renderable)

    def handle(self, record: logging.LogRecord) -> bool:
        if not self._func:
            return True
        super().handle(record)


class HTMLConsole(Console):
    """
    Force full feature console
    but not working lol :(
    """

    @property
    def options(self) -> ConsoleOptions:
        return ConsoleOptions(
            max_height=self.size.height,
            size=self.size,
            legacy_windows=False,
            min_width=1,
            max_width=self.width,
            encoding='utf-8',
            is_terminal=False,
        )


class Highlighter(RegexHighlighter):
    base_style = 'web.'
    highlights = [
        # (r'(?P<datetime>(\d{2}|\d{4})(?:\-)?([0]{1}\d{1}|[1]{1}[0-2]{1})'
        #  r'(?:\-)?([0-2]{1}\d{1}|[3]{1}[0-1]{1})(?:\s)?([0-1]{1}\d{1}|'
        #  r'[2]{1}[0-3]{1})(?::)?([0-5]{1}\d{1})(?::)?([0-5]{1}\d{1}).\d+\b)'),
        (r'(?P<time>([0-1]{1}\d{1}|[2]{1}[0-3]{1})(?::)?'
         r'([0-5]{1}\d{1})(?::)?([0-5]{1}\d{1})(.\d+\b))'),
        r"(?P<brace>[\{\[\(\)\]\}])",
        r"\b(?P<bool_true>True)\b|\b(?P<bool_false>False)\b|\b(?P<none>None)\b",
        r"(?P<path>(([A-Za-z]\:)|.)?\B([\/\\][\w\.\-\_\+]+)*[\/\\])(?P<filename>[\w\.\-\_\+]*)?",
        # r"(?<![\\\w])(?P<str>b?\'\'\'.*?(?<!\\)\'\'\'|b?\'.*?(?<!\\)\'|b?\"\"\".*?(?<!\\)\"\"\"|b?\".*?(?<!\\)\")",
    ]


WEB_THEME = Theme({
    "web.brace": Style(bold=True),
    "web.bool_true": Style(color="bright_green", italic=True),
    "web.bool_false": Style(color="bright_red", italic=True),
    "web.none": Style(color="magenta", italic=True),
    "web.path": Style(color="magenta"),
    "web.filename": Style(color="bright_magenta"),
    "web.str": Style(color="green", italic=False, bold=False),
    "web.time": Style(color="cyan"),
    "rule.text": Style(bold=True),
})

# Logger init
logger_debug = False
logger = logging.getLogger('alas')
logger.setLevel(logging.DEBUG if logger_debug else logging.INFO)
file_formatter = logging.Formatter(
    fmt='%(asctime)s.%(msecs)03d | %(levelname)s | %(message)s', datefmt='%Y-%m-%d %H:%M:%S')
console_formatter = logging.Formatter(
    fmt='%(asctime)s.%(msecs)03d │ %(message)s', datefmt='%Y-%m-%d %H:%M:%S')
web_formatter = logging.Formatter(
    fmt='%(asctime)s.%(msecs)03d │ %(message)s', datefmt='%H:%M:%S')

# Add console logger
# console = logging.StreamHandler(stream=sys.stdout)
# console.setFormatter(formatter)
# console.flush = sys.stdout.flush
# logger.addHandler(console)

# Add rich console logger
stdout_console = console = Console()
console_hdlr = RichHandler(
    show_path=False,
    show_time=False,
    rich_tracebacks=True,
    tracebacks_show_locals=True,
    tracebacks_extra_lines=3,
)
console_hdlr.setFormatter(console_formatter)
logger.addHandler(console_hdlr)

# Ensure running in Alas root folder
os.chdir(os.path.join(os.path.dirname(__file__), '../../'))

# Add file logger
pyw_name = os.path.splitext(os.path.basename(sys.argv[0]))[0]


def _set_file_logger(name=pyw_name):
    if '_' in name:
        name = name.split('_', 1)[0]
    log_file = f'./log/{datetime.date.today()}_{name}.txt'
    try:
        file = logging.FileHandler(log_file, encoding='utf-8')
    except FileNotFoundError:
        os.mkdir('./log')
        file = logging.FileHandler(log_file, encoding='utf-8')
    file.setFormatter(file_formatter)

    logger.handlers = [h for h in logger.handlers if not isinstance(
        h, (logging.FileHandler, RichFileHandler))]
    logger.addHandler(file)
    logger.log_file = log_file


def set_file_logger(name=pyw_name):
    if '_' in name:
        name = name.split('_', 1)[0]
    log_file = f'./log/{datetime.date.today()}_{name}.txt'
    try:
        file = open(log_file, mode='a', encoding='utf-8')
    except FileNotFoundError:
        os.mkdir('./log')
        file = open(log_file, mode='a', encoding='utf-8')

    file_console = Console(
        file=file,
        no_color=True,
        highlight=False,
        width=119,
    )

    hdlr = RichFileHandler(
        console=file_console,
        show_path=False,
        show_time=False,
        show_level=False,
        rich_tracebacks=True,
        tracebacks_show_locals=True,
        tracebacks_extra_lines=3,
        highlighter=NullHighlighter(),
    )
    hdlr.setFormatter(file_formatter)

    logger.handlers = [h for h in logger.handlers if not isinstance(
        h, (logging.FileHandler, RichFileHandler))]
    logger.addHandler(hdlr)
    logger.log_file = log_file


def set_func_logger(func):
    console = HTMLConsole(
        force_terminal=False,
        force_interactive=False,
        width=80,
        color_system='truecolor',
        markup=False,
        safe_box=False,
        highlighter=Highlighter(),
        theme=WEB_THEME
    )
    hdlr = RichRenderableHandler(
        func=func,
        console=console,
        show_path=False,
        show_time=False,
        show_level=True,
        rich_tracebacks=True,
        tracebacks_show_locals=True,
        tracebacks_extra_lines=2,
        highlighter=Highlighter(),
    )
    hdlr.setFormatter(web_formatter)
    logger.handlers = [h for h in logger.handlers if not isinstance(
        h, RichRenderableHandler)]
    logger.addHandler(hdlr)


def _get_renderables(
        self: Console, *objects, sep=" ", end="\n", justify=None, emoji=None, markup=None, highlight=None,
) -> List[ConsoleRenderable]:
    """
    Refer to rich.console.Console.print()
    """
    if not objects:
        objects = (NewLine(),)

    render_hooks = self._render_hooks[:]
    with self:
        renderables = self._collect_renderables(
            objects,
            sep,
            end,
            justify=justify,
            emoji=emoji,
            markup=markup,
            highlight=highlight,
        )
        for hook in render_hooks:
            renderables = hook.process_renderables(renderables)
    return renderables


def print(*objects: ConsoleRenderable, **kwargs):
    for hdlr in logger.handlers:
        if isinstance(hdlr, RichRenderableHandler):
            for renderable in _get_renderables(hdlr.console, *objects, **kwargs):
                hdlr._func(renderable)
        elif isinstance(hdlr, RichHandler):
            hdlr.console.print(*objects)


def rule(title="", *, characters="─", style="rule.line", end="\n", align="center"):
    rule = Rule(title=title, characters=characters,
                style=style, end=end, align=align)
    print(rule)


def hr(title, level=3):
    title = str(title).upper()
    if level == 1:
        logger.rule(title, characters='═')
        logger.info(title)
    if level == 2:
        logger.rule(title, characters='─')
        logger.info(title)
    if level == 3:
        logger.info(f"[bold]<<< {title} >>>[/bold]", extra={"markup": True})
    if level == 0:
        logger.rule(characters='═')
        logger.rule(title, characters=' ')
        logger.rule(characters='═')


def attr(name, text):
    logger.info('[%s] %s' % (str(name), str(text)))


def attr_align(name, text, front='', align=22):
    name = str(name).rjust(align)
    if front:
        name = front + name[len(front):]
    logger.info('%s: %s' % (name, str(text)))


def show():
    logger.info('INFO')
    logger.warning('WARNING')
    logger.debug('DEBUG')
    logger.error('ERROR')
    logger.critical('CRITICAL')
    logger.hr('hr0', 0)
    logger.hr('hr1', 1)
    logger.hr('hr2', 2)
    logger.hr('hr3', 3)
    logger.info(r'Brace { [ ( ) ] }')
    logger.info(r'True, False, None')
    logger.info(r'E:/path\\to/alas/alas.exe, /root/alas/, ./relative/path/log.txt')
    local_var1 = 'This is local variable'
    # Line before exception
    raise Exception("Exception")
    # Line below exception


def error_convert(func):
    def error_wrapper(msg, *args, **kwargs):
        if isinstance(msg, Exception):
            msg = f'{type(msg).__name__}: {msg}'
        return func(msg, *args, **kwargs)

    return error_wrapper


logger.error = error_convert(logger.error)
logger.hr = hr
logger.attr = attr
logger.attr_align = attr_align
logger.set_file_logger = set_file_logger
logger.set_func_logger = set_func_logger
logger.rule = rule
logger.print = print
logger.log_file: str

logger.set_file_logger()
logger.hr('Start', level=0)

```

`module/logger/logger.pyi`:

```pyi
import logging
from typing import Any, Callable

from rich.console import Console, ConsoleRenderable
from rich.highlighter import RegexHighlighter
from rich.logging import RichHandler
from rich.theme import Theme

class HTMLConsole(Console): ...
class Highlighter(RegexHighlighter): ...

WEB_THEME: Theme

logger_debug: bool
pyw_name: str

file_formatter: logging.Formatter
console_formatter: logging.Formatter
web_formatter: logging.Formatter

stdout_console: Console
console_hdlr: RichHandler

def set_file_logger(
    name: str = pyw_name,
) -> None: ...
def set_func_logger(
    func: Callable[[ConsoleRenderable], None],
) -> None: ...

class __logger(logging.Logger):
    def rule(
        self,
        title: str = "",
        *,
        characters: str = "-",
        style: str = "rule.line",
        end: str = "\n",
        align: str = "center",
    ) -> None: ...
    def hr(
        self,
        title,
        level: int = 3,
    ) -> None: ...
    def attr(
        self,
        name,
        text,
    ) -> None: ...
    def attr_align(
        self,
        name,
        text,
        front="",
        align: int = 22,
    ) -> None: ...
    def set_file_logger(
        self,
        name: str = pyw_name,
    ) -> None: ...
    def set_func_logger(
        self,
        func: Callable[[ConsoleRenderable], None],
    ) -> None: ...
    def print(
        self,
        *objects: ConsoleRenderable,
        **kwargs,
    ) -> None: ...

logger: __logger

```

`module/notify.py`:

```py
from module.logger import logger

def handle_notify(*args, **kwargs):
    logger.error('Error notify is not supported yet')

```

`module/ocr/keyword.py`:

```py
import re
from dataclasses import dataclass
from functools import cached_property
from typing import ClassVar

import module.config.server as server
from module.exception import ScriptError

REGEX_PUNCTUATION = re.compile(r'[ ,.\'"“”，。:：!！?？·•\-—/\\\n\t()\[\]（）「」『』【】《》［］]')


def parse_name(n):
    n = REGEX_PUNCTUATION.sub('', str(n)).lower()
    return n


@dataclass
class Keyword:
    id: int
    name: str
    cn: str
    en: str
    jp: str
    cht: str

    """
    Instance attributes and methods
    """

    @cached_property
    def ch(self) -> str:
        return self.cn

    @cached_property
    def cn_parsed(self) -> str:
        return parse_name(self.cn)

    @cached_property
    def en_parsed(self) -> str:
        return parse_name(self.en)

    @cached_property
    def jp_parsed(self) -> str:
        return parse_name(self.jp)

    @cached_property
    def cht_parsed(self) -> str:
        return parse_name(self.cht)

    def __str__(self):
        return f'{self.__class__.__name__}({self.name})'

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.name)

    def __bool__(self):
        return True

    def _keywords_to_find(self, in_current_server=False, ignore_punctuation=True):
        if in_current_server:
            match server.lang:
                case 'cn':
                    if ignore_punctuation:
                        return [self.cn_parsed]
                    else:
                        return [self.cn]
                case 'en':
                    if ignore_punctuation:
                        return [self.en_parsed]
                    else:
                        return [self.en]
                case 'jp':
                    if ignore_punctuation:
                        return [self.jp_parsed]
                    else:
                        return [self.jp]
                case 'cht':
                    if ignore_punctuation:
                        return [self.cht_parsed]
                    else:
                        return [self.cht]
        else:
            if ignore_punctuation:
                return [
                    self.cn_parsed,
                    self.en_parsed,
                    self.jp_parsed,
                    self.cht_parsed,
                ]
            else:
                return [
                    self.cn,
                    self.en,
                    self.jp,
                    self.cht,
                ]

    """
    Class attributes and methods

    Note that dataclasses inherited `Keyword` must override `instances` attribute,
    or `instances` will still be a class attribute of base class.
    ```
    @dataclass
    class DungeonNav(Keyword):
        instances: ClassVar = {}
    ```
    """
    # Key: instance ID. Value: instance object.
    instances: ClassVar = {}

    def __post_init__(self):
        self.__class__.instances[self.id] = self

    @classmethod
    def _compare(cls, name, keyword):
        return name == keyword

    @classmethod
    def find(cls, name, in_current_server=False, ignore_punctuation=True):
        """
        Args:
            name: Name in any server or instance id.
            in_current_server: True to search the names from current server only.
            ignore_punctuation: True to remove punctuations and turn into lowercase before searching.

        Returns:
            Keyword instance.

        Raises:
            ScriptError: If nothing found.
        """
        # Already a keyword
        if isinstance(name, Keyword):
            return name
        # Probably an ID
        if isinstance(name, int) or (isinstance(name, str) and name.isdigit()):
            try:
                return cls.instances[int(name)]
            except KeyError:
                pass
        # Probably a variable name
        if isinstance(name, str) and '_' in name:
            for instance in cls.instances.values():
                if name == instance.name:
                    return instance
        # Probably an in-game name
        if ignore_punctuation:
            name = parse_name(name)
        else:
            name = str(name)
        instance: Keyword
        for instance in cls.instances.values():
            for keyword in instance._keywords_to_find(
                    in_current_server=in_current_server, ignore_punctuation=ignore_punctuation):
                if cls._compare(name, keyword):
                    return instance

        # Not found
        raise ScriptError(f'Cannot find a {cls.__name__} instance that matches "{name}"')

```

`module/ocr/models.py`:

```py
from pponnxcr import TextSystem as TextSystem_

from module.base.decorator import cached_property
from module.exception import ScriptError

DIC_LANG_TO_MODEL = {
    'cn': 'zhs',
    'en': 'en',
    'jp': 'ja',
    'tw': 'zht',
}


def lang2model(lang: str) -> str:
    """
    Args:
        lang: In-game language name, defined in VALID_LANG

    Returns:
        str: Model name, defined in pponnxcr.utility
    """
    return DIC_LANG_TO_MODEL.get(lang, lang)


def model2lang(model: str) -> str:
    """
    Args:
        model: Model name, defined in pponnxcr.utility

    Returns:
        str: In-game language name, defined in VALID_LANG
    """
    for k, v in DIC_LANG_TO_MODEL.items():
        if model == v:
            return k
    return model


class TextSystem(TextSystem_):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.text_recognizer.rec_batch_num = 1


class OcrModel:
    def get_by_model(self, model: str) -> TextSystem:
        try:
            return self.__getattribute__(model)
        except AttributeError:
            raise ScriptError(f'OCR model "{model}" does not exists')

    def get_by_lang(self, lang: str) -> TextSystem:
        try:
            model = lang2model(lang)
            return self.__getattribute__(model)
        except AttributeError:
            raise ScriptError(f'OCR model under lang "{lang}" does not exists')

    @cached_property
    def zhs(self):
        return TextSystem('zhs')

    @cached_property
    def en(self):
        return TextSystem('en')

    @cached_property
    def ja(self):
        return TextSystem('zht')

    @cached_property
    def zht(self):
        return TextSystem('zht')


OCR_MODEL = OcrModel()

```

`module/ocr/ocr.py`:

```py
import re
import time
from datetime import timedelta

import cv2
from pponnxcr.predict_system import BoxedResult

import module.config.server as server
from module.base.button import ButtonWrapper
from module.base.decorator import cached_property
from module.base.utils import area_pad, corner2area, crop, float2str
from module.exception import ScriptError
from module.logger import logger
from module.ocr.models import OCR_MODEL, TextSystem
from module.ocr.utils import merge_buttons


def enlarge_canvas(image):
    """
    Enlarge image into a square fill with black background. In the structure of PaddleOCR,
    image with w:h=1:1 is the best while 3:1 rectangles takes three times as long.
    Also enlarge into the integer multiple of 32 cause PaddleOCR will downscale images to 1/32.

    No longer needed, already included in pponnxcr.
    """
    height, width = image.shape[:2]
    length = int(max(width, height) // 32 * 32 + 32)
    border = (0, length - height, 0, length - width)
    if sum(border) > 0:
        image = cv2.copyMakeBorder(image, *border, borderType=cv2.BORDER_CONSTANT, value=(0, 0, 0))
    return image


class OcrResultButton:
    def __init__(self, boxed_result: BoxedResult, keyword_classes: list):
        """
        Args:
            boxed_result: BoxedResult from ppocr-onnx
            keyword_classes: List of Keyword classes
        """
        self.area = boxed_result.box
        self.search = area_pad(self.area, pad=-20)
        # self.color =
        self.button = boxed_result.box

        try:
            self.matched_keyword = self.match_keyword(boxed_result.ocr_text, keyword_classes)
            self.name = str(self.matched_keyword)
        except ScriptError:
            self.matched_keyword = None
            self.name = boxed_result.ocr_text

        self.text = boxed_result.ocr_text
        self.score = boxed_result.score

    @staticmethod
    def match_keyword(ocr_text, keyword_classes):
        """
        Args:
            ocr_text (str):
            keyword_classes: List of Keyword classes

        Returns:
            Keyword:

        Raises:
            ScriptError: If no keywords matched
        """
        for keyword_class in keyword_classes:
            try:
                matched = keyword_class.find(ocr_text, in_current_server=True, ignore_punctuation=True)
                return matched
            except ScriptError:
                continue

        raise ScriptError

    def __str__(self):
        return self.name

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.name)

    def __bool__(self):
        return True


class Ocr:
    # Merge results with box distance <= thres
    merge_thres_x = 0
    merge_thres_y = 0

    def __init__(self, button: ButtonWrapper, lang=None, name=None):
        """
        Args:
            button:
            lang: If None, use in-game language
            name: If None, use button.name
        """
        if lang is None:
            lang = server.lang
        if name is None:
            name = button.name

        self.button: ButtonWrapper = button
        self.lang: str = lang
        self.name: str = name

    @cached_property
    def model(self) -> TextSystem:
        return OCR_MODEL.get_by_lang(self.lang)

    def pre_process(self, image):
        """
        Args:
            image (np.ndarray): Shape (height, width, channel)

        Returns:
            np.ndarray: Shape (width, height)
        """
        return image

    def after_process(self, result):
        """
        Args:
            result (str): '第二行'

        Returns:
            str:
        """
        if result.startswith('UID'):
            result = 'UID'
        return result

    def format_result(self, result):
        """
        Will be overriden.
        """
        return result

    def ocr_single_line(self, image):
        # pre process
        start_time = time.time()
        image = crop(image, self.button.area)
        image = self.pre_process(image)
        # ocr
        result, _ = self.model.ocr_single_line(image)
        # after proces
        result = self.after_process(result)
        result = self.format_result(result)
        logger.attr(name='%s %ss' % (self.name, float2str(time.time() - start_time)),
                    text=str(result))
        return result

    def ocr_multi_lines(self, image_list):
        # pre process
        start_time = time.time()
        image_list = [self.pre_process(image) for image in image_list]
        # ocr
        result_list = self.model.ocr_lines(image_list)
        result_list = [(result, score) for result, score in result_list]
        # after process
        result_list = [(self.after_process(result), score) for result, score in result_list]
        result_list = [(self.format_result(result), score) for result, score in result_list]
        logger.attr(name="%s %ss" % (self.name, float2str(time.time() - start_time)),
                    text=str([result for result, _ in result_list]))
        return result_list

    def detect_and_ocr(self, image, direct_ocr=False) -> list[BoxedResult]:
        """
        Args:
            image:
            direct_ocr: True to ignore `button` attribute and feed the image to OCR model without cropping.

        Returns:

        """
        # pre process
        start_time = time.time()
        if not direct_ocr:
            image = crop(image, self.button.area)
        image = self.pre_process(image)
        # ocr
        # image = enlarge_canvas(image)
        results: list[BoxedResult] = self.model.detect_and_ocr(image)
        # after proces
        for result in results:
            if not direct_ocr:
                result.box += self.button.area[:2]
            result.box = tuple(corner2area(result.box))
        results = merge_buttons(results, thres_x=self.merge_thres_x, thres_y=self.merge_thres_y)
        for result in results:
            result.ocr_text = self.after_process(result.ocr_text)

        logger.attr(name='%s %ss' % (self.name, float2str(time.time() - start_time)),
                    text=str([result.ocr_text for result in results]))
        return results

    def matched_ocr(self, image, keyword_classes, direct_ocr=False) -> list[OcrResultButton]:
        """
        Args:
            image: Screenshot
            keyword_classes: `Keyword` class or classes inherited `Keyword`, or a list of them.
            direct_ocr: True to ignore `button` attribute and feed the image to OCR model without cropping.

        Returns:
            List of matched OcrResultButton.
            OCR result which didn't matched known keywords will be dropped.
        """
        if not isinstance(keyword_classes, list):
            keyword_classes = [keyword_classes]

        def is_valid(keyword):
            # Digits will be considered as the index of keyword
            if keyword.isdigit():
                return False
            return True

        results = self.detect_and_ocr(image, direct_ocr=direct_ocr)
        results = [
            OcrResultButton(result, keyword_classes)
            for result in results if is_valid(result.ocr_text)
        ]
        results = [result for result in results if result.matched_keyword is not None]
        logger.attr(name=f'{self.name} matched',
                    text=results)
        return results


class Digit(Ocr):
    def __init__(self, button: ButtonWrapper, lang='en', name=None):
        super().__init__(button, lang=lang, name=name)

    def format_result(self, result) -> int:
        """
        Returns:
            int:
        """
        result = super().after_process(result)
        logger.attr(name=self.name, text=str(result))

        res = re.search(r'(\d+)', result)
        if res:
            return int(res.group(1))
        else:
            logger.warning(f'No digit found in {result}')
            return 0


class DigitCounter(Ocr):
    def __init__(self, button: ButtonWrapper, lang='en', name=None):
        super().__init__(button, lang=lang, name=name)

    def format_result(self, result) -> tuple[int, int, int]:
        """
        Do OCR on a counter, such as `14/15`, and returns 14, 1, 15

        Returns:
            int:
        """
        result = super().after_process(result)
        logger.attr(name=self.name, text=str(result))

        res = re.search(r'(\d+)/(\d+)', result)
        if res:
            groups = [int(s) for s in res.groups()]
            current, total = int(groups[0]), int(groups[1])
            # current = min(current, total)
            return current, total - current, total
        else:
            logger.warning(f'No digit counter found in {result}')
            return 0, 0, 0


class Duration(Ocr):
    @cached_property
    def timedelta_regex(self):
        regex_str = {
            'cn': r'\D*((?P<days>\d{1,2})天)?((?P<hours>\d{1,2})小时)?((?P<minutes>\d{1,2})分钟)?((?P<seconds>\d{1,2})秒)?',
            'en': r'\D*((?P<days>\d{1,2})d\s*)?((?P<hours>\d{1,2})h\s*)?((?P<minutes>\d{1,2})m\s*)?((?P<seconds>\d{1,2})s)?'
        }[self.lang]
        return re.compile(regex_str)

    def format_result(self, result: str) -> timedelta:
        """
        Do OCR on a duration, such as `18d 2h 13m 30s`, `2h`, `13m 30s`, `9s`

        Returns:
            timedelta:
        """
        matched = self.timedelta_regex.match(result)
        if matched is None:
            return timedelta()
        days = self._sanitize_number(matched.group('days'))
        hours = self._sanitize_number(matched.group('hours'))
        minutes = self._sanitize_number(matched.group('minutes'))
        seconds = self._sanitize_number(matched.group('seconds'))
        return timedelta(days=days, hours=hours, minutes=minutes, seconds=seconds)

    @staticmethod
    def _sanitize_number(number) -> int:
        if number is None:
            return 0
        return int(number)

```

`module/ocr/utils.py`:

```py
import itertools

from pponnxcr.predict_system import BoxedResult

from module.base.utils import area_in_area, area_offset


def area_cross_area(area1, area2, thres_x=20, thres_y=20):
    """
    Args:
        area1: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        area2: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y).
        thres_x:
        thres_y:

    Returns:
        bool:
    """
    # https://www.yiiven.cn/rect-is-intersection.html
    xa1, ya1, xa2, ya2 = area1
    xb1, yb1, xb2, yb2 = area2
    return abs(xb2 + xb1 - xa2 - xa1) <= xa2 - xa1 + xb2 - xb1 + thres_x * 2 \
        and abs(yb2 + yb1 - ya2 - ya1) <= ya2 - ya1 + yb2 - yb1 + thres_y * 2


def _merge_area(area1, area2):
    xa1, ya1, xa2, ya2 = area1
    xb1, yb1, xb2, yb2 = area2
    return min(xa1, xb1), min(ya1, yb1), max(xa2, xb2), max(ya2, yb2)


def _merge_boxed_result(left: BoxedResult, right: BoxedResult) -> BoxedResult:
    left.box = _merge_area(left.box, right.box)
    left.ocr_text = left.ocr_text + right.ocr_text
    return left


def merge_buttons(buttons: list[BoxedResult], thres_x=20, thres_y=20) -> list[BoxedResult]:
    """
    Args:
        buttons:
        thres_x: Merge results with horizontal box distance <= `thres_x`
        thres_y: Merge results with vertical box distance <= `thres_y`

    Returns:

    """
    if thres_x <= 0 and thres_y <= 0:
        return buttons

    dic_button = {button.box: button for button in buttons}
    set_merged = set()
    for left, right in itertools.combinations(dic_button.items(), 2):
        left_box, left = left
        right_box, right = right
        if area_cross_area(left.box, right.box, thres_x=thres_x, thres_y=thres_y):
            left = _merge_boxed_result(left, right)
            dic_button[left_box] = left
            dic_button[right_box] = left
            set_merged.add(right_box)

    return [button for box, button in dic_button.items() if box not in set_merged]


# def pair_buttons(
#         group1: list["OcrResultButton"],
#         group2: list["OcrResultButton"],
#         relative_area: tuple[int, int, int, int]
# ) -> t.Generator["OcrResultButton", "OcrResultButton"]:
#     pass

def pair_buttons(group1, group2, relative_area):
    """
    Pair buttons in group1 with those in group2 in the relative_area.

    Args:
        group1 (list[OcrResultButton]):
        group2 (list[OcrResultButton]):
        relative_area (tuple[int, int, int, int]):

    Yields:
        OcrResultButton, OcrResultButton:
    """
    for button1 in group1:
        area = area_offset(relative_area, offset=button1.area[:2])
        for button2 in group2:
            if area_in_area(button2.area, area, threshold=0):
                yield button1, button2


def split_and_pair_buttons(buttons, split_func, relative_area):
    """
    Pair buttons in group1 with those in group2 in the relative_area.

    Args:
        buttons (list[OcrResultButton]):
        split_func (callable):
            A function that accepts an OcrResultButton object returns a bool,
            button that has a True return join group1, False join group2.
        relative_area (tuple[int, int, int, int]):

    Yields:
        OcrResultButton, OcrResultButton:
    """
    group1 = [button for button in buttons if split_func(button)]
    group2 = [button for button in buttons if not split_func(button)]
    for ret in pair_buttons(group1, group2, relative_area):
        yield ret


def split_and_pair_button_attr(buttons, split_func, relative_area):
    """
    Pair buttons in group1 with those in group2 in the relative_area,
    and treat group2 as the BUTTON attribute of group1.

    Args:
        buttons (list[OcrResultButton]):
        split_func (callable):
            A function that accepts an OcrResultButton object returns a bool,
            button that has a True return join group1, False join group2.
        relative_area (tuple[int, int, int, int]):

    Yields:
        OcrResultButton:
    """
    for button1, button2 in split_and_pair_buttons(buttons, split_func, relative_area):
        button1.button = button2.button
        yield button1

```

`module/server_checker.py`:

```py
class ServerChecker:
    # Create a fake server check since server check is not supported yet.
    def __init__(self, server):
        pass

    def check_now(self):
        pass

    def is_available(self):
        return True

    def wait_until_available(self):
        pass

    def is_recovered(self):
        return False

```

`module/ui/draggable_list.py`:

```py
from typing import Optional

import numpy as np

from module.base.base import ModuleBase
from module.base.button import ButtonWrapper
from module.base.timer import Timer
from module.base.utils import area_size, random_rectangle_vector_opted
from module.logger import logger
from module.ocr.keyword import Keyword
from module.ocr.ocr import OcrResultButton


class DraggableList:
    """
    A wrapper to handle draggable lists like
    - Simulated Universe
    - Calyx (Golden)
    - Calyx (Crimson)
    - Stagnant Shadow
    - Cavern of Corrosion
    """
    drag_vector = (0.65, 0.85)

    def __init__(
            self,
            name,
            keyword_class,
            ocr_class,
            search_button: ButtonWrapper,
            check_row_order: bool = True,
            active_color: tuple[int, int, int] = (190, 175, 124),
            drag_direction: str = "down"
    ):
        """
        Args:
            name:
            keyword_class: Keyword
            search_button:
            drag_direction: Default drag direction to higher index
        """
        self.name = name
        self.keyword_class = keyword_class
        self.ocr_class = ocr_class
        if isinstance(keyword_class, list):
            keyword_class = keyword_class[0]
        self.known_rows = list(keyword_class.instances.values())
        self.search_button = search_button
        self.check_row_order = check_row_order
        self.active_color = active_color
        self.drag_direction = drag_direction

        self.row_min = 1
        self.row_max = len(self.known_rows)
        self.cur_min = 1
        self.cur_max = 1
        self.cur_buttons: list[OcrResultButton] = []

    def __str__(self):
        return f'DraggableList({self.name})'

    __repr__ = __str__

    def __eq__(self, other):
        return str(self) == str(other)

    def __hash__(self):
        return hash(self.name)

    def keyword2index(self, row: Keyword) -> int:
        try:
            return self.known_rows.index(row) + 1
        except ValueError:
            # logger.warning(f'Row "{row}" does not belong to {self}')
            return 0

    def keyword2button(self, row: Keyword, show_warning=True) -> Optional[OcrResultButton]:
        for button in self.cur_buttons:
            if button == row:
                return button

        if show_warning:
            logger.warning(f'Keyword {row} is not in current rows of {self}')
            logger.warning(f'Current rows: {self.cur_buttons}')
        return None

    def load_rows(self, main: ModuleBase):
        """
        Parse current rows to get list position.
        """
        self.cur_buttons = self.ocr_class(self.search_button) \
            .matched_ocr(main.device.image, self.keyword_class)
        # Get indexes
        indexes = [self.keyword2index(row.matched_keyword)
                   for row in self.cur_buttons]
        indexes = [index for index in indexes if index]
        # Check row order
        if self.check_row_order and len(indexes) >= 2:
            if not np.all(np.diff(indexes) > 0):
                logger.warning(
                    f'Rows given to {self} are not ascending sorted')
        if not indexes:
            logger.warning(f'No valid rows loaded into {self}')
            return

        self.cur_min = min(indexes)
        self.cur_max = max(indexes)
        logger.attr(self.name, f'{self.cur_min} - {self.cur_max}')

    def drag_page(self, direction: str, main: ModuleBase, vector=None):
        """
        Args:
            direction: up, down, left, right
            main:
            vector (tuple[float, float]): Specific `drag_vector`, None by default to use `self.drag_vector`
        """
        if vector is None:
            vector = self.drag_vector
        vector = np.random.uniform(*vector)
        width, height = area_size(self.search_button.button)
        if direction == 'up':
            vector = (0, vector * height)
        elif direction == 'down':
            vector = (0, -vector * height)
        elif direction == 'left':
            vector = (vector * width, 0)
        elif direction == 'right':
            vector = (-vector * width, 0)
        else:
            logger.warning(f'Unknown drag direction: {direction}')
            return

        p1, p2 = random_rectangle_vector_opted(vector, box=self.search_button.button)
        main.device.drag(p1, p2, name=f'{self.name}_DRAG')

    def reverse_direction(self, direction):
        if direction == 'up':
            return 'down'
        if direction == 'down':
            return 'up'
        if direction == 'left':
            return 'right'
        if direction == 'right':
            return 'left'

    def insight_row(self, row: Keyword, main: ModuleBase, skip_first_screenshot=True) -> bool:
        """
        Args:
            row:
            main:
            skip_first_screenshot:

        Returns:
            If success
        """
        row_index = self.keyword2index(row)
        if not row_index:
            logger.warning(f'Insight row {row} but index unknown')
            return False

        logger.info(f'Insight row: {row}, index={row_index}')
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                main.device.screenshot()

            self.load_rows(main=main)

            # End
            if self.cur_buttons and self.cur_min <= row_index <= self.cur_max:
                break

            # Drag pages
            if row_index < self.cur_min:
                self.drag_page(self.reverse_direction(self.drag_direction), main=main)
            elif self.cur_max < row_index:
                self.drag_page(self.drag_direction, main=main)

            # Wait for bottoming out
            main.wait_until_stable(self.search_button, timer=Timer(
                0, count=0), timeout=Timer(1.5, count=5))
            skip_first_screenshot = True

        return True

    def is_row_selected(self, button: OcrResultButton, main: ModuleBase) -> bool:
        # Having gold letters
        if main.image_color_count(button, color=self.active_color, threshold=221, count=50):
            return True

        return False

    def get_selected_row(self, main: ModuleBase) -> Optional[OcrResultButton]:
        """
        `load_rows()` must be called before `get_selected_row()`.
        """
        for row in self.cur_buttons:
            if self.is_row_selected(row, main=main):
                return row
        return None

    def select_row(self, row: Keyword, main: ModuleBase, insight=True, skip_first_screenshot=True):
        """
        Args:
            row:
            main:
            insight: If call `insight_row()` before selecting
            skip_first_screenshot:

        Returns:
            If success
        """
        if insight:
            result = self.insight_row(
                row, main=main, skip_first_screenshot=skip_first_screenshot)
            if not result:
                return False

        logger.info(f'Select row: {row}')
        skip_first_screenshot = True
        interval = Timer(5)
        skip_first_load_rows = True
        load_rows_interval = Timer(1)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                main.device.screenshot()

            if skip_first_load_rows:
                skip_first_load_rows = False
                load_rows_interval.reset()
            else:
                if load_rows_interval.reached():
                    self.load_rows(main=main)
                    load_rows_interval.reset()

            button = self.keyword2button(row)
            if not button:
                return False

            # End
            if self.is_row_selected(button, main=main):
                logger.info(f'Row selected at {row}')
                return True

            # Click
            if interval.reached():
                main.device.click(button)
                interval.reset()

```

`module/ui/scroll.py`:

```py
import numpy as np

from module.base.base import ModuleBase
from module.base.button import Button, ButtonWrapper
from module.base.timer import Timer
from module.base.utils import color_similarity_2d, random_rectangle_point
from module.logger import logger


class Scroll:
    color_threshold = 221
    drag_threshold = 0.05
    edge_threshold = 0.05
    edge_add = (0.3, 0.5)

    def __init__(self, area, color, is_vertical=True, name='Scroll'):
        """
        Args:
            area (Button, tuple): A button or area of the whole scroll.
            color (tuple): RGB of the scroll
            is_vertical (bool): True if vertical, false if horizontal.
            name (str):
        """
        if isinstance(area, (Button, ButtonWrapper)):
            # name = area.name
            area = area.area
        self.area = area
        self.color = color
        self.is_vertical = is_vertical
        self.name = name

        if self.is_vertical:
            self.total = self.area[3] - self.area[1]
        else:
            self.total = self.area[2] - self.area[0]
        # Just default value, will change in match_color()
        self.length = self.total / 2
        self.drag_interval = Timer(1, count=2)
        self.drag_timeout = Timer(5, count=10)

    def match_color(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            np.ndarray: Shape (n,), dtype bool.
        """
        image = main.image_crop(self.area)
        image = color_similarity_2d(image, color=self.color)
        mask = np.max(image, axis=1 if self.is_vertical else 0) > self.color_threshold
        self.length = np.sum(mask)
        return mask

    def cal_position(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            float: 0 to 1.
        """
        mask = self.match_color(main)
        middle = np.mean(np.where(mask)[0])

        position = (middle - self.length / 2) / (self.total - self.length)
        position = position if position > 0 else 0.0
        position = position if position < 1 else 1.0
        logger.attr(self.name, f'{position:.2f} ({middle}-{self.length / 2})/({self.total}-{self.length})')
        return position

    def position_to_screen(self, position, random_range=(-0.05, 0.05)):
        """
        Convert scroll position to screen coordinates.
        Call cal_position() or match_color() to get length, before calling this.

        Args:
            position (int, float):
            random_range (tuple):

        Returns:
            tuple[int]: (upper_left_x, upper_left_y, bottom_right_x, bottom_right_y)
        """
        position = np.add(position, random_range)
        middle = position * (self.total - self.length) + self.length / 2
        middle = middle.astype(int)
        if self.is_vertical:
            middle += self.area[1]
            while np.max(middle) >= 720:
                middle -= 2
            while np.min(middle) <= 0:
                middle += 2
            area = (self.area[0], middle[0], self.area[2], middle[1])
        else:
            middle += self.area[0]
            while np.max(middle) >= 1280:
                middle -= 2
            while np.min(middle) <= 0:
                middle += 2
            area = (middle[0], self.area[1], middle[1], self.area[3])
        return area

    def appear(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            bool
        """
        return np.mean(self.match_color(main)) > 0.1

    def at_top(self, main):
        return self.cal_position(main) < self.edge_threshold

    def at_bottom(self, main):
        return self.cal_position(main) > 1 - self.edge_threshold

    def set(self, position, main, random_range=(-0.05, 0.05), distance_check=True, skip_first_screenshot=True):
        """
        Set scroll to a specific position.

        Args:
            position (float, int): 0 to 1.
            main (ModuleBase):
            random_range (tuple(int, float)):
            distance_check (bool): Whether to drop short swipes
            skip_first_screenshot:

        Returns:
            bool: If dragged.
        """
        logger.info(f'{self.name} set to {position}')
        self.drag_interval.clear()
        self.drag_timeout.reset()
        dragged = 0
        if position <= self.edge_threshold:
            random_range = np.subtract(0, self.edge_add)
        if position >= 1 - self.edge_threshold:
            random_range = self.edge_add

        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                main.device.screenshot()

            current = self.cal_position(main)
            if abs(position - current) < self.drag_threshold:
                break
            if self.length:
                self.drag_timeout.reset()
            else:
                if self.drag_timeout.reached():
                    logger.warning('Scroll disappeared, assume scroll set')
                    break
                else:
                    continue

            if self.drag_interval.reached():
                p1 = random_rectangle_point(self.position_to_screen(current), n=1)
                p2 = random_rectangle_point(self.position_to_screen(position, random_range=random_range), n=1)
                main.device.swipe(p1, p2, name=self.name, distance_check=distance_check)
                self.drag_interval.reset()
                dragged += 1

        return dragged

    def set_top(self, main, random_range=(-0.05, 0.05), skip_first_screenshot=True):
        return self.set(0.00, main=main, random_range=random_range, skip_first_screenshot=skip_first_screenshot)

    def set_bottom(self, main, random_range=(-0.05, 0.05), skip_first_screenshot=True):
        return self.set(1.00, main=main, random_range=random_range, skip_first_screenshot=skip_first_screenshot)

    def drag_page(self, page, main, random_range=(-0.05, 0.05), skip_first_screenshot=True):
        """
        Drag scroll forward or backward.

        Args:
            page (int, float): Relative position to drag. 1.0 means next page, -1.0 means previous page.
            main (ModuleBase):
            random_range (tuple[float]):
            skip_first_screenshot:
        """
        if not skip_first_screenshot:
            main.device.screenshot()
        current = self.cal_position(main)

        multiply = self.length / (self.total - self.length)
        target = current + page * multiply
        target = round(min(max(target, 0), 1), 3)
        self.set(target, main=main, random_range=random_range, skip_first_screenshot=True)

    def next_page(self, main, page=0.8, random_range=(-0.01, 0.01), skip_first_screenshot=True):
        self.drag_page(page, main=main, random_range=random_range, skip_first_screenshot=skip_first_screenshot)

    def prev_page(self, main, page=0.8, random_range=(-0.01, 0.01), skip_first_screenshot=True):
        self.drag_page(-page, main=main, random_range=random_range, skip_first_screenshot=skip_first_screenshot)

```

`module/ui/switch.py`:

```py
from module.base.base import ModuleBase
from module.base.button import Button
from module.base.timer import Timer
from module.exception import ScriptError
from module.logger import logger


class Switch:
    """
    A wrapper to handle switches in game, switch among states with retries.

    Examples:
        # Definitions
        submarine_hunt = Switch('Submarine_hunt', offset=120)
        submarine_hunt.add_state('on', check_button=SUBMARINE_HUNT_ON)
        submarine_hunt.add_state('off', check_button=SUBMARINE_HUNT_OFF)

        # Change state to ON
        submarine_view.set('on', main=self)
    """

    def __init__(self, name='Switch', is_selector=False):
        """
        Args:
            name (str):
            is_selector (bool): True if this is a multi choice, click to choose one of the switches.
                For example: | [Daily] | Urgent | -> click -> | Daily | [Urgent] |
                False if this is a switch, click the switch itself, and it changed in the same position.
                For example: | [ON] | -> click -> | [OFF] |
        """
        self.name = name
        self.is_choice = is_selector
        self.state_list = []

    def add_state(self, state, check_button, click_button=None):
        """
        Args:
            state (str):
            check_button (Button):
            click_button (Button):
        """
        self.state_list.append({
            'state': state,
            'check_button': check_button,
            'click_button': click_button if click_button is not None else check_button,
        })

    def appear(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            bool
        """
        for data in self.state_list:
            if main.appear(data['check_button']):
                return True

        return False

    def get(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            str: state name or 'unknown'.
        """
        for data in self.state_list:
            if main.appear(data['check_button']):
                return data['state']

        return 'unknown'

    def click(self, state, main):
        """
        Args:
            state (str):
            main (ModuleBase):
        """
        button = self.get_data(state)['click_button']
        main.device.click(button)

    def get_data(self, state):
        """
        Args:
            state (str):

        Returns:
            dict: Dictionary in add_state

        Raises:
            ScriptError: If state invalid
        """
        for row in self.state_list:
            if row['state'] == state:
                return row

        logger.warning(f'Switch {self.name} received an invalid state {state}')
        raise ScriptError(f'Switch {self.name} received an invalid state {state}')

    def handle_additional(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            bool: If handled
        """
        return False

    def set(self, state, main, skip_first_screenshot=True):
        """
        Args:
            state:
            main (ModuleBase):
            skip_first_screenshot (bool):

        Returns:
            bool: If clicked
        """
        logger.info(f'{self.name} set to {state}')
        self.get_data(state)

        counter = 0
        changed = False
        warning_show_timer = Timer(5, count=10).start()
        click_timer = Timer(1, count=3)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                main.device.screenshot()

            # Detect
            current = self.get(main=main)
            logger.attr(self.name, current)

            # Handle additional popups
            if self.handle_additional(main=main):
                continue

            # End
            if current == state:
                return changed

            # Warning
            if current == 'unknown':
                if warning_show_timer.reached():
                    logger.warning(f'Unknown {self.name} switch')
                    warning_show_timer.reset()
                    if counter >= 1:
                        logger.warning(f'{self.name} switch {state} asset has evaluated to unknown too many times, '
                                       f'asset should be re-verified')
                        return False
                    counter += 1
                continue

            # Click
            if click_timer.reached():
                click_state = state if self.is_choice else current
                self.click(click_state, main=main)
                click_timer.reset()
                changed = True

        return changed

```

`module/webui/__init__.py`:

```py
# This must be the first to import
from module.logger import logger  # Change folder
import deploy.Windows.logger

deploy.Windows.logger.logger = logger

```

`module/webui/app.py`:

```py
import argparse
import queue
import threading
import time
from datetime import datetime
from functools import partial
from typing import Dict, List, Optional

from pywebio import config as webconfig
from pywebio.output import (
    Output,
    clear,
    close_popup,
    popup,
    put_button,
    put_buttons,
    put_collapse,
    put_column,
    put_error,
    put_html,
    put_link,
    put_loading,
    put_markdown,
    put_row,
    put_scope,
    put_table,
    put_text,
    put_warning,
    toast,
    use_scope,
)
from pywebio.pin import pin, pin_on_change
from pywebio.session import go_app, info, local, register_thread, run_js, set_env

import module.webui.lang as lang
from module.config.config import AzurLaneConfig, Function
from module.config.utils import (
    alas_instance,
    alas_template,
    deep_get,
    deep_iter,
    deep_set,
    dict_to_kv,
    filepath_args,
    filepath_config,
    read_file,
)
from module.logger import logger
from module.webui.base import Frame
from module.webui.fake import (
    get_config_mod,
    load_config,
)
from module.webui.fastapi import asgi_app
from module.webui.lang import _t, t
from module.webui.pin import put_input, put_select
from module.webui.process_manager import ProcessManager
from module.webui.remote_access import RemoteAccess
from module.webui.setting import State
from module.webui.updater import updater
from module.webui.utils import (
    Icon,
    Switch,
    TaskHandler,
    add_css,
    filepath_css,
    get_alas_config_listen_path,
    get_localstorage,
    get_window_visibility_state,
    login,
    parse_pin_value,
    raise_exception,
    re_fullmatch,
)
from module.webui.widgets import (
    BinarySwitchButton,
    RichLog,
    T_Output_Kwargs,
    put_icon_buttons,
    put_loading_text,
    put_none,
    put_output,
)

task_handler = TaskHandler()


class AlasGUI(Frame):
    ALAS_MENU: Dict[str, Dict[str, List[str]]]
    ALAS_ARGS: Dict[str, Dict[str, Dict[str, Dict[str, str]]]]
    ALAS_STORED: Dict[str, Dict[str, Dict[str, str]]]
    theme = "default"

    def initial(self) -> None:
        self.ALAS_MENU = read_file(filepath_args("menu", self.alas_mod))
        self.ALAS_ARGS = read_file(filepath_args("args", self.alas_mod))
        self.ALAS_STORED = read_file(filepath_args("stored", self.alas_mod))
        self._init_alas_config_watcher()

    def __init__(self) -> None:
        super().__init__()
        # modified keys, return values of pin_wait_change()
        self.modified_config_queue = queue.Queue()
        # alas config name
        self.alas_name = ""
        self.alas_mod = "alas"
        self.alas_config = AzurLaneConfig("template")
        self.initial()

    @use_scope("aside", clear=True)
    def set_aside(self) -> None:
        # TODO: update put_icon_buttons()
        put_icon_buttons(
            Icon.DEVELOP,
            buttons=[
                {"label": t("Gui.Aside.Home"), "value": "Home", "color": "aside"}
            ],
            onclick=[self.ui_develop],
        ),
        for name in alas_instance():
            put_icon_buttons(
                Icon.RUN,
                buttons=[{"label": name, "value": name, "color": "aside"}],
                onclick=self.ui_alas,
            )
        put_icon_buttons(
            Icon.ADD,
            buttons=[
                {"label": t("Gui.Aside.AddAlas"), "value": "AddAlas", "color": "aside"}
            ],
            onclick=[self.ui_add_alas],
        ),

    @use_scope("header_status")
    def set_status(self, state: int) -> None:
        """
        Args:
            state (int):
                1 (running)
                2 (not running)
                3 (warning, stop unexpectedly)
                4 (stop for update)
                0 (hide)
                -1 (*state not changed)
        """
        if state == -1:
            return
        clear()

        if state == 1:
            put_loading_text(t("Gui.Status.Running"), color="success")
        elif state == 2:
            put_loading_text(t("Gui.Status.Inactive"), color="secondary", fill=True)
        elif state == 3:
            put_loading_text(t("Gui.Status.Warning"), shape="grow", color="warning")
        elif state == 4:
            put_loading_text(t("Gui.Status.Updating"), shape="grow", color="success")

    @classmethod
    def set_theme(cls, theme="default") -> None:
        cls.theme = theme
        State.deploy_config.Theme = theme
        State.theme = theme
        webconfig(theme=theme)

    @use_scope("menu", clear=True)
    def alas_set_menu(self) -> None:
        """
        Set menu
        """
        put_buttons(
            [{
                "label": t("Gui.MenuAlas.Overview"),
                "value": "Overview",
                "color": "menu",
            }],
            onclick=[self.alas_overview],
        ).style(f"--menu-Overview--")

        for menu, task_data in self.ALAS_MENU.items():
            if task_data.get("page") == "tool":
                _onclick = self.alas_daemon_overview
            else:
                _onclick = self.alas_set_group

            if task_data.get("menu") == "collapse":
                task_btn_list = [
                    put_buttons(
                        [{
                            "label": t(f"Task.{task}.name"),
                            "value": task,
                            "color": "menu",
                        }],
                        onclick=_onclick,
                    ).style(f"--menu-{task}--")
                    for task in task_data.get("tasks", [])
                ]
                put_collapse(title=t(f"Menu.{menu}.name"), content=task_btn_list)
            else:
                title = t(f"Menu.{menu}.name")
                put_html('<div class="hr-task-group-box">'
                         '<span class="hr-task-group-line"></span>'
                         f'<span class="hr-task-group-text">{title}</span>'
                         '<span class="hr-task-group-line"></span>'
                         '</div>'
                         )
                for task in task_data.get("tasks", []):
                    put_buttons(
                        [{
                            "label": t(f"Task.{task}.name"),
                            "value": task,
                            "color": "menu",
                        }],
                        onclick=_onclick,
                    ).style(f"--menu-{task}--").style(f"padding-left: 0.75rem")

        self.alas_overview()

    @use_scope("content", clear=True)
    def alas_set_group(self, task: str) -> None:
        """
        Set arg groups from dict
        """
        self.init_menu(name=task)
        self.set_title(t(f"Task.{task}.name"))

        put_scope("_groups", [put_none(), put_scope("groups"), put_scope("navigator")])

        task_help: str = t(f"Task.{task}.help")
        if task_help:
            put_scope(
                "group__info",
                scope="groups",
                content=[put_text(task_help).style("font-size: 1rem")],
            )

        config = self.alas_config.read_file(self.alas_name)
        for group, arg_dict in deep_iter(self.ALAS_ARGS[task], depth=1):
            if self.set_group(group, arg_dict, config, task):
                self.set_navigator(group)

    @use_scope("groups")
    def set_group(self, group, arg_dict, config, task):
        group_name = group[0]

        output_list: List[Output] = []
        for arg, arg_dict in deep_iter(arg_dict, depth=1):
            output_kwargs: T_Output_Kwargs = arg_dict.copy()

            # Skip hide
            display: Optional[str] = output_kwargs.pop("display", None)
            if display == "hide":
                continue
            # Disable
            elif display == "disabled":
                output_kwargs["disabled"] = True
            # Output type
            output_kwargs["widget_type"] = output_kwargs.pop("type")

            arg_name = arg[0]  # [arg_name,]
            # Internal pin widget name
            output_kwargs["name"] = f"{task}_{group_name}_{arg_name}"
            # Display title
            output_kwargs["title"] = t(f"{group_name}.{arg_name}.name")

            # Get value from config
            value = deep_get(
                config, [task, group_name, arg_name], output_kwargs["value"]
            )
            # idk
            value = str(value) if isinstance(value, datetime) else value
            # Default value
            output_kwargs["value"] = value
            # Options
            output_kwargs["options"] = options = output_kwargs.pop("option", [])
            # Options label
            options_label = []
            for opt in options:
                options_label.append(t(f"{group_name}.{arg_name}.{opt}"))
            output_kwargs["options_label"] = options_label
            # Help
            arg_help = t(f"{group_name}.{arg_name}.help")
            if arg_help == "" or not arg_help:
                arg_help = None
            output_kwargs["help"] = arg_help
            # Invalid feedback
            output_kwargs["invalid_feedback"] = t("Gui.Text.InvalidFeedBack", value)

            o = put_output(output_kwargs)
            if o is not None:
                # output will inherit current scope when created, override here
                o.spec["scope"] = f"#pywebio-scope-group_{group_name}"
                output_list.append(o)

        if not output_list:
            return 0

        with use_scope(f"group_{group_name}"):
            put_text(t(f"{group_name}._info.name"))
            group_help = t(f"{group_name}._info.help")
            if group_help != "":
                put_text(group_help)
            put_html('<hr class="hr-group">')
            for output in output_list:
                output.show()

        return len(output_list)

    @use_scope("navigator")
    def set_navigator(self, group):
        js = f"""
            $("#pywebio-scope-groups").scrollTop(
                $("#pywebio-scope-group_{group[0]}").position().top
                + $("#pywebio-scope-groups").scrollTop() - 59
            )
        """
        put_button(
            label=t(f"{group[0]}._info.name"),
            onclick=lambda: run_js(js),
            color="navigator",
        )

    def set_dashboard(self, arg, arg_dict, config):
        i18n = arg_dict.get('i18n')
        if i18n:
            name = t(i18n)
        else:
            name = arg
        color = arg_dict.get("color", "#777777")
        nodata = t("Gui.Dashboard.NoData")

        def set_value(dic):
            if "total" in dic.get("attrs", []) and config.get("total") is not None:
                return [
                    put_text(config.get("value", nodata)).style("--dashboard-value--"),
                    put_text(f' / {config.get("total", "")}').style("--dashboard-time--"),
                ]
            else:
                return [
                    put_text(config.get("value", nodata)).style("--dashboard-value--"),
                ]

        with use_scope(f"dashboard-row-{arg}", clear=True):
            put_html(f'<div><div class="dashboard-icon" style="background-color:{color}"></div>'),
            put_scope(f"dashboard-content-{arg}", [
                put_scope(f"dashboard-value-{arg}", set_value(arg_dict)),
                put_scope(f"dashboard-time-{arg}", [
                    put_text(f"{name} - {lang.readable_time(config.get('time', ''))}").style("--dashboard-time--"),
                ])
            ])

    @use_scope("content", clear=True)
    def alas_overview(self) -> None:
        self.init_menu(name="Overview")
        self.set_title(t(f"Gui.MenuAlas.Overview"))

        put_scope("overview", [put_scope("schedulers"), put_scope("logs")])

        with use_scope("schedulers"):
            put_scope(
                "scheduler-bar",
                [
                    put_text(t("Gui.Overview.Scheduler")).style(
                        "font-size: 1.25rem; margin: auto .5rem auto;"
                    ),
                    put_scope("scheduler_btn"),
                ],
            )
            put_scope(
                "running",
                [
                    put_text(t("Gui.Overview.Running")),
                    put_html('<hr class="hr-group">'),
                    put_scope("running_tasks"),
                ],
            )
            put_scope(
                "pending",
                [
                    put_text(t("Gui.Overview.Pending")),
                    put_html('<hr class="hr-group">'),
                    put_scope("pending_tasks"),
                ],
            )
            put_scope(
                "waiting",
                [
                    put_text(t("Gui.Overview.Waiting")),
                    put_html('<hr class="hr-group">'),
                    put_scope("waiting_tasks"),
                ],
            )

        switch_scheduler = BinarySwitchButton(
            label_on=t("Gui.Button.Stop"),
            label_off=t("Gui.Button.Start"),
            onclick_on=lambda: self.alas.stop(),
            onclick_off=lambda: self.alas.start(None, updater.event),
            get_state=lambda: self.alas.alive,
            color_on="off",
            color_off="on",
            scope="scheduler_btn",
        )

        log = RichLog("log")

        with use_scope("logs"):
            put_scope("log-bar", [
                put_scope("log-title", [
                    put_text(t("Gui.Overview.Log")).style("font-size: 1.25rem; margin: auto .5rem auto;"),
                    put_scope("log-title-btns", [
                        put_scope("log_scroll_btn"),
                    ]),
                ]),
                put_html('<hr class="hr-group">'),
                put_scope("dashboard", [
                    # Empty dashboard, values will be updated in alas_update_overview_task()
                    put_scope(f"dashboard-row-{arg}", []) for arg in self.ALAS_STORED.keys()
                    # Empty content to left-align last row
                ] + [put_html("<i></i>")] * len(self.ALAS_STORED))
            ])
            put_scope("log", [put_html("")])

        log.console.width = log.get_width()

        switch_log_scroll = BinarySwitchButton(
            label_on=t("Gui.Button.ScrollON"),
            label_off=t("Gui.Button.ScrollOFF"),
            onclick_on=lambda: log.set_scroll(False),
            onclick_off=lambda: log.set_scroll(True),
            get_state=lambda: log.keep_bottom,
            color_on="on",
            color_off="off",
            scope="log_scroll_btn",
        )

        self.task_handler.add(switch_scheduler.g(), 1, True)
        self.task_handler.add(switch_log_scroll.g(), 1, True)
        self.task_handler.add(self.alas_update_overview_task, 10, True)
        self.task_handler.add(log.put_log(self.alas), 0.25, True)

    def _init_alas_config_watcher(self) -> None:
        def put_queue(path, value):
            self.modified_config_queue.put({"name": path, "value": value})

        for path in get_alas_config_listen_path(self.ALAS_ARGS):
            pin_on_change(
                name="_".join(path), onchange=partial(put_queue, ".".join(path))
            )
        logger.info("Init config watcher done.")

    def _alas_thread_update_config(self) -> None:
        modified = {}
        while self.alive:
            try:
                d = self.modified_config_queue.get(timeout=10)
                config_name = self.alas_name
                read = self.alas_config.read_file
                write = self.alas_config.write_file
            except queue.Empty:
                continue
            modified[d["name"]] = d["value"]
            while True:
                try:
                    d = self.modified_config_queue.get(timeout=1)
                    modified[d["name"]] = d["value"]
                except queue.Empty:
                    self._save_config(modified, config_name, read, write)
                    modified.clear()
                    break

    def _save_config(
            self,
            modified: Dict[str, str],
            config_name: str,
            read=State.config_updater.read_file,
            write=State.config_updater.write_file,
    ) -> None:
        try:
            valid = []
            invalid = []
            config = read(config_name)
            for k, v in modified.copy().items():
                valuetype = deep_get(self.ALAS_ARGS, k + ".valuetype")
                v = parse_pin_value(v, valuetype)
                validate = deep_get(self.ALAS_ARGS, k + ".validate")
                if not len(str(v)):
                    default = deep_get(self.ALAS_ARGS, k + ".value")
                    modified[k] = default
                    deep_set(config, k, default)
                    valid.append(k)
                    pin["_".join(k.split("."))] = default

                elif not validate or re_fullmatch(validate, v):
                    deep_set(config, k, v)
                    modified[k] = v
                    valid.append(k)

                    # update Emotion Record if Emotion Value is changed
                    if "Emotion" in k and "Value" in k:
                        k = k.split(".")
                        k[-1] = k[-1].replace("Value", "Record")
                        k = ".".join(k)
                        v = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
                        modified[k] = v
                        deep_set(config, k, v)
                        valid.append(k)
                        pin["_".join(k.split("."))] = v
                else:
                    modified.pop(k)
                    invalid.append(k)
                    logger.warning(f"Invalid value {v} for key {k}, skip saving.")
            self.pin_remove_invalid_mark(valid)
            self.pin_set_invalid_mark(invalid)
            if modified:
                toast(
                    t("Gui.Toast.ConfigSaved"),
                    duration=1,
                    position="right",
                    color="success",
                )
                logger.info(
                    f"Save config {filepath_config(config_name)}, {dict_to_kv(modified)}"
                )
                write(config_name, config)
        except Exception as e:
            logger.exception(e)

    def alas_update_overview_task(self) -> None:
        if not self.visible:
            return
        self.alas_config.load()
        self.alas_config.get_next_task()

        alive = self.alas.alive
        if len(self.alas_config.pending_task) >= 1:
            if self.alas.alive:
                running = self.alas_config.pending_task[:1]
                pending = self.alas_config.pending_task[1:]
            else:
                running = []
                pending = self.alas_config.pending_task[:]
        else:
            running = []
            pending = []
        waiting = self.alas_config.waiting_task

        def put_task(func: Function):
            with use_scope(f"overview-task_{func.command}"):
                put_column(
                    [
                        put_text(t(f"Task.{func.command}.name")).style("--arg-title--"),
                        put_text(str(func.next_run)).style("--arg-help--"),
                    ],
                    size="auto auto",
                )
                put_button(
                    label=t("Gui.Button.Setting"),
                    onclick=lambda: self.alas_set_group(func.command),
                    color="off",
                )

        if self.scope_expired_then_add("pending_task", [
            alive,
            self.alas_config.pending_task
        ]):
            clear("running_tasks")
            clear("pending_tasks")
            clear("waiting_tasks")
            with use_scope("running_tasks"):
                if running:
                    for task in running:
                        put_task(task)
                else:
                    put_text(t("Gui.Overview.NoTask")).style("--overview-notask-text--")
            with use_scope("pending_tasks"):
                if pending:
                    for task in pending:
                        put_task(task)
                else:
                    put_text(t("Gui.Overview.NoTask")).style("--overview-notask-text--")
            with use_scope("waiting_tasks"):
                if waiting:
                    for task in waiting:
                        put_task(task)
                else:
                    put_text(t("Gui.Overview.NoTask")).style("--overview-notask-text--")

        for arg, arg_dict in self.ALAS_STORED.items():
            # Skip order=0
            if not arg_dict.get("order", 0):
                continue
            path = arg_dict["path"]
            if self.scope_expired_then_add(f"dashboard-time-value-{arg}", [
                deep_get(self.alas_config.data, keys=f"{path}.value"),
                lang.readable_time(deep_get(self.alas_config.data, keys=f"{path}.time")),
            ]):
                self.set_dashboard(arg, arg_dict, deep_get(self.alas_config.data, keys=path, default={}))

    @use_scope("content", clear=True)
    def alas_daemon_overview(self, task: str) -> None:
        self.init_menu(name=task)
        self.set_title(t(f"Task.{task}.name"))

        log = RichLog("log")

        if self.is_mobile:
            put_scope(
                "daemon-overview",
                [
                    put_scope("scheduler-bar"),
                    put_scope("groups"),
                    put_scope("log-bar"),
                    put_scope("log", [put_html("")]),
                ],
            )
        else:
            put_scope(
                "daemon-overview",
                [
                    put_none(),
                    put_scope(
                        "_daemon",
                        [
                            put_scope(
                                "_daemon_upper",
                                [put_scope("scheduler-bar"), put_scope("log-bar")],
                            ),
                            put_scope("groups"),
                            put_scope("log", [put_html("")]),
                        ],
                    ),
                    put_none(),
                ],
            )

        log.console.width = log.get_width()

        with use_scope("scheduler-bar"):
            put_text(t("Gui.Overview.Scheduler")).style(
                "font-size: 1.25rem; margin: auto .5rem auto;"
            )
            put_scope("scheduler_btn")

        switch_scheduler = BinarySwitchButton(
            label_on=t("Gui.Button.Stop"),
            label_off=t("Gui.Button.Start"),
            onclick_on=lambda: self.alas.stop(),
            onclick_off=lambda: self.alas.start(task),
            get_state=lambda: self.alas.alive,
            color_on="off",
            color_off="on",
            scope="scheduler_btn",
        )

        with use_scope("log-bar"):
            put_text(t("Gui.Overview.Log")).style(
                "font-size: 1.25rem; margin: auto .5rem auto;"
            )
            put_scope(
                "log-bar-btns",
                [
                    put_scope("log_scroll_btn"),
                ],
            )

        switch_log_scroll = BinarySwitchButton(
            label_on=t("Gui.Button.ScrollON"),
            label_off=t("Gui.Button.ScrollOFF"),
            onclick_on=lambda: log.set_scroll(False),
            onclick_off=lambda: log.set_scroll(True),
            get_state=lambda: log.keep_bottom,
            color_on="on",
            color_off="off",
            scope="log_scroll_btn",
        )

        config = self.alas_config.read_file(self.alas_name)
        for group, arg_dict in deep_iter(self.ALAS_ARGS[task], depth=1):
            if group[0] == "Storage":
                continue
            self.set_group(group, arg_dict, config, task)

        run_js("""
            $("#pywebio-scope-log").css(
                "grid-row-start",
                -2 - $("#pywebio-scope-_daemon").children().filter(
                    function(){
                        return $(this).css("display") === "none";
                    }
                ).length
            );
            $("#pywebio-scope-log").css(
                "grid-row-end",
                -1
            );
        """)

        self.task_handler.add(switch_scheduler.g(), 1, True)
        self.task_handler.add(switch_log_scroll.g(), 1, True)
        self.task_handler.add(log.put_log(self.alas), 0.25, True)

    @use_scope("menu", clear=True)
    def dev_set_menu(self) -> None:
        self.init_menu(collapse_menu=False, name="Develop")

        put_button(
            label=t("Gui.MenuDevelop.HomePage"),
            onclick=self.show,
            color="menu",
        ).style(f"--menu-HomePage--")

        # put_button(
        #     label=t("Gui.MenuDevelop.Translate"),
        #     onclick=self.dev_translate,
        #     color="menu",
        # ).style(f"--menu-Translate--")

        put_button(
            label=t("Gui.MenuDevelop.Update"),
            onclick=self.dev_update,
            color="menu",
        ).style(f"--menu-Update--")

        put_button(
            label=t("Gui.MenuDevelop.Remote"),
            onclick=self.dev_remote,
            color="menu",
        ).style(f"--menu-Remote--")

        put_button(
            label=t("Gui.MenuDevelop.Utils"),
            onclick=self.dev_utils,
            color="menu",
        ).style(f"--menu-Utils--")

    def dev_translate(self) -> None:
        go_app("translate", new_window=True)
        lang.TRANSLATE_MODE = True
        self.show()

    @use_scope("content", clear=True)
    def dev_update(self) -> None:
        self.init_menu(name="Update")
        self.set_title(t("Gui.MenuDevelop.Update"))

        if State.restart_event is None:
            put_warning(t("Gui.Update.DisabledWarn"))

        put_row(
            content=[put_scope("updater_loading"), None, put_scope("updater_state")],
            size="auto .25rem 1fr",
        )

        put_scope("updater_btn")
        put_scope("updater_info")

        def update_table():
            with use_scope("updater_info", clear=True):
                local_commit = updater.get_commit(short_sha1=True)
                upstream_commit = updater.get_commit(
                    f"origin/{updater.Branch}", short_sha1=True
                )
                put_table(
                    [
                        [t("Gui.Update.Local"), *local_commit],
                        [t("Gui.Update.Upstream"), *upstream_commit],
                    ],
                    header=[
                        "",
                        "SHA1",
                        t("Gui.Update.Author"),
                        t("Gui.Update.Time"),
                        t("Gui.Update.Message"),
                    ],
                )
            with use_scope("updater_detail", clear=True):
                put_text(t("Gui.Update.DetailedHistory"))
                history = updater.get_commit(
                    f"origin/{updater.Branch}", n=20, short_sha1=True
                )
                put_table(
                    [commit for commit in history],
                    header=[
                        "SHA1",
                        t("Gui.Update.Author"),
                        t("Gui.Update.Time"),
                        t("Gui.Update.Message"),
                    ],
                )

        def u(state):
            if state == -1:
                return
            clear("updater_loading")
            clear("updater_state")
            clear("updater_btn")
            if state == 0:
                put_loading("border", "secondary", "updater_loading").style(
                    "--loading-border-fill--"
                )
                put_text(t("Gui.Update.UpToDate"), scope="updater_state")
                put_button(
                    t("Gui.Button.CheckUpdate"),
                    onclick=updater.check_update,
                    color="info",
                    scope="updater_btn",
                )
                update_table()
            elif state == 1:
                put_loading("grow", "success", "updater_loading").style(
                    "--loading-grow--"
                )
                put_text(t("Gui.Update.HaveUpdate"), scope="updater_state")
                put_button(
                    t("Gui.Button.ClickToUpdate"),
                    onclick=updater.run_update,
                    color="success",
                    scope="updater_btn",
                )
                update_table()
            elif state == "checking":
                put_loading("border", "primary", "updater_loading").style(
                    "--loading-border--"
                )
                put_text(t("Gui.Update.UpdateChecking"), scope="updater_state")
            elif state == "failed":
                put_loading("grow", "danger", "updater_loading").style(
                    "--loading-grow--"
                )
                put_text(t("Gui.Update.UpdateFailed"), scope="updater_state")
                put_button(
                    t("Gui.Button.RetryUpdate"),
                    onclick=updater.run_update,
                    color="primary",
                    scope="updater_btn",
                )
            elif state == "start":
                put_loading("border", "primary", "updater_loading").style(
                    "--loading-border--"
                )
                put_text(t("Gui.Update.UpdateStart"), scope="updater_state")
                put_button(
                    t("Gui.Button.CancelUpdate"),
                    onclick=updater.cancel,
                    color="danger",
                    scope="updater_btn",
                )
            elif state == "wait":
                put_loading("border", "primary", "updater_loading").style(
                    "--loading-border--"
                )
                put_text(t("Gui.Update.UpdateWait"), scope="updater_state")
                put_button(
                    t("Gui.Button.CancelUpdate"),
                    onclick=updater.cancel,
                    color="danger",
                    scope="updater_btn",
                )
            elif state == "run update":
                put_loading("border", "primary", "updater_loading").style(
                    "--loading-border--"
                )
                put_text(t("Gui.Update.UpdateRun"), scope="updater_state")
                put_button(
                    t("Gui.Button.CancelUpdate"),
                    onclick=updater.cancel,
                    color="danger",
                    scope="updater_btn",
                    disabled=True,
                )
            elif state == "reload":
                put_loading("grow", "success", "updater_loading").style(
                    "--loading-grow--"
                )
                put_text(t("Gui.Update.UpdateSuccess"), scope="updater_state")
                update_table()
            elif state == "finish":
                put_loading("grow", "success", "updater_loading").style(
                    "--loading-grow--"
                )
                put_text(t("Gui.Update.UpdateFinish"), scope="updater_state")
                update_table()
            elif state == "cancel":
                put_loading("border", "danger", "updater_loading").style(
                    "--loading-border--"
                )
                put_text(t("Gui.Update.UpdateCancel"), scope="updater_state")
                put_button(
                    t("Gui.Button.CancelUpdate"),
                    onclick=updater.cancel,
                    color="danger",
                    scope="updater_btn",
                    disabled=True,
                )
            else:
                put_text(
                    "Something went wrong, please contact develops",
                    scope="updater_state",
                )
                put_text(f"state: {state}", scope="updater_state")

        updater_switch = Switch(
            status=u, get_state=lambda: updater.state, name="updater"
        )

        update_table()
        self.task_handler.add(updater_switch.g(), delay=0.5, pending_delete=True)

        updater.check_update()

    @use_scope("content", clear=True)
    def dev_utils(self) -> None:
        self.init_menu(name="Utils")
        self.set_title(t("Gui.MenuDevelop.Utils"))
        put_button(label="Raise exception", onclick=raise_exception)

        def _force_restart():
            if State.restart_event is not None:
                toast("Alas will restart in 3 seconds", duration=0, color="error")
                clearup()
                State.restart_event.set()
            else:
                toast("Reload not enabled", color="error")

        put_button(label="Force restart", onclick=_force_restart)

    @use_scope("content", clear=True)
    def dev_remote(self) -> None:
        self.init_menu(name="Remote")
        self.set_title(t("Gui.MenuDevelop.Remote"))
        put_row(
            content=[put_scope("remote_loading"), None, put_scope("remote_state")],
            size="auto .25rem 1fr",
        )
        put_scope("remote_info")

        def u(state):
            if state == -1:
                return
            clear("remote_loading")
            clear("remote_state")
            clear("remote_info")
            if state in (1, 2):
                put_loading("grow", "success", "remote_loading").style(
                    "--loading-grow--"
                )
                put_text(t("Gui.Remote.Running"), scope="remote_state")
                put_text(t("Gui.Remote.EntryPoint"), scope="remote_info")
                entrypoint = RemoteAccess.get_entry_point()
                if entrypoint:
                    if State.electron:  # Prevent click into url in electron client
                        put_text(entrypoint, scope="remote_info").style(
                            "text-decoration-line: underline"
                        )
                    else:
                        put_link(name=entrypoint, url=entrypoint, scope="remote_info")
                else:
                    put_text("Loading...", scope="remote_info")
            elif state in (0, 3):
                put_loading("border", "secondary", "remote_loading").style(
                    "--loading-border-fill--"
                )
                if (
                        State.deploy_config.EnableRemoteAccess
                        and State.deploy_config.Password
                ):
                    put_text(t("Gui.Remote.NotRunning"), scope="remote_state")
                else:
                    put_text(t("Gui.Remote.NotEnable"), scope="remote_state")
                put_text(t("Gui.Remote.ConfigureHint"), scope="remote_info")
                url = "http://app.azurlane.cloud" + (
                    "" if State.deploy_config.Language.startswith("zh") else "/en.html"
                )
                put_html(
                    f'<a href="{url}" target="_blank">{url}</a>', scope="remote_info"
                )
                if state == 3:
                    put_warning(
                        t("Gui.Remote.SSHNotInstall"),
                        closable=False,
                        scope="remote_info",
                    )

        remote_switch = Switch(
            status=u, get_state=RemoteAccess.get_state, name="remote"
        )

        self.task_handler.add(remote_switch.g(), delay=1, pending_delete=True)

    def ui_develop(self) -> None:
        if not self.is_mobile:
            self.show()
            return
        self.init_aside(name="Home")
        self.set_title(t("Gui.Aside.Home"))
        self.dev_set_menu()
        self.alas_name = ""
        if hasattr(self, "alas"):
            del self.alas
        self.state_switch.switch()

    def ui_alas(self, config_name: str) -> None:
        if config_name == self.alas_name:
            self.expand_menu()
            return
        self.init_aside(name=config_name)
        clear("content")
        self.alas_name = config_name
        self.alas_mod = get_config_mod(config_name)
        self.alas = ProcessManager.get_manager(config_name)
        self.alas_config = load_config(config_name)
        self.state_switch.switch()
        self.initial()
        self.alas_set_menu()

    def ui_add_alas(self) -> None:
        with popup(t("Gui.AddAlas.PopupTitle")) as s:

            def get_unused_name():
                all_name = alas_instance()
                for i in range(2, 100):
                    if f"src{i}" not in all_name:
                        return f"src{i}"
                else:
                    return ""

            def add():
                name = pin["AddAlas_name"]
                origin = pin["AddAlas_copyfrom"]

                if name in alas_instance():
                    err = "Gui.AddAlas.FileExist"
                elif set(name) & set(".\\/:*?\"'<>|"):
                    err = "Gui.AddAlas.InvalidChar"
                elif name.lower().startswith("template"):
                    err = "Gui.AddAlas.InvalidPrefixTemplate"
                else:
                    err = ""
                if err:
                    clear(s)
                    put(name, origin)
                    put_error(t(err), scope=s)
                    return

                r = load_config(origin).read_file(origin)
                State.config_updater.write_file(name, r, get_config_mod(origin))
                self.set_aside()
                self.active_button("aside", self.alas_name)
                close_popup()

            def put(name=None, origin=None):
                put_input(
                    name="AddAlas_name",
                    label=t("Gui.AddAlas.NewName"),
                    value=name or get_unused_name(),
                    scope=s,
                ),
                put_select(
                    name="AddAlas_copyfrom",
                    label=t("Gui.AddAlas.CopyFrom"),
                    options=alas_template() + alas_instance(),
                    value=origin or "template-src",
                    scope=s,
                ),
                put_button(label=t("Gui.AddAlas.Confirm"), onclick=add, scope=s)

            put()

    def show(self) -> None:
        self._show()
        self.set_aside()
        self.init_aside(name="Home")
        self.dev_set_menu()
        self.init_menu(name="HomePage")
        self.alas_name = ""
        if hasattr(self, "alas"):
            del self.alas
        self.set_status(0)

        def set_language(l):
            lang.set_language(l)
            self.show()

        def set_theme(t):
            self.set_theme(t)
            run_js("location.reload()")

        with use_scope("content"):
            put_text("Select your language / 选择语言").style("text-align: center")
            put_buttons(
                [
                    {"label": "简体中文", "value": "zh-CN"},
                    {"label": "繁體中文", "value": "zh-TW"},
                    {"label": "English", "value": "en-US"},
                    {"label": "日本語", "value": "ja-JP"},
                ],
                onclick=lambda l: set_language(l),
            ).style("text-align: center")
            put_text("Change theme / 更改主题").style("text-align: center")
            put_buttons(
                [
                    {"label": "Light", "value": "default", "color": "light"},
                    {"label": "Dark", "value": "dark", "color": "dark"},
                ],
                onclick=lambda t: set_theme(t),
            ).style("text-align: center")

            # show something
            put_markdown(
                """
            SRC is a free open source software, if you paid for SRC from any channel, please refund.
            SRC 是一款免费开源软件，如果你在任何渠道付费购买了SRC，请退款。
            Project repository 项目地址：`https://github.com/LmeSzinc/StarRailCopilot`
            """
            ).style("text-align: center")

        if lang.TRANSLATE_MODE:
            lang.reload()

            def _disable():
                lang.TRANSLATE_MODE = False
                self.show()

            toast(
                _t("Gui.Toast.DisableTranslateMode"),
                duration=0,
                position="right",
                onclick=_disable,
            )

    def run(self) -> None:
        # setup gui
        set_env(title="SRC", output_animation=False)
        add_css(filepath_css("alas"))
        if self.is_mobile:
            add_css(filepath_css("alas-mobile"))
        else:
            add_css(filepath_css("alas-pc"))

        if self.theme == "dark":
            add_css(filepath_css("dark-alas"))
        else:
            add_css(filepath_css("light-alas"))

        # Auto refresh when lost connection
        # [For develop] Disable by run `reload=0` in console
        run_js(
            """
        reload = 1;
        WebIO._state.CurrentSession.on_session_close(
            ()=>{
                setTimeout(
                    ()=>{
                        if (reload == 1){
                            location.reload();
                        }
                    }, 4000
                )
            }
        );
        """
        )

        aside = get_localstorage("aside")
        self.show()

        # init config watcher
        self._init_alas_config_watcher()

        # save config
        _thread_save_config = threading.Thread(target=self._alas_thread_update_config)
        register_thread(_thread_save_config)
        _thread_save_config.start()

        visibility_state_switch = Switch(
            status={
                True: [
                    lambda: self.__setattr__("visible", True),
                    lambda: self.alas_update_overview_task()
                    if self.page == "Overview"
                    else 0,
                    lambda: self.task_handler._task.__setattr__("delay", 15),
                ],
                False: [
                    lambda: self.__setattr__("visible", False),
                    lambda: self.task_handler._task.__setattr__("delay", 1),
                ],
            },
            get_state=get_window_visibility_state,
            name="visibility_state",
        )

        self.state_switch = Switch(
            status=self.set_status,
            get_state=lambda: getattr(getattr(self, "alas", -1), "state", 0),
            name="state",
        )

        def goto_update():
            self.ui_develop()
            self.dev_update()

        update_switch = Switch(
            status={
                1: lambda: toast(
                    t("Gui.Toast.ClickToUpdate"),
                    duration=0,
                    position="right",
                    color="success",
                    onclick=goto_update,
                )
            },
            get_state=lambda: updater.state,
            name="update_state",
        )

        self.task_handler.add(self.state_switch.g(), 2)
        self.task_handler.add(visibility_state_switch.g(), 15)
        self.task_handler.add(update_switch.g(), 1)
        self.task_handler.start()

        # Return to previous page
        if aside not in ["Home", None]:
            self.ui_alas(aside)


def debug():
    """For interactive python.
    $ python3
    >>> from module.webui.app import *
    >>> debug()
    >>>
    """
    startup()
    AlasGUI().run()


def startup():
    State.init()
    lang.reload()
    updater.event = State.manager.Event()
    if updater.delay > 0:
        task_handler.add(updater.check_update, updater.delay)
    task_handler.add(updater.schedule_update(), 86400)
    task_handler.start()
    # if State.deploy_config.DiscordRichPresence:
    #     init_discord_rpc()
    # if State.deploy_config.StartOcrServer:
    #     start_ocr_server_process(State.deploy_config.OcrServerPort)
    if (
            State.deploy_config.EnableRemoteAccess
            and State.deploy_config.Password is not None
    ):
        task_handler.add(RemoteAccess.keep_ssh_alive(), 60)


def clearup():
    """
    Notice: Ensure run it before uvicorn reload app,
    all process will NOT EXIT after close electron app.
    """
    logger.info("Start clearup")
    RemoteAccess.kill_ssh_process()
    # close_discord_rpc()
    # stop_ocr_server_process()
    for alas in ProcessManager._processes.values():
        alas.stop()
    State.clearup()
    task_handler.stop()
    logger.info("Alas closed.")


def app():
    parser = argparse.ArgumentParser(description="Alas web service")
    parser.add_argument(
        "-k", "--key", type=str, help="Password of alas. No password by default"
    )
    parser.add_argument(
        "--cdn",
        action="store_true",
        help="Use jsdelivr cdn for pywebio static files (css, js). Self host cdn by default.",
    )
    parser.add_argument(
        "--run",
        nargs="+",
        type=str,
        help="Run alas by config names on startup",
    )
    args, _ = parser.parse_known_args()

    # Apply config
    AlasGUI.set_theme(theme=State.deploy_config.Theme)
    lang.LANG = State.deploy_config.Language
    key = args.key or State.deploy_config.Password
    cdn = args.cdn if args.cdn else State.deploy_config.CDN
    runs = None
    if args.run:
        runs = args.run
    elif State.deploy_config.Run:
        # TODO: refactor poor_yaml_read() to support list
        tmp = State.deploy_config.Run.split(",")
        runs = [l.strip(" ['\"]") for l in tmp if len(l)]
    instances: List[str] = runs

    logger.hr("Webui configs")
    logger.attr("Theme", State.deploy_config.Theme)
    logger.attr("Language", lang.LANG)
    logger.attr("Password", True if key else False)
    logger.attr("CDN", cdn)

    def index():
        if key is not None and not login(key):
            logger.warning(f"{info.user_ip} login failed.")
            time.sleep(1.5)
            run_js("location.reload();")
            return
        gui = AlasGUI()
        local.gui = gui
        gui.run()

    app = asgi_app(
        applications=[index],
        cdn=cdn,
        static_dir=None,
        debug=True,
        on_startup=[
            startup,
            lambda: ProcessManager.restart_processes(
                instances=instances, ev=updater.event
            ),
        ],
        on_shutdown=[clearup],
    )

    return app

```

`module/webui/base.py`:

```py
from typing import Any, Dict

from pywebio.output import clear, put_html, put_scope, put_text, use_scope
from pywebio.session import defer_call, info, run_js

from module.webui.utils import Icon, WebIOTaskHandler, set_localstorage


class Base:
    def __init__(self) -> None:
        self.alive = True
        # Whether window is visible
        self.visible = True
        # Device type
        self.is_mobile = info.user_agent.is_mobile
        # Task handler
        self.task_handler = WebIOTaskHandler()
        # Record scopes to reduce data transfer to frontend
        # Key: scope name, value: last update time
        self.scope: Dict[str, Any] = {}
        defer_call(self.stop)

    def stop(self) -> None:
        self.alive = False
        self.task_handler.stop()

    def scope_clear(self):
        self.scope = {}

    def scope_add(self, key, value):
        self.scope[key] = value

    def scope_expired(self, key, value) -> bool:
        try:
            return self.scope[key] != value
        except KeyError:
            return True

    def scope_expired_then_add(self, key, value) -> bool:
        if self.scope_expired(key, value):
            self.scope_add(key, value)
            return True
        else:
            return False


class Frame(Base):
    def __init__(self) -> None:
        super().__init__()
        self.page = "Home"

    def init_aside(self, expand_menu: bool = True, name: str = None) -> None:
        """
        Call this in aside button callback function.
        Args:
            expand_menu: expand menu
            name: button name(label) to be highlight
        """
        self.visible = True
        self.scope_clear()
        self.task_handler.remove_pending_task()
        clear("menu")
        if expand_menu:
            self.expand_menu()
        if name:
            self.active_button("aside", name)
            set_localstorage("aside", name)

    def init_menu(self, collapse_menu: bool = True, name: str = None) -> None:
        """
        Call this in menu button callback function.
        Args:
            collapse_menu: collapse menu
            name: button name(label) to be highlight
        """
        self.visible = True
        self.page = name
        self.scope_clear()
        self.task_handler.remove_pending_task()
        clear("content")
        if collapse_menu:
            self.collapse_menu()
        if name:
            self.active_button("menu", name)

    @staticmethod
    @use_scope("ROOT", clear=True)
    def _show() -> None:
        put_scope(
            "header",
            [
                put_html(Icon.ALAS).style("--header-icon--"),
                put_text("SRC").style("--header-text--"),
                put_scope("header_status"),
                put_scope("header_title"),
            ],
        )
        put_scope(
            "contents",
            [
                put_scope("aside"),
                put_scope("menu"),
                put_scope("content"),
            ],
        )

    @staticmethod
    @use_scope("header_title", clear=True)
    def set_title(text=""):
        put_text(text)

    @staticmethod
    def collapse_menu() -> None:
        run_js(
            f"""
            $("#pywebio-scope-menu").addClass("container-menu-collapsed");
            $(".container-content-collapsed").removeClass("container-content-collapsed");
        """
        )

    @staticmethod
    def expand_menu() -> None:
        run_js(
            f"""
            $(".container-menu-collapsed").removeClass("container-menu-collapsed");
            $("#pywebio-scope-content").addClass("container-content-collapsed");
        """
        )

    @staticmethod
    def active_button(position, value) -> None:
        run_js(
            f"""
            $("button.btn-{position}").removeClass("btn-{position}-active");
            $("div[style*='--{position}-{value}--']>button").addClass("btn-{position}-active");
        """
        )

    @staticmethod
    def pin_set_invalid_mark(keys) -> None:
        if isinstance(keys, str):
            keys = [keys]
        keys = ["_".join(key.split(".")) for key in keys]
        js = "".join(
            [
                f"""$(".form-control[name='{key}']").addClass('is-invalid');"""
                for key in keys
            ]
        )
        if js:
            run_js(js)
        # for key in keys:
        #     pin_update(key, valid_status=False)

    @staticmethod
    def pin_remove_invalid_mark(keys) -> None:
        if isinstance(keys, str):
            keys = [keys]
        keys = ["_".join(key.split(".")) for key in keys]
        js = "".join(
            [
                f"""$(".form-control[name='{key}']").removeClass('is-invalid');"""
                for key in keys
            ]
        )
        if js:
            run_js(js)
        # for key in keys:
        # pin_update(key, valid_status=0)

```

`module/webui/config.py`:

```py
from filelock import FileLock

from deploy.Windows.config import DeployConfig as _DeployConfig
from deploy.Windows.utils import *


def poor_yaml_read_with_lock(file):
    if not os.path.exists(file):
        return {}

    with FileLock(f"{file}.lock"):
        return poor_yaml_read(file)


def poor_yaml_write_with_lock(data, file, template_file=DEPLOY_TEMPLATE):
    folder = os.path.dirname(file)
    if not os.path.exists(folder):
        os.mkdir(folder)

    with FileLock(f"{file}.lock"):
        with FileLock(f"{DEPLOY_TEMPLATE}.lock"):
            return poor_yaml_write(data, file, template_file)


class DeployConfig(_DeployConfig):
    def show_config(self):
        pass

    def read(self):
        """
        Read and update deploy config, copy `self.configs` to properties.
        """
        self.config = poor_yaml_read_with_lock(DEPLOY_TEMPLATE)
        self.config.update(poor_yaml_read_with_lock(self.file))

        for key, value in self.config.items():
            if hasattr(self, key):
                super().__setattr__(key, value)

    def write(self):
        """
        Write `self.config` into deploy config.
        """
        poor_yaml_write_with_lock(self.config, self.file)

    def __setattr__(self, key: str, value):
        """
        Catch __setattr__, copy to `self.config`, write deploy config.
        """
        super().__setattr__(key, value)
        if key[0].isupper() and key in self.config:
            self.config[key] = value
            self.write()

```

`module/webui/fake.py`:

```py
from module.config.config import AzurLaneConfig

"""
Return default values, since submodules shouldn't have nested submodules
"""


def start_ocr_server_process(*args, **kwargs):
    pass


def stop_ocr_server_process(*args, **kwargs):
    pass


def load_config(config_name):
    return AzurLaneConfig(config_name, '')


def get_config_mod(config_name):
    """
    Args:
        config_name (str):
    """
    return 'alas'


def list_mod():
    return []


def mod_instance():
    return []


def init_discord_rpc():
    pass


def close_discord_rpc():
    pass

```

`module/webui/fastapi.py`:

```py
"""
Copy from pywebio.platform.fastapi
"""
import asyncio
import os

import uvicorn
from pywebio.platform.fastapi import (STATIC_PATH, Session, cdn_validation,
                                      get_free_port,
                                      open_webbrowser_on_server_started,
                                      start_remote_access_service,
                                      webio_routes)
from starlette.applications import Starlette
from starlette.middleware import Middleware
from starlette.middleware.base import BaseHTTPMiddleware
from starlette.routing import Mount
from starlette.staticfiles import StaticFiles


class HeaderMiddleware(BaseHTTPMiddleware):
    async def dispatch(self, request, call_next):
        response = await call_next(request)
        response.headers["Cache-Control"] = "no-cache"
        return response


def asgi_app(
    applications,
    cdn=True,
    static_dir=None,
    debug=False,
    allowed_origins=None,
    check_origin=None,
    **starlette_settings
):
    debug = Session.debug = os.environ.get("PYWEBIO_DEBUG", debug)
    cdn = cdn_validation(cdn, "warn")
    if cdn is False:
        cdn = "pywebio_static"
    routes = webio_routes(
        applications,
        cdn=cdn,
        allowed_origins=allowed_origins,
        check_origin=check_origin,
    )
    if static_dir:
        routes.append(
            Mount("/static", app=StaticFiles(directory=static_dir), name="static")
        )
    routes.append(
        Mount(
            "/pywebio_static",
            app=StaticFiles(directory=STATIC_PATH),
            name="pywebio_static",
        )
    )
    middleware = [Middleware(HeaderMiddleware)]
    return Starlette(
        routes=routes, middleware=middleware, debug=debug, **starlette_settings
    )


def start_server(
    applications,
    port=0,
    host="",
    cdn=True,
    static_dir=None,
    remote_access=False,
    debug=False,
    allowed_origins=None,
    check_origin=None,
    auto_open_webbrowser=False,
    **uvicorn_settings
):

    app = asgi_app(
        applications,
        cdn=cdn,
        static_dir=static_dir,
        debug=debug,
        allowed_origins=allowed_origins,
        check_origin=check_origin,
    )

    if auto_open_webbrowser:
        asyncio.get_event_loop().create_task(
            open_webbrowser_on_server_started("localhost", port)
        )

    if not host:
        host = "0.0.0.0"

    if port == 0:
        port = get_free_port()

    if remote_access:
        start_remote_access_service(local_port=port)

    uvicorn.run(app, host=host, port=port, **uvicorn_settings)

```

`module/webui/lang.py`:

```py
import time
from typing import Dict

from module.config.utils import *
from module.webui.fake import list_mod
from module.webui.setting import State

LANG = "zh-CN"
TRANSLATE_MODE = False


def set_language(s: str, refresh=False):
    global LANG
    for i, lang in enumerate(LANGUAGES):
        # pywebio.session.info.user_language return `zh-CN` or `zh-cn`, depends on browser
        if lang.lower() == s.lower():
            LANG = LANGUAGES[i]
            break
    else:
        LANG = "en-US"

    State.deploy_config.Language = LANG

    if refresh:
        from pywebio.session import run_js

        run_js("location.reload();")


def t(s, *args, **kwargs):
    """
    Get translation.
    other args, kwargs pass to .format()
    """
    if TRANSLATE_MODE:
        return s
    return _t(s, LANG).format(*args, **kwargs)


def _t(s, lang=None):
    """
    Get translation, ignore TRANSLATE_MODE
    """
    if not lang:
        lang = LANG
    try:
        return dic_lang[lang][s]
    except KeyError:
        print(f"Language key ({s}) not found")
        return s


dic_lang: Dict[str, Dict[str, str]] = {}


def reload():
    for lang in LANGUAGES:
        if lang not in dic_lang:
            dic_lang[lang] = {}

        for mod_name, dir_name in list_mod():
            for path, v in deep_iter(read_file(filepath_i18n(lang, mod_name)), depth=3):
                dic_lang[lang][".".join(path)] = v

        for path, v in deep_iter(read_file(filepath_i18n(lang)), depth=3):
            dic_lang[lang][".".join(path)] = v

    for key in dic_lang["ja-JP"].keys():
        if dic_lang["ja-JP"][key] == key:
            dic_lang["ja-JP"][key] = dic_lang["en-US"][key]


def readable_time(before: str) -> str:
    """
    Convert "2023-08-29 12:30:53" to "3 Minutes Ago"
    """
    if not before:
        return t("Gui.Dashboard.NoData")
    try:
        ti = datetime.fromisoformat(before)
    except ValueError:
        return t("Gui.Dashboard.TimeError")
    if ti == DEFAULT_TIME:
        return t("Gui.Dashboard.NoData")

    diff = time.time() - ti.timestamp()
    if diff < -1:
        return t("Gui.Dashboard.TimeError")
    elif diff < 60:
        # < 1 min
        return t("Gui.Dashboard.JustNow")
    elif diff < 3600:
        return t("Gui.Dashboard.MinutesAgo", time=int(diff // 60))
    elif diff < 86400:
        return t("Gui.Dashboard.HoursAgo", time=int(diff // 3600))
    elif diff < 129600:
        return t("Gui.Dashboard.DaysAgo", time=int(diff // 86400))
    else:
        # > 15 days
        return t("Gui.Dashboard.LongTimeAgo")

```

`module/webui/pin.py`:

```py
"""
Copy from pywebio.pin
Add **other_html_attrs to put_xxx()
"""

from pywebio.io_ctrl import Output
from pywebio.output import OutputPosition
from pywebio.pin import _pin_output, check_dom_name_value


def put_input(name, type='text', *, label='', value=None, placeholder=None, readonly=None, datalist=None,
              help_text=None, scope=None, position=OutputPosition.BOTTOM, **other_html_attrs) -> Output:
    """Output an input widget. Refer to: `pywebio.input.input()`"""
    from pywebio.input import input
    check_dom_name_value(name, 'pin `name`')
    single_input_return = input(name=name, label=label, value=value, type=type, placeholder=placeholder,
                                readonly=readonly, datalist=datalist, help_text=help_text, **other_html_attrs)
    return _pin_output(single_input_return, scope, position)


def put_textarea(name, *, label='', rows=6, code=None, maxlength=None, minlength=None, value=None, placeholder=None,
                 readonly=None, help_text=None, scope=None, position=OutputPosition.BOTTOM, **other_html_attrs) -> Output:
    """Output a textarea widget. Refer to: `pywebio.input.textarea()`"""
    from pywebio.input import textarea
    check_dom_name_value(name, 'pin `name`')
    single_input_return = textarea(
        name=name, label=label, rows=rows, code=code, maxlength=maxlength,
        minlength=minlength, value=value, placeholder=placeholder, readonly=readonly, help_text=help_text, **other_html_attrs)
    return _pin_output(single_input_return, scope, position)


def put_select(name, options=None, *, label='', multiple=None, value=None, help_text=None,
               scope=None, position=OutputPosition.BOTTOM, **other_html_attrs) -> Output:
    """Output a select widget. Refer to: `pywebio.input.select()`"""
    from pywebio.input import select
    check_dom_name_value(name, 'pin `name`')
    single_input_return = select(name=name, options=options, label=label, multiple=multiple,
                                 value=value, help_text=help_text, **other_html_attrs)
    return _pin_output(single_input_return, scope, position)


def put_checkbox(name, options=None, *, label='', inline=None, value=None, help_text=None,
                 scope=None, position=OutputPosition.BOTTOM, **other_html_attrs) -> Output:
    """Output a checkbox widget. Refer to: `pywebio.input.checkbox()`"""
    from pywebio.input import checkbox
    check_dom_name_value(name, 'pin `name`')
    single_input_return = checkbox(name=name, options=options, label=label, inline=inline, value=value,
                                   help_text=help_text, **other_html_attrs)
    return _pin_output(single_input_return, scope, position)
```

`module/webui/process_manager.py`:

```py
import argparse
import os
import queue
import threading
from multiprocessing import Process
from typing import Dict, List, Union

from filelock import FileLock
from module.config.utils import filepath_config
from module.logger import logger, set_file_logger, set_func_logger
from module.webui.fake import get_config_mod, mod_instance
from module.webui.setting import State
from rich.console import Console, ConsoleRenderable


class ProcessManager:
    _processes: Dict[str, "ProcessManager"] = {}

    def __init__(self, config_name: str = "alas") -> None:
        self.config_name = config_name
        self._renderable_queue: queue.Queue[ConsoleRenderable] = State.manager.Queue()
        self.renderables: List[ConsoleRenderable] = []
        self.renderables_max_length = 400
        self.renderables_reduce_length = 80
        self._process: Process = None
        self.thd_log_queue_handler: threading.Thread = None

    def start(self, func, ev: threading.Event = None) -> None:
        if not self.alive:
            if func is None:
                func = get_config_mod(self.config_name)
            self._process = Process(
                target=ProcessManager.run_process,
                args=(
                    self.config_name,
                    func,
                    self._renderable_queue,
                    ev,
                ),
            )
            self._process.start()
            self.start_log_queue_handler()

    def start_log_queue_handler(self):
        if (
            self.thd_log_queue_handler is not None
            and self.thd_log_queue_handler.is_alive()
        ):
            return
        self.thd_log_queue_handler = threading.Thread(
            target=self._thread_log_queue_handler
        )
        self.thd_log_queue_handler.start()

    def stop(self) -> None:
        lock = FileLock(f"{filepath_config(self.config_name)}.lock")
        with lock:
            if self.alive:
                self._process.kill()
                self.renderables.append(
                    f"[{self.config_name}] exited. Reason: Manual stop\n"
                )
            if self.thd_log_queue_handler is not None:
                self.thd_log_queue_handler.join(timeout=1)
                if self.thd_log_queue_handler.is_alive():
                    logger.warning(
                        "Log queue handler thread does not stop within 1 seconds"
                    )
        logger.info(f"[{self.config_name}] exited")

    def _thread_log_queue_handler(self) -> None:
        while self.alive:
            try:
                log = self._renderable_queue.get(timeout=1)
            except queue.Empty:
                continue
            self.renderables.append(log)
            if len(self.renderables) > self.renderables_max_length:
                self.renderables = self.renderables[self.renderables_reduce_length :]
        logger.info("End of log queue handler loop")

    @property
    def alive(self) -> bool:
        if self._process is not None:
            return self._process.is_alive()
        else:
            return False

    @property
    def state(self) -> int:
        if self.alive:
            return 1
        elif len(self.renderables) == 0:
            return 2
        else:
            console = Console(no_color=True)
            with console.capture() as capture:
                console.print(self.renderables[-1])
            s = capture.get().strip()
            if s.endswith("Reason: Manual stop"):
                return 2
            elif s.endswith("Reason: Finish"):
                return 2
            elif s.endswith("Reason: Update"):
                return 4
            else:
                return 3

    @classmethod
    def get_manager(cls, config_name: str) -> "ProcessManager":
        """
        Create a new alas if not exists.
        """
        if config_name not in cls._processes:
            cls._processes[config_name] = ProcessManager(config_name)
        return cls._processes[config_name]

    @staticmethod
    def run_process(
        config_name, func: str, q: queue.Queue, e: threading.Event = None
    ) -> None:
        parser = argparse.ArgumentParser()
        parser.add_argument(
            "--electron", action="store_true", help="Runs by electron client."
        )
        args, _ = parser.parse_known_args()
        State.electron = args.electron

        # Setup logger
        set_file_logger(name=config_name)
        if State.electron:
            # https://github.com/LmeSzinc/AzurLaneAutoScript/issues/2051
            logger.info("Electron detected, remove log output to stdout")
            from module.logger.logger import console_hdlr
            logger.removeHandler(console_hdlr)
        set_func_logger(func=q.put)

        from module.config.config import AzurLaneConfig

        AzurLaneConfig.stop_event = e
        try:
            # Run alas
            if func == "alas":
                from module.alas import AzurLaneAutoScript
                from src import StarRailCopilot

                if e is not None:
                    AzurLaneAutoScript.stop_event = e
                StarRailCopilot(config_name=config_name).loop()
            else:
                logger.critical(f"No function matched: {func}")
            logger.info(f"[{config_name}] exited. Reason: Finish\n")
        except Exception as e:
            logger.exception(e)

    @classmethod
    def running_instances(cls) -> List["ProcessManager"]:
        l = []
        for process in cls._processes.values():
            if process.alive:
                l.append(process)
        return l

    @staticmethod
    def restart_processes(
        instances: List[Union["ProcessManager", str]] = None, ev: threading.Event = None
    ):
        """
        After update and reload, or failed to perform an update,
        restart all alas that running before update
        """
        logger.hr("Restart alas")

        # Load MOD_CONFIG_DICT
        mod_instance()

        if instances is None:
            instances = []

        _instances = set()

        for instance in instances:
            if isinstance(instance, str):
                _instances.add(ProcessManager.get_manager(instance))
            elif isinstance(instance, ProcessManager):
                _instances.add(instance)

        try:
            with open("./config/reloadalas", mode="r") as f:
                for line in f.readlines():
                    line = line.strip()
                    _instances.add(ProcessManager.get_manager(line))
        except FileNotFoundError:
            pass

        for process in _instances:
            logger.info(f"Starting [{process.config_name}]")
            process.start(func=get_config_mod(process.config_name), ev=ev)

        try:
            os.remove("./config/reloadalas")
        except:
            pass
        logger.info("Start alas complete")

```

`module/webui/remote_access.py`:

```py
"""
Copy from pywebio.platform.remote_access

* Implementation of remote access
Use https://github.com/wang0618/localshare service by running a ssh subprocess in PyWebIO application.

The stdout of ssh process is the connection info.


"""

import json
import shlex
import threading
import time
from subprocess import PIPE, Popen
from typing import TYPE_CHECKING

from module.logger import logger
from module.config.utils import random_id
from module.webui.setting import State

if TYPE_CHECKING:
    from module.webui.utils import TaskHandler

_ssh_process: Popen = None
_ssh_thread: threading.Thread = None
_ssh_notfound: bool = False
address: str = None


def am_i_the_only_thread() -> bool:
    """Whether the current thread is the only non-Daemon threads in the process"""
    alive_none_daemonic_thread_cnt = sum(
        1
        for t in threading.enumerate()
        if t.is_alive() and not t.isDaemon() or t is threading.current_thread()
    )
    return alive_none_daemonic_thread_cnt == 1


def remote_access_service(
    local_host="127.0.0.1",
    local_port=22367,
    server="app.pywebio.online",
    server_port=1022,
    remote_port="/",
    setup_timeout=60,
):
    """
    Wait at most one minute to get the ssh output, if it gets a normal out, the connection is successfully established.
    Otherwise report error and kill ssh process.

    :param local_port: ssh local listen port
    :param server: ssh server domain
    :param server_port: ssh server port
    :param setup_timeout: If the service can't setup successfully in `setup_timeout` seconds, then exit.
    """
    global _ssh_process, _ssh_notfound

    bin = State.deploy_config.SSHExecutable
    cmd = f"{bin} -oStrictHostKeyChecking=no -R {remote_port}:{local_host}:{local_port} -p {server_port} {server} -- --output json"
    args = shlex.split(cmd)
    logger.debug(f"remote access service command: {cmd}")

    if _ssh_process is not None and _ssh_process.poll() is None:
        logger.warning(f"Kill previous ssh process [{_ssh_process.pid}]")
        _ssh_process.kill()
    try:
        _ssh_process = Popen(args, stdout=PIPE, stderr=PIPE)
    except FileNotFoundError as e:
        logger.critical(
            f"Cannot find SSH executable {bin}, please install OpenSSH or specify SSHExecutable in deploy.yaml"
        )
        _ssh_notfound = True
        return
    logger.info(f"remote access process pid: {_ssh_process.pid}")
    success = False

    def timeout_killer(wait_sec):
        time.sleep(wait_sec)
        if not success and _ssh_process.poll() is None:
            logger.info("Connection timeout, kill ssh process")
            _ssh_process.kill()

    threading.Thread(
        target=timeout_killer, kwargs=dict(wait_sec=setup_timeout), daemon=True
    ).start()

    stdout = _ssh_process.stdout.readline().decode("utf8")
    logger.debug(f"ssh server stdout: {stdout}")
    connection_info = {}
    try:
        connection_info = json.loads(stdout)
        success = True
    except json.decoder.JSONDecodeError:
        if not success and _ssh_process.poll() is None:
            _ssh_process.kill()

    if success:
        if connection_info.get("status", "fail") != "success":
            logger.info(
                f"Failed to establish remote access, this is the error message from service provider: {connection_info.get('message', '')}"
            )
            new_username = connection_info.get("change_username", None)
            if new_username:
                logger.info(f"Server requested to change username, change it to: {new_username}")
                State.deploy_config.SSHUser = new_username
        else:
            global address
            address = connection_info["address"]
            logger.debug(f"Remote access url: {address}")

    # wait ssh or main thread exit
    while not am_i_the_only_thread() and _ssh_process.poll() is None:
        # while _ssh_process.poll() is None:
        time.sleep(1)

    if _ssh_process.poll() is None:  # main thread exit, kill ssh process
        logger.info("App process exit, killing ssh process")
        _ssh_process.kill()
    else:  # ssh process exit by itself or by timeout killer
        stderr = _ssh_process.stderr.read().decode("utf8")
        if stderr:
            logger.error(f"PyWebIO application remote access service error: {stderr}")
        else:
            logger.info("PyWebIO application remote access service exit.")
    address = None


def start_remote_access_service_(**kwargs):
    logger.info("Start remote access service")
    try:
        remote_access_service(**kwargs)
    except KeyboardInterrupt:  # ignore KeyboardInterrupt
        pass
    except Exception as e:
        logger.exception(e)
    finally:
        if _ssh_process:
            logger.info("Exception occurred, killing ssh process")
            _ssh_process.kill()
    logger.info("Exit remote access service thread")


class ParseError(Exception):
    pass


def start_remote_access_service(**kwagrs):
    global _ssh_thread

    try:
        server, server_port = State.deploy_config.SSHServer.split(":")
    except (ValueError, AttributeError):
        raise ParseError(
            f"Failed to parse SSH server [{State.deploy_config.SSHServer}]"
        )
    if State.deploy_config.WebuiHost == "0.0.0.0":
        local_host = "127.0.0.1"
    elif State.deploy_config.WebuiHost == "::":
        local_host = "[::1]"
    else:
        local_host = State.deploy_config.WebuiHost

    if State.deploy_config.SSHUser is None:
        logger.info("SSHUser is not set, generate a random one")
        State.deploy_config.SSHUser = random_id(24)

    server = f"{State.deploy_config.SSHUser}@{server}"
    kwagrs.setdefault("server", server)
    kwagrs.setdefault("server_port", server_port)
    kwagrs.setdefault("local_host", local_host)
    kwagrs.setdefault("local_port", State.deploy_config.WebuiPort)

    _ssh_thread = threading.Thread(
        target=start_remote_access_service_,
        kwargs=kwagrs,
        daemon=False,
    )
    _ssh_thread.start()
    return _ssh_thread


class RemoteAccess:
    @staticmethod
    def keep_ssh_alive():
        task_handler: TaskHandler
        task_handler = yield
        while True:
            if _ssh_thread is not None and _ssh_thread.is_alive():
                yield
                continue
            logger.info("Remote access service is not running, starting now")
            try:
                start_remote_access_service()
            except ParseError as e:
                logger.exception(e)
                task_handler.remove_current_task()
            yield

    @staticmethod
    def kill_ssh_process():
        if RemoteAccess.is_alive():
            _ssh_process.kill()

    @staticmethod
    def is_alive():
        return (
            _ssh_thread is not None
            and _ssh_thread.is_alive()
            and _ssh_process is not None
            and _ssh_process.poll() is None
        )

    @staticmethod
    def get_state():
        if RemoteAccess.is_alive():
            if address is not None:
                return 1
            else:
                return 2
        elif _ssh_notfound:
            return 3
        else:
            return 0

    @staticmethod
    def get_entry_point():
        return address if RemoteAccess.is_alive() else None

```

`module/webui/setting.py`:

```py
import multiprocessing
import threading
from multiprocessing.managers import SyncManager
from typing import TYPE_CHECKING, Callable, Generic, TypeVar

if TYPE_CHECKING:
    from module.config.config_updater import ConfigUpdater
    from module.webui.config import DeployConfig

T = TypeVar("T")


class cached_class_property(Generic[T]):
    """
    Code from https://github.com/dssg/dickens
    Add typing support

    Descriptor decorator implementing a class-level, read-only
    property, which caches its results on the class(es) on which it
    operates.
    Inheritance is supported, insofar as the descriptor is never hidden
    by its cache; rather, it stores values under its access name with
    added underscores. For example, when wrapping getters named
    "choices", "choices_" or "_choices", each class's result is stored
    on the class at "_choices_"; decoration of a getter named
    "_choices_" would raise an exception.
    """

    class AliasConflict(ValueError):
        pass

    def __init__(self, func: Callable[..., T]):
        self.__func__ = func
        self.__cache_name__ = '_{}_'.format(func.__name__.strip('_'))
        if self.__cache_name__ == func.__name__:
            raise self.AliasConflict(self.__cache_name__)

    def __get__(self, instance, cls=None) -> T:
        if cls is None:
            cls = type(instance)

        try:
            return vars(cls)[self.__cache_name__]
        except KeyError:
            result = self.__func__(cls)
            setattr(cls, self.__cache_name__, result)
            return result


class State:
    """
    Shared settings
    """

    _init = False
    _clearup = False

    restart_event: threading.Event = None
    manager: SyncManager = None
    electron: bool = False
    theme: str = "default"

    @classmethod
    def init(cls):
        cls.manager = multiprocessing.Manager()
        cls._init = True

    @classmethod
    def clearup(cls):
        cls.manager.shutdown()
        cls._clearup = True

    @cached_class_property
    def deploy_config(self) -> "DeployConfig":
        """
        Returns:
            DeployConfig：
        """
        from module.webui.config import DeployConfig

        return DeployConfig()

    @cached_class_property
    def config_updater(self) -> "ConfigUpdater":
        """
        Returns:
            ConfigUpdater：
        """
        from module.config.config_updater import ConfigUpdater

        return ConfigUpdater()

```

`module/webui/translate.py`:

```py
# This module is a ton of shit
# you'd better close right now
from pywebio.input import (actions, checkbox, input, input_group, input_update,
                           select)
from pywebio.output import put_buttons, put_markdown
from pywebio.session import defer_call, hold, run_js, set_env

import module.webui.lang as lang
from module.config.utils import (LANGUAGES, deep_get, deep_iter, deep_set,
                                 filepath_i18n, read_file, write_file)


def translate():
    """
        Translate Alas
    """
    set_env(output_animation=False)
    run_js(r"""$('head').append('<style>footer {display: none}</style>')""")

    put_markdown("""
        # Translate
        You can submit(Next) by press `Enter`.
    """)

    dict_lang = {
        "zh-CN": read_file(filepath_i18n('zh-CN')),
        "zh-TW": read_file(filepath_i18n('zh-TW')),
        "en-US": read_file(filepath_i18n('en-US')),
        "ja-JP": read_file(filepath_i18n('ja-JP')),
    }
    modified = {
        "zh-CN": {},
        "zh-TW": {},
        "en-US": {},
        "ja-JP": {},
    }

    list_path = []  # Menu.Task.name
    list_group = []  # Menu
    list_arg = []  # Task
    list_key = []  # name
    for L, _ in deep_iter(dict_lang['zh-CN'], depth=3):
        list_path.append('.'.join(L))
        list_group.append(L[0])
        list_arg.append(L[1])
        list_key.append(L[2])
    total = len(list_path)

    class V:
        lang = lang.LANG
        untranslated_only = False
        clear = False

        idx = -1
        group = ''
        group_idx = 0
        groups = list(dict_lang['zh-CN'].keys())
        arg = ''
        arg_idx = 0
        args = []
        key = ''
        key_idx = 0
        keys = []

    def update_var(group=None, arg=None, key=None):
        if group:
            V.group = group
            V.idx = list_group.index(group)
            V.group_idx = V.idx
            V.arg = list_arg[V.idx]
            V.arg_idx = V.idx
            V.args = list(dict_lang["zh-CN"][V.group].keys())
            V.key = list_key[V.idx]
            V.key_idx = V.idx
            V.keys = list(dict_lang["zh-CN"][V.group][V.arg].keys())
        elif arg:
            V.arg = arg
            V.idx = list_arg.index(arg, V.group_idx)
            V.arg_idx = V.idx
            V.args = list(dict_lang["zh-CN"][V.group].keys())
            V.key = list_key[V.idx]
            V.key_idx = V.idx
            V.keys = list(dict_lang["zh-CN"][V.group][V.arg].keys())
        elif key:
            V.key = key
            V.idx = list_key.index(key, V.arg_idx)
            V.key_idx = V.idx
            V.keys = list(dict_lang["zh-CN"][V.group][V.arg].keys())

        update_form()

    def next_key():
        if V.idx + 1 > total:
            V.idx = -1

        V.idx += 1

        if V.untranslated_only:
            while True:
                # print(V.idx)
                key = deep_get(dict_lang[V.lang], list_path[V.idx])
                if list_path[V.idx] == key or list_path[V.idx].split('.')[2] == key:
                    break
                else:
                    V.idx += 1
                if V.idx + 1 > total:
                    V.idx = 0
                    break

        (V.group, V.arg, V.key) = tuple(list_path[V.idx].split('.'))
        V.group_idx = list_group.index(V.group)
        V.arg_idx = list_arg.index(V.arg, V.group_idx)
        V.args = list(dict_lang["zh-CN"][V.group].keys())
        V.key_idx = list_key.index(V.key, V.arg_idx)
        V.keys = list(dict_lang["zh-CN"][V.group][V.arg].keys())

    def update_form():
        input_update('arg', options=V.args, value=V.arg)
        input_update('key', options=V.keys, value=V.key)
        for L in LANGUAGES:
            input_update(L, value=deep_get(
                dict_lang[L], f'{V.group}.{V.arg}.{V.key}', 'Key not found!'))

        old = deep_get(dict_lang[V.lang],
                       f'{V.group}.{V.arg}.{V.key}', 'Key not found!')
        input_update(V.lang,
                     value=None if V.clear else old,
                     help_text=f'{V.group}.{V.arg}.{V.key}',
                     placeholder=old,
                     )

    def get_inputs():
        out = []
        old = deep_get(dict_lang[V.lang],
                       f'{V.group}.{V.arg}.{V.key}', 'Key not found!')
        out.append(
            input(
                name=V.lang,
                label=V.lang,
                value=None if V.clear else old,
                help_text=f'{V.group}.{V.arg}.{V.key}',
                placeholder=old,
            )
        )
        out.append(
            select(name='group', label='Group', options=V.groups, value=V.group,
                   onchange=lambda g: update_var(group=g), required=True)
        )
        out.append(
            select(name='arg', label='Arg', options=V.args, value=V.arg,
                   onchange=lambda a: update_var(arg=a), required=True)
        )
        out.append(
            select(name='key', label='Key', options=V.keys, value=V.key,
                   onchange=lambda k: update_var(key=k), required=True)
        )
        _LANGUAGES = LANGUAGES.copy()
        _LANGUAGES.remove(V.lang)
        for L in _LANGUAGES:
            out.append(
                input(name=L, label=L, readonly=True, value=deep_get(
                    dict_lang[L], f'{V.group}.{V.arg}.{V.key}', 'Key not found!'))
            )
        out.append(
            actions(name='action', buttons=[
                {"label": "Next", "value": 'Next',
                    "type": "submit", "color": "success"},
                {"label": "Next without save", "value": 'Skip',
                    "type": "submit", "color": "secondary"},
                {"label": "Submit", "value": "Submit",
                    "type": "submit", "color": "primary"},
                {"label": "Quit and save", "type": "cancel", "color": "secondary"},
            ])
        )

        return out

    def save():
        for LANG in LANGUAGES:
            d = read_file(filepath_i18n(LANG))
            for k in modified[LANG].keys():
                deep_set(d, k, modified[LANG][k])
            write_file(filepath_i18n(LANG), d)
    defer_call(save)

    def loop():
        while True:
            data = input_group(inputs=get_inputs())
            if data is None:
                save()
                break

            if data['action'] == 'Next':

                modified[V.lang][f'{V.group}.{V.arg}.{V.key}'] = data[V.lang].replace(
                    "\\n", "\n")
                deep_set(dict_lang[V.lang], f'{V.group}.{V.arg}.{V.key}', data[V.lang].replace(
                    "\\n", "\n"))
                next_key()
            if data['action'] == 'Skip':
                next_key()
            elif data['action'] == 'Submit':

                modified[V.lang][f'{V.group}.{V.arg}.{V.key}'] = data[V.lang].replace(
                    "\\n", "\n")
                deep_set(dict_lang[V.lang], f'{V.group}.{V.arg}.{V.key}', data[V.lang].replace(
                    "\\n", "\n"))
                continue

    def setting():
        data = input_group(inputs=[
            select(name='language', label='Language',
                   options=LANGUAGES, value=V.lang, required=True),
            checkbox(name='check', label='Other settings', options=[
                {"label": 'Button [Next] only shows untranslated key',
                    'value': 'untranslated', 'selected': V.untranslated_only},
                {"label": 'Do not fill input with old value (only effect the language you selected)',
                 "value": "clear", "selected": V.clear}
            ])
        ])
        V.lang = data['language']
        V.untranslated_only = True if 'untranslated' in data['check'] else False
        V.clear = True if 'clear' in data['check'] else False

    put_buttons([
        {"label": "Start", "value": "start"},
        {"label": "Setting", "value": "setting"}
    ], onclick=[loop, setting])
    next_key()
    setting()
    hold()

```

`module/webui/updater.py`:

```py
import datetime
import subprocess
import threading
import time
from typing import Generator, List, Tuple

import requests
from deploy.Windows.config import ExecutionError
from deploy.Windows.git import GitManager
from deploy.Windows.pip import PipManager
from deploy.Windows.utils import DEPLOY_CONFIG
from module.base.retry import retry
from module.logger import logger
from module.webui.config import DeployConfig
from module.webui.process_manager import ProcessManager
from module.webui.setting import State
from module.webui.utils import TaskHandler, get_next_time


class Updater(DeployConfig, GitManager, PipManager):
    def __init__(self, file=DEPLOY_CONFIG):
        super().__init__(file=file)
        self.state = 0
        self.event: threading.Event = None

    @property
    def delay(self):
        self.read()
        return int(self.CheckUpdateInterval) * 60

    @property
    def schedule_time(self):
        self.read()
        t = self.AutoRestartTime
        if t is not None:
            return datetime.time.fromisoformat(t)
        else:
            return None

    def execute_output(self, command) -> str:
        command = command.replace(r"\\", "/").replace("\\", "/").replace('"', '"')
        log = subprocess.run(
            command, capture_output=True, text=True, encoding="utf8", shell=True
        ).stdout
        return log

    def get_commit(self, revision="", n=1, short_sha1=False) -> Tuple:
        """
        Return:
            (sha1, author, isotime, message,)
        """
        ph = "h" if short_sha1 else "H"

        log = self.execute_output(
            f'"{self.git}" log {revision} --pretty=format:"%{ph}---%an---%ad---%s" --date=iso -{n}'
        )

        if not log:
            return None, None, None, None

        logs = log.split("\n")
        logs = list(map(lambda log: tuple(log.split("---")), logs))

        if n == 1:
            return logs[0]
        else:
            return logs

    def _check_update(self) -> bool:
        self.state = "checking"

        if State.deploy_config.GitOverCdn:
            if self.goc_client.is_uptodate():
                logger.info(f"No update")
                return False
            else:
                logger.info(f"New update available")
                return True

        source = "origin"
        for _ in range(3):
            if self.execute(
                f'"{self.git}" fetch {source} {self.Branch}', allow_failure=True
            ):
                break
        else:
            logger.warning("Git fetch failed")
            return False

        log = self.execute_output(
            f'"{self.git}" log --not --remotes={source}/* -1 --oneline'
        )
        if log:
            logger.info(
                f"Cannot find local commit {log.split()[0]} in upstream, skip update"
            )
            return False

        sha1, _, _, message = self.get_commit(f"..{source}/{self.Branch}")

        if sha1:
            logger.info(f"New update available")
            logger.info(f"{sha1[:8]} - {message}")
            return True
        else:
            logger.info(f"No update")
            return False

    def _check_update_(self) -> bool:
        """
        Deprecated
        """
        self.state = "checking"
        r = self.Repository.split("/")
        owner = r[3]
        repo = r[4]
        if "gitee" in r[2]:
            base = "https://gitee.com/api/v5/repos/"
            headers = {}
            token = self.config["ApiToken"]
            if token:
                para = {"access_token": token}
        else:
            base = "https://api.github.com/repos/"
            headers = {"Accept": "application/vnd.github.v3.sha"}
            para = {}
            token = self.config["ApiToken"]
            if token:
                headers["Authorization"] = "token " + token

        try:
            list_commit = requests.get(
                base + f"{owner}/{repo}/branches/{self.Branch}",
                headers=headers,
                params=para,
            )
        except Exception as e:
            logger.exception(e)
            logger.warning("Check update failed")
            return 0

        if list_commit.status_code != 200:
            logger.warning(f"Check update failed, code {list_commit.status_code}")
            return 0
        try:
            sha = list_commit.json()["commit"]["sha"]
        except Exception as e:
            logger.exception(e)
            logger.warning("Check update failed when parsing return json")
            return 0

        local_sha, _, _, _ = self._get_local_commit()

        if sha == local_sha:
            logger.info("No update")
            return 0

        try:
            get_commit = requests.get(
                base + f"{owner}/{repo}/commits/" + local_sha,
                headers=headers,
                params=para,
            )
        except Exception as e:
            logger.exception(e)
            logger.warning("Check update failed")
            return 0

        if get_commit.status_code != 200:
            # for develops
            logger.info(
                f"Cannot find local commit {local_sha[:8]} in upstream, skip update"
            )
            return 0

        logger.info(f"Update {sha[:8]} available")
        return 1

    def check_update(self):
        if self.state in (0, "failed", "finish"):
            self.state = self._check_update()

    @retry(ExecutionError, tries=3, delay=5, logger=None)
    def git_install(self):
        return super().git_install()

    @retry(ExecutionError, tries=3, delay=5, logger=None)
    def pip_install(self):
        return super().pip_install()

    def update(self):
        logger.hr("Run update")
        try:
            self.git_install()
            self.pip_install()
        except ExecutionError:
            return False
        return True

    def run_update(self):
        if self.state not in ("failed", 0, 1):
            return
        self._start_update()

    def _start_update(self):
        self.state = "start"
        instances = ProcessManager.running_instances()
        names = []
        for alas in instances:
            names.append(alas.config_name + "\n")

        logger.info("Waiting all running alas finish.")
        self._wait_update(instances, names)

    def _wait_update(self, instances: List[ProcessManager], names):
        if self.state == "cancel":
            self.state = 1
        self.state = "wait"
        self.event.set()
        _instances = instances.copy()
        start_time = time.time()
        while _instances:
            for alas in _instances:
                if not alas.alive:
                    _instances.remove(alas)
                    logger.info(f"Alas [{alas.config_name}] stopped")
                    logger.info(f"Remains: {[alas.config_name for alas in _instances]}")
            if self.state == "cancel":
                self.state = 1
                self.event.clear()
                ProcessManager.restart_processes(instances, self.event)
                return
            time.sleep(0.25)
            if time.time() - start_time > 60 * 10:
                logger.warning("Waiting alas shutdown timeout, force kill")
                for alas in _instances:
                    alas.stop()
                break
        self._run_update(instances, names)

    def _run_update(self, instances, names):
        self.state = "run update"
        logger.info("All alas stopped, start updating")

        if self.update():
            if State.restart_event is not None:
                self.state = "reload"
                with open("./config/reloadalas", mode="w") as f:
                    f.writelines(names)
                from module.webui.app import clearup

                self._trigger_reload(2)
                clearup()
            else:
                self.state = "finish"
        else:
            self.state = "failed"
            logger.warning("Update failed")
            self.event.clear()
            ProcessManager.restart_processes(instances, self.event)
            return False

    @staticmethod
    def _trigger_reload(delay=2):
        def trigger():
            # with open("./config/reloadflag", mode="w"):
            #     # app ended here and uvicorn will restart whole app
            #     pass
            State.restart_event.set()

        timer = threading.Timer(delay, trigger)
        timer.start()

    def schedule_update(self) -> Generator:
        th: TaskHandler
        th = yield
        if self.schedule_time is None:
            th.remove_current_task()
            yield
        th._task.delay = get_next_time(self.schedule_time)
        yield
        while True:
            self.check_update()
            if self.state != 1:
                th._task.delay = get_next_time(self.schedule_time)
                yield
                continue
            if State.restart_event is None:
                yield
                continue
            if not self.run_update():
                self.state = "failed"
            th._task.delay = get_next_time(self.schedule_time)
            yield

    def cancel(self):
        self.state = "cancel"


updater = Updater()

if __name__ == "__main__":
    pass
    # if updater.check_update():
    updater.update()

```

`module/webui/utils.py`:

```py
import datetime
import operator
import re
import sys
import threading
import time
import traceback
from queue import Queue
from typing import Callable, Generator, List

import pywebio
from module.config.utils import deep_iter
from module.logger import logger
from module.webui.setting import State
from pywebio.input import PASSWORD, input
from pywebio.output import PopupSize, popup, put_html, toast
from pywebio.session import eval_js
from pywebio.session import info as session_info
from pywebio.session import register_thread, run_js
from rich.console import Console, ConsoleOptions
from rich.terminal_theme import TerminalTheme


RE_DATETIME = (
    r"\d{4}\-(0\d|1[0-2])\-([0-2]\d|[3][0-1]) "
    r"([0-1]\d|[2][0-3]):([0-5]\d):([0-5]\d)"
)


TRACEBACK_CODE_FORMAT = """\
<code class="rich-traceback">
    <pre class="rich-traceback-code">{code}</pre>
</code>
"""

LOG_CODE_FORMAT = "{code}"

DARK_TERMINAL_THEME = TerminalTheme(
    (30, 30, 30),  # Background
    (204, 204, 204),  # Foreground
    [
        (0, 0, 0),  # Black
        (205, 49, 49),  # Red
        (13, 188, 121),  # Green
        (229, 229, 16),  # Yellow
        (36, 114, 200),  # Blue
        (188, 63, 188),  # Purple / Magenta
        (17, 168, 205),  # Cyan
        (229, 229, 229),  # White
    ],
    [  # Bright
        (102, 102, 102),  # Black
        (241, 76, 76),  # Red
        (35, 209, 139),  # Green
        (245, 245, 67),  # Yellow
        (59, 142, 234),  # Blue
        (214, 112, 214),  # Purple / Magenta
        (41, 184, 219),  # Cyan
        (229, 229, 229),  # White
    ],
)

LIGHT_TERMINAL_THEME = TerminalTheme(
    (255, 255, 255),  # Background
    (97, 97, 97),  # Foreground
    [
        (0, 0, 0),  # Black
        (205, 49, 49),  # Red
        (0, 188, 0),  # Green
        (148, 152, 0),  # Yellow
        (4, 81, 165),  # Blue
        (188, 5, 188),  # Purple / Magenta
        (5, 152, 188),  # Cyan
        (85, 85, 85),  # White
    ],
    [  # Bright
        (102, 102, 102),  # Black
        (205, 49, 49),  # Red
        (20, 206, 20),  # Green
        (181, 186, 0),  # Yellow
        (4, 81, 165),  # Blue
        (188, 5, 188),  # Purple / Magenta
        (5, 152, 188),  # Cyan
        (165, 165, 165),  # White
    ],
)


class QueueHandler:
    def __init__(self, q: Queue) -> None:
        self.queue = q

    def write(self, s: str):
        self.queue.put(s)


class Task:
    def __init__(
        self, g: Generator, delay: float, next_run: float = None, name: str = None
    ) -> None:
        self.g = g
        g.send(None)
        self.delay = delay
        self.next_run = next_run if next_run else time.time()
        self.name = name if name is not None else self.g.__name__

    def __str__(self) -> str:
        return f"<{self.name} (delay={self.delay})>"

    def __next__(self) -> None:
        return next(self.g)

    def send(self, obj) -> None:
        return self.g.send(obj)

    __repr__ = __str__


class TaskHandler:
    def __init__(self) -> None:
        # List of background running task
        self.tasks: List[Task] = []
        # List of task name to be removed
        self.pending_remove_tasks: List[Task] = []
        # Running task
        self._task = None
        # Task running thread
        self._thread: threading.Thread = None
        self._alive = False
        self._lock = threading.Lock()

    def add(self, func, delay: float, pending_delete: bool = False) -> None:
        """
        Add a task running background.
        Another way of `self.add_task()`.
        func: Callable or Generator
        """
        if isinstance(func, Callable):
            g = get_generator(func)
        elif isinstance(func, Generator):
            g = func
        self.add_task(Task(g, delay), pending_delete=pending_delete)

    def add_task(self, task: Task, pending_delete: bool = False) -> None:
        """
        Add a task running background.
        """
        if task in self.tasks:
            logger.warning(f"Task {task} already in tasks list.")
            return
        logger.info(f"Add task {task}")
        with self._lock:
            self.tasks.append(task)
        if pending_delete:
            self.pending_remove_tasks.append(task)

    def _remove_task(self, task: Task) -> None:
        if task in self.tasks:
            self.tasks.remove(task)
            logger.info(f"Task {task} removed.")
        else:
            logger.warning(
                f"Failed to remove task {task}. Current tasks list: {self.tasks}"
            )

    def remove_task(self, task: Task, nowait: bool = False) -> None:
        """
        Remove a task in `self.tasks`.
        Args:
            task:
            nowait: if True, remove it right now,
                    otherwise remove when call `self.remove_pending_task`
        """
        if nowait:
            with self._lock:
                self._remove_task(task)
        else:
            self.pending_remove_tasks.append(task)

    def remove_pending_task(self) -> None:
        """
        Remove all pending remove tasks.
        """
        with self._lock:
            for task in self.pending_remove_tasks:
                self._remove_task(task)
            self.pending_remove_tasks = []

    def remove_current_task(self) -> None:
        self.remove_task(self._task, nowait=True)

    def get_task(self, name) -> Task:
        with self._lock:
            for task in self.tasks:
                if task.name == name:
                    return task
            return None

    def loop(self) -> None:
        """
        Start task loop.
        You **should** run this function in an individual thread.
        """
        self._alive = True
        while self._alive:
            if self.tasks:
                with self._lock:
                    self.tasks.sort(key=operator.attrgetter("next_run"))
                    task = self.tasks[0]
                if task.next_run < time.time():
                    start_time = time.time()
                    try:
                        self._task = task
                        # logger.debug(f'Start task {task.g.__name__}')
                        task.send(self)
                        # logger.debug(f'End task {task.g.__name__}')
                    except Exception as e:
                        logger.exception(e)
                        self.remove_task(task, nowait=True)
                    finally:
                        self._task = None
                    end_time = time.time()
                    task.next_run += task.delay
                    with self._lock:
                        for task in self.tasks:
                            task.next_run += end_time - start_time
                else:
                    time.sleep(0.05)
            else:
                time.sleep(0.5)
        logger.info("End of task handler loop")

    def _get_thread(self) -> threading.Thread:
        thread = threading.Thread(target=self.loop, daemon=True)
        return thread

    def start(self) -> None:
        """
        Start task handler.
        """
        logger.info("Start task handler")
        if self._thread is not None and self._thread.is_alive():
            logger.warning("Task handler already running!")
            return
        self._thread = self._get_thread()
        self._thread.start()

    def stop(self) -> None:
        self.remove_pending_task()
        self._alive = False
        self._thread.join(timeout=2)
        if not self._thread.is_alive():
            logger.info("Finish task handler")
        else:
            logger.warning("Task handler does not stop within 2 seconds")


class WebIOTaskHandler(TaskHandler):
    def _get_thread(self) -> threading.Thread:
        thread = super()._get_thread()
        register_thread(thread)
        return thread


class Switch:
    def __init__(self, status, get_state, name=None):
        """
        Args:
            status
                (dict):A dict describes each state.
                    {
                        0: {
                            'func': (Callable)
                        },
                        1: {
                            'func'
                            'args': (Optional, tuple)
                            'kwargs': (Optional, dict)
                        },
                        2: [
                            func1,
                            {
                                'func': func2
                                'args': args2
                            }
                        ]
                        -1: []
                    }
                (Callable):current state will pass into this function
                    lambda state: do_update(state=state)
            get_state:
                (Callable):
                    return current state
                (Generator):
                    yield current state, do nothing when state not in status
            name:
        """
        self._lock = threading.Lock()
        self.name = name
        self.status = status
        self.get_state = get_state
        if isinstance(get_state, Generator):
            self._generator = get_state
        elif isinstance(get_state, Callable):
            self._generator = self._get_state()

    @staticmethod
    def get_state():
        pass

    def _get_state(self):
        """
        Predefined generator when `get_state` is an callable
        Customize it if you have multiple criteria on state
        """
        _status = self.get_state()
        yield _status
        while True:
            status = self.get_state()
            if _status != status:
                _status = status
                yield _status
                continue
            yield -1

    def switch(self):
        with self._lock:
            r = next(self._generator)
        if callable(self.status):
            self.status(r)
        elif r in self.status:
            f = self.status[r]
            if isinstance(f, (dict, Callable)):
                f = [f]
            for d in f:
                if isinstance(d, Callable):
                    d = {"func": d}
                func = d["func"]
                args = d.get("args", tuple())
                kwargs = d.get("kwargs", dict())
                func(*args, **kwargs)

    def g(self) -> Generator:
        g = get_generator(self.switch)
        if self.name:
            name = self.name
        else:
            name = self.get_state.__name__
        g.__name__ = f"Switch_{name}_refresh"
        return g


def get_generator(func: Callable):
    def _g():
        yield
        while True:
            yield func()

    g = _g()
    g.__name__ = func.__name__
    return g


def filepath_css(filename):
    return f"./assets/gui/css/{filename}.css"


def filepath_icon(filename):
    return f"./assets/gui/icon/{filename}.svg"


def add_css(filepath):
    with open(filepath, "r") as f:
        css = f.read().replace("\n", "")
        run_js(f"""$('head').append('<style>{css}</style>')""")


def _read(path):
    with open(path, "r") as f:
        return f.read()


class Icon:
    """
    Storage html of icon.
    """

    ALAS = _read(filepath_icon("alas"))
    SETTING = _read(filepath_icon("setting"))
    RUN = _read(filepath_icon("run"))
    DEVELOP = _read(filepath_icon("develop"))
    ADD = _read(filepath_icon("add"))


str2type = {
    "str": str,
    "float": float,
    "int": int,
    "bool": bool,
    "ignore": lambda x: x,
}


def parse_pin_value(val, valuetype: str = None):
    """
    input, textarea return str
    select return its option (str or int)
    checkbox return [] or [True] (define in put_checkbox_)
    """
    if isinstance(val, list):
        if len(val) == 0:
            return False
        else:
            return True
    elif valuetype:
        return str2type[valuetype](val)
    elif isinstance(val, (int, float)):
        return val
    else:
        try:
            v = float(val)
        except ValueError:
            return val
        if v.is_integer():
            return int(v)
        else:
            return v


def login(password):
    if get_localstorage("password") == str(password):
        return True
    pwd = input(label="Please login below.", type=PASSWORD, placeholder="PASSWORD")
    if str(pwd) == str(password):
        set_localstorage("password", str(pwd))
        return True
    else:
        toast("Wrong password!", color="error")
        return False


def get_window_visibility_state():
    ret = eval_js("document.visibilityState")
    return False if ret == "hidden" else True


# https://pywebio.readthedocs.io/zh_CN/latest/cookbook.html#cookie-and-localstorage-manipulation
def set_localstorage(key, value):
    return run_js("localStorage.setItem(key, value)", key=key, value=value)


def get_localstorage(key):
    return eval_js("localStorage.getItem(key)", key=key)


def re_fullmatch(pattern, string):
    if pattern == "datetime":
        pattern = RE_DATETIME
    # elif:
    return re.fullmatch(pattern=pattern, string=string)


def get_next_time(t: datetime.time):
    now = datetime.datetime.today().time()
    second = (
        (t.hour - now.hour) * 3600
        + (t.minute - now.minute) * 60
        + (t.second - now.second)
    )
    if second < 0:
        second += 86400
    return second


def on_task_exception(self):
    logger.exception("An internal error occurred in the application")
    toast_msg = (
        "应用发生内部错误"
        if "zh" in session_info.user_language
        else "An internal error occurred in the application"
    )

    e_type, e_value, e_tb = sys.exc_info()
    lines = traceback.format_exception(e_type, e_value, e_tb)
    traceback_msg = "".join(lines)

    traceback_console = Console(
        color_system="truecolor", tab_size=2, record=True, width=90
    )
    with traceback_console.capture():  # prevent logging to stdout again
        traceback_console.print_exception(
            word_wrap=True, extra_lines=1, show_locals=True
        )

    if State.theme == "dark":
        theme = DARK_TERMINAL_THEME
    else:
        theme = LIGHT_TERMINAL_THEME

    html = traceback_console.export_html(
        theme=theme, code_format=TRACEBACK_CODE_FORMAT, inline_styles=True
    )
    try:
        popup(title=toast_msg, content=put_html(html), size=PopupSize.LARGE)
        run_js(
            "console.error(traceback_msg)",
            traceback_msg="Internal Server Error\n" + traceback_msg,
        )
    except Exception:
        pass


# Monkey patch
pywebio.session.base.Session.on_task_exception = on_task_exception


def raise_exception(x=3):
    """
    For testing purpose
    """
    if x > 0:
        raise_exception(x - 1)
    else:
        raise Exception("quq")


def get_alas_config_listen_path(args):
    for path, d in deep_iter(args, depth=3):
        if d.get("display") in ["readonly", "hide"]:
            continue
        yield path


if __name__ == "__main__":

    def gen(x):
        n = 0
        while True:
            n += x
            print(n)
            yield n

    th = TaskHandler()
    th.start()

    t1 = Task(gen(1), delay=1)
    t2 = Task(gen(-2), delay=3)

    th.add_task(t1)
    th.add_task(t2)

    time.sleep(5)
    th.remove_task(t2, nowait=True)
    time.sleep(5)
    th.stop()

```

`module/webui/widgets.py`:

```py
import copy
import json
import random
import string
from typing import TYPE_CHECKING, Any, Callable, Dict, Generator, List, Optional, Union

from pywebio.exceptions import SessionException
from pywebio.io_ctrl import Output
from pywebio.output import *
from pywebio.session import eval_js, local, run_js
from rich.console import ConsoleRenderable

from module.logger import WEB_THEME, Highlighter, HTMLConsole
from module.webui.lang import t
from module.webui.pin import put_checkbox, put_input, put_select, put_textarea
from module.webui.process_manager import ProcessManager
from module.webui.setting import State
from module.webui.utils import (
    DARK_TERMINAL_THEME,
    LIGHT_TERMINAL_THEME,
    LOG_CODE_FORMAT,
    Switch,
)

if TYPE_CHECKING:
    from module.webui.app import AlasGUI


class ScrollableCode:
    """
    https://github.com/pywebio/PyWebIO/discussions/21
    Deprecated
    """

    def __init__(self, keep_bottom: bool = True) -> None:
        self.keep_bottom = keep_bottom

        self.id = "".join(random.choice(string.ascii_letters) for _ in range(10))
        self.html = (
            """<pre id="%s" class="container-log"><code style="white-space:break-spaces;"></code></pre>"""
            % self.id
        )

    def output(self):
        # .style("display: grid; overflow-y: auto;")
        return put_html(self.html)

    def append(self, text: str) -> None:
        if text:
            run_js(
                """$("#{dom_id}>code").append(text);
            """.format(
                    dom_id=self.id
                ),
                text=str(text),
            )
            if self.keep_bottom:
                self.scroll()

    def scroll(self) -> None:
        run_js(
            r"""$("\#{dom_id}").animate({{scrollTop: $("\#{dom_id}").prop("scrollHeight")}}, 0);
        """.format(
                dom_id=self.id
            )
        )

    def reset(self) -> None:
        run_js(r"""$("\#{dom_id}>code").empty();""".format(dom_id=self.id))

    def set_scroll(self, b: bool) -> None:
        # use for lambda callback function
        self.keep_bottom = b


class RichLog:
    def __init__(self, scope, font_width="0.559") -> None:
        self.scope = scope
        self.font_width = font_width
        self.console = HTMLConsole(
            force_terminal=False,
            force_interactive=False,
            width=80,
            color_system="truecolor",
            markup=False,
            record=True,
            safe_box=False,
            highlighter=Highlighter(),
            theme=WEB_THEME,
        )
        # self.callback_id = output_register_callback(
        #     self._callback_set_width, serial_mode=True)
        # self._callback_thread = None
        # self._width = 80
        self.keep_bottom = True
        if State.theme == "dark":
            self.terminal_theme = DARK_TERMINAL_THEME
        else:
            self.terminal_theme = LIGHT_TERMINAL_THEME

    def render(self, renderable: ConsoleRenderable) -> str:
        with self.console.capture():
            self.console.print(renderable)

        html = self.console.export_html(
            theme=self.terminal_theme,
            clear=True,
            code_format=LOG_CODE_FORMAT,
            inline_styles=True,
        )
        # print(html)
        return html

    def extend(self, text):
        if text:
            run_js(
                """$("#pywebio-scope-{scope}>div").append(text);
            """.format(
                    scope=self.scope
                ),
                text=str(text),
            )
            if self.keep_bottom:
                self.scroll()

    def reset(self):
        run_js(f"""$("#pywebio-scope-{self.scope}>div").empty();""")

    def scroll(self) -> None:
        run_js(
            """$("#pywebio-scope-{scope}").scrollTop($("#pywebio-scope-{scope}").prop("scrollHeight"));
        """.format(
                scope=self.scope
            )
        )

    def set_scroll(self, b: bool) -> None:
        # use for lambda callback function
        self.keep_bottom = b

    def get_width(self):
        js = """
        let canvas = document.createElement('canvas');
        canvas.style.position = "absolute";
        let ctx = canvas.getContext('2d');
        document.body.appendChild(canvas);
        ctx.font = `16px Menlo, consolas, DejaVu Sans Mono, Courier New, monospace`;
        document.body.removeChild(canvas);
        let text = ctx.measureText('0');
        ctx.fillText('0', 50, 50);

        ($('#pywebio-scope-{scope}').width()-16)/\
        $('#pywebio-scope-{scope}').css('font-size').slice(0, -2)/text.width*16;\
        """.format(
            scope=self.scope
        )
        width = eval_js(js)
        return 80 if width is None else 128 if width > 128 else int(width)

    # def _register_resize_callback(self):
    #     js = """
    #     WebIO.pushData(
    #         ($('#pywebio-scope-log').width()-16)/$('#pywebio-scope-log').css('font-size').slice(0, -2)/0.55,
    #         {callback_id}
    #     )""".format(callback_id=self.callback_id)

    # def _callback_set_width(self, width):
    #     self._width = width
    #     if self._callback_thread is None:
    #         self._callback_thread = Thread(target=self._callback_width_checker)
    #         self._callback_thread.start()

    # def _callback_width_checker(self):
    #     last_modify = time.time()
    #     _width = self._width
    #     while True:
    #         if time.time() - last_modify > 1:
    #             break
    #         if self._width == _width:
    #             time.sleep(0.1)
    #             continue
    #         else:
    #             _width = self._width
    #             last_modify = time.time()

    #     self._callback_thread = None
    #     self.console.width = int(_width)

    def put_log(self, pm: ProcessManager) -> Generator:
        yield
        try:
            while True:
                last_idx = len(pm.renderables)
                html = "".join(map(self.render, pm.renderables[:]))
                self.reset()
                self.extend(html)
                counter = last_idx
                while counter < pm.renderables_max_length * 2:
                    yield
                    idx = len(pm.renderables)
                    if idx < last_idx:
                        last_idx -= pm.renderables_reduce_length
                    if idx != last_idx:
                        html = "".join(map(self.render, pm.renderables[last_idx:idx]))
                        self.extend(html)
                        counter += idx - last_idx
                        last_idx = idx
        except SessionException:
            pass


class BinarySwitchButton(Switch):
    def __init__(
        self,
        get_state,
        label_on,
        label_off,
        onclick_on,
        onclick_off,
        scope,
        color_on="success",
        color_off="secondary",
    ):
        """
        Args:
            get_state:
                (Callable):
                    return True to represent state `ON`
                    return False tp represent state `OFF`
                (Generator):
                    yield True to change btn state to `ON`
                    yield False to change btn state to `OFF`
            label_on: label to show when state is `ON`
            label_off:
            onclick_on: function to call when state is `ON`
            onclick_off:
            color_on: button color when state is `ON`
            color_off:
            scope: scope for button, just for button **only**
        """
        self.scope = scope
        status = {
            0: {
                "func": self.update_button,
                "args": (
                    label_off,
                    onclick_off,
                    color_off,
                ),
            },
            1: {
                "func": self.update_button,
                "args": (
                    label_on,
                    onclick_on,
                    color_on,
                ),
            },
        }
        super().__init__(status=status, get_state=get_state, name=scope)

    def update_button(self, label, onclick, color):
        clear(self.scope)
        put_button(label=label, onclick=onclick, color=color, scope=self.scope)


# aside buttons


def put_icon_buttons(
    icon_html: str,
    buttons: List[Dict[str, str]],
    onclick: Union[List[Callable[[], None]], Callable[[], None]],
) -> Output:
    value = buttons[0]["value"]
    return put_column(
        [
            output(put_html(icon_html)).style(
                "z-index: 1; margin-left: 8px;text-align: center"
            ),
            put_buttons(buttons, onclick).style(f"z-index: 2; --aside-{value}--;"),
        ],
        size="0",
    )


def put_none() -> Output:
    return put_html("<div></div>")


T_Output_Kwargs = Dict[str, Union[str, Dict[str, Any]]]


def get_title_help(kwargs: T_Output_Kwargs) -> Output:
    title: str = kwargs.get("title")
    help_text: str = kwargs.get("help")

    if help_text:
        res = put_column(
            [
                put_text(title).style("--arg-title--"),
                put_text(help_text).style("--arg-help--"),
            ],
            size="auto 1fr",
        )
    else:
        res = put_text(title).style("--arg-title--")

    return res


# args input widget
def put_arg_input(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    options: List = kwargs.get("options")
    if options is not None:
        kwargs.setdefault("datalist", options)

    return put_scope(
        f"arg_container-input-{name}",
        [
            get_title_help(kwargs),
            put_input(**kwargs).style("--input--"),
        ],
    )


def product_stored_row(kwargs: T_Output_Kwargs, key, value):
    kwargs = copy.copy(kwargs)
    kwargs["name"] += f'_{key}'
    kwargs["value"] = value
    return put_input(**kwargs).style("--input--")


def put_arg_stored(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    kwargs["disabled"] = True

    values = kwargs.pop("value", {})
    time_ = values.pop("time", "")

    rows = [product_stored_row(kwargs, key, value) for key, value in values.items() if value]
    if time_:
        rows += [product_stored_row(kwargs, "time", time_)]
    return put_scope(
        f"arg_container-stored-{name}",
        [
            get_title_help(kwargs),
            put_scope(
                f"arg_stored-stored-value-{name}",
                rows,
            )
        ]
    )


def put_arg_select(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    value: str = kwargs["value"]
    options: List[str] = kwargs["options"]
    options_label: List[str] = kwargs.pop("options_label", [])
    disabled: bool = kwargs.pop("disabled", False)
    _: str = kwargs.pop("invalid_feedback", None)

    if disabled:
        option = [{
            "label": next((opt_label for opt, opt_label in zip(options, options_label) if opt == value), value),
            "value": value,
            "selected": True,
        }]
    else:
        option = [{
            "label": opt_label,
            "value": opt,
            "select": opt == value,
        } for opt, opt_label in zip(options, options_label)]
    kwargs["options"] = option

    return put_scope(
        f"arg_container-select-{name}",
        [
            get_title_help(kwargs),
            put_select(**kwargs).style("--input--"),
        ],
    )


def put_arg_state(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    value: str = kwargs["value"]
    options: List[str] = kwargs["options"]
    options_label: List[str] = kwargs.pop("options_label", [])
    _: str = kwargs.pop("invalid_feedback", None)
    bold: bool = value in kwargs.pop("option_bold", [])
    light: bool = value in kwargs.pop("option_light", [])

    option = [{
        "label": next((opt_label for opt, opt_label in zip(options, options_label) if opt == value), value),
        "value": value,
        "selected": True,
    }]
    if bold:
        kwargs["class"] = "form-control state state-bold"
    elif light:
        kwargs["class"] = "form-control state state-light"
    else:
        kwargs["class"] = "form-control state"
    kwargs["options"] = option

    return put_scope(
        f"arg_container-select-{name}",
        [
            get_title_help(kwargs),
            put_select(**kwargs).style("--input--"),
        ],
    )


def put_arg_textarea(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    mode: str = kwargs.pop("mode", None)
    kwargs.setdefault(
        "code", {"lineWrapping": True, "lineNumbers": False, "mode": mode}
    )

    return put_scope(
        f"arg_contianer-textarea-{name}",
        [
            get_title_help(kwargs),
            put_textarea(**kwargs),
        ],
    )


def put_arg_checkbox(kwargs: T_Output_Kwargs) -> Output:
    # Not real checkbox, use as a switch (on/off)
    name: str = kwargs["name"]
    value: str = kwargs["value"]
    _: str = kwargs.pop("invalid_feedback", None)

    kwargs["options"] = [{"label": "", "value": True, "selected": value}]
    return put_scope(
        f"arg_container-checkbox-{name}",
        [
            get_title_help(kwargs),
            put_checkbox(**kwargs).style("text-align: center"),
        ],
    )


def put_arg_datetime(kwargs: T_Output_Kwargs) -> Output:
    name: str = kwargs["name"]
    return put_scope(
        f"arg_container-datetime-{name}",
        [
            get_title_help(kwargs),
            put_input(**kwargs).style("--input--"),
        ],
    )


def put_arg_storage(kwargs: T_Output_Kwargs) -> Optional[Output]:
    name: str = kwargs["name"]
    if kwargs["value"] == {}:
        return None

    kwargs["value"] = json.dumps(
        kwargs["value"], indent=2, ensure_ascii=False, sort_keys=False, default=str
    )
    kwargs.setdefault(
        "code", {"lineWrapping": True, "lineNumbers": False, "mode": "json"}
    )

    def clear_callback():
        alasgui: "AlasGUI" = local.gui
        alasgui.modified_config_queue.put(
            {"name": ".".join(name.split("_")), "value": {}}
        )
        # https://github.com/pywebio/PyWebIO/issues/459
        # pin[name] = "{}"

    return put_scope(
        f"arg_container-storage-{name}",
        [
            put_textarea(**kwargs),
            put_html(
                f'<button class="btn btn-outline-warning btn-block">{t("Gui.Text.Clear")}</button>'
            ).onclick(clear_callback),
        ],
    )


_widget_type_to_func: Dict[str, Callable] = {
    "input": put_arg_input,
    "lock": put_arg_input,
    "datetime": put_arg_input,  # TODO
    "select": put_arg_select,
    "textarea": put_arg_textarea,
    "checkbox": put_arg_checkbox,
    "storage": put_arg_storage,
    "state": put_arg_state,
    "stored": put_arg_stored,
}


def put_output(output_kwargs: T_Output_Kwargs) -> Optional[Output]:
    return _widget_type_to_func[output_kwargs["widget_type"]](output_kwargs)


def get_loading_style(shape: str, fill: bool) -> str:
    if fill:
        return f"--loading-{shape}-fill--"
    else:
        return f"--loading-{shape}--"


def put_loading_text(
    text: str,
    shape: str = "border",
    color: str = "dark",
    fill: bool = False,
    size: str = "auto 2px 1fr",
):
    loading_style = get_loading_style(shape=shape, fill=fill)
    return put_row(
        [
            put_loading(shape=shape, color=color).style(loading_style),
            None,
            put_text(text),
        ],
        size=size,
    )

```

`requirements-in.txt`:

```txt
# Image processing
numpy
scipy
pillow
opencv-python

# Device connection
adbutils
uiautomator2==2.16.17
uiautomator2cache==0.3.0.1
wrapt>=1.14.0
lz4
av==10.0.0
psutil==5.9.3

# Utils
rich
tqdm
jellyfish
pyyaml
inflection
prettytable==2.2.1
pydantic

# OCR
pponnxcr==2.0

# Webui
pywebio==1.6.2
starlette==0.14.2
uvicorn[standard]==0.17.6
aiofiles

# Game resources
srcmap==1.1.0

# For dev
# pip-tools
pynput

```

`requirements.txt`:

```txt
#
# This file is autogenerated by pip-compile with Python 3.10
# by the following command:
#
#    pip-compile --annotation-style=line --output-file=requirements.txt requirements-in.txt
#

adbutils==1.2.9           # via -r requirements-in.txt, uiautomator2
aiofiles==23.1.0          # via -r requirements-in.txt
anyio==3.6.2              # via watchgod
apkutils2==1.0.0          # via adbutils
asgiref==3.6.0            # via uvicorn
av==10.0.0                # via -r requirements-in.txt
cached-property==1.5.2    # via uiautomator2
certifi==2022.12.7        # via requests
charset-normalizer==3.1.0  # via requests
cigam==0.0.3              # via apkutils2
click==8.1.3              # via uvicorn
colorama==0.4.6           # via click, logzero, tqdm, uvicorn
coloredlogs==15.0.1       # via onnxruntime
decorator==5.1.1          # via retry
deprecated==1.2.13        # via uiautomator2
deprecation==2.1.0        # via adbutils
filelock==3.12.0          # via uiautomator2
flatbuffers==23.5.9       # via onnxruntime
h11==0.14.0               # via uvicorn
httptools==0.5.0          # via uvicorn
humanfriendly==10.0       # via coloredlogs
idna==3.4                 # via anyio, requests
inflection==0.5.1         # via -r requirements-in.txt
jellyfish==0.11.2         # via -r requirements-in.txt
logzero==1.7.0            # via uiautomator2
lxml==4.9.2               # via uiautomator2
lz4==4.3.2                # via -r requirements-in.txt
markdown-it-py==2.2.0     # via rich
mdurl==0.1.2              # via markdown-it-py
mpmath==1.3.0             # via sympy
numpy==1.24.3             # via -r requirements-in.txt, onnxruntime, opencv-python, pponnxcr, scipy, shapely
onnxruntime==1.14.1       # via pponnxcr
opencv-python==4.7.0.72   # via -r requirements-in.txt, pponnxcr
packaging==20.9           # via deprecation, onnxruntime, uiautomator2
pillow==9.5.0             # via -r requirements-in.txt, adbutils, uiautomator2
pponnxcr==2.0             # via -r requirements-in.txt
prettytable==2.2.1        # via -r requirements-in.txt
progress==1.6             # via uiautomator2
protobuf==4.23.0          # via onnxruntime
psutil==5.9.3             # via -r requirements-in.txt
py==1.11.0                # via retry
pyclipper==1.3.0.post4    # via pponnxcr
pydantic==1.10.7          # via -r requirements-in.txt
pyelftools==0.29          # via apkutils2
pygments==2.15.1          # via rich
pynput==1.7.6             # via -r requirements-in.txt
pyparsing==3.0.9          # via packaging
pyreadline3==3.4.1        # via humanfriendly
python-dotenv==1.0.0      # via uvicorn
pywebio==1.6.2            # via -r requirements-in.txt
pyyaml==6.0               # via -r requirements-in.txt, uvicorn
requests==2.30.0          # via adbutils, uiautomator2
retry==0.9.2              # via adbutils, uiautomator2
rich==13.3.5              # via -r requirements-in.txt
scipy==1.10.1             # via -r requirements-in.txt
shapely==2.0.1            # via pponnxcr
six==1.16.0               # via pynput, uiautomator2
sniffio==1.3.0            # via anyio
srcmap==1.1.0             # via -r requirements-in.txt
starlette==0.14.2         # via -r requirements-in.txt
sympy==1.12               # via onnxruntime
tornado==6.3.1            # via pywebio
tqdm==4.65.0              # via -r requirements-in.txt
typing-extensions==4.5.0  # via pydantic
ua-parser==0.16.1         # via user-agents
uiautomator2==2.16.17     # via -r requirements-in.txt
uiautomator2cache==0.3.0.1  # via -r requirements-in.txt
urllib3==2.0.2            # via requests
user-agents==2.2.0        # via pywebio
uvicorn[standard]==0.17.6  # via -r requirements-in.txt
watchgod==0.8.2           # via uvicorn
wcwidth==0.2.6            # via prettytable
websockets==11.0.3        # via uvicorn
whichcraft==0.6.1         # via adbutils, uiautomator2
wrapt==1.15.0             # via -r requirements-in.txt, deprecated
xmltodict==0.13.0         # via apkutils2

```

`src.py`:

```py
from module.alas import AzurLaneAutoScript
from module.logger import logger


class StarRailCopilot(AzurLaneAutoScript):
    def restart(self):
        from tasks.login.login import Login
        Login(self.config, device=self.device).app_restart()

    def start(self):
        from tasks.login.login import Login
        Login(self.config, device=self.device).app_start()

    def goto_main(self):
        from tasks.login.login import Login
        from tasks.base.ui import UI
        if self.device.app_is_running():
            logger.info('App is already running, goto main page')
            UI(self.config, device=self.device).ui_goto_main()
        else:
            logger.info('App is not running, start app and goto main page')
            Login(self.config, device=self.device).app_start()
            UI(self.config, device=self.device).ui_goto_main()

    def dungeon(self):
        from tasks.dungeon.dungeon import Dungeon
        Dungeon(config=self.config, device=self.device).run()

    def daily_quest(self):
        from tasks.daily.daily_quest import DailyQuestUI
        DailyQuestUI(config=self.config, device=self.device).run()

    def battle_pass(self):
        from tasks.battle_pass.battle_pass import BattlePassUI
        BattlePassUI(config=self.config, device=self.device).run()

    def assignment(self):
        from tasks.assignment.assignment import Assignment
        Assignment(config=self.config, device=self.device).run()


if __name__ == '__main__':
    src = StarRailCopilot('src')
    src.loop()

```

`tasks/assignment/assets/assets_assignment_claim.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CLAIM = ButtonWrapper(
    name='CLAIM',
    cn=Button(
        file='./assets/cn/assignment/claim/CLAIM.png',
        area=(1031, 652, 1101, 674),
        search=(1011, 632, 1121, 694),
        color=(169, 134, 66),
        button=(920, 644, 1210, 683),
    ),
)
CLOSE_REPORT = ButtonWrapper(
    name='CLOSE_REPORT',
    cn=Button(
        file='./assets/cn/assignment/claim/CLOSE_REPORT.png',
        area=(397, 598, 472, 623),
        search=(377, 578, 492, 643),
        color=(159, 157, 153),
        button=(290, 592, 579, 630),
    ),
)
OCR_ASSIGNMENT_REPORT_TIME = ButtonWrapper(
    name='OCR_ASSIGNMENT_REPORT_TIME',
    share=Button(
        file='./assets/share/assignment/claim/OCR_ASSIGNMENT_REPORT_TIME.png',
        area=(870, 222, 1002, 247),
        search=(850, 202, 1022, 267),
        color=(57, 57, 60),
        button=(870, 222, 1002, 247),
    ),
)
REDISPATCH = ButtonWrapper(
    name='REDISPATCH',
    cn=Button(
        file='./assets/cn/assignment/claim/REDISPATCH.png',
        area=(784, 598, 901, 622),
        search=(764, 578, 921, 642),
        color=(158, 157, 155),
        button=(700, 592, 987, 629),
    ),
)

```

`tasks/assignment/assets/assets_assignment_dispatch.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

ASSIGNMENT_START = ButtonWrapper(
    name='ASSIGNMENT_START',
    cn=Button(
        file='./assets/cn/assignment/dispatch/ASSIGNMENT_START.png',
        area=(581, 321, 699, 349),
        search=(561, 301, 719, 369),
        color=(93, 84, 66),
        button=(581, 321, 699, 349),
    ),
)
ASSIGNMENT_STARTED_CHECK = ButtonWrapper(
    name='ASSIGNMENT_STARTED_CHECK',
    share=Button(
        file='./assets/share/assignment/dispatch/ASSIGNMENT_STARTED_CHECK.png',
        area=(1174, 297, 1211, 514),
        search=(1154, 277, 1231, 534),
        color=(86, 81, 78),
        button=(1174, 297, 1211, 514),
    ),
)
CHARACTER_1 = ButtonWrapper(
    name='CHARACTER_1',
    share=Button(
        file='./assets/share/assignment/dispatch/CHARACTER_1.png',
        area=(116, 212, 206, 312),
        search=(96, 192, 226, 332),
        color=(149, 134, 123),
        button=(116, 212, 206, 312),
    ),
)
CHARACTER_1_SELECTED = ButtonWrapper(
    name='CHARACTER_1_SELECTED',
    share=Button(
        file='./assets/share/assignment/dispatch/CHARACTER_1_SELECTED.png',
        area=(114, 207, 134, 225),
        search=(94, 187, 154, 245),
        color=(192, 204, 193),
        button=(114, 207, 134, 225),
    ),
)
CHARACTER_2 = ButtonWrapper(
    name='CHARACTER_2',
    share=Button(
        file='./assets/share/assignment/dispatch/CHARACTER_2.png',
        area=(228, 211, 318, 311),
        search=(208, 191, 338, 331),
        color=(184, 161, 172),
        button=(228, 211, 318, 311),
    ),
)
CHARACTER_2_SELECTED = ButtonWrapper(
    name='CHARACTER_2_SELECTED',
    share=Button(
        file='./assets/share/assignment/dispatch/CHARACTER_2_SELECTED.png',
        area=(226, 207, 245, 225),
        search=(206, 187, 265, 245),
        color=(179, 194, 187),
        button=(226, 207, 245, 225),
    ),
)
CHARACTER_LIST = ButtonWrapper(
    name='CHARACTER_LIST',
    cn=Button(
        file='./assets/cn/assignment/dispatch/CHARACTER_LIST.png',
        area=(90, 165, 170, 186),
        search=(70, 145, 190, 206),
        color=(156, 154, 152),
        button=(90, 165, 170, 186),
    ),
)
CONFIRM_ASSIGNMENT = ButtonWrapper(
    name='CONFIRM_ASSIGNMENT',
    cn=Button(
        file='./assets/cn/assignment/dispatch/CONFIRM_ASSIGNMENT.png',
        area=(1024, 653, 1104, 672),
        search=(1004, 633, 1124, 692),
        color=(154, 154, 153),
        button=(920, 645, 1208, 682),
    ),
)
DURATION_12 = ButtonWrapper(
    name='DURATION_12',
    share=Button(
        file='./assets/share/assignment/dispatch/DURATION_12.png',
        area=(762, 563, 862, 588),
        search=(742, 543, 882, 608),
        color=(63, 58, 50),
        button=(762, 563, 862, 588),
    ),
)
DURATION_20 = ButtonWrapper(
    name='DURATION_20',
    share=Button(
        file='./assets/share/assignment/dispatch/DURATION_20.png',
        area=(882, 564, 982, 589),
        search=(862, 544, 1002, 609),
        color=(64, 60, 52),
        button=(882, 564, 982, 589),
    ),
)
DURATION_4 = ButtonWrapper(
    name='DURATION_4',
    share=Button(
        file='./assets/share/assignment/dispatch/DURATION_4.png',
        area=(522, 564, 622, 589),
        search=(502, 544, 642, 609),
        color=(164, 142, 109),
        button=(522, 564, 622, 589),
    ),
)
DURATION_8 = ButtonWrapper(
    name='DURATION_8',
    share=Button(
        file='./assets/share/assignment/dispatch/DURATION_8.png',
        area=(640, 564, 740, 589),
        search=(620, 544, 760, 609),
        color=(63, 58, 49),
        button=(640, 564, 740, 589),
    ),
)
EMPTY_SLOT = ButtonWrapper(
    name='EMPTY_SLOT',
    share=Button(
        file='./assets/share/assignment/dispatch/EMPTY_SLOT.png',
        area=(1075, 562, 1110, 597),
        search=(1054, 542, 1220, 616),
        color=(200, 200, 195),
        button=(1075, 562, 1110, 597),
    ),
)

```

`tasks/assignment/assets/assets_assignment_ui.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CHARACTER_MATERIALS = ButtonWrapper(
    name='CHARACTER_MATERIALS',
    share=Button(
        file='./assets/share/assignment/ui/CHARACTER_MATERIALS.png',
        area=(146, 91, 255, 124),
        search=(126, 71, 275, 144),
        color=(213, 213, 208),
        button=(146, 91, 255, 124),
    ),
)
DISPATCHED = ButtonWrapper(
    name='DISPATCHED',
    cn=Button(
        file='./assets/cn/assignment/ui/DISPATCHED.png',
        area=(1032, 652, 1095, 674),
        search=(1012, 632, 1115, 694),
        color=(99, 93, 85),
        button=(1032, 652, 1095, 674),
    ),
)
ENTRY_LOADED = ButtonWrapper(
    name='ENTRY_LOADED',
    share=Button(
        file='./assets/share/assignment/ui/ENTRY_LOADED.png',
        area=(467, 235, 498, 619),
        search=(447, 215, 518, 639),
        color=(217, 214, 205),
        button=(467, 235, 498, 619),
    ),
)
EXP_MATERIALS_CREDITS = ButtonWrapper(
    name='EXP_MATERIALS_CREDITS',
    share=Button(
        file='./assets/share/assignment/ui/EXP_MATERIALS_CREDITS.png',
        area=(310, 85, 447, 134),
        search=(290, 65, 467, 154),
        color=(214, 214, 210),
        button=(310, 85, 447, 134),
    ),
)
OCR_ASSIGNMENT_LIMIT = ButtonWrapper(
    name='OCR_ASSIGNMENT_LIMIT',
    share=Button(
        file='./assets/share/assignment/ui/OCR_ASSIGNMENT_LIMIT.png',
        area=(1095, 95, 1180, 119),
        search=(1075, 75, 1200, 139),
        color=(51, 54, 60),
        button=(1095, 95, 1180, 119),
    ),
)
OCR_ASSIGNMENT_LIST = ButtonWrapper(
    name='OCR_ASSIGNMENT_LIST',
    share=Button(
        file='./assets/share/assignment/ui/OCR_ASSIGNMENT_LIST.png',
        area=(133, 139, 494, 620),
        search=(113, 119, 514, 640),
        color=(201, 199, 193),
        button=(133, 139, 494, 620),
    ),
)
OCR_ASSIGNMENT_TIME = ButtonWrapper(
    name='OCR_ASSIGNMENT_TIME',
    share=Button(
        file='./assets/share/assignment/ui/OCR_ASSIGNMENT_TIME.png',
        area=(605, 564, 886, 589),
        search=(585, 544, 906, 609),
        color=(117, 104, 82),
        button=(605, 564, 886, 589),
    ),
)
SYNTHESIS_MATERIALS = ButtonWrapper(
    name='SYNTHESIS_MATERIALS',
    share=Button(
        file='./assets/share/assignment/ui/SYNTHESIS_MATERIALS.png',
        area=(521, 91, 603, 128),
        search=(501, 71, 623, 148),
        color=(208, 208, 203),
        button=(521, 91, 603, 128),
    ),
)

```

`tasks/assignment/assignment.py`:

```py
from datetime import datetime

from module.logger import logger
from module.ocr.ocr import Duration
from tasks.assignment.assets.assets_assignment_claim import CLAIM
from tasks.assignment.assets.assets_assignment_ui import (
    DISPATCHED,
    OCR_ASSIGNMENT_TIME,
)
from tasks.assignment.claim import AssignmentClaim
from tasks.assignment.keywords import (
    AssignmentEntry,
    KEYWORDS_ASSIGNMENT_GROUP,
)
from tasks.base.page import page_assignment, page_menu
from tasks.battle_pass.keywords import KEYWORD_BATTLE_PASS_QUEST
from tasks.daily.keywords import KEYWORDS_DAILY_QUEST
from tasks.daily.synthesize import SynthesizeUI


class Assignment(AssignmentClaim, SynthesizeUI):
    def run(self, assignments: list[AssignmentEntry] = None, duration: int = None):
        self.config.update_battle_pass_quests()
        self.config.update_daily_quests()

        if assignments is None:
            assignments = (
                getattr(self.config, f'Assignment_Name_{i + 1}', None) for i in range(4))
            # remove duplicate while keeping order
            assignments = list(dict.fromkeys(
                x for x in assignments if x is not None))
            assignments = [AssignmentEntry.find(x) for x in assignments]
            if len(assignments) < 4:
                logger.warning(
                    'There are duplicate assignments in config, check it out')
        if duration is None:
            duration = self.config.Assignment_Duration

        self.dispatched = dict()
        self.has_new_dispatch = False
        self.ensure_scroll_top(page_menu)
        self.ui_ensure(page_assignment)
        # Iterate in user-specified order, return undispatched ones
        undispatched = list(self._check_inlist(assignments, duration))
        remain = self._check_all()
        # There are unchecked assignments
        if remain > 0:
            for assignment in undispatched[:remain]:
                self.goto_entry(assignment)
                self.dispatch(assignment, duration)
            if remain < len(undispatched):
                logger.warning('The following assignments can not be dispatched due to limit: '
                               f'{", ".join([x.name for x in undispatched[remain:]])}')
            elif remain > len(undispatched):
                self._dispatch_remain(duration, remain - len(undispatched))

        # Scheduler
        logger.attr('has_new_dispatch', self.has_new_dispatch)
        delay = min(self.dispatched.values())
        logger.info(f'Delay assignment check to {str(delay)}')
        with self.config.multi_set():
            # Check battle pass
            quests = self.config.stored.BattlePassTodayQuest.load_quests()
            if self.has_new_dispatch:
                if KEYWORD_BATTLE_PASS_QUEST.Dispatch_1_assignments in quests:
                    logger.info('Achieved battle pass quest Dispatch_1_assignments')
                    self.config.task_call('BattlePass')
            # Check daily
            quests = self.config.stored.DailyQuest.load_quests()
            if KEYWORDS_DAILY_QUEST.Go_on_assignment_1_time in quests:
                logger.info('Achieved daily quest Go_on_assignment_1_time')
                self.config.task_call('DailyQuest')
            # Delay self
            self.config.task_delay(target=delay)

    def _check_inlist(self, assignments: list[AssignmentEntry], duration: int):
        """
        Dispatch assignments according to user config

        Args:
            assignments (list[AssignmentEntry]): user specified assignments
            duration (int): user specified duration
        """
        if not assignments:
            return
        logger.hr('Assignment check inlist', level=2)
        logger.info(
            f'User specified assignments: {", ".join([x.name for x in assignments])}')
        _, remain, _ = self._limit_status
        for assignment in assignments:
            self.goto_entry(assignment)
            if self.appear(CLAIM):
                self.claim(assignment, duration, should_redispatch=True)
                continue
            if self.appear(DISPATCHED):
                self.dispatched[assignment] = datetime.now() + Duration(
                    OCR_ASSIGNMENT_TIME).ocr_single_line(self.device.image)
                continue
            if remain > 0:
                self.dispatch(assignment, duration)
                remain -= 1
            else:
                yield assignment

    def _check_all(self):
        """
        States of assignments from top to bottom are in following order:
            1. Claimable
            2. Dispatched
            3. Dispatchable
        Break when a dispatchable assignment is encountered
        """
        logger.hr('Assignment check all', level=2)
        _, remain, total = self._limit_status
        if total == len(self.dispatched):
            return remain
        for group in self._iter_groups():
            self.goto_group(group)
            entries = self._iter_entries()
            for _ in range(len(group.entries)):
                assignment = next(entries)
                if assignment in self.dispatched:
                    continue
                self.goto_entry(assignment)
                if self.appear(CLAIM):
                    self.claim(assignment, None, should_redispatch=False)
                    remain += 1
                    continue
                if self.appear(DISPATCHED):
                    self.dispatched[assignment] = datetime.now() + Duration(
                        OCR_ASSIGNMENT_TIME).ocr_single_line(self.device.image)
                    if total == len(self.dispatched):
                        return remain
                    continue
                break
        return remain

    def _dispatch_remain(self, duration: int, remain: int):
        """
        Dispatch assignments according to preset priority

        Args:
            duration (int): user specified duration
            remain (int): 
                The number of remaining assignments after
                processing the ones specified by user
        """
        if remain <= 0:
            return
        logger.hr('Assignment dispatch remain', level=2)
        logger.warning(f'{remain} remain')
        logger.info(
            'Dispatch remaining assignments according to preset priority')
        group_priority = (
            KEYWORDS_ASSIGNMENT_GROUP.EXP_Materials_Credits,
            KEYWORDS_ASSIGNMENT_GROUP.Character_Materials,
            KEYWORDS_ASSIGNMENT_GROUP.Synthesis_Materials
        )
        for group in group_priority:
            for assignment in group.entries:
                if assignment in self.dispatched:
                    continue
                self.goto_entry(assignment)
                self.dispatch(assignment, duration)
                remain -= 1
                if remain <= 0:
                    return

```

`tasks/assignment/claim.py`:

```py
from datetime import datetime, timedelta

from module.logger import logger
from module.ocr.ocr import Duration
from tasks.assignment.assets.assets_assignment_claim import *
from tasks.assignment.dispatch import AssignmentDispatch
from tasks.assignment.keywords import AssignmentEntry
from tasks.base.page import page_assignment


class AssignmentClaim(AssignmentDispatch):
    def claim(self, assignment: AssignmentEntry, duration_expected: int, should_redispatch: bool):
        """
        Args:
            assignment (AssignmentEntry):
            duration_expected (int): user specified duration
            should_redispatch (bool):

        Pages:
            in: CLAIM
            out: DISPATCHED or EMPTY_SLOT
        """
        redispatched = False
        self._wait_for_report()
        if should_redispatch:
            redispatched = self._is_duration_expected(duration_expected)
        self._exit_report(redispatched)
        if redispatched:
            self._wait_until_assignment_started()
            self.dispatched[assignment] = datetime.now(
            ) + timedelta(hours=duration_expected)
        elif should_redispatch:
            # Re-select duration and dispatch
            self.goto_entry(assignment)
            self.dispatch(assignment, duration_expected)

    def _wait_for_report(self):
        """
        Pages:
            in: CLAIM
            out: REDISPATCH
        """
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.appear(REDISPATCH):
                logger.info('Assignment report appears')
                break
            # Claim rewards
            if self.appear_then_click(CLAIM, interval=2):
                continue

    def _exit_report(self, should_redispatch: bool):
        """
        Args:
            should_redispatch (bool): determined by user config and duration in report

        Pages:
            in: CLOSE_REPORT and REDISPATCH
            out: page_assignment
        """
        click_button = REDISPATCH if should_redispatch else CLOSE_REPORT
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.appear(page_assignment.check_button):
                logger.info('Assignment report is closed')
                break
            # Close report
            if self.appear_then_click(click_button, interval=2):
                continue

    def _is_duration_expected(self, duration: int) -> bool:
        """
        Check whether duration in assignment report page
        is the same as user specified

        Args:
            duration (int): user specified duration

        Returns:
            bool: If same.
        """
        duration_reported: timedelta = Duration(
            OCR_ASSIGNMENT_REPORT_TIME).ocr_single_line(self.device.image)
        return duration_reported.total_seconds() == duration*3600

```

`tasks/assignment/dispatch.py`:

```py
from datetime import datetime, timedelta

from module.base.timer import Timer
from module.logger import logger
from tasks.assignment.assets.assets_assignment_dispatch import *
from tasks.assignment.assets.assets_assignment_ui import DISPATCHED
from tasks.assignment.keywords import *
from tasks.assignment.ui import AssignmentSwitch, AssignmentUI

ASSIGNMENT_DURATION_SWITCH = AssignmentSwitch(
    'AssignmentDurationSwitch',
    (160, 130, 100)
)
ASSIGNMENT_DURATION_SWITCH.add_state('4', DURATION_4)
ASSIGNMENT_DURATION_SWITCH.add_state('8', DURATION_8)
ASSIGNMENT_DURATION_SWITCH.add_state('12', DURATION_12)
ASSIGNMENT_DURATION_SWITCH.add_state('20', DURATION_20)


class AssignmentDispatch(AssignmentUI):
    dispatched: dict[AssignmentEntry, datetime] = dict()
    has_new_dispatch: bool = False

    def dispatch(self, assignment: AssignmentEntry, duration: int):
        """
        Dispatch assignment.
        Should be called only when limit is checked

        Args:
            assignment (AssignmentEntry):
            duration (int): user specified duration

        Pages:
            in: EMPTY_SLOT
            out: DISPATCHED
        """
        self._select_characters()
        self._select_duration(duration)
        self._confirm_assignment()
        self._wait_until_assignment_started()
        self.dispatched[assignment] = datetime.now() + \
            timedelta(hours=duration)
        self.has_new_dispatch = True

    def _select_characters(self):
        """
        Pages:
            in: EMPTY_SLOT
            out: CHARACTER_LIST
        """
        skip_first_screenshot = True
        self.interval_clear(
            (CHARACTER_LIST, CHARACTER_1_SELECTED, CHARACTER_2_SELECTED), interval=2)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.match_template_color(CONFIRM_ASSIGNMENT):
                logger.info('Characters are all selected')
                break
            # Ensure character list
            if not self.appear(CHARACTER_LIST):
                if self.interval_is_reached(CHARACTER_LIST, interval=2):
                    self.interval_reset(CHARACTER_LIST, interval=2)
                    self.device.click(EMPTY_SLOT)
                continue
            # Select
            if self.interval_is_reached(CHARACTER_1_SELECTED, interval=2):
                self.interval_reset(CHARACTER_1_SELECTED, interval=2)
                if not self.image_color_count(CHARACTER_1_SELECTED, (240, 240, 240)):
                    self.device.click(CHARACTER_1)
            if self.interval_is_reached(CHARACTER_2_SELECTED, interval=2):
                self.interval_reset(CHARACTER_2_SELECTED, interval=2)
                if not self.image_color_count(CHARACTER_2_SELECTED, (240, 240, 240)):
                    self.device.click(CHARACTER_2)

    def _select_duration(self, duration: int):
        if duration not in {4, 8, 12, 20}:
            logger.warning(
                f'Duration {duration} is out of scope, reset it to 20')
            duration = 20
        ASSIGNMENT_DURATION_SWITCH.set(str(duration), self)

    def _confirm_assignment(self):
        """
        Pages:
            in: CONFIRM_ASSIGNMENT
            out: DISPATCHED
        """
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.appear(DISPATCHED):
                logger.info(f'Assignment dispatched')
                break
            # Click
            if self.appear_then_click(CONFIRM_ASSIGNMENT, interval=2):
                continue

    def _wait_until_assignment_started(self):
        """
        Pages:
            in: DISPATCHED
            out: ASSIGNMENT_STARTED_CHECK
        """
        skip_first_screenshot = True
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.appear(ASSIGNMENT_START):
                logger.info('Assignment start')
                break
            # Timeout
            if timeout.reached():
                logger.warning('Wait for assignment start timeout')
                break
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            # End
            if self.appear(ASSIGNMENT_STARTED_CHECK):
                logger.info('Assignment started')
                break

```

`tasks/assignment/keywords/__init__.py`:

```py
import tasks.assignment.keywords.entry as KEYWORDS_ASSIGNMENT_ENTRY
import tasks.assignment.keywords.group as KEYWORDS_ASSIGNMENT_GROUP
from tasks.assignment.keywords.classes import AssignmentEntry, AssignmentGroup

KEYWORDS_ASSIGNMENT_GROUP.Character_Materials.entries = (
    KEYWORDS_ASSIGNMENT_ENTRY.Nine_Billion_Names,
    KEYWORDS_ASSIGNMENT_ENTRY.Destruction_of_the_Destroyer,
    KEYWORDS_ASSIGNMENT_ENTRY.Winter_Soldiers,
    KEYWORDS_ASSIGNMENT_ENTRY.Born_to_Obey,
    KEYWORDS_ASSIGNMENT_ENTRY.Root_Out_the_Turpitude,
    KEYWORDS_ASSIGNMENT_ENTRY.Fire_Lord_Inflames_Blades_of_War,
)
KEYWORDS_ASSIGNMENT_GROUP.EXP_Materials_Credits.entries = (
    KEYWORDS_ASSIGNMENT_ENTRY.Nameless_Land_Nameless_People,
    KEYWORDS_ASSIGNMENT_ENTRY.Akashic_Records,
    KEYWORDS_ASSIGNMENT_ENTRY.The_Invisible_Hand,
)
KEYWORDS_ASSIGNMENT_GROUP.Synthesis_Materials.entries = (
    KEYWORDS_ASSIGNMENT_ENTRY.Abandoned_and_Insulted,
    KEYWORDS_ASSIGNMENT_ENTRY.Spring_of_Life,
    KEYWORDS_ASSIGNMENT_ENTRY.The_Land_of_Gold,
    KEYWORDS_ASSIGNMENT_ENTRY.The_Blossom_in_the_Storm,
)
for group in (
        KEYWORDS_ASSIGNMENT_GROUP.Character_Materials,
        KEYWORDS_ASSIGNMENT_GROUP.EXP_Materials_Credits,
        KEYWORDS_ASSIGNMENT_GROUP.Synthesis_Materials,
):
    for entry in group.entries:
        entry.group = group

```

`tasks/assignment/keywords/classes.py`:

```py
from __future__ import annotations
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword


@dataclass(repr=False)
class AssignmentGroup(Keyword):
    instances: ClassVar = {}
    entries: tuple[AssignmentEntry] = ()


@dataclass(repr=False)
class AssignmentEntry(Keyword):
    instances: ClassVar = {}
    group: AssignmentGroup = None
    def __hash__(self) -> int:
        return super().__hash__()


```

`tasks/assignment/keywords/entry.py`:

```py
from .classes import AssignmentEntry

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Nine_Billion_Names = AssignmentEntry(
    id=1,
    name='Nine_Billion_Names',
    cn='九十亿个名字',
    cht='九十億個名字',
    en='Nine Billion Names',
    jp='九十億の御名',
)
Destruction_of_the_Destroyer = AssignmentEntry(
    id=2,
    name='Destruction_of_the_Destroyer',
    cn='毁灭者的覆灭',
    cht='毀滅者的覆滅',
    en='Destruction of the Destroyer',
    jp='壊滅者の覆没',
)
Winter_Soldiers = AssignmentEntry(
    id=3,
    name='Winter_Soldiers',
    cn='寒冬的战士们',
    cht='寒冬的戰士們',
    en='Winter Soldiers',
    jp='寒冬の戦士たち',
)
Born_to_Obey = AssignmentEntry(
    id=4,
    name='Born_to_Obey',
    cn='生而服从',
    cht='生而服從',
    en='Born to Obey',
    jp='生まれながらに服従する',
)
Root_Out_the_Turpitude = AssignmentEntry(
    id=5,
    name='Root_Out_the_Turpitude',
    cn='根除恶孽',
    cht='根除惡孽',
    en='Root Out the Turpitude',
    jp='悪孽を根絶やしに',
)
Fire_Lord_Inflames_Blades_of_War = AssignmentEntry(
    id=6,
    name='Fire_Lord_Inflames_Blades_of_War',
    cn='火帝动炉销剑戟',
    cht='火帝動爐銷劍戟',
    en='Fire Lord Inflames Blades of War',
    jp='剣戟を焼却する火帝炉',
)
Nameless_Land_Nameless_People = AssignmentEntry(
    id=7,
    name='Nameless_Land_Nameless_People',
    cn='无名之地，无名之人',
    cht='無名之地，無名之人',
    en='Nameless Land, Nameless People',
    jp='無名の地、無名の人',
)
Akashic_Records = AssignmentEntry(
    id=8,
    name='Akashic_Records',
    cn='阿卡夏记录',
    cht='阿卡夏紀錄',
    en='Akashic Records',
    jp='アーカーシャの記録',
)
The_Invisible_Hand = AssignmentEntry(
    id=9,
    name='The_Invisible_Hand',
    cn='看不见的手',
    cht='看不見的手',
    en='The Invisible Hand',
    jp='見えざる手',
)
Abandoned_and_Insulted = AssignmentEntry(
    id=10,
    name='Abandoned_and_Insulted',
    cn='被废弃与损害的',
    cht='被廢棄與損害的',
    en='Abandoned and Insulted',
    jp='捨てられしものと傷つけられしもの',
)
Spring_of_Life = AssignmentEntry(
    id=11,
    name='Spring_of_Life',
    cn='生命之泉',
    cht='生命之泉',
    en='Spring of Life',
    jp='生命の泉',
)
The_Land_of_Gold = AssignmentEntry(
    id=12,
    name='The_Land_of_Gold',
    cn='黄金大地',
    cht='黃金大地',
    en='The Land of Gold',
    jp='黄金の大地',
)
The_Blossom_in_the_Storm = AssignmentEntry(
    id=13,
    name='The_Blossom_in_the_Storm',
    cn='风暴中怒放的花',
    cht='風暴中怒放的花',
    en='The Blossom in the Storm',
    jp='嵐の中で咲き誇る花',
)
Legend_of_the_Puppet_Master = AssignmentEntry(
    id=14,
    name='Legend_of_the_Puppet_Master',
    cn='偃师传说',
    cht='偃師傳說',
    en='Legend of the Puppet Master',
    jp='傀儡師伝説',
)
The_Wages_of_Humanity = AssignmentEntry(
    id=15,
    name='The_Wages_of_Humanity',
    cn='赡养人类',
    cht='贍養人類',
    en='The Wages of Humanity',
    jp='人類扶養',
)

```

`tasks/assignment/keywords/group.py`:

```py
from .classes import AssignmentGroup

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Character_Materials = AssignmentGroup(
    id=1,
    name='Character_Materials',
    cn='专属材料',
    cht='專屬素材',
    en='Character Materials',
    jp='専用素材',
)
EXP_Materials_Credits = AssignmentGroup(
    id=2,
    name='EXP_Materials_Credits',
    cn='经验材料/信用点',
    cht='經驗素材/信用點',
    en='EXP Materials/Credits',
    jp='経験値素材/信用ポイント',
)
Synthesis_Materials = AssignmentGroup(
    id=3,
    name='Synthesis_Materials',
    cn='合成材料',
    cht='合成素材',
    en='Synthesis Materials',
    jp='合成材料',
)

```

`tasks/assignment/ui.py`:

```py
import re
from functools import cached_property
from typing import Iterator

from module.base.base import ModuleBase
from module.base.timer import Timer
from module.logger import logger
from module.ocr.ocr import DigitCounter, Ocr
from module.ui.draggable_list import DraggableList
from module.ui.switch import Switch
from tasks.assignment.assets.assets_assignment_ui import *
from tasks.assignment.keywords import *
from tasks.base.ui import UI


class AssignmentSwitch(Switch):
    def __init__(self, name, active_color: tuple[int, int, int], is_selector=True):
        super().__init__(name, is_selector)
        self.active_color = active_color

    def get(self, main: ModuleBase):
        """
        Use image_color_count instead to determine whether the button is selected/active

        Args:
            main (ModuleBase):

        Returns:
            str: state name or 'unknown'.
        """
        for data in self.state_list:
            if main.image_color_count(data['check_button'], self.active_color):
                return data['state']

        return 'unknown'


class AssignmentOcr(Ocr):
    OCR_REPLACE = {
        'ch': [
            (KEYWORDS_ASSIGNMENT_ENTRY.Winter_Soldiers.name, '[黑]冬的战士们'),
            (KEYWORDS_ASSIGNMENT_ENTRY.Born_to_Obey.name, '[牛]而服从'),
            (KEYWORDS_ASSIGNMENT_ENTRY.Root_Out_the_Turpitude.name,
             '根除恶[擎薯尊掌鞋]?'),
            (KEYWORDS_ASSIGNMENT_ENTRY.Akashic_Records.name, '阿[未][夏复]记录'),
            (KEYWORDS_ASSIGNMENT_ENTRY.The_Wages_of_Humanity.name, '[赠]养人类'),
        ]
    }

    @cached_property
    def ocr_regex(self) -> re.Pattern | None:
        rules = AssignmentOcr.OCR_REPLACE.get(self.lang)
        if rules is None:
            return None
        return re.compile('|'.join('(?P<%s>%s)' % pair for pair in rules))

    def after_process(self, result: str):
        result = super().after_process(result)
        if self.ocr_regex is None:
            return result
        matched = self.ocr_regex.fullmatch(result)
        if matched is None:
            return result
        keyword_lang = self.lang
        matched = getattr(KEYWORDS_ASSIGNMENT_ENTRY, matched.lastgroup)
        matched = getattr(matched, keyword_lang)
        logger.attr(name=f'{self.name} after_process',
                    text=f'{result} -> {matched}')
        return matched


ASSIGNMENT_TOP_SWITCH = AssignmentSwitch(
    'AssignmentTopSwitch',
    (240, 240, 240)
)
ASSIGNMENT_TOP_SWITCH.add_state(
    KEYWORDS_ASSIGNMENT_GROUP.Character_Materials,
    check_button=CHARACTER_MATERIALS
)
ASSIGNMENT_TOP_SWITCH.add_state(
    KEYWORDS_ASSIGNMENT_GROUP.EXP_Materials_Credits,
    check_button=EXP_MATERIALS_CREDITS
)
ASSIGNMENT_TOP_SWITCH.add_state(
    KEYWORDS_ASSIGNMENT_GROUP.Synthesis_Materials,
    check_button=SYNTHESIS_MATERIALS
)

ASSIGNMENT_ENTRY_LIST = DraggableList(
    'AssignmentEntryList',
    keyword_class=AssignmentEntry,
    ocr_class=AssignmentOcr,
    search_button=OCR_ASSIGNMENT_LIST,
    check_row_order=False,
    active_color=(40, 40, 40)
)


class AssignmentUI(UI):
    def goto_group(self, group: AssignmentGroup):
        """
        Args:
            group (AssignmentGroup):

        Examples:
            self = AssignmentUI('src')
            self.device.screenshot()
            self.goto_group(KEYWORDS_ASSIGNMENT_GROUP.Character_Materials)
        """
        logger.hr('Assignment group goto', level=3)
        if ASSIGNMENT_TOP_SWITCH.set(group, main=self):
            self._wait_until_entry_loaded()

    def goto_entry(self, entry: AssignmentEntry):
        """
        Args:
            entry (AssignmentEntry):

        Examples:
            self = AssignmentUI('src')
            self.device.screenshot()
            self.goto_entry(KEYWORDS_ASSIGNMENT_ENTRY.Nameless_Land_Nameless_People)
        """
        self.goto_group(entry.group)
        ASSIGNMENT_ENTRY_LIST.select_row(entry, self)

    def _wait_until_entry_loaded(self):
        skip_first_screenshot = True
        timeout = Timer(2, count=3).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning('Wait entry loaded timeout')
                break
            # Maybe not reliable
            if self.image_color_count(ENTRY_LOADED, (35, 35, 35)):
                logger.info('Entry loaded')
                break

    @property
    def _limit_status(self) -> tuple[int, int, int]:
        self.device.screenshot()
        current, remain, total = DigitCounter(OCR_ASSIGNMENT_LIMIT).ocr_single_line(self.device.image)
        if total and current <= total:
            logger.attr('Assignment', f'{current}/{total}')
            self.config.stored.Assignment.set(current, total)
        else:
            logger.warning(f'Invalid assignment limit: {current}/{total}')
            self.config.stored.Assignment.set(0, 0)
        return current, remain, total

    def _iter_groups(self) -> Iterator[AssignmentGroup]:
        for state in ASSIGNMENT_TOP_SWITCH.state_list:
            yield state['state']

    def _iter_entries(self) -> Iterator[AssignmentEntry]:
        """
        Iterate entries from top to bottom
        """
        ASSIGNMENT_ENTRY_LIST.load_rows(main=self)
        for button in ASSIGNMENT_ENTRY_LIST.cur_buttons:
            yield button.matched_keyword

```

`tasks/base/assets/assets_base_page.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

ASSIGNMENT_CHECK = ButtonWrapper(
    name='ASSIGNMENT_CHECK',
    share=Button(
        file='./assets/share/base/page/ASSIGNMENT_CHECK.png',
        area=(45, 21, 70, 53),
        search=(25, 1, 90, 73),
        color=(162, 145, 112),
        button=(45, 21, 70, 53),
    ),
)
BACK = ButtonWrapper(
    name='BACK',
    share=Button(
        file='./assets/share/base/page/BACK.png',
        area=(1217, 21, 1248, 51),
        search=(1197, 1, 1268, 71),
        color=(56, 59, 71),
        button=(1217, 21, 1248, 51),
    ),
)
BATTLE_PASS_CHECK = ButtonWrapper(
    name='BATTLE_PASS_CHECK',
    share=Button(
        file='./assets/share/base/page/BATTLE_PASS_CHECK.png',
        area=(42, 22, 72, 55),
        search=(22, 2, 92, 75),
        color=(159, 142, 108),
        button=(42, 22, 72, 55),
    ),
)
CAMERA_CHECK = ButtonWrapper(
    name='CAMERA_CHECK',
    share=Button(
        file='./assets/share/base/page/CAMERA_CHECK.png',
        area=(1120, 344, 1160, 375),
        search=(1100, 324, 1180, 395),
        color=(172, 173, 172),
        button=(1120, 344, 1160, 375),
    ),
)
CHARACTER_CHECK = ButtonWrapper(
    name='CHARACTER_CHECK',
    share=Button(
        file='./assets/share/base/page/CHARACTER_CHECK.png',
        area=(41, 18, 73, 47),
        search=(21, 0, 93, 67),
        color=(172, 153, 119),
        button=(41, 18, 73, 47),
    ),
)
CLOSE = ButtonWrapper(
    name='CLOSE',
    share=Button(
        file='./assets/share/base/page/CLOSE.png',
        area=(1222, 25, 1252, 55),
        search=(1202, 5, 1272, 75),
        color=(53, 54, 54),
        button=(1222, 25, 1252, 55),
    ),
)
EVENT_CHECK = ButtonWrapper(
    name='EVENT_CHECK',
    share=Button(
        file='./assets/share/base/page/EVENT_CHECK.png',
        area=(39, 19, 75, 56),
        search=(19, 0, 95, 76),
        color=(133, 125, 103),
        button=(39, 19, 75, 56),
    ),
)
FORGOTTEN_HALL_CHECK = ButtonWrapper(
    name='FORGOTTEN_HALL_CHECK',
    share=Button(
        file='./assets/share/base/page/FORGOTTEN_HALL_CHECK.png',
        area=(44, 27, 71, 47),
        search=(24, 7, 91, 67),
        color=(91, 87, 90),
        button=(44, 27, 71, 47),
    ),
)
GACHA_CHECK = ButtonWrapper(
    name='GACHA_CHECK',
    share=Button(
        file='./assets/share/base/page/GACHA_CHECK.png',
        area=(40, 20, 74, 54),
        search=(20, 0, 94, 74),
        color=(157, 139, 112),
        button=(40, 20, 74, 54),
    ),
)
GUIDE_CHECK = ButtonWrapper(
    name='GUIDE_CHECK',
    share=Button(
        file='./assets/share/base/page/GUIDE_CHECK.png',
        area=(64, 297, 83, 326),
        search=(44, 277, 103, 346),
        color=(197, 196, 197),
        button=(64, 297, 83, 326),
    ),
)
GUIDE_CLOSE = ButtonWrapper(
    name='GUIDE_CLOSE',
    share=Button(
        file='./assets/share/base/page/GUIDE_CLOSE.png',
        area=(1215, 21, 1248, 54),
        search=(1195, 1, 1268, 74),
        color=(75, 82, 95),
        button=(1215, 21, 1248, 54),
    ),
)
ITEM_CHECK = ButtonWrapper(
    name='ITEM_CHECK',
    share=Button(
        file='./assets/share/base/page/ITEM_CHECK.png',
        area=(43, 23, 72, 54),
        search=(23, 3, 92, 74),
        color=(188, 169, 129),
        button=(43, 23, 72, 54),
    ),
)
MAIN_GOTO_BATTLE_PASS = ButtonWrapper(
    name='MAIN_GOTO_BATTLE_PASS',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_BATTLE_PASS.png',
        area=(860, 36, 889, 56),
        search=(840, 16, 909, 76),
        color=(165, 164, 162),
        button=(860, 36, 889, 56),
    ),
)
MAIN_GOTO_CHARACTER = ButtonWrapper(
    name='MAIN_GOTO_CHARACTER',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_CHARACTER.png',
        area=(1204, 25, 1234, 51),
        search=(1184, 5, 1254, 71),
        color=(184, 185, 187),
        button=(1204, 25, 1234, 51),
    ),
)
MAIN_GOTO_EVENT = ButtonWrapper(
    name='MAIN_GOTO_EVENT',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_EVENT.png',
        area=(786, 33, 814, 56),
        search=(766, 13, 834, 76),
        color=(185, 184, 183),
        button=(786, 33, 814, 56),
    ),
)
MAIN_GOTO_GACHA = ButtonWrapper(
    name='MAIN_GOTO_GACHA',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_GACHA.png',
        area=(929, 38, 957, 59),
        search=(909, 18, 977, 79),
        color=(161, 162, 163),
        button=(929, 38, 957, 59),
    ),
)
MAIN_GOTO_GUIDE = ButtonWrapper(
    name='MAIN_GOTO_GUIDE',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_GUIDE.png',
        area=(997, 34, 1027, 59),
        search=(977, 14, 1047, 79),
        color=(170, 171, 173),
        button=(997, 34, 1027, 59),
    ),
)
MAIN_GOTO_ITEM = ButtonWrapper(
    name='MAIN_GOTO_ITEM',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_ITEM.png',
        area=(1064, 35, 1098, 59),
        search=(1044, 15, 1118, 79),
        color=(179, 180, 182),
        button=(1064, 35, 1098, 59),
    ),
)
MAIN_GOTO_MAP = ButtonWrapper(
    name='MAIN_GOTO_MAP',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_MAP.png',
        area=(70, 78, 166, 174),
        search=(50, 58, 186, 194),
        color=(91, 105, 119),
        button=(70, 78, 166, 174),
    ),
)
MAIN_GOTO_MENU = ButtonWrapper(
    name='MAIN_GOTO_MENU',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_MENU.png',
        area=(22, 60, 51, 81),
        search=(2, 40, 71, 101),
        color=(176, 177, 179),
        button=(22, 60, 51, 81),
    ),
)
MAIN_GOTO_MESSAGE = ButtonWrapper(
    name='MAIN_GOTO_MESSAGE',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_MESSAGE.png',
        area=(184, 182, 203, 212),
        search=(164, 162, 223, 232),
        color=(230, 230, 230),
        button=(184, 182, 203, 212),
    ),
)
MAIN_GOTO_MISSION = ButtonWrapper(
    name='MAIN_GOTO_MISSION',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_MISSION.png',
        area=(21, 199, 51, 221),
        search=(1, 179, 71, 241),
        color=(168, 169, 172),
        button=(21, 199, 51, 221),
    ),
)
MAIN_GOTO_TEAM = ButtonWrapper(
    name='MAIN_GOTO_TEAM',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_TEAM.png',
        area=(1135, 41, 1166, 58),
        search=(1115, 21, 1186, 78),
        color=(160, 161, 164),
        button=(1135, 41, 1166, 58),
    ),
)
MAIN_GOTO_TUTORIAL = ButtonWrapper(
    name='MAIN_GOTO_TUTORIAL',
    share=Button(
        file='./assets/share/base/page/MAIN_GOTO_TUTORIAL.png',
        area=(195, 58, 207, 82),
        search=(175, 38, 227, 102),
        color=(127, 131, 139),
        button=(195, 58, 207, 82),
    ),
)
MAP_CHECK = ButtonWrapper(
    name='MAP_CHECK',
    share=Button(
        file='./assets/share/base/page/MAP_CHECK.png',
        area=(46, 19, 68, 54),
        search=(26, 0, 88, 74),
        color=(75, 75, 75),
        button=(46, 19, 68, 54),
    ),
)
MAP_GOTO_WORLD = ButtonWrapper(
    name='MAP_GOTO_WORLD',
    share=Button(
        file='./assets/share/base/page/MAP_GOTO_WORLD.png',
        area=(896, 80, 1225, 116),
        search=(876, 60, 1245, 136),
        color=(132, 132, 132),
        button=(896, 80, 1225, 116),
    ),
)
MENU_CHECK = ButtonWrapper(
    name='MENU_CHECK',
    share=Button(
        file='./assets/share/base/page/MENU_CHECK.png',
        area=(1222, 638, 1252, 669),
        search=(1202, 618, 1272, 689),
        color=(57, 50, 39),
        button=(1222, 638, 1252, 669),
    ),
)
MENU_GOTO_ASSIGNMENT = ButtonWrapper(
    name='MENU_GOTO_ASSIGNMENT',
    share=Button(
        file='./assets/share/base/page/MENU_GOTO_ASSIGNMENT.png',
        area=(1090, 269, 1153, 328),
        search=(1070, 249, 1173, 348),
        color=(71, 71, 74),
        button=(1090, 269, 1153, 328),
    ),
)
MENU_GOTO_CAMERA = ButtonWrapper(
    name='MENU_GOTO_CAMERA',
    share=Button(
        file='./assets/share/base/page/MENU_GOTO_CAMERA.png',
        area=(1219, 465, 1255, 495),
        search=(1199, 445, 1275, 515),
        color=(51, 52, 53),
        button=(1219, 465, 1255, 495),
    ),
)
MENU_GOTO_SYNTHESIZE = ButtonWrapper(
    name='MENU_GOTO_SYNTHESIZE',
    share=Button(
        file='./assets/share/base/page/MENU_GOTO_SYNTHESIZE.png',
        area=(994, 389, 1035, 424),
        search=(974, 369, 1055, 444),
        color=(85, 85, 85),
        button=(994, 389, 1035, 424),
    ),
)
MENU_SCROLL = ButtonWrapper(
    name='MENU_SCROLL',
    share=Button(
        file='./assets/share/base/page/MENU_SCROLL.png',
        area=(1178, 261, 1184, 681),
        search=(1158, 241, 1204, 701),
        color=(100, 100, 105),
        button=(1178, 261, 1184, 681),
    ),
)
MESSAGE_CLOSE = ButtonWrapper(
    name='MESSAGE_CLOSE',
    share=Button(
        file='./assets/share/base/page/MESSAGE_CLOSE.png',
        area=(863, 95, 895, 127),
        search=(843, 75, 915, 147),
        color=(175, 174, 175),
        button=(863, 95, 895, 127),
    ),
)
MISSION_CHECK = ButtonWrapper(
    name='MISSION_CHECK',
    share=Button(
        file='./assets/share/base/page/MISSION_CHECK.png',
        area=(44, 33, 70, 55),
        search=(24, 13, 90, 75),
        color=(194, 177, 139),
        button=(44, 33, 70, 55),
    ),
)
SYNTHESIZE_CHECK = ButtonWrapper(
    name='SYNTHESIZE_CHECK',
    share=Button(
        file='./assets/share/base/page/SYNTHESIZE_CHECK.png',
        area=(39, 23, 75, 52),
        search=(19, 3, 95, 72),
        color=(109, 101, 89),
        button=(39, 23, 75, 52),
    ),
)
TEAM_CHECK = ButtonWrapper(
    name='TEAM_CHECK',
    share=Button(
        file='./assets/share/base/page/TEAM_CHECK.png',
        area=(41, 34, 73, 54),
        search=(21, 14, 93, 74),
        color=(138, 123, 101),
        button=(41, 34, 73, 54),
    ),
)
TUTORIAL_CHECK = ButtonWrapper(
    name='TUTORIAL_CHECK',
    share=Button(
        file='./assets/share/base/page/TUTORIAL_CHECK.png',
        area=(44, 30, 70, 56),
        search=(24, 10, 90, 76),
        color=(141, 126, 99),
        button=(44, 30, 70, 56),
    ),
)
WORLD_CHECK = ButtonWrapper(
    name='WORLD_CHECK',
    share=Button(
        file='./assets/share/base/page/WORLD_CHECK.png',
        area=(46, 19, 68, 54),
        search=(26, 0, 88, 74),
        color=(110, 102, 87),
        button=(46, 19, 68, 54),
    ),
)

```

`tasks/base/assets/assets_base_popup.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

BATTLE_PASS_NOTIFICATION = ButtonWrapper(
    name='BATTLE_PASS_NOTIFICATION',
    share=Button(
        file='./assets/share/base/popup/BATTLE_PASS_NOTIFICATION.png',
        area=(960, 601, 984, 625),
        search=(940, 581, 1004, 645),
        color=(137, 127, 109),
        button=(895, 595, 1180, 630),
    ),
)
CANCEL_POPUP = ButtonWrapper(
    name='CANCEL_POPUP',
    cn=Button(
        file='./assets/cn/base/popup/CANCEL_POPUP.png',
        area=(427, 536, 503, 562),
        search=(321, 432, 661, 668),
        color=(157, 156, 152),
        button=(427, 536, 503, 562),
    ),
)
CONFIRM_POPUP = ButtonWrapper(
    name='CONFIRM_POPUP',
    cn=Button(
        file='./assets/cn/base/popup/CONFIRM_POPUP.png',
        area=(774, 534, 855, 563),
        search=(617, 434, 966, 652),
        color=(170, 169, 166),
        button=(774, 534, 855, 563),
    ),
)
GET_REWARD = ButtonWrapper(
    name='GET_REWARD',
    share=Button(
        file='./assets/share/base/popup/GET_REWARD.png',
        area=(623, 95, 657, 119),
        search=(603, 75, 677, 139),
        color=(145, 131, 99),
        button=(741, 495, 1071, 644),
    ),
)
MONTHLY_CARD_GET_ITEM = ButtonWrapper(
    name='MONTHLY_CARD_GET_ITEM',
    share=Button(
        file='./assets/share/base/popup/MONTHLY_CARD_GET_ITEM.png',
        area=(612, 328, 652, 368),
        search=(592, 308, 672, 388),
        color=(209, 187, 179),
        button=(741, 495, 1071, 644),
    ),
)
MONTHLY_CARD_REWARD = ButtonWrapper(
    name='MONTHLY_CARD_REWARD',
    share=Button(
        file='./assets/share/base/popup/MONTHLY_CARD_REWARD.png',
        area=(696, 407, 736, 447),
        search=(676, 387, 756, 467),
        color=(137, 107, 91),
        button=(741, 495, 1071, 644),
    ),
)

```

`tasks/base/page.py`:

```py
import traceback

from tasks.base.assets.assets_base_page import *


class Page:
    # Key: str, page name like "page_main"
    # Value: Page, page instance
    all_pages = {}

    @classmethod
    def clear_connection(cls):
        for page in cls.all_pages.values():
            page.parent = None

    @classmethod
    def init_connection(cls, destination):
        """
        Initialize an A* path finding among pages.

        Args:
            destination (Page):
        """
        cls.clear_connection()

        visited = [destination]
        visited = set(visited)
        while 1:
            new = visited.copy()
            for page in visited:
                for link in cls.iter_pages():
                    if link in visited:
                        continue
                    if page in link.links:
                        link.parent = page
                        new.add(link)
            if len(new) == len(visited):
                break
            visited = new

    @classmethod
    def iter_pages(cls):
        return cls.all_pages.values()

    @classmethod
    def iter_check_buttons(cls):
        for page in cls.all_pages.values():
            yield page.check_button

    def __init__(self, check_button):
        self.check_button = check_button
        self.links = {}
        (filename, line_number, function_name, text) = traceback.extract_stack()[-2]
        self.name = text[:text.find('=')].strip()
        self.parent = None
        Page.all_pages[self.name] = self

    def __eq__(self, other):
        return self.name == other.name

    def __hash__(self):
        return hash(self.name)

    def __str__(self):
        return self.name

    def link(self, button, destination):
        self.links[destination] = button


# Main page
page_main = Page(MAIN_GOTO_CHARACTER)

# Menu, entered from phone
page_menu = Page(MENU_CHECK)
page_menu.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_MENU, destination=page_menu)

# Character
page_character = Page(CHARACTER_CHECK)
page_character.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_CHARACTER, destination=page_character)

# Team
page_team = Page(TEAM_CHECK)
page_team.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_TEAM, destination=page_team)

# Item, storage
page_item = Page(ITEM_CHECK)
page_item.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_ITEM, destination=page_item)

# Guide, which includes beginners' guide, daily missions and dungeons
page_guide = Page(GUIDE_CHECK)
page_guide.link(GUIDE_CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_GUIDE, destination=page_guide)

# Gacha
page_gacha = Page(GACHA_CHECK)
page_gacha.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_GACHA, destination=page_gacha)

# Battle Pass
page_battle_pass = Page(BATTLE_PASS_CHECK)
page_battle_pass.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_BATTLE_PASS, destination=page_battle_pass)

# Event
page_event = Page(EVENT_CHECK)
page_event.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_EVENT, destination=page_event)

# Map
page_map = Page(MAP_CHECK)
page_map.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_MAP, destination=page_map)

# page_world, subpage of map, used to choose a world/planet e.g. Herta Space Station
page_world = Page(WORLD_CHECK)
page_world.link(BACK, destination=page_map)
page_map.link(MAP_GOTO_WORLD, destination=page_world)

# Tutorial
page_tutorial = Page(TUTORIAL_CHECK)
page_tutorial.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_TUTORIAL, destination=page_tutorial)

# Mission
page_mission = Page(MISSION_CHECK)
page_mission.link(CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_MISSION, destination=page_mission)

# Message
page_message = Page(MESSAGE_CLOSE)
page_message.link(MESSAGE_CLOSE, destination=page_main)
page_main.link(MAIN_GOTO_MESSAGE, destination=page_message)

# Camera
page_camera = Page(CAMERA_CHECK)
page_camera.link(CLOSE, destination=page_menu)
page_menu.link(MENU_GOTO_CAMERA, destination=page_camera)

# Synthesize
page_synthesize = Page(SYNTHESIZE_CHECK)
page_synthesize.link(CLOSE, destination=page_menu)
page_menu.link(MENU_GOTO_SYNTHESIZE, destination=page_synthesize)

# Assignment
page_assignment = Page(ASSIGNMENT_CHECK)
page_assignment.link(CLOSE, destination=page_main)
page_menu.link(MENU_GOTO_ASSIGNMENT, destination=page_assignment)

# Forgotten Hall
page_forgotten_hall = Page(FORGOTTEN_HALL_CHECK)
page_forgotten_hall.link(CLOSE, destination=page_main)

```

`tasks/base/popup.py`:

```py
from module.base.base import ModuleBase
from tasks.base.assets.assets_base_popup import *


class PopupHandler(ModuleBase):
    def handle_reward(self, interval=5) -> bool:
        """
        Args:
            interval:

        Returns:
            If handled.
        """
        if self.appear_then_click(GET_REWARD, interval=interval):
            return True

        return False

    def handle_battle_pass_notification(self, interval=5) -> bool:
        """
        Popup notification that you enter battle pass the first time.

        Args:
            interval:

        Returns:
            If handled.
        """
        if self.appear_then_click(BATTLE_PASS_NOTIFICATION, interval=interval):
            return True

        return False

    def handle_monthly_card_reward(self, interval=1) -> bool:
        """
        Popup at 04:00 server time if you have purchased the monthly card.

        Args:
            interval:

        Returns:
            If handled.
        """
        if self.appear_then_click(MONTHLY_CARD_REWARD, interval=interval):
            return True
        if self.appear_then_click(MONTHLY_CARD_GET_ITEM, interval=interval):
            return True

        return False

```

`tasks/base/ui.py`:

```py
from module.base.button import ButtonWrapper
from module.base.decorator import run_once
from module.base.timer import Timer
from module.exception import GameNotRunningError, GamePageUnknownError
from module.logger import logger
from module.ocr.ocr import Ocr
from tasks.base.assets.assets_base_page import CLOSE
from tasks.base.page import Page, page_main
from tasks.base.popup import PopupHandler
from tasks.combat.assets.assets_combat_finish import COMBAT_EXIT
from tasks.combat.assets.assets_combat_prepare import COMBAT_PREPARE


class UI(PopupHandler):
    ui_current: Page
    ui_main_confirm_timer = Timer(0.2, count=0)

    def ui_page_appear(self, page):
        """
        Args:
            page (Page):
        """
        return self.appear(page.check_button)

    def ui_get_current_page(self, skip_first_screenshot=True):
        """
        Args:
            skip_first_screenshot:

        Returns:
            Page:

        Raises:
            GameNotRunningError:
            GamePageUnknownError:
        """
        logger.info("UI get current page")

        @run_once
        def app_check():
            if not self.device.app_is_running():
                raise GameNotRunningError("Game not running")

        @run_once
        def minicap_check():
            if self.config.Emulator_ControlMethod == "uiautomator2":
                self.device.uninstall_minicap()

        @run_once
        def rotation_check():
            self.device.get_orientation()

        timeout = Timer(10, count=20).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
                if not hasattr(self.device, "image") or self.device.image is None:
                    self.device.screenshot()
            else:
                self.device.screenshot()

            # End
            if timeout.reached():
                break

            # Known pages
            for page in Page.iter_pages():
                if page.check_button is None:
                    continue
                if self.ui_page_appear(page=page):
                    logger.attr("UI", page.name)
                    self.ui_current = page
                    return page

            # Unknown page but able to handle
            logger.info("Unknown ui page")
            if self.ui_additional():
                timeout.reset()
                continue

            app_check()
            minicap_check()
            rotation_check()

        # Unknown page, need manual switching
        logger.warning("Unknown ui page")
        logger.attr("EMULATOR__SCREENSHOT_METHOD", self.config.Emulator_ScreenshotMethod)
        logger.attr("EMULATOR__CONTROL_METHOD", self.config.Emulator_ControlMethod)
        logger.attr("Lang", self.config.LANG)
        logger.warning("Starting from current page is not supported")
        logger.warning(f"Supported page: {[str(page) for page in Page.iter_pages()]}")
        logger.warning('Supported page: Any page with a "HOME" button on the upper-right')
        logger.critical("Please switch to a supported page before starting SRC")
        raise GamePageUnknownError

    def ui_goto(self, destination, skip_first_screenshot=True):
        """
        Args:
            destination (Page):
            skip_first_screenshot:
        """
        # Create connection
        Page.init_connection(destination)
        self.interval_clear(list(Page.iter_check_buttons()))

        logger.hr(f"UI goto {destination}")
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # Destination page
            if self.ui_page_appear(destination):
                logger.info(f'Page arrive: {destination}')
                if self.ui_page_confirm(destination):
                    logger.info(f'Page arrive confirm {destination}')
                break

            # Other pages
            clicked = False
            for page in Page.iter_pages():
                if page.parent is None or page.check_button is None:
                    continue
                if self.appear(page.check_button, interval=5):
                    logger.info(f'Page switch: {page} -> {page.parent}')
                    if self.ui_page_confirm(page):
                        logger.info(f'Page arrive confirm {page}')
                    button = page.links[page.parent]
                    self.device.click(button)
                    self.ui_button_interval_reset(button)
                    clicked = True
                    break
            if clicked:
                continue

            # Additional
            if self.ui_additional():
                continue

        # Reset connection
        Page.clear_connection()

    def ui_ensure(self, destination, skip_first_screenshot=True):
        """
        Args:
            destination (Page):
            skip_first_screenshot:

        Returns:
            bool: If UI switched.
        """
        logger.hr("UI ensure")
        self.ui_get_current_page(skip_first_screenshot=skip_first_screenshot)
        if self.ui_current == destination:
            logger.info("Already at %s" % destination)
            return False
        else:
            logger.info("Goto %s" % destination)
            self.ui_goto(destination, skip_first_screenshot=True)
            return True

    def ui_ensure_index(
            self,
            index,
            letter,
            next_button,
            prev_button,
            skip_first_screenshot=False,
            fast=True,
            interval=(0.2, 0.3),
    ):
        """
        Args:
            index (int):
            letter (Ocr, callable): OCR button.
            next_button (Button):
            prev_button (Button):
            skip_first_screenshot (bool):
            fast (bool): Default true. False when index is not continuous.
            interval (tuple, int, float): Seconds between two click.
        """
        logger.hr("UI ensure index")
        retry = Timer(1, count=2)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if isinstance(letter, Ocr):
                current = letter.ocr_single_line(self.device.image)
            else:
                current = letter(self.device.image)

            logger.attr("Index", current)
            diff = index - current
            if diff == 0:
                break
            if current == 0:
                logger.warning(f'ui_ensure_index got an empty current value: {current}')
                continue

            if retry.reached():
                button = next_button if diff > 0 else prev_button
                if fast:
                    self.device.multi_click(button, n=abs(diff), interval=interval)
                else:
                    self.device.click(button)
                retry.reset()

    def ui_click(
            self,
            click_button,
            check_button,
            appear_button=None,
            additional=None,
            retry_wait=5,
            skip_first_screenshot=True,
    ):
        """
        Args:
            click_button (ButtonWrapper):
            check_button (ButtonWrapper, callable, list[ButtonWrapper], tuple[ButtonWrapper]):
            appear_button (ButtonWrapper, callable, list[ButtonWrapper], tuple[ButtonWrapper]):
            additional (callable):
            retry_wait (int, float):
            skip_first_screenshot (bool):
        """
        if appear_button is None:
            appear_button = click_button
        logger.info(f'UI click: {appear_button} -> {check_button}')

        def process_appear(button):
            if isinstance(button, ButtonWrapper):
                return self.appear(button)
            elif callable(button):
                return button()
            elif isinstance(button, (list, tuple)):
                for b in button:
                    if self.appear(b):
                        return True
                return False
            else:
                return self.appear(button)

        click_timer = Timer(retry_wait, count=retry_wait // 0.5)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if process_appear(check_button):
                break

            # Click
            if click_timer.reached():
                if process_appear(appear_button):
                    self.device.click(click_button)
                    click_timer.reset()
                    continue
            if additional is not None:
                if additional():
                    continue

    def is_in_main(self):
        return self.appear(page_main.check_button)

    def ui_goto_main(self):
        return self.ui_ensure(destination=page_main)

    def ui_additional(self) -> bool:
        """
        Handle all possible popups during UI switching.

        Returns:
            If handled any popup.
        """
        if self.handle_reward():
            return True
        if self.handle_battle_pass_notification():
            return True
        if self.handle_monthly_card_reward():
            return True
        if self.appear(COMBAT_PREPARE, interval=5):
            logger.info(f'UI additional: {COMBAT_PREPARE} -> {CLOSE}')
            self.device.click(CLOSE)
        if self.appear_then_click(COMBAT_EXIT, interval=5):
            return True

        return False

    def _ui_button_confirm(
            self,
            button,
            confirm=Timer(0.1, count=0),
            timeout=Timer(2, count=6),
            skip_first_screenshot=True
    ):
        confirm.reset()
        timeout.reset()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning(f'_ui_button_confirm({button}) timeout')
                break

            if self.appear(button):
                if confirm.reached():
                    break
            else:
                confirm.reset()

    def ui_page_confirm(self, page):
        """
        Args:
            page (Page):

        Returns:
            bool: If handled
        """
        if page == page_main:
            self._ui_button_confirm(page.check_button)
            return True

        return False

    def ui_button_interval_reset(self, button):
        """
        Reset interval of some button to avoid mistaken clicks

        Args:
            button (Button):
        """
        pass

```

`tasks/battle_pass/assets/assets_battle_pass.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CLOSE_CHOOSE_GIFT = ButtonWrapper(
    name='CLOSE_CHOOSE_GIFT',
    share=Button(
        file='./assets/share/battle_pass/CLOSE_CHOOSE_GIFT.png',
        area=(387, 634, 412, 658),
        search=(367, 614, 432, 678),
        color=(104, 99, 86),
        button=(387, 634, 412, 658),
    ),
)
EXP_CLAIM_ALL = ButtonWrapper(
    name='EXP_CLAIM_ALL',
    share=Button(
        file='./assets/share/battle_pass/EXP_CLAIM_ALL.png',
        area=(1016, 664, 1036, 686),
        search=(996, 644, 1056, 706),
        color=(118, 98, 58),
        button=(1016, 664, 1036, 686),
    ),
)
MISSIONS_CHECK = ButtonWrapper(
    name='MISSIONS_CHECK',
    share=Button(
        file='./assets/share/battle_pass/MISSIONS_CHECK.png',
        area=(44, 210, 74, 230),
        search=(24, 190, 94, 250),
        color=(68, 69, 68),
        button=(44, 210, 74, 230),
    ),
)
MISSIONS_CLICK = ButtonWrapper(
    name='MISSIONS_CLICK',
    share=Button(
        file='./assets/share/battle_pass/MISSIONS_CLICK.png',
        area=(44, 211, 74, 230),
        search=(24, 191, 94, 250),
        color=(145, 143, 139),
        button=(44, 211, 74, 230),
    ),
)
MISSIONS_LOADED = ButtonWrapper(
    name='MISSIONS_LOADED',
    share=Button(
        file='./assets/share/battle_pass/MISSIONS_LOADED.png',
        area=(1163, 573, 1179, 589),
        search=(1143, 553, 1199, 609),
        color=(186, 183, 170),
        button=(1163, 573, 1179, 589),
    ),
)
MISSION_PAGE_SCROLL = ButtonWrapper(
    name='MISSION_PAGE_SCROLL',
    share=Button(
        file='./assets/share/battle_pass/MISSION_PAGE_SCROLL.png',
        area=(1186, 215, 1190, 601),
        search=(1166, 195, 1210, 621),
        color=(140, 140, 140),
        button=(1186, 215, 1190, 601),
    ),
)
OCR_BATTLE_PASS_QUEST = ButtonWrapper(
    name='OCR_BATTLE_PASS_QUEST',
    share=Button(
        file='./assets/share/battle_pass/OCR_BATTLE_PASS_QUEST.png',
        area=(372, 216, 1173, 591),
        search=(352, 196, 1193, 611),
        color=(185, 184, 180),
        button=(372, 216, 1173, 591),
    ),
)
OCR_LEVEL = ButtonWrapper(
    name='OCR_LEVEL',
    share=Button(
        file='./assets/share/battle_pass/OCR_LEVEL.png',
        area=(183, 93, 240, 134),
        search=(163, 73, 260, 154),
        color=(90, 79, 60),
        button=(183, 93, 240, 134),
    ),
)
OCR_REMAINING_TIME = ButtonWrapper(
    name='OCR_REMAINING_TIME',
    share=Button(
        file='./assets/share/battle_pass/OCR_REMAINING_TIME.png',
        area=(289, 89, 630, 132),
        search=(269, 69, 650, 152),
        color=(66, 63, 57),
        button=(289, 89, 630, 132),
    ),
)
PERIOD_MISSION_CLICK = ButtonWrapper(
    name='PERIOD_MISSION_CLICK',
    share=Button(
        file='./assets/share/battle_pass/PERIOD_MISSION_CLICK.png',
        area=(128, 478, 323, 578),
        search=(108, 458, 343, 598),
        color=(72, 65, 45),
        button=(128, 478, 323, 578),
    ),
)
REWARDS_CHECK = ButtonWrapper(
    name='REWARDS_CHECK',
    share=Button(
        file='./assets/share/battle_pass/REWARDS_CHECK.png',
        area=(39, 119, 78, 140),
        search=(19, 99, 98, 160),
        color=(131, 133, 133),
        button=(39, 119, 78, 140),
    ),
)
REWARDS_CLAIM_ALL = ButtonWrapper(
    name='REWARDS_CLAIM_ALL',
    cn=Button(
        file='./assets/cn/battle_pass/REWARDS_CLAIM_ALL.png',
        area=(827, 665, 907, 684),
        search=(807, 645, 927, 704),
        color=(172, 136, 69),
        button=(827, 665, 907, 684),
    ),
)
REWARDS_CLICK = ButtonWrapper(
    name='REWARDS_CLICK',
    share=Button(
        file='./assets/share/battle_pass/REWARDS_CLICK.png',
        area=(44, 118, 73, 132),
        search=(24, 98, 93, 152),
        color=(119, 119, 114),
        button=(44, 118, 73, 132),
    ),
)
REWARDS_LOADED = ButtonWrapper(
    name='REWARDS_LOADED',
    share=Button(
        file='./assets/share/battle_pass/REWARDS_LOADED.png',
        area=(173, 286, 248, 324),
        search=(153, 266, 268, 344),
        color=(96, 96, 94),
        button=(173, 286, 248, 324),
    ),
)
TODAY_MISSION_CLICK = ButtonWrapper(
    name='TODAY_MISSION_CLICK',
    share=Button(
        file='./assets/share/battle_pass/TODAY_MISSION_CLICK.png',
        area=(128, 192, 323, 334),
        search=(108, 172, 343, 354),
        color=(65, 59, 40),
        button=(128, 192, 323, 334),
    ),
)
WEEK_MISSION_CLICK = ButtonWrapper(
    name='WEEK_MISSION_CLICK',
    share=Button(
        file='./assets/share/battle_pass/WEEK_MISSION_CLICK.png',
        area=(128, 336, 323, 477),
        search=(108, 316, 343, 497),
        color=(68, 62, 42),
        button=(128, 336, 323, 477),
    ),
)

```

`tasks/battle_pass/battle_pass.py`:

```py
import datetime
import re

import numpy as np

from module.base.timer import Timer
from module.base.utils import get_color
from module.config.utils import get_server_next_update
from module.logger.logger import logger
from module.ocr.ocr import Digit, Duration, Ocr
from module.ocr.utils import split_and_pair_buttons
from module.ui.scroll import Scroll
from module.ui.switch import Switch
from tasks.base.assets.assets_base_page import BATTLE_PASS_CHECK, MAIN_GOTO_BATTLE_PASS
from tasks.base.assets.assets_base_popup import GET_REWARD
from tasks.base.page import page_battle_pass, page_main
from tasks.base.ui import UI
from tasks.battle_pass.assets.assets_battle_pass import *
from tasks.battle_pass.keywords import *

SWITCH_BATTLE_PASS_TAB = Switch('BattlePassTab', is_selector=True)
SWITCH_BATTLE_PASS_TAB.add_state(
    KEYWORD_BATTLE_PASS_TAB.Rewards,
    check_button=REWARDS_CHECK,
    click_button=REWARDS_CLICK
)
SWITCH_BATTLE_PASS_TAB.add_state(
    KEYWORD_BATTLE_PASS_TAB.Missions,
    check_button=MISSIONS_CHECK,
    click_button=MISSIONS_CLICK
)


class BattlePassMissionTab(Switch):
    def get(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            str: state name or 'unknown'.
        """
        for data in self.state_list:
            if main.image_color_count(data['check_button'], color=(250, 233, 153)):
                return data['state']

        return 'unknown'


SWITCH_BATTLE_PASS_MISSION_TAB = BattlePassMissionTab('BattlePassMissionTab', is_selector=True)
SWITCH_BATTLE_PASS_MISSION_TAB.add_state(
    KEYWORD_BATTLE_PASS_MISSION_TAB.Today_Missions,
    check_button=TODAY_MISSION_CLICK,
    click_button=TODAY_MISSION_CLICK
)
SWITCH_BATTLE_PASS_MISSION_TAB.add_state(
    KEYWORD_BATTLE_PASS_MISSION_TAB.This_Week_Missions,
    check_button=WEEK_MISSION_CLICK,
    click_button=WEEK_MISSION_CLICK
)
SWITCH_BATTLE_PASS_MISSION_TAB.add_state(
    KEYWORD_BATTLE_PASS_MISSION_TAB.This_Period_Missions,
    check_button=PERIOD_MISSION_CLICK,
    click_button=PERIOD_MISSION_CLICK
)


class BattlePassQuestOcr(Ocr):
    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'cn':
            result = re.sub("[jJ]", "」", result)
        return result


class BattlePassUI(UI):
    MAX_LEVEL = 50

    def _battle_pass_wait_rewards_loaded(self, skip_first_screenshot=True):
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning('Wait rewards tab loaded timeout')
                break
            if self.appear(REWARDS_LOADED):
                logger.info('Rewards tab loaded')
                break

    def _battle_pass_wait_missions_loaded(self, skip_first_screenshot=True, has_scroll=True):
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning('Wait missions tab loaded timeout')
                break
            if has_scroll:
                if self.appear(MISSION_PAGE_SCROLL):
                    logger.info('Rewards tab loaded')
                    break
            else:
                color = get_color(self.device.image, MISSIONS_LOADED.area)
                if np.mean(color) > 128:
                    logger.info('Missions tab loaded')
                    break

    def battle_pass_goto(self, state: KEYWORD_BATTLE_PASS_TAB):
        """
        Args:
            state:

        Examples:
            self = BattlePassUI('alas')
            self.device.screenshot()
            self.battle_pass_goto(KEYWORDS_DUNGEON_TAB.Missions)
            self.battle_pass_goto(KEYWORDS_DUNGEON_TAB.Rewards)
        """
        self.ui_ensure(page_battle_pass)
        if SWITCH_BATTLE_PASS_TAB.set(state, main=self):
            logger.info(f'Tab goto {state}, wait until loaded')
            if state == KEYWORD_BATTLE_PASS_TAB.Missions:
                self._battle_pass_wait_missions_loaded(has_scroll=False)
            if state == KEYWORD_BATTLE_PASS_TAB.Rewards:
                self._battle_pass_wait_rewards_loaded()

    def battle_pass_mission_tab_goto(self, state: KEYWORD_BATTLE_PASS_MISSION_TAB):
        self.battle_pass_goto(KEYWORD_BATTLE_PASS_TAB.Missions)
        if SWITCH_BATTLE_PASS_MISSION_TAB.set(state, main=self):
            logger.info(f'Tab goto {state}, wait until loaded')
            if state == KEYWORD_BATTLE_PASS_MISSION_TAB.Today_Missions:
                self._battle_pass_wait_missions_loaded(has_scroll=False)
            if state == KEYWORD_BATTLE_PASS_MISSION_TAB.This_Week_Missions:
                self._battle_pass_wait_missions_loaded()
            if state == KEYWORD_BATTLE_PASS_MISSION_TAB.This_Period_Missions:
                self._battle_pass_wait_missions_loaded()

    def handle_choose_gifts(self, interval=5):
        """
        Popup when you have purchase Nameless Glory

        Args:
            interval:

        Returns:
            If handled
        """
        if self.appear_then_click(CLOSE_CHOOSE_GIFT, interval=interval):
            return True

        return False

    def _claim_exp(self, skip_first_screenshot=True):
        logger.hr('Claim EXP', level=1)
        self.battle_pass_goto(KEYWORD_BATTLE_PASS_TAB.Missions)
        claimed = False
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if not self.appear(EXP_CLAIM_ALL):
                logger.info('No more EXP to claim')
                break
            if self.appear_then_click(EXP_CLAIM_ALL):
                claimed = True
                logger.info("All EXP claimed")
                continue

        logger.attr('EXP claimed', claimed)
        return claimed

    def _claim_rewards(self, skip_first_screenshot=True):
        logger.hr('Claim rewards', level=1)
        self.battle_pass_goto(KEYWORD_BATTLE_PASS_TAB.Rewards)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(GET_REWARD):
                logger.info('Get reward')
                break
            if self.appear(CLOSE_CHOOSE_GIFT):
                logger.info('Got reward but have gift to choose')
                break
            if self.appear_then_click(REWARDS_CLAIM_ALL):
                continue

        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(BATTLE_PASS_CHECK):
                logger.info("Claiming rewards complete")
                break
            if self.handle_choose_gifts():
                logger.info("You have unclaimed gift to choose")
                continue
            if self.handle_reward():
                continue

    def _get_battle_pass_level(self) -> int:
        digit = Digit(OCR_LEVEL)
        return digit.ocr_single_line(self.device.image)

    def _get_battle_pass_end(self) -> datetime.datetime:
        remain = Duration(OCR_REMAINING_TIME).ocr_single_line(self.device.image)
        future = get_server_next_update(self.config.Scheduler_ServerUpdate)
        future += datetime.timedelta(days=remain.days)
        return future

    def claim_battle_pass_rewards(self):
        """
        Returns:
            int: Current battle pass level

        Examples:
            self = BattlePassUI('alas')
            self.device.screenshot()
            self.claim_battle_pass_rewards()
        """
        with self.config.multi_set():
            previous_level = self._get_battle_pass_level()
            self.config.stored.BattlePassLevel.set(previous_level)
            quests = self.battle_pass_quests_recognition(
                KEYWORD_BATTLE_PASS_MISSION_TAB.Today_Missions, has_scroll=False)
            self.config.stored.BattlePassTodayQuest.write_quests(quests)
        if previous_level == self.MAX_LEVEL:
            return previous_level

        claimed_exp = self._claim_exp()
        current_level = self._get_battle_pass_level()
        self.config.stored.BattlePassLevel.set(current_level)
        if claimed_exp and current_level > previous_level:
            logger.info("Upgraded, go to claim rewards")
            self._claim_rewards()
        return current_level

    def ocr_single_page(self):
        """
        Returns incomplete quests only
        """
        ocr = BattlePassQuestOcr(OCR_BATTLE_PASS_QUEST)
        results = ocr.matched_ocr(self.device.image, [BattlePassQuest, BattlePassQuestState])

        def completed_state(state):
            return state != KEYWORD_BATTLE_PASS_QUEST_STATE.Navigate

        return [incomplete_quest for incomplete_quest, _ in
                split_and_pair_buttons(results, split_func=completed_state, relative_area=(0, 0, 800, 100))]

    def battle_pass_quests_recognition(
            self,
            page: KEYWORD_BATTLE_PASS_MISSION_TAB,
            has_scroll=True,
    ) -> list[BattlePassQuest]:
        """
        Args:
            page: One of the followings:
                KEYWORD_BATTLE_PASS_MISSION_TAB.Today_Missions
                KEYWORD_BATTLE_PASS_MISSION_TAB.This_Week_Missions
                KEYWORD_BATTLE_PASS_MISSION_TAB.This_Period_Missions
            has_scroll: need to scroll to recognize all quests

        Returns:

        """
        logger.info(f"Recognizing battle pass quests at {page}")
        self.battle_pass_mission_tab_goto(page)
        if not has_scroll:
            results = self.ocr_single_page()
            results = [result.matched_keyword for result in results]
        else:
            scroll = Scroll(MISSION_PAGE_SCROLL, color=(198, 198, 198))
            scroll.set_top(main=self)
            results = self.ocr_single_page()
            while not scroll.at_bottom(main=self):
                scroll.next_page(main=self)
                results += [result for result in self.ocr_single_page() if result not in results]
                results = [result.matched_keyword for result in results]
        return results

    def has_battle_pass_entrance(self, skip_first_screenshot=True):
        """
        Pages:
            in: page_main
        """
        timeout = Timer(0.5, count=2).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                break

            if self.appear(MAIN_GOTO_BATTLE_PASS, similarity=0.75):
                return True
            else:
                logger.info('No battle pass entrance, probably a gap between two periods')
                continue

        return False

    def run(self):
        self.ui_ensure(page_main)
        if not self.has_battle_pass_entrance():
            self.config.task_delay(server_update=True)
            self.config.task_stop()

        self.ui_goto(page_battle_pass)
        current_level = self.claim_battle_pass_rewards()
        if current_level == self.MAX_LEVEL:
            self.config.task_delay(target=self._get_battle_pass_end())
        else:
            self.config.task_delay(server_update=True)

```

`tasks/battle_pass/keywords/__init__.py`:

```py
import tasks.battle_pass.keywords.mission_tab as KEYWORD_BATTLE_PASS_MISSION_TAB
import tasks.battle_pass.keywords.quest as KEYWORD_BATTLE_PASS_QUEST
import tasks.battle_pass.keywords.quest_state as KEYWORD_BATTLE_PASS_QUEST_STATE
import tasks.battle_pass.keywords.tab as KEYWORD_BATTLE_PASS_TAB
from tasks.battle_pass.keywords.classes import BattlePassTab, BattlePassMissionTab, BattlePassQuest, \
    BattlePassQuestState

```

`tasks/battle_pass/keywords/classes.py`:

```py
import re
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword


@dataclass(repr=False)
class BattlePassTab(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class BattlePassMissionTab(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class BattlePassQuest(Keyword):
    instances: ClassVar = {}

    @classmethod
    def _compare(cls, name, keyword):
        def remove_digit(text):
            return re.sub(r"\d", "", text)

        return remove_digit(name) == remove_digit(keyword)


@dataclass(repr=False)
class BattlePassQuestState(Keyword):
    instances: ClassVar = {}

```

`tasks/battle_pass/keywords/mission_tab.py`:

```py
from .classes import BattlePassMissionTab

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Today_Missions = BattlePassMissionTab(
    id=1,
    name='Today_Missions',
    cn='本日任务',
    cht='本日任務',
    en="Today's Missions",
    jp='本日のクエスト',
)
This_Week_Missions = BattlePassMissionTab(
    id=2,
    name='This_Week_Missions',
    cn='本周任务',
    cht='本週任務',
    en="This Week's Missions",
    jp='今週のクエスト',
)
This_Period_Missions = BattlePassMissionTab(
    id=3,
    name='This_Period_Missions',
    cn='本期任务',
    cht='本期任務',
    en="This Period's Missions",
    jp='今期のクエスト',
)

```

`tasks/battle_pass/keywords/quest.py`:

```py
from .classes import BattlePassQuest

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Log_in_to_the_game = BattlePassQuest(
    id=1,
    name='Log_in_to_the_game',
    cn='登录游戏',
    cht='登入遊戲',
    en='Log in to the game',
    jp='ゲームにログインする',
)
Consume_1_Trailblaze_Power = BattlePassQuest(
    id=2,
    name='Consume_1_Trailblaze_Power',
    cn='累计消耗1点开拓力',
    cht='累積消耗1點開拓力',
    en='Consume 1 Trailblaze Power',
    jp='累計で開拓力×1を消費する',
)
Dispatch_1_assignments = BattlePassQuest(
    id=3,
    name='Dispatch_1_assignments',
    cn='派遣1次委托',
    cht='派遣1次委託',
    en='Dispatch 1 assignment(s)',
    jp='依頼に1回派遣する',
)
Reach_500_on_Daily_Training_Activity = BattlePassQuest(
    id=4,
    name='Reach_500_on_Daily_Training_Activity',
    cn='每日实训活跃度达到500',
    cht='每日實訓活躍度達到500',
    en='Reach 500 on Daily Training Activity',
    jp='デイリー訓練のアクティブ度が500に到達する',
)
Complete_Simulated_Universe_1_times = BattlePassQuest(
    id=5,
    name='Complete_Simulated_Universe_1_times',
    cn='完成1次「模拟宇宙」',
    cht='完成1次「模擬宇宙」',
    en='Complete Simulated Universe 1 time(s)',
    jp='「模擬宇宙」を1回クリアする',
)
Clear_Calyx_1_times = BattlePassQuest(
    id=6,
    name='Clear_Calyx_1_times',
    cn='完成1次「拟造花萼」',
    cht='完成1次「擬造花萼」',
    en='Clear Calyx 1 time(s)',
    jp='「疑似花萼」を1回クリアする',
)
Complete_Echo_of_War_1_times = BattlePassQuest(
    id=7,
    name='Complete_Echo_of_War_1_times',
    cn='完成1次「历战余响」',
    cht='完成1次「歷戰餘響」',
    en='Complete Echo of War 1 time(s)',
    jp='「歴戦余韻」を1回クリアする',
)
Use_300000_credits = BattlePassQuest(
    id=8,
    name='Use_300000_credits',
    cn='累计消耗30万信用点',
    cht='累積消耗30萬信用點',
    en='Use 300,000 credits',
    jp='累計で信用ポイント×30万を消費する',
)
Synthesize_Consumables_1_times = BattlePassQuest(
    id=9,
    name='Synthesize_Consumables_1_times',
    cn='累计合成消耗品1次',
    cht='累積合成消耗品1次',
    en='Synthesize Consumables 1 time(s)',
    jp='消耗品を累計1回合成する',
)
Clear_Stagnant_Shadow_1_times = BattlePassQuest(
    id=10,
    name='Clear_Stagnant_Shadow_1_times',
    cn='完成1次「凝滞虚影」',
    cht='完成1次「凝滯虛影」',
    en='Clear Stagnant Shadow 1 time(s)',
    jp='「凝結虚影」を1回クリアする',
)
Clear_Cavern_of_Corrosion_1_times = BattlePassQuest(
    id=11,
    name='Clear_Cavern_of_Corrosion_1_times',
    cn='完成1次「侵蚀隧洞」',
    cht='完成1次「侵蝕隧洞」',
    en='Clear Cavern of Corrosion 1 time(s)',
    jp='「侵蝕トンネル」を1回クリアする',
)

```

`tasks/battle_pass/keywords/quest_state.py`:

```py
from .classes import BattlePassQuestState

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Claim = BattlePassQuestState(
    id=1,
    name='Claim',
    cn='领取',
    cht='領取',
    en='Claim',
    jp='受取',
)
Navigate = BattlePassQuestState(
    id=2,
    name='Navigate',
    cn='追踪',
    cht='追蹤',
    en='Navigate',
    jp='追跡',
)

```

`tasks/battle_pass/keywords/tab.py`:

```py
from .classes import BattlePassTab

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Rewards = BattlePassTab(
    id=1,
    name='Rewards',
    cn='奖励',
    cht='獎勵',
    en='Rewards',
    jp='報酬',
)
Missions = BattlePassTab(
    id=2,
    name='Missions',
    cn='任务',
    cht='任務',
    en='Missions',
    jp='クエスト',
)

```

`tasks/character/keywords/__init__.py`:

```py
import tasks.character.keywords.character_list as KEYWORD_CHARACTER_LIST
from tasks.character.keywords.classes import CharacterList
```

`tasks/character/keywords/character_list.py`:

```py
from .classes import CharacterList

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Arlan = CharacterList(
    id=1,
    name='Arlan',
    cn='阿兰',
    cht='阿蘭',
    en='Arlan',
    jp='アーラン',
)
Asta = CharacterList(
    id=2,
    name='Asta',
    cn='艾丝妲',
    cht='艾絲妲',
    en='Asta',
    jp='アスター',
)
Bailu = CharacterList(
    id=3,
    name='Bailu',
    cn='白露',
    cht='白露',
    en='Bailu',
    jp='白露',
)
Blade = CharacterList(
    id=4,
    name='Blade',
    cn='刃',
    cht='刃',
    en='Blade',
    jp='刃',
)
Bronya = CharacterList(
    id=5,
    name='Bronya',
    cn='布洛妮娅',
    cht='布洛妮婭',
    en='Bronya',
    jp='ブローニャ',
)
Clara = CharacterList(
    id=6,
    name='Clara',
    cn='克拉拉',
    cht='克拉拉',
    en='Clara',
    jp='クラーラ',
)
DanHeng = CharacterList(
    id=7,
    name='DanHeng',
    cn='丹恒',
    cht='丹恆',
    en='Dan Heng',
    jp='丹恒',
)
DanHengImbibitorLunae = CharacterList(
    id=8,
    name='DanHengImbibitorLunae',
    cn='丹恒•饮月',
    cht='丹恆•飲月',
    en='Dan Heng • Imbibitor Lunae',
    jp='丹恒・飲月',
)
FuXuan = CharacterList(
    id=9,
    name='FuXuan',
    cn='符玄',
    cht='符玄',
    en='Fu Xuan',
    jp='符玄',
)
Gepard = CharacterList(
    id=10,
    name='Gepard',
    cn='杰帕德',
    cht='傑帕德',
    en='Gepard',
    jp='ジェパード',
)
Herta = CharacterList(
    id=11,
    name='Herta',
    cn='黑塔',
    cht='黑塔',
    en='Herta',
    jp='ヘルタ',
)
Himeko = CharacterList(
    id=12,
    name='Himeko',
    cn='姬子',
    cht='姬子',
    en='Himeko',
    jp='姫子',
)
Hook = CharacterList(
    id=13,
    name='Hook',
    cn='虎克',
    cht='虎克',
    en='Hook',
    jp='フック',
)
JingYuan = CharacterList(
    id=14,
    name='JingYuan',
    cn='景元',
    cht='景元',
    en='Jing Yuan',
    jp='景元',
)
Kafka = CharacterList(
    id=15,
    name='Kafka',
    cn='卡芙卡',
    cht='卡芙卡',
    en='Kafka',
    jp='カフカ',
)
Luka = CharacterList(
    id=16,
    name='Luka',
    cn='卢卡',
    cht='盧卡',
    en='Luka',
    jp='ルカ',
)
Luocha = CharacterList(
    id=17,
    name='Luocha',
    cn='罗刹',
    cht='羅剎',
    en='Luocha',
    jp='羅刹',
)
Lynx = CharacterList(
    id=18,
    name='Lynx',
    cn='玲可',
    cht='玲可',
    en='Lynx',
    jp='リンクス',
)
March7th = CharacterList(
    id=19,
    name='March7th',
    cn='三月七',
    cht='三月七',
    en='March 7th',
    jp='三月なのか',
)
Natasha = CharacterList(
    id=20,
    name='Natasha',
    cn='娜塔莎',
    cht='娜塔莎',
    en='Natasha',
    jp='ナターシャ',
)
Pela = CharacterList(
    id=21,
    name='Pela',
    cn='佩拉',
    cht='佩拉',
    en='Pela',
    jp='ペラ',
)
Qingque = CharacterList(
    id=22,
    name='Qingque',
    cn='青雀',
    cht='青雀',
    en='Qingque',
    jp='青雀',
)
Sampo = CharacterList(
    id=23,
    name='Sampo',
    cn='桑博',
    cht='桑博',
    en='Sampo',
    jp='サンポ',
)
Seele = CharacterList(
    id=24,
    name='Seele',
    cn='希儿',
    cht='希兒',
    en='Seele',
    jp='ゼーレ',
)
Serval = CharacterList(
    id=25,
    name='Serval',
    cn='希露瓦',
    cht='希露瓦',
    en='Serval',
    jp='セーバル',
)
SilverWolf = CharacterList(
    id=26,
    name='SilverWolf',
    cn='银狼',
    cht='銀狼',
    en='Silver Wolf',
    jp='銀狼',
)
Sushang = CharacterList(
    id=27,
    name='Sushang',
    cn='素裳',
    cht='素裳',
    en='Sushang',
    jp='素裳',
)
Tingyun = CharacterList(
    id=28,
    name='Tingyun',
    cn='停云',
    cht='停雲',
    en='Tingyun',
    jp='停雲',
)
TrailblazerDestruction = CharacterList(
    id=29,
    name='TrailblazerDestruction',
    cn='Trailblazer•毁灭',
    cht='Trailblazer•毀滅',
    en='Trailblazer: Destruction',
    jp='Trailblazer・壊滅',
)
TrailblazerPreservation = CharacterList(
    id=30,
    name='TrailblazerPreservation',
    cn='Trailblazer•存护',
    cht='Trailblazer•存護',
    en='Trailblazer: Preservation',
    jp='Trailblazer・存護',
)
Welt = CharacterList(
    id=31,
    name='Welt',
    cn='瓦尔特',
    cht='瓦爾特',
    en='Welt',
    jp='ヴェルト',
)
Yanqing = CharacterList(
    id=32,
    name='Yanqing',
    cn='彦卿',
    cht='彥卿',
    en='Yanqing',
    jp='彦卿',
)
Yukong = CharacterList(
    id=33,
    name='Yukong',
    cn='驭空',
    cht='馭空',
    en='Yukong',
    jp='御空',
)

```

`tasks/character/keywords/classes.py`:

```py
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword

@dataclass(repr=False)
class CharacterList(Keyword):
    instances: ClassVar = {}
```

`tasks/combat/assets/assets_combat_finish.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

COMBAT_AGAIN = ButtonWrapper(
    name='COMBAT_AGAIN',
    cn=Button(
        file='./assets/cn/combat/finish/COMBAT_AGAIN.png',
        area=(846, 601, 924, 619),
        search=(826, 581, 944, 639),
        color=(162, 162, 162),
        button=(709, 592, 979, 628),
    ),
)
COMBAT_EXIT = ButtonWrapper(
    name='COMBAT_EXIT',
    cn=Button(
        file='./assets/cn/combat/finish/COMBAT_EXIT.png',
        area=(396, 601, 475, 619),
        search=(376, 581, 495, 639),
        color=(156, 156, 156),
        button=(301, 593, 570, 628),
    ),
)

```

`tasks/combat/assets/assets_combat_interact.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

DUNGEON_COMBAT_INTERACT = ButtonWrapper(
    name='DUNGEON_COMBAT_INTERACT',
    share=Button(
        file='./assets/share/combat/interact/DUNGEON_COMBAT_INTERACT.png',
        area=(753, 419, 781, 441),
        search=(733, 399, 801, 461),
        color=(199, 197, 198),
        button=(750, 411, 997, 448),
    ),
)

```

`tasks/combat/assets/assets_combat_prepare.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

COMBAT_PREPARE = ButtonWrapper(
    name='COMBAT_PREPARE',
    cn=Button(
        file='./assets/cn/combat/prepare/COMBAT_PREPARE.png',
        area=(1071, 649, 1110, 667),
        search=(1051, 629, 1130, 687),
        color=(141, 140, 141),
        button=(956, 640, 1224, 676),
    ),
)
OCR_TRAILBLAZE_POWER = ButtonWrapper(
    name='OCR_TRAILBLAZE_POWER',
    share=Button(
        file='./assets/share/combat/prepare/OCR_TRAILBLAZE_POWER.png',
        area=(998, 26, 1130, 48),
        search=(978, 6, 1150, 68),
        color=(77, 76, 87),
        button=(998, 26, 1130, 48),
    ),
)
OCR_WAVE_COST = ButtonWrapper(
    name='OCR_WAVE_COST',
    share=Button(
        file='./assets/share/combat/prepare/OCR_WAVE_COST.png',
        area=(845, 649, 891, 667),
        search=(825, 629, 911, 687),
        color=(50, 53, 57),
        button=(845, 649, 891, 667),
    ),
)
OCR_WAVE_COUNT = ButtonWrapper(
    name='OCR_WAVE_COUNT',
    share=Button(
        file='./assets/share/combat/prepare/OCR_WAVE_COUNT.png',
        area=(911, 555, 1151, 581),
        search=(891, 535, 1171, 601),
        color=(32, 34, 37),
        button=(911, 555, 1151, 581),
    ),
)
WAVE_MINUS = ButtonWrapper(
    name='WAVE_MINUS',
    share=Button(
        file='./assets/share/combat/prepare/WAVE_MINUS.png',
        area=(825, 577, 858, 599),
        search=(805, 557, 878, 619),
        color=(239, 239, 239),
        button=(825, 577, 858, 599),
    ),
)
WAVE_PLUS = ButtonWrapper(
    name='WAVE_PLUS',
    share=Button(
        file='./assets/share/combat/prepare/WAVE_PLUS.png',
        area=(1204, 578, 1236, 598),
        search=(1184, 558, 1256, 618),
        color=(229, 229, 229),
        button=(1204, 578, 1236, 598),
    ),
)

```

`tasks/combat/assets/assets_combat_state.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

COMBAT_AUTO = ButtonWrapper(
    name='COMBAT_AUTO',
    share=Button(
        file='./assets/share/combat/state/COMBAT_AUTO.png',
        area=(1113, 22, 1183, 58),
        search=(1093, 2, 1203, 78),
        color=(135, 137, 131),
        button=(1113, 22, 1183, 58),
    ),
)
COMBAT_PAUSE = ButtonWrapper(
    name='COMBAT_PAUSE',
    share=Button(
        file='./assets/share/combat/state/COMBAT_PAUSE.png',
        area=(1218, 27, 1245, 53),
        search=(1198, 7, 1265, 73),
        color=(125, 129, 134),
        button=(1218, 27, 1245, 53),
    ),
)
COMBAT_SPEED_2X = ButtonWrapper(
    name='COMBAT_SPEED_2X',
    share=Button(
        file='./assets/share/combat/state/COMBAT_SPEED_2X.png',
        area=(1029, 22, 1099, 58),
        search=(1009, 2, 1119, 78),
        color=(138, 143, 146),
        button=(1029, 22, 1099, 58),
    ),
)

```

`tasks/combat/assets/assets_combat_support.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

COMBAT_SUPPORT_ADD = ButtonWrapper(
    name='COMBAT_SUPPORT_ADD',
    share=Button(
        file='./assets/share/combat/support/COMBAT_SUPPORT_ADD.png',
        area=(1032, 649, 1132, 680),
        search=(1012, 629, 1152, 700),
        color=(228, 228, 228),
        button=(1032, 649, 1132, 680),
    ),
)
COMBAT_SUPPORT_LIST = ButtonWrapper(
    name='COMBAT_SUPPORT_LIST',
    share=Button(
        file='./assets/share/combat/support/COMBAT_SUPPORT_LIST.png',
        area=(57, 637, 100, 680),
        search=(37, 617, 120, 700),
        color=(212, 213, 215),
        button=(57, 637, 100, 680),
    ),
)
COMBAT_SUPPORT_LIST_GRID = ButtonWrapper(
    name='COMBAT_SUPPORT_LIST_GRID',
    share=Button(
        file='./assets/share/combat/support/COMBAT_SUPPORT_LIST_GRID.png',
        area=(64, 115, 159, 634),
        search=(44, 95, 179, 654),
        color=(119, 108, 132),
        button=(64, 115, 159, 634),
    ),
)
COMBAT_SUPPORT_LIST_SCROLL = ButtonWrapper(
    name='COMBAT_SUPPORT_LIST_SCROLL',
    share=Button(
        file='./assets/share/combat/support/COMBAT_SUPPORT_LIST_SCROLL.png',
        area=(448, 112, 452, 610),
        search=(428, 92, 472, 630),
        color=(127, 133, 150),
        button=(448, 112, 452, 610),
    ),
)
COMBAT_SUPPORT_SELECTED = ButtonWrapper(
    name='COMBAT_SUPPORT_SELECTED',
    share=Button(
        file='./assets/share/combat/support/COMBAT_SUPPORT_SELECTED.png',
        area=(69, 114, 91, 116),
        search=(49, 94, 111, 136),
        color=(254, 254, 254),
        button=(69, 114, 91, 116),
    ),
)

```

`tasks/combat/assets/assets_combat_team.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

COMBAT_TEAM_DISMISSSUPPORT = ButtonWrapper(
    name='COMBAT_TEAM_DISMISSSUPPORT',
    share=Button(
        file='./assets/share/combat/team/COMBAT_TEAM_DISMISSSUPPORT.png',
        area=(1127, 477, 1154, 501),
        search=(1107, 457, 1174, 521),
        color=(132, 140, 150),
        button=(1127, 477, 1154, 501),
    ),
)
COMBAT_TEAM_PREPARE = ButtonWrapper(
    name='COMBAT_TEAM_PREPARE',
    cn=Button(
        file='./assets/cn/combat/team/COMBAT_TEAM_PREPARE.png',
        area=(1037, 648, 1116, 667),
        search=(1017, 628, 1136, 687),
        color=(159, 159, 159),
        button=(958, 641, 1193, 676),
    ),
)
COMBAT_TEAM_SUPPORT = ButtonWrapper(
    name='COMBAT_TEAM_SUPPORT',
    share=Button(
        file='./assets/share/combat/team/COMBAT_TEAM_SUPPORT.png',
        area=(1123, 477, 1158, 503),
        search=(1103, 457, 1178, 523),
        color=(195, 215, 201),
        button=(1123, 477, 1158, 503),
    ),
)
TEAM_1 = ButtonWrapper(
    name='TEAM_1',
    share=Button(
        file='./assets/share/combat/team/TEAM_1.png',
        area=(365, 29, 411, 65),
        search=(345, 9, 431, 85),
        color=(113, 109, 117),
        button=(365, 29, 411, 65),
    ),
)
TEAM_2 = ButtonWrapper(
    name='TEAM_2',
    share=Button(
        file='./assets/share/combat/team/TEAM_2.png',
        area=(467, 29, 511, 65),
        search=(447, 9, 531, 85),
        color=(126, 124, 130),
        button=(467, 29, 511, 65),
    ),
)
TEAM_3 = ButtonWrapper(
    name='TEAM_3',
    share=Button(
        file='./assets/share/combat/team/TEAM_3.png',
        area=(567, 28, 614, 66),
        search=(547, 8, 634, 86),
        color=(115, 116, 123),
        button=(567, 28, 614, 66),
    ),
)
TEAM_4 = ButtonWrapper(
    name='TEAM_4',
    share=Button(
        file='./assets/share/combat/team/TEAM_4.png',
        area=(666, 29, 712, 63),
        search=(646, 9, 732, 83),
        color=(106, 103, 98),
        button=(666, 29, 712, 63),
    ),
)
TEAM_5 = ButtonWrapper(
    name='TEAM_5',
    share=Button(
        file='./assets/share/combat/team/TEAM_5.png',
        area=(767, 30, 816, 66),
        search=(747, 10, 836, 86),
        color=(106, 100, 96),
        button=(767, 30, 816, 66),
    ),
)
TEAM_6 = ButtonWrapper(
    name='TEAM_6',
    share=Button(
        file='./assets/share/combat/team/TEAM_6.png',
        area=(867, 29, 912, 63),
        search=(847, 9, 932, 83),
        color=(113, 106, 101),
        button=(867, 29, 912, 63),
    ),
)

```

`tasks/combat/combat.py`:

```py
from module.base.decorator import run_once
from module.logger import logger
from tasks.base.assets.assets_base_page import CLOSE
from tasks.combat.assets.assets_combat_finish import COMBAT_AGAIN, COMBAT_EXIT
from tasks.combat.assets.assets_combat_prepare import COMBAT_PREPARE
from tasks.combat.assets.assets_combat_team import COMBAT_TEAM_PREPARE, COMBAT_TEAM_SUPPORT
from tasks.combat.interact import CombatInteract
from tasks.combat.prepare import CombatPrepare
from tasks.combat.state import CombatState
from tasks.combat.support import CombatSupport
from tasks.combat.team import CombatTeam
from tasks.map.control.joystick import MapControlJoystick


class Combat(CombatInteract, CombatPrepare, CombatState, CombatTeam, CombatSupport, MapControlJoystick):
    def handle_combat_prepare(self):
        """
        Returns:
            bool: If able to run a combat

        Pages:
            in: COMBAT_PREPARE
        """
        self.combat_waves = 1
        current = self.combat_get_trailblaze_power()
        cost = self.combat_get_wave_cost()
        if cost == 10:
            # Calyx
            self.combat_waves = min(current // self.combat_wave_cost, 6)
            if self.combat_wave_limit:
                self.combat_waves = min(self.combat_waves, self.combat_wave_limit - self.combat_wave_done)
                logger.info(
                    f'Current has {current}, combat costs {self.combat_wave_cost}, '
                    f'wave={self.combat_wave_done}/{self.combat_wave_limit}, '
                    f'able to do {self.combat_waves} waves')
            else:
                logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, '
                            f'able to do {self.combat_waves} waves')
            if self.combat_waves > 0:
                self.combat_set_wave(self.combat_waves)
        else:
            # Others
            logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, '
                        f'do {self.combat_waves} wave')

        # Check limits
        if self.config.stored.TrailblazePower.value < self.combat_wave_cost:
            logger.info('Trailblaze power exhausted, cannot continue combat')
            return False
        if self.combat_waves <= 0:
            logger.info('Combat wave limited, cannot continue combat')
            return False

        return True

    def handle_ascension_dungeon_prepare(self):
        """
        Returns:
            bool: If clicked.
        """
        if self.combat_wave_cost == 30 and self.is_in_main():
            if self.handle_map_A():
                return True

        return False

    def combat_prepare(self, team=1, support_character: str = None):
        """
        Args:
            team: 1 to 6.
            support_character: Support character name

        Returns:
            bool: True if success to enter combat
                False if trialblaze power is not enough

        Pages:
            in: COMBAT_PREPARE
            out: is_combat_executing
        """
        logger.hr('Combat prepare')
        skip_first_screenshot = True
        pre_set_team = bool(support_character)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.is_combat_executing():
                return True

            # Click
            if self.appear(COMBAT_TEAM_SUPPORT) and support_character:
                if pre_set_team:
                    self.team_set(team)
                    pre_set_team = False
                    continue
                self.support_set(support_character)
                continue
            if self.appear(COMBAT_TEAM_PREPARE, interval=2):
                self.team_set(team)
                self.device.click(COMBAT_TEAM_PREPARE)
                self.interval_reset(COMBAT_TEAM_PREPARE)
                continue
            if self.appear(COMBAT_TEAM_PREPARE):
                self.interval_reset(COMBAT_PREPARE)
                self._map_A_timer.reset()
            if self.appear(COMBAT_PREPARE, interval=2):
                if not self.handle_combat_prepare():
                    return False
                self.device.click(COMBAT_PREPARE)
                self.interval_reset(COMBAT_PREPARE)
                continue
            if self.handle_combat_interact():
                continue
            if self.handle_ascension_dungeon_prepare():
                continue

    def combat_execute(self):
        """
        Pages:
            in: is_combat_executing
            out: COMBAT_AGAIN
        """
        logger.hr('Combat execute')
        skip_first_screenshot = True
        is_executing = True
        self.combat_state_reset()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.appear(COMBAT_AGAIN):
                break

            # Daemon
            if self.is_combat_executing():
                if not is_executing:
                    logger.info('Combat continues')
                    self.device.stuck_record_clear()
                is_executing = True
            else:
                is_executing = False
            if self.handle_combat_state():
                continue

    def _combat_can_again(self) -> bool:
        """
        Pages:
            in: COMBAT_AGAIN
        """
        current = self.combat_get_trailblaze_power(expect_reduce=True)
        # Wave limit
        if self.combat_wave_limit:
            if self.combat_wave_done + self.combat_waves > self.combat_wave_limit:
                logger.info(f'Combat wave limit: {self.combat_wave_done}/{self.combat_wave_limit}, '
                            f'can not run again')
                return False

        # Cost limit
        if self.combat_wave_cost == 10:
            if current >= self.combat_wave_cost * self.combat_waves:
                logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, can run again')
                return True
            else:
                logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, can not run again')
                return False
        else:
            if current >= self.combat_wave_cost:
                logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, can run again')
                return True
            else:
                logger.info(f'Current has {current}, combat costs {self.combat_wave_cost}, can not run again')
                return False

    def _combat_should_reenter(self):
        """
        Returns:
            bool: True to re-enter combat and run with another wave settings
        """
        # Wave limit
        if self.combat_wave_limit:
            if self.combat_wave_done < self.combat_wave_limit:
                logger.info(f'Combat wave limit: {self.combat_wave_done}/{self.combat_wave_limit}, '
                            f'run again with less waves')
                return True
            else:
                return False
        # Cost limit
        if self.config.stored.TrailblazePower.value >= self.combat_wave_cost:
            logger.info('Still having some trailblaze power run with less waves to empty it')
            return True

    def combat_finish(self) -> bool:
        """
        Returns:
            bool: True if exit, False if again

        Pages:
            in: COMBAT_AGAIN
            out: page_main if exit
                is_combat_executing if again
        """
        logger.hr('Combat finish')

        @run_once
        def add_wave_done():
            self.combat_wave_done += self.combat_waves
            logger.info(f'Done {self.combat_waves} waves at total')

        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.is_in_main():
                logger.info('Combat finishes at page_main')
                return True
            if self.is_combat_executing():
                logger.info('Combat finishes at another combat')
                return False

            # Click
            # Game client might slow to response COMBAT_AGAIN clicks
            if self.appear(COMBAT_AGAIN, interval=5):
                add_wave_done()
                if self._combat_can_again():
                    self.device.click(COMBAT_AGAIN)
                else:
                    self.device.click(COMBAT_EXIT)
                self.interval_reset(COMBAT_AGAIN)

    def combat_exit(self, skip_first_screenshot=True):
        """
        Pages:
            in: Any page during combat
            out: page_main
        """
        logger.info('Combat exit')
        self.interval_clear([COMBAT_PREPARE, COMBAT_TEAM_PREPARE, COMBAT_AGAIN])
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.is_in_main():
                break

            # Click
            if self.appear(COMBAT_PREPARE, interval=2):
                logger.info(f'{COMBAT_PREPARE} -> {CLOSE}')
                self.device.click(CLOSE)
                continue
            if self.appear(COMBAT_TEAM_PREPARE, interval=2):
                logger.info(f'{COMBAT_TEAM_PREPARE} -> {CLOSE}')
                self.device.click(CLOSE)
                continue
            if self.appear(COMBAT_AGAIN, interval=2):
                logger.info(f'{COMBAT_AGAIN} -> {COMBAT_EXIT}')
                self.device.click(COMBAT_EXIT)
                continue

    def is_trailblaze_power_exhausted(self) -> bool:
        flag = self.config.stored.TrailblazePower.value < self.combat_wave_cost
        logger.attr('TrailblazePowerExhausted', flag)
        return flag

    def combat(self, team: int = 1, wave_limit: int = 0, support_character: str = None, skip_first_screenshot=True):
        """
        Combat until trailblaze power runs out.

        Args:
            team: 1 to 6.
            wave_limit: Limit combat runs, 0 means no limit.
            support_character: Support character name
            skip_first_screenshot:

        Returns:
            int: Run count

        Pages:
            in: COMBAT_PREPARE
                or page_main with DUNGEON_COMBAT_INTERACT
            out: page_main
        """
        if not skip_first_screenshot:
            self.device.screenshot()

        self.combat_wave_limit = wave_limit
        self.combat_wave_done = 0
        run_count = 0
        while 1:
            logger.hr('Combat', level=2)
            logger.info(f'Combat, team={team}, wave={self.combat_wave_done}/{self.combat_wave_limit}')
            # Prepare
            prepare = self.combat_prepare(team, support_character)
            if not prepare:
                self.combat_exit()
                break
            # Execute
            self.combat_execute()
            # Finish
            finish = self.combat_finish()
            if self._combat_should_reenter():
                continue
            run_count += 1
            if finish:
                break

        logger.attr('CombatRunCount', run_count)
        return run_count

```

`tasks/combat/detector.py`:

```py
import os
import cv2
import numpy as np


class Detector:
    def __init__(self):
        """
        A detector to detect the circle mark of enemy and item.
        """
        self.ui_mask = cv2.imread(os.path.join(os.path.dirname(__file__), "mask.png"), 0)

    def update(self, frame):
        # apply a mask to every frame to block the UI from interfering detection
        frame_masked = cv2.bitwise_and(frame, frame, mask=self.ui_mask)
        # update the detector with current frame before detection
        self.hsv = cv2.cvtColor(frame_masked, cv2.COLOR_BGR2HSV)

    def detect_item(self):
        filter_params = {
            'lowerb': np.array([0, 0, 215]),
            'upperb': np.array([108, 53, 255]),
        }
        hough_params = {
            'minDist': 8,
            'param1': 200,
            'param2': 8,
            'minRadius': 2,
            'maxRadius': 4,
        }

        # augment the target marker through mask based on HSV color space
        mask = cv2.inRange(self.hsv, **filter_params)
        mask = cv2.morphologyEx(mask, cv2.MORPH_OPEN, cv2.getStructuringElement(cv2.MORPH_RECT, (2, 2)), iterations=1)

        # resize the mask to reduce computational complexity of hough operation
        mask = cv2.resize(mask, None, fx=0.25, fy=0.25)
        mask = cv2.GaussianBlur(mask, (3, 3), 0, 0)

        circles = cv2.HoughCircles(mask, cv2.HOUGH_GRADIENT, 1, **hough_params)

        # if any target exists, return the center coordinates
        return self.get_coordinates(circles) if circles is not None else None

    def detect_enemy(self):
        filter_params = {
            'lowerb': np.array([0, 62, 213]),
            'upperb': np.array([180, 198, 255]),
        }
        hough_params = {
            'minDist': 18,
            'param1': 200,
            'param2': 10,
            'minRadius': 5,
            'maxRadius': 9,
        }

        mask = cv2.inRange(self.hsv, **filter_params)
        mask = cv2.morphologyEx(mask, cv2.MORPH_OPEN, cv2.getStructuringElement(cv2.MORPH_RECT, (2, 2)), iterations=1)

        mask = cv2.resize(mask, None, fx=0.25, fy=0.25)
        mask = cv2.GaussianBlur(mask, (3, 3), 0, 0)
        circles = cv2.HoughCircles(mask, cv2.HOUGH_GRADIENT, 1, **hough_params)

        return self.get_coordinates(circles) if circles is not None else None

    @staticmethod
    def get_coordinates(circles):
        # convert coordinates to original scale
        circles = np.asarray(np.around(circles * 4), dtype=np.uint16).squeeze(0)
        return [circle[:2] for circle in circles]


def generate_ui_mask():
    """
    code to generate ui mask
    """
    mask = np.ones([720, 1280]) * 255
    mask[34:81, 21:61] = 0
    mask[179:220, 21:51] = 0
    mask[35:84, 183:218] = 0
    mask[0:61, 780:1280] = 0
    mask[145:435, 1153:1240] = 0
    cv2.circle(mask, (907, 614), 55, 0, -1)
    cv2.circle(mask, (1033, 542), 67, 0, -1)
    cv2.imwrite("mask.png", mask)


if __name__ == '__main__':
    # how to use
    class YourClass:
        def __init__(self, stream):
            self.stream = stream
            self.detector = Detector()  # initiate a detector, recommend to set scale=0.25

            self.run()

        def run(self):
            while True:
                # update the detector with current frame before detection
                self.frame = cv2.cvtColor(self.stream.capture(), cv2.COLOR_RGB2BGR)
                self.detector.update(self.frame)

                # return a list of coordinates of corresponding target
                enemies = self.detector.detect_enemy()
                if enemies is not None:
                    self.plot_points(enemies)

                items = self.detector.detect_item()
                if items is not None:
                    self.plot_points(items)

                cv2.imshow("frame", self.frame)
                if cv2.waitKey(1) == ord('q'):
                    cv2.destroyAllWindows()
                    break

        def plot_points(self, points):
            for point in points:
                cv2.circle(self.frame, (point[0], point[1]), 3, (255, 255, 255), -1)

```

`tasks/combat/interact.py`:

```py
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_interact import DUNGEON_COMBAT_INTERACT


class CombatInteract(UI):
    def handle_combat_interact(self):
        """
        Returns:
            bool: If clicked.
        """
        if self.appear_then_click(DUNGEON_COMBAT_INTERACT, interval=2):
            return True

        return False

```

`tasks/combat/prepare.py`:

```py
import re

from module.base.timer import Timer
from module.logger import logger
from module.ocr.ocr import Digit, DigitCounter
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_prepare import (
    OCR_TRAILBLAZE_POWER,
    OCR_WAVE_COST,
    OCR_WAVE_COUNT,
    WAVE_MINUS,
    WAVE_PLUS
)


class TrailblazePowerOcr(DigitCounter):
    def after_process(self, result):
        result = super().after_process(result)
        # The trailblaze power icon is recognized as 买
        # OCR_TRAILBLAZE_POWER includes the icon because the length varies by value
        result = re.sub(r'[买米装：（）]', '', result)
        return result


class CombatPrepare(UI):
    # Current combat waves,
    combat_waves = 1
    # Limit combat runs, 0 means no limit.
    combat_wave_limit = 0
    combat_wave_done = 0
    # E.g. 10, 30, 40
    combat_wave_cost = 10

    def combat_set_wave(self, count=6):
        """
        Args:
            count: 1 to 6

        Pages:
            in: COMBAT_PREPARE
        """
        self.ui_ensure_index(
            count, letter=Digit(OCR_WAVE_COUNT),
            next_button=WAVE_PLUS, prev_button=WAVE_MINUS,
            skip_first_screenshot=True
        )

    def combat_has_multi_wave(self) -> bool:
        """
        If combat has waves to set.
        Most dungeons can do 6 times at one time while bosses don't.
        """
        return self.appear(WAVE_MINUS) or self.appear(WAVE_PLUS)

    def combat_get_trailblaze_power(self, expect_reduce=False, skip_first_screenshot=True) -> int:
        """
        Args:
            expect_reduce: Current value is supposed to be lower than the previous.
            skip_first_screenshot:

        Pages:
            in: COMBAT_PREPARE or COMBAT_REPEAT
        """
        timeout = Timer(1, count=2).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            current, _, total = TrailblazePowerOcr(OCR_TRAILBLAZE_POWER).ocr_single_line(self.device.image)
            # Empty result
            if total == 0:
                continue
            # Confirm if it is > 180, sometimes just OCR errors
            if current > 240 and timeout.reached():
                break
            if expect_reduce and current >= self.config.stored.TrailblazePower.value:
                continue
            if current <= 240:
                break

        self.config.stored.TrailblazePower.value = current
        return current

    def combat_get_wave_cost(self, skip_first_screenshot=True):
        """
        Get traiblaze power cost and set it to `combat_cost`

        Returns:
            int: E.g. 10, 30, 40

        Pages:
            in: COMBAT_PREPARE
        """
        multi = self.combat_has_multi_wave()
        logger.attr('CombatMultiWave', multi)

        timeout = Timer(1.5, count=6).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            cost = Digit(OCR_WAVE_COST).ocr_single_line(self.device.image)
            if cost == 10:
                if multi:
                    self.combat_wave_cost = cost
                    return cost
                else:
                    logger.warning(f'Combat wave costs {cost} but does not has multiple waves')
                    self.combat_wave_cost = cost
                    return cost
            elif cost in [30, 40]:
                if multi:
                    logger.warning(f'Combat wave costs {cost} but has multiple waves, '
                                   f'probably wave amount is preset')
                    self.combat_set_wave(1)
                    skip_first_screenshot = True
                    timeout.reset()
                    continue
                else:
                    self.combat_wave_cost = cost
                    return cost
            else:
                logger.warning(f'Unexpected combat wave cost: {cost}')
                continue

        if multi:
            cost = 10
        else:
            cost = 40
        logger.warning(f'Get combat wave cost timeout, assume it costs {cost}')
        self.combat_wave_cost = cost
        return cost

```

`tasks/combat/state.py`:

```py
import cv2
from scipy import signal

from module.base.timer import Timer
from module.base.utils import rgb2gray
from module.logger import logger
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_state import COMBAT_AUTO, COMBAT_PAUSE, COMBAT_SPEED_2X


class CombatState(UI):
    _combat_click_interval = Timer(2, count=4)
    _combat_auto_checked = False
    _combat_2x_checked = False

    def is_combat_executing(self) -> bool:
        appear = self.appear(COMBAT_PAUSE)
        if appear:
            if COMBAT_PAUSE.button_offset[0] <= 5:
                return True

        return False

    def _is_combat_button_active(self, button):
        image = rgb2gray(self.image_crop(button))
        lines = cv2.reduce(image, 1, cv2.REDUCE_AVG).flatten()
        # [122 122 122 182 141 127 139 135 130 135 136 141 147 149 149 150 147 145
        #  148 150 150 150 150 150 144 138 134 141 136 133 173 183 130 128 127 126]
        parameters = {
            # Border is about 188-190
            'height': 96,
            # Background is about 120-122
            'prominence': 35,
            'width': (0, 7),
            'distance': 7,
        }
        peaks, _ = signal.find_peaks(lines, **parameters)
        count = len(peaks)
        if count == 0:
            return False
        elif count == 2:
            return True
        else:
            # logger.warning(f'Unexpected peak amount on {button}: {count}, lines={lines}')
            # self.device.image_save()
            return False

    def is_combat_auto(self) -> bool:
        return self._is_combat_button_active(COMBAT_AUTO)

    def is_combat_speed_2x(self) -> bool:
        return self._is_combat_button_active(COMBAT_SPEED_2X)

    def combat_state_reset(self):
        self._combat_auto_checked = False
        self._combat_2x_checked = False

    def handle_combat_state(self, auto=True, speed_2x=True):
        """
        Set combat auto and 2X speed. Enable both by default.

        Returns:
            bool: If clicked
        """
        if self._combat_auto_checked and self._combat_2x_checked:
            return False
        if not self.is_combat_executing():
            return False

        if not self._combat_2x_checked:
            if speed_2x:
                if self.is_combat_speed_2x():
                    logger.info('_combat_2x_checked')
                    self._combat_2x_checked = True
                else:
                    if self._combat_click_interval.reached():
                        self.device.click(COMBAT_SPEED_2X)
                        self._combat_click_interval.reset()
                        return True
            else:
                if self.is_combat_speed_2x():
                    if self._combat_click_interval.reached():
                        self.device.click(COMBAT_SPEED_2X)
                        self._combat_click_interval.reset()
                        return True
                else:
                    logger.info('_combat_2x_checked')
                    self._combat_2x_checked = True

        if not self._combat_auto_checked:
            if auto:
                if self.is_combat_auto():
                    logger.info('_combat_auto_checked')
                    self._combat_auto_checked = True
                else:
                    if self._combat_click_interval.reached():
                        self.device.click(COMBAT_AUTO)
                        self._combat_click_interval.reset()
                        return True
            else:
                if self.is_combat_auto():
                    if self._combat_click_interval.reached():
                        self.device.click(COMBAT_AUTO)
                        self._combat_click_interval.reset()
                        return True
                else:
                    logger.info('_combat_auto_checked')
                    self._combat_auto_checked = True

        return False

```

`tasks/combat/support.py`:

```py
import cv2
import numpy as np
from scipy import signal
from module.base.button import Button, ButtonWrapper

from module.base.timer import Timer
from module.base.utils import area_size, crop, rgb2luma, load_image, crop
from module.logger import logger
from module.ui.scroll import Scroll
from tasks.base.assets.assets_base_popup import CANCEL_POPUP
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_support import COMBAT_SUPPORT_ADD, COMBAT_SUPPORT_LIST, \
    COMBAT_SUPPORT_LIST_SCROLL, COMBAT_SUPPORT_SELECTED, COMBAT_SUPPORT_LIST_GRID
from tasks.combat.assets.assets_combat_team import COMBAT_TEAM_SUPPORT, COMBAT_TEAM_DISMISSSUPPORT


def get_position_in_original_image(position_in_croped_image, crop_area):
    """
    Returns:
        tuple: (x, y) of position in original image
    """
    return (
        position_in_croped_image[0] + crop_area[0], position_in_croped_image[1] + crop_area[1]) if position_in_croped_image else None


class SupportCharacter:
    _image_cache = {}
    _crop_area = COMBAT_SUPPORT_LIST_GRID.matched_button.area

    def __init__(self, name, screenshot, similarity=0.85):
        self.name = name
        self.image = self._scale_character()
        self.screenshot = crop(screenshot, SupportCharacter._crop_area)
        self.similarity = similarity
        self.button = self._find_character()

    def __bool__(self):
        # __bool__ is called when use an object of the class in a boolean context
        return self.button is not None

    def __str__(self):
        return f'SupportCharacter({self.name})'

    __repr__ = __str__

    def _scale_character(self):
        """
        Returns:
            Image: Character image after scaled
        """

        if self.name in SupportCharacter._image_cache:
            logger.info(f"Using cached image of {self.name}")
            return SupportCharacter._image_cache[self.name]

        img = load_image(f"assets/character/{self.name}.png")
        scaled_img = cv2.resize(img, (85, 82))
        SupportCharacter._image_cache[self.name] = scaled_img
        logger.info(f"Character {self.name} image cached")
        return scaled_img

    def _find_character(self):
        character = np.array(self.image)
        support_list_img = self.screenshot
        res = cv2.matchTemplate(
            character, support_list_img, cv2.TM_CCOEFF_NORMED)

        _, max_val, _, max_loc = cv2.minMaxLoc(res)
        max_loc = get_position_in_original_image(
            max_loc, SupportCharacter._crop_area)
        character_width = character.shape[1]
        character_height = character.shape[0]

        return (max_loc[0], max_loc[1], max_loc[0] + character_width, max_loc[1] + character_height) \
            if max_val >= self.similarity else None

    def selected_icon_search(self):
        """
        Returns:
            tuple: (x1, y1, x2, y2) of selected icon search area
        """
        return (
            self.button[0], self.button[1] - 5, self.button[0] + 30, self.button[1]) if self.button else None


class ArrowWrapper(ButtonWrapper):

    def find_center(self, image):
        res = cv2.matchTemplate(
            self.matched_button.image, image, cv2.TM_CCOEFF_NORMED)
        _, max_val, _, max_loc = cv2.minMaxLoc(res)
        return (
            (
                (max_loc[0] + self.matched_button.image.shape[1] / 2),
                (max_loc[1] + self.matched_button.image.shape[0] / 2),
            )
            if max_val > 0.75
            else None
        )


class NextSupportCharacter:
    _arrow = ArrowWrapper(
        name="NextSupportCharacterArrow",
        share=Button(
            file='./assets/support/selected_character_arrow.png',
            area=None,
            search=None,
            color=None,
            button=None,
        )
    )
    _crop_area = (290, 115, 435, 634)

    def __init__(self, screenshot):
        self.name = "SupportCharacterArrow"
        self.screenshot = crop(screenshot, NextSupportCharacter._crop_area)
        self.arrow_center = self._find_center()
        self.button = self._get_next_support_character_button()

    def __bool__(self):
        return self.button is not None

    def _find_center(self):
        center = NextSupportCharacter._arrow.find_center(self.screenshot)
        center = get_position_in_original_image(
            center, NextSupportCharacter._crop_area) if center else None
        return center

    def _get_next_support_character_button(self):
        area = (self.arrow_center[0] - 200, min(self.arrow_center[1] + 65, 615), self.arrow_center[0] + 10, min(
            self.arrow_center[1] + 80, 620)) if self.arrow_center and self.arrow_center[1] < 510 else None
        return ButtonWrapper(
            name="NextSupportCharacterButton",
            share=Button(
                file='./assets/support/selected_character_arrow.png',
                area=area,
                search=area,
                # if next support was selected, the average color of the button will larger than 220
                color=(220, 220, 220),
                button=area,
            )
        ) if self.arrow_center and self.arrow_center[1] < 510 else None


class SupportListScroll(Scroll):
    def cal_position(self, main):
        """
        Args:
            main (ModuleBase):

        Returns:
            float: 0 to 1.
        """
        image = main.device.image

        temp_area = list(self.area)
        temp_area[0] = int(temp_area[0] * 0.98)
        temp_area[2] = int(temp_area[2] * 1.02)

        line = rgb2luma(crop(image, temp_area)).flatten()
        width = area_size(temp_area)[0]
        parameters = {
            "height": 180,
            "prominence": 30,
            "distance": width * 0.75,
        }
        peaks, _ = signal.find_peaks(line, **parameters)
        peaks //= width
        self.length = len(peaks)
        middle = np.mean(peaks)

        position = (middle - self.length / 2) / (self.total - self.length)
        position = position if position > 0 else 0.0
        position = position if position < 1 else 1.0
        logger.attr(
            self.name, f"{position:.2f} ({middle}-{self.length / 2})/({self.total}-{self.length})")
        return position


class CombatSupport(UI):
    def support_set(self, support_character_name: str = "FirstCharacter"):
        """
        Args:
            support_character_name: Support character name

        Returns:
            bool: If clicked

        Pages:
            in: COMBAT_PREPARE
            mid: COMBAT_SUPPORT_LIST
            out: COMBAT_PREPARE
        """
        logger.hr("Combat support")
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.appear(COMBAT_TEAM_DISMISSSUPPORT):
                return True

            # Click
            if self.appear(COMBAT_TEAM_SUPPORT, interval=1):
                self.device.click(COMBAT_TEAM_SUPPORT)
                self.interval_reset(COMBAT_TEAM_SUPPORT)
                continue
            if self.appear(CANCEL_POPUP, interval=1):
                logger.warning(
                    "selected identical character, trying select another")
                self._cancel_popup()
                self._select_next_support()
                self.interval_reset(CANCEL_POPUP)
                continue
            if self.appear(COMBAT_SUPPORT_LIST, interval=1):
                if support_character_name != "FirstCharacter":
                    self._search_support(
                        support_character_name)  # Search support
                self.device.click(COMBAT_SUPPORT_ADD)
                self.interval_reset(COMBAT_SUPPORT_LIST)
                continue

    def _search_support(self, support_character_name: str = "JingYuan"):
        """
        Args:
            support_character_name: Support character name

        Returns:
            bool: True if found support else False

        Pages:
            in: COMBAT_SUPPORT_LIST
            out: COMBAT_SUPPORT_LIST
        """
        logger.hr("Combat support search")
        scroll = SupportListScroll(area=COMBAT_SUPPORT_LIST_SCROLL.area, color=(194, 196, 205),
                                   name=COMBAT_SUPPORT_LIST_SCROLL.name)
        if scroll.appear(main=self):
            if not scroll.at_bottom(main=self):
                # Dropdown to load the entire support list, so large threshold is acceptable
                scroll.drag_threshold, backup = 0.2, scroll.drag_threshold
                scroll.set_bottom(main=self)
                scroll.drag_threshold = backup
                scroll.set_top(main=self)

            logger.info("Searching support")
            skip_first_screenshot = False
            while 1:
                if skip_first_screenshot:
                    skip_first_screenshot = False
                else:
                    self.device.screenshot()

                if not support_character_name.startswith("Trailblazer"):
                    character = SupportCharacter(
                        support_character_name, self.device.image)
                else:
                    character = SupportCharacter(f"Stelle{support_character_name[11:]}",
                                                 self.device.image) or SupportCharacter(
                        f"Caelum{support_character_name[11:]}", self.device.image)

                if character:
                    logger.info("Support found")
                    if self._select_support(character):
                        return True
                    else:
                        logger.warning("Support not selected")
                        return False

                if not scroll.at_bottom(main=self):
                    scroll.next_page(main=self)
                    continue
                else:
                    logger.info("Support not found")
                    return False

    def _select_support(self, character: SupportCharacter):
        """
        Args:
            character: Support character

        Pages:
            in: COMBAT_SUPPORT_LIST
            out: COMBAT_SUPPORT_LIST
        """
        logger.hr("Combat support select")
        COMBAT_SUPPORT_SELECTED.matched_button.search = character.selected_icon_search()
        skip_first_screenshot = False
        interval = Timer(2)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.match_template(COMBAT_SUPPORT_SELECTED):
                return True

            if interval.reached():
                self.device.click(character)
                interval.reset()
                continue

    def _cancel_popup(self):
        """
        Pages:
            in: CANCEL_POPUP
            out: COMBAT_SUPPORT_LIST
        """
        logger.hr("Combat support cancel popup")
        skip_first_screenshot = True

        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.appear(COMBAT_SUPPORT_LIST):
                logger.info("Popup canceled")
                return

            if self.appear(CANCEL_POPUP):
                self.device.click(CANCEL_POPUP)
                continue

    def _select_next_support(self):
        """
        Pages:
            in: COMBAT_SUPPORT_LIST
            out: COMBAT_SUPPORT_LIST
        """
        skip_first_screenshot = True
        scroll = SupportListScroll(area=COMBAT_SUPPORT_LIST_SCROLL.area, color=(194, 196, 205),
                                   name=COMBAT_SUPPORT_LIST_SCROLL.name)
        interval = Timer(1)
        next_support = None
        if scroll.appear(main=self):
            while 1:
                if skip_first_screenshot:
                    skip_first_screenshot = False
                else:
                    self.device.screenshot()

                # End
                if next_support and self._next_support_selected(next_support):
                    return

                if interval.reached():
                    next_support = NextSupportCharacter(self.device.image)
                    if next_support:
                        logger.info("Next support found, clicking")
                        self.device.click(next_support.button)
                    elif not scroll.at_bottom(main=self):
                        scroll.next_page(main=self, page=0.4)
                    else:
                        logger.warning("No more support")
                        return

                    interval.reset()
                    continue

    def _next_support_selected(self, next_support: NextSupportCharacter):
        """
        Returns:
            bool: True if selected else False
        """
        if self.match_color(next_support.button, threshold=20):
            logger.info("Next support selected")
            return True
        return False

```

`tasks/combat/team.py`:

```py
from module.base.button import ButtonWrapper
from module.base.timer import Timer
from module.logger import logger
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_team import (
    COMBAT_TEAM_PREPARE,
    TEAM_1,
    TEAM_2,
    TEAM_3,
    TEAM_4,
    TEAM_5,
    TEAM_6
)

TEAM_BUTTONS = {
    1: TEAM_1,
    2: TEAM_2,
    3: TEAM_3,
    4: TEAM_4,
    5: TEAM_5,
    6: TEAM_6,
}


class CombatTeam(UI):
    @staticmethod
    def _team_index_to_button(index: int) -> ButtonWrapper:
        try:
            return TEAM_BUTTONS[index]
        except KeyError:
            logger.warning(f'Invalid team index: {index}, return team 1 instead')
            return TEAM_1

    def _get_team_selected(self) -> int:
        for index, button in TEAM_BUTTONS.items():
            if self.image_color_count(button, color=(255, 234, 191), threshold=221, count=50):
                return index

        # logger.warning(f'No team selected')
        return 0

    def team_set(self, team: int = 1, skip_first_screenshot=True) -> bool:
        """
        Args:
            team: Team index, 1 to 6.
            skip_first_screenshot:

        Returns:
            bool: If clicked

        Pages:
            in: page_team
        """
        logger.info(f'Team set: {team}')
        # Wait teams show up
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            current = self._get_team_selected()
            if current:
                if current == team:
                    logger.info(f'Selected to the correct team')
                    return False
                else:
                    break

        # Set team
        interval = Timer(2)
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            current = self._get_team_selected()
            logger.attr('Team', current)
            if current and current == team:
                logger.info(f'Selected to the correct team')
                return True

            # Click
            if interval.reached():
                self.device.click(self._team_index_to_button(team))
                interval.reset()
                continue

    def handle_combat_team_prepare(self, team: int = 1) -> bool:
        """
        Set team and click prepare before dungeon combat.

        Returns:
            int: If clicked
        """
        if self.appear(COMBAT_TEAM_PREPARE, interval=5):
            self.team_set(team)
            self.device.click(COMBAT_TEAM_PREPARE)
            return True

        return False

```

`tasks/daily/assets/assets_daily_camera.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

PICTURE_TAKEN = ButtonWrapper(
    name='PICTURE_TAKEN',
    cn=Button(
        file='./assets/cn/daily/camera/PICTURE_TAKEN.png',
        area=(1030, 620, 1069, 639),
        search=(1010, 600, 1089, 659),
        color=(153, 153, 155),
        button=(1030, 620, 1069, 639),
    ),
)
TAKE_PICTURE = ButtonWrapper(
    name='TAKE_PICTURE',
    share=Button(
        file='./assets/share/daily/camera/TAKE_PICTURE.png',
        area=(1120, 344, 1160, 375),
        search=(1100, 324, 1180, 395),
        color=(172, 173, 172),
        button=(1120, 344, 1160, 375),
    ),
)

```

`tasks/daily/assets/assets_daily_reward.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

ACTIVE_POINTS_1_CHECKED = ButtonWrapper(
    name='ACTIVE_POINTS_1_CHECKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_1_CHECKED.png',
        area=(383, 168, 428, 233),
        search=(363, 148, 448, 253),
        color=(221, 202, 180),
        button=(383, 168, 428, 233),
    ),
)
ACTIVE_POINTS_1_LOCKED = ButtonWrapper(
    name='ACTIVE_POINTS_1_LOCKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_1_LOCKED.png',
        area=(381, 169, 427, 213),
        search=(361, 149, 447, 233),
        color=(221, 221, 221),
        button=(381, 169, 427, 213),
    ),
)
ACTIVE_POINTS_1_UNLOCK = ButtonWrapper(
    name='ACTIVE_POINTS_1_UNLOCK',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_1_UNLOCK.png',
        area=(381, 169, 427, 213),
        search=(361, 149, 447, 233),
        color=(212, 162, 98),
        button=(381, 169, 427, 213),
    ),
)
ACTIVE_POINTS_2_CHECKED = ButtonWrapper(
    name='ACTIVE_POINTS_2_CHECKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_2_CHECKED.png',
        area=(564, 170, 610, 233),
        search=(544, 150, 630, 253),
        color=(220, 201, 179),
        button=(564, 170, 610, 233),
    ),
)
ACTIVE_POINTS_2_LOCKED = ButtonWrapper(
    name='ACTIVE_POINTS_2_LOCKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_2_LOCKED.png',
        area=(565, 169, 610, 213),
        search=(545, 149, 630, 233),
        color=(221, 221, 221),
        button=(565, 169, 610, 213),
    ),
)
ACTIVE_POINTS_2_UNLOCK = ButtonWrapper(
    name='ACTIVE_POINTS_2_UNLOCK',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_2_UNLOCK.png',
        area=(565, 168, 609, 213),
        search=(545, 148, 629, 233),
        color=(211, 160, 96),
        button=(565, 168, 609, 213),
    ),
)
ACTIVE_POINTS_3_CHECKED = ButtonWrapper(
    name='ACTIVE_POINTS_3_CHECKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_3_CHECKED.png',
        area=(747, 168, 793, 234),
        search=(727, 148, 813, 254),
        color=(219, 202, 181),
        button=(747, 168, 793, 234),
    ),
)
ACTIVE_POINTS_3_LOCKED = ButtonWrapper(
    name='ACTIVE_POINTS_3_LOCKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_3_LOCKED.png',
        area=(747, 168, 792, 214),
        search=(727, 148, 812, 234),
        color=(221, 221, 221),
        button=(747, 168, 792, 214),
    ),
)
ACTIVE_POINTS_3_UNLOCK = ButtonWrapper(
    name='ACTIVE_POINTS_3_UNLOCK',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_3_UNLOCK.png',
        area=(747, 168, 793, 213),
        search=(727, 148, 813, 233),
        color=(213, 161, 98),
        button=(747, 168, 793, 213),
    ),
)
ACTIVE_POINTS_4_CHECKED = ButtonWrapper(
    name='ACTIVE_POINTS_4_CHECKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_4_CHECKED.png',
        area=(929, 167, 980, 233),
        search=(909, 147, 1000, 253),
        color=(221, 205, 185),
        button=(929, 167, 980, 233),
    ),
)
ACTIVE_POINTS_4_LOCKED = ButtonWrapper(
    name='ACTIVE_POINTS_4_LOCKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_4_LOCKED.png',
        area=(930, 169, 975, 213),
        search=(910, 149, 995, 233),
        color=(221, 221, 221),
        button=(930, 169, 975, 213),
    ),
)
ACTIVE_POINTS_4_UNLOCK = ButtonWrapper(
    name='ACTIVE_POINTS_4_UNLOCK',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_4_UNLOCK.png',
        area=(929, 169, 974, 213),
        search=(909, 149, 994, 233),
        color=(211, 161, 97),
        button=(929, 169, 974, 213),
    ),
)
ACTIVE_POINTS_5_CHECKED = ButtonWrapper(
    name='ACTIVE_POINTS_5_CHECKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_5_CHECKED.png',
        area=(1112, 168, 1159, 235),
        search=(1092, 148, 1179, 255),
        color=(220, 203, 182),
        button=(1112, 168, 1159, 235),
    ),
)
ACTIVE_POINTS_5_LOCKED = ButtonWrapper(
    name='ACTIVE_POINTS_5_LOCKED',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_5_LOCKED.png',
        area=(1111, 169, 1156, 213),
        search=(1091, 149, 1176, 233),
        color=(221, 221, 221),
        button=(1111, 169, 1156, 213),
    ),
)
ACTIVE_POINTS_5_UNLOCK = ButtonWrapper(
    name='ACTIVE_POINTS_5_UNLOCK',
    share=Button(
        file='./assets/share/daily/reward/ACTIVE_POINTS_5_UNLOCK.png',
        area=(1113, 170, 1158, 213),
        search=(1093, 150, 1178, 233),
        color=(211, 158, 92),
        button=(1113, 170, 1158, 213),
    ),
)
DAILY_QUEST_FULL = ButtonWrapper(
    name='DAILY_QUEST_FULL',
    cn=Button(
        file='./assets/cn/daily/reward/DAILY_QUEST_FULL.png',
        area=(164, 574, 301, 592),
        search=(144, 554, 321, 612),
        color=(131, 113, 82),
        button=(164, 574, 301, 592),
    ),
)
DAILY_QUEST_GOTO = ButtonWrapper(
    name='DAILY_QUEST_GOTO',
    share=Button(
        file='./assets/share/daily/reward/DAILY_QUEST_GOTO.png',
        area=(175, 572, 192, 591),
        search=(155, 552, 212, 611),
        color=(152, 152, 151),
        button=(175, 572, 192, 591),
    ),
)
DAILY_QUEST_LEFT_START = ButtonWrapper(
    name='DAILY_QUEST_LEFT_START',
    share=Button(
        file='./assets/share/daily/reward/DAILY_QUEST_LEFT_START.png',
        area=(1105, 257, 1118, 633),
        search=(1085, 237, 1138, 653),
        color=(205, 205, 205),
        button=(1105, 257, 1118, 633),
    ),
)
DAILY_QUEST_REWARD = ButtonWrapper(
    name='DAILY_QUEST_REWARD',
    share=Button(
        file='./assets/share/daily/reward/DAILY_QUEST_REWARD.png',
        area=(172, 572, 192, 592),
        search=(152, 552, 212, 612),
        color=(101, 82, 45),
        button=(172, 572, 192, 592),
    ),
)
DAILY_QUEST_RIGHT_END = ButtonWrapper(
    name='DAILY_QUEST_RIGHT_END',
    share=Button(
        file='./assets/share/daily/reward/DAILY_QUEST_RIGHT_END.png',
        area=(401, 259, 411, 632),
        search=(381, 239, 431, 652),
        color=(206, 206, 206),
        button=(401, 259, 411, 632),
    ),
)
OCR_DAILY_QUEST = ButtonWrapper(
    name='OCR_DAILY_QUEST',
    share=Button(
        file='./assets/share/daily/reward/OCR_DAILY_QUEST.png',
        area=(117, 257, 1173, 630),
        search=(97, 237, 1193, 650),
        color=(208, 206, 202),
        button=(117, 257, 1173, 630),
    ),
)

```

`tasks/daily/assets/assets_daily_synthesize_consumable.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CONSUMABLES_COMFORT_FOOD = ButtonWrapper(
    name='CONSUMABLES_COMFORT_FOOD',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_COMFORT_FOOD.png',
        area=(144, 241, 209, 298),
        search=(119, 84, 437, 573),
        color=(157, 140, 132),
        button=(144, 241, 209, 298),
    ),
)
CONSUMABLES_COMFORT_FOOD_CHECK = ButtonWrapper(
    name='CONSUMABLES_COMFORT_FOOD_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_COMFORT_FOOD_CHECK.png',
        area=(588, 194, 684, 260),
        search=(568, 174, 704, 280),
        color=(184, 157, 135),
        button=(588, 194, 684, 260),
    ),
)
CONSUMABLES_SIMPLE_AED = ButtonWrapper(
    name='CONSUMABLES_SIMPLE_AED',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_SIMPLE_AED.png',
        area=(347, 119, 420, 180),
        search=(119, 84, 437, 573),
        color=(94, 81, 80),
        button=(347, 119, 420, 180),
    ),
)
CONSUMABLES_SIMPLE_AED_CHECK = ButtonWrapper(
    name='CONSUMABLES_SIMPLE_AED_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_SIMPLE_AED_CHECK.png',
        area=(585, 186, 685, 263),
        search=(565, 166, 705, 283),
        color=(88, 66, 58),
        button=(585, 186, 685, 263),
    ),
)
CONSUMABLES_TRICK_SNACK = ButtonWrapper(
    name='CONSUMABLES_TRICK_SNACK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_TRICK_SNACK.png',
        area=(346, 362, 417, 418),
        search=(119, 84, 437, 573),
        color=(122, 129, 127),
        button=(346, 362, 417, 418),
    ),
)
CONSUMABLES_TRICK_SNACK_CHECK = ButtonWrapper(
    name='CONSUMABLES_TRICK_SNACK_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/CONSUMABLES_TRICK_SNACK_CHECK.png',
        area=(593, 188, 678, 267),
        search=(573, 168, 698, 287),
        color=(130, 137, 127),
        button=(593, 188, 678, 267),
    ),
)
RECIPE_UNLOCK = ButtonWrapper(
    name='RECIPE_UNLOCK',
    cn=Button(
        file='./assets/cn/daily/synthesize_consumable/RECIPE_UNLOCK.png',
        area=(836, 647, 913, 668),
        search=(816, 627, 933, 688),
        color=(167, 167, 167),
        button=(836, 647, 913, 668),
    ),
)
SIMPLE_PROTECTIVE_GEAR = ButtonWrapper(
    name='SIMPLE_PROTECTIVE_GEAR',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/SIMPLE_PROTECTIVE_GEAR.png',
        area=(244, 356, 316, 409),
        search=(119, 84, 437, 573),
        color=(94, 110, 115),
        button=(244, 356, 316, 409),
    ),
)
SIMPLE_PROTECTIVE_GEAR_CHECK = ButtonWrapper(
    name='SIMPLE_PROTECTIVE_GEAR_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/SIMPLE_PROTECTIVE_GEAR_CHECK.png',
        area=(578, 196, 692, 256),
        search=(558, 176, 712, 276),
        color=(107, 106, 108),
        button=(578, 196, 692, 256),
    ),
)
SYNTHESIZE_CONFIRM = ButtonWrapper(
    name='SYNTHESIZE_CONFIRM',
    cn=Button(
        file='./assets/cn/daily/synthesize_consumable/SYNTHESIZE_CONFIRM.png',
        area=(847, 645, 895, 672),
        search=(827, 625, 915, 692),
        color=(189, 190, 190),
        button=(847, 645, 895, 672),
    ),
)
SYNTHESIZE_CONSUMABLES_CHECK = ButtonWrapper(
    name='SYNTHESIZE_CONSUMABLES_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/SYNTHESIZE_CONSUMABLES_CHECK.png',
        area=(38, 114, 78, 138),
        search=(18, 94, 98, 158),
        color=(145, 147, 148),
        button=(38, 114, 78, 138),
    ),
)
SYNTHESIZE_GOTO_CONSUMABLES = ButtonWrapper(
    name='SYNTHESIZE_GOTO_CONSUMABLES',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/SYNTHESIZE_GOTO_CONSUMABLES.png',
        area=(38, 120, 78, 141),
        search=(18, 100, 98, 161),
        color=(95, 98, 106),
        button=(38, 120, 78, 141),
    ),
)
SYNTHESIZE_SCROLL = ButtonWrapper(
    name='SYNTHESIZE_SCROLL',
    share=Button(
        file='./assets/share/daily/synthesize_consumable/SYNTHESIZE_SCROLL.png',
        area=(458, 80, 464, 628),
        search=(438, 60, 484, 648),
        color=(134, 130, 144),
        button=(458, 80, 464, 628),
    ),
)

```

`tasks/daily/assets/assets_daily_synthesize_material.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

GLIMMERING_CORE = ButtonWrapper(
    name='GLIMMERING_CORE',
    share=Button(
        file='./assets/share/daily/synthesize_material/GLIMMERING_CORE.png',
        area=(352, 198, 416, 254),
        search=(119, 84, 437, 573),
        color=(81, 112, 165),
        button=(352, 198, 416, 254),
    ),
)
GLIMMERING_CORE_CHECK = ButtonWrapper(
    name='GLIMMERING_CORE_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_material/GLIMMERING_CORE_CHECK.png',
        area=(812, 209, 917, 281),
        search=(792, 189, 937, 301),
        color=(88, 112, 158),
        button=(812, 209, 917, 281),
    ),
)
SILVERMANE_INSIGNIA = ButtonWrapper(
    name='SILVERMANE_INSIGNIA',
    share=Button(
        file='./assets/share/daily/synthesize_material/SILVERMANE_INSIGNIA.png',
        area=(145, 437, 207, 492),
        search=(119, 84, 437, 573),
        color=(98, 104, 129),
        button=(145, 437, 207, 492),
    ),
)
SILVERMANE_INSIGNIA_CHECK = ButtonWrapper(
    name='SILVERMANE_INSIGNIA_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_material/SILVERMANE_INSIGNIA_CHECK.png',
        area=(812, 203, 916, 281),
        search=(792, 183, 936, 301),
        color=(143, 119, 96),
        button=(812, 203, 916, 281),
    ),
)
SYNTHESIZE_GOTO_MATERIAL = ButtonWrapper(
    name='SYNTHESIZE_GOTO_MATERIAL',
    share=Button(
        file='./assets/share/daily/synthesize_material/SYNTHESIZE_GOTO_MATERIAL.png',
        area=(42, 190, 74, 230),
        search=(22, 170, 94, 250),
        color=(94, 95, 109),
        button=(42, 190, 74, 230),
    ),
)
SYNTHESIZE_MATERIAL_CHECK = ButtonWrapper(
    name='SYNTHESIZE_MATERIAL_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_material/SYNTHESIZE_MATERIAL_CHECK.png',
        area=(43, 189, 74, 229),
        search=(23, 169, 94, 249),
        color=(157, 159, 160),
        button=(43, 189, 74, 229),
    ),
)
USURPERS_SCHEME = ButtonWrapper(
    name='USURPERS_SCHEME',
    share=Button(
        file='./assets/share/daily/synthesize_material/USURPERS_SCHEME.png',
        area=(253, 318, 309, 373),
        search=(119, 84, 437, 573),
        color=(110, 120, 166),
        button=(253, 318, 309, 373),
    ),
)
USURPERS_SCHEME_CHECK = ButtonWrapper(
    name='USURPERS_SCHEME_CHECK',
    share=Button(
        file='./assets/share/daily/synthesize_material/USURPERS_SCHEME_CHECK.png',
        area=(819, 196, 912, 286),
        search=(799, 176, 932, 306),
        color=(141, 130, 149),
        button=(819, 196, 912, 286),
    ),
)

```

`tasks/daily/camera.py`:

```py
from module.logger import logger
from tasks.base.assets.assets_base_page import CLOSE
from tasks.base.page import page_camera
from tasks.base.ui import UI
from tasks.daily.assets.assets_daily_camera import PICTURE_TAKEN, TAKE_PICTURE


class CameraUI(UI):
    def take_picture(self, skip_first_screenshot=True):
        """
        Examples:
            self = CameraUI('alas')
            self.device.screenshot()
            self.take_picture()

        Pages:
            in: Any
            out: page_camera, TAKE_PICTURE
        """
        logger.hr('Take picture', level=2)
        self.ui_ensure(page_camera, skip_first_screenshot)
        # Take picture
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            if self.appear_then_click(TAKE_PICTURE, interval=1):
                logger.info('Taking picture')
                continue
            if self.appear(PICTURE_TAKEN):
                logger.info('Picture was taken')
                break
        # Quit from the picture ui
        skip_first_screenshot = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            if self.is_in_main():
                logger.info('Back to camera main page')
                break
            if self.appear(PICTURE_TAKEN, interval=1):
                self.device.click(CLOSE)
                logger.info(f'{PICTURE_TAKEN} -> {CLOSE}')
                self.interval_reset(TAKE_PICTURE)
                continue
            if self.appear(TAKE_PICTURE, interval=1):
                self.device.click(CLOSE)
                logger.info(f'{TAKE_PICTURE} -> {CLOSE}')
                continue

```

`tasks/daily/daily_quest.py`:

```py
import numpy as np

from module.base.timer import Timer
from module.logger import *
from module.ocr.ocr import Ocr, OcrResultButton
from module.ocr.utils import split_and_pair_buttons
from tasks.daily.assets.assets_daily_reward import *
from tasks.daily.camera import CameraUI
from tasks.daily.keywords import (
    DailyQuest,
    DailyQuestState,
    KEYWORDS_DAILY_QUEST,
    KEYWORDS_DAILY_QUEST_STATE,
)
from tasks.daily.synthesize import SynthesizeConsumablesUI, SynthesizeMaterialUI
from tasks.daily.use_technique import UseTechniqueUI
from tasks.dungeon.assets.assets_dungeon_ui import DAILY_TRAINING_CHECK
from tasks.dungeon.keywords import KEYWORDS_DUNGEON_TAB
from tasks.dungeon.ui import DungeonUI
from tasks.item.consumable_usage import ConsumableUsageUI
from tasks.item.relics import RelicsUI
from tasks.battle_pass.keywords import KEYWORD_BATTLE_PASS_QUEST


class DailyQuestOcr(Ocr):
    def __init__(self, button: ButtonWrapper, lang=None, name=None):
        super().__init__(button, lang, name)

    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'cn':
            result = result.replace("J", "」")
            result = result.replace(";", "」")
            result = result.replace("了", "」")
            result = result.replace("宇审", "宇宙")
            # 进行中」hbadarin
            if "进行中" in result:
                result = "进行中"
            if "已领取" in result:
                result = "已领取"
        return result


class DailyQuestUI(DungeonUI):
    def _ensure_position(self, direction: str, skip_first_screenshot=True):
        interval = Timer(5)
        if direction == 'left':
            template = DAILY_QUEST_LEFT_START
        elif direction == 'right':
            template = DAILY_QUEST_RIGHT_END
        else:
            logger.warning(f'Unknown drag direction: {direction}')
            return
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(template):
                logger.info(f"Ensure position: {direction}")
                break

            # Might be a screenshot mixed with daily_training and get_reward
            # Swipe at daily training page only
            if interval.reached() and self.match_template_color(DAILY_TRAINING_CHECK):
                self._daily_quests_swipe(direction)
                interval.reset()
                continue

    def _daily_quests_swipe(self, direction: str):
        vector = np.random.uniform(0.4, 0.5)
        if direction == 'left':
            swipe_vector = (vector * OCR_DAILY_QUEST.width, 0)
        elif direction == 'right':
            swipe_vector = (-vector * OCR_DAILY_QUEST.width, 0)
        else:
            logger.warning(f'Unknown drag direction: {direction}')
            return
        self.device.swipe_vector(swipe_vector, box=OCR_DAILY_QUEST.button,
                                 random_range=(-10, -10, 10, 10), name='DAILY_QUEST_DRAG')

    def _ocr_single_page(self) -> list[OcrResultButton]:
        ocr = DailyQuestOcr(OCR_DAILY_QUEST)
        ocr.merge_thres_y = 20
        results = ocr.matched_ocr(self.device.image, [DailyQuestState, DailyQuest])
        if len(results) < 8:
            logger.warning(f"Recognition failed at {8 - len(results)} quests on one page")

        def completed_state(state):
            return state != KEYWORDS_DAILY_QUEST_STATE.Go and state != KEYWORDS_DAILY_QUEST_STATE.In_Progress

        return [quest for quest, _ in
                split_and_pair_buttons(results, split_func=completed_state, relative_area=(0, 0, 200, 720))]

    def daily_quests_recognition(self) -> list[DailyQuest]:
        """
        Returns incomplete quests only
        """
        logger.info("Recognizing daily quests")
        self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Daily_Training)
        self._ensure_position('left')
        results = self._ocr_single_page()
        self._ensure_position('right')
        results += [result for result in self._ocr_single_page() if result not in results]
        results = [result.matched_keyword for result in results]
        logger.info("Daily quests recognition complete")
        logger.info(f"Daily quests: {results}")
        self.config.stored.DailyQuest.write_quests(results)
        return results

    def _get_quest_reward(self, skip_first_screenshot=True):
        self._ensure_position('left')
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(DAILY_QUEST_FULL):
                logger.info('No more quests to get, activity full')
                break
            if self.appear(DAILY_QUEST_GOTO):
                logger.info('No more quests to get, have quests uncompleted')
                break
            if self.appear_then_click(DAILY_QUEST_REWARD, interval=1):
                continue

    def _no_reward_to_get(self):
        return (
                (self.appear(ACTIVE_POINTS_1_LOCKED) or self.appear(ACTIVE_POINTS_1_CHECKED))
                and (self.appear(ACTIVE_POINTS_2_LOCKED) or self.appear(ACTIVE_POINTS_2_CHECKED))
                and (self.appear(ACTIVE_POINTS_3_LOCKED) or self.appear(ACTIVE_POINTS_3_CHECKED))
                and (self.appear(ACTIVE_POINTS_4_LOCKED) or self.appear(ACTIVE_POINTS_4_CHECKED))
                and (self.appear(ACTIVE_POINTS_5_LOCKED) or self.appear(ACTIVE_POINTS_5_CHECKED))
        )

    def _all_reward_got(self):
        return self.appear(ACTIVE_POINTS_5_CHECKED)

    def _get_active_point_reward(self, skip_first_screenshot=True):
        def get_active():
            for b in [
                ACTIVE_POINTS_1_UNLOCK,
                ACTIVE_POINTS_2_UNLOCK,
                ACTIVE_POINTS_3_UNLOCK,
                ACTIVE_POINTS_4_UNLOCK,
                ACTIVE_POINTS_5_UNLOCK
            ]:
                # Black gift icon
                if self.image_color_count(b, color=(61, 53, 53), threshold=221, count=100):
                    return b
            return None

        interval = Timer(2)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self._no_reward_to_get():
                logger.info('No more reward to get')
                break
            if self.handle_reward():
                continue
            if interval.reached():
                if active := get_active():
                    self.device.click(active)
                    interval.reset()

        # Write stored
        point = 0
        for progress, button in zip(
                [100, 200, 300, 400, 500],
                [
                    ACTIVE_POINTS_1_CHECKED,
                    ACTIVE_POINTS_2_CHECKED,
                    ACTIVE_POINTS_3_CHECKED,
                    ACTIVE_POINTS_4_CHECKED,
                    ACTIVE_POINTS_5_CHECKED
                ]
        ):
            if self.appear(button):
                point = progress
        logger.attr('Daily activity', point)
        with self.config.multi_set():
            self.config.stored.DailyActivity.set(point)
            if point == 500:
                self.config.stored.DailyQuest.write_quests([])

    def get_daily_rewards(self):
        """
        Returns:
            int: If all reward got.

        Pages:
            in: Any
            out: page_guide, Daily_Training
        """
        logger.hr('Get daily rewards', level=1)
        self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Daily_Training)
        logger.info("Getting quest rewards")
        self._get_quest_reward()
        logger.info("Getting active point rewards")
        self._get_active_point_reward()
        if self._all_reward_got():
            logger.info("All daily reward got")
            return True
        else:
            logger.info('Daily reward got but not yet claimed')
            return False

    def do_daily_quests(self):
        """
        Returns:
            int: Number of quests done
        """
        logger.hr('Recognize quests', level=1)
        quests = self.daily_quests_recognition()

        done = 0
        logger.hr('Do quests', level=1)
        if KEYWORDS_DAILY_QUEST.Take_1_photo in quests:
            CameraUI(self.config, self.device).take_picture()
            done += 1
        if KEYWORDS_DAILY_QUEST.Synthesize_Consumable_1_time in quests:
            if SynthesizeConsumablesUI(self.config, self.device).synthesize_consumables():
                done += 1
        if KEYWORDS_DAILY_QUEST.Synthesize_material_1_time in quests:
            if SynthesizeMaterialUI(self.config, self.device).synthesize_material():
                done += 1
        if KEYWORDS_DAILY_QUEST.Use_Consumables_1_time in quests:
            if ConsumableUsageUI(self.config, self.device).use_consumable():
                done += 1
        if KEYWORDS_DAILY_QUEST.Use_Technique_2_times in quests:
            UseTechniqueUI(self.config, self.device).use_technique(2)
            done += 1
        if KEYWORDS_DAILY_QUEST.Salvage_any_Relic in quests:
            if RelicsUI(self.config, self.device).salvage_relic():
                done += 1

        return done

    def run(self):
        self.config.update_battle_pass_quests()

        for _ in range(5):
            got = self.get_daily_rewards()
            if got:
                break
            done = self.do_daily_quests()
            if not done:
                logger.info('No more quests able to do')
                break

        # Scheduler
        with self.config.multi_set():
            # Check battle pass
            if self.config.stored.DailyActivity.value == 500:
                quests = self.config.stored.BattlePassTodayQuest.load_quests()
                if KEYWORD_BATTLE_PASS_QUEST.Reach_500_on_Daily_Training_Activity in quests:
                    logger.info('Achieved battle pass quest Reach_500_on_Daily_Training_Activity')
                    self.config.task_call('BattlePass')
            # Delay self
            self.config.task_delay(server_update=True)

```

`tasks/daily/keywords/__init__.py`:

```py
import tasks.daily.keywords.daily_quest as KEYWORDS_DAILY_QUEST
import tasks.daily.keywords.daily_quest_state as KEYWORDS_DAILY_QUEST_STATE
from tasks.daily.keywords.classes import DailyQuest, DailyQuestState

```

`tasks/daily/keywords/classes.py`:

```py
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword


@dataclass(repr=False)
class DailyQuest(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class DailyQuestState(Keyword):
    instances: ClassVar = {}

```

`tasks/daily/keywords/daily_quest.py`:

```py
from .classes import DailyQuest

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Complete_1_Daily_Mission = DailyQuest(
    id=1,
    name='Complete_1_Daily_Mission',
    cn='完成1个日常任务',
    cht='完成1個每日任務',
    en='Complete 1 Daily Mission',
    jp='デイリークエストを1回クリアする',
)
Clear_Calyx_Golden_1_times = DailyQuest(
    id=2,
    name='Clear_Calyx_Golden_1_times',
    cn='完成1次「拟造花萼（金）」',
    cht='完成1次「擬造花萼（金）」',
    en='Clear Calyx (Golden) 1 time(s)',
    jp='「疑似花萼（金）」を1回クリアする',
)
Complete_Calyx_Crimson_1_time = DailyQuest(
    id=3,
    name='Complete_Calyx_Crimson_1_time',
    cn='完成1次「拟造花萼（赤）」',
    cht='完成1次「擬造花萼（赤）」',
    en='Complete Calyx (Crimson) 1 time',
    jp='「疑似花萼（赤）」を1回クリアする',
)
Clear_Stagnant_Shadow_1_times = DailyQuest(
    id=4,
    name='Clear_Stagnant_Shadow_1_times',
    cn='完成1次「凝滞虚影」',
    cht='完成1次「凝滯虛影」',
    en='Clear Stagnant Shadow 1 time(s)',
    jp='「凝結虚影」を1回クリアする',
)
Clear_Cavern_of_Corrosion_1_times = DailyQuest(
    id=5,
    name='Clear_Cavern_of_Corrosion_1_times',
    cn='完成1次「侵蚀隧洞」',
    cht='完成1次「侵蝕隧洞」',
    en='Clear Cavern of Corrosion 1 time(s)',
    jp='「侵蝕トンネル」を1回クリアする',
)
In_a_single_battle_inflict_3_Weakness_Break_of_different_Types = DailyQuest(
    id=6,
    name='In_a_single_battle_inflict_3_Weakness_Break_of_different_Types',
    cn='单场战斗中，触发3种不同属性的弱点击破',
    cht='單場戰鬥中，觸發3種不同屬性的弱點擊破',
    en='In a single battle, inflict 3 Weakness Break of different Types',
    jp='一度の戦闘で、異なる3種の属性の弱点撃破を発動する',
)
Inflict_Weakness_Break_5_times = DailyQuest(
    id=7,
    name='Inflict_Weakness_Break_5_times',
    cn='累计触发弱点击破效果5次',
    cht='累積觸發弱點擊破效果5次',
    en='Inflict Weakness Break 5 times',
    jp='累計で弱点撃破効果を5回発動する',
)
Defeat_a_total_of_20_enemies = DailyQuest(
    id=8,
    name='Defeat_a_total_of_20_enemies',
    cn='累计消灭20个敌人',
    cht='累積消滅20個敵人',
    en='Defeat a total of 20 enemies',
    jp='敵を累計で20体倒す',
)
Enter_combat_by_attacking_enemy_Weakness_and_win_3_times = DailyQuest(
    id=9,
    name='Enter_combat_by_attacking_enemy_Weakness_and_win_3_times',
    cn='利用弱点进入战斗并获胜3次',
    cht='利用弱點進入戰鬥並獲勝3次',
    en="Enter combat by attacking enemy's Weakness and win 3 times",
    jp='弱点を攻撃して戦闘に入り、3回勝利する',
)
Use_Technique_2_times = DailyQuest(
    id=10,
    name='Use_Technique_2_times',
    cn='累计施放2次秘技',
    cht='累積施放2次秘技',
    en='Use Technique 2 times',
    jp='秘技を累計2回発動する',
)
Go_on_assignment_1_time = DailyQuest(
    id=11,
    name='Go_on_assignment_1_time',
    cn='派遣1次委托',
    cht='派遣1次委託',
    en='Go on assignment 1 time',
    jp='依頼に1回派遣する',
)
Take_1_photo = DailyQuest(
    id=12,
    name='Take_1_photo',
    cn='拍照1次',
    cht='拍照1次',
    en='Take 1 photo',
    jp='1回撮影する',
)
Destroy_3_destructible_objects = DailyQuest(
    id=13,
    name='Destroy_3_destructible_objects',
    cn='累计击碎3个可破坏物',
    cht='累積擊碎3個可破壞物',
    en='Destroy 3 destructible objects',
    jp='破壊できるオブジェクトを累計で3つ破壊する',
)
Complete_Forgotten_Hall_1_time = DailyQuest(
    id=14,
    name='Complete_Forgotten_Hall_1_time',
    cn='完成1次「忘却之庭」',
    cht='完成1次「忘卻之庭」',
    en='Complete Forgotten Hall 1 time',
    jp='「忘却の庭」を1回クリアする',
)
Complete_Echo_of_War_1_times = DailyQuest(
    id=15,
    name='Complete_Echo_of_War_1_times',
    cn='完成1次「历战余响」',
    cht='完成1次「歷戰餘響」',
    en='Complete Echo of War 1 time(s)',
    jp='「歴戦余韻」を1回クリアする',
)
Complete_1_stage_in_Simulated_Universe_Any_world = DailyQuest(
    id=16,
    name='Complete_1_stage_in_Simulated_Universe_Any_world',
    cn='通关「模拟宇宙」（任意世界）的1个区域',
    cht='完成「模擬宇宙」任意世界的1個區域',
    en='Complete 1 stage in Simulated Universe (Any world)',
    jp='「模擬宇宙」のエリアを1つクリアする（任意の世界）',
)
Obtain_victory_in_combat_with_support_characters_1_time = DailyQuest(
    id=17,
    name='Obtain_victory_in_combat_with_support_characters_1_time',
    cn='使用支援角色并获得战斗胜利1次',
    cht='使用支援角色並獲得戰鬥勝利1次',
    en='Obtain victory in combat with support characters 1 time',
    jp='サポートキャラを使い、戦闘に1回勝利する',
)
Use_an_Ultimate_to_deal_the_final_blow_1_time = DailyQuest(
    id=18,
    name='Use_an_Ultimate_to_deal_the_final_blow_1_time',
    cn='施放终结技造成制胜一击1次',
    cht='施放終結技造成制勝一擊1次',
    en='Use an Ultimate to deal the final blow 1 time',
    jp='必殺技で最後の一撃を1回与える',
)
Level_up_any_character_1_time = DailyQuest(
    id=19,
    name='Level_up_any_character_1_time',
    cn='将任意角色等级提升1次',
    cht='將任意角色等級提升1次',
    en='Level up any character 1 time',
    jp='任意のキャラを1回レベルアップする',
)
Level_up_any_Light_Cone_1_time = DailyQuest(
    id=20,
    name='Level_up_any_Light_Cone_1_time',
    cn='将任意光锥等级提升1次',
    cht='將任意光錐等級提升1次',
    en='Level up any Light Cone 1 time',
    jp='任意の光円錐を1回レベルアップする',
)
Level_up_any_Relic_1_time = DailyQuest(
    id=21,
    name='Level_up_any_Relic_1_time',
    cn='将任意遗器等级提升1次',
    cht='將任意遺器等級提升1次',
    en='Level up any Relic 1 time',
    jp='任意の遺物を1回レベルアップする',
)
Salvage_any_Relic = DailyQuest(
    id=22,
    name='Salvage_any_Relic',
    cn='分解任意1件遗器',
    cht='分解任意1件遺器',
    en='Salvage any Relic',
    jp='任意の遺物1つを分解する',
)
Synthesize_Consumable_1_time = DailyQuest(
    id=23,
    name='Synthesize_Consumable_1_time',
    cn='合成1次消耗品',
    cht='合成1次消耗品',
    en='Synthesize Consumable 1 time',
    jp='消耗品を1回合成する',
)
Synthesize_material_1_time = DailyQuest(
    id=24,
    name='Synthesize_material_1_time',
    cn='合成1次材料',
    cht='合成1次素材',
    en='Synthesize material 1 time',
    jp='素材を1回合成する',
)
Use_Consumables_1_time = DailyQuest(
    id=25,
    name='Use_Consumables_1_time',
    cn='使用1件消耗品',
    cht='使用1件消耗品',
    en='Use Consumables 1 time',
    jp='消耗品を1個使う',
)

```

`tasks/daily/keywords/daily_quest_state.py`:

```py
from .classes import DailyQuestState

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Go = DailyQuestState(
    id=1,
    name='Go',
    cn='前往',
    cht='前往',
    en='Go',
    jp='進む',
)
Claim = DailyQuestState(
    id=2,
    name='Claim',
    cn='领取',
    cht='領取',
    en='Claim',
    jp='受取',
)
In_Progress = DailyQuestState(
    id=3,
    name='In_Progress',
    cn='进行中',
    cht='進行中',
    en='In Progress',
    jp='進行中',
)
Claimed = DailyQuestState(
    id=4,
    name='Claimed',
    cn='已领取',
    cht='已領取',
    en='Claimed',
    jp='受取済',
)
Today_Activity_completed = DailyQuestState(
    id=5,
    name='Today_Activity_completed',
    cn='本日活跃度已满',
    cht='本日活躍度已滿',
    en="Today's Activity completed",
    jp='本日のアクティブ度が最大に達しました',
)

```

`tasks/daily/synthesize.py`:

```py
from module.ocr.ocr import *
from module.ui.scroll import Scroll
from tasks.base.assets.assets_base_page import MENU_CHECK, SYNTHESIZE_CHECK
from tasks.base.assets.assets_base_popup import GET_REWARD
from tasks.base.page import Page, page_menu, page_synthesize
from tasks.base.ui import UI
from tasks.base.assets.assets_base_page import MENU_SCROLL
from tasks.base.assets.assets_base_popup import CONFIRM_POPUP
from tasks.daily.assets.assets_daily_synthesize_consumable import *
from tasks.daily.assets.assets_daily_synthesize_material import *


class SynthesizeUI(UI):
    # Default list of candidate items
    default_candidate_items = {}

    def ensure_scroll_top(self, page: str | Page, skip_first_screenshot=False) -> None:
        """
        Args:
            page:
            skip_first_screenshot:

        Examples:
            self = SynthesizeUI('alas')
            self.device.screenshot()
            self.ensure_scroll_top(page=page_menu)
        """
        if isinstance(page, Page):
            page = page.name

        match page:
            case page_menu.name:
                check_image = MENU_CHECK
                scroll = Scroll(MENU_SCROLL.button, color=(191, 191, 191), name=MENU_SCROLL.name)
            case page_synthesize.name:
                check_image = SYNTHESIZE_CHECK
                scroll = Scroll(SYNTHESIZE_SCROLL.button, color=(210, 210, 210), name=SYNTHESIZE_SCROLL.name)
            case _:
                logger.info(f'No page matched, just skip')
                return

        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            if not self.appear(check_image):
                logger.info(f'Current page is not {page} page, just skip')
                break
            if not scroll.appear(main=self):
                logger.info(f'{page} scroll can not find, just skip')
                break

            # Determine whether the scroll bar at the top,
            # and if it does not, pull the scroll bar to the top
            if scroll.at_top(main=self):
                logger.info(f'{page} scroll at the top')
                break
            if not scroll.at_top(main=self):
                logger.info(f'Pull the {page} scroll bar to the top')
                scroll.set_top(main=self)
                continue

    def _ensure_synthesize_page(self):
        # If the current page is not the menu page,
        # the menu scroll bar must be at the top when opening the menu page from other page,
        # so first step is determine whether the scroll bar is at the top
        self.ensure_scroll_top(page=page_menu)
        self.ui_ensure(page_synthesize)

    # Default subpage is consumables
    def _switch_subpage(self, skip_first_screenshot=True, subpage: ButtonWrapper = SYNTHESIZE_GOTO_CONSUMABLES,
                        subpage_check: ButtonWrapper = SYNTHESIZE_CONSUMABLES_CHECK):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(subpage_check):
                logger.info(f'Synthesize {subpage.name} subpage appear')
                break
            # Switch to subpage
            if self.appear_then_click(subpage):
                logger.info(f'Switch to {subpage.name} subpage')
                continue

    def _select_items(self, candidate_items: dict[ButtonWrapper, ButtonWrapper]) -> bool:
        for item, item_check in candidate_items.items():
            # Determine if the "item" can be found and synthesized in the left item column
            if item.match_template_color(self.device.image, similarity=0.7):
                logger.info('Find an item that can be synthesized')
                # Ensure that item is selected
                skip_first_screenshot = True
                while 1:
                    if skip_first_screenshot:
                        skip_first_screenshot = False
                    else:
                        self.device.screenshot()
                    if self.appear(item_check):
                        logger.info('Item that can be synthesized has been selected')
                        return True
                    if self.appear_then_click(item, similarity=0.7):
                        continue
        else:
            return False

    def _search_and_select_items(self, target_button: ButtonWrapper = None,
                                 target_button_check: ButtonWrapper = None) -> bool:
        candidate_items = {target_button: target_button_check} if target_button and target_button_check \
            else self.__class__.default_candidate_items

        # Search target button from top to bottom
        scroll = Scroll(SYNTHESIZE_SCROLL.button, color=(210, 210, 210), name=SYNTHESIZE_SCROLL.name)
        if scroll.appear(main=self):
            skip_first_screenshot = True
            while 1:
                if skip_first_screenshot:
                    skip_first_screenshot = False
                else:
                    self.device.screenshot()
                if self._select_items(candidate_items):
                    return True
                if scroll.at_bottom(main=self):
                    logger.info('There are no suitable items to synthesize')
                    return False
                if not scroll.at_bottom(main=self):
                    scroll.next_page(main=self)
                    continue
        else:
            return self._select_items(candidate_items)

    def _open_synthesize_popup(self, skip_first_screenshot=True):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(CONFIRM_POPUP):
                logger.info('Synthesize confirm popup window appear')
                break
            # The recipe of the item has not been unlocked yet, but it can be unlocked now
            # Click the "recipe unlock" button to unlock the synthesize recipe
            if self.appear_then_click(RECIPE_UNLOCK):
                logger.info('Unlock the synthesize recipe')
                continue
            # click the "synthesize" button to open the synthesize popup window
            if self.appear_then_click(SYNTHESIZE_CONFIRM):
                logger.info('Click the synthesize button')
                continue

    def _synthesize_confirm(self, skip_first_screenshot=True):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(GET_REWARD):
                logger.info('Synthesize consumable completed')
                break
            # Synthesize confirm
            if self.appear_then_click(CONFIRM_POPUP):
                logger.info('Click the confirm button')
                continue

    def _back_to_synthesize_page(self, skip_first_screenshot=True):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(SYNTHESIZE_CHECK):
                logger.info('Synthesize consumables page appear')
                break
            # Go back to the previous page
            if self.appear_then_click(GET_REWARD):
                logger.info('Click on the blank space to back to synthesize page')
                continue

    def _synthesize(self, target_button: ButtonWrapper = None,
                    target_button_check: ButtonWrapper = None) -> bool:
        self.ensure_scroll_top(page=page_synthesize)
        if self._search_and_select_items(target_button, target_button_check):
            self._open_synthesize_popup()
            self._synthesize_confirm()
            self._back_to_synthesize_page()
            return True
        else:
            return False


class SynthesizeConsumablesUI(SynthesizeUI):
    # Selected three items that are easiest to obtain their synthetic materials
    default_candidate_items = {
        CONSUMABLES_TRICK_SNACK: CONSUMABLES_TRICK_SNACK_CHECK,
        CONSUMABLES_COMFORT_FOOD: CONSUMABLES_COMFORT_FOOD_CHECK,
        CONSUMABLES_SIMPLE_AED: CONSUMABLES_SIMPLE_AED_CHECK
    }

    def synthesize_consumables(self, target_button: ButtonWrapper = None,
                               target_button_check: ButtonWrapper = None) -> bool:
        """
        Args:
            target_button(ButtonWrapper):
            target_button_check(ButtonWrapper):

        Returns:
            bool:

        Examples:
            self = SynthesizeConsumablesUI('alas')
            self.device.screenshot()
            result = self.synthesize_consumables()
        """

        logger.hr('Synthesize consumables', level=2)
        self._ensure_synthesize_page()
        self._switch_subpage(subpage=SYNTHESIZE_GOTO_CONSUMABLES, subpage_check=SYNTHESIZE_CONSUMABLES_CHECK)
        return self._synthesize(target_button, target_button_check)


class SynthesizeMaterialUI(SynthesizeUI):
    # Selected three items that are easiest to obtain their synthetic materials
    default_candidate_items = {
        GLIMMERING_CORE: GLIMMERING_CORE_CHECK,
        USURPERS_SCHEME: USURPERS_SCHEME_CHECK,
        SILVERMANE_INSIGNIA: SILVERMANE_INSIGNIA_CHECK
    }

    def synthesize_material(self, target_button: ButtonWrapper = None,
                            target_button_check: ButtonWrapper = None) -> bool:
        """
        Args:
            target_button(ButtonWrapper):
            target_button_check(ButtonWrapper):

        Returns:
            bool:

        Examples:
            self = SynthesizeMaterialUI('alas')
            self.device.screenshot()
            result = self.synthesize_material()
        """

        logger.hr('Synthesize material', level=2)
        self._ensure_synthesize_page()
        self._switch_subpage(subpage=SYNTHESIZE_GOTO_MATERIAL, subpage_check=SYNTHESIZE_MATERIAL_CHECK)
        return self._synthesize(target_button, target_button_check)

```

`tasks/daily/use_technique.py`:

```py
from module.base.timer import Timer
from module.logger import logger
from tasks.dungeon.keywords import KEYWORDS_DUNGEON_LIST
from tasks.forgotten_hall.keywords import KEYWORDS_FORGOTTEN_HALL_STAGE
from tasks.forgotten_hall.ui import ForgottenHallUI
from tasks.map.control.joystick import MapControlJoystick


class UseTechniqueUI(MapControlJoystick, ForgottenHallUI):

    def _use_technique(self, count: int, skip_first_screenshot=True):
        remains = self.map_get_technique_points()
        if count > remains:
            logger.warning(f"Try to use technique {count} times but only have {remains}")
            return

        # Handle technique animation when it's being used
        # INFO │ Click ( 900,  600) @ E_BUTTON
        # INFO │ [TechniquePoints] 4
        # INFO │ [TechniquePoints] 3
        # INFO │ [TechniquePoints] 4
        # INFO │ [TechniquePoints] 3
        # INFO │ [TechniquePoints] 3
        confirm = Timer(0.5, count=2).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            remains_after = self.map_get_technique_points()
            if remains - remains_after >= count:
                if confirm.reached():
                    logger.info(f"{remains - remains_after} techniques used")
                    break
            else:
                confirm.reset()

            self.handle_map_E()

    def use_technique(self, count: int = 2, skip_first_screenshot=True):
        """
        Args:
            skip_first_screenshot:
            count: use {count} times

        Examples:
            self = UseTechniquesUI('alas')
            self.device.screenshot()
            self.use_techniques(2)

        Pages:
            in: Any
            out: page_forgotten_hall, FORGOTTEN_HALL_CHECKED
        """
        logger.hr('Use techniques', level=2)
        self.stage_goto(KEYWORDS_DUNGEON_LIST.The_Last_Vestiges_of_Towering_Citadel,
                        KEYWORDS_FORGOTTEN_HALL_STAGE.Stage_1)
        self._choose_first_character()
        self._enter_forgotten_hall_dungeon()
        self._use_technique(count, skip_first_screenshot=skip_first_screenshot)
        self.exit_dungeon()
        self.ui_goto_main()

```

`tasks/dungeon/assets/assets_dungeon_event.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

DOUBLE_CALYX_EVENT_TAG = ButtonWrapper(
    name='DOUBLE_CALYX_EVENT_TAG',
    share=Button(
        file='./assets/share/dungeon/event/DOUBLE_CALYX_EVENT_TAG.png',
        area=(329, 224, 425, 392),
        search=(309, 204, 445, 412),
        color=(131, 127, 117),
        button=(329, 224, 425, 392),
    ),
)
DOUBLE_RELIC_EVENT_TAG = ButtonWrapper(
    name='DOUBLE_RELIC_EVENT_TAG',
    share=Button(
        file='./assets/share/dungeon/event/DOUBLE_RELIC_EVENT_TAG.png',
        area=(329, 505, 425, 589),
        search=(309, 485, 445, 609),
        color=(211, 206, 198),
        button=(329, 505, 425, 589),
    ),
)
OCR_DOUBLE_EVENT_REMAIN = ButtonWrapper(
    name='OCR_DOUBLE_EVENT_REMAIN',
    share=Button(
        file='./assets/share/dungeon/event/OCR_DOUBLE_EVENT_REMAIN.png',
        area=(434, 141, 1163, 166),
        search=(414, 121, 1183, 186),
        color=(228, 185, 100),
        button=(434, 141, 1163, 166),
    ),
)

```

`tasks/dungeon/assets/assets_dungeon_ui.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

DAILY_TRAINING_CHECK = ButtonWrapper(
    name='DAILY_TRAINING_CHECK',
    share=Button(
        file='./assets/share/dungeon/ui/DAILY_TRAINING_CHECK.png',
        area=(241, 94, 281, 134),
        search=(221, 74, 301, 154),
        color=(131, 131, 131),
        button=(241, 94, 281, 134),
    ),
)
DAILY_TRAINING_CLICK = ButtonWrapper(
    name='DAILY_TRAINING_CLICK',
    share=Button(
        file='./assets/share/dungeon/ui/DAILY_TRAINING_CLICK.png',
        area=(241, 95, 281, 134),
        search=(221, 75, 301, 154),
        color=(97, 96, 93),
        button=(241, 95, 281, 134),
    ),
)
DAILY_TRAINING_LOADED = ButtonWrapper(
    name='DAILY_TRAINING_LOADED',
    share=Button(
        file='./assets/share/dungeon/ui/DAILY_TRAINING_LOADED.png',
        area=(1143, 546, 1158, 561),
        search=(1123, 526, 1178, 581),
        color=(63, 56, 50),
        button=(1143, 546, 1158, 561),
    ),
)
OCR_DUNGEON_LIST = ButtonWrapper(
    name='OCR_DUNGEON_LIST',
    share=Button(
        file='./assets/share/dungeon/ui/OCR_DUNGEON_LIST.png',
        area=(581, 176, 1165, 661),
        search=(561, 156, 1185, 681),
        color=(212, 214, 220),
        button=(440, 176, 588, 656),
    ),
)
OCR_DUNGEON_NAV = ButtonWrapper(
    name='OCR_DUNGEON_NAV',
    share=Button(
        file='./assets/share/dungeon/ui/OCR_DUNGEON_NAV.png',
        area=(117, 182, 423, 641),
        search=(97, 162, 443, 661),
        color=(173, 172, 172),
        button=(117, 182, 423, 641),
    ),
)
OCR_SIMUNI_POINT = ButtonWrapper(
    name='OCR_SIMUNI_POINT',
    share=Button(
        file='./assets/share/dungeon/ui/OCR_SIMUNI_POINT.png',
        area=(580, 237, 820, 277),
        search=(560, 217, 840, 297),
        color=(166, 168, 252),
        button=(580, 237, 820, 277),
    ),
)
OPERATION_BRIEFING_CHECK = ButtonWrapper(
    name='OPERATION_BRIEFING_CHECK',
    share=Button(
        file='./assets/share/dungeon/ui/OPERATION_BRIEFING_CHECK.png',
        area=(149, 92, 193, 136),
        search=(129, 72, 213, 156),
        color=(152, 152, 152),
        button=(149, 92, 193, 136),
    ),
)
OPERATION_BRIEFING_CLICK = ButtonWrapper(
    name='OPERATION_BRIEFING_CLICK',
    share=Button(
        file='./assets/share/dungeon/ui/OPERATION_BRIEFING_CLICK.png',
        area=(149, 92, 193, 136),
        search=(129, 72, 213, 156),
        color=(80, 79, 76),
        button=(149, 92, 193, 136),
    ),
)
SURVIVAL_INDEX_CHECK = ButtonWrapper(
    name='SURVIVAL_INDEX_CHECK',
    share=Button(
        file='./assets/share/dungeon/ui/SURVIVAL_INDEX_CHECK.png',
        area=(332, 95, 370, 133),
        search=(312, 75, 390, 153),
        color=(136, 136, 136),
        button=(332, 95, 370, 133),
    ),
)
SURVIVAL_INDEX_CLICK = ButtonWrapper(
    name='SURVIVAL_INDEX_CLICK',
    share=Button(
        file='./assets/share/dungeon/ui/SURVIVAL_INDEX_CLICK.png',
        area=(332, 94, 370, 133),
        search=(312, 74, 390, 153),
        color=(90, 89, 87),
        button=(332, 94, 370, 133),
    ),
)
SURVIVAL_INDEX_LOADED = ButtonWrapper(
    name='SURVIVAL_INDEX_LOADED',
    share=Button(
        file='./assets/share/dungeon/ui/SURVIVAL_INDEX_LOADED.png',
        area=(451, 286, 476, 302),
        search=(449, 263, 489, 356),
        color=(142, 150, 197),
        button=(451, 286, 476, 302),
    ),
)

```

`tasks/dungeon/dungeon.py`:

```py
from module.base.utils import area_offset
from module.logger import logger
from tasks.combat.combat import Combat
from tasks.daily.keywords import KEYWORDS_DAILY_QUEST
from tasks.dungeon.event import DungeonEvent
from tasks.dungeon.keywords import DungeonList, KEYWORDS_DUNGEON_LIST, KEYWORDS_DUNGEON_TAB
from tasks.dungeon.ui import DungeonUI
from tasks.battle_pass.keywords import KEYWORD_BATTLE_PASS_QUEST

class Dungeon(DungeonUI, DungeonEvent, Combat):
    called_daily_support = False
    achieved_daily_quest = False
    daily_quests = []

    def _dungeon_run(self, dungeon: DungeonList, team: int = None, wave_limit: int = 0, support_character: str = None,
                     skip_ui_switch: bool = False):
        """
        Args:
            dungeon:
            team: 1 to 6.
            wave_limit: Limit combat runs, 0 means no limit.
            support_character: Support character name
            skip_ui_switch: True if already at dungeon aside

        Returns:
            int: Run count

        Pages:
            in: Any
            out: page_main
        """
        if team is None:
            team = self.config.Dungeon_Team
        if support_character is None and self.config.DungeonSupport_Use == 'always_use':
            support_character = self.config.DungeonSupport_Character

        logger.hr('Dungeon run', level=1)
        logger.info(f'Dungeon: {dungeon}, team={team}, wave_limit={wave_limit}, support_character={support_character}')

        if not skip_ui_switch:
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
            self.dungeon_goto(dungeon)

            if dungeon == KEYWORDS_DUNGEON_LIST.Stagnant_Shadow_Blaze:
                if self.handle_destructible_around_blaze():
                    self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
                    self.dungeon_goto(dungeon)

        # Combat
        count = self.combat(team=team, wave_limit=wave_limit, support_character=support_character)

        # Update quest states
        if dungeon.is_Calyx_Golden \
                and KEYWORDS_DAILY_QUEST.Clear_Calyx_Golden_1_times in self.daily_quests:
            logger.info('Achieved daily quest Clear_Calyx_Golden_1_times')
            self.achieved_daily_quest = True
        if dungeon.is_Calyx_Crimson \
                and KEYWORDS_DAILY_QUEST.Complete_Calyx_Crimson_1_time in self.daily_quests:
            logger.info('Achieve daily quest Complete_Calyx_Crimson_1_time')
            self.achieved_daily_quest = True
        if dungeon.is_Stagnant_Shadow \
                and KEYWORDS_DAILY_QUEST.Clear_Stagnant_Shadow_1_times in self.daily_quests:
            logger.info('Achieve daily quest Clear_Stagnant_Shadow_1_times')
            self.achieved_daily_quest = True
        if dungeon.is_Cavern_of_Corrosion \
                and KEYWORDS_DAILY_QUEST.Clear_Cavern_of_Corrosion_1_times in self.daily_quests:
            logger.info('Achieve daily quest Clear_Cavern_of_Corrosion_1_times')
            self.achieved_daily_quest = True
        if support_character is not None:
            self.called_daily_support = True
            if KEYWORDS_DAILY_QUEST.Obtain_victory_in_combat_with_support_characters_1_time:
                logger.info('Achieve daily quest Obtain_victory_in_combat_with_support_characters_1_time')
                self.achieved_daily_quest = True

        # Check trailblaze power, this may stop current task
        if self.is_trailblaze_power_exhausted():
            self.delay_dungeon_task(dungeon)
        return count

    def dungeon_run(
            self, dungeon: DungeonList, team: int = None, wave_limit: int = 0, support_character: str = None):
        """
        Run dungeon, and handle daily support

        Args:
            dungeon:
            team: 1 to 6.
            wave_limit: Limit combat runs, 0 means no limit.
            support_character: Support character name

        Returns:
            int: Run count

        Pages:
            in: Any
            out: page_main
        """
        require = self.require_compulsory_support()
        if require:
            logger.info('Run once with support')
            count = self._dungeon_run(dungeon=dungeon, team=team, wave_limit=1,
                                      support_character=self.config.DungeonSupport_Character)

            logger.info('Run the rest waves without compulsory support')
            if wave_limit >= 2 or wave_limit == 0:
                # Already at page_name with DUNGEON_COMBAT_INTERACT
                if wave_limit >= 2:
                    wave_limit -= 1
                count += self._dungeon_run(dungeon=dungeon, team=team, wave_limit=wave_limit,
                                           support_character=support_character, skip_ui_switch=True)

            return count

        else:
            # Normal run
            return self._dungeon_run(dungeon=dungeon, team=team, wave_limit=wave_limit,
                                     support_character=support_character)

    def run(self):
        self.config.update_battle_pass_quests()
        self.config.update_daily_quests()
        self.called_daily_support = False
        self.achieved_daily_quest = False
        self.daily_quests = self.config.stored.DailyQuest.load_quests()

        # Update double event records
        if self.config.stored.DungeonDouble.is_expired():
            logger.info('Get dungeon double remains')
            # UI switches
            switched = self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
            if not switched:
                # Nav must at top, reset nav states
                self.ui_goto_main()
                self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
            # Check remains
            calyx = 0
            relic = 0
            if self.has_double_calyx_event():
                self._dungeon_nav_goto(KEYWORDS_DUNGEON_LIST.Calyx_Golden_Treasures)
                calyx = self.get_double_event_remain()
            if self.has_double_relic_event():
                self._dungeon_nav_goto(KEYWORDS_DUNGEON_LIST.Cavern_of_Corrosion_Path_of_Gelid_Wind)
                relic = self.get_double_event_remain()
            with self.config.multi_set():
                self.config.stored.DungeonDouble.calyx = calyx
                self.config.stored.DungeonDouble.relic = relic
                # Update SimulatedUniverse points
                logger.info('Get simulated universe points')
                self.dungeon_get_simuni_point()

        # Run double events
        ran_calyx_golden = False
        ran_calyx_crimson = False
        ran_cavern_of_corrosion = False
        # Double calyx
        if self.config.Dungeon_NameAtDoubleCalyx != 'do_not_participate' \
                and self.config.stored.DungeonDouble.calyx > 0:
            logger.info('Run double calyx')
            dungeon = DungeonList.find(self.config.Dungeon_NameAtDoubleCalyx)
            if self.dungeon_run(dungeon=dungeon, wave_limit=self.config.stored.DungeonDouble.calyx):
                if dungeon.is_Calyx_Golden:
                    ran_calyx_golden = True
                if dungeon.is_Calyx_Crimson:
                    ran_calyx_crimson = True
        # Double relic
        if self.config.Dungeon_NameAtDoubleRelic != 'do_not_participate' \
                and self.config.stored.DungeonDouble.relic > 0:
            logger.info('Run double relic')
            dungeon = DungeonList.find(self.config.Dungeon_NameAtDoubleRelic)
            if self.dungeon_run(dungeon=dungeon, wave_limit=self.config.stored.DungeonDouble.relic):
                ran_cavern_of_corrosion = True

        # Dungeon to clear all trailblaze power
        final = DungeonList.find(self.config.Dungeon_Name)

        # Run dungeon that required by daily quests
        # Calyx_Golden
        if KEYWORDS_DAILY_QUEST.Clear_Calyx_Golden_1_times in self.daily_quests \
                and self.config.DungeonDaily_CalyxGolden != 'do_not_achieve' \
                and not final.is_Calyx_Golden \
                and not ran_calyx_golden:
            logger.info('Run Calyx_Golden once')
            dungeon = DungeonList.find(self.config.DungeonDaily_CalyxGolden)
            self.dungeon_run(dungeon=dungeon, wave_limit=1)
        # Calyx_Crimson
        if KEYWORDS_DAILY_QUEST.Complete_Calyx_Crimson_1_time in self.daily_quests \
                and self.config.DungeonDaily_CalyxCrimson != 'do_not_achieve' \
                and not final.is_Calyx_Crimson \
                and not ran_calyx_crimson:
            logger.info('Run Calyx_Crimson once')
            dungeon = DungeonList.find(self.config.DungeonDaily_CalyxCrimson)
            self.dungeon_run(dungeon=dungeon, wave_limit=1)
        # Stagnant_Shadow
        if KEYWORDS_DAILY_QUEST.Clear_Stagnant_Shadow_1_times in self.daily_quests \
                and self.config.DungeonDaily_StagnantShadow != 'do_not_achieve' \
                and not final.is_Stagnant_Shadow:
            logger.info('Run Stagnant_Shadow once')
            dungeon = DungeonList.find(self.config.DungeonDaily_StagnantShadow)
            self.dungeon_run(dungeon=dungeon, wave_limit=1)
        # Cavern_of_Corrosion
        if KEYWORDS_DAILY_QUEST.Clear_Cavern_of_Corrosion_1_times in self.daily_quests \
                and self.config.DungeonDaily_CavernOfCorrosion != 'do_not_achieve' \
                and not final.is_Cavern_of_Corrosion \
                and not ran_cavern_of_corrosion:
            logger.info('Run Cavern_of_Corrosion once')
            dungeon = DungeonList.find(self.config.DungeonDaily_CavernOfCorrosion)
            self.dungeon_run(dungeon=dungeon, wave_limit=1)

        # Combat
        self.dungeon_run(final)
        self.delay_dungeon_task(final)

    def delay_dungeon_task(self, dungeon):
        if dungeon.is_Cavern_of_Corrosion:
            limit = 80
        else:
            limit = 60
        # Recover 1 trailbaze power each 6 minutes
        current = self.config.stored.TrailblazePower.value
        cover = max(limit - current, 0) * 6
        logger.info(f'Currently has {current} need {cover} minutes to reach {limit}')
        logger.attr('achieved_daily_quest', self.achieved_daily_quest)
        with self.config.multi_set():
            # Check battle pass
            quests = self.config.stored.BattlePassTodayQuest.load_quests()
            if KEYWORD_BATTLE_PASS_QUEST.Consume_1_Trailblaze_Power in quests:
                logger.info('Probably achieved battle pass quest Consume_1_Trailblaze_Power')
                self.config.task_call('BattlePass')
            # Check daily
            if self.achieved_daily_quest:
                self.config.task_call('DailyQuest')
            # Delay self
            self.config.task_delay(minute=cover)
        self.config.task_stop()

    def handle_destructible_around_blaze(self):
        """
        Stagnant_Shadow_Blaze has a destructible object nearby, attacks are aimed at it first
        so destroy it first

        Returns:
            bool: If handled.

        Pages:
            in: COMBAT_PREPARE
            out: page_main, map position changed if handled
        """
        logger.hr('Handle destructible around blaze')
        self.combat_exit()
        # Check if there's a front sight at bottom-left corner
        area = area_offset((-50, -150, 0, 0), offset=self.config.ASSETS_RESOLUTION)

        skip_first_screenshot = True
        self._map_A_timer.reset()
        handled = False
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.image_color_count(area, color=(48, 170, 204), threshold=221, count=50):
                logger.info(f'Found destructible object')
                if self.handle_map_A():
                    handled = True
                    continue
            else:
                logger.info(f'No destructible object')
                if not handled:
                    break
                if self._map_A_timer.reached():
                    break

        return handled

    def require_compulsory_support(self) -> bool:
        require = False

        if not self.config.stored.DailyActivity.is_full():
            if KEYWORDS_DAILY_QUEST.Obtain_victory_in_combat_with_support_characters_1_time \
                    in self.daily_quests:
                require = True

        logger.attr('called_daily_support', self.called_daily_support)
        if self.called_daily_support:
            require = False

        # Not required, cause any dungeon run will achieve the quest
        logger.attr('DungeonSupport_Use', self.config.DungeonSupport_Use)
        if self.config.DungeonSupport_Use == 'always_use':
            require = False

        logger.attr('Require compulsory support', require)
        return require

```

`tasks/dungeon/event.py`:

```py
from module.logger import logger
from module.ocr.ocr import DigitCounter
from tasks.base.ui import UI
from tasks.dungeon.assets.assets_dungeon_event import (
    DOUBLE_CALYX_EVENT_TAG,
    DOUBLE_RELIC_EVENT_TAG,
    OCR_DOUBLE_EVENT_REMAIN
)


class DungeonEvent(UI):
    def has_double_calyx_event(self) -> bool:
        """
        Pages:
            in: page_guide, Survival_Index, nav at top
        """
        has = self.image_color_count(DOUBLE_CALYX_EVENT_TAG, color=(252, 209, 123), threshold=221, count=50)
        has |= self.image_color_count(DOUBLE_CALYX_EVENT_TAG, color=(252, 251, 140), threshold=221, count=50)
        logger.attr('Double calyx', has)
        return has

    def has_double_relic_event(self) -> bool:
        """
        Pages:
            in: page_guide, Survival_Index, nav at top
        """
        has = self.image_color_count(DOUBLE_RELIC_EVENT_TAG, color=(252, 209, 123), threshold=221, count=50)
        has |= self.image_color_count(DOUBLE_RELIC_EVENT_TAG, color=(252, 251, 140), threshold=221, count=50)
        logger.attr('Double relic', has)
        return has

    def get_double_event_remain(self) -> int:
        """
        Pages:
            in: page_guide, Survival_Index, selected at the nav with double event
        """
        ocr = DigitCounter(OCR_DOUBLE_EVENT_REMAIN)
        remain, _, total = ocr.ocr_single_line(self.device.image)
        if total not in [3, 12]:
            logger.warning(f'Invalid double event remain')
            remain = 0
        logger.attr('Double event remain', remain)
        return remain

```

`tasks/dungeon/keywords/__init__.py`:

```py
import tasks.dungeon.keywords.dungeon as KEYWORDS_DUNGEON_LIST
import tasks.dungeon.keywords.dungeon_entrance as KEYWORDS_DUNGEON_ENTRANCE
import tasks.dungeon.keywords.nav as KEYWORDS_DUNGEON_NAV
import tasks.dungeon.keywords.tab as KEYWORDS_DUNGEON_TAB
from tasks.dungeon.keywords.classes import DungeonList, DungeonNav, DungeonTab

```

`tasks/dungeon/keywords/classes.py`:

```py
from dataclasses import dataclass
from functools import cached_property
from typing import ClassVar

from module.exception import ScriptError
from module.ocr.keyword import Keyword


@dataclass(repr=False)
class DungeonNav(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class DungeonTab(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class DungeonList(Keyword):
    instances: ClassVar = {}

    @cached_property
    def is_Calyx_Golden(self):
        return 'Calyx_Golden' in self.name

    @cached_property
    def is_Calyx_Crimson(self):
        return 'Calyx_Crimson' in self.name

    @cached_property
    def is_Calyx(self):
        return self.is_Calyx_Golden or self.is_Calyx_Crimson

    @cached_property
    def is_Stagnant_Shadow(self):
        return 'Stagnant_Shadow' in self.name

    @cached_property
    def is_Cavern_of_Corrosion(self):
        return 'Cavern_of_Corrosion' in self.name

    @cached_property
    def is_Echo_of_War(self):
        return 'Echo_of_War' in self.name

    @cached_property
    def is_Simulated_Universe(self):
        return 'Simulated_Universe' in self.name

    @cached_property
    def is_Forgotten_Hall(self):
        return ('Forgotten_Hall' in self.name) or ('Last_Vestiges' in self.name)

    @cached_property
    def is_Last_Vestiges(self):
        return 'Last_Vestiges' in self.name

    @cached_property
    def is_daily_dungeon(self):
        return self.is_Calyx_Golden or self.is_Calyx_Crimson or self.is_Stagnant_Shadow or self.is_Cavern_of_Corrosion

    @cached_property
    def is_weekly_dungeon(self):
        return self.is_Echo_of_War

    @cached_property
    def dungeon_nav(self) -> DungeonNav:
        import tasks.dungeon.keywords.nav as KEYWORDS_DUNGEON_NAV
        if self.is_Simulated_Universe:
            return KEYWORDS_DUNGEON_NAV.Simulated_Universe
        if self.is_Calyx_Golden:
            return KEYWORDS_DUNGEON_NAV.Calyx_Golden
        if self.is_Calyx_Crimson:
            return KEYWORDS_DUNGEON_NAV.Calyx_Crimson
        if self.is_Stagnant_Shadow:
            return KEYWORDS_DUNGEON_NAV.Stagnant_Shadow
        if self.is_Cavern_of_Corrosion:
            return KEYWORDS_DUNGEON_NAV.Cavern_of_Corrosion
        if self.is_Echo_of_War:
            return KEYWORDS_DUNGEON_NAV.Echo_of_War
        if self.is_Forgotten_Hall:
            return KEYWORDS_DUNGEON_NAV.Forgotten_Hall

        raise ScriptError(f'Cannot convert {self} to DungeonNav, please check keyword extractions')


@dataclass(repr=False)
class DungeonEntrance(Keyword):
    instances: ClassVar = {}

```

`tasks/dungeon/keywords/dungeon.py`:

```py
from .classes import DungeonList

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Calyx_Golden_Memories = DungeonList(
    id=1,
    name='Calyx_Golden_Memories',
    cn='回忆之蕾•拟造花萼（金）',
    cht='回憶之蕾•擬造花萼（金）',
    en='Bud of Memories',
    jp='疑似花萼（金）・回憶の蕾',
)
Calyx_Golden_Aether = DungeonList(
    id=2,
    name='Calyx_Golden_Aether',
    cn='以太之蕾•拟造花萼（金）',
    cht='乙太之蕾•擬造花萼（金）',
    en='Bud of Aether',
    jp='疑似花萼（金）・エーテルの蕾',
)
Calyx_Golden_Treasures = DungeonList(
    id=3,
    name='Calyx_Golden_Treasures',
    cn='藏珍之蕾•拟造花萼（金）',
    cht='藏珍之蕾•擬造花萼（金）',
    en='Bud of Treasures',
    jp='疑似花萼（金）・秘蔵の蕾',
)
Calyx_Crimson_Destruction = DungeonList(
    id=4,
    name='Calyx_Crimson_Destruction',
    cn='毁灭之蕾•拟造花萼（赤）',
    cht='毀滅之蕾•擬造花萼（赤）',
    en='Bud of Destruction',
    jp='疑似花萼（赤）・壊滅の蕾',
)
Calyx_Crimson_Preservation = DungeonList(
    id=5,
    name='Calyx_Crimson_Preservation',
    cn='存护之蕾•拟造花萼（赤）',
    cht='存護之蕾•擬造花萼（赤）',
    en='Bud of Preservation',
    jp='疑似花萼（赤）・存護の蕾',
)
Calyx_Crimson_The_Hunt = DungeonList(
    id=6,
    name='Calyx_Crimson_The_Hunt',
    cn='巡猎之蕾•拟造花萼（赤）',
    cht='巡獵之蕾•擬造花萼（赤）',
    en='Bud of The Hunt',
    jp='疑似花萼（赤）・巡狩の蕾',
)
Calyx_Crimson_Abundance = DungeonList(
    id=7,
    name='Calyx_Crimson_Abundance',
    cn='丰饶之蕾•拟造花萼（赤）',
    cht='豐饒之蕾•擬造花萼（赤）',
    en='Bud of Abundance',
    jp='疑似花萼（赤）・豊穣の蕾',
)
Calyx_Crimson_Erudition = DungeonList(
    id=8,
    name='Calyx_Crimson_Erudition',
    cn='智识之蕾•拟造花萼（赤）',
    cht='智識之蕾•擬造花萼（赤）',
    en='Bud of Erudition',
    jp='疑似花萼（赤）・知恵の蕾',
)
Calyx_Crimson_Harmony = DungeonList(
    id=9,
    name='Calyx_Crimson_Harmony',
    cn='同谐之蕾•拟造花萼（赤）',
    cht='同諧之蕾•擬造花萼（赤）',
    en='Bud of Harmony',
    jp='疑似花萼（赤）・調和の蕾',
)
Calyx_Crimson_Nihility = DungeonList(
    id=10,
    name='Calyx_Crimson_Nihility',
    cn='虚无之蕾•拟造花萼（赤）',
    cht='虛無之蕾•擬造花萼（赤）',
    en='Bud of Nihility',
    jp='疑似花萼（赤）・虚無の蕾',
)
Stagnant_Shadow_Quanta = DungeonList(
    id=11,
    name='Stagnant_Shadow_Quanta',
    cn='空海之形•凝滞虚影',
    cht='空海之形•凝滯虛影',
    en='Shape of Quanta',
    jp='凝結虚影・虚海の形',
)
Stagnant_Shadow_Gust = DungeonList(
    id=12,
    name='Stagnant_Shadow_Gust',
    cn='巽风之形•凝滞虚影',
    cht='巽風之形•凝滯虛影',
    en='Shape of Gust',
    jp='凝結虚影・薫風の形',
)
Stagnant_Shadow_Fulmination = DungeonList(
    id=13,
    name='Stagnant_Shadow_Fulmination',
    cn='鸣雷之形•凝滞虚影',
    cht='鳴雷之形•凝滯虛影',
    en='Shape of Fulmination',
    jp='凝結虚影・鳴雷の形',
)
Stagnant_Shadow_Blaze = DungeonList(
    id=14,
    name='Stagnant_Shadow_Blaze',
    cn='炎华之形•凝滞虚影',
    cht='炎華之形•凝滯虛影',
    en='Shape of Blaze',
    jp='凝結虚影・炎華の形',
)
Stagnant_Shadow_Spike = DungeonList(
    id=15,
    name='Stagnant_Shadow_Spike',
    cn='锋芒之形•凝滞虚影',
    cht='鋒芒之形•凝滯虛影',
    en='Shape of Spike',
    jp='凝結虚影・切先の形',
)
Stagnant_Shadow_Rime = DungeonList(
    id=16,
    name='Stagnant_Shadow_Rime',
    cn='霜晶之形•凝滞虚影',
    cht='霜晶之形•凝滯虛影',
    en='Shape of Rime',
    jp='凝結虚影・霜晶の形',
)
Stagnant_Shadow_Mirage = DungeonList(
    id=17,
    name='Stagnant_Shadow_Mirage',
    cn='幻光之形•凝滞虚影',
    cht='幻光之形•凝滯虛影',
    en='Shape of Mirage',
    jp='凝結虚影・幻光の形',
)
Stagnant_Shadow_Icicle = DungeonList(
    id=18,
    name='Stagnant_Shadow_Icicle',
    cn='冰棱之形•凝滞虚影',
    cht='冰稜之形•凝滯虛影',
    en='Shape of Icicle',
    jp='凝結虚影・氷柱の形',
)
Stagnant_Shadow_Doom = DungeonList(
    id=19,
    name='Stagnant_Shadow_Doom',
    cn='震厄之形•凝滞虚影',
    cht='震厄之形•凝滯虛影',
    en='Shape of Doom',
    jp='凝結虚影・震厄の形',
)
Stagnant_Shadow_Puppetry = DungeonList(
    id=20,
    name='Stagnant_Shadow_Puppetry',
    cn='偃偶之形•凝滞虚影',
    cht='偃偶之形•凝滯虛影',
    en='Shape of Puppetry',
    jp='凝結虚影・傀儡の形',
)
Stagnant_Shadow_Abomination = DungeonList(
    id=21,
    name='Stagnant_Shadow_Abomination',
    cn='孽兽之形•凝滞虚影',
    cht='孽獸之形•凝滯虛影',
    en='Shape of Abomination',
    jp='凝結虚影・厄獣の形',
)
Stagnant_Shadow_Celestial = DungeonList(
    id=22,
    name='Stagnant_Shadow_Celestial',
    cn='天人之形•凝滞虚影',
    cht='天人之形•凝滯虛影',
    en='Shape of Celestial',
    jp='凝結虚影・天人の形',
)
Cavern_of_Corrosion_Path_of_Gelid_Wind = DungeonList(
    id=23,
    name='Cavern_of_Corrosion_Path_of_Gelid_Wind',
    cn='霜风之径•侵蚀隧洞',
    cht='霜風之徑•侵蝕隧洞',
    en='Path of Gelid Wind',
    jp='侵蝕トンネル・霜風の路',
)
Cavern_of_Corrosion_Path_of_Jabbing_Punch = DungeonList(
    id=24,
    name='Cavern_of_Corrosion_Path_of_Jabbing_Punch',
    cn='迅拳之径•侵蚀隧洞',
    cht='迅拳之徑•侵蝕隧洞',
    en='Path of Jabbing Punch',
    jp='侵蝕トンネル・迅拳の路',
)
Cavern_of_Corrosion_Path_of_Drifting = DungeonList(
    id=25,
    name='Cavern_of_Corrosion_Path_of_Drifting',
    cn='漂泊之径•侵蚀隧洞',
    cht='漂泊之徑•侵蝕隧洞',
    en='Path of Drifting',
    jp='侵蝕トンネル・漂泊の路',
)
Cavern_of_Corrosion_Path_of_Providence = DungeonList(
    id=26,
    name='Cavern_of_Corrosion_Path_of_Providence',
    cn='睿治之径•侵蚀隧洞',
    cht='睿治之徑•侵蝕隧洞',
    en='Path of Providence',
    jp='侵蝕トンネル・睿治の路',
)
Cavern_of_Corrosion_Path_of_Holy_Hymn = DungeonList(
    id=27,
    name='Cavern_of_Corrosion_Path_of_Holy_Hymn',
    cn='圣颂之径•侵蚀隧洞',
    cht='聖頌之徑•侵蝕隧洞',
    en='Path of Holy Hymn',
    jp='侵蝕トンネル・聖頌の路',
)
Cavern_of_Corrosion_Path_of_Conflagration = DungeonList(
    id=28,
    name='Cavern_of_Corrosion_Path_of_Conflagration',
    cn='野焰之径•侵蚀隧洞',
    cht='野焰之徑•侵蝕隧洞',
    en='Path of Conflagration',
    jp='侵蝕トンネル・野焔の路',
)
Cavern_of_Corrosion_Path_of_Elixir_Seekers = DungeonList(
    id=29,
    name='Cavern_of_Corrosion_Path_of_Elixir_Seekers',
    cn='药使之径•侵蚀隧洞',
    cht='藥使之徑•侵蝕隧洞',
    en='Path of Elixir Seekers',
    jp='侵蝕トンネル・薬使の路',
)
Echo_of_War_Destruction_Beginning = DungeonList(
    id=30,
    name='Echo_of_War_Destruction_Beginning',
    cn='毁灭的开端•历战余响',
    cht='毀滅的開端•歷戰餘響',
    en="Destruction's Beginning",
    jp='歴戦余韻・壊滅の始まり',
)
Echo_of_War_End_of_the_Eternal_Freeze = DungeonList(
    id=31,
    name='Echo_of_War_End_of_the_Eternal_Freeze',
    cn='寒潮的落幕•历战余响',
    cht='寒潮的落幕•歷戰餘響',
    en='End of the Eternal Freeze',
    jp='歴戦余韻・寒波の幕切れ',
)
Echo_of_War_Divine_Seed = DungeonList(
    id=32,
    name='Echo_of_War_Divine_Seed',
    cn='不死的神实•历战余响',
    cht='不死的神實•歷戰餘響',
    en='Divine Seed',
    jp='歴戦余韻・不死の神実',
)
Simulated_Universe_World_1 = DungeonList(
    id=33,
    name='Simulated_Universe_World_1',
    cn='第一世界•模拟宇宙',
    cht='第一世界•模擬宇宙',
    en='Simulated Universe — World 1',
    jp='第一世界・模擬宇宙',
)
Simulated_Universe_World_3 = DungeonList(
    id=34,
    name='Simulated_Universe_World_3',
    cn='第三世界•模拟宇宙',
    cht='第三世界•模擬宇宙',
    en='Simulated Universe — World 3',
    jp='第三世界・模擬宇宙',
)
Simulated_Universe_World_4 = DungeonList(
    id=35,
    name='Simulated_Universe_World_4',
    cn='第四世界•模拟宇宙',
    cht='第四世界•模擬宇宙',
    en='Simulated Universe — World 4',
    jp='第四世界・模擬宇宙',
)
Simulated_Universe_World_5 = DungeonList(
    id=36,
    name='Simulated_Universe_World_5',
    cn='第五世界•模拟宇宙',
    cht='第五世界•模擬宇宙',
    en='Simulated Universe — World 5',
    jp='第五世界・模擬宇宙',
)
Simulated_Universe_World_6 = DungeonList(
    id=37,
    name='Simulated_Universe_World_6',
    cn='第六世界•模拟宇宙',
    cht='第六世界•模擬宇宙',
    en='Simulated Universe — World 6',
    jp='第六世界・模擬宇宙',
)
Simulated_Universe_World_7 = DungeonList(
    id=38,
    name='Simulated_Universe_World_7',
    cn='第七世界•模拟宇宙',
    cht='第七世界•模擬宇宙',
    en='Simulated Universe — World 7',
    jp='第七世界・模擬宇宙',
)
The_Voyage_of_Navis_Astriger = DungeonList(
    id=39,
    name='The_Voyage_of_Navis_Astriger',
    cn='天艟求仙迷航录',
    cht='天艟求仙迷航錄',
    en='The Voyage of Navis Astriger',
    jp='天艟求仙放浪記',
)
Favor_of_Amber = DungeonList(
    id=40,
    name='Favor_of_Amber',
    cn='琥珀恩赐•忘却之庭',
    cht='琥珀恩賜•忘卻之庭',
    en='Favor of Amber',
    jp='琥珀の賜物・忘却の庭',
)
Frostscar_Reverie = DungeonList(
    id=41,
    name='Frostscar_Reverie',
    cn='霜痕旧梦•忘却之庭',
    cht='霜痕舊夢•忘卻之庭',
    en='Frostscar Reverie',
    jp='霜跡に旧夢・忘却の庭',
)
Everwinter_Trials = DungeonList(
    id=42,
    name='Everwinter_Trials',
    cn='永冬试炼•忘却之庭',
    cht='永冬試煉•忘卻之庭',
    en='Everwinter Trials',
    jp='常冬の試練・忘却の庭',
)
Coldiron_Tribulation = DungeonList(
    id=43,
    name='Coldiron_Tribulation',
    cn='寒铁砥砺•忘却之庭',
    cht='寒鐵砥礪•忘卻之庭',
    en='Coldiron Tribulation',
    jp='寒鉄練磨・忘却の庭',
)
Hyperborean_Search_for_Warmth = DungeonList(
    id=44,
    name='Hyperborean_Search_for_Warmth',
    cn='蹈冰寻火•忘却之庭',
    cht='蹈冰尋火•忘卻之庭',
    en='Hyperborean Search for Warmth',
    jp='氷踏みて炎求む・忘却の庭',
)
Stormquell = DungeonList(
    id=45,
    name='Stormquell',
    cn='风暴止息•忘却之庭',
    cht='風暴止息•忘卻之庭',
    en='Stormquell',
    jp='止息せし嵐・忘却の庭',
)
Adrift_in_Astral_Seas = DungeonList(
    id=46,
    name='Adrift_in_Astral_Seas',
    cn='孤航天海•忘却之庭',
    cht='孤航太海•忘卻之庭',
    en='Adrift in Astral Seas',
    jp='天海の孤航・忘却の庭',
)
Raintear_Strife = DungeonList(
    id=47,
    name='Raintear_Strife',
    cn='泪雨长战•忘却之庭',
    cht='淚雨長戰•忘卻之庭',
    en='Raintear Strife',
    jp='涙雨戦争・忘却の庭',
)
Traces_of_Sanctus_Medicus = DungeonList(
    id=48,
    name='Traces_of_Sanctus_Medicus',
    cn='药王垂迹•忘却之庭',
    cht='藥王垂跡•忘卻之庭',
    en='Traces of Sanctus Medicus',
    jp='薬王の垂迹・忘却の庭',
)
Ethereal_Shipcraft_Forgotten_Hall = DungeonList(
    id=49,
    name='Ethereal_Shipcraft_Forgotten_Hall',
    cn='迷梦造舸•忘却之庭',
    cht='迷夢造舸•忘卻之庭',
    en='Ethereal Shipcraft — Forgotten Hall',
    jp='迷夢造舟・忘却の庭',
)
A_Shot_From_the_Sky_Forgotten_Hall = DungeonList(
    id=50,
    name='A_Shot_From_the_Sky_Forgotten_Hall',
    cn='天裂一射•忘却之庭',
    cht='天裂一射•忘卻之庭',
    en='A Shot From the Sky — Forgotten Hall',
    jp='天裂の一射・忘却の庭',
)
Mara_and_Null_Forgotten_Hall = DungeonList(
    id=51,
    name='Mara_and_Null_Forgotten_Hall',
    cn='魔阴空劫•忘却之庭',
    cht='魔陰空劫•忘卻之庭',
    en='Mara and Null — Forgotten Hall',
    jp='魔陰空劫・忘却の庭',
)
The_Last_Vestiges_of_Towering_Citadel = DungeonList(
    id=52,
    name='The_Last_Vestiges_of_Towering_Citadel',
    cn='永屹之城遗秘',
    cht='永屹之城遺秘',
    en='The Last Vestiges of Towering Citadel',
    jp='永屹の城の秘密',
)

```

`tasks/dungeon/keywords/dungeon_entrance.py`:

```py
from .classes import DungeonEntrance

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Teleport = DungeonEntrance(
    id=1,
    name='Teleport',
    cn='传送',
    cht='傳送',
    en='Teleport',
    jp='テレポート',
)
Navigate = DungeonEntrance(
    id=2,
    name='Navigate',
    cn='追踪',
    cht='追蹤',
    en='Navigate',
    jp='追跡',
)

```

`tasks/dungeon/keywords/nav.py`:

```py
from .classes import DungeonNav

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Simulated_Universe = DungeonNav(
    id=1,
    name='Simulated_Universe',
    cn='模拟宇宙',
    cht='模擬宇宙',
    en='Simulated Universe',
    jp='模擬宇宙',
)
Calyx_Golden = DungeonNav(
    id=2,
    name='Calyx_Golden',
    cn='拟造花萼（金）',
    cht='擬造花萼（金）',
    en='Calyx (Golden)',
    jp='疑似花萼（金）',
)
Calyx_Crimson = DungeonNav(
    id=3,
    name='Calyx_Crimson',
    cn='拟造花萼（赤）',
    cht='擬造花萼（赤）',
    en='Calyx (Crimson)',
    jp='疑似花萼（赤）',
)
Stagnant_Shadow = DungeonNav(
    id=4,
    name='Stagnant_Shadow',
    cn='凝滞虚影',
    cht='凝滯虛影',
    en='Stagnant Shadow',
    jp='凝結虚影',
)
Cavern_of_Corrosion = DungeonNav(
    id=5,
    name='Cavern_of_Corrosion',
    cn='侵蚀隧洞',
    cht='侵蝕隧洞',
    en='Cavern of Corrosion',
    jp='侵蝕トンネル',
)
Echo_of_War = DungeonNav(
    id=6,
    name='Echo_of_War',
    cn='历战余响',
    cht='歷戰餘響',
    en='Echo of War',
    jp='歴戦余韻',
)
Forgotten_Hall = DungeonNav(
    id=7,
    name='Forgotten_Hall',
    cn='忘却之庭',
    cht='忘卻之庭',
    en='Forgotten Hall',
    jp='忘却の庭',
)

```

`tasks/dungeon/keywords/tab.py`:

```py
from .classes import DungeonTab

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Operation_Briefing = DungeonTab(
    id=1,
    name='Operation_Briefing',
    cn='行动摘要',
    cht='行動摘要',
    en='Operation Briefing',
    jp='行動要旨',
)
Survival_Index = DungeonTab(
    id=2,
    name='Survival_Index',
    cn='生存索引',
    cht='生存索引',
    en='Survival Index',
    jp='生存手引書',
)
Daily_Training = DungeonTab(
    id=3,
    name='Daily_Training',
    cn='每日实训',
    cht='每日實訓',
    en='Daily Training',
    jp='デイリー訓練',
)

```

`tasks/dungeon/ui.py`:

```py
import numpy as np

from module.base.base import ModuleBase
from module.base.button import ClickButton
from module.base.timer import Timer
from module.base.utils import get_color
from module.logger import logger
from module.ocr.ocr import DigitCounter, Ocr, OcrResultButton
from module.ocr.utils import split_and_pair_button_attr
from module.ui.draggable_list import DraggableList
from module.ui.switch import Switch
from tasks.base.assets.assets_base_page import FORGOTTEN_HALL_CHECK
from tasks.base.page import page_guide
from tasks.base.ui import UI
from tasks.combat.assets.assets_combat_prepare import COMBAT_PREPARE
from tasks.dungeon.assets.assets_dungeon_ui import *
from tasks.dungeon.keywords import (
    DungeonList,
    DungeonNav,
    DungeonTab,
    KEYWORDS_DUNGEON_ENTRANCE,
    KEYWORDS_DUNGEON_NAV,
    KEYWORDS_DUNGEON_TAB
)
from tasks.dungeon.keywords.classes import DungeonEntrance


class DungeonTabSwitch(Switch):
    def click(self, state, main):
        """
        Args:
            state (str):
            main (ModuleBase):
        """
        button = self.get_data(state)['click_button']
        _ = main.appear(button)  # Search button to load offset
        main.device.click(button)


SWITCH_DUNGEON_TAB = DungeonTabSwitch('DungeonTab', is_selector=True)
SWITCH_DUNGEON_TAB.add_state(
    KEYWORDS_DUNGEON_TAB.Operation_Briefing,
    check_button=OPERATION_BRIEFING_CHECK,
    click_button=OPERATION_BRIEFING_CLICK
)
SWITCH_DUNGEON_TAB.add_state(
    KEYWORDS_DUNGEON_TAB.Daily_Training,
    check_button=DAILY_TRAINING_CHECK,
    click_button=DAILY_TRAINING_CLICK
)
SWITCH_DUNGEON_TAB.add_state(
    KEYWORDS_DUNGEON_TAB.Survival_Index,
    check_button=SURVIVAL_INDEX_CHECK,
    click_button=SURVIVAL_INDEX_CLICK
)


class OcrDungeonNav(Ocr):
    def after_process(self, result):
        result = super().after_process(result)
        result = result.replace('#', '')
        if self.lang == 'cn':
            result = result.replace('萼喜', '萼')
            result = result.replace('带', '滞')  # 凝带虚影
        return result


class OcrDungeonList(Ocr):
    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'cn':
            result = result.replace('翼', '巽')  # 巽风之形
            result = result.replace('皖A0', '50').replace('皖', '')
        return result


class OcrSimUniPoint(DigitCounter):
    merge_thres_x = 50


class OcrDungeonListLimitEntrance(OcrDungeonList):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.button = ClickButton((*self.button.area[:3], self.button.area[3] - 70))


class DraggableDungeonNav(DraggableList):
    # 0.5 is the magic number to reach bottom in 1 swipe
    # but relax we still have retires when magic doesn't work
    drag_vector = (0.50, 0.52)


class DraggableDungeonList(DraggableList):
    teleports: list[OcrResultButton] = []
    navigates: list[OcrResultButton] = []

    def load_rows(self, main: ModuleBase):
        super().load_rows(main=main)
        # Replace dungeon.button with teleport
        self.teleports = list(split_and_pair_button_attr(
            DUNGEON_LIST.cur_buttons,
            split_func=lambda x: x != KEYWORDS_DUNGEON_ENTRANCE.Teleport,
            relative_area=(0, 0, 1280, 120)
        ))
        self.navigates = list(split_and_pair_button_attr(
            DUNGEON_LIST.cur_buttons,
            split_func=lambda x: x != KEYWORDS_DUNGEON_ENTRANCE.Navigate,
            relative_area=(0, 0, 1280, 120)
        ))


DUNGEON_NAV_LIST = DraggableDungeonNav(
    'DungeonNavList', keyword_class=DungeonNav, ocr_class=OcrDungeonNav, search_button=OCR_DUNGEON_NAV)
DUNGEON_LIST = DraggableDungeonList(
    'DungeonList', keyword_class=[DungeonList, DungeonEntrance],
    ocr_class=OcrDungeonList, search_button=OCR_DUNGEON_LIST)


class DungeonUI(UI):
    def dungeon_tab_goto(self, state: DungeonTab):
        """
        Args:
            state:

        Returns:
            bool: If UI switched

        Examples:
            self = DungeonUI('alas')
            self.device.screenshot()
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Operation_Briefing)
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Daily_Training)
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
        """
        logger.hr('Dungeon tab goto', level=2)
        ui_switched = self.ui_ensure(page_guide)
        tab_switched = SWITCH_DUNGEON_TAB.set(state, main=self)

        if ui_switched or tab_switched:
            if state == KEYWORDS_DUNGEON_TAB.Daily_Training:
                logger.info(f'Tab goto {state}, wait until loaded')
                self._dungeon_wait_daily_training_loaded()
            elif state == KEYWORDS_DUNGEON_TAB.Survival_Index:
                logger.info(f'Tab goto {state}, wait until loaded')
                self._dungeon_wait_survival_loaded()
            return True
        else:
            return False

    def _dungeon_wait_daily_training_loaded(self, skip_first_screenshot=True):
        """
        Returns:
            bool: True if wait success, False if wait timeout.

        Pages:
            in: page_guide, Daily_Training
        """
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning('Wait daily training loaded timeout')
                return False
            color = get_color(self.device.image, DAILY_TRAINING_LOADED.area)
            if np.mean(color) < 128:
                logger.info('Daily training loaded')
                return True

    def _dungeon_wait_survival_loaded(self, skip_first_screenshot=True):
        """
        Returns:
            bool: True if wait success, False if wait timeout.

        Pages:
            in: page_guide, Survival_Index
        """
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if timeout.reached():
                logger.warning('Wait survival index loaded timeout')
                return False
            if self.appear(SURVIVAL_INDEX_LOADED):
                logger.info('Survival index loaded')
                return True

    def _dungeon_wait_until_forgotten_hall_stabled(self, skip_first_screenshot=True):
        """
        Returns:
            bool: True if wait success, False if wait timeout.

        Pages:
            in: page_guide, Survival_Index
        """
        # Wait until Forgotten_Hall stabled
        timeout = Timer(2, count=4).start()
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if timeout.reached():
                logger.warning('Wait until Forgotten_Hall stabled timeout')
                return False

            DUNGEON_NAV_LIST.load_rows(main=self)

            # End
            button = DUNGEON_NAV_LIST.keyword2button(KEYWORDS_DUNGEON_NAV.Forgotten_Hall)
            if button:
                # 513 is the top of the last row of DungeonNav
                if button.area[1] > 513:
                    logger.info('DungeonNav row Forgotten_Hall stabled')
                    return True

    def dungeon_get_simuni_point(self) -> int:
        """
        Page:
            in: page_guide, Survival_Index, Simulated_Universe
        """
        ocr = OcrSimUniPoint(OCR_SIMUNI_POINT)
        value, _, total = ocr.ocr_single_line(self.device.image)
        if total and value <= total:
            logger.attr('SimulatedUniverse', f'{value}/{total}')
            self.config.stored.SimulatedUniverse.set(value, total)
            return value
        else:
            logger.warning(f'Invalid SimulatedUniverse points: {value}/{total}')
            self.config.stored.SimulatedUniverse.set(0, 0)
            return 0

    def _dungeon_nav_goto(self, dungeon: DungeonList, skip_first_screenshot=True):
        """
        Equivalent to `DUNGEON_NAV_LIST.select_row(dungeon.dungeon_nav, main=self)`
        but with tricks to be faster

        Args:
            dungeon:
            skip_first_screenshot:
        """
        logger.hr('Dungeon nav goto', level=2)
        logger.info(f'Dungeon nav goto {dungeon.dungeon_nav}')

        # Wait rows
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
            DUNGEON_NAV_LIST.load_rows(main=self)
            if DUNGEON_NAV_LIST.cur_buttons:
                break

        # Check if it's at the first page.
        if DUNGEON_NAV_LIST.keyword2button(KEYWORDS_DUNGEON_NAV.Simulated_Universe, show_warning=False):
            # Going to use a faster method to navigate but can only start from list top
            logger.info('DUNGEON_NAV_LIST at top')
        else:
            # To start from any list states.
            logger.info('DUNGEON_NAV_LIST not at top')
            DUNGEON_NAV_LIST.select_row(dungeon.dungeon_nav, main=self)
            return True

        # Check the first page
        if dungeon.dungeon_nav in [
            KEYWORDS_DUNGEON_NAV.Simulated_Universe,
            KEYWORDS_DUNGEON_NAV.Calyx_Golden,
            KEYWORDS_DUNGEON_NAV.Calyx_Crimson,
            KEYWORDS_DUNGEON_NAV.Stagnant_Shadow,
            KEYWORDS_DUNGEON_NAV.Cavern_of_Corrosion,
        ]:
            button = DUNGEON_NAV_LIST.keyword2button(dungeon.dungeon_nav)
            if button:
                DUNGEON_NAV_LIST.select_row(dungeon.dungeon_nav, main=self, insight=False)
                return True

        # Check the second page
        while 1:
            DUNGEON_NAV_LIST.drag_page('down', main=self)
            # No skip_first_screenshot since drag_page is just called
            if self._dungeon_wait_until_forgotten_hall_stabled(skip_first_screenshot=False):
                DUNGEON_NAV_LIST.select_row(dungeon.dungeon_nav, main=self, insight=False)
                return True

    def _dungeon_insight(self, dungeon: DungeonList):
        """
        Pages:
            in: page_guide, Survival_Index, nav including dungeon
            out: page_guide, Survival_Index, nav including dungeon, dungeon insight
        """
        logger.hr('Dungeon insight', level=2)
        # Insight dungeon
        DUNGEON_LIST.insight_row(dungeon, main=self)
        # Check if dungeon unlocked
        for entrance in DUNGEON_LIST.navigates:
            entrance: OcrResultButton = entrance
            logger.warning(f'Teleport {entrance.matched_keyword} is not unlocked')
            if entrance == dungeon:
                logger.error(f'Trying to enter dungeon {dungeon}, but teleport is not unlocked')
                return False

        # Find teleport button
        if dungeon not in [tp.matched_keyword for tp in DUNGEON_LIST.teleports]:
            # Dungeon name is insight but teleport button is not
            logger.info('Dungeon name is insight, swipe down a little bit to find the teleport button')
            if dungeon.is_Forgotten_Hall:
                DUNGEON_LIST.drag_vector = (-0.4, -0.2)  # Keyword loaded is reversed
            else:
                DUNGEON_LIST.drag_vector = (0.2, 0.4)
            DUNGEON_LIST.ocr_class = OcrDungeonListLimitEntrance
            DUNGEON_LIST.insight_row(dungeon, main=self)
            DUNGEON_LIST.drag_vector = DraggableList.drag_vector
            DUNGEON_LIST.ocr_class = OcrDungeonList
            DUNGEON_LIST.load_rows(main=self)
            # Check if dungeon unlocked
            for entrance in DUNGEON_LIST.navigates:
                if entrance == dungeon:
                    logger.error(f'Trying to enter dungeon {dungeon}, but teleport is not unlocked')
                    return False

        return True

    def _dungeon_enter(self, dungeon, enter_check_button=COMBAT_PREPARE, skip_first_screenshot=True):
        """
        Pages:
            in: page_guide, Survival_Index, nav including dungeon
            out: COMBAT_PREPARE, FORGOTTEN_HALL_CHECK
        """
        logger.hr('Dungeon enter', level=2)
        skip_first_load = True
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # End
            if self.appear(enter_check_button):
                logger.info(f'Arrive {enter_check_button.name}')
                break

            # Additional
            pass

            # Click teleport
            if self.appear(page_guide.check_button, interval=1):
                if skip_first_load:
                    skip_first_load = False
                else:
                    DUNGEON_LIST.load_rows(main=self)
                entrance = DUNGEON_LIST.keyword2button(dungeon)
                if entrance is not None:
                    self.device.click(entrance)
                    self.interval_reset(page_guide.check_button)
                    continue
                else:
                    logger.warning(f'Cannot find dungeon entrance of {dungeon}')
                    continue

    def dungeon_goto(self, dungeon: DungeonList):
        """
        Returns:
            bool: If success

        Pages:
            in: page_guide, Survival_Index
            out: COMBAT_PREPARE if success
                page_guide if failed

        Examples:
            from tasks.dungeon.keywords import KEYWORDS_DUNGEON_LIST
            self = DungeonUI('alas')
            self.device.screenshot()
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
            self.dungeon_goto(KEYWORDS_DUNGEON_LIST.Calyx_Crimson_Harmony)
        """
        if dungeon.is_Simulated_Universe:
            self._dungeon_nav_goto(dungeon)
            pass
            self._dungeon_insight(dungeon)
            return True

        # Reset search button
        DUNGEON_LIST.search_button = OCR_DUNGEON_LIST

        if dungeon.is_Calyx_Golden \
                or dungeon.is_Calyx_Crimson \
                or dungeon.is_Stagnant_Shadow \
                or dungeon.is_Cavern_of_Corrosion:
            self._dungeon_nav_goto(dungeon)
            self._dungeon_insight(dungeon)
            self._dungeon_enter(dungeon)
            return True
        if dungeon.is_Forgotten_Hall:
            self._dungeon_nav_goto(dungeon)
            self._dungeon_insight(dungeon)
            self._dungeon_enter(dungeon, enter_check_button=FORGOTTEN_HALL_CHECK)
            return True

        logger.error(f'Goto dungeon {dungeon} is not supported')
        return False

```

`tasks/forgotten_hall/assets/assets_forgotten_hall.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

DUNGEON_ENTER_CHECKED = ButtonWrapper(
    name='DUNGEON_ENTER_CHECKED',
    share=Button(
        file='./assets/share/forgotten_hall/DUNGEON_ENTER_CHECKED.png',
        area=(29, 242, 43, 251),
        search=(9, 222, 63, 271),
        color=(173, 173, 173),
        button=(29, 242, 43, 251),
    ),
)
EFFECT_NOTIFICATION = ButtonWrapper(
    name='EFFECT_NOTIFICATION',
    share=Button(
        file='./assets/share/forgotten_hall/EFFECT_NOTIFICATION.png',
        area=(237, 302, 315, 380),
        search=(217, 282, 335, 400),
        color=(128, 114, 85),
        button=(237, 302, 315, 380),
    ),
)
ENTER_FORGOTTEN_HALL_DUNGEON = ButtonWrapper(
    name='ENTER_FORGOTTEN_HALL_DUNGEON',
    share=Button(
        file='./assets/share/forgotten_hall/ENTER_FORGOTTEN_HALL_DUNGEON.png',
        area=(989, 649, 1231, 684),
        search=(969, 629, 1251, 704),
        color=(214, 214, 217),
        button=(989, 649, 1231, 684),
    ),
)
ENTRANCE_CHECKED = ButtonWrapper(
    name='ENTRANCE_CHECKED',
    share=Button(
        file='./assets/share/forgotten_hall/ENTRANCE_CHECKED.png',
        area=(55, 632, 71, 650),
        search=(35, 612, 91, 670),
        color=(156, 156, 157),
        button=(55, 632, 71, 650),
    ),
)
EXIT_CONFIRM = ButtonWrapper(
    name='EXIT_CONFIRM',
    share=Button(
        file='./assets/share/forgotten_hall/EXIT_CONFIRM.png',
        area=(776, 458, 800, 482),
        search=(756, 438, 820, 502),
        color=(94, 88, 76),
        button=(776, 458, 800, 482),
    ),
)
EXIT_DUNGEON = ButtonWrapper(
    name='EXIT_DUNGEON',
    share=Button(
        file='./assets/share/forgotten_hall/EXIT_DUNGEON.png',
        area=(15, 45, 45, 75),
        search=(0, 25, 65, 95),
        color=(113, 117, 124),
        button=(15, 45, 45, 75),
    ),
)
FIRST_CHARACTER = ButtonWrapper(
    name='FIRST_CHARACTER',
    share=Button(
        file='./assets/share/forgotten_hall/FIRST_CHARACTER.png',
        area=(54, 100, 150, 212),
        search=(34, 80, 170, 232),
        color=(145, 125, 103),
        button=(54, 100, 150, 212),
    ),
)
LAST_VERTIGES = ButtonWrapper(
    name='LAST_VERTIGES',
    share=Button(
        file='./assets/share/forgotten_hall/LAST_VERTIGES.png',
        area=(1163, 105, 1203, 125),
        search=(1143, 85, 1223, 145),
        color=(221, 185, 225),
        button=(1163, 105, 1203, 125),
    ),
)
OCR_STAGE = ButtonWrapper(
    name='OCR_STAGE',
    share=Button(
        file='./assets/share/forgotten_hall/OCR_STAGE.png',
        area=(0, 281, 1280, 581),
        search=(0, 261, 1280, 601),
        color=(29, 48, 92),
        button=(0, 0, 1000, 100),
    ),
)

```

`tasks/forgotten_hall/keywords/__init__.py`:

```py
import tasks.forgotten_hall.keywords.stage as KEYWORDS_FORGOTTEN_HALL_STAGE
from tasks.forgotten_hall.keywords.classes import ForgottenHallStage

```

`tasks/forgotten_hall/keywords/classes.py`:

```py
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword


@dataclass(repr=False)
class ForgottenHallStage(Keyword):
    instances: ClassVar = {}

```

`tasks/forgotten_hall/keywords/stage.py`:

```py
from .classes import ForgottenHallStage

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Stage_1 = ForgottenHallStage(
    id=1,
    name='01',
    cn='01',
    cht='01',
    en='01',
    jp='01',
)
Stage_2 = ForgottenHallStage(
    id=2,
    name='02',
    cn='02',
    cht='02',
    en='02',
    jp='02',
)
Stage_3 = ForgottenHallStage(
    id=3,
    name='03',
    cn='03',
    cht='03',
    en='03',
    jp='03',
)
Stage_4 = ForgottenHallStage(
    id=4,
    name='04',
    cn='04',
    cht='04',
    en='04',
    jp='04',
)
Stage_5 = ForgottenHallStage(
    id=5,
    name='05',
    cn='05',
    cht='05',
    en='05',
    jp='05',
)
Stage_6 = ForgottenHallStage(
    id=6,
    name='06',
    cn='06',
    cht='06',
    en='06',
    jp='06',
)
Stage_7 = ForgottenHallStage(
    id=7,
    name='07',
    cn='07',
    cht='07',
    en='07',
    jp='07',
)
Stage_8 = ForgottenHallStage(
    id=8,
    name='08',
    cn='08',
    cht='08',
    en='08',
    jp='08',
)
Stage_9 = ForgottenHallStage(
    id=9,
    name='09',
    cn='09',
    cht='09',
    en='09',
    jp='09',
)
Stage_10 = ForgottenHallStage(
    id=10,
    name='10',
    cn='10',
    cht='10',
    en='10',
    jp='10',
)
Stage_11 = ForgottenHallStage(
    id=11,
    name='11',
    cn='11',
    cht='11',
    en='11',
    jp='11',
)
Stage_12 = ForgottenHallStage(
    id=12,
    name='12',
    cn='12',
    cht='12',
    en='12',
    jp='12',
)
Stage_13 = ForgottenHallStage(
    id=13,
    name='13',
    cn='13',
    cht='13',
    en='13',
    jp='13',
)
Stage_14 = ForgottenHallStage(
    id=14,
    name='14',
    cn='14',
    cht='14',
    en='14',
    jp='14',
)
Stage_15 = ForgottenHallStage(
    id=15,
    name='15',
    cn='15',
    cht='15',
    en='15',
    jp='15',
)

```

`tasks/forgotten_hall/ui.py`:

```py
import cv2
import numpy as np
from pponnxcr.predict_system import BoxedResult

from module.base.base import ModuleBase
from module.base.timer import Timer
from module.base.utils import area_offset, color_similarity_2d, crop, get_color
from module.logger.logger import logger
from module.ocr.keyword import Keyword
from module.ocr.ocr import Ocr, OcrResultButton
from module.ui.draggable_list import DraggableList
from tasks.base.assets.assets_base_page import FORGOTTEN_HALL_CHECK
from tasks.dungeon.keywords import DungeonList, KEYWORDS_DUNGEON_TAB
from tasks.dungeon.ui import DungeonUI
from tasks.forgotten_hall.assets.assets_forgotten_hall import *
from tasks.forgotten_hall.keywords import *
from tasks.map.control.joystick import MapControlJoystick


class ForgottenHallStageOcr(Ocr):
    def _find_number(self, image):
        raw = image.copy()
        area = OCR_STAGE.area
        image = crop(raw, area)
        yellow = color_similarity_2d(image, color=(250, 201, 111))
        gray = color_similarity_2d(image, color=(100, 109, 134))
        image = np.maximum(yellow, gray)
        kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (3, 3))
        image = cv2.morphologyEx(image, cv2.MORPH_OPEN, kernel)
        kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (25, 3))
        image = cv2.morphologyEx(image, cv2.MORPH_CLOSE, kernel)

        _, image = cv2.threshold(image, 220, 255, cv2.THRESH_BINARY)
        contours, _ = cv2.findContours(image, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)
        rectangle = []
        for cont in contours:
            rect = cv2.boundingRect(cv2.convexHull(cont).astype(np.float32))
            # Filter with rectangle width, usually to be 62~64
            if not 62 - 10 < rect[2] < 62 + 10:
                continue
            rect = (rect[0], rect[1], rect[0] + rect[2], rect[1] + rect[3])
            rect = area_offset(rect, offset=area[:2])
            # Move from stars to letters
            rect = area_offset((-10, -55, 50, -15), offset=rect[:2])
            rectangle.append(rect)
        return rectangle

    def matched_ocr(self, image, keyword_classes, direct_ocr=False) -> list[OcrResultButton]:
        if not isinstance(keyword_classes, list):
            keyword_classes = [keyword_classes]

        boxes = self._find_number(image)
        image_list = [crop(image, area) for area in boxes]
        results = self.ocr_multi_lines(image_list)
        boxed_results = [
            BoxedResult(area_offset(boxes[index], (-50, 0)), image_list[index], text, score)
            for index, (text, score) in enumerate(results)
        ]
        results_buttons = [
            OcrResultButton(result, keyword_classes)
            for result in boxed_results
        ]
        logger.attr(name=f'{self.name} matched', text=results_buttons)
        return results_buttons


class DraggableStageList(DraggableList):
    def insight_row(self, row: Keyword, main: ModuleBase, skip_first_screenshot=True) -> bool:
        while 1:
            result = super().insight_row(row, main=main, skip_first_screenshot=skip_first_screenshot)
            if not result:
                return False

            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                main.device.screenshot()
            button = self.keyword2button(row)

            # end
            if button.button[0] > 0:
                break

            # Stage number is insight but button is not
            logger.info("Stage number is insight, swipe left a little bit to find the entrance")
            self.drag_vector = (0.2, 0.4)
            self.drag_page("left", main=main)
            self.drag_vector = DraggableList.drag_vector
        return True

    def is_row_selected(self, button: OcrResultButton, main: ModuleBase) -> bool:
        return main.appear(ENTRANCE_CHECKED)

    def load_rows(self, main: ModuleBase):
        if not main.appear(FORGOTTEN_HALL_CHECK):
            logger.info('Not in forgotten hall, skip load_rows()')
            return
        return super().load_rows(main=main)


STAGE_LIST = DraggableStageList("ForgottenHallStageList", keyword_class=ForgottenHallStage,
                                ocr_class=ForgottenHallStageOcr, search_button=OCR_STAGE,
                                check_row_order=False, drag_direction="right")


class ForgottenHallUI(DungeonUI):
    def stage_goto(self, forgotten_hall: DungeonList, stage_keyword: ForgottenHallStage):
        """
        Examples:
            self = ForgottenHallUI('alas')
            self.device.screenshot()
            self.stage_goto(KEYWORDS_DUNGEON_LIST.The_Last_Vestiges_of_Towering_Citadel,
                            KEYWORDS_FORGOTTEN_HALL_STAGE.Stage_8)
        """
        if not forgotten_hall.is_Forgotten_Hall:
            logger.warning("DungeonList Chosen is not a forgotten hall")
            return
        if not forgotten_hall.is_Last_Vestiges and stage_keyword.id > 10:
            logger.warning(f"This dungeon does not have stage that greater than 10. {stage_keyword.id} is chosen")
            return

        if not self.appear(FORGOTTEN_HALL_CHECK):
            self.dungeon_tab_goto(KEYWORDS_DUNGEON_TAB.Survival_Index)
            self.dungeon_goto(forgotten_hall)
        STAGE_LIST.select_row(stage_keyword, main=self)

    def exit_dungeon(self, skip_first_screenshot=True):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(FORGOTTEN_HALL_CHECK):
                logger.info("Forgotten hall dungeon exited")
                break

            if self.appear_then_click(EXIT_DUNGEON):
                continue
            if self.appear_then_click(EXIT_CONFIRM):
                continue

    def _choose_first_character(self, skip_first_screenshot=True):
        """
        A temporary method used to choose the first character only
        """
        interval = Timer(1)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self._forgotten_hall_enter_appear():
                logger.info("First character is chosen")
                break
            if interval.reached():
                self.device.click(FIRST_CHARACTER)
                interval.reset()

    def _forgotten_hall_enter_appear(self):
        # White button, with a color of (214, 214, 214)
        color = get_color(self.device.image, ENTER_FORGOTTEN_HALL_DUNGEON.area)
        return np.mean(color) > 180

    def _enter_forgotten_hall_dungeon(self, skip_first_screenshot=True):
        """
        called after team is set
        """
        interval = Timer(3)
        timeout = Timer(3)
        while 1:  # enter ui -> popup
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(EFFECT_NOTIFICATION):
                break
            if self.match_template_color(DUNGEON_ENTER_CHECKED):
                if timeout.reached():
                    logger.info('Wait dungeon EFFECT_NOTIFICATION timeout')
                    break
            else:
                timeout.reset()

            if interval.reached() and self._forgotten_hall_enter_appear():
                self.device.click(ENTER_FORGOTTEN_HALL_DUNGEON)
                interval.reset()

        joystick = MapControlJoystick(self.config, self.device)
        skip_first_screenshot = True
        while 1:  # pop up -> dungeon inside
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.match_template_color(DUNGEON_ENTER_CHECKED):
                logger.info("Forgotten hall dungeon entered")
                break
            joystick.handle_map_2x_run()

```

`tasks/item/assets/assets_item_consumable_usage.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

ITEM_CONSUMABLE_SCROLL = ButtonWrapper(
    name='ITEM_CONSUMABLE_SCROLL',
    share=Button(
        file='./assets/share/item/consumable_usage/ITEM_CONSUMABLE_SCROLL.png',
        area=(837, 89, 843, 615),
        search=(817, 69, 863, 635),
        color=(118, 117, 121),
        button=(837, 89, 843, 615),
    ),
)
SIMPLE_PROTECTIVE_GEAR = ButtonWrapper(
    name='SIMPLE_PROTECTIVE_GEAR',
    share=Button(
        file='./assets/share/item/consumable_usage/SIMPLE_PROTECTIVE_GEAR.png',
        area=(164, 496, 236, 552),
        search=(148, 87, 770, 579),
        color=(93, 110, 115),
        button=(164, 496, 236, 552),
    ),
)
SIMPLE_PROTECTIVE_GEAR_CHECK = ButtonWrapper(
    name='SIMPLE_PROTECTIVE_GEAR_CHECK',
    share=Button(
        file='./assets/share/item/consumable_usage/SIMPLE_PROTECTIVE_GEAR_CHECK.png',
        area=(1059, 190, 1177, 278),
        search=(1039, 170, 1197, 298),
        color=(94, 114, 121),
        button=(1059, 190, 1177, 278),
    ),
)
USE_CONSUMABLE = ButtonWrapper(
    name='USE_CONSUMABLE',
    cn=Button(
        file='./assets/cn/item/consumable_usage/USE_CONSUMABLE.png',
        area=(1042, 647, 1084, 669),
        search=(1022, 627, 1104, 689),
        color=(158, 158, 159),
        button=(1042, 647, 1084, 669),
    ),
)

```

`tasks/item/assets/assets_item_relics.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

FIRST_RELIC = ButtonWrapper(
    name='FIRST_RELIC',
    share=Button(
        file='./assets/share/item/relics/FIRST_RELIC.png',
        area=(434, 160, 530, 260),
        search=(414, 140, 550, 280),
        color=(72, 92, 124),
        button=(434, 160, 530, 260),
    ),
)
FIRST_RELIC_SELECTED = ButtonWrapper(
    name='FIRST_RELIC_SELECTED',
    share=Button(
        file='./assets/share/item/relics/FIRST_RELIC_SELECTED.png',
        area=(424, 136, 452, 164),
        search=(404, 116, 472, 184),
        color=(193, 194, 198),
        button=(424, 136, 452, 164),
    ),
)
GOTO_SALVAGE = ButtonWrapper(
    name='GOTO_SALVAGE',
    share=Button(
        file='./assets/share/item/relics/GOTO_SALVAGE.png',
        area=(668, 652, 690, 674),
        search=(648, 632, 710, 694),
        color=(155, 156, 156),
        button=(668, 652, 690, 674),
    ),
)
ORDER_ASCENDING = ButtonWrapper(
    name='ORDER_ASCENDING',
    share=Button(
        file='./assets/share/item/relics/ORDER_ASCENDING.png',
        area=(720, 649, 737, 667),
        search=(700, 629, 757, 687),
        color=(176, 176, 178),
        button=(720, 649, 737, 667),
    ),
)
ORDER_DESCENDING = ButtonWrapper(
    name='ORDER_DESCENDING',
    share=Button(
        file='./assets/share/item/relics/ORDER_DESCENDING.png',
        area=(720, 649, 738, 667),
        search=(700, 629, 758, 687),
        color=(179, 180, 180),
        button=(720, 649, 738, 667),
    ),
)
SALVAGE = ButtonWrapper(
    name='SALVAGE',
    share=Button(
        file='./assets/share/item/relics/SALVAGE.png',
        area=(1038, 646, 1062, 670),
        search=(936, 642, 1213, 675),
        color=(122, 115, 98),
        button=(1038, 646, 1062, 670),
    ),
)

```

`tasks/item/assets/assets_item_ui.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CONSUMABLE_CHECK = ButtonWrapper(
    name='CONSUMABLE_CHECK',
    share=Button(
        file='./assets/share/item/ui/CONSUMABLE_CHECK.png',
        area=(39, 476, 78, 499),
        search=(19, 456, 98, 519),
        color=(137, 138, 139),
        button=(39, 476, 78, 499),
    ),
)
CONSUMABLE_CLICK = ButtonWrapper(
    name='CONSUMABLE_CLICK',
    share=Button(
        file='./assets/share/item/ui/CONSUMABLE_CLICK.png',
        area=(38, 476, 80, 499),
        search=(18, 456, 100, 519),
        color=(104, 106, 117),
        button=(38, 476, 80, 499),
    ),
)
LIGHT_CONE_CHECK = ButtonWrapper(
    name='LIGHT_CONE_CHECK',
    share=Button(
        file='./assets/share/item/ui/LIGHT_CONE_CHECK.png',
        area=(43, 207, 73, 228),
        search=(23, 187, 93, 248),
        color=(191, 193, 193),
        button=(43, 207, 73, 228),
    ),
)
LIGHT_CONE_CLICK = ButtonWrapper(
    name='LIGHT_CONE_CLICK',
    share=Button(
        file='./assets/share/item/ui/LIGHT_CONE_CLICK.png',
        area=(42, 205, 72, 226),
        search=(22, 185, 92, 246),
        color=(48, 50, 50),
        button=(42, 205, 72, 226),
    ),
)
MISSIONS_CHECK = ButtonWrapper(
    name='MISSIONS_CHECK',
    share=Button(
        file='./assets/share/item/ui/MISSIONS_CHECK.png',
        area=(42, 570, 75, 588),
        search=(22, 550, 95, 608),
        color=(91, 92, 92),
        button=(42, 570, 75, 588),
    ),
)
MISSIONS_CLICK = ButtonWrapper(
    name='MISSIONS_CLICK',
    share=Button(
        file='./assets/share/item/ui/MISSIONS_CLICK.png',
        area=(43, 569, 74, 589),
        search=(23, 549, 94, 609),
        color=(115, 117, 117),
        button=(43, 569, 74, 589),
    ),
)
OTHER_MATERIALS_CHECK = ButtonWrapper(
    name='OTHER_MATERIALS_CHECK',
    share=Button(
        file='./assets/share/item/ui/OTHER_MATERIALS_CHECK.png',
        area=(41, 385, 77, 408),
        search=(21, 365, 97, 428),
        color=(122, 123, 123),
        button=(41, 385, 77, 408),
    ),
)
OTHER_MATERIALS_CLICK = ButtonWrapper(
    name='OTHER_MATERIALS_CLICK',
    share=Button(
        file='./assets/share/item/ui/OTHER_MATERIALS_CLICK.png',
        area=(40, 387, 78, 407),
        search=(20, 367, 98, 427),
        color=(92, 94, 94),
        button=(40, 387, 78, 407),
    ),
)
RELICS_CHECK = ButtonWrapper(
    name='RELICS_CHECK',
    share=Button(
        file='./assets/share/item/ui/RELICS_CHECK.png',
        area=(38, 297, 80, 317),
        search=(18, 277, 100, 337),
        color=(101, 103, 103),
        button=(38, 297, 80, 317),
    ),
)
RELICS_CLICK = ButtonWrapper(
    name='RELICS_CLICK',
    share=Button(
        file='./assets/share/item/ui/RELICS_CLICK.png',
        area=(36, 298, 78, 319),
        search=(16, 278, 98, 339),
        color=(121, 124, 129),
        button=(36, 298, 78, 319),
    ),
)
UPGRADE_MATERIAL_CHECK = ButtonWrapper(
    name='UPGRADE_MATERIAL_CHECK',
    share=Button(
        file='./assets/share/item/ui/UPGRADE_MATERIAL_CHECK.png',
        area=(39, 117, 78, 139),
        search=(19, 97, 98, 159),
        color=(195, 199, 198),
        button=(39, 117, 78, 139),
    ),
)
UPGRADE_MATERIAL_CLICK = ButtonWrapper(
    name='UPGRADE_MATERIAL_CLICK',
    share=Button(
        file='./assets/share/item/ui/UPGRADE_MATERIAL_CLICK.png',
        area=(40, 120, 78, 139),
        search=(20, 100, 98, 159),
        color=(114, 118, 125),
        button=(40, 120, 78, 139),
    ),
)
VALUABLES_CHECK = ButtonWrapper(
    name='VALUABLES_CHECK',
    share=Button(
        file='./assets/share/item/ui/VALUABLES_CHECK.png',
        area=(44, 641, 73, 653),
        search=(24, 621, 93, 673),
        color=(91, 86, 92),
        button=(44, 641, 73, 653),
    ),
)
VALUABLES_CLICK = ButtonWrapper(
    name='VALUABLES_CLICK',
    share=Button(
        file='./assets/share/item/ui/VALUABLES_CLICK.png',
        area=(45, 640, 72, 655),
        search=(25, 620, 92, 675),
        color=(123, 125, 125),
        button=(45, 640, 72, 655),
    ),
)

```

`tasks/item/consumable_usage.py`:

```py
from module.ocr.ocr import *
from module.ui.scroll import Scroll
from tasks.base.assets.assets_base_popup import CONFIRM_POPUP
from tasks.base.page import page_item
from tasks.daily.assets.assets_daily_synthesize_consumable import \
    SIMPLE_PROTECTIVE_GEAR as SYNTHESIZE_SIMPLE_PROTECTIVE_GEAR, \
    SIMPLE_PROTECTIVE_GEAR_CHECK as SYNTHESIZE_SIMPLE_PROTECTIVE_GEAR_CHECK
from tasks.daily.synthesize import SynthesizeConsumablesUI
from tasks.item.assets.assets_item_consumable_usage import *
from tasks.item.assets.assets_item_ui import CONSUMABLE_CHECK
from tasks.item.keywords import KEYWORD_ITEM_TAB
from tasks.item.ui import ItemUI


class ConsumableUsageUI(ItemUI):
    def use_consumable(self, synthesize_or_not: bool = True) -> bool:
        """
        Args:
            synthesize_or_not(bool):

        Returns:
            bool: If success

        Examples:
            self = ConsumableUsageUI('alas')
            self.device.screenshot()
            result = self.use_consumable()
        """
        logger.hr('Use consumable', level=2)
        self.ui_ensure(page_item)
        self.item_goto(KEYWORD_ITEM_TAB.Consumables)
        if self._search_and_select_consumable():
            self._click_use()
            self._confirm_use()
            return True
        else:
            # Prevent matching errors from causing continuous synthesis of consumables
            if not synthesize_or_not:
                return False
            if SynthesizeConsumablesUI(self.config, self.device).synthesize_consumables(
                    SYNTHESIZE_SIMPLE_PROTECTIVE_GEAR, SYNTHESIZE_SIMPLE_PROTECTIVE_GEAR_CHECK
            ):
                return self.use_consumable(synthesize_or_not=False)
            else:
                return False

    def _search_and_select_consumable(self, skip_first_screenshot=True) -> bool:
        logger.info('Search consumable')
        # If the default subpage is the consumables page, it is necessary to screenshot and check subpage again,
        # because in this scenario, scroll bar delay appears and the previous screenshot was
        # taken after clicking on the "item" to determine whether to enter the "item", which may be inaccurate
        # self._switch_tag_to_consumables(False)
        self.item_goto(KEYWORD_ITEM_TAB.Consumables)

        # Determine if there is a scroll bar. If there is a scroll bar,
        # pull it down and check if the consumable to be used can be found
        scroll = Scroll(area=ITEM_CONSUMABLE_SCROLL.button, color=(200, 200, 200), name=ITEM_CONSUMABLE_SCROLL.name)
        if scroll.appear(main=self):
            if not scroll.at_top(main=self):
                scroll.set_top(main=self)
            while 1:
                if skip_first_screenshot:
                    skip_first_screenshot = False
                else:
                    self.device.screenshot()

                # Determine if the specified consumable can be found
                if self.appear(SIMPLE_PROTECTIVE_GEAR_CHECK):
                    logger.info('The consumable to be used have been selected')
                    return True
                if scroll.at_bottom(main=self) and not self.appear(SIMPLE_PROTECTIVE_GEAR, similarity=0.7):
                    logger.info('Can not find the consumable which to be used, just skip')
                    return False
                if self.appear_then_click(SIMPLE_PROTECTIVE_GEAR, similarity=0.7, interval=2):
                    logger.info('Select the consumable which to be used')
                    continue
                # Scroll bar flipping
                if not scroll.at_bottom(main=self):
                    scroll.next_page(main=self)
                    continue
        else:
            # Determine if the specified consumable can be found
            if self.appear(SIMPLE_PROTECTIVE_GEAR, similarity=0.7):
                while 1:
                    if skip_first_screenshot:
                        skip_first_screenshot = False
                    else:
                        self.device.screenshot()

                    if self.appear(SIMPLE_PROTECTIVE_GEAR_CHECK):
                        logger.info('The consumable to be used have been selected')
                        return True
                    if self.appear_then_click(SIMPLE_PROTECTIVE_GEAR, similarity=0.7, interval=2):
                        logger.info('Select the consumable which to be used')
                        continue
            else:
                logger.info('Can not find the consumable which to be used, just skip')
                return False

    def _click_use(self, skip_first_screenshot=True):
        """
        Description:
            Because after executing "using consumable",
            there will be a brief animation that will directly return to the consumables page,
            so "click to use" and "confirm to use" have been split into two steps
        """
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(CONFIRM_POPUP):
                logger.info('Item consumable usage popup appear')
                break
            if self.appear_then_click(USE_CONSUMABLE, interval=2):
                logger.info('Click the "use" button')
                continue

    def _confirm_use(self, skip_first_screenshot=True):
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(CONSUMABLE_CHECK):
                logger.info('Complete using consumables')
                break
            # If there is already consumable effect, a confirmation box will pop up again,
            # so shorten the judgment interval of the confirmation box
            if self.appear_then_click(CONFIRM_POPUP, interval=1):
                logger.info('Confirm the use of consumable')
                continue

```

`tasks/item/keywords/__init__.py`:

```py
import tasks.item.keywords.tab as KEYWORD_ITEM_TAB
from tasks.item.keywords.classes import ItemTab

```

`tasks/item/keywords/classes.py`:

```py
from dataclasses import dataclass
from typing import ClassVar

from module.ocr.keyword import Keyword


@dataclass(repr=False)
class ItemTab(Keyword):
    instances: ClassVar = {}

```

`tasks/item/keywords/tab.py`:

```py
from .classes import ItemTab

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

UpgradeMaterials = ItemTab(
    id=1,
    name='UpgradeMaterials',
    cn='养成材料',
    cht='養成素材',
    en='Upgrade Materials',
    jp='育成素材',
)
LightCone = ItemTab(
    id=2,
    name='LightCone',
    cn='光锥',
    cht='光錐',
    en='Light Cone',
    jp='光円錐',
)
Relics = ItemTab(
    id=3,
    name='Relics',
    cn='遗器',
    cht='遺器',
    en='Relics',
    jp='遺物',
)
OtherMaterials = ItemTab(
    id=4,
    name='OtherMaterials',
    cn='其他材料',
    cht='其他素材',
    en='Other Materials',
    jp='その他',
)
Consumables = ItemTab(
    id=5,
    name='Consumables',
    cn='消耗品',
    cht='消耗品',
    en='Consumables',
    jp='消耗品',
)
Missions = ItemTab(
    id=6,
    name='Missions',
    cn='任务',
    cht='任務',
    en='Missions',
    jp='クエスト',
)
Valuables = ItemTab(
    id=7,
    name='Valuables',
    cn='贵重物',
    cht='貴重物',
    en='Valuables',
    jp='貴重品',
)

```

`tasks/item/relics.py`:

```py
from module.base.timer import Timer
from module.logger import logger
from tasks.base.assets.assets_base_page import CLOSE
from tasks.base.assets.assets_base_popup import CONFIRM_POPUP, GET_REWARD
from tasks.item.assets.assets_item_relics import *
from tasks.item.keywords import KEYWORD_ITEM_TAB
from tasks.item.ui import ItemUI


class RelicsUI(ItemUI):
    def _is_in_salvage(self) -> bool:
        return self.appear(ORDER_ASCENDING) or self.appear(ORDER_DESCENDING)

    def salvage_relic(self, skip_first_screenshot=True) -> bool:
        logger.hr('Salvage Relic', level=2)
        self.item_goto(KEYWORD_ITEM_TAB.Relics, wait_until_stable=False)
        while 1:  # relic tab -> salvage
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self._is_in_salvage():
                logger.info('_is_in_salvage')
                break
            if self.appear_then_click(GOTO_SALVAGE, interval=2):
                continue

        skip_first_screenshot = True
        interval = Timer(1)
        while 1:  # salvage -> first relic selected
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # The first frame entering relic page, SALVAGE is a white button as it's the default state.
            # At the second frame, SALVAGE is disabled since no items are selected.
            # So here uses the minus button on the first relic.
            if self.image_color_count(FIRST_RELIC_SELECTED, color=(245, 245, 245), threshold=221, count=50):
                logger.info('First relic selected')
                break
            if self.appear_then_click(ORDER_DESCENDING, interval=2):
                continue
            if interval.reached() and self.appear(ORDER_ASCENDING) \
                    and self.image_color_count(FIRST_RELIC, (233, 192, 108)):
                self.device.click(FIRST_RELIC)
                interval.reset()
                continue

        skip_first_screenshot = True
        while 1:  # selected -> rewards claimed
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(GET_REWARD):
                logger.info("Relic salvaged")
                break
            if self.appear_then_click(SALVAGE, interval=2):
                continue
            if self.appear_then_click(CONFIRM_POPUP, interval=2):
                continue

        skip_first_screenshot = True
        interval = Timer(1)
        while 1:  # rewards claimed -> relic tab page
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            if self.appear(GOTO_SALVAGE):
                logger.info("Salvage page exited")
                break
            if self.handle_reward(interval=2):
                continue
            if interval.reached() and self._is_in_salvage():
                logger.info(f'_is_in_salvage -> {CLOSE}')
                self.device.click(CLOSE)
                interval.reset()
                continue
        return True

```

`tasks/item/ui.py`:

```py
from module.logger import logger
from module.ui.switch import Switch
from tasks.base.page import page_item
from tasks.base.ui import UI
from tasks.item.assets.assets_item_consumable_usage import SIMPLE_PROTECTIVE_GEAR
from tasks.item.assets.assets_item_ui import *
from tasks.item.keywords import KEYWORD_ITEM_TAB

SWITCH_ITEM_TAB = Switch('ItemTab', is_selector=True)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.UpgradeMaterials,
    check_button=UPGRADE_MATERIAL_CHECK,
    click_button=UPGRADE_MATERIAL_CLICK
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.LightCone,
    check_button=LIGHT_CONE_CHECK,
    click_button=LIGHT_CONE_CLICK
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.Relics,
    check_button=RELICS_CHECK,
    click_button=RELICS_CLICK
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.OtherMaterials,
    check_button=OTHER_MATERIALS_CHECK,
    click_button=OTHER_MATERIALS_CLICK
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.Consumables,
    check_button=CONSUMABLE_CHECK,
    click_button=CONSUMABLE_CLICK,
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.Missions,
    check_button=MISSIONS_CHECK,
    click_button=MISSIONS_CLICK
)
SWITCH_ITEM_TAB.add_state(
    KEYWORD_ITEM_TAB.Valuables,
    check_button=VALUABLES_CHECK,
    click_button=VALUABLES_CLICK
)


class ItemUI(UI):
    def item_goto(self, state: KEYWORD_ITEM_TAB, wait_until_stable=True):
        """
        Args:
            state:
            wait_until_stable: if subsequent actions are manipulating items, or any other thing that needs to load
                inside the tab, wait_until_stable should set to True

        Returns:
            self = ItemUI('alas')
            self.device.screenshot()
            self.item_goto(KEYWORD_ITEM_TAB.Relics)
            self.item_goto(KEYWORD_ITEM_TAB.Consumables)
        """
        logger.hr('Item tab goto', level=2)
        self.ui_ensure(page_item)
        SWITCH_ITEM_TAB.set(state, main=self)
        if wait_until_stable:
            logger.info(f'Tab goto {state}, wait until loaded')
            self.wait_until_stable(SIMPLE_PROTECTIVE_GEAR)
        else:
            logger.info(f'Tab goto {state}')

```

`tasks/login/assets/assets_login.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

LOGIN_CONFIRM = ButtonWrapper(
    name='LOGIN_CONFIRM',
    share=Button(
        file='./assets/share/login/LOGIN_CONFIRM.png',
        area=(1188, 44, 1220, 74),
        search=(1168, 24, 1240, 94),
        color=(140, 124, 144),
        button=(683, 327, 1143, 620),
    ),
)
USER_AGREEMENT_ACCEPT = ButtonWrapper(
    name='USER_AGREEMENT_ACCEPT',
    cn=Button(
        file='./assets/cn/login/USER_AGREEMENT_ACCEPT.png',
        area=(751, 467, 791, 488),
        search=(731, 447, 811, 508),
        color=(196, 167, 111),
        button=(678, 459, 867, 496),
    ),
)

```

`tasks/login/login.py`:

```py
from module.base.timer import Timer
from module.logger import logger
from tasks.base.page import page_main
from tasks.base.ui import UI
from tasks.login.assets.assets_login import LOGIN_CONFIRM, USER_AGREEMENT_ACCEPT


class Login(UI):
    def _handle_app_login(self):
        """
        Pages:
            in: Any page
            out: page_main

        Raises:
            GameStuckError:
            GameTooManyClickError:
        """
        logger.hr('App login')

        orientation_timer = Timer(5)
        login_success = False

        while 1:
            # Watch device rotation
            if not login_success and orientation_timer.reached():
                # Screen may rotate after starting an app
                self.device.get_orientation()
                orientation_timer.reset()

            self.device.screenshot()

            # End
            if self.ui_page_appear(page_main):
                logger.info('Login to main confirm')
                break

            # Login
            if self.appear_then_click(LOGIN_CONFIRM):
                continue
            if self.appear_then_click(USER_AGREEMENT_ACCEPT):
                continue
            # Additional
            if self.ui_additional():
                continue

        return True

    def handle_app_login(self):
        self.device.screenshot_interval_set(1.0)
        try:
            self._handle_app_login()
        finally:
            self.device.screenshot_interval_set()

    def app_stop(self):
        logger.hr('App stop')
        self.device.app_stop()

    def app_start(self):
        logger.hr('App start')
        self.device.app_start()
        self.handle_app_login()

    def app_restart(self):
        logger.hr('App restart')
        self.device.app_stop()
        self.device.app_start()
        self.handle_app_login()
        self.config.task_delay(server_update=True)

```

`tasks/map/assets/assets_map_bigmap.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

FLOOR_1 = ButtonWrapper(
    name='FLOOR_1',
    share=Button(
        file='./assets/share/map/bigmap/FLOOR_1.png',
        area=(37, 623, 72, 660),
        search=(17, 603, 92, 680),
        color=(149, 149, 149),
        button=(37, 623, 72, 660),
    ),
)
FLOOR_2 = ButtonWrapper(
    name='FLOOR_2',
    share=Button(
        file='./assets/share/map/bigmap/FLOOR_2.png',
        area=(37, 552, 71, 589),
        search=(17, 532, 91, 609),
        color=(171, 171, 171),
        button=(37, 552, 71, 589),
    ),
)
FLOOR_3 = ButtonWrapper(
    name='FLOOR_3',
    share=Button(
        file='./assets/share/map/bigmap/FLOOR_3.png',
        area=(37, 480, 71, 518),
        search=(17, 460, 91, 538),
        color=(152, 152, 152),
        button=(37, 480, 71, 518),
    ),
)
OCR_PLANE = ButtonWrapper(
    name='OCR_PLANE',
    share=Button(
        file='./assets/share/map/bigmap/OCR_PLANE.png',
        area=(872, 138, 1252, 688),
        search=(852, 118, 1272, 708),
        color=(199, 199, 199),
        button=(872, 138, 1252, 688),
    ),
)
PLANE_SCROLL = ButtonWrapper(
    name='PLANE_SCROLL',
    share=Button(
        file='./assets/share/map/bigmap/PLANE_SCROLL.png',
        area=(1252, 138, 1256, 688),
        search=(1232, 118, 1276, 708),
        color=(103, 103, 103),
        button=(1252, 138, 1256, 688),
    ),
)
WORLD_HERTA = ButtonWrapper(
    name='WORLD_HERTA',
    share=Button(
        file='./assets/share/map/bigmap/WORLD_HERTA.png',
        area=(201, 332, 273, 394),
        search=(181, 312, 293, 414),
        color=(115, 122, 130),
        button=(201, 332, 273, 394),
    ),
)
WORLD_JARILO = ButtonWrapper(
    name='WORLD_JARILO',
    share=Button(
        file='./assets/share/map/bigmap/WORLD_JARILO.png',
        area=(638, 138, 706, 203),
        search=(618, 118, 726, 223),
        color=(104, 113, 121),
        button=(638, 138, 706, 203),
    ),
)
WORLD_LUOFU = ButtonWrapper(
    name='WORLD_LUOFU',
    share=Button(
        file='./assets/share/map/bigmap/WORLD_LUOFU.png',
        area=(983, 549, 1051, 612),
        search=(963, 529, 1071, 632),
        color=(103, 121, 105),
        button=(983, 549, 1051, 612),
    ),
)

```

`tasks/map/assets/assets_map_control.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

A_BUTTON = ButtonWrapper(
    name='A_BUTTON',
    share=Button(
        file='./assets/share/map/control/A_BUTTON.png',
        area=(998, 508, 1078, 588),
        search=(978, 488, 1098, 608),
        color=(85, 86, 89),
        button=(998, 508, 1078, 588),
    ),
)
E_BUTTON = ButtonWrapper(
    name='E_BUTTON',
    share=Button(
        file='./assets/share/map/control/E_BUTTON.png',
        area=(875, 583, 944, 650),
        search=(855, 563, 964, 670),
        color=(67, 68, 71),
        button=(875, 583, 944, 650),
    ),
)
JOYSTICK = ButtonWrapper(
    name='JOYSTICK',
    share=Button(
        file='./assets/share/map/control/JOYSTICK.png',
        area=(234, 546, 262, 574),
        search=(214, 526, 282, 594),
        color=(43, 48, 62),
        button=(234, 546, 262, 574),
    ),
)
ROTATION_SWIPE_AREA = ButtonWrapper(
    name='ROTATION_SWIPE_AREA',
    share=Button(
        file='./assets/share/map/control/ROTATION_SWIPE_AREA.png',
        area=(264, 87, 990, 219),
        search=(244, 67, 1010, 239),
        color=(255, 255, 255),
        button=(264, 87, 990, 219),
    ),
)
RUN_BUTTON = ButtonWrapper(
    name='RUN_BUTTON',
    share=Button(
        file='./assets/share/map/control/RUN_BUTTON.png',
        area=(1125, 582, 1191, 651),
        search=(1105, 562, 1211, 671),
        color=(73, 76, 83),
        button=(1125, 582, 1191, 651),
    ),
)
TECHNIQUE_POINT_1 = ButtonWrapper(
    name='TECHNIQUE_POINT_1',
    share=Button(
        file='./assets/share/map/control/TECHNIQUE_POINT_1.png',
        area=(854, 594, 867, 607),
        search=(834, 574, 887, 627),
        color=(149, 141, 186),
        button=(854, 594, 867, 607),
    ),
)
TECHNIQUE_POINT_2 = ButtonWrapper(
    name='TECHNIQUE_POINT_2',
    share=Button(
        file='./assets/share/map/control/TECHNIQUE_POINT_2.png',
        area=(862, 578, 876, 592),
        search=(842, 558, 896, 612),
        color=(139, 132, 174),
        button=(862, 578, 876, 592),
    ),
)
TECHNIQUE_POINT_3 = ButtonWrapper(
    name='TECHNIQUE_POINT_3',
    share=Button(
        file='./assets/share/map/control/TECHNIQUE_POINT_3.png',
        area=(875, 566, 889, 580),
        search=(855, 546, 909, 600),
        color=(138, 130, 173),
        button=(875, 566, 889, 580),
    ),
)
TECHNIQUE_POINT_4 = ButtonWrapper(
    name='TECHNIQUE_POINT_4',
    share=Button(
        file='./assets/share/map/control/TECHNIQUE_POINT_4.png',
        area=(891, 559, 905, 573),
        search=(871, 539, 925, 593),
        color=(138, 130, 173),
        button=(891, 559, 905, 573),
    ),
)
TECHNIQUE_POINT_5 = ButtonWrapper(
    name='TECHNIQUE_POINT_5',
    share=Button(
        file='./assets/share/map/control/TECHNIQUE_POINT_5.png',
        area=(908, 559, 921, 573),
        search=(888, 539, 941, 593),
        color=(71, 72, 77),
        button=(908, 559, 921, 573),
    ),
)

```

`tasks/map/bigmap/plane.py`:

```py
import re
from typing import Optional

from module.base.base import ModuleBase
from module.base.timer import Timer
from module.exception import ScriptError
from module.logger import logger
from module.ocr.ocr import Ocr, OcrResultButton
from module.ui.draggable_list import DraggableList
from module.ui.scroll import Scroll
from tasks.base.page import page_map, page_world
from tasks.base.ui import UI
from tasks.map.assets.assets_map_bigmap import *
from tasks.map.keywords import KEYWORDS_MAP_PLANE, MapPlane

FLOOR_BUTTONS = [FLOOR_1, FLOOR_2, FLOOR_3]


def world_entrance(plane: MapPlane) -> ButtonWrapper:
    if plane.is_HertaSpaceStation:
        return WORLD_HERTA
    if plane.is_JariloVI:
        return WORLD_JARILO
    if plane.is_Luofu:
        return WORLD_LUOFU
    raise ScriptError(f'world_entrance() got unknown plane: {plane}')


class OcrMapPlane(Ocr):
    merge_thres_y = 20

    def after_process(self, result):
        result = super().after_process(result)
        result = re.sub(r'[+→★“”,.，、。]', '', result).strip()
        if self.lang == 'cn':
            result = result.replace('迎星港', '迴星港')
            if result == '星港':
                result = '迴星港'
        return result


class DraggablePlaneList(DraggableList):
    def is_row_selected(self, button: OcrResultButton, main: ModuleBase) -> bool:
        # Items have an animation to be selected, check if the rightmost become black.
        x = OCR_PLANE.area[2]
        area = (x - 20, button.area[1], x, button.area[3])
        if main.image_color_count(area, color=(40, 40, 40), threshold=221, count=100):
            return True

        return False


SCROLL_PLANE = Scroll(PLANE_SCROLL, color=(67, 67, 67), name='SCROLL_PLANE')
PLANE_LIST = DraggablePlaneList('PlaneList', keyword_class=MapPlane, ocr_class=OcrMapPlane, search_button=OCR_PLANE)


class BigmapPlane(UI):
    # Current plane
    plane: MapPlane = KEYWORDS_MAP_PLANE.Herta_ParlorCar
    # Floor name in game (B1, F1, F2, ...)
    floor: str = 'F1'

    def _bigmap_world_set(self, plane: MapPlane):
        """
        Pages:
            in: Any
            out: page_map
        """
        self.ui_goto(page_world)
        self.ui_click(appear_button=page_world.check_button,
                      click_button=world_entrance(plane),
                      check_button=page_map.check_button,
                      retry_wait=1)

    def _bigmap_get_current_plane(self) -> Optional[MapPlane]:
        """
        Get current plane.
        After entering page_map, the current plane is selected by default.

        Pages:
            in: page_map
        """
        PLANE_LIST.load_rows(main=self)
        selected = PLANE_LIST.get_selected_row(main=self)
        if selected is None:
            return None
        else:
            return selected.matched_keyword

    def _bigmap_get_current_plane_wrapped(self) -> MapPlane:
        """
        Get current plane with reties.
        """
        for n in range(2):
            self.ui_ensure(page_map)

            # Wait select animation
            timeout = Timer(2).start()
            skip_first_screenshot = True
            while 1:
                if skip_first_screenshot:
                    skip_first_screenshot = False
                else:
                    self.device.screenshot()
                current = self._bigmap_get_current_plane()
                if current is not None:
                    self.plane = current
                    return self.plane
                if timeout.reached():
                    logger.warning('No plane was selected')
                    if n == 0:
                        # Nothing selected, probably because it has been switched to page_map before running.
                        # Exit and re-enter should fix it.
                        self.ui_goto_main()
                    break

        logger.error('Cannot find current plane, return the first plane in list instead')
        try:
            first = PLANE_LIST.cur_buttons[0].matched_keyword
            if first is not None:
                self.plane = first
                return self.plane
            else:
                self.plane = KEYWORDS_MAP_PLANE.Herta_ParlorCar
                return self.plane
        except IndexError:
            self.plane = KEYWORDS_MAP_PLANE.Herta_ParlorCar
            return self.plane

    def bigmap_plane_set(self, plane: MapPlane) -> bool:
        """
        Set map to the given plane.

        Args:
            plane:

        Returns:
            bool: If success.

        Pages:
            in: Any
            out: page_map
        """
        logger.info(f'Bigmap plane set: {plane}')
        self._bigmap_get_current_plane_wrapped()
        logger.attr('CurrentPlane', self.plane)

        if self.plane.world != plane.world:
            logger.info(f'Switch to world {plane.world}')
            self._bigmap_world_set(plane)
            PLANE_LIST.load_rows(main=self)

        if SCROLL_PLANE.appear(main=self):
            if plane.page == 'top':
                if SCROLL_PLANE.set_top(main=self):
                    PLANE_LIST.load_rows(main=self)
            elif plane.page == 'bottom':
                if SCROLL_PLANE.set_bottom(main=self):
                    PLANE_LIST.load_rows(main=self)

        PLANE_LIST.select_row(plane, main=self, insight=False)
        self.plane = plane
        return True

    def _bigmap_get_current_floor(self) -> int:
        """
        Pages:
            in: page_map
        """
        for index, button in enumerate(FLOOR_BUTTONS):
            # Gray button, not current floor
            if self.image_color_count(button, color=(117, 117, 117), threshold=221, count=200):
                continue
            # White button, current floor
            if self.image_color_count(button, color=(233, 233, 233), threshold=221, count=200):
                return index + 1

        # logger.warning('Cannot get current floor')
        return 0

    def _bigmap_floor_set_execute(self, index: int, skip_first_screenshot=True) -> bool:
        """
        Args:
            index: 1 to 3, note that floor always starts from 1 (1, 2, 3, ...),
                different from the floor name in game (B1, F1, F2).

        Returns:
            bool: If success.

        Pages:
            in: page_map
        """
        logger.info(f'Bigmap floor index set: {index}')
        try:
            button = FLOOR_BUTTONS[index - 1]
        except IndexError:
            logger.error(f'No floor button matches floor index: {index}')
            return False

        interval = Timer(2)
        click_count = 0
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            current = self._bigmap_get_current_floor()
            logger.attr('FloorIndex', current)

            # End
            if current == index:
                logger.info('Selected at target floor index')
                return True
            if click_count >= 3:
                logger.warning('Unable to set floor after 3 trial, assume floor set')
                return False

            # Click
            if interval.reached():
                self.device.click(button)
                interval.reset()
                click_count += 1
                continue

    def bigmap_floor_set(self, floor: int | str, skip_first_screenshot=True) -> bool:
        """
        bigmap_plane_set() or _bigmap_get_current_plane_wrapped() must be called first
        which means `self.plane` is set.

        Args:
            floor: int for floor index counted from bottom, started from 1, such as 1, 2, 3.
                str for flooe name in game, such as "B1", "F1", "F2".
            skip_first_screenshot:

        Returns:
            bool: If success.

        Raises:
            ScriptError: If the given floor doesn't exist on current plane.

        Pages:
            in: page_map

        Examples:
            self = BigmapPlane('alas')
            self.bigmap_plane_set(KEYWORDS_MAP_PLANE.Jarilo_RivetTown)
            self.bigmap_floor_set('F2')
        """
        if isinstance(floor, int):
            self.plane.convert_to_floor_name(floor)
            index = floor
        else:
            floor = str(floor)
            index = self.plane.convert_to_floor_index(floor)

        return self._bigmap_floor_set_execute(index, skip_first_screenshot=skip_first_screenshot)

```

`tasks/map/control/control.py`:

```py
from functools import cached_property

from module.base.timer import Timer
from module.logger import logger
from tasks.map.assets.assets_map_control import ROTATION_SWIPE_AREA
from tasks.map.control.joystick import JoystickContact, MapControlJoystick
from tasks.map.control.waypoint import Waypoint, WaypointRun, WaypointStraightRun, ensure_waypoint
from tasks.map.minimap.minimap import Minimap
from tasks.map.resource.const import diff_to_180_180


class MapControl(MapControlJoystick):
    @cached_property
    def minimap(self) -> Minimap:
        return Minimap()

    def handle_rotation_set(self, target, threshold=15):
        """
        Set rotation while running.
        self.minimap.update_rotation() must be called first.

        Args:
            target: Target degree (0~360)
            threshold:

        Returns:
            bool: If swiped rotation
        """
        if self.minimap.is_rotation_near(target, threshold=threshold):
            return False

        # if abs(self.minimap.rotation_diff(target)) > 60:
        #     self.device.image_save()
        #     exit(1)

        logger.info(f'Rotation set: {target}')
        diff = self.minimap.rotation_diff(target) * self.minimap.ROTATION_SWIPE_MULTIPLY
        diff = min(diff, self.minimap.ROTATION_SWIPE_MAX_DISTANCE)
        diff = max(diff, -self.minimap.ROTATION_SWIPE_MAX_DISTANCE)

        self.device.swipe_vector((-diff, 0), box=ROTATION_SWIPE_AREA.area, duration=(0.2, 0.5))
        return True

    def rotation_set(self, target, threshold=15, skip_first_screenshot=False):
        """
        Set rotation while standing.

        Args:
            target: Target degree (0~360)
            threshold:
            skip_first_screenshot:

        Returns:
            bool: If swiped rotation
        """
        interval = Timer(1, count=2)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()
                self.minimap.update_rotation(self.device.image)
                self.minimap.log_minimap()

            # End
            if self.minimap.is_rotation_near(target, threshold=threshold):
                logger.info(f'Rotation is now at: {target}')
                break

            if interval.reached():
                if self.handle_rotation_set(target, threshold=threshold):
                    interval.reset()
                    continue

    def _goto(
            self,
            contact: JoystickContact,
            waypoint: Waypoint,
            end_point_opt=True,
            skip_first_screenshot=False
    ):
        """
        Point to point walk.

        Args:
            contact:
                JoystickContact, must be wrapped with:
                `with JoystickContact(self) as contact:`
            waypoint:
                Position to goto, (x, y)
            end_point_opt:
                True to enable endpoint optimizations,
                character will smoothly approach target position
            skip_first_screenshot:
        """
        logger.hr('Goto', level=2)
        logger.info(f'Goto {waypoint}')
        self.device.stuck_record_clear()
        self.device.click_record_clear()

        end_point_opt = end_point_opt and waypoint.end_point_opt
        allow_2x_run = waypoint.speed in ['2x_run']
        allow_straight_run = waypoint.speed in ['2x_run', 'straight_run']
        allow_run = waypoint.speed in ['2x_run', 'straight_run', 'run']
        allow_rotation_set = True
        last_rotation = 0

        direction_interval = Timer(0.5, count=1)
        rotation_interval = Timer(0.3, count=1)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.device.screenshot()

            # Update
            self.minimap.update(self.device.image)

            # Arrive
            if self.minimap.is_position_near(waypoint.position, threshold=waypoint.get_threshold(end_point_opt)):
                logger.info(f'Arrive {waypoint}')
                break

            # Switch run case
            diff = self.minimap.position_diff(waypoint.position)
            if end_point_opt:
                if allow_2x_run and diff < 20:
                    logger.info(f'Approaching target, diff={round(diff, 1)}, disallow 2x_run')
                    allow_2x_run = False
                if allow_straight_run and diff < 15:
                    logger.info(f'Approaching target, diff={round(diff, 1)}, disallow straight_run')
                    direction_interval = Timer(0.2)
                    self._map_2x_run_timer.reset()
                    allow_straight_run = False
                if allow_run and diff < 7:
                    logger.info(f'Approaching target, diff={round(diff, 1)}, disallow run')
                    direction_interval = Timer(0.2)
                    allow_run = False

            # Control
            direction = self.minimap.position2direction(waypoint.position)
            if allow_2x_run:
                # Run with 2x_run button
                # - Set rotation once
                # - Continuous fine-tuning direction
                # - Enable 2x_run
                if allow_rotation_set:
                    # Cache rotation cause rotation detection has a higher error rate
                    last_rotation = self.minimap.rotation
                    if self.minimap.is_rotation_near(direction, threshold=10):
                        logger.info(f'Already at target rotation, '
                                    f'current={last_rotation}, target={direction}, disallow rotation_set')
                        allow_rotation_set = False
                if allow_rotation_set and rotation_interval.reached():
                    if self.handle_rotation_set(direction, threshold=10):
                        rotation_interval.reset()
                        direction_interval.reset()
                if direction_interval.reached():
                    contact.set(direction=diff_to_180_180(direction - last_rotation), run=True)
                    direction_interval.reset()
                self.handle_map_2x_run(run=True)
            elif allow_straight_run:
                # Run with 2x_run button
                # - Set rotation once
                # - Continuous fine-tuning direction
                # - Disable 2x_run
                if allow_rotation_set:
                    # Cache rotation cause rotation detection has a higher error rate
                    last_rotation = self.minimap.rotation
                    if self.minimap.is_rotation_near(direction, threshold=10):
                        logger.info(f'Already at target rotation, '
                                    f'current={last_rotation}, target={direction}, disallow rotation_set')
                        allow_rotation_set = False
                if allow_rotation_set and rotation_interval.reached():
                    if self.handle_rotation_set(direction, threshold=10):
                        rotation_interval.reset()
                        direction_interval.reset()
                if direction_interval.reached():
                    contact.set(direction=diff_to_180_180(direction - last_rotation), run=True)
                    direction_interval.reset()
                self.handle_map_2x_run(run=False)
            elif allow_run:
                # Run
                # - No rotation set
                # - Continuous fine-tuning direction
                # - Disable 2x_run
                if allow_rotation_set:
                    last_rotation = self.minimap.rotation
                    allow_rotation_set = False
                if direction_interval.reached():
                    contact.set(direction=diff_to_180_180(direction - last_rotation), run=True)
                self.handle_map_2x_run(run=False)
            else:
                # Walk
                # - Continuous fine-tuning direction
                # - Disable 2x_run
                if allow_rotation_set:
                    last_rotation = self.minimap.rotation
                    allow_rotation_set = False
                if direction_interval.reached():
                    contact.set(direction=diff_to_180_180(direction - last_rotation), run=False)
                    direction_interval.reset()
                self.handle_map_2x_run(run=False)

    def goto(
            self,
            waypoints,
            skip_first_screenshot=True
    ):
        """
        Go along a list of position, or goto target position

        Args:
            waypoints:
                position (x, y) to goto, or a list of position to go along.
                Waypoint object to goto, or a list of Waypoint objects to go along.

            skip_first_screenshot:
        """
        logger.hr('Goto', level=1)
        if not isinstance(waypoints, list):
            waypoints = [waypoints]
        waypoints = [ensure_waypoint(point) for point in waypoints]
        logger.info(f'Go along {len(waypoints)} waypoints')
        end_list = [False for _ in waypoints]
        end_list[-1] = True

        with JoystickContact(self) as contact:
            for point, end in zip(waypoints, end_list):
                point: Waypoint
                self._goto(
                    contact=contact,
                    waypoint=point,
                    end_point_opt=end,
                    skip_first_screenshot=skip_first_screenshot
                )
                skip_first_screenshot = True

        end_point = waypoints[-1]
        if end_point.end_point_rotation is not None:
            self.rotation_set(end_point.end_point_rotation, threshold=end_point.end_point_rotation_threshold)


if __name__ == '__main__':
    # Control test in Himeko trail
    # Must manually enter Himeko trail first and dismiss popup
    self = MapControl('alas')
    self.minimap.set_plane('Jarilo_BackwaterPass', floor='F1')
    self.device.screenshot()
    self.minimap.init_position((519, 359))
    # Visit 3 items
    self.goto([
        WaypointRun((577.6, 363.4)),
    ])
    self.goto([
        WaypointStraightRun((577.5, 369.4), end_point_rotation=200),
    ])
    self.goto([
        WaypointRun((581.5, 387.3)),
        WaypointRun((577.4, 411.5)),
    ])
    # Goto boss
    self.goto([
        WaypointStraightRun((607.6, 425.3)),
    ])

```

`tasks/map/control/joystick.py`:

```py
import math
from functools import cached_property

from module.base.timer import Timer
from module.device.method.maatouch import MaatouchBuilder
from module.device.method.minitouch import CommandBuilder, insert_swipe, random_normal_distribution
from module.exception import ScriptError
from module.logger import logger
from tasks.base.ui import UI
from tasks.map.assets.assets_map_control import *


class JoystickContact:
    CENTER = (JOYSTICK.area[0] + JOYSTICK.area[2]) / 2, (JOYSTICK.area[1] + JOYSTICK.area[3]) / 2
    # Minimum radius 49px
    RADIUS_WALK = (55, 65)
    # Minimum radius 103px
    RADIUS_RUN = (105, 115)

    def __init__(self, main):
        """
        Args:
            main (MapControlJoystick):
        """
        self.main = main
        self.prev_point = None

    def __enter__(self):
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        """
        Lift finger when:
        - Walk event ends, JoystickContact ends
        - Any error is raised
        Can not lift finger when:
        - Process is force terminated
        """
        builder = self.builder
        if self.is_downed:
            builder.up().commit()
            builder.send()
            logger.info('JoystickContact ends')
        else:
            logger.info('JoystickContact ends but it was never downed')

    @property
    def is_downed(self):
        return self.prev_point is not None

    @cached_property
    def builder(self):
        """
        Initialize a command builder
        """
        method = self.main.config.Emulator_ControlMethod
        if method == 'MaaTouch':
            # Get the very first builder to initialize MaaTouch
            _ = self.main.device.maatouch_builder
            builder = MaatouchBuilder(self.main.device, contact=1)
        elif method == 'minitouch':
            # Get the very first builder to initialize minitouch
            _ = self.main.device.minitouch_builder
            builder = CommandBuilder(self.main.device, contact=1)
        else:
            raise ScriptError(f'Control method {method} does not support multi-finger, '
                              f'please use MaaTouch or minitouch instead')

        # def empty_func():
        #     pass
        #
        # # No clear()
        # builder.clear = empty_func
        # No delay
        builder.DEFAULT_DELAY = 0.

        return builder

    @classmethod
    def direction2screen(cls, direction, run=True):
        """
        Args:
            direction (int, float): Direction to goto (0~360)
            run: True for character running, False for walking

        Returns:
            tuple[int, int]: Position on screen to control joystick
        """
        direction += random_normal_distribution(-5, 5, n=5)
        radius = cls.RADIUS_RUN if run else cls.RADIUS_WALK
        radius = random_normal_distribution(*radius, n=5)

        direction = math.radians(direction)
        point = (
            cls.CENTER[0] + radius * math.sin(direction),
            cls.CENTER[1] - radius * math.cos(direction),
        )
        point = (int(round(point[0])), int(round(point[1])))
        return point

    def set(self, direction, run=True):
        """
        Set joystick to given position

        Args:
            direction (int, float): Direction to goto (0~360)
            run: True for character running, False for walking
        """
        logger.info(f'JoystickContact set to {direction}')
        point = JoystickContact.direction2screen(direction, run=run)
        builder = self.builder

        if self.is_downed:
            points = insert_swipe(p0=self.prev_point, p3=point, speed=20)
            for point in points[1:]:
                builder.move(*point).commit().wait(10)
            builder.send()
        else:
            builder.down(*point).commit()
            builder.send()
            # Character starts moving, RUN button is still unavailable in a short time.
            # Assume available in 0.3s
            # We still have reties if 0.3s is incorrect.
            self.main._map_2x_run_timer.set_current(0.7)

        self.prev_point = point


class MapControlJoystick(UI):
    _map_A_timer = Timer(1)
    _map_E_timer = Timer(1)
    _map_2x_run_timer = Timer(1)

    @cached_property
    def joystick_center(self) -> tuple[float, float]:
        x1, y1, x2, y2 = JOYSTICK.area
        return (x1 + x2) / 2, (y1 + y2) / 2

    def map_get_technique_points(self):
        """
        Returns:
            int: 0 to 5.
        """
        points = [
            self.image_color_count(button, color=(255, 255, 255), threshold=221, count=20)
            for button in [
                TECHNIQUE_POINT_1,
                TECHNIQUE_POINT_2,
                TECHNIQUE_POINT_3,
                TECHNIQUE_POINT_4,
                TECHNIQUE_POINT_5,
            ]
        ]
        count = sum(points)
        logger.attr('TechniquePoints', count)
        return count

    def handle_map_A(self):
        """
        Simply clicking A with an interval of 1s, no guarantee of success.

        Returns:
            bool: If clicked.
        """
        if self._map_A_timer.reached():
            self.device.click(A_BUTTON)
            self._map_A_timer.reset()
            return True

        return False

    def handle_map_E(self):
        """
        Simply clicking E with an interval of 1s, no guarantee of success.
        Note that E cannot be released if technique points ran out.

        Returns:
            bool: If clicked.
        """
        if self._map_E_timer.reached():
            self.device.click(E_BUTTON)
            self._map_E_timer.reset()
            return True

        return False

    def handle_map_2x_run(self, run=True):
        """
        Keep character running.
        Note that RUN button can only be clicked when character is moving.

        Returns:
            bool: If clicked.
        """
        is_running = self.image_color_count(RUN_BUTTON, color=(208, 183, 138), threshold=221, count=100)

        if run and not is_running and self._map_2x_run_timer.reached():
            self.device.click(RUN_BUTTON)
            self._map_2x_run_timer.reset()
            return True
        if not run and is_running and self._map_2x_run_timer.reached():
            self.device.click(RUN_BUTTON)
            self._map_2x_run_timer.reset()
            return True

        return False

```

`tasks/map/control/waypoint.py`:

```py
from dataclasses import dataclass


@dataclass
class Waypoint:
    # Position to goto, (x, y)
    position: tuple
    # Position diff < threshold is considered as arrived
    # `threshold` is used first if it is set
    threshold: int = None
    # If `threshold` is not set, `waypoint_threshold` and `endpoint_threshold` are used
    waypoint_threshold: int = 10
    endpoint_threshold: int = 3
    # Max move speed, '2x_run', 'straight_run', 'run', 'walk'
    # See MapControl._goto() for details of each speed level
    speed: str = '2x_run'

    """
    The following attributes are only be used if this waypoint is the end point of goto()
    """
    # True to enable endpoint optimizations, character will smoothly approach target position
    # False to stop all controls at arrive
    end_point_opt: bool = True
    # Set rotation after arrive, 0~360
    end_point_rotation: int = None
    end_point_rotation_threshold: int = 15

    def __str__(self):
        return f'Waypoint({self.position})'

    __repr__ = __str__

    def get_threshold(self, end):
        """
        Args:
            end: True if this is an end point

        Returns:
            int
        """
        if self.threshold is not None:
            return self.threshold
        if end:
            return self.endpoint_threshold
        else:
            return self.waypoint_threshold


def ensure_waypoint(point) -> Waypoint:
    """
    Args:
        point: Position (x, y) or Waypoint object

    Returns:
        Waypoint:
    """
    if isinstance(point, Waypoint):
        return point
    return Waypoint(point)


@dataclass(repr=False)
class Waypoint2xRun(Waypoint):
    speed: str = '2x_run'


@dataclass(repr=False)
class WaypointStraightRun(Waypoint):
    speed: str = 'straight_run'


@dataclass(repr=False)
class WaypointRun(Waypoint):
    speed: str = 'run'


@dataclass(repr=False)
class WaypointWalk(Waypoint):
    speed: str = 'walk'

```

`tasks/map/keywords/__init__.py`:

```py
import tasks.map.keywords.plane as KEYWORDS_MAP_PLANE
from tasks.map.keywords.classes import MapPlane

# Herta
KEYWORDS_MAP_PLANE.Herta_StorageZone.floors = ['B1', 'F1', 'F2']
KEYWORDS_MAP_PLANE.Herta_SupplyZone.floors = ['F1', 'F2']
# Jarilo
KEYWORDS_MAP_PLANE.Jarilo_AdministrativeDistrict.floors = ['B1', 'F1']
KEYWORDS_MAP_PLANE.Jarilo_RivetTown.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Jarilo_RobotSettlement.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Jarilo_BoulderTown.page = 'bottom'
KEYWORDS_MAP_PLANE.Jarilo_GreatMine.page = 'bottom'
KEYWORDS_MAP_PLANE.Jarilo_RivetTown.page = 'bottom'
KEYWORDS_MAP_PLANE.Jarilo_RobotSettlement.page = 'bottom'
# Luofu
KEYWORDS_MAP_PLANE.Luofu_Cloudford.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Luofu_StargazerNavalia.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Luofu_DivinationCommission.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Luofu_AlchemyCommission.floors = ['F1', 'F2']
KEYWORDS_MAP_PLANE.Luofu_AlchemyCommission.page = 'bottom'
KEYWORDS_MAP_PLANE.Luofu_ScalegorgeWaterscape.page = 'bottom'

```

`tasks/map/keywords/classes.py`:

```py
from dataclasses import dataclass
from functools import cached_property
from typing import ClassVar

from module.exception import ScriptError
from module.ocr.keyword import Keyword


@dataclass(repr=False)
class MapPlane(Keyword):
    instances: ClassVar = {}

    # Map floors, 'F1' by default
    # Example: ['B1', 'F1', 'F2']
    floors = ['F1']

    # Page on bigmap sidebar
    # 'top' or 'bottom'
    page = 'top'

    @cached_property
    def world(self) -> str:
        """
        Returns:
            str: World name. Note that "Parlor Car" is considered as a plane of Herta.
                "Herta" for Herta Space Station
                "Jarilo" for Jarilo-VI
                "Luofu" for The Xianzhou Luofu
                "" for unknown
        """
        for world in ['Herta', 'Jarilo', 'Luofu']:
            if self.name.startswith(world):
                return world

        return ''

    @cached_property
    def is_HertaSpaceStation(self):
        return self.world == 'Herta'

    @cached_property
    def is_JariloVI(self):
        return self.world == 'Jarilo'

    @cached_property
    def is_Luofu(self):
        return self.world == 'Luofu'

    @cached_property
    def has_multiple_floors(self):
        return self.floors and self.floors != ['F1']

    def convert_to_floor_index(self, floor: str | int) -> int:
        """
        Args:
            floor: int for floor index counted from bottom, such as 1, 2, 3
                str for floor names in game, such as "B1", "F1", "F2"

        Returns:
            int: 1 to 3 counted from bottom.

        Raises:
            ScriptError: If floor doesn't exist
        """
        if isinstance(floor, int):
            # Check exist
            try:
                _ = self.floors[floor - 1]
                return floor
            except IndexError:
                raise ScriptError(f'Plane {self} does not have floor index {floor}')
        elif isinstance(floor, str):
            # Convert to floor index
            floor = floor.upper()
            try:
                return self.floors.index(floor) + 1
            except IndexError:
                raise ScriptError(f'Plane {self} does not have floor name {floor}')
        else:
            raise ScriptError(f'Plane {self} does not have floor {floor}')

    def convert_to_floor_name(self, floor: str | int) -> str:
        """
        Args:
            floor: int for floor index counted from bottom, such as 1, 2, 3
                str for floor names in game, such as "B1", "F1", "F2"

        Returns:
            str: Floor names in game, such as "B1", "F1", "F2"

        Raises:
            ScriptError: If floor doesn't exist
        """
        if isinstance(floor, int):
            # Convert to floor index
            try:
                return self.floors[floor - 1]
            except IndexError:
                raise ScriptError(f'Plane {self} does not have floor index {floor}')
        elif isinstance(floor, str):
            # Check exist
            floor = floor.upper()
            try:
                _ = self.floors.index(floor) + 1
                return floor
            except IndexError:
                raise ScriptError(f'Plane {self} does not have floor name {floor}')
        else:
            raise ScriptError(f'Plane {self} does not have floor {floor}')

```

`tasks/map/keywords/plane.py`:

```py
from .classes import MapPlane

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Herta_ParlorCar = MapPlane(
    id=1,
    name='Herta_ParlorCar',
    cn='观景车厢',
    cht='觀景車廂',
    en='Parlor Car',
    jp='列車のラウンジ',
)
Herta_MasterControlZone = MapPlane(
    id=2,
    name='Herta_MasterControlZone',
    cn='主控舱段',
    cht='主控艙段',
    en='Master Control Zone',
    jp='主制御部分',
)
Herta_BaseZone = MapPlane(
    id=3,
    name='Herta_BaseZone',
    cn='基座舱段',
    cht='基座艙段',
    en='Base Zone',
    jp='ベース部分',
)
Herta_StorageZone = MapPlane(
    id=4,
    name='Herta_StorageZone',
    cn='收容舱段',
    cht='收容艙段',
    en='Storage Zone',
    jp='収容部分',
)
Herta_SupplyZone = MapPlane(
    id=5,
    name='Herta_SupplyZone',
    cn='支援舱段',
    cht='支援艙段',
    en='Supply Zone',
    jp='サポート部分',
)
Jarilo_AdministrativeDistrict = MapPlane(
    id=6,
    name='Jarilo_AdministrativeDistrict',
    cn='行政区',
    cht='行政區',
    en='Administrative District',
    jp='行政区',
)
Jarilo_OutlyingSnowPlains = MapPlane(
    id=7,
    name='Jarilo_OutlyingSnowPlains',
    cn='城郊雪原',
    cht='城郊雪原',
    en='Outlying Snow Plains',
    jp='郊外雪原',
)
Jarilo_BackwaterPass = MapPlane(
    id=8,
    name='Jarilo_BackwaterPass',
    cn='边缘通路',
    cht='邊緣通道',
    en='Backwater Pass',
    jp='外縁通路',
)
Jarilo_SilvermaneGuardRestrictedZone = MapPlane(
    id=9,
    name='Jarilo_SilvermaneGuardRestrictedZone',
    cn='铁卫禁区',
    cht='鐵衛禁區',
    en='Silvermane Guard Restricted Zone',
    jp='シルバーメイン禁区',
)
Jarilo_CorridorofFadingEchoes = MapPlane(
    id=10,
    name='Jarilo_CorridorofFadingEchoes',
    cn='残响回廊',
    cht='殘響迴廊',
    en='Corridor of Fading Echoes',
    jp='残響回廊',
)
Jarilo_EverwinterHill = MapPlane(
    id=11,
    name='Jarilo_EverwinterHill',
    cn='永冬岭',
    cht='永冬嶺',
    en='Everwinter Hill',
    jp='常冬峰',
)
Jarilo_BoulderTown = MapPlane(
    id=12,
    name='Jarilo_BoulderTown',
    cn='磐岩镇',
    cht='磐岩鎮',
    en='Boulder Town',
    jp='ボルダータウン',
)
Jarilo_GreatMine = MapPlane(
    id=13,
    name='Jarilo_GreatMine',
    cn='大矿区',
    cht='大礦區',
    en='Great Mine',
    jp='大鉱区',
)
Jarilo_RivetTown = MapPlane(
    id=14,
    name='Jarilo_RivetTown',
    cn='铆钉镇',
    cht='鉚釘鎮',
    en='Rivet Town',
    jp='リベットタウン',
)
Jarilo_RobotSettlement = MapPlane(
    id=15,
    name='Jarilo_RobotSettlement',
    cn='机械聚落',
    cht='機械聚落',
    en='Robot Settlement',
    jp='機械集落',
)
Luofu_CentralStarskiffHaven = MapPlane(
    id=16,
    name='Luofu_CentralStarskiffHaven',
    cn='星槎海中枢',
    cht='星槎海中樞',
    en='Central Starskiff Haven',
    jp='星槎海中枢',
)
Luofu_Cloudford = MapPlane(
    id=17,
    name='Luofu_Cloudford',
    cn='流云渡',
    cht='流雲渡',
    en='Cloudford',
    jp='流雲渡し',
)
Luofu_StargazerNavalia = MapPlane(
    id=18,
    name='Luofu_StargazerNavalia',
    cn='迴星港',
    cht='迴星港',
    en='Stargazer Navalia',
    jp='廻星港',
)
Luofu_ExaltingSanctum = MapPlane(
    id=19,
    name='Luofu_ExaltingSanctum',
    cn='长乐天',
    cht='長樂天',
    en='Exalting Sanctum',
    jp='長楽天',
)
Luofu_DivinationCommission = MapPlane(
    id=20,
    name='Luofu_DivinationCommission',
    cn='太卜司',
    cht='太卜司',
    en='Divination Commission',
    jp='太卜司',
)
Luofu_ArtisanshipCommission = MapPlane(
    id=21,
    name='Luofu_ArtisanshipCommission',
    cn='工造司',
    cht='工造司',
    en='Artisanship Commission',
    jp='工造司',
)
Luofu_AlchemyCommission = MapPlane(
    id=22,
    name='Luofu_AlchemyCommission',
    cn='丹鼎司',
    cht='丹鼎司',
    en='Alchemy Commission',
    jp='丹鼎司',
)
Luofu_ScalegorgeWaterscape = MapPlane(
    id=23,
    name='Luofu_ScalegorgeWaterscape',
    cn='鳞渊境',
    cht='鱗淵境',
    en='Scalegorge Waterscape',
    jp='鱗淵境',
)

```

`tasks/map/minimap/minimap.py`:

```py
from dataclasses import dataclass
from typing import Any

import cv2
import numpy as np
from scipy import signal

from module.base.utils import (
    area_offset,
    area_pad,
    color_similarity_2d,
    crop,
    get_bbox,
    image_size,
    rgb2yuv
)
from module.logger import logger
from tasks.map.minimap.utils import (
    convolve,
    cubic_find_maximum,
    image_center_crop,
    map_image_preprocess,
    peak_confidence
)
from tasks.map.resource.resource import MapResource


@dataclass
class PositionPredictState:
    size: Any = None
    scale: Any = None

    search_area: Any = None
    search_image: Any = None
    result_mask: Any = None
    result: Any = None

    sim: Any = None
    loca: Any = None
    local_sim: Any = None
    local_loca: Any = None
    precise_sim: Any = None
    precise_loca: Any = None

    global_loca: Any = None


class Minimap(MapResource):
    def init_position(self, position: tuple[int, int]):
        logger.info(f"init_position:{position}")
        self.position = position

    def _predict_position(self, image, scale=1.0):
        """
        Args:
            image:
            scale:

        Returns:
            PositionPredictState:
        """
        scale *= self.POSITION_SEARCH_SCALE
        local = cv2.resize(image, None, fx=scale, fy=scale, interpolation=cv2.INTER_CUBIC)
        size = np.array(image_size(image))

        if sum(self.position) > 0:
            search_position = np.array(self.position, dtype=np.int64)
            search_position += self.POSITION_FEATURE_PAD
            search_size = np.array(image_size(local)) * self.POSITION_SEARCH_RADIUS
            search_half = (search_size // 2).astype(np.int64)
            search_area = area_offset((0, 0, *(search_half * 2)), offset=-search_half)
            search_area = area_offset(search_area, offset=np.multiply(search_position, self.POSITION_SEARCH_SCALE))
            search_area = np.array(search_area).astype(np.int64)
            search_image = crop(self.assets_floor_feat, search_area, copy=False)
            result_mask = crop(self.assets_floor_outside_mask, search_area, copy=False)
        else:
            search_area = (0, 0, *image_size(local))
            search_image = self.assets_floor_feat
            result_mask = self.assets_floor_outside_mask

        # if round(scale, 5) == self.POSITION_SEARCH_SCALE * 1.0:
        #     Image.fromarray((local).astype(np.uint8)).save('local.png')
        #     Image.fromarray((search_image).astype(np.uint8)).save('search_image.png')

        # Using mask will take 3 times as long
        # mask = self.get_circle_mask(local)
        # result = cv2.matchTemplate(search_image, local, cv2.TM_CCOEFF_NORMED, mask=mask)
        result = cv2.matchTemplate(search_image, local, cv2.TM_CCOEFF_NORMED)
        result_mask = image_center_crop(result_mask, size=image_size(result))
        result[result_mask] = 0
        _, sim, _, loca = cv2.minMaxLoc(result)
        # if round(scale, 3) == self.POSITION_SEARCH_SCALE * 1.0:
        #     result[result <= 0] = 0
        #     Image.fromarray((result * 255).astype(np.uint8)).save('match_result.png')

        # Gaussian filter to get local maximum
        local_maximum = cv2.subtract(result, cv2.GaussianBlur(result, (5, 5), 0))
        _, local_sim, _, local_loca = cv2.minMaxLoc(local_maximum)
        # if round(scale, 5) == self.POSITION_SEARCH_SCALE * 1.0:
        #     local_maximum[local_maximum < 0] = 0
        #     local_maximum[local_maximum > 0.1] = 0.1
        #     Image.fromarray((local_maximum * 255 * 10).astype(np.uint8)).save('local_maximum.png')

        # Calculate the precise location using CUBIC
        # precise = crop(result, area=area_offset((-4, -4, 4, 4), offset=local_loca))
        # precise_sim, precise_loca = cubic_find_maximum(precise, precision=0.05)
        # precise_loca -= 5
        precise_loca = np.array((0, 0))
        precise_sim = result[local_loca[1], local_loca[0]]
        state = PositionPredictState(
            size=size, scale=scale,
            search_area=search_area, search_image=search_image, result_mask=result_mask, result=result,
            sim=sim, loca=loca, local_sim=local_sim, local_loca=local_loca,
            precise_sim=precise_sim, precise_loca=precise_loca,
        )

        # Location on search_image
        lookup_loca = precise_loca + local_loca + size * scale / 2
        # Location on GIMAP
        global_loca = (lookup_loca + search_area[:2]) / self.POSITION_SEARCH_SCALE
        # Can't figure out why but the result_of_0.5_lookup_scale + 0.5 ~= result_of_1.0_lookup_scale
        global_loca += self.POSITION_MOVE_PATCH
        # Move to the origin point of map
        global_loca -= self.POSITION_FEATURE_PAD

        state.global_loca = global_loca

        return state

    def _predict_precise_position(self, state):
        """
        Args:
            result (PositionPredictState):

        Returns:
            PositionPredictState
        """
        size = state.size
        scale = state.scale
        search_area = state.search_area
        result = state.result
        loca = state.loca
        local_loca = state.local_loca

        precise = crop(result, area=area_offset((-4, -4, 4, 4), offset=loca))
        precise_sim, precise_loca = cubic_find_maximum(precise, precision=0.05)
        precise_loca -= 5

        state.precise_sim = precise_sim
        state.precise_loca = precise_loca

        # Location on search_image
        lookup_loca = precise_loca + local_loca + size * scale / 2
        # Location on GIMAP
        global_loca = (lookup_loca + search_area[:2]) / self.POSITION_SEARCH_SCALE
        # Can't figure out why but the result_of_0.5_lookup_scale + 0.5 ~= result_of_1.0_lookup_scale
        global_loca += self.POSITION_MOVE_PATCH
        # Move to the origin point of map
        global_loca -= self.POSITION_FEATURE_PAD

        state.global_loca = global_loca

        return state

    def update_position(self, image):
        """
        Get position on GIMAP, costs about 6.57ms.

        The following attributes will be set:
        - position_similarity
        - position
        - position_scene
        """
        image = self.get_minimap(image, self.POSITION_RADIUS)
        image = map_image_preprocess(image)
        image &= self.get_circle_mask(image)

        best_sim = -1.
        best_scale = 1.0
        best_state = None
        # Walking is in scale 1.20
        # Running is in scale 1.25
        scale_list = [1.00, 1.05, 1.10, 1.15, 1.20, 1.25]

        for scale in scale_list:
            state = self._predict_position(image, scale)
            # print([np.round(i, 3) for i in [scale, state.sim, state.local_sim, state.global_loca]])
            if state.sim > best_sim:
                best_sim = state.sim
                best_scale = scale
                best_state = state

        best_state = self._predict_precise_position(best_state)

        self.position_similarity = round(best_state.precise_sim, 3)
        self.position_similarity_local = round(best_state.local_sim, 3)
        self.position = tuple(np.round(best_state.global_loca, 1))
        self.position_scale = round(best_scale, 3)
        return self.position

    def update_direction(self, image):
        """
        Get direction of character, costs about 0.64ms.

        The following attributes will be set:
        - direction_similarity
        - direction
        """
        image = self.get_minimap(image, self.DIRECTION_RADIUS)

        image = color_similarity_2d(image, color=self.DIRECTION_ARROW_COLOR)
        try:
            area = area_pad(get_bbox(image, threshold=128), pad=-1)
        except IndexError:
            # IndexError: index 0 is out of bounds for axis 0 with size 0
            logger.warning('No direction arrow on minimap')
            return

        image = crop(image, area=area)
        scale = self.DIRECTION_ROTATION_SCALE * self.DIRECTION_SEARCH_SCALE
        mapping = cv2.resize(image, None, fx=scale, fy=scale, interpolation=cv2.INTER_NEAREST)
        result = cv2.matchTemplate(self.ArrowRotateMap, mapping, cv2.TM_CCOEFF_NORMED)
        result = cv2.subtract(result, cv2.GaussianBlur(result, (5, 5), 0))
        _, sim, _, loca = cv2.minMaxLoc(result)
        loca = np.array(loca) / self.DIRECTION_SEARCH_SCALE // (self.DIRECTION_RADIUS * 2)
        degree = int((loca[0] + loca[1] * 8) * 5)

        def to_map(x):
            return int((x * self.DIRECTION_RADIUS * 2 + self.DIRECTION_RADIUS) * self.POSITION_SEARCH_SCALE)

        # Row on ArrowRotateMapAll
        row = int(degree // 8) + 45
        # Calculate +-1 rows to get result with a precision of 1
        row = (row - 2, row + 3)
        # Convert to ArrowRotateMapAll and to be 5px larger
        row = (to_map(row[0]) - 5, to_map(row[1]) + 5)

        precise_map = self.ArrowRotateMapAll[row[0]:row[1], :]
        result = cv2.matchTemplate(precise_map, mapping, cv2.TM_CCOEFF_NORMED)
        result = cv2.subtract(result, cv2.GaussianBlur(result, (5, 5), 0))

        def to_map(x):
            return int((x * self.DIRECTION_RADIUS * 2) * self.POSITION_SEARCH_SCALE)

        def get_precise_sim(d):
            y, x = divmod(d, 8)
            im = result[to_map(y):to_map(y + 1), to_map(x):to_map(x + 1)]
            _, sim, _, _ = cv2.minMaxLoc(im)
            return sim

        precise = np.array([[get_precise_sim(_) for _ in range(24)]])
        precise_sim, precise_loca = cubic_find_maximum(precise, precision=0.1)
        precise_loca = degree // 8 * 8 - 8 + precise_loca[0]

        self.direction_similarity = round(precise_sim, 3)
        self.direction = precise_loca % 360

    def update_rotation(self, image):
        """
        Get direction of character, costs about 0.66ms.

        The following attributes will be set:
        - direction_similarity
        - direction
        """
        d = self.MINIMAP_RADIUS * 2
        scale = 1

        # Extract
        minimap = self.get_minimap(image, radius=self.MINIMAP_RADIUS)
        _, _, v = cv2.split(rgb2yuv(minimap))

        image = cv2.subtract(128, v)

        image = cv2.GaussianBlur(image, (3, 3), 0)
        # Expand circle into rectangle
        remap = cv2.remap(image, *self.RotationRemapData, cv2.INTER_LINEAR)[d * 1 // 10:d * 6 // 10].astype(np.float32)
        remap = cv2.resize(remap, None, fx=scale, fy=scale, interpolation=cv2.INTER_LINEAR)
        # Find derivative
        gradx = cv2.Scharr(remap, cv2.CV_32F, 1, 0)
        # import matplotlib.pyplot as plt
        # plt.imshow(gradx)
        # plt.show()

        # Magic parameters for scipy.find_peaks
        para = {
            # 'height': (50, 800),
            'height': 35,
            # 'prominence': (0, 400),
            # 'width': (0, d * scale / 20),
            # 'distance': d * scale / 18,
            'wlen': d * scale,
        }
        # plt.plot(gradx[d * 3 // 10])
        # plt.show()

        # `l` for the left of sight area, derivative is positive
        # `r` for the right of sight area, derivative is negative
        l = np.bincount(signal.find_peaks(gradx.ravel(), **para)[0] % (d * scale), minlength=d * scale)
        r = np.bincount(signal.find_peaks(-gradx.ravel(), **para)[0] % (d * scale), minlength=d * scale)
        l, r = np.maximum(l - r, 0), np.maximum(r - l, 0)
        # plt.plot(l)
        # plt.plot(np.roll(r, -d * scale // 4))
        # plt.show()

        conv0 = []
        kernel = 2 * scale
        r_expanded = np.concatenate([r, r, r])
        r_length = len(r)

        # Faster than nested calling np.roll()
        def roll_r(shift):
            return r_expanded[r_length - shift:r_length * 2 - shift]

        def convolve_r(ker, shift):
            return sum(roll_r(shift + i) * (ker - abs(i)) // ker for i in range(-ker + 1, ker))

        for offset in range(-kernel + 1, kernel):
            result = l * convolve_r(ker=3 * kernel, shift=-d * scale // 4 + offset)
            # result = l * convolve(np.roll(r, -d * scale // 4 + offset), kernel=3 * scale)
            # minus = l * convolve(np.roll(r, offset), kernel=10 * scale) // 5
            # if offset == 0:
            #     plt.plot(result)
            #     plt.plot(-minus)
            #     plt.show()
            # result -= minus
            # result = convolve(result, kernel=3 * scale)
            conv0 += [result]
        # plt.figure(figsize=(20, 16))
        # for row in conv0:
        #     plt.plot(row)
        # plt.show()

        conv0 = np.maximum(conv0, 1)
        maximum = np.max(conv0, axis=0)
        rotation_confidence = round(peak_confidence(maximum), 3)
        if rotation_confidence > 0.3:
            # Good match
            result = maximum
        else:
            # Convolve again to reduce noice
            average = np.mean(conv0, axis=0)
            minimum = np.min(conv0, axis=0)
            result = convolve(maximum * average * minimum, 2 * scale)
            rotation_confidence = round(peak_confidence(maximum), 3)
        # plt.plot(maximum)
        # plt.plot(result)
        # plt.show()

        # Convert match point to degree
        degree = np.argmax(result) / (d * scale) * 360 + 135
        degree = int(degree % 360)
        # +3 is a value obtained from experience
        # Don't know why but <predicted_rotation> + 3 = <actual_rotation>
        rotation = degree + 3

        self.rotation_confidence = rotation_confidence
        self.rotation = rotation

    def update(self, image, show_log=True):
        """
        Update minimap, costs about 7.88ms.
        """
        self.update_position(image)
        self.update_direction(image)
        self.update_rotation(image)
        if show_log:
            self.log_minimap()

    def log_minimap(self):
        # MiniMap P:(567.5, 862.8) (1.00x|0.439|0.157), D:303.8 (0.253), R:304 (0.846)
        logger.info(
            f'MiniMap '
            f'P:({self.position[0]:.1f}, {self.position[1]:.1f}) '
            f'({self.position_scale:.2f}x|{self.position_similarity:.3f}|{self.position_similarity_local:.3f}), '
            f'D:{self.direction:.1f} ({self.direction_similarity:.3f}), '
            f'R:{self.rotation} ({self.rotation_confidence:.3f})'
        )


if __name__ == '__main__':
    """
    Run mimimap tracking test.
    """
    from tasks.base.ui import UI

    # Uncomment this to use local srcmap instead of the pre-built one
    # MapResource.SRCMAP = '../srcmap/srcmap'
    self = Minimap()
    # Set plane, assume starting from Jarilo_AdministrativeDistrict
    self.set_plane('Jarilo_AdministrativeDistrict', floor='F1')

    ui = UI('alas')
    ui.device.disable_stuck_detection()
    # Set starter point. Starter point will be calculated if it's missing but may contain errors.
    # With starter point set, position is only searched around starter point and new position becomes new starter point.
    # self.init_position((337, 480))
    while 1:
        ui.device.screenshot()
        self.update(ui.device.image)
        self.show_minimap()

```

`tasks/map/minimap/utils.py`:

```py
import cv2
import numpy as np
from scipy import signal

from module.base.utils import image_size


def map_image_preprocess(image):
    """
    A shared preprocess method used in ResourceGenerate and _predict_position()

    Args:
        image (np.ndarray): Screenshot in RGB

    Returns:
        np.ndarray:
    """
    # image = rgb2luma(image)
    image = cv2.GaussianBlur(image, (5, 5), 0)
    image = cv2.Canny(image, 15, 50)
    return image


def create_circular_mask(h, w, center=None, radius=None):
    # https://stackoverflow.com/questions/44865023/how-can-i-create-a-circular-mask-for-a-numpy-array
    if center is None:  # use the middle of the image
        center = (int(w / 2), int(h / 2))
    if radius is None:  # use the smallest distance between the center and image walls
        radius = min(center[0], center[1], w - center[0], h - center[1])

    y, x = np.ogrid[:h, :w]
    dist_from_center = np.sqrt((x - center[0]) ** 2 + (y - center[1]) ** 2)

    mask = dist_from_center <= radius
    return mask


def rotate_bound(image, angle):
    """
    Rotate an image with outbound

    https://blog.csdn.net/qq_37674858/article/details/80708393

    Args:
        image (np.ndarray):
        angle (int, float):

    Returns:
        np.ndarray:
    """
    # grab the dimensions of the image and then determine the
    # center
    (h, w) = image.shape[:2]
    (cX, cY) = (w // 2, h // 2)

    # grab the rotation matrix (applying the negative of the
    # angle to rotate clockwise), then grab the sine and cosine
    # (i.e., the rotation components of the matrix)
    M = cv2.getRotationMatrix2D((cX, cY), -angle, 1.0)
    cos = np.abs(M[0, 0])
    sin = np.abs(M[0, 1])

    # compute the new bounding dimensions of the image
    nW = int((h * sin) + (w * cos))
    nH = int((h * cos) + (w * sin))

    # adjust the rotation matrix to take into account translation
    M[0, 2] += (nW / 2) - cX
    M[1, 2] += (nH / 2) - cY

    # perform the actual rotation and return the image
    return cv2.warpAffine(image, M, (nW, nH))


def cubic_find_maximum(image, precision=0.05):
    """
    Using CUBIC resize algorithm to fit a curved surface, find the maximum value and location.

    Args:
        image (np.ndarray):
        precision (int, float):

    Returns:
        float: Maximum value on curved surface
        np.ndarray[float, float]: Location of maximum value
    """
    image = cv2.resize(image, None, fx=1 / precision, fy=1 / precision, interpolation=cv2.INTER_CUBIC)
    _, sim, _, loca = cv2.minMaxLoc(image)
    loca = np.array(loca, dtype=float) * precision
    return sim, loca


def image_center_pad(image, size, value=(0, 0, 0)):
    """
    Create a new image with given `size`, placing given `image` in the middle.

    Args:
        image (np.ndarray):
        size: (width, height)
        value: Color of the background.

    Returns:
        np.ndarray:
    """
    diff = np.array(size) - image_size(image)
    left, top = int(diff[0] / 2), int(diff[1] / 2)
    right, bottom = diff[0] - left, diff[1] - top
    image = cv2.copyMakeBorder(image, top, bottom, left, right, borderType=cv2.BORDER_CONSTANT, value=value)
    return image


def image_center_crop(image, size):
    """
    Center crop the given image.

    Args:
        image (np.ndarray):
        size: Output image shape, (width, height)

    Returns:
        np.ndarray:
    """
    diff = image_size(image) - np.array(size)
    left, top = int(diff[0] / 2), int(diff[1] / 2)
    right, bottom = diff[0] - left, diff[1] - top
    image = image[top:-bottom, left:-right]
    return image


def area2corner(area):
    """
    Args:
        area: (x1, y1, x2, y2)

    Returns:
        np.ndarray: [upper-left, upper-right, bottom-left, bottom-right]
    """
    return np.array([[area[0], area[1]], [area[2], area[1]], [area[0], area[3]], [area[2], area[3]]])


def convolve(arr, kernel=3):
    """
    Args:
        arr (np.ndarray): Shape (N,)
        kernel (int):

    Returns:
        np.ndarray:
    """
    return sum(np.roll(arr, i) * (kernel - abs(i)) // kernel for i in range(-kernel + 1, kernel))


def convolve_plain(arr, kernel=3):
    """
    Args:
        arr (np.ndarray): Shape (N,)
        kernel (int):

    Returns:
        np.ndarray:
    """
    return sum(np.roll(arr, i) for i in range(-kernel + 1, kernel))


def peak_confidence(arr, **kwargs):
    """
    Evaluate the prominence of the highest peak

    Args:
        arr (np.ndarray): Shape (N,)
        **kwargs: Additional kwargs for signal.find_peaks

    Returns:
        float: 0-1
    """
    para = {
        'height': 0,
        'prominence': 10,
    }
    para.update(kwargs)
    length = len(arr)
    peaks, properties = signal.find_peaks(np.concatenate((arr, arr, arr)), **para)
    peaks = [h for p, h in zip(peaks, properties['peak_heights']) if length <= p < length * 2]
    peaks = sorted(peaks, reverse=True)

    count = len(peaks)
    if count > 1:
        highest, second = peaks[0], peaks[1]
    elif count == 1:
        highest, second = 1, 0
    else:
        highest, second = 1, 0
    confidence = (highest - second) / highest
    return confidence

```

`tasks/map/resource/const.py`:

```py
import os

import numpy as np
from PIL import Image

from module.base.utils import load_image


class ResourceConst:
    SRCMAP = ''

    # Hard-coded coordinates under 1280x720
    MINIMAP_CENTER = (39 + 78, 48 + 78)
    MINIMAP_RADIUS = 78
    POSITION_RADIUS = 75

    # Downscale GIMAP and minimap for faster run
    POSITION_SEARCH_SCALE = 0.5
    # Search the area that is 1.666x minimap, about 100px in wild on GIMAP
    POSITION_SEARCH_RADIUS = 1.666
    # Can't figure out why but the result_of_0.5_lookup_scale + 0.5 ~= result_of_1.0_lookup_scale
    POSITION_MOVE_PATCH = (0.5, 0.5)
    # Position starting from the upper-left corner of the template image
    # but search an area larger than map
    # MINIMAP_RADIUS * POSITION_SEARCH_RADIUS * <max_scale>
    # POSITION_FEATURE_PAD = int(MINIMAP_RADIUS * POSITION_SEARCH_RADIUS * 1.5)
    POSITION_FEATURE_PAD = 155
    # Must be odd, equals int(9 * POSITION_SEARCH_SCALE) + 1
    POSITION_AREA_DILATE = 5

    # Radius to search direction arrow, about 12px
    DIRECTION_RADIUS = 12
    # Downscale direction arrows for faster run
    DIRECTION_SEARCH_SCALE = 0.5
    # Scale to 1280x720
    DIRECTION_ROTATION_SCALE = 1.0
    # Color of the direction arrow
    DIRECTION_ARROW_COLOR = (2, 199, 255)

    # Downscale GIMAP to run faster
    BIGMAP_SEARCH_SCALE = 0.25
    # Magic number that resize a 1280x720 screenshot to GIMAP_luma_05x_ps
    BIGMAP_POSITION_SCALE = 0.6137
    BIGMAP_POSITION_SCALE_ENKANOMIYA = 0.6137 * 0.7641
    # Pad 600px, cause camera sight in game is larger than GIMAP
    BIGMAP_BORDER_PAD = int(600 * BIGMAP_SEARCH_SCALE)

    # Swipe 400px is about 85~90 degree
    # <rotation_diff> * ROTATION_SWIPE_MULTIPLY = <distance_to_swipe>
    ROTATION_SWIPE_MULTIPLY = 400 / 85
    # Max distance in one swipe, limited in -600px~600px
    ROTATION_SWIPE_MAX_DISTANCE = 600

    def __init__(self):
        # Usually to be 0.4~0.5
        self.position_similarity = 0.
        # Usually > 0.05
        self.position_similarity_local = 0.
        # Current position on GIMAP with an error of about 0.1 pixel
        self.position: tuple[float, float] = (0, 0)
        # Minimap scale factor, 1.0~1.25
        self.position_scale = 1.0

        # Usually > 0.3
        # Warnings will be logged if similarity <= 0.8
        self.direction_similarity = 0.
        # Current character direction with an error of about 0.1 degree
        self.direction: float = 0.

        # Usually > 0.9
        self.rotation_confidence = 0.
        # Current cameta rotation with an error of about 1 degree
        self.rotation: int = 0

        # Usually to be 0.4~0.5
        self.bigmap_similarity = 0.
        # Usually > 0.05
        self.bigmap_similarity_local = 0.
        # Current position on GIMAP with an error of about 0.1 pixel
        self.bigmap: tuple[float, float] = (0, 0)

    def filepath(self, path: str) -> str:
        return os.path.abspath(os.path.join(self.SRCMAP, path))

    def load_image(self, file):
        if os.path.isabs(file):
            return load_image(file)
        else:
            return load_image(self.filepath(file))

    def save_image(self, image, file):
        file = self.filepath(file)
        print(f'Save image: {file}')
        Image.fromarray(image).save(file)

    def position_diff(self, target):
        """
        Args:
            target: Target position (x, y)

        Returns:
            float: Distance to current position
        """
        return np.linalg.norm(np.subtract(target, self.position))

    def is_position_near(self, target, threshold=5):
        return self.position_diff(target) <= threshold

    def position2direction(self, target):
        """
        Args:
            target: Target position (x, y)

        Returns:
            float: Direction from current position to target position (0~360)
        """
        diff = np.subtract(target, self.position)
        theta = np.rad2deg(np.arccos(-diff[1] / np.linalg.norm(diff)))
        if diff[0] < 0:
            theta = 360 - theta
        return theta

    def direction_diff(self, target):
        """
        Args:
            target: Target degree (0~360)

        Returns:
            float: Diff to current direction (-180~180)
        """
        return diff_to_180_180(self.direction - target)

    def is_direction_near(self, target, threshold=15):
        return abs(self.direction_diff(target)) <= threshold

    def rotation_diff(self, target):
        """
        Args:
            target: Target degree (0~360)

        Returns:
            float: Diff to current rotation (-180~180)
        """
        return diff_to_180_180(self.rotation - target)

    def is_rotation_near(self, target, threshold=10):
        return abs(self.rotation_diff(target)) <= threshold


def diff_to_180_180(diff):
    """
    Args:
        diff: Degree diff

    Returns:
        float: Degree diff (-180~180)
    """
    diff = diff % 360
    if diff > 180:
        diff -= 360
    return round(diff, 3)


def diff_to_0_360(diff):
    """
    Args:
        diff: Degree diff

    Returns:
        float: Degree diff (0~360)
    """
    return round(diff % 360, 3)

```

`tasks/map/resource/generate.py`:

```py
import os
from functools import cached_property

import cv2
import numpy as np

from module.base.utils import (
    color_similarity_2d,
    crop,
    get_bbox,
    get_bbox_reversed,
    image_paste,
    image_size
)
from module.config.utils import iter_folder
from tasks.map.minimap.utils import map_image_preprocess, rotate_bound
from tasks.map.resource.const import ResourceConst


def register_output(output):
    def register_wrapper(func):
        def wrapper(self, *args, **kwargs):
            image = func(self, *args, **kwargs)
            self.DICT_GENERATE[output] = image
            return image

        return wrapper

    return register_wrapper


class ResourceGenerator(ResourceConst):
    DICT_GENERATE = {}

    """
    Input images
    """

    @cached_property
    @register_output('./srcmap/direction/Arrow.png')
    def Arrow(self):
        return self.load_image('./resources/direction/Arrow.png')

    """
    Output images
    """

    @cached_property
    def _ArrowRorateDict(self):
        """
        Returns:

        """
        image = self.Arrow
        arrows = {}
        for degree in range(0, 360):
            rotated = rotate_bound(image, degree)
            rotated = crop(rotated, area=get_bbox(rotated, threshold=15))
            # rotated = cv2.resize(rotated, None, fx=self.ROTATE, fy=self.ROTATE, interpolation=cv2.INTER_NEAREST)
            rotated = color_similarity_2d(rotated, color=self.DIRECTION_ARROW_COLOR)
            arrows[degree] = rotated
        return arrows

    @cached_property
    @register_output('./srcmap/direction/ArrowRotateMap.png')
    def ArrowRotateMap(self):
        radius = self.DIRECTION_RADIUS
        image = np.zeros((10 * radius * 2, 9 * radius * 2), dtype=np.uint8)
        for degree in range(0, 360, 5):
            y, x = divmod(degree / 5, 8)
            rotated = self._ArrowRorateDict.get(degree)
            point = (radius + int(x) * radius * 2, radius + int(y) * radius * 2)
            # print(degree, y, x, point[0],point[0] + radius, point[1],point[1] + rotated.shape[1])
            image_paste(rotated, image, origin=point)
        image = cv2.resize(image, None,
                           fx=self.DIRECTION_SEARCH_SCALE, fy=self.DIRECTION_SEARCH_SCALE,
                           interpolation=cv2.INTER_NEAREST)
        return image

    @cached_property
    @register_output('./srcmap/direction/ArrowRotateMapAll.png')
    def ArrowRotateMapAll(self):
        radius = self.DIRECTION_RADIUS
        image = np.zeros((136 * radius * 2, 9 * radius * 2), dtype=np.uint8)
        for degree in range(360 * 3):
            y, x = divmod(degree, 8)
            rotated = self._ArrowRorateDict.get(degree % 360)
            point = (radius + int(x) * radius * 2, radius + int(y) * radius * 2)
            # print(degree, y, x, point)
            image_paste(rotated, image, origin=point)
        image = cv2.resize(image, None,
                           fx=self.DIRECTION_SEARCH_SCALE, fy=self.DIRECTION_SEARCH_SCALE,
                           interpolation=cv2.INTER_NEAREST)
        return image

    @cached_property
    def _map_background(self):
        image = self.load_image('./resources/position/background.png')
        height, width, channel = image.shape
        grid = (10, 10)

        background = np.zeros((height * grid[0], width * grid[1], channel), dtype=np.uint8)
        for y in range(grid[0]):
            for x in range(grid[1]):
                image_paste(image, background, origin=(width * x, height * y))
        background = background.copy()
        return background

    def _map_image_standardize(self, image, padding=0):
        """
        Remove existing paddings
        Map stroke color is about 127~134, background is 199~208
        """
        image = crop(image, get_bbox_reversed(image, threshold=160))
        if padding > 0:
            size = np.array((padding, padding)) * 2 + image_size(image)
            background = crop(self._map_background, area=(0, 0, *size))
            image_paste(image, background, origin=(padding, padding))
            return background
        else:
            return image

    def _map_image_extract_feat(self, image):
        """
        Extract a feature image for positioning.
        """
        image = self._map_image_standardize(image, padding=ResourceConst.POSITION_FEATURE_PAD)
        image = map_image_preprocess(image)
        scale = self.POSITION_SEARCH_SCALE
        image = cv2.resize(image, None, fx=scale, fy=scale, interpolation=cv2.INTER_AREA)
        return image

    def _map_image_extract_area(self, image):
        """
        Extract accessible area on map.
        *.area.png has `area` in red, extract into a binary image.
        """
        # To the same size as feature map
        image = self._map_image_standardize(image, padding=ResourceConst.POSITION_FEATURE_PAD)
        image = color_similarity_2d(image, color=(255, 0, 0))
        scale = self.POSITION_SEARCH_SCALE
        image = cv2.resize(image, None, fx=scale, fy=scale, interpolation=cv2.INTER_NEAREST)
        _, image = cv2.threshold(image, 180, 255, cv2.THRESH_BINARY)
        # Make the area a little bit larger
        kernel = self.POSITION_AREA_DILATE
        kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (kernel, kernel))
        image = cv2.dilate(image, kernel)

        # Black area on white background
        # image = cv2.subtract(255, image)
        return image

    @cached_property
    def GernerateMapFloors(self):
        for world in iter_folder(self.filepath('./resources/position'), is_dir=True):
            world_name = os.path.basename(world)
            for floor in iter_folder(world, ext='.png'):
                print(f'Read image: {floor}')
                image = self.load_image(floor)
                floor_name = os.path.basename(floor)[:-4]
                if floor_name.endswith('.area'):
                    # ./srcmap/position/{world_name}/xxx.area.png
                    output = f'./srcmap/position/{world_name}/{floor_name}.png'
                    register_output(output)(ResourceGenerator._map_image_extract_area)(self, image)
                else:
                    output = f'./srcmap/position/{world_name}/{floor_name}.png'
                    register_output(output)(ResourceGenerator._map_image_standardize)(self, image)
                    output = f'./srcmap/position/{world_name}/{floor_name}.feat.png'
                    register_output(output)(ResourceGenerator._map_image_extract_feat)(self, image)

        # Floor images are cached already, no need to return a real value
        return True

    def generate_output(self):
        os.makedirs(self.filepath('./srcmap'), exist_ok=True)
        # Calculate all resources
        for method in self.__dir__():
            if not method.startswith('__') and not method.islower():
                _ = getattr(self, method)
        # Create output folder
        folders = set([os.path.dirname(file) for file in self.DICT_GENERATE.keys()])
        for output in folders:
            output = self.filepath(output)
            os.makedirs(output, exist_ok=True)
        # Save image
        for output, image in self.DICT_GENERATE.items():
            self.save_image(image, file=output)


if __name__ == '__main__':
    os.chdir(os.path.join(os.path.dirname(__file__), '../../../'))
    ResourceConst.SRCMAP = '../srcmap'
    ResourceGenerator().generate_output()

```

`tasks/map/resource/resource.py`:

```py
import os
from functools import cached_property

import cv2
import numpy as np

from module.base.decorator import del_cached_property
from module.base.utils import area_offset, crop, image_size
from module.exception import ScriptError
from module.logger import logger
from tasks.map.minimap.utils import create_circular_mask
from tasks.map.resource.const import ResourceConst
from tasks.map.keywords import KEYWORDS_MAP_PLANE, MapPlane


class MapResource(ResourceConst):
    def __init__(self):
        super().__init__()

        if MapResource.SRCMAP:
            self.SRCMAP = os.path.abspath(MapResource.SRCMAP)
            logger.warning(f'MapResource.SRMAP is set to "{self.SRCMAP}", '
                           f'this should only be used in DEV environment.')
        else:
            try:
                import srcmap
                self.SRCMAP = srcmap.srcmap()
            except ImportError:
                logger.critical('Dependency "srmap" is not installed')
                raise ScriptError('Dependency "srmap" is not installed')

        # Jarilo_AdministrativeDistrict
        self.plane: MapPlane = KEYWORDS_MAP_PLANE.Herta_ParlorCar
        # Floor name in game (B1, F1, F2, ...)
        self.floor: str = 'F1'
        # Key: (width, height), mask shape
        # Value: np.ndarray, mask image
        self._dict_circle_mask = {}

    @cached_property
    def ArrowRotateMap(self):
        return self.load_image('./direction/ArrowRotateMap.png')

    @cached_property
    def ArrowRotateMapAll(self):
        return self.load_image('./direction/ArrowRotateMapAll.png')

    def set_plane(self, plane, floor='F1'):
        """
        Args:
            plane (MapPlane, str): Such as Jarilo_AdministrativeDistrict
            floor (str):
        """
        self.plane = MapPlane.find(plane)
        self.floor = self.plane.convert_to_floor_name(floor)

        del_cached_property(self, 'assets_file_basename')
        del_cached_property(self, 'assets_floor')
        del_cached_property(self, 'assets_floor_feat')
        del_cached_property(self, 'assets_floor_outside_mask')

    @cached_property
    def assets_file_basename(self):
        if self.plane.has_multiple_floors:
            return f'./position/{self.plane.world}/{self.plane.name}_{self.floor}'
        else:
            return f'./position/{self.plane.world}/{self.plane.name}'

    @cached_property
    def assets_floor(self):
        return self.load_image(f'{self.assets_file_basename}.png')

    @cached_property
    def assets_floor_feat(self):
        return self.load_image(f'{self.assets_file_basename}.feat.png')

    @cached_property
    def assets_floor_outside_mask(self):
        image = self.load_image(f'{self.assets_file_basename}.area.png')
        return image == 0

    def get_minimap(self, image, radius):
        """
        Crop the minimap area on image.
        """
        area = area_offset((-radius, -radius, radius, radius), offset=self.MINIMAP_CENTER)
        image = crop(image, area)
        return image

    def get_circle_mask(self, image):
        """
        Create a circle mask with the shape of given image,
        Masks will be cached once created.
        """
        w, h = image_size(image)
        try:
            return self._dict_circle_mask[(w, h)]
        except KeyError:
            mask = create_circular_mask(w=w, h=h)
            mask = (mask * 255).astype(np.uint8)
            self._dict_circle_mask[(w, h)] = mask
            return mask

    @cached_property
    def RotationRemapData(self):
        d = self.MINIMAP_RADIUS * 2
        mx = np.zeros((d, d), dtype=np.float32)
        my = np.zeros((d, d), dtype=np.float32)
        for i in range(d):
            for j in range(d):
                mx[i, j] = d / 2 + i / 2 * np.cos(2 * np.pi * j / d)
                my[i, j] = d / 2 + i / 2 * np.sin(2 * np.pi * j / d)
        return mx, my

    @cached_property
    def _named_window(self):
        return cv2.namedWindow('MinimapTracking')

    def show_minimap(self):
        image = cv2.cvtColor(self.assets_floor, cv2.COLOR_RGB2BGR)

        position = np.array(self.position).astype(int)

        def vector(degree):
            degree = np.deg2rad(degree - 90)
            point = np.array(position) + np.array((np.cos(degree), np.sin(degree))) * 30
            return point.astype(int)

        image = cv2.circle(image, position, radius=5, color=(0, 0, 255), thickness=-1)
        image = cv2.line(image, position, vector(self.direction), color=(0, 255, 0), thickness=2)
        image = cv2.line(image, position, vector(self.rotation), color=(255, 0, 0), thickness=2)
        cv2.imshow('MinimapTracking', image)
        cv2.waitKey(1)

```

`tasks/rogue/assets/assets_rogue_blessing.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

BLESSING_ENFORCE = ButtonWrapper(
    name='BLESSING_ENFORCE',
    share=Button(
        file='./assets/share/rogue/blessing/BLESSING_ENFORCE.png',
        area=(500, 141, 608, 556),
        search=(480, 121, 628, 576),
        color=(123, 100, 78),
        button=(500, 141, 608, 556),
    ),
)
BLESSING_RESET = ButtonWrapper(
    name='BLESSING_RESET',
    share=Button(
        file='./assets/share/rogue/blessing/BLESSING_RESET.png',
        area=(652, 629, 889, 677),
        search=(632, 609, 909, 697),
        color=(204, 203, 204),
        button=(652, 629, 889, 677),
    ),
)
BLESSING_STABLE_FLAG = ButtonWrapper(
    name='BLESSING_STABLE_FLAG',
    share=Button(
        file='./assets/share/rogue/blessing/BLESSING_STABLE_FLAG.png',
        area=(846, 520, 896, 542),
        search=(826, 500, 916, 562),
        color=(250, 250, 250),
        button=(846, 520, 896, 542),
    ),
)
BOTTOM_WHITE_BAR = ButtonWrapper(
    name='BOTTOM_WHITE_BAR',
    share=Button(
        file='./assets/share/rogue/blessing/BOTTOM_WHITE_BAR.png',
        area=(166, 520, 1114, 542),
        search=(146, 500, 1134, 562),
        color=(210, 211, 211),
        button=(166, 520, 1114, 542),
    ),
)
OCR_RESET_COST = ButtonWrapper(
    name='OCR_RESET_COST',
    share=Button(
        file='./assets/share/rogue/blessing/OCR_RESET_COST.png',
        area=(689, 642, 715, 665),
        search=(669, 622, 735, 685),
        color=(39, 23, 25),
        button=(689, 642, 715, 665),
    ),
)
OCR_RESET_COUNT = ButtonWrapper(
    name='OCR_RESET_COUNT',
    share=Button(
        file='./assets/share/rogue/blessing/OCR_RESET_COUNT.png',
        area=(655, 593, 873, 623),
        search=(635, 573, 893, 643),
        color=(23, 24, 26),
        button=(655, 593, 873, 623),
    ),
)
OCR_ROGUE_BUFF = ButtonWrapper(
    name='OCR_ROGUE_BUFF',
    share=Button(
        file='./assets/share/rogue/blessing/OCR_ROGUE_BUFF.png',
        area=(155, 140, 1123, 348),
        search=(135, 120, 1143, 368),
        color=(80, 87, 106),
        button=(155, 140, 1123, 348),
    ),
)

```

`tasks/rogue/assets/assets_rogue_bonus.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

BONUS_BOTTOM_WHITE_BAR = ButtonWrapper(
    name='BONUS_BOTTOM_WHITE_BAR',
    share=Button(
        file='./assets/share/rogue/bonus/BONUS_BOTTOM_WHITE_BAR.png',
        area=(731, 568, 774, 590),
        search=(711, 548, 794, 610),
        color=(250, 250, 250),
        button=(731, 568, 774, 590),
    ),
)
BONUS_CONFIRM = ButtonWrapper(
    name='BONUS_CONFIRM',
    share=Button(
        file='./assets/share/rogue/bonus/BONUS_CONFIRM.png',
        area=(504, 629, 620, 677),
        search=(484, 609, 640, 697),
        color=(222, 224, 224),
        button=(504, 629, 620, 677),
    ),
)

```

`tasks/rogue/assets/assets_rogue_curio.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

CURIO_ENFORCE = ButtonWrapper(
    name='CURIO_ENFORCE',
    share=Button(
        file='./assets/share/rogue/curio/CURIO_ENFORCE.png',
        area=(465, 114, 815, 545),
        search=(445, 94, 835, 565),
        color=(80, 66, 61),
        button=(465, 114, 815, 545),
    ),
)
OCR_ROGUE_CURIO = ButtonWrapper(
    name='OCR_ROGUE_CURIO',
    share=Button(
        file='./assets/share/rogue/curio/OCR_ROGUE_CURIO.png',
        area=(87, 128, 1203, 187),
        search=(67, 108, 1223, 207),
        color=(18, 19, 20),
        button=(87, 128, 1203, 187),
    ),
)

```

`tasks/rogue/assets/assets_rogue_ui.py`:

```py
from module.base.button import Button, ButtonWrapper

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.button_extract ```

BLESSING_CONFIRM = ButtonWrapper(
    name='BLESSING_CONFIRM',
    share=Button(
        file='./assets/share/rogue/ui/BLESSING_CONFIRM.png',
        area=(960, 629, 1233, 677),
        search=(940, 609, 1253, 697),
        color=(217, 218, 218),
        button=(960, 629, 1233, 677),
    ),
)
CHECK_BLESSING = ButtonWrapper(
    name='CHECK_BLESSING',
    share=Button(
        file='./assets/share/rogue/ui/CHECK_BLESSING.png',
        area=(946, 17, 986, 57),
        search=(926, 0, 1006, 77),
        color=(61, 58, 52),
        button=(946, 17, 986, 57),
    ),
)
COSMIC_FRAGMENT = ButtonWrapper(
    name='COSMIC_FRAGMENT',
    share=Button(
        file='./assets/share/rogue/ui/COSMIC_FRAGMENT.png',
        area=(1146, 19, 1181, 55),
        search=(1126, 0, 1201, 75),
        color=(86, 68, 62),
        button=(1146, 19, 1181, 55),
    ),
)
FLAG_UNRECORD = ButtonWrapper(
    name='FLAG_UNRECORD',
    share=Button(
        file='./assets/share/rogue/ui/FLAG_UNRECORD.png',
        area=(746, 149, 778, 181),
        search=(726, 129, 798, 201),
        color=(133, 130, 161),
        button=(746, 149, 778, 181),
    ),
)
OBTAIN_ITEM_POPUP = ButtonWrapper(
    name='OBTAIN_ITEM_POPUP',
    share=Button(
        file='./assets/share/rogue/ui/OBTAIN_ITEM_POPUP.png',
        area=(180, 573, 432, 720),
        search=(160, 553, 452, 720),
        color=(131, 109, 73),
        button=(180, 573, 432, 720),
    ),
)
OCR_COSMIC_FRAGMENT = ButtonWrapper(
    name='OCR_COSMIC_FRAGMENT',
    share=Button(
        file='./assets/share/rogue/ui/OCR_COSMIC_FRAGMENT.png',
        area=(1183, 27, 1256, 46),
        search=(1163, 7, 1276, 66),
        color=(30, 32, 32),
        button=(1183, 27, 1256, 46),
    ),
)
PAGE_CHOOSE_BONUS = ButtonWrapper(
    name='PAGE_CHOOSE_BONUS',
    share=Button(
        file='./assets/share/rogue/ui/PAGE_CHOOSE_BONUS.png',
        area=(503, 180, 555, 230),
        search=(483, 160, 575, 250),
        color=(33, 29, 54),
        button=(503, 180, 555, 230),
    ),
)
PAGE_CHOOSE_BUFF = ButtonWrapper(
    name='PAGE_CHOOSE_BUFF',
    share=Button(
        file='./assets/share/rogue/ui/PAGE_CHOOSE_BUFF.png',
        area=(1020, 78, 1160, 96),
        search=(1000, 58, 1180, 116),
        color=(38, 39, 41),
        button=(1020, 78, 1160, 96),
    ),
)
PAGE_CHOOSE_CURIO = ButtonWrapper(
    name='PAGE_CHOOSE_CURIO',
    share=Button(
        file='./assets/share/rogue/ui/PAGE_CHOOSE_CURIO.png',
        area=(988, 17, 1028, 57),
        search=(968, 0, 1048, 77),
        color=(40, 39, 34),
        button=(988, 17, 1028, 57),
    ),
)
PAGE_EVENT = ButtonWrapper(
    name='PAGE_EVENT',
    share=Button(
        file='./assets/share/rogue/ui/PAGE_EVENT.png',
        area=(983, 485, 1007, 509),
        search=(963, 465, 1027, 529),
        color=(51, 48, 42),
        button=(983, 485, 1007, 509),
    ),
)

```

`tasks/rogue/bleesing/blessing.py`:

```py
import re

import numpy as np

from module.base.filter import MultiLangFilter
from module.base.timer import Timer
from module.base.utils import get_color
from module.logger import logger
from module.ocr.ocr import Ocr, OcrResultButton, DigitCounter, Digit
from module.ocr.utils import split_and_pair_buttons
from tasks.rogue.assets.assets_rogue_blessing import *
from tasks.rogue.assets.assets_rogue_ui import BLESSING_CONFIRM
from tasks.rogue.keywords import *
from tasks.rogue.bleesing.preset import *
from tasks.rogue.bleesing.selector import RogueSelector
from tasks.rogue.bleesing.utils import get_regex_from_keyword_name, parse_name, is_card_selected

# normal blessing filter
# path name
pattern = ""
BLESSING_FILTER_ATTR = tuple()
PATH_ATTR_NAME = 'path_name'
path_regex = get_regex_from_keyword_name(RoguePath, PATH_ATTR_NAME)
pattern += path_regex
# remove 'the' in path 'the hunt'
pattern = pattern.lower().replace('the', '')
BLESSING_FILTER_ATTR += (PATH_ATTR_NAME,)

# rarity
pattern += "([123])?-?"
BLESSING_FILTER_ATTR += ("rarity",)

# blessing name
BLESSING_ATTR_NAME = 'blessing_name'
blessing_regex = get_regex_from_keyword_name(RogueBlessing, BLESSING_ATTR_NAME)
pattern += blessing_regex
BLESSING_FILTER_ATTR += (BLESSING_ATTR_NAME,)

# enhanced
ENHANCEMENT_ATTR_NAME = "enhancement"
enhancement_regex = get_regex_from_keyword_name(RogueEnhancement, "enhancement_keyword")
pattern += enhancement_regex
BLESSING_FILTER_ATTR += (ENHANCEMENT_ATTR_NAME,)

FILETER_REGEX = re.compile(pattern)
BLESSING_FILTER_PRESET = ("reset", "random", "unrecorded")
BLESSING_FILTER = MultiLangFilter(FILETER_REGEX, BLESSING_FILTER_ATTR, BLESSING_FILTER_PRESET)

# resonance filter
RESONANCE_ATTR_NAME = 'resonance_name'
pattern = get_regex_from_keyword_name(RogueResonance, RESONANCE_ATTR_NAME)

FILETER_REGEX = re.compile(pattern)
RESONANCE_FILTER_PRESET = ("random", "unrecorded")
RESONANCE_FILTER = MultiLangFilter(FILETER_REGEX, (RESONANCE_ATTR_NAME,), RESONANCE_FILTER_PRESET)


class RogueBuffOcr(Ocr):
    merge_thres_x = 40
    merge_thres_y = 20

    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'cn':
            replace_pattern_dict = {
                "蓬失": "蓬矢",
                "柘弓危失": "柘弓危矢",
                "飞虹珠?凿?齿": "飞虹诛凿齿",
                "天[培梧]步危": "天棓步危",
                "云[摘销锅]?逐步离": "云镝逐步离",
                "制桑": "制穹桑",
                "乌号基": "乌号綦",
                "追摩物": "追孽物",
                "特月": "狩月",
                "彤弓素.*": "彤弓素矰",
                "白决射御": "白矢决射御",
                "苦表": "苦衷",
                "[沦沧]肌髓": "沦浃肌髓",
                "进发": "迸发",
                "永缩体": "永坍缩体",
                "完美体验：绒默": "完美体验：缄默",
                "灭回归不等式": "湮灭回归不等式",
                r".*灾$": "禳灾",
                "虚安供品": "虚妄供品",
                "原初的苦$": "原初的苦衷",
                "厌离邪苦": "厌离邪秽苦",
                r".*繁.*": "葳蕤繁祉，延彼遐龄",
            }
            for pat, replace in replace_pattern_dict.items():
                result = re.sub(pat, replace, result)
        return result


class RogueBlessingSelector(RogueSelector):
    """
    Usage:
        self = RogueBlessingSelector('alas')
        self.device.screenshot()
        self.recognize_and_select()
    """

    def get_blessing_count(self) -> int:
        """
        Returns: The number of blessing
        """
        if not self.main.image_color_count(BOTTOM_WHITE_BAR.area, color=(255, 255, 255), count=5000):
            return 0
        color = get_color(self.main.device.image, BOTTOM_WHITE_BAR.area)
        mean = np.mean(color)
        return int(mean // 60)  # the magic number that maps blessing num with mean_color

    def recognition(self):
        def not_enhancement_keyword(keyword):
            return keyword != KEYWORDS_ROGUE_ENHANCEMENT.Already_Enhanced

        self.ocr_results = []
        self._wait_until_blessing_loaded()
        ocr = RogueBuffOcr(OCR_ROGUE_BUFF)
        results = ocr.matched_ocr(self.main.device.image,
                                  [RogueBlessing, RogueResonance, RogueEnhancement])

        enhanced_blessing = [result for result, _ in
                             split_and_pair_buttons(results, split_func=not_enhancement_keyword,
                                                    relative_area=(-300, -720, 0, 0))]
        results = [result for result in results if not_enhancement_keyword(result)]
        blessing_count = self.get_blessing_count()
        if blessing_count != len(results):
            logger.warning(f"The OCR result does not match the blessing count. "
                           f"Expect {blessing_count}, but recognized {len(results)} only.")
        for result in results:
            if result in enhanced_blessing:
                result.matched_keyword.enhancement = KEYWORDS_ROGUE_ENHANCEMENT.Already_Enhanced.enhancement_keyword
        self.ocr_results = results
        return results

    def ui_select(self, target: OcrResultButton | None, skip_first_screenshot=True):
        """
        Select buff once. Multiple calls needed if there's more than one time to choose
        It might occur that all listed blessings are not recognized
        So this method provides a hard code way to choose one, which fit in case when blessing num is 1-3
        """

        def is_select_blessing_complete():
            """
                Case 1: back to main page
                Case 2: choose curio
                Case 3: another choose blessings, but no blessing is selected when the new selection page loaded
                Case 4: event ui
            """
            if self.main.is_in_main():
                logger.info("Main page checked")
                return True
            if self.main.is_page_choose_curio():
                logger.info("Choose curio page checked")
                return True
            if self.main.is_page_choose_blessing() and not is_card_selected(self.main, target, BLESSING_CONFIRM):
                logger.info("A new choose blessing page checked")
                return True
            if self.main.is_page_event():
                logger.info("Event page checked")
                return True
            return False

        interval = Timer(1)
        enforce = False

        if not target:
            enforce = True

        # start -> selected
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if is_card_selected(self.main, target, confirm_button=BLESSING_CONFIRM):
                if enforce:
                    logger.info("Buff selected (enforce)")
                else:
                    logger.info(f"Buff {target} selected")
                break
            if interval.reached():
                if enforce:
                    self.main.device.click(BLESSING_ENFORCE)
                else:
                    self.main.device.click(target)
                interval.reset()

        skip_first_screenshot = True
        # Avoid double-clicking
        interval = Timer(3, count=6)
        # selected -> confirm
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if is_select_blessing_complete():
                logger.info("Select blessing complete")
                break
            if interval.reached():
                self.main.device.click(BLESSING_CONFIRM)
                interval.reset()

    def _get_reset_count(self):
        current, _, _ = DigitCounter(OCR_RESET_COUNT).ocr_single_line(self.main.device.image)
        return current

    def _wait_until_blessing_loaded(self, timer=Timer(0.3, count=1), timeout=Timer(5, count=10)):
        timer.reset()
        timeout.reset()
        previous_count = self.get_blessing_count()
        while 1:
            self.main.device.screenshot()
            blessing_count = self.get_blessing_count()

            if timeout.reached():
                logger.warning('Wait blessing page loaded timeout')
                break

            if previous_count and previous_count == blessing_count:
                if timer.reached():
                    logger.info('Blessing page stabled')
                    break
            else:
                previous_count = blessing_count
                timer.reset()

    def reset_blessing_list(self, skip_first_screenshot=True):
        if not self.main.is_page_choose_blessing():
            return False

        reset_count = self._get_reset_count()
        if not reset_count:
            logger.info("Does not have enough reset count")
            return False

        reset_cost = Digit(OCR_RESET_COST).ocr_single_line(self.main.device.image)
        if reset_cost > self.main.cosmic_fragment:
            logger.info("Does not have enough cosmic fragment")
            return False

        interval = Timer(1)
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            new_count = self._get_reset_count()

            if reset_count - new_count == 1:
                logger.info("Reset once")
                break
            if interval.reached():
                self.main.device.click(BLESSING_RESET)
                interval.reset()
        return True

    def load_filter(self):
        try:
            keyword = self.ocr_results[0].matched_keyword
        except IndexError:
            return
        if not isinstance(keyword, (RogueBlessing, RogueResonance)):
            return
        filter_configs = {
            RogueBlessing: {
                "filter_": BLESSING_FILTER,
                "preset_config": self.main.config.RogueBlessing_PresetBlessingFilter,
                "strategy_config": self.main.config.RogueBlessing_BlessingSelectionStrategy,
                "preset_values": {
                    'preset-1': BLESSING_PRESET_1,
                    'custom': self.main.config.RogueBlessing_CustomBlessingFilter
                },
            },
            RogueResonance: {
                "filter_": RESONANCE_FILTER,
                "preset_config": self.main.config.RoguePath_PresetResonanceFilter,
                "strategy_config": self.main.config.RoguePath_ResonanceSelectionStrategy,
                "preset_values": {
                    'preset-1': RESONANCE_PRESET_1,
                    'custom': self.main.config.RoguePath_PresetResonanceFilter,
                },
            }
        }
        # preset
        config = filter_configs[type(keyword)]
        filter_ = config['filter_']
        preset_config = config['preset_config']
        preset_values = config['preset_values']
        string = preset_values[preset_config]
        string = parse_name(string)

        # strategy
        strategy_config = config['strategy_config']
        if strategy_config == 'unrecorded-first':
            string = "unrecorded > " + string
        if strategy_config == 'before-random':
            string = string.replace('random', 'unrecorded > random')

        filter_.load(string)
        self.filter_ = filter_

    def try_select(self, option: OcrResultButton | str):
        if isinstance(option, str):
            if option.lower() == 'reset':
                if self.reset_blessing_list():
                    self.recognize_and_select()
                    return True
            if option.lower() == 'random':
                choose = np.random.choice(self.ocr_results)
                self.ui_select(choose)
                return True
            if option.lower() == 'unrecorded':
                for result in self.ocr_results:
                    if self.main.is_unrecorded(result, (0, -720, 300, 0)):
                        self.ui_select(result)
                        return True
                return False

        if isinstance(option, OcrResultButton):
            self.ui_select(option)
            return True
        return False

```

`tasks/rogue/bleesing/bonus.py`:

```py
import numpy as np

from module.base.timer import Timer
from module.logger import logger
from module.ocr.ocr import OcrResultButton
from tasks.rogue.assets.assets_rogue_blessing import OCR_ROGUE_BUFF
from tasks.rogue.assets.assets_rogue_bonus import BONUS_BOTTOM_WHITE_BAR, BONUS_CONFIRM
from tasks.rogue.keywords import RogueBonus
from tasks.rogue.bleesing.selector import RogueSelector
from tasks.rogue.bleesing.ui import RogueBonusOcr
from tasks.rogue.bleesing.utils import is_card_selected


class RogueBonusSelector(RogueSelector):
    def _wait_bonus_page_loaded(self, timer=Timer(0.3, count=1), timeout=Timer(5, count=10)):
        timer.reset()
        timeout.reset()
        while 1:
            self.main.device.screenshot()

            if timeout.reached():
                logger.warning('Wait bonus page loaded timeout')
                break

            if self.main.appear(BONUS_BOTTOM_WHITE_BAR):
                if timer.reached():
                    logger.info('Bonus page stabled')
                    break
            else:
                timer.reset()

    def recognition(self):
        self._wait_bonus_page_loaded()
        ocr = RogueBonusOcr(OCR_ROGUE_BUFF)
        results = ocr.matched_ocr(self.main.device.image, [RogueBonus])
        expected_count = 3
        if expected_count != len(results):
            logger.warning(f"The OCR result does not match the bonus count. "
                           f"Expect {expected_count}, but recognized {len(results)} only.")
        self.ocr_results = results
        return results

    def ui_select(self, target: OcrResultButton | None, skip_first_screenshot=True):
        interval = Timer(1)
        # start -> select
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if is_card_selected(self.main, target, confirm_button=BONUS_CONFIRM):
                break
            if interval.reached():
                self.main.device.click(target)
                interval.reset()

        skip_first_screenshot = True
        # Avoid double-clicking
        interval = Timer(3, count=6)
        # select -> confirm
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if self.main.is_in_main():
                logger.info("Main Page Checked")
                break
            if self.main.is_page_choose_curio():
                logger.info("Choose curio page checked")
                break
            if self.main.is_page_choose_blessing():
                logger.info("Choose blessing page checked")
                break
            if interval.reached():
                self.main.device.click(BONUS_CONFIRM)
                interval.reset()

    def recognize_and_select(self):
        self.recognition()
        if not self.ocr_results:
            self.ui_select(None)
        options = {result.matched_keyword.en: result for result in self.ocr_results}
        if self.main.config.RoguePath_Bonus not in options.keys():
            logger.warning(f"Can not find option: {self.main.config.RoguePath_Bonus}, randomly choose one")
            target = np.random.choice(options)
        else:
            target = options[self.main.config.RoguePath_Bonus]
        logger.info(f"Choose bonus: {target}")
        self.ui_select(target)

```

`tasks/rogue/bleesing/curio.py`:

```py
import re

import numpy as np

from module.base.filter import MultiLangFilter
from module.base.timer import Timer
from module.base.utils import get_color
from module.logger import logger
from module.ocr.ocr import Ocr, OcrResultButton
from tasks.rogue.assets.assets_rogue_curio import *
from tasks.rogue.assets.assets_rogue_ui import BLESSING_CONFIRM
from tasks.rogue.keywords import RogueCurio
from tasks.rogue.bleesing.preset import CURIO_PRESET_1
from tasks.rogue.bleesing.selector import RogueSelector
from tasks.rogue.bleesing.utils import get_regex_from_keyword_name, parse_name

CURIO_FILTER_ATTR = tuple()
CURIO_ATTR_NAME = 'curio_name'
patt = get_regex_from_keyword_name(RogueCurio, CURIO_ATTR_NAME)
CURIO_FILTER_ATTR += (CURIO_ATTR_NAME,)
CURIO_FILTER_PRESET = ('random', 'unrecorded')
FILTER_REGEX = re.compile(patt)
CURIO_FILTER = MultiLangFilter(FILTER_REGEX, CURIO_FILTER_ATTR, CURIO_FILTER_PRESET)


class RogueCurioOcr(Ocr):
    merge_thres_y = 40

    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'ch':
            replace_pattern_dict = {
                "般": "骰",
                "漂灭": "湮灭",
                "殷子": "骰子",
            }
            for pattern, replace in replace_pattern_dict.items():
                result = re.sub(pattern, replace, result)
        return result


class RogueCurioSelector(RogueSelector):
    def recognition(self):
        self.ocr_results = []
        ocr = RogueCurioOcr(OCR_ROGUE_CURIO)
        results = ocr.matched_ocr(self.main.device.image, RogueCurio)
        expect_num = 3
        if len(results) != expect_num:
            logger.warning(f"The OCR result does not match the curio count. "
                           f"Expect {expect_num}, but recognized {len(results)} only.")
        self.ocr_results = results
        return results

    def ui_select(self, target: OcrResultButton | None, skip_first_screenshot=True):
        def is_curio_selected():
            return np.mean(get_color(self.main.device.image, tuple(target.area))) > 60  # shiny background

        def is_select_curio_complete():
            """
                Case 1: back to main page
                Case 2: event page
            """
            if self.main.is_in_main():
                logger.info("Main page checked")
                return True
            if self.main.is_page_event():
                logger.info("Event page checked")
                return True
            return False

        enforce = False
        if not target:
            enforce = True
        interval = Timer(1)
        # start -> selected
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if is_curio_selected():
                if enforce:
                    logger.info("Curio selected (enforce)")
                else:
                    logger.info(f"Curio {target} selected")
                break
            if interval.reached():
                if enforce:
                    self.main.device.click(CURIO_ENFORCE)
                else:
                    self.main.device.click(target)
                interval.reset()

        skip_first_screenshot = True
        # Avoid double-clicking
        interval = Timer(3, count=6)
        # selected -> confirm
        while 1:
            if skip_first_screenshot:
                skip_first_screenshot = False
            else:
                self.main.device.screenshot()

            if is_select_curio_complete():
                break
            if interval.reached():
                self.main.device.click(BLESSING_CONFIRM)
                interval.reset()

    def try_select(self, option: OcrResultButton | str):
        if option == 'random':
            target = np.random.choice(self.ocr_results)
            self.ui_select(target)
            return True
        if option == 'unrecorded':
            for result in self.ocr_results:
                if self.main.is_unrecorded(result, (0, -720, 300, 0)):
                    self.ui_select(result)
                    return True
            return False

        if isinstance(option, OcrResultButton):
            self.ui_select(option)
            return True
        return False

    def load_filter(self):
        filter_ = CURIO_FILTER
        string = ""
        match self.main.config.RogueCurio_PresetCurioFilter:
            case 'preset-1':
                string = CURIO_PRESET_1
            case 'custom':
                string = self.main.config.RogueCurio_CustomCurioFilter
        string = parse_name(string)

        match self.main.config.RogueCurio_CurioSelectionStrategy:
            case 'unrecorded-first':
                string = 'unrecorded > ' + string
            case 'before-random':
                string = string.replace('random', 'unrecorded > random')

        filter_.load(string)
        self.filter_ = filter_

```

`tasks/rogue/bleesing/preset.py`:

```py
BLESSING_PRESET_1 = ("巡猎-3 > 《冠军晚餐•猫的摇篮》 > 丰饶众生，一法界心 > 毁灭-3 "
                     "> 火堆外的夜 > 巡猎-2 > 戒律性闪变 > 巡猎 > 存护-2 > reset > random")
RESONANCE_PRESET_1 = ("回响构音：均晶转变 > 回响构音：零维强化"
                      "> 回响构音：第二次初恋 > 回响构音：体验的富翁"
                      "> 回响构音：局外人 > 回响构音：怀疑的四重根"
                      "> 回响构音：诸法无我 > 回响构音：诸行无常"
                      "> 回响构音：射不主皮 > 回响构音：柘弓危矢"
                      "> 回响构音：激变变星 > 回响构音：极端氦闪"
                      "> 回响构音：末日狂欢 > 回响构音：树苗长高舞")
CURIO_PRESET_1 = "博士之袍 > 福灵胶 > 分裂金币 > 信仰债券 > 换境桂冠 > 俱乐部券 > 碎星芳饵 > random"

```

`tasks/rogue/bleesing/selector.py`:

```py
import numpy as np

from module.logger import logger
from module.ocr.keyword import Keyword
from module.ocr.ocr import OcrResultButton
from tasks.rogue.bleesing.ui import RogueUI


class RogueSelector:
    """
    An Interface used in blessing, curio, and other ui selection in rogue
    """

    def __init__(self, main: RogueUI):
        self.main = main
        self.filter_ = None
        self.ocr_results = []

    def recognition(self):
        ...

    def ui_select(self, target: OcrResultButton | None, skip_first_screenshot=True):
        ...

    def try_select(self, option: OcrResultButton | str):
        ...

    def load_filter(self):
        ...

    def perform_selection(self, priority):
        if not self.ocr_results:
            logger.warning('No blessing recognized, randomly choose one')
            self.ui_select(None)
            return False

        if not len(priority):
            logger.info('No blessing project satisfies current filter, randomly choose one')
            choose = np.random.choice(self.ocr_results)
            self.ui_select(choose)
            return False

        for option in priority:
            logger.info(f"Try to choose option: {option}")
            if self.try_select(option):
                return True
            else:
                logger.info(f"Can not choose option: {option}")

    def apply_filter(self) -> list[Keyword | str]:
        def match_ocr_result(matched_keyword: Keyword):
            for result in self.ocr_results:
                if result.matched_keyword == matched_keyword:
                    return result
            return None

        if self.filter_:
            keywords = [result.matched_keyword for result in self.ocr_results]
            priority = self.filter_.apply(keywords)
            priority = [option if isinstance(option, str) else match_ocr_result(option) for option in priority]
        else:
            logger.warning("No filter loaded, use random instead")
            priority = ['random']
        priority = self.after_process(priority)
        return priority

    def after_process(self, priority) -> list[Keyword | str]:
        """
        Usage: add extra logics to modify the priority
        """
        return priority

    def recognize_and_select(self):
        self.recognition()
        self.load_filter()
        priority = self.apply_filter()
        logger.info(f"Priority: {priority}")
        self.perform_selection(priority)

```

`tasks/rogue/bleesing/ui.py`:

```py
import re

from module.base.utils import area_offset
from module.ocr.ocr import Digit, Ocr, OcrResultButton
from tasks.base.ui import UI
from tasks.rogue.assets.assets_rogue_ui import *
from tasks.rogue.keywords import *


class RogueBonusOcr(Ocr):
    def after_process(self, result):
        result = super().after_process(result)
        if self.lang == 'ch':
            replace_pattern_dict = {
                "[宇宝][宙审]": "宇宙",
            }
            for pat, replace in replace_pattern_dict.items():
                result = re.sub(pat, replace, result)
        return result


class RogueUI(UI):
    path: RoguePath

    @property
    def cosmic_fragment(self):
        """
        Return valid result only when template appear
        """
        if self.appear(COSMIC_FRAGMENT):
            return Digit(OCR_COSMIC_FRAGMENT).ocr_single_line(self.device.image)
        return 0

    def is_page_choose_blessing(self):
        return (self.image_color_count(PAGE_CHOOSE_BUFF, (245, 245, 245), count=200)
                and self.appear(CHECK_BLESSING))

    def is_page_choose_curio(self):
        return self.appear(PAGE_CHOOSE_CURIO)

    def is_page_choose_bonus(self):
        return self.appear(PAGE_CHOOSE_BONUS)

    def is_page_event(self):
        return self.appear(PAGE_EVENT)

    def handle_obtain_item_popup(self, interval=5) -> bool:
        """After selecting some curio (e.g. Sealing_Wax_of_*), there will be a popup after back to main page"""
        if self.appear_then_click(OBTAIN_ITEM_POPUP, interval=interval):
            return True
        return False

    def is_unrecorded(self, target: OcrResultButton, relative_area):
        """
        To check a rogue keyword is not record in game index by finding template
        """
        FLAG_UNRECORD.matched_button.search = area_offset(relative_area, target.area[:2])
        return self.appear(FLAG_UNRECORD)

```

`tasks/rogue/bleesing/utils.py`:

```py
import re

from module.base.base import ModuleBase
from module.base.utils import area_offset
from module.ocr.ocr import OcrResultButton

REGEX_PUNCTUATION = re.compile(r'[ ,.\'"“”，。:：!！?？·•—/()（）「」『』【】《》]')


def parse_name(n):
    n = REGEX_PUNCTUATION.sub('', str(n)).lower()
    return n


def get_regex_from_keyword_name(keyword, attr_name):
    string = ""
    for instance in keyword.instances.values():
        if hasattr(instance, attr_name):
            for name in instance.__getattribute__(attr_name):
                string += f"{name}|"
    # some pattern contain each other, make sure each pattern end with "-" or the end of string
    return f"(?:({string[:-1]})(?:-|$))?"


def is_card_selected(main: ModuleBase, target: OcrResultButton, confirm_button):
    """
    There is a white border if a blessing is selected.
    For the enforce case, just check the confirm button turning to white
    """
    if not target:
        return main.image_color_count(confirm_button, (230, 230, 230))
    top_border = area_offset(target.area, (0, -180))
    return main.image_color_count(top_border, (255, 255, 255))

```

`tasks/rogue/keywords/__init__.py`:

```py
import tasks.rogue.keywords.blessing as KEYWORDS_ROGUE_BLESSING
import tasks.rogue.keywords.bonus as KEYWORDS_ROGUE_BONUS
import tasks.rogue.keywords.curio as KEYWORDS_ROGUE_CURIO
import tasks.rogue.keywords.enhancement as KEYWORDS_ROGUE_ENHANCEMENT
import tasks.rogue.keywords.path as KEYWORDS_ROGUE_PATH
import tasks.rogue.keywords.resonance as KEYWORDS_ROGUE_RESONANCE

from tasks.rogue.keywords.classes import (RogueBlessing, RogueBonus, RogueEnhancement,
                                          RoguePath, RogueResonance, RogueCurio)

```

`tasks/rogue/keywords/blessing.py`:

```py
from .classes import RogueBlessing

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Divine_Construct_Resonance_Transfer = RogueBlessing(
    id=1,
    name='Divine_Construct_Resonance_Transfer',
    cn='神性构筑•谐振传递',
    cht='神性構築•諧振傳遞',
    en='Divine Construct: Resonance Transfer',
    jp='神性構築・共鳴伝達',
    path_id=1,
    rarity=3,
    enhancement='',
)
Divine_Construct_Metastatic_Field = RogueBlessing(
    id=2,
    name='Divine_Construct_Metastatic_Field',
    cn='神性构筑•超静定场',
    cht='神性構築•超靜定場',
    en='Divine Construct: Metastatic Field',
    jp='神性構築・不静定構造',
    path_id=1,
    rarity=3,
    enhancement='',
)
Divine_Construct_Macrosegregation = RogueBlessing(
    id=3,
    name='Divine_Construct_Macrosegregation',
    cn='神性构筑•宏观偏析',
    cht='神性構築•宏觀偏析',
    en='Divine Construct: Macrosegregation',
    jp='神性構築・マクロ偏析',
    path_id=1,
    rarity=3,
    enhancement='',
)
Interstellar_Construct_Shear_Structure = RogueBlessing(
    id=4,
    name='Interstellar_Construct_Shear_Structure',
    cn='星间构筑•切变结构',
    cht='星間構築•切變結構',
    en='Interstellar Construct: Shear Structure',
    jp='星間構築・剪断構造',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Burst_Lattice = RogueBlessing(
    id=5,
    name='Interstellar_Construct_Burst_Lattice',
    cn='星间构筑•迸裂晶格',
    cht='星間構築•迸裂晶格',
    en='Interstellar Construct: Burst Lattice',
    jp='星間構築・格子欠陥',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Solid_Solution = RogueBlessing(
    id=6,
    name='Interstellar_Construct_Solid_Solution',
    cn='星间构筑•固溶强化',
    cht='星間構築•固溶強化',
    en='Interstellar Construct: Solid Solution',
    jp='星間構築・固溶強化',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Safe_Load = RogueBlessing(
    id=7,
    name='Interstellar_Construct_Safe_Load',
    cn='星间构筑•安全载荷',
    cht='星間構築•安全載荷',
    en='Interstellar Construct: Safe Load',
    jp='星間構築・安全荷重',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Sanctuary = RogueBlessing(
    id=8,
    name='Interstellar_Construct_Sanctuary',
    cn='星间构筑•回馈庇护',
    cht='星間構築•回饋庇護',
    en='Interstellar Construct: Sanctuary',
    jp='星間構築・反作用庇護',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Quadrangular_Pyramid = RogueBlessing(
    id=9,
    name='Interstellar_Construct_Quadrangular_Pyramid',
    cn='星间构筑•四棱锥体',
    cht='星間構築•四稜錐體',
    en='Interstellar Construct: Quadrangular Pyramid',
    jp='星間構築・四角錐',
    path_id=1,
    rarity=2,
    enhancement='',
)
Interstellar_Construct_Hypoeutectoid = RogueBlessing(
    id=10,
    name='Interstellar_Construct_Hypoeutectoid',
    cn='星间构筑•亚共晶体',
    cht='星間構築•亞共晶體',
    en='Interstellar Construct: Hypoeutectoid',
    jp='星間構築・亜共晶',
    path_id=1,
    rarity=2,
    enhancement='',
)
Construct_Assemble = RogueBlessing(
    id=11,
    name='Construct_Assemble',
    cn='构筑•聚塑',
    cht='構築•聚塑',
    en='Construct: Assemble',
    jp='構築・集塑',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Sentinel = RogueBlessing(
    id=12,
    name='Construct_Sentinel',
    cn='构筑•哨戒',
    cht='構築•哨戒',
    en='Construct: Sentinel',
    jp='構築・哨戒',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Patch = RogueBlessing(
    id=13,
    name='Construct_Patch',
    cn='构筑•弥合',
    cht='構築•彌合',
    en='Construct: Patch',
    jp='構築・溶着',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Compensation = RogueBlessing(
    id=14,
    name='Construct_Compensation',
    cn='构筑•补偿',
    cht='構築•補償',
    en='Construct: Compensation',
    jp='構築・補填',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Firmness = RogueBlessing(
    id=15,
    name='Construct_Firmness',
    cn='构筑•坚定',
    cht='構築•堅定',
    en='Construct: Firmness',
    jp='構築・確固',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Rotation = RogueBlessing(
    id=16,
    name='Construct_Rotation',
    cn='构筑•回转',
    cht='構築•迴轉',
    en='Construct: Rotation',
    jp='構築・回転',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Burst = RogueBlessing(
    id=17,
    name='Construct_Burst',
    cn='构筑•迸发',
    cht='構築•迸發',
    en='Construct: Burst',
    jp='構築・勃発',
    path_id=1,
    rarity=1,
    enhancement='',
)
Construct_Concentration = RogueBlessing(
    id=18,
    name='Construct_Concentration',
    cn='构筑•专注',
    cht='構築•專注',
    en='Construct: Concentration',
    jp='構築・専念',
    path_id=1,
    rarity=1,
    enhancement='',
)
Perfect_Experience_Fuli = RogueBlessing(
    id=19,
    name='Perfect_Experience_Fuli',
    cn='完美体验：浮黎',
    cht='完美體驗：浮黎',
    en='Perfect Experience: Fuli',
    jp='完璧体験：浮黎',
    path_id=2,
    rarity=3,
    enhancement='',
)
Perfect_Experience_Innocence = RogueBlessing(
    id=20,
    name='Perfect_Experience_Innocence',
    cn='完美体验：纯真',
    cht='完美體驗：純真',
    en='Perfect Experience: Innocence',
    jp='完璧体験：純真',
    path_id=2,
    rarity=3,
    enhancement='',
)
Perfect_Experience_Reticence = RogueBlessing(
    id=21,
    name='Perfect_Experience_Reticence',
    cn='完美体验：缄默',
    cht='完美體驗：緘默',
    en='Perfect Experience: Reticence',
    jp='完璧体験：沈黙',
    path_id=2,
    rarity=3,
    enhancement='',
)
Ultimate_Experience_Melancholia = RogueBlessing(
    id=22,
    name='Ultimate_Experience_Melancholia',
    cn='极端体验：怅然若失',
    cht='極端體驗：悵然若失',
    en='Ultimate Experience: Melancholia',
    jp='極端体験：茫然自失',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Dizziness = RogueBlessing(
    id=23,
    name='Ultimate_Experience_Dizziness',
    cn='极端体验：头晕目眩',
    cht='極端體驗：頭暈目眩',
    en='Ultimate Experience: Dizziness',
    jp='極端体験：眩暈',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Insensitivity = RogueBlessing(
    id=24,
    name='Ultimate_Experience_Insensitivity',
    cn='极端体验：麻木不仁',
    cht='極端體驗：麻木不仁',
    en='Ultimate Experience: Insensitivity',
    jp='極端体験：無感覚',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Sentimentality = RogueBlessing(
    id=25,
    name='Ultimate_Experience_Sentimentality',
    cn='极端体验：多愁善感',
    cht='極端體驗：多愁善感',
    en='Ultimate Experience: Sentimentality',
    jp='極端体験：多感',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Indelibility = RogueBlessing(
    id=26,
    name='Ultimate_Experience_Indelibility',
    cn='极端体验：沦浃肌髓',
    cht='極端體驗：淪浹肌髓',
    en='Ultimate Experience: Indelibility',
    jp='極端体験：感銘',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Shudder = RogueBlessing(
    id=27,
    name='Ultimate_Experience_Shudder',
    cn='极端体验：不寒而栗',
    cht='極端體驗：不寒而慄',
    en='Ultimate Experience: Shudder',
    jp='極端体験：戦慄',
    path_id=2,
    rarity=2,
    enhancement='',
)
Ultimate_Experience_Maverick = RogueBlessing(
    id=28,
    name='Ultimate_Experience_Maverick',
    cn='极端体验：特立独行',
    cht='極端體驗：特立獨行',
    en='Ultimate Experience: Maverick',
    jp='極端体験：異端児',
    path_id=2,
    rarity=2,
    enhancement='',
)
Experience_Unspeakable_Shame = RogueBlessing(
    id=29,
    name='Experience_Unspeakable_Shame',
    cn='体验：难言的羞耻',
    cht='體驗：難言的羞恥',
    en='Experience: Unspeakable Shame',
    jp='体験：言えない恥',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_The_Torment_of_Alienation = RogueBlessing(
    id=30,
    name='Experience_The_Torment_of_Alienation',
    cn='体验：疏离的煎熬',
    cht='體驗：疏離的煎熬',
    en='Experience: The Torment of Alienation',
    jp='体験：疎遠の苦しみ',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Lost_Memory = RogueBlessing(
    id=31,
    name='Experience_Lost_Memory',
    cn='体验：丢失的记忆',
    cht='體驗：遺失的記憶',
    en='Experience: Lost Memory',
    jp='体験：失われた記憶',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Stone_Cold_Hatred = RogueBlessing(
    id=32,
    name='Experience_Stone_Cold_Hatred',
    cn='体验：决绝的痛恨',
    cht='體驗：決絕的痛恨',
    en='Experience: Stone Cold Hatred',
    jp='体験：凄烈な憎悪',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Pain__Suffering = RogueBlessing(
    id=33,
    name='Experience_Pain__Suffering',
    cn='体验：病痛的折磨',
    cht='體驗：病痛的折磨',
    en='Experience: Pain & Suffering',
    jp='体験：病の苛み',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Primordial_Hardship = RogueBlessing(
    id=34,
    name='Experience_Primordial_Hardship',
    cn='体验：原初的苦衷',
    cht='體驗：原初的苦衷',
    en='Experience: Primordial Hardship',
    jp='体験：原初の苦衷',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Thrill_of_Escalation = RogueBlessing(
    id=35,
    name='Experience_Thrill_of_Escalation',
    cn='体验：攀升的刺激',
    cht='體驗：攀升的刺激',
    en='Experience: Thrill of Escalation',
    jp='体験：上昇の刺激',
    path_id=2,
    rarity=1,
    enhancement='',
)
Experience_Responsive_Excitement = RogueBlessing(
    id=36,
    name='Experience_Responsive_Excitement',
    cn='体验：回应的兴奋',
    cht='體驗：回應的興奮',
    en='Experience: Responsive Excitement',
    jp='体験：反響の興奮',
    path_id=2,
    rarity=1,
    enhancement='',
)
Funeral_of_Sensory_Pursuivant = RogueBlessing(
    id=37,
    name='Funeral_of_Sensory_Pursuivant',
    cn='感官追奉者的葬礼',
    cht='感官追奉者的葬禮',
    en='Funeral of Sensory Pursuivant',
    jp='感覚追奉者の葬式',
    path_id=3,
    rarity=3,
    enhancement='',
)
The_Man_in_the_Cover = RogueBlessing(
    id=38,
    name='The_Man_in_the_Cover',
    cn='被装在套子里的人',
    cht='被裝在套子裡的人',
    en='The Man in the Cover',
    jp='箱に入った人',
    path_id=3,
    rarity=3,
    enhancement='',
)
Why_Hasn_t_Everything_Already_Disappeared = RogueBlessing(
    id=39,
    name='Why_Hasn_t_Everything_Already_Disappeared',
    cn='为何一切尚未消失',
    cht='為何一切尚未消失',
    en="Why Hasn't Everything Already Disappeared?",
    jp='なぜすべては消えぬか',
    path_id=3,
    rarity=3,
    enhancement='',
)
Beginning_and_End = RogueBlessing(
    id=40,
    name='Beginning_and_End',
    cn='开端与终结',
    cht='開端與終結',
    en='Beginning and End',
    jp='発端と結末',
    path_id=3,
    rarity=2,
    enhancement='',
)
Café_Self_Deceit = RogueBlessing(
    id=41,
    name='Café_Self_Deceit',
    cn='自欺咖啡馆',
    cht='自欺咖啡館',
    en='Café Self-Deceit',
    jp='自己欺瞞カフェ',
    path_id=3,
    rarity=2,
    enhancement='',
)
Call_of_the_Wilderness = RogueBlessing(
    id=42,
    name='Call_of_the_Wilderness',
    cn='旷野的呼告',
    cht='曠野的呼告',
    en='Call of the Wilderness',
    jp='広野の呼び声',
    path_id=3,
    rarity=2,
    enhancement='',
)
Night_Beyond_Pyre = RogueBlessing(
    id=43,
    name='Night_Beyond_Pyre',
    cn='火堆外的夜',
    cht='火堆外的夜',
    en='Night Beyond Pyre',
    jp='焚火の外の夜',
    path_id=3,
    rarity=2,
    enhancement='',
)
Hell_is_Other_People = RogueBlessing(
    id=44,
    name='Hell_is_Other_People',
    cn='他人即地狱',
    cht='他人即地獄',
    en='Hell is Other People',
    jp='他人は地獄',
    path_id=3,
    rarity=2,
    enhancement='',
)
Twilight_of_Existence = RogueBlessing(
    id=45,
    name='Twilight_of_Existence',
    cn='存在的黄昏',
    cht='存在的黃昏',
    en='Twilight of Existence',
    jp='存在の黄昏',
    path_id=3,
    rarity=2,
    enhancement='',
)
All_Things_are_Possible = RogueBlessing(
    id=46,
    name='All_Things_are_Possible',
    cn='无根据颂歌',
    cht='無根據頌歌',
    en='All Things are Possible',
    jp='根拠なき賛歌',
    path_id=3,
    rarity=2,
    enhancement='',
)
Ignosticism = RogueBlessing(
    id=47,
    name='Ignosticism',
    cn='漠视主义',
    cht='漠視主義',
    en='Ignosticism',
    jp='漠視主義',
    path_id=3,
    rarity=1,
    enhancement='',
)
Questioning_of_Purpose = RogueBlessing(
    id=48,
    name='Questioning_of_Purpose',
    cn='意义质询',
    cht='意義質詢',
    en='Questioning of Purpose',
    jp='意義への詰問',
    path_id=3,
    rarity=1,
    enhancement='',
)
Blind_Vision = RogueBlessing(
    id=49,
    name='Blind_Vision',
    cn='盲目视界',
    cht='盲目視界',
    en='Blind Vision',
    jp='盲目の視界',
    path_id=3,
    rarity=1,
    enhancement='',
)
Tragic_Lecture = RogueBlessing(
    id=50,
    name='Tragic_Lecture',
    cn='悲剧讲座',
    cht='悲劇講座',
    en='Tragic Lecture',
    jp='悲劇講座',
    path_id=3,
    rarity=1,
    enhancement='',
)
Sensory_Labyrinth = RogueBlessing(
    id=51,
    name='Sensory_Labyrinth',
    cn='知觉迷墙',
    cht='知覺迷牆',
    en='Sensory Labyrinth',
    jp='知覚の壁',
    path_id=3,
    rarity=1,
    enhancement='',
)
Emotional_Decluttering = RogueBlessing(
    id=52,
    name='Emotional_Decluttering',
    cn='情绪舍离',
    cht='情緒捨離',
    en='Emotional Decluttering',
    jp='情緒捨離',
    path_id=3,
    rarity=1,
    enhancement='',
)
Offerings_of_Deception = RogueBlessing(
    id=53,
    name='Offerings_of_Deception',
    cn='虚妄供品',
    cht='虛妄供品',
    en='Offerings of Deception',
    jp='虚妄の供物',
    path_id=3,
    rarity=1,
    enhancement='',
)
Before_Sunrise = RogueBlessing(
    id=54,
    name='Before_Sunrise',
    cn='日出之前',
    cht='日出之前',
    en='Before Sunrise',
    jp='日の出前',
    path_id=3,
    rarity=1,
    enhancement='',
)
Prosperity_Longevity = RogueBlessing(
    id=55,
    name='Prosperity_Longevity',
    cn='葳蕤繁祉，延彼遐龄',
    cht='葳蕤繁祉，延彼遐齡',
    en='Prosperity, Longevity',
    jp='彼の遐齢を延さん',
    path_id=4,
    rarity=3,
    enhancement='',
)
Mudra_of_Blessing = RogueBlessing(
    id=56,
    name='Mudra_of_Blessing',
    cn='若罪若福，施诸愿印',
    cht='若罪若福，施諸願印',
    en='Mudra of Blessing',
    jp='若の罪福、皆に施願を',
    path_id=4,
    rarity=3,
    enhancement='',
)
Being_of_Abundance_Becoming_One_Mind = RogueBlessing(
    id=57,
    name='Being_of_Abundance_Becoming_One_Mind',
    cn='丰饶众生，一法界心',
    cht='豐饒眾生，一法界心',
    en='Being of Abundance, Becoming One Mind',
    jp='衆生に豊穣を',
    path_id=4,
    rarity=3,
    enhancement='',
)
Good_Deeds_Come_After_Old_Sins = RogueBlessing(
    id=58,
    name='Good_Deeds_Come_After_Old_Sins',
    cn='灭罪累生善',
    cht='滅罪累生善',
    en='Good Deeds Come After Old Sins',
    jp='滅罪生善',
    path_id=4,
    rarity=2,
    enhancement='',
)
Mortals_of_the_Buddha_Field = RogueBlessing(
    id=59,
    name='Mortals_of_the_Buddha_Field',
    cn='天人不动众',
    cht='天人不動眾',
    en='Mortals of the Buddha-Field',
    jp='天人不動衆',
    path_id=4,
    rarity=2,
    enhancement='',
)
Salvation_From_Damnation = RogueBlessing(
    id=60,
    name='Salvation_From_Damnation',
    cn='慧海度慈航',
    cht='慧海度慈航',
    en='Salvation From Damnation',
    jp='慧海を渡る慈航',
    path_id=4,
    rarity=2,
    enhancement='',
)
Precious_Moon_Like_Candlelight = RogueBlessing(
    id=61,
    name='Precious_Moon_Like_Candlelight',
    cn='宝光烛日月',
    cht='寶光燭日月',
    en='Precious Moon-Like Candlelight',
    jp='日月を燭らす宝光',
    path_id=4,
    rarity=2,
    enhancement='',
)
Aversion_to_Suffering = RogueBlessing(
    id=62,
    name='Aversion_to_Suffering',
    cn='厌离邪秽苦',
    cht='厭離邪穢苦',
    en='Aversion to Suffering',
    jp='邪穢の苦を厭離す',
    path_id=4,
    rarity=2,
    enhancement='',
)
Clear_Lucite_Body = RogueBlessing(
    id=63,
    name='Clear_Lucite_Body',
    cn='明澈琉璃身',
    cht='明澈琉璃身',
    en='Clear Lucite Body',
    jp='明澄琉璃の身',
    path_id=4,
    rarity=2,
    enhancement='',
)
Prajna_Boat = RogueBlessing(
    id=64,
    name='Prajna_Boat',
    cn='大愿般若船',
    cht='大願般若船',
    en='Prajna Boat',
    jp='大愿、般若の船',
    path_id=4,
    rarity=2,
    enhancement='',
)
Rain_of_Truth = RogueBlessing(
    id=65,
    name='Rain_of_Truth',
    cn='法雨',
    cht='法雨',
    en='Rain of Truth',
    jp='法雨',
    path_id=4,
    rarity=1,
    enhancement='',
)
Sweet_Dew = RogueBlessing(
    id=66,
    name='Sweet_Dew',
    cn='甘露',
    cht='甘露',
    en='Sweet Dew',
    jp='甘露',
    path_id=4,
    rarity=1,
    enhancement='',
)
Extended_Life = RogueBlessing(
    id=67,
    name='Extended_Life',
    cn='延寿',
    cht='延壽',
    en='Extended Life',
    jp='延寿',
    path_id=4,
    rarity=1,
    enhancement='',
)
Seal = RogueBlessing(
    id=68,
    name='Seal',
    cn='愿印',
    cht='願印',
    en='Seal',
    jp='願印',
    path_id=4,
    rarity=1,
    enhancement='',
)
Dispel_Disaster = RogueBlessing(
    id=69,
    name='Dispel_Disaster',
    cn='禳灾',
    cht='禳災',
    en='Dispel Disaster',
    jp='厄払い',
    path_id=4,
    rarity=1,
    enhancement='',
)
Rebirth = RogueBlessing(
    id=70,
    name='Rebirth',
    cn='回生',
    cht='回生',
    en='Rebirth',
    jp='回生',
    path_id=4,
    rarity=1,
    enhancement='',
)
Victorious_Force = RogueBlessing(
    id=71,
    name='Victorious_Force',
    cn='胜军',
    cht='勝軍',
    en='Victorious Force',
    jp='勝軍',
    path_id=4,
    rarity=1,
    enhancement='',
)
Blessing = RogueBlessing(
    id=72,
    name='Blessing',
    cn='加持',
    cht='加持',
    en='Blessing',
    jp='加持',
    path_id=4,
    rarity=1,
    enhancement='',
)
Imperial_Reign = RogueBlessing(
    id=73,
    name='Imperial_Reign',
    cn='帝星君临制穹桑',
    cht='帝星君臨制穹桑',
    en='Imperial Reign',
    jp='帝星臨めば穹桑を制す',
    path_id=5,
    rarity=3,
    enhancement='',
)
Imperishable_Victory = RogueBlessing(
    id=74,
    name='Imperishable_Victory',
    cn='帝车超光所向捷',
    cht='帝車超光所向捷',
    en='Imperishable Victory',
    jp='光越す制勝の帝車',
    path_id=5,
    rarity=3,
    enhancement='',
)
Celestial_Annihilation = RogueBlessing(
    id=75,
    name='Celestial_Annihilation',
    cn='帝弓断空彻太清',
    cht='帝弓斷空徹太清',
    en='Celestial Annihilation',
    jp='太清を徹す断空の帝弓',
    path_id=5,
    rarity=3,
    enhancement='',
)
Battle_Against_the_Old_Foe = RogueBlessing(
    id=76,
    name='Battle_Against_the_Old_Foe',
    cn='天舟缴夙敌',
    cht='天舟繳夙敵',
    en='Battle Against the Old Foe',
    jp='夙敵繳める天舟',
    path_id=5,
    rarity=2,
    enhancement='',
)
Archery_Duel = RogueBlessing(
    id=77,
    name='Archery_Duel',
    cn='白矢决射御',
    cht='白矢決射御',
    en='Archery Duel',
    jp='射御を決する白矢',
    path_id=5,
    rarity=2,
    enhancement='',
)
Adept_Bow = RogueBlessing(
    id=78,
    name='Adept_Bow',
    cn='序师执迟彝',
    cht='序師執遲彝',
    en="Adept's Bow",
    jp='遅彝弓を執る序師',
    path_id=5,
    rarity=2,
    enhancement='',
)
Flowing_Mist = RogueBlessing(
    id=79,
    name='Flowing_Mist',
    cn='流岚追孽物',
    cht='流嵐追孽物',
    en='Flowing Mist',
    jp='忌み物を追う流嵐',
    path_id=5,
    rarity=2,
    enhancement='',
)
Auspicious_Star = RogueBlessing(
    id=80,
    name='Auspicious_Star',
    cn='景星助狩月',
    cht='景星助狩月',
    en='Auspicious Star',
    jp='狩月を助ける景星',
    path_id=5,
    rarity=2,
    enhancement='',
)
Ejecting_the_Borisin = RogueBlessing(
    id=81,
    name='Ejecting_the_Borisin',
    cn='云镝逐步离',
    cht='雲鏑逐步離',
    en='Ejecting the Borisin',
    jp='歩離を駆逐せし雲鏑',
    path_id=5,
    rarity=2,
    enhancement='',
)
Monster_Expelling_Rainbow = RogueBlessing(
    id=82,
    name='Monster_Expelling_Rainbow',
    cn='飞虹诛凿齿',
    cht='飛虹誅鑿齒',
    en='Monster-Expelling Rainbow',
    jp='鑿齒を誅つ飛虹',
    path_id=5,
    rarity=2,
    enhancement='',
)
Vermeil_Bow_and_White_Arrow = RogueBlessing(
    id=83,
    name='Vermeil_Bow_and_White_Arrow',
    cn='彤弓素矰',
    cht='彤弓素矰',
    en='Vermeil Bow and White Arrow',
    jp='緋弓素矢',
    path_id=5,
    rarity=1,
    enhancement='',
)
Skirting_Life_and_Death = RogueBlessing(
    id=84,
    name='Skirting_Life_and_Death',
    cn='背生击死',
    cht='背生擊死',
    en='Skirting Life and Death',
    jp='背生撃死',
    path_id=5,
    rarity=1,
    enhancement='',
)
Shrewd_Arrangement = RogueBlessing(
    id=85,
    name='Shrewd_Arrangement',
    cn='背孤击虚',
    cht='背孤擊虛',
    en='Shrewd Arrangement',
    jp='背孤撃虚',
    path_id=5,
    rarity=1,
    enhancement='',
)
Thundering_Chariot = RogueBlessing(
    id=86,
    name='Thundering_Chariot',
    cn='雷车动地',
    cht='雷車動地',
    en='Thundering Chariot',
    jp='雷車動地',
    path_id=5,
    rarity=1,
    enhancement='',
)
Constellation_Surge = RogueBlessing(
    id=87,
    name='Constellation_Surge',
    cn='电射牛斗',
    cht='電射牛斗',
    en='Constellation Surge',
    jp='牛斗射る紫電',
    path_id=5,
    rarity=1,
    enhancement='',
)
Catastrophic_Constellation = RogueBlessing(
    id=88,
    name='Catastrophic_Constellation',
    cn='天棓步危',
    cht='天棓步危',
    en='Catastrophic Constellation',
    jp='危宮へ歩む天棓',
    path_id=5,
    rarity=1,
    enhancement='',
)
Vaulting_Ambition = RogueBlessing(
    id=89,
    name='Vaulting_Ambition',
    cn='桑弧蓬矢',
    cht='桑弧蓬矢',
    en='Vaulting Ambition',
    jp='桑弧蓬矢',
    path_id=5,
    rarity=1,
    enhancement='',
)
Blessed_Bow_and_Arrow = RogueBlessing(
    id=90,
    name='Blessed_Bow_and_Arrow',
    cn='乌号綦箭',
    cht='烏號綦箭',
    en='Blessed Bow and Arrow',
    jp='烏号綦箭',
    path_id=5,
    rarity=1,
    enhancement='',
)
Non_Inverse_Antimatter_Equation = RogueBlessing(
    id=91,
    name='Non_Inverse_Antimatter_Equation',
    cn='反物质非逆方程',
    cht='反物質非逆方程式',
    en='Non-Inverse Antimatter Equation',
    jp='反物質非可逆方程式',
    path_id=6,
    rarity=3,
    enhancement='',
)
Universal_Heat_Death_Characteristic = RogueBlessing(
    id=92,
    name='Universal_Heat_Death_Characteristic',
    cn='寰宇热寂特征数',
    cht='寰宇熱寂特徵數',
    en='Universal Heat Death Characteristic',
    jp='熱的死の固有値',
    path_id=6,
    rarity=3,
    enhancement='',
)
Regression_Inequality_of_Annihilation = RogueBlessing(
    id=93,
    name='Regression_Inequality_of_Annihilation',
    cn='湮灭回归不等式',
    cht='湮滅回歸不等式',
    en='Regression Inequality of Annihilation',
    jp='対消滅回帰不等式',
    path_id=6,
    rarity=3,
    enhancement='',
)
Incremental_Doomsday = RogueBlessing(
    id=94,
    name='Incremental_Doomsday',
    cn='递增性末日',
    cht='遞增性末日',
    en='Incremental Doomsday',
    jp='逓増的終末',
    path_id=6,
    rarity=2,
    enhancement='',
)
Catastrophic_Resonance = RogueBlessing(
    id=95,
    name='Catastrophic_Resonance',
    cn='灾难性共振',
    cht='災難性共振',
    en='Catastrophic Resonance',
    jp='災難的共振',
    path_id=6,
    rarity=2,
    enhancement='',
)
Indicative_Depth_of_Field = RogueBlessing(
    id=96,
    name='Indicative_Depth_of_Field',
    cn='预兆性景深',
    cht='預兆性景深',
    en='Indicative Depth of Field',
    jp='予兆的被写界深度',
    path_id=6,
    rarity=2,
    enhancement='',
)
Devastating_Accretion = RogueBlessing(
    id=97,
    name='Devastating_Accretion',
    cn='毁灭性吸积',
    cht='毀滅性吸積',
    en='Devastating Accretion',
    jp='壊滅的降着',
    path_id=6,
    rarity=2,
    enhancement='',
)
Destructive_Flare = RogueBlessing(
    id=98,
    name='Destructive_Flare',
    cn='破坏性耀发',
    cht='破壞性耀發',
    en='Destructive Flare',
    jp='破壊的フレア',
    path_id=6,
    rarity=2,
    enhancement='',
)
Disciplinary_Flicker = RogueBlessing(
    id=99,
    name='Disciplinary_Flicker',
    cn='戒律性闪变',
    cht='戒律性閃變',
    en='Disciplinary Flicker',
    jp='戒律的フラッシュ',
    path_id=6,
    rarity=2,
    enhancement='',
)
Hazardous_Lucent_Residue = RogueBlessing(
    id=100,
    name='Hazardous_Lucent_Residue',
    cn='危害性余光',
    cht='危害性餘光',
    en='Hazardous Lucent Residue',
    jp='危害的余光',
    path_id=6,
    rarity=2,
    enhancement='',
)
Primordial_Black_Hole = RogueBlessing(
    id=101,
    name='Primordial_Black_Hole',
    cn='原生黑洞',
    cht='原生黑洞',
    en='Primordial Black Hole',
    jp='原始ブラックホール',
    path_id=6,
    rarity=1,
    enhancement='',
)
Reflection = RogueBlessing(
    id=102,
    name='Reflection',
    cn='回光效应',
    cht='回光效應',
    en='Reflection',
    jp='光壊変',
    path_id=6,
    rarity=1,
    enhancement='',
)
Orbital_Redshift = RogueBlessing(
    id=103,
    name='Orbital_Redshift',
    cn='轨道红移',
    cht='軌道紅移',
    en='Orbital Redshift',
    jp='軌道赤方偏移',
    path_id=6,
    rarity=1,
    enhancement='',
)
Instability_Strip = RogueBlessing(
    id=104,
    name='Instability_Strip',
    cn='不稳定带',
    cht='不穩定帶',
    en='Instability Strip',
    jp='不安定帯',
    path_id=6,
    rarity=1,
    enhancement='',
)
Metric_Reservation = RogueBlessing(
    id=105,
    name='Metric_Reservation',
    cn='储备度规',
    cht='儲備度規',
    en='Metric Reservation',
    jp='備蓄計量',
    path_id=6,
    rarity=1,
    enhancement='',
)
Sentinel_Satellite = RogueBlessing(
    id=106,
    name='Sentinel_Satellite',
    cn='哨戒卫星',
    cht='哨戒衛星',
    en='Sentinel Satellite',
    jp='哨戒衛星',
    path_id=6,
    rarity=1,
    enhancement='',
)
Polarization_Receptor = RogueBlessing(
    id=107,
    name='Polarization_Receptor',
    cn='偏振受体',
    cht='偏振受體',
    en='Polarization Receptor',
    jp='偏光受容体',
    path_id=6,
    rarity=1,
    enhancement='',
)
Eternally_Collapsing_Object = RogueBlessing(
    id=108,
    name='Eternally_Collapsing_Object',
    cn='永坍缩体',
    cht='永坍縮體',
    en='Eternally Collapsing Object',
    jp='永久崩壊天体',
    path_id=6,
    rarity=1,
    enhancement='',
)
Auto_Harmonica_Whitest_Night = RogueBlessing(
    id=109,
    name='Auto_Harmonica_Whitest_Night',
    cn='《自动口琴•茫茫白夜》',
    cht='《自動口琴•茫茫白夜》',
    en='Auto-Harmonica: Whitest Night',
    jp='『自動ハーモニカ・茫々たる白夜』',
    path_id=7,
    rarity=3,
    enhancement='',
)
Slaughterhouse_No_4_Rest_in_Peace = RogueBlessing(
    id=110,
    name='Slaughterhouse_No_4_Rest_in_Peace',
    cn='《四号屠场•众生安眠》',
    cht='《四號屠場•眾生安眠》',
    en='Slaughterhouse No. 4: Rest in Peace',
    jp='『四番屠畜場・皆眠りて』',
    path_id=7,
    rarity=3,
    enhancement='',
)
Champion_Dinner_Cat_Cradle = RogueBlessing(
    id=111,
    name='Champion_Dinner_Cat_Cradle',
    cn='《冠军晚餐•猫的摇篮》',
    cht='《冠軍晚餐•貓的搖籃》',
    en="Champion's Dinner: Cat's Cradle",
    jp='『チャンピオンのディナー・猫のゆりかご』',
    path_id=7,
    rarity=3,
    enhancement='',
)
Portrait_of_A_Man_On_Fire = RogueBlessing(
    id=112,
    name='Portrait_of_A_Man_On_Fire',
    cn='《燃烧男子的肖像》',
    cht='《燃燒男子的肖像》',
    en='Portrait of A Man On Fire',
    jp='『燃ゆる男の肖像』',
    path_id=7,
    rarity=2,
    enhancement='',
)
Just_Keep_on_Crying = RogueBlessing(
    id=113,
    name='Just_Keep_on_Crying',
    cn='《流吧，你的眼泪》',
    cht='《流吧，你的眼淚》',
    en='Just Keep on Crying!',
    jp='『流れよ汝が涙』',
    path_id=7,
    rarity=2,
    enhancement='',
)
The_Hourglass_Kindergarten = RogueBlessing(
    id=114,
    name='The_Hourglass_Kindergarten',
    cn='《砂时镜下的幼园》',
    cht='《砂時鏡下的幼園》',
    en='The Hourglass Kindergarten',
    jp='『砂時計の幼稚園』',
    path_id=7,
    rarity=2,
    enhancement='',
)
The_Painted_Albatross = RogueBlessing(
    id=115,
    name='The_Painted_Albatross',
    cn='《被涂污的信天翁》',
    cht='《被塗汙的信天翁》',
    en='The Painted Albatross',
    jp='『汚されたアホウドリ』',
    path_id=7,
    rarity=2,
    enhancement='',
)
_12_Monkeys_and_Angry_Men = RogueBlessing(
    id=116,
    name='_12_Monkeys_and_Angry_Men',
    cn='《十二猴子与怒汉》',
    cht='《十二猴子與怒漢》',
    en='12 Monkeys and Angry Men',
    jp='『十二のサルと怒れる男』',
    path_id=7,
    rarity=2,
    enhancement='',
)
Aiden_Gravitational_Rainbow = RogueBlessing(
    id=117,
    name='Aiden_Gravitational_Rainbow',
    cn='《利尔他引力之虹》',
    cht='《利爾他引力之虹》',
    en='Aiden Gravitational Rainbow',
    jp='『リルタ重力の虹』',
    path_id=7,
    rarity=2,
    enhancement='',
)
Twenty_First_Military_Rule = RogueBlessing(
    id=118,
    name='Twenty_First_Military_Rule',
    cn='《第二十一条军规》',
    cht='《第二十一條軍規》',
    en='Twenty-First Military Rule',
    jp='『キャッチ=21』',
    path_id=7,
    rarity=2,
    enhancement='',
)
Exemplary_Conduct = RogueBlessing(
    id=119,
    name='Exemplary_Conduct',
    cn='《操行满分》',
    cht='《操行滿分》',
    en='Exemplary Conduct',
    jp='『素行満点』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Mostly_Harmful = RogueBlessing(
    id=120,
    name='Mostly_Harmful',
    cn='《基本有害》',
    cht='《基本有害》',
    en='Mostly Harmful',
    jp='『ほとんど有害』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Suspiria = RogueBlessing(
    id=121,
    name='Suspiria',
    cn='《阴风阵阵》',
    cht='《陰風陣陣》',
    en='Suspiria',
    jp='『サスペンス』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Pale_Fire = RogueBlessing(
    id=122,
    name='Pale_Fire',
    cn='《灰暗的火》',
    cht='《灰暗的火》',
    en='Pale Fire',
    jp='『仄暗い炎』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Back_to_the_Lighthouse = RogueBlessing(
    id=123,
    name='Back_to_the_Lighthouse',
    cn='《回灯塔去》',
    cht='《回燈塔去》',
    en='Back to the Lighthouse',
    jp='『灯台へ戻ろう』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Doctor_of_Love = RogueBlessing(
    id=124,
    name='Doctor_of_Love',
    cn='《奇爱医生》',
    cht='《奇愛醫生》',
    en='Doctor of Love',
    jp='『医者の異常な愛情』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Platinum_Age = RogueBlessing(
    id=125,
    name='Platinum_Age',
    cn='《铂金时代》',
    cht='《鉑金時代》',
    en='Platinum Age',
    jp='『白金時代』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Clockwork_Apple = RogueBlessing(
    id=126,
    name='Clockwork_Apple',
    cn='《发条苹果》',
    cht='《發條蘋果》',
    en='Clockwork Apple',
    jp='『時計仕掛けのリンゴ』',
    path_id=7,
    rarity=1,
    enhancement='',
)
Spore_Discharge = RogueBlessing(
    id=127,
    name='Spore_Discharge',
    cn='子囊释放',
    cht='子囊釋放',
    en='Spore Discharge',
    jp='子嚢放出',
    path_id=8,
    rarity=3,
    enhancement='',
)
Fungal_Pustule = RogueBlessing(
    id=128,
    name='Fungal_Pustule',
    cn='菌种脓疱',
    cht='菌種膿皰',
    en='Fungal Pustule',
    jp='膿菌',
    path_id=8,
    rarity=3,
    enhancement='',
)
Scythe_Limbs = RogueBlessing(
    id=129,
    name='Scythe_Limbs',
    cn='镰刀肢足',
    cht='鐮刀肢足',
    en='Scythe Limbs',
    jp='鎌状付属肢',
    path_id=8,
    rarity=3,
    enhancement='',
)
Putrefaction_Ulcer = RogueBlessing(
    id=130,
    name='Putrefaction_Ulcer',
    cn='腐殖疮',
    cht='腐殖瘡',
    en='Putrefaction Ulcer',
    jp='腐植腫',
    path_id=8,
    rarity=2,
    enhancement='',
)
Lytic_Enzyme = RogueBlessing(
    id=131,
    name='Lytic_Enzyme',
    cn='裂解酶',
    cht='裂解酶',
    en='Lytic Enzyme',
    jp='分解酵素',
    path_id=8,
    rarity=2,
    enhancement='',
)
Metabolic_Cavity = RogueBlessing(
    id=132,
    name='Metabolic_Cavity',
    cn='代谢腔',
    cht='代謝腔',
    en='Metabolic Cavity',
    jp='代謝腔',
    path_id=8,
    rarity=2,
    enhancement='',
)
Excitatory_Gland = RogueBlessing(
    id=133,
    name='Excitatory_Gland',
    cn='兴奋腺',
    cht='興奮腺',
    en='Excitatory Gland',
    jp='興奮腺',
    path_id=8,
    rarity=2,
    enhancement='',
)
Exposed_Brain_Matter = RogueBlessing(
    id=134,
    name='Exposed_Brain_Matter',
    cn='裸脑质',
    cht='裸腦質',
    en='Exposed Brain Matter',
    jp='裸脳質',
    path_id=8,
    rarity=2,
    enhancement='',
)
Intersegmental_Membrane = RogueBlessing(
    id=135,
    name='Intersegmental_Membrane',
    cn='节间膜',
    cht='節間膜',
    en='Intersegmental Membrane',
    jp='節関膜',
    path_id=8,
    rarity=2,
    enhancement='',
)
Catalyst = RogueBlessing(
    id=136,
    name='Catalyst',
    cn='催化剂',
    cht='催化劑',
    en='Catalyst',
    jp='触媒',
    path_id=8,
    rarity=2,
    enhancement='',
)
Osseus_Blade = RogueBlessing(
    id=137,
    name='Osseus_Blade',
    cn='骨刃',
    cht='骨刃',
    en='Osseus Blade',
    jp='骨刃',
    path_id=8,
    rarity=1,
    enhancement='',
)
Spinal_Spur = RogueBlessing(
    id=138,
    name='Spinal_Spur',
    cn='脊刺',
    cht='脊刺',
    en='Spinal Spur',
    jp='脊刺',
    path_id=8,
    rarity=1,
    enhancement='',
)
Channeled_Needle = RogueBlessing(
    id=139,
    name='Channeled_Needle',
    cn='槽针',
    cht='槽針',
    en='Channeled Needle',
    jp='口針',
    path_id=8,
    rarity=1,
    enhancement='',
)
Conjunctiva = RogueBlessing(
    id=140,
    name='Conjunctiva',
    cn='结膜',
    cht='結膜',
    en='Conjunctiva',
    jp='結膜',
    path_id=8,
    rarity=1,
    enhancement='',
)
Scaled_Wing = RogueBlessing(
    id=141,
    name='Scaled_Wing',
    cn='鳞翅',
    cht='鱗翅',
    en='Scaled Wing',
    jp='鱗翅',
    path_id=8,
    rarity=1,
    enhancement='',
)
Compound_Eye = RogueBlessing(
    id=142,
    name='Compound_Eye',
    cn='复眼',
    cht='複眼',
    en='Compound Eye',
    jp='複眼',
    path_id=8,
    rarity=1,
    enhancement='',
)
Sporangium = RogueBlessing(
    id=143,
    name='Sporangium',
    cn='孢夹',
    cht='孢夾',
    en='Sporangium',
    jp='胞子嚢',
    path_id=8,
    rarity=1,
    enhancement='',
)
Vesicle = RogueBlessing(
    id=144,
    name='Vesicle',
    cn='液囊',
    cht='液囊',
    en='Vesicle',
    jp='液嚢',
    path_id=8,
    rarity=1,
    enhancement='',
)

```

`tasks/rogue/keywords/bonus.py`:

```py
from .classes import RogueBonus

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Fragmented_Cosmos = RogueBonus(
    id=1,
    name='Fragmented_Cosmos',
    cn='破碎宇宙',
    cht='破碎宇宙',
    en='Fragmented Cosmos',
    jp='破裂した宇宙',
)
Blessing_Cosmos = RogueBonus(
    id=2,
    name='Blessing_Cosmos',
    cn='祝福宇宙',
    cht='祝福宇宙',
    en='Blessing Cosmos',
    jp='祝福された宇宙',
)
Miracle_Cosmos = RogueBonus(
    id=3,
    name='Miracle_Cosmos',
    cn='神奇宇宙',
    cht='神奇宇宙',
    en='Miracle Cosmos',
    jp='奇跡的な宇宙',
)
Orderly_Universe = RogueBonus(
    id=4,
    name='Orderly_Universe',
    cn='有序宇宙',
    cht='有序宇宙',
    en='Orderly Universe',
    jp='秩序ある宇宙',
)
Hungry_Universe = RogueBonus(
    id=5,
    name='Hungry_Universe',
    cn='巨胃宇宙',
    cht='巨胃宇宙',
    en='Hungry Universe',
    jp='大食いな宇宙',
)
Bloodthirsty_Universe = RogueBonus(
    id=6,
    name='Bloodthirsty_Universe',
    cn='嗜血宇宙',
    cht='嗜血宇宙',
    en='Bloodthirsty Universe',
    jp='血を好む宇宙',
)

```

`tasks/rogue/keywords/classes.py`:

```py
from dataclasses import dataclass
from typing import ClassVar

from dev_tools.keyword_extract import UI_LANGUAGES
from module.ocr.keyword import Keyword


@dataclass(repr=False)
class RogueBlessing(Keyword):
    instances: ClassVar = {}
    path_id: int
    rarity: int
    enhancement: str

    @property
    def path_name(self):
        path = RoguePath.instances[self.path_id]
        return path.path_name

    @property
    def blessing_name(self):
        return [self.__getattribute__(f"{server}_parsed")
                for server in UI_LANGUAGES if hasattr(self, f"{server}_parsed")]


@dataclass(repr=False)
class RoguePath(Keyword):
    instances: ClassVar = {}

    @property
    def path_name(self):
        return [self.__getattribute__(f"{server}_parsed").replace("the", '')
                for server in UI_LANGUAGES if hasattr(self, f"{server}_parsed")]


@dataclass(repr=False)
class RogueResonance(Keyword):
    instances: ClassVar = {}
    path_id: int
    rarity: int

    @property
    def resonance_name(self):
        return [self.__getattribute__(f"{server}_parsed")
                for server in UI_LANGUAGES if hasattr(self, f"{server}_parsed")]


@dataclass(repr=False)
class RogueCurio(Keyword):
    instances: ClassVar = {}

    @property
    def curio_name(self):
        return [self.__getattribute__(f"{server}_parsed")
                for server in UI_LANGUAGES if hasattr(self, f"{server}_parsed")]


@dataclass(repr=False)
class RogueBonus(Keyword):
    instances: ClassVar = {}


@dataclass(repr=False)
class RogueEnhancement(Keyword):
    instances: ClassVar = {}

    @property
    def enhancement_keyword(self):
        return [self.__getattribute__(f"{server}_parsed")
                for server in UI_LANGUAGES if hasattr(self, f"{server}_parsed")]

```

`tasks/rogue/keywords/curio.py`:

```py
from .classes import RogueCurio

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Dimension_Reduction_Dice = RogueCurio(
    id=1,
    name='Dimension_Reduction_Dice',
    cn='降维骰子',
    cht='降維骰子',
    en='Dimension Reduction Dice',
    jp='次元削減ダイス',
)
Chaos_Trametes = RogueCurio(
    id=2,
    name='Chaos_Trametes',
    cn='混沌云芝',
    cht='混沌雲芝',
    en='Chaos Trametes',
    jp='混沌の雲芝',
)
Warping_Compound_Eye = RogueCurio(
    id=3,
    name='Warping_Compound_Eye',
    cn='跃迁复眼',
    cht='躍遷複眼',
    en='Warping Compound Eye',
    jp='跳躍複眼',
)
Fruit_of_the_Alien_Tree = RogueCurio(
    id=4,
    name='Fruit_of_the_Alien_Tree',
    cn='异木果实',
    cht='異木果實',
    en='Fruit of the Alien Tree',
    jp='異木の果実',
)
Casket_of_Inaccuracy = RogueCurio(
    id=5,
    name='Casket_of_Inaccuracy',
    cn='测不准匣',
    cht='測不準匣',
    en='Casket of Inaccuracy',
    jp='不確定の匣',
)
Ambergris_Cheese = RogueCurio(
    id=6,
    name='Ambergris_Cheese',
    cn='香涎干酪',
    cht='香涎乾酪',
    en='Ambergris Cheese',
    jp='香涎チーズ',
)
Fortune_Glue = RogueCurio(
    id=7,
    name='Fortune_Glue',
    cn='福灵胶',
    cht='福靈膠',
    en='Fortune Glue',
    jp='幸福クリーム',
)
The_Parchment_That_Always_Eats = RogueCurio(
    id=8,
    name='The_Parchment_That_Always_Eats',
    cn='永不停嘴的羊皮卷',
    cht='永不停嘴的羊皮卷',
    en='The Parchment That Always Eats',
    jp='おしゃべり羊皮紙',
)
Broken_Cuckoo_Clock = RogueCurio(
    id=9,
    name='Broken_Cuckoo_Clock',
    cn='破碎咕咕钟',
    cht='破碎咕咕鐘',
    en='Broken Cuckoo Clock',
    jp='壊れた鳩時計',
)
Mechanical_Cuckoo_Clock = RogueCurio(
    id=10,
    name='Mechanical_Cuckoo_Clock',
    cn='机械咕咕钟',
    cht='機械咕咕鐘',
    en='Mechanical Cuckoo Clock',
    jp='機械式鳩時計',
)
The_Doctor_Robe = RogueCurio(
    id=11,
    name='The_Doctor_Robe',
    cn='博士之袍',
    cht='博士之袍',
    en="The Doctor's Robe",
    jp='博士のローブ',
)
Society_Ticket = RogueCurio(
    id=12,
    name='Society_Ticket',
    cn='俱乐部券',
    cht='俱樂部券',
    en='Society Ticket',
    jp='クラブチケット',
)
Faith_Bond = RogueCurio(
    id=13,
    name='Faith_Bond',
    cn='信仰债券',
    cht='信仰債券',
    en='Faith Bond',
    jp='信仰債券',
)
Robe_of_The_Beauty = RogueCurio(
    id=14,
    name='Robe_of_The_Beauty',
    cn='纯美之袍',
    cht='純美之袍',
    en='Robe of The Beauty',
    jp='純美のローブ',
)
Gold_Coin_of_Discord = RogueCurio(
    id=15,
    name='Gold_Coin_of_Discord',
    cn='分裂金币',
    cht='分裂金幣',
    en='Gold Coin of Discord',
    jp='分裂金貨',
)
Useless_Typewriter = RogueCurio(
    id=16,
    name='Useless_Typewriter',
    cn='无效文字打印机',
    cht='無效文字印表機',
    en='Useless Typewriter',
    jp='無効文字タイプライター',
)
Void_Wick_Trimmer = RogueCurio(
    id=17,
    name='Void_Wick_Trimmer',
    cn='空无烛剪',
    cht='空無燭剪',
    en='Void Wick Trimmer',
    jp='空無の芯切り',
)
Omniscient_Capsule = RogueCurio(
    id=18,
    name='Omniscient_Capsule',
    cn='万识囊',
    cht='萬識囊',
    en='Omniscient Capsule',
    jp='全知袋',
)
Record_from_Beyond_the_Sky = RogueCurio(
    id=19,
    name='Record_from_Beyond_the_Sky',
    cn='天外重声大碟',
    cht='天外合唱專輯',
    en='Record from Beyond the Sky',
    jp='天外聖歌隊のレコード',
)
Entropic_Die = RogueCurio(
    id=20,
    name='Entropic_Die',
    cn='万象无常骰',
    cht='萬象無常骰',
    en='Entropic Die',
    jp='万象無常のサイコロ',
)
Shining_Trapezohedron_Die = RogueCurio(
    id=21,
    name='Shining_Trapezohedron_Die',
    cn='闪耀的偏方三八面骰',
    cht='閃耀的偏方三八面骰',
    en='Shining Trapezohedron Die',
    jp='輝くトラペゾヘドロンサイコロ',
)
Sealing_Wax_of_Preservation = RogueCurio(
    id=22,
    name='Sealing_Wax_of_Preservation',
    cn='存护火漆',
    cht='存護火漆',
    en='Sealing Wax of Preservation',
    jp='存護の封蝋',
)
Sealing_Wax_of_Elation = RogueCurio(
    id=23,
    name='Sealing_Wax_of_Elation',
    cn='欢愉火漆',
    cht='歡愉火漆',
    en='Sealing Wax of Elation',
    jp='愉悦の封蝋',
)
Sealing_Wax_of_The_Hunt = RogueCurio(
    id=24,
    name='Sealing_Wax_of_The_Hunt',
    cn='巡猎火漆',
    cht='巡獵火漆',
    en='Sealing Wax of The Hunt',
    jp='巡狩の封蝋',
)
Sealing_Wax_of_Destruction = RogueCurio(
    id=25,
    name='Sealing_Wax_of_Destruction',
    cn='毁灭火漆',
    cht='毀滅火漆',
    en='Sealing Wax of Destruction',
    jp='壊滅の封蝋',
)
Sealing_Wax_of_Remembrance = RogueCurio(
    id=26,
    name='Sealing_Wax_of_Remembrance',
    cn='记忆火漆',
    cht='記憶火漆',
    en='Sealing Wax of Remembrance',
    jp='記憶の封蝋',
)
Sealing_Wax_of_Nihility = RogueCurio(
    id=27,
    name='Sealing_Wax_of_Nihility',
    cn='虚无火漆',
    cht='虛無火漆',
    en='Sealing Wax of Nihility',
    jp='虚無の封蝋',
)
Sealing_Wax_of_Abundance = RogueCurio(
    id=28,
    name='Sealing_Wax_of_Abundance',
    cn='丰饶火漆',
    cht='豐饒火漆',
    en='Sealing Wax of Abundance',
    jp='豊穣の封蝋',
)
Corrupted_Code = RogueCurio(
    id=29,
    name='Corrupted_Code',
    cn='乱七八糟的代码',
    cht='亂七八糟的代碼',
    en='Corrupted Code',
    jp='ぐちゃぐちゃなコード',
)
Odd_Code = RogueCurio(
    id=30,
    name='Odd_Code',
    cn='有点蹊跷的代码',
    cht='有點蹊蹺的程式碼',
    en='Odd Code',
    jp='少し怪しげなコード',
)
Normal_Code = RogueCurio(
    id=31,
    name='Normal_Code',
    cn='中规中矩的代码',
    cht='中規中矩的程式碼',
    en='Normal Code',
    jp='杓子定規なコード',
)
Elegant_Code = RogueCurio(
    id=32,
    name='Elegant_Code',
    cn='精确优雅的代码',
    cht='精確優雅的程式碼',
    en='Elegant Code',
    jp='正確で完璧なコード',
)
Mysterious_Code = RogueCurio(
    id=33,
    name='Mysterious_Code',
    cn='没有注释的代码',
    cht='沒有註解的程式碼',
    en='Mysterious Code',
    jp='注釈がないコード',
)
Infinitely_Recursive_Code = RogueCurio(
    id=34,
    name='Infinitely_Recursive_Code',
    cn='无限递归的代码',
    cht='無限遞迴的程式碼',
    en='Infinitely Recursive Code',
    jp='無限再帰するコード',
)
Shattered_Star_Bait = RogueCurio(
    id=35,
    name='Shattered_Star_Bait',
    cn='碎星芳饵',
    cht='碎星芳餌',
    en='Shattered Star Bait',
    jp='砕けた星の釣り餌',
)
Obliteration_Wick_Trimmer = RogueCurio(
    id=36,
    name='Obliteration_Wick_Trimmer',
    cn='湮灭烛剪',
    cht='湮滅燭剪',
    en='Obliteration Wick Trimmer',
    jp='湮滅の芯切り',
)
Insect_Web = RogueCurio(
    id=37,
    name='Insect_Web',
    cn='虫网',
    cht='蟲網',
    en='Insect Web',
    jp='虫網',
)
Angel_type_I_O_U_Dispenser = RogueCurio(
    id=38,
    name='Angel_type_I_O_U_Dispenser',
    cn='天使型谢债发行机',
    cht='天使型謝債發行機',
    en='Angel-type I.O.U. Dispenser',
    jp='天使型謝債発行機',
)
Laurel_Crown_of_Planar_Shifts = RogueCurio(
    id=39,
    name='Laurel_Crown_of_Planar_Shifts',
    cn='换境桂冠',
    cht='換境桂冠',
    en='Laurel Crown of Planar Shifts',
    jp='換境桂冠',
)
Space_Time_Prism = RogueCurio(
    id=40,
    name='Space_Time_Prism',
    cn='时空棱镜',
    cht='時空稜鏡',
    en='Space-Time Prism',
    jp='時空のプリズム',
)
Cosmic_Big_Lotto = RogueCurio(
    id=41,
    name='Cosmic_Big_Lotto',
    cn='银河大乐透',
    cht='銀河大樂透',
    en='Cosmic Big Lotto',
    jp='銀河ビッグロッタリー',
)
Divination_Cuckoo_Clock = RogueCurio(
    id=42,
    name='Divination_Cuckoo_Clock',
    cn='卜筮咕咕钟',
    cht='卜筮咕咕鐘',
    en='Divination Cuckoo Clock',
    jp='占い鳩時計',
)
Black_Forest_Cuckoo_Clock = RogueCurio(
    id=43,
    name='Black_Forest_Cuckoo_Clock',
    cn='黑森林咕咕钟',
    cht='黑森林咕咕鐘',
    en='Black Forest Cuckoo Clock',
    jp='黒森鳩時計',
)
Perpetual_Motion_Cuckoo_Clock = RogueCurio(
    id=44,
    name='Perpetual_Motion_Cuckoo_Clock',
    cn='永动咕咕钟',
    cht='永動咕咕鐘',
    en='Perpetual Motion Cuckoo Clock',
    jp='永久鳩時計',
)
Punklorde_Mentality = RogueCurio(
    id=45,
    name='Punklorde_Mentality',
    cn='朋克洛德精神',
    cht='龐克洛德精神',
    en='Punklorde Mentality',
    jp='パンクロードの精神',
)
Beacon_Coloring_Paste = RogueCurio(
    id=46,
    name='Beacon_Coloring_Paste',
    cn='信标着色剂',
    cht='信標著色劑',
    en='Beacon Coloring Paste',
    jp='ビーコン着色剤',
)
IPC_Cuckoo_Clock = RogueCurio(
    id=47,
    name='IPC_Cuckoo_Clock',
    cn='公司咕咕钟',
    cht='公司咕咕鐘',
    en='IPC Cuckoo Clock',
    jp='カンパニー鳩時計',
)
Triangular_Drum_roll_Device = RogueCurio(
    id=48,
    name='Triangular_Drum_roll_Device',
    cn='三角滚奏器',
    cht='三角滾奏器',
    en='Triangular Drum-roll Device',
    jp='トライアングル',
)
Silver_Coin_of_Discord = RogueCurio(
    id=49,
    name='Silver_Coin_of_Discord',
    cn='分裂银币',
    cht='分裂銀幣',
    en='Silver Coin of Discord',
    jp='分裂銀貨',
)
Family_Ties = RogueCurio(
    id=50,
    name='Family_Ties',
    cn='家族缘结',
    cht='家族緣結',
    en='Family Ties',
    jp='ファミリーの絆結び',
)
Medal_of_the_Gloryblood_Era = RogueCurio(
    id=51,
    name='Medal_of_the_Gloryblood_Era',
    cn='血锦之纪徽章',
    cht='血錦之紀徽章',
    en='Medal of the Gloryblood Era',
    jp='血錦の徽章',
)
Black_Hole_Trap = RogueCurio(
    id=52,
    name='Black_Hole_Trap',
    cn='黑洞之阱',
    cht='黑洞之阱',
    en='Black Hole Trap',
    jp='ブラックホールの罠',
)
Interastral_Big_Lotto = RogueCurio(
    id=53,
    name='Interastral_Big_Lotto',
    cn='星际大乐透',
    cht='星際大樂透',
    en='Interastral Big Lotto',
    jp='星間ビッグロッタリー',
)
Fissured_Cuckoo_Clock = RogueCurio(
    id=54,
    name='Fissured_Cuckoo_Clock',
    cn='分裂咕咕钟',
    cht='分裂咕咕鐘',
    en='Fissured Cuckoo Clock',
    jp='分裂鳩時計',
)
Typical_Genius_Society_Gossip = RogueCurio(
    id=55,
    name='Typical_Genius_Society_Gossip',
    cn='天才俱乐部普通八卦',
    cht='天才俱樂部普通八卦',
    en='Typical Genius Society Gossip',
    jp='天才クラブの他愛もない噂話',
)
Tonic_of_Efficacious_Chaos = RogueCurio(
    id=56,
    name='Tonic_of_Efficacious_Chaos',
    cn='混沌特效灵药',
    cht='混沌特效靈藥',
    en='Tonic of Efficacious Chaos',
    jp='混沌の特效霊薬',
)
Rubert_Empire_Mechanical_Cogwheel = RogueCurio(
    id=57,
    name='Rubert_Empire_Mechanical_Cogwheel',
    cn='鲁珀特帝国机械齿轮',
    cht='魯珀特帝國機械齒輪',
    en='Rubert Empire Mechanical Cogwheel',
    jp='ルパート帝国の機械歯車',
)
Cavity_System_Model = RogueCurio(
    id=58,
    name='Cavity_System_Model',
    cn='龋齿星系模型',
    cht='齲齒星系模型',
    en='Cavity System Model',
    jp='虫歯星系模型',
)
Tousled_Detective = RogueCurio(
    id=59,
    name='Tousled_Detective',
    cn='《鸡窝头侦探》',
    cht='《雞窩頭偵探》',
    en='Tousled Detective',
    jp='『ボサ頭探偵』',
)
Fool_Mask = RogueCurio(
    id=60,
    name='Fool_Mask',
    cn='愚者面具',
    cht='愚者面具',
    en="Fool's Mask",
    jp='愚者の仮面',
)
Vile_Mechanical_Satellite_900 = RogueCurio(
    id=61,
    name='Vile_Mechanical_Satellite_900',
    cn='邪恶机械卫星#900',
    cht='邪惡機械衛星#900',
    en='Vile Mechanical Satellite #900',
    jp='邪悪な機械衛星#900',
)
Spirit_of_the_Knights_of_Beauty = RogueCurio(
    id=62,
    name='Spirit_of_the_Knights_of_Beauty',
    cn='纯美骑士精神',
    cht='純美騎士精神',
    en='Spirit of the Knights of Beauty',
    jp='純美の騎士道',
)
Illusory_Automaton = RogueCurio(
    id=63,
    name='Illusory_Automaton',
    cn='虚构机兵',
    cht='虛構機兵',
    en='Illusory Automaton',
    jp='虚構機兵',
)
A_Pinch_of_Bearded_Gunpowder = RogueCurio(
    id=64,
    name='A_Pinch_of_Bearded_Gunpowder',
    cn='一撮胡须火药',
    cht='一撮鬍鬚火藥',
    en='A Pinch of Bearded Gunpowder',
    jp='ひげの爆薬',
)
Man_Made_Meteorite = RogueCurio(
    id=65,
    name='Man_Made_Meteorite',
    cn='人造陨石球',
    cht='人造隕石球',
    en='Man-Made Meteorite',
    jp='人造隕石',
)
Thalan_Toxi_Flame = RogueCurio(
    id=66,
    name='Thalan_Toxi_Flame',
    cn='塔拉毒火焰',
    cht='塔拉毒火焰',
    en='Thalan Toxi-Flame',
    jp='ターラの毒火炎',
)
The_Pinkest_Collision = RogueCurio(
    id=67,
    name='The_Pinkest_Collision',
    cn='粉红冲撞',
    cht='粉紅衝撞',
    en='The Pinkest Collision',
    jp='ピンクショック',
)
Sealing_Wax_of_Propagation = RogueCurio(
    id=68,
    name='Sealing_Wax_of_Propagation',
    cn='繁育火漆',
    cht='繁育火漆',
    en='Sealing Wax of Propagation',
    jp='繁殖の封蝋',
)

```

`tasks/rogue/keywords/enhancement.py`:

```py
from .classes import RogueEnhancement

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Already_Enhanced = RogueEnhancement(
    id=1,
    name='Already_Enhanced',
    cn='已强化',
    cht='已強化',
    en='Already Enhanced',
    jp='強化済み',
)

```

`tasks/rogue/keywords/path.py`:

```py
from .classes import RoguePath

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Preservation = RoguePath(
    id=1,
    name='Preservation',
    cn='存护',
    cht='存護',
    en='Preservation',
    jp='存護',
)
Remembrance = RoguePath(
    id=2,
    name='Remembrance',
    cn='记忆',
    cht='記憶',
    en='Remembrance',
    jp='記憶',
)
Nihility = RoguePath(
    id=3,
    name='Nihility',
    cn='虚无',
    cht='虛無',
    en='Nihility',
    jp='虚無',
)
Abundance = RoguePath(
    id=4,
    name='Abundance',
    cn='丰饶',
    cht='豐饒',
    en='Abundance',
    jp='豊穣',
)
The_Hunt = RoguePath(
    id=5,
    name='The_Hunt',
    cn='巡猎',
    cht='巡獵',
    en='The Hunt',
    jp='巡狩',
)
Destruction = RoguePath(
    id=6,
    name='Destruction',
    cn='毁灭',
    cht='毀滅',
    en='Destruction',
    jp='壊滅',
)
Elation = RoguePath(
    id=7,
    name='Elation',
    cn='欢愉',
    cht='歡愉',
    en='Elation',
    jp='愉悦',
)
Propagation = RoguePath(
    id=8,
    name='Propagation',
    cn='繁育',
    cht='繁育',
    en='Propagation',
    jp='繁殖',
)

```

`tasks/rogue/keywords/resonance.py`:

```py
from .classes import RogueResonance

# This file was auto-generated, do not modify it manually. To generate:
# ``` python -m dev_tools.keyword_extract ```

Path_Resonance_Preservation = RogueResonance(
    id=1,
    name='Path_Resonance_Preservation',
    cn='命途回响：「存护」',
    cht='命途迴響：「存護」',
    en='Path Resonance: Preservation',
    jp='運命の反響：「存護」',
    path_id=1,
    rarity=3,
)
Resonance_Formation_Zero_Dimensional_Reinforcement = RogueResonance(
    id=2,
    name='Resonance_Formation_Zero_Dimensional_Reinforcement',
    cn='回响构音：零维强化',
    cht='迴響構音：零維強化',
    en='Resonance Formation: Zero-Dimensional Reinforcement',
    jp='反響構音：析出硬化',
    path_id=1,
    rarity=3,
)
Resonance_Formation_Eutectic_Reaction = RogueResonance(
    id=3,
    name='Resonance_Formation_Eutectic_Reaction',
    cn='回响构音：共晶反应',
    cht='迴響構音：共晶反應',
    en='Resonance Formation: Eutectic Reaction',
    jp='反響構音：共晶反応',
    path_id=1,
    rarity=3,
)
Resonance_Formation_Isomorphous_Reaction = RogueResonance(
    id=4,
    name='Resonance_Formation_Isomorphous_Reaction',
    cn='回响构音：均晶转变',
    cht='迴響構音：均晶轉變',
    en='Resonance Formation: Isomorphous Reaction',
    jp='反響構音：全率固溶体',
    path_id=1,
    rarity=3,
)
Resonance_Interplay_Spiked_Armor = RogueResonance(
    id=5,
    name='Resonance_Interplay_Spiked_Armor',
    cn='回响交错：披锋效应',
    cht='迴響交錯：披鋒效應',
    en='Resonance Interplay: Spiked Armor',
    jp='反響交錯：トリミング加工',
    path_id=1,
    rarity=3,
)
Resonance_Interplay_Cold_Snap = RogueResonance(
    id=6,
    name='Resonance_Interplay_Cold_Snap',
    cn='回响交错：冷脆现象',
    cht='迴響交錯：冷脆現象',
    en='Resonance Interplay: Cold Snap',
    jp='反響交錯：低温脆性',
    path_id=1,
    rarity=3,
)
Path_Resonance_Remembrance = RogueResonance(
    id=7,
    name='Path_Resonance_Remembrance',
    cn='命途回响：「记忆」',
    cht='命途迴響：「記憶」',
    en='Path Resonance: Remembrance',
    jp='運命の反響：「記憶」',
    path_id=2,
    rarity=3,
)
Resonance_Formation_Total_Recall = RogueResonance(
    id=8,
    name='Resonance_Formation_Total_Recall',
    cn='回响构音：全面回忆',
    cht='迴響構音：全面回憶',
    en='Resonance Formation: Total Recall',
    jp='反響構音：全面追憶',
    path_id=2,
    rarity=3,
)
Resonance_Formation_Rich_Experience = RogueResonance(
    id=9,
    name='Resonance_Formation_Rich_Experience',
    cn='回响构音：体验的富翁',
    cht='迴響構音：體驗的富翁',
    en='Resonance Formation: Rich Experience',
    jp='反響構音：体験の富豪',
    path_id=2,
    rarity=3,
)
Resonance_Formation_First_Love_Once_More = RogueResonance(
    id=10,
    name='Resonance_Formation_First_Love_Once_More',
    cn='回响构音：第二次初恋',
    cht='迴響構音：第二次初戀',
    en='Resonance Formation: First Love Once More',
    jp='反響構音：二度目の初恋',
    path_id=2,
    rarity=3,
)
Resonance_Interplay_Faces_Places = RogueResonance(
    id=11,
    name='Resonance_Interplay_Faces_Places',
    cn='回响交错：脸庞，村庄',
    cht='迴響交錯：臉龐，村莊',
    en='Resonance Interplay: Faces Places',
    jp='反響交錯：顔、村',
    path_id=2,
    rarity=3,
)
Resonance_Interplay_Landscape_in_the_Mist = RogueResonance(
    id=12,
    name='Resonance_Interplay_Landscape_in_the_Mist',
    cn='回响交错：雾中风景',
    cht='迴響交錯：霧中風景',
    en='Resonance Interplay: Landscape in the Mist',
    jp='反響交錯：霧の中の風景',
    path_id=2,
    rarity=3,
)
Path_Resonance_Nihility = RogueResonance(
    id=13,
    name='Path_Resonance_Nihility',
    cn='命途回响：「虚无」',
    cht='命途迴響：「虛無」',
    en='Path Resonance: Nihility',
    jp='運命の反響：「虚無」',
    path_id=3,
    rarity=3,
)
Resonance_Formation_The_Doubtful_Fourfold_Root = RogueResonance(
    id=14,
    name='Resonance_Formation_The_Doubtful_Fourfold_Root',
    cn='回响构音：怀疑的四重根',
    cht='迴響構音：懷疑的四重根',
    en='Resonance Formation: The Doubtful Fourfold Root',
    jp='反響構音：疑いの四つの根',
    path_id=3,
    rarity=3,
)
Resonance_Formation_Suffering_and_Sunshine = RogueResonance(
    id=15,
    name='Resonance_Formation_Suffering_and_Sunshine',
    cn='回响构音：苦难与阳光',
    cht='迴響構音：苦難與陽光',
    en='Resonance Formation: Suffering and Sunshine',
    jp='反響構音：苦難と陽光',
    path_id=3,
    rarity=3,
)
Resonance_Formation_Outsider = RogueResonance(
    id=16,
    name='Resonance_Formation_Outsider',
    cn='回响构音：局外人',
    cht='迴響構音：局外人',
    en='Resonance Formation: Outsider',
    jp='反響構音：異邦人',
    path_id=3,
    rarity=3,
)
Resonance_Interplay_Off_the_Beaten_Track = RogueResonance(
    id=17,
    name='Resonance_Interplay_Off_the_Beaten_Track',
    cn='回响交错：林中路',
    cht='迴響交錯：林中路',
    en='Resonance Interplay: Off the Beaten Track',
    jp='反響交錯：森の中の道',
    path_id=3,
    rarity=3,
)
Resonance_Interplay_White_Nights = RogueResonance(
    id=18,
    name='Resonance_Interplay_White_Nights',
    cn='回响交错：白夜',
    cht='迴響交錯：白夜',
    en='Resonance Interplay: White Nights',
    jp='反響交錯：白夜',
    path_id=3,
    rarity=3,
)
Path_Resonance_Abundance = RogueResonance(
    id=19,
    name='Path_Resonance_Abundance',
    cn='命途回响：「丰饶」',
    cht='命途迴響：「豐饒」',
    en='Path Resonance: Abundance',
    jp='運命の反響：「豊穣」',
    path_id=4,
    rarity=3,
)
Resonance_Formation_Terminal_Nirvana = RogueResonance(
    id=20,
    name='Resonance_Formation_Terminal_Nirvana',
    cn='回响构音：无余涅槃',
    cht='迴響構音：無餘涅槃',
    en='Resonance Formation: Terminal Nirvana',
    jp='反響構音：無余涅槃',
    path_id=4,
    rarity=3,
)
Resonance_Formation_Anicca = RogueResonance(
    id=21,
    name='Resonance_Formation_Anicca',
    cn='回响构音：诸行无常',
    cht='迴響構音：諸行無常',
    en='Resonance Formation: Anicca',
    jp='反響構音：諸行無常',
    path_id=4,
    rarity=3,
)
Resonance_Formation_Anatta = RogueResonance(
    id=22,
    name='Resonance_Formation_Anatta',
    cn='回响构音：诸法无我',
    cht='迴響構音：諸法無我',
    en='Resonance Formation: Anatta',
    jp='反響構音：諸法無我',
    path_id=4,
    rarity=3,
)
Resonance_Interplay_First_Illuminate_the_Mountains = RogueResonance(
    id=23,
    name='Resonance_Interplay_First_Illuminate_the_Mountains',
    cn='回响交错：先照高山',
    cht='迴響交錯：先照高山',
    en='Resonance Interplay: First Illuminate the Mountains',
    jp='反響交錯：先に山を照らす',
    path_id=4,
    rarity=3,
)
Resonance_Interplay_Nullifying_Ardor = RogueResonance(
    id=24,
    name='Resonance_Interplay_Nullifying_Ardor',
    cn='回响交错：旃檀薪尽',
    cht='迴響交錯：旃檀薪盡',
    en='Resonance Interplay: Nullifying Ardor',
    jp='反響交錯：センダンの薪尽きる',
    path_id=4,
    rarity=3,
)
Path_Resonance_The_Hunt = RogueResonance(
    id=25,
    name='Path_Resonance_The_Hunt',
    cn='命途回响：「巡猎」',
    cht='命途迴響：「巡獵」',
    en='Path Resonance: The Hunt',
    jp='運命の反響：「巡狩」',
    path_id=5,
    rarity=3,
)
Resonance_Formation_Star_Hunter = RogueResonance(
    id=26,
    name='Resonance_Formation_Star_Hunter',
    cn='回响构音：狩星巡日',
    cht='迴響構音：狩星巡日',
    en='Resonance Formation: Star Hunter',
    jp='反響構音：星を狩りて日を巡る',
    path_id=5,
    rarity=3,
)
Resonance_Formation_Bow_and_Arrow = RogueResonance(
    id=27,
    name='Resonance_Formation_Bow_and_Arrow',
    cn='回响构音：柘弓危矢',
    cht='迴響構音：柘弓危矢',
    en='Resonance Formation: Bow and Arrow',
    jp='反響構音：柘弓に疾矢',
    path_id=5,
    rarity=3,
)
Resonance_Formation_Perfect_Aim = RogueResonance(
    id=28,
    name='Resonance_Formation_Perfect_Aim',
    cn='回响构音：射不主皮',
    cht='迴響構音：射不主皮',
    en='Resonance Formation: Perfect Aim',
    jp='反響構音：射は皮を主とせず',
    path_id=5,
    rarity=3,
)
Resonance_Interplay_Startling_Breeze = RogueResonance(
    id=29,
    name='Resonance_Interplay_Startling_Breeze',
    cn='回响交错：足逸惊飙',
    cht='迴響交錯：足逸驚飆',
    en='Resonance Interplay: Startling Breeze',
    jp='反響交錯：足元の突風',
    path_id=5,
    rarity=3,
)
Resonance_Interplay_Shooting_Starfire = RogueResonance(
    id=30,
    name='Resonance_Interplay_Shooting_Starfire',
    cn='回响交错：火驰星流',
    cht='迴響交錯：火馳星流',
    en='Resonance Interplay: Shooting Starfire',
    jp='反響交錯：恒星ストリーム',
    path_id=5,
    rarity=3,
)
Path_Resonance_Destruction = RogueResonance(
    id=31,
    name='Path_Resonance_Destruction',
    cn='命途回响：「毁灭」',
    cht='命途迴響：「毀滅」',
    en='Path Resonance: Destruction',
    jp='運命の反響：「壊滅」',
    path_id=6,
    rarity=3,
)
Resonance_Formation_Cataclysmic_Variable = RogueResonance(
    id=32,
    name='Resonance_Formation_Cataclysmic_Variable',
    cn='回响构音：激变变星',
    cht='迴響構音：激變變星',
    en='Resonance Formation: Cataclysmic Variable',
    jp='反響構音：激変星',
    path_id=6,
    rarity=3,
)
Resonance_Formation_Extreme_Helium_Flash = RogueResonance(
    id=33,
    name='Resonance_Formation_Extreme_Helium_Flash',
    cn='回响构音：极端氦闪',
    cht='迴響構音：極端氦閃',
    en='Resonance Formation: Extreme Helium Flash',
    jp='反響構音：ヘリウムフラッシュ',
    path_id=6,
    rarity=3,
)
Resonance_Formation_Event_Horizon = RogueResonance(
    id=34,
    name='Resonance_Formation_Event_Horizon',
    cn='回响构音：事件视界',
    cht='迴響構音：事件視界',
    en='Resonance Formation: Event Horizon',
    jp='反響構音：事象の地平線',
    path_id=6,
    rarity=3,
)
Resonance_Interplay_Substellar_Belt = RogueResonance(
    id=35,
    name='Resonance_Interplay_Substellar_Belt',
    cn='回响交错：次行星带',
    cht='迴響交錯：次行星帶',
    en='Resonance Interplay: Substellar Belt',
    jp='反響交錯：準惑星帯',
    path_id=6,
    rarity=3,
)
Resonance_Interplay_Zero_Age_Main_Sequence = RogueResonance(
    id=36,
    name='Resonance_Interplay_Zero_Age_Main_Sequence',
    cn='回响交错：零龄主序',
    cht='迴響交錯：零齡主序',
    en='Resonance Interplay: Zero Age Main Sequence',
    jp='反響交錯：零歳主系列',
    path_id=6,
    rarity=3,
)
Path_Resonance_Elation = RogueResonance(
    id=37,
    name='Path_Resonance_Elation',
    cn='命途回响：「欢愉」',
    cht='命途迴響：「歡愉」',
    en='Path Resonance: Elation',
    jp='運命の反響：「愉悦」',
    path_id=7,
    rarity=3,
)
Resonance_Formation_Doomsday_Carnival = RogueResonance(
    id=38,
    name='Resonance_Formation_Doomsday_Carnival',
    cn='回响构音：末日狂欢',
    cht='迴響構音：末日狂歡',
    en='Resonance Formation: Doomsday Carnival',
    jp='反響構音：終末の狂宴',
    path_id=7,
    rarity=3,
)
Resonance_Formation_Dance_of_Growth = RogueResonance(
    id=39,
    name='Resonance_Formation_Dance_of_Growth',
    cn='回响构音：树苗长高舞',
    cht='迴響構音：樹苗長高舞',
    en='Resonance Formation: Dance of Growth',
    jp='反響構音：苗木が育つ踊り',
    path_id=7,
    rarity=3,
)
Resonance_Formation_Instant_Win = RogueResonance(
    id=40,
    name='Resonance_Formation_Instant_Win',
    cn='回响构音：开盖有奖',
    cht='迴響構音：開蓋有獎',
    en='Resonance Formation: Instant Win',
    jp='反響構音：もう1本',
    path_id=7,
    rarity=3,
)
Resonance_Interplay_The_Taste_of_Anglerfish = RogueResonance(
    id=41,
    name='Resonance_Interplay_The_Taste_of_Anglerfish',
    cn='回响交错：安康鱼之味',
    cht='迴響交錯：鮟鱇魚之味',
    en='Resonance Interplay: The Taste of Anglerfish',
    jp='反響交錯：アンコウの味',
    path_id=7,
    rarity=3,
)
Resonance_Interplay_Guinea_Pig_in_Ice_Coffin = RogueResonance(
    id=42,
    name='Resonance_Interplay_Guinea_Pig_in_Ice_Coffin',
    cn='回响交错：冰棺与豚鼠',
    cht='迴響交錯：冰棺與豚鼠',
    en='Resonance Interplay: Guinea Pig in Ice Coffin',
    jp='反響交錯：氷の棺とモルモット',
    path_id=7,
    rarity=3,
)
Path_Resonance_Propagation = RogueResonance(
    id=43,
    name='Path_Resonance_Propagation',
    cn='命途回响：「繁育」',
    cht='命途迴響：「繁育」',
    en='Path Resonance: Propagation',
    jp='運命の反響：「繁殖」',
    path_id=8,
    rarity=3,
)
Resonance_Formation_Proboscis = RogueResonance(
    id=44,
    name='Resonance_Formation_Proboscis',
    cn='回响构音：刺吸口器',
    cht='迴響構音：刺吸口器',
    en='Resonance Formation: Proboscis',
    jp='反響構音：吸収口器',
    path_id=8,
    rarity=3,
)
Resonance_Formation_Phenol_Compounds = RogueResonance(
    id=45,
    name='Resonance_Formation_Phenol_Compounds',
    cn='回响构音：酚类物质',
    cht='迴響構音：酚類物質',
    en='Resonance Formation: Phenol Compounds',
    jp='反響構音：フェノール類',
    path_id=8,
    rarity=3,
)
Resonance_Formation_Crystal_Pincers = RogueResonance(
    id=46,
    name='Resonance_Formation_Crystal_Pincers',
    cn='回响构音：结晶螯刺',
    cht='迴響構音：結晶螯刺',
    en='Resonance Formation: Crystal Pincers',
    jp='反響構音：結晶毒針',
    path_id=8,
    rarity=3,
)
Resonance_Interplay_Superposition_Eye = RogueResonance(
    id=47,
    name='Resonance_Interplay_Superposition_Eye',
    cn='回响交错：重叠象眼',
    cht='迴響交錯：重疊象眼',
    en='Resonance Interplay: Superposition Eye',
    jp='反響交錯：重複像眼',
    path_id=8,
    rarity=3,
)
Resonance_Interplay_Adherent_Microbial_Mat = RogueResonance(
    id=48,
    name='Resonance_Interplay_Adherent_Microbial_Mat',
    cn='回响交错：附着菌毯',
    cht='迴響交錯：附著菌毯',
    en='Resonance Interplay: Adherent Microbial Mat',
    jp='反響交錯：菌膜付着',
    path_id=8,
    rarity=3,
)

```

`webapp/LICENSE`:

```
MIT License

Copyright (c) 2021 Alex Kozack

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```

`webapp/README.md`:

```md
# Vite Electron Builder Boilerplate

This is a template for secure electron applications. Written following the latest safety requirements, recommendations
and best practices.

Under the hood is [Vite] — A next-generation blazing fast bundler, and [electron-builder] for packaging.

## Get started

Follow these steps to get started with the template:

1. Click the **[Use this template](https://github.com/cawa-93/vite-electron-builder/generate)** button (you must be
   logged in) or just clone this repo.
2. If you want to use another package manager you may need to edit [`.github/workflows`](/.github/workflows) — [it
   uses `npm` by default](https://github.com/search?q=npm+repo%3Acawa-93%2Fvite-electron-builder+path%3A.github%2Fworkflows&type=Code&ref=advsearch&l=&l=).
3. If you like this template, don't forget to give a github star or send support! ⭐♥

That's all you need. 😉

> **Note**:
> This template uses npm v7 feature — [**Installing Peer Dependencies
Automatically**](https://github.com/npm/rfcs/blob/latest/implemented/0025-install-peer-deps.md). If you are using a
different package manager, you may need to install some peerDependencies manually.

## Features

### Electron [![Electron version](https://img.shields.io/github/package-json/dependency-version/cawa-93/vite-electron-builder/dev/electron?label=%20)][electron]

- This template uses the latest electron version with all the latest security patches.
- The architecture of the application is built according to the
  security [guides](https://www.electronjs.org/docs/tutorial/security) and best practices.
- The latest version of the [electron-builder] is used to package the application.

### Vite [![Vite version](https://img.shields.io/github/package-json/dependency-version/cawa-93/vite-electron-builder/dev/vite?label=%20)][vite]

- [Vite] is used to bundle all source codes. It's an extremely fast bundler, that has a vast array of amazing features.
  You can learn more about how it is arranged in [this](https://www.youtube.com/watch?v=xXrhg26VCSc) video.
- Vite [supports](https://vitejs.dev/guide/env-and-mode.html) reading `.env` files. You can also specify the types of
  your environment variables in [`types/env.d.ts`](types/env.d.ts).
- Automatic hot-reloads for the `Main` and `Renderer` processes.

Vite provides many useful features, such as: `TypeScript`, `TSX/JSX`, `CSS/JSON Importing`, `CSS Modules`
, `Web Assembly` and much more.

> [See all Vite features](https://vitejs.dev/guide/features.html).

### TypeScript [![TypeScript version](https://img.shields.io/github/package-json/dependency-version/cawa-93/vite-electron-builder/dev/typescript?label=%20)][typescript] (optional)

- The latest version of TypeScript is used for all the source code.
- **Vite** supports TypeScript out of the box. However, it does not support type checking.
- Code formatting rules follow the latest TypeScript recommendations and best practices thanks
  to [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin).

> [Guide to disable typescript and remove dependencies](https://github.com/cawa-93/vite-electron-builder/discussions/339) 

### Vue [![Vue version](https://img.shields.io/github/package-json/dependency-version/cawa-93/vite-electron-builder/dev/vue?label=%20&)][vue] (optional)

- By default, web pages are built using [Vue]. However, you can easily change that. Or not use additional frameworks at
  all.
- Code formatting rules follow the latest Vue recommendations and best practices thanks to [eslint-plugin-vue].

> [Find more forks 🔱 for others frameworks or setups](https://github.com/cawa-93/vite-electron-builder/discussions/categories/forks)

### Continuous Integration

- The configured workflow will check the types for each push and PR.
- The configured workflow will check the code style for each push and PR.
- **Automatic tests**
  used [Vitest ![Vitest version](https://img.shields.io/github/package-json/dependency-version/cawa-93/vite-electron-builder/dev/vitest?label=%20&color=yellow)][vitest]
  -- A blazing fast test framework powered by Vite.
  - Unit tests are placed within each package and are ran separately.
  - End-to-end tests are placed in the root [`tests`](tests) directory and use [playwright].

![Workflow graph](https://user-images.githubusercontent.com/1662812/213429323-ef4bcc87-c273-4f2f-b77f-c04cf6dbc36d.png)


### Publishing

- Each time you push changes to the `main` branch, the [`release`](.github/workflows/release.yml) workflow starts, which creates a new draft release. For each next commit will be created and replaced artifacts. That way you will always have draft with latest artifacts, and the release can be published once it is ready. 
  - Code signing supported. See [`release` workflow](.github/workflows/release.yml).
  - **Auto-update is supported**. After the release is published, all client applications will download the new version
  and install updates silently.
  
> **Note**:
> This template **configured only for GitHub public repository**, but electron-builder also supports other update distribution servers. Find more in [electron-builder docs](https://www.electron.build/configuration/publish).

## How it works

The template requires a minimum amount [dependencies](package.json). Only **Vite** is used for building, nothing more.

### Project Structure

The structure of this template is very similar to a monorepo. The entire source code of the project is divided into three modules (packages) that are each bundled independently:

- [`packages/renderer`](packages/renderer). Responsible for the contents of the application window. In fact, it is a
  regular web application. In developer mode, you can even open it in a browser. The development and build process is
  the same as for classic web applications. Access to low-level API electrons or Node.js is done through the _preload_
  layer.
- [`packages/preload`](packages/preload). Contain Electron [**preload scripts**](https://www.electronjs.org/docs/latest/tutorial/tutorial-preload). Acts as an intermediate bridge between the _renderer_ process and the API
  exposed by electron and Node.js. Runs in an _isolated browser context_, but has direct access to the full Node.js
  functionality.
- [`packages/main`](packages/main)
  Contain Electron [**main script**](https://www.electronjs.org/docs/tutorial/quick-start#create-the-main-script-file). This is
  the main process that powers the application. It manages creating and handling the spawned BrowserWindow, setting and
  enforcing secure permissions and request handlers. You can also configure it to do much more as per your need, such
  as: logging, reporting statistics and health status among others.

Schematically, the structure of the application and the method of communication between packages can be depicted as follows:
```mermaid
flowchart TB;

packages/preload <-. IPC Messages .-> packages/main

    subgraph packages/main["packages/main (Shared beatween all windows)"]
    M[index.ts] --> EM[Electron Main Process Modules]
    M --> N2[Node.js API]
    end

subgraph Window["Browser Window"]
    subgraph packages/preload["packages/preload (Works in isolated context)"]
    P[index.ts] --> N[Node.js API]
    P --> ED[External dependencies]
    P --> ER[Electron Renderer Process Modules]
    end


    subgraph packages/renderer
    R[index.html] --> W[Web API]
    R --> BD[Bundled dependencies]
    R --> F[Web Frameforks]
    end
    end

packages/renderer -- Call Exposed API --> P
```
### Build web resources

The `main` and `preload` packages are built in [library mode](https://vitejs.dev/guide/build.html#library-mode) as it is
simple javascript.
The `renderer` package builds as a regular web app.

### Compile App

The next step is to package a ready to distribute Electron app for macOS, Windows and Linux with "auto update" support
out of the box.

To do this, use [electron-builder]:

- Using the npm script `compile`: This script is configured to compile the application as quickly as possible. It is not
  ready for distribution, it is compiled only for the current platform and is used for debugging.
- Using GitHub Actions: The application is compiled for any platform and ready-to-distribute files are automatically
  added as a draft to the GitHub releases page.

### Working with dependencies

Because the `renderer` works and builds like a _regular web application_, you can only use dependencies that support the
browser or compile to a browser-friendly format.

This means that in the `renderer` you are free to use any frontend dependencies such as Vue, React, lodash, axios and so
on. However, you _CANNOT_ use any native Node.js APIs, such as, `systeminformation`. These APIs are _only_ available in
a Node.js runtime environment and will cause your application to crash if used in the `renderer` layer. Instead, if you
need access to Node.js runtime APIs in your frontend, export a function form the `preload` package.

All dependencies that require Node.js api can be used in
the [`preload` script](https://www.electronjs.org/docs/latest/tutorial/process-model#preload-scripts).

#### Expose in main world
Here is an example. Let's say you need to read some data from the file system or database in the renderer.

In the preload context, create a function that reads and returns data. To make the function announced in the preload
available in the render, you usually need to call
the [`electron.contextBridge.exposeInMainWorld`](https://www.electronjs.org/ru/docs/latest/api/context-bridge). However,
this template uses the [unplugin-auto-expose](https://github.com/cawa-93/unplugin-auto-expose) plugin, so you just need
to export the method from the preload. The `exposeInMainWorld` will be called automatically.

```ts
// preload/index.ts
import { readFile } from 'node:fs/promises';

// Encapsulate types if you use typescript
interface UserData {
  prop: string
}

// Encapsulate all node.js api
// Everything you exported from preload/index.ts may be called in renderer
export function getUserData(): Promise<UserData> {
  return readFile('/path/to/file/in/user/filesystem.json', {encoding:'utf8'}).then(JSON.parse);
}
```

Now you can import and call the method in renderer

```ts
// renderer/anywere/component.ts
import { getUserData } from '#preload'
const userData = await getUserData()
```

> Find more in [Context Isolation tutorial](https://www.electronjs.org/docs/tutorial/context-isolation#security-considerations).

### Working with Electron API

Although the preload has access to all of Node.js's API, it **still runs in the BrowserWindow context**, so a limited
electron modules are available in it. Check the [electron docs](https://www.electronjs.org/ru/docs/latest/api/clipboard)
for full list of available methods.

All other electron methods can be invoked in the `main`.

As a result, the architecture of interaction between all modules is as follows:

```mermaid
sequenceDiagram
renderer->>+preload: Read data from file system
preload->>-renderer: Data
renderer->>preload: Maximize window
activate preload
preload-->>main: Invoke IPC command
activate main
main-->>preload: IPC response
deactivate main
preload->>renderer: Window maximized
deactivate preload
```

> Find more in [Inter-Process Communication tutorial](https://www.electronjs.org/docs/latest/tutorial/ipc).

### Modes and Environment Variables

All environment variables are set as part of the `import.meta`, so you can access them vie the following
way: `import.meta.env`.

> **Note**:
> If you are using TypeScript and want to get code completion you must add all the environment variables to
the [`ImportMetaEnv` in `types/env.d.ts`](types/env.d.ts).

The mode option is used to specify the value of `import.meta.env.MODE` and the corresponding environment variables files
that need to be loaded.

By default, there are two modes:

- `production` is used by default
- `development` is used by `npm run watch` script

When running the build script, the environment variables are loaded from the following files in your project root:

```
.env                # loaded in all cases
.env.local          # loaded in all cases, ignored by git
.env.[mode]         # only loaded in specified env mode
.env.[mode].local   # only loaded in specified env mode, ignored by git
```

> **Warning**: 
> To prevent accidentally leaking env variables to the client, only variables prefixed with `VITE_` are exposed to your
Vite-processed code.

For example let's take the following `.env` file:

```
DB_PASSWORD=foobar
VITE_SOME_KEY=123
```

Only `VITE_SOME_KEY` will be exposed as `import.meta.env.VITE_SOME_KEY` to your client source code, but `DB_PASSWORD`
will not.

You can change that prefix or add another. See [`envPrefix`](https://vitejs.dev/config/shared-options.html#envprefix)

## Contribution

See [Contributing Guide](contributing.md).


[vite]: https://github.com/vitejs/vite/

[electron]: https://github.com/electron/electron

[electron-builder]: https://github.com/electron-userland/electron-builder

[vue]: https://github.com/vuejs/vue-next

[vue-router]: https://github.com/vuejs/vue-router-next/

[typescript]: https://github.com/microsoft/TypeScript/

[playwright]: https://playwright.dev

[vitest]: https://vitest.dev

[vue-tsc]: https://github.com/johnsoncodehk/vue-tsc

[eslint-plugin-vue]: https://github.com/vuejs/eslint-plugin-vue

[cawa-93-github]: https://github.com/cawa-93/

[cawa-93-sponsor]: https://www.patreon.com/Kozack/

```

`webapp/contributing.md`:

```md
# Contributing

First and foremost, thank you! We appreciate that you want to contribute to vite-electron-builder, your time is
valuable, and your contributions mean a lot to us.

## Issues

Do not create issues about bumping dependencies unless a bug has been identified, and you can demonstrate that it
effects this library.

**Help us to help you**

Remember that we’re here to help, but not to make guesses about what you need help with:

- Whatever bug or issue you're experiencing, assume that it will not be as obvious to the maintainers as it is to you.
- Spell it out completely. Keep in mind that maintainers need to think about _all potential use cases_ of a library.
  It's important that you explain how you're using a library so that maintainers can make that connection and solve the
  issue.

_It can't be understated how frustrating and draining it can be to maintainers to have to ask clarifying questions on
the most basic things, before it's even possible to start debugging. Please try to make the best use of everyone's time
involved, including yourself, by providing this information up front._

## Repo Setup

The package manager used to install and link dependencies must be npm v7 or later.

1. Clone repo
1. `npm run watch` start electron app in watch mode.
1. `npm run compile` build app but for local debugging only.
1. `npm run lint` lint your code.
1. `npm run typecheck` Run typescript check.
1. `npm run test` Run app test.
1. `npm run format` Reformat all codebase to project code style.

```

`webapp/electron-builder.config.js`:

```js
if (process.env.VITE_APP_VERSION === undefined) {
  const now = new Date();
  process.env.VITE_APP_VERSION = `${now.getUTCFullYear() - 2000}.${
    now.getUTCMonth() + 1
  }.${now.getUTCDate()}-${now.getUTCHours() * 60 + now.getUTCMinutes()}`;
}

/**
 * @type {import('electron-builder').Configuration}
 * @see https://www.electron.build/configuration/configuration
 */
const config = {
  directories: {
    output: 'dist',
    buildResources: 'buildResources',
  },
  files: ['packages/**/dist/**'],
  extraMetadata: {
    version: process.env.VITE_APP_VERSION,
  },
};

module.exports = config;

```

`webapp/electron-vendors.config.json`:

```json
{
  "chrome": "94",
  "node": "16"
}

```

`webapp/package-lock.json`:

```json
{
  "name": "vite-electron-builder",
  "version": "1.0.2",
  "lockfileVersion": 2,
  "requires": true,
  "packages": {
    "": {
      "name": "vite-electron-builder",
      "version": "1.0.2",
      "hasInstallScript": true,
      "dependencies": {
        "electron-updater": "5.3.0"
      },
      "devDependencies": {
        "@types/node": "18.15.3",
        "@typescript-eslint/eslint-plugin": "5.55.0",
        "@vitejs/plugin-vue": "4.0.0",
        "@vue/test-utils": "2.3.1",
        "cross-env": "7.0.3",
        "electron": "23.1.4",
        "electron-builder": "23.6.0",
        "eslint": "8.36.0",
        "eslint-plugin-vue": "9.9.0",
        "happy-dom": "8.9.0",
        "nano-staged": "0.8.0",
        "playwright": "1.31.2",
        "simple-git-hooks": "2.8.1",
        "typescript": "4.9.5",
        "unplugin-auto-expose": "0.0.4",
        "vite": "4.1.4",
        "vitest": "0.29.3",
        "vue": "3.2.47",
        "vue-tsc": "1.2.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.18.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.18.4.tgz",
      "integrity": "sha512-FDge0dFazETFcxGw/EXzOkN8uJp0PC7Qbm+Pe9T+av2zlBpOgunFHkQPPn+eRuClU73JF+98D531UgayY89tow==",
      "dev": true,
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@develar/schema-utils": {
      "version": "2.6.5",
      "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
      "integrity": "sha512-0cp4PsWQ/9avqTVMCtZ+GirikIA36ikvjtHweU4/j8yLtgObI0+JUPhYFScgwlteveGB1rt3Cm8UhN04XayDig==",
      "dev": true,
      "dependencies": {
        "ajv": "^6.12.0",
        "ajv-keywords": "^3.4.1"
      },
      "engines": {
        "node": ">= 8.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/webpack"
      }
    },
    "node_modules/@electron/get": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/@electron/get/-/get-2.0.2.tgz",
      "integrity": "sha512-eFZVFoRXb3GFGd7Ak7W4+6jBl9wBtiZ4AaYOse97ej6mKj5tkyO0dUnUChs1IhJZtx1BENo4/p4WUTXpi6vT+g==",
      "dev": true,
      "dependencies": {
        "debug": "^4.1.1",
        "env-paths": "^2.2.0",
        "fs-extra": "^8.1.0",
        "got": "^11.8.5",
        "progress": "^2.0.3",
        "semver": "^6.2.0",
        "sumchecker": "^3.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "global-agent": "^3.0.0"
      }
    },
    "node_modules/@electron/get/node_modules/semver": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.0.tgz",
      "integrity": "sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==",
      "dev": true,
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@electron/universal": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
      "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
      "dev": true,
      "dependencies": {
        "@malept/cross-spawn-promise": "^1.1.0",
        "asar": "^3.1.0",
        "debug": "^4.3.1",
        "dir-compare": "^2.4.0",
        "fs-extra": "^9.0.1",
        "minimatch": "^3.0.4",
        "plist": "^3.0.4"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/@electron/universal/node_modules/fs-extra": {
      "version": "9.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-9.1.0.tgz",
      "integrity": "sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==",
      "dev": true,
      "dependencies": {
        "at-least-node": "^1.0.0",
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@electron/universal/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/@electron/universal/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.16.17.tgz",
      "integrity": "sha512-N9x1CMXVhtWEAMS7pNNONyA14f71VPQN9Cnavj1XQh6T7bskqiLLrSca4O0Vr8Wdcga943eThxnVp3JLnBMYtw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.16.17.tgz",
      "integrity": "sha512-MIGl6p5sc3RDTLLkYL1MyL8BMRN4tLMRCn+yRJJmEDvYZ2M7tmAf80hx1kbNEUX2KJ50RRtxZ4JHLvCfuB6kBg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.16.17.tgz",
      "integrity": "sha512-a3kTv3m0Ghh4z1DaFEuEDfz3OLONKuFvI4Xqczqx4BqLyuFaFkuaG4j2MtA6fuWEFeC5x9IvqnX7drmRq/fyAQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.16.17.tgz",
      "integrity": "sha512-/2agbUEfmxWHi9ARTX6OQ/KgXnOWfsNlTeLcoV7HSuSTv63E4DqtAc+2XqGw1KHxKMHGZgbVCZge7HXWX9Vn+w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.16.17.tgz",
      "integrity": "sha512-2By45OBHulkd9Svy5IOCZt376Aa2oOkiE9QWUK9fe6Tb+WDr8hXL3dpqi+DeLiMed8tVXspzsTAvd0jUl96wmg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.16.17.tgz",
      "integrity": "sha512-mt+cxZe1tVx489VTb4mBAOo2aKSnJ33L9fr25JXpqQqzbUIw/yzIzi+NHwAXK2qYV1lEFp4OoVeThGjUbmWmdw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.16.17.tgz",
      "integrity": "sha512-8ScTdNJl5idAKjH8zGAsN7RuWcyHG3BAvMNpKOBaqqR7EbUhhVHOqXRdL7oZvz8WNHL2pr5+eIT5c65kA6NHug==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.16.17.tgz",
      "integrity": "sha512-iihzrWbD4gIT7j3caMzKb/RsFFHCwqqbrbH9SqUSRrdXkXaygSZCZg1FybsZz57Ju7N/SHEgPyaR0LZ8Zbe9gQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.16.17.tgz",
      "integrity": "sha512-7S8gJnSlqKGVJunnMCrXHU9Q8Q/tQIxk/xL8BqAP64wchPCTzuM6W3Ra8cIa1HIflAvDnNOt2jaL17vaW+1V0g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.16.17.tgz",
      "integrity": "sha512-kiX69+wcPAdgl3Lonh1VI7MBr16nktEvOfViszBSxygRQqSpzv7BffMKRPMFwzeJGPxcio0pdD3kYQGpqQ2SSg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.16.17.tgz",
      "integrity": "sha512-dTzNnQwembNDhd654cA4QhbS9uDdXC3TKqMJjgOWsC0yNCbpzfWoXdZvp0mY7HU6nzk5E0zpRGGx3qoQg8T2DQ==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.16.17.tgz",
      "integrity": "sha512-ezbDkp2nDl0PfIUn0CsQ30kxfcLTlcx4Foz2kYv8qdC6ia2oX5Q3E/8m6lq84Dj/6b0FrkgD582fJMIfHhJfSw==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.16.17.tgz",
      "integrity": "sha512-dzS678gYD1lJsW73zrFhDApLVdM3cUF2MvAa1D8K8KtcSKdLBPP4zZSLy6LFZ0jYqQdQ29bjAHJDgz0rVbLB3g==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.16.17.tgz",
      "integrity": "sha512-ylNlVsxuFjZK8DQtNUwiMskh6nT0vI7kYl/4fZgV1llP5d6+HIeL/vmmm3jpuoo8+NuXjQVZxmKuhDApK0/cKw==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.16.17.tgz",
      "integrity": "sha512-gzy7nUTO4UA4oZ2wAMXPNBGTzZFP7mss3aKR2hH+/4UUkCOyqmjXiKpzGrY2TlEUhbbejzXVKKGazYcQTZWA/w==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.16.17.tgz",
      "integrity": "sha512-mdPjPxfnmoqhgpiEArqi4egmBAMYvaObgn4poorpUaqmvzzbvqbowRllQ+ZgzGVMGKaPkqUmPDOOFQRUFDmeUw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.16.17.tgz",
      "integrity": "sha512-/PzmzD/zyAeTUsduZa32bn0ORug+Jd1EGGAUJvqfeixoEISYpGnAezN6lnJoskauoai0Jrs+XSyvDhppCPoKOA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.16.17.tgz",
      "integrity": "sha512-2yaWJhvxGEz2RiftSk0UObqJa/b+rIAjnODJgv2GbGGpRwAfpgzyrg1WLK8rqA24mfZa9GvpjLcBBg8JHkoodg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.16.17.tgz",
      "integrity": "sha512-xtVUiev38tN0R3g8VhRfN7Zl42YCJvyBhRKw1RJjwE1d2emWTVToPLNEQj/5Qxc6lVFATDiy6LjVHYhIPrLxzw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.16.17.tgz",
      "integrity": "sha512-ga8+JqBDHY4b6fQAmOgtJJue36scANy4l/rL97W+0wYmijhxKetzZdKOJI7olaBaMhWt8Pac2McJdZLxXWUEQw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.16.17.tgz",
      "integrity": "sha512-WnsKaf46uSSF/sZhwnqE4L/F89AYNMiD4YtEcYekBt9Q7nj0DiId2XH2Ng2PHM54qi5oPrQ8luuzGszqi/veig==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.16.17.tgz",
      "integrity": "sha512-y+EHuSchhL7FjHgvQL/0fnnFmO4T1bhvWANX6gcnqTjtnKWbTvUMCpGnv2+t+31d7RzyEAYAd4u2fnIhHL6N/Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.2.0.tgz",
      "integrity": "sha512-gB8T4H4DEfX2IV9zGDJPOBgP1e/DbfCPDTtEqUMckpvzS1OYtva8JdFYBqMwYk7xAQ429WGF/UPqn8uQ//h2vQ==",
      "dev": true,
      "dependencies": {
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.4.0.tgz",
      "integrity": "sha512-A9983Q0LnDGdLPjxyXQ00sbV+K+O+ko2Dr+CZigbHWtX9pNfxlaBkMR8X1CztI73zuEyEBXTVjx7CE+/VSwDiQ==",
      "dev": true,
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.0.1.tgz",
      "integrity": "sha512-eFRmABvW2E5Ho6f5fHLqgena46rOj7r7OKHYfLElqcBfGFHHpjBhivyi5+jOEQuSpdc/1phIZJlbC2te+tZNIw==",
      "dev": true,
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.5.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.36.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.36.0.tgz",
      "integrity": "sha512-lxJ9R5ygVm8ZWgYdUweoq5ownDlJ4upvoWmO4eLxBYHdMo+vZ/Rx0EN6MbKWDJOSUGrqJy2Gt+Dyv/VKml0fjg==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.11.8",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.11.8.tgz",
      "integrity": "sha512-UybHIJzJnR5Qc/MsD9Kr+RpO2h+/P1GhOwdiLPXK5TWk5sgTdu88bTD9UP+CKbPPh5Rni1u0GjAdYQLemG8g+g==",
      "dev": true,
      "dependencies": {
        "@humanwhocodes/object-schema": "^1.2.1",
        "debug": "^4.1.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-1.2.1.tgz",
      "integrity": "sha512-ZnQMnLV4e7hDlUvw8H+U8ASL02SS2Gn6+9Ac3wGGLIe7+je2AeAOxPY+izIPJDfFDb7eDjev0Us8MO1iFRN8hA==",
      "dev": true
    },
    "node_modules/@malept/cross-spawn-promise": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
      "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
      "dev": true,
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/malept"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/subscription/pkg/npm-.malept-cross-spawn-promise?utm_medium=referral&utm_source=npm_fund"
        }
      ],
      "dependencies": {
        "cross-spawn": "^7.0.1"
      },
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@malept/flatpak-bundler": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@malept/flatpak-bundler/-/flatpak-bundler-0.4.0.tgz",
      "integrity": "sha512-9QOtNffcOF/c1seMCDnjckb3R9WHcG34tky+FHpNKKCW0wc/scYLwMtO+ptyGUfMW0/b/n4qRiALlaFHc9Oj7Q==",
      "dev": true,
      "dependencies": {
        "debug": "^4.1.1",
        "fs-extra": "^9.0.0",
        "lodash": "^4.17.15",
        "tmp-promise": "^3.0.2"
      },
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/@malept/flatpak-bundler/node_modules/fs-extra": {
      "version": "9.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-9.1.0.tgz",
      "integrity": "sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==",
      "dev": true,
      "dependencies": {
        "at-least-node": "^1.0.0",
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@malept/flatpak-bundler/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/@malept/flatpak-bundler/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@sindresorhus/is": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
      "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/is?sponsor=1"
      }
    },
    "node_modules/@szmarczak/http-timer": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
      "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
      "dev": true,
      "dependencies": {
        "defer-to-connect": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "dev": true,
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@types/cacheable-request": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
      "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
      "dev": true,
      "dependencies": {
        "@types/http-cache-semantics": "*",
        "@types/keyv": "^3.1.4",
        "@types/node": "*",
        "@types/responselike": "^1.0.0"
      }
    },
    "node_modules/@types/chai": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/@types/chai/-/chai-4.3.4.tgz",
      "integrity": "sha512-KnRanxnpfpjUTqTCXslZSEdLfXExwgNxYPdiO2WGUj8+HDjFi8R3k5RVKPeSCzLjCcshCAtVO2QBbVuAV4kTnw==",
      "dev": true
    },
    "node_modules/@types/chai-subset": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/@types/chai-subset/-/chai-subset-1.3.3.tgz",
      "integrity": "sha512-frBecisrNGz+F4T6bcc+NLeolfiojh5FxW2klu669+8BARtyQv2C/GkNW6FUodVe4BroGMP/wER/YDGc7rEllw==",
      "dev": true,
      "dependencies": {
        "@types/chai": "*"
      }
    },
    "node_modules/@types/debug": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
      "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
      "dev": true,
      "dependencies": {
        "@types/ms": "*"
      }
    },
    "node_modules/@types/fs-extra": {
      "version": "9.0.13",
      "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
      "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
      "dev": true,
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/glob": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
      "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "@types/minimatch": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/http-cache-semantics": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
      "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
      "dev": true
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.11",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.11.tgz",
      "integrity": "sha512-wOuvG1SN4Us4rez+tylwwwCV1psiNVOkJeM3AUWUNWg/jDQY2+HE/444y5gc+jBmRqASOm2Oeh5c1axHobwRKQ==",
      "dev": true
    },
    "node_modules/@types/keyv": {
      "version": "3.1.4",
      "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
      "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
      "dev": true,
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/minimatch": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
      "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
      "dev": true,
      "optional": true
    },
    "node_modules/@types/ms": {
      "version": "0.7.31",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
      "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
      "dev": true
    },
    "node_modules/@types/node": {
      "version": "18.15.3",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-18.15.3.tgz",
      "integrity": "sha512-p6ua9zBxz5otCmbpb5D3U4B5Nanw6Pk3PPyX05xnxbB/fRv71N7CPmORg7uAD5P70T0xmx1pzAx/FUfa5X+3cw==",
      "dev": true
    },
    "node_modules/@types/plist": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
      "integrity": "sha512-ULqvZNGMv0zRFvqn8/4LSPtnmN4MfhlPNtJCTpKuIIxGVGZ2rYWzFXrvEBoh9CVyqSE7D6YFRJ1hydLHI6kbWw==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "@types/node": "*",
        "xmlbuilder": ">=11.0.1"
      }
    },
    "node_modules/@types/responselike": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
      "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
      "dev": true,
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/semver": {
      "version": "7.3.12",
      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.12.tgz",
      "integrity": "sha512-WwA1MW0++RfXmCr12xeYOOC5baSC9mSb0ZqCquFzKhcoF4TvHu5MKOuXsncgZcpVFhB1pXd5hZmM0ryAoCp12A=="
    },
    "node_modules/@types/verror": {
      "version": "1.10.5",
      "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.5.tgz",
      "integrity": "sha512-9UjMCHK5GPgQRoNbqdLIAvAy0EInuiqbW0PBMtVP6B5B2HQJlvoJHM+KodPZMEjOa5VkSc+5LH7xy+cUzQdmHw==",
      "dev": true,
      "optional": true
    },
    "node_modules/@types/yargs": {
      "version": "17.0.8",
      "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.8.tgz",
      "integrity": "sha512-wDeUwiUmem9FzsyysEwRukaEdDNcwbROvQ9QGRKaLI6t+IltNzbn4/i4asmB10auvZGQCzSQ6t0GSczEThlUXw==",
      "dev": true,
      "dependencies": {
        "@types/yargs-parser": "*"
      }
    },
    "node_modules/@types/yargs-parser": {
      "version": "20.2.1",
      "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-20.2.1.tgz",
      "integrity": "sha512-7tFImggNeNBVMsn0vLrpn1H1uPrUBdnARPTpZoitY37ZrdJREzf7I16tMrlK3hen349gr1NYh8CmZQa7CTG6Aw==",
      "dev": true
    },
    "node_modules/@types/yauzl": {
      "version": "2.10.0",
      "resolved": "https://registry.npmjs.org/@types/yauzl/-/yauzl-2.10.0.tgz",
      "integrity": "sha512-Cn6WYCm0tXv8p6k+A8PvbDG763EDpBoTzHdA+Q/MF6H3sapGjCm9NzoaJncJS9tUKSuCoDs9XHxYYsQDgxR6kw==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-5.55.0.tgz",
      "integrity": "sha512-IZGc50rtbjk+xp5YQoJvmMPmJEYoC53SiKPXyqWfv15XoD2Y5Kju6zN0DwlmaGJp1Iw33JsWJcQ7nw0lGCGjVg==",
      "dev": true,
      "dependencies": {
        "@eslint-community/regexpp": "^4.4.0",
        "@typescript-eslint/scope-manager": "5.55.0",
        "@typescript-eslint/type-utils": "5.55.0",
        "@typescript-eslint/utils": "5.55.0",
        "debug": "^4.3.4",
        "grapheme-splitter": "^1.0.4",
        "ignore": "^5.2.0",
        "natural-compare-lite": "^1.4.0",
        "semver": "^7.3.7",
        "tsutils": "^3.21.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^5.0.0",
        "eslint": "^6.0.0 || ^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/@typescript-eslint/scope-manager": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.55.0.tgz",
      "integrity": "sha512-OK+cIO1ZGhJYNCL//a3ROpsd83psf4dUJ4j7pdNVzd5DmIk+ffkuUIX2vcZQbEW/IR41DYsfJTB19tpCboxQuw==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/visitor-keys": "5.55.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/@typescript-eslint/types": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
      "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/@typescript-eslint/visitor-keys": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
      "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-5.8.1.tgz",
      "integrity": "sha512-K1giKHAjHuyB421SoXMXFHHVI4NdNY603uKw92++D3qyxSeYvC10CBJ/GE5Thpo4WTUvu1mmJI2/FFkz38F2Gw==",
      "dev": true,
      "peer": true,
      "dependencies": {
        "@typescript-eslint/scope-manager": "5.8.1",
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/typescript-estree": "5.8.1",
        "debug": "^4.3.2"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.8.1.tgz",
      "integrity": "sha512-DGxJkNyYruFH3NIZc3PwrzwOQAg7vvgsHsHCILOLvUpupgkwDZdNq/cXU3BjF4LNrCsVg0qxEyWasys5AiJ85Q==",
      "dev": true,
      "peer": true,
      "dependencies": {
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/visitor-keys": "5.8.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-5.55.0.tgz",
      "integrity": "sha512-ObqxBgHIXj8rBNm0yh8oORFrICcJuZPZTqtAFh0oZQyr5DnAHZWfyw54RwpEEH+fD8suZaI0YxvWu5tYE/WswA==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/typescript-estree": "5.55.0",
        "@typescript-eslint/utils": "5.55.0",
        "debug": "^4.3.4",
        "tsutils": "^3.21.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "*"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/type-utils/node_modules/@typescript-eslint/types": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
      "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/type-utils/node_modules/@typescript-eslint/typescript-estree": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.55.0.tgz",
      "integrity": "sha512-I7X4A9ovA8gdpWMpr7b1BN9eEbvlEtWhQvpxp/yogt48fy9Lj3iE3ild/1H3jKBBIYj5YYJmS2+9ystVhC7eaQ==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/visitor-keys": "5.55.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "semver": "^7.3.7",
        "tsutils": "^3.21.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/type-utils/node_modules/@typescript-eslint/visitor-keys": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
      "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.8.1.tgz",
      "integrity": "sha512-L/FlWCCgnjKOLefdok90/pqInkomLnAcF9UAzNr+DSqMC3IffzumHTQTrINXhP1gVp9zlHiYYjvozVZDPleLcA==",
      "dev": true,
      "peer": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.8.1.tgz",
      "integrity": "sha512-26lQ8l8tTbG7ri7xEcCFT9ijU5Fk+sx/KRRyyzCv7MQ+rZZlqiDPtMKWLC8P7o+dtCnby4c+OlxuX1tp8WfafQ==",
      "dev": true,
      "peer": true,
      "dependencies": {
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/visitor-keys": "5.8.1",
        "debug": "^4.3.2",
        "globby": "^11.0.4",
        "is-glob": "^4.0.3",
        "semver": "^7.3.5",
        "tsutils": "^3.21.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-5.55.0.tgz",
      "integrity": "sha512-FkW+i2pQKcpDC3AY6DU54yl8Lfl14FVGYDgBTyGKB75cCwV3KpkpTMFi9d9j2WAJ4271LR2HeC5SEWF/CZmmfw==",
      "dev": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@types/json-schema": "^7.0.9",
        "@types/semver": "^7.3.12",
        "@typescript-eslint/scope-manager": "5.55.0",
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/typescript-estree": "5.55.0",
        "eslint-scope": "^5.1.1",
        "semver": "^7.3.7"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/@typescript-eslint/utils/node_modules/@typescript-eslint/scope-manager": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.55.0.tgz",
      "integrity": "sha512-OK+cIO1ZGhJYNCL//a3ROpsd83psf4dUJ4j7pdNVzd5DmIk+ffkuUIX2vcZQbEW/IR41DYsfJTB19tpCboxQuw==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/visitor-keys": "5.55.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/utils/node_modules/@typescript-eslint/types": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
      "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/utils/node_modules/@typescript-eslint/typescript-estree": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.55.0.tgz",
      "integrity": "sha512-I7X4A9ovA8gdpWMpr7b1BN9eEbvlEtWhQvpxp/yogt48fy9Lj3iE3ild/1H3jKBBIYj5YYJmS2+9ystVhC7eaQ==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/visitor-keys": "5.55.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "semver": "^7.3.7",
        "tsutils": "^3.21.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/utils/node_modules/@typescript-eslint/visitor-keys": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
      "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
      "dev": true,
      "dependencies": {
        "@typescript-eslint/types": "5.55.0",
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.8.1.tgz",
      "integrity": "sha512-SWgiWIwocK6NralrJarPZlWdr0hZnj5GXHIgfdm8hNkyKvpeQuFyLP6YjSIe9kf3YBIfU6OHSZLYkQ+smZwtNg==",
      "dev": true,
      "peer": true,
      "dependencies": {
        "@typescript-eslint/types": "5.8.1",
        "eslint-visitor-keys": "^3.0.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@vitejs/plugin-vue": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-vue/-/plugin-vue-4.0.0.tgz",
      "integrity": "sha512-e0X4jErIxAB5oLtDqbHvHpJe/uWNkdpYV83AOG2xo2tEVSzCzewgJMtREZM30wXnM5ls90hxiOtAuVU6H5JgbA==",
      "dev": true,
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.0.0",
        "vue": "^3.2.25"
      }
    },
    "node_modules/@vitest/expect": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-0.29.3.tgz",
      "integrity": "sha512-z/0JqBqqrdtrT/wzxNrWC76EpkOHdl+SvuNGxWulLaoluygntYyG5wJul5u/rQs5875zfFz/F+JaDf90SkLUIg==",
      "dev": true,
      "dependencies": {
        "@vitest/spy": "0.29.3",
        "@vitest/utils": "0.29.3",
        "chai": "^4.3.7"
      }
    },
    "node_modules/@vitest/runner": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-0.29.3.tgz",
      "integrity": "sha512-XLi8ctbvOWhUWmuvBUSIBf8POEDH4zCh6bOuVxm/KGfARpgmVF1ku+vVNvyq85va+7qXxtl+MFmzyXQ2xzhAvw==",
      "dev": true,
      "dependencies": {
        "@vitest/utils": "0.29.3",
        "p-limit": "^4.0.0",
        "pathe": "^1.1.0"
      }
    },
    "node_modules/@vitest/runner/node_modules/p-limit": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-4.0.0.tgz",
      "integrity": "sha512-5b0R4txpzjPWVw/cXXUResoD4hb6U/x9BH08L7nw+GN1sezDzPdxeRvpc9c433fZhBan/wusjbCsqwqm4EIBIQ==",
      "dev": true,
      "dependencies": {
        "yocto-queue": "^1.0.0"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@vitest/runner/node_modules/pathe": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
      "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
      "dev": true
    },
    "node_modules/@vitest/runner/node_modules/yocto-queue": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-1.0.0.tgz",
      "integrity": "sha512-9bnSc/HEW2uRy67wc+T8UwauLuPJVn28jb+GtJY16iiKWyvmYJRXVT4UamsAEGQfPohgr2q4Tq0sQbQlxTfi1g==",
      "dev": true,
      "engines": {
        "node": ">=12.20"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@vitest/spy": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-0.29.3.tgz",
      "integrity": "sha512-LLpCb1oOCOZcBm0/Oxbr1DQTuKLRBsSIHyLYof7z4QVE8/v8NcZKdORjMUq645fcfX55+nLXwU/1AQ+c2rND+w==",
      "dev": true,
      "dependencies": {
        "tinyspy": "^1.0.2"
      }
    },
    "node_modules/@vitest/utils": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-0.29.3.tgz",
      "integrity": "sha512-hg4Ff8AM1GtUnLpUJlNMxrf9f4lZr/xRJjh3uJ0QFP+vjaW82HAxKrmeBmLnhc8Os2eRf+f+VBu4ts7TafPPkA==",
      "dev": true,
      "dependencies": {
        "cli-truncate": "^3.1.0",
        "diff": "^5.1.0",
        "loupe": "^2.3.6",
        "pretty-format": "^27.5.1"
      }
    },
    "node_modules/@vitest/utils/node_modules/ansi-regex": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.0.1.tgz",
      "integrity": "sha512-n5M855fKb2SsfMIiFFoVrABHJC8QtHwVx+mHWP3QcEqBHYienj5dHSgjbxtC0WEZXYt4wcD6zrQElDPhFuZgfA==",
      "dev": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/@vitest/utils/node_modules/ansi-styles": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.1.tgz",
      "integrity": "sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==",
      "dev": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/@vitest/utils/node_modules/cli-truncate": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-3.1.0.tgz",
      "integrity": "sha512-wfOBkjXteqSnI59oPcJkcPl/ZmwvMMOj340qUIY1SKZCv0B9Cf4D4fAucRkIKQmsIuYK3x1rrgU7MeGRruiuiA==",
      "dev": true,
      "dependencies": {
        "slice-ansi": "^5.0.0",
        "string-width": "^5.0.0"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@vitest/utils/node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true
    },
    "node_modules/@vitest/utils/node_modules/is-fullwidth-code-point": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-4.0.0.tgz",
      "integrity": "sha512-O4L094N2/dZ7xqVdrXhh9r1KODPJpFms8B5sGdJLPy664AgvXsreZUyCQQNItZRDlYug4xStLjNp/sz3HvBowQ==",
      "dev": true,
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@vitest/utils/node_modules/slice-ansi": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-5.0.0.tgz",
      "integrity": "sha512-FC+lgizVPfie0kkhqUScwRu1O/lF6NOgJmlCgK+/LYxDCTk8sGelYaHDhFcDN+Sn3Cv+3VSa4Byeo+IMCzpMgQ==",
      "dev": true,
      "dependencies": {
        "ansi-styles": "^6.0.0",
        "is-fullwidth-code-point": "^4.0.0"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/slice-ansi?sponsor=1"
      }
    },
    "node_modules/@vitest/utils/node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "dev": true,
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@vitest/utils/node_modules/strip-ansi": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.0.1.tgz",
      "integrity": "sha512-cXNxvT8dFNRVfhVME3JAe98mkXDYN2O1l7jmcwMnOslDeESg1rF/OZMtK0nRAhiari1unG5cD4jG3rapUAkLbw==",
      "dev": true,
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/@volar/language-core": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/language-core/-/language-core-1.3.0-alpha.0.tgz",
      "integrity": "sha512-W3uMzecHPcbwddPu4SJpUcPakRBK/y/BP+U0U6NiPpUX1tONLC4yCawt+QBJqtgJ+sfD6ztf5PyvPL3hQRqfOA==",
      "dev": true,
      "dependencies": {
        "@volar/source-map": "1.3.0-alpha.0"
      }
    },
    "node_modules/@volar/source-map": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/source-map/-/source-map-1.3.0-alpha.0.tgz",
      "integrity": "sha512-jSdizxWFvDTvkPYZnO6ew3sBZUnS0abKCbuopkc0JrIlFbznWC/fPH3iPFIMS8/IIkRxq1Jh9VVG60SmtsdaMQ==",
      "dev": true,
      "dependencies": {
        "muggle-string": "^0.2.2"
      }
    },
    "node_modules/@volar/typescript": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/typescript/-/typescript-1.3.0-alpha.0.tgz",
      "integrity": "sha512-5UItyW2cdH2mBLu4RrECRNJRgtvvzKrSCn2y3v/D61QwIDkGx4aeil6x8RFuUL5TFtV6QvVHXnsOHxNgd+sCow==",
      "dev": true,
      "dependencies": {
        "@volar/language-core": "1.3.0-alpha.0"
      }
    },
    "node_modules/@volar/vue-language-core": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@volar/vue-language-core/-/vue-language-core-1.2.0.tgz",
      "integrity": "sha512-w7yEiaITh2WzKe6u8ZdeLKCUz43wdmY/OqAmsB/PGDvvhTcVhCJ6f0W/RprZL1IhqH8wALoWiwEh/Wer7ZviMQ==",
      "dev": true,
      "dependencies": {
        "@volar/language-core": "1.3.0-alpha.0",
        "@volar/source-map": "1.3.0-alpha.0",
        "@vue/compiler-dom": "^3.2.47",
        "@vue/compiler-sfc": "^3.2.47",
        "@vue/reactivity": "^3.2.47",
        "@vue/shared": "^3.2.47",
        "minimatch": "^6.1.6",
        "muggle-string": "^0.2.2",
        "vue-template-compiler": "^2.7.14"
      }
    },
    "node_modules/@volar/vue-language-core/node_modules/brace-expansion": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
      "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@volar/vue-language-core/node_modules/minimatch": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-6.2.0.tgz",
      "integrity": "sha512-sauLxniAmvnhhRjFwPNnJKaPFYyddAgbYdeUpHULtCT/GhzdCx/MDNy+Y40lBxTQUrMzDE8e0S43Z5uqfO0REg==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@volar/vue-typescript": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@volar/vue-typescript/-/vue-typescript-1.2.0.tgz",
      "integrity": "sha512-zjmRi9y3J1EkG+pfuHp8IbHmibihrKK485cfzsHjiuvJMGrpkWvlO5WVEk8oslMxxeGC5XwBFE9AOlvh378EPA==",
      "dev": true,
      "dependencies": {
        "@volar/typescript": "1.3.0-alpha.0",
        "@volar/vue-language-core": "1.2.0"
      }
    },
    "node_modules/@vue/compiler-core": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-core/-/compiler-core-3.2.47.tgz",
      "integrity": "sha512-p4D7FDnQb7+YJmO2iPEv0SQNeNzcbHdGByJDsT4lynf63AFkOTFN07HsiRSvjGo0QrxR/o3d0hUyNCUnBU2Tig==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.16.4",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "source-map": "^0.6.1"
      }
    },
    "node_modules/@vue/compiler-dom": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-dom/-/compiler-dom-3.2.47.tgz",
      "integrity": "sha512-dBBnEHEPoftUiS03a4ggEig74J2YBZ2UIeyfpcRM2tavgMWo4bsEfgCGsu+uJIL/vax9S+JztH8NmQerUo7shQ==",
      "dev": true,
      "dependencies": {
        "@vue/compiler-core": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "node_modules/@vue/compiler-sfc": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-sfc/-/compiler-sfc-3.2.47.tgz",
      "integrity": "sha512-rog05W+2IFfxjMcFw10tM9+f7i/+FFpZJJ5XHX72NP9eC2uRD+42M3pYcQqDXVYoj74kHMSEdQ/WmCjt8JFksQ==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.16.4",
        "@vue/compiler-core": "3.2.47",
        "@vue/compiler-dom": "3.2.47",
        "@vue/compiler-ssr": "3.2.47",
        "@vue/reactivity-transform": "3.2.47",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.25.7",
        "postcss": "^8.1.10",
        "source-map": "^0.6.1"
      }
    },
    "node_modules/@vue/compiler-ssr": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-ssr/-/compiler-ssr-3.2.47.tgz",
      "integrity": "sha512-wVXC+gszhulcMD8wpxMsqSOpvDZ6xKXSVWkf50Guf/S+28hTAXPDYRTbLQ3EDkOP5Xz/+SY37YiwDquKbJOgZw==",
      "dev": true,
      "dependencies": {
        "@vue/compiler-dom": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "node_modules/@vue/reactivity": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/reactivity/-/reactivity-3.2.47.tgz",
      "integrity": "sha512-7khqQ/75oyyg+N/e+iwV6lpy1f5wq759NdlS1fpAhFXa8VeAIKGgk2E/C4VF59lx5b+Ezs5fpp/5WsRYXQiKxQ==",
      "dev": true,
      "dependencies": {
        "@vue/shared": "3.2.47"
      }
    },
    "node_modules/@vue/reactivity-transform": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/reactivity-transform/-/reactivity-transform-3.2.47.tgz",
      "integrity": "sha512-m8lGXw8rdnPVVIdIFhf0LeQ/ixyHkH5plYuS83yop5n7ggVJU+z5v0zecwEnX7fa7HNLBhh2qngJJkxpwEEmYA==",
      "dev": true,
      "dependencies": {
        "@babel/parser": "^7.16.4",
        "@vue/compiler-core": "3.2.47",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.25.7"
      }
    },
    "node_modules/@vue/runtime-core": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/runtime-core/-/runtime-core-3.2.47.tgz",
      "integrity": "sha512-RZxbLQIRB/K0ev0K9FXhNbBzT32H9iRtYbaXb0ZIz2usLms/D55dJR2t6cIEUn6vyhS3ALNvNthI+Q95C+NOpA==",
      "dev": true,
      "dependencies": {
        "@vue/reactivity": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "node_modules/@vue/runtime-dom": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/runtime-dom/-/runtime-dom-3.2.47.tgz",
      "integrity": "sha512-ArXrFTjS6TsDei4qwNvgrdmHtD930KgSKGhS5M+j8QxXrDJYLqYw4RRcDy1bz1m1wMmb6j+zGLifdVHtkXA7gA==",
      "dev": true,
      "dependencies": {
        "@vue/runtime-core": "3.2.47",
        "@vue/shared": "3.2.47",
        "csstype": "^2.6.8"
      }
    },
    "node_modules/@vue/server-renderer": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/server-renderer/-/server-renderer-3.2.47.tgz",
      "integrity": "sha512-dN9gc1i8EvmP9RCzvneONXsKfBRgqFeFZLurmHOveL7oH6HiFXJw5OGu294n1nHc/HMgTy6LulU/tv5/A7f/LA==",
      "dev": true,
      "dependencies": {
        "@vue/compiler-ssr": "3.2.47",
        "@vue/shared": "3.2.47"
      },
      "peerDependencies": {
        "vue": "3.2.47"
      }
    },
    "node_modules/@vue/shared": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/shared/-/shared-3.2.47.tgz",
      "integrity": "sha512-BHGyyGN3Q97EZx0taMQ+OLNuZcW3d37ZEVmEAyeoA9ERdGvm9Irc/0Fua8SNyOtV1w6BS4q25wbMzJujO9HIfQ==",
      "dev": true
    },
    "node_modules/@vue/test-utils": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/@vue/test-utils/-/test-utils-2.3.1.tgz",
      "integrity": "sha512-tRtHRPEETQSUrqXgAewNZHm5iypxDFxwenfdcvMRm1kbGo4bcqHb1XHHlsaIjoDbLkuE2NYiF8vBQDNYrzlrSA==",
      "dev": true,
      "dependencies": {
        "js-beautify": "1.14.6"
      },
      "optionalDependencies": {
        "@vue/compiler-dom": "^3.0.1",
        "@vue/server-renderer": "^3.0.1"
      },
      "peerDependencies": {
        "@vue/compiler-dom": "^3.0.1",
        "@vue/server-renderer": "^3.0.1",
        "vue": "^3.0.1"
      }
    },
    "node_modules/7zip-bin": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/7zip-bin/-/7zip-bin-5.1.1.tgz",
      "integrity": "sha512-sAP4LldeWNz0lNzmTird3uWfFDWWTeg6V/MsmyyLR9X1idwKBWIgt/ZvinqQldJm3LecKEs1emkbquO6PCiLVQ==",
      "dev": true
    },
    "node_modules/abbrev": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/abbrev/-/abbrev-1.1.1.tgz",
      "integrity": "sha512-nne9/IiQ/hzIhY6pdDnbBtz7DjPTKrY00P/zvPSm5pOFkl6xuGrGnXn/VtTNNfNtAfZ9/1RtehkszU9qcTii0Q==",
      "dev": true
    },
    "node_modules/acorn": {
      "version": "8.8.1",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.8.1.tgz",
      "integrity": "sha512-7zFpHzhnqYKrkYdUjF1HI1bzd0VygEGX8lFk4k5zVMqHEoES+P+7TKI+EvLO9WVMJ8eekdO0aDEK044xTXwPPA==",
      "dev": true,
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.2.0",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.2.0.tgz",
      "integrity": "sha512-k+iyHEuPgSw6SbuDpGQM+06HQUa04DZ3o+F6CSzXMvvI5KMvnaEqXe+YVe555R9nn6GPt404fos4wcgpw12SDA==",
      "dev": true,
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "dev": true,
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ajv-keywords": {
      "version": "3.5.2",
      "resolved": "https://registry.npmjs.org/ajv-keywords/-/ajv-keywords-3.5.2.tgz",
      "integrity": "sha512-5p6WTN0DdTGVQk6VjcEju19IgaHudalcfabD7yhDGeA6bcQnmL+CpveLJq/3hvfwd1aof6L386Ougkx6RfyMIQ==",
      "dev": true,
      "peerDependencies": {
        "ajv": "^6.9.1"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.2.tgz",
      "integrity": "sha512-P43ePfOAIupkguHUycrc4qJ9kz8ZiuOUijaETwX7THt0Y/GNK7v0aa8rY816xWjZ7rJdA5XdMcpVFTKMq+RvWg==",
      "dev": true,
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/app-builder-bin": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
      "integrity": "sha512-xwdG0FJPQMe0M0UA4Tz0zEB8rBJTRA5a476ZawAqiBkMv16GRK5xpXThOjMaEOFnZ6zabejjG4J3da0SXG63KA==",
      "dev": true
    },
    "node_modules/app-builder-lib": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.6.0.tgz",
      "integrity": "sha512-dQYDuqm/rmy8GSCE6Xl/3ShJg6Ab4bZJMT8KaTKGzT436gl1DN4REP3FCWfXoh75qGTJ+u+WsdnnpO9Jl8nyMA==",
      "dev": true,
      "dependencies": {
        "@develar/schema-utils": "~2.6.5",
        "@electron/universal": "1.2.1",
        "@malept/flatpak-bundler": "^0.4.0",
        "7zip-bin": "~5.1.1",
        "async-exit-hook": "^2.0.1",
        "bluebird-lst": "^1.0.9",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chromium-pickle-js": "^0.2.0",
        "debug": "^4.3.4",
        "ejs": "^3.1.7",
        "electron-osx-sign": "^0.6.0",
        "electron-publish": "23.6.0",
        "form-data": "^4.0.0",
        "fs-extra": "^10.1.0",
        "hosted-git-info": "^4.1.0",
        "is-ci": "^3.0.0",
        "isbinaryfile": "^4.0.10",
        "js-yaml": "^4.1.0",
        "lazy-val": "^1.0.5",
        "minimatch": "^3.1.2",
        "read-config-file": "6.2.0",
        "sanitize-filename": "^1.6.3",
        "semver": "^7.3.7",
        "tar": "^6.1.11",
        "temp-file": "^3.4.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/app-builder-lib/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/app-builder-lib/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/app-builder-lib/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q=="
    },
    "node_modules/array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/asar": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/asar/-/asar-3.1.0.tgz",
      "integrity": "sha512-vyxPxP5arcAqN4F/ebHd/HhwnAiZtwhglvdmc7BR2f0ywbVNTOpSeyhLDbGXtE/y58hv1oC75TaNIXutnsOZsQ==",
      "dev": true,
      "dependencies": {
        "chromium-pickle-js": "^0.2.0",
        "commander": "^5.0.0",
        "glob": "^7.1.6",
        "minimatch": "^3.0.4"
      },
      "bin": {
        "asar": "bin/asar.js"
      },
      "engines": {
        "node": ">=10.12.0"
      },
      "optionalDependencies": {
        "@types/glob": "^7.1.1"
      }
    },
    "node_modules/assert-plus": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
      "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/assertion-error": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-1.1.0.tgz",
      "integrity": "sha512-jgsaNduz+ndvGyFt3uSuWqvy4lCnIJiovtouQN5JZHOKCS2QuhEdbcQHFhVksz2N2U9hXJo8odG7ETyWlEeuDw==",
      "dev": true,
      "engines": {
        "node": "*"
      }
    },
    "node_modules/astral-regex": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/astral-regex/-/astral-regex-2.0.0.tgz",
      "integrity": "sha512-Z7tMw1ytTXt5jqMcOP+OQteU1VuNK9Y02uuJtKQ1Sv69jXQKKg5cibLwGJow8yzZP+eAc18EmLGPal0bp36rvQ==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/async": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.4.tgz",
      "integrity": "sha512-iAB+JbDEGXhyIUavoDl9WP/Jj106Kz9DEn1DPgYw5ruDn0e3Wgi3sKFm55sASdGBNOQB8F59d9qQ7deqrHA8wQ==",
      "dev": true
    },
    "node_modules/async-exit-hook": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/async-exit-hook/-/async-exit-hook-2.0.1.tgz",
      "integrity": "sha512-NW2cX8m1Q7KPA7a5M2ULQeZ2wR5qI5PAbw5L0UOMxdioVk9PMZ0h1TmyZEkPYrCvYjDlFICusOu1dlEKAAeXBw==",
      "dev": true,
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha1-x57Zf380y48robyXkLzDZkdLS3k=",
      "dev": true
    },
    "node_modules/at-least-node": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/at-least-node/-/at-least-node-1.0.0.tgz",
      "integrity": "sha512-+q/t7Ekv1EDY2l6Gda6LLiX14rU9TV20Wa3ofeQmwPFZbOMo9DXrLbOjFaaclkXKWidIaopwAObQDqwWtGUjqg==",
      "dev": true,
      "engines": {
        "node": ">= 4.0.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ]
    },
    "node_modules/binary-extensions": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.2.0.tgz",
      "integrity": "sha512-jDctJ/IVQbZoJykoeHbhXpOlNBqGNcwXJKJog42E5HDPUwQTSdjCHdihjj0DlnheQ7blbT6dHOafNAiS8ooQKA==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/bluebird": {
      "version": "3.7.2",
      "resolved": "https://registry.npmjs.org/bluebird/-/bluebird-3.7.2.tgz",
      "integrity": "sha512-XpNj6GDQzdfW+r2Wnn7xiSAd7TM3jzkxGXBGTtWKuSXv1xUV+azxAm8jdWZN06QTQk+2N2XB9jRDkvbmQmcRtg==",
      "dev": true
    },
    "node_modules/bluebird-lst": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/bluebird-lst/-/bluebird-lst-1.0.9.tgz",
      "integrity": "sha512-7B1Rtx82hjnSD4PGLAjVWeYH3tHAcVUmChh85a3lltKQm6FresXh9ErQo6oAv6CqxttczC3/kEg8SY5NluPuUw==",
      "dev": true,
      "dependencies": {
        "bluebird": "^3.5.5"
      }
    },
    "node_modules/boolbase": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/boolbase/-/boolbase-1.0.0.tgz",
      "integrity": "sha512-JZOSA7Mo9sNGB8+UjSgzdLtokWAky1zbztM3WRLCbZ70/3cTANmQmOdR7y2g+J0e2WXywy1yS468tY+IruqEww==",
      "dev": true
    },
    "node_modules/boolean": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/boolean/-/boolean-3.2.0.tgz",
      "integrity": "sha512-d0II/GO9uf9lfUHH2BQsjxzRJZBdsjgsBiW4BvhWk/3qoKwQFjIDVN19PfX8F2D/r9PCMTtLWjYVCFrpeYUzsw==",
      "dev": true,
      "optional": true
    },
    "node_modules/brace-expansion": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
      "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.2.tgz",
      "integrity": "sha512-b8um+L1RzM3WDSzvhm6gIz1yfTbBt6YTlcEKAvsmqCZZFw46z626lVj9j1yEPW33H5H+lBQpZMP1k8l+78Ha0A==",
      "dev": true,
      "dependencies": {
        "fill-range": "^7.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/buffer": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "optional": true,
      "dependencies": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.1.13"
      }
    },
    "node_modules/buffer-alloc": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
      "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
      "dev": true,
      "dependencies": {
        "buffer-alloc-unsafe": "^1.1.0",
        "buffer-fill": "^1.0.0"
      }
    },
    "node_modules/buffer-alloc-unsafe": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
      "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
      "dev": true
    },
    "node_modules/buffer-crc32": {
      "version": "0.2.13",
      "resolved": "https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-0.2.13.tgz",
      "integrity": "sha512-VO9Ht/+p3SN7SKWqcrgEzjGbRSJYTx+Q1pTQC0wrWqHx0vpJraQ6GtHx8tvcg1rlK1byhU5gccxgOgj7B0TDkQ==",
      "dev": true,
      "engines": {
        "node": "*"
      }
    },
    "node_modules/buffer-equal": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
      "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
      "dev": true,
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/buffer-fill": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
      "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
      "dev": true
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "dev": true
    },
    "node_modules/builder-util": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.6.0.tgz",
      "integrity": "sha512-QiQHweYsh8o+U/KNCZFSvISRnvRctb8m/2rB2I1JdByzvNKxPeFLlHFRPQRXab6aYeXc18j9LpsDLJ3sGQmWTQ==",
      "dev": true,
      "dependencies": {
        "@types/debug": "^4.1.6",
        "@types/fs-extra": "^9.0.11",
        "7zip-bin": "~5.1.1",
        "app-builder-bin": "4.0.0",
        "bluebird-lst": "^1.0.9",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "cross-spawn": "^7.0.3",
        "debug": "^4.3.4",
        "fs-extra": "^10.0.0",
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.0",
        "is-ci": "^3.0.0",
        "js-yaml": "^4.1.0",
        "source-map-support": "^0.5.19",
        "stat-mode": "^1.0.0",
        "temp-file": "^3.4.0"
      }
    },
    "node_modules/builder-util-runtime": {
      "version": "9.1.1",
      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
      "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
      "dependencies": {
        "debug": "^4.3.4",
        "sax": "^1.2.4"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/builder-util/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/builder-util/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/builder-util/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/cac": {
      "version": "6.7.14",
      "resolved": "https://registry.npmjs.org/cac/-/cac-6.7.14.tgz",
      "integrity": "sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cacheable-lookup": {
      "version": "5.0.4",
      "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
      "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
      "dev": true,
      "engines": {
        "node": ">=10.6.0"
      }
    },
    "node_modules/cacheable-request": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
      "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
      "dev": true,
      "dependencies": {
        "clone-response": "^1.0.2",
        "get-stream": "^5.1.0",
        "http-cache-semantics": "^4.0.0",
        "keyv": "^4.0.0",
        "lowercase-keys": "^2.0.0",
        "normalize-url": "^6.0.1",
        "responselike": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/chai": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/chai/-/chai-4.3.7.tgz",
      "integrity": "sha512-HLnAzZ2iupm25PlN0xFreAlBA5zaBSv3og0DdeGA4Ar6h6rJ3A0rolRUKJhSF2V10GZKDgWF/VmAEsNWjCRB+A==",
      "dev": true,
      "dependencies": {
        "assertion-error": "^1.1.0",
        "check-error": "^1.0.2",
        "deep-eql": "^4.1.2",
        "get-func-name": "^2.0.0",
        "loupe": "^2.3.1",
        "pathval": "^1.1.1",
        "type-detect": "^4.0.5"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/check-error": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/check-error/-/check-error-1.0.2.tgz",
      "integrity": "sha1-V00xLt2Iu13YkS6Sht1sCu1KrII=",
      "dev": true,
      "engines": {
        "node": "*"
      }
    },
    "node_modules/chokidar": {
      "version": "3.5.3",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.5.3.tgz",
      "integrity": "sha512-Dr3sfKRP6oTcjf2JmUmFJfeVMvXBdegxB0iVQ5eb2V10uFJUCAS8OByZdVAyVb8xXNz3GjjTgj9kLWsZTqE6kw==",
      "dev": true,
      "funding": [
        {
          "type": "individual",
          "url": "https://paulmillr.com/funding/"
        }
      ],
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/chownr": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-2.0.0.tgz",
      "integrity": "sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==",
      "dev": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/chromium-pickle-js": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/chromium-pickle-js/-/chromium-pickle-js-0.2.0.tgz",
      "integrity": "sha512-1R5Fho+jBq0DDydt+/vHWj5KJNJCKdARKOCwZUen84I5BreWoLqRLANH1U87eJy1tiASPtMnGqJJq0ZsLoRPOw==",
      "dev": true
    },
    "node_modules/ci-info": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.1.tgz",
      "integrity": "sha512-SXgeMX9VwDe7iFFaEWkA5AstuER9YKqy4EhHqr4DVqkwmD9rpVimkMKWHdjn30Ja45txyjhSn63lVX69eVCckg==",
      "dev": true
    },
    "node_modules/cli-truncate": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-2.1.0.tgz",
      "integrity": "sha512-n8fOixwDD6b/ObinzTrp1ZKFzbgvKZvuz/TvejnLn1aQfC6r52XEx85FmuC+3HI+JM7coBRXUvNqEU2PHVrHpg==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "slice-ansi": "^3.0.0",
        "string-width": "^4.2.0"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/clone-response": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
      "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
      "dev": true,
      "dependencies": {
        "mimic-response": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true
    },
    "node_modules/colors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
      "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
      "dev": true,
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "dev": true,
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/commander": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-5.1.0.tgz",
      "integrity": "sha512-P0CysNDQ7rtVw4QIQtm+MRxV66vKFSvlsQvGYXZWR3qFU0jlMKHZZZgw8e+8DSah4UDKMqnknRDQz+xuQXQ/Zg==",
      "dev": true,
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/compare-version": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/compare-version/-/compare-version-0.1.2.tgz",
      "integrity": "sha512-pJDh5/4wrEnXX/VWRZvruAGHkzKdr46z11OlTPN+VrATlWWhSKewNCJ1futCO5C7eJB3nPMFZA1LeYtcFboZ2A==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=",
      "dev": true
    },
    "node_modules/config-chain": {
      "version": "1.1.13",
      "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
      "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
      "dev": true,
      "dependencies": {
        "ini": "^1.3.4",
        "proto-list": "~1.2.1"
      }
    },
    "node_modules/crc": {
      "version": "3.8.0",
      "resolved": "https://registry.npmjs.org/crc/-/crc-3.8.0.tgz",
      "integrity": "sha512-iX3mfgcTMIq3ZKLIsVFAbv7+Mc10kxabAGQb8HvjA1o3T1PIYprbakQ65d3I+2HGHt6nSKkM9PYjgoJO2KcFBQ==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "buffer": "^5.1.0"
      }
    },
    "node_modules/cross-env": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/cross-env/-/cross-env-7.0.3.tgz",
      "integrity": "sha512-+/HKd6EgcQCJGh2PSjZuUitQBQynKor4wrFbRg4DtAgS1aWO+gU52xpH7M9ScGgXSYmAVS9bIJ8EzuaGw0oNAw==",
      "dev": true,
      "dependencies": {
        "cross-spawn": "^7.0.1"
      },
      "bin": {
        "cross-env": "src/bin/cross-env.js",
        "cross-env-shell": "src/bin/cross-env-shell.js"
      },
      "engines": {
        "node": ">=10.14",
        "npm": ">=6",
        "yarn": ">=1"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.3.tgz",
      "integrity": "sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==",
      "dev": true,
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/css.escape": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/css.escape/-/css.escape-1.5.1.tgz",
      "integrity": "sha1-QuJ9T6BK4y+TGktNQZH6nN3ul8s=",
      "dev": true
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "2.6.20",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-2.6.20.tgz",
      "integrity": "sha512-/WwNkdXfckNgw6S5R125rrW8ez139lBHWouiBvX8dfMFtcn6V81REDqnH7+CRpRipfYlyU1CmOnOxrmGcFOjeA==",
      "dev": true
    },
    "node_modules/de-indent": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/de-indent/-/de-indent-1.0.2.tgz",
      "integrity": "sha512-e/1zu3xH5MQryN2zdVaF0OrdNLUbvWxzMbi+iNA6Bky7l1RoP8a2fIbRocyHclXt/arDrrR6lL3TqFD9pMQTsg==",
      "dev": true
    },
    "node_modules/debug": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.4.tgz",
      "integrity": "sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==",
      "dependencies": {
        "ms": "2.1.2"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decompress-response": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
      "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
      "dev": true,
      "dependencies": {
        "mimic-response": "^3.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/decompress-response/node_modules/mimic-response": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
      "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/deep-eql": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/deep-eql/-/deep-eql-4.1.3.tgz",
      "integrity": "sha512-WaEtAOpRA1MQ0eohqZjpGD8zdI0Ovsm8mmFhaDN8dvDZzyoUMcYDnf5Y6iu7HTXxf8JDS23qWa4a+hKCDyOPzw==",
      "dev": true,
      "dependencies": {
        "type-detect": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true
    },
    "node_modules/defer-to-connect": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
      "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
      "dev": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/define-properties": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.1.4.tgz",
      "integrity": "sha512-uckOqKcfaVvtBdsVkdPv3XjveQJsNQqmhXgRi8uhvWWuPYZCNlzT8qAyblUgNoXdHdjMTzAqeGjAoli8f+bzPA==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha1-3zrhmayt+31ECqrgsp4icrJOxhk=",
      "dev": true,
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/detect-node": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/detect-node/-/detect-node-2.1.0.tgz",
      "integrity": "sha512-T0NIuQpnTvFDATNuHN5roPwSBG83rFsuO+MXXH9/3N1eFbn4wcPjttvjMLEPWJ0RGUYgQE7cGgS3tNxbqCGM7g==",
      "dev": true,
      "optional": true
    },
    "node_modules/diff": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/diff/-/diff-5.1.0.tgz",
      "integrity": "sha512-D+mk+qE8VC/PAUrlAU34N+VfXev0ghe5ywmpqrawphmVZc1bEfn56uo9qpyGp1p4xpzOHkSW4ztBd6L7Xx4ACw==",
      "dev": true,
      "engines": {
        "node": ">=0.3.1"
      }
    },
    "node_modules/dir-compare": {
      "version": "2.4.0",
      "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
      "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
      "dev": true,
      "dependencies": {
        "buffer-equal": "1.0.0",
        "colors": "1.0.3",
        "commander": "2.9.0",
        "minimatch": "3.0.4"
      },
      "bin": {
        "dircompare": "src/cli/dircompare.js"
      }
    },
    "node_modules/dir-compare/node_modules/commander": {
      "version": "2.9.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
      "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
      "dev": true,
      "dependencies": {
        "graceful-readlink": ">= 1.0.0"
      },
      "engines": {
        "node": ">= 0.6.x"
      }
    },
    "node_modules/dir-compare/node_modules/minimatch": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
      "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "dependencies": {
        "path-type": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dmg-builder": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.6.0.tgz",
      "integrity": "sha512-jFZvY1JohyHarIAlTbfQOk+HnceGjjAdFjVn3n8xlDWKsYNqbO4muca6qXEZTfGXeQMG7TYim6CeS5XKSfSsGA==",
      "dev": true,
      "dependencies": {
        "app-builder-lib": "23.6.0",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "fs-extra": "^10.0.0",
        "iconv-lite": "^0.6.2",
        "js-yaml": "^4.1.0"
      },
      "optionalDependencies": {
        "dmg-license": "^1.0.11"
      }
    },
    "node_modules/dmg-builder/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/dmg-builder/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/dmg-builder/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/dmg-license": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/dmg-license/-/dmg-license-1.0.11.tgz",
      "integrity": "sha512-ZdzmqwKmECOWJpqefloC5OJy1+WZBBse5+MR88z9g9Zn4VY+WYUkAyojmhzJckH5YbbZGcYIuGAkY5/Ys5OM2Q==",
      "deprecated": "Disk image license agreements are deprecated by Apple and will probably be removed in a future macOS release. Discussion at: https://github.com/argv-minus-one/dmg-license/issues/11",
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "dependencies": {
        "@types/plist": "^3.0.1",
        "@types/verror": "^1.10.3",
        "ajv": "^6.10.0",
        "crc": "^3.8.0",
        "iconv-corefoundation": "^1.1.7",
        "plist": "^3.0.4",
        "smart-buffer": "^4.0.2",
        "verror": "^1.10.0"
      },
      "bin": {
        "dmg-license": "bin/dmg-license.js"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/dotenv": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-9.0.2.tgz",
      "integrity": "sha512-I9OvvrHp4pIARv4+x9iuewrWycX6CcZtoAu1XrzPxc5UygMJXJZYmBsynku8IkrJwgypE5DGNjDPmPRhDCptUg==",
      "dev": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/dotenv-expand": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/dotenv-expand/-/dotenv-expand-5.1.0.tgz",
      "integrity": "sha512-YXQl1DSa4/PQyRfgrv6aoNjhasp/p4qs9FjJ4q4cQk+8m4r6k4ZSiEyytKG8f8W9gi8WsQtIObNmKd+tMzNTmA==",
      "dev": true
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true
    },
    "node_modules/editorconfig": {
      "version": "0.15.3",
      "resolved": "https://registry.npmjs.org/editorconfig/-/editorconfig-0.15.3.tgz",
      "integrity": "sha512-M9wIMFx96vq0R4F+gRpY3o2exzb8hEj/n9S8unZtHSvYjibBp/iMufSzvmOcV/laG0ZtuTVGtiJggPOSW2r93g==",
      "dev": true,
      "dependencies": {
        "commander": "^2.19.0",
        "lru-cache": "^4.1.5",
        "semver": "^5.6.0",
        "sigmund": "^1.0.1"
      },
      "bin": {
        "editorconfig": "bin/editorconfig"
      }
    },
    "node_modules/editorconfig/node_modules/commander": {
      "version": "2.20.3",
      "resolved": "https://registry.npmjs.org/commander/-/commander-2.20.3.tgz",
      "integrity": "sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==",
      "dev": true
    },
    "node_modules/editorconfig/node_modules/lru-cache": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-4.1.5.tgz",
      "integrity": "sha512-sWZlbEP2OsHNkXrMl5GYk/jKk70MBng6UU4YI/qGDYbgf6YbP4EvmqISbXCoJiRKs+1bSpFHVgQxvJ17F2li5g==",
      "dev": true,
      "dependencies": {
        "pseudomap": "^1.0.2",
        "yallist": "^2.1.2"
      }
    },
    "node_modules/editorconfig/node_modules/semver": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-5.7.1.tgz",
      "integrity": "sha512-sauaDf/PZdVgrLTNYHRtpXa1iRiKcaebiKQ1BJdpQlWH2lCvexQdX55snPFyK7QzpudqbCI0qXFfOasHdyNDGQ==",
      "dev": true,
      "bin": {
        "semver": "bin/semver"
      }
    },
    "node_modules/editorconfig/node_modules/yallist": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-2.1.2.tgz",
      "integrity": "sha512-ncTzHV7NvsQZkYe1DW7cbDLm0YpzHmZF5r/iyP3ZnQtMiJ+pjzisCiMNI+Sj+xQF5pXhSHxSB3uDbsBTzY/c2A==",
      "dev": true
    },
    "node_modules/ejs": {
      "version": "3.1.8",
      "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.8.tgz",
      "integrity": "sha512-/sXZeMlhS0ArkfX2Aw780gJzXSMPnKjtspYZv+f3NiKLlubezAHDU5+9xz6gd3/NhG3txQCo6xlglmTS+oTGEQ==",
      "dev": true,
      "dependencies": {
        "jake": "^10.8.5"
      },
      "bin": {
        "ejs": "bin/cli.js"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/electron": {
      "version": "23.1.4",
      "resolved": "https://registry.npmjs.org/electron/-/electron-23.1.4.tgz",
      "integrity": "sha512-3Z6CpAPdhv6haYX9DTO7k0l6uAUreZM3/EngQYqGN3Gz7Fp0DPb/egt8BwR3ClG/jTlQM+PQ+5WkTK0eMjm07A==",
      "dev": true,
      "hasInstallScript": true,
      "dependencies": {
        "@electron/get": "^2.0.0",
        "@types/node": "^16.11.26",
        "extract-zip": "^2.0.1"
      },
      "bin": {
        "electron": "cli.js"
      },
      "engines": {
        "node": ">= 12.20.55"
      }
    },
    "node_modules/electron-builder": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.6.0.tgz",
      "integrity": "sha512-y8D4zO+HXGCNxFBV/JlyhFnoQ0Y0K7/sFH+XwIbj47pqaW8S6PGYQbjoObolKBR1ddQFPt4rwp4CnwMJrW3HAw==",
      "dev": true,
      "dependencies": {
        "@types/yargs": "^17.0.1",
        "app-builder-lib": "23.6.0",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "dmg-builder": "23.6.0",
        "fs-extra": "^10.0.0",
        "is-ci": "^3.0.0",
        "lazy-val": "^1.0.5",
        "read-config-file": "6.2.0",
        "simple-update-notifier": "^1.0.7",
        "yargs": "^17.5.1"
      },
      "bin": {
        "electron-builder": "cli.js",
        "install-app-deps": "install-app-deps.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/electron-builder/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/electron-builder/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/electron-builder/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/electron-osx-sign": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
      "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
      "dev": true,
      "dependencies": {
        "bluebird": "^3.5.0",
        "compare-version": "^0.1.2",
        "debug": "^2.6.8",
        "isbinaryfile": "^3.0.2",
        "minimist": "^1.2.0",
        "plist": "^3.0.1"
      },
      "bin": {
        "electron-osx-flat": "bin/electron-osx-flat.js",
        "electron-osx-sign": "bin/electron-osx-sign.js"
      },
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/electron-osx-sign/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/electron-osx-sign/node_modules/isbinaryfile": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
      "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
      "dev": true,
      "dependencies": {
        "buffer-alloc": "^1.2.0"
      },
      "engines": {
        "node": ">=0.6.0"
      }
    },
    "node_modules/electron-osx-sign/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true
    },
    "node_modules/electron-publish": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.6.0.tgz",
      "integrity": "sha512-jPj3y+eIZQJF/+t5SLvsI5eS4mazCbNYqatv5JihbqOstIM13k0d1Z3vAWntvtt13Itl61SO6seicWdioOU5dg==",
      "dev": true,
      "dependencies": {
        "@types/fs-extra": "^9.0.11",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "fs-extra": "^10.0.0",
        "lazy-val": "^1.0.5",
        "mime": "^2.5.2"
      }
    },
    "node_modules/electron-publish/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/electron-publish/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/electron-publish/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/electron-updater": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-5.3.0.tgz",
      "integrity": "sha512-iKEr7yQBcvnQUPnSDYGSWC9t0eF2YbZWeYYYZzYxdl+HiRejXFENjYMnYjoOm2zxyD6Cr2JTHZhp9pqxiXuCOw==",
      "dependencies": {
        "@types/semver": "^7.3.6",
        "builder-util-runtime": "9.1.1",
        "fs-extra": "^10.0.0",
        "js-yaml": "^4.1.0",
        "lazy-val": "^1.0.5",
        "lodash.escaperegexp": "^4.1.2",
        "lodash.isequal": "^4.5.0",
        "semver": "^7.3.5",
        "typed-emitter": "^2.1.0"
      }
    },
    "node_modules/electron-updater/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/electron-updater/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/electron-updater/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/electron/node_modules/@types/node": {
      "version": "16.18.16",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-16.18.16.tgz",
      "integrity": "sha512-ZOzvDRWp8dCVBmgnkIqYCArgdFOO9YzocZp8Ra25N/RStKiWvMOXHMz+GjSeVNe5TstaTmTWPucGJkDw0XXJWA==",
      "dev": true
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true
    },
    "node_modules/end-of-stream": {
      "version": "1.4.4",
      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.4.tgz",
      "integrity": "sha512-+uw1inIHVPQoaVuHzRyXd21icM+cnt4CzD5rW+NC1wjOUSTOs+Te7FOv7AhN7vS9x/oIyhLP5PR1H+phQAHu5Q==",
      "dev": true,
      "dependencies": {
        "once": "^1.4.0"
      }
    },
    "node_modules/env-paths": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/env-paths/-/env-paths-2.2.1.tgz",
      "integrity": "sha512-+h1lkLKhZMTYjog1VEpJNG7NZJWcuc2DDk/qsqSTRRCOXiLjeQ1d1/udrUGhqMxUgAlwKNZ0cf2uqan5GLuS2A==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/es6-error": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/es6-error/-/es6-error-4.1.1.tgz",
      "integrity": "sha512-Um/+FxMr9CISWh0bi5Zv0iOD+4cFh5qLeks1qhAopKVAJw3drgKbKySikp7wGhDL0HPeaja0P5ULZrxLkniUVg==",
      "dev": true,
      "optional": true
    },
    "node_modules/esbuild": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.16.17.tgz",
      "integrity": "sha512-G8LEkV0XzDMNwXKgM0Jwu3nY3lSTwSGY6XbxM9cr9+s0T/qSV1q1JVPBGzm3dcjhCic9+emZDmMffkwgPeOeLg==",
      "dev": true,
      "hasInstallScript": true,
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=12"
      },
      "optionalDependencies": {
        "@esbuild/android-arm": "0.16.17",
        "@esbuild/android-arm64": "0.16.17",
        "@esbuild/android-x64": "0.16.17",
        "@esbuild/darwin-arm64": "0.16.17",
        "@esbuild/darwin-x64": "0.16.17",
        "@esbuild/freebsd-arm64": "0.16.17",
        "@esbuild/freebsd-x64": "0.16.17",
        "@esbuild/linux-arm": "0.16.17",
        "@esbuild/linux-arm64": "0.16.17",
        "@esbuild/linux-ia32": "0.16.17",
        "@esbuild/linux-loong64": "0.16.17",
        "@esbuild/linux-mips64el": "0.16.17",
        "@esbuild/linux-ppc64": "0.16.17",
        "@esbuild/linux-riscv64": "0.16.17",
        "@esbuild/linux-s390x": "0.16.17",
        "@esbuild/linux-x64": "0.16.17",
        "@esbuild/netbsd-x64": "0.16.17",
        "@esbuild/openbsd-x64": "0.16.17",
        "@esbuild/sunos-x64": "0.16.17",
        "@esbuild/win32-arm64": "0.16.17",
        "@esbuild/win32-ia32": "0.16.17",
        "@esbuild/win32-x64": "0.16.17"
      }
    },
    "node_modules/escalade": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.1.1.tgz",
      "integrity": "sha512-k0er2gUkLf8O0zKJiAhmkTnJlTvINGv7ygDNPbeIsX/TJjGJZHuh9B2UxbsaEkmlEo9MfhrSzmhIlhRlI2GXnw==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "8.36.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.36.0.tgz",
      "integrity": "sha512-Y956lmS7vDqomxlaaQAHVmeb4tNMp2FWIvU/RnU5BD3IKMD/MJPr76xdyr68P8tV1iNMvN2mRK0yy3c+UjL+bw==",
      "dev": true,
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.4.0",
        "@eslint/eslintrc": "^2.0.1",
        "@eslint/js": "8.36.0",
        "@humanwhocodes/config-array": "^0.11.8",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "ajv": "^6.10.0",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.1.1",
        "eslint-visitor-keys": "^3.3.0",
        "espree": "^9.5.0",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "grapheme-splitter": "^1.0.4",
        "ignore": "^5.2.0",
        "import-fresh": "^3.0.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-sdsl": "^4.1.4",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.1",
        "strip-ansi": "^6.0.1",
        "strip-json-comments": "^3.1.0",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-plugin-vue": {
      "version": "9.9.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-vue/-/eslint-plugin-vue-9.9.0.tgz",
      "integrity": "sha512-YbubS7eK0J7DCf0U2LxvVP7LMfs6rC6UltihIgval3azO3gyDwEGVgsCMe1TmDiEkl6GdMKfRpaME6QxIYtzDQ==",
      "dev": true,
      "dependencies": {
        "eslint-utils": "^3.0.0",
        "natural-compare": "^1.4.0",
        "nth-check": "^2.0.1",
        "postcss-selector-parser": "^6.0.9",
        "semver": "^7.3.5",
        "vue-eslint-parser": "^9.0.1",
        "xml-name-validator": "^4.0.0"
      },
      "engines": {
        "node": "^14.17.0 || >=16.0.0"
      },
      "peerDependencies": {
        "eslint": "^6.2.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/eslint-scope": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-5.1.1.tgz",
      "integrity": "sha512-2NxwbF/hZ0KpepYN0cNbo+FN6XoK7GaHlQhgx/hIZl6Va0bF45RQOOwhLIy8lQDbuCiadSLCBnH2CFYquit5bw==",
      "dev": true,
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^4.1.1"
      },
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/eslint-utils": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/eslint-utils/-/eslint-utils-3.0.0.tgz",
      "integrity": "sha512-uuQC43IGctw68pJA1RgbQS8/NP7rch6Cwd4j3ZBtgo4/8Flj4eGE7ZYSZRN3iq5pVUv6GPdW5Z1RFleo84uLDA==",
      "dev": true,
      "dependencies": {
        "eslint-visitor-keys": "^2.0.0"
      },
      "engines": {
        "node": "^10.0.0 || ^12.0.0 || >= 14.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/mysticatea"
      },
      "peerDependencies": {
        "eslint": ">=5"
      }
    },
    "node_modules/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-2.1.0.tgz",
      "integrity": "sha512-0rSmRBzXgDzIsD6mGdJgevzgezI534Cer5L/vyMX0kHzT/jiB43jRhd9YUlMGYLQy2zprNmoT8qasCGtY+QaKw==",
      "dev": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.3.0.tgz",
      "integrity": "sha512-mQ+suqKJVyeuwGYHAdjMFqjCyfl8+Ldnxuyp3ldiMBFKkvytrXUZWaiPCEav8qDHKty44bD+qV1IP4T+w+xXRA==",
      "dev": true,
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/eslint/node_modules/eslint-scope": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.1.1.tgz",
      "integrity": "sha512-QKQM/UXpIiHcLqJ5AOyIW7XZmzjkzQXYE54n1++wb0u9V/abW3l9uQnxX8Z5Xd18xyKIMTUAyQ0k1e8pz6LUrw==",
      "dev": true,
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/eslint/node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/espree": {
      "version": "9.5.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.5.0.tgz",
      "integrity": "sha512-JPbJGhKc47++oo4JkEoTe2wjy4fmMwvFpgJT9cQzmfXKp22Dr6Hf1tdCteLz1h0P3t+mGvWZ+4Uankvh8+c6zw==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.8.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.4.2.tgz",
      "integrity": "sha512-JVSoLdTlTDkmjFmab7H/9SL9qGSyjElT3myyKp7krqjVFQCDLmj1QFaCLRFBszBKI0XVZaiiXvuPIX3ZwHe1Ng==",
      "dev": true,
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esquery/node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esrecurse/node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-4.3.0.tgz",
      "integrity": "sha512-39nnKffWz8xN1BU/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estree-walker": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz",
      "integrity": "sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==",
      "dev": true
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/extract-zip": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/extract-zip/-/extract-zip-2.0.1.tgz",
      "integrity": "sha512-GDhU9ntwuKyGXdZBUgTIe+vXnWj0fppUEtMDL0+idd5Sta8TGpHssn/eusA9mrPr9qNDym6SxAYZjNvCn/9RBg==",
      "dev": true,
      "dependencies": {
        "debug": "^4.1.1",
        "get-stream": "^5.1.0",
        "yauzl": "^2.10.0"
      },
      "bin": {
        "extract-zip": "cli.js"
      },
      "engines": {
        "node": ">= 10.17.0"
      },
      "optionalDependencies": {
        "@types/yauzl": "^2.9.1"
      }
    },
    "node_modules/extsprintf": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/extsprintf/-/extsprintf-1.4.1.tgz",
      "integrity": "sha512-Wrk35e8ydCKDj/ArClo1VrPVmN8zph5V4AtHwIuHhvMXsKf73UT3BOD+azBIW+3wOJ4FhEH7zyaJCFvChjYvMA==",
      "dev": true,
      "engines": [
        "node >=0.6.0"
      ],
      "optional": true
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true
    },
    "node_modules/fast-glob": {
      "version": "3.2.11",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.2.11.tgz",
      "integrity": "sha512-xrO3+1bxSo3ZVHAnqzyuewYT6aMFHRAd4Kcs92MAonjwQZLsK9d0SF1IyQ3k5PoirxTW0Oe/RqFgMQ6TcNE5Ew==",
      "dev": true,
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.4"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha1-PYpcZog6FqMMqGQ+hR8Zuqd5eRc=",
      "dev": true
    },
    "node_modules/fastq": {
      "version": "1.13.0",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.13.0.tgz",
      "integrity": "sha512-YpkpUnK8od0o1hmeSc7UUs/eB/vIPWJYjKck2QKIzAf71Vm1AAQ3EbuZB3g2JIy+pg+ERD0vqI79KyZiB2e2Nw==",
      "dev": true,
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fd-slicer": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/fd-slicer/-/fd-slicer-1.1.0.tgz",
      "integrity": "sha512-cE1qsB/VwyQozZ+q1dGxR8LBYNZeofhEdUNGSMbQD3Gw2lAzX9Zb3uIU6Ebc/Fmyjo9AWWfnn0AUCHqtevs/8g==",
      "dev": true,
      "dependencies": {
        "pend": "~1.2.0"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/filelist": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/filelist/-/filelist-1.0.4.tgz",
      "integrity": "sha512-w1cEuf3S+DrLCQL7ET6kz+gmlJdbq9J7yXCSjK/OZCPA+qEN1WyF4ZAf0YYJa4/shHJra2t/d/r8SV4Ji+x+8Q==",
      "dev": true,
      "dependencies": {
        "minimatch": "^5.0.1"
      }
    },
    "node_modules/filelist/node_modules/brace-expansion": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
      "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/filelist/node_modules/minimatch": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
      "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/fill-range": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.0.1.tgz",
      "integrity": "sha512-qOo9F+dMUmC2Lcb4BbVvnKJxTPjCm+RRpe4gDuGrzkL7mEVl/djYSu2OdQ2Pa302N4oqkSg9ir6jaLWJ2USVpQ==",
      "dev": true,
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.0.4.tgz",
      "integrity": "sha512-dm9s5Pw7Jc0GvMYbshN6zchCA9RgQlzzEZX3vylR9IqFfS8XciblUXOKfW6SiuJ0e13eDYZoZV5wdrev7P3Nwg==",
      "dev": true,
      "dependencies": {
        "flatted": "^3.1.0",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.2.4.tgz",
      "integrity": "sha512-8/sOawo8tJ4QOBX8YlQBMxL8+RLZfxMQOif9o0KUKTNTjMYElWPE0r/m5VNFxTRd0NSw8qSy8dajrwX4RYI1Hw==",
      "dev": true
    },
    "node_modules/form-data": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
      "dev": true,
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fs-extra": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-8.1.0.tgz",
      "integrity": "sha512-yhlQgA6mnOJUKOsRUFsgJdQCvkKhcz8tlZG5HBQfReYZy46OwLcY+Zia0mtdHsOo9y/hP+CxMN0TU9QxoOtG4g==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^4.0.0",
        "universalify": "^0.1.0"
      },
      "engines": {
        "node": ">=6 <7 || >=8"
      }
    },
    "node_modules/fs-minipass": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fs-minipass/-/fs-minipass-2.1.0.tgz",
      "integrity": "sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==",
      "dev": true,
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha1-FQStJSMVjKpA20onh8sBQRmU6k8=",
      "dev": true
    },
    "node_modules/fsevents": {
      "version": "2.3.2",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz",
      "integrity": "sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==",
      "dev": true,
      "hasInstallScript": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.1.tgz",
      "integrity": "sha512-yIovAzMX49sF8Yl58fSCWJ5svSLuaibPxXQJFLmBObTuCr0Mf1KiPopGM9NiFjiYBCbfaa2Fh6breQ6ANVTI0A==",
      "dev": true
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true,
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-func-name": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/get-func-name/-/get-func-name-2.0.0.tgz",
      "integrity": "sha1-6td0q+5y4gQJQzoGY2YCPdaIekE=",
      "dev": true,
      "engines": {
        "node": "*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.1.1.tgz",
      "integrity": "sha512-kWZrnVM42QCiEA2Ig1bG8zjoIMOgxWwYCEeNdwY6Tv/cOSeGpcoX4pXHfKUxNKVoArnrEr2e9srnAxxGIraS9Q==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "function-bind": "^1.1.1",
        "has": "^1.0.3",
        "has-symbols": "^1.0.1"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-stream": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
      "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
      "dev": true,
      "dependencies": {
        "pump": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/glob": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.0.tgz",
      "integrity": "sha512-lmLf6gtyrPq8tTjSmrO94wBeQbFR3HbLHbuyD69wuyQkImp2hWqMGB47OX65FBkPffO641IP9jWa1z4ivqG26Q==",
      "dev": true,
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.0.4",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/global-agent": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "boolean": "^3.0.1",
        "es6-error": "^4.1.1",
        "matcher": "^3.0.0",
        "roarr": "^2.15.3",
        "semver": "^7.3.2",
        "serialize-error": "^7.0.1"
      },
      "engines": {
        "node": ">=10.0"
      }
    },
    "node_modules/globals": {
      "version": "13.19.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.19.0.tgz",
      "integrity": "sha512-dkQ957uSRWHw7CFXLUtUHQI3g3aWApYhfNR2O6jn/907riyTYKVBmxYVROkBcY614FSSeSJh7Xm7SrUWCxvJMQ==",
      "dev": true,
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.3.tgz",
      "integrity": "sha512-sFdI5LyBiNTHjRd7cGPWapiHWMOXKyuBNX/cWJ3NfzrZQVa8GI/8cofCl74AOVqq9W5kNmguTIzJ/1s2gyI9wA==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "define-properties": "^1.1.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "dependencies": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/got": {
      "version": "11.8.5",
      "resolved": "https://registry.npmjs.org/got/-/got-11.8.5.tgz",
      "integrity": "sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==",
      "dev": true,
      "dependencies": {
        "@sindresorhus/is": "^4.0.0",
        "@szmarczak/http-timer": "^4.0.5",
        "@types/cacheable-request": "^6.0.1",
        "@types/responselike": "^1.0.0",
        "cacheable-lookup": "^5.0.3",
        "cacheable-request": "^7.0.2",
        "decompress-response": "^6.0.0",
        "http2-wrapper": "^1.0.0-beta.5.2",
        "lowercase-keys": "^2.0.0",
        "p-cancelable": "^2.0.0",
        "responselike": "^2.0.0"
      },
      "engines": {
        "node": ">=10.19.0"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/got?sponsor=1"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.8",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.8.tgz",
      "integrity": "sha512-qkIilPUYcNhJpd33n0GBXTB1MMPp14TxEsEs0pTrsSVucApsYzW5V+Q8Qxhik6KU3evy+qkAAowTByymK0avdg=="
    },
    "node_modules/graceful-readlink": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
      "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
      "dev": true
    },
    "node_modules/grapheme-splitter": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/grapheme-splitter/-/grapheme-splitter-1.0.4.tgz",
      "integrity": "sha512-bzh50DW9kTPM00T8y4o8vQg89Di9oLJVLW/KaOGIXJWP/iqCN6WKYkbNOF04vFLJhwcpYUh9ydh/+5vpOqV4YQ==",
      "dev": true
    },
    "node_modules/happy-dom": {
      "version": "8.9.0",
      "resolved": "https://registry.npmjs.org/happy-dom/-/happy-dom-8.9.0.tgz",
      "integrity": "sha512-JZwJuGdR7ko8L61136YzmrLv7LgTh5b8XaEM3P709mLjyQuXJ3zHTDXvUtBBahRjGlcYW0zGjIiEWizoTUGKfA==",
      "dev": true,
      "dependencies": {
        "css.escape": "^1.5.1",
        "he": "^1.2.0",
        "iconv-lite": "^0.6.3",
        "node-fetch": "^2.x.x",
        "webidl-conversions": "^7.0.0",
        "whatwg-encoding": "^2.0.0",
        "whatwg-mimetype": "^3.0.0"
      }
    },
    "node_modules/has": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/has/-/has-1.0.3.tgz",
      "integrity": "sha512-f2dvO0VU6Oej7RkWJGrehjbzMAjFp5/VKPp5tTpWIV4JHHZK1/BxbFRtf/siA2SWTe09caDmVtYYzWEIbBS4zw==",
      "dev": true,
      "dependencies": {
        "function-bind": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.0.tgz",
      "integrity": "sha512-62DVLZGoiEBDHQyqG4w9xCuZ7eJEwNmJRWw2VY84Oedb7WFcA27fiEVe8oUQx9hAUJ4ekurquucTGwsyO1XGdQ==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "get-intrinsic": "^1.1.1"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.0.2.tgz",
      "integrity": "sha512-chXa79rL/UC2KlX17jo3vRGz0azaWEx5tGqZg5pO3NUyEJVB17dMruQlzCCOfUvElghKcm5194+BCRvi2Rv/Gw==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/he": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/he/-/he-1.2.0.tgz",
      "integrity": "sha512-F/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==",
      "dev": true,
      "bin": {
        "he": "bin/he"
      }
    },
    "node_modules/hosted-git-info": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
      "integrity": "sha512-kyCuEOWjJqZuDbRHzL8V93NzQhwIB71oFWSyzVo+KPZI+pnQPPxucdkrOZvkLRnrf5URsQM+IJ09Dw29cRALIA==",
      "dev": true,
      "dependencies": {
        "lru-cache": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/http-cache-semantics": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
      "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
      "dev": true
    },
    "node_modules/http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "dev": true,
      "dependencies": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/http2-wrapper": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
      "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
      "dev": true,
      "dependencies": {
        "quick-lru": "^5.1.1",
        "resolve-alpn": "^1.0.0"
      },
      "engines": {
        "node": ">=10.19.0"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "dev": true,
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/iconv-corefoundation": {
      "version": "1.1.7",
      "resolved": "https://registry.npmjs.org/iconv-corefoundation/-/iconv-corefoundation-1.1.7.tgz",
      "integrity": "sha512-T10qvkw0zz4wnm560lOEg0PovVqUXuOFhhHAkixw8/sycy7TJt7v/RrkEKEQnAw2viPSJu6iAkErxnzR0g8PpQ==",
      "dev": true,
      "optional": true,
      "os": [
        "darwin"
      ],
      "dependencies": {
        "cli-truncate": "^2.1.0",
        "node-addon-api": "^1.6.3"
      },
      "engines": {
        "node": "^8.11.2 || >=10"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ieee754": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "optional": true
    },
    "node_modules/ignore": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.2.0.tgz",
      "integrity": "sha512-CmxgYGiEPCLhfLnpPp1MoRmifwEIOgjcHXxOBjv7mY96c+eWScsOP9c112ZyLdWHi0FxHjI+4uVhKYp/gcdRmQ==",
      "dev": true,
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.0.tgz",
      "integrity": "sha512-veYYhQa+D1QBKznvhUHxb8faxlrwUnxseDAbAp457E0wLNio2bOSKnjYDhMj+YiAq61xrMGhQk9iXVk5FzgQMw==",
      "dev": true,
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha1-khi5srkoojixPcT7a21XbyMUU+o=",
      "dev": true,
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha1-Sb1jMdfQLQwJvJEKEHW6gWW1bfk=",
      "dev": true,
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true
    },
    "node_modules/ini": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==",
      "dev": true
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-ci": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
      "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
      "dev": true,
      "dependencies": {
        "ci-info": "^3.2.0"
      },
      "bin": {
        "is-ci": "bin.js"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.9.0",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.9.0.tgz",
      "integrity": "sha512-+5FPy5PnwmO3lvfMb0AsoPaBG+5KHUI0wYFXOtYPnVVVspTFUuMZNfNaNVRt3FZadstu2c8x23vykRW/NBoU6A==",
      "dev": true,
      "dependencies": {
        "has": "^1.0.3"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha1-qIwCU1eR8C7TfHahueqXc8gz+MI=",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/isbinaryfile": {
      "version": "4.0.10",
      "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
      "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
      "dev": true,
      "engines": {
        "node": ">= 8.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/gjtorikian/"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
      "dev": true
    },
    "node_modules/jake": {
      "version": "10.8.5",
      "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.5.tgz",
      "integrity": "sha512-sVpxYeuAhWt0OTWITwT98oyV0GsXyMlXCF+3L1SuafBVUIr/uILGRB+NqwkzhgXKvoJpDIpQvqkUALgdmQsQxw==",
      "dev": true,
      "dependencies": {
        "async": "^3.2.3",
        "chalk": "^4.0.2",
        "filelist": "^1.0.1",
        "minimatch": "^3.0.4"
      },
      "bin": {
        "jake": "bin/cli.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/js-beautify": {
      "version": "1.14.6",
      "resolved": "https://registry.npmjs.org/js-beautify/-/js-beautify-1.14.6.tgz",
      "integrity": "sha512-GfofQY5zDp+cuHc+gsEXKPpNw2KbPddreEo35O6jT6i0RVK6LhsoYBhq5TvK4/n74wnA0QbK8gGd+jUZwTMKJw==",
      "dev": true,
      "dependencies": {
        "config-chain": "^1.1.13",
        "editorconfig": "^0.15.3",
        "glob": "^8.0.3",
        "nopt": "^6.0.0"
      },
      "bin": {
        "css-beautify": "js/bin/css-beautify.js",
        "html-beautify": "js/bin/html-beautify.js",
        "js-beautify": "js/bin/js-beautify.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/js-beautify/node_modules/brace-expansion": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
      "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
      "dev": true,
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/js-beautify/node_modules/glob": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/glob/-/glob-8.1.0.tgz",
      "integrity": "sha512-r8hpEjiQEYlF2QU0df3dS+nxxSIreXQS1qRhMJM0Q5NDdR386C7jb7Hwwod8Fgiuex+k0GFjgft18yvxm5XoCQ==",
      "dev": true,
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^5.0.1",
        "once": "^1.3.0"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/js-beautify/node_modules/minimatch": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
      "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/js-sdsl": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/js-sdsl/-/js-sdsl-4.1.4.tgz",
      "integrity": "sha512-Y2/yD55y5jteOAmY50JbUZYwk3CP3wnLPEZnlR1w9oKhITrBEtAxwuWKebFf8hMrPMgbYwFoWK/lH2sBkErELw==",
      "dev": true
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha1-nbe1lJatPzz+8wp1FC0tkwrXJlE=",
      "dev": true
    },
    "node_modules/json-stringify-safe": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
      "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
      "dev": true,
      "optional": true
    },
    "node_modules/json5": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
      "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
      "dev": true,
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsonc-parser": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
      "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
      "dev": true
    },
    "node_modules/jsonfile": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-4.0.0.tgz",
      "integrity": "sha512-m6F1R3z8jjlf2imQHS2Qez5sjKWQzbuuhuJ/FKYFRZvPE3PuHcSMVZzfsLhGVOkfd20obL5SWEBew5ShlquNxg==",
      "dev": true,
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.2",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
      "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
      "dev": true,
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/lazy-val": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/lazy-val/-/lazy-val-1.0.5.tgz",
      "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q=="
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/local-pkg": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/local-pkg/-/local-pkg-0.4.2.tgz",
      "integrity": "sha512-mlERgSPrbxU3BP4qBqAvvwlgW4MTg78iwJdGGnv7kibKjWcJksrG3t6LB5lXI93wXRDvG4NpUgJFmTG4T6rdrg==",
      "dev": true,
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "dev": true
    },
    "node_modules/lodash.escaperegexp": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/lodash.escaperegexp/-/lodash.escaperegexp-4.1.2.tgz",
      "integrity": "sha1-ZHYsSGGAglGKw99Mz11YhtriA0c="
    },
    "node_modules/lodash.isequal": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/lodash.isequal/-/lodash.isequal-4.5.0.tgz",
      "integrity": "sha1-QVxEePK8wwEgwizhDtMib30+GOA="
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true
    },
    "node_modules/loupe": {
      "version": "2.3.6",
      "resolved": "https://registry.npmjs.org/loupe/-/loupe-2.3.6.tgz",
      "integrity": "sha512-RaPMZKiMy8/JruncMU5Bt6na1eftNoo++R4Y+N2FrxkDVTrGvcyzFTsaGif4QTeKESheMGegbhw6iUAq+5A8zA==",
      "dev": true,
      "dependencies": {
        "get-func-name": "^2.0.0"
      }
    },
    "node_modules/lowercase-keys": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
      "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/lru-cache": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
      "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/magic-string": {
      "version": "0.25.9",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.25.9.tgz",
      "integrity": "sha512-RmF0AsMzgt25qzqqLc1+MbHmhdx0ojF2Fvs4XnOqz2ZOBXzzkEwc/dJQZCYHAn7v1jbVOjAZfK8msRn4BxO4VQ==",
      "dev": true,
      "dependencies": {
        "sourcemap-codec": "^1.4.8"
      }
    },
    "node_modules/matcher": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/matcher/-/matcher-3.0.0.tgz",
      "integrity": "sha512-OkeDaAZ/bQCxeFAozM55PKcKU0yJMPGifLwV4Qgjitu+5MoAfSQN4lsLJeXZ1b8w0x+/Emda6MZgXS1jvsapng==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "escape-string-regexp": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.5.tgz",
      "integrity": "sha512-DMy+ERcEW2q8Z2Po+WNXuw3c5YaUSFjAO5GsJqfEl7UjvtIuFKO6ZrKvcItdy98dwFI2N1tg3zNIdKaQT+aNdA==",
      "dev": true,
      "dependencies": {
        "braces": "^3.0.2",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
      "dev": true,
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/mime-db": {
      "version": "1.51.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.51.0.tgz",
      "integrity": "sha512-5y8A56jg7XVQx2mbv1lu49NR4dokRnhZYTtL+KGfaa27uq4pSTXkwQkFJl4pkRMyNFz/EtYDSkiiEHx3F7UN6g==",
      "dev": true,
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.34",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.34.tgz",
      "integrity": "sha512-6cP692WwGIs9XXdOO4++N+7qjqv0rqxxVvJ3VHPh/Sc9mVZcQP+ZGhkKiTvWMQRr2tbHkJP/Yn7Y0npb3ZBs4A==",
      "dev": true,
      "dependencies": {
        "mime-db": "1.51.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-response": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
      "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
      "dev": true,
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.5.tgz",
      "integrity": "sha512-FM9nNUYrRBAELZQT3xeZQ7fmMOBg6nWNmJKTcgsJeaLstP/UODVpGsr5OhXhhXg6f+qtJ8uiZ+PUxkDWcgIXLw==",
      "dev": true
    },
    "node_modules/minipass": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.3.tgz",
      "integrity": "sha512-N0BOsdFAlNRfmwMhjAsLVWOk7Ljmeb39iqFlsV1At+jqRhSUP9yeof8FyJu4imaJiSUp8vQebWD/guZwGQC8iA==",
      "dev": true,
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minizlib": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-2.1.2.tgz",
      "integrity": "sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==",
      "dev": true,
      "dependencies": {
        "minipass": "^3.0.0",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/mlly": {
      "version": "0.5.16",
      "resolved": "https://registry.npmjs.org/mlly/-/mlly-0.5.16.tgz",
      "integrity": "sha512-LaJ8yuh4v0zEmge/g3c7jjFlhoCPfQn6RCjXgm9A0Qiuochq4BcuOxVfWmdnCoLTlg2MV+hqhOek+W2OhG0Lwg==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.8.0",
        "pathe": "^0.3.8",
        "pkg-types": "^0.3.5",
        "ufo": "^0.8.5"
      }
    },
    "node_modules/ms": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
      "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w=="
    },
    "node_modules/muggle-string": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/muggle-string/-/muggle-string-0.2.2.tgz",
      "integrity": "sha512-YVE1mIJ4VpUMqZObFndk9CJu6DBJR/GB13p3tXuNbwD4XExaI5EOuRl6BHeIDxIqXZVxSfAC+y6U1Z/IxCfKUg==",
      "dev": true
    },
    "node_modules/nano-staged": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/nano-staged/-/nano-staged-0.8.0.tgz",
      "integrity": "sha512-QSEqPGTCJbkHU2yLvfY6huqYPjdBrOaTMKatO1F8nCSrkQGXeKwtCiCnsdxnuMhbg3DTVywKaeWLGCE5oJpq0g==",
      "dev": true,
      "dependencies": {
        "picocolors": "^1.0.0"
      },
      "bin": {
        "nano-staged": "lib/bin.js"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.4",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.4.tgz",
      "integrity": "sha512-MqBkQh/OHTS2egovRtLk45wEyNXwF+cokD+1YPf9u5VfJiRdAiRwB2froX5Co9Rh20xs4siNPm8naNotSD6RBw==",
      "dev": true,
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha1-Sr6/7tdUHywnrPspvbvRXI1bpPc=",
      "dev": true
    },
    "node_modules/natural-compare-lite": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare-lite/-/natural-compare-lite-1.4.0.tgz",
      "integrity": "sha512-Tj+HTDSJJKaZnfiuw+iaF9skdPpTo2GtEly5JHnWV/hfv2Qj/9RKsGISQtLh2ox3l5EAGw487hnBee0sIJ6v2g==",
      "dev": true
    },
    "node_modules/node-addon-api": {
      "version": "1.7.2",
      "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-1.7.2.tgz",
      "integrity": "sha512-ibPK3iA+vaY1eEjESkQkM0BbCqFOaZMiXRTtdB0u7b4djtY6JnsjvPdUHVMg6xQt3B8fpTTWHI9A+ADjM9frzg==",
      "dev": true,
      "optional": true
    },
    "node_modules/node-fetch": {
      "version": "2.6.6",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
      "dev": true,
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      }
    },
    "node_modules/nopt": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/nopt/-/nopt-6.0.0.tgz",
      "integrity": "sha512-ZwLpbTgdhuZUnZzjd7nb1ZV+4DoiC6/sfiVKok72ym/4Tlf+DFdlHYmT2JPmcNNWV6Pi3SDf1kT+A4r9RTuT9g==",
      "dev": true,
      "dependencies": {
        "abbrev": "^1.0.0"
      },
      "bin": {
        "nopt": "bin/nopt.js"
      },
      "engines": {
        "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/normalize-url": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
      "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/nth-check": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/nth-check/-/nth-check-2.1.1.tgz",
      "integrity": "sha512-lqjrjmaOoAnWfMmBPL+XNnynZh2+swxiX3WUE0s4yEHI6m+AwrK2UZOimIRl3X/4QctVqS8AiZjFqyOGrMXb/w==",
      "dev": true,
      "dependencies": {
        "boolbase": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/fb55/nth-check?sponsor=1"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha1-WDsap3WWHUsROsF9nFC6753Xa9E=",
      "dev": true,
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.1",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.1.tgz",
      "integrity": "sha512-74RlY5FCnhq4jRxVUPKDaRwrVNXMqsGsiW6AJw4XK8hmtm10wC0ypZBLw5IIp85NZMr91+qd1RvvENwg7jjRFw==",
      "dev": true,
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.3"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-cancelable": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
      "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha1-F0uSaHNVNP+8es5r9TpanhtcX18=",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pathe": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-0.3.9.tgz",
      "integrity": "sha512-6Y6s0vT112P3jD8dGfuS6r+lpa0qqNrLyHPOwvXMnyNTQaYiwgau2DP3aNDsR13xqtGj7rrPo+jFUATpU6/s+g==",
      "dev": true
    },
    "node_modules/pathval": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/pathval/-/pathval-1.1.1.tgz",
      "integrity": "sha512-Dp6zGqpTdETdR63lehJYPeIOqpiNBNtc7BpWSLrOje7UaIsE5aY92r/AunQA7rsXvet3lrJ3JnZX29UPTKXyKQ==",
      "dev": true,
      "engines": {
        "node": "*"
      }
    },
    "node_modules/pend": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/pend/-/pend-1.2.0.tgz",
      "integrity": "sha512-F3asv42UuXchdzt+xXqfW1OGlVBe+mxa2mqI0pg5yAHZPvFmY3Y6drSf/GQ1A86WgWEN9Kzh/WrgKa6iGcHXLg==",
      "dev": true
    },
    "node_modules/picocolors": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.0.0.tgz",
      "integrity": "sha512-1fygroTLlHu66zi26VoTDv8yRgm0Fccecssto+MhsZ0D/DGW2sm8E8AjW7NU5VVTRt5GxbeZ5qBuJr+HyLYkjQ==",
      "dev": true
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pkg-types": {
      "version": "0.3.6",
      "resolved": "https://registry.npmjs.org/pkg-types/-/pkg-types-0.3.6.tgz",
      "integrity": "sha512-uQZutkkh6axl1GxDm5/+8ivVdwuJ5pyDGqJeSiIWIUWIqYiK3p9QKozN/Rv6eVvFoeSWkN1uoYeSDBwwBJBtbg==",
      "dev": true,
      "dependencies": {
        "jsonc-parser": "^3.2.0",
        "mlly": "^0.5.16",
        "pathe": "^0.3.9"
      }
    },
    "node_modules/playwright": {
      "version": "1.31.2",
      "resolved": "https://registry.npmjs.org/playwright/-/playwright-1.31.2.tgz",
      "integrity": "sha512-jpC47n2PKQNtzB7clmBuWh6ftBRS/Bt5EGLigJ9k2QAKcNeYXZkEaDH5gmvb6+AbcE0DO6GnXdbl9ogG6Eh+og==",
      "dev": true,
      "hasInstallScript": true,
      "dependencies": {
        "playwright-core": "1.31.2"
      },
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/playwright-core": {
      "version": "1.31.2",
      "resolved": "https://registry.npmjs.org/playwright-core/-/playwright-core-1.31.2.tgz",
      "integrity": "sha512-a1dFgCNQw4vCsG7bnojZjDnPewZcw7tZUNFN0ZkcLYKj+mPmXvg4MpaaKZ5SgqPsOmqIf2YsVRkgqiRDxD+fDQ==",
      "dev": true,
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/plist": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/plist/-/plist-3.0.5.tgz",
      "integrity": "sha512-83vX4eYdQp3vP9SxuYgEM/G/pJQqLUz/V/xzPrzruLs7fz7jxGQ1msZ/mg1nwZxUSuOp4sb+/bEIbRrbzZRxDA==",
      "dev": true,
      "dependencies": {
        "base64-js": "^1.5.1",
        "xmlbuilder": "^9.0.7"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/plist/node_modules/xmlbuilder": {
      "version": "9.0.7",
      "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-9.0.7.tgz",
      "integrity": "sha1-Ey7mPS7FVlxVfiD0wi35rKaGsQ0=",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/postcss": {
      "version": "8.4.21",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.21.tgz",
      "integrity": "sha512-tP7u/Sn/dVxK2NnruI4H9BG+x+Wxz6oeZ1cJ8P6G/PZY0IKk4k/63TDsQf2kQq3+qoJeLm2kIBUNlZe3zgb4Zg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        }
      ],
      "dependencies": {
        "nanoid": "^3.3.4",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.0.10",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.0.10.tgz",
      "integrity": "sha512-IQ7TZdoaqbT+LCpShg46jnZVlhWD2w6iQYAcYXfHARZ7X1t/UGhhceQDs5X0cGqKvYlHNOuv7Oa1xmb0oQuA3w==",
      "dev": true,
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/pretty-format": {
      "version": "27.5.1",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-27.5.1.tgz",
      "integrity": "sha512-Qb1gy5OrP5+zDf2Bvnzdl3jsTf1qXVMazbvCoKhtKqVs4/YK4ozX4gKQJJVyNe+cajNPn0KoC0MC3FUmaHWEmQ==",
      "dev": true,
      "dependencies": {
        "ansi-regex": "^5.0.1",
        "ansi-styles": "^5.0.0",
        "react-is": "^17.0.1"
      },
      "engines": {
        "node": "^10.13.0 || ^12.13.0 || ^14.15.0 || >=15.0.0"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-styles": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
      "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/progress": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/progress/-/progress-2.0.3.tgz",
      "integrity": "sha512-7PiHtLll5LdnKIMw100I+8xJXR5gW2QwWYkT6iJva0bXitZKa/XMrSbdmg3r2Xnaidz9Qumd0VPaMrZlF9V9sA==",
      "dev": true,
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/proto-list": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/proto-list/-/proto-list-1.2.4.tgz",
      "integrity": "sha512-vtK/94akxsTMhe0/cbfpR+syPuszcuwhqVjJq26CuNDgFGj682oRBXOP5MJpv2r7JtE8MsiepGIqvvOTBwn2vA==",
      "dev": true
    },
    "node_modules/pseudomap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/pseudomap/-/pseudomap-1.0.2.tgz",
      "integrity": "sha512-b/YwNhb8lk1Zz2+bXXpS/LK9OisiZZ1SNsSLxN1x2OXVEhW2Ckr/7mWE5vrC1ZTiJlD9g19jWszTmJsB+oEpFQ==",
      "dev": true
    },
    "node_modules/pump": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
      "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
      "dev": true,
      "dependencies": {
        "end-of-stream": "^1.1.0",
        "once": "^1.3.1"
      }
    },
    "node_modules/punycode": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
      "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
      "dev": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ]
    },
    "node_modules/quick-lru": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
      "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/react-is": {
      "version": "17.0.2",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-17.0.2.tgz",
      "integrity": "sha512-w2GsyukL62IJnlaff/nRegPQR94C/XXamvMWmSHRJ4y7Ts/4ocGRmTHvOs8PSE6pB3dWOrD/nueuU5sduBsQ4w==",
      "dev": true
    },
    "node_modules/read-config-file": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
      "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
      "dev": true,
      "dependencies": {
        "dotenv": "^9.0.2",
        "dotenv-expand": "^5.1.0",
        "js-yaml": "^4.1.0",
        "json5": "^2.2.0",
        "lazy-val": "^1.0.4"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha1-jGStX9MNqxyXbiNE/+f3kqam30I=",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.1",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
      "integrity": "sha512-nBpuuYuY5jFsli/JIs1oldw6fOQCBioohqWZg/2hiaOybXOft4lonv85uDOKXdf8rhyK159cxU5cDcK/NKk8zw==",
      "dev": true,
      "dependencies": {
        "is-core-module": "^2.9.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-alpn": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
      "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
      "dev": true
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/responselike": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
      "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
      "dev": true,
      "dependencies": {
        "lowercase-keys": "^2.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/reusify": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.0.4.tgz",
      "integrity": "sha512-U9nH88a3fc/ekCF1l0/UP1IosiuIjyTh7hBvXVMHYgVcfGvt897Xguj2UOLDeI5BG2m7/uwyaLVT6fbtCwTyzw==",
      "dev": true,
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "dev": true,
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/roarr": {
      "version": "2.15.4",
      "resolved": "https://registry.npmjs.org/roarr/-/roarr-2.15.4.tgz",
      "integrity": "sha512-CHhPh+UNHD2GTXNYhPWLnU8ONHdI+5DI+4EYIAOaiD63rHeYlZvyh8P+in5999TTSFgUYuKUAjzRI4mdh/p+2A==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "boolean": "^3.0.1",
        "detect-node": "^2.0.4",
        "globalthis": "^1.0.1",
        "json-stringify-safe": "^5.0.1",
        "semver-compare": "^1.0.0",
        "sprintf-js": "^1.1.2"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/rollup": {
      "version": "3.12.1",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-3.12.1.tgz",
      "integrity": "sha512-t9elERrz2i4UU9z7AwISj3CQcXP39cWxgRWLdf4Tm6aKm1eYrqHIgjzXBgb67GNY1sZckTFFi0oMozh3/S++Ig==",
      "dev": true,
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=14.18.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/rxjs": {
      "version": "7.5.5",
      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.5.5.tgz",
      "integrity": "sha512-sy+H0pQofO95VDmFLzyaw9xNJU4KTRSwQIGM6+iG3SypAtCiLDzpeG8sJrNCWn2Up9km+KhkvTdbkrdy+yzZdw==",
      "optional": true,
      "dependencies": {
        "tslib": "^2.1.0"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "dev": true
    },
    "node_modules/sanitize-filename": {
      "version": "1.6.3",
      "resolved": "https://registry.npmjs.org/sanitize-filename/-/sanitize-filename-1.6.3.tgz",
      "integrity": "sha512-y/52Mcy7aw3gRm7IrcGDFx/bCk4AhRh2eI9luHOQM86nZsqwiRkkq2GekHXBBD+SmPidc8i2PqtYZl+pWJ8Oeg==",
      "dev": true,
      "dependencies": {
        "truncate-utf8-bytes": "^1.0.0"
      }
    },
    "node_modules/sax": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/sax/-/sax-1.2.4.tgz",
      "integrity": "sha512-NqVDv9TpANUjFm0N8uM5GxL36UgKi9/atZw+x7YFnQ8ckwFGKrl4xX4yWtrey3UJm5nP1kUbnYgLopqWNSRhWw=="
    },
    "node_modules/semver": {
      "version": "7.3.7",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.3.7.tgz",
      "integrity": "sha512-QlYTucUYOews+WeEujDoEGziz4K6c47V/Bd+LjSSYcA94p+DmINdf7ncaUinThfvZyu13lN9OY1XDxt8C0Tw0g==",
      "dependencies": {
        "lru-cache": "^6.0.0"
      },
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/semver-compare": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/semver-compare/-/semver-compare-1.0.0.tgz",
      "integrity": "sha512-YM3/ITh2MJ5MtzaM429anh+x2jiLVjqILF4m4oyQB18W7Ggea7BfqdH/wGMK7dDiMghv/6WG7znWMwUDzJiXow==",
      "dev": true,
      "optional": true
    },
    "node_modules/serialize-error": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/serialize-error/-/serialize-error-7.0.1.tgz",
      "integrity": "sha512-8I8TjW5KMOKsZQTvoxjuSIa7foAwPWGOts+6o7sgjz41/qMD9VQHEDxi6PBvK2l0MXUmqZyNpUK+T2tQaaElvw==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "type-fest": "^0.13.1"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/serialize-error/node_modules/type-fest": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.13.1.tgz",
      "integrity": "sha512-34R7HTnG0XIJcBSn5XhDd7nNFPRcXYRZrBB2O2jdKqYODldSzBAqzsWoZYYvduky73toYS/ESqxPvkDf/F0XMg==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/siginfo": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
      "dev": true
    },
    "node_modules/sigmund": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/sigmund/-/sigmund-1.0.1.tgz",
      "integrity": "sha512-fCvEXfh6NWpm+YSuY2bpXb/VIihqWA6hLsgboC+0nl71Q7N7o2eaCW8mJa/NLvQhs6jpd3VZV4UiUQlV6+lc8g==",
      "dev": true
    },
    "node_modules/simple-git-hooks": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/simple-git-hooks/-/simple-git-hooks-2.8.1.tgz",
      "integrity": "sha512-DYpcVR1AGtSfFUNzlBdHrQGPsOhuuEJ/FkmPOOlFysP60AHd3nsEpkGq/QEOdtUyT1Qhk7w9oLmFoMG+75BDog==",
      "dev": true,
      "hasInstallScript": true,
      "bin": {
        "simple-git-hooks": "cli.js"
      }
    },
    "node_modules/simple-update-notifier": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
      "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
      "dev": true,
      "dependencies": {
        "semver": "~7.0.0"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/simple-update-notifier/node_modules/semver": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
      "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
      "dev": true,
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/slice-ansi": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-3.0.0.tgz",
      "integrity": "sha512-pSyv7bSTC7ig9Dcgbw9AuRNUb5k5V6oDudjZoMBSr13qpLBG7tB+zgCkARjq7xIUgdz5P1Qe8u+rSGdouOOIyQ==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "astral-regex": "^2.0.0",
        "is-fullwidth-code-point": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/smart-buffer": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/smart-buffer/-/smart-buffer-4.2.0.tgz",
      "integrity": "sha512-94hK0Hh8rPqQl2xXc3HsaBoOXKV20MToPkcXvwbISWLEs+64sBq5kFgn2kJDHb1Pry9yrP0dxrCI9RRci7RXKg==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">= 6.0.0",
        "npm": ">= 3.0.0"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.0.2.tgz",
      "integrity": "sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-support": {
      "version": "0.5.21",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
      "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
      "dev": true,
      "dependencies": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "node_modules/sourcemap-codec": {
      "version": "1.4.8",
      "resolved": "https://registry.npmjs.org/sourcemap-codec/-/sourcemap-codec-1.4.8.tgz",
      "integrity": "sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==",
      "dev": true
    },
    "node_modules/sprintf-js": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.1.2.tgz",
      "integrity": "sha512-VE0SOVEHCk7Qc8ulkWw3ntAzXuqf7S2lvwQaDLRnUeIEaKNQJzV6BwmLKhOqT61aGhfUMrXeaBk+oDGCzvhcug==",
      "dev": true,
      "optional": true
    },
    "node_modules/stackback": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
      "dev": true
    },
    "node_modules/stat-mode": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/stat-mode/-/stat-mode-1.0.0.tgz",
      "integrity": "sha512-jH9EhtKIjuXZ2cWxmXS8ZP80XyC3iasQxMDV8jzhNJpfDb7VbQLVW4Wvsxz9QZvzV+G4YoSfBUVKDOyxLzi/sg==",
      "dev": true,
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/std-env": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.3.1.tgz",
      "integrity": "sha512-3H20QlwQsSm2OvAxWIYhs+j01MzzqwMwGiiO1NQaJYZgJZFPuAbf95/DiKRBSTYIJ2FeGUc+B/6mPGcWP9dO3Q==",
      "dev": true
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/strip-literal": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/strip-literal/-/strip-literal-1.0.0.tgz",
      "integrity": "sha512-5o4LsH1lzBzO9UFH63AJ2ad2/S2AVx6NtjOcaz+VTT2h1RiRvbipW72z8M/lxEhcPHDBQwpDrnTF7sXy/7OwCQ==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.8.1"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      }
    },
    "node_modules/sumchecker": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/sumchecker/-/sumchecker-3.0.1.tgz",
      "integrity": "sha512-MvjXzkz/BOfyVDkG0oFOtBxHX2u3gKbMHIF/dXblZsgD3BWOFLmHovIpZY7BykJdAjcqRCBi1WYBNdEC9yI7vg==",
      "dev": true,
      "dependencies": {
        "debug": "^4.1.0"
      },
      "engines": {
        "node": ">= 8.0"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tar": {
      "version": "6.1.11",
      "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
      "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
      "dev": true,
      "dependencies": {
        "chownr": "^2.0.0",
        "fs-minipass": "^2.0.0",
        "minipass": "^3.0.0",
        "minizlib": "^2.1.1",
        "mkdirp": "^1.0.3",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/tar/node_modules/mkdirp": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-1.0.4.tgz",
      "integrity": "sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==",
      "dev": true,
      "bin": {
        "mkdirp": "bin/cmd.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/temp-file": {
      "version": "3.4.0",
      "resolved": "https://registry.npmjs.org/temp-file/-/temp-file-3.4.0.tgz",
      "integrity": "sha512-C5tjlC/HCtVUOi3KWVokd4vHVViOmGjtLwIh4MuzPo/nMYTV/p1urt3RnMz2IWXDdKEGJH3k5+KPxtqRsUYGtg==",
      "dev": true,
      "dependencies": {
        "async-exit-hook": "^2.0.1",
        "fs-extra": "^10.0.0"
      }
    },
    "node_modules/temp-file/node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/temp-file/node_modules/jsonfile": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
      "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
      "dev": true,
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/temp-file/node_modules/universalify": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
      "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
      "dev": true,
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha1-f17oI66AUgfACvLfSoTsP8+lcLQ=",
      "dev": true
    },
    "node_modules/tinybench": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.3.1.tgz",
      "integrity": "sha512-hGYWYBMPr7p4g5IarQE7XhlyWveh1EKhy4wUBS1LrHXCKYgvz+4/jCqgmJqZxxldesn05vccrtME2RLLZNW7iA==",
      "dev": true
    },
    "node_modules/tinypool": {
      "version": "0.3.1",
      "resolved": "https://registry.npmjs.org/tinypool/-/tinypool-0.3.1.tgz",
      "integrity": "sha512-zLA1ZXlstbU2rlpA4CIeVaqvWq41MTWqLY3FfsAXgC8+f7Pk7zroaJQxDgxn1xNudKW6Kmj4808rPFShUlIRmQ==",
      "dev": true,
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tinyspy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/tinyspy/-/tinyspy-1.0.2.tgz",
      "integrity": "sha512-bSGlgwLBYf7PnUsQ6WOc6SJ3pGOcd+d8AA6EUnLDDM0kWEstC1JIlSZA3UNliDXhd9ABoS7hiRBDCu+XP/sf1Q==",
      "dev": true,
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tmp": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
      "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
      "dev": true,
      "dependencies": {
        "rimraf": "^3.0.0"
      },
      "engines": {
        "node": ">=8.17.0"
      }
    },
    "node_modules/tmp-promise": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/tmp-promise/-/tmp-promise-3.0.3.tgz",
      "integrity": "sha512-RwM7MoPojPxsOBYnyd2hy0bxtIlVrihNs9pj5SUvY8Zz1sQcQG2tG1hSr8PDxfgEB8RNKDhqbIlroIarSNDNsQ==",
      "dev": true,
      "dependencies": {
        "tmp": "^0.2.0"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o=",
      "dev": true
    },
    "node_modules/truncate-utf8-bytes": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
      "integrity": "sha1-QFkjkJWS1W94pYGENLC3hInKXys=",
      "dev": true,
      "dependencies": {
        "utf8-byte-length": "^1.0.1"
      }
    },
    "node_modules/tslib": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.3.1.tgz",
      "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw==",
      "optional": true
    },
    "node_modules/tsutils": {
      "version": "3.21.0",
      "resolved": "https://registry.npmjs.org/tsutils/-/tsutils-3.21.0.tgz",
      "integrity": "sha512-mHKK3iUXL+3UF6xL5k0PEhKRUBKPBCv/+RkEOpjRWxxx27KKRBmmA60A9pgOUvMi8GKhRMPEmjBRPzs2W7O1OA==",
      "dev": true,
      "dependencies": {
        "tslib": "^1.8.1"
      },
      "engines": {
        "node": ">= 6"
      },
      "peerDependencies": {
        "typescript": ">=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta"
      }
    },
    "node_modules/tsutils/node_modules/tslib": {
      "version": "1.14.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
      "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
      "dev": true
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-detect": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/type-detect/-/type-detect-4.0.8.tgz",
      "integrity": "sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==",
      "dev": true,
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/typed-emitter": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/typed-emitter/-/typed-emitter-2.1.0.tgz",
      "integrity": "sha512-g/KzbYKbH5C2vPkaXGu8DJlHrGKHLsM25Zg9WuC9pMGfuvT+X25tZQWo5fK1BjBm8+UrVE9LDCvaY0CQk+fXDA==",
      "optionalDependencies": {
        "rxjs": "*"
      }
    },
    "node_modules/typescript": {
      "version": "4.9.5",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.9.5.tgz",
      "integrity": "sha512-1FXk9E2Hm+QzZQ7z+McJiHL4NW1F2EzMu9Nq9i3zAaGqibafqYwCVU6WyWAuyQRRzOlxou8xZSyXLEN8oKj24g==",
      "dev": true,
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=4.2.0"
      }
    },
    "node_modules/ufo": {
      "version": "0.8.5",
      "resolved": "https://registry.npmjs.org/ufo/-/ufo-0.8.5.tgz",
      "integrity": "sha512-e4+UtA5IRO+ha6hYklwj6r7BjiGMxS0O+UaSg9HbaTefg4kMkzj4tXzEBajRR+wkxf+golgAWKzLbytCUDMJAA==",
      "dev": true
    },
    "node_modules/universalify": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-0.1.2.tgz",
      "integrity": "sha512-rBJeI5CXAlmy1pV+617WB9J63U6XcazHHF2f2dbJix4XzpUF0RS3Zbj0FGIOCAva5P/d/GBOYaACQ1w+0azUkg==",
      "dev": true,
      "engines": {
        "node": ">= 4.0.0"
      }
    },
    "node_modules/unplugin": {
      "version": "0.10.2",
      "resolved": "https://registry.npmjs.org/unplugin/-/unplugin-0.10.2.tgz",
      "integrity": "sha512-6rk7GUa4ICYjae5PrAllvcDeuT8pA9+j5J5EkxbMFaV+SalHhxZ7X2dohMzu6C3XzsMT+6jwR/+pwPNR3uK9MA==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.8.0",
        "chokidar": "^3.5.3",
        "webpack-sources": "^3.2.3",
        "webpack-virtual-modules": "^0.4.5"
      }
    },
    "node_modules/unplugin-auto-expose": {
      "version": "0.0.4",
      "resolved": "https://registry.npmjs.org/unplugin-auto-expose/-/unplugin-auto-expose-0.0.4.tgz",
      "integrity": "sha512-TMkcJll/FODZW3+O/H/caZg+C5TUdMgu20xvB/YKqVpGjpbxaInSlAZrcKh8ifpCY6V+aMKQ4ubiEVJ87Otlog==",
      "dev": true,
      "dependencies": {
        "magic-string": "^0.26.7",
        "mlly": "0.5.16",
        "unplugin": "0.10.2"
      }
    },
    "node_modules/unplugin-auto-expose/node_modules/magic-string": {
      "version": "0.26.7",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.26.7.tgz",
      "integrity": "sha512-hX9XH3ziStPoPhJxLq1syWuZMxbDvGNbVchfrdCtanC7D13888bMFow61x8axrx+GfHLtVeAx2kxL7tTGRl+Ow==",
      "dev": true,
      "dependencies": {
        "sourcemap-codec": "^1.4.8"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/utf8-byte-length": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/utf8-byte-length/-/utf8-byte-length-1.0.4.tgz",
      "integrity": "sha1-9F8VDExm7uloGGUFq5P8u4rWv2E=",
      "dev": true
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha1-RQ1Nyfpw3nMnYvvS1KKJgUGaDM8=",
      "dev": true
    },
    "node_modules/verror": {
      "version": "1.10.1",
      "resolved": "https://registry.npmjs.org/verror/-/verror-1.10.1.tgz",
      "integrity": "sha512-veufcmxri4e3XSrT0xwfUR7kguIkaxBeosDg00yDWhk49wdwkSUrvvsm7nc75e1PUyvIeZj6nS8VQRYz2/S4Xg==",
      "dev": true,
      "optional": true,
      "dependencies": {
        "assert-plus": "^1.0.0",
        "core-util-is": "1.0.2",
        "extsprintf": "^1.2.0"
      },
      "engines": {
        "node": ">=0.6.0"
      }
    },
    "node_modules/verror/node_modules/core-util-is": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.2.tgz",
      "integrity": "sha512-3lqz5YjWTYnW6dlDa5TLaTCcShfar1e40rmcJVwCBJC6mWlFuj0eCHIElmG1g5kyuJ/GD+8Wn4FFCcz4gJPfaQ==",
      "dev": true,
      "optional": true
    },
    "node_modules/vite": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/vite/-/vite-4.1.4.tgz",
      "integrity": "sha512-3knk/HsbSTKEin43zHu7jTwYWv81f8kgAL99G5NWBcA1LKvtvcVAC4JjBH1arBunO9kQka+1oGbrMKOjk4ZrBg==",
      "dev": true,
      "dependencies": {
        "esbuild": "^0.16.14",
        "postcss": "^8.4.21",
        "resolve": "^1.22.1",
        "rollup": "^3.10.0"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      },
      "peerDependencies": {
        "@types/node": ">= 14",
        "less": "*",
        "sass": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.4.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        }
      }
    },
    "node_modules/vite-node": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/vite-node/-/vite-node-0.29.3.tgz",
      "integrity": "sha512-QYzYSA4Yt2IiduEjYbccfZQfxKp+T1Do8/HEpSX/G5WIECTFKJADwLs9c94aQH4o0A+UtCKU61lj1m5KvbxxQA==",
      "dev": true,
      "dependencies": {
        "cac": "^6.7.14",
        "debug": "^4.3.4",
        "mlly": "^1.1.0",
        "pathe": "^1.1.0",
        "picocolors": "^1.0.0",
        "vite": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "vite-node": "vite-node.mjs"
      },
      "engines": {
        "node": ">=v14.16.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      }
    },
    "node_modules/vite-node/node_modules/mlly": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/mlly/-/mlly-1.1.0.tgz",
      "integrity": "sha512-cwzBrBfwGC1gYJyfcy8TcZU1f+dbH/T+TuOhtYP2wLv/Fb51/uV7HJQfBPtEupZ2ORLRU1EKFS/QfS3eo9+kBQ==",
      "dev": true,
      "dependencies": {
        "acorn": "^8.8.1",
        "pathe": "^1.0.0",
        "pkg-types": "^1.0.1",
        "ufo": "^1.0.1"
      }
    },
    "node_modules/vite-node/node_modules/pathe": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
      "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
      "dev": true
    },
    "node_modules/vite-node/node_modules/pkg-types": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pkg-types/-/pkg-types-1.0.1.tgz",
      "integrity": "sha512-jHv9HB+Ho7dj6ItwppRDDl0iZRYBD0jsakHXtFgoLr+cHSF6xC+QL54sJmWxyGxOLYSHm0afhXhXcQDQqH9z8g==",
      "dev": true,
      "dependencies": {
        "jsonc-parser": "^3.2.0",
        "mlly": "^1.0.0",
        "pathe": "^1.0.0"
      }
    },
    "node_modules/vite-node/node_modules/ufo": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/ufo/-/ufo-1.0.1.tgz",
      "integrity": "sha512-boAm74ubXHY7KJQZLlXrtMz52qFvpsbOxDcZOnw/Wf+LS4Mmyu7JxmzD4tDLtUQtmZECypJ0FrCz4QIe6dvKRA==",
      "dev": true
    },
    "node_modules/vitest": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/vitest/-/vitest-0.29.3.tgz",
      "integrity": "sha512-muMsbXnZsrzDGiyqf/09BKQsGeUxxlyLeLK/sFFM4EXdURPQRv8y7dco32DXaRORYP0bvyN19C835dT23mL0ow==",
      "dev": true,
      "dependencies": {
        "@types/chai": "^4.3.4",
        "@types/chai-subset": "^1.3.3",
        "@types/node": "*",
        "@vitest/expect": "0.29.3",
        "@vitest/runner": "0.29.3",
        "@vitest/spy": "0.29.3",
        "@vitest/utils": "0.29.3",
        "acorn": "^8.8.1",
        "acorn-walk": "^8.2.0",
        "cac": "^6.7.14",
        "chai": "^4.3.7",
        "debug": "^4.3.4",
        "local-pkg": "^0.4.2",
        "pathe": "^1.1.0",
        "picocolors": "^1.0.0",
        "source-map": "^0.6.1",
        "std-env": "^3.3.1",
        "strip-literal": "^1.0.0",
        "tinybench": "^2.3.1",
        "tinypool": "^0.3.1",
        "tinyspy": "^1.0.2",
        "vite": "^3.0.0 || ^4.0.0",
        "vite-node": "0.29.3",
        "why-is-node-running": "^2.2.2"
      },
      "bin": {
        "vitest": "vitest.mjs"
      },
      "engines": {
        "node": ">=v14.16.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      },
      "peerDependencies": {
        "@edge-runtime/vm": "*",
        "@vitest/browser": "*",
        "@vitest/ui": "*",
        "happy-dom": "*",
        "jsdom": "*"
      },
      "peerDependenciesMeta": {
        "@edge-runtime/vm": {
          "optional": true
        },
        "@vitest/browser": {
          "optional": true
        },
        "@vitest/ui": {
          "optional": true
        },
        "happy-dom": {
          "optional": true
        },
        "jsdom": {
          "optional": true
        }
      }
    },
    "node_modules/vitest/node_modules/pathe": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
      "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
      "dev": true
    },
    "node_modules/vue": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/vue/-/vue-3.2.47.tgz",
      "integrity": "sha512-60188y/9Dc9WVrAZeUVSDxRQOZ+z+y5nO2ts9jWXSTkMvayiWxCWOWtBQoYjLeccfXkiiPZWAHcV+WTPhkqJHQ==",
      "dev": true,
      "dependencies": {
        "@vue/compiler-dom": "3.2.47",
        "@vue/compiler-sfc": "3.2.47",
        "@vue/runtime-dom": "3.2.47",
        "@vue/server-renderer": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "node_modules/vue-eslint-parser": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/vue-eslint-parser/-/vue-eslint-parser-9.0.2.tgz",
      "integrity": "sha512-uCPQwTGjOtAYrwnU+76pYxalhjsh7iFBsHwBqDHiOPTxtICDaraO4Szw54WFTNZTAEsgHHzqFOu1mmnBOBRzDA==",
      "dev": true,
      "dependencies": {
        "debug": "^4.3.4",
        "eslint-scope": "^7.1.1",
        "eslint-visitor-keys": "^3.3.0",
        "espree": "^9.3.1",
        "esquery": "^1.4.0",
        "lodash": "^4.17.21",
        "semver": "^7.3.6"
      },
      "engines": {
        "node": "^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/mysticatea"
      },
      "peerDependencies": {
        "eslint": ">=6.0.0"
      }
    },
    "node_modules/vue-eslint-parser/node_modules/eslint-scope": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.1.1.tgz",
      "integrity": "sha512-QKQM/UXpIiHcLqJ5AOyIW7XZmzjkzQXYE54n1++wb0u9V/abW3l9uQnxX8Z5Xd18xyKIMTUAyQ0k1e8pz6LUrw==",
      "dev": true,
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/vue-eslint-parser/node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/vue-template-compiler": {
      "version": "2.7.14",
      "resolved": "https://registry.npmjs.org/vue-template-compiler/-/vue-template-compiler-2.7.14.tgz",
      "integrity": "sha512-zyA5Y3ArvVG0NacJDkkzJuPQDF8RFeRlzV2vLeSnhSpieO6LK2OVbdLPi5MPPs09Ii+gMO8nY4S3iKQxBxDmWQ==",
      "dev": true,
      "dependencies": {
        "de-indent": "^1.0.2",
        "he": "^1.2.0"
      }
    },
    "node_modules/vue-tsc": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/vue-tsc/-/vue-tsc-1.2.0.tgz",
      "integrity": "sha512-rIlzqdrhyPYyLG9zxsVRa+JEseeS9s8F2BbVVVWRRsTZvJO2BbhLEb2HW3MY+DFma0378tnIqs+vfTzbcQtRFw==",
      "dev": true,
      "dependencies": {
        "@volar/vue-language-core": "1.2.0",
        "@volar/vue-typescript": "1.2.0"
      },
      "bin": {
        "vue-tsc": "bin/vue-tsc.js"
      },
      "peerDependencies": {
        "typescript": "*"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "dev": true,
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/webpack-sources": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/webpack-sources/-/webpack-sources-3.2.3.tgz",
      "integrity": "sha512-/DyMEOrDgLKKIG0fmvtz+4dUX/3Ghozwgm6iPp8KRhvn+eQf9+Q7GWxVNMk3+uCPWfdXYC4ExGBckIXdFEfH1w==",
      "dev": true,
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/webpack-virtual-modules": {
      "version": "0.4.6",
      "resolved": "https://registry.npmjs.org/webpack-virtual-modules/-/webpack-virtual-modules-0.4.6.tgz",
      "integrity": "sha512-5tyDlKLqPfMqjT3Q9TAqf2YqjwmnUleZwzJi1A5qXnlBCdj2AtOJ6wAWdglTIDOPgOiOrXeBeFcsQ8+aGQ6QbA==",
      "dev": true
    },
    "node_modules/whatwg-encoding": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-2.0.0.tgz",
      "integrity": "sha512-p41ogyeMUrw3jWclHWTQg1k05DSVXPLcVxRTYsXUk+ZooOCZLcoYgPZ/HL/D/N+uQPOtcp1me1WhBEaX02mhWg==",
      "dev": true,
      "dependencies": {
        "iconv-lite": "0.6.3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-mimetype": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-3.0.0.tgz",
      "integrity": "sha512-nt+N2dzIutVRxARx1nghPKGv1xHikU7HKdfafKkLNLindmPU/ch3U31NOCGGA/dmPcmb1VlofO0vnKAcsm0o/Q==",
      "dev": true,
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha1-lmRU6HZUYuN2RNNib2dCzotwll0=",
      "dev": true,
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/whatwg-url/node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha1-JFNCdeKnvGvnvIZhHMFq4KVlSHE=",
      "dev": true
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/why-is-node-running": {
      "version": "2.2.2",
      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.2.2.tgz",
      "integrity": "sha512-6tSwToZxTOcotxHeA+qGCq1mVzKR3CwcJGmVcY+QE8SHy6TnpFnh8PAvPNHYr7EcuVeG0QSMxtYCuO1ta/G/oA==",
      "dev": true,
      "dependencies": {
        "siginfo": "^2.0.0",
        "stackback": "0.0.2"
      },
      "bin": {
        "why-is-node-running": "cli.js"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.3.tgz",
      "integrity": "sha512-Hz/mrNwitNRh/HUAtM/VT/5VH+ygD6DV7mYKZAtHOrbs8U7lvPS6xf7EJKMF0uW1KJCl0H701g3ZGus+muE5vQ==",
      "dev": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha1-tSQ9jz7BqjXxNkYFvA0QNuMKtp8=",
      "dev": true
    },
    "node_modules/xml-name-validator": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-4.0.0.tgz",
      "integrity": "sha512-ICP2e+jsHvAj2E2lIHxa5tjXRlKDJo4IdvPvCXbXQGdzSfmSpNVyIKMvoZHjDY9DP0zV17iI85o90vRFXNccRw==",
      "dev": true,
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/xmlbuilder": {
      "version": "15.1.1",
      "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-15.1.1.tgz",
      "integrity": "sha512-yMqGBqtXyeN1e3TGYvgNgDVZ3j84W4cwkOXQswghol6APgZWaff9lnbvN7MHYJOiXsvGPXtjTYJEiC9J2wv9Eg==",
      "dev": true,
      "optional": true,
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true,
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A=="
    },
    "node_modules/yargs": {
      "version": "17.6.0",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.6.0.tgz",
      "integrity": "sha512-8H/wTDqlSwoSnScvV2N/JHfLWOKuh5MVla9hqLjK3nsfyy6Y4kDSYSvkU5YCUEPOSnRXfIyx3Sq+B/IWudTo4g==",
      "dev": true,
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.0.0",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.0.0.tgz",
      "integrity": "sha512-z9kApYUOCwoeZ78rfRYYWdiU/iNL6mwwYlkkZfJoyMR1xps+NEBX5X7XmRpxkZHhXJ6+Ey00IwKxBBSW9FIjyA==",
      "dev": true,
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yauzl": {
      "version": "2.10.0",
      "resolved": "https://registry.npmjs.org/yauzl/-/yauzl-2.10.0.tgz",
      "integrity": "sha512-p4a9I6X6nu6IhoGmBqAcbJy1mlC4j27vEPZX9F4L4/vZT3Lyq1VkFHw/V/PUcB9Buo+DG3iHkT0x3Qya58zc3g==",
      "dev": true,
      "dependencies": {
        "buffer-crc32": "~0.2.3",
        "fd-slicer": "~1.1.0"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  },
  "dependencies": {
    "@babel/parser": {
      "version": "7.18.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.18.4.tgz",
      "integrity": "sha512-FDge0dFazETFcxGw/EXzOkN8uJp0PC7Qbm+Pe9T+av2zlBpOgunFHkQPPn+eRuClU73JF+98D531UgayY89tow==",
      "dev": true
    },
    "@develar/schema-utils": {
      "version": "2.6.5",
      "resolved": "https://registry.npmjs.org/@develar/schema-utils/-/schema-utils-2.6.5.tgz",
      "integrity": "sha512-0cp4PsWQ/9avqTVMCtZ+GirikIA36ikvjtHweU4/j8yLtgObI0+JUPhYFScgwlteveGB1rt3Cm8UhN04XayDig==",
      "dev": true,
      "requires": {
        "ajv": "^6.12.0",
        "ajv-keywords": "^3.4.1"
      }
    },
    "@electron/get": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/@electron/get/-/get-2.0.2.tgz",
      "integrity": "sha512-eFZVFoRXb3GFGd7Ak7W4+6jBl9wBtiZ4AaYOse97ej6mKj5tkyO0dUnUChs1IhJZtx1BENo4/p4WUTXpi6vT+g==",
      "dev": true,
      "requires": {
        "debug": "^4.1.1",
        "env-paths": "^2.2.0",
        "fs-extra": "^8.1.0",
        "global-agent": "^3.0.0",
        "got": "^11.8.5",
        "progress": "^2.0.3",
        "semver": "^6.2.0",
        "sumchecker": "^3.0.1"
      },
      "dependencies": {
        "semver": {
          "version": "6.3.0",
          "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.0.tgz",
          "integrity": "sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==",
          "dev": true
        }
      }
    },
    "@electron/universal": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@electron/universal/-/universal-1.2.1.tgz",
      "integrity": "sha512-7323HyMh7KBAl/nPDppdLsC87G6RwRU02dy5FPeGB1eS7rUePh55+WNWiDPLhFQqqVPHzh77M69uhmoT8XnwMQ==",
      "dev": true,
      "requires": {
        "@malept/cross-spawn-promise": "^1.1.0",
        "asar": "^3.1.0",
        "debug": "^4.3.1",
        "dir-compare": "^2.4.0",
        "fs-extra": "^9.0.1",
        "minimatch": "^3.0.4",
        "plist": "^3.0.4"
      },
      "dependencies": {
        "fs-extra": {
          "version": "9.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-9.1.0.tgz",
          "integrity": "sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==",
          "dev": true,
          "requires": {
            "at-least-node": "^1.0.0",
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "@esbuild/android-arm": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.16.17.tgz",
      "integrity": "sha512-N9x1CMXVhtWEAMS7pNNONyA14f71VPQN9Cnavj1XQh6T7bskqiLLrSca4O0Vr8Wdcga943eThxnVp3JLnBMYtw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/android-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.16.17.tgz",
      "integrity": "sha512-MIGl6p5sc3RDTLLkYL1MyL8BMRN4tLMRCn+yRJJmEDvYZ2M7tmAf80hx1kbNEUX2KJ50RRtxZ4JHLvCfuB6kBg==",
      "dev": true,
      "optional": true
    },
    "@esbuild/android-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.16.17.tgz",
      "integrity": "sha512-a3kTv3m0Ghh4z1DaFEuEDfz3OLONKuFvI4Xqczqx4BqLyuFaFkuaG4j2MtA6fuWEFeC5x9IvqnX7drmRq/fyAQ==",
      "dev": true,
      "optional": true
    },
    "@esbuild/darwin-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.16.17.tgz",
      "integrity": "sha512-/2agbUEfmxWHi9ARTX6OQ/KgXnOWfsNlTeLcoV7HSuSTv63E4DqtAc+2XqGw1KHxKMHGZgbVCZge7HXWX9Vn+w==",
      "dev": true,
      "optional": true
    },
    "@esbuild/darwin-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.16.17.tgz",
      "integrity": "sha512-2By45OBHulkd9Svy5IOCZt376Aa2oOkiE9QWUK9fe6Tb+WDr8hXL3dpqi+DeLiMed8tVXspzsTAvd0jUl96wmg==",
      "dev": true,
      "optional": true
    },
    "@esbuild/freebsd-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.16.17.tgz",
      "integrity": "sha512-mt+cxZe1tVx489VTb4mBAOo2aKSnJ33L9fr25JXpqQqzbUIw/yzIzi+NHwAXK2qYV1lEFp4OoVeThGjUbmWmdw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/freebsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.16.17.tgz",
      "integrity": "sha512-8ScTdNJl5idAKjH8zGAsN7RuWcyHG3BAvMNpKOBaqqR7EbUhhVHOqXRdL7oZvz8WNHL2pr5+eIT5c65kA6NHug==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-arm": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.16.17.tgz",
      "integrity": "sha512-iihzrWbD4gIT7j3caMzKb/RsFFHCwqqbrbH9SqUSRrdXkXaygSZCZg1FybsZz57Ju7N/SHEgPyaR0LZ8Zbe9gQ==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.16.17.tgz",
      "integrity": "sha512-7S8gJnSlqKGVJunnMCrXHU9Q8Q/tQIxk/xL8BqAP64wchPCTzuM6W3Ra8cIa1HIflAvDnNOt2jaL17vaW+1V0g==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-ia32": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.16.17.tgz",
      "integrity": "sha512-kiX69+wcPAdgl3Lonh1VI7MBr16nktEvOfViszBSxygRQqSpzv7BffMKRPMFwzeJGPxcio0pdD3kYQGpqQ2SSg==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-loong64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.16.17.tgz",
      "integrity": "sha512-dTzNnQwembNDhd654cA4QhbS9uDdXC3TKqMJjgOWsC0yNCbpzfWoXdZvp0mY7HU6nzk5E0zpRGGx3qoQg8T2DQ==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-mips64el": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.16.17.tgz",
      "integrity": "sha512-ezbDkp2nDl0PfIUn0CsQ30kxfcLTlcx4Foz2kYv8qdC6ia2oX5Q3E/8m6lq84Dj/6b0FrkgD582fJMIfHhJfSw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-ppc64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.16.17.tgz",
      "integrity": "sha512-dzS678gYD1lJsW73zrFhDApLVdM3cUF2MvAa1D8K8KtcSKdLBPP4zZSLy6LFZ0jYqQdQ29bjAHJDgz0rVbLB3g==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-riscv64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.16.17.tgz",
      "integrity": "sha512-ylNlVsxuFjZK8DQtNUwiMskh6nT0vI7kYl/4fZgV1llP5d6+HIeL/vmmm3jpuoo8+NuXjQVZxmKuhDApK0/cKw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-s390x": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.16.17.tgz",
      "integrity": "sha512-gzy7nUTO4UA4oZ2wAMXPNBGTzZFP7mss3aKR2hH+/4UUkCOyqmjXiKpzGrY2TlEUhbbejzXVKKGazYcQTZWA/w==",
      "dev": true,
      "optional": true
    },
    "@esbuild/linux-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.16.17.tgz",
      "integrity": "sha512-mdPjPxfnmoqhgpiEArqi4egmBAMYvaObgn4poorpUaqmvzzbvqbowRllQ+ZgzGVMGKaPkqUmPDOOFQRUFDmeUw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/netbsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.16.17.tgz",
      "integrity": "sha512-/PzmzD/zyAeTUsduZa32bn0ORug+Jd1EGGAUJvqfeixoEISYpGnAezN6lnJoskauoai0Jrs+XSyvDhppCPoKOA==",
      "dev": true,
      "optional": true
    },
    "@esbuild/openbsd-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.16.17.tgz",
      "integrity": "sha512-2yaWJhvxGEz2RiftSk0UObqJa/b+rIAjnODJgv2GbGGpRwAfpgzyrg1WLK8rqA24mfZa9GvpjLcBBg8JHkoodg==",
      "dev": true,
      "optional": true
    },
    "@esbuild/sunos-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.16.17.tgz",
      "integrity": "sha512-xtVUiev38tN0R3g8VhRfN7Zl42YCJvyBhRKw1RJjwE1d2emWTVToPLNEQj/5Qxc6lVFATDiy6LjVHYhIPrLxzw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/win32-arm64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.16.17.tgz",
      "integrity": "sha512-ga8+JqBDHY4b6fQAmOgtJJue36scANy4l/rL97W+0wYmijhxKetzZdKOJI7olaBaMhWt8Pac2McJdZLxXWUEQw==",
      "dev": true,
      "optional": true
    },
    "@esbuild/win32-ia32": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.16.17.tgz",
      "integrity": "sha512-WnsKaf46uSSF/sZhwnqE4L/F89AYNMiD4YtEcYekBt9Q7nj0DiId2XH2Ng2PHM54qi5oPrQ8luuzGszqi/veig==",
      "dev": true,
      "optional": true
    },
    "@esbuild/win32-x64": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.16.17.tgz",
      "integrity": "sha512-y+EHuSchhL7FjHgvQL/0fnnFmO4T1bhvWANX6gcnqTjtnKWbTvUMCpGnv2+t+31d7RzyEAYAd4u2fnIhHL6N/Q==",
      "dev": true,
      "optional": true
    },
    "@eslint-community/eslint-utils": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.2.0.tgz",
      "integrity": "sha512-gB8T4H4DEfX2IV9zGDJPOBgP1e/DbfCPDTtEqUMckpvzS1OYtva8JdFYBqMwYk7xAQ429WGF/UPqn8uQ//h2vQ==",
      "dev": true,
      "requires": {
        "eslint-visitor-keys": "^3.3.0"
      }
    },
    "@eslint-community/regexpp": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.4.0.tgz",
      "integrity": "sha512-A9983Q0LnDGdLPjxyXQ00sbV+K+O+ko2Dr+CZigbHWtX9pNfxlaBkMR8X1CztI73zuEyEBXTVjx7CE+/VSwDiQ==",
      "dev": true
    },
    "@eslint/eslintrc": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.0.1.tgz",
      "integrity": "sha512-eFRmABvW2E5Ho6f5fHLqgena46rOj7r7OKHYfLElqcBfGFHHpjBhivyi5+jOEQuSpdc/1phIZJlbC2te+tZNIw==",
      "dev": true,
      "requires": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.5.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      }
    },
    "@eslint/js": {
      "version": "8.36.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.36.0.tgz",
      "integrity": "sha512-lxJ9R5ygVm8ZWgYdUweoq5ownDlJ4upvoWmO4eLxBYHdMo+vZ/Rx0EN6MbKWDJOSUGrqJy2Gt+Dyv/VKml0fjg==",
      "dev": true
    },
    "@humanwhocodes/config-array": {
      "version": "0.11.8",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.11.8.tgz",
      "integrity": "sha512-UybHIJzJnR5Qc/MsD9Kr+RpO2h+/P1GhOwdiLPXK5TWk5sgTdu88bTD9UP+CKbPPh5Rni1u0GjAdYQLemG8g+g==",
      "dev": true,
      "requires": {
        "@humanwhocodes/object-schema": "^1.2.1",
        "debug": "^4.1.1",
        "minimatch": "^3.0.5"
      }
    },
    "@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true
    },
    "@humanwhocodes/object-schema": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-1.2.1.tgz",
      "integrity": "sha512-ZnQMnLV4e7hDlUvw8H+U8ASL02SS2Gn6+9Ac3wGGLIe7+je2AeAOxPY+izIPJDfFDb7eDjev0Us8MO1iFRN8hA==",
      "dev": true
    },
    "@malept/cross-spawn-promise": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@malept/cross-spawn-promise/-/cross-spawn-promise-1.1.1.tgz",
      "integrity": "sha512-RTBGWL5FWQcg9orDOCcp4LvItNzUPcyEU9bwaeJX0rJ1IQxzucC48Y0/sQLp/g6t99IQgAlGIaesJS+gTn7tVQ==",
      "dev": true,
      "requires": {
        "cross-spawn": "^7.0.1"
      }
    },
    "@malept/flatpak-bundler": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@malept/flatpak-bundler/-/flatpak-bundler-0.4.0.tgz",
      "integrity": "sha512-9QOtNffcOF/c1seMCDnjckb3R9WHcG34tky+FHpNKKCW0wc/scYLwMtO+ptyGUfMW0/b/n4qRiALlaFHc9Oj7Q==",
      "dev": true,
      "requires": {
        "debug": "^4.1.1",
        "fs-extra": "^9.0.0",
        "lodash": "^4.17.15",
        "tmp-promise": "^3.0.2"
      },
      "dependencies": {
        "fs-extra": {
          "version": "9.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-9.1.0.tgz",
          "integrity": "sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==",
          "dev": true,
          "requires": {
            "at-least-node": "^1.0.0",
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "requires": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      }
    },
    "@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true
    },
    "@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "requires": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      }
    },
    "@sindresorhus/is": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
      "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
      "dev": true
    },
    "@szmarczak/http-timer": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/@szmarczak/http-timer/-/http-timer-4.0.6.tgz",
      "integrity": "sha512-4BAffykYOgO+5nzBWYwE3W90sBgLJoUPRWWcL8wlyiM8IB8ipJz3UMJ9KXQd1RKQXpKp8Tutn80HZtWsu2u76w==",
      "dev": true,
      "requires": {
        "defer-to-connect": "^2.0.0"
      }
    },
    "@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "dev": true
    },
    "@types/cacheable-request": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/@types/cacheable-request/-/cacheable-request-6.0.3.tgz",
      "integrity": "sha512-IQ3EbTzGxIigb1I3qPZc1rWJnH0BmSKv5QYTalEwweFvyBDLSAe24zP0le/hyi7ecGfZVlIVAg4BZqb8WBwKqw==",
      "dev": true,
      "requires": {
        "@types/http-cache-semantics": "*",
        "@types/keyv": "^3.1.4",
        "@types/node": "*",
        "@types/responselike": "^1.0.0"
      }
    },
    "@types/chai": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/@types/chai/-/chai-4.3.4.tgz",
      "integrity": "sha512-KnRanxnpfpjUTqTCXslZSEdLfXExwgNxYPdiO2WGUj8+HDjFi8R3k5RVKPeSCzLjCcshCAtVO2QBbVuAV4kTnw==",
      "dev": true
    },
    "@types/chai-subset": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/@types/chai-subset/-/chai-subset-1.3.3.tgz",
      "integrity": "sha512-frBecisrNGz+F4T6bcc+NLeolfiojh5FxW2klu669+8BARtyQv2C/GkNW6FUodVe4BroGMP/wER/YDGc7rEllw==",
      "dev": true,
      "requires": {
        "@types/chai": "*"
      }
    },
    "@types/debug": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.7.tgz",
      "integrity": "sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==",
      "dev": true,
      "requires": {
        "@types/ms": "*"
      }
    },
    "@types/fs-extra": {
      "version": "9.0.13",
      "resolved": "https://registry.npmjs.org/@types/fs-extra/-/fs-extra-9.0.13.tgz",
      "integrity": "sha512-nEnwB++1u5lVDM2UI4c1+5R+FYaKfaAzS4OococimjVm3nQw3TuzH5UNsocrcTBbhnerblyHj4A49qXbIiZdpA==",
      "dev": true,
      "requires": {
        "@types/node": "*"
      }
    },
    "@types/glob": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@types/glob/-/glob-7.2.0.tgz",
      "integrity": "sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==",
      "dev": true,
      "optional": true,
      "requires": {
        "@types/minimatch": "*",
        "@types/node": "*"
      }
    },
    "@types/http-cache-semantics": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/@types/http-cache-semantics/-/http-cache-semantics-4.0.1.tgz",
      "integrity": "sha512-SZs7ekbP8CN0txVG2xVRH6EgKmEm31BOxA07vkFaETzZz1xh+cbt8BcI0slpymvwhx5dlFnQG2rTlPVQn+iRPQ==",
      "dev": true
    },
    "@types/json-schema": {
      "version": "7.0.11",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.11.tgz",
      "integrity": "sha512-wOuvG1SN4Us4rez+tylwwwCV1psiNVOkJeM3AUWUNWg/jDQY2+HE/444y5gc+jBmRqASOm2Oeh5c1axHobwRKQ==",
      "dev": true
    },
    "@types/keyv": {
      "version": "3.1.4",
      "resolved": "https://registry.npmjs.org/@types/keyv/-/keyv-3.1.4.tgz",
      "integrity": "sha512-BQ5aZNSCpj7D6K2ksrRCTmKRLEpnPvWDiLPfoGyhZ++8YtiK9d/3DBKPJgry359X/P1PfruyYwvnvwFjuEiEIg==",
      "dev": true,
      "requires": {
        "@types/node": "*"
      }
    },
    "@types/minimatch": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/@types/minimatch/-/minimatch-3.0.5.tgz",
      "integrity": "sha512-Klz949h02Gz2uZCMGwDUSDS1YBlTdDDgbWHi+81l29tQALUtvz4rAYi5uoVhE5Lagoq6DeqAUlbrHvW/mXDgdQ==",
      "dev": true,
      "optional": true
    },
    "@types/ms": {
      "version": "0.7.31",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-0.7.31.tgz",
      "integrity": "sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==",
      "dev": true
    },
    "@types/node": {
      "version": "18.15.3",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-18.15.3.tgz",
      "integrity": "sha512-p6ua9zBxz5otCmbpb5D3U4B5Nanw6Pk3PPyX05xnxbB/fRv71N7CPmORg7uAD5P70T0xmx1pzAx/FUfa5X+3cw==",
      "dev": true
    },
    "@types/plist": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/@types/plist/-/plist-3.0.2.tgz",
      "integrity": "sha512-ULqvZNGMv0zRFvqn8/4LSPtnmN4MfhlPNtJCTpKuIIxGVGZ2rYWzFXrvEBoh9CVyqSE7D6YFRJ1hydLHI6kbWw==",
      "dev": true,
      "optional": true,
      "requires": {
        "@types/node": "*",
        "xmlbuilder": ">=11.0.1"
      }
    },
    "@types/responselike": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@types/responselike/-/responselike-1.0.0.tgz",
      "integrity": "sha512-85Y2BjiufFzaMIlvJDvTTB8Fxl2xfLo4HgmHzVBz08w4wDePCTjYw66PdrolO0kzli3yam/YCgRufyo1DdQVTA==",
      "dev": true,
      "requires": {
        "@types/node": "*"
      }
    },
    "@types/semver": {
      "version": "7.3.12",
      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.3.12.tgz",
      "integrity": "sha512-WwA1MW0++RfXmCr12xeYOOC5baSC9mSb0ZqCquFzKhcoF4TvHu5MKOuXsncgZcpVFhB1pXd5hZmM0ryAoCp12A=="
    },
    "@types/verror": {
      "version": "1.10.5",
      "resolved": "https://registry.npmjs.org/@types/verror/-/verror-1.10.5.tgz",
      "integrity": "sha512-9UjMCHK5GPgQRoNbqdLIAvAy0EInuiqbW0PBMtVP6B5B2HQJlvoJHM+KodPZMEjOa5VkSc+5LH7xy+cUzQdmHw==",
      "dev": true,
      "optional": true
    },
    "@types/yargs": {
      "version": "17.0.8",
      "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.8.tgz",
      "integrity": "sha512-wDeUwiUmem9FzsyysEwRukaEdDNcwbROvQ9QGRKaLI6t+IltNzbn4/i4asmB10auvZGQCzSQ6t0GSczEThlUXw==",
      "dev": true,
      "requires": {
        "@types/yargs-parser": "*"
      }
    },
    "@types/yargs-parser": {
      "version": "20.2.1",
      "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-20.2.1.tgz",
      "integrity": "sha512-7tFImggNeNBVMsn0vLrpn1H1uPrUBdnARPTpZoitY37ZrdJREzf7I16tMrlK3hen349gr1NYh8CmZQa7CTG6Aw==",
      "dev": true
    },
    "@types/yauzl": {
      "version": "2.10.0",
      "resolved": "https://registry.npmjs.org/@types/yauzl/-/yauzl-2.10.0.tgz",
      "integrity": "sha512-Cn6WYCm0tXv8p6k+A8PvbDG763EDpBoTzHdA+Q/MF6H3sapGjCm9NzoaJncJS9tUKSuCoDs9XHxYYsQDgxR6kw==",
      "dev": true,
      "optional": true,
      "requires": {
        "@types/node": "*"
      }
    },
    "@typescript-eslint/eslint-plugin": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-5.55.0.tgz",
      "integrity": "sha512-IZGc50rtbjk+xp5YQoJvmMPmJEYoC53SiKPXyqWfv15XoD2Y5Kju6zN0DwlmaGJp1Iw33JsWJcQ7nw0lGCGjVg==",
      "dev": true,
      "requires": {
        "@eslint-community/regexpp": "^4.4.0",
        "@typescript-eslint/scope-manager": "5.55.0",
        "@typescript-eslint/type-utils": "5.55.0",
        "@typescript-eslint/utils": "5.55.0",
        "debug": "^4.3.4",
        "grapheme-splitter": "^1.0.4",
        "ignore": "^5.2.0",
        "natural-compare-lite": "^1.4.0",
        "semver": "^7.3.7",
        "tsutils": "^3.21.0"
      },
      "dependencies": {
        "@typescript-eslint/scope-manager": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.55.0.tgz",
          "integrity": "sha512-OK+cIO1ZGhJYNCL//a3ROpsd83psf4dUJ4j7pdNVzd5DmIk+ffkuUIX2vcZQbEW/IR41DYsfJTB19tpCboxQuw==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "@typescript-eslint/visitor-keys": "5.55.0"
          }
        },
        "@typescript-eslint/types": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
          "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
          "dev": true
        },
        "@typescript-eslint/visitor-keys": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
          "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "eslint-visitor-keys": "^3.3.0"
          }
        }
      }
    },
    "@typescript-eslint/parser": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-5.8.1.tgz",
      "integrity": "sha512-K1giKHAjHuyB421SoXMXFHHVI4NdNY603uKw92++D3qyxSeYvC10CBJ/GE5Thpo4WTUvu1mmJI2/FFkz38F2Gw==",
      "dev": true,
      "peer": true,
      "requires": {
        "@typescript-eslint/scope-manager": "5.8.1",
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/typescript-estree": "5.8.1",
        "debug": "^4.3.2"
      }
    },
    "@typescript-eslint/scope-manager": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.8.1.tgz",
      "integrity": "sha512-DGxJkNyYruFH3NIZc3PwrzwOQAg7vvgsHsHCILOLvUpupgkwDZdNq/cXU3BjF4LNrCsVg0qxEyWasys5AiJ85Q==",
      "dev": true,
      "peer": true,
      "requires": {
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/visitor-keys": "5.8.1"
      }
    },
    "@typescript-eslint/type-utils": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-5.55.0.tgz",
      "integrity": "sha512-ObqxBgHIXj8rBNm0yh8oORFrICcJuZPZTqtAFh0oZQyr5DnAHZWfyw54RwpEEH+fD8suZaI0YxvWu5tYE/WswA==",
      "dev": true,
      "requires": {
        "@typescript-eslint/typescript-estree": "5.55.0",
        "@typescript-eslint/utils": "5.55.0",
        "debug": "^4.3.4",
        "tsutils": "^3.21.0"
      },
      "dependencies": {
        "@typescript-eslint/types": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
          "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
          "dev": true
        },
        "@typescript-eslint/typescript-estree": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.55.0.tgz",
          "integrity": "sha512-I7X4A9ovA8gdpWMpr7b1BN9eEbvlEtWhQvpxp/yogt48fy9Lj3iE3ild/1H3jKBBIYj5YYJmS2+9ystVhC7eaQ==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "@typescript-eslint/visitor-keys": "5.55.0",
            "debug": "^4.3.4",
            "globby": "^11.1.0",
            "is-glob": "^4.0.3",
            "semver": "^7.3.7",
            "tsutils": "^3.21.0"
          }
        },
        "@typescript-eslint/visitor-keys": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
          "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "eslint-visitor-keys": "^3.3.0"
          }
        }
      }
    },
    "@typescript-eslint/types": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.8.1.tgz",
      "integrity": "sha512-L/FlWCCgnjKOLefdok90/pqInkomLnAcF9UAzNr+DSqMC3IffzumHTQTrINXhP1gVp9zlHiYYjvozVZDPleLcA==",
      "dev": true,
      "peer": true
    },
    "@typescript-eslint/typescript-estree": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.8.1.tgz",
      "integrity": "sha512-26lQ8l8tTbG7ri7xEcCFT9ijU5Fk+sx/KRRyyzCv7MQ+rZZlqiDPtMKWLC8P7o+dtCnby4c+OlxuX1tp8WfafQ==",
      "dev": true,
      "peer": true,
      "requires": {
        "@typescript-eslint/types": "5.8.1",
        "@typescript-eslint/visitor-keys": "5.8.1",
        "debug": "^4.3.2",
        "globby": "^11.0.4",
        "is-glob": "^4.0.3",
        "semver": "^7.3.5",
        "tsutils": "^3.21.0"
      }
    },
    "@typescript-eslint/utils": {
      "version": "5.55.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-5.55.0.tgz",
      "integrity": "sha512-FkW+i2pQKcpDC3AY6DU54yl8Lfl14FVGYDgBTyGKB75cCwV3KpkpTMFi9d9j2WAJ4271LR2HeC5SEWF/CZmmfw==",
      "dev": true,
      "requires": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@types/json-schema": "^7.0.9",
        "@types/semver": "^7.3.12",
        "@typescript-eslint/scope-manager": "5.55.0",
        "@typescript-eslint/types": "5.55.0",
        "@typescript-eslint/typescript-estree": "5.55.0",
        "eslint-scope": "^5.1.1",
        "semver": "^7.3.7"
      },
      "dependencies": {
        "@typescript-eslint/scope-manager": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-5.55.0.tgz",
          "integrity": "sha512-OK+cIO1ZGhJYNCL//a3ROpsd83psf4dUJ4j7pdNVzd5DmIk+ffkuUIX2vcZQbEW/IR41DYsfJTB19tpCboxQuw==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "@typescript-eslint/visitor-keys": "5.55.0"
          }
        },
        "@typescript-eslint/types": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-5.55.0.tgz",
          "integrity": "sha512-M4iRh4AG1ChrOL6Y+mETEKGeDnT7Sparn6fhZ5LtVJF1909D5O4uqK+C5NPbLmpfZ0XIIxCdwzKiijpZUOvOug==",
          "dev": true
        },
        "@typescript-eslint/typescript-estree": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-5.55.0.tgz",
          "integrity": "sha512-I7X4A9ovA8gdpWMpr7b1BN9eEbvlEtWhQvpxp/yogt48fy9Lj3iE3ild/1H3jKBBIYj5YYJmS2+9ystVhC7eaQ==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "@typescript-eslint/visitor-keys": "5.55.0",
            "debug": "^4.3.4",
            "globby": "^11.1.0",
            "is-glob": "^4.0.3",
            "semver": "^7.3.7",
            "tsutils": "^3.21.0"
          }
        },
        "@typescript-eslint/visitor-keys": {
          "version": "5.55.0",
          "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.55.0.tgz",
          "integrity": "sha512-q2dlHHwWgirKh1D3acnuApXG+VNXpEY5/AwRxDVuEQpxWaB0jCDe0jFMVMALJ3ebSfuOVE8/rMS+9ZOYGg1GWw==",
          "dev": true,
          "requires": {
            "@typescript-eslint/types": "5.55.0",
            "eslint-visitor-keys": "^3.3.0"
          }
        }
      }
    },
    "@typescript-eslint/visitor-keys": {
      "version": "5.8.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-5.8.1.tgz",
      "integrity": "sha512-SWgiWIwocK6NralrJarPZlWdr0hZnj5GXHIgfdm8hNkyKvpeQuFyLP6YjSIe9kf3YBIfU6OHSZLYkQ+smZwtNg==",
      "dev": true,
      "peer": true,
      "requires": {
        "@typescript-eslint/types": "5.8.1",
        "eslint-visitor-keys": "^3.0.0"
      }
    },
    "@vitejs/plugin-vue": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-vue/-/plugin-vue-4.0.0.tgz",
      "integrity": "sha512-e0X4jErIxAB5oLtDqbHvHpJe/uWNkdpYV83AOG2xo2tEVSzCzewgJMtREZM30wXnM5ls90hxiOtAuVU6H5JgbA==",
      "dev": true,
      "requires": {}
    },
    "@vitest/expect": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-0.29.3.tgz",
      "integrity": "sha512-z/0JqBqqrdtrT/wzxNrWC76EpkOHdl+SvuNGxWulLaoluygntYyG5wJul5u/rQs5875zfFz/F+JaDf90SkLUIg==",
      "dev": true,
      "requires": {
        "@vitest/spy": "0.29.3",
        "@vitest/utils": "0.29.3",
        "chai": "^4.3.7"
      }
    },
    "@vitest/runner": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-0.29.3.tgz",
      "integrity": "sha512-XLi8ctbvOWhUWmuvBUSIBf8POEDH4zCh6bOuVxm/KGfARpgmVF1ku+vVNvyq85va+7qXxtl+MFmzyXQ2xzhAvw==",
      "dev": true,
      "requires": {
        "@vitest/utils": "0.29.3",
        "p-limit": "^4.0.0",
        "pathe": "^1.1.0"
      },
      "dependencies": {
        "p-limit": {
          "version": "4.0.0",
          "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-4.0.0.tgz",
          "integrity": "sha512-5b0R4txpzjPWVw/cXXUResoD4hb6U/x9BH08L7nw+GN1sezDzPdxeRvpc9c433fZhBan/wusjbCsqwqm4EIBIQ==",
          "dev": true,
          "requires": {
            "yocto-queue": "^1.0.0"
          }
        },
        "pathe": {
          "version": "1.1.0",
          "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
          "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
          "dev": true
        },
        "yocto-queue": {
          "version": "1.0.0",
          "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-1.0.0.tgz",
          "integrity": "sha512-9bnSc/HEW2uRy67wc+T8UwauLuPJVn28jb+GtJY16iiKWyvmYJRXVT4UamsAEGQfPohgr2q4Tq0sQbQlxTfi1g==",
          "dev": true
        }
      }
    },
    "@vitest/spy": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-0.29.3.tgz",
      "integrity": "sha512-LLpCb1oOCOZcBm0/Oxbr1DQTuKLRBsSIHyLYof7z4QVE8/v8NcZKdORjMUq645fcfX55+nLXwU/1AQ+c2rND+w==",
      "dev": true,
      "requires": {
        "tinyspy": "^1.0.2"
      }
    },
    "@vitest/utils": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-0.29.3.tgz",
      "integrity": "sha512-hg4Ff8AM1GtUnLpUJlNMxrf9f4lZr/xRJjh3uJ0QFP+vjaW82HAxKrmeBmLnhc8Os2eRf+f+VBu4ts7TafPPkA==",
      "dev": true,
      "requires": {
        "cli-truncate": "^3.1.0",
        "diff": "^5.1.0",
        "loupe": "^2.3.6",
        "pretty-format": "^27.5.1"
      },
      "dependencies": {
        "ansi-regex": {
          "version": "6.0.1",
          "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.0.1.tgz",
          "integrity": "sha512-n5M855fKb2SsfMIiFFoVrABHJC8QtHwVx+mHWP3QcEqBHYienj5dHSgjbxtC0WEZXYt4wcD6zrQElDPhFuZgfA==",
          "dev": true
        },
        "ansi-styles": {
          "version": "6.2.1",
          "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.1.tgz",
          "integrity": "sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==",
          "dev": true
        },
        "cli-truncate": {
          "version": "3.1.0",
          "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-3.1.0.tgz",
          "integrity": "sha512-wfOBkjXteqSnI59oPcJkcPl/ZmwvMMOj340qUIY1SKZCv0B9Cf4D4fAucRkIKQmsIuYK3x1rrgU7MeGRruiuiA==",
          "dev": true,
          "requires": {
            "slice-ansi": "^5.0.0",
            "string-width": "^5.0.0"
          }
        },
        "emoji-regex": {
          "version": "9.2.2",
          "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
          "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
          "dev": true
        },
        "is-fullwidth-code-point": {
          "version": "4.0.0",
          "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-4.0.0.tgz",
          "integrity": "sha512-O4L094N2/dZ7xqVdrXhh9r1KODPJpFms8B5sGdJLPy664AgvXsreZUyCQQNItZRDlYug4xStLjNp/sz3HvBowQ==",
          "dev": true
        },
        "slice-ansi": {
          "version": "5.0.0",
          "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-5.0.0.tgz",
          "integrity": "sha512-FC+lgizVPfie0kkhqUScwRu1O/lF6NOgJmlCgK+/LYxDCTk8sGelYaHDhFcDN+Sn3Cv+3VSa4Byeo+IMCzpMgQ==",
          "dev": true,
          "requires": {
            "ansi-styles": "^6.0.0",
            "is-fullwidth-code-point": "^4.0.0"
          }
        },
        "string-width": {
          "version": "5.1.2",
          "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
          "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
          "dev": true,
          "requires": {
            "eastasianwidth": "^0.2.0",
            "emoji-regex": "^9.2.2",
            "strip-ansi": "^7.0.1"
          }
        },
        "strip-ansi": {
          "version": "7.0.1",
          "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.0.1.tgz",
          "integrity": "sha512-cXNxvT8dFNRVfhVME3JAe98mkXDYN2O1l7jmcwMnOslDeESg1rF/OZMtK0nRAhiari1unG5cD4jG3rapUAkLbw==",
          "dev": true,
          "requires": {
            "ansi-regex": "^6.0.1"
          }
        }
      }
    },
    "@volar/language-core": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/language-core/-/language-core-1.3.0-alpha.0.tgz",
      "integrity": "sha512-W3uMzecHPcbwddPu4SJpUcPakRBK/y/BP+U0U6NiPpUX1tONLC4yCawt+QBJqtgJ+sfD6ztf5PyvPL3hQRqfOA==",
      "dev": true,
      "requires": {
        "@volar/source-map": "1.3.0-alpha.0"
      }
    },
    "@volar/source-map": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/source-map/-/source-map-1.3.0-alpha.0.tgz",
      "integrity": "sha512-jSdizxWFvDTvkPYZnO6ew3sBZUnS0abKCbuopkc0JrIlFbznWC/fPH3iPFIMS8/IIkRxq1Jh9VVG60SmtsdaMQ==",
      "dev": true,
      "requires": {
        "muggle-string": "^0.2.2"
      }
    },
    "@volar/typescript": {
      "version": "1.3.0-alpha.0",
      "resolved": "https://registry.npmjs.org/@volar/typescript/-/typescript-1.3.0-alpha.0.tgz",
      "integrity": "sha512-5UItyW2cdH2mBLu4RrECRNJRgtvvzKrSCn2y3v/D61QwIDkGx4aeil6x8RFuUL5TFtV6QvVHXnsOHxNgd+sCow==",
      "dev": true,
      "requires": {
        "@volar/language-core": "1.3.0-alpha.0"
      }
    },
    "@volar/vue-language-core": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@volar/vue-language-core/-/vue-language-core-1.2.0.tgz",
      "integrity": "sha512-w7yEiaITh2WzKe6u8ZdeLKCUz43wdmY/OqAmsB/PGDvvhTcVhCJ6f0W/RprZL1IhqH8wALoWiwEh/Wer7ZviMQ==",
      "dev": true,
      "requires": {
        "@volar/language-core": "1.3.0-alpha.0",
        "@volar/source-map": "1.3.0-alpha.0",
        "@vue/compiler-dom": "^3.2.47",
        "@vue/compiler-sfc": "^3.2.47",
        "@vue/reactivity": "^3.2.47",
        "@vue/shared": "^3.2.47",
        "minimatch": "^6.1.6",
        "muggle-string": "^0.2.2",
        "vue-template-compiler": "^2.7.14"
      },
      "dependencies": {
        "brace-expansion": {
          "version": "2.0.1",
          "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
          "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
          "dev": true,
          "requires": {
            "balanced-match": "^1.0.0"
          }
        },
        "minimatch": {
          "version": "6.2.0",
          "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-6.2.0.tgz",
          "integrity": "sha512-sauLxniAmvnhhRjFwPNnJKaPFYyddAgbYdeUpHULtCT/GhzdCx/MDNy+Y40lBxTQUrMzDE8e0S43Z5uqfO0REg==",
          "dev": true,
          "requires": {
            "brace-expansion": "^2.0.1"
          }
        }
      }
    },
    "@volar/vue-typescript": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@volar/vue-typescript/-/vue-typescript-1.2.0.tgz",
      "integrity": "sha512-zjmRi9y3J1EkG+pfuHp8IbHmibihrKK485cfzsHjiuvJMGrpkWvlO5WVEk8oslMxxeGC5XwBFE9AOlvh378EPA==",
      "dev": true,
      "requires": {
        "@volar/typescript": "1.3.0-alpha.0",
        "@volar/vue-language-core": "1.2.0"
      }
    },
    "@vue/compiler-core": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-core/-/compiler-core-3.2.47.tgz",
      "integrity": "sha512-p4D7FDnQb7+YJmO2iPEv0SQNeNzcbHdGByJDsT4lynf63AFkOTFN07HsiRSvjGo0QrxR/o3d0hUyNCUnBU2Tig==",
      "dev": true,
      "requires": {
        "@babel/parser": "^7.16.4",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "source-map": "^0.6.1"
      }
    },
    "@vue/compiler-dom": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-dom/-/compiler-dom-3.2.47.tgz",
      "integrity": "sha512-dBBnEHEPoftUiS03a4ggEig74J2YBZ2UIeyfpcRM2tavgMWo4bsEfgCGsu+uJIL/vax9S+JztH8NmQerUo7shQ==",
      "dev": true,
      "requires": {
        "@vue/compiler-core": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "@vue/compiler-sfc": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-sfc/-/compiler-sfc-3.2.47.tgz",
      "integrity": "sha512-rog05W+2IFfxjMcFw10tM9+f7i/+FFpZJJ5XHX72NP9eC2uRD+42M3pYcQqDXVYoj74kHMSEdQ/WmCjt8JFksQ==",
      "dev": true,
      "requires": {
        "@babel/parser": "^7.16.4",
        "@vue/compiler-core": "3.2.47",
        "@vue/compiler-dom": "3.2.47",
        "@vue/compiler-ssr": "3.2.47",
        "@vue/reactivity-transform": "3.2.47",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.25.7",
        "postcss": "^8.1.10",
        "source-map": "^0.6.1"
      }
    },
    "@vue/compiler-ssr": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/compiler-ssr/-/compiler-ssr-3.2.47.tgz",
      "integrity": "sha512-wVXC+gszhulcMD8wpxMsqSOpvDZ6xKXSVWkf50Guf/S+28hTAXPDYRTbLQ3EDkOP5Xz/+SY37YiwDquKbJOgZw==",
      "dev": true,
      "requires": {
        "@vue/compiler-dom": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "@vue/reactivity": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/reactivity/-/reactivity-3.2.47.tgz",
      "integrity": "sha512-7khqQ/75oyyg+N/e+iwV6lpy1f5wq759NdlS1fpAhFXa8VeAIKGgk2E/C4VF59lx5b+Ezs5fpp/5WsRYXQiKxQ==",
      "dev": true,
      "requires": {
        "@vue/shared": "3.2.47"
      }
    },
    "@vue/reactivity-transform": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/reactivity-transform/-/reactivity-transform-3.2.47.tgz",
      "integrity": "sha512-m8lGXw8rdnPVVIdIFhf0LeQ/ixyHkH5plYuS83yop5n7ggVJU+z5v0zecwEnX7fa7HNLBhh2qngJJkxpwEEmYA==",
      "dev": true,
      "requires": {
        "@babel/parser": "^7.16.4",
        "@vue/compiler-core": "3.2.47",
        "@vue/shared": "3.2.47",
        "estree-walker": "^2.0.2",
        "magic-string": "^0.25.7"
      }
    },
    "@vue/runtime-core": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/runtime-core/-/runtime-core-3.2.47.tgz",
      "integrity": "sha512-RZxbLQIRB/K0ev0K9FXhNbBzT32H9iRtYbaXb0ZIz2usLms/D55dJR2t6cIEUn6vyhS3ALNvNthI+Q95C+NOpA==",
      "dev": true,
      "requires": {
        "@vue/reactivity": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "@vue/runtime-dom": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/runtime-dom/-/runtime-dom-3.2.47.tgz",
      "integrity": "sha512-ArXrFTjS6TsDei4qwNvgrdmHtD930KgSKGhS5M+j8QxXrDJYLqYw4RRcDy1bz1m1wMmb6j+zGLifdVHtkXA7gA==",
      "dev": true,
      "requires": {
        "@vue/runtime-core": "3.2.47",
        "@vue/shared": "3.2.47",
        "csstype": "^2.6.8"
      }
    },
    "@vue/server-renderer": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/server-renderer/-/server-renderer-3.2.47.tgz",
      "integrity": "sha512-dN9gc1i8EvmP9RCzvneONXsKfBRgqFeFZLurmHOveL7oH6HiFXJw5OGu294n1nHc/HMgTy6LulU/tv5/A7f/LA==",
      "dev": true,
      "requires": {
        "@vue/compiler-ssr": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "@vue/shared": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/@vue/shared/-/shared-3.2.47.tgz",
      "integrity": "sha512-BHGyyGN3Q97EZx0taMQ+OLNuZcW3d37ZEVmEAyeoA9ERdGvm9Irc/0Fua8SNyOtV1w6BS4q25wbMzJujO9HIfQ==",
      "dev": true
    },
    "@vue/test-utils": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/@vue/test-utils/-/test-utils-2.3.1.tgz",
      "integrity": "sha512-tRtHRPEETQSUrqXgAewNZHm5iypxDFxwenfdcvMRm1kbGo4bcqHb1XHHlsaIjoDbLkuE2NYiF8vBQDNYrzlrSA==",
      "dev": true,
      "requires": {
        "@vue/compiler-dom": "^3.0.1",
        "@vue/server-renderer": "^3.0.1",
        "js-beautify": "1.14.6"
      }
    },
    "7zip-bin": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/7zip-bin/-/7zip-bin-5.1.1.tgz",
      "integrity": "sha512-sAP4LldeWNz0lNzmTird3uWfFDWWTeg6V/MsmyyLR9X1idwKBWIgt/ZvinqQldJm3LecKEs1emkbquO6PCiLVQ==",
      "dev": true
    },
    "abbrev": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/abbrev/-/abbrev-1.1.1.tgz",
      "integrity": "sha512-nne9/IiQ/hzIhY6pdDnbBtz7DjPTKrY00P/zvPSm5pOFkl6xuGrGnXn/VtTNNfNtAfZ9/1RtehkszU9qcTii0Q==",
      "dev": true
    },
    "acorn": {
      "version": "8.8.1",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.8.1.tgz",
      "integrity": "sha512-7zFpHzhnqYKrkYdUjF1HI1bzd0VygEGX8lFk4k5zVMqHEoES+P+7TKI+EvLO9WVMJ8eekdO0aDEK044xTXwPPA==",
      "dev": true
    },
    "acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "requires": {}
    },
    "acorn-walk": {
      "version": "8.2.0",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.2.0.tgz",
      "integrity": "sha512-k+iyHEuPgSw6SbuDpGQM+06HQUa04DZ3o+F6CSzXMvvI5KMvnaEqXe+YVe555R9nn6GPt404fos4wcgpw12SDA==",
      "dev": true
    },
    "agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "dev": true,
      "requires": {
        "debug": "4"
      }
    },
    "ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "requires": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      }
    },
    "ajv-keywords": {
      "version": "3.5.2",
      "resolved": "https://registry.npmjs.org/ajv-keywords/-/ajv-keywords-3.5.2.tgz",
      "integrity": "sha512-5p6WTN0DdTGVQk6VjcEju19IgaHudalcfabD7yhDGeA6bcQnmL+CpveLJq/3hvfwd1aof6L386Ougkx6RfyMIQ==",
      "dev": true,
      "requires": {}
    },
    "ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true
    },
    "ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "requires": {
        "color-convert": "^2.0.1"
      }
    },
    "anymatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.2.tgz",
      "integrity": "sha512-P43ePfOAIupkguHUycrc4qJ9kz8ZiuOUijaETwX7THt0Y/GNK7v0aa8rY816xWjZ7rJdA5XdMcpVFTKMq+RvWg==",
      "dev": true,
      "requires": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      }
    },
    "app-builder-bin": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/app-builder-bin/-/app-builder-bin-4.0.0.tgz",
      "integrity": "sha512-xwdG0FJPQMe0M0UA4Tz0zEB8rBJTRA5a476ZawAqiBkMv16GRK5xpXThOjMaEOFnZ6zabejjG4J3da0SXG63KA==",
      "dev": true
    },
    "app-builder-lib": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/app-builder-lib/-/app-builder-lib-23.6.0.tgz",
      "integrity": "sha512-dQYDuqm/rmy8GSCE6Xl/3ShJg6Ab4bZJMT8KaTKGzT436gl1DN4REP3FCWfXoh75qGTJ+u+WsdnnpO9Jl8nyMA==",
      "dev": true,
      "requires": {
        "@develar/schema-utils": "~2.6.5",
        "@electron/universal": "1.2.1",
        "@malept/flatpak-bundler": "^0.4.0",
        "7zip-bin": "~5.1.1",
        "async-exit-hook": "^2.0.1",
        "bluebird-lst": "^1.0.9",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chromium-pickle-js": "^0.2.0",
        "debug": "^4.3.4",
        "ejs": "^3.1.7",
        "electron-osx-sign": "^0.6.0",
        "electron-publish": "23.6.0",
        "form-data": "^4.0.0",
        "fs-extra": "^10.1.0",
        "hosted-git-info": "^4.1.0",
        "is-ci": "^3.0.0",
        "isbinaryfile": "^4.0.10",
        "js-yaml": "^4.1.0",
        "lazy-val": "^1.0.5",
        "minimatch": "^3.1.2",
        "read-config-file": "6.2.0",
        "sanitize-filename": "^1.6.3",
        "semver": "^7.3.7",
        "tar": "^6.1.11",
        "temp-file": "^3.4.0"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q=="
    },
    "array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true
    },
    "asar": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/asar/-/asar-3.1.0.tgz",
      "integrity": "sha512-vyxPxP5arcAqN4F/ebHd/HhwnAiZtwhglvdmc7BR2f0ywbVNTOpSeyhLDbGXtE/y58hv1oC75TaNIXutnsOZsQ==",
      "dev": true,
      "requires": {
        "@types/glob": "^7.1.1",
        "chromium-pickle-js": "^0.2.0",
        "commander": "^5.0.0",
        "glob": "^7.1.6",
        "minimatch": "^3.0.4"
      }
    },
    "assert-plus": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/assert-plus/-/assert-plus-1.0.0.tgz",
      "integrity": "sha512-NfJ4UzBCcQGLDlQq7nHxH+tv3kyZ0hHQqF5BO6J7tNJeP5do1llPr8dZ8zHonfhAu0PHAdMkSo+8o0wxg9lZWw==",
      "dev": true,
      "optional": true
    },
    "assertion-error": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-1.1.0.tgz",
      "integrity": "sha512-jgsaNduz+ndvGyFt3uSuWqvy4lCnIJiovtouQN5JZHOKCS2QuhEdbcQHFhVksz2N2U9hXJo8odG7ETyWlEeuDw==",
      "dev": true
    },
    "astral-regex": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/astral-regex/-/astral-regex-2.0.0.tgz",
      "integrity": "sha512-Z7tMw1ytTXt5jqMcOP+OQteU1VuNK9Y02uuJtKQ1Sv69jXQKKg5cibLwGJow8yzZP+eAc18EmLGPal0bp36rvQ==",
      "dev": true,
      "optional": true
    },
    "async": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.4.tgz",
      "integrity": "sha512-iAB+JbDEGXhyIUavoDl9WP/Jj106Kz9DEn1DPgYw5ruDn0e3Wgi3sKFm55sASdGBNOQB8F59d9qQ7deqrHA8wQ==",
      "dev": true
    },
    "async-exit-hook": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/async-exit-hook/-/async-exit-hook-2.0.1.tgz",
      "integrity": "sha512-NW2cX8m1Q7KPA7a5M2ULQeZ2wR5qI5PAbw5L0UOMxdioVk9PMZ0h1TmyZEkPYrCvYjDlFICusOu1dlEKAAeXBw==",
      "dev": true
    },
    "asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha1-x57Zf380y48robyXkLzDZkdLS3k=",
      "dev": true
    },
    "at-least-node": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/at-least-node/-/at-least-node-1.0.0.tgz",
      "integrity": "sha512-+q/t7Ekv1EDY2l6Gda6LLiX14rU9TV20Wa3ofeQmwPFZbOMo9DXrLbOjFaaclkXKWidIaopwAObQDqwWtGUjqg==",
      "dev": true
    },
    "balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true
    },
    "base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "dev": true
    },
    "binary-extensions": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.2.0.tgz",
      "integrity": "sha512-jDctJ/IVQbZoJykoeHbhXpOlNBqGNcwXJKJog42E5HDPUwQTSdjCHdihjj0DlnheQ7blbT6dHOafNAiS8ooQKA==",
      "dev": true
    },
    "bluebird": {
      "version": "3.7.2",
      "resolved": "https://registry.npmjs.org/bluebird/-/bluebird-3.7.2.tgz",
      "integrity": "sha512-XpNj6GDQzdfW+r2Wnn7xiSAd7TM3jzkxGXBGTtWKuSXv1xUV+azxAm8jdWZN06QTQk+2N2XB9jRDkvbmQmcRtg==",
      "dev": true
    },
    "bluebird-lst": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/bluebird-lst/-/bluebird-lst-1.0.9.tgz",
      "integrity": "sha512-7B1Rtx82hjnSD4PGLAjVWeYH3tHAcVUmChh85a3lltKQm6FresXh9ErQo6oAv6CqxttczC3/kEg8SY5NluPuUw==",
      "dev": true,
      "requires": {
        "bluebird": "^3.5.5"
      }
    },
    "boolbase": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/boolbase/-/boolbase-1.0.0.tgz",
      "integrity": "sha512-JZOSA7Mo9sNGB8+UjSgzdLtokWAky1zbztM3WRLCbZ70/3cTANmQmOdR7y2g+J0e2WXywy1yS468tY+IruqEww==",
      "dev": true
    },
    "boolean": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/boolean/-/boolean-3.2.0.tgz",
      "integrity": "sha512-d0II/GO9uf9lfUHH2BQsjxzRJZBdsjgsBiW4BvhWk/3qoKwQFjIDVN19PfX8F2D/r9PCMTtLWjYVCFrpeYUzsw==",
      "dev": true,
      "optional": true
    },
    "brace-expansion": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
      "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
      "dev": true,
      "requires": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "braces": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.2.tgz",
      "integrity": "sha512-b8um+L1RzM3WDSzvhm6gIz1yfTbBt6YTlcEKAvsmqCZZFw46z626lVj9j1yEPW33H5H+lBQpZMP1k8l+78Ha0A==",
      "dev": true,
      "requires": {
        "fill-range": "^7.0.1"
      }
    },
    "buffer": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
      "dev": true,
      "optional": true,
      "requires": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.1.13"
      }
    },
    "buffer-alloc": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/buffer-alloc/-/buffer-alloc-1.2.0.tgz",
      "integrity": "sha512-CFsHQgjtW1UChdXgbyJGtnm+O/uLQeZdtbDo8mfUgYXCHSM1wgrVxXm6bSyrUuErEb+4sYVGCzASBRot7zyrow==",
      "dev": true,
      "requires": {
        "buffer-alloc-unsafe": "^1.1.0",
        "buffer-fill": "^1.0.0"
      }
    },
    "buffer-alloc-unsafe": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/buffer-alloc-unsafe/-/buffer-alloc-unsafe-1.1.0.tgz",
      "integrity": "sha512-TEM2iMIEQdJ2yjPJoSIsldnleVaAk1oW3DBVUykyOLsEsFmEc9kn+SFFPz+gl54KQNxlDnAwCXosOS9Okx2xAg==",
      "dev": true
    },
    "buffer-crc32": {
      "version": "0.2.13",
      "resolved": "https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-0.2.13.tgz",
      "integrity": "sha512-VO9Ht/+p3SN7SKWqcrgEzjGbRSJYTx+Q1pTQC0wrWqHx0vpJraQ6GtHx8tvcg1rlK1byhU5gccxgOgj7B0TDkQ==",
      "dev": true
    },
    "buffer-equal": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/buffer-equal/-/buffer-equal-1.0.0.tgz",
      "integrity": "sha512-tcBWO2Dl4e7Asr9hTGcpVrCe+F7DubpmqWCTbj4FHLmjqO2hIaC383acQubWtRJhdceqs5uBHs6Es+Sk//RKiQ==",
      "dev": true
    },
    "buffer-fill": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/buffer-fill/-/buffer-fill-1.0.0.tgz",
      "integrity": "sha512-T7zexNBwiiaCOGDg9xNX9PBmjrubblRkENuptryuI64URkXDFum9il/JGL8Lm8wYfAXpredVXXZz7eMHilimiQ==",
      "dev": true
    },
    "buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "dev": true
    },
    "builder-util": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/builder-util/-/builder-util-23.6.0.tgz",
      "integrity": "sha512-QiQHweYsh8o+U/KNCZFSvISRnvRctb8m/2rB2I1JdByzvNKxPeFLlHFRPQRXab6aYeXc18j9LpsDLJ3sGQmWTQ==",
      "dev": true,
      "requires": {
        "@types/debug": "^4.1.6",
        "@types/fs-extra": "^9.0.11",
        "7zip-bin": "~5.1.1",
        "app-builder-bin": "4.0.0",
        "bluebird-lst": "^1.0.9",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "cross-spawn": "^7.0.3",
        "debug": "^4.3.4",
        "fs-extra": "^10.0.0",
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.0",
        "is-ci": "^3.0.0",
        "js-yaml": "^4.1.0",
        "source-map-support": "^0.5.19",
        "stat-mode": "^1.0.0",
        "temp-file": "^3.4.0"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "builder-util-runtime": {
      "version": "9.1.1",
      "resolved": "https://registry.npmjs.org/builder-util-runtime/-/builder-util-runtime-9.1.1.tgz",
      "integrity": "sha512-azRhYLEoDvRDR8Dhis4JatELC/jUvYjm4cVSj7n9dauGTOM2eeNn9KS0z6YA6oDsjI1xphjNbY6PZZeHPzzqaw==",
      "requires": {
        "debug": "^4.3.4",
        "sax": "^1.2.4"
      }
    },
    "cac": {
      "version": "6.7.14",
      "resolved": "https://registry.npmjs.org/cac/-/cac-6.7.14.tgz",
      "integrity": "sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==",
      "dev": true
    },
    "cacheable-lookup": {
      "version": "5.0.4",
      "resolved": "https://registry.npmjs.org/cacheable-lookup/-/cacheable-lookup-5.0.4.tgz",
      "integrity": "sha512-2/kNscPhpcxrOigMZzbiWF7dz8ilhb/nIHU3EyZiXWXpeq/au8qJ8VhdftMkty3n7Gj6HIGalQG8oiBNB3AJgA==",
      "dev": true
    },
    "cacheable-request": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/cacheable-request/-/cacheable-request-7.0.2.tgz",
      "integrity": "sha512-pouW8/FmiPQbuGpkXQ9BAPv/Mo5xDGANgSNXzTzJ8DrKGuXOssM4wIQRjfanNRh3Yu5cfYPvcorqbhg2KIJtew==",
      "dev": true,
      "requires": {
        "clone-response": "^1.0.2",
        "get-stream": "^5.1.0",
        "http-cache-semantics": "^4.0.0",
        "keyv": "^4.0.0",
        "lowercase-keys": "^2.0.0",
        "normalize-url": "^6.0.1",
        "responselike": "^2.0.0"
      }
    },
    "callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true
    },
    "chai": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/chai/-/chai-4.3.7.tgz",
      "integrity": "sha512-HLnAzZ2iupm25PlN0xFreAlBA5zaBSv3og0DdeGA4Ar6h6rJ3A0rolRUKJhSF2V10GZKDgWF/VmAEsNWjCRB+A==",
      "dev": true,
      "requires": {
        "assertion-error": "^1.1.0",
        "check-error": "^1.0.2",
        "deep-eql": "^4.1.2",
        "get-func-name": "^2.0.0",
        "loupe": "^2.3.1",
        "pathval": "^1.1.1",
        "type-detect": "^4.0.5"
      }
    },
    "chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "requires": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      }
    },
    "check-error": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/check-error/-/check-error-1.0.2.tgz",
      "integrity": "sha1-V00xLt2Iu13YkS6Sht1sCu1KrII=",
      "dev": true
    },
    "chokidar": {
      "version": "3.5.3",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.5.3.tgz",
      "integrity": "sha512-Dr3sfKRP6oTcjf2JmUmFJfeVMvXBdegxB0iVQ5eb2V10uFJUCAS8OByZdVAyVb8xXNz3GjjTgj9kLWsZTqE6kw==",
      "dev": true,
      "requires": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "fsevents": "~2.3.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "dependencies": {
        "glob-parent": {
          "version": "5.1.2",
          "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
          "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
          "dev": true,
          "requires": {
            "is-glob": "^4.0.1"
          }
        }
      }
    },
    "chownr": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-2.0.0.tgz",
      "integrity": "sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==",
      "dev": true
    },
    "chromium-pickle-js": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/chromium-pickle-js/-/chromium-pickle-js-0.2.0.tgz",
      "integrity": "sha512-1R5Fho+jBq0DDydt+/vHWj5KJNJCKdARKOCwZUen84I5BreWoLqRLANH1U87eJy1tiASPtMnGqJJq0ZsLoRPOw==",
      "dev": true
    },
    "ci-info": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.3.1.tgz",
      "integrity": "sha512-SXgeMX9VwDe7iFFaEWkA5AstuER9YKqy4EhHqr4DVqkwmD9rpVimkMKWHdjn30Ja45txyjhSn63lVX69eVCckg==",
      "dev": true
    },
    "cli-truncate": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-2.1.0.tgz",
      "integrity": "sha512-n8fOixwDD6b/ObinzTrp1ZKFzbgvKZvuz/TvejnLn1aQfC6r52XEx85FmuC+3HI+JM7coBRXUvNqEU2PHVrHpg==",
      "dev": true,
      "optional": true,
      "requires": {
        "slice-ansi": "^3.0.0",
        "string-width": "^4.2.0"
      }
    },
    "cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "requires": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      }
    },
    "clone-response": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/clone-response/-/clone-response-1.0.3.tgz",
      "integrity": "sha512-ROoL94jJH2dUVML2Y/5PEDNaSHgeOdSDicUyS7izcF63G6sTc/FTjLub4b8Il9S8S0beOfYt0TaA5qvFK+w0wA==",
      "dev": true,
      "requires": {
        "mimic-response": "^1.0.0"
      }
    },
    "color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "requires": {
        "color-name": "~1.1.4"
      }
    },
    "color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true
    },
    "colors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/colors/-/colors-1.0.3.tgz",
      "integrity": "sha512-pFGrxThWcWQ2MsAz6RtgeWe4NK2kUE1WfsrvvlctdII745EW9I0yflqhe7++M5LEc7bV2c/9/5zc8sFcpL0Drw==",
      "dev": true
    },
    "combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "dev": true,
      "requires": {
        "delayed-stream": "~1.0.0"
      }
    },
    "commander": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-5.1.0.tgz",
      "integrity": "sha512-P0CysNDQ7rtVw4QIQtm+MRxV66vKFSvlsQvGYXZWR3qFU0jlMKHZZZgw8e+8DSah4UDKMqnknRDQz+xuQXQ/Zg==",
      "dev": true
    },
    "compare-version": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/compare-version/-/compare-version-0.1.2.tgz",
      "integrity": "sha512-pJDh5/4wrEnXX/VWRZvruAGHkzKdr46z11OlTPN+VrATlWWhSKewNCJ1futCO5C7eJB3nPMFZA1LeYtcFboZ2A==",
      "dev": true
    },
    "concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=",
      "dev": true
    },
    "config-chain": {
      "version": "1.1.13",
      "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
      "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
      "dev": true,
      "requires": {
        "ini": "^1.3.4",
        "proto-list": "~1.2.1"
      }
    },
    "crc": {
      "version": "3.8.0",
      "resolved": "https://registry.npmjs.org/crc/-/crc-3.8.0.tgz",
      "integrity": "sha512-iX3mfgcTMIq3ZKLIsVFAbv7+Mc10kxabAGQb8HvjA1o3T1PIYprbakQ65d3I+2HGHt6nSKkM9PYjgoJO2KcFBQ==",
      "dev": true,
      "optional": true,
      "requires": {
        "buffer": "^5.1.0"
      }
    },
    "cross-env": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/cross-env/-/cross-env-7.0.3.tgz",
      "integrity": "sha512-+/HKd6EgcQCJGh2PSjZuUitQBQynKor4wrFbRg4DtAgS1aWO+gU52xpH7M9ScGgXSYmAVS9bIJ8EzuaGw0oNAw==",
      "dev": true,
      "requires": {
        "cross-spawn": "^7.0.1"
      }
    },
    "cross-spawn": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.3.tgz",
      "integrity": "sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==",
      "dev": true,
      "requires": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      }
    },
    "css.escape": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/css.escape/-/css.escape-1.5.1.tgz",
      "integrity": "sha1-QuJ9T6BK4y+TGktNQZH6nN3ul8s=",
      "dev": true
    },
    "cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true
    },
    "csstype": {
      "version": "2.6.20",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-2.6.20.tgz",
      "integrity": "sha512-/WwNkdXfckNgw6S5R125rrW8ez139lBHWouiBvX8dfMFtcn6V81REDqnH7+CRpRipfYlyU1CmOnOxrmGcFOjeA==",
      "dev": true
    },
    "de-indent": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/de-indent/-/de-indent-1.0.2.tgz",
      "integrity": "sha512-e/1zu3xH5MQryN2zdVaF0OrdNLUbvWxzMbi+iNA6Bky7l1RoP8a2fIbRocyHclXt/arDrrR6lL3TqFD9pMQTsg==",
      "dev": true
    },
    "debug": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.4.tgz",
      "integrity": "sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==",
      "requires": {
        "ms": "2.1.2"
      }
    },
    "decompress-response": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
      "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
      "dev": true,
      "requires": {
        "mimic-response": "^3.1.0"
      },
      "dependencies": {
        "mimic-response": {
          "version": "3.1.0",
          "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
          "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
          "dev": true
        }
      }
    },
    "deep-eql": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/deep-eql/-/deep-eql-4.1.3.tgz",
      "integrity": "sha512-WaEtAOpRA1MQ0eohqZjpGD8zdI0Ovsm8mmFhaDN8dvDZzyoUMcYDnf5Y6iu7HTXxf8JDS23qWa4a+hKCDyOPzw==",
      "dev": true,
      "requires": {
        "type-detect": "^4.0.0"
      }
    },
    "deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true
    },
    "defer-to-connect": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/defer-to-connect/-/defer-to-connect-2.0.1.tgz",
      "integrity": "sha512-4tvttepXG1VaYGrRibk5EwJd1t4udunSOVMdLSAL6mId1ix438oPwPZMALY41FCijukO1L0twNcGsdzS7dHgDg==",
      "dev": true
    },
    "define-properties": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.1.4.tgz",
      "integrity": "sha512-uckOqKcfaVvtBdsVkdPv3XjveQJsNQqmhXgRi8uhvWWuPYZCNlzT8qAyblUgNoXdHdjMTzAqeGjAoli8f+bzPA==",
      "dev": true,
      "optional": true,
      "requires": {
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      }
    },
    "delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha1-3zrhmayt+31ECqrgsp4icrJOxhk=",
      "dev": true
    },
    "detect-node": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/detect-node/-/detect-node-2.1.0.tgz",
      "integrity": "sha512-T0NIuQpnTvFDATNuHN5roPwSBG83rFsuO+MXXH9/3N1eFbn4wcPjttvjMLEPWJ0RGUYgQE7cGgS3tNxbqCGM7g==",
      "dev": true,
      "optional": true
    },
    "diff": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/diff/-/diff-5.1.0.tgz",
      "integrity": "sha512-D+mk+qE8VC/PAUrlAU34N+VfXev0ghe5ywmpqrawphmVZc1bEfn56uo9qpyGp1p4xpzOHkSW4ztBd6L7Xx4ACw==",
      "dev": true
    },
    "dir-compare": {
      "version": "2.4.0",
      "resolved": "https://registry.npmjs.org/dir-compare/-/dir-compare-2.4.0.tgz",
      "integrity": "sha512-l9hmu8x/rjVC9Z2zmGzkhOEowZvW7pmYws5CWHutg8u1JgvsKWMx7Q/UODeu4djLZ4FgW5besw5yvMQnBHzuCA==",
      "dev": true,
      "requires": {
        "buffer-equal": "1.0.0",
        "colors": "1.0.3",
        "commander": "2.9.0",
        "minimatch": "3.0.4"
      },
      "dependencies": {
        "commander": {
          "version": "2.9.0",
          "resolved": "https://registry.npmjs.org/commander/-/commander-2.9.0.tgz",
          "integrity": "sha512-bmkUukX8wAOjHdN26xj5c4ctEV22TQ7dQYhSmuckKhToXrkUn0iIaolHdIxYYqD55nhpSPA9zPQ1yP57GdXP2A==",
          "dev": true,
          "requires": {
            "graceful-readlink": ">= 1.0.0"
          }
        },
        "minimatch": {
          "version": "3.0.4",
          "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.0.4.tgz",
          "integrity": "sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==",
          "dev": true,
          "requires": {
            "brace-expansion": "^1.1.7"
          }
        }
      }
    },
    "dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "requires": {
        "path-type": "^4.0.0"
      }
    },
    "dmg-builder": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/dmg-builder/-/dmg-builder-23.6.0.tgz",
      "integrity": "sha512-jFZvY1JohyHarIAlTbfQOk+HnceGjjAdFjVn3n8xlDWKsYNqbO4muca6qXEZTfGXeQMG7TYim6CeS5XKSfSsGA==",
      "dev": true,
      "requires": {
        "app-builder-lib": "23.6.0",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "dmg-license": "^1.0.11",
        "fs-extra": "^10.0.0",
        "iconv-lite": "^0.6.2",
        "js-yaml": "^4.1.0"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "dmg-license": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/dmg-license/-/dmg-license-1.0.11.tgz",
      "integrity": "sha512-ZdzmqwKmECOWJpqefloC5OJy1+WZBBse5+MR88z9g9Zn4VY+WYUkAyojmhzJckH5YbbZGcYIuGAkY5/Ys5OM2Q==",
      "dev": true,
      "optional": true,
      "requires": {
        "@types/plist": "^3.0.1",
        "@types/verror": "^1.10.3",
        "ajv": "^6.10.0",
        "crc": "^3.8.0",
        "iconv-corefoundation": "^1.1.7",
        "plist": "^3.0.4",
        "smart-buffer": "^4.0.2",
        "verror": "^1.10.0"
      }
    },
    "doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "requires": {
        "esutils": "^2.0.2"
      }
    },
    "dotenv": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-9.0.2.tgz",
      "integrity": "sha512-I9OvvrHp4pIARv4+x9iuewrWycX6CcZtoAu1XrzPxc5UygMJXJZYmBsynku8IkrJwgypE5DGNjDPmPRhDCptUg==",
      "dev": true
    },
    "dotenv-expand": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/dotenv-expand/-/dotenv-expand-5.1.0.tgz",
      "integrity": "sha512-YXQl1DSa4/PQyRfgrv6aoNjhasp/p4qs9FjJ4q4cQk+8m4r6k4ZSiEyytKG8f8W9gi8WsQtIObNmKd+tMzNTmA==",
      "dev": true
    },
    "eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true
    },
    "editorconfig": {
      "version": "0.15.3",
      "resolved": "https://registry.npmjs.org/editorconfig/-/editorconfig-0.15.3.tgz",
      "integrity": "sha512-M9wIMFx96vq0R4F+gRpY3o2exzb8hEj/n9S8unZtHSvYjibBp/iMufSzvmOcV/laG0ZtuTVGtiJggPOSW2r93g==",
      "dev": true,
      "requires": {
        "commander": "^2.19.0",
        "lru-cache": "^4.1.5",
        "semver": "^5.6.0",
        "sigmund": "^1.0.1"
      },
      "dependencies": {
        "commander": {
          "version": "2.20.3",
          "resolved": "https://registry.npmjs.org/commander/-/commander-2.20.3.tgz",
          "integrity": "sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==",
          "dev": true
        },
        "lru-cache": {
          "version": "4.1.5",
          "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-4.1.5.tgz",
          "integrity": "sha512-sWZlbEP2OsHNkXrMl5GYk/jKk70MBng6UU4YI/qGDYbgf6YbP4EvmqISbXCoJiRKs+1bSpFHVgQxvJ17F2li5g==",
          "dev": true,
          "requires": {
            "pseudomap": "^1.0.2",
            "yallist": "^2.1.2"
          }
        },
        "semver": {
          "version": "5.7.1",
          "resolved": "https://registry.npmjs.org/semver/-/semver-5.7.1.tgz",
          "integrity": "sha512-sauaDf/PZdVgrLTNYHRtpXa1iRiKcaebiKQ1BJdpQlWH2lCvexQdX55snPFyK7QzpudqbCI0qXFfOasHdyNDGQ==",
          "dev": true
        },
        "yallist": {
          "version": "2.1.2",
          "resolved": "https://registry.npmjs.org/yallist/-/yallist-2.1.2.tgz",
          "integrity": "sha512-ncTzHV7NvsQZkYe1DW7cbDLm0YpzHmZF5r/iyP3ZnQtMiJ+pjzisCiMNI+Sj+xQF5pXhSHxSB3uDbsBTzY/c2A==",
          "dev": true
        }
      }
    },
    "ejs": {
      "version": "3.1.8",
      "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.8.tgz",
      "integrity": "sha512-/sXZeMlhS0ArkfX2Aw780gJzXSMPnKjtspYZv+f3NiKLlubezAHDU5+9xz6gd3/NhG3txQCo6xlglmTS+oTGEQ==",
      "dev": true,
      "requires": {
        "jake": "^10.8.5"
      }
    },
    "electron": {
      "version": "23.1.4",
      "resolved": "https://registry.npmjs.org/electron/-/electron-23.1.4.tgz",
      "integrity": "sha512-3Z6CpAPdhv6haYX9DTO7k0l6uAUreZM3/EngQYqGN3Gz7Fp0DPb/egt8BwR3ClG/jTlQM+PQ+5WkTK0eMjm07A==",
      "dev": true,
      "requires": {
        "@electron/get": "^2.0.0",
        "@types/node": "^16.11.26",
        "extract-zip": "^2.0.1"
      },
      "dependencies": {
        "@types/node": {
          "version": "16.18.16",
          "resolved": "https://registry.npmjs.org/@types/node/-/node-16.18.16.tgz",
          "integrity": "sha512-ZOzvDRWp8dCVBmgnkIqYCArgdFOO9YzocZp8Ra25N/RStKiWvMOXHMz+GjSeVNe5TstaTmTWPucGJkDw0XXJWA==",
          "dev": true
        }
      }
    },
    "electron-builder": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/electron-builder/-/electron-builder-23.6.0.tgz",
      "integrity": "sha512-y8D4zO+HXGCNxFBV/JlyhFnoQ0Y0K7/sFH+XwIbj47pqaW8S6PGYQbjoObolKBR1ddQFPt4rwp4CnwMJrW3HAw==",
      "dev": true,
      "requires": {
        "@types/yargs": "^17.0.1",
        "app-builder-lib": "23.6.0",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "dmg-builder": "23.6.0",
        "fs-extra": "^10.0.0",
        "is-ci": "^3.0.0",
        "lazy-val": "^1.0.5",
        "read-config-file": "6.2.0",
        "simple-update-notifier": "^1.0.7",
        "yargs": "^17.5.1"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "electron-osx-sign": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/electron-osx-sign/-/electron-osx-sign-0.6.0.tgz",
      "integrity": "sha512-+hiIEb2Xxk6eDKJ2FFlpofCnemCbjbT5jz+BKGpVBrRNT3kWTGs4DfNX6IzGwgi33hUcXF+kFs9JW+r6Wc1LRg==",
      "dev": true,
      "requires": {
        "bluebird": "^3.5.0",
        "compare-version": "^0.1.2",
        "debug": "^2.6.8",
        "isbinaryfile": "^3.0.2",
        "minimist": "^1.2.0",
        "plist": "^3.0.1"
      },
      "dependencies": {
        "debug": {
          "version": "2.6.9",
          "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
          "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
          "dev": true,
          "requires": {
            "ms": "2.0.0"
          }
        },
        "isbinaryfile": {
          "version": "3.0.3",
          "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-3.0.3.tgz",
          "integrity": "sha512-8cJBL5tTd2OS0dM4jz07wQd5g0dCCqIhUxPIGtZfa5L6hWlvV5MHTITy/DBAsF+Oe2LS1X3krBUhNwaGUWpWxw==",
          "dev": true,
          "requires": {
            "buffer-alloc": "^1.2.0"
          }
        },
        "ms": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
          "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
          "dev": true
        }
      }
    },
    "electron-publish": {
      "version": "23.6.0",
      "resolved": "https://registry.npmjs.org/electron-publish/-/electron-publish-23.6.0.tgz",
      "integrity": "sha512-jPj3y+eIZQJF/+t5SLvsI5eS4mazCbNYqatv5JihbqOstIM13k0d1Z3vAWntvtt13Itl61SO6seicWdioOU5dg==",
      "dev": true,
      "requires": {
        "@types/fs-extra": "^9.0.11",
        "builder-util": "23.6.0",
        "builder-util-runtime": "9.1.1",
        "chalk": "^4.1.1",
        "fs-extra": "^10.0.0",
        "lazy-val": "^1.0.5",
        "mime": "^2.5.2"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "electron-updater": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/electron-updater/-/electron-updater-5.3.0.tgz",
      "integrity": "sha512-iKEr7yQBcvnQUPnSDYGSWC9t0eF2YbZWeYYYZzYxdl+HiRejXFENjYMnYjoOm2zxyD6Cr2JTHZhp9pqxiXuCOw==",
      "requires": {
        "@types/semver": "^7.3.6",
        "builder-util-runtime": "9.1.1",
        "fs-extra": "^10.0.0",
        "js-yaml": "^4.1.0",
        "lazy-val": "^1.0.5",
        "lodash.escaperegexp": "^4.1.2",
        "lodash.isequal": "^4.5.0",
        "semver": "^7.3.5",
        "typed-emitter": "^2.1.0"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ=="
        }
      }
    },
    "emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true
    },
    "end-of-stream": {
      "version": "1.4.4",
      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.4.tgz",
      "integrity": "sha512-+uw1inIHVPQoaVuHzRyXd21icM+cnt4CzD5rW+NC1wjOUSTOs+Te7FOv7AhN7vS9x/oIyhLP5PR1H+phQAHu5Q==",
      "dev": true,
      "requires": {
        "once": "^1.4.0"
      }
    },
    "env-paths": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/env-paths/-/env-paths-2.2.1.tgz",
      "integrity": "sha512-+h1lkLKhZMTYjog1VEpJNG7NZJWcuc2DDk/qsqSTRRCOXiLjeQ1d1/udrUGhqMxUgAlwKNZ0cf2uqan5GLuS2A==",
      "dev": true
    },
    "es6-error": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/es6-error/-/es6-error-4.1.1.tgz",
      "integrity": "sha512-Um/+FxMr9CISWh0bi5Zv0iOD+4cFh5qLeks1qhAopKVAJw3drgKbKySikp7wGhDL0HPeaja0P5ULZrxLkniUVg==",
      "dev": true,
      "optional": true
    },
    "esbuild": {
      "version": "0.16.17",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.16.17.tgz",
      "integrity": "sha512-G8LEkV0XzDMNwXKgM0Jwu3nY3lSTwSGY6XbxM9cr9+s0T/qSV1q1JVPBGzm3dcjhCic9+emZDmMffkwgPeOeLg==",
      "dev": true,
      "requires": {
        "@esbuild/android-arm": "0.16.17",
        "@esbuild/android-arm64": "0.16.17",
        "@esbuild/android-x64": "0.16.17",
        "@esbuild/darwin-arm64": "0.16.17",
        "@esbuild/darwin-x64": "0.16.17",
        "@esbuild/freebsd-arm64": "0.16.17",
        "@esbuild/freebsd-x64": "0.16.17",
        "@esbuild/linux-arm": "0.16.17",
        "@esbuild/linux-arm64": "0.16.17",
        "@esbuild/linux-ia32": "0.16.17",
        "@esbuild/linux-loong64": "0.16.17",
        "@esbuild/linux-mips64el": "0.16.17",
        "@esbuild/linux-ppc64": "0.16.17",
        "@esbuild/linux-riscv64": "0.16.17",
        "@esbuild/linux-s390x": "0.16.17",
        "@esbuild/linux-x64": "0.16.17",
        "@esbuild/netbsd-x64": "0.16.17",
        "@esbuild/openbsd-x64": "0.16.17",
        "@esbuild/sunos-x64": "0.16.17",
        "@esbuild/win32-arm64": "0.16.17",
        "@esbuild/win32-ia32": "0.16.17",
        "@esbuild/win32-x64": "0.16.17"
      }
    },
    "escalade": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.1.1.tgz",
      "integrity": "sha512-k0er2gUkLf8O0zKJiAhmkTnJlTvINGv7ygDNPbeIsX/TJjGJZHuh9B2UxbsaEkmlEo9MfhrSzmhIlhRlI2GXnw==",
      "dev": true
    },
    "escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true
    },
    "eslint": {
      "version": "8.36.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.36.0.tgz",
      "integrity": "sha512-Y956lmS7vDqomxlaaQAHVmeb4tNMp2FWIvU/RnU5BD3IKMD/MJPr76xdyr68P8tV1iNMvN2mRK0yy3c+UjL+bw==",
      "dev": true,
      "requires": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.4.0",
        "@eslint/eslintrc": "^2.0.1",
        "@eslint/js": "8.36.0",
        "@humanwhocodes/config-array": "^0.11.8",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "ajv": "^6.10.0",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.1.1",
        "eslint-visitor-keys": "^3.3.0",
        "espree": "^9.5.0",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "grapheme-splitter": "^1.0.4",
        "ignore": "^5.2.0",
        "import-fresh": "^3.0.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-sdsl": "^4.1.4",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.1",
        "strip-ansi": "^6.0.1",
        "strip-json-comments": "^3.1.0",
        "text-table": "^0.2.0"
      },
      "dependencies": {
        "eslint-scope": {
          "version": "7.1.1",
          "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.1.1.tgz",
          "integrity": "sha512-QKQM/UXpIiHcLqJ5AOyIW7XZmzjkzQXYE54n1++wb0u9V/abW3l9uQnxX8Z5Xd18xyKIMTUAyQ0k1e8pz6LUrw==",
          "dev": true,
          "requires": {
            "esrecurse": "^4.3.0",
            "estraverse": "^5.2.0"
          }
        },
        "estraverse": {
          "version": "5.3.0",
          "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
          "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
          "dev": true
        }
      }
    },
    "eslint-plugin-vue": {
      "version": "9.9.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-vue/-/eslint-plugin-vue-9.9.0.tgz",
      "integrity": "sha512-YbubS7eK0J7DCf0U2LxvVP7LMfs6rC6UltihIgval3azO3gyDwEGVgsCMe1TmDiEkl6GdMKfRpaME6QxIYtzDQ==",
      "dev": true,
      "requires": {
        "eslint-utils": "^3.0.0",
        "natural-compare": "^1.4.0",
        "nth-check": "^2.0.1",
        "postcss-selector-parser": "^6.0.9",
        "semver": "^7.3.5",
        "vue-eslint-parser": "^9.0.1",
        "xml-name-validator": "^4.0.0"
      }
    },
    "eslint-scope": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-5.1.1.tgz",
      "integrity": "sha512-2NxwbF/hZ0KpepYN0cNbo+FN6XoK7GaHlQhgx/hIZl6Va0bF45RQOOwhLIy8lQDbuCiadSLCBnH2CFYquit5bw==",
      "dev": true,
      "requires": {
        "esrecurse": "^4.3.0",
        "estraverse": "^4.1.1"
      }
    },
    "eslint-utils": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/eslint-utils/-/eslint-utils-3.0.0.tgz",
      "integrity": "sha512-uuQC43IGctw68pJA1RgbQS8/NP7rch6Cwd4j3ZBtgo4/8Flj4eGE7ZYSZRN3iq5pVUv6GPdW5Z1RFleo84uLDA==",
      "dev": true,
      "requires": {
        "eslint-visitor-keys": "^2.0.0"
      },
      "dependencies": {
        "eslint-visitor-keys": {
          "version": "2.1.0",
          "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-2.1.0.tgz",
          "integrity": "sha512-0rSmRBzXgDzIsD6mGdJgevzgezI534Cer5L/vyMX0kHzT/jiB43jRhd9YUlMGYLQy2zprNmoT8qasCGtY+QaKw==",
          "dev": true
        }
      }
    },
    "eslint-visitor-keys": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.3.0.tgz",
      "integrity": "sha512-mQ+suqKJVyeuwGYHAdjMFqjCyfl8+Ldnxuyp3ldiMBFKkvytrXUZWaiPCEav8qDHKty44bD+qV1IP4T+w+xXRA==",
      "dev": true
    },
    "espree": {
      "version": "9.5.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.5.0.tgz",
      "integrity": "sha512-JPbJGhKc47++oo4JkEoTe2wjy4fmMwvFpgJT9cQzmfXKp22Dr6Hf1tdCteLz1h0P3t+mGvWZ+4Uankvh8+c6zw==",
      "dev": true,
      "requires": {
        "acorn": "^8.8.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.3.0"
      }
    },
    "esquery": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.4.2.tgz",
      "integrity": "sha512-JVSoLdTlTDkmjFmab7H/9SL9qGSyjElT3myyKp7krqjVFQCDLmj1QFaCLRFBszBKI0XVZaiiXvuPIX3ZwHe1Ng==",
      "dev": true,
      "requires": {
        "estraverse": "^5.1.0"
      },
      "dependencies": {
        "estraverse": {
          "version": "5.3.0",
          "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
          "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
          "dev": true
        }
      }
    },
    "esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "requires": {
        "estraverse": "^5.2.0"
      },
      "dependencies": {
        "estraverse": {
          "version": "5.3.0",
          "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
          "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
          "dev": true
        }
      }
    },
    "estraverse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-4.3.0.tgz",
      "integrity": "sha512-39nnKffWz8xN1BU/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==",
      "dev": true
    },
    "estree-walker": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-2.0.2.tgz",
      "integrity": "sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==",
      "dev": true
    },
    "esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true
    },
    "extract-zip": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/extract-zip/-/extract-zip-2.0.1.tgz",
      "integrity": "sha512-GDhU9ntwuKyGXdZBUgTIe+vXnWj0fppUEtMDL0+idd5Sta8TGpHssn/eusA9mrPr9qNDym6SxAYZjNvCn/9RBg==",
      "dev": true,
      "requires": {
        "@types/yauzl": "^2.9.1",
        "debug": "^4.1.1",
        "get-stream": "^5.1.0",
        "yauzl": "^2.10.0"
      }
    },
    "extsprintf": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/extsprintf/-/extsprintf-1.4.1.tgz",
      "integrity": "sha512-Wrk35e8ydCKDj/ArClo1VrPVmN8zph5V4AtHwIuHhvMXsKf73UT3BOD+azBIW+3wOJ4FhEH7zyaJCFvChjYvMA==",
      "dev": true,
      "optional": true
    },
    "fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true
    },
    "fast-glob": {
      "version": "3.2.11",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.2.11.tgz",
      "integrity": "sha512-xrO3+1bxSo3ZVHAnqzyuewYT6aMFHRAd4Kcs92MAonjwQZLsK9d0SF1IyQ3k5PoirxTW0Oe/RqFgMQ6TcNE5Ew==",
      "dev": true,
      "requires": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.4"
      },
      "dependencies": {
        "glob-parent": {
          "version": "5.1.2",
          "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
          "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
          "dev": true,
          "requires": {
            "is-glob": "^4.0.1"
          }
        }
      }
    },
    "fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true
    },
    "fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha1-PYpcZog6FqMMqGQ+hR8Zuqd5eRc=",
      "dev": true
    },
    "fastq": {
      "version": "1.13.0",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.13.0.tgz",
      "integrity": "sha512-YpkpUnK8od0o1hmeSc7UUs/eB/vIPWJYjKck2QKIzAf71Vm1AAQ3EbuZB3g2JIy+pg+ERD0vqI79KyZiB2e2Nw==",
      "dev": true,
      "requires": {
        "reusify": "^1.0.4"
      }
    },
    "fd-slicer": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/fd-slicer/-/fd-slicer-1.1.0.tgz",
      "integrity": "sha512-cE1qsB/VwyQozZ+q1dGxR8LBYNZeofhEdUNGSMbQD3Gw2lAzX9Zb3uIU6Ebc/Fmyjo9AWWfnn0AUCHqtevs/8g==",
      "dev": true,
      "requires": {
        "pend": "~1.2.0"
      }
    },
    "file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "requires": {
        "flat-cache": "^3.0.4"
      }
    },
    "filelist": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/filelist/-/filelist-1.0.4.tgz",
      "integrity": "sha512-w1cEuf3S+DrLCQL7ET6kz+gmlJdbq9J7yXCSjK/OZCPA+qEN1WyF4ZAf0YYJa4/shHJra2t/d/r8SV4Ji+x+8Q==",
      "dev": true,
      "requires": {
        "minimatch": "^5.0.1"
      },
      "dependencies": {
        "brace-expansion": {
          "version": "2.0.1",
          "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
          "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
          "dev": true,
          "requires": {
            "balanced-match": "^1.0.0"
          }
        },
        "minimatch": {
          "version": "5.1.0",
          "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.0.tgz",
          "integrity": "sha512-9TPBGGak4nHfGZsPBohm9AWg6NoT7QTCehS3BIJABslyZbzxfV78QM2Y6+i741OPZIafFAaiiEMh5OyIrJPgtg==",
          "dev": true,
          "requires": {
            "brace-expansion": "^2.0.1"
          }
        }
      }
    },
    "fill-range": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.0.1.tgz",
      "integrity": "sha512-qOo9F+dMUmC2Lcb4BbVvnKJxTPjCm+RRpe4gDuGrzkL7mEVl/djYSu2OdQ2Pa302N4oqkSg9ir6jaLWJ2USVpQ==",
      "dev": true,
      "requires": {
        "to-regex-range": "^5.0.1"
      }
    },
    "find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "requires": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      }
    },
    "flat-cache": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.0.4.tgz",
      "integrity": "sha512-dm9s5Pw7Jc0GvMYbshN6zchCA9RgQlzzEZX3vylR9IqFfS8XciblUXOKfW6SiuJ0e13eDYZoZV5wdrev7P3Nwg==",
      "dev": true,
      "requires": {
        "flatted": "^3.1.0",
        "rimraf": "^3.0.2"
      }
    },
    "flatted": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.2.4.tgz",
      "integrity": "sha512-8/sOawo8tJ4QOBX8YlQBMxL8+RLZfxMQOif9o0KUKTNTjMYElWPE0r/m5VNFxTRd0NSw8qSy8dajrwX4RYI1Hw==",
      "dev": true
    },
    "form-data": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.0.tgz",
      "integrity": "sha512-ETEklSGi5t0QMZuiXoA/Q6vcnxcLQP5vdugSpuAyi6SVGi2clPPp+xgEhuMaHC+zGgn31Kd235W35f7Hykkaww==",
      "dev": true,
      "requires": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "mime-types": "^2.1.12"
      }
    },
    "fs-extra": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-8.1.0.tgz",
      "integrity": "sha512-yhlQgA6mnOJUKOsRUFsgJdQCvkKhcz8tlZG5HBQfReYZy46OwLcY+Zia0mtdHsOo9y/hP+CxMN0TU9QxoOtG4g==",
      "dev": true,
      "requires": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^4.0.0",
        "universalify": "^0.1.0"
      }
    },
    "fs-minipass": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fs-minipass/-/fs-minipass-2.1.0.tgz",
      "integrity": "sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==",
      "dev": true,
      "requires": {
        "minipass": "^3.0.0"
      }
    },
    "fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha1-FQStJSMVjKpA20onh8sBQRmU6k8=",
      "dev": true
    },
    "fsevents": {
      "version": "2.3.2",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz",
      "integrity": "sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==",
      "dev": true,
      "optional": true
    },
    "function-bind": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.1.tgz",
      "integrity": "sha512-yIovAzMX49sF8Yl58fSCWJ5svSLuaibPxXQJFLmBObTuCr0Mf1KiPopGM9NiFjiYBCbfaa2Fh6breQ6ANVTI0A==",
      "dev": true
    },
    "get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true
    },
    "get-func-name": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/get-func-name/-/get-func-name-2.0.0.tgz",
      "integrity": "sha1-6td0q+5y4gQJQzoGY2YCPdaIekE=",
      "dev": true
    },
    "get-intrinsic": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.1.1.tgz",
      "integrity": "sha512-kWZrnVM42QCiEA2Ig1bG8zjoIMOgxWwYCEeNdwY6Tv/cOSeGpcoX4pXHfKUxNKVoArnrEr2e9srnAxxGIraS9Q==",
      "dev": true,
      "optional": true,
      "requires": {
        "function-bind": "^1.1.1",
        "has": "^1.0.3",
        "has-symbols": "^1.0.1"
      }
    },
    "get-stream": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-5.2.0.tgz",
      "integrity": "sha512-nBF+F1rAZVCu/p7rjzgA+Yb4lfYXrpl7a6VmJrU8wF9I1CKvP/QwPNZHnOlwbTkY6dvtFIzFMSyQXbLoTQPRpA==",
      "dev": true,
      "requires": {
        "pump": "^3.0.0"
      }
    },
    "glob": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.0.tgz",
      "integrity": "sha512-lmLf6gtyrPq8tTjSmrO94wBeQbFR3HbLHbuyD69wuyQkImp2hWqMGB47OX65FBkPffO641IP9jWa1z4ivqG26Q==",
      "dev": true,
      "requires": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.0.4",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      }
    },
    "glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "requires": {
        "is-glob": "^4.0.3"
      }
    },
    "global-agent": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/global-agent/-/global-agent-3.0.0.tgz",
      "integrity": "sha512-PT6XReJ+D07JvGoxQMkT6qji/jVNfX/h364XHZOWeRzy64sSFr+xJ5OX7LI3b4MPQzdL4H8Y8M0xzPpsVMwA8Q==",
      "dev": true,
      "optional": true,
      "requires": {
        "boolean": "^3.0.1",
        "es6-error": "^4.1.1",
        "matcher": "^3.0.0",
        "roarr": "^2.15.3",
        "semver": "^7.3.2",
        "serialize-error": "^7.0.1"
      }
    },
    "globals": {
      "version": "13.19.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.19.0.tgz",
      "integrity": "sha512-dkQ957uSRWHw7CFXLUtUHQI3g3aWApYhfNR2O6jn/907riyTYKVBmxYVROkBcY614FSSeSJh7Xm7SrUWCxvJMQ==",
      "dev": true,
      "requires": {
        "type-fest": "^0.20.2"
      }
    },
    "globalthis": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.3.tgz",
      "integrity": "sha512-sFdI5LyBiNTHjRd7cGPWapiHWMOXKyuBNX/cWJ3NfzrZQVa8GI/8cofCl74AOVqq9W5kNmguTIzJ/1s2gyI9wA==",
      "dev": true,
      "optional": true,
      "requires": {
        "define-properties": "^1.1.3"
      }
    },
    "globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "requires": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      }
    },
    "got": {
      "version": "11.8.5",
      "resolved": "https://registry.npmjs.org/got/-/got-11.8.5.tgz",
      "integrity": "sha512-o0Je4NvQObAuZPHLFoRSkdG2lTgtcynqymzg2Vupdx6PorhaT5MCbIyXG6d4D94kk8ZG57QeosgdiqfJWhEhlQ==",
      "dev": true,
      "requires": {
        "@sindresorhus/is": "^4.0.0",
        "@szmarczak/http-timer": "^4.0.5",
        "@types/cacheable-request": "^6.0.1",
        "@types/responselike": "^1.0.0",
        "cacheable-lookup": "^5.0.3",
        "cacheable-request": "^7.0.2",
        "decompress-response": "^6.0.0",
        "http2-wrapper": "^1.0.0-beta.5.2",
        "lowercase-keys": "^2.0.0",
        "p-cancelable": "^2.0.0",
        "responselike": "^2.0.0"
      }
    },
    "graceful-fs": {
      "version": "4.2.8",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.8.tgz",
      "integrity": "sha512-qkIilPUYcNhJpd33n0GBXTB1MMPp14TxEsEs0pTrsSVucApsYzW5V+Q8Qxhik6KU3evy+qkAAowTByymK0avdg=="
    },
    "graceful-readlink": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/graceful-readlink/-/graceful-readlink-1.0.1.tgz",
      "integrity": "sha512-8tLu60LgxF6XpdbK8OW3FA+IfTNBn1ZHGHKF4KQbEeSkajYw5PlYJcKluntgegDPTg8UkHjpet1T82vk6TQ68w==",
      "dev": true
    },
    "grapheme-splitter": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/grapheme-splitter/-/grapheme-splitter-1.0.4.tgz",
      "integrity": "sha512-bzh50DW9kTPM00T8y4o8vQg89Di9oLJVLW/KaOGIXJWP/iqCN6WKYkbNOF04vFLJhwcpYUh9ydh/+5vpOqV4YQ==",
      "dev": true
    },
    "happy-dom": {
      "version": "8.9.0",
      "resolved": "https://registry.npmjs.org/happy-dom/-/happy-dom-8.9.0.tgz",
      "integrity": "sha512-JZwJuGdR7ko8L61136YzmrLv7LgTh5b8XaEM3P709mLjyQuXJ3zHTDXvUtBBahRjGlcYW0zGjIiEWizoTUGKfA==",
      "dev": true,
      "requires": {
        "css.escape": "^1.5.1",
        "he": "^1.2.0",
        "iconv-lite": "^0.6.3",
        "node-fetch": "^2.x.x",
        "webidl-conversions": "^7.0.0",
        "whatwg-encoding": "^2.0.0",
        "whatwg-mimetype": "^3.0.0"
      }
    },
    "has": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/has/-/has-1.0.3.tgz",
      "integrity": "sha512-f2dvO0VU6Oej7RkWJGrehjbzMAjFp5/VKPp5tTpWIV4JHHZK1/BxbFRtf/siA2SWTe09caDmVtYYzWEIbBS4zw==",
      "dev": true,
      "requires": {
        "function-bind": "^1.1.1"
      }
    },
    "has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true
    },
    "has-property-descriptors": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.0.tgz",
      "integrity": "sha512-62DVLZGoiEBDHQyqG4w9xCuZ7eJEwNmJRWw2VY84Oedb7WFcA27fiEVe8oUQx9hAUJ4ekurquucTGwsyO1XGdQ==",
      "dev": true,
      "optional": true,
      "requires": {
        "get-intrinsic": "^1.1.1"
      }
    },
    "has-symbols": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.0.2.tgz",
      "integrity": "sha512-chXa79rL/UC2KlX17jo3vRGz0azaWEx5tGqZg5pO3NUyEJVB17dMruQlzCCOfUvElghKcm5194+BCRvi2Rv/Gw==",
      "dev": true,
      "optional": true
    },
    "he": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/he/-/he-1.2.0.tgz",
      "integrity": "sha512-F/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==",
      "dev": true
    },
    "hosted-git-info": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/hosted-git-info/-/hosted-git-info-4.1.0.tgz",
      "integrity": "sha512-kyCuEOWjJqZuDbRHzL8V93NzQhwIB71oFWSyzVo+KPZI+pnQPPxucdkrOZvkLRnrf5URsQM+IJ09Dw29cRALIA==",
      "dev": true,
      "requires": {
        "lru-cache": "^6.0.0"
      }
    },
    "http-cache-semantics": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.1.0.tgz",
      "integrity": "sha512-carPklcUh7ROWRK7Cv27RPtdhYhUsela/ue5/jKzjegVvXDqM2ILE9Q2BGn9JZJh1g87cp56su/FgQSzcWS8cQ==",
      "dev": true
    },
    "http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "dev": true,
      "requires": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      }
    },
    "http2-wrapper": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/http2-wrapper/-/http2-wrapper-1.0.3.tgz",
      "integrity": "sha512-V+23sDMr12Wnz7iTcDeJr3O6AIxlnvT/bmaAAAP/Xda35C90p9599p0F1eHR/N1KILWSoWVAiOMFjBBXaXSMxg==",
      "dev": true,
      "requires": {
        "quick-lru": "^5.1.1",
        "resolve-alpn": "^1.0.0"
      }
    },
    "https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "dev": true,
      "requires": {
        "agent-base": "6",
        "debug": "4"
      }
    },
    "iconv-corefoundation": {
      "version": "1.1.7",
      "resolved": "https://registry.npmjs.org/iconv-corefoundation/-/iconv-corefoundation-1.1.7.tgz",
      "integrity": "sha512-T10qvkw0zz4wnm560lOEg0PovVqUXuOFhhHAkixw8/sycy7TJt7v/RrkEKEQnAw2viPSJu6iAkErxnzR0g8PpQ==",
      "dev": true,
      "optional": true,
      "requires": {
        "cli-truncate": "^2.1.0",
        "node-addon-api": "^1.6.3"
      }
    },
    "iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "requires": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      }
    },
    "ieee754": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
      "dev": true,
      "optional": true
    },
    "ignore": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.2.0.tgz",
      "integrity": "sha512-CmxgYGiEPCLhfLnpPp1MoRmifwEIOgjcHXxOBjv7mY96c+eWScsOP9c112ZyLdWHi0FxHjI+4uVhKYp/gcdRmQ==",
      "dev": true
    },
    "import-fresh": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.0.tgz",
      "integrity": "sha512-veYYhQa+D1QBKznvhUHxb8faxlrwUnxseDAbAp457E0wLNio2bOSKnjYDhMj+YiAq61xrMGhQk9iXVk5FzgQMw==",
      "dev": true,
      "requires": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      }
    },
    "imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha1-khi5srkoojixPcT7a21XbyMUU+o=",
      "dev": true
    },
    "inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha1-Sb1jMdfQLQwJvJEKEHW6gWW1bfk=",
      "dev": true,
      "requires": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true
    },
    "ini": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==",
      "dev": true
    },
    "is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "requires": {
        "binary-extensions": "^2.0.0"
      }
    },
    "is-ci": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-3.0.1.tgz",
      "integrity": "sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==",
      "dev": true,
      "requires": {
        "ci-info": "^3.2.0"
      }
    },
    "is-core-module": {
      "version": "2.9.0",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.9.0.tgz",
      "integrity": "sha512-+5FPy5PnwmO3lvfMb0AsoPaBG+5KHUI0wYFXOtYPnVVVspTFUuMZNfNaNVRt3FZadstu2c8x23vykRW/NBoU6A==",
      "dev": true,
      "requires": {
        "has": "^1.0.3"
      }
    },
    "is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha1-qIwCU1eR8C7TfHahueqXc8gz+MI=",
      "dev": true
    },
    "is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true
    },
    "is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "requires": {
        "is-extglob": "^2.1.1"
      }
    },
    "is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true
    },
    "is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true
    },
    "isbinaryfile": {
      "version": "4.0.10",
      "resolved": "https://registry.npmjs.org/isbinaryfile/-/isbinaryfile-4.0.10.tgz",
      "integrity": "sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==",
      "dev": true
    },
    "isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha1-6PvzdNxVb/iUehDcsFctYz8s+hA=",
      "dev": true
    },
    "jake": {
      "version": "10.8.5",
      "resolved": "https://registry.npmjs.org/jake/-/jake-10.8.5.tgz",
      "integrity": "sha512-sVpxYeuAhWt0OTWITwT98oyV0GsXyMlXCF+3L1SuafBVUIr/uILGRB+NqwkzhgXKvoJpDIpQvqkUALgdmQsQxw==",
      "dev": true,
      "requires": {
        "async": "^3.2.3",
        "chalk": "^4.0.2",
        "filelist": "^1.0.1",
        "minimatch": "^3.0.4"
      }
    },
    "js-beautify": {
      "version": "1.14.6",
      "resolved": "https://registry.npmjs.org/js-beautify/-/js-beautify-1.14.6.tgz",
      "integrity": "sha512-GfofQY5zDp+cuHc+gsEXKPpNw2KbPddreEo35O6jT6i0RVK6LhsoYBhq5TvK4/n74wnA0QbK8gGd+jUZwTMKJw==",
      "dev": true,
      "requires": {
        "config-chain": "^1.1.13",
        "editorconfig": "^0.15.3",
        "glob": "^8.0.3",
        "nopt": "^6.0.0"
      },
      "dependencies": {
        "brace-expansion": {
          "version": "2.0.1",
          "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
          "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
          "dev": true,
          "requires": {
            "balanced-match": "^1.0.0"
          }
        },
        "glob": {
          "version": "8.1.0",
          "resolved": "https://registry.npmjs.org/glob/-/glob-8.1.0.tgz",
          "integrity": "sha512-r8hpEjiQEYlF2QU0df3dS+nxxSIreXQS1qRhMJM0Q5NDdR386C7jb7Hwwod8Fgiuex+k0GFjgft18yvxm5XoCQ==",
          "dev": true,
          "requires": {
            "fs.realpath": "^1.0.0",
            "inflight": "^1.0.4",
            "inherits": "2",
            "minimatch": "^5.0.1",
            "once": "^1.3.0"
          }
        },
        "minimatch": {
          "version": "5.1.6",
          "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
          "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
          "dev": true,
          "requires": {
            "brace-expansion": "^2.0.1"
          }
        }
      }
    },
    "js-sdsl": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/js-sdsl/-/js-sdsl-4.1.4.tgz",
      "integrity": "sha512-Y2/yD55y5jteOAmY50JbUZYwk3CP3wnLPEZnlR1w9oKhITrBEtAxwuWKebFf8hMrPMgbYwFoWK/lH2sBkErELw==",
      "dev": true
    },
    "js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "requires": {
        "argparse": "^2.0.1"
      }
    },
    "json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true
    },
    "json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true
    },
    "json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha1-nbe1lJatPzz+8wp1FC0tkwrXJlE=",
      "dev": true
    },
    "json-stringify-safe": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/json-stringify-safe/-/json-stringify-safe-5.0.1.tgz",
      "integrity": "sha512-ZClg6AaYvamvYEE82d3Iyd3vSSIjQ+odgjaTzRuO3s7toCdFKczob2i0zCh7JE8kWn17yvAWhUVxvqGwUalsRA==",
      "dev": true,
      "optional": true
    },
    "json5": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.1.tgz",
      "integrity": "sha512-1hqLFMSrGHRHxav9q9gNjJ5EXznIxGVO09xQRrwplcS8qs28pZ8s8hupZAmqDwZUmVZ2Qb2jnyPOWcDH8m8dlA==",
      "dev": true
    },
    "jsonc-parser": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/jsonc-parser/-/jsonc-parser-3.2.0.tgz",
      "integrity": "sha512-gfFQZrcTc8CnKXp6Y4/CBT3fTc0OVuDofpre4aEeEpSBPV5X5v4+Vmx+8snU7RLPrNHPKSgLxGo9YuQzz20o+w==",
      "dev": true
    },
    "jsonfile": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-4.0.0.tgz",
      "integrity": "sha512-m6F1R3z8jjlf2imQHS2Qez5sjKWQzbuuhuJ/FKYFRZvPE3PuHcSMVZzfsLhGVOkfd20obL5SWEBew5ShlquNxg==",
      "dev": true,
      "requires": {
        "graceful-fs": "^4.1.6"
      }
    },
    "keyv": {
      "version": "4.5.2",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.2.tgz",
      "integrity": "sha512-5MHbFaKn8cNSmVW7BYnijeAVlE4cYA/SVkifVgrh7yotnfhKmjuXpDKjrABLnT0SfHWV21P8ow07OGfRrNDg8g==",
      "dev": true,
      "requires": {
        "json-buffer": "3.0.1"
      }
    },
    "lazy-val": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/lazy-val/-/lazy-val-1.0.5.tgz",
      "integrity": "sha512-0/BnGCCfyUMkBpeDgWihanIAF9JmZhHBgUhEqzvf+adhNGLoP6TaiI5oF8oyb3I45P+PcnrqihSf01M0l0G5+Q=="
    },
    "levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "requires": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      }
    },
    "local-pkg": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/local-pkg/-/local-pkg-0.4.2.tgz",
      "integrity": "sha512-mlERgSPrbxU3BP4qBqAvvwlgW4MTg78iwJdGGnv7kibKjWcJksrG3t6LB5lXI93wXRDvG4NpUgJFmTG4T6rdrg==",
      "dev": true
    },
    "locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "requires": {
        "p-locate": "^5.0.0"
      }
    },
    "lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "dev": true
    },
    "lodash.escaperegexp": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/lodash.escaperegexp/-/lodash.escaperegexp-4.1.2.tgz",
      "integrity": "sha1-ZHYsSGGAglGKw99Mz11YhtriA0c="
    },
    "lodash.isequal": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/lodash.isequal/-/lodash.isequal-4.5.0.tgz",
      "integrity": "sha1-QVxEePK8wwEgwizhDtMib30+GOA="
    },
    "lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true
    },
    "loupe": {
      "version": "2.3.6",
      "resolved": "https://registry.npmjs.org/loupe/-/loupe-2.3.6.tgz",
      "integrity": "sha512-RaPMZKiMy8/JruncMU5Bt6na1eftNoo++R4Y+N2FrxkDVTrGvcyzFTsaGif4QTeKESheMGegbhw6iUAq+5A8zA==",
      "dev": true,
      "requires": {
        "get-func-name": "^2.0.0"
      }
    },
    "lowercase-keys": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/lowercase-keys/-/lowercase-keys-2.0.0.tgz",
      "integrity": "sha512-tqNXrS78oMOE73NMxK4EMLQsQowWf8jKooH9g7xPavRT706R6bkQJ6DY2Te7QukaZsulxa30wQ7bk0pm4XiHmA==",
      "dev": true
    },
    "lru-cache": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
      "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
      "requires": {
        "yallist": "^4.0.0"
      }
    },
    "magic-string": {
      "version": "0.25.9",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.25.9.tgz",
      "integrity": "sha512-RmF0AsMzgt25qzqqLc1+MbHmhdx0ojF2Fvs4XnOqz2ZOBXzzkEwc/dJQZCYHAn7v1jbVOjAZfK8msRn4BxO4VQ==",
      "dev": true,
      "requires": {
        "sourcemap-codec": "^1.4.8"
      }
    },
    "matcher": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/matcher/-/matcher-3.0.0.tgz",
      "integrity": "sha512-OkeDaAZ/bQCxeFAozM55PKcKU0yJMPGifLwV4Qgjitu+5MoAfSQN4lsLJeXZ1b8w0x+/Emda6MZgXS1jvsapng==",
      "dev": true,
      "optional": true,
      "requires": {
        "escape-string-regexp": "^4.0.0"
      }
    },
    "merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true
    },
    "micromatch": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.5.tgz",
      "integrity": "sha512-DMy+ERcEW2q8Z2Po+WNXuw3c5YaUSFjAO5GsJqfEl7UjvtIuFKO6ZrKvcItdy98dwFI2N1tg3zNIdKaQT+aNdA==",
      "dev": true,
      "requires": {
        "braces": "^3.0.2",
        "picomatch": "^2.3.1"
      }
    },
    "mime": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
      "dev": true
    },
    "mime-db": {
      "version": "1.51.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.51.0.tgz",
      "integrity": "sha512-5y8A56jg7XVQx2mbv1lu49NR4dokRnhZYTtL+KGfaa27uq4pSTXkwQkFJl4pkRMyNFz/EtYDSkiiEHx3F7UN6g==",
      "dev": true
    },
    "mime-types": {
      "version": "2.1.34",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.34.tgz",
      "integrity": "sha512-6cP692WwGIs9XXdOO4++N+7qjqv0rqxxVvJ3VHPh/Sc9mVZcQP+ZGhkKiTvWMQRr2tbHkJP/Yn7Y0npb3ZBs4A==",
      "dev": true,
      "requires": {
        "mime-db": "1.51.0"
      }
    },
    "mimic-response": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-1.0.1.tgz",
      "integrity": "sha512-j5EctnkH7amfV/q5Hgmoal1g2QHFJRraOtmx0JpIqkxhBhI/lJSl1nMpQ45hVarwNETOoWEimndZ4QK0RHxuxQ==",
      "dev": true
    },
    "minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "requires": {
        "brace-expansion": "^1.1.7"
      }
    },
    "minimist": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.5.tgz",
      "integrity": "sha512-FM9nNUYrRBAELZQT3xeZQ7fmMOBg6nWNmJKTcgsJeaLstP/UODVpGsr5OhXhhXg6f+qtJ8uiZ+PUxkDWcgIXLw==",
      "dev": true
    },
    "minipass": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.3.tgz",
      "integrity": "sha512-N0BOsdFAlNRfmwMhjAsLVWOk7Ljmeb39iqFlsV1At+jqRhSUP9yeof8FyJu4imaJiSUp8vQebWD/guZwGQC8iA==",
      "dev": true,
      "requires": {
        "yallist": "^4.0.0"
      }
    },
    "minizlib": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-2.1.2.tgz",
      "integrity": "sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==",
      "dev": true,
      "requires": {
        "minipass": "^3.0.0",
        "yallist": "^4.0.0"
      }
    },
    "mlly": {
      "version": "0.5.16",
      "resolved": "https://registry.npmjs.org/mlly/-/mlly-0.5.16.tgz",
      "integrity": "sha512-LaJ8yuh4v0zEmge/g3c7jjFlhoCPfQn6RCjXgm9A0Qiuochq4BcuOxVfWmdnCoLTlg2MV+hqhOek+W2OhG0Lwg==",
      "dev": true,
      "requires": {
        "acorn": "^8.8.0",
        "pathe": "^0.3.8",
        "pkg-types": "^0.3.5",
        "ufo": "^0.8.5"
      }
    },
    "ms": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
      "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w=="
    },
    "muggle-string": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/muggle-string/-/muggle-string-0.2.2.tgz",
      "integrity": "sha512-YVE1mIJ4VpUMqZObFndk9CJu6DBJR/GB13p3tXuNbwD4XExaI5EOuRl6BHeIDxIqXZVxSfAC+y6U1Z/IxCfKUg==",
      "dev": true
    },
    "nano-staged": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/nano-staged/-/nano-staged-0.8.0.tgz",
      "integrity": "sha512-QSEqPGTCJbkHU2yLvfY6huqYPjdBrOaTMKatO1F8nCSrkQGXeKwtCiCnsdxnuMhbg3DTVywKaeWLGCE5oJpq0g==",
      "dev": true,
      "requires": {
        "picocolors": "^1.0.0"
      }
    },
    "nanoid": {
      "version": "3.3.4",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.4.tgz",
      "integrity": "sha512-MqBkQh/OHTS2egovRtLk45wEyNXwF+cokD+1YPf9u5VfJiRdAiRwB2froX5Co9Rh20xs4siNPm8naNotSD6RBw==",
      "dev": true
    },
    "natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha1-Sr6/7tdUHywnrPspvbvRXI1bpPc=",
      "dev": true
    },
    "natural-compare-lite": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare-lite/-/natural-compare-lite-1.4.0.tgz",
      "integrity": "sha512-Tj+HTDSJJKaZnfiuw+iaF9skdPpTo2GtEly5JHnWV/hfv2Qj/9RKsGISQtLh2ox3l5EAGw487hnBee0sIJ6v2g==",
      "dev": true
    },
    "node-addon-api": {
      "version": "1.7.2",
      "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-1.7.2.tgz",
      "integrity": "sha512-ibPK3iA+vaY1eEjESkQkM0BbCqFOaZMiXRTtdB0u7b4djtY6JnsjvPdUHVMg6xQt3B8fpTTWHI9A+ADjM9frzg==",
      "dev": true,
      "optional": true
    },
    "node-fetch": {
      "version": "2.6.6",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.6.6.tgz",
      "integrity": "sha512-Z8/6vRlTUChSdIgMa51jxQ4lrw/Jy5SOW10ObaA47/RElsAN2c5Pn8bTgFGWn/ibwzXTE8qwr1Yzx28vsecXEA==",
      "dev": true,
      "requires": {
        "whatwg-url": "^5.0.0"
      }
    },
    "nopt": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/nopt/-/nopt-6.0.0.tgz",
      "integrity": "sha512-ZwLpbTgdhuZUnZzjd7nb1ZV+4DoiC6/sfiVKok72ym/4Tlf+DFdlHYmT2JPmcNNWV6Pi3SDf1kT+A4r9RTuT9g==",
      "dev": true,
      "requires": {
        "abbrev": "^1.0.0"
      }
    },
    "normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true
    },
    "normalize-url": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/normalize-url/-/normalize-url-6.1.0.tgz",
      "integrity": "sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==",
      "dev": true
    },
    "nth-check": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/nth-check/-/nth-check-2.1.1.tgz",
      "integrity": "sha512-lqjrjmaOoAnWfMmBPL+XNnynZh2+swxiX3WUE0s4yEHI6m+AwrK2UZOimIRl3X/4QctVqS8AiZjFqyOGrMXb/w==",
      "dev": true,
      "requires": {
        "boolbase": "^1.0.0"
      }
    },
    "object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "optional": true
    },
    "once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha1-WDsap3WWHUsROsF9nFC6753Xa9E=",
      "dev": true,
      "requires": {
        "wrappy": "1"
      }
    },
    "optionator": {
      "version": "0.9.1",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.1.tgz",
      "integrity": "sha512-74RlY5FCnhq4jRxVUPKDaRwrVNXMqsGsiW6AJw4XK8hmtm10wC0ypZBLw5IIp85NZMr91+qd1RvvENwg7jjRFw==",
      "dev": true,
      "requires": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.3"
      }
    },
    "p-cancelable": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/p-cancelable/-/p-cancelable-2.1.1.tgz",
      "integrity": "sha512-BZOr3nRQHOntUjTrH8+Lh54smKHoHyur8We1V8DSMVrl5A2malOOwuJRnKRDjSnkoeBh4at6BwEnb5I7Jl31wg==",
      "dev": true
    },
    "p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "requires": {
        "yocto-queue": "^0.1.0"
      }
    },
    "p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "requires": {
        "p-limit": "^3.0.2"
      }
    },
    "parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "requires": {
        "callsites": "^3.0.0"
      }
    },
    "path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true
    },
    "path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha1-F0uSaHNVNP+8es5r9TpanhtcX18=",
      "dev": true
    },
    "path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true
    },
    "path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true
    },
    "path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true
    },
    "pathe": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-0.3.9.tgz",
      "integrity": "sha512-6Y6s0vT112P3jD8dGfuS6r+lpa0qqNrLyHPOwvXMnyNTQaYiwgau2DP3aNDsR13xqtGj7rrPo+jFUATpU6/s+g==",
      "dev": true
    },
    "pathval": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/pathval/-/pathval-1.1.1.tgz",
      "integrity": "sha512-Dp6zGqpTdETdR63lehJYPeIOqpiNBNtc7BpWSLrOje7UaIsE5aY92r/AunQA7rsXvet3lrJ3JnZX29UPTKXyKQ==",
      "dev": true
    },
    "pend": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/pend/-/pend-1.2.0.tgz",
      "integrity": "sha512-F3asv42UuXchdzt+xXqfW1OGlVBe+mxa2mqI0pg5yAHZPvFmY3Y6drSf/GQ1A86WgWEN9Kzh/WrgKa6iGcHXLg==",
      "dev": true
    },
    "picocolors": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.0.0.tgz",
      "integrity": "sha512-1fygroTLlHu66zi26VoTDv8yRgm0Fccecssto+MhsZ0D/DGW2sm8E8AjW7NU5VVTRt5GxbeZ5qBuJr+HyLYkjQ==",
      "dev": true
    },
    "picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true
    },
    "pkg-types": {
      "version": "0.3.6",
      "resolved": "https://registry.npmjs.org/pkg-types/-/pkg-types-0.3.6.tgz",
      "integrity": "sha512-uQZutkkh6axl1GxDm5/+8ivVdwuJ5pyDGqJeSiIWIUWIqYiK3p9QKozN/Rv6eVvFoeSWkN1uoYeSDBwwBJBtbg==",
      "dev": true,
      "requires": {
        "jsonc-parser": "^3.2.0",
        "mlly": "^0.5.16",
        "pathe": "^0.3.9"
      }
    },
    "playwright": {
      "version": "1.31.2",
      "resolved": "https://registry.npmjs.org/playwright/-/playwright-1.31.2.tgz",
      "integrity": "sha512-jpC47n2PKQNtzB7clmBuWh6ftBRS/Bt5EGLigJ9k2QAKcNeYXZkEaDH5gmvb6+AbcE0DO6GnXdbl9ogG6Eh+og==",
      "dev": true,
      "requires": {
        "playwright-core": "1.31.2"
      }
    },
    "playwright-core": {
      "version": "1.31.2",
      "resolved": "https://registry.npmjs.org/playwright-core/-/playwright-core-1.31.2.tgz",
      "integrity": "sha512-a1dFgCNQw4vCsG7bnojZjDnPewZcw7tZUNFN0ZkcLYKj+mPmXvg4MpaaKZ5SgqPsOmqIf2YsVRkgqiRDxD+fDQ==",
      "dev": true
    },
    "plist": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/plist/-/plist-3.0.5.tgz",
      "integrity": "sha512-83vX4eYdQp3vP9SxuYgEM/G/pJQqLUz/V/xzPrzruLs7fz7jxGQ1msZ/mg1nwZxUSuOp4sb+/bEIbRrbzZRxDA==",
      "dev": true,
      "requires": {
        "base64-js": "^1.5.1",
        "xmlbuilder": "^9.0.7"
      },
      "dependencies": {
        "xmlbuilder": {
          "version": "9.0.7",
          "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-9.0.7.tgz",
          "integrity": "sha1-Ey7mPS7FVlxVfiD0wi35rKaGsQ0=",
          "dev": true
        }
      }
    },
    "postcss": {
      "version": "8.4.21",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.21.tgz",
      "integrity": "sha512-tP7u/Sn/dVxK2NnruI4H9BG+x+Wxz6oeZ1cJ8P6G/PZY0IKk4k/63TDsQf2kQq3+qoJeLm2kIBUNlZe3zgb4Zg==",
      "dev": true,
      "requires": {
        "nanoid": "^3.3.4",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      }
    },
    "postcss-selector-parser": {
      "version": "6.0.10",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.0.10.tgz",
      "integrity": "sha512-IQ7TZdoaqbT+LCpShg46jnZVlhWD2w6iQYAcYXfHARZ7X1t/UGhhceQDs5X0cGqKvYlHNOuv7Oa1xmb0oQuA3w==",
      "dev": true,
      "requires": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      }
    },
    "prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true
    },
    "pretty-format": {
      "version": "27.5.1",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-27.5.1.tgz",
      "integrity": "sha512-Qb1gy5OrP5+zDf2Bvnzdl3jsTf1qXVMazbvCoKhtKqVs4/YK4ozX4gKQJJVyNe+cajNPn0KoC0MC3FUmaHWEmQ==",
      "dev": true,
      "requires": {
        "ansi-regex": "^5.0.1",
        "ansi-styles": "^5.0.0",
        "react-is": "^17.0.1"
      },
      "dependencies": {
        "ansi-styles": {
          "version": "5.2.0",
          "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
          "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
          "dev": true
        }
      }
    },
    "progress": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/progress/-/progress-2.0.3.tgz",
      "integrity": "sha512-7PiHtLll5LdnKIMw100I+8xJXR5gW2QwWYkT6iJva0bXitZKa/XMrSbdmg3r2Xnaidz9Qumd0VPaMrZlF9V9sA==",
      "dev": true
    },
    "proto-list": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/proto-list/-/proto-list-1.2.4.tgz",
      "integrity": "sha512-vtK/94akxsTMhe0/cbfpR+syPuszcuwhqVjJq26CuNDgFGj682oRBXOP5MJpv2r7JtE8MsiepGIqvvOTBwn2vA==",
      "dev": true
    },
    "pseudomap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/pseudomap/-/pseudomap-1.0.2.tgz",
      "integrity": "sha512-b/YwNhb8lk1Zz2+bXXpS/LK9OisiZZ1SNsSLxN1x2OXVEhW2Ckr/7mWE5vrC1ZTiJlD9g19jWszTmJsB+oEpFQ==",
      "dev": true
    },
    "pump": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.0.tgz",
      "integrity": "sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==",
      "dev": true,
      "requires": {
        "end-of-stream": "^1.1.0",
        "once": "^1.3.1"
      }
    },
    "punycode": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.1.1.tgz",
      "integrity": "sha512-XRsRjdf+j5ml+y/6GKHPZbrF/8p2Yga0JPtdqTIY2Xe5ohJPD9saDJJLPvp9+NSBprVvevdXZybnj2cv8OEd0A==",
      "dev": true
    },
    "queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true
    },
    "quick-lru": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/quick-lru/-/quick-lru-5.1.1.tgz",
      "integrity": "sha512-WuyALRjWPDGtt/wzJiadO5AXY+8hZ80hVpe6MyivgraREW751X3SbhRvG3eLKOYN+8VEvqLcf3wdnt44Z4S4SA==",
      "dev": true
    },
    "react-is": {
      "version": "17.0.2",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-17.0.2.tgz",
      "integrity": "sha512-w2GsyukL62IJnlaff/nRegPQR94C/XXamvMWmSHRJ4y7Ts/4ocGRmTHvOs8PSE6pB3dWOrD/nueuU5sduBsQ4w==",
      "dev": true
    },
    "read-config-file": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/read-config-file/-/read-config-file-6.2.0.tgz",
      "integrity": "sha512-gx7Pgr5I56JtYz+WuqEbQHj/xWo+5Vwua2jhb1VwM4Wid5PqYmZ4i00ZB0YEGIfkVBsCv9UrjgyqCiQfS/Oosg==",
      "dev": true,
      "requires": {
        "dotenv": "^9.0.2",
        "dotenv-expand": "^5.1.0",
        "js-yaml": "^4.1.0",
        "json5": "^2.2.0",
        "lazy-val": "^1.0.4"
      }
    },
    "readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "requires": {
        "picomatch": "^2.2.1"
      }
    },
    "require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha1-jGStX9MNqxyXbiNE/+f3kqam30I=",
      "dev": true
    },
    "resolve": {
      "version": "1.22.1",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.1.tgz",
      "integrity": "sha512-nBpuuYuY5jFsli/JIs1oldw6fOQCBioohqWZg/2hiaOybXOft4lonv85uDOKXdf8rhyK159cxU5cDcK/NKk8zw==",
      "dev": true,
      "requires": {
        "is-core-module": "^2.9.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      }
    },
    "resolve-alpn": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/resolve-alpn/-/resolve-alpn-1.2.1.tgz",
      "integrity": "sha512-0a1F4l73/ZFZOakJnQ3FvkJ2+gSTQWz/r2KE5OdDY0TxPm5h4GkqkWWfM47T7HsbnOtcJVEF4epCVy6u7Q3K+g==",
      "dev": true
    },
    "resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true
    },
    "responselike": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/responselike/-/responselike-2.0.1.tgz",
      "integrity": "sha512-4gl03wn3hj1HP3yzgdI7d3lCkF95F21Pz4BPGvKHinyQzALR5CapwC8yIi0Rh58DEMQ/SguC03wFj2k0M/mHhw==",
      "dev": true,
      "requires": {
        "lowercase-keys": "^2.0.0"
      }
    },
    "reusify": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.0.4.tgz",
      "integrity": "sha512-U9nH88a3fc/ekCF1l0/UP1IosiuIjyTh7hBvXVMHYgVcfGvt897Xguj2UOLDeI5BG2m7/uwyaLVT6fbtCwTyzw==",
      "dev": true
    },
    "rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "dev": true,
      "requires": {
        "glob": "^7.1.3"
      }
    },
    "roarr": {
      "version": "2.15.4",
      "resolved": "https://registry.npmjs.org/roarr/-/roarr-2.15.4.tgz",
      "integrity": "sha512-CHhPh+UNHD2GTXNYhPWLnU8ONHdI+5DI+4EYIAOaiD63rHeYlZvyh8P+in5999TTSFgUYuKUAjzRI4mdh/p+2A==",
      "dev": true,
      "optional": true,
      "requires": {
        "boolean": "^3.0.1",
        "detect-node": "^2.0.4",
        "globalthis": "^1.0.1",
        "json-stringify-safe": "^5.0.1",
        "semver-compare": "^1.0.0",
        "sprintf-js": "^1.1.2"
      }
    },
    "rollup": {
      "version": "3.12.1",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-3.12.1.tgz",
      "integrity": "sha512-t9elERrz2i4UU9z7AwISj3CQcXP39cWxgRWLdf4Tm6aKm1eYrqHIgjzXBgb67GNY1sZckTFFi0oMozh3/S++Ig==",
      "dev": true,
      "requires": {
        "fsevents": "~2.3.2"
      }
    },
    "run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "requires": {
        "queue-microtask": "^1.2.2"
      }
    },
    "rxjs": {
      "version": "7.5.5",
      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.5.5.tgz",
      "integrity": "sha512-sy+H0pQofO95VDmFLzyaw9xNJU4KTRSwQIGM6+iG3SypAtCiLDzpeG8sJrNCWn2Up9km+KhkvTdbkrdy+yzZdw==",
      "optional": true,
      "requires": {
        "tslib": "^2.1.0"
      }
    },
    "safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "dev": true
    },
    "sanitize-filename": {
      "version": "1.6.3",
      "resolved": "https://registry.npmjs.org/sanitize-filename/-/sanitize-filename-1.6.3.tgz",
      "integrity": "sha512-y/52Mcy7aw3gRm7IrcGDFx/bCk4AhRh2eI9luHOQM86nZsqwiRkkq2GekHXBBD+SmPidc8i2PqtYZl+pWJ8Oeg==",
      "dev": true,
      "requires": {
        "truncate-utf8-bytes": "^1.0.0"
      }
    },
    "sax": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/sax/-/sax-1.2.4.tgz",
      "integrity": "sha512-NqVDv9TpANUjFm0N8uM5GxL36UgKi9/atZw+x7YFnQ8ckwFGKrl4xX4yWtrey3UJm5nP1kUbnYgLopqWNSRhWw=="
    },
    "semver": {
      "version": "7.3.7",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.3.7.tgz",
      "integrity": "sha512-QlYTucUYOews+WeEujDoEGziz4K6c47V/Bd+LjSSYcA94p+DmINdf7ncaUinThfvZyu13lN9OY1XDxt8C0Tw0g==",
      "requires": {
        "lru-cache": "^6.0.0"
      }
    },
    "semver-compare": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/semver-compare/-/semver-compare-1.0.0.tgz",
      "integrity": "sha512-YM3/ITh2MJ5MtzaM429anh+x2jiLVjqILF4m4oyQB18W7Ggea7BfqdH/wGMK7dDiMghv/6WG7znWMwUDzJiXow==",
      "dev": true,
      "optional": true
    },
    "serialize-error": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/serialize-error/-/serialize-error-7.0.1.tgz",
      "integrity": "sha512-8I8TjW5KMOKsZQTvoxjuSIa7foAwPWGOts+6o7sgjz41/qMD9VQHEDxi6PBvK2l0MXUmqZyNpUK+T2tQaaElvw==",
      "dev": true,
      "optional": true,
      "requires": {
        "type-fest": "^0.13.1"
      },
      "dependencies": {
        "type-fest": {
          "version": "0.13.1",
          "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.13.1.tgz",
          "integrity": "sha512-34R7HTnG0XIJcBSn5XhDd7nNFPRcXYRZrBB2O2jdKqYODldSzBAqzsWoZYYvduky73toYS/ESqxPvkDf/F0XMg==",
          "dev": true,
          "optional": true
        }
      }
    },
    "shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "requires": {
        "shebang-regex": "^3.0.0"
      }
    },
    "shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true
    },
    "siginfo": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
      "dev": true
    },
    "sigmund": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/sigmund/-/sigmund-1.0.1.tgz",
      "integrity": "sha512-fCvEXfh6NWpm+YSuY2bpXb/VIihqWA6hLsgboC+0nl71Q7N7o2eaCW8mJa/NLvQhs6jpd3VZV4UiUQlV6+lc8g==",
      "dev": true
    },
    "simple-git-hooks": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/simple-git-hooks/-/simple-git-hooks-2.8.1.tgz",
      "integrity": "sha512-DYpcVR1AGtSfFUNzlBdHrQGPsOhuuEJ/FkmPOOlFysP60AHd3nsEpkGq/QEOdtUyT1Qhk7w9oLmFoMG+75BDog==",
      "dev": true
    },
    "simple-update-notifier": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-1.0.7.tgz",
      "integrity": "sha512-BBKgR84BJQJm6WjWFMHgLVuo61FBDSj1z/xSFUIozqO6wO7ii0JxCqlIud7Enr/+LhlbNI0whErq96P2qHNWew==",
      "dev": true,
      "requires": {
        "semver": "~7.0.0"
      },
      "dependencies": {
        "semver": {
          "version": "7.0.0",
          "resolved": "https://registry.npmjs.org/semver/-/semver-7.0.0.tgz",
          "integrity": "sha512-+GB6zVA9LWh6zovYQLALHwv5rb2PHGlJi3lfiqIHxR0uuwCgefcOJc59v9fv1w8GbStwxuuqqAjI9NMAOOgq1A==",
          "dev": true
        }
      }
    },
    "slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true
    },
    "slice-ansi": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-3.0.0.tgz",
      "integrity": "sha512-pSyv7bSTC7ig9Dcgbw9AuRNUb5k5V6oDudjZoMBSr13qpLBG7tB+zgCkARjq7xIUgdz5P1Qe8u+rSGdouOOIyQ==",
      "dev": true,
      "optional": true,
      "requires": {
        "ansi-styles": "^4.0.0",
        "astral-regex": "^2.0.0",
        "is-fullwidth-code-point": "^3.0.0"
      }
    },
    "smart-buffer": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/smart-buffer/-/smart-buffer-4.2.0.tgz",
      "integrity": "sha512-94hK0Hh8rPqQl2xXc3HsaBoOXKV20MToPkcXvwbISWLEs+64sBq5kFgn2kJDHb1Pry9yrP0dxrCI9RRci7RXKg==",
      "dev": true,
      "optional": true
    },
    "source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true
    },
    "source-map-js": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.0.2.tgz",
      "integrity": "sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==",
      "dev": true
    },
    "source-map-support": {
      "version": "0.5.21",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
      "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
      "dev": true,
      "requires": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "sourcemap-codec": {
      "version": "1.4.8",
      "resolved": "https://registry.npmjs.org/sourcemap-codec/-/sourcemap-codec-1.4.8.tgz",
      "integrity": "sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==",
      "dev": true
    },
    "sprintf-js": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.1.2.tgz",
      "integrity": "sha512-VE0SOVEHCk7Qc8ulkWw3ntAzXuqf7S2lvwQaDLRnUeIEaKNQJzV6BwmLKhOqT61aGhfUMrXeaBk+oDGCzvhcug==",
      "dev": true,
      "optional": true
    },
    "stackback": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
      "dev": true
    },
    "stat-mode": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/stat-mode/-/stat-mode-1.0.0.tgz",
      "integrity": "sha512-jH9EhtKIjuXZ2cWxmXS8ZP80XyC3iasQxMDV8jzhNJpfDb7VbQLVW4Wvsxz9QZvzV+G4YoSfBUVKDOyxLzi/sg==",
      "dev": true
    },
    "std-env": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.3.1.tgz",
      "integrity": "sha512-3H20QlwQsSm2OvAxWIYhs+j01MzzqwMwGiiO1NQaJYZgJZFPuAbf95/DiKRBSTYIJ2FeGUc+B/6mPGcWP9dO3Q==",
      "dev": true
    },
    "string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "requires": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      }
    },
    "strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "requires": {
        "ansi-regex": "^5.0.1"
      }
    },
    "strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true
    },
    "strip-literal": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/strip-literal/-/strip-literal-1.0.0.tgz",
      "integrity": "sha512-5o4LsH1lzBzO9UFH63AJ2ad2/S2AVx6NtjOcaz+VTT2h1RiRvbipW72z8M/lxEhcPHDBQwpDrnTF7sXy/7OwCQ==",
      "dev": true,
      "requires": {
        "acorn": "^8.8.1"
      }
    },
    "sumchecker": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/sumchecker/-/sumchecker-3.0.1.tgz",
      "integrity": "sha512-MvjXzkz/BOfyVDkG0oFOtBxHX2u3gKbMHIF/dXblZsgD3BWOFLmHovIpZY7BykJdAjcqRCBi1WYBNdEC9yI7vg==",
      "dev": true,
      "requires": {
        "debug": "^4.1.0"
      }
    },
    "supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "requires": {
        "has-flag": "^4.0.0"
      }
    },
    "supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true
    },
    "tar": {
      "version": "6.1.11",
      "resolved": "https://registry.npmjs.org/tar/-/tar-6.1.11.tgz",
      "integrity": "sha512-an/KZQzQUkZCkuoAA64hM92X0Urb6VpRhAFllDzz44U2mcD5scmT3zBc4VgVpkugF580+DQn8eAFSyoQt0tznA==",
      "dev": true,
      "requires": {
        "chownr": "^2.0.0",
        "fs-minipass": "^2.0.0",
        "minipass": "^3.0.0",
        "minizlib": "^2.1.1",
        "mkdirp": "^1.0.3",
        "yallist": "^4.0.0"
      },
      "dependencies": {
        "mkdirp": {
          "version": "1.0.4",
          "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-1.0.4.tgz",
          "integrity": "sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==",
          "dev": true
        }
      }
    },
    "temp-file": {
      "version": "3.4.0",
      "resolved": "https://registry.npmjs.org/temp-file/-/temp-file-3.4.0.tgz",
      "integrity": "sha512-C5tjlC/HCtVUOi3KWVokd4vHVViOmGjtLwIh4MuzPo/nMYTV/p1urt3RnMz2IWXDdKEGJH3k5+KPxtqRsUYGtg==",
      "dev": true,
      "requires": {
        "async-exit-hook": "^2.0.1",
        "fs-extra": "^10.0.0"
      },
      "dependencies": {
        "fs-extra": {
          "version": "10.1.0",
          "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
          "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.2.0",
            "jsonfile": "^6.0.1",
            "universalify": "^2.0.0"
          }
        },
        "jsonfile": {
          "version": "6.1.0",
          "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.1.0.tgz",
          "integrity": "sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==",
          "dev": true,
          "requires": {
            "graceful-fs": "^4.1.6",
            "universalify": "^2.0.0"
          }
        },
        "universalify": {
          "version": "2.0.0",
          "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.0.tgz",
          "integrity": "sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==",
          "dev": true
        }
      }
    },
    "text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha1-f17oI66AUgfACvLfSoTsP8+lcLQ=",
      "dev": true
    },
    "tinybench": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.3.1.tgz",
      "integrity": "sha512-hGYWYBMPr7p4g5IarQE7XhlyWveh1EKhy4wUBS1LrHXCKYgvz+4/jCqgmJqZxxldesn05vccrtME2RLLZNW7iA==",
      "dev": true
    },
    "tinypool": {
      "version": "0.3.1",
      "resolved": "https://registry.npmjs.org/tinypool/-/tinypool-0.3.1.tgz",
      "integrity": "sha512-zLA1ZXlstbU2rlpA4CIeVaqvWq41MTWqLY3FfsAXgC8+f7Pk7zroaJQxDgxn1xNudKW6Kmj4808rPFShUlIRmQ==",
      "dev": true
    },
    "tinyspy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/tinyspy/-/tinyspy-1.0.2.tgz",
      "integrity": "sha512-bSGlgwLBYf7PnUsQ6WOc6SJ3pGOcd+d8AA6EUnLDDM0kWEstC1JIlSZA3UNliDXhd9ABoS7hiRBDCu+XP/sf1Q==",
      "dev": true
    },
    "tmp": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.1.tgz",
      "integrity": "sha512-76SUhtfqR2Ijn+xllcI5P1oyannHNHByD80W1q447gU3mp9G9PSpGdWmjUOHRDPiHYacIk66W7ubDTuPF3BEtQ==",
      "dev": true,
      "requires": {
        "rimraf": "^3.0.0"
      }
    },
    "tmp-promise": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/tmp-promise/-/tmp-promise-3.0.3.tgz",
      "integrity": "sha512-RwM7MoPojPxsOBYnyd2hy0bxtIlVrihNs9pj5SUvY8Zz1sQcQG2tG1hSr8PDxfgEB8RNKDhqbIlroIarSNDNsQ==",
      "dev": true,
      "requires": {
        "tmp": "^0.2.0"
      }
    },
    "to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "requires": {
        "is-number": "^7.0.0"
      }
    },
    "tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha1-gYT9NH2snNwYWZLzpmIuFLnZq2o=",
      "dev": true
    },
    "truncate-utf8-bytes": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
      "integrity": "sha1-QFkjkJWS1W94pYGENLC3hInKXys=",
      "dev": true,
      "requires": {
        "utf8-byte-length": "^1.0.1"
      }
    },
    "tslib": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.3.1.tgz",
      "integrity": "sha512-77EbyPPpMz+FRFRuAFlWMtmgUWGe9UOG2Z25NqCwiIjRhOf5iKGuzSe5P2w1laq+FkRy4p+PCuVkJSGkzTEKVw==",
      "optional": true
    },
    "tsutils": {
      "version": "3.21.0",
      "resolved": "https://registry.npmjs.org/tsutils/-/tsutils-3.21.0.tgz",
      "integrity": "sha512-mHKK3iUXL+3UF6xL5k0PEhKRUBKPBCv/+RkEOpjRWxxx27KKRBmmA60A9pgOUvMi8GKhRMPEmjBRPzs2W7O1OA==",
      "dev": true,
      "requires": {
        "tslib": "^1.8.1"
      },
      "dependencies": {
        "tslib": {
          "version": "1.14.1",
          "resolved": "https://registry.npmjs.org/tslib/-/tslib-1.14.1.tgz",
          "integrity": "sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==",
          "dev": true
        }
      }
    },
    "type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "requires": {
        "prelude-ls": "^1.2.1"
      }
    },
    "type-detect": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/type-detect/-/type-detect-4.0.8.tgz",
      "integrity": "sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==",
      "dev": true
    },
    "type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true
    },
    "typed-emitter": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/typed-emitter/-/typed-emitter-2.1.0.tgz",
      "integrity": "sha512-g/KzbYKbH5C2vPkaXGu8DJlHrGKHLsM25Zg9WuC9pMGfuvT+X25tZQWo5fK1BjBm8+UrVE9LDCvaY0CQk+fXDA==",
      "requires": {
        "rxjs": "*"
      }
    },
    "typescript": {
      "version": "4.9.5",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-4.9.5.tgz",
      "integrity": "sha512-1FXk9E2Hm+QzZQ7z+McJiHL4NW1F2EzMu9Nq9i3zAaGqibafqYwCVU6WyWAuyQRRzOlxou8xZSyXLEN8oKj24g==",
      "dev": true
    },
    "ufo": {
      "version": "0.8.5",
      "resolved": "https://registry.npmjs.org/ufo/-/ufo-0.8.5.tgz",
      "integrity": "sha512-e4+UtA5IRO+ha6hYklwj6r7BjiGMxS0O+UaSg9HbaTefg4kMkzj4tXzEBajRR+wkxf+golgAWKzLbytCUDMJAA==",
      "dev": true
    },
    "universalify": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-0.1.2.tgz",
      "integrity": "sha512-rBJeI5CXAlmy1pV+617WB9J63U6XcazHHF2f2dbJix4XzpUF0RS3Zbj0FGIOCAva5P/d/GBOYaACQ1w+0azUkg==",
      "dev": true
    },
    "unplugin": {
      "version": "0.10.2",
      "resolved": "https://registry.npmjs.org/unplugin/-/unplugin-0.10.2.tgz",
      "integrity": "sha512-6rk7GUa4ICYjae5PrAllvcDeuT8pA9+j5J5EkxbMFaV+SalHhxZ7X2dohMzu6C3XzsMT+6jwR/+pwPNR3uK9MA==",
      "dev": true,
      "requires": {
        "acorn": "^8.8.0",
        "chokidar": "^3.5.3",
        "webpack-sources": "^3.2.3",
        "webpack-virtual-modules": "^0.4.5"
      }
    },
    "unplugin-auto-expose": {
      "version": "0.0.4",
      "resolved": "https://registry.npmjs.org/unplugin-auto-expose/-/unplugin-auto-expose-0.0.4.tgz",
      "integrity": "sha512-TMkcJll/FODZW3+O/H/caZg+C5TUdMgu20xvB/YKqVpGjpbxaInSlAZrcKh8ifpCY6V+aMKQ4ubiEVJ87Otlog==",
      "dev": true,
      "requires": {
        "magic-string": "^0.26.7",
        "mlly": "0.5.16",
        "unplugin": "0.10.2"
      },
      "dependencies": {
        "magic-string": {
          "version": "0.26.7",
          "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.26.7.tgz",
          "integrity": "sha512-hX9XH3ziStPoPhJxLq1syWuZMxbDvGNbVchfrdCtanC7D13888bMFow61x8axrx+GfHLtVeAx2kxL7tTGRl+Ow==",
          "dev": true,
          "requires": {
            "sourcemap-codec": "^1.4.8"
          }
        }
      }
    },
    "uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "requires": {
        "punycode": "^2.1.0"
      }
    },
    "utf8-byte-length": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/utf8-byte-length/-/utf8-byte-length-1.0.4.tgz",
      "integrity": "sha1-9F8VDExm7uloGGUFq5P8u4rWv2E=",
      "dev": true
    },
    "util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha1-RQ1Nyfpw3nMnYvvS1KKJgUGaDM8=",
      "dev": true
    },
    "verror": {
      "version": "1.10.1",
      "resolved": "https://registry.npmjs.org/verror/-/verror-1.10.1.tgz",
      "integrity": "sha512-veufcmxri4e3XSrT0xwfUR7kguIkaxBeosDg00yDWhk49wdwkSUrvvsm7nc75e1PUyvIeZj6nS8VQRYz2/S4Xg==",
      "dev": true,
      "optional": true,
      "requires": {
        "assert-plus": "^1.0.0",
        "core-util-is": "1.0.2",
        "extsprintf": "^1.2.0"
      },
      "dependencies": {
        "core-util-is": {
          "version": "1.0.2",
          "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.2.tgz",
          "integrity": "sha512-3lqz5YjWTYnW6dlDa5TLaTCcShfar1e40rmcJVwCBJC6mWlFuj0eCHIElmG1g5kyuJ/GD+8Wn4FFCcz4gJPfaQ==",
          "dev": true,
          "optional": true
        }
      }
    },
    "vite": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/vite/-/vite-4.1.4.tgz",
      "integrity": "sha512-3knk/HsbSTKEin43zHu7jTwYWv81f8kgAL99G5NWBcA1LKvtvcVAC4JjBH1arBunO9kQka+1oGbrMKOjk4ZrBg==",
      "dev": true,
      "requires": {
        "esbuild": "^0.16.14",
        "fsevents": "~2.3.2",
        "postcss": "^8.4.21",
        "resolve": "^1.22.1",
        "rollup": "^3.10.0"
      }
    },
    "vite-node": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/vite-node/-/vite-node-0.29.3.tgz",
      "integrity": "sha512-QYzYSA4Yt2IiduEjYbccfZQfxKp+T1Do8/HEpSX/G5WIECTFKJADwLs9c94aQH4o0A+UtCKU61lj1m5KvbxxQA==",
      "dev": true,
      "requires": {
        "cac": "^6.7.14",
        "debug": "^4.3.4",
        "mlly": "^1.1.0",
        "pathe": "^1.1.0",
        "picocolors": "^1.0.0",
        "vite": "^3.0.0 || ^4.0.0"
      },
      "dependencies": {
        "mlly": {
          "version": "1.1.0",
          "resolved": "https://registry.npmjs.org/mlly/-/mlly-1.1.0.tgz",
          "integrity": "sha512-cwzBrBfwGC1gYJyfcy8TcZU1f+dbH/T+TuOhtYP2wLv/Fb51/uV7HJQfBPtEupZ2ORLRU1EKFS/QfS3eo9+kBQ==",
          "dev": true,
          "requires": {
            "acorn": "^8.8.1",
            "pathe": "^1.0.0",
            "pkg-types": "^1.0.1",
            "ufo": "^1.0.1"
          }
        },
        "pathe": {
          "version": "1.1.0",
          "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
          "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
          "dev": true
        },
        "pkg-types": {
          "version": "1.0.1",
          "resolved": "https://registry.npmjs.org/pkg-types/-/pkg-types-1.0.1.tgz",
          "integrity": "sha512-jHv9HB+Ho7dj6ItwppRDDl0iZRYBD0jsakHXtFgoLr+cHSF6xC+QL54sJmWxyGxOLYSHm0afhXhXcQDQqH9z8g==",
          "dev": true,
          "requires": {
            "jsonc-parser": "^3.2.0",
            "mlly": "^1.0.0",
            "pathe": "^1.0.0"
          }
        },
        "ufo": {
          "version": "1.0.1",
          "resolved": "https://registry.npmjs.org/ufo/-/ufo-1.0.1.tgz",
          "integrity": "sha512-boAm74ubXHY7KJQZLlXrtMz52qFvpsbOxDcZOnw/Wf+LS4Mmyu7JxmzD4tDLtUQtmZECypJ0FrCz4QIe6dvKRA==",
          "dev": true
        }
      }
    },
    "vitest": {
      "version": "0.29.3",
      "resolved": "https://registry.npmjs.org/vitest/-/vitest-0.29.3.tgz",
      "integrity": "sha512-muMsbXnZsrzDGiyqf/09BKQsGeUxxlyLeLK/sFFM4EXdURPQRv8y7dco32DXaRORYP0bvyN19C835dT23mL0ow==",
      "dev": true,
      "requires": {
        "@types/chai": "^4.3.4",
        "@types/chai-subset": "^1.3.3",
        "@types/node": "*",
        "@vitest/expect": "0.29.3",
        "@vitest/runner": "0.29.3",
        "@vitest/spy": "0.29.3",
        "@vitest/utils": "0.29.3",
        "acorn": "^8.8.1",
        "acorn-walk": "^8.2.0",
        "cac": "^6.7.14",
        "chai": "^4.3.7",
        "debug": "^4.3.4",
        "local-pkg": "^0.4.2",
        "pathe": "^1.1.0",
        "picocolors": "^1.0.0",
        "source-map": "^0.6.1",
        "std-env": "^3.3.1",
        "strip-literal": "^1.0.0",
        "tinybench": "^2.3.1",
        "tinypool": "^0.3.1",
        "tinyspy": "^1.0.2",
        "vite": "^3.0.0 || ^4.0.0",
        "vite-node": "0.29.3",
        "why-is-node-running": "^2.2.2"
      },
      "dependencies": {
        "pathe": {
          "version": "1.1.0",
          "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.0.tgz",
          "integrity": "sha512-ODbEPR0KKHqECXW1GoxdDb+AZvULmXjVPy4rt+pGo2+TnjJTIPJQSVS6N63n8T2Ip+syHhbn52OewKicV0373w==",
          "dev": true
        }
      }
    },
    "vue": {
      "version": "3.2.47",
      "resolved": "https://registry.npmjs.org/vue/-/vue-3.2.47.tgz",
      "integrity": "sha512-60188y/9Dc9WVrAZeUVSDxRQOZ+z+y5nO2ts9jWXSTkMvayiWxCWOWtBQoYjLeccfXkiiPZWAHcV+WTPhkqJHQ==",
      "dev": true,
      "requires": {
        "@vue/compiler-dom": "3.2.47",
        "@vue/compiler-sfc": "3.2.47",
        "@vue/runtime-dom": "3.2.47",
        "@vue/server-renderer": "3.2.47",
        "@vue/shared": "3.2.47"
      }
    },
    "vue-eslint-parser": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/vue-eslint-parser/-/vue-eslint-parser-9.0.2.tgz",
      "integrity": "sha512-uCPQwTGjOtAYrwnU+76pYxalhjsh7iFBsHwBqDHiOPTxtICDaraO4Szw54WFTNZTAEsgHHzqFOu1mmnBOBRzDA==",
      "dev": true,
      "requires": {
        "debug": "^4.3.4",
        "eslint-scope": "^7.1.1",
        "eslint-visitor-keys": "^3.3.0",
        "espree": "^9.3.1",
        "esquery": "^1.4.0",
        "lodash": "^4.17.21",
        "semver": "^7.3.6"
      },
      "dependencies": {
        "eslint-scope": {
          "version": "7.1.1",
          "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.1.1.tgz",
          "integrity": "sha512-QKQM/UXpIiHcLqJ5AOyIW7XZmzjkzQXYE54n1++wb0u9V/abW3l9uQnxX8Z5Xd18xyKIMTUAyQ0k1e8pz6LUrw==",
          "dev": true,
          "requires": {
            "esrecurse": "^4.3.0",
            "estraverse": "^5.2.0"
          }
        },
        "estraverse": {
          "version": "5.3.0",
          "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
          "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
          "dev": true
        }
      }
    },
    "vue-template-compiler": {
      "version": "2.7.14",
      "resolved": "https://registry.npmjs.org/vue-template-compiler/-/vue-template-compiler-2.7.14.tgz",
      "integrity": "sha512-zyA5Y3ArvVG0NacJDkkzJuPQDF8RFeRlzV2vLeSnhSpieO6LK2OVbdLPi5MPPs09Ii+gMO8nY4S3iKQxBxDmWQ==",
      "dev": true,
      "requires": {
        "de-indent": "^1.0.2",
        "he": "^1.2.0"
      }
    },
    "vue-tsc": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/vue-tsc/-/vue-tsc-1.2.0.tgz",
      "integrity": "sha512-rIlzqdrhyPYyLG9zxsVRa+JEseeS9s8F2BbVVVWRRsTZvJO2BbhLEb2HW3MY+DFma0378tnIqs+vfTzbcQtRFw==",
      "dev": true,
      "requires": {
        "@volar/vue-language-core": "1.2.0",
        "@volar/vue-typescript": "1.2.0"
      }
    },
    "webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "dev": true
    },
    "webpack-sources": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/webpack-sources/-/webpack-sources-3.2.3.tgz",
      "integrity": "sha512-/DyMEOrDgLKKIG0fmvtz+4dUX/3Ghozwgm6iPp8KRhvn+eQf9+Q7GWxVNMk3+uCPWfdXYC4ExGBckIXdFEfH1w==",
      "dev": true
    },
    "webpack-virtual-modules": {
      "version": "0.4.6",
      "resolved": "https://registry.npmjs.org/webpack-virtual-modules/-/webpack-virtual-modules-0.4.6.tgz",
      "integrity": "sha512-5tyDlKLqPfMqjT3Q9TAqf2YqjwmnUleZwzJi1A5qXnlBCdj2AtOJ6wAWdglTIDOPgOiOrXeBeFcsQ8+aGQ6QbA==",
      "dev": true
    },
    "whatwg-encoding": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-2.0.0.tgz",
      "integrity": "sha512-p41ogyeMUrw3jWclHWTQg1k05DSVXPLcVxRTYsXUk+ZooOCZLcoYgPZ/HL/D/N+uQPOtcp1me1WhBEaX02mhWg==",
      "dev": true,
      "requires": {
        "iconv-lite": "0.6.3"
      }
    },
    "whatwg-mimetype": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-3.0.0.tgz",
      "integrity": "sha512-nt+N2dzIutVRxARx1nghPKGv1xHikU7HKdfafKkLNLindmPU/ch3U31NOCGGA/dmPcmb1VlofO0vnKAcsm0o/Q==",
      "dev": true
    },
    "whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha1-lmRU6HZUYuN2RNNib2dCzotwll0=",
      "dev": true,
      "requires": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      },
      "dependencies": {
        "webidl-conversions": {
          "version": "3.0.1",
          "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
          "integrity": "sha1-JFNCdeKnvGvnvIZhHMFq4KVlSHE=",
          "dev": true
        }
      }
    },
    "which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "requires": {
        "isexe": "^2.0.0"
      }
    },
    "why-is-node-running": {
      "version": "2.2.2",
      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.2.2.tgz",
      "integrity": "sha512-6tSwToZxTOcotxHeA+qGCq1mVzKR3CwcJGmVcY+QE8SHy6TnpFnh8PAvPNHYr7EcuVeG0QSMxtYCuO1ta/G/oA==",
      "dev": true,
      "requires": {
        "siginfo": "^2.0.0",
        "stackback": "0.0.2"
      }
    },
    "word-wrap": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.3.tgz",
      "integrity": "sha512-Hz/mrNwitNRh/HUAtM/VT/5VH+ygD6DV7mYKZAtHOrbs8U7lvPS6xf7EJKMF0uW1KJCl0H701g3ZGus+muE5vQ==",
      "dev": true
    },
    "wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "requires": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      }
    },
    "wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha1-tSQ9jz7BqjXxNkYFvA0QNuMKtp8=",
      "dev": true
    },
    "xml-name-validator": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-4.0.0.tgz",
      "integrity": "sha512-ICP2e+jsHvAj2E2lIHxa5tjXRlKDJo4IdvPvCXbXQGdzSfmSpNVyIKMvoZHjDY9DP0zV17iI85o90vRFXNccRw==",
      "dev": true
    },
    "xmlbuilder": {
      "version": "15.1.1",
      "resolved": "https://registry.npmjs.org/xmlbuilder/-/xmlbuilder-15.1.1.tgz",
      "integrity": "sha512-yMqGBqtXyeN1e3TGYvgNgDVZ3j84W4cwkOXQswghol6APgZWaff9lnbvN7MHYJOiXsvGPXtjTYJEiC9J2wv9Eg==",
      "dev": true,
      "optional": true
    },
    "y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true
    },
    "yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A=="
    },
    "yargs": {
      "version": "17.6.0",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.6.0.tgz",
      "integrity": "sha512-8H/wTDqlSwoSnScvV2N/JHfLWOKuh5MVla9hqLjK3nsfyy6Y4kDSYSvkU5YCUEPOSnRXfIyx3Sq+B/IWudTo4g==",
      "dev": true,
      "requires": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.0.0"
      }
    },
    "yargs-parser": {
      "version": "21.0.0",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.0.0.tgz",
      "integrity": "sha512-z9kApYUOCwoeZ78rfRYYWdiU/iNL6mwwYlkkZfJoyMR1xps+NEBX5X7XmRpxkZHhXJ6+Ey00IwKxBBSW9FIjyA==",
      "dev": true
    },
    "yauzl": {
      "version": "2.10.0",
      "resolved": "https://registry.npmjs.org/yauzl/-/yauzl-2.10.0.tgz",
      "integrity": "sha512-p4a9I6X6nu6IhoGmBqAcbJy1mlC4j27vEPZX9F4L4/vZT3Lyq1VkFHw/V/PUcB9Buo+DG3iHkT0x3Qya58zc3g==",
      "dev": true,
      "requires": {
        "buffer-crc32": "~0.2.3",
        "fd-slicer": "~1.1.0"
      }
    },
    "yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true
    }
  }
}

```

`webapp/package.json`:

```json
{
  "name": "src",
  "description": "StarRailCopilot desktop app",
  "version": "0.4.0",
  "private": true,
  "main": "packages/main/dist/index.cjs",
  "scripts": {
    "build": "npm run build:main && npm run build:preload && npm run build:renderer",
    "build:main": "cd ./packages/main && vite build",
    "build:preload": "cd ./packages/preload && vite build",
    "build:renderer": "cd ./packages/renderer && vite build",
    "compile": "cross-env MODE=production npm run build && electron-builder build --config .electron-builder.config.js --dir",
    "test": "npm run test:main && npm run test:preload && npm run test:renderer && npm run test:e2e",
    "test:e2e": "npm run build && vitest run",
    "test:main": "vitest run -r packages/main --passWithNoTests",
    "test:preload": "vitest run -r packages/preload --passWithNoTests",
    "test:renderer": "vitest run -r packages/renderer --passWithNoTests",
    "watch": "node scripts/watch.mjs",
    "lint": "eslint . --ext js,mjs,cjs,ts,mts,cts,vue",
    "typecheck:main": "tsc --noEmit -p packages/main/tsconfig.json",
    "typecheck:preload": "tsc --noEmit -p packages/preload/tsconfig.json",
    "typecheck:renderer": "vue-tsc --noEmit -p packages/renderer/tsconfig.json",
    "typecheck": "npm run typecheck:main && npm run typecheck:preload && npm run typecheck:renderer",
    "postinstall": "cross-env ELECTRON_RUN_AS_NODE=1 electron scripts/update-electron-vendors.mjs",
    "format": "npx prettier --write \"**/*.{js,mjs,cjs,ts,mts,cts,vue,json}\""
  },
  "devDependencies": {
    "@arco-design/web-vue": "^2.45.2",
    "@arco-plugins/vite-vue": "^1.4.5",
    "@arco-themes/vue-am-alas": "^0.0.1",
    "@intlify/unplugin-vue-i18n": "^0.10.0",
    "@types/fs-extra": "^11.0.1",
    "@types/lodash-es": "^4.17.7",
    "@types/node": "18.15.3",
    "@typescript-eslint/eslint-plugin": "5.55.0",
    "@typescript-eslint/parser": "^5.58.0",
    "@vitejs/plugin-vue": "4.0.0",
    "@vue/test-utils": "2.3.1",
    "consola": "^3.1.0",
    "cross-env": "7.0.3",
    "electron": "22.3.4",
    "electron-builder": "23.6.0",
    "eslint": "8.36.0",
    "eslint-config-prettier": "^8.8.0",
    "eslint-plugin-prettier": "^4.2.1",
    "eslint-plugin-vue": "9.9.0",
    "happy-dom": "8.9.0",
    "less": "^4.1.3",
    "nano-staged": "0.8.0",
    "playwright": "1.31.2",
    "prettier": "^2.8.7",
    "prettier-eslint": "^15.0.1",
    "simple-git-hooks": "2.8.1",
    "ts-node": "^10.9.1",
    "typescript": "4.9.5",
    "unocss": "^0.51.8",
    "unplugin-auto-expose": "0.0.4",
    "unplugin-auto-import": "^0.15.3",
    "unplugin-vue-components": "^0.24.1",
    "vite": "^4.3.1",
    "vite-plugin-style-import": "^2.0.0",
    "vitest": "0.29.3",
    "vue": "^3.2.47",
    "vue-tsc": "1.2.0",
    "vue-types": "^5.0.2"
  },
  "dependencies": {
    "@ant-design/icons-vue": "^6.1.0",
    "@vueuse/core": "^10.0.2",
    "autoprefixer": "^10.4.14",
    "dayjs": "^1.11.7",
    "electron-log": "^4.4.8",
    "electron-updater": "5.3.0",
    "fast-glob": "^3.2.12",
    "fs-extra": "^11.1.1",
    "lodash-es": "^4.17.21",
    "mustache": "^4.2.0",
    "nanoid": "^4.0.2",
    "pinia": "^2.0.34",
    "postcss": "^8.4.21",
    "python-shell": "^5.0.0",
    "tree-kill": "^1.2.2",
    "vue-i18n": "^9.2.2",
    "vue-router": "^4.1.6",
    "yaml": "^2.2.1"
  }
}
```

`webapp/packages/common/constant/config.ts`:

```ts
export const ALAS_CONFIG_YAML = 'deploy.yaml';
export const ALAS_CONFIG_TEMPLATE_YAML = 'deploy.template.yaml';
export const ALAS_CONFIG_TEST_TEMPLATE_YAML = 'deploy.test.template.yaml';
export const ALAS_INSTR_FILE = 'installer.py';
export const ALAS_RELAUNCH_ARGV = '--relaunch';

export const RepositoryMap = {
  china: 'cn',
  global: 'global',
};

export const GitExecutableMap = {
  windows: './toolkit/Git/mingw64/bin/git.exe',
  macos: '/usr/bin/git',
  linux: '/usr/bin/git',
};

export const AdbExecutableMap = {
  windows: './toolkit/Lib/site-packages/adbutils/binaries/adb.exe',
  macos: '/usr/bin/adb',
  linux: '/usr/bin/adb',
};

export const PythonExecutableMap = {
  windows: './toolkit/python.exe',
  macos: '/usr/bin/python',
  linux: '/usr/bin/python',
};

```

`webapp/packages/common/constant/eventNames.ts`:

```ts
export const UPDATE_APP = 'Update app.asar';
export const ALAS_LOG = 'alas-log';
export const ALAS_CONFIG = 'alas-config';
export const WINDOW_READY = 'window-ready';
export const INSTALLER_READY = 'installer-ready';
export const ALAS_READY = 'alas-config-path';
export const ELECTRON_THEME = 'electron-theme';

export const PAGE_ERROR = 'page-error';

```

`webapp/packages/common/constant/theme.ts`:

```ts
export const ThemeObj: {[k in string]: 'light' | 'dark'} = {
  default: 'light',
  light: 'light',
  dark: 'dark',
};

export const AlasGuiTheme = {
  light: 'default',
  dark: 'dark',
};

```

`webapp/packages/common/utils/checkIsFirst.ts`:

```ts
import getAlasABSPath from './getAlasABSPath';
import fs from 'fs';
import {join} from 'path';
import {ALAS_CONFIG_TEMPLATE_YAML, ALAS_CONFIG_TEST_TEMPLATE_YAML} from '../constant/config';
export function checkIsFirst(): boolean {
  const absPath = getAlasABSPath();
  return fs.existsSync(
    join(
      absPath,
      `/config/${import.meta.env.DEV ? ALAS_CONFIG_TEST_TEMPLATE_YAML : ALAS_CONFIG_TEMPLATE_YAML}`,
    ),
  );
}

```

`webapp/packages/common/utils/copyFilesToDir.ts`:

```ts
import type {CopyOptions} from 'fs-extra';
import fsExtra from 'fs-extra';
import {join, sep, normalize} from 'path';

export interface CopyToDirOptions {
  successCallback?: (pathStr: string) => void;
  filedCallback?: (pathStr: string, error: any) => void;
  fsExtraOptions?: CopyOptions;
}

/**
 *
 * @param pathList
 * @param targetDirPath
 * @param options
 */
export async function copyFilesToDir(
  pathList: string[],
  targetDirPath: string,
  options?: CopyToDirOptions | undefined,
) {
  const {fsExtraOptions, successCallback, filedCallback} = options || {};
  for (const pathStr of pathList) {
    try {
      await fsExtra.copy(
        pathStr,
        join(normalize(targetDirPath) + sep + pathStr.split(sep).pop()),
        fsExtraOptions,
      );
      successCallback?.(pathStr);
    } catch (err) {
      filedCallback?.(pathStr, err);
    }
  }
}

```

`webapp/packages/common/utils/env.ts`:

```ts
export const isWindows = process.platform === 'win32';
export const isMacintosh = process.platform === 'darwin';
export const isLinux = process.platform === 'linux';

```

`webapp/packages/common/utils/getAlasABSPath.ts`:

```ts
import {app} from 'electron';
import {isMacintosh} from './env';
import fs from 'fs';
/**
 * Get the absolute path of the project root directory
 * @param files
 * @param rootName
 */
const getAlasABSPath = (
  files: string[] = ['**/config/deploy.yaml', '**/config/deploy.template.yaml'],
  rootName: string | string[] = ['AzurLaneAutoScript', 'Alas', 'StarRailCopilot'],
) => {
  const path = require('path');
  const sep = path.sep;
  const fg = require('fast-glob');
  let appAbsPath = process.cwd();
  if (isMacintosh && import.meta.env.PROD) {
    appAbsPath = app?.getAppPath() || process.execPath;
  }

  while (fs.lstatSync(appAbsPath).isFile()) {
    appAbsPath = appAbsPath.split(sep).slice(0, -1).join(sep);
  }

  let alasABSPath = '';

  let hasRootName = false;

  if (typeof rootName === 'string') {
    hasRootName = appAbsPath.includes(rootName);
  } else if (Array.isArray(rootName)) {
    hasRootName = rootName.some(item =>
      appAbsPath.toLocaleLowerCase().includes(item.toLocaleLowerCase()),
    );
  }

  if (hasRootName) {
    const appAbsPathArr = appAbsPath.split(sep);
    let flag = false;
    while (hasRootName && !flag) {
      const entries = fg.sync(files, {
        dot: true,
        cwd: appAbsPathArr.join(sep) as string,
      });
      if (entries.length > 0) {
        flag = true;
        alasABSPath = appAbsPathArr.join(sep);
      }
      appAbsPathArr.pop();
    }
  } else {
    let step = 4;
    const appAbsPathArr = appAbsPath.split(sep);
    let flag = false;
    while (step > 0 && !flag) {
      appAbsPathArr.pop();
      const entries = fg.sync(files, {
        dot: true,
        cwd: appAbsPathArr.join(sep) as string,
      });
      if (entries.length > 0) {
        flag = true;
        alasABSPath = appAbsPathArr.join(sep);
      }
      step--;
    }
  }

  return alasABSPath.endsWith(sep) ? alasABSPath : alasABSPath + sep;
};

export default getAlasABSPath;

```

`webapp/packages/common/utils/index.ts`:

```ts
import getAlasABSPath from './getAlasABSPath';
import {checkIsFirst} from './checkIsFirst';
import {copyFilesToDir} from './copyFilesToDir';
import {modifyYaml} from './modifyYaml';
import {isMacintosh, isLinux, isWindows} from './env';

export {getAlasABSPath, checkIsFirst, copyFilesToDir, modifyYaml, isWindows, isLinux, isMacintosh};

```

`webapp/packages/common/utils/modifyYaml.ts`:

```ts
import type {Pair} from 'yaml';
import {parseDocument, visit} from 'yaml';

const fs = require('fs');
/**
 * Modify yaml file https://eemeli.org/yaml/#modifying-nodes
 * @param filePath
 * @param keyObj
 */
export function modifyYaml(filePath: string, keyObj: {[k in string]: any}) {
  try {
    const doc = parseDocument(fs.readFileSync(filePath, 'utf8'));
    const keysMap = new Map(Object.entries(keyObj));
    visit(doc, {
      Pair: (_node, pair: Pair<any, any>) => {
        if (keysMap.has(pair?.key?.value)) {
          pair.value.value = keysMap.get(pair.key.value);
        }
      },
    });
    fs.writeFileSync(filePath, doc.toString(), 'utf8');
  } catch (e) {
    console.error(e);
  }
}

```

`webapp/packages/common/utils/validate.ts`:

```ts
import fsExtra from 'fs-extra';
import {join} from 'path';
import {
  AdbExecutableMap,
  ALAS_CONFIG_TEMPLATE_YAML,
  ALAS_CONFIG_YAML,
  GitExecutableMap,
  PythonExecutableMap,
  RepositoryMap,
} from '../constant/config';
// eslint-disable-next-line @typescript-eslint/ban-ts-comment
// @ts-ignore
import mustache from 'mustache';
import {isMacintosh} from './env';
import {app} from 'electron';

/**
 * 校验配置文件是否存在  不存在则根据系统版本，语言环境进行创建
 * @param dirPath
 */
export function validateConfigFile(dirPath: string) {
  const targetPath = join(dirPath, ALAS_CONFIG_YAML);
  const result = fsExtra.existsSync(targetPath);
  if (result) return true;
  /**
   * TODO 创建配置文件
   */
  fsExtra.ensureFileSync(targetPath);
  const resultTpl = fsExtra.existsSync(join(dirPath, ALAS_CONFIG_TEMPLATE_YAML));
  if (resultTpl) {
    fsExtra.copyFileSync(join(dirPath, ALAS_CONFIG_TEMPLATE_YAML), join(dirPath, ALAS_CONFIG_YAML));
    return true;
  }
  const tpl = fsExtra.readFileSync('./deploy.yaml.tpl', {encoding: 'utf-8'});
  const system = isMacintosh ? 'macos' : 'windows';
  const localCode = app.getLocaleCountryCode().toLocaleLowerCase();
  let local: 'global' | 'china' = 'global';
  if (localCode === 'cn') {
    local = 'china';
  }
  const deployTpl = mustache.render(tpl, {
    repository: RepositoryMap[local],
    gitExecutable: GitExecutableMap[system],
    pythonExecutable: PythonExecutableMap[system],
    adbExecutable: AdbExecutableMap[system],
    language: local === 'china' ? 'zh-CN' : 'en-US',
    theme: 'default',
  });
  fsExtra.writeFileSync(targetPath, deployTpl, {encoding: 'utf-8'});
  return true;
}

```

`webapp/packages/main/public/deploy.yaml.tpl`:

```tpl
Deploy:
  Git:
    # URL of AzurLaneAutoScript repository
    # [CN user] Use 'cn' to get update from git-over-cdn service
    # [Other] Use 'global' to get update from https://github.com/LmeSzinc/StarRailCopilot
    Repository: {{repository}}
    # Branch of Alas
    # [Developer] Use 'dev', 'app', etc, to try new features
    # [Other] Use 'master', the stable branch
    Branch: master
    # Filepath of git executable `git.exe`
    # [Easy installer] Use './toolkit/Git/mingw64/bin/git.exe'
    # [Other] Use you own git
    GitExecutable: {{gitExecutable}}
    # Set git proxy
    # [CN user] Use your local http proxy (http://127.0.0.1:{port}) or socks5 proxy (socks5://127.0.0.1:{port})
    # [Other] Use null
    GitProxy: null
    # Set SSL Verify
    # [In most cases] Use true
    # [Other] Use false to when connected to an untrusted network
    SSLVerify: true
    # Update Alas at startup
    # [In most cases] Use true
    AutoUpdate: true
    # Whether to keep local changes during update
    # User settings, logs and screenshots will be kept, no mather this is true or false
    # [Developer] Use true, if you modified the code
    # [Other] Use false
    KeepLocalChanges: false

  Python:
    # Filepath of python executable `python.exe`
    # [Easy installer] Use './toolkit/python.exe'
    # [Other] Use you own python, and its version should be 3.7.6 64bit
    PythonExecutable: {{pythonExecutable}}
    # URL of pypi mirror
    # [CN user] Use 'https://pypi.tuna.tsinghua.edu.cn/simple' for faster and more stable download
    # [Other] Use null
    PypiMirror: null
    # Install dependencies at startup
    # [In most cases] Use true
    InstallDependencies: true
    # Path to requirements.txt
    # [In most cases] Use 'requirements.txt'
    # [In AidLux] Use './deploy/AidLux/{version}/requirements.txt', version is default to 0.92
    RequirementsFile: requirements.txt

  Adb:
    # Filepath of ADB executable `adb.exe`
    # [Easy installer] Use './toolkit/Lib/site-packages/adbutils/binaries/adb.exe'
    # [Other] Use you own latest ADB, but not the ADB in your emulator
    AdbExecutable: {{adbExecutable}}
    # Whether to replace ADB
    # Chinese emulators (NoxPlayer, LDPlayer, MemuPlayer, MuMuPlayer) use their own ADB, instead of the latest.
    # Different ADB servers will terminate each other at startup, resulting in disconnection.
    # For compatibility, we have to replace them all.
    # This will do:
    #   1. Terminate current ADB server
    #   2. Rename ADB from all emulators to *.bak and replace them by the AdbExecutable set above
    #   3. Brute-force connect to all available emulator instances
    # [In most cases] Use true
    # [In few cases] Use false, if you have other programs using ADB.
    ReplaceAdb: true
    # Brute-force connect to all available emulator instances
    # [In most cases] Use true
    AutoConnect: true
    # Re-install uiautomator2
    # [In most cases] Use true
    InstallUiautomator2: true

  Ocr:
    # Run Ocr as a service, can reduce memory usage by not import mxnet everytime you start an alas instance

    # Whether to use ocr server
    # [Default] false
    UseOcrServer: false
    # Whether to start ocr server when start GUI
    # [Default] false
    StartOcrServer: false
    # Port of ocr server runs by GUI
    # [Default] 22268
    OcrServerPort: 22268
    # Address of ocr server for alas instance to connect
    # [Default] 127.0.0.1:22268
    OcrClientAddress: 127.0.0.1:22268

  Update:
    # Use auto update and builtin updater feature
    # This may cause problem https://github.com/LmeSzinc/AzurLaneAutoScript/issues/876
    EnableReload: true
    # Check update every X minute
    # [Disable] 0
    # [Default] 5
    CheckUpdateInterval: 5
    # Scheduled restart time
    # If there are updates, Alas will automatically restart and update at this time every day
    # and run all alas instances that running before restarted
    # [Disable] null
    # [Default] 03:50
    AutoRestartTime: 03:50

  Misc:
    # Enable discord rich presence
    DiscordRichPresence: false

  RemoteAccess:
    # Enable remote access (using ssh reverse tunnel serve by https://github.com/wang0618/localshare)
    # ! You need to set Password below to enable remote access since everyone can access to your alas if they have your url.
    # See here (http://app.azurlane.cloud/en.html) for more infomation.
    EnableRemoteAccess: false
    # Username when login into ssh server
    # [Default] null (will generate a random one when startup)
    SSHUser: null
    # Server to connect
    # [Default] null
    # [Format] host:port
    SSHServer: null
    # Filepath of SSH executable `ssh.exe`
    # [Default] ssh (find ssh in system PATH)
    # If you don't have one, install OpenSSH or download it here (https://github.com/PowerShell/Win32-OpenSSH/releases)
    SSHExecutable: ssh

  Webui:
    # --host. Host to listen
    # [Use IPv6] '::'
    # [In most cases] Default to '0.0.0.0'
    WebuiHost: 0.0.0.0
    # --port. Port to listen
    # You will be able to access webui via `http://{host}:{port}`
    # [In most cases] Default to 22367
    WebuiPort: 22367
    # Language to use on web ui
    # 'zh-CN' for Chinese simplified
    # 'en-US' for English
    # 'ja-JP' for Japanese
    # 'zh-TW' for Chinese traditional
    Language: {{language}}
    # Theme of web ui
    # 'default' for light theme
    # 'dark' for dark theme
    Theme: {{theme}}
    # Follow system DPI scaling
    # [In most cases] true
    # [In few cases] false to make Alas smaller, if you have a low resolution but high DPI scaling.
    DpiScaling: true
    # --key. Password of web ui
    # Useful when expose Alas to the public network
    Password: null
    # --cdn. Use jsdelivr cdn for pywebio static files (css, js).
    # 'true' for jsdelivr cdn
    # 'false' for self host cdn (automatically)
    # 'https://path.to.your/cdn' to use custom cdn
    CDN: false
    # --run. Auto-run specified config when startup
    # 'null' default no specified config
    # '["alas"]' specified "alas" config
    # '["alas","alas2"]' specified "alas" "alas2" configs
    Run: null
    # To update app.asar
    # [In most cases] true
    AppAsarUpdate: true
    # --no-sandbox. https://github.com/electron/electron/issues/30966
    # Some Windows systems cannot call the GPU normally for virtualization, and you need to manually turn off sandbox mode
    NoSandbox: false

```

`webapp/packages/main/src/addIpcMainListener.ts`:

```ts
import type {CoreService} from '/@/coreService';
import type {BrowserWindow} from 'electron';
import {app, ipcMain, nativeTheme} from 'electron';
import {
  ELECTRON_THEME,
  INSTALLER_READY,
  PAGE_ERROR,
  WINDOW_READY,
} from '@common/constant/eventNames';
import {ThemeObj} from '@common/constant/theme';
import logger from '/@/logger';

export const addIpcMainListener = async (mainWindow: BrowserWindow, coreService: CoreService) => {
  // Minimize, maximize, close window.
  ipcMain.on('window-tray', function () {
    mainWindow?.hide();
  });
  ipcMain.on('window-minimize', function () {
    mainWindow?.minimize();
  });
  ipcMain.on('window-maximize', function () {
    mainWindow?.isMaximized() ? mainWindow?.restore() : mainWindow?.maximize();
  });
  ipcMain.on('window-close', function () {
    coreService?.kill();
    mainWindow?.close();
    app.exit(0);
  });

  ipcMain.on(WINDOW_READY, async function (_, args) {
    logger.info('-----WINDOW_READY-----');
    args && (await coreService.run());
  });

  ipcMain.on(INSTALLER_READY, function () {
    logger.info('-----INSTALLER_READY-----');
    coreService.next();
  });

  ipcMain.on(ELECTRON_THEME, (_, args) => {
    logger.info('-----ELECTRON_THEME-----');
    nativeTheme.themeSource = ThemeObj[args];
  });

  ipcMain.on(PAGE_ERROR, (_, args) => {
    logger.info('-----PAGE_ERROR-----');
    logger.error(args);
  });
};

```

`webapp/packages/main/src/config.ts`:

```ts
import {isMacintosh} from '@common/utils/env';
import getAlasABSPath from '@common/utils/getAlasABSPath';
import {ALAS_INSTR_FILE} from '@common/constant/config';
import {validateConfigFile} from '@common/utils/validate';
import {join} from 'path';
import logger from '/@/logger';

const yaml = require('yaml');
const fs = require('fs');
const path = require('path');

function getAlasPath() {
  let file;
  const currentFilePath = process.cwd();
  const pathLookup = [
    // Current
    './',
    // Running from AzurLaneAutoScript/toolkit/WebApp/alas.exe
    '../../',
    // Running from AzurLaneAutoScript/webapp/dist/win-unpacked/alas.exe
    '../../../',
    // Running from `yarn watch`
    './../',
  ];
  for (const i in pathLookup) {
    file = path.join(currentFilePath, pathLookup[i], './config/deploy.yaml');
    if (fs.existsSync(file)) {
      return path.join(currentFilePath, pathLookup[i]);
    }
  }
  for (const i in pathLookup) {
    file = path.join(currentFilePath, pathLookup[i], './config/deploy.template.yaml');
    if (fs.existsSync(file)) {
      return path.join(currentFilePath, pathLookup[i]);
    }
  }
  return currentFilePath;
}

function getLauncherPath(alasPath: string) {
  const pathLookup = ['./Alas.exe', './Alas.bat', './deploy/launcher/Alas.bat'];
  for (const i in pathLookup) {
    const file = path.join(alasPath, pathLookup[i]);
    if (fs.existsSync(file)) {
      return path.join(alasPath, pathLookup[i]);
    }
  }
  return path.join(alasPath, './Alas.exe');
}

export const alasPath = isMacintosh && import.meta.env.PROD ? getAlasABSPath() : getAlasPath();

try {
  validateConfigFile(join(alasPath, '/config'));
} catch (e) {
  logger.error((e as unknown as any).toString());
}

const file = fs.readFileSync(path.join(alasPath, './config/deploy.yaml'), 'utf8');
const config = yaml.parse(file) as DefAlasConfig;
const PythonExecutable = config.Deploy.Python.PythonExecutable;
const WebuiPort = config.Deploy.Webui.WebuiPort.toString();
const Theme = config.Deploy.Webui.Theme;

export const ThemeObj: {[k in string]: 'light' | 'dark'} = {
  default: 'light',
  light: 'light',
  dark: 'dark',
  system: 'light',
};

export const pythonPath = path.isAbsolute(PythonExecutable)
  ? PythonExecutable
  : path.join(alasPath, PythonExecutable);
export const installerPath = ALAS_INSTR_FILE;
export const installerArgs = import.meta.env.DEV ? ['--print-test'] : [];
export const webuiUrl = `http://127.0.0.1:${WebuiPort}`;
export const webuiPath = 'gui.py';
export const webuiArgs = ['--port', WebuiPort, '--electron'];
export const dpiScaling =
  Boolean(config.Deploy.Webui.DpiScaling) || config.Deploy.Webui.DpiScaling === undefined;

export const webuiTheme = ThemeObj[Theme] || 'light';

export const noSandbox = config.Deploy.Webui.NoSandbox;

```

`webapp/packages/main/src/coreService.ts`:

```ts
import type {PyShell} from '/@/pyshell';
import {createAlas, createInstaller} from '/@/serviceLogic';
import {ALAS_LOG} from '@common/constant/eventNames';
import {BrowserWindow} from 'electron';
import logger from '/@/logger';

export interface CoreServiceOption {
  appABSPath?: string;
  isFirstRun?: boolean;
  theme?: 'light' | 'dark';
  mainWindow: Electron.BrowserWindow | null;
}

const defOptions = {
  appABSPath: '',
  theme: 'light',
  isFirstRun: false,
  mainWindow: BrowserWindow.getAllWindows()[0] || null,
};

export type CallbackFun<T = any> = (
  coreService: CoreService,
  next: (...args: any[]) => Promise<PyShell | null>,
  ...args1: (any | T)[]
) => Promise<PyShell | null>;

export class CoreService {
  public appABSPath: string;
  public theme = 'light';
  public mainWindow: Electron.BrowserWindow | null = null;
  private currentService: PyShell | null = null;
  private eventQueue: Array<CallbackFun> = [createInstaller, createAlas];
  private stepIndex = 0;

  constructor(options?: CoreServiceOption) {
    const {appABSPath, theme, mainWindow} = Object.assign(defOptions, options || {});
    this.appABSPath = appABSPath;
    this.theme = theme;
    this.mainWindow = mainWindow;
  }

  async run(...rags: any[]) {
    logger.info('---------------run---------------');
    logger.info('stepIndex:' + this.stepIndex);
    const cb = this.eventQueue[this.stepIndex++];
    const next = (...rags1: any[]) => {
      return this.run(...rags1);
    };
    try {
      cb && (this.currentService = await cb(this, next, ...rags));
    } catch (e) {
      /**
       * 1. 事件执行失败，记录日志
       */
      logger.error('currentService:' + (e as unknown as any).toString());
    }
    return this.curService;
  }

  async next(...rags: any[]) {
    return this.run(...rags);
  }

  get curService() {
    return this.currentService;
  }

  reset() {
    this.stepIndex = 0;
  }

  sendLaunchLog(message: string) {
    if (!this.mainWindow || this.mainWindow.isDestroyed()) return;
    logger.info(`pyShellLaunch:   ${message}`);
    this.mainWindow?.webContents.send(ALAS_LOG, message);
  }

  kill(callback?: () => void) {
    this.curService?.kill(callback || this.cb);
  }

  cb() {
    /**
     *
     */
  }
}

```

`webapp/packages/main/src/createApp.ts`:

```ts
import {createMainWindow} from '/@/createMainWindow';
import {addIpcMainListener} from '/@/addIpcMainListener';
import {CoreService} from '/@/coreService';
import logger from '/@/logger';
import {app, nativeImage, Tray} from 'electron';
import {join} from 'node:path';
import {isMacintosh} from '@common/utils';
export const createApp = async () => {
  logger.info('-----createApp-----');
  logger.info('-----createMainWindow-----');
  const mainWindow = await createMainWindow();
  const coreService = new CoreService({mainWindow});

  // Hide menu
  const {Menu} = require('electron');
  Menu.setApplicationMenu(null);
  const icon = nativeImage.createFromPath(join(__dirname, './icon.png'));
  const dockerIcon = icon.resize({width: 16, height: 16});
  // Tray
  const tray = new Tray(isMacintosh ? dockerIcon : icon);
  const contextMenu = Menu.buildFromTemplate([
    {
      label: 'Show',
      click: function () {
        mainWindow?.show();
      },
    },
    {
      label: 'Hide',
      click: function () {
        mainWindow?.hide();
      },
    },
    {
      label: 'Exit',
      click: function () {
        coreService.curService?.kill(() => {
          logger.info('kill coreService');
        });
        app.quit();
        process.exit(0);
      },
    },
  ]);
  tray.setToolTip('SRC');
  tray.setContextMenu(contextMenu);
  tray.on('click', () => {
    if (mainWindow?.isVisible()) {
      if (mainWindow?.isMinimized()) {
        mainWindow?.show();
      } else {
        mainWindow?.hide();
      }
    } else {
      mainWindow?.show();
    }
  });
  tray.on('right-click', () => {
    tray.popUpContextMenu(contextMenu);
  });

  await addIpcMainListener(mainWindow, coreService);
  return {
    mainWindow,
    coreService,
  };
};

```

`webapp/packages/main/src/createMainWindow.ts`:

```ts
import {app, BrowserWindow, globalShortcut, nativeTheme} from 'electron';
import {join} from 'node:path';
import {URL} from 'node:url';
import {ThemeObj} from '@common/constant/theme';
import logger from '/@/logger';

export const createMainWindow = async () => {
  nativeTheme.themeSource = ThemeObj['light'];
  const browserWindow = new BrowserWindow({
    width: 1280,
    height: 880,
    show: false, // Use 'ready-to-show' event to show window
    frame: false,
    icon: join(__dirname, './icon.png'),
    webPreferences: {
      nodeIntegration: false,
      contextIsolation: true,
      sandbox: false, // Sandbox disabled because the demo of preload script depend on the Node.js api
      webviewTag: false, // The webview tag is not recommended. Consider alternatives like an iframe or Electron's BrowserView. @see https://www.electronjs.org/docs/latest/api/webview-tag#warning
      preload: join(app.getAppPath(), 'packages/preload/dist/index.cjs'),
    },
  });

  browserWindow.setMinimumSize(576, 396);

  browserWindow.webContents.on('preload-error', (event, preloadPath, error) => {
    logger.error('------------preload-error------------');
    logger.error(`event:${JSON.stringify(event)}`);
    logger.error(`preloadPath:${preloadPath}`);
    logger.error(`error:${error}`);
  });

  browserWindow.webContents.on('console-message', (event, level, message, line, sourceId) => {
    if (level === 2) {
      logger.warn(`console-message:${message} line:${line} sourceId:${sourceId}`);
      return;
    }
    if (level === 3) {
      logger.info('------------console-message------------');
      logger.error(`event:${JSON.stringify(event)}`);
      logger.error(`console-message:${message} line:${line} sourceId:${sourceId}`);
      return;
    }
  });

  /**
   * If the 'show' property of the BrowserWindow's constructor is omitted from the initialization options,
   * it then defaults to 'true'. This can cause flickering as the window loads the html content,
   * and it also has show problematic behaviour with the closing of the window.
   * Use `show: false` and listen to the  `ready-to-show` event to show the window.
   *
   * @see https://github.com/electron/electron/issues/25012 for the afford mentioned issue.
   */
  browserWindow.on('ready-to-show', () => {
    logger.info('-----ready-to-show-----');
    browserWindow?.show();

    if (import.meta.env.DEV) {
      browserWindow?.webContents.openDevTools();
    }
  });

  browserWindow.on('focus', function () {
    // Dev tools
    globalShortcut.register('Ctrl+Shift+I', function () {
      if (browserWindow?.webContents.isDevToolsOpened()) {
        browserWindow?.webContents.closeDevTools();
      } else {
        browserWindow?.webContents.openDevTools();
      }
    });
    // Refresh
    globalShortcut.register('Ctrl+R', function () {
      browserWindow?.reload();
    });
    globalShortcut.register('Ctrl+Shift+R', function () {
      browserWindow?.reload();
    });
  });
  browserWindow.on('blur', function () {
    globalShortcut.unregisterAll();
  });

  /**
   * URL for main window.
   * Vite dev server for development.
   * `file://../renderer/index.html` for production and test
   */
  const pageUrl =
    import.meta.env.DEV && import.meta.env.VITE_DEV_SERVER_URL !== undefined
      ? import.meta.env.VITE_DEV_SERVER_URL
      : new URL('../renderer/dist/index.html', 'file://' + __dirname).toString();
  await browserWindow.loadURL(pageUrl);

  return browserWindow;
};

```

`webapp/packages/main/src/index.ts`:

```ts
import {app, BrowserWindow} from 'electron';
import './security-restrictions';
import {createApp} from '/@/createApp';
import logger from '/@/logger';
import {dpiScaling} from '/@/config';

/**
 * Prevent electron from running multiple instances.
 */
const isSingleInstance = app.requestSingleInstanceLock();
logger.info(`isSingleInstance:${isSingleInstance}`);
if (!isSingleInstance) {
  app.quit();
} else {
  app.on('second-instance', async () => {
    logger.info('second-instance');
    const [curWindow] = BrowserWindow.getAllWindows();
    if (!curWindow) {
      logger.info('------createApp------');
      await createApp();
    } else {
      logger.info('------curWindow.restore------');
      if (curWindow.isMinimized?.()) curWindow.restore?.();
      logger.info('------curWindow.show------');
      if (!curWindow.isVisible?.()) curWindow.show?.();
      logger.info('------curWindow.focus------');
      curWindow.focus?.();
    }
  });
}

/**
 * Disable Hardware Acceleration to save more system resources.
 * Also `in-process-gpu` to avoid creating a gpu process which may `exited unexpectedly`
 * See https://github.com/electron/electron/issues/30966
 */
app.disableHardwareAcceleration();
app.commandLine.appendSwitch('disable-gpu');
app.commandLine.appendSwitch('disable-software-rasterizer');
app.commandLine.appendSwitch('disable-gpu-compositing');
app.commandLine.appendSwitch('disable-gpu-rasterization');
app.commandLine.appendSwitch('disable-gpu-sandbox');
app.commandLine.appendSwitch('in-process-gpu');
app.commandLine.appendSwitch('no-sandbox');

// No DPI scaling
if (!dpiScaling) {
  app.commandLine.appendSwitch('high-dpi-support', '1');
  app.commandLine.appendSwitch('force-device-scale-factor', '1');
}

/**
 *Set App Error Log Path
 */
// app.setAppLogsPath(join(app.getAppPath(), '/AlasAppError'));

/**
 * Shout down background process if all windows was closed
 */
app.on('window-all-closed', () => {
  app.quit();
});

/**
 * @see https://www.electronjs.org/docs/latest/api/app#event-activate-macos Event: 'activate'.
 */
// app.on('activate', createWindow);
/**
 * Create the application window when the background process is ready.
 */
// app
//   .whenReady()
//   .then(createWindow)
//   .then(loadURL)
//   .catch(e => console.error('Failed create window:', e));

/**
 * Install Vue.js or any other extension in development mode only.
 * Note: You must install `electron-devtools-installer` manually
 */
// if (import.meta.env.DEV) {
//   app
//     .whenReady()
//     .then(() => import('electron-devtools-installer'))
//     .then(module => {
//       const {default: installExtension, VUEJS3_DEVTOOLS} =
//         // @ts-expect-error Hotfix for https://github.com/cawa-93/vite-electron-builder/issues/915
//         typeof module.default === 'function' ? module : (module.default as typeof module);
//
//       return installExtension(VUEJS3_DEVTOOLS, {
//         loadExtensionOptions: {
//           allowFileAccess: true,
//         },
//       });
//     })
//     .catch(e => console.error('Failed install extension:', e));
// }

/**
 * Check for app updates, install it in background and notify user that new version was installed.
 * No reason run this in non-production build.
 * @see https://www.electron.build/auto-update.html#quick-setup-guide
 *
 * Note: It may throw "ENOENT: no such file app-update.yml"
 * if you compile production app without publishing it to distribution server.
 * Like `npm run compile` does. It's ok 😅
 */
// if (import.meta.env.PROD) {
//   app
//     .whenReady()
//     .then(() => import('electron-updater'))
//     .then(module => {
//       const autoUpdater =
//         module.autoUpdater ||
//         // @ts-expect-error Hotfix for https://github.com/electron-userland/electron-builder/issues/7338
//         (module.default.autoUpdater as (typeof module)['autoUpdater']);
//       return autoUpdater.checkForUpdatesAndNotify();
//     })
//     .catch(e => console.error('Failed check and install updates:', e));
// }

app
  .whenReady()
  .then(createApp)
  .catch(e => {
    logger.error('Failed create window:' + e);
  });

app.on('activate', async () => {
  logger.info('------app activate------');
  const [curWindow] = BrowserWindow.getAllWindows();
  if (!curWindow) {
    logger.info('------createApp------');
    await createApp();
  } else {
    logger.info('------curWindow.focus------');
    curWindow.focus();
  }
});

```

`webapp/packages/main/src/logger.ts`:

```ts
import logger from 'electron-log';
import {join} from 'node:path';
import {getAlasABSPath} from '@common/utils';
const dayjs = require('dayjs');

logger.transports.file.level = 'info';
logger.transports.file.maxSize = 1024 * 1024;
logger.transports.file.format = '[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}';
const dateStr = dayjs(new Date()).format('YYYY-MM-DD');
const logPath = join(getAlasABSPath(), `./log/${dateStr}_webapp.txt`);
logger.transports.file.resolvePath = () => logPath;
export default {
  info(params: string) {
    logger.info(params);
  },
  warn(params: string) {
    logger.warn(params);
  },
  error(params: string) {
    logger.error(params);
  },
  debug(params: string) {
    logger.debug(params);
  },
  verbose(params: string) {
    logger.verbose(params);
  },
  silly(params: string) {
    logger.silly(params);
  },
};

```

`webapp/packages/main/src/mainWindow.ts`:

```ts
import {
  app,
  BrowserWindow,
  globalShortcut,
  ipcMain,
  Menu,
  nativeTheme,
  Tray,
  nativeImage,
} from 'electron';
import {URL} from 'node:url';
import {PyShell} from '/@/pyshell';
import {
  dpiScaling,
  webuiTheme,
  webuiArgs,
  webuiPath,
  installerPath,
  installerArgs,
} from '/@/config';
import {isMacintosh} from '@common/utils/env';
import relaunchApp from '/@/relaunchApp';
import {ALAS_LOG, UPDATE_APP} from '@common/constant/eventNames';

const path = require('path');
/**
 * Load deploy settings and start Alas web server.
 */
let installer: PyShell | null = null;
let alas: PyShell | null = null;

let browserWindow: BrowserWindow | null = null;

nativeTheme.themeSource = webuiTheme;

export async function createWindow() {
  browserWindow = new BrowserWindow({
    width: 1280,
    height: 880,
    show: false, // Use 'ready-to-show' event to show window
    frame: false,
    icon: path.join(__dirname, './icon.png'),
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: true,
      sandbox: false, // Sandbox disabled because the demo of preload script depend on the Node.js api
      webviewTag: false, // The webview tag is not recommended. Consider alternatives like an iframe or Electron's BrowserView. @see https://www.electronjs.org/docs/latest/api/webview-tag#warning
      preload: path.join(app.getAppPath(), 'packages/preload/dist/index.cjs'),
    },
  });

  /**
   * If the 'show' property of the BrowserWindow's constructor is omitted from the initialization options,
   * it then defaults to 'true'. This can cause flickering as the window loads the html content,
   * and it also has show problematic behaviour with the closing of the window.
   * Use `show: false` and listen to the  `ready-to-show` event to show the window.
   *
   * @see https://github.com/electron/electron/issues/25012 for the afford mentioned issue.
   */
  browserWindow.on('ready-to-show', () => {
    browserWindow?.show();

    // Hide menu
    const {Menu} = require('electron');
    Menu.setApplicationMenu(null);

    if (import.meta.env.DEV) {
      browserWindow?.webContents.openDevTools();
    }
  });

  browserWindow.on('focus', function () {
    // Dev tools
    globalShortcut.register('Ctrl+Shift+I', function () {
      if (browserWindow?.webContents.isDevToolsOpened()) {
        browserWindow?.webContents.closeDevTools();
      } else {
        browserWindow?.webContents.openDevTools();
      }
    });
    // Refresh
    globalShortcut.register('Ctrl+R', function () {
      browserWindow?.reload();
    });
    globalShortcut.register('Ctrl+Shift+R', function () {
      browserWindow?.reload();
    });
  });
  browserWindow.on('blur', function () {
    globalShortcut.unregisterAll();
  });

  ipcMain.on('window-ready', async function (_, args) {
    args && (await initWindowEvents());
  });

  /*
   * Fix oversize icon on bar in macOS
   */
  const icon = nativeImage.createFromPath(path.join(__dirname, './icon.png'));
  const dockerIcon = icon.resize({width: 16, height: 16});
  // Tray
  const tray = new Tray(isMacintosh ? dockerIcon : icon);
  const contextMenu = Menu.buildFromTemplate([
    {
      label: 'Show',
      click: function () {
        browserWindow?.show();
      },
    },
    {
      label: 'Hide',
      click: function () {
        browserWindow?.hide();
      },
    },
    {
      label: 'Exit',
      click: function () {
        alas?.kill(function () {
          browserWindow?.close();
        });
      },
    },
  ]);
  tray.setToolTip('SRC');
  tray.setContextMenu(contextMenu);
  tray.on('click', () => {
    if (browserWindow?.isVisible()) {
      if (browserWindow?.isMinimized()) {
        browserWindow?.show();
      } else {
        browserWindow?.hide();
      }
    } else {
      browserWindow?.show();
    }
  });
  tray.on('right-click', () => {
    tray.popUpContextMenu(contextMenu);
  });

  return browserWindow;
}

// No DPI scaling
if (!dpiScaling) {
  app.commandLine.appendSwitch('high-dpi-support', '1');
  app.commandLine.appendSwitch('force-device-scale-factor', '1');
}

export function loadURL() {
  /**
   * URL for main window.
   * Vite dev server for development.
   * `file://../renderer/index.html` for production and test
   */
  const pageUrl =
    import.meta.env.DEV && import.meta.env.VITE_DEV_SERVER_URL !== undefined
      ? import.meta.env.VITE_DEV_SERVER_URL
      : new URL('../renderer/dist/index.html', 'file://' + __dirname).toString();
  browserWindow?.loadURL(pageUrl);
}

// Minimize, maximize, close window.
ipcMain.on('window-tray', function () {
  browserWindow?.hide();
});
ipcMain.on('window-min', function () {
  browserWindow?.minimize();
});
ipcMain.on('window-max', function () {
  browserWindow?.isMaximized() ? browserWindow?.restore() : browserWindow?.maximize();
});
ipcMain.on('window-close', function () {
  if (installer) {
    installer?.removeAllListeners('stderr');
    installer?.removeAllListeners('message');
    installer?.removeAllListeners('stdout');
    installer?.kill(function () {
      browserWindow?.close();
      browserWindow = null;
      installer = null;
    });
    return;
  }

  alas?.removeAllListeners('stderr');
  alas?.removeAllListeners('message');
  alas?.removeAllListeners('stdout');
  alas?.kill(function () {
    browserWindow?.close();
    browserWindow = null;
  });

  browserWindow?.close();
});

async function initWindowEvents() {
  // Start installer and wait for it to finish.
  await runInstaller();

  ipcMain.on('install-success', async function () {
    installer = null;
    // Start Alas web server.
    runAlas();
  });
}

async function runInstaller() {
  installer = new PyShell(installerPath, installerArgs);
  installer?.end(function (err: string) {
    sendLaunchLog(err);
    if (err) throw err;
  });
  installer?.on('stdout', function (message) {
    sendLaunchLog(message);
  });
  installer?.on('message', function (message) {
    sendLaunchLog(message);
  });
  installer?.on('stderr', function (message: string) {
    sendLaunchLog(message);
  });
}

function runAlas() {
  alas = new PyShell(webuiPath, webuiArgs);
  alas?.end(function (err: string) {
    sendLaunchLog(err);
    if (err) throw err;
  });
  alas?.on('stdout', function (message) {
    sendLaunchLog(message);
  });

  alas?.on('message', function (message) {
    sendLaunchLog(message);
  });
  alas?.on('stderr', function (message: string) {
    sendLaunchLog(message);
    /**
     * Receive logs, judge if Alas is ready
     * For starlette backend, there will have:
     * `INFO:     Uvicorn running on http://0.0.0.0:22267 (Press CTRL+C to quit)`
     * Or backend has started already
     * `[Errno 10048] error while attempting to bind on address ('0.0.0.0', 22267): `
     */
    if (message.includes('Application startup complete') || message.includes('bind on address')) {
      alas?.removeAllListeners('stderr');
      alas?.removeAllListeners('message');
      alas?.removeAllListeners('stdout');
      // loadURL();
    }
  });
}

function sendLaunchLog(message: string) {
  message?.includes(UPDATE_APP) && relaunchApp();
  browserWindow?.webContents.send(ALAS_LOG, message);
}

export async function restoreWindow() {
  // Someone tried to run a second instance, we should focus our window.
  if (browserWindow) {
    if (browserWindow.isMinimized()) browserWindow.restore();
    if (!browserWindow.isVisible()) browserWindow.show();
    browserWindow.focus();
  }
}

```

`webapp/packages/main/src/pyshell.ts`:

```ts
import {alasPath, pythonPath} from '/@/config';
import logger from '/@/logger';

const {PythonShell} = require('python-shell');
const treeKill = require('tree-kill');

export class PyShell extends PythonShell {
  constructor(script: string, args: Array<string> = []) {
    const options = {
      mode: 'text',
      args: args,
      pythonPath: pythonPath,
      scriptPath: alasPath,
    };
    logger.info(`${pythonPath} ${script} ${args}`);
    super(script, options);
  }

  on(event: string, listener: (...args: any[]) => void): this {
    this.removeAllListeners(event);
    super.on(event, listener);
    return this;
  }

  kill(callback: (...args: any[]) => void): this {
    treeKill(this.childProcess.pid, 'SIGTERM', callback);
    return this;
  }
}

```

`webapp/packages/main/src/relaunchApp.ts`:

```ts
import {app} from 'electron';
import {ALAS_RELAUNCH_ARGV} from '@common/constant/config';

export const isRelaunch = process.argv.includes(ALAS_RELAUNCH_ARGV);

function relaunchApp() {
  /**
   * TODO Some events need to be rehandled for restart operations
   */
  if (!isRelaunch) {
    app.relaunch({args: process.argv.slice(1).concat([ALAS_RELAUNCH_ARGV])});
  }
}

export default relaunchApp;

```

`webapp/packages/main/src/security-restrictions.ts`:

```ts
import type {Session} from 'electron';
import {app, shell} from 'electron';
import {URL} from 'node:url';

/**
 * Union for all existing permissions in electron
 */
type Permission = Parameters<
  Exclude<Parameters<Session['setPermissionRequestHandler']>[0], null>
>[1];

/**
 * A list of origins that you allow open INSIDE the application and permissions for them.
 *
 * In development mode you need allow open `VITE_DEV_SERVER_URL`.
 */
const ALLOWED_ORIGINS_AND_PERMISSIONS = new Map<string, Set<Permission>>(
  import.meta.env.DEV && import.meta.env.VITE_DEV_SERVER_URL
    ? [[new URL(import.meta.env.VITE_DEV_SERVER_URL).origin, new Set()]]
    : [],
);

/**
 * A list of origins that you allow open IN BROWSER.
 * Navigation to the origins below is only possible if the link opens in a new window.
 *
 * @example
 * <a
 *   target="_blank"
 *   href="https://github.com/"
 * >
 */
const ALLOWED_EXTERNAL_ORIGINS = new Set<`https://${string}`>(['https://github.com']);

app.on('web-contents-created', (_, contents) => {
  /**
   * Block navigation to origins not on the allowlist.
   *
   * Navigation exploits are quite common. If an attacker can convince the app to navigate away from its current page,
   * they can possibly force the app to open arbitrary web resources/websites on the web.
   *
   * @see https://www.electronjs.org/docs/latest/tutorial/security#13-disable-or-limit-navigation
   */
  contents.on('will-navigate', (event, url) => {
    const {origin} = new URL(url);
    if (ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      return;
    }

    // Prevent navigation
    event.preventDefault();

    if (import.meta.env.DEV) {
      console.warn(`Blocked navigating to disallowed origin: ${origin}`);
    }
  });

  /**
   * Block requests for disallowed permissions.
   * By default, Electron will automatically approve all permission requests.
   *
   * @see https://www.electronjs.org/docs/latest/tutorial/security#5-handle-session-permission-requests-from-remote-content
   */
  contents.session.setPermissionRequestHandler((webContents, permission, callback) => {
    const {origin} = new URL(webContents.getURL());

    const permissionGranted = !!ALLOWED_ORIGINS_AND_PERMISSIONS.get(origin)?.has(permission);
    callback(permissionGranted);

    if (!permissionGranted && import.meta.env.DEV) {
      console.warn(`${origin} requested permission for '${permission}', but was rejected.`);
    }
  });

  /**
   * Hyperlinks leading to allowed sites are opened in the default browser.
   *
   * The creation of new `webContents` is a common attack vector. Attackers attempt to convince the app to create new windows,
   * frames, or other renderer processes with more privileges than they had before; or with pages opened that they couldn't open before.
   * You should deny any unexpected window creation.
   *
   * @see https://www.electronjs.org/docs/latest/tutorial/security#14-disable-or-limit-creation-of-new-windows
   * @see https://www.electronjs.org/docs/latest/tutorial/security#15-do-not-use-openexternal-with-untrusted-content
   */
  contents.setWindowOpenHandler(({url}) => {
    const {origin} = new URL(url);

    if (ALLOWED_EXTERNAL_ORIGINS.has(origin as `https://${string}`)) {
      // Open url in default browser.
      shell.openExternal(url).catch(console.error);
    } else if (import.meta.env.DEV) {
      console.warn(`Blocked the opening of a disallowed origin: ${origin}`);
    }

    // Prevent creating a new window.
    return {action: 'deny'};
  });

  /**
   * Verify webview options before creation.
   *
   * Strip away preload scripts, disable Node.js integration, and ensure origins are on the allowlist.
   *
   * @see https://www.electronjs.org/docs/latest/tutorial/security#12-verify-webview-options-before-creation
   */
  contents.on('will-attach-webview', (event, webPreferences, params) => {
    const {origin} = new URL(params.src);
    if (!ALLOWED_ORIGINS_AND_PERMISSIONS.has(origin)) {
      if (import.meta.env.DEV) {
        console.warn(`A webview tried to attach ${params.src}, but was blocked.`);
      }

      event.preventDefault();
      return;
    }

    // Strip away preload scripts if unused or verify their location is legitimate.
    delete webPreferences.preload;
    // @ts-expect-error `preloadURL` exists. - @see https://www.electronjs.org/docs/latest/api/web-contents#event-will-attach-webview
    delete webPreferences.preloadURL;

    // Disable Node.js integration
    webPreferences.nodeIntegration = false;

    // Enable contextIsolation
    webPreferences.contextIsolation = true;
  });
});

```

`webapp/packages/main/src/serviceLogic/createAlas.ts`:

```ts
import {webuiArgs, webuiPath} from '/@/config';
import {PyShell} from '/@/pyshell';
import type {CallbackFun} from '/@/coreService';
import logger from '/@/logger';

export const createAlas: CallbackFun = async ctx => {
  const alas = new PyShell(webuiPath, webuiArgs);
  alas.on('error', function (err: string) {
    if(!err) return;
    logger.error('alas.error:' + err);
    ctx.sendLaunchLog(err);
  });
  alas.end(function (err: string) {
     if(!err) return;
    logger.info('alas.end:' + err);
    ctx.sendLaunchLog(err);
    throw err;
  });
  alas.on('stdout', function (message) {
    ctx.sendLaunchLog(message);
  });

  alas.on('message', function (message) {
    ctx.sendLaunchLog(message);
  });
  alas.on('stderr', function (message: string) {
    ctx.sendLaunchLog(message);
    /**
     * Receive logs, judge if Alas is ready
     * For starlette backend, there will have:
     * `INFO:     Uvicorn running on http://0.0.0.0:22267 (Press CTRL+C to quit)`
     * Or backend has started already
     * `[Errno 10048] error while attempting to bind on address ('0.0.0.0', 22267): `
     */
    if (message.includes('Application startup complete') || message.includes('bind on address')) {
      alas.removeAllListeners('stderr');
      alas.removeAllListeners('message');
      alas.removeAllListeners('stdout');
    }
  });
  return alas;
};

```

`webapp/packages/main/src/serviceLogic/createInstaller.ts`:

```ts
import type {CallbackFun} from '/@/coreService';
import {PyShell} from '/@/pyshell';
import {installerArgs, installerPath} from '/@/config';
import {ALAS_RELAUNCH_ARGV} from '@common/constant/config';
import logger from '/@/logger';
export const createInstaller: CallbackFun = async (ctx, next) => {
  if (process.argv.includes(ALAS_RELAUNCH_ARGV)) {
    return next();
  }
  const installer = new PyShell(installerPath, installerArgs);
  installer.on('error', function (err: string) {
     if(!err) return;
    logger.error('installer.error:' + err);
    ctx.sendLaunchLog(err);
  });
  installer?.end(function (err: string) {
     if(!err) return;
    logger.info('installer.end:' + err);
    ctx.sendLaunchLog(err);
    throw err;
  });
  installer?.on('stdout', function (message) {
    ctx.sendLaunchLog(message);
  });
  installer?.on('message', function (message) {
    ctx.sendLaunchLog(message);
  });
  installer?.on('stderr', function (message: string) {
    ctx.sendLaunchLog(message);
  });
  return installer;
};

```

`webapp/packages/main/src/serviceLogic/index.ts`:

```ts
import {createInstaller} from './createInstaller';
import {createAlas} from './createAlas';

export {createInstaller, createAlas};

```

`webapp/packages/main/tests/unit.spec.ts`:

```ts
import type {MockedClass} from 'vitest';
import {beforeEach, expect, test, vi} from 'vitest';
import {restoreOrCreateWindow} from '../src/mainWindow';

import {BrowserWindow} from 'electron';

/**
 * Mock real electron BrowserWindow API
 */
vi.mock('electron', () => {
  // Use "as unknown as" because vi.fn() does not have static methods
  const bw = vi.fn() as unknown as MockedClass<typeof BrowserWindow>;
  bw.getAllWindows = vi.fn(() => bw.mock.instances);
  bw.prototype.loadURL = vi.fn((_: string, __?: Electron.LoadURLOptions) => Promise.resolve());
  // Use "any" because the on function is overloaded
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  bw.prototype.on = vi.fn<any>();
  bw.prototype.destroy = vi.fn();
  bw.prototype.isDestroyed = vi.fn();
  bw.prototype.isMinimized = vi.fn();
  bw.prototype.focus = vi.fn();
  bw.prototype.restore = vi.fn();

  const app: Pick<Electron.App, 'getAppPath'> = {
    getAppPath(): string {
      return '';
    },
  };

  return {BrowserWindow: bw, app};
});

beforeEach(() => {
  vi.clearAllMocks();
});

test('Should create a new window', async () => {
  const {mock} = vi.mocked(BrowserWindow);
  expect(mock.instances).toHaveLength(0);

  await restoreOrCreateWindow();
  expect(mock.instances).toHaveLength(1);
  expect(mock.instances[0].loadURL).toHaveBeenCalledOnce();
  expect(mock.instances[0].loadURL).toHaveBeenCalledWith(expect.stringMatching(/index\.html$/));
});

test('Should restore an existing window', async () => {
  const {mock} = vi.mocked(BrowserWindow);

  // Create a window and minimize it.
  await restoreOrCreateWindow();
  expect(mock.instances).toHaveLength(1);
  const appWindow = vi.mocked(mock.instances[0]);
  appWindow.isMinimized.mockReturnValueOnce(true);

  await restoreOrCreateWindow();
  expect(mock.instances).toHaveLength(1);
  expect(appWindow.restore).toHaveBeenCalledOnce();
});

test('Should create a new window if the previous one was destroyed', async () => {
  const {mock} = vi.mocked(BrowserWindow);

  // Create a window and destroy it.
  await restoreOrCreateWindow();
  expect(mock.instances).toHaveLength(1);
  const appWindow = vi.mocked(mock.instances[0]);
  appWindow.isDestroyed.mockReturnValueOnce(true);

  await restoreOrCreateWindow();
  expect(mock.instances).toHaveLength(2);
});

```

`webapp/packages/main/tsconfig.json`:

```json
{
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "sourceMap": false,
    "moduleResolution": "Node",
    "skipLibCheck": true,
    "strict": true,
    "isolatedModules": true,
    "types": ["node"],
    "baseUrl": ".",
    "paths": {
      "/@/*": ["./src/*"],
      "@common/*": ["../common/*"]
    }
  },
  "include": ["src/**/*.ts", "../../types/**/*.d.ts","../common/**/*.ts"],
  "exclude": ["**/*.spec.ts", "**/*.test.ts"]
}

```

`webapp/packages/main/vite.config.js`:

```js
import {node} from '../../.electron-vendors.cache.json';
import {join} from 'node:path';
import {injectAppVersion} from '../../version/inject-app-version-plugin.mjs';

const PACKAGE_ROOT = __dirname;
const PROJECT_ROOT = join(PACKAGE_ROOT, '../..');

/**
 * @type {import('vite').UserConfig}
 * @see https://vitejs.dev/config/
 */
const config = {
  mode: process.env.MODE,
  root: PACKAGE_ROOT,
  envDir: PROJECT_ROOT,
  resolve: {
    alias: {
      '/@/': join(PACKAGE_ROOT, 'src') + '/',
      '@common': join(PACKAGE_ROOT, '../common/'),
    },
  },
  build: {
    ssr: true,
    sourcemap: 'inline',
    target: `node${node}`,
    outDir: 'dist',
    assetsDir: '.',
    minify: process.env.MODE !== 'development',
    lib: {
      entry: 'src/index.ts',
      formats: ['cjs'],
    },
    rollupOptions: {
      output: {
        entryFileNames: '[name].cjs',
      },
    },
    emptyOutDir: true,
    reportCompressedSize: false,
  },
  plugins: [injectAppVersion()],
};

export default config;

```

`webapp/packages/preload/src/alasConfig.ts`:

```ts
import {ALAS_CONFIG_YAML} from '@common/constant/config';
import {getAlasABSPath, checkIsFirst} from '@common/utils';
import {ThemeObj} from '@common/constant/theme';
import {Dirent} from 'fs';
const path = require('path');
const yaml = require('yaml');
const fs = require('fs');

let alasConfig: AlasConfig | null = null;
export async function getAlasConfig() {
  if (alasConfig === null) {
    const alasPath = getAlasABSPath();
    const file = fs.readFileSync(path.join(alasPath, `./config/${ALAS_CONFIG_YAML}`), 'utf8');
    const config = yaml.parse(file) as DefAlasConfig;
    const WebuiPort = config.Deploy.Webui.WebuiPort.toString();
    const Theme = config.Deploy.Webui.Theme;
    alasConfig = {
      webuiUrl: `http://127.0.0.1:${WebuiPort}`,
      theme: ThemeObj[Theme] || 'light',
      language: config.Deploy.Webui.Language || 'en-US',
      repository: config.Deploy.Git.Repository as any,
      alasPath,
    };
  }
  return alasConfig;
}

export function checkIsNeedInstall() {
  return checkIsFirst();
}

interface fileInfoItem {
  name: string;
  path: string;
  lastModifyTime: Date;
}
export function getAlasConfigDirFiles() {
  const alasPath = getAlasABSPath();
  const configPath = path.join(alasPath, `./config`);
  const files: Dirent[] = fs.readdirSync(configPath, {withFileTypes: true});
  const filesInfoList: fileInfoItem[] = files.map((file: Dirent) => {
    const name = file.name;
    const filePath = path.join(configPath, name);
    return {
      name,
      path: filePath,
      lastModifyTime: getFileUpdateDate(filePath),
    };
  });
  return {
    configPath,
    files: filesInfoList,
  };
}

export function getFileUpdateDate(path: string) {
  const stat = fs.statSync(path);
  return stat.mtime;
}

```

`webapp/packages/preload/src/electronApi.ts`:

```ts
import {ipcRenderer} from 'electron';
import IpcRenderer = Electron.IpcRenderer;

export function ipcRendererSend(channel: string, ...args: any[]): void {
  ipcRenderer.send(channel, ...args);
}

export function ipcRendererOn(
  channel: string,
  listener: (event: Electron.IpcRendererEvent, ...args: any[]) => void,
): IpcRenderer {
  return ipcRenderer.on(channel, listener);
}

```

`webapp/packages/preload/src/index.ts`:

```ts
/**
 * @module preload
 */

export {sha256sum} from './nodeCrypto';
export {versions} from './versions';
export {ipcRendererSend, ipcRendererOn} from './electronApi';
export {getAlasConfig, checkIsNeedInstall, getAlasConfigDirFiles} from './alasConfig';
export {copyFilesToDir} from '@common/utils/copyFilesToDir';
export {modifyConfigYaml} from './modifyConfigYaml';

```

`webapp/packages/preload/src/modifyConfigYaml.ts`:

```ts
import {join, normalize} from 'path';
import {modifyYaml} from '@common/utils';
import {ALAS_CONFIG_YAML} from '@common/constant/config';

export function modifyConfigYaml(path: string, keyObj: {[k in string]: any}) {
  const configYamlPath = join(normalize(path) + `./config/${ALAS_CONFIG_YAML}`);
  return modifyYaml(configYamlPath, keyObj);
}

```

`webapp/packages/preload/src/nodeCrypto.ts`:

```ts
import {type BinaryLike, createHash} from 'node:crypto';

export function sha256sum(data: BinaryLike) {
  return createHash('sha256').update(data).digest('hex');
}

```

`webapp/packages/preload/src/versions.ts`:

```ts
export {versions} from 'node:process';

```

`webapp/packages/preload/tests/modifyYaml.test.ts`:

```ts
import {test, expect} from 'vitest';
import {modifyYaml} from '../../common/utils/modifyYaml';
import getAlasABSPath from '../../common/utils/getAlasABSPath';
const path = require('path');
const fs = require('fs');
test('test write yaml', () => {
  const absPath = getAlasABSPath();
  const yamlPath = path.join(absPath, './config/deploy.yaml');
  modifyYaml(yamlPath, {Branch: 'dev'});
  const newYamlConfig1 = require('yaml').parse(fs.readFileSync(yamlPath, 'utf8'));
  expect(newYamlConfig1.Deploy.Git.Branch).toBe('dev');
  modifyYaml(yamlPath, {Branch: 'master'});
  const newYamlConfig2 = require('yaml').parse(fs.readFileSync(yamlPath, 'utf8'));
  expect(newYamlConfig2.Deploy.Git.Branch).toBe('master');
});

```

`webapp/packages/preload/tests/unit.spec.ts`:

```ts
import {createHash} from 'crypto';
import {expect, test} from 'vitest';
import {sha256sum, versions} from '../src';

test('versions', async () => {
  expect(versions).toBe(process.versions);
});

test('nodeCrypto', async () => {
  // Test hashing a random string.
  const testString = Math.random().toString(36).slice(2, 7);
  const expectedHash = createHash('sha256').update(testString).digest('hex');

  expect(sha256sum(testString)).toBe(expectedHash);
});

```

`webapp/packages/preload/tsconfig.json`:

```json
{
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "sourceMap": false,
    "moduleResolution": "Node",
    "skipLibCheck": true,
    "strict": true,
    "isolatedModules": true,
    "types": ["node"],
    "baseUrl": ".",
     "paths": {
      "@common/*": ["../common/*"]
    }
  },
  "include": ["src/**/*.ts", "../../types/**/*.d.ts","../common/**/*.ts"],
  "exclude": ["**/*.spec.ts", "**/*.test.ts"]
}

```

`webapp/packages/preload/types/electron-api.d.ts`:

```ts
interface ElectronApi {
  readonly versions: Readonly<NodeJS.ProcessVersions>;
}

declare interface Window {
  electron: Readonly<ElectronApi>;
  electronRequire?: NodeRequire;
}

```

`webapp/packages/preload/vite.config.js`:

```js
import {chrome} from '../../.electron-vendors.cache.json';
import {preload} from 'unplugin-auto-expose';
import {join} from 'node:path';
import {injectAppVersion} from '../../version/inject-app-version-plugin.mjs';

const PACKAGE_ROOT = __dirname;
const PROJECT_ROOT = join(PACKAGE_ROOT, '../..');

/**
 * @type {import('vite').UserConfig}
 * @see https://vitejs.dev/config/
 */
const config = {
  mode: process.env.MODE,
  root: PACKAGE_ROOT,
  envDir: PROJECT_ROOT,
  resolve: {
    alias: [
      {
        find: '@common',
        replacement: join(PACKAGE_ROOT, '../common'),
      },
    ],
  },
  build: {
    ssr: true,
    sourcemap: 'inline',
    target: `chrome${chrome}`,
    outDir: 'dist',
    assetsDir: '.',
    minify: process.env.MODE !== 'development',
    lib: {
      entry: 'src/index.ts',
      formats: ['cjs'],
    },
    rollupOptions: {
      output: {
        entryFileNames: '[name].cjs',
      },
    },
    emptyOutDir: true,
    reportCompressedSize: false,
  },
  plugins: [preload.vite(), injectAppVersion()],
};

export default config;

```

`webapp/packages/renderer/auto-imports.d.ts`:

```ts
/* eslint-disable */
/* prettier-ignore */
// @ts-nocheck
// Generated by unplugin-auto-import
export {}
declare global {

}

```

`webapp/packages/renderer/components.d.ts`:

```ts
/* eslint-disable */
/* prettier-ignore */
// @ts-nocheck
// Generated by unplugin-vue-components
// Read more: https://github.com/vuejs/core/pull/3399
import '@vue/runtime-core'

export {}

declare module '@vue/runtime-core' {
  export interface GlobalComponents {
    Alas: typeof import('./src/components/Alas.vue')['default']
    AlasTitle: typeof import('./src/components/AlasTitle.vue')['default']
    AppHeader: typeof import('./src/components/AppHeader.vue')['default']
    CountTo: typeof import('./src/components/CountTo.vue')['default']
    ProgressBar: typeof import('./src/components/ProgressBar.vue')['default']
    RouterLink: typeof import('vue-router')['RouterLink']
    RouterView: typeof import('vue-router')['RouterView']
    Spin: typeof import('./src/components/Spin.vue')['default']
  }
}

```

`webapp/packages/renderer/index.html`:

```html
<!DOCTYPE html>
<html
  lang="en-US"
  id="htmlRoot"
>
  <head>
    <meta charset="UTF-8" />
        <meta content="script-src 'self' blob:" http-equiv="Content-Security-Policy">
    <meta
      content="width=device-width, initial-scale=1.0"
      name="viewport"
    />
    <title>SRC</title>
  </head>
  <body>
    <div id="app"></div>
    <script
      src="./src/index.ts"
      type="module"
    ></script>
  </body>
</html>

```

`webapp/packages/renderer/src/App.vue`:

```vue
<template>
  <a-config-provider :locale="locale">
    <div
      id="app"
      class="bg-white dark:bg-dark text-slate dark:text-neutral"
    >
      <app-header></app-header>
      <router-view>
        <template #default="{Component, route}">
          <transition
            name="fade-slide"
            mode="out-in"
            appear
          >
            <component
              :is="Component"
              :key="route.fullPath"
            />
          </transition>
        </template>
      </router-view>
    </div>
  </a-config-provider>
</template>

<script lang="ts">
import {computed, defineComponent, unref} from 'vue';
import AppHeader from '/@/components/AppHeader.vue';
import {useLocale} from '/@/locales/useLocale';
import {setTheme} from '/@/settings/themeSetting';
import {useAppStoreWithOut} from '/@/store/modules/app';
import zhCN from '@arco-design/web-vue/es/locale/lang/zh-cn';
import enUS from '@arco-design/web-vue/es/locale/lang/en-us';
import jaJP from '@arco-design/web-vue/es/locale/lang/ja-jp';
import zhTW from '@arco-design/web-vue/es/locale/lang/zh-tw';
import type {ArcoLang} from '@arco-design/web-vue/es/locale/interface';

export default defineComponent({
  name: 'App',
  components: {
    AppHeader,
  },
  setup() {
    const {getLocale} = useLocale();
    const locales = {
      'zh-CN': zhCN,
      'en-US': enUS,
      'ja-JP': jaJP,
      'zh-TW': zhTW,
    };

    const locale = computed<ArcoLang>(() => {
      const language = unref(getLocale);
      return locales[language];
    });
    const appStore = useAppStoreWithOut();
    setTheme(appStore.theme);
    return {
      locale,
    };
  },
});
</script>

<style>
#app {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

body {
  margin: 0;
  padding: 0;
}

.fade-slide-leave-active,
.fade-slide-enter-active {
  transition: all 0.3s;
}

.fade-slide-enter-from {
  opacity: 0;
  transform: translateX(-30px);
}

.fade-slide-leave-to {
  opacity: 0;
  transform: translateX(30px);
}
</style>

```

`webapp/packages/renderer/src/components/Alas.vue`:

```vue
<template>
  <iframe
    class="alas"
    :src="webuiUrl"
  ></iframe>
</template>

<script lang="ts">
import {computed, defineComponent} from 'vue';
import {useAppStoreWithOut} from '/@/store/modules/app';

export default defineComponent({
  name: 'AlasPage',
  setup() {
    const appStore = useAppStoreWithOut();
    const webuiUrl = computed(() => appStore.webuiUrl);
    return {
      webuiUrl,
    };
  },
});
</script>

<style scoped>
.alas {
  border-width: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}
</style>

```

`webapp/packages/renderer/src/components/AlasTitle.vue`:

```vue
<template>
  <section class="text-6xl font-extralight tracking-wide">
    <span class="text-7xl text-primary">S</span>tar<span class="text-7xl text-primary">R</span>ail<span class="text-7xl text-primary">C</span>opilot
  </section>
</template>

<script lang="ts">
import {defineComponent} from 'vue';

export default defineComponent({
  name: 'AlasTitle',
  components: {},
});
</script>

```

`webapp/packages/renderer/src/components/AppHeader.vue`:

```vue
<template>
  <div class="app-header">
    <div class="header-drag"></div>
    <div class="header-icon">
      <ArrowDownOutlined
        class="icon"
        @click="trayWin"
      ></ArrowDownOutlined>
      <MinusOutlined
        class="icon"
        @click="minimizeWin"
      ></MinusOutlined>
      <BorderOutlined
        class="icon"
        @click="maximizeWin"
      ></BorderOutlined>
      <CloseOutlined
        class="icon"
        @click="closeWin"
      ></CloseOutlined>
    </div>
  </div>
</template>

<script lang="ts">
import {defineComponent, h} from 'vue';
import {
  BorderOutlined,
  CloseOutlined,
  MinusOutlined,
  ArrowDownOutlined,
} from '@ant-design/icons-vue';
import useIpcRenderer from '/@/hooks/useIpcRenderer';
import {Modal} from '@arco-design/web-vue';
import {useI18n} from '/@/hooks/useI18n';

export default defineComponent({
  name: 'AppHeader',
  components: {
    ArrowDownOutlined,
    MinusOutlined,
    BorderOutlined,
    CloseOutlined,
  },
  setup() {
    const {t} = useI18n();

    const {ipcRendererSend} = useIpcRenderer();
    const trayWin = () => {
      ipcRendererSend('window-tray');
    };
    const minimizeWin = () => {
      ipcRendererSend('window-minimize');
    };
    const maximizeWin = () => {
      ipcRendererSend('window-maximize');
    };
    const closeWin = () => {
      Modal.confirm({
        title: () =>
          h(
            'div',
            {
              class: 'flex justify-center items-center font-bold',
            },
            t('modal.closeTipTitle'),
          ),
        content: () =>
          h(
            'div',
            {
              class: 'flex justify-center items-center',
            },
            t('modal.closeTipContent'),
          ),
        cancelText: t('modal.cancelText'),
        okText: t('modal.okText'),
        titleAlign: 'center',
        okButtonProps: {
          size: 'medium',
        },
        onOk() {
          ipcRendererSend('window-close');
        },
      });
    };
    return {
      trayWin,
      minimizeWin,
      maximizeWin,
      closeWin,
    };
  },
});
</script>

<style scoped>
.app-header {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 51px;
  display: flex;
  flex-direction: row;
  -webkit-app-region: drag;
  z-index: 999;
}

.header-drag {
  width: 100%;
  height: 100%;
}

.header-icon {
  -webkit-app-region: no-drag;
  text-align: right;
  font-size: 20px;
  color: #7c7c7c;
  display: flex;
  align-items: center;
}

.icon {
  padding: 10px;
  margin-right: 5px;
}
</style>

```

`webapp/packages/renderer/src/components/CountTo.vue`:

```vue
<template>
  <span
    :class="{prefixClass}"
    :style="{color}"
  >
    {{ value }}
  </span>
</template>

<script lang="ts">
import type {PropType} from 'vue';
import {defineComponent, ref, watchEffect, computed, unref, watch, onMounted} from 'vue';
import {useTransition, TransitionPresets} from '@vueuse/core';
import {isNumber} from '/@/utils/is';
export default defineComponent({
  name: 'CountTo',
  props: {
    startVal: {type: Number, default: 0},
    endVal: {type: Number, default: 100},
    duration: {type: Number, default: 1500},
    autoplay: {type: Boolean, default: false},
    decimals: {
      type: Number,
      default: 0,
      validator(value: number) {
        return value >= 0;
      },
    },
    prefix: {type: String, default: ''},
    suffix: {type: String, default: ''},
    separator: {type: String, default: ','},
    decimal: {type: String, default: '.'},
    prefixClass: {type: String, default: ''},
    color: {type: String},
    useEasing: {type: Boolean, default: true},
    transition: {type: String as PropType<keyof typeof TransitionPresets>, default: 'linear'},
  },
  emits: ['onStarted', 'onFinished'],
  setup(props, {emit}) {
    const source = ref(props.startVal);
    const disabled = ref(false);
    let outputValue = useTransition(source);
    const value = computed(() => formatNumber(unref(outputValue)));

    watchEffect(() => {
      source.value = props.startVal;
    });

    function formatNumber(num: number | string) {
      if (!num && num !== 0) {
        return '';
      }
      const {decimals, decimal, separator, suffix, prefix} = props;
      num = Number(num).toFixed(decimals);
      num += '';

      const x = num.split('.');
      let x1 = x[0];
      const x2 = x.length > 1 ? decimal + x[1] : '';

      const rgx = /(\d+)(\d{3})/;
      if (separator && !isNumber(separator)) {
        while (rgx.test(x1)) {
          x1 = x1.replace(rgx, '$1' + separator + '$2');
        }
      }
      return prefix + x1 + x2 + suffix;
    }

    watch([() => props.startVal, () => props.endVal], () => {
      if (props.autoplay) {
        start();
      }
    });

    onMounted(() => {
      props.autoplay && start();
    });

    function start() {
      run();
      source.value = props.endVal;
    }

    function reset() {
      source.value = props.startVal;
      run();
    }

    function run() {
      outputValue = useTransition(source, {
        disabled,
        duration: props.duration,
        onFinished: () => emit('onFinished'),
        onStarted: () => emit('onStarted'),
        ...(props.useEasing ? {transition: TransitionPresets[props.transition]} : {}),
      });
    }

    return {
      value,
      start,
      reset,
    };
  },
});
</script>

<style scoped></style>

```

`webapp/packages/renderer/src/components/ProgressBar.vue`:

```vue
<template>
  <section class="w-full">
    <CountTo
      :class="'text-primary flex text-2xl ml-5 mb-3'"
      :start-val="progressValue"
      suffix="%"
    /><div
      class="h-3 bg-primary ease-in-out duration-500"
      :style="getWrapStyle"
    ></div>
  </section>
</template>

<script lang="ts" setup>
import VueTypes from 'vue-types';
import type {CSSProperties} from 'vue';
import {computed, unref} from 'vue';
import CountTo from './CountTo.vue';

const props = defineProps({
  progressValue: VueTypes.number.def(0),
});

const getWrapStyle = computed((): CSSProperties => {
  return {
    width: `${unref(isNaN(props.progressValue) ? 0 : props.progressValue)}%`,
  };
});
</script>

<style scoped></style>

```

`webapp/packages/renderer/src/components/Spin.vue`:

```vue
<template>
  <div> </div>
</template>

<script lang="ts" setup>
defineProps({});
</script>

<style scoped></style>

```

`webapp/packages/renderer/src/design/color.less`:

```less
html {

}

@white: #fff;

@content-bg: #f4f7f9;

@iconify-bg-color: #5551;

// =================================
// ==============border-color=======
// =================================

// Dark-dark
@border-color-dark: #b6b7b9;

// Dark-light
@border-color-shallow-dark: #cececd;

// Light-dark
@border-color-light: @border-color-base;

// =================================
// ==============message==============
// =================================

// success-bg-color
@success-background-color: #f1f9ec;
// info-bg-color
@info-background-color: #e8eff8;
// warn-bg-color
@warning-background-color: #fdf6ed;
// danger-bg-color
@danger-background-color: #fef0f0;

// top-menu
@top-menu-active-bg-color: var(--header-active-menu-bg-color);

// =================================
// ==============Menu============
// =================================

// trigger
@trigger-dark-hover-bg-color: rgba(255, 255, 255, 0.2);
@trigger-dark-bg-color: rgba(255, 255, 255, 0.1);

// =================================
// ==============tree============
// =================================
// tree item hover background
@tree-hover-background-color: #f5f7fa;
// tree item hover font color
@tree-hover-font-color: #f5f7fa;

// =================================
// ==============link============
// =================================
@link-hover-color: @primary-color;
@link-active-color: darken(@primary-color, 10%);

// =================================
// ==============Text color-=============
// =================================

// Main text color
@text-color-base: @text-color;

// Label color
@text-color-call-out: #606266;

// Auxiliary information color-dark
@text-color-help-dark: #909399;

// =================================
// ==============breadcrumb=========
// =================================
@breadcrumb-item-normal-color: #999;
// =================================
// ==============button=============
// =================================

@button-primary-color: @primary-color;
@button-primary-hover-color: lighten(@primary-color, 5%);
@button-primary-active-color: darken(@primary-color, 5%);

@button-ghost-color: @white;
@button-ghost-hover-color: lighten(@white, 10%);
@button-ghost-hover-bg-color: #e1ebf6;
@button-ghost-active-color: darken(@white, 10%);

@button-success-color: @success-color;
@button-success-hover-color: lighten(@success-color, 10%);
@button-success-active-color: darken(@success-color, 10%);

@button-warn-color: @warning-color;
@button-warn-hover-color: lighten(@warning-color, 10%);
@button-warn-active-color: darken(@warning-color, 10%);

@button-error-color: @error-color;
@button-error-hover-color: lighten(@error-color, 10%);
@button-error-active-color: darken(@error-color, 10%);

@button-cancel-color: @text-color-call-out;
@button-cancel-bg-color: @white;
@button-cancel-border-color: @border-color-shallow-dark;

// Mouse over
@button-cancel-hover-color: @primary-color;
@button-cancel-hover-bg-color: @white;
@button-cancel-hover-border-color: @primary-color;

```

`webapp/packages/renderer/src/design/config.less`:

```less
@import (reference) 'color.less';
@import (reference) 'var/index.less';

```

`webapp/packages/renderer/src/design/index.less`:

```less
@import "./theme.less";
@import 'var/index.less';

input:-webkit-autofill {
  box-shadow: 0 0 0 1000px white inset !important;
}

:-webkit-autofill {
  transition: background-color 5000s ease-in-out 0s !important;
}

html {
  overflow: hidden;
  text-size-adjust: 100%;
}

html,
body {
  width: 100%;
  height: 100%;
  overflow: visible !important;
  overflow-x: hidden !important;

  &.color-weak {
    filter: invert(80%);
  }

  &.gray-mode {
    filter: grayscale(100%);
    filter: progid:dximagetransform.microsoft.basicimage(grayscale=1);
  }
}

a:focus,
a:active,
button,
div,
svg,
span {
  outline: none !important;
}

```

`webapp/packages/renderer/src/design/theme.less`:

```less
html[arco-theme='light'] {

}

[arco-theme='dark'] {



}

```

`webapp/packages/renderer/src/hooks/useI18n.ts`:

```ts
import {i18n} from '/@/locales/setupI18n';

export interface I18nGlobalTranslation {
  (key: string): string;
  (key: string, locale?: string): string;
  (key: string, locale?: string, list?: unknown[]): string;
  (key: string, locale?: string, named?: Record<string, unknown>): string;
  (key: string, list?: unknown[]): string;
  (key: string, named?: Record<string, unknown>): string;
}

type I18nTranslationRestParameters = [string, any];

function getKey(namespace: string | undefined, key: string): string {
  if (!namespace) {
    return key;
  }
  if (key.startsWith(namespace)) {
    return key;
  }
  return `${namespace}.${key}`;
}

export function useI18n(namespace?: string) {
  const normalFn = {
    t: (key: string) => {
      return getKey(namespace, key);
    },
  };
  if (!i18n) {
    return normalFn;
  }

  const {t, ...methods} = i18n.global;

  const tFn: I18nGlobalTranslation = (key: string, ...arg: any[]) => {
    if (!key) return '';
    if (!key.includes('.') && !namespace) return key;
    return t(getKey(namespace, key), ...(arg as I18nTranslationRestParameters));
  };

  return {
    ...methods,
    t: tFn,
  };
}

```

`webapp/packages/renderer/src/hooks/useIpcRenderer.ts`:

```ts
const useIpcRenderer = () => {
  return {
    ipcRendererSend: window.__electron_preload__ipcRendererSend,
    ipcRendererOn: window.__electron_preload__ipcRendererOn,
  };
};

export default useIpcRenderer;

```

`webapp/packages/renderer/src/index.less`:

```less
@import '@unocss/reset/tailwind.css';
@import '@unocss/reset/tailwind-compat.css';


```

`webapp/packages/renderer/src/index.ts`:

```ts
import {createApp} from 'vue';
import App from '/@/App.vue';
import router from '/@/router';
import {setupI18n} from '/@/locales/setupI18n';
import {setupThemeSetting} from '/@/settings/themeSetting';
import {setupStore} from '/@/store';
import {initAppConfigStore} from '/@/logics/initAppConfigStore';
import './index.less';
import 'uno.css';

if (import.meta.env.DEV) {
  /**
   * Ensure that the style at development time is consistent with the style after packaging
   */
  import('@arco-design/web-vue/dist/arco.less');
}

async function bootstrap() {
  const app = createApp(App);
  setupStore(app);

  await initAppConfigStore();

  await setupI18n(app);

  app.use(router);

  setupThemeSetting();

  app.mount('#app');
}

await bootstrap();

```

`webapp/packages/renderer/src/locales/helper.ts`:

```ts
import type {LocaleType} from '/#/config';

export const loadLocalePool: LocaleType[] = [];

export function setHtmlPageLang(locale: LocaleType) {
  document.querySelector('html')?.setAttribute('lang', locale);
}

export function setLoadLocalePool(cb: (loadLocalePool: LocaleType[]) => void) {
  cb(loadLocalePool);
}

```

`webapp/packages/renderer/src/locales/lang/en-US.json`:

```json
{
  "common": {
    "theme": "Theme",
    "light": "Light",
    "dark": "Dark",
    "language": "Language",
    "update": "Update",
    "global": "Global",
    "china": "China",
    "install": "Install",
    "installTips": "Used SRC before? Import your configs here"
  },
  "import": {
    "title": "Import user configs from old SRC",
    "tips": "Import configs from old SRC",
    "error": "Import failed, please check your configs",
    "step1": "Select old config files",
    "step2": "Confirm import",
    "step3": "Import succeed",
    "filePathTips": " under Present profile：",
    "btnOk": "Confirm",
    "btnImport": "Import",
    "btnGoBack": "Back",
    "btnReimport": "Reimport",
    "fileName": "File Name",
    "lastModify": "Last Modify Time",
    "file": {
      "choose": "Choose files"
    }
  },
  "modal": {
    "closeTipTitle": "Sure to close SRC ?",
    "closeTipContent": "All running instances will be terminated",
    "cancelText": "Cancel",
    "okText": "Confirm"
  }
}
```

`webapp/packages/renderer/src/locales/lang/ja-JP.json`:

```json
{
  "common": {
    "theme": "テーマ",
    "light": "ライトテーマ",
    "dark": "ダークテーマ",
    "language": "言語",
    "update": "アップデート",
    "global": "グローバル",
    "china": "中国",
    "install": "インストール",
    "installTips": "以前に SRC を使用したことがありますか？ここで設定をインポートすることができます"
  },
  "import": {
    "title": "既存の SRC からユーザー設定をインポートする",
    "tips": "SRC の設定ファイルをインポートすると、以前の設定をすべて復元することができます",
    "error": "ファイルの読み込みに失敗しました",
    "step1": "インポートするファイルを選択",
    "step2": "インポート中",
    "step3": "インポート完了",
    "filePathTips": " の中で以下の設定ファイルがあります：",
    "btnOk": "確認",
    "btnImport": "インポート",
    "btnGoBack": "戻る",
    "btnReimport": "再インポート",
    "fileName": "ファイル名",
    "lastModify": "最終更新日時",
    "file": {
      "choose": "ファイルを選択"
    }
  },
  "modal": {
    "closeTipTitle": "SRC を閉じますか？",
    "closeTipContent": "稼働中のすべてのインスタンスも停止します",
    "cancelText": "キャンセル",
    "okText": "確認"
  }
}
```

`webapp/packages/renderer/src/locales/lang/zh-CN.json`:

```json
{
  "common": {
    "theme": "主题",
    "light": "亮色主题",
    "dark": "黑暗主题",
    "language": "语言",
    "update": "更新",
    "global": "全球",
    "china": "中国大陆",
    "install": "安装",
    "installTips": "以前使用过 SRC？在这里导入你的设置"
  },
  "import": {
    "title": "从已有SRC中导入用户设置",
    "tips": "请将你的 SRC 设置文件拖拽到这里",
    "error": "导入失败，请检查文件是否正确",
    "step1": "选择旧的 SRC",
    "step2": "确认配置文件",
    "step3": "导入完成",
    "filePathTips": " 下存在的配置文件：",
    "btnOk": "确认",
    "btnImport": "导入",
    "btnGoBack": "返回",
    "btnReimport": "重新导入",
    "fileName": "文件名",
    "lastModify": "最后修改时间",
    "file": {
      "choose": "点击此处选择文件"
    }
  },
  "modal": {
    "closeTipTitle": "确定要关闭SRC吗？",
    "closeTipContent": "所有正在运行的SRC实例都将被终止",
    "cancelText": "取消",
    "okText": "确定"
  }
}
```

`webapp/packages/renderer/src/locales/lang/zh-TW.json`:

```json
{
  "common": {
    "theme": "主題",
    "light": "亮色主題",
    "dark": "黑暗主題",
    "language": "語言",
    "update": "更新",
    "global": "全球",
    "china": "中國大陸",
    "install": "安裝",
    "installTips": "先前使用過SRC？在這裡導入你的設定"
  },
  "import": {
    "title": "從已有SRC中導入用戶設定",
    "tips": "請將你的 SRC 設定檔拖拽到這裡",
    "error": "匯入失敗，請檢查檔是否正確",
    "step1": "選擇舊的SRC",
    "step2": "選擇要導入的設定",
    "step3": "導入成功",
    "filePathTips": " 下存在的配置檔：",
    "btnOk": "確定",
    "btnImport": "導入",
    "btnGoBack": "返回",
    "btnReimport": "重新導入",
    "fileName": "檔名稱",
    "lastModify": "最後修改時間",
    "file": {
      "choose": "點擊此處選擇檔"
    }
  },
  "modal": {
    "closeTipTitle": "確認要關閉SRC嗎？",
    "closeTipContent": "所有正在運行的SRC實例都將被終止",
    "cancelText": "取消",
    "okText": "確定"
  }
}
```

`webapp/packages/renderer/src/locales/setupI18n.ts`:

```ts
import type {I18n, I18nOptions} from 'vue-i18n';
import {createI18n} from 'vue-i18n';
import type {App} from 'vue';
import {localeSetting} from '/@/settings/localSetting';
import {useAppStore} from '/@/store/modules/app';
import messages from '@intlify/unplugin-vue-i18n/messages';
import {unref} from 'vue';

export let i18n: ReturnType<typeof createI18n<any>>;

const {fallback, availableLocales} = localeSetting;

async function createI18nOptions(): Promise<I18nOptions> {
  const appStore = useAppStore();
  const locale = unref(appStore.getLanguage) || 'en-US';
  // setHtmlPageLang(locale);
  // setLoadLocalePool(loadLocalePool => {
  //   loadLocalePool.push(locale);
  // });

  return {
    legacy: false,
    locale,
    fallbackLocale: fallback,
    messages: {
      [locale]: messages[locale],
    },
    availableLocales: availableLocales,
    sync: false, //If you don’t want to inherit locale from global scope, you need to set sync of i18n component option to false.
    silentTranslationWarn: true, // true - warning off
    missingWarn: false,
    silentFallbackWarn: true,
  };
}

// setup i18n instance with glob
export async function setupI18n(app: App) {
  const options = await createI18nOptions();
  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  // @ts-ignore
  i18n = createI18n(options) as I18n;
  app.use(i18n);
}

```

`webapp/packages/renderer/src/locales/useLocale.ts`:

```ts
/**
 * Multi-language related operations
 */
import type {LocaleType} from '/#/config';
import {i18n} from './setupI18n';
import {useLocaleStoreWithOut} from '/@/store/modules/locale';
import {unref, computed} from 'vue';
import messages from '@intlify/unplugin-vue-i18n/messages';

function setI18nLanguage(locale: LocaleType) {
  const localeStore = useLocaleStoreWithOut();
  if (i18n.mode === 'legacy') {
    i18n.global.locale = locale;
  } else {
    (i18n.global.locale as any).value = locale;
  }
  localeStore.setLocaleInfo({locale});
}

export function useLocale() {
  const localeStore = useLocaleStoreWithOut();
  const getLocale = computed(() => localeStore.getLocale);

  const getArcoLocale = computed((): any => {
    return i18n.global.getLocaleMessage(unref(getLocale)) ?? {};
  });

  // Switching the language will change the locale of useI18n
  // And submit to configuration modification
  async function changeLocale(locale: LocaleType) {
    const globalI18n = i18n.global;
    const currentLocale = unref(globalI18n.locale);
    if (currentLocale === locale) {
      return locale;
    }
    const langModule = messages[locale];
    if (!langModule) return;

    globalI18n.setLocaleMessage(locale, langModule);

    setI18nLanguage(locale);
    return locale;
  }

  return {
    getLocale,
    changeLocale,
    getArcoLocale,
  };
}

```

`webapp/packages/renderer/src/logics/error-handle/index.ts`:

```ts
import type {App} from 'vue';
import useIpcRenderer from '/@/hooks/useIpcRenderer';
import {PAGE_ERROR} from '@common/constant/eventNames';
import type {ErrorLogInfo} from '/#/store';
import {ErrorTypeEnum} from '/#/store';

function addErrorLogInfo(info: Record<any, any>) {
  const {ipcRendererSend} = useIpcRenderer();
  ipcRendererSend(PAGE_ERROR, JSON.stringify(info));
}

/**
 * get comp name
 * @param vm
 */
function formatComponentName(vm: any) {
  if (vm.$root === vm) {
    return {
      name: 'root',
      path: 'root',
    };
  }

  const options = vm.$options as any;
  if (!options) {
    return {
      name: 'anonymous',
      path: 'anonymous',
    };
  }
  const name = options.name || options._componentTag;
  return {
    name: name,
    path: options.__file,
  };
}

export function scriptErrorHandler(
  event: Event | string,
  source?: string,
  lineno?: number,
  colno?: number,
  error?: Error,
) {
  if (event === 'Script error.' && !source) {
    return false;
  }
  const errorInfo: Partial<ErrorLogInfo> = {};
  colno = colno || (window.event && (window.event as any).errorCharacter) || 0;
  errorInfo.message = event as string;
  if (error?.stack) {
    errorInfo.stack = error.stack;
  } else {
    errorInfo.stack = '';
  }
  const name = source ? source.substr(source.lastIndexOf('/') + 1) : 'script';
  addErrorLogInfo({
    type: ErrorTypeEnum.SCRIPT,
    name: name,
    file: source as string,
    detail: 'lineno' + lineno,
    url: window.location.href,
    ...(errorInfo as Pick<ErrorLogInfo, 'message' | 'stack'>),
  });
  return true;
}

/**
 * Handling error stack information
 * @param error
 */
function processStackMsg(error: Error) {
  if (!error.stack) {
    return '';
  }
  let stack = error.stack
    .replace(/\n/gi, '') // Remove line breaks to save the size of the transmitted content
    .replace(/\bat\b/gi, '@') // At in chrome, @ in ff
    .split('@') // Split information with @
    .slice(0, 9) // The maximum stack length (Error.stackTraceLimit = 10), so only take the first 10
    .map(v => v.replace(/^\s*|\s*$/g, '')) // Remove extra spaces
    .join('~') // Manually add separators for later display
    .replace(/\?[^:]+/gi, ''); // Remove redundant parameters of js file links (?x=1 and the like)
  const msg = error.toString();
  if (stack.indexOf(msg) < 0) {
    stack = msg + '@' + stack;
  }
  return stack;
}

function vueErrorHandler(err: Error, vm: any, info: string) {
  const {name, path} = formatComponentName(vm);
  addErrorLogInfo({
    type: ErrorTypeEnum.VUE,
    name,
    file: path,
    message: err.message,
    stack: processStackMsg(err),
    detail: info,
    url: window.location.href,
  });
}

function registerPromiseErrorHandler() {
  window.addEventListener(
    'unhandledrejection',
    function (event) {
      addErrorLogInfo({
        type: ErrorTypeEnum.PROMISE,
        name: 'Promise Error!',
        file: 'none',
        detail: 'promise error!',
        url: window.location.href,
        stack: 'promise error!',
        message: event.reason,
      });
    },
    true,
  );
}

function registerResourceErrorHandler() {
  // Monitoring resource loading error(img,script,css,and jsonp)
  window.addEventListener(
    'error',
    function (e: Event) {
      const target = e.target ? e.target : (e.srcElement as any);
      addErrorLogInfo({
        type: ErrorTypeEnum.RESOURCE,
        name: 'Resource Error!',
        file: (e.target || ({} as any)).currentSrc,
        detail: JSON.stringify({
          tagName: target.localName,
          html: target.outerHTML,
          type: e.type,
        }),
        url: window.location.href,
        stack: 'resource is not found',
        message: (e.target || ({} as any)).localName + ' is load error',
      });
    },
    true,
  );
}

export function setupErrorHandle(app: App) {
  // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  // @ts-ignore
  app.config.errorHandler = vueErrorHandler;

  // script error
  window.onerror = scriptErrorHandler;

  registerPromiseErrorHandler();
  registerResourceErrorHandler();
}

```

`webapp/packages/renderer/src/logics/initAppConfigStore.ts`:

```ts
import {useAppStore} from '/@/store/modules/app';
import {repositoryValueMap} from '/@/settings/repositorySeeing';

export async function initAppConfigStore() {
  const appStore = useAppStore();
  const config = await window.__electron_preload__getAlasConfig();
  appStore.setTheme(config?.theme ?? 'light');
  appStore.setLanguage(config?.language ?? 'zh-TW');
  appStore.setRepository(
    (repositoryValueMap[config?.repository] as 'global' | 'china') ?? 'global',
  );
  appStore.setWebuiUrl(config?.webuiUrl ?? '127.0.0.1:22367');
  appStore.setAlasPath(config?.alasPath ?? '');
}

```

`webapp/packages/renderer/src/router.ts`:

```ts
import {createRouter, createWebHashHistory} from 'vue-router';
import Alas from '/@/components/Alas.vue';

const routes = [
  {path: '/', name: 'Loading', component: () => import('./views/LoadingPage.vue')},
  {path: '/Install', name: 'InstallPage', component: () => import('./views/InstallAlas.vue')},
  {path: '/Launch', name: 'LaunchPage', component: () => import('./views/Launch.vue')},
  {path: '/Import', name: 'ImportConfig', component: () => import('./views/ImportConfig.vue')},
  {path: '/Alas', name: 'Alas', component: Alas},
];

export default createRouter({
  routes,
  history: createWebHashHistory(),
});

```

`webapp/packages/renderer/src/settings/localSetting.ts`:

```ts
import type {LocaleSetting, LocaleType} from '/#/config';

export const LOCALE: {[key: string]: LocaleType} = {
  ZH_CN: 'zh-CN',
  EN_US: 'en-US',
  JA_JP: 'ja-JP',
  ZH_TW: 'zh-TW',
};

// locale list
export const localeList: {label: string; value: keyof typeof LOCALE}[] = [
  {
    label: '简体中文',
    value: LOCALE.ZH_CN,
  },
  {
    label: 'English',
    value: LOCALE.EN_US,
  },
  {
    label: '日本語',
    value: LOCALE.JA_JP,
  },
  {
    label: '繁體中文',
    value: LOCALE.ZH_TW,
  },
];

export const localeSetting: LocaleSetting = {
  showPicker: true,
  // Locale
  locale: LOCALE.EN_US,
  // Default locale
  fallback: LOCALE.JA_JP,
  // available Locales
  availableLocales: [LOCALE.ZH_CN, LOCALE.EN_US, LOCALE.JA_JP, LOCALE.ZH_TW],
};

```

`webapp/packages/renderer/src/settings/repositorySeeing.ts`:

```ts
import type {OptionItem} from '/#/config';

export const repositoryMap = {
  china: 'cn',
  global: 'global',
};

export const repositoryValueMap = {
  [repositoryMap.global]: 'global',
  [repositoryMap.china]: 'china',
};

export const repositoryList: OptionItem[] = [
  {
    value: repositoryMap.china,
    label: '中国大陆',
  },
  {
    value: repositoryMap.global,
    label: '全球',
  },
];

```

`webapp/packages/renderer/src/settings/themeSetting.ts`:

```ts
import type {ThemeVal} from '/#/config';

export function setupThemeSetting(theme?: ThemeVal) {
  if (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    setTheme('dark');
    return;
  } else if (!theme && !window.matchMedia('(prefers-color-scheme: dark)').matches) {
    setTheme('light');
    return;
  }
  if (theme && theme === 'dark') {
    setTheme('dark');
    window.__electron_preload__ipcRendererSend('electron-theme', 'dark');
  } else {
    setTheme('light');
    window.__electron_preload__ipcRendererSend('electron-theme', 'light');
  }
}

export function setTheme(theme: ThemeVal) {
  if (theme === 'dark') {
    document.documentElement.classList.remove('light');
    document.documentElement.classList.add('dark');
    // Set to dark theme
    document.body.setAttribute('arco-theme', 'dark');
  } else {
    document.documentElement.classList.remove('dark');
    document.documentElement.classList.add('light');
    // Restore the light color theme
    document.body.setAttribute('arco-theme', 'light');
  }
}

```

`webapp/packages/renderer/src/store/index.ts`:

```ts
import type {App} from 'vue';
import {createPinia} from 'pinia';

const store = createPinia();

export function setupStore(app: App<Element>) {
  app.use(store);
}

export {store};

```

`webapp/packages/renderer/src/store/modules/app.ts`:

```ts
import {defineStore} from 'pinia';
import {store} from '/@/store';
import type {LocaleType, ThemeVal} from '/#/config';
import type {repositoryMap} from '/@/settings/repositorySeeing';

export const useAppStore = defineStore({
  id: 'app',
  state: (): AlasConfig => ({
    theme: 'light',
    language: 'zh-CN',
    repository: 'global',
    webuiUrl: '',
    alasPath: '',
  }),
  getters: {
    getTheme(): string {
      return this.theme;
    },
    getLanguage(): LocaleType {
      return this.language;
    },
    getRepository(): keyof typeof repositoryMap {
      return this.repository;
    },
    getWebuiUrl(): string {
      return this.webuiUrl;
    },
    getAlasPath(): string {
      return this.alasPath;
    },
  },
  actions: {
    setTheme(theme: ThemeVal) {
      this.theme = theme;
    },
    setLanguage(language: LocaleType) {
      this.language = language;
    },
    setRepository(repository: AlasConfig['repository']) {
      this.repository = repository;
    },
    setWebuiUrl(webuiUrl: AlasConfig['webuiUrl']) {
      this.webuiUrl = webuiUrl;
    },
    setAlasPath(alasPath: AlasConfig['alasPath']) {
      this.alasPath = alasPath;
    },
  },
});

export function useAppStoreWithOut() {
  return useAppStore(store);
}

```

`webapp/packages/renderer/src/store/modules/locale.ts`:

```ts
import type {LocaleSetting, LocaleType} from '/#/config';

import {defineStore} from 'pinia';
import {store} from '/@/store';
import {localeSetting} from '/@/settings/localSetting';

const lsLocaleSetting = localeSetting as LocaleSetting;

interface LocaleState {
  localInfo: LocaleSetting;
}

export const useLocaleStore = defineStore({
  id: 'app-locale',
  state: (): LocaleState => ({
    localInfo: lsLocaleSetting,
  }),
  getters: {
    getShowPicker(): boolean {
      return !!this.localInfo?.showPicker;
    },
    getLocale(): LocaleType {
      return this.localInfo?.locale ?? 'zh_CN';
    },
  },
  actions: {
    /**
     * Set up multilingual information and cache
     * @param info multilingual info
     */
    setLocaleInfo(info: Partial<LocaleSetting>) {
      this.localInfo = {...this.localInfo, ...info};
    },
    /**
     * Initialize multilingual information and load the existing configuration from the local cache
     */
    initLocale() {
      this.setLocaleInfo({
        ...localeSetting,
        ...this.localInfo,
      });
    },
  },
});

// Need to be used outside the setup
export function useLocaleStoreWithOut() {
  return useLocaleStore(store);
}

```

`webapp/packages/renderer/src/utils/is.ts`:

```ts
const toString = Object.prototype.toString;

export function is(val: unknown, type: string) {
  return toString.call(val) === `[object ${type}]`;
}

export function isDef<T = unknown>(val?: T): val is T {
  return typeof val !== 'undefined';
}

export function isUnDef<T = unknown>(val?: T): val is T {
  return !isDef(val);
}

export function isObject(val: any): val is Record<any, any> {
  return val !== null && is(val, 'Object');
}

export function isEmpty<T = unknown>(val: T): val is T {
  if (isArray(val) || isString(val)) {
    return val.length === 0;
  }

  if (val instanceof Map || val instanceof Set) {
    return val.size === 0;
  }

  if (isObject(val)) {
    return Object.keys(val).length === 0;
  }

  return false;
}

export function isDate(val: unknown): val is Date {
  return is(val, 'Date');
}

export function isNull(val: unknown): val is null {
  return val === null;
}

export function isNullAndUnDef(val: unknown): val is null | undefined {
  return isUnDef(val) && isNull(val);
}

export function isNullOrUnDef(val: unknown): val is null | undefined {
  return isUnDef(val) || isNull(val);
}

export function isNumber(val: unknown): val is number {
  return is(val, 'Number');
}

export function isPromise<T = any>(val: unknown): val is Promise<T> {
  return is(val, 'Promise') && isObject(val) && isFunction(val.then) && isFunction(val.catch);
}

export function isString(val: unknown): val is string {
  return is(val, 'String');
}

export function isFunction(val: unknown): val is Function {
  return typeof val === 'function';
}

export function isBoolean(val: unknown): val is boolean {
  return is(val, 'Boolean');
}

export function isRegExp(val: unknown): val is RegExp {
  return is(val, 'RegExp');
}

export function isArray(val: any): val is Array<any> {
  return val && Array.isArray(val);
}

export function isWindow(val: any): val is Window {
  return typeof window !== 'undefined' && is(val, 'Window');
}

export function isElement(val: unknown): val is Element {
  return isObject(val) && !!val.tagName;
}

export function isMap(val: unknown): val is Map<any, any> {
  return is(val, 'Map');
}

```

`webapp/packages/renderer/src/views/ImportConfig.vue`:

```vue
<template>
  <div class="flex flex-col h-full px-5 pt-10 relative">
    <a-button
      type="text"
      class="!absolute !left-9 !top-18 !hover:bg-transparent"
      :onclick="goBack"
    >
      <arrow-left-outlined class="text-4xl text-slate dark:text-gray-200 opacity-25" />
    </a-button>
    <section class="ml-20 mt-2">
      <AlasTitle />
      <span>{{ t('import.title') }}</span>
    </section>
    <div class="flex h-full">
      <a-steps
        :current="current"
        direction="vertical"
        class="mt-10 ml-64 w-32 alas-steps h-64"
      >
        <a-step>
          {{ t('import.step1') }}
          <template #icon> 1</template>
        </a-step>
        <a-step>
          {{ t('import.step2') }}
          <template #icon> 2</template>
        </a-step>
        <a-step>
          {{ t('import.step3') }}
          <template #icon> 3</template>
        </a-step>
      </a-steps>
      <div class="w-fit h-full relative overflow-hidden alas-step-con-box">
        <div
          class="w-full h-full transition-all duration-500 ease-in-out absolute top-0 left-0 flex flex-col justify-between"
          :style="transformStep1"
        >
          <div>
            <a-typography-title :heading="3">{{ stepTipsOptions[current] }}</a-typography-title>
            <a-upload
              draggable
              multiple
              :custom-request="customRequest as any"
              accept=".json,.yaml"
            >
              <template #upload-button>
                <div class="alas-upload">
                  <div>
                    <a-typography-title
                      :heading="4"
                      class="opacity-25"
                    >
                      {{ t('import.file.choose') }}
                    </a-typography-title>
                  </div>
                </div>
              </template>
              <template #upload-item></template>
            </a-upload>
          </div>
        </div>
        <div
          class="w-full h-full transition-all duration-500 ease-in-out absolute top-0 left-0 z-36 flex flex-col justify-between"
          :style="transformStep2"
        >
          <div>
            <a-typography-title
              class="px-2 box-border"
              :heading="3"
            >
              {{ stepTipsOptions[current] }}
            </a-typography-title>
            <a-typography-text
              class="px-2 box-border"
              ellipsis
            >
              {{ fileParentPath }}{{ t('import.filePathTips') }}
            </a-typography-text>
            <section class="flex justify-between w-full px-2 box-border alas-file-title">
              <a-typography-title :heading="6">{{ t('import.fileName') }}</a-typography-title>
              <a-typography-title :heading="6">{{ t('import.lastModify') }}</a-typography-title>
            </section>
            <a-list class="alas-file-list overflow-y-auto overscroll-contain max-h-96">
              <a-list-item
                v-for="fileItem in fileItems"
                :key="fileItem.uid"
              >
                <a-list-item-meta :title="fileItem.name"></a-list-item-meta>
                <template #actions>
                  <span>{{ fileItem.lastModifyTime }}</span>
                </template>
              </a-list-item>
            </a-list>
          </div>

          <a-space class="pt-10 pb-15 flex justify-end align-content-end">
            <a-button
              :onclick="onCancel"
              size="large"
            >
              {{ t('import.btnGoBack') }}
            </a-button>
            <a-button
              type="primary"
              :onclick="onOkSave"
              size="large"
              :loading="saveLoading"
            >
              {{ t('import.btnImport') }}
            </a-button>
          </a-space>
        </div>
        <div
          class="w-full h-full transition-all duration-500 ease-in-out absolute top-0 left-0 z-36 flex flex-col justify-between"
          :style="transformStep3"
        >
          <div>
            <a-typography-title
              class="px-2 box-border"
              :heading="3"
            >
              {{ stepTipsOptions[current] }}
            </a-typography-title>
            <a-typography-text class="px-2 box-border">
              {{ configDirPath }} {{ t('import.filePathTips') }}
            </a-typography-text>
            <section class="flex justify-between w-full px-2 box-border alas-file-title">
              <a-typography-title :heading="6">{{ t('import.fileName') }}</a-typography-title>
              <a-typography-title :heading="6">{{ t('import.lastModify') }}</a-typography-title>
            </section>
            <a-list class="alas-file-list overflow-y-auto overscroll-contain max-h-96">
              <a-list-item
                v-for="fileItem in configDirFiles"
                :key="fileItem.uid"
              >
                <a-list-item-meta :title="fileItem.name"></a-list-item-meta>
                <template #actions>
                  <span>{{ fileItem.lastModifyTime }}</span>
                </template>
              </a-list-item>
            </a-list>
          </div>
          <a-space class="pt-10 pb-15 flex justify-end align-content-end">
            <a-button
              :onclick="onReimport"
              size="large"
            >
              {{ t('import.btnReimport') }}
            </a-button>
            <a-button
              type="primary"
              :onclick="goBack"
              size="large"
            >
              {{ t('import.btnOk') }}
            </a-button>
          </a-space>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import {computed, ref} from 'vue';
import AlasTitle from '/@/components/AlasTitle.vue';
import {ArrowLeftOutlined} from '@ant-design/icons-vue';
import router from '/@/router';
import {useI18n} from '/@/hooks/useI18n';
import dayjs from 'dayjs';
import {useAppStore} from '/@/store/modules/app';
import {Modal} from '@arco-design/web-vue';
import type {RequestOption, UploadRequest} from '@arco-design/web-vue/es/upload/interfaces';
import {nanoid} from 'nanoid';

const {t} = useI18n();

const stepTipsOptions = ref({
  1: t('import.step1'),
  2: t('import.step2'),
  3: t('import.step3'),
});

const appStore = useAppStore();

const saveLoading = ref<boolean>(false);

const fileItems = ref<
  {file: File | undefined; uid: string; name: string; lastModifyTime: string}[]
>([]);

const configDirFiles = ref<{uid: string; name: string; path: string; lastModifyTime: string}[]>([]);
const configDirPath = ref('');

const current = ref(1);

const fileParentPath = computed(() => {
  let pathStr = '';
  fileItems.value.forEach(item => {
    const [path] = item?.file?.path.split('AzurLaneAutoScript') || ['unknown'];
    if (pathStr !== path) pathStr = path;
  });
  return pathStr;
});

const transformStep1 = computed(() => {
  if (current.value === 1) return {transform: 'translateY(0)'};
  return {transform: 'translateY(-100%)', opacity: 0};
});
const transformStep2 = computed(() => {
  if (current.value === 1) return {transform: 'translateY(100%)', opacity: 0};
  if (current.value === 2) return {transform: 'translateY(0)'};
  return {transform: 'translateY(-100%)', opacity: 0};
});
const transformStep3 = computed(() => {
  if (current.value === 3) return {transform: 'translateY(0)'};
  return {transform: 'translateY(100%)', opacity: 0};
});

const goBack = () => {
  router.back();
};

const customRequest = (option: RequestOption): UploadRequest | undefined => {
  const {fileItem} = option;
  current.value = 2;
  fileItems.value.push({
    file: fileItem.file,
    uid: fileItem.uid,
    name: fileItem?.file?.name || '',
    lastModifyTime: dayjs(fileItem?.file?.lastModified || new Date()).format('YYYY-MM-DD HH:mm:ss'),
  });
  return undefined;
};

const onOkSave = async () => {
  saveLoading.value = true;
  const paths = fileItems.value.map(item => item.file?.path || '');
  if (paths.includes('')) {
    throw new Error('Wrong file path, please try again');
  }
  await window.__electron_preload__copyFilesToDir(paths, appStore.getAlasPath + '/config', {
    filedCallback: e => {
      Modal.error({
        title: 'Error Notification',
        content: e.toString(),
      });
    },
  });
  const {configPath = '', files = []} = window.__electron_preload__getAlasConfigDirFiles();
  configDirPath.value = configPath;
  configDirFiles.value = files.map(item => ({
    uid: nanoid(),
    name: item.name || '--',
    path: item.path || '--',
    lastModifyTime: dayjs(item.lastModifyTime || 0).format('YYYY-MM-DD HH:mm:ss'),
  }));

  saveLoading.value = false;

  current.value = 3;
};

const onCancel = () => {
  current.value = 1;
  fileItems.value = [];
};

const onReimport = onCancel;
</script>

<style lang="less" scoped>
.alas-steps {
  :deep(.arco-steps-item) {
    overflow: visible;
    width: 100px;
  }

  :deep(.arco-steps-item-content) {
    width: 200px;
    text-align: right;
    transform: translateX(-250px);
  }

  :deep(.arco-steps-item-wait) {
    .arco-steps-item-node {
      .arco-steps-icon {
        border: 2px solid rgb(var(--primary-6));
        color: rgb(var(--primary-6));
      }
    }
  }
}

.alas-step-con-box {
  width: calc(100vw - 32rem);
}

.alas-upload {
  border-radius: 2rem;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  width: calc(100vw - 32rem);
  height: calc(100vh - 22rem);
  max-width: 789px;
  max-height: 485px;
}
.alas-file-title {
  border-bottom: 2px solid var(--color-border-3);
}

.alas-file-list {
  :deep(.arco-list-wrapper) {
    border: none;
  }

  :deep(.arco-list-bordered) {
    border: none;
  }

  .arco-list-split .arco-list-header,
  .arco-list-split .arco-list-item:not(:last-child) {
    border: none;
  }

  .arco-list-medium .arco-list-content-wrapper .arco-list-content > .arco-list-item {
    padding: 0.25rem 0.5rem;
  }
}

body[arco-theme='light'] {
  .alas-upload {
    border: 2px solid var(--color-border-1);
  }

  .alas-steps {
    :deep(.arco-steps-item-wait) {
      .arco-steps-item-node {
        .arco-steps-icon {
          background: var(--color-bg-4);
        }
      }
    }
  }
}

body[arco-theme='dark'] {
  .alas-upload {
    border: 2px solid var(--color-border-3);
  }

  .alas-steps {
    :deep(.arco-steps-item-wait) {
      .arco-steps-item-node {
        .arco-steps-icon {
          background: var(--color-bg-4);
        }
      }
    }
  }
}
</style>

```

`webapp/packages/renderer/src/views/InstallAlas.vue`:

```vue
<template>
  <div class="w-full h-full flex justify-center items-center flex-col">
    <AlasTitle />
    <section class="mt-5 w-148">
      <a-form
        class="alas-install flex-auto w-full justify-between"
        layout="inline"
        :label-col="{style: 'width: 100px'}"
        :label-align="'left'"
        :model="configForm"
      >
        <a-form-item
          :wrapper-col="{style: 'width: 100%'}"
          :label="t('common.language')"
          name="language"
        >
          <a-select
            v-model="configForm.language"
            :options="localeList"
            @change="selectLanguage"
          />
        </a-form-item>
        <a-form-item
          :wrapper-col="{span: 16}"
          :label="t('common.update')"
          name="repository"
        >
          <a-select
            v-model="configForm.repository"
            :options="repositoryOptions"
            @change="selectRepository"
          />
        </a-form-item>
        <a-form-item
          :wrapper-col="{span: 16}"
          :label="t('common.theme')"
          name="theme"
        >
          <a-select
            v-model="configForm.theme"
            :options="themeOptions"
            @change="selectTheme"
          />
        </a-form-item>
      </a-form>
      <div class="w-full text-end">
        <a-button
          type="link"
          class="text-end cursor-pointer p-0 install-tips"
          :onclick="goToImportPage"
        >
          <a-typography-text>
            {{ t('common.installTips') }}
          </a-typography-text>
        </a-button>
      </div>
    </section>
    <AButton
      type="primary"
      size="large"
      class="!mt-16 !w-48 !h-16 !bg-primary !rounded-xl"
      :onclick="installAlas"
      :loading="installLoading"
    >
      <a-typography-text class="text-2xl !text-current !dark:text-dark">
        {{ t('common.install') }}
      </a-typography-text>
    </AButton>
  </div>
</template>

<script lang="ts" setup>
import AlasTitle from '/@/components/AlasTitle.vue';
import {useI18n} from '/@/hooks/useI18n';
import {computed, ref, unref} from 'vue';
import {localeList} from '/@/settings/localSetting';
import {useAppStoreWithOut} from '/@/store/modules/app';
import type {LocaleType, ThemeVal} from '/#/config';
import {setupThemeSetting} from '/@/settings/themeSetting';
import {useLocale} from '/@/locales/useLocale';
import router from '/@/router';
import {AlasGuiTheme} from '@common/constant/theme';
import {repositoryMap} from '/@/settings/repositorySeeing';

const {t} = useI18n();
const appStore = useAppStoreWithOut();
const {changeLocale} = useLocale();

const installLoading = ref<boolean>(false);

const configForm = ref<{
  language: LocaleType;
  repository: string;
  theme: ThemeVal;
}>({
  language: unref(appStore.getLanguage),
  repository: unref(appStore.getRepository),
  theme: unref(appStore.getTheme) as ThemeVal,
});

const repositoryOptions = computed(() => [
  {
    label: t('common.global'),
    value: 'global',
  },
  {
    label: t('common.china'),
    value: 'china',
  },
]);

const themeOptions = computed(() => [
  {
    label: t('common.light'),
    value: 'light',
  },
  {
    label: t('common.dark'),
    value: 'dark',
  },
]);

const selectLanguage = (value: LocaleType) => {
  appStore.setLanguage(value);
  changeLocale(value);
};
const selectRepository = (value: string) => {
  appStore.setRepository(value);
};
const selectTheme = (value: ThemeVal) => {
  appStore.setTheme(value);
  setupThemeSetting(value);
};

const goToImportPage = () => {
  router.push('/import');
};

const installAlas = async () => {
  installLoading.value = true;
  const modifyConfig = {
    Language: unref(appStore.getLanguage),
    Repository: repositoryMap[unref(appStore.getRepository)],
    Theme: AlasGuiTheme[unref(appStore.theme)],
  };
  const filePath = unref(appStore.alasPath);
  window.__electron_preload__modifyConfigYaml(filePath, modifyConfig);
  installLoading.value = false;
  router.push('/Launch');
};
</script>

<style lang="less" scoped>
.alas-install {
  :deep(.arco-select-view-single) {
    min-width: 120px;
    background: var(--color-bg);
    border-left: none;
    border-right: none;
    border-top: none;
    border-bottom: 2px solid rgb(var(--primary-6));
    border-radius: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    .arco-select-view-value {
      justify-content: center;
    }

    .arco-select-view-suffix {
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);

      .arco-select-view-arrow-icon {
        transition: ease-in-out 0.2s;
      }
    }
  }

  .arco-form-item-layout-inline {
    margin-right: 0;
  }
}
</style>

```

`webapp/packages/renderer/src/views/Launch.vue`:

```vue
<template>
  <div class="w-full h-full flex justify-center items-center flex-col relative">
    <section class="w-full flex items-center flex-col overflow-h">
      <LoadingOutlined class="text-6xl text-primary mb-20" />
      <AlasTitle />
      <div
        id="scrollRef"
        ref="scrollRef"
        class="w-10/12 max-w-156 h-96 mt-5 overflow-y-scroll overscroll-contain"
      >
        <main class="w-full max-w-full">
          <pre
            v-for="logInfo in logInfos"
            :key="logInfo"
            class="text-xs text-gray-400 w-full max-w-full whitespace-pre-wrap break-all"
          >{{ logInfo }}</pre>
        </main>
      </div>
    </section>
    <ProgressBar
      class="absolute inset-x-0 bottom-0"
      :progress-value="progress"
    />
  </div>
</template>

<script lang="ts">
import {defineComponent, onMounted, ref, unref, nextTick} from 'vue';
import AlasTitle from '/@/components/AlasTitle.vue';
import ProgressBar from '/@/components/ProgressBar.vue';
import useIpcRenderer from '/@/hooks/useIpcRenderer';
import router from '../router';
import {LoadingOutlined} from '@ant-design/icons-vue';
import {ALAS_LOG, INSTALLER_READY, WINDOW_READY} from '@common/constant/eventNames';

export default defineComponent({
  name: 'LaunchPage',
  components: {
    AlasTitle,
    ProgressBar,
    LoadingOutlined,
  },
  setup() {
    const logInfos = ref<string[]>([]);
    const progress = ref<number>(0);
    const {ipcRendererOn, ipcRendererSend} = useIpcRenderer();
    const scrollRef = ref<HTMLElement>();

    onMounted(() => {
      ipcRendererSend(WINDOW_READY, true);

      ipcRendererOn(ALAS_LOG, async (_, arg: string) => {
        logInfos.value.push(arg);
        await nextTick();
        scrollToBottom();
        handelAlasInfo(arg);
        handleProgress(arg);
      });
    });

    const scrollToBottom = () => {
      const scrollDiv = unref(scrollRef);
      scrollDiv?.scrollTo(0, scrollDiv?.scrollHeight);
    };

    const handelAlasInfo = (logStr: string) => {
      if (logStr?.includes('Application startup complete') || logStr?.includes('bind on address')) {
        router.push('/alas')
      }
    };

    const handleProgress = (logStr: string) => {
      if (!logStr?.includes('Process')) return;
      const processInfo = logStr.match(/Process: \[\s(.+?)\s\]/g)?.pop();
      const processVal = processInfo?.match(/\d+/g)?.pop();
      processVal && (progress.value = Number(processVal));
      if (progress.value !== 100) return;
      ipcRendererSend(INSTALLER_READY, true);
    };

    return {
      logInfos,
      progress,
      scrollRef,
    };
  },
});
</script>

<style lang="less" scoped>
  #scrollRef::-webkit-scrollbar {
    width: 3px;
    height: 1px;
  }

  #scrollRef::-webkit-scrollbar-thumb {
    border-radius: 10px;
    background: #aeaeae;
  }

  #scrollRef::-webkit-scrollbar-track {
    border-radius: 10px;
    background: #ededed;
  }
</style>

```

`webapp/packages/renderer/src/views/LoadingPage.vue`:

```vue
<template>
  <div class="w-full h-full flex justify-center items-center">
    <ASpin
      dot
      :size="30"
      tip="SRC Loading..."
    />
  </div>
</template>

<script lang="ts" setup>
import {onMounted} from 'vue';
import router from '/@/router';
onMounted(() => {
  const isFirst = window.__electron_preload__checkIsNeedInstall();
  if (!isFirst) {
    router.push('/Install');
  } else {
    router.push('/Launch');
  }
});
</script>

<style scoped></style>

```

`webapp/packages/renderer/tsconfig.json`:

```json
{
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "sourceMap": false,
    "moduleResolution": "Node",
    "skipLibCheck": true,
    "strict": true,
    "isolatedModules": true,
    "esModuleInterop": true,
    "jsx": "preserve",
    "types": ["node", "vite/client"],
    "baseUrl": ".",
    "paths": {
      "#preload": ["../preload/src/index"],
      "/@/*": ["./src/*"],
      "/#/*": ["types/*"],
      "@common/*": ["../common/*"]
    },
    "lib": ["ESNext", "dom", "dom.iterable"]
  },
  "include": [
    "src/**/*.vue",
    "src/**/*.ts",
    "src/**/*.tsx",
    "types/**/*.d.ts",
    "../../types/**/*.d.ts",
    "../../../types/**/*.d.ts",
    "./components.d.ts"
  ],
  "exclude": ["**/*.spec.ts", "**/*.test.ts"],
  "typeRoots": ["../../node_modules/@types/", "./types", "../../../types"]
}

```

`webapp/packages/renderer/types/config.d.ts`:

```ts
z;
/**
 * 'zh-CN' | 'en-US' | 'ja-JP' | 'zh-TW'
 */
export type LocaleType = 'zh-CN' | 'en-US' | 'ja-JP' | 'zh-TW';

export interface LocaleSetting {
  showPicker: boolean;
  // Current language
  locale: LocaleType;
  // default language
  fallback: LocaleType;
  // available Locales
  availableLocales: LocaleType[];
}

export interface OptionItem {
  value: string;
  label: string;
}

export type ThemeVal = 'dark' | 'light';

```

`webapp/packages/renderer/types/index.d.ts`:

```ts
import type {BinaryLike} from 'node:crypto';
import type {AlasConfig} from '../../preload/src/alasConfig';
import {CopyToDirOptions} from '@common/utils/copyFilesToDir';
export {};

declare global {
  interface Window {
    __electron_preload__sha256sum: (data: BinaryLike) => string;
    __electron_preload__versions: string;
    __electron_preload__ipcRendererSend: (channel: string, ...args: any[]) => void;
    __electron_preload__ipcRendererOn: (
      channel: string,
      listener: (event: Electron.IpcRendererEvent, ...args: any[]) => void,
    ) => Electron.IpcRenderer;
    __electron_preload__getAlasConfig: () => AlasConfig;
    __electron_preload__checkIsNeedInstall: () => boolean;
    __electron_preload__getAlasConfigDirFiles: () => {
      configPath: string;
      files: {name: string; path: string; lastModifyTime: Date}[];
    };
    __electron_preload__modifyConfigYaml: (filePath: string, keyObj: {[k in string]: any}) => void;
    __electron_preload__copyFilesToDir: (
      pathList: string[],
      targetDirPath: string,
      options?: CopyToDirOptions | undefined,
    ) => Promise<void>;
  }
}

```

`webapp/packages/renderer/types/shims-vue.d.ts`:

```ts
declare module '*.vue' {
  import type {DefineComponent} from 'vue';
  // eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/no-explicit-any
  const component: DefineComponent<{}, {}, any>;
  export default component;
}

```

`webapp/packages/renderer/types/store.d.ts`:

```ts
export enum ErrorTypeEnum {
  VUE = 'vue',
  SCRIPT = 'script',
  RESOURCE = 'resource',
  AJAX = 'ajax',
  PROMISE = 'promise',
}

// Lock screen information
export interface LockInfo {
  // Password required
  pwd?: string | undefined;
  // Is it locked?
  isLock?: boolean;
}

// Error-log information
export interface ErrorLogInfo {
  // Type of error
  type: ErrorTypeEnum;
  // Error file
  file: string;
  // Error name
  name?: string;
  // Error message
  message: string;
  // Error stack
  stack?: string;
  // Error detail
  detail: string;
  // Error url
  url: string;
  // Error time
  time?: string;
}

```

`webapp/packages/renderer/uno.config.ts`:

```ts
// uno.config.ts
import {
  defineConfig,
  presetAttributify,
  presetIcons,
  presetTypography,
  presetUno,
  presetWebFonts,
  transformerDirectives,
  transformerVariantGroup,
} from 'unocss';
import {primaryColor} from './build/config/themeConfig';

export default defineConfig({
  theme: {
    colors: {
      primary: primaryColor,
      white: '#ffffff',
      neutral: '#C4C4C4',
      dark: '#2f3136',
      slate: '#020617',
    },
  },
  presets: [presetUno(), presetAttributify(), presetIcons(), presetTypography(), presetWebFonts()],
  transformers: [transformerDirectives(), transformerVariantGroup()],
});

```

`webapp/packages/renderer/vite.config.js`:

```js
/* eslint-env node */

import {chrome} from '../../electron-vendors.config.json';
import vue from '@vitejs/plugin-vue';
import {renderer} from 'unplugin-auto-expose';
import {join, resolve} from 'node:path';
import {injectAppVersion} from '../../version/inject-app-version-plugin.mjs';
import {vitePluginForArco} from '@arco-plugins/vite-vue';
import UnoCSS from 'unocss/vite';
import AutoImport from 'unplugin-auto-import/vite';
import Components from 'unplugin-vue-components/vite';
import {ArcoResolver} from 'unplugin-vue-components/resolvers';

/**
 * https://github.com/arco-design/arco-plugins/blob/main/packages/plugin-vite-react/README.md
 */
import VueI18nPlugin from '@intlify/unplugin-vue-i18n/vite';

// your plugin installation

const PACKAGE_ROOT = __dirname;
const PROJECT_ROOT = join(PACKAGE_ROOT, '../..');

/**
 * @type {import('vite').UserConfig}
 * @see https://vitejs.dev/config/
 */
const config = {
  mode: process.env.MODE,
  root: PACKAGE_ROOT,
  envDir: PROJECT_ROOT,
  resolve: {
    alias: [
      {
        find: '/@/',
        replacement: join(PACKAGE_ROOT, 'src') + '/',
      },
      {
        find: 'vue-i18n',
        replacement: 'vue-i18n/dist/vue-i18n.cjs.js',
      },
      {
        find: '@common',
        replacement: join(PACKAGE_ROOT, '../common') + '/',
      },
    ],
  },
  base: '',
  server: {
    fs: {
      strict: true,
    },
  },
  build: {
    sourcemap: true,
    target: `chrome${chrome}`,
    outDir: 'dist',
    assetsDir: '.',
    rollupOptions: {
      input: join(PACKAGE_ROOT, 'index.html'),
    },
    emptyOutDir: true,
    reportCompressedSize: false,
  },
  test: {
    environment: 'happy-dom',
  },
  css: {
    preprocessorOptions: {
      less: {
        javascriptEnabled: true,
      },
    },
  },
  plugins: [
    vue(),
    renderer.vite({
      preloadEntry: join(PACKAGE_ROOT, '../preload/src/index.ts'),
    }),
    injectAppVersion(),
    AutoImport({
      resolvers: [ArcoResolver()],
    }),
    Components({
      resolvers: [
        ArcoResolver({
          sideEffect: true,
        }),
      ],
    }),
    new vitePluginForArco({
      theme: '@arco-themes/vue-am-alas',
    }),
    VueI18nPlugin({
      include: resolve(PACKAGE_ROOT, './src/locales/lang/**'),
    }),
    UnoCSS({
      configFile: './uno.config.ts',
    }),
  ],
  optimizeDeps: {
    include: [
      '@arco-design/web-vue/es/locale/lang/zh-cn',
      '@arco-design/web-vue/es/locale/lang/en-us',
      '@arco-design/web-vue/es/locale/lang/ja-jp',
      '@arco-design/web-vue/es/locale/lang/zh-tw',
    ],
  },
};

export default config;

```

`webapp/scripts/build.js`:

```js
#!/usr/bin/node
const {build} = require('vite');
const {dirname} = require('path');

/** @type 'production' | 'development' | 'test' */
const mode = (process.env.MODE = process.env.MODE || 'production');

const packagesConfigs = [
  'packages/main/vite.config.js',
  'packages/preload/vite.config.js',
  'packages/renderer/vite.config.js',
];

/**
 * Run `vite build` for config file
 */
const buildByConfig = configFile => build({configFile, mode});
(async () => {
  try {
    const totalTimeLabel = 'Total bundling time';
    console.time(totalTimeLabel);

    for (const packageConfigPath of packagesConfigs) {
      const consoleGroupName = `${dirname(packageConfigPath)}/`;
      console.group(consoleGroupName);

      const timeLabel = 'Bundling time';
      console.time(timeLabel);

      await buildByConfig(packageConfigPath);

      console.timeEnd(timeLabel);
      console.groupEnd();
      console.log('\n'); // Just for pretty print
    }
    console.timeEnd(totalTimeLabel);
  } catch (e) {
    console.error(e);
    process.exit(1);
  }
})();

```

`webapp/scripts/update-electron-vendors.js`:

```js
const {writeFile, readFile} = require('fs/promises');
const {execSync} = require('child_process');
const electron = require('electron');
const path = require('path');

/**
 * Returns versions of electron vendors
 * The performance of this feature is very poor and can be improved
 * @see https://github.com/electron/electron/issues/28006
 *
 * @returns {NodeJS.ProcessVersions}
 */
function getVendors() {
  const output = execSync(`${electron} -p "JSON.stringify(process.versions)"`, {
    env: {ELECTRON_RUN_AS_NODE: '1'},
    encoding: 'utf-8',
  });

  return JSON.parse(output);
}

function formattedJSON(obj) {
  return JSON.stringify(obj, null, 2) + '\n';
}

function updateVendors() {
  const electronRelease = getVendors();

  const nodeMajorVersion = electronRelease.node.split('.')[0];
  const chromeMajorVersion = electronRelease.v8.split('.')[0] + electronRelease.v8.split('.')[1];

  const packageJSONPath = path.resolve(process.cwd(), 'package.json');

  return Promise.all([
    writeFile(
      './electron-vendors.config.json',
      formattedJSON({
        chrome: chromeMajorVersion,
        node: nodeMajorVersion,
      }),
    ),

    readFile(packageJSONPath)
      .then(JSON.parse)
      .then(packageJSON => {
        if (!packageJSON || !Array.isArray(packageJSON.browserslist)) {
          throw new Error(`Can't find browserslist in ${packageJSONPath}`);
        }

        packageJSON.browserslist = [`Chrome ${chromeMajorVersion}`];

        return writeFile(packageJSONPath, formattedJSON(packageJSON));
      }),
  ]);
}

updateVendors().catch(err => {
  console.error(err);
  process.exit(1);
});

```

`webapp/scripts/update-electron-vendors.mjs`:

```mjs
/**
 * This script should be run in electron context
 * @example
 *  ELECTRON_RUN_AS_NODE=1 electron scripts/update-electron-vendors.mjs
 */

import {writeFileSync} from 'fs';
import path from 'path';

const electronRelease = process.versions;

const node = electronRelease.node.split('.')[0];
const chrome = electronRelease.v8.split('.').splice(0, 2).join('');

const browserslistrcPath = path.resolve(process.cwd(), '.browserslistrc');

writeFileSync('./.electron-vendors.cache.json', JSON.stringify({chrome, node}));
writeFileSync(browserslistrcPath, `Chrome ${chrome}`, 'utf8');

```

`webapp/scripts/watch.js`:

```js
#!/usr/bin/node

const {createServer, build, createLogger} = require('vite');
const electronPath = require('electron');
const {spawn} = require('child_process');

/** @type 'production' | 'development' | 'test' */
const mode = (process.env.MODE = process.env.MODE || 'development');

/** @type {import('vite').LogLevel} */
const LOG_LEVEL = 'warn';

/** @type {import('vite').InlineConfig} */
const sharedConfig = {
  mode,
  build: {
    watch: {},
  },
  logLevel: LOG_LEVEL,
};

/**
 * @param configFile
 * @param writeBundle
 * @param name
 * @returns {Promise<import('vite').RollupOutput | Array<import('vite').RollupOutput> | import('vite').RollupWatcher>}
 */
const getWatcher = ({name, configFile, writeBundle}) => {
  return build({
    ...sharedConfig,
    configFile,
    plugins: [{name, writeBundle}],
  });
};

/**
 * Start or restart App when source files are changed
 * @param {import('vite').ViteDevServer} viteDevServer
 * @returns {Promise<import('vite').RollupOutput | Array<import('vite').RollupOutput> | import('vite').RollupWatcher>}
 */
const setupMainPackageWatcher = viteDevServer => {
  // Write a value to an environment variable to pass it to the main process.
  {
    const protocol = `http${viteDevServer.config.server.https ? 's' : ''}:`;
    const host = viteDevServer.config.server.host || 'localhost';
    const port = viteDevServer.config.server.port; // Vite searches for and occupies the first free port: 3000, 3001, 3002 and so on
    const path = '/';
    process.env.VITE_DEV_SERVER_URL = `${protocol}//${host}:${port}${path}`;
  }

  const logger = createLogger(LOG_LEVEL, {
    prefix: '[main]',
  });

  /** @type {ChildProcessWithoutNullStreams | null} */
  let spawnProcess = null;

  return getWatcher({
    name: 'reload-app-on-main-package-change',
    configFile: 'packages/main/vite.config.js',
    writeBundle() {
      if (spawnProcess !== null) {
        spawnProcess.kill('SIGINT');
        spawnProcess = null;
      }

      spawnProcess = spawn(String(electronPath), ['.']);

      spawnProcess.stdout.on(
        'data',
        d => d.toString().trim() && logger.warn(d.toString(), {timestamp: true}),
      );
      spawnProcess.stderr.on(
        'data',
        d => d.toString().trim() && logger.error(d.toString(), {timestamp: true}),
      );
    },
  });
};

/**
 * Start or restart App when source files are changed
 * @param {import('vite').ViteDevServer} viteDevServer
 * @returns {Promise<import('vite').RollupOutput | Array<import('vite').RollupOutput> | import('vite').RollupWatcher>}
 */
const setupPreloadPackageWatcher = viteDevServer => {
  return getWatcher({
    name: 'reload-page-on-preload-package-change',
    configFile: 'packages/preload/vite.config.js',
    writeBundle() {
      viteDevServer.ws.send({
        type: 'full-reload',
      });
    },
  });
};

(async () => {
  try {
    const viteDevServer = await createServer({
      ...sharedConfig,
      configFile: 'packages/renderer/vite.config.js',
    });

    await viteDevServer.listen();

    await setupPreloadPackageWatcher(viteDevServer);
    await setupMainPackageWatcher(viteDevServer);
  } catch (e) {
    console.error(e);
    process.exit(1);
  }
})();

```

`webapp/scripts/watch.mjs`:

```mjs
#!/usr/bin/env node

import {build, createServer} from 'vite';
import electronPath from 'electron';
import {spawn} from 'child_process';

/** @type 'production' | 'development'' */
const mode = (process.env.MODE = process.env.MODE || 'development');

/** @type {import('vite').LogLevel} */
const logLevel = 'warn';

/**
 * Setup watcher for `main` package
 * On file changed it totally re-launch electron app.
 * @param {import('vite').ViteDevServer} watchServer Renderer watch server instance.
 * Needs to set up `VITE_DEV_SERVER_URL` environment variable from {@link import('vite').ViteDevServer.resolvedUrls}
 */
function setupMainPackageWatcher({resolvedUrls}) {
  process.env.VITE_DEV_SERVER_URL = resolvedUrls.local[0];

  /** @type {ChildProcess | null} */
  let electronApp = null;

  return build({
    mode,
    logLevel,
    configFile: 'packages/main/vite.config.js',
    build: {
      /**
       * Set to {} to enable rollup watcher
       * @see https://vitejs.dev/config/build-options.html#build-watch
       */
      watch: {},
    },
    plugins: [
      {
        name: 'reload-app-on-main-package-change',
        writeBundle() {
          /** Kill electron if process already exist */
          if (electronApp !== null) {
            electronApp.removeListener('exit', process.exit);
            electronApp.kill('SIGINT');
            electronApp = null;
          }

          /** Spawn new electron process */
          electronApp = spawn(String(electronPath), ['--inspect', '.'], {
            stdio: 'inherit',
          });

          /** Stops the watch script when the application has been quit */
          electronApp.addListener('exit', process.exit);
        },
      },
    ],
  });
}

/**
 * Setup watcher for `preload` package
 * On file changed it reload web page.
 * @param {import('vite').ViteDevServer} watchServer Renderer watch server instance.
 * Required to access the web socket of the page. By sending the `full-reload` command to the socket, it reloads the web page.
 */
function setupPreloadPackageWatcher({ws}) {
  return build({
    mode,
    logLevel,
    configFile: 'packages/preload/vite.config.js',
    build: {
      /**
       * Set to {} to enable rollup watcher
       * @see https://vitejs.dev/config/build-options.html#build-watch
       */
      watch: {},
    },
    plugins: [
      {
        name: 'reload-page-on-preload-package-change',
        writeBundle() {
          ws.send({
            type: 'full-reload',
          });
        },
      },
    ],
  });
}

/**
 * Dev server for Renderer package
 * This must be the first,
 * because the {@link setupMainPackageWatcher} and {@link setupPreloadPackageWatcher}
 * depend on the dev server properties
 */
const rendererWatchServer = await createServer({
  mode,
  logLevel,
  configFile: 'packages/renderer/vite.config.js',
}).then(s => s.listen());

await setupPreloadPackageWatcher(rendererWatchServer);
await setupMainPackageWatcher(rendererWatchServer);

```

`webapp/tests/app.spec.js`:

```js
const {_electron: electron} = require('playwright');
const {strict: assert} = require('assert');

// Playwright has EXPERIMENTAL electron support.
(async () => {
  const electronApp = await electron.launch({args: ['.']});

  /**
   * App main window state
   * @type {{isVisible: boolean; isDevToolsOpened: boolean; isCrashed: boolean}}
   */
  const windowState = await electronApp.evaluate(({BrowserWindow}) => {
    const mainWindow = BrowserWindow.getAllWindows()[0];

    const getState = () => ({
      isVisible: mainWindow.isVisible(),
      isDevToolsOpened: mainWindow.webContents.isDevToolsOpened(),
      isCrashed: mainWindow.webContents.isCrashed(),
    });

    return new Promise(resolve => {
      if (mainWindow.isVisible()) {
        resolve(getState());
      } else mainWindow.once('ready-to-show', () => setTimeout(() => resolve(getState()), 0));
    });
  });

  // Check main window state
  assert.ok(windowState.isVisible, 'Main window not visible');
  assert.ok(!windowState.isDevToolsOpened, 'DevTools opened');
  assert.ok(!windowState.isCrashed, 'Window crashed');

  /**
   * Rendered Main window web-page
   * @type {Page}
   */
  const page = await electronApp.firstWindow();

  // Check web-page content
  const element = await page.$('#app', {strict: true});
  assert.notStrictEqual(element, null, "Can't find root element");
  assert.notStrictEqual((await element.innerHTML()).trim(), '', 'Window content is empty');

  // Checking the framework.
  // It is assumed that on the main screen there is a `<button>` that changes its contents after clicking.
  const button = await page.$('button');
  const originalBtnText = await button.textContent();

  await button.click();
  const newBtnText = await button.textContent();

  assert.ok(
    originalBtnText !== newBtnText,
    'The button did not change the contents after clicking',
  );

  // Check Preload script
  const renderedExposedApi = await page.evaluate(() => globalThis.electron);
  const realVersions = await electronApp.evaluate(() => process.versions);

  assert.notStrictEqual(
    renderedExposedApi,
    undefined,
    'In renderer `globalThis.electron` is undefined',
  );
  assert.strictEqual(renderedExposedApi?.versions?.electron, realVersions.electron);

  // Close app
  await electronApp.close();
})();

```

`webapp/tests/e2e.spec.ts`:

```ts
import type {ElectronApplication, JSHandle} from 'playwright';
import {_electron as electron} from 'playwright';
import {afterAll, beforeAll, expect, test} from 'vitest';
import {createHash} from 'crypto';
import type {BrowserWindow} from 'electron';

let electronApp: ElectronApplication;

beforeAll(async () => {
  electronApp = await electron.launch({args: ['.']});
});

afterAll(async () => {
  await electronApp.close();
});

test('Main window state', async () => {
  const page = await electronApp.firstWindow();
  const window: JSHandle<BrowserWindow> = await electronApp.browserWindow(page);
  const windowState = await window.evaluate(
    (mainWindow): Promise<{isVisible: boolean; isDevToolsOpened: boolean; isCrashed: boolean}> => {
      const getState = () => ({
        isVisible: mainWindow.isVisible(),
        isDevToolsOpened: mainWindow.webContents.isDevToolsOpened(),
        isCrashed: mainWindow.webContents.isCrashed(),
      });

      return new Promise(resolve => {
        /**
         * The main window is created hidden, and is shown only when it is ready.
         * See {@link ../packages/main/src/mainWindow.ts} function
         */
        if (mainWindow.isVisible()) {
          resolve(getState());
        } else mainWindow.once('ready-to-show', () => resolve(getState()));
      });
    },
  );

  expect(windowState.isCrashed, 'The app has crashed').toBeFalsy();
  expect(windowState.isVisible, 'The main window was not visible').toBeTruthy();
  expect(windowState.isDevToolsOpened, 'The DevTools panel was open').toBeFalsy();
});

test('Main window web content', async () => {
  const page = await electronApp.firstWindow();
  const element = await page.$('#app', {strict: true});
  expect(element, 'Was unable to find the root element').toBeDefined();
  expect((await element.innerHTML()).trim(), 'Window content was empty').not.equal('');
});

test('Preload versions', async () => {
  const page = await electronApp.firstWindow();
  const versionsElement = page.locator('#process-versions');
  expect(await versionsElement.count(), 'expect find one element #process-versions').toStrictEqual(
    1,
  );

  /**
   * In this test we check only text value and don't care about formatting. That's why here we remove any space symbols
   */
  const renderedVersions = (await versionsElement.innerText()).replace(/\s/g, '');
  const expectedVersions = await electronApp.evaluate(() => process.versions);

  for (const expectedVersionsKey in expectedVersions) {
    expect(renderedVersions).include(
      `${expectedVersionsKey}:v${expectedVersions[expectedVersionsKey]}`,
    );
  }
});

test('Preload nodeCrypto', async () => {
  const page = await electronApp.firstWindow();

  // Test hashing a random string
  const testString = Math.random().toString(36).slice(2, 7);

  const rawInput = page.locator('input#reactive-hash-raw-value');
  expect(
    await rawInput.count(),
    'expect find one element input#reactive-hash-raw-value',
  ).toStrictEqual(1);

  const hashedInput = page.locator('input#reactive-hash-hashed-value');
  expect(
    await hashedInput.count(),
    'expect find one element input#reactive-hash-hashed-value',
  ).toStrictEqual(1);

  await rawInput.fill(testString);
  const renderedHash = await hashedInput.inputValue();
  const expectedHash = createHash('sha256').update(testString).digest('hex');
  expect(renderedHash).toEqual(expectedHash);
});

```

`webapp/tsconfig.json`:

```json
{
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "sourceMap": true,
    "moduleResolution": "Node",
    "skipLibCheck": true,
    "strict": true,
    "isolatedModules": true,
    "types": ["node"],
    "typeRoots": ["node_modules/@types"],
    "lib": ["ESNext"],
    "allowSyntheticDefaultImports": true
  }
}

```

`webapp/types/env.d.ts`:

```ts
/// <reference types="vite/client" />

/**
 * Describes all existing environment variables and their types.
 * Required for Code completion/intellisense and type checking.
 *
 * Note: To prevent accidentally leaking env variables to the client, only variables prefixed with `VITE_` are exposed to your Vite-processed code.
 *
 * @see https://github.com/vitejs/vite/blob/0a699856b248116632c1ac18515c0a5c7cf3d1db/packages/vite/types/importMeta.d.ts#L7-L14 Base Interface.
 * @see https://vitejs.dev/guide/env-and-mode.html#env-files Vite Env Variables Doc.
 */
interface ImportMetaEnv {
  /**
   * URL where `renderer` web page is running.
   * This variable is initialized in scripts/watch.ts
   */
  readonly VITE_DEV_SERVER_URL: undefined | string;

  /** Current app version */
  readonly VITE_APP_VERSION: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}

```

`webapp/types/index.d.ts`:

```ts
declare module '*.json' {
  const jsonValue: any;
  export default jsonValue;
}

declare module '*.mjs' {
  const mjsValue: never;
  export default mjsValue;
}

declare type Recordable<T = any> = Record<string, T>;

declare interface AlasConfig {
  webuiUrl: string;
  theme: 'dark' | 'light';
  language: DefAlasConfig['Deploy']['Webui']['Language'];
  repository: 'global' | 'china';
  alasPath: string;
}

declare interface DefAlasConfig {
  Deploy: {
    Git: {
      Repository: string;
      Branch: string;
      GitExecutable: string;
      GitProxy: null | string;
      SSLVerify: bigint;
      AutoUpdate: boolean;
      KeepLocalChanges: boolean;
    };
    Python: {
      PythonExecutable: string;
      PypiMirror: string;
      InstallDependencies: boolean;
      RequirementsFile: string;
    };
    Adb: {
      AdbExecutable: string;
      ReplaceAdb: boolean;
      AutoConnect: boolean;
      InstallUiautomator2: boolean;
    };
    Ocr: {
      UseOcrServer: boolean;
      StartOcrServer: boolean;
      OcrServerPort: null;
      OcrClientAddress: string;
    };
    Update: {EnableReload: boolean; CheckUpdateInterval: number; AutoRestartTime: string};
    Misc: {DiscordRichPresence: boolean};
    RemoteAccess: {
      EnableRemoteAccess: boolean;
      SSHUser: null;
      SSHServer: null | string;
      SSHExecutable: string;
    };
    Webui: {
      WebuiHost: string;
      WebuiPort: number;
      Language: 'zh-CN' | 'en-US' | 'ja-JP' | 'zh-TW';
      Theme: 'default' | 'dark';
      DpiScaling: boolean;
      Password: null | string;
      CDN: boolean;
      Run: null | string;
      AppAsarUpdate: boolean;
      NoSandbox: boolean;
    };
  };
}

```

`webapp/types/vite-env.d.ts`:

```ts
/// <reference types="vite/client" />

/**
 * Describes all existing environment variables and their types.
 * Assists in autocomplete and typechecking
 *
 * @see https://github.com/vitejs/vite/blob/eef51cb37db98a1ad9a541bdd3cd74736ff8488d/packages/vite/types/importMeta.d.ts#L62-L69 Base Interface
 */
interface ImportMetaEnv {
  /**
   * The value of the variable is set in scripts/watch.js and depend on packages/main/vite.config.js
   */
  VITE_DEV_SERVER_URL: undefined | string;
}

```

`webapp/version/getVersion.mjs`:

```mjs
/**
 * Entry function for get app version.
 * In current implementation, it returns `version` from `package.json`, but you can implement any logic here.
 * Runs several times for each vite configs and electron-builder config.
 * @return {string}
 */
export function getVersion() {
  return process.env.npm_package_version;
}

```

`webapp/version/inject-app-version-plugin.mjs`:

```mjs
import {getVersion} from './getVersion.mjs';

/**
 * Somehow inject app version to vite build context
 * @return {import('vite').Plugin}
 */
export const injectAppVersion = () => ({
  name: 'inject-version',
  config: () => {
    process.env.VITE_APP_VERSION = getVersion();
  },
});

```

`webapp/vetur.config.js`:

```js
/** @type {import('vls').VeturConfig} */
module.exports = {
  settings: {
    'vetur.useWorkspaceDependencies': true,
    'vetur.experimental.templateInterpolationService': true,
  },
  projects: [
    {
      root: './packages/renderer',
      tsconfig: './tsconfig.json',
      snippetFolder: './.vscode/vetur/snippets',
      globalComponents: ['./src/components/**/*.vue'],
    },
    {
      root: './packages/main',
      tsconfig: './tsconfig.json',
    },
    {
      root: './packages/preload',
      tsconfig: './tsconfig.json',
    },
  ],
};

```

`webapp/vitest.config.js`:

```js
/**
 * Configuration for the global end-to-end testing,
 * placed in the project's root 'tests' folder.
 * @type {import('vite').UserConfig}
 * @see https://vitest.dev/config/
 */
const config = {
  test: {
    /**
     * By default, vitest searches for the test files in all packages.
     * For e2e tests, have vitest search only in the project root 'tests' folder.
     */
    include: ['./tests/**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}'],

    /**
     * The default timeout of 5000ms is sometimes not enough for playwright.
     */
    testTimeout: 30_000,
    hookTimeout: 30_000,
  },
};

export default config;

```