Project Path: arc_QianMo_Unity-Design-Pattern_d45b9ak3

Source Tree:

```txt
arc_QianMo_Unity-Design-Pattern_d45b9ak3
├── Assets
│   ├── Behavioral Patterns
│   │   ├── Chain of Responsibility Pattern
│   │   │   ├── Example1
│   │   │   │   ├── ChainOfResponsibilityExample1.cs
│   │   │   │   ├── ChainOfResponsibilityExample1.cs.meta
│   │   │   │   ├── TestChainOfRespExample1.unity
│   │   │   │   └── TestChainOfRespExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── ChainOfResponsibilityExample2.cs
│   │   │   │   ├── ChainOfResponsibilityExample2.cs.meta
│   │   │   │   ├── ChainOfResponsibilityExample2.unity
│   │   │   │   └── ChainOfResponsibilityExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── ChainOfResponsibilityStructure.cs
│   │   │   │   ├── ChainOfResponsibilityStructure.cs.meta
│   │   │   │   ├── TestChainOfResponsibilityStructure.unity
│   │   │   │   └── TestChainOfResponsibilityStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Chain of Responsibility Pattern.meta
│   │   ├── Command Pattern
│   │   │   ├── Example1
│   │   │   │   ├── CommandExample1.cs
│   │   │   │   ├── CommandExample1.cs.meta
│   │   │   │   ├── TestCommandExample1.unity
│   │   │   │   └── TestCommandExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── DeviceButton.cs
│   │   │   │   ├── DeviceButton.cs.meta
│   │   │   │   ├── ICommand.cs
│   │   │   │   ├── ICommand.cs.meta
│   │   │   │   ├── IElectronicDevice.cs
│   │   │   │   ├── IElectronicDevice.cs.meta
│   │   │   │   ├── Radio.cs
│   │   │   │   ├── Radio.cs.meta
│   │   │   │   ├── TVRemove.cs
│   │   │   │   ├── TVRemove.cs.meta
│   │   │   │   ├── Television.cs
│   │   │   │   ├── Television.cs.meta
│   │   │   │   ├── TestCommandPattern.cs
│   │   │   │   ├── TestCommandPattern.cs.meta
│   │   │   │   ├── TurnItAllOff.cs
│   │   │   │   ├── TurnItAllOff.cs.meta
│   │   │   │   ├── TurnTVOff.cs
│   │   │   │   ├── TurnTVOff.cs.meta
│   │   │   │   ├── TurnTVOn.cs
│   │   │   │   ├── TurnTVOn.cs.meta
│   │   │   │   ├── TurnVolumeDown.cs
│   │   │   │   ├── TurnVolumeDown.cs.meta
│   │   │   │   ├── TurnVolumeUp.cs
│   │   │   │   ├── TurnVolumeUp.cs.meta
│   │   │   │   ├── command pattern example 1.unity
│   │   │   │   └── command pattern example 1.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── Example3
│   │   │   │   ├── Command.cs
│   │   │   │   ├── Command.cs.meta
│   │   │   │   ├── InputHandler.cs
│   │   │   │   ├── InputHandler.cs.meta
│   │   │   │   ├── MoveCommand.cs
│   │   │   │   ├── MoveCommand.cs.meta
│   │   │   │   ├── MoveCommandReceiver.cs
│   │   │   │   ├── MoveCommandReceiver.cs.meta
│   │   │   │   ├── command pattern example2.unity
│   │   │   │   └── command pattern example2.unity.meta
│   │   │   ├── Example3.meta
│   │   │   ├── Example4
│   │   │   │   ├── CommandPatternExample4.cs
│   │   │   │   ├── CommandPatternExample4.cs.meta
│   │   │   │   ├── CommandPatternExample4.unity
│   │   │   │   └── CommandPatternExample4.unity.meta
│   │   │   ├── Example4.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── CommandStructure.cs
│   │   │   │   ├── CommandStructure.cs.meta
│   │   │   │   ├── TestCommandStructure.unity
│   │   │   │   └── TestCommandStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Command Pattern.meta
│   │   ├── Interpreter Pattern
│   │   │   ├── Example1
│   │   │   │   ├── InterpreterExample1.cs
│   │   │   │   ├── InterpreterExample1.cs.meta
│   │   │   │   ├── TestInterpreterExample1.unity
│   │   │   │   └── TestInterpreterExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── InterpreterExample2.cs
│   │   │   │   ├── InterpreterExample2.cs.meta
│   │   │   │   ├── InterpreterExample2.unity
│   │   │   │   └── InterpreterExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── InterpreterStructrue.cs
│   │   │   │   ├── InterpreterStructrue.cs.meta
│   │   │   │   ├── TestInterpreterStructrue.unity
│   │   │   │   └── TestInterpreterStructrue.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Interpreter Pattern.meta
│   │   ├── Iterator Pattern
│   │   │   ├── Example1
│   │   │   │   ├── IteratorExample1.cs
│   │   │   │   ├── IteratorExample1.cs.meta
│   │   │   │   ├── TestIteratorExample1.unity
│   │   │   │   └── TestIteratorExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── IteratorExample2.cs
│   │   │   │   ├── IteratorExample2.cs.meta
│   │   │   │   ├── IteratorExample2.unity
│   │   │   │   └── IteratorExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── IteratorStructure.cs
│   │   │   │   ├── IteratorStructure.cs.meta
│   │   │   │   ├── TestIteratorStructure.unity
│   │   │   │   └── TestIteratorStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Iterator Pattern.meta
│   │   ├── Mediator Pattern
│   │   │   ├── Example1
│   │   │   │   ├── MediatorExample1.cs
│   │   │   │   ├── MediatorExample1.cs.meta
│   │   │   │   ├── TestMediatorExample1.unity
│   │   │   │   └── TestMediatorExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── MediatorExample2.cs
│   │   │   │   ├── MediatorExample2.cs.meta
│   │   │   │   ├── MediatorExample2.unity
│   │   │   │   └── MediatorExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── MediatorStructure.cs
│   │   │   │   ├── MediatorStructure.cs.meta
│   │   │   │   ├── TestMediatorStructure.unity
│   │   │   │   └── TestMediatorStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Mediator Pattern.meta
│   │   ├── Memento Pattern
│   │   │   ├── Example1
│   │   │   │   ├── MementoExample1.cs
│   │   │   │   ├── MementoExample1.cs.meta
│   │   │   │   ├── TestMementoExample1.unity
│   │   │   │   └── TestMementoExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── MementoExample2.cs
│   │   │   │   ├── MementoExample2.cs.meta
│   │   │   │   ├── MementoExample2.unity
│   │   │   │   └── MementoExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── MementoStructure.cs
│   │   │   │   ├── MementoStructure.cs.meta
│   │   │   │   ├── TestMementoStructure.unity
│   │   │   │   └── TestMementoStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Memento Pattern.meta
│   │   ├── Observer Pattern
│   │   │   ├── Example1
│   │   │   │   ├── ObserverExample1.cs
│   │   │   │   ├── ObserverExample1.cs.meta
│   │   │   │   ├── TestObserverExample1.unity
│   │   │   │   └── TestObserverExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── ObserverStructure.cs
│   │   │   │   ├── ObserverStructure.cs.meta
│   │   │   │   ├── TestObserverStructure.unity
│   │   │   │   └── TestObserverStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Observer Pattern.meta
│   │   ├── State Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── StateExample1.cs
│   │   │   │   ├── StateExample1.cs.meta
│   │   │   │   ├── StatePatternExample1.unity
│   │   │   │   └── StatePatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── StateExmaple2.cs
│   │   │   │   ├── StateExmaple2.cs.meta
│   │   │   │   ├── StatePatternExmaple2.unity
│   │   │   │   └── StatePatternExmaple2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── Exmaple3
│   │   │   │   ├── ATMMachine.cs
│   │   │   │   ├── ATMMachine.cs.meta
│   │   │   │   ├── ATMState.cs
│   │   │   │   ├── ATMState.cs.meta
│   │   │   │   ├── HasCard.cs
│   │   │   │   ├── HasCard.cs.meta
│   │   │   │   ├── HasPin.cs
│   │   │   │   ├── HasPin.cs.meta
│   │   │   │   ├── NoCard.cs
│   │   │   │   ├── NoCard.cs.meta
│   │   │   │   ├── NoCash.cs
│   │   │   │   ├── NoCash.cs.meta
│   │   │   │   ├── StatePatternExample3.unity
│   │   │   │   ├── StatePatternExample3.unity.meta
│   │   │   │   ├── TestATMMachine.cs
│   │   │   │   └── TestATMMachine.cs.meta
│   │   │   ├── Exmaple3.meta
│   │   │   ├── Exmaple4
│   │   │   │   ├── DrivingState.cs
│   │   │   │   ├── DrivingState.cs.meta
│   │   │   │   ├── DuckingState.cs
│   │   │   │   ├── DuckingState.cs.meta
│   │   │   │   ├── Heroine.cs
│   │   │   │   ├── Heroine.cs.meta
│   │   │   │   ├── HeroineBaseState.cs
│   │   │   │   ├── HeroineBaseState.cs.meta
│   │   │   │   ├── JumpingState.cs
│   │   │   │   ├── JumpingState.cs.meta
│   │   │   │   ├── StandingState.cs
│   │   │   │   ├── StandingState.cs.meta
│   │   │   │   ├── StatePatternExample4.unity
│   │   │   │   ├── StatePatternExample4.unity.meta
│   │   │   │   ├── TestHeroine.cs
│   │   │   │   └── TestHeroine.cs.meta
│   │   │   ├── Exmaple4.meta
│   │   │   ├── Exmaple5
│   │   │   │   ├── StatePatternExample5.cs
│   │   │   │   ├── StatePatternExample5.cs.meta
│   │   │   │   ├── StatePatternExample5.unity
│   │   │   │   └── StatePatternExample5.unity.meta
│   │   │   ├── Exmaple5.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── StateStructure.cs
│   │   │   │   ├── StateStructure.cs.meta
│   │   │   │   ├── TestStateStructure.unity
│   │   │   │   └── TestStateStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── State Pattern.meta
│   │   ├── Strategy Pattern
│   │   │   ├── Example2
│   │   │   │   ├── BadCodeExample.cs
│   │   │   │   ├── BadCodeExample.cs.meta
│   │   │   │   ├── StrategyPatternExample2.cs
│   │   │   │   ├── StrategyPatternExample2.cs.meta
│   │   │   │   ├── StrategyPatternExample2.unity
│   │   │   │   └── StrategyPatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── Exmaple1
│   │   │   │   ├── StrategyPatternExample1.cs
│   │   │   │   ├── StrategyPatternExample1.cs.meta
│   │   │   │   ├── StrategyPatternExample1.unity
│   │   │   │   └── StrategyPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── StrategyStructure.cs
│   │   │   │   ├── StrategyStructure.cs.meta
│   │   │   │   ├── TestStrategyStructure.unity
│   │   │   │   └── TestStrategyStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Strategy Pattern.meta
│   │   ├── Template Method Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── TemplateMethodPatternExample1.cs
│   │   │   │   ├── TemplateMethodPatternExample1.cs.meta
│   │   │   │   ├── TemplateMethodPatternExample1.unity
│   │   │   │   └── TemplateMethodPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── TemplateMethodStructure.cs
│   │   │   │   ├── TemplateMethodStructure.cs.meta
│   │   │   │   ├── TestTemplateMethodStructure.unity
│   │   │   │   └── TestTemplateMethodStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Template Method Pattern.meta
│   │   ├── Visitor Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── VisitorPatternExample1.cs
│   │   │   │   ├── VisitorPatternExample1.cs.meta
│   │   │   │   ├── VisitorPatternExample1.unity
│   │   │   │   └── VisitorPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── VisitorPatternExample2.cs
│   │   │   │   ├── VisitorPatternExample2.cs.meta
│   │   │   │   ├── VisitorPatternExample2.unity
│   │   │   │   └── VisitorPatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── TestVisitorStructure.unity
│   │   │   │   ├── TestVisitorStructure.unity.meta
│   │   │   │   ├── VisitorStructure.cs
│   │   │   │   └── VisitorStructure.cs.meta
│   │   │   └── Structure.meta
│   │   └── Visitor Pattern.meta
│   ├── Behavioral Patterns.meta
│   ├── Creational Patterns
│   │   ├── Abstract Factory Pattern
│   │   │   ├── Example1
│   │   │   │   ├── AbstractFactoryPatternExample1.cs
│   │   │   │   ├── AbstractFactoryPatternExample1.cs.meta
│   │   │   │   ├── AbstractFactoryPatternExample1.unity
│   │   │   │   └── AbstractFactoryPatternExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── AbstractFactoryPatternExample2.cs
│   │   │   │   ├── AbstractFactoryPatternExample2.cs.meta
│   │   │   │   ├── AbstractFactoryPatternExample2.unity
│   │   │   │   └── AbstractFactoryPatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── AbstractFactoryStructrue.cs
│   │   │   │   ├── AbstractFactoryStructrue.cs.meta
│   │   │   │   ├── TestAbstractFactoryStructrue.unity
│   │   │   │   └── TestAbstractFactoryStructrue.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Abstract Factory Pattern.meta
│   │   ├── Builder Pattern
│   │   │   ├── Example1
│   │   │   │   ├── BuilderPatternExample1.cs
│   │   │   │   ├── BuilderPatternExample1.cs.meta
│   │   │   │   ├── BuilderPatternExample1.unity
│   │   │   │   └── BuilderPatternExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── BuilderPatternExample2.cs
│   │   │   │   ├── BuilderPatternExample2.cs.meta
│   │   │   │   ├── BuilderPatternExample2.unity
│   │   │   │   └── BuilderPatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── BuilderStructure.cs
│   │   │   │   ├── BuilderStructure.cs.meta
│   │   │   │   ├── TestBuilderStructure.unity
│   │   │   │   └── TestBuilderStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Builder Pattern.meta
│   │   ├── Factory Method Pattern
│   │   │   ├── Example1
│   │   │   │   ├── FactoryMethodPatternExample1.cs
│   │   │   │   ├── FactoryMethodPatternExample1.cs.meta
│   │   │   │   ├── FactoryMethodPatternExample1.unity
│   │   │   │   └── FactoryMethodPatternExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── FactoryMethodPatternExample2.cs
│   │   │   │   ├── FactoryMethodPatternExample2.cs.meta
│   │   │   │   ├── FactoryMethodPatternExample2.unity
│   │   │   │   └── FactoryMethodPatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── FactoryMethodStructure.cs
│   │   │   │   ├── FactoryMethodStructure.cs.meta
│   │   │   │   ├── TestFactoryMethodStructure.unity
│   │   │   │   └── TestFactoryMethodStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Factory Method Pattern.meta
│   │   ├── Prototype Pattern
│   │   │   ├── Example1
│   │   │   │   ├── PrototypePatternExample1.cs
│   │   │   │   ├── PrototypePatternExample1.cs.meta
│   │   │   │   ├── PrototypePatternExample1.unity
│   │   │   │   └── PrototypePatternExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── PrototypePatternExample2.cs
│   │   │   │   ├── PrototypePatternExample2.cs.meta
│   │   │   │   ├── PrototypePatternExample2.unity
│   │   │   │   └── PrototypePatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── PrototypeStructure.cs
│   │   │   │   ├── PrototypeStructure.cs.meta
│   │   │   │   ├── TestPrototypeStructure.unity
│   │   │   │   └── TestPrototypeStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Prototype Pattern.meta
│   │   ├── Singleton Pattern
│   │   │   ├── Example1
│   │   │   │   ├── SingletonPatternExample1.cs
│   │   │   │   ├── SingletonPatternExample1.cs.meta
│   │   │   │   ├── SingletonPatternExample1.unity
│   │   │   │   └── SingletonPatternExample1.unity.meta
│   │   │   ├── Example1.meta
│   │   │   ├── Example2
│   │   │   │   ├── SingletonPatternExample2.cs
│   │   │   │   ├── SingletonPatternExample2.cs.meta
│   │   │   │   ├── SingletonPatternExample2.unity
│   │   │   │   └── SingletonPatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── Example3
│   │   │   │   ├── SingletonPatternExample3.cs
│   │   │   │   ├── SingletonPatternExample3.cs.meta
│   │   │   │   ├── SingletonPatternExample3.unity
│   │   │   │   └── SingletonPatternExample3.unity.meta
│   │   │   ├── Example3.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── SingletonStructure.cs
│   │   │   │   ├── SingletonStructure.cs.meta
│   │   │   │   ├── TestSingletonStructure.unity
│   │   │   │   └── TestSingletonStructure.unity.meta
│   │   │   └── Structure.meta
│   │   └── Singleton Pattern.meta
│   ├── Creational Patterns.meta
│   ├── Game Programming Patterns
│   │   ├── Component Pattern
│   │   │   ├── Example
│   │   │   │   ├── ComponentPatternExample.cs
│   │   │   │   ├── ComponentPatternExample.cs.meta
│   │   │   │   ├── ComponentPatternExample.unity
│   │   │   │   └── ComponentPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Component Pattern.meta
│   │   ├── Data Locality Pattern
│   │   │   ├── Example
│   │   │   │   ├── DataLocalityPatternExample.cs
│   │   │   │   ├── DataLocalityPatternExample.cs.meta
│   │   │   │   ├── DataLocalityPatternExample.unity
│   │   │   │   └── DataLocalityPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Data Locality Pattern.meta
│   │   ├── Dirty Flag Pattern
│   │   │   ├── Example
│   │   │   │   ├── DirtyFlagPatternExample.cs
│   │   │   │   ├── DirtyFlagPatternExample.cs.meta
│   │   │   │   ├── DirtyFlagPatternExample.unity
│   │   │   │   └── DirtyFlagPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Dirty Flag Pattern.meta
│   │   ├── Event Queue Pattern
│   │   │   ├── Example
│   │   │   │   ├── EventQueue.cs
│   │   │   │   ├── EventQueue.cs.meta
│   │   │   │   ├── EventQueueManager.cs
│   │   │   │   ├── EventQueueManager.cs.meta
│   │   │   │   ├── EventQueuePatternExample.cs
│   │   │   │   ├── EventQueuePatternExample.cs.meta
│   │   │   │   ├── EventQueuePatternExample.unity
│   │   │   │   └── EventQueuePatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── Example2
│   │   │   │   ├── EventQueuePatternExample2.cs
│   │   │   │   ├── EventQueuePatternExample2.cs.meta
│   │   │   │   ├── EventQueuePatternExample2.unity
│   │   │   │   └── EventQueuePatternExample2.unity.meta
│   │   │   ├── Example2.meta
│   │   │   ├── Example3
│   │   │   │   ├── EventQueuePatternExample3.unity
│   │   │   │   ├── EventQueuePatternExample3.unity.meta
│   │   │   │   ├── Scripts
│   │   │   │   │   ├── EventManger.cs
│   │   │   │   │   ├── EventManger.cs.meta
│   │   │   │   │   ├── EventQueuePatternExample3.cs
│   │   │   │   │   ├── EventQueuePatternExample3.cs.meta
│   │   │   │   │   ├── EventType.cs
│   │   │   │   │   └── EventType.cs.meta
│   │   │   │   └── Scripts.meta
│   │   │   ├── Example3.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Event Queue Pattern.meta
│   │   ├── Game Loop Pattern
│   │   │   ├── Example
│   │   │   │   ├── GameLoopPatternExample.cs
│   │   │   │   ├── GameLoopPatternExample.cs.meta
│   │   │   │   ├── GameLoopPatternExample.unity
│   │   │   │   └── GameLoopPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Game Loop Pattern.meta
│   │   ├── Object Pool Pattern
│   │   │   ├── Example
│   │   │   │   ├── Material
│   │   │   │   │   ├── Plane.mat
│   │   │   │   │   ├── Plane.mat.meta
│   │   │   │   │   ├── PoolObject.mat
│   │   │   │   │   └── PoolObject.mat.meta
│   │   │   │   ├── Material.meta
│   │   │   │   ├── Model
│   │   │   │   │   ├── polygonSphere.asset
│   │   │   │   │   └── polygonSphere.asset.meta
│   │   │   │   ├── Model.meta
│   │   │   │   ├── ObjectPoolExample.unity
│   │   │   │   ├── ObjectPoolExample.unity.meta
│   │   │   │   ├── Prefab
│   │   │   │   │   ├── PolygonSphere.prefab
│   │   │   │   │   └── PolygonSphere.prefab.meta
│   │   │   │   ├── Prefab.meta
│   │   │   │   ├── README.md
│   │   │   │   ├── README.md.meta
│   │   │   │   ├── Script
│   │   │   │   │   ├── Core
│   │   │   │   │   │   ├── PoolManager.cs
│   │   │   │   │   │   ├── PoolManager.cs.meta
│   │   │   │   │   │   ├── PoolObject.cs
│   │   │   │   │   │   └── PoolObject.cs.meta
│   │   │   │   │   ├── Core.meta
│   │   │   │   │   ├── Example
│   │   │   │   │   │   ├── ObjectPoolExample.cs
│   │   │   │   │   │   ├── ObjectPoolExample.cs.meta
│   │   │   │   │   │   ├── PoolObjectBehaviour.cs
│   │   │   │   │   │   └── PoolObjectBehaviour.cs.meta
│   │   │   │   │   ├── Example.meta
│   │   │   │   │   ├── README.md
│   │   │   │   │   └── README.md.meta
│   │   │   │   ├── Script.meta
│   │   │   │   ├── objectPoolScreenShot.png
│   │   │   │   └── objectPoolScreenShot.png.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Object Pool Pattern.meta
│   │   ├── Service Locator Pattern
│   │   │   ├── Example
│   │   │   │   ├── ServiceLocatorPatternExample.cs
│   │   │   │   ├── ServiceLocatorPatternExample.cs.meta
│   │   │   │   ├── ServiceLocatorPatternExample.unity
│   │   │   │   └── ServiceLocatorPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── Service Locator Pattern.meta
│   │   ├── SubclassSandbox Pattern
│   │   │   ├── Example
│   │   │   │   ├── FlashSpeed.cs
│   │   │   │   ├── FlashSpeed.cs.meta
│   │   │   │   ├── GroundDive.cs
│   │   │   │   ├── GroundDive.cs.meta
│   │   │   │   ├── SkyLaunch.cs
│   │   │   │   ├── SkyLaunch.cs.meta
│   │   │   │   ├── SubclassSandbox.unity
│   │   │   │   ├── SubclassSandbox.unity.meta
│   │   │   │   ├── SuperPower.cs
│   │   │   │   ├── SuperPower.cs.meta
│   │   │   │   ├── TestSubclassSandbox.cs
│   │   │   │   └── TestSubclassSandbox.cs.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   ├── SubclassSandbox Pattern.meta
│   │   ├── Type Object Pattern
│   │   │   ├── Example
│   │   │   │   ├── TypeObjectPatternExample.cs
│   │   │   │   ├── TypeObjectPatternExample.cs.meta
│   │   │   │   ├── TypeObjectPatternExample.unity
│   │   │   │   └── TypeObjectPatternExample.unity.meta
│   │   │   ├── Example.meta
│   │   │   ├── README.md
│   │   │   └── README.md.meta
│   │   └── Type Object Pattern.meta
│   ├── Game Programming Patterns.meta
│   ├── Structural Patterns
│   │   ├── Adapter Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── AdapterPatternExample1.cs
│   │   │   │   ├── AdapterPatternExample1.cs.meta
│   │   │   │   ├── AdapterPatternExample1.unity
│   │   │   │   └── AdapterPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── AdapterPatternExample2.cs
│   │   │   │   ├── AdapterPatternExample2.cs.meta
│   │   │   │   ├── AdapterPatternExample2.unity
│   │   │   │   └── AdapterPatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── AdapterStructure.cs
│   │   │   │   ├── AdapterStructure.cs.meta
│   │   │   │   ├── TestAdapterStructure.unity
│   │   │   │   └── TestAdapterStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Adapter Pattern.meta
│   │   ├── Bridge Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── BridgePatternExample1.cs
│   │   │   │   ├── BridgePatternExample1.cs.meta
│   │   │   │   ├── BridgePatternExample1.unity
│   │   │   │   └── BridgePatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── BridgePatternExample2.cs
│   │   │   │   ├── BridgePatternExample2.cs.meta
│   │   │   │   ├── BridgePatternExample2.unity
│   │   │   │   └── BridgePatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── BridgeStructure.cs
│   │   │   │   ├── BridgeStructure.cs.meta
│   │   │   │   ├── TestBridgeStructure.unity
│   │   │   │   └── TestBridgeStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Bridge Pattern.meta
│   │   ├── Composite Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── CompositePatternExample1.cs
│   │   │   │   ├── CompositePatternExample1.cs.meta
│   │   │   │   ├── CompositePatternExample1.unity
│   │   │   │   └── CompositePatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── CompositePatternExample2.cs
│   │   │   │   ├── CompositePatternExample2.cs.meta
│   │   │   │   ├── CompositePatternExample2.unity
│   │   │   │   └── CompositePatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── CompositeStructure.cs
│   │   │   │   ├── CompositeStructure.cs.meta
│   │   │   │   ├── TestCompositeStructure.unity
│   │   │   │   └── TestCompositeStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Composite Pattern.meta
│   │   ├── Decorator Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── DecoratorPatternExample1.cs
│   │   │   │   ├── DecoratorPatternExample1.cs.meta
│   │   │   │   ├── DecoratorPatternExample1.unity
│   │   │   │   └── DecoratorPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── DecoratorPatternExample2.cs
│   │   │   │   ├── DecoratorPatternExample2.cs.meta
│   │   │   │   ├── DecoratorPatternExample2.unity
│   │   │   │   └── DecoratorPatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── DecoratorStructure.cs
│   │   │   │   ├── DecoratorStructure.cs.meta
│   │   │   │   ├── TestDecoratorStructure.unity
│   │   │   │   └── TestDecoratorStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Decorator Pattern.meta
│   │   ├── Facade Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── FacadePatternExample1.cs
│   │   │   │   ├── FacadePatternExample1.cs.meta
│   │   │   │   ├── FacadePatternExample1.unity
│   │   │   │   └── FacadePatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── FacadePatternExample2.cs
│   │   │   │   ├── FacadePatternExample2.cs.meta
│   │   │   │   ├── FacadePatternExample2.unity
│   │   │   │   └── FacadePatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── FacadeStructure.cs
│   │   │   │   ├── FacadeStructure.cs.meta
│   │   │   │   ├── TestFacadeStructure.unity
│   │   │   │   └── TestFacadeStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Facade Pattern.meta
│   │   ├── Flyweight Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── FlyweightPatternExample1.cs
│   │   │   │   ├── FlyweightPatternExample1.cs.meta
│   │   │   │   ├── FlyweightPatternExample1.unity
│   │   │   │   └── FlyweightPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── Exmaple2
│   │   │   │   ├── FlyweightPatternExample2.unity
│   │   │   │   └── FlyweightPatternExample2.unity.meta
│   │   │   ├── Exmaple2.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── FlyweightStructure.cs
│   │   │   │   ├── FlyweightStructure.cs.meta
│   │   │   │   ├── TestFlyweightStructure.unity
│   │   │   │   └── TestFlyweightStructure.unity.meta
│   │   │   └── Structure.meta
│   │   ├── Flyweight Pattern.meta
│   │   ├── Proxy Pattern
│   │   │   ├── Exmaple1
│   │   │   │   ├── ProxyPatternExample1.cs
│   │   │   │   ├── ProxyPatternExample1.cs.meta
│   │   │   │   ├── ProxyPatternExample1.unity
│   │   │   │   └── ProxyPatternExample1.unity.meta
│   │   │   ├── Exmaple1.meta
│   │   │   ├── README.md
│   │   │   ├── README.md.meta
│   │   │   ├── Structure
│   │   │   │   ├── ProxyStructure.cs
│   │   │   │   ├── ProxyStructure.cs.meta
│   │   │   │   ├── TestProxyStructure.unity
│   │   │   │   └── TestProxyStructure.unity.meta
│   │   │   └── Structure.meta
│   │   └── Proxy Pattern.meta
│   ├── Structural Patterns.meta
│   ├── Tools
│   │   ├── Canvas.prefab
│   │   └── Canvas.prefab.meta
│   └── Tools.meta
├── Media
│   └── repo-cover.jpg
├── ProjectSettings
│   ├── AudioManager.asset
│   ├── ClusterInputManager.asset
│   ├── DynamicsManager.asset
│   ├── EditorBuildSettings.asset
│   ├── EditorSettings.asset
│   ├── GraphicsSettings.asset
│   ├── InputManager.asset
│   ├── NavMeshAreas.asset
│   ├── NetworkManager.asset
│   ├── Physics2DSettings.asset
│   ├── PresetManager.asset
│   ├── ProjectSettings.asset
│   ├── ProjectVersion.txt
│   ├── QualitySettings.asset
│   ├── TagManager.asset
│   ├── TimeManager.asset
│   └── UnityConnectSettings.asset
├── README.md
├── UML_Picture
│   ├── UML_Description.png
│   ├── abstract.gif
│   ├── adapter.gif
│   ├── bridge.gif
│   ├── builder.gif
│   ├── chain.gif
│   ├── command.gif
│   ├── composite.gif
│   ├── decorator.gif
│   ├── facade.gif
│   ├── factory.gif
│   ├── flyweight.gif
│   ├── interpreter.gif
│   ├── iterator.gif
│   ├── mediator.gif
│   ├── memento.gif
│   ├── observer.gif
│   ├── prototype.gif
│   ├── proxy.gif
│   ├── singleton.gif
│   ├── state.gif
│   ├── strategy.gif
│   ├── template.gif
│   ├── type-object.png
│   └── visitor.gif
└── UnityPackageManager
    └── manifest.json

```

`Assets/Behavioral Patterns.meta`:

```meta
fileFormatVersion: 2
guid: 6b75088dd7c261048856c29626f184b6
folderAsset: yes
timeCreated: 1476363018
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern.meta`:

```meta
fileFormatVersion: 2
guid: d14fe29832346b44ab69bdc9ea1a8058
folderAsset: yes
timeCreated: 1476254445
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 9a32b22e75b68c94ea6ccaf50e66866b
folderAsset: yes
timeCreated: 1476415338
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example1/ChainOfResponsibilityExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ChainOfResponsibilityExample1.cs
//-------------------------------------------------------------------------------------

//This real-world code demonstrates the Chain of Responsibility pattern in which several linked 
//managers and executives can respond to a purchase request or hand it off to a superior. 
//Each position has can have its own set of rules which orders they can approve.


using UnityEngine;
using System.Collections;

namespace ChainOfResponsibilityExample1
{ 
    public class ChainOfResponsibilityExample1 : MonoBehaviour
    {
	    void Start ( )
        {
            // Setup Chain of Responsibility
            Approver larry = new Director();
            Approver sam = new VicePresident();
            Approver tammy = new President();

            larry.SetSuccessor(sam);
            sam.SetSuccessor(tammy);

            // Generate and process purchase requests
            Purchase p = new Purchase(2034, 350.00, "Assets");
            larry.ProcessRequest(p);

            p = new Purchase(2035, 32590.10, "Project X");
            larry.ProcessRequest(p);

            p = new Purchase(2036, 122100.00, "Project Y");
            larry.ProcessRequest(p);

        }
    }

    /// <summary>
    /// The 'Handler' abstract class
    /// </summary>
    abstract class Approver
    {
        protected Approver successor;

        public void SetSuccessor(Approver successor)
        {
            this.successor = successor;
        }

        public abstract void ProcessRequest(Purchase purchase);
    }

    /// <summary>
    /// The 'ConcreteHandler' class
    /// </summary>
    class Director : Approver
    {
        public override void ProcessRequest(Purchase purchase)
        {
            if (purchase.Amount < 10000.0)
            {
                Debug.Log(this.GetType().Name+" approved request# "+purchase.Number);
            }
            else if (successor != null)
            {
                successor.ProcessRequest(purchase);
            }
        }
    }

    /// <summary>
    /// The 'ConcreteHandler' class
    /// </summary>
    class VicePresident : Approver
    {
        public override void ProcessRequest(Purchase purchase)
        {
            if (purchase.Amount < 25000.0)
            {
                Debug.Log(this.GetType().Name + " approved request# " + purchase.Number);
            }
            else if (successor != null)
            {
                successor.ProcessRequest(purchase);
            }
        }
    }

    /// <summary>
    /// The 'ConcreteHandler' class
    /// </summary>
    class President : Approver
    {
        public override void ProcessRequest(Purchase purchase)
        {
            if (purchase.Amount < 100000.0)
            {
                Debug.Log(this.GetType().Name + " approved request# " + purchase.Number);
            }
            else
            {
                Debug.Log("Request# "+purchase.Number+ "requires an executive meeting!");
            }
        }
    }

    /// <summary>
    /// Class holding request details
    /// </summary>
    class Purchase
    {
        private int _number;
        private double _amount;
        private string _purpose;

        // Constructor
        public Purchase(int number, double amount, string purpose)
        {
            this._number = number;
            this._amount = amount;
            this._purpose = purpose;
        }

        // Gets or sets purchase number
        public int Number
        {
            get { return _number; }
            set { _number = value; }
        }

        // Gets or sets purchase amount
        public double Amount
        {
            get { return _amount; }
            set { _amount = value; }
        }

        // Gets or sets purchase purpose
        public string Purpose
        {
            get { return _purpose; }
            set { _purpose = value; }
        }
    }
}
```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example1/ChainOfResponsibilityExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: e11119b9aade54b4796fa1f95933aed1
timeCreated: 1476415411
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example1/TestChainOfRespExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 8af0cd3e585e4b8478f3c65b07d5fb39
timeCreated: 1476415425
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: bcaa8d30fd46c144d981643bdc53dd25
folderAsset: yes
timeCreated: 1478048690
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example2/ChainOfResponsibilityExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ChainOfResponsibilityExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class ChainOfResponsibilityExample2 : MonoBehaviour
{


	void Start ( )
	{
		// create calculation objects that get chained to each other in a sec
		Chain calc1 = new AddNumbers();
		Chain calc2 = new SubstractNumbers();
		Chain calc3 = new DivideNumbers();
		Chain calc4 = new MultiplyNumbers();

		// now chain them to each other
		calc1.SetNextChain(calc2);
		calc2.SetNextChain(calc3);
		calc3.SetNextChain(calc4);

		// this is the request that will be passed to a chain object to let them figure out which calculation objects it the right for the request
		// the request is here the CalculationType enum we add. so we want this pair of numbers to be added
		Numbers myNumbers = new Numbers(3, 5, CalculationType.Add);
		calc1.Calculate(myNumbers);

		// another example:
		Numbers myOtherNumbers = new Numbers(6, 2, CalculationType.Multiply);
		calc1.Calculate(myOtherNumbers);

		// or pass it to some chain object inbetween which will not work in this case:
		Numbers myLastNumbers = new Numbers(12, 3, CalculationType.Substract);
		calc3.Calculate(myLastNumbers);		
	}


	// just defining some types of calculation we want to implement
	// it is better than passing string values as requests because you don't risk any typos that way :)
	public enum CalculationType
	{
		Add,
		Substract,
		Divide,
		Multiply
	};




	// We use this object as an example object to be passed to the calculation chain ;-)
	// to figure out what we want to do with it (which is stored in CalculationType/calculationWanted)
	public class Numbers
	{
		// some numbers:
		public int number1 { get; protected set; }
		public int number2 { get; protected set; }

		// here we store in this object what we want to do with it to let the chain figure out who is responsible for it ;-)
		public CalculationType calculationWanted { get; protected set; }

		// constructor:
		public Numbers(int num1, int num2, CalculationType calcWanted)
		{
			this.number1 = num1;
			this.number2 = num2;
			this.calculationWanted = calcWanted;
		}
	}

	
	// doesn't need to be called chain of course ;-)
	public interface Chain
	{
		void SetNextChain(Chain nextChain); // to be called when calulcation fails
		void Calculate(Numbers numbers); // try to calculate
	}


	public class AddNumbers : Chain
	{
		// each chain object stored a private nextInChain object, that gets called when the method calculate fails
		protected Chain nextInChain;

		public void SetNextChain(Chain nextChain)
		{
			this.nextInChain = nextChain;
		}

		public void Calculate(Numbers request)
		{
			if(request.calculationWanted == CalculationType.Add)
			{
				Debug.Log("Adding: " + request.number1 + " + " + request.number2 + " = " + (request.number1 + request.number2).ToString());
			}
			else if(nextInChain != null)
				nextInChain.Calculate(request);
			else
				Debug.Log ("Handling of request failed: " + request.calculationWanted);
		}
	}

	public class SubstractNumbers : Chain
	{
		protected Chain nextInChain;

		public void SetNextChain(Chain nextChain)
		{
			this.nextInChain = nextChain;
		}

		public void Calculate(Numbers request)
		{
			if(request.calculationWanted == CalculationType.Substract)
			{
				Debug.Log("Substracting: " + request.number1 + " - " + request.number2 + " = " + (request.number1 - request.number2).ToString());
			}
			else if(nextInChain != null)
				nextInChain.Calculate(request);
			else
				Debug.Log ("Handling of request failed: " + request.calculationWanted);
		}
	}
	
	public class DivideNumbers : Chain
	{
		protected Chain nextInChain;
		
		public void SetNextChain(Chain nextChain)
		{
			this.nextInChain = nextChain;
		}
		
		public void Calculate(Numbers request)
		{
			if(request.calculationWanted == CalculationType.Divide)
			{
				Debug.Log("Dividing: " + request.number1 + " / " + request.number2 + " = " + (request.number1 / request.number2).ToString());
			}
			else if(nextInChain != null)
				nextInChain.Calculate(request);
			else
				Debug.Log ("Handling of request failed: " + request.calculationWanted);
		}
	}
	
	public class MultiplyNumbers : Chain
	{
		protected Chain nextInChain;
		
		public void SetNextChain(Chain nextChain)
		{
			this.nextInChain = nextChain;
		}
		
		public void Calculate(Numbers request)
		{
			if(request.calculationWanted == CalculationType.Multiply)
			{
				Debug.Log("Multiplying: " + request.number1 + " * " + request.number2 + " = " + (request.number1 * request.number2).ToString());
			}
			else if(nextInChain != null)
				nextInChain.Calculate(request);
			else
				Debug.Log ("Handling of request failed: " + request.calculationWanted);
		}
	}

}

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example2/ChainOfResponsibilityExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 08f1ec2236c753c4b97394222c456be6
timeCreated: 1478048713
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Example2/ChainOfResponsibilityExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 2718c28c10168304b8581cf5f205b72e
timeCreated: 1478049075
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/README.md`:

```md
# Chain of Responsibility Pattern 责任链模式
## Definition

Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. Chain the receiving objects and pass the request along the chain until an object handles it.
<br>使多个对象都有机会处理请求，从而避免了请求的发送者和接受者之间的耦合关系。将这些对象连成一条链，并沿着这条链传递该请求，直到有对象处理它为止。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/chain.gif)


## Participants

The classes and objects participating in this pattern are:

### Handler   (Approver)
* defines an interface for handling the requests
* (optional) implements the successor link

### ConcreteHandler   (Director, VicePresident, President)
* handles requests it is responsible for
* can access its successor
* if the ConcreteHandler can handle the request, it does so; otherwise it forwards the request to its successor

### Client   (ChainApp)
* initiates the request to a ConcreteHandler object on the chain


```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 62efc7bff6903b248b0ff1e722310259
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 03136ddf63c232845832c7e3583aa36a
folderAsset: yes
timeCreated: 1476254453
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Structure/ChainOfResponsibilityStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ChainOfResponsibilityStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class ChainOfResponsibilityStructure : MonoBehaviour
{
    void Start()
    { 
        // Setup Chain of Responsibility
        Handler h1 = new ConcreteHandler1();
        Handler h2 = new ConcreteHandler2();
        Handler h3 = new ConcreteHandler3();
        h1.SetSuccessor(h2);
        h2.SetSuccessor(h3);
 
        // Generate and process request
        int[] requests = { 2, 5, 14, 22, 18, 3, 27, 20 };
        foreach (int request in requests)
        {
            h1.HandleRequest(request);
        }

    }
  }
 
/// <summary>
/// The 'Handler' abstract class
/// </summary>
abstract class Handler
{
    protected Handler successor;

    public void SetSuccessor(Handler successor)
    {
        this.successor = successor;
    }

    public abstract void HandleRequest(int request);
}

/// <summary>
/// The 'ConcreteHandler1' class
/// </summary>
class ConcreteHandler1 : Handler
{
    public override void HandleRequest(int request)
    {
        if (request >= 0 && request < 10)
        {
            Debug.Log(this.GetType().Name + " handled request " + request);
        }
        else if (successor != null)
        {
            successor.HandleRequest(request);
        }
    }
}

/// <summary>
/// The 'ConcreteHandler2' class
/// </summary>
class ConcreteHandler2 : Handler
{
    public override void HandleRequest(int request)
    {
        if (request >= 10 && request < 20)
        {
            Debug.Log(this.GetType().Name + " handled request " + request);
        }
        else if (successor != null)
        {
            successor.HandleRequest(request);
        }
    }
}

/// <summary>
/// The 'ConcreteHandler3' class
/// </summary>
class ConcreteHandler3 : Handler
{
    public override void HandleRequest(int request)
    {
        if (request >= 20 && request < 30)
        {
            Debug.Log(this.GetType().Name+" handled request "+request);
        }
        else if (successor != null)
        {
            successor.HandleRequest(request);
        }
    }
}

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Structure/ChainOfResponsibilityStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3735e9dfe4e07ef4699ae6346cfb319f
timeCreated: 1476254475
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Chain of Responsibility Pattern/Structure/TestChainOfResponsibilityStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: d01eb93683900324ab1812300dfa6c2d
timeCreated: 1476254484
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern.meta`:

```meta
fileFormatVersion: 2
guid: f349b81f0b98d9b4fb895cb218e5aa73
folderAsset: yes
timeCreated: 1476172148
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: d8ef10013bde1ff449b915e91ce89072
folderAsset: yes
timeCreated: 1476415959
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example1/CommandExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CommandExample1.cs
//-------------------------------------------------------------------------------------

//This real-world code demonstrates the Command pattern used in a simple calculator with unlimited number of undo's and redo's.
//Note that in C#  the word 'operator' is a keyword. Prefixing it with '@' allows using it as an identifier.

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace CommandExample1
{
    public class CommandExample1 : MonoBehaviour
    {
	    void Start ( )
        {
            // Create user and let her compute
            User user = new User();

            // User presses calculator buttons
            user.Compute('+', 100);
            user.Compute('-', 50);
            user.Compute('*', 10);
            user.Compute('/', 2);

            // Undo 4 commands
            user.Undo(4);

            // Redo 3 commands
            user.Redo(3);
        }
    }

    /// <summary>
    /// The 'Command' abstract class
    /// </summary>
    abstract class Command
    {
        public abstract void Execute();
        public abstract void UnExecute();
    }

    /// <summary>
    /// The 'ConcreteCommand' class
    /// </summary>
    class CalculatorCommand : Command
    {
        private char _operator;
        private int _operand;
        private Calculator _calculator;

        // Constructor
        public CalculatorCommand(Calculator calculator,
          char @operator, int operand)
        {
            this._calculator = calculator;
            this._operator = @operator;
            this._operand = operand;
        }

        // Gets operator
        public char Operator
        {
            set { _operator = value; }
        }

        // Get operand
        public int Operand
        {
            set { _operand = value; }
        }

        // Execute new command
        public override void Execute()
        {
            _calculator.Operation(_operator, _operand);
        }

        // Unexecute last command
        public override void UnExecute()
        {
            _calculator.Operation(Undo(_operator), _operand);
        }

        // Returns opposite operator for given operator
        private char Undo(char @operator)
        {
            switch (@operator)
            {
                case '+': return '-';
                case '-': return '+';
                case '*': return '/';
                case '/': return '*';
                default:
                    throw new
            ArgumentException("@operator");
            }
        }
    }

    /// <summary>
    /// The 'Receiver' class
    /// </summary>
    class Calculator
    {
        private int _curr = 0;

        public void Operation(char @operator, int operand)
        {
            switch (@operator)
            {
                case '+': _curr += operand; break;
                case '-': _curr -= operand; break;
                case '*': _curr *= operand; break;
                case '/': _curr /= operand; break;
            }
            Debug.Log("Current value = " + _curr+ " ( following "+ @operator+operand+" )");
        }
    }

    /// <summary>
    /// The 'Invoker' class
    /// </summary>
    class User
    {
        // Initializers
        private Calculator _calculator = new Calculator();
        private List<Command> _commands = new List<Command>();
        private int _current = 0;

        public void Redo(int levels)
        {
            for (int i = 0; i < levels; i++)
            {
                if (_current < _commands.Count - 1)
                {
                    Command command = _commands[_current++];
                    command.Execute();
                }
            }
        }

        public void Undo(int levels)
        {
            Debug.Log("\n---- Undo "+ levels + " levels");
            // Perform undo operations
            for (int i = 0; i < levels; i++)
            {
                if (_current > 0)
                {
                    Command command = _commands[--_current] as Command;
                    command.UnExecute();
                }
            }
        }

        public void Compute(char @operator, int operand)
        {
            // Create command operation and execute it
            Command command = new CalculatorCommand(
              _calculator, @operator, operand);
            command.Execute();

            // Add command to undo list
            _commands.Add(command);
            _current++;
        }
    }
}
```

`Assets/Behavioral Patterns/Command Pattern/Example1/CommandExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 5f887a8fbd8adfd4689dc340bf986914
timeCreated: 1476415999
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example1/TestCommandExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 7d9fa9990c7338c4286b66ab93a432b6
timeCreated: 1476416014
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 7dbe42ec5a9c61b45bdb55d3298f7812
folderAsset: yes
timeCreated: 1476172445
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/DeviceButton.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DeviceButton.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class DeviceButton
{
    ICommand cmd;

    public DeviceButton(ICommand cmd)
    {
        this.cmd = cmd;
    }

    public void Press()
    {
        this.cmd.Execute(); // actually the invoker (device button) has no idea what it does
    }

    public void PressUndo()
    {
        this.cmd.Undo();
    }
}


```

`Assets/Behavioral Patterns/Command Pattern/Example2/DeviceButton.cs.meta`:

```meta
fileFormatVersion: 2
guid: dac2efccbfe90804eb9a3a5cc4f190ed
timeCreated: 1476175849
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/ICommand.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ICommand.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;


// commands:
// command interface:
public interface ICommand
{
    void Execute();
    void Undo();
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/ICommand.cs.meta`:

```meta
fileFormatVersion: 2
guid: d49f1e0e8a7de664e8f53b3e6655a5c8
timeCreated: 1476173485
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/IElectronicDevice.cs`:

```cs
//-------------------------------------------------------------------------------------
//	IElectronicDevice.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

// interface for electronic devices (or receivers)
public interface IElectronicDevice
{
    void On();
    void Off();
    void VolumeUp();
    void VolumeDown();
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/IElectronicDevice.cs.meta`:

```meta
fileFormatVersion: 2
guid: 183509958bb0db747b0fcca968e3f487
timeCreated: 1476173431
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/Radio.cs`:

```cs
//-------------------------------------------------------------------------------------
//	Radio.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class Radio : IElectronicDevice
{
    protected int volume = 0;

    public void On()
    {
        Debug.Log("Radio is On");
    }

    public void Off()
    {
        Debug.Log("Radio is Off");
    }

    public void VolumeUp()
    {
        ++volume;
        Debug.Log("Radio Turned Volume Up to " + volume);
    }

    public void VolumeDown()
    {
        if (volume > 0)
            --volume;
        Debug.Log("Radio Turned Volume Down to " + volume);
    }
}
```

`Assets/Behavioral Patterns/Command Pattern/Example2/Radio.cs.meta`:

```meta
fileFormatVersion: 2
guid: 13a2c8a8c7dd942498c84e8594a7d7ab
timeCreated: 1476175862
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TVRemove.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TVRemove.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TVRemove
{
    public static IElectronicDevice GetDevice()
    {
        return new Television();
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TVRemove.cs.meta`:

```meta
fileFormatVersion: 2
guid: e3d805b65eaaf564aa1df0d496026320
timeCreated: 1476175855
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/Television.cs`:

```cs
//-------------------------------------------------------------------------------------
//	Television.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class Television : IElectronicDevice
{
    protected int volume = 0;

    public void On()
    {
        Debug.Log("TV is On");
    }

    public void Off()
    {
        Debug.Log("TV is Off");
    }

    public void VolumeUp()
    {
        ++volume;
        Debug.Log("TV Turned Volume Up to " + volume);
    }

    public void VolumeDown()
    {
        if (volume > 0)
            --volume;
        Debug.Log("TV Turned Volume Down to " + volume);
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/Television.cs.meta`:

```meta
fileFormatVersion: 2
guid: 9e332c6432594974183547f4a5e80ee2
timeCreated: 1476173479
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TestCommandPattern.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TestCommandPattern.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class TestCommandPattern : MonoBehaviour
{
    void Start()
    {
        Debug.Log("------------------Command Pattern--------------");
        IElectronicDevice device = TVRemove.GetDevice();

        TurnTVOn onCommand = new TurnTVOn(device);
        DeviceButton onPressed = new DeviceButton(onCommand);
        onPressed.Press();

        // -----------------------

        TurnTVOff offCommand = new TurnTVOff(device);
        onPressed = new DeviceButton(offCommand);
        onPressed.Press();

        TurnVolumeUp volUpCommand = new TurnVolumeUp(device);
        onPressed = new DeviceButton(volUpCommand);
        onPressed.Press();
        onPressed.Press();
        onPressed.Press();

        TurnVolumeDown volDownCommand = new TurnVolumeDown(device);
        onPressed = new DeviceButton(volDownCommand);
        onPressed.Press();

        // -----------------------
        Television tv = new Television();
        Radio radio = new Radio();

        List<IElectronicDevice> allDevices = new List<IElectronicDevice>();
        allDevices.Add(tv);
        allDevices.Add(radio);

        TurnItAllOff turnOffDevices = new TurnItAllOff(allDevices);
        DeviceButton turnThemOff = new DeviceButton(turnOffDevices);
        turnThemOff.Press();

        // -----------------------
        turnThemOff.PressUndo();

    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TestCommandPattern.cs.meta`:

```meta
fileFormatVersion: 2
guid: ed974261bec1f654bbef3a4191d66af7
timeCreated: 1476173404
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnItAllOff.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TurnItAllOff.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class TurnItAllOff : ICommand
{
    List<IElectronicDevice> devices;

    public TurnItAllOff(List<IElectronicDevice> devices)
    {
        this.devices = devices;
    }

    public void Execute()
    {
        foreach (IElectronicDevice device in devices)
        {
            device.Off();
        }
    }

    public void Undo()
    {
        foreach (IElectronicDevice device in devices)
        {
            device.On();
        }
    }
}
```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnItAllOff.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3485f5b7965d5bc41bfb3bddfd231022
timeCreated: 1476175871
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnTVOff.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TurnTVOff.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TurnTVOff : ICommand
{
    IElectronicDevice device;

    public TurnTVOff(IElectronicDevice device)
    {
        this.device = device;
    }

    public void Execute()
    {
        this.device.Off();
    }

    public void Undo()
    {
        this.device.On();
    }
}


```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnTVOff.cs.meta`:

```meta
fileFormatVersion: 2
guid: 21c14de9a6e19934a871a4b79e9fea38
timeCreated: 1476173498
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnTVOn.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TurnTVOn.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TurnTVOn : ICommand
{
    IElectronicDevice device;

    public TurnTVOn(IElectronicDevice device)
    {
        this.device = device;
    }

    public void Execute()
    {
        this.device.On();
    }

    public void Undo()
    {
        this.device.Off();
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnTVOn.cs.meta`:

```meta
fileFormatVersion: 2
guid: e4e88f9eaf779ef4d87e9fc546f57a1b
timeCreated: 1476173489
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnVolumeDown.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TurnVolumeDown.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TurnVolumeDown : ICommand
{
    IElectronicDevice device;

    public TurnVolumeDown(IElectronicDevice device)
    {
        this.device = device;
    }

    public void Execute()
    {
        this.device.VolumeDown();
    }

    public void Undo()
    {
        this.device.VolumeUp();
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnVolumeDown.cs.meta`:

```meta
fileFormatVersion: 2
guid: f8d68e8195a8c6c41bc84f599bfd46ca
timeCreated: 1476173519
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnVolumeUp.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TurnVolumeUp.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TurnVolumeUp : ICommand
{
    IElectronicDevice device;

    public TurnVolumeUp(IElectronicDevice device)
    {
        this.device = device;
    }

    public void Execute()
    {
        this.device.VolumeUp();
    }

    public void Undo()
    {
        this.device.VolumeDown();
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example2/TurnVolumeUp.cs.meta`:

```meta
fileFormatVersion: 2
guid: fb45d24ef8e8a1b4facf6ab5fd0cdb71
timeCreated: 1476173509
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example2/command pattern example 1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 3194668c3e6e318499a361b1a434b5c1
timeCreated: 1476177594
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3.meta`:

```meta
fileFormatVersion: 2
guid: e24ed5cf749038446b91f8b851de617f
folderAsset: yes
timeCreated: 1476172445
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3/Command.cs`:

```cs

/// <summary>
/// The 'Command' abstract class that we will inherit from
/// </summary>
public interface Command
{
        void Execute();
        void UnExecute();
    }

```

`Assets/Behavioral Patterns/Command Pattern/Example3/Command.cs.meta`:

```meta
fileFormatVersion: 2
guid: fb48245b7ca84e84695a50cc2d1f3d63
timeCreated: 1443726689
licenseType: Free
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3/InputHandler.cs`:

```cs
/// <summary>
/// The 'Invoker' class that makes calls to execute the commands
/// </summary>

using UnityEngine;
using System.Collections.Generic;

public class InputHandler : MonoBehaviour
{
    public float moveDistance = 10f;
    public GameObject objectToMove;

    private MoveCommandReceiver moveCommandReciever;
    private List<MoveCommand> commands = new List<MoveCommand>();
    private int currentCommandNum = 0;

    void Start()
    {
        moveCommandReciever = new MoveCommandReceiver();

        if (objectToMove == null)
        {
            Debug.LogError("objectToMove must be assigned via inspector");
            this.enabled = false;
        }
    }


    public void Undo()
    {
        if (currentCommandNum > 0)
        {
            currentCommandNum--;
            MoveCommand moveCommand = commands[currentCommandNum];
            moveCommand.UnExecute();
        }
    }

    public void Redo()
    {
        if (currentCommandNum < commands.Count)
        {
            MoveCommand moveCommand = commands[currentCommandNum];
            currentCommandNum++;
            moveCommand.Execute();
        }
    }

    private void Move(MoveDirection direction)
    {
        MoveCommand moveCommand = new MoveCommand(moveCommandReciever, direction, moveDistance, objectToMove);
        moveCommand.Execute();
        commands.Add(moveCommand);
        currentCommandNum++;
    }


    //Simple move commands to attach to UI buttons
    public void MoveUp() { Move(MoveDirection.up); }
    public void MoveDown() { Move(MoveDirection.down); }
    public void MoveLeft() { Move(MoveDirection.left); }
    public void MoveRight() { Move(MoveDirection.right); }

    //Shows what's going on in the command list
    void OnGUI()
    {
        string label = "   start";
        if (currentCommandNum == 0)
        {
            label = ">" + label;
        }
        label += "\n";

        for (int i = 0; i < commands.Count; i++)
        {
            if (i == currentCommandNum - 1)
                label += "> " + commands[i].ToString() + "\n";
            else
                label += "   " + commands[i].ToString() + "\n";

        }
        GUI.Label(new Rect(0, 0, 400, 800), label);
    }

    void Update()
    {
        if (Input.GetKeyDown(KeyCode.UpArrow))
        {
            MoveUp();
        }
        if (Input.GetKeyDown(KeyCode.DownArrow))
        {
            MoveDown();
        }
        if (Input.GetKeyDown(KeyCode.LeftArrow))
        {
            MoveLeft();
        }
        if (Input.GetKeyDown(KeyCode.RightArrow))
        {
            MoveRight();
        }
        if (Input.GetKeyDown(KeyCode.R))
        {
            Redo();
        }
        if (Input.GetKeyDown(KeyCode.U))
        {
            Undo();
        }
    }
}

```

`Assets/Behavioral Patterns/Command Pattern/Example3/InputHandler.cs.meta`:

```meta
fileFormatVersion: 2
guid: 65852039ecae1544bb206a2d800923b0
timeCreated: 1443729901
licenseType: Free
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3/MoveCommand.cs`:

```cs
/// <summary>
/// A simple example of a class inheriting from a command pattern
/// This handles execution of the command as well as unexecution of the command
/// </summary>

using UnityEngine;

    // A basic enum to describe our movement
    public enum MoveDirection { up, down, left, right };

    class MoveCommand : Command
    {
        private MoveDirection _direction;
        private MoveCommandReceiver _receiver;
        private float _distance;
        private GameObject _gameObject;


        //Constructor
        public MoveCommand(MoveCommandReceiver reciever, MoveDirection direction, float distance, GameObject gameObjectToMove)
        {
            this._receiver = reciever;
            this._direction = direction;
            this._distance = distance;
            this._gameObject = gameObjectToMove;
        }


        //Execute new command
        public void Execute()
        {
            _receiver.MoveOperation(_gameObject, _direction, _distance);
        }


        //Undo last command
        public void UnExecute()
        {
            _receiver.MoveOperation(_gameObject, InverseDirection(_direction), _distance);
        }


        //invert the direction for undo
        private MoveDirection InverseDirection(MoveDirection direction)
        {
            switch (direction)
            {
                case MoveDirection.up:
                    return MoveDirection.down;
                case MoveDirection.down:
                    return MoveDirection.up;
                case MoveDirection.left:
                    return MoveDirection.right;
                case MoveDirection.right:
                    return MoveDirection.left;
                default:
                    Debug.LogError("Unknown MoveDirection");
                    return MoveDirection.up;
            }
        }


        //So we can show this command in debug output easily
        public override string ToString()
        {
            return _gameObject.name + " : " + MoveDirectionString(_direction) + " : " + _distance.ToString();
        }


        //Convert the MoveDirection enum to a string for debug
        public string MoveDirectionString(MoveDirection direction)
        {
            switch (direction)
            {
                case MoveDirection.up:
                    return "up";
                case MoveDirection.down:
                    return "down";
                case MoveDirection.left:
                    return "left";
                case MoveDirection.right:
                    return "right";
                default:
                    return "unkown";
            }
        }
    }

```

`Assets/Behavioral Patterns/Command Pattern/Example3/MoveCommand.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6640f3d189ff07f429337a511fb740f1
timeCreated: 1443729901
licenseType: Free
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3/MoveCommandReceiver.cs`:

```cs
/// <summary>
/// The 'Receiver' class - this handles what a move command actually does
/// </summary>

using UnityEngine;

    class MoveCommandReceiver
    {
        public void MoveOperation(GameObject gameObjectToMove, MoveDirection direction, float distance)
        {
            switch (direction)
            {
                case MoveDirection.up:
                    MoveY(gameObjectToMove, distance);
                    break;
                case MoveDirection.down:
                    MoveY(gameObjectToMove, -distance);
                    break;
                case MoveDirection.left:
                    MoveX(gameObjectToMove, -distance);
                    break;
                case MoveDirection.right:
                    MoveX(gameObjectToMove, distance);
                    break;
            }
        }

        private void MoveY(GameObject gameObjectToMove, float distance)
        {
            Vector3 newPos = gameObjectToMove.transform.position;
            newPos.y += distance;
            gameObjectToMove.transform.position = newPos;
        }

        private void MoveX(GameObject gameObjectToMove, float distance)
        {
            Vector3 newPos = gameObjectToMove.transform.position;
            newPos.x += distance;
            gameObjectToMove.transform.position = newPos;
        }
    }


```

`Assets/Behavioral Patterns/Command Pattern/Example3/MoveCommandReceiver.cs.meta`:

```meta
fileFormatVersion: 2
guid: 8b876aa2447a543409330fcc88e0615b
timeCreated: 1443729901
licenseType: Free
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example3/command pattern example2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 84db78d1aa884244cb57b98cac903f64
timeCreated: 1443726226
licenseType: Free
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example4.meta`:

```meta
fileFormatVersion: 2
guid: 086a9ad1eca6efa45977620e876a9a27
folderAsset: yes
timeCreated: 1513178402
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example4/CommandPatternExample4.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CommandPatternExample4.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace CommandPatternExample4
{
    public class CommandPatternExample4 : MonoBehaviour
    {
        void Start()
        {
            Invoker theInvoker = new Invoker();

            Command theCommand = null;
            // 结合命令与执行者
            theCommand = new ConcreteCommand1(new Receiver1(), "hi");
            theInvoker.AddCommand(theCommand);
            theCommand = new ConcreteCommand2(new Receiver2(), 666);
            theInvoker.AddCommand(theCommand);

            // 进行执行
            theInvoker.ExecuteCommand();
        }

    }


    /// <summary>
    /// 命令抽象类
    /// </summary>
    public abstract class Command
    {
        public abstract void Execute();
    }

    /// <summary>
    /// 实际命令1-绑定命令和receiver
    /// </summary>
    public class ConcreteCommand1 : Command
    {
        Receiver1 m_Receiver = null;
        string m_Command = "";

        public ConcreteCommand1(Receiver1 Receiver, string param)
        {
            m_Receiver = Receiver;
            m_Command = param;
        }

        public override void Execute()
        {
            m_Receiver.Action(m_Command);
        }
    }

    /// <summary>
    /// 实际命令2-绑定命令和receiver
    /// </summary>
    public class ConcreteCommand2 : Command
    {
        Receiver2 m_Receiver = null;
        int m_Param = 0;

        public ConcreteCommand2(Receiver2 Receiver, int Param)
        {
            m_Receiver = Receiver;
            m_Param = Param;
        }

        public override void Execute()
        {
            m_Receiver.Action(m_Param);
        }
    }

    /// <summary>
    /// 功能执行者1
    /// </summary>
    public class Receiver1
    {
        public Receiver1() { }
        public void Action(string param)
        {
            Debug.Log("Receiver1.Action:Command[" + param + "]");
        }
    }

    /// <summary>
    /// 功能执行者2
    /// </summary>
    public class Receiver2
    {
        public Receiver2() { }
        public void Action(int Param)
        {
            Debug.Log("Receiver2.Action:Param[" + Param.ToString() + "]");
        }
    }


    /// <summary>
    /// 命令管理者
    /// </summary>
    public class Invoker
    {
        List<Command> m_Commands = new List<Command>();

        // 加入命令
        public void AddCommand(Command theCommand)
        {
            m_Commands.Add(theCommand);
        }

        /// <summary>
        /// 执行命令
        /// </summary>
        public void ExecuteCommand()
        {
            // 执行
            foreach (Command theCommand in m_Commands)
                theCommand.Execute();
            // 清空 
            m_Commands.Clear();
        }
    }







}
```

`Assets/Behavioral Patterns/Command Pattern/Example4/CommandPatternExample4.cs.meta`:

```meta
fileFormatVersion: 2
guid: 95c78db8cb7440147ba72526cbeeb58e
timeCreated: 1513178414
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Example4/CommandPatternExample4.unity.meta`:

```meta
fileFormatVersion: 2
guid: 6e62709717944ba43af88f7a557a2783
timeCreated: 1513178981
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/README.md`:

```md
# Command Pattern 命令模式
## Definition
Encapsulate a request as an object, thereby letting you parameterize clients with different requests, queue or log requests, and support undoable operations.
<br>命令模式将“请求”封装成对象，以便使用不同的请求、队列或者日志来参数化其他对象，同时支持可撤消的操作。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/command.gif) 

## Participants
The classes and objects participating in this pattern are:

### Command
* declares an interface for executing an operation

### ConcreteCommand
* defines a binding between a Receiver object and an action
* implements Execute by invoking the corresponding operation(s) on Receiver

### Client 
* creates a ConcreteCommand object and sets its receiver

### Invoker
* asks the command to carry out the request

### Receiver
* knows how to perform the operations associated with carrying out the request.




```

`Assets/Behavioral Patterns/Command Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 23cc684e13f68a6498d1a583369d8713
timeCreated: 1476253449
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 8ea3107aa73b34a4dba4ca42317755e3
folderAsset: yes
timeCreated: 1476337480
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Structure/CommandStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CommandStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace CommandStructure
{
    public class CommandStructure : MonoBehaviour
    {
	    void Start ( )
        {
            // Create receiver, command, and invoker
            Receiver receiver = new Receiver();
            Command command = new ConcreteCommand(receiver);
            Invoker invoker = new Invoker();

            // Set and execute command
            invoker.SetCommand(command);
            invoker.ExecuteCommand();
        }
    }

    /// <summary>
    /// The 'Command' abstract class
    /// </summary>
    abstract class Command
    {
        protected Receiver receiver;

        // Constructor
        public Command(Receiver receiver)
        {
            this.receiver = receiver;
        }

        public abstract void Execute();
    }

    /// <summary>
    /// The 'ConcreteCommand' class
    /// </summary>
    class ConcreteCommand : Command
    {
        // Constructor
        public ConcreteCommand(Receiver receiver) :
          base(receiver)
        {
        }

        public override void Execute()
        {
            receiver.Action();
        }
    }

    /// <summary>
    /// The 'Receiver' class
    /// </summary>
    class Receiver
    {
        public void Action()
        {
          Debug.Log("Called Receiver.Action()");
        }
    }

    /// <summary>
    /// The 'Invoker' class
    /// </summary>
    class Invoker
    {
        private Command _command;

        public void SetCommand(Command command)
        {
            this._command = command;
        }

        public void ExecuteCommand()
        {
            _command.Execute();
        }
    }

}
```

`Assets/Behavioral Patterns/Command Pattern/Structure/CommandStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: b38d64600e2706049abfe16e65b848b4
timeCreated: 1476337519
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Command Pattern/Structure/TestCommandStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: a6fe8f56cf4ccaa4ebfcf4b22b9a7dc3
timeCreated: 1476337530
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern.meta`:

```meta
fileFormatVersion: 2
guid: c05d4ef751506df4e94f8851e8fb275d
folderAsset: yes
timeCreated: 1476256528
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: c2b2d6259f4a42040abea5be5a63a86e
folderAsset: yes
timeCreated: 1476417008
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example1/InterpreterExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	InterpreterExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Interpreter pattern which is used to convert a Roman numeral to a decimal.

namespace InterpreterExample1
{
    public class InterpreterExample1 : MonoBehaviour
    {
        void Start()
        {
            string roman = "MCMXXVIII";
            Context context = new Context(roman);

            // Build the 'parse tree'
            List<Expression> tree = new List<Expression>();
            tree.Add(new ThousandExpression());
            tree.Add(new HundredExpression());
            tree.Add(new TenExpression());
            tree.Add(new OneExpression());

            // Interpret
            foreach (Expression exp in tree)
            {
                exp.Interpret(context);
            }

            Debug.Log(roman+" = "+ context.Output);
        }
    }

    /// <summary>
    /// The 'Context' class
    /// </summary>
    class Context
    {
        private string _input;
        private int _output;

        // Constructor
        public Context(string input)
        {
            this._input = input;
        }

        // Gets or sets input
        public string Input
        {
            get { return _input; }
            set { _input = value; }
        }

        // Gets or sets output
        public int Output
        {
            get { return _output; }
            set { _output = value; }
        }
    }

    /// <summary>
    /// The 'AbstractExpression' class
    /// </summary>
    abstract class Expression
    {
        public void Interpret(Context context)
        {
            if (context.Input.Length == 0)
                return;

            if (context.Input.StartsWith(Nine()))
            {
                context.Output += (9 * Multiplier());
                context.Input = context.Input.Substring(2);
            }
            else if (context.Input.StartsWith(Four()))
            {
                context.Output += (4 * Multiplier());
                context.Input = context.Input.Substring(2);
            }
            else if (context.Input.StartsWith(Five()))
            {
                context.Output += (5 * Multiplier());
                context.Input = context.Input.Substring(1);
            }

            while (context.Input.StartsWith(One()))
            {
                context.Output += (1 * Multiplier());
                context.Input = context.Input.Substring(1);
            }
        }

        public abstract string One();
        public abstract string Four();
        public abstract string Five();
        public abstract string Nine();
        public abstract int Multiplier();
    }

    /// <summary>
    /// A 'TerminalExpression' class
    /// <remarks>
    /// Thousand checks for the Roman Numeral M 
    /// </remarks>
    /// </summary>
    class ThousandExpression : Expression
    {
        public override string One() { return "M"; }
        public override string Four() { return " "; }
        public override string Five() { return " "; }
        public override string Nine() { return " "; }
        public override int Multiplier() { return 1000; }
    }

    /// <summary>
    /// A 'TerminalExpression' class
    /// <remarks>
    /// Hundred checks C, CD, D or CM
    /// </remarks>
    /// </summary>
    class HundredExpression : Expression
    {
        public override string One() { return "C"; }
        public override string Four() { return "CD"; }
        public override string Five() { return "D"; }
        public override string Nine() { return "CM"; }
        public override int Multiplier() { return 100; }
    }

    /// <summary>
    /// A 'TerminalExpression' class
    /// <remarks>
    /// Ten checks for X, XL, L and XC
    /// </remarks>
    /// </summary>
    class TenExpression : Expression
    {
        public override string One() { return "X"; }
        public override string Four() { return "XL"; }
        public override string Five() { return "L"; }
        public override string Nine() { return "XC"; }
        public override int Multiplier() { return 10; }
    }

    /// <summary>
    /// A 'TerminalExpression' class
    /// <remarks>
    /// One checks for I, II, III, IV, V, VI, VI, VII, VIII, IX
    /// </remarks>
    /// </summary>
    class OneExpression : Expression
    {
        public override string One() { return "I"; }
        public override string Four() { return "IV"; }
        public override string Five() { return "V"; }
        public override string Nine() { return "IX"; }
        public override int Multiplier() { return 1; }
    }
}

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example1/InterpreterExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 83ab1cac5e0e51044bbb3d8d34f92ae8
timeCreated: 1476417023
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example1/TestInterpreterExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 495d3860a8b49e44396a2a26726531fc
timeCreated: 1476417031
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 1ae149820bff1a64bbd6cfbc12a30de6
folderAsset: yes
timeCreated: 1478134589
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example2/InterpreterExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	InterpreterExample2.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Globalization;
using System.Reflection;

public class InterpreterExample2 : MonoBehaviour
{
	void Start ( )
	{
        string question1 = "2 Gallons to pints";
        AskQuestion(question1);

        string question2 = "4 Gallons to tablespoons";
        AskQuestion(question2);
    }

    protected void AskQuestion(string question)
    {
        ConversionContext context = new ConversionContext(question);

        string fromConversion = context.fromConversion; // in this example fromConversion is always the second word
        string toConversion = context.toConversion;
        double quantity = context.quantity;

        // Trying to get a matching class for the word "fromConversion"
        try
        {
            // Getting the type, we also have to define the namespace (in this case InterpreterPattern as defined above)
            // and fromConversion should hold the class name (in this case Gallons)
            Type type = Type.GetType("InterpreterPattern." + fromConversion);
            object instance = Activator.CreateInstance(type);
            Expression expression = instance as Expression;

            // Get the matching method: e.g. (toConversion = pints)
            MethodInfo method = type.GetMethod(toConversion);
            string result = (string)method.Invoke(instance, new object[] { quantity });

            Debug.Log("Output: " + quantity.ToString() + "  " + fromConversion + " are " + result + " " + toConversion);
        }
        catch (Exception e)
        {
            Debug.Log(e.Message);
        }
    }
}


// Context object that does try to make sense of an input string:
public class ConversionContext
{
    public string conversionQues { get; protected set; }

    public string fromConversion { get; protected set; }

    public string toConversion { get; protected set; }

    public double quantity { get; protected set; }

    protected string[] partsOfQues;



    // here happens the sensemaking
    public ConversionContext(string input)
    {
        Debug.Log("Input: " + input);
        this.conversionQues = input;
        this.partsOfQues = input.Split(new string[] { " " }, System.StringSplitOptions.RemoveEmptyEntries);

        if (partsOfQues.Length >= 4)
        {

            fromConversion = GetCapitalized(partsOfQues[1]);
            // 1 gallon to pints
            toConversion = GetLowerCase(partsOfQues[3]);

            // get quantitiy:
            double quant;
            double.TryParse(partsOfQues[0], out quant);
            this.quantity = quant;
        }
    }

    // Some helper methods:
    protected string GetCapitalized(string word)
    {
        word = word.ToLower();
        word = CultureInfo.CurrentCulture.TextInfo.ToTitleCase(word);

        // make sure a 's' is appended
        if (word.EndsWith("s") == false)
        {
            word += "s";
        }

        return word;
    }

    protected string GetLowerCase(string word)
    {
        return word.ToLower();
    }
}




// Definition of all the things the concrete expression
// shall be able to convert into
public abstract class Expression
{
    public abstract string gallons(double quantity);

    public abstract string quarts(double quantity);

    public abstract string pints(double quantity);

    public abstract string cups(double quantity);

    public abstract string tablespoons(double quantity);
}


// concrete class
public class Gallons : Expression
{
    #region implemented abstract members of Expression

    public override string gallons(double quantity)
    {
        return quantity.ToString();
    }

    public override string quarts(double quantity)
    {
        return (quantity * 4).ToString();
    }

    public override string pints(double quantity)
    {
        return (quantity * 8).ToString();
    }

    public override string cups(double quantity)
    {
        return (quantity * 16).ToString();
    }

    public override string tablespoons(double quantity)
    {
        return (quantity * 256).ToString();
    }

    #endregion
}

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example2/InterpreterExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6c583318d0b9bdc42a000678046319ae
timeCreated: 1478134614
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Example2/InterpreterExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 48e84814dfcc93f47a1f547c66adafb2
timeCreated: 1478134622
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/README.md`:

```md
# Interpreter Pattern 解释器模式
## Definition

Given a language, define a representation for its grammar along with an interpreter that uses the representation to interpret sentences in the language.
<br>给定一门语言，定义它的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中的句子。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/interpreter.gif)


## Participants

The classes and objects participating in this pattern are:

### AbstractExpression  (Expression)
* declares an interface for executing an operation

### TerminalExpression  ( ThousandExpression, HundredExpression, TenExpression, OneExpression )
* implements an Interpret operation associated with terminal symbols in the grammar.
* an instance is required for every terminal symbol in the sentence.

### NonterminalExpression  ( not used )
* one such class is required for every rule R ::= R1R2...Rn in the grammar
* maintains instance variables of type AbstractExpression for each of the symbols R1 through Rn.
* implements an Interpret operation for nonterminal symbols in the grammar. Interpret typically calls itself recursively on the variables representing R1 through Rn.

### Context  (Context)
* contains information that is global to the interpreter

### Client  (InterpreterApp)
* builds (or is given) an abstract syntax tree representing a particular sentence in the language that the grammar defines. The abstract syntax tree is assembled from instances of the NonterminalExpression and TerminalExpression classes
* invokes the Interpret operation


```

`Assets/Behavioral Patterns/Interpreter Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 6debc223d587c0049a8d6228674476d1
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: d1d0d7a96bea8304d969442423b7b870
folderAsset: yes
timeCreated: 1476256539
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Structure/InterpreterStructrue.cs`:

```cs
//-------------------------------------------------------------------------------------
//	InterpreterStructrue.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class InterpreterStructrue : MonoBehaviour
{
	void Start ( )
    {
        Context context = new Context();

        // Usually a tree 
        ArrayList list = new ArrayList();

        // Populate 'abstract syntax tree' 
        list.Add(new TerminalExpression());
        list.Add(new NonterminalExpression());
        list.Add(new TerminalExpression());
        list.Add(new TerminalExpression());

        // Interpret
        foreach (AbstractExpression exp in list)
        {
            exp.Interpret(context);
        }

    }
}

/// <summary>
/// The 'Context' class
/// </summary>
class Context
{
}

/// <summary>
/// The 'AbstractExpression' abstract class
/// </summary>
abstract class AbstractExpression
{
    public abstract void Interpret(Context context);
}

/// <summary>
/// The 'TerminalExpression' class
/// </summary>
class TerminalExpression : AbstractExpression
{
    public override void Interpret(Context context)
    {
        Debug.Log("Called Terminal.Interpret()");
    }
}

/// <summary>
/// The 'NonterminalExpression' class
/// </summary>
class NonterminalExpression : AbstractExpression
{
    public override void Interpret(Context context)
    {
        Debug.Log("Called Nonterminal.Interpret()");
    }
}
```

`Assets/Behavioral Patterns/Interpreter Pattern/Structure/InterpreterStructrue.cs.meta`:

```meta
fileFormatVersion: 2
guid: 647b309ceb0ec0d40929ebb3790af0ca
timeCreated: 1476256575
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Interpreter Pattern/Structure/TestInterpreterStructrue.unity.meta`:

```meta
fileFormatVersion: 2
guid: 7eda28f465f576c41a0968c092cdfa28
timeCreated: 1476256595
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 21a76eb2cd4b72445978bcb512713cb4
folderAsset: yes
timeCreated: 1476259703
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 3495268024177944ca26580accbe2e74
folderAsset: yes
timeCreated: 1476417987
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example1/IteratorExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	IteratorExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This real-world code demonstrates the Iterator pattern which is used to iterate over a collection of items and skip a specific number of items each iteration.

namespace IteratorExample1
{
    public class IteratorExample1 : MonoBehaviour
    {
        void Start()
        {
            // Build a collection
            Collection collection = new Collection();
            collection[0] = new Item("Item 0");
            collection[1] = new Item("Item 1");
            collection[2] = new Item("Item 2");
            collection[3] = new Item("Item 3");
            collection[4] = new Item("Item 4");
            collection[5] = new Item("Item 5");
            collection[6] = new Item("Item 6");
            collection[7] = new Item("Item 7");
            collection[8] = new Item("Item 8");

            // Create iterator
            Iterator iterator = collection.CreateIterator();

            // Skip every other item
            iterator.Step = 2;

            Debug.Log("Iterating collection:");

            for (Item item = iterator.First();
                !iterator.IsDone; item = iterator.Next())
            {
                Debug.Log(item.Name);
            }
        }
    }

    /// <summary>
    /// A collection item
    /// </summary>
    class Item
    {
        private string _name;

        // Constructor
        public Item(string name)
        {
            this._name = name;
        }

        // Gets name
        public string Name
        {
            get { return _name; }
        }
    }

    /// <summary>
    /// The 'Aggregate' interface
    /// </summary>
    interface IAbstractCollection
    {
        Iterator CreateIterator();
    }

    /// <summary>
    /// The 'ConcreteAggregate' class
    /// </summary>
    class Collection : IAbstractCollection
    {
        private ArrayList _items = new ArrayList();

        public Iterator CreateIterator()
        {
            return new Iterator(this);
        }

        // Gets item count
        public int Count
        {
            get { return _items.Count; }
        }

        // Indexer
        public object this[int index]
        {
            get { return _items[index]; }
            set { _items.Add(value); }
        }
    }

    /// <summary>
    /// The 'Iterator' interface
    /// </summary>
    interface IAbstractIterator
    {
        Item First();
        Item Next();
        bool IsDone { get; }
        Item CurrentItem { get; }
    }

    /// <summary>
    /// The 'ConcreteIterator' class
    /// </summary>
    class Iterator : IAbstractIterator
    {
        private Collection _collection;
        private int _current = 0;
        private int _step = 1;

        // Constructor
        public Iterator(Collection collection)
        {
            this._collection = collection;
        }

        // Gets first item
        public Item First()
        {
            _current = 0;
            return _collection[_current] as Item;
        }

        // Gets next item
        public Item Next()
        {
            _current += _step;
            if (!IsDone)
                return _collection[_current] as Item;
            else
                return null;
        }

        // Gets or sets stepsize
        public int Step
        {
            get { return _step; }
            set { _step = value; }
        }

        // Gets current iterator item
        public Item CurrentItem
        {
            get { return _collection[_current] as Item; }
        }

        // Gets whether iteration is complete
        public bool IsDone
        {
            get { return _current >= _collection.Count; }
        }
    }
}
```

`Assets/Behavioral Patterns/Iterator Pattern/Example1/IteratorExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: d985425a20a770a45b361064dc27f9a2
timeCreated: 1476417999
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example1/TestIteratorExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 86096f5591bc0df45bdccdd8eaf50532
timeCreated: 1476418007
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 620483e6c6ec9c64c9021cc2ae07bdee
folderAsset: yes
timeCreated: 1478135284
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example2/IteratorExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	IteratorExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;


/* Iterator provides uniform way to access different collections of objects
 * If you get an Array, ArrayList, Hashtable of objects, you pop out an iterator for each and treat them the same
 * 
 * This provides a uniform way to cycle through different collections
 * 
 * You can also write polymorphic code because you can refer to each collection of objects
 * because they'll implement the same interface
 * */


public class IteratorExample2 : MonoBehaviour
{
	void Start ( )
	{
        // creating the collections and adding some songs:
        SongsOfThe70s song70s = new SongsOfThe70s();
        song70s.AddSong("song title", "song artist", 1974);
        song70s.AddSong("song title2", "song artist2", 1978);

        SongsOfThe80s song80s = new SongsOfThe80s();
        song80s.AddSong("song title 80s", "song artist 80s", 1985);
        song80s.AddSong("song title2 80s", "song artist2 80s", 1989);

        // because of the iterator pattern we can loop through both types
        // of collections the same simple way and don't have to bother
        // with what type of collection the object stores:

        IEnumerator songsOfThe70sIterator = song70s.GetIterator();
        while (songsOfThe70sIterator.MoveNext())
        {
            SongInfo info = (SongInfo)songsOfThe70sIterator.Current;
            Debug.Log("Song 70s: " + info.ToStringEx());
        }

        IEnumerator songsOfThe80sIterator = song80s.GetIterator();
        while (songsOfThe80sIterator.MoveNext())
        {
            SongInfo info = (SongInfo)songsOfThe80sIterator.Current;
            Debug.Log("Song 80s: " + info.ToStringEx());
        }
    }



    // just a sample object to hold some arbitrary information for demonstration
    public class SongInfo
    {
        public string songName { get; protected set; }

        public string bandName { get; protected set; }

        public int yearReleased { get; protected set; }

        public SongInfo(string songName, string bandName, int yearReleased)
        {
            this.songName = songName;
            this.bandName = bandName;
            this.yearReleased = yearReleased;
        }

        public string ToStringEx()
        {
            return this.songName + " - " + this.bandName + " : " + this.yearReleased.ToString();
        }
    }



    // Iterator Interface
    public interface SongIterator
    {
        IEnumerator GetIterator();
    }



    // These two classes implement the iterator
    public class SongsOfThe70s : SongIterator
    {
        // here it is a list
        protected List<SongInfo> bestSongs;

        public SongsOfThe70s()
        {
            bestSongs = new List<SongInfo>();
        }

        public void AddSong(string name, string artist, int year)
        {
            SongInfo song = new SongInfo(name, artist, year);
            bestSongs.Add(song);
        }

        //about yeild return :http://www.jb51.net/article/54810.htm
        // heart
        public IEnumerator GetIterator()
        {
            foreach (SongInfo song in bestSongs)
                yield return song;
            yield break;
        }
    }

    public class SongsOfThe80s : SongIterator
    {
        // here we have an array
        protected SongInfo[] bestSongs;

        public SongsOfThe80s()
        {
            bestSongs = new SongInfo[0];
        }

        public void AddSong(string name, string artist, int year)
        {
            SongInfo song = new SongInfo(name, artist, year);
            // just for the sake of easyness of appending something we will convert the array to a list
            List<SongInfo> newSongs = new List<SongInfo>(bestSongs);
            // add a new element
            newSongs.Add(song);
            // and convert it back to an array
            bestSongs = newSongs.ToArray();
        }

        // heart
        public IEnumerator GetIterator()
        {
            foreach (SongInfo song in bestSongs)
                yield return song;
            yield break;
        }
    }



}




```

`Assets/Behavioral Patterns/Iterator Pattern/Example2/IteratorExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: d9b00f9df3a3d014681451ad83507d51
timeCreated: 1478135314
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Example2/IteratorExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 7077e46107ffcc143971855609f46e89
timeCreated: 1478135295
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/README.md`:

```md
# Iterator Pattern 迭代器模式
## Definition

Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.
<br>提供一种方法访问一个容器对象中各个元素，而又不需暴露该对象的内部细节。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/iterator.gif)


## Participants

The classes and objects participating in this pattern are:

### Iterator  (AbstractIterator)
* defines an interface for accessing and traversing elements.

### ConcreteIterator  (Iterator)
* implements the Iterator interface.
* keeps track of the current position in the traversal of the aggregate.

### Aggregate  (AbstractCollection)
* defines an interface for creating an Iterator object

### ConcreteAggregate  (Collection)
* implements the Iterator creation interface to return an instance of the proper ConcreteIterator


```

`Assets/Behavioral Patterns/Iterator Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: b3b062c4e100fcf42828d623c49b6aee
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 71dbd20320478f74f8f71f40197852c0
folderAsset: yes
timeCreated: 1476259724
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Structure/IteratorStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	IteratorStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class IteratorStructure : MonoBehaviour
{
	void Start ( )
	{
        ConcreteAggregate a = new ConcreteAggregate();
        a[0] = "Item A";
        a[1] = "Item B";
        a[2] = "Item C";
        a[3] = "Item D";

        // Create Iterator and provide aggregate
        Iterator i = a.CreateIterator();

        Debug.Log("Iterating over collection:");

        object item = i.First();
        while (item != null)
        {
            Debug.Log(item);
            item = i.Next();
        }
    }
}

    /// <summary>
    /// The 'Aggregate' abstract class
    /// </summary>
    abstract class Aggregate
    {
        public abstract Iterator CreateIterator();
    }

    /// <summary>
    /// The 'ConcreteAggregate' class
    /// </summary>
    class ConcreteAggregate : Aggregate
    {
        private ArrayList _items = new ArrayList();

        public override Iterator CreateIterator()
        {
            return new ConcreteIterator(this);
        }

        // Gets item count
        public int Count
        {
            get { return _items.Count; }
        }

        // Indexer
        public object this[int index]
        {
            get { return _items[index]; }
            set { _items.Insert(index, value); }
        }
    }

    /// <summary>
    /// The 'Iterator' abstract class
    /// </summary>
    abstract class Iterator
    {
        public abstract object First();
        public abstract object Next();
        public abstract bool IsDone();
        public abstract object CurrentItem();
    }

    /// <summary>
    /// The 'ConcreteIterator' class
    /// </summary>
    class ConcreteIterator : Iterator
    {
        private ConcreteAggregate _aggregate;
        private int _current = 0;

        // Constructor
        public ConcreteIterator(ConcreteAggregate aggregate)
        {
            this._aggregate = aggregate;
        }

        // Gets first iteration item
        public override object First()
        {
            return _aggregate[0];
        }

        // Gets next iteration item
        public override object Next()
        {
            object ret = null;
            if (_current < _aggregate.Count - 1)
            {
                ret = _aggregate[++_current];
            }

            return ret;
        }

        // Gets current iteration item
        public override object CurrentItem()
        {
            return _aggregate[_current];
        }

        // Gets whether iterations are complete
        public override bool IsDone()
        {
            return _current >= _aggregate.Count;
        }
    }

```

`Assets/Behavioral Patterns/Iterator Pattern/Structure/IteratorStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 016acba3c6e48be44a53d7736d0332db
timeCreated: 1476259742
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Iterator Pattern/Structure/TestIteratorStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 6a52b71863b406944b66a018df4f6efb
timeCreated: 1476259765
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 4c2bdae9f3663ef4f9e247895758c16f
folderAsset: yes
timeCreated: 1476253516
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 3425617abe43ffb4797b2d1ef3ecceb0
folderAsset: yes
timeCreated: 1476429393
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example1/MediatorExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MediatorExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Mediator pattern facilitating loosely coupled communication between 
//different Participants registering with a Chatroom.The Chatroom is the central hub through which all communication takes place.
//At this point only one-to-one communication is implemented in the Chatroom, but would be trivial to change to one-to-many.

namespace MediatorExample1
{
    public class MediatorExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create chatroom
            Chatroom chatroom = new Chatroom();

            // Create participants and register them
            Participant George = new Beatle("George");
            Participant Paul = new Beatle("Paul");
            Participant Ringo = new Beatle("Ringo");
            Participant John = new Beatle("John");
            Participant Yoko = new NonBeatle("Yoko");

            chatroom.Register(George);
            chatroom.Register(Paul);
            chatroom.Register(Ringo);
            chatroom.Register(John);
            chatroom.Register(Yoko);

            // Chatting participants
            Yoko.Send("John", "Hi John!");
            Paul.Send("Ringo", "All you need is love");
            Ringo.Send("George", "My sweet Lord");
            Paul.Send("John", "Can't buy me love");
            John.Send("Yoko", "My sweet love");

        }
    }

    /// <summary>
    /// The 'Mediator' abstract class
    /// </summary>
    abstract class AbstractChatroom
    {
        public abstract void Register(Participant participant);
        public abstract void Send(string from, string to, string message);
    }

    /// <summary>
    /// The 'ConcreteMediator' class
    /// </summary>
    class Chatroom : AbstractChatroom
    {
        private Dictionary<string, Participant> _participants =
          new Dictionary<string, Participant>();

        public override void Register(Participant participant)
        {
            if (!_participants.ContainsValue(participant))
            {
                _participants[participant.Name] = participant;
            }

            participant.Chatroom = this;
        }

        public override void Send( string from, string to, string message)
        {
            Participant participant = _participants[to];

            if (participant != null)
            {
                participant.Receive(from, message);
            }
        }
    }

    /// <summary>
    /// The 'AbstractColleague' class
    /// </summary>
    class Participant
    {
        private Chatroom _chatroom;
        private string _name;

        // Constructor
        public Participant(string name)
        {
            this._name = name;
        }

        // Gets participant name
        public string Name
        {
            get { return _name; }
        }

        // Gets chatroom
        public Chatroom Chatroom
        {
            set { _chatroom = value; }
            get { return _chatroom; }
        }

        // Sends message to given participant
        public void Send(string to, string message)
        {
            _chatroom.Send(_name, to, message);
        }

        // Receives message from given participant
        public virtual void Receive(string from, string message)
        {
            Debug.Log(from + " to " + Name + ": '" + message + "'");
        }
    }

    /// <summary>
    /// A 'ConcreteColleague' class
    /// </summary>
    class Beatle : Participant
    {
        // Constructor
        public Beatle(string name)
          : base(name)
        {
        }

        public override void Receive(string from, string message)
        {
            Debug.Log("To a Beatle: ");
            base.Receive(from, message);
        }
    }

    /// <summary>
    /// A 'ConcreteColleague' class
    /// </summary>
    class NonBeatle : Participant
    {
        // Constructor
        public NonBeatle(string name)
          : base(name)
        {
        }

        public override void Receive(string from, string message)
        {
            Debug.Log("To a non-Beatle: ");
            base.Receive(from, message);
        }
    }
}
```

`Assets/Behavioral Patterns/Mediator Pattern/Example1/MediatorExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6378ce44e5c0c1543a7ce113ec8d2d58
timeCreated: 1476429517
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example1/TestMediatorExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: ee6cd5198e2fbdb41802988520f4242a
timeCreated: 1476429531
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: d7d25f727b1900d48aa8bcb0f783db27
folderAsset: yes
timeCreated: 1478221049
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example2/MediatorExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MediatorExample2.cs
//-------------------------------------------------------------------------------------

/*
 * It is used to handle communication between related objects(Colleagues)
 *
 * All communication is handled by the mediator
 * the colleagues don't need to know anything about each other
 *
 * GOF: Allows loose coupling by encapsulating the way disparate sets of objects
 * interact and communicate with each other.Allows for the actions
 * of each object set to vary independently of one another
 *
 *
 **/

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace MediatorExample2
{

    public class MediatorExample2 : MonoBehaviour
    {
	    void Start ( )
	    {
            StockMediator nyse = new StockMediator();

            // important here is:
            // in this example they both might be doing nothing different, but
            // they could be totally different objects and calculate stuff different or so
            // but still be able to talk to the mediator the same easy way
            // that's why we have different objects here:
            GormanSlacks broker = new GormanSlacks(nyse);
            JTPoorman broker2 = new JTPoorman(nyse);

            nyse.AddColleague(broker);
            nyse.AddColleague(broker2);

            // because they call methods on the same mediator object they talk to the same mediator
            // who handles all the stock exanche and keeps track of that. so the brokers by themselves
            // don't know anything about each other. which is a good thing :-)
            broker.SaleOffer(Stock.MSFT, 100);
            broker.SaleOffer(Stock.GOOG, 50);

            broker2.BuyOffer(Stock.MSFT, 100);
            broker2.SaleOffer(Stock.NRG, 10);

            broker.BuyOffer(Stock.NRG, 10);
            broker.BuyOffer(Stock.NRG, 50);

            nyse.PrintStockOfferings();
        }


    }

    // I like using enums more than using strings
    // because it prevents typos and I don't need to remember strings ;)
    public enum Stock
    {
        MSFT,
        GOOG,
        NRG
    };


    public class StockOffer
    {
        public int stockShares { get; private set; }
        public Stock stock { get; private set; }
        public int colleagueCode { get; private set; }

        public StockOffer(int numOfShares, Stock stock, int collCode)
        {
            this.stockShares = numOfShares;
            this.stock = stock;
            this.colleagueCode = collCode;
        }
    }


    public abstract class Colleague
    {
        private Mediator mediator;
        private int colleagueCode;

        public Colleague(Mediator mediator)
        {
            this.mediator = mediator;
        }

        public void SetCode(int code)
        {
            colleagueCode = code;
        }

        public void SaleOffer(Stock stock, int shares)
        {
            mediator.SaleOffer(stock, shares, this.colleagueCode);
        }

        public void BuyOffer(Stock stock, int shares)
        {
            mediator.BuyOffer(stock, shares, this.colleagueCode);
        }
    }


    public class GormanSlacks : Colleague
    {
        // using : base() like here calls the constructor of the base class with the arguments passed in
        // here it calls "Colleague(Mediator mediator)"
        public GormanSlacks(Mediator mediator) : base(mediator)
        {
            Debug.Log("Gorman Slacks signed up with the stockexange");
        }
    }

    public class JTPoorman : Colleague
    {
        public JTPoorman(Mediator mediator) : base(mediator)
        {
            Debug.Log("JT Poorman signed up with the stockexange");
        }
    }






    public interface Mediator
    {
        void AddColleague(Colleague colleague);
        void SaleOffer(Stock stock, int shares, int code);
        void BuyOffer(Stock stock, int shares, int code);
    }


    public class StockMediator : Mediator
    {
        private List<Colleague> colleagues;
        private List<StockOffer> buyOffers;
        private List<StockOffer> sellOffers;

        private int colleagueCodes = 0;

        public StockMediator()
        {
            colleagues = new List<Colleague>();
            buyOffers = new List<StockOffer>();
            sellOffers = new List<StockOffer>();
        }

        #region Mediator implementation
        public void AddColleague(Colleague colleague)
        {
            this.colleagues.Add(colleague);
            colleagueCodes += 1;
            colleague.SetCode(colleagueCodes);
        }

        public void SaleOffer(Stock stock, int shares, int code)
        {
            bool stockSold = false;

            // see if someone is willing to buy:
            for (int i = 0; i < buyOffers.Count; i++)
            {
                StockOffer offer = buyOffers[i];
                // check if the stock is the same:
                if (offer.stock == stock && offer.stockShares == shares)
                {
                    Debug.Log(shares + " shares of " + stock + " stocks sold to colleague with code " + code);

                    buyOffers.Remove(offer);
                    stockSold = true;
                }

                if (stockSold) break;
            }

            if (!stockSold)
            {
                Debug.Log(shares + " shares of " + stock + " stocks added to inventory");
                StockOffer offer = new StockOffer(shares, stock, code);
                sellOffers.Add(offer);
            }
        }

        public void BuyOffer(Stock stock, int shares, int code)
        {
            bool stockBought = false;

            // see if someone is willing to buy:
            for (int i = 0; i < sellOffers.Count; i++)
            {
                StockOffer offer = sellOffers[i];
                // check if the stock is the same:
                if (offer.stock == stock && offer.stockShares == shares)
                {
                    Debug.Log(shares + " shares of " + stock + " stocks bought by colleague with code " + code);

                    sellOffers.Remove(offer);
                    stockBought = true;
                }

                if (stockBought) break;
            }

            if (!stockBought)
            {
                Debug.Log(shares + " shares of " + stock + " stocks added to inventory");
                StockOffer offer = new StockOffer(shares, stock, code);
                buyOffers.Add(offer);
            }
        }
        #endregion


        public void PrintStockOfferings()
        {
            Debug.Log("For Sale: " + sellOffers.Count);
            foreach (StockOffer offer in sellOffers)
            {
                Debug.Log(offer.stock + " - " + offer.stockShares + " - " + offer.colleagueCode);
            }


            Debug.Log("For Buy: " + buyOffers.Count);
            foreach (StockOffer offer in buyOffers)
            {
                Debug.Log(offer.stock + " - " + offer.stockShares + " - " + offer.colleagueCode);
            }
        }
    }

}
```

`Assets/Behavioral Patterns/Mediator Pattern/Example2/MediatorExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: ce4e7bc9833bf24459bd80038556a926
timeCreated: 1478221073
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Example2/MediatorExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: a7b96277519f87c40bc95136a53c1082
timeCreated: 1478221079
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/README.md`:

```md
# Mediator Pattern 中介者模式
## Definition

Define an object that encapsulates how a set of objects interact. Mediator promotes loose coupling by keeping objects from referring to each other explicitly, and it lets you vary their interaction independently.
<br>用一个中介对象封装一系列的对象交互，中介者使各对象不需要显示地相互作用，从而使其耦合松散，而且可以独立地改变它们之间的交互。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/mediator.gif)


## Participants

The classes and objects participating in this pattern are:

### Mediator  (IChatroom)
* defines an interface for communicating with Colleague objects

### ConcreteMediator  (Chatroom)
* implements cooperative behavior by coordinating Colleague objects
* knows and maintains its colleagues

### Colleague classes  (Participant)
* each Colleague class knows its Mediator object
* each colleague communicates with its mediator whenever it would have otherwise communicated with another colleague


```

`Assets/Behavioral Patterns/Mediator Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 68fb95267f9fe084c98bf2c242038cab
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 358d622529949b544a081cc9923b81a4
folderAsset: yes
timeCreated: 1476253528
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Structure/MediatorStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MediatorStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class MediatorStructure : MonoBehaviour
{
    void Start()
    {
        ConcreteMediator m = new ConcreteMediator();

        ConcreteColleague1 c1 = new ConcreteColleague1(m);
        ConcreteColleague2 c2 = new ConcreteColleague2(m);

        m.Colleague1 = c1;
        m.Colleague2 = c2;

        c1.Send("How are you?");
        c2.Send("Fine, thanks");

    }
}

/// <summary>
/// The 'Mediator' abstract class
/// </summary>
abstract class Mediator
{
    public abstract void Send(string message,Colleague colleague);
}

/// <summary>
/// The 'ConcreteMediator' class
/// </summary>
class ConcreteMediator : Mediator
{
    private ConcreteColleague1 _colleague1;
    private ConcreteColleague2 _colleague2;

    public ConcreteColleague1 Colleague1
    {
        set { _colleague1 = value; }
    }

    public ConcreteColleague2 Colleague2
    {
        set { _colleague2 = value; }
    }

    public override void Send(string message,Colleague colleague)
    {
        if (colleague == _colleague1)
        {
            _colleague2.Notify(message);
        }
        else
        {
            _colleague1.Notify(message);
        }
    }
}

/// <summary>
/// The 'Colleague' abstract class
/// </summary>
abstract class Colleague
{
    protected Mediator mediator;

    // Constructor
    public Colleague(Mediator mediator)
    {
        this.mediator = mediator;
    }
}

/// <summary>
/// A 'ConcreteColleague' class
/// </summary>
class ConcreteColleague1 : Colleague
{
    // Constructor
    public ConcreteColleague1(Mediator mediator)
        : base(mediator)
    {
    }

    public void Send(string message)
    {
        mediator.Send(message, this);
    }

    public void Notify(string message)
    {
        Debug.Log("Colleague1 gets message: "+ message);
    }
}

/// <summary>
/// A 'ConcreteColleague' class
/// </summary>
class ConcreteColleague2 : Colleague
{
    // Constructor
    public ConcreteColleague2(Mediator mediator)
        : base(mediator)
    {
    }

    public void Send(string message)
    {
        mediator.Send(message, this);
    }

    public void Notify(string message)
    {
        Debug.Log("Colleague2 gets message: "+ message);
    }
}

```

`Assets/Behavioral Patterns/Mediator Pattern/Structure/MediatorStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 032fe11a9cf0d3944ac8781728f7638a
timeCreated: 1476253550
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Mediator Pattern/Structure/TestMediatorStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: e403e29e13dbdc64292bb1cb251e6a6f
timeCreated: 1476254154
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 5a60038efeb90e9428dca0bfe9b75299
folderAsset: yes
timeCreated: 1476260928
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 61cd7c128cfddad40bcf5ba230629610
folderAsset: yes
timeCreated: 1476428127
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example1/MementoExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MediatorExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This real-world code demonstrates the Memento pattern which temporarily saves and then restores the SalesProspect's internal state.

namespace MementoExample1
{
    public class MementoExample1 : MonoBehaviour
    {
        void Start()
        {
            SalesProspect s = new SalesProspect();
            s.Name = "Bruce";
            s.Phone = "(412) 256-6666";
            s.Budget = 25000.0;

            // Store internal state
            ProspectMemory m = new ProspectMemory();
            m.Memento = s.SaveMemento();

            // Continue changing originator
            s.Name = "Oliver";
            s.Phone = "(310) 209-8888";
            s.Budget = 1000000.0;

            // Restore saved state
            s.RestoreMemento(m.Memento);

        }
    }

    /// <summary>
    /// The 'Originator' class
    /// </summary>
    class SalesProspect
    {
        private string _name;
        private string _phone;
        private double _budget;

        // Gets or sets name
        public string Name
        {
            get { return _name; }
            set
            {
                _name = value;
                Debug.Log("Name:  " + _name);
            }
        }

        // Gets or sets phone
        public string Phone
        {
            get { return _phone; }
            set
            {
                _phone = value;
                Debug.Log("Phone: " + _phone);
            }
        }

        // Gets or sets budget
        public double Budget
        {
            get { return _budget; }
            set
            {
                _budget = value;
                Debug.Log("Budget: " + _budget);
            }
        }

        // Stores memento
        public Memento SaveMemento()
        {
            Debug.Log("\nSaving state --\n");
            return new Memento(_name, _phone, _budget);
        }

        // Restores memento
        public void RestoreMemento(Memento memento)
        {
            Debug.Log("\nRestoring state --\n");
            this.Name = memento.Name;
            this.Phone = memento.Phone;
            this.Budget = memento.Budget;
        }
    }

    /// <summary>
    /// The 'Memento' class
    /// </summary>
    class Memento
    {
        private string _name;
        private string _phone;
        private double _budget;

        // Constructor
        public Memento(string name, string phone, double budget)
        {
            this._name = name;
            this._phone = phone;
            this._budget = budget;
        }

        // Gets or sets name
        public string Name
        {
            get { return _name; }
            set { _name = value; }
        }

        // Gets or set phone
        public string Phone
        {
            get { return _phone; }
            set { _phone = value; }
        }

        // Gets or sets budget
        public double Budget
        {
            get { return _budget; }
            set { _budget = value; }
        }
    }

    /// <summary>
    /// The 'Caretaker' class
    /// </summary>
    class ProspectMemory
    {
        private Memento _memento;

        // Property
        public Memento Memento
        {
            set { _memento = value; }
            get { return _memento; }
        }
    }
}
```

`Assets/Behavioral Patterns/Memento Pattern/Example1/MementoExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: be4a9508eb34e414e92a27b8d6b64104
timeCreated: 1476428182
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example1/TestMementoExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: a1d9692612aed704f9523ffb7643436f
timeCreated: 1476428197
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 827cfdec70344104a91405025578d5ab
folderAsset: yes
timeCreated: 1478235407
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example2/MementoExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MementoExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections.Generic;

/* 
 * provides a way to store previous states of an object easily
 * 
 * memento: the basic object that is stored in different states
 * 
 * originator: sets and gets values from the currently targeted memento. Creates new memenots and assigns current values to them
 * 
 * caretaker: holds an list that contains all previous versions of the memento. it can store and retrieve stored mementos
 * 
 * 
 * */

namespace MementoExample2
{


    public class MementoExample2 : MonoBehaviour
    {

        Caretaker caretaker = new Caretaker();

        Originator originator = new Originator();

        int savedFiles = 0, currentArticle = 0;

        void Start()
        {
            // here we do some virtual typing and saving texts:
            Save("Tex1: Hello World, this is text example 1");
            Save("Text2: Ok here comes example number 2.");
            Save("Text3: And example number 3. Just testing.");
            Save("Text4: ....");

            // Here we do some virtual button pressing
            Debug.Log("Pressing Undo");
            Undo();
            Debug.Log("Pressing Undo");
            Undo();
            Debug.Log("Pressing Undo");
            Undo();
            Debug.Log("Pressing Redo");
            Redo();
        }


        // these methods below might get called when someone is pressing a button
        // you could easily implement it with unitys new ui system :)
        public void Save(string text)
        {
            originator.Set(text);
            caretaker.Add(originator.StoreInMemento());
            savedFiles = caretaker.GetCountOfSavedArticles();
            currentArticle = savedFiles;
        }

        public string Undo()
        {
            if (currentArticle > 0)
                currentArticle -= 1;

            Memento prev = caretaker.Get(currentArticle);
            string prevArticle = originator.RestoreFromMemento(prev);
            return prevArticle;
        }

        public string Redo()
        {
            if (currentArticle < savedFiles)
                currentArticle += 1;

            Memento next = caretaker.Get(currentArticle);
            string nextArticle = originator.RestoreFromMemento(next);
            return nextArticle;
        }

    }




    /// <summary>
    /// the basic object that is stored in different states
    /// </summary>
    public class Memento
    {
        public string article { get; protected set; }

        // Base Memento class that in this case just stores article strings!:)
        public Memento(string article)
        {
            this.article = article;
        }
    }


    /// <summary>
    /// sets and gets values from the currently targeted memento. Creates new memenots and assigns current values to them.
    /// </summary>
    public class Originator
    {
        public string article { get; protected set; }

        public void Set(string article)
        {
            Debug.Log("From Originator: Current Version of article is: [\"" + article + "\"]");
            this.article = article;
        }

        public Memento StoreInMemento()
        {
            Debug.Log("From Originator: Saving in Memento: [\"" + this.article + "\"]");
            return new Memento(this.article);
        }

        public string RestoreFromMemento(Memento memento)
        {
            article = memento.article;
            Debug.Log("From Originator: Previous Article saved in Memento: [\"" + article + "\"]");
            return article;
        }
    }


    /// <summary>
    /// holds an list that contains all previous versions of the memento. it can store and retrieve stored mementos
    /// </summary>
    public class Caretaker
    {
        List<Memento> savedArticles = new List<Memento>();

        public void Add(Memento m)
        {
            savedArticles.Add(m);
        }

        public Memento Get(int i)
        {
            return savedArticles[i];
        }

        public int GetCountOfSavedArticles()
        {
            return savedArticles.Count;
        }
    }


}
```

`Assets/Behavioral Patterns/Memento Pattern/Example2/MementoExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: cd708282c148b5f4dac11feb16bab49c
timeCreated: 1478235419
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Example2/MementoExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 76231a1903b6e9f439bb7056f17bc9fa
timeCreated: 1478235426
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/README.md`:

```md
# Memento Pattern 备忘录模式
## Definition

Without violating encapsulation, capture and externalize an object's internal state so that the object can be restored to this state later.
<br>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/memento.gif)


## Participants

The classes and objects participating in this pattern are:

### Memento  (Memento)
* stores internal state of the Originator object. The memento may store as much or as little of the originator's internal state as necessary at its originator's discretion.
* protect against access by objects of other than the originator. Mementos have effectively two interfaces. Caretaker sees a narrow interface to the Memento -- it can only pass the memento to the other objects. Originator, in contrast, sees a wide interface, one that lets it access all the data necessary to restore itself to its previous state. Ideally, only the originator that produces the memento would be permitted to access the memento's internal state.

### Originator  (SalesProspect)
* creates a memento containing a snapshot of its current internal state.
* uses the memento to restore its internal state

### Caretaker  (Caretaker)
* is responsible for the memento's safekeeping
* never operates on or examines the contents of a memento.


```

`Assets/Behavioral Patterns/Memento Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 1279ce79c1536934ca808844ab3f423d
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 231139635733b9a4ea2f40f351aa3885
folderAsset: yes
timeCreated: 1476260939
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Structure/MementoStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	MementoStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class MementoStructure : MonoBehaviour
{
	void Start ( )
    {
        Originator o = new Originator();
        o.State = "On";

        // Store internal state
        Caretaker c = new Caretaker();
        c.Memento = o.CreateMemento();

        // Continue changing originator
        o.State = "Off";

        // Restore saved state
        o.SetMemento(c.Memento);

    }
}

/// <summary>
/// The 'Originator' class
/// </summary>
class Originator
{
    private string _state;

    // Property
    public string State
    {
        get { return _state; }
        set
        {
            _state = value;
            Debug.Log("State = " + _state);
        }
    }

    // Creates memento 
    public Memento CreateMemento()
    {
        return (new Memento(_state));
    }

    // Restores original state
    public void SetMemento(Memento memento)
    {
        Debug.Log("Restoring state...");
        State = memento.State;
    }
}

/// <summary>
/// The 'Memento' class
/// </summary>
class Memento
{
    private string _state;

    // Constructor
    public Memento(string state)
    {
        this._state = state;
    }

    // Gets or sets state
    public string State
    {
        get { return _state; }
    }
}

/// <summary>
/// The 'Caretaker' class
/// </summary>
class Caretaker
{
    private Memento _memento;

    // Gets or sets memento
    public Memento Memento
    {
        set { _memento = value; }
        get { return _memento; }
    }
}

```

`Assets/Behavioral Patterns/Memento Pattern/Structure/MementoStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 5317b1fcfd3edc140865fe1ca4640433
timeCreated: 1476260950
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Memento Pattern/Structure/TestMementoStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 2ca09da7283f5524592d99623f2d8928
timeCreated: 1476260963
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 95dbb1855accb944381d026a327e5612
folderAsset: yes
timeCreated: 1476180760
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: a7e2d48162f811b47a991a471f9eb36d
folderAsset: yes
timeCreated: 1476430239
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Example1/ObserverExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ObserverExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Observer pattern in which registered investors are notified every time a stock changes value.

namespace ObserverExample1
{
    public class ObserverExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create IBM stock and attach investors
            IBM ibm = new IBM("IBM", 120.00);
            ibm.Attach(new Investor("Sorros"));
            ibm.Attach(new Investor("Berkshire"));

            // Fluctuating prices will notify investors
            ibm.Price = 120.10;
            ibm.Price = 121.00;
            ibm.Price = 120.50;
            ibm.Price = 120.75;

        }
    }

    /// <summary>
    /// The 'Subject' abstract class
    /// </summary>
    abstract class Stock
    {
        private string _symbol;
        private double _price;
        private List<IInvestor> _investors = new List<IInvestor>();

        // Constructor
        public Stock(string symbol, double price)
        {
            this._symbol = symbol;
            this._price = price;
        }

        public void Attach(IInvestor investor)
        {
            _investors.Add(investor);
        }

        public void Detach(IInvestor investor)
        {
            _investors.Remove(investor);
        }

        public void Notify()
        {
            foreach (IInvestor investor in _investors)
            {
                investor.Update(this);
            }

            Debug.Log("Stock Notify( ) called");
        }

        // Gets or sets the price
        public double Price
        {
            get { return _price; }
            set
            {
                if (_price != value)
                {
                    _price = value;
                    Notify();
                }
            }
        }

        // Gets the symbol
        public string Symbol
        {
            get { return _symbol; }
        }
    }

    /// <summary>
    /// The 'ConcreteSubject' class
    /// </summary>
    class IBM : Stock
    {
        // Constructor
        public IBM(string symbol, double price)
          : base(symbol, price)
        {
        }
    }

    /// <summary>
    /// The 'Observer' interface
    /// </summary>
    interface IInvestor
    {
        void Update(Stock stock);
    }

    /// <summary>
    /// The 'ConcreteObserver' class
    /// </summary>
    class Investor : IInvestor
    {
        private string _name;
        private Stock _stock;

        // Constructor
        public Investor(string name)
        {
            this._name = name;
        }

        public void Update(Stock stock)
        {
            //Debug.Log("Notified {0} of {1}'s " +"change to {2:C}", _name, stock.Symbol, stock.Price);
            Debug.Log("Notified "+ _name+" of "+ stock+"'s " + "change to "+stock.Price);
        }

        // Gets or sets the stock
        public Stock Stock
        {
            get { return _stock; }
            set { _stock = value; }
        }
    }
}

```

`Assets/Behavioral Patterns/Observer Pattern/Example1/ObserverExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: c12caba1cb6a4fc49bd1460526bbc172
timeCreated: 1476430251
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Example1/TestObserverExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 45070ac04c4aef14f8f9e0bad7cd09fe
timeCreated: 1476430270
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/README.md`:

```md
# Observer Pattern 观察者模式
## Definition

Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.
<br>定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/observer.gif)


## Participants

The classes and objects participating in this pattern are:

### Subject  (Stock)
* knows its observers. Any number of Observer objects may observe a subject
* provides an interface for attaching and detaching Observer objects.

### ConcreteSubject  (IBM)
* stores state of interest to ConcreteObserver
* sends a notification to its observers when its state changes

### Observer  (IInvestor)
* defines an updating interface for objects that should be notified of changes in a subject.

### ConcreteObserver  (Investor)
* maintains a reference to a ConcreteSubject object
* stores state that should stay consistent with the subject's
* implements the Observer updating interface to keep its state consistent with the subject's


```

`Assets/Behavioral Patterns/Observer Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 40326e0b80148da4199d4bcc38ac57ab
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 2d59e2241ccc3fe4a9acdc32965e7e70
folderAsset: yes
timeCreated: 1476180773
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Structure/ObserverStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ObserverStructure.cs
//-------------------------------------------------------------------------------------


//[Definition]
//--------------------------------
// Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.
// 
// [Participants]
//--------------------------------
//  The classes and objects participating in this pattern are:
// 
// Subject
//      knows its observers.Any number of Observer objects may observe a subject
//      provides an interface for attaching and detaching Observer objects.
// ConcreteSubject
//      stores state of interest to ConcreteObserver
//      sends a notification to its observers when its state changes
// Observer
//      defines an updating interface for objects that should be notified of changes in a subject.
// ConcreteObserver
//      maintains a reference to a ConcreteSubject object
//      stores state that should stay consistent with the subject's
//      implements the Observer updating interface to keep its state consistent with the subject's


using UnityEngine;
using System.Collections;
using System.Collections.Generic;


public class ObserverStructure : MonoBehaviour
{
    void Start()
    {
        // Configure Observer pattern
        ConcreteSubject s = new ConcreteSubject();

        s.Attach(new ConcreteObserver(s, "X"));
        s.Attach(new ConcreteObserver(s, "Y"));
        s.Attach(new ConcreteObserver(s, "Z"));

        // Change subject and notify observers
        s.SubjectState = "ABC";
        s.Notify();
        // Change subject and notify observers again
        s.SubjectState = "666";
        s.Notify();
    }
}

/// <summary>
/// The 'Subject' abstract class
/// </summary>
abstract class Subject
    {
        private List<Observer> _observers = new List<Observer>();

        public void Attach(Observer observer)
        {
            _observers.Add(observer);
        }

        public void Detach(Observer observer)
        {
            _observers.Remove(observer);
        }

        public void Notify()
        {
            foreach (Observer o in _observers)
            {
                o.Update();
            }
        }
    }

    /// <summary>
    /// The 'ConcreteSubject' class
    /// </summary>
    class ConcreteSubject : Subject
    {
        private string _subjectState;

        // Gets or sets subject state
        public string SubjectState
        {
            get { return _subjectState; }
            set { _subjectState = value; }
        }
    }

    /// <summary>
    /// The 'Observer' abstract class
    /// </summary>
    abstract class Observer
    {
        public abstract void Update();
    }

    /// <summary>
    /// The 'ConcreteObserver' class
    /// </summary>
    class ConcreteObserver : Observer
    {
        private string _name;
        private string _observerState;
        private ConcreteSubject _subject;

        // Constructor
        public ConcreteObserver(
          ConcreteSubject subject, string name)
        {
            this._subject = subject;
            this._name = name;
        }

        public override void Update()
        {
            _observerState = _subject.SubjectState;
            Debug.Log("Observer "+ _name+"'s new state is "+_observerState);
    }

        // Gets or sets subject
        public ConcreteSubject Subject
        {
            get { return _subject; }
            set { _subject = value; }
        }
    }


```

`Assets/Behavioral Patterns/Observer Pattern/Structure/ObserverStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: fc88095746869b74799c82c76c9ca4d9
timeCreated: 1476180819
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Observer Pattern/Structure/TestObserverStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: e1776a250ceb0054ea645d93016ea833
timeCreated: 1476181107
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern.meta`:

```meta
fileFormatVersion: 2
guid: bdc0355359205fc4695ddd32142e2c6a
folderAsset: yes
timeCreated: 1476072123
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: f1ce7b1591a850241891bd4d2f498730
folderAsset: yes
timeCreated: 1476434845
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple1/StateExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StateExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This real-world code demonstrates the State pattern which allows an Account to behave differently depending on its balance. 
//The difference in behavior is delegated to State objects called RedState, SilverState and GoldState. 
//These states represent overdrawn accounts, starter accounts, and accounts in good standing.

namespace StateExample1
{
    public class StateExample1 : MonoBehaviour
    {
        void Start()
        {
            // Open a new account
            Account account = new Account("Jim Johnson");

            // Apply financial transactions
            account.Deposit(500.0);
            account.Deposit(300.0);
            account.Deposit(550.0);
            account.PayInterest();
            account.Withdraw(2000.00);
            account.Withdraw(1100.00);
        }
    }

    /// <summary>
    /// The 'State' abstract class
    /// </summary>
    abstract class State
    {
        protected Account account;
        protected double balance;

        protected double interest;
        protected double lowerLimit;
        protected double upperLimit;

        // Properties
        public Account Account
        {
            get { return account; }
            set { account = value; }
        }

        public double Balance
        {
            get { return balance; }
            set { balance = value; }
        }

        public abstract void Deposit(double amount);
        public abstract void Withdraw(double amount);
        public abstract void PayInterest();
    }


    /// <summary>
    /// A 'ConcreteState' class
    /// <remarks>
    /// Red indicates that account is overdrawn 
    /// </remarks>
    /// </summary>
    class RedState : State
    {
        private double _serviceFee;

        // Constructor
        public RedState(State state)
        {
            this.balance = state.Balance;
            this.account = state.Account;
            Initialize();
        }

        private void Initialize()
        {
            // Should come from a datasource
            interest = 0.0;
            lowerLimit = -100.0;
            upperLimit = 0.0;
            _serviceFee = 15.00;
        }

        public override void Deposit(double amount)
        {
            balance += amount;
            StateChangeCheck();
        }

        public override void Withdraw(double amount)
        {
            amount = amount - _serviceFee;
            Debug.Log("No funds available for withdrawal!");
        }

        public override void PayInterest()
        {
            // No interest is paid
        }

        private void StateChangeCheck()
        {
            if (balance > upperLimit)
            {
                account.State = new SilverState(this);
            }
        }
    }

    /// <summary>
    /// A 'ConcreteState' class
    /// <remarks>
    /// Silver indicates a non-interest bearing state
    /// </remarks>
    /// </summary>
    class SilverState : State
    {
        // Overloaded constructors

        public SilverState(State state) :
          this(state.Balance, state.Account)
        {
        }

        public SilverState(double balance, Account account)
        {
            this.balance = balance;
            this.account = account;
            Initialize();
        }

        private void Initialize()
        {
            // Should come from a datasource
            interest = 0.0;
            lowerLimit = 0.0;
            upperLimit = 1000.0;
        }

        public override void Deposit(double amount)
        {
            balance += amount;
            StateChangeCheck();
        }

        public override void Withdraw(double amount)
        {
            balance -= amount;
            StateChangeCheck();
        }

        public override void PayInterest()
        {
            balance += interest * balance;
            StateChangeCheck();
        }

        private void StateChangeCheck()
        {
            if (balance < lowerLimit)
            {
                account.State = new RedState(this);
            }
            else if (balance > upperLimit)
            {
                account.State = new GoldState(this);
            }
        }
    }

    /// <summary>
    /// A 'ConcreteState' class
    /// <remarks>
    /// Gold indicates an interest bearing state
    /// </remarks>
    /// </summary>
    class GoldState : State
    {
        // Overloaded constructors
        public GoldState(State state)
          : this(state.Balance, state.Account)
        {
        }

        public GoldState(double balance, Account account)
        {
            this.balance = balance;
            this.account = account;
            Initialize();
        }

        private void Initialize()
        {
            // Should come from a database
            interest = 0.05;
            lowerLimit = 1000.0;
            upperLimit = 10000000.0;
        }

        public override void Deposit(double amount)
        {
            balance += amount;
            StateChangeCheck();
        }

        public override void Withdraw(double amount)
        {
            balance -= amount;
            StateChangeCheck();
        }

        public override void PayInterest()
        {
            balance += interest * balance;
            StateChangeCheck();
        }

        private void StateChangeCheck()
        {
            if (balance < 0.0)
            {
                account.State = new RedState(this);
            }
            else if (balance < lowerLimit)
            {
                account.State = new SilverState(this);
            }
        }
    }

    /// <summary>
    /// The 'Context' class
    /// </summary>
    class Account
    {
        private State _state;
        private string _owner;

        // Constructor
        public Account(string owner)
        {
            // New accounts are 'Silver' by default
            this._owner = owner;
            this._state = new SilverState(0.0, this);
        }

        //to fix the private field "_owner' is assigned but its value is never used warning
        public string GetOwner()
        {
            return _owner;
        }

        // Properties
        public double Balance
        {
            get { return _state.Balance; }
        }

        public State State
        {
            get { return _state; }
            set { _state = value; }
        }

        public void Deposit(double amount)
        {
            _state.Deposit(amount);
            Debug.Log("Deposited " + amount + "---");
            Debug.Log(" Balance = " + this.Balance);
            Debug.Log(" Status = " + this.State.GetType().Name);
            Debug.Log("");
        }

        public void Withdraw(double amount)
        {
            _state.Withdraw(amount);
            Debug.Log("Deposited " + amount + "---");
            Debug.Log(" Balance = " + this.Balance);
            Debug.Log(" Status = " + this.State.GetType().Name + "\n");
        }

        public void PayInterest()
        {
            _state.PayInterest();
            Debug.Log("Interest Paid --- ");
            Debug.Log(" Balance = " + this.Balance);
            Debug.Log(" Status = " + this.State.GetType().Name);

        }
    }
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple1/StateExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 57b6a4afed609a84a9c0d5d051bb1065
timeCreated: 1476436708
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple1/StatePatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: a73e314d4fcc30847b49d775f88b023a
timeCreated: 1476437433
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: 51932932d05722b459d5984364d06986
folderAsset: yes
timeCreated: 1476437745
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple2/StateExmaple2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StateExmaple2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace StateExmaple2
{
    public class StateExmaple2 : MonoBehaviour
    {
        void Start()
        {
            ATMMachine atm = new ATMMachine();
            atm.InsertCard();
            atm.EjectCard();
            atm.InsertCard();
            atm.InsertPin(1234);
            atm.RequestCash(2000);
            atm.InsertCard();
            atm.InsertPin(1234);
        }
    }

    // State Interface
    public interface ATMState
    {
        void InsertCard();
        void EjectCard();
        void InsertPin(int pinEntered);
        void RequestCash(int cash);
    }


    public class ATMMachine
    {
        public ATMState hasCard { get; protected set; }
        public ATMState noCard { get; protected set; }
        public ATMState hasCorrectPin { get; protected set; }
        public ATMState atmOutOfMoney { get; protected set; }

        public ATMState atmState { get; protected set; }

        public int cashInMachine = 2000;
        public bool correctPinEntered = false;

        public ATMMachine()
        {
            hasCard = new HasCard(this);
            noCard = new NoCard(this);
            hasCorrectPin = new HasPin(this);
            atmOutOfMoney = new NoCash(this);

            atmState = noCard;

            if (cashInMachine < 0)
            {
                atmState = atmOutOfMoney;
            }
        }

        public void SetATMState(ATMState state)
        {
            atmState = state;
        }

        public void SetCashInMachine(int newCash)
        {
            cashInMachine = newCash;
        }

        public void InsertCard()
        {
            atmState.InsertCard();
        }

        public void EjectCard()
        {
            atmState.EjectCard();
        }

        public void RequestCash(int cash)
        {
            atmState.RequestCash(cash);
        }

        public void InsertPin(int pin)
        {
            atmState.InsertPin(pin);
        }

        //===================================================================================
        // Here come the Methods we need to implement from the Proxy Design Pattern to make the interface work
        // but remember: the following methods for ATMMachine don't have anything to do with the state machine pattern
        //===================================================================================

        public ATMState GetCurrentState()
        {
            return atmState;
        }

        public int GetCashInMachine()
        {
            return cashInMachine;
        }

    }




    public class HasCard : ATMState
    {
        protected ATMMachine atm;

        public HasCard(ATMMachine atm)
        {
            this.atm = atm;
        }

        public void InsertCard()
        {
            Debug.Log("You can't enter one than more card");
        }

        public void EjectCard()
        {
            Debug.Log("Card ejected.");
            atm.SetATMState(atm.noCard);
        }

        public void InsertPin(int pinEntered)
        {
            if (pinEntered == 1234)
            {
                Debug.Log("Correct pin entered.");
                atm.correctPinEntered = true;
                atm.SetATMState(atm.hasCorrectPin);
            }
            else
            {
                Debug.Log("False pin entered.");
                atm.correctPinEntered = false;
                Debug.Log("Card ejected.");
                atm.SetATMState(atm.noCard);
            }
        }

        public void RequestCash(int cash)
        {
            Debug.Log("Enter pin first.");
        }
    }



    public class NoCard : ATMState
    {
        protected ATMMachine atm;

        public NoCard(ATMMachine atm)
        {
            this.atm = atm;
        }

        public void InsertCard()
        {
            Debug.Log("Card inserted");
            atm.SetATMState(atm.hasCard);
        }

        public void EjectCard()
        {
            Debug.Log("Enter a card first.");
        }

        public void InsertPin(int pinEntered)
        {
            Debug.Log("Enter a card first.");
        }

        public void RequestCash(int cash)
        {
            Debug.Log("Enter a card first.");
        }
    }



    public class HasPin : ATMState
    {
        protected ATMMachine atm;

        public HasPin(ATMMachine atm)
        {
            this.atm = atm;
        }

        public void InsertCard()
        {
            Debug.Log("You can't enter one than more card");
        }

        public void EjectCard()
        {
            Debug.Log("Card ejected.");
            atm.SetATMState(atm.noCard);
        }

        public void InsertPin(int pinEntered)
        {
            Debug.Log("Pin already entered.");
        }

        public void RequestCash(int cash)
        {
            if (cash <= atm.cashInMachine)
            {
                Debug.Log(cash + " provided by machine");
                atm.cashInMachine -= cash;
                atm.SetATMState(atm.noCard);

                if (atm.cashInMachine <= 0)
                {
                    atm.SetATMState(atm.atmOutOfMoney);
                }

                Debug.Log("Card ejected.");
            }
            else
            {
                Debug.Log("Don't have enough cash");
                atm.SetATMState(atm.noCard);
                Debug.Log("Card ejected.");
            }
        }
    }



    public class NoCash : ATMState
    {
        protected ATMMachine atm;

        public NoCash(ATMMachine atm)
        {
            this.atm = atm;
        }

        public void InsertCard()
        {
            Debug.Log("We don't have no money");
        }

        public void EjectCard()
        {
            Debug.Log("We don't have no money, you didn't enter a card");
        }

        public void InsertPin(int pinEntered)
        {
            Debug.Log("We don't have no money");
        }

        public void RequestCash(int cash)
        {
            Debug.Log("We don't have no money");
        }
    }
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple2/StateExmaple2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 227ac27dcb1aaad46be36c310ccde079
timeCreated: 1476437775
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple2/StatePatternExmaple2.unity.meta`:

```meta
fileFormatVersion: 2
guid: ccc70d2db00ff984780f960fa25fba9a
timeCreated: 1476437953
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3.meta`:

```meta
fileFormatVersion: 2
guid: 57d80de98047c824f81fe871d648c9ec
folderAsset: yes
timeCreated: 1476086588
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/ATMMachine.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ATMMachine.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class ATMMachine
{

    ATMState atmState;

    public int cashInMachine = 2000;
    public bool correctPinEntered = false;

    public ATMMachine()
    {

        atmState = new NoCard(this); ;

        if (cashInMachine < 0)
        {

            atmState = new NoCash(this);

        }

    }

   public void setATMState(ATMState newATMState)
    {

        atmState = newATMState;

    }

    public void setCashInMachine(int newCashInMachine)
    {

        cashInMachine = newCashInMachine;

    }

    public void insertCard()
    {

        atmState.insertCard();

    }

    public void ejectCard()
    {

        atmState.ejectCard();

    }

    public void requestCash(int cashToWithdraw)
    {

        atmState.requestCash(cashToWithdraw);

    }

    public void insertPin(int pinEntered)
    {

        atmState.insertPin(pinEntered);

    }

    public ATMState getYesCardState() { return new HasCard(this); }
    public ATMState getNoCardState() { return new NoCard(this); }
    public ATMState getHasPin() { return new HasPin(this); }
    public ATMState getNoCashState() { return new NoCash(this); }

}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/ATMMachine.cs.meta`:

```meta
fileFormatVersion: 2
guid: 35e22a6e0e7d03e4788d386ecf1b23db
timeCreated: 1476072500
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/ATMState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ATMState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;


public interface ATMState
{

    // Different states expected
    // HasCard, NoCard, HasPin, NoCash

    void insertCard();

    void ejectCard();

    void insertPin(int pinEntered);

    void requestCash(int cashToWithdraw);

}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/ATMState.cs.meta`:

```meta
fileFormatVersion: 2
guid: 2a20c83002cb32946a6d776c3069efee
timeCreated: 1476072307
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/HasCard.cs`:

```cs
//-------------------------------------------------------------------------------------
//	HasCard.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class HasCard : ATMState
{

    ATMMachine atmMachine;


    public HasCard(ATMMachine newATMMachine)
{

    atmMachine = newATMMachine;

}

public void insertCard()
{

    Debug.Log("You can only insert one card at a time");

}

public void ejectCard()
{

    Debug.Log("Your card is ejected");
    atmMachine.setATMState(atmMachine.getNoCardState());

}

public void requestCash(int cashToWithdraw)
{

    Debug.Log("You have not entered your PIN");


}

public void insertPin(int pinEntered)
{

    if (pinEntered == 1234)
    {

        Debug.Log("You entered the correct PIN");
        atmMachine.correctPinEntered = true;
        atmMachine.setATMState(atmMachine.getHasPin());

    }
    else {

        Debug.Log("You entered the wrong PIN");
        atmMachine.correctPinEntered = false;
        Debug.Log("Your card is ejected");
        atmMachine.setATMState(atmMachine.getNoCardState());

    }
}	
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/HasCard.cs.meta`:

```meta
fileFormatVersion: 2
guid: cd7f3f391d8bb584a8a076b7811eb838
timeCreated: 1476072431
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/HasPin.cs`:

```cs
//-------------------------------------------------------------------------------------
//	HasPin.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class HasPin : ATMState
{

    ATMMachine atmMachine;


    public HasPin(ATMMachine newATMMachine)
{

    atmMachine = newATMMachine;

}

public void insertCard()
{

    Debug.Log("You already entered a card");

}

public void ejectCard()
{

    Debug.Log("Your card is ejected");
    atmMachine.setATMState(atmMachine.getNoCardState());

}

public void requestCash(int cashToWithdraw)
{

    if (cashToWithdraw > atmMachine.cashInMachine)
    {

        Debug.Log("You don't have that much cash available");
        Debug.Log("Your card is ejected");
        atmMachine.setATMState(atmMachine.getNoCardState());

    }
    else {

        Debug.Log(cashToWithdraw + " is provided by the machine");
        atmMachine.setCashInMachine(atmMachine.cashInMachine - cashToWithdraw);

        Debug.Log("Your card is ejected");
        atmMachine.setATMState(atmMachine.getNoCardState());

        if (atmMachine.cashInMachine <= 0)
        {

            atmMachine.setATMState(atmMachine.getNoCashState());

        }
    }
}

public void insertPin(int pinEntered)
{

    Debug.Log("You already entered a PIN");

}	
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/HasPin.cs.meta`:

```meta
fileFormatVersion: 2
guid: e28456f14f0c84c4b997d01bde5b9804
timeCreated: 1476072627
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/NoCard.cs`:

```cs
//-------------------------------------------------------------------------------------
//	NoCard.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class NoCard : ATMState
{

    ATMMachine atmMachine;


    public NoCard(ATMMachine newATMMachine)
{

    atmMachine = newATMMachine;

}

public void insertCard()
{

   Debug.Log("Please enter your pin");
        //改变状态了
        atmMachine.setATMState(new HasCard(atmMachine));
        atmMachine.setATMState(atmMachine.getYesCardState());

}

public void ejectCard()
{

    Debug.Log("You didn't enter a card");

}

public void requestCash(int cashToWithdraw)
{

    Debug.Log("You have not entered your card");

}

public void insertPin(int pinEntered)
{

    Debug.Log("You have not entered your card");

}
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/NoCard.cs.meta`:

```meta
fileFormatVersion: 2
guid: f55758baf4924bb44a879e67bd1ce9ae
timeCreated: 1476072564
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/NoCash.cs`:

```cs
//-------------------------------------------------------------------------------------
//	NoCash.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class NoCash : ATMState
{

    ATMMachine atmMachine;

    public NoCash(ATMMachine newATMMachine)
    {
        atmMachine = newATMMachine;
    }

    public void insertCard()
    {
        Debug.Log("We don't have any money");
        Debug.Log("Your card is ejected");
    }

    public void ejectCard()
    {
        Debug.Log("We don't have any money");
        Debug.Log("There is no card to eject");

    }

    public void requestCash(int cashToWithdraw)
    {
        Debug.Log("We don't have any money");
    }

    public void insertPin(int pinEntered)
    {
        Debug.Log("We don't have any money");
    }

    //to fix the private field `NoCash.atmMachine' is assigned but its value is never used warning
    ATMMachine GetATMMachine()
    {
        return atmMachine;
    }
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/NoCash.cs.meta`:

```meta
fileFormatVersion: 2
guid: 80a97c16accf18743bb3e47046946b50
timeCreated: 1476072670
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/StatePatternExample3.unity.meta`:

```meta
fileFormatVersion: 2
guid: d658dee7eb439b44b9310c935abddb05
timeCreated: 1476074390
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/TestATMMachine.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TestATMMachine.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;

public class TestATMMachine: MonoBehaviour
{

    void Start()
    {
        ATMMachine atmMachine = new ATMMachine();

        atmMachine.insertCard();

        atmMachine.ejectCard();

        atmMachine.insertCard();

        atmMachine.insertPin(1234);

        atmMachine.requestCash(2000);

        atmMachine.insertCard();

        atmMachine.insertPin(1234);

    }
}
```

`Assets/Behavioral Patterns/State Pattern/Exmaple3/TestATMMachine.cs.meta`:

```meta
fileFormatVersion: 2
guid: a88af67aa7b4df1409666f65c561bb2c
timeCreated: 1476072733
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4.meta`:

```meta
fileFormatVersion: 2
guid: f9d736a80aaac4c478549acf93a0b53f
folderAsset: yes
timeCreated: 1476086588
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/DrivingState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DrivingState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class DrivingState : HeroineBaseState
{
    private Heroine _heroine;
    public DrivingState(Heroine heroine)
    {
        _heroine = heroine;
        Debug.Log("------------------------Heroine in DrivingState~!（进入下斩状态！）");
    }

    public void Update()
    {
    }

    public void HandleInput()
    {
        if (Input.GetKeyDown(KeyCode.UpArrow))
        {
            Debug.Log("get KeyCode.UpArrow!");
            _heroine.SetHeroineState(new StandingState(_heroine));
        }
    }
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/DrivingState.cs.meta`:

```meta
fileFormatVersion: 2
guid: 45a451955499c1942a7cd8312bc221eb
timeCreated: 1476088234
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/DuckingState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DuckingState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class DuckingState : HeroineBaseState
{
    private Heroine _heroine;
    public DuckingState(Heroine heroine)
    {
        _heroine = heroine;
        Debug.Log("------------------------Heroine in DuckingState~!（进入下蹲躲避状态！）");
    }


    public void Update()
    {

    }

    public void HandleInput()
    {
        if (Input.GetKeyDown(KeyCode.DownArrow))
        {
            Debug.Log("已经在下蹲躲避状态中！");
            return;
        }
        if (Input.GetKeyUp(KeyCode.UpArrow))
        {
            Debug.Log("get GetKeyUp.UpArrow!");
            _heroine.SetHeroineState(new StandingState(_heroine));
        }
    }
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/DuckingState.cs.meta`:

```meta
fileFormatVersion: 2
guid: 96c2b6b0fcf9daa48888eda1b7ac1963
timeCreated: 1476088248
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/Heroine.cs`:

```cs
//-------------------------------------------------------------------------------------
//	Heroine.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class Heroine
{
    HeroineBaseState _state;

    public Heroine()
    {
        _state = new StandingState(this);

    }

    public void SetHeroineState(HeroineBaseState newState)
    {
        _state = newState;
    }

    public void HandleInput()
    {

    }



    public void Update()
    {
        _state.HandleInput();
    }

}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/Heroine.cs.meta`:

```meta
fileFormatVersion: 2
guid: f63c05140bed7a84e8e02797190c42b7
timeCreated: 1476084520
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/HeroineBaseState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	HeroineBaseState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public interface HeroineBaseState
{
    void Update();
    void HandleInput();

}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/HeroineBaseState.cs.meta`:

```meta
fileFormatVersion: 2
guid: 791b92ae416b4a3489610118b2a59ef7
timeCreated: 1476087601
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/JumpingState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	JumpState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class JumpingState : HeroineBaseState
{

    private Heroine _heroine;
    public JumpingState(Heroine heroine)
    {
        _heroine = heroine;
        Debug.Log("------------------------Heroine in JumpingState~!(进入跳跃状态！)");
    }

    public void Update()
    {

    }

    public void HandleInput()
    {
        if (Input.GetKeyDown(KeyCode.UpArrow))
        {
            Debug.Log("get GetKeyDown.UpArrow! but already in Jumping! return!(已经在跳跃状态中！)");
            return;
        }
        if (Input.GetKeyDown(KeyCode.DownArrow))
        {
            Debug.Log("get KeyCode.DownArrow!");
            _heroine.SetHeroineState(new DrivingState(_heroine));
        }
    }
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/JumpingState.cs.meta`:

```meta
fileFormatVersion: 2
guid: d9e65047c1a44e042968ad5abac3cfb4
timeCreated: 1476087265
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/StandingState.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StandingState.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class StandingState : HeroineBaseState
{
    private Heroine _heroine;
    public StandingState(Heroine heroine)
    {
        _heroine = heroine;
        Debug.Log("------------------------Heroine in StandingState~!（进入站立状态！）");
    }

    public void Update()
    {

    }

    public void HandleInput()
    {
        if (Input.GetKeyDown(KeyCode.UpArrow))
        {
            Debug.Log("get KeyCode.UpArrow!");
            _heroine.SetHeroineState(new JumpingState(_heroine));
        }
        if (Input.GetKeyDown(KeyCode.DownArrow))
        {
            Debug.Log("get KeyCode.DownArrow!");
            _heroine.SetHeroineState(new DuckingState(_heroine));
        }
    }
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/StandingState.cs.meta`:

```meta
fileFormatVersion: 2
guid: 7b07dc0cda248804381a2fa670a9a4c3
timeCreated: 1476088216
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/StatePatternExample4.unity.meta`:

```meta
fileFormatVersion: 2
guid: af6e6711e82bae743ae9c7400739c23a
timeCreated: 1476155316
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/TestHeroine.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TestHeroine.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TestHeroine : MonoBehaviour
{
    private Heroine _heroine;

    void Start ( )
	{
        _heroine = new Heroine();
    }

	void Update ( )
	{
	   _heroine.Update();
	}
}

```

`Assets/Behavioral Patterns/State Pattern/Exmaple4/TestHeroine.cs.meta`:

```meta
fileFormatVersion: 2
guid: 282a4edd5516aa24b8b9286df9efb800
timeCreated: 1476089063
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple5.meta`:

```meta
fileFormatVersion: 2
guid: c0984d5d2ac53884a96456f406f771c2
folderAsset: yes
timeCreated: 1513169120
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple5/StatePatternExample5.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StatePatternExample5.cs
//
//-------------------------------------------------------------------------------------

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

namespace StatePatternExample5
{

    public class StatePatternExample5 : MonoBehaviour
    {
        void Start()
        {
            UnitTest();
        }

        void UnitTest()
        {
            Context theContext = new Context();
            theContext.SetState(new ConcreteStateA(theContext));
            theContext.Request(5);
            theContext.Request(15);
            theContext.Request(25);
            theContext.Request(35);

        }
    }

    /// <summary>
    /// Context类-持有目前的状态,并将相关信息传给状态
    /// </summary>
    public class Context
    {
        State m_State = null;

        public void Request(int Value)
        {
            m_State.Handle(Value);
        }

        public void SetState(State theState)
        {
            Debug.Log("Context.SetState:" + theState);
            m_State = theState;
        }
    }

    /// <summary>
    /// 状态的抽象基类
    /// </summary>
    public abstract class State
    {
        protected Context m_Context = null;

        public State(Context theContext)
        {
            m_Context = theContext;
        }
        public abstract void Handle(int Value);
    }

    /// <summary>
    /// 状态A
    /// </summary>
    public class ConcreteStateA : State
    {
        public ConcreteStateA(Context theContext) : base(theContext)
        { }

        public override void Handle(int Value)
        {
            Debug.Log("ConcreteStateA.Handle");
            if (Value > 10)
                m_Context.SetState(new ConcreteStateB(m_Context));
        }

    }

    /// <summary>
    /// 状态B
    /// </summary>
    public class ConcreteStateB : State
    {
        public ConcreteStateB(Context theContext) : base(theContext)
        { }

        public override void Handle(int Value)
        {
            Debug.Log("ConcreteStateB.Handle");
            if (Value > 20)
                m_Context.SetState(new ConcreteStateC(m_Context));
        }

    }

    /// <summary>
    /// 状态C
    /// </summary>
    public class ConcreteStateC : State
    {
        public ConcreteStateC(Context theContext) : base(theContext)
        { }

        public override void Handle(int Value)
        {
            Debug.Log("ConcreteStateC.Handle");
            if (Value > 30)
                m_Context.SetState(new ConcreteStateA(m_Context));
        }
    }


}




```

`Assets/Behavioral Patterns/State Pattern/Exmaple5/StatePatternExample5.cs.meta`:

```meta
fileFormatVersion: 2
guid: f06ce0ab55cd733479861ba81b9abda3
timeCreated: 1513169205
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Exmaple5/StatePatternExample5.unity.meta`:

```meta
fileFormatVersion: 2
guid: 782958e0a4c015649acb69ca5a46d41d
timeCreated: 1513169539
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/README.md`:

```md
# State Pattern 状态模式
## Definition

Allow an object to alter its behavior when its internal state changes. The object will appear to change its class.
<br>当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其类。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/state.gif)


## Participants

The classes and objects participating in this pattern are:

### Context  (Account)
* defines the interface of interest to clients
* maintains an instance of a ConcreteState subclass that defines the current state.

### State  (State)
* defines an interface for encapsulating the behavior associated with a particular state of the Context.

### Concrete State  (RedState, SilverState, GoldState)
* each subclass implements a behavior associated with a state of Context


```

`Assets/Behavioral Patterns/State Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: e9a1080148853ea4ba05ec16115a50a1
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: bb80d0f4b82e38d468567455ab26aecb
folderAsset: yes
timeCreated: 1476337222
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Structure/StateStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StateStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace StateStructure
{

    public class StateStructure : MonoBehaviour
    {
	    void Start ( )
        {
            // Setup context in a state
            Context c = new Context(new ConcreteStateA());

            // Issue requests, which toggles state
            c.Request();
            c.Request();
            c.Request();
            c.Request();
        }
    }

    /// <summary>
    /// The 'State' abstract class
    /// </summary>
    abstract class State
    {
        public abstract void Handle(Context context);
    }

    /// <summary>
    /// A 'ConcreteState' class
    /// </summary>
    class ConcreteStateA : State
    {
        public override void Handle(Context context)
        {
            context.State = new ConcreteStateB();
        }
    }

    /// <summary>
    /// A 'ConcreteState' class
    /// </summary>
    class ConcreteStateB : State
    {
        public override void Handle(Context context)
        {
            context.State = new ConcreteStateA();
        }
    }

    /// <summary>
    /// The 'Context' class
    /// </summary>
    class Context
    {
        private State _state;

        // Constructor
        public Context(State state)
        {
            this.State = state;
        }

        // Gets or sets the state
        public State State
        {
            get { return _state; }
            set
            {
                _state = value;
              Debug.Log("State: " +_state.GetType().Name);
            }
        }

        public void Request()
        {
            _state.Handle(this);
        }
    }

}
```

`Assets/Behavioral Patterns/State Pattern/Structure/StateStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: d98c60aa3788e8d42adb4ccae29b78ae
timeCreated: 1476337310
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/State Pattern/Structure/TestStateStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: d249822de3bd1ce41ab807ac2a106c39
timeCreated: 1476337453
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern.meta`:

```meta
fileFormatVersion: 2
guid: f601903938f4a444ba8c19d4c5de4e06
folderAsset: yes
timeCreated: 1476261820
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: b7f95563d9fb7314582241dfb929f871
folderAsset: yes
timeCreated: 1478437085
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Example2/BadCodeExample.cs`:

```cs
using UnityEngine;
using System.Collections;

public class Animal_BadExample
{
	// bad code:
	public virtual void Fly()
	{
		Debug.Log ("Can Fly");
	}
}

public class Dog_BadExample : Animal_BadExample
{
	// bad code:
	public override void Fly()
	{
		// override
	}
}

public class Cat_BadExample : Animal_BadExample
{
	// bad code:
	public override void Fly()
	{
		// override
	}
}

public class Bird_BadExample : Animal_BadExample
{
	public override void Fly()
	{
	}
}

// Rembember:
// ALWAYS
// eliminate duplicate code
// eliminate technices that allow one class to affect others
```

`Assets/Behavioral Patterns/Strategy Pattern/Example2/BadCodeExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 8c11dd36074e7864ab783dfc5067f0ca
timeCreated: 1478437386
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Example2/StrategyPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StrategyPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace StrategyPatternExample2
{
    public class StrategyPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            // create dog and bird example objects
            Animal sparky = new Dog();
            Animal tweety = new Bird();

            Debug.Log("Dog: " + sparky.TryToFly());
            Debug.Log("Bird: " + tweety.TryToFly());

            // change behaviour of dog
            sparky.SetFlyingAbility(new ItFlys());

            Debug.Log("Dog: " + sparky.TryToFly());
            Debug.Log("Bird: " + tweety.TryToFly());
        }
    }


    // Using Interfaces for decoupling
    // putting behaviour that varies in different classes
    public interface IFly
    {
        string Fly();
    }

    // Class that holds behaviour for objects that can fly
    class ItFlys : IFly
    {
        public string Fly()
        {
            return "Flying high";
        }
    }

    // Class that holds behaviour for objects that can not fly
    class CantFly : IFly
    {
        public string Fly()
        {
            return "I can't fly";
        }
    }

    class FlyingSuperFast : IFly
    {
        public string Fly()
        {
            return "Fly super fast";
        }
    }


    // Classes that hold an instance of the behaviours above:
    public class Animal
    {
        // hereby adding the behaviour
        // it also can change that way
        public IFly flyingType;

        public string TryToFly()
        {
            return flyingType.Fly();
        }

        public void SetFlyingAbility(IFly newFlyingType)
        {
            this.flyingType = newFlyingType;
        }
    }

    // derived objects that vary from the base Animal:
    public class Dog : Animal
    {
        public Dog()
        {
            flyingType = new CantFly();
        }
    }

    public class Bird : Animal
    {
        public Bird()
        {
            flyingType = new ItFlys();
        }
    }
}

// Rembember:
// ALWAYS
// eliminate duplicate code
// eliminate technices that allow one class to affect others
```

`Assets/Behavioral Patterns/Strategy Pattern/Example2/StrategyPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 54f761ea0a5bea84bb679f1105b0f0ee
timeCreated: 1478437094
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Example2/StrategyPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: e4ddda7ee406a2a418f7b3a6445aaa3a
timeCreated: 1478437099
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: d3d797b3e435e5e4f9b5d55044af3655
folderAsset: yes
timeCreated: 1476438142
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Exmaple1/StrategyPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StrategyPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Strategy pattern which encapsulates sorting algorithms in the form of sorting objects. 
//This allows clients to dynamically change sorting strategies including Quicksort, Shellsort, and Mergesort.

namespace StrategyPatternExample1
{
    public class StrategyPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Two contexts following different strategies
            SortedList studentRecords = new SortedList();

            studentRecords.Add("Samual");
            studentRecords.Add("Jimmy");
            studentRecords.Add("Sandra");
            studentRecords.Add("Vivek");
            studentRecords.Add("Anna");

            studentRecords.SetSortStrategy(new QuickSort());
            studentRecords.Sort();

            studentRecords.SetSortStrategy(new ShellSort());
            studentRecords.Sort();

            studentRecords.SetSortStrategy(new MergeSort());
            studentRecords.Sort();

        }
    }

    /// <summary>
    /// The 'Strategy' abstract class
    /// </summary>
    abstract class SortStrategy
    {
        public abstract void Sort(List<string> list);
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class QuickSort : SortStrategy
    {
        public override void Sort(List<string> list)
        {
            list.Sort(); // Default is Quicksort
            Debug.Log("-------QuickSorted list------- ");
        }
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class ShellSort : SortStrategy
    {
        public override void Sort(List<string> list)
        {
            //list.ShellSort(); not-implemented
            Debug.Log("-------ShellSorted list------- ");
        }
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class MergeSort : SortStrategy
    {
        public override void Sort(List<string> list)
        {
            //list.MergeSort(); not-implemented
            Debug.Log("-------MergeSorted list------- ");
        }
    }

    /// <summary>
    /// The 'Context' class
    /// </summary>
    class SortedList
    {
        private List<string> _list = new List<string>();
        private SortStrategy _sortstrategy;

        public void SetSortStrategy(SortStrategy sortstrategy)
        {
            this._sortstrategy = sortstrategy;
        }

        public void Add(string name)
        {
            _list.Add(name);
        }

        public void Sort()
        {
            _sortstrategy.Sort(_list);
            // Iterate over list and display results
            foreach (string name in _list)
            {
                Debug.Log(" " + name);
            }
        }
    }
}
```

`Assets/Behavioral Patterns/Strategy Pattern/Exmaple1/StrategyPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 0d937fb527531dd4e838573f6bb7ddf0
timeCreated: 1476438170
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Exmaple1/StrategyPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 51f35029052a3554892451f93391793d
timeCreated: 1476438175
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/README.md`:

```md
# Strategy Pattern 策略模式
## Definition

Define a family of algorithms, encapsulate each one, and make them interchangeable. Strategy lets the algorithm vary independently from clients that use it.
<br>定义一组算法，将每个算法都封装起来，并且使它们之间可以互换

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/strategy.gif)


## Participants

The classes and objects participating in this pattern are:

### Strategy  (SortStrategy)
* declares an interface common to all supported algorithms. Context uses this interface to call the algorithm defined by a ConcreteStrategy

### ConcreteStrategy  (QuickSort, ShellSort, MergeSort)
* implements the algorithm using the Strategy interface

### Context  (SortedList)
* is configured with a ConcreteStrategy object
* maintains a reference to a Strategy object
* may define an interface that lets Strategy access its data.


```

`Assets/Behavioral Patterns/Strategy Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: fc1f6610182bb77478d4935be93db185
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: cfd74ac50394f5a439e8f9b0b0818f06
folderAsset: yes
timeCreated: 1476261866
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Structure/StrategyStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	StrategyStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace StrategyStructure
{
    public class StrategyStructure : MonoBehaviour
    {
	    void Start ( )
        {
            Context context;

            // Three contexts following different strategies
            context = new Context(new ConcreteStrategyA());
            context.ContextInterface();

            context = new Context(new ConcreteStrategyB());
            context.ContextInterface();

            context = new Context(new ConcreteStrategyC());
            context.ContextInterface();
        }
    }

    /// <summary>
    /// The 'Strategy' abstract class
    /// </summary>
    abstract class Strategy
    {
        public abstract void AlgorithmInterface();
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class ConcreteStrategyA : Strategy
    {
        public override void AlgorithmInterface()
        {
            Debug.Log("Called ConcreteStrategyA.AlgorithmInterface()");
        }
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class ConcreteStrategyB : Strategy
    {
        public override void AlgorithmInterface()
        {
            Debug.Log("Called ConcreteStrategyB.AlgorithmInterface()");
        }
    }

    /// <summary>
    /// A 'ConcreteStrategy' class
    /// </summary>
    class ConcreteStrategyC : Strategy
    {
        public override void AlgorithmInterface()
        {
            Debug.Log("Called ConcreteStrategyC.AlgorithmInterface()");
        }
    }

    /// <summary>
    /// The 'Context' class
    /// </summary>
    class Context
    {
        private Strategy _strategy;

        // Constructor
        public Context(Strategy strategy)
        {
            this._strategy = strategy;
        }

        public void ContextInterface()
        {
            _strategy.AlgorithmInterface();
        }
    }
}
```

`Assets/Behavioral Patterns/Strategy Pattern/Structure/StrategyStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: f28d23f10ec1e9246a9b35f24a6fc00c
timeCreated: 1476261880
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Strategy Pattern/Structure/TestStrategyStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 21ca35269896af94fab3d3de5b08bdd3
timeCreated: 1476261907
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern.meta`:

```meta
fileFormatVersion: 2
guid: db428b209ed7c764eb0e96a9cd66958f
folderAsset: yes
timeCreated: 1476262168
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 5e9ea05ab9b9f0543b0da6a9081b0e4c
folderAsset: yes
timeCreated: 1476438601
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Exmaple1/TemplateMethodPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TemplateMethodPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

/* 
 Used to create a group of sublcasses that have to execute a similar group of methods
 You create an abstract class that contains a method called the Template Method
 The Template method contains a series of method calls that every sublcass object will call
 The subclass objects can override some of the method calls
*/

namespace TemplateMethodPatternExample1
{

    public class TemplateMethodPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            Hoagie cust12Hoagie = new ItalienHoagie();
            cust12Hoagie.MakeSandwich();

            Hoagie cust13Hoagie = new VeggieHoagie();
            cust13Hoagie.MakeSandwich();
        }
    }

    public abstract class Hoagie
    {
        public void MakeSandwich()
        {
            Debug.Log("Making new Sandwich");

            CutBun();

            if (CustomerWantsMeat())
            {
                AddMeat();
            }

            if (CustomerWantsCheese())
            {
                AddCheese();
            }

            if (CustomerWantsVegetables())
            {
                AddVegetables();
            }

            if (CustomerWantsCondiments())
            {
                AddCondiments();
            }

            WrapTheHoagie();
        }
        protected abstract void AddMeat();
        protected abstract void AddCheese();
        protected abstract void AddVegetables();
        protected abstract void AddCondiments();

        protected virtual bool CustomerWantsMeat() { return true; } // << called Hook
        protected virtual bool CustomerWantsCheese() { return true; }
        protected virtual bool CustomerWantsVegetables() { return true; }
        protected virtual bool CustomerWantsCondiments() { return true; }

        protected void CutBun()
        {
            Debug.Log("Bun is Cut");
        }

        protected void WrapTheHoagie()
        {
            Debug.Log("Hoagie is wrapped.");
        }
    }


    public class ItalienHoagie : Hoagie
    {
        protected override void AddMeat()
        {
            Debug.Log("Adding the Meat: Salami");
        }

        protected override void AddCheese()
        {
            Debug.Log("Adding the Cheese: Provolone");
        }

        protected override void AddVegetables()
        {
            Debug.Log("Adding the Vegetables: Tomatoes");
        }

        protected override void AddCondiments()
        {
            Debug.Log("Adding the Condiments: Vinegar");
        }
    }



    public class VeggieHoagie : Hoagie
    {
        protected override void AddMeat()
        {
        }

        protected override void AddCheese()
        {
        }

        protected override void AddVegetables()
        {
            Debug.Log("Adding the Vegetables: Tomatoes");
        }

        protected override void AddCondiments()
        {
            Debug.Log("Adding the Condiments: Vinegar");
        }

        protected override bool CustomerWantsMeat() { return false; }
        protected override bool CustomerWantsCheese() { return false; }

    }


    namespace BadExample
    {
        // this way you would have to rewrite a lot of code
        // especially if something changes or another class differs and does e.g. not AddMeat()
        public class ItalienHoagie
        {
            public void MakeSandwich()
            {
                CutBun();
                AddMeat();
                AddCheese();
                AddVegtables();
                AddCondiments();
                WrapHoagie();
            }

            public void CutBun()
            {
                Debug.Log("Hoagie is Cut");
            }

            public void AddMeat()
            {
                Debug.Log("Added Meat");
            }

            public void AddCheese()
            {
                Debug.Log("Added Cheese");
            }

            public void AddVegtables()
            {
                Debug.Log("Added Vegies");
            }

            public void AddCondiments()
            {
                Debug.Log("Added Condiments");
            }

            public void WrapHoagie()
            {
                Debug.Log("Wrapped Hoagie");
            }
        }
    }
}
```

`Assets/Behavioral Patterns/Template Method Pattern/Exmaple1/TemplateMethodPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 180c42e61fd3895448696b6d01b3b254
timeCreated: 1476438618
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Exmaple1/TemplateMethodPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: adcbb6543e040364db722b96f5002700
timeCreated: 1476438630
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/README.md`:

```md
# Template Method Pattern 模板方法模式
## Definition

Define the skeleton of an algorithm in an operation, deferring some steps to subclasses. Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithm's structure.
<br>定义一个操作中的算法的框架，而将一些步骤延迟到子类中。使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/template.gif)


## Participants

The classes and objects participating in this pattern are:

### AbstractClass  (DataObject)
* defines abstract primitive operations that concrete subclasses define to implement steps of an algorithm
* implements a template method defining the skeleton of an algorithm. The template method calls primitive operations as well as operations defined in AbstractClass or those of other objects.

### ConcreteClass  (CustomerDataObject)
* implements the primitive operations ot carry out subclass-specific steps of the algorithm


```

`Assets/Behavioral Patterns/Template Method Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 3f4cb937ad7dadc41ad0357844768847
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 2b89645062cedd848a5f5b3d6829afb2
folderAsset: yes
timeCreated: 1476262185
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Structure/TemplateMethodStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TemplateMethodStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class TemplateMethodStructure : MonoBehaviour
{
	void Start ( )
	{
        AbstractClass aA = new ConcreteClassA();
        aA.TemplateMethod();

        AbstractClass aB = new ConcreteClassB();
        aB.TemplateMethod();

    }
}

/// <summary>
/// The 'AbstractClass' abstract class
/// </summary>
abstract class AbstractClass
{
    public abstract void PrimitiveOperation1();
    public abstract void PrimitiveOperation2();

    // The "Template method"
    public void TemplateMethod()
    {
        PrimitiveOperation1();
        PrimitiveOperation2();
        Debug.Log("");
    }
}

/// <summary>
/// A 'ConcreteClass' class
/// </summary>
class ConcreteClassA : AbstractClass
{
    public override void PrimitiveOperation1()
    {
        Debug.Log("ConcreteClassA.PrimitiveOperation1()");
    }
    public override void PrimitiveOperation2()
    {
        Debug.Log("ConcreteClassA.PrimitiveOperation2()");
    }
}

/// <summary>
/// A 'ConcreteClass' class
/// </summary>
class ConcreteClassB : AbstractClass
{
    public override void PrimitiveOperation1()
    {
        Debug.Log("ConcreteClassB.PrimitiveOperation1()");
    }
    public override void PrimitiveOperation2()
    {
        Debug.Log("ConcreteClassB.PrimitiveOperation2()");
    }
}

```

`Assets/Behavioral Patterns/Template Method Pattern/Structure/TemplateMethodStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 5064b90eb03125c4aa420549f17aaa4f
timeCreated: 1476262268
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Template Method Pattern/Structure/TestTemplateMethodStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 2aef0b9ec66f607489d95e0af8b39570
timeCreated: 1476262277
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 1003d6639b4c9084f9259eb3503bc4e0
folderAsset: yes
timeCreated: 1476262543
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: cc27e2940e4473d4e8b0740c78f1a008
folderAsset: yes
timeCreated: 1476439177
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple1/VisitorPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	VisitorPatternExample1.cs
//-------------------------------------------------------------------------------------

//This real-world code demonstrates the Visitor pattern in which two objects traverse a list of Employees and performs the same operation on each Employee. 
//The two visitor objects define different operations -- one adjusts vacation days and the other income.

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace VisitorPatternExample1
{
    public class VisitorPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Setup employee collection
            Employees e = new Employees();
            e.Attach(new Clerk());
            e.Attach(new Director());
            e.Attach(new President());

            // Employees are 'visited'
            e.Accept(new IncomeVisitor());
            e.Accept(new VacationVisitor());

        }
    }

    /// <summary>
    /// The 'Visitor' interface
    /// </summary>
    interface IVisitor
    {
        void Visit(Element element);
    }

    /// <summary>
    /// A 'ConcreteVisitor' class
    /// </summary>
    class IncomeVisitor : IVisitor
    {
        public void Visit(Element element)
        {
            Employee employee = element as Employee;

            // Provide 10% pay raise
            employee.Income *= 1.10;
            Debug.Log(employee.GetType().Name+" "+ employee.Name+"'s new income: "+employee.Income);
        }
    }

    /// <summary>
    /// A 'ConcreteVisitor' class
    /// </summary>
    class VacationVisitor : IVisitor
    {
        public void Visit(Element element)
        {
            Employee employee = element as Employee;

            // Provide 3 extra vacation days
            employee.VacationDays += 3;
            Debug.Log(employee.GetType().Name + " " + employee.Name + "'s new vacation days:" + employee.VacationDays);
        }
    }

    /// <summary>
    /// The 'Element' abstract class
    /// </summary>
    abstract class Element
    {
        public abstract void Accept(IVisitor visitor);
    }

    /// <summary>
    /// The 'ConcreteElement' class
    /// </summary>
    class Employee : Element
    {
        private string _name;
        private double _income;
        private int _vacationDays;

        // Constructor
        public Employee(string name, double income,
          int vacationDays)
        {
            this._name = name;
            this._income = income;
            this._vacationDays = vacationDays;
        }

        // Gets or sets the name
        public string Name
        {
            get { return _name; }
            set { _name = value; }
        }

        // Gets or sets income
        public double Income
        {
            get { return _income; }
            set { _income = value; }
        }

        // Gets or sets number of vacation days
        public int VacationDays
        {
            get { return _vacationDays; }
            set { _vacationDays = value; }
        }

        public override void Accept(IVisitor visitor)
        {
            visitor.Visit(this);
        }
    }

    /// <summary>
    /// The 'ObjectStructure' class
    /// </summary>
    class Employees
    {
        private List<Employee> _employees = new List<Employee>();

        public void Attach(Employee employee)
        {
            _employees.Add(employee);
        }

        public void Detach(Employee employee)
        {
            _employees.Remove(employee);
        }

        public void Accept(IVisitor visitor)
        {
            foreach (Employee e in _employees)
            {
                e.Accept(visitor);
            }
        }
    }

    // Three employee types

    class Clerk : Employee
    {
        // Constructor
        public Clerk()
          : base("Hank", 25000.0, 14)
        {
        }
    }

    class Director : Employee
    {
        // Constructor
        public Director()
          : base("Elly", 35000.0, 16)
        {
        }
    }

    class President : Employee
    {
        // Constructor
        public President()
          : base("Dick", 45000.0, 21)
        {
        }
    }
}
```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple1/VisitorPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: a76dc79d9bc30a94490e10fd6ac1fb2f
timeCreated: 1476439214
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple1/VisitorPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 5761348ef19ca4245820a950f2c9327e
timeCreated: 1476439224
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: 7a6a2b27544a8e945a1a0d31f8630018
folderAsset: yes
timeCreated: 1484050226
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple2/VisitorPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	VisitorPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace VisitorPatternExample2
{
    public class VisitorPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            // Setup employee collection
            Employees e = new Employees();
            e.Attach(new Clerk());
            e.Attach(new Director());
            e.Attach(new President());

            // Employees are 'visited'
            e.Accept(new IncomeVisitor());
            e.Accept(new VacationVisitor());
        }


        /// <summary>
        /// The 'Visitor' interface
        /// </summary>
        interface IVisitor
        {
            void Visit(Element element);
        }

        /// <summary>
        /// A 'ConcreteVisitor' class
        /// </summary>
        class IncomeVisitor : IVisitor
        {
            public void Visit(Element element)
            {
                Employee employee = element as Employee;

                // Provide 10% pay raise
                employee.Income *= 1.10;

                Debug.Log(string.Format("{0} {1}'s new income: {2:C}",
                  employee.GetType().Name, employee.Name,
                  employee.Income));
            }
        }

        /// <summary>
        /// A 'ConcreteVisitor' class
        /// </summary>
        class VacationVisitor : IVisitor
        {
            public void Visit(Element element)
            {
                Employee employee = element as Employee;

                // Provide 3 extra vacation days
                employee.VacationDays += 3;
                Debug.Log(string.Format("{0} {1}'s new vacation days: {2}",
                  employee.GetType().Name, employee.Name,
                  employee.VacationDays));
            }
        }

        /// <summary>
        /// The 'Element' abstract class
        /// </summary>
        abstract class Element
        {
            public abstract void Accept(IVisitor visitor);
        }

        /// <summary>
        /// The 'ConcreteElement' class
        /// </summary>
        class Employee : Element
        {
            private string _name;
            private double _income;
            private int _vacationDays;

            // Constructor
            public Employee(string name, double income,
              int vacationDays)
            {
                this._name = name;
                this._income = income;
                this._vacationDays = vacationDays;
            }

            // Gets or sets the name
            public string Name
            {
                get { return _name; }
                set { _name = value; }
            }

            // Gets or sets income
            public double Income
            {
                get { return _income; }
                set { _income = value; }
            }

            // Gets or sets number of vacation days
            public int VacationDays
            {
                get { return _vacationDays; }
                set { _vacationDays = value; }
            }

            public override void Accept(IVisitor visitor)
            {
                visitor.Visit(this);
            }
        }

        /// <summary>
        /// The 'ObjectStructure' class
        /// </summary>
        class Employees
        {
            private List<Employee> _employees = new List<Employee>();

            public void Attach(Employee employee)
            {
                _employees.Add(employee);
            }

            public void Detach(Employee employee)
            {
                _employees.Remove(employee);
            }

            public void Accept(IVisitor visitor)
            {
                foreach (Employee e in _employees)
                {
                    e.Accept(visitor);
                }
            }
        }

        // Three employee types

        class Clerk : Employee
        {
            // Constructor
            public Clerk()
              : base("Hank", 25000.0, 14)
            {
            }
        }

        class Director : Employee
        {
            // Constructor
            public Director()
              : base("Elly", 35000.0, 16)
            {
            }
        }

        class President : Employee
        {
            // Constructor
            public President()
              : base("Dick", 45000.0, 21)
            {
            }
        }



    }

}


```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple2/VisitorPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: d6d27e4bc3491f74ea9b5563b36df569
timeCreated: 1484050245
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Exmaple2/VisitorPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 0156cb2778a71b24993ea9d3dcfc13c5
timeCreated: 1484050251
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/README.md`:

```md
# Visitor Pattern 访问者模式
## Definition

Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates.
<br>封装一些作用于某种数据结构中的各元素的操作，它可以在不改变数据结构的前提下定义作用于这些元素的新的操作。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/visitor.gif)


## Participants

The classes and objects participating in this pattern are:

### Visitor  (Visitor)
* declares a Visit operation for each class of ConcreteElement in the object structure. The operation's name and signature identifies the class that sends the Visit request to the visitor. That lets the visitor determine the concrete class of the element being visited. Then the visitor can access the elements directly through its particular interface

### ConcreteVisitor  (IncomeVisitor, VacationVisitor)
* implements each operation declared by Visitor. Each operation implements a fragment of the algorithm defined for the corresponding class or object in the structure. ConcreteVisitor provides the context for the algorithm and stores its local state. This state often accumulates results during the traversal of the structure.

### Element  (Element)
* defines an Accept operation that takes a visitor as an argument.

### ConcreteElement  (Employee)
* implements an Accept operation that takes a visitor as an argument

### ObjectStructure  (Employees)
* can enumerate its elements
* may provide a high-level interface to allow the visitor to visit its elements
* may either be a Composite (pattern) or a collection such as a list or a set


```

`Assets/Behavioral Patterns/Visitor Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: af5532d26f58cef4e895efab7bd21d07
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 81b407875f738b9478c0afbf9e6d7d6d
folderAsset: yes
timeCreated: 1476262575
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Structure/TestVisitorStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: bf85933c98545584a82a04f78343d8c0
timeCreated: 1476262836
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Behavioral Patterns/Visitor Pattern/Structure/VisitorStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	VisitorStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class VisitorStructure : MonoBehaviour
{
	void Start ( )
    {
        // Setup structure
        ObjectStructure o = new ObjectStructure();
        o.Attach(new ConcreteElementA());
        o.Attach(new ConcreteElementB());

        // Create visitor objects
        ConcreteVisitor1 v1 = new ConcreteVisitor1();
        ConcreteVisitor2 v2 = new ConcreteVisitor2();

        // Structure accepting visitors
        o.Accept(v1);
        o.Accept(v2);
    }
}

/// <summary>
/// The 'Visitor' abstract class
/// </summary>
abstract class Visitor
{
    public abstract void VisitConcreteElementA(ConcreteElementA concreteElementA);
    public abstract void VisitConcreteElementB(ConcreteElementB concreteElementB);
}

/// <summary>
/// A 'ConcreteVisitor' class
/// </summary>
class ConcreteVisitor1 : Visitor
{
    public override void VisitConcreteElementA(ConcreteElementA concreteElementA)
    {
        Debug.Log(concreteElementA.GetType().Name+" visited by "+this.GetType().Name);
    }

    public override void VisitConcreteElementB(ConcreteElementB concreteElementB)
    {
        Debug.Log(concreteElementB.GetType().Name + " visited by " + this.GetType().Name);
    }
}

/// <summary>
/// A 'ConcreteVisitor' class
/// </summary>
class ConcreteVisitor2 : Visitor
{
    public override void VisitConcreteElementA(ConcreteElementA concreteElementA)
    {
        Debug.Log(concreteElementA.GetType().Name + " visited by " + this.GetType().Name);
    }

    public override void VisitConcreteElementB(ConcreteElementB concreteElementB)
    {
        Debug.Log(concreteElementB.GetType().Name + " visited by " + this.GetType().Name);
    }
}

/// <summary>
/// The 'Element' abstract class
/// </summary>
abstract class Element
{
    public abstract void Accept(Visitor visitor);
}

/// <summary>
/// A 'ConcreteElement' class
/// </summary>
class ConcreteElementA : Element
{
    public override void Accept(Visitor visitor)
    {
        visitor.VisitConcreteElementA(this);
    }

    public void OperationA()
    {
    }
}

/// <summary>
/// A 'ConcreteElement' class
/// </summary>
class ConcreteElementB : Element
{
    public override void Accept(Visitor visitor)
    {
        visitor.VisitConcreteElementB(this);
    }

    public void OperationB()
    {
    }
}

/// <summary>
/// The 'ObjectStructure' class
/// </summary>
class ObjectStructure
{
    private List<Element> _elements = new List<Element>();

    public void Attach(Element element)
    {
        _elements.Add(element);
    }

    public void Detach(Element element)
    {
        _elements.Remove(element);
    }

    public void Accept(Visitor visitor)
    {
        foreach (Element element in _elements)
        {
            element.Accept(visitor);
        }
    }
}
 
```

`Assets/Behavioral Patterns/Visitor Pattern/Structure/VisitorStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: fe7ea83153c83074e9d6992c3d418d61
timeCreated: 1476262591
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns.meta`:

```meta
fileFormatVersion: 2
guid: a45ced72174ab2f4383028c0e805e8cd
folderAsset: yes
timeCreated: 1476362942
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 8b83a2c51e993834da01fa7b0a3cf5ba
folderAsset: yes
timeCreated: 1476332676
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 893d1136296a3b9408cbe3400221a01f
folderAsset: yes
timeCreated: 1476840328
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example1/AbstractFactoryPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AbstractFactoryPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;


//This structural code demonstrates the Abstract Factory pattern creating parallel hierarchies of objects.
//Object creation has been abstracted and there is no need for hard-coded class names in the client code.

namespace AbstractFactoryPatternExample1
{
    public class AbstractFactoryPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create and run the African animal world
            ContinentFactory africa = new AfricaFactory();
            AnimalWorld world = new AnimalWorld(africa);
            world.RunFoodChain();

            // Create and run the American animal world
            ContinentFactory america = new AmericaFactory();
            world = new AnimalWorld(america);
            world.RunFoodChain();
        }
    }


    /// <summary>
    /// The 'AbstractFactory' abstract class
    /// </summary>
    abstract class ContinentFactory
    {
        public abstract Herbivore CreateHerbivore();
        public abstract Carnivore CreateCarnivore();
    }

    /// <summary>
    /// The 'ConcreteFactory1' class
    /// </summary>
    class AfricaFactory : ContinentFactory
    {
        public override Herbivore CreateHerbivore()
        {
            return new Wildebeest();
        }
        public override Carnivore CreateCarnivore()
        {
            return new Lion();
        }
    }

    /// <summary>
    /// The 'ConcreteFactory2' class
    /// </summary>
    class AmericaFactory : ContinentFactory
    {
        public override Herbivore CreateHerbivore()
        {
            return new Bison();
        }
        public override Carnivore CreateCarnivore()
        {
            return new Wolf();
        }
    }

    /// <summary>
    /// The 'AbstractProductA' abstract class
    /// </summary>
    abstract class Herbivore
    {
    }

    /// <summary>
    /// The 'AbstractProductB' abstract class
    /// </summary>
    abstract class Carnivore
    {
        public abstract void Eat(Herbivore h);
    }

    /// <summary>
    /// The 'ProductA1' class
    /// </summary>
    class Wildebeest : Herbivore
    {
    }

    /// <summary>
    /// The 'ProductB1' class
    /// </summary>
    class Lion : Carnivore
    {
        public override void Eat(Herbivore h)
        {
            // Eat Wildebeest
            Debug.Log(this.GetType().Name +" eats " + h.GetType().Name);
        }
    }

    /// <summary>
    /// The 'ProductA2' class
    /// </summary>
    class Bison : Herbivore
    {
    }

    /// <summary>
    /// The 'ProductB2' class
    /// </summary>
    class Wolf : Carnivore
    {
        public override void Eat(Herbivore h)
        {
            // Eat Bison
            Debug.Log(this.GetType().Name +" eats " + h.GetType().Name);
        }
    }

    /// <summary>
    /// The 'Client' class 
    /// </summary>
    class AnimalWorld
    {
        private Herbivore _herbivore;
        private Carnivore _carnivore;

        // Constructor
        public AnimalWorld(ContinentFactory factory)
        {
            _carnivore = factory.CreateCarnivore();
            _herbivore = factory.CreateHerbivore();
        }

        public void RunFoodChain()
        {
            _carnivore.Eat(_herbivore);
        }
    }
}

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example1/AbstractFactoryPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4242511faea71044f9d39d369ff932a3
timeCreated: 1476840353
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example1/AbstractFactoryPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: cdc3e44135c0cc648b658be23a622872
timeCreated: 1476840371
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 0fda4737dcc224345b2b6b478fe56e6d
folderAsset: yes
timeCreated: 1484050809
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example2/AbstractFactoryPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AbstractFactoryPatternExample2.cs
//-------------------------------------------------------------------------------------

// allows a family of related objects without specifying the concrete class
// when there are many objects that can be added or changed dynamically
// you can model everything you can image and have those objects interact through common interfaces

// negative: can get very complicated


using UnityEngine;
using System.Collections;

namespace AbstractFactoryPatternExample2
{

    public class AbstractFactoryPatternExample2 : MonoBehaviour
    {
	    void Start ( )
	    {
            EnemyShipBuilding ufoBuilder = new UFOEnemyShipBuilding();
            ufoBuilder.orderShip(ShipType.UFO);
        }
    }

    public enum ShipType
    {
        UFO
    }


    public abstract class EnemyShipBuilding
    {
        // abstract order form:
        protected abstract EnemyShip MakeEnemyShip(ShipType type);

        public EnemyShip orderShip(ShipType type)
        {
            EnemyShip ship = MakeEnemyShip(type);

            ship.MakeShip();
            ship.DisplayShip();
            ship.FollowHeroShip();
            ship.Shoot();

            return ship;
        }
    }

    public class UFOEnemyShipBuilding : EnemyShipBuilding
    {
        // Make Ship varies per ship type...
        protected override EnemyShip MakeEnemyShip(ShipType type)
        {
            EnemyShip ship = null;

            if (type == ShipType.UFO)
            {
                IEnemyShipFactory factory = new UFOEnemyShipFactory();
                ship = new UFOEnemyShip(factory);
                ship.name = "UFO";
            }

            return ship;
        }
    }





    public interface IEnemyShipFactory
    {
        IESWeapon AddESGun();
        IESEngine AddESEngine();
    }

    public class UFOEnemyShipFactory : IEnemyShipFactory
    {
        // each factory can add different weapons and stuff
        public IESWeapon AddESGun()
        {
            return new ESUFOGun();
        }

        public IESEngine AddESEngine()
        {
            return new ESUFOEngine();
        }
    }





    public abstract class EnemyShip
    {
        public string name;
        protected IESEngine engine;
        protected IESWeapon weapon;

        public abstract void MakeShip();

        public void DisplayShip()
        {
            Debug.Log(name + " is on the screen.");
        }

        public void FollowHeroShip()
        {
            Debug.Log(name + " follows hero ship with " + engine.ToStringEX());
        }

        public void Shoot()
        {
            Debug.Log(name + " shoots and does " + weapon.ToStringEX());
        }

        public string ToStringEX()
        {
            return "The " + name + " has a speed of " + engine.ToStringEX() + " a firepower of " + weapon.ToStringEX();
        }
    }

    public class UFOEnemyShip : EnemyShip
    {
        IEnemyShipFactory factory;

        public UFOEnemyShip(IEnemyShipFactory factory)
        {
            this.factory = factory;
        }

        public override void MakeShip()
        {
            Debug.Log("Making enemy ship " + name);
            weapon = factory.AddESGun();
            engine = factory.AddESEngine();
        }
    }



    // possible Weapons to swap in and out
    public interface IESWeapon
    {
        string ToStringEX();
    }

    public interface IESEngine
    {
        string ToStringEX();
    }

    public class ESUFOGun : IESWeapon
    {
        public string ToStringEX()
        {
            return "20 damage";
        }
    }
    public class ESUFOEngine : IESEngine
    {
        public string ToStringEX()
        {
            return "1000 mph";
        }
    }


}


```

`Assets/Creational Patterns/Abstract Factory Pattern/Example2/AbstractFactoryPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 33792d26570fd25499f68953e1a4e7b9
timeCreated: 1484050821
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Example2/AbstractFactoryPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 26b0d6b2a23f2874a95012f97755acd2
timeCreated: 1484050826
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/README.md`:

```md
# Abstract Factory Pattern 抽象工厂模式
## Definition

Provide an interface for creating families of related or dependent objects without specifying their concrete classes.
<br>提供一个接口，用于创建相关或者依赖对象的家族，而不需要指定具体的实现类。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/abstract.gif)


## Participants

The classes and objects participating in this pattern are:

### AbstractFactory  (ContinentFactory)
* declares an interface for operations that create abstract products

### ConcreteFactory   (AfricaFactory, AmericaFactory)
* implements the operations to create concrete product objects

### AbstractProduct   (Herbivore, Carnivore)
* declares an interface for a type of product object

### Product  (Wildebeest, Lion, Bison, Wolf)
* defines a product object to be created by the corresponding concrete factory
* implements the AbstractProduct interface

### Client  (AnimalWorld)
* uses interfaces declared by AbstractFactory and AbstractProduct classes



```

`Assets/Creational Patterns/Abstract Factory Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 6109250179e8da14ea639dd3986b74fa
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 39866c54c081c9a4eb3d10e080fa20cb
folderAsset: yes
timeCreated: 1476332683
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Structure/AbstractFactoryStructrue.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AbstractFactoryStructrue.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class AbstractFactoryStructrue : MonoBehaviour
{
    void Start()
    {
        // Abstract factory #1
        AbstractFactory factory1 = new ConcreteFactory1();
        Client client1 = new Client(factory1);
        client1.Run();

        // Abstract factory #2
        AbstractFactory factory2 = new ConcreteFactory2();
        Client client2 = new Client(factory2);
        client2.Run();
    }
}

/// <summary>
/// The 'AbstractFactory' abstract class
/// </summary>
abstract class AbstractFactory
{
    public abstract AbstractProductA CreateProductA();
    public abstract AbstractProductB CreateProductB();
}


/// <summary>
/// The 'ConcreteFactory1' class
/// </summary>
class ConcreteFactory1 : AbstractFactory
{
    public override AbstractProductA CreateProductA()
    {
        return new ProductA1();
    }
    public override AbstractProductB CreateProductB()
    {
        return new ProductB1();
    }
}

/// <summary>
/// The 'ConcreteFactory2' class
/// </summary>
class ConcreteFactory2 : AbstractFactory
{
    public override AbstractProductA CreateProductA()
    {
        return new ProductA2();
    }
    public override AbstractProductB CreateProductB()
    {
        return new ProductB2();
    }
}

/// <summary>
/// The 'AbstractProductA' abstract class
/// </summary>
abstract class AbstractProductA
{
}

/// <summary>
/// The 'AbstractProductB' abstract class
/// </summary>
abstract class AbstractProductB
{
    public abstract void Interact(AbstractProductA a);
}


/// <summary>
/// The 'ProductA1' class
/// </summary>
class ProductA1 : AbstractProductA
{
}

/// <summary>
/// The 'ProductB1' class
/// </summary>
class ProductB1 : AbstractProductB
{
    public override void Interact(AbstractProductA a)
    {
        Debug.Log(this.GetType().Name + " interacts with " + a.GetType().Name);
    }
}

/// <summary>
/// The 'ProductA2' class
/// </summary>
class ProductA2 : AbstractProductA
{
}

/// <summary>
/// The 'ProductB2' class
/// </summary>
class ProductB2 : AbstractProductB
{
    public override void Interact(AbstractProductA a)
    {
        Debug.Log(this.GetType().Name + " interacts with " + a.GetType().Name);
    }
}

/// <summary>
/// The 'Client' class. Interaction environment for the products.
/// </summary>
class Client
{
    private AbstractProductA _abstractProductA;
    private AbstractProductB _abstractProductB;

    // Constructor
    public Client(AbstractFactory factory)
    {
        _abstractProductB = factory.CreateProductB();
        _abstractProductA = factory.CreateProductA();
    }

    public void Run()
    {
        _abstractProductB.Interact(_abstractProductA);
    }
}

```

`Assets/Creational Patterns/Abstract Factory Pattern/Structure/AbstractFactoryStructrue.cs.meta`:

```meta
fileFormatVersion: 2
guid: 2c584b553366ce44bba002a374d2e4e0
timeCreated: 1476332730
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Abstract Factory Pattern/Structure/TestAbstractFactoryStructrue.unity.meta`:

```meta
fileFormatVersion: 2
guid: 024603f2db65f2e46a0ea4a1b7fbea5f
timeCreated: 1476332705
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern.meta`:

```meta
fileFormatVersion: 2
guid: d649895106e574a4bab108dc398ed0c7
folderAsset: yes
timeCreated: 1476335875
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 2d395885b94e3e547ade622604c0f4b3
folderAsset: yes
timeCreated: 1476841267
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example1/BuilderPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BuilderPatternExample1.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstates the Builder pattern in which different vehicles are assembled in a step-by-step fashion. 
//The Shop uses VehicleBuilders to construct a variety of Vehicles in a series of sequential steps.

namespace BuilderPatternExample1
{
    public class BuilderPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            VehicleBuilder builder;

            // Create shop with vehicle builders
            Shop shop = new Shop();

            // Construct and display vehicles
            builder = new ScooterBuilder();
            shop.Construct(builder);
            builder.Vehicle.Show();

            builder = new CarBuilder();
            shop.Construct(builder);
            builder.Vehicle.Show();

            builder = new MotorCycleBuilder();
            shop.Construct(builder);
            builder.Vehicle.Show();

        }
    }

    /// <summary>
    /// The 'Director' class
    /// </summary>
    class Shop
    {
        // Builder uses a complex series of steps
        public void Construct(VehicleBuilder vehicleBuilder)
        {
            vehicleBuilder.BuildFrame();
            vehicleBuilder.BuildEngine();
            vehicleBuilder.BuildWheels();
            vehicleBuilder.BuildDoors();
        }
    }

    /// <summary>
    /// The 'Builder' abstract class
    /// </summary>
    abstract class VehicleBuilder
    {
        protected Vehicle vehicle;

        // Gets vehicle instance
        public Vehicle Vehicle
        {
            get { return vehicle; }
        }

        // Abstract build methods
        public abstract void BuildFrame();
        public abstract void BuildEngine();
        public abstract void BuildWheels();
        public abstract void BuildDoors();
    }

    /// <summary>
    /// The 'ConcreteBuilder1' class
    /// </summary>
    class MotorCycleBuilder : VehicleBuilder
    {
        public MotorCycleBuilder()
        {
            vehicle = new Vehicle("MotorCycle");
        }

        public override void BuildFrame()
        {
            vehicle["frame"] = "MotorCycle Frame";
        }

        public override void BuildEngine()
        {
            vehicle["engine"] = "500 cc";
        }

        public override void BuildWheels()
        {
            vehicle["wheels"] = "2";
        }

        public override void BuildDoors()
        {
            vehicle["doors"] = "0";
        }
    }


    /// <summary>
    /// The 'ConcreteBuilder2' class
    /// </summary>
    class CarBuilder : VehicleBuilder
    {
        public CarBuilder()
        {
            vehicle = new Vehicle("Car");
        }

        public override void BuildFrame()
        {
            vehicle["frame"] = "Car Frame";
        }

        public override void BuildEngine()
        {
            vehicle["engine"] = "2500 cc";
        }

        public override void BuildWheels()
        {
            vehicle["wheels"] = "4";
        }

        public override void BuildDoors()
        {
            vehicle["doors"] = "4";
        }
    }

    /// <summary>
    /// The 'ConcreteBuilder3' class
    /// </summary>
    class ScooterBuilder : VehicleBuilder
    {
        public ScooterBuilder()
        {
            vehicle = new Vehicle("Scooter");
        }

        public override void BuildFrame()
        {
            vehicle["frame"] = "Scooter Frame";
        }

        public override void BuildEngine()
        {
            vehicle["engine"] = "50 cc";
        }

        public override void BuildWheels()
        {
            vehicle["wheels"] = "2";
        }

        public override void BuildDoors()
        {
            vehicle["doors"] = "0";
        }
    }

    /// <summary>
    /// The 'Product' class
    /// </summary>
    class Vehicle
    {
        private string _vehicleType;
        private Dictionary<string, string> _parts =
          new Dictionary<string, string>();

        // Constructor
        public Vehicle(string vehicleType)
        {
            this._vehicleType = vehicleType;
        }

        // Indexer
        public string this[string key]
        {
            get { return _parts[key]; }
            set { _parts[key] = value; }
        }

        public void Show()
        {
            Debug.Log("\n---------------------------");
            Debug.Log("Vehicle Type: " + _vehicleType);
            Debug.Log(" Frame : " + _parts["frame"]);
            Debug.Log(" Engine : " + _parts["engine"]);
            Debug.Log(" #Wheels: " + _parts["wheels"]);
            Debug.Log(" #Doors : " + _parts["doors"]);
        }
    }
}

```

`Assets/Creational Patterns/Builder Pattern/Example1/BuilderPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: eff8f29341cca1d428def3eab3289112
timeCreated: 1476841312
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example1/BuilderPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 357ece46360c1cc4bb29e1a251eef4b6
timeCreated: 1476841320
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: ac5f6a7deacc5c14b869ffb004c96799
folderAsset: yes
timeCreated: 1484051223
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example2/BuilderPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BuilderPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace BuilderPatternExample2
{
    public class BuilderPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            IRobotBuilder oldRobot = new OldRobotBuilder();
            RobotEngineer engineer = new RobotEngineer(oldRobot);
            engineer.MakeRobot();

            Robot firstRobot = engineer.GetRobot();
            Debug.Log("First Robot built");
            Debug.Log(firstRobot.ToStringEX());
        }
    }

    public interface IRobotPlan
    {
        void SetRobotHead(string head);

        void SetRobotTorso(string torso);

        void SetRobotArms(string arms);

        void SetRobotLegs(string legs);
    }

    public class Robot : IRobotPlan
    {
        public string head { get; protected set; }
        public string torso { get; protected set; }
        public string arms { get; protected set; }
        public string legs { get; protected set; }

        public void SetRobotHead(string head)
        {
            this.head = head;
        }

        public void SetRobotTorso(string torso)
        {
            this.torso = torso;
        }

        public void SetRobotArms(string arms)
        {
            this.arms = arms;
        }

        public void SetRobotLegs(string legs)
        {
            this.legs = legs;
        }

        public string ToStringEX()
        {
            return "Head: " + this.head + ", torso: " + this.torso + ", Arms: " + arms + ", legs: " + legs;
        }
    }




    // they're kinda like a blueprint these RobotBuilder classes:
    public interface IRobotBuilder
    {
        Robot GetRobot();
        void BuildRobotHead();
        void BuildRobotTorso();
        void BuildRobotArms();
        void BuildRobotLegs();
    }

    // for each new robot that you might want to have just create a new RobotBuilder Object
    public class OldRobotBuilder : IRobotBuilder
    {
        protected Robot robot { get; set; }

        public OldRobotBuilder()
        {
            this.robot = new Robot();
        }

        public Robot GetRobot()
        {
            return robot;
        }

        public void BuildRobotHead()
        {
            this.robot.SetRobotHead("Old Head");
        }

        public void BuildRobotTorso()
        {
            this.robot.SetRobotTorso("Old Torso");
        }

        public void BuildRobotArms()
        {
            this.robot.SetRobotArms("Old Arms");
        }

        public void BuildRobotLegs()
        {
            this.robot.SetRobotLegs("Roller Skates");
        }
    }



    // he just calls the method in the Robot Objects (which are defined by the interface, just think of blueprints)
    public class RobotEngineer
    {
        public IRobotBuilder robotBuilder { get; protected set; }

        public RobotEngineer(IRobotBuilder builder)
        {
            this.robotBuilder = builder;
        }

        public Robot GetRobot()
        {
            return this.robotBuilder.GetRobot();
        }

        public void MakeRobot()
        {
            this.robotBuilder.BuildRobotHead();
            this.robotBuilder.BuildRobotTorso();
            this.robotBuilder.BuildRobotArms();
            this.robotBuilder.BuildRobotLegs();
        }
    }


}

```

`Assets/Creational Patterns/Builder Pattern/Example2/BuilderPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 175c517bfde1f5e42af089ab255c6478
timeCreated: 1484051288
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Example2/BuilderPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 16dbba2c2f2ecd54ca40c1a4a0619999
timeCreated: 1484051296
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/README.md`:

```md
# Builder Pattern 建造者模式
## Definition

Separate the construction of a complex object from its representation so that the same construction process can create different representations.
<br>将一个复杂对象的构造与它的表示分离，使同样的构建过程可以创建不同的表示，这样的设计模式被称为建造者模式。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/builder.gif)


## Participants

The classes and objects participating in this pattern are:

### Builder  (VehicleBuilder)
* specifies an abstract interface for creating parts of a Product object

### ConcreteBuilder  (MotorCycleBuilder, CarBuilder, ScooterBuilder)
* constructs and assembles parts of the product by implementing the Builder interface
* defines and keeps track of the representation it creates
* provides an interface for retrieving the product

### Director  (Shop)
* constructs an object using the Builder interface

### Product  (Vehicle)
* represents the complex object under construction. ConcreteBuilder builds the product's internal representation and defines the process by which it's assembled
* includes classes that define the constituent parts, including interfaces for assembling the parts into the final result


```

`Assets/Creational Patterns/Builder Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 9f90499aa6ad4184386db79c9ed61efc
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: dcb46d80e23807e4d889a87bf1e4c26f
folderAsset: yes
timeCreated: 1476335883
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Structure/BuilderStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BuilderStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class BuilderStructure : MonoBehaviour
{
	void Start ( )
    {
        // Create director and builders
        Director director = new Director();

        Builder b1 = new ConcreteBuilder1();
        Builder b2 = new ConcreteBuilder2();

        // Construct two products
        director.Construct(b1);
        Product p1 = b1.GetResult();
        p1.Show();

        director.Construct(b2);
        Product p2 = b2.GetResult();
        p2.Show();
    }
}

/// <summary>
/// The 'Director' class
/// </summary>
class Director
{
    // Builder uses a complex series of steps
    public void Construct(Builder builder)
    {
        builder.BuildPartA();
        builder.BuildPartB();
    }
}

/// <summary>
/// The 'Builder' abstract class
/// </summary>
abstract class Builder
{
    public abstract void BuildPartA();
    public abstract void BuildPartB();
    public abstract Product GetResult();
}

/// <summary>
/// The 'ConcreteBuilder1' class
/// </summary>
class ConcreteBuilder1 : Builder
{
    private Product _product = new Product();

    public override void BuildPartA()
    {
        _product.Add("PartA");
    }

    public override void BuildPartB()
    {
        _product.Add("PartB");
    }

    public override Product GetResult()
    {
        return _product;
    }
}

/// <summary>
/// The 'ConcreteBuilder2' class
/// </summary>
class ConcreteBuilder2 : Builder
{
    private Product _product = new Product();

    public override void BuildPartA()
    {
        _product.Add("PartX");
    }

    public override void BuildPartB()
    {
        _product.Add("PartY");
    }

    public override Product GetResult()
    {
        return _product;
    }
}

/// <summary>
/// The 'Product' class
/// </summary>
class Product
{
    private List<string> _parts = new List<string>();

    public void Add(string part)
    {
        _parts.Add(part);
    }

    public void Show()
    {
      Debug.Log("\nProduct Parts -------");
        foreach (string part in _parts)
        {
            Debug.Log(part);
        }

    }
}
```

`Assets/Creational Patterns/Builder Pattern/Structure/BuilderStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: c01188ee72b72ed4c8f202da5f38bf14
timeCreated: 1476335902
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Builder Pattern/Structure/TestBuilderStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: a6f525ebcb466bb47a6bb6217b646e31
timeCreated: 1476335915
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 251a0977eb6126f4ea0bb9547d78785b
folderAsset: yes
timeCreated: 1476336361
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 2221837a25d09e34cae5619d76b8a292
folderAsset: yes
timeCreated: 1476842843
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example1/FactoryMethodPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FactoryMethodPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Factory method offering flexibility in creating different documents. 
//The derived Document classes Report and Resume instantiate extended versions of the Document class. Here, the Factory Method is called in the constructor of the Document base class.

namespace FactoryMethodPatternExample1
{
    public class FactoryMethodPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Note: constructors call Factory Method
            Document[] documents = new Document[2];

            documents[0] = new Resume();
            documents[1] = new Report();

            // Display document pages
            foreach (Document document in documents)
            {
                Debug.Log("\n" + document.GetType().Name + "--");
                foreach (Page page in document.Pages)
                {
                    Debug.Log(" " + page.GetType().Name);
                }
            }

        }
    }

    /// <summary>
    /// The 'Product' abstract class
    /// </summary>
    abstract class Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class SkillsPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class EducationPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class ExperiencePage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class IntroductionPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class ResultsPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class ConclusionPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class SummaryPage : Page
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class BibliographyPage : Page
    {
    }

    /// <summary>
    /// The 'Creator' abstract class
    /// </summary>
    abstract class Document
    {
        private List<Page> _pages = new List<Page>();

        // Constructor calls abstract Factory method
        public Document()
        {
            this.CreatePages();
        }

        public List<Page> Pages
        {
            get { return _pages; }
        }

        // Factory Method
        public abstract void CreatePages();
    }

    /// <summary>
    /// A 'ConcreteCreator' class
    /// </summary>
    class Resume : Document
    {
        // Factory Method implementation
        public override void CreatePages()
        {
            Pages.Add(new SkillsPage());
            Pages.Add(new EducationPage());
            Pages.Add(new ExperiencePage());
        }
    }

    /// <summary>
    /// A 'ConcreteCreator' class
    /// </summary>
    class Report : Document
    {
        // Factory Method implementation
        public override void CreatePages()
        {
            Pages.Add(new IntroductionPage());
            Pages.Add(new ResultsPage());
            Pages.Add(new ConclusionPage());
            Pages.Add(new SummaryPage());
            Pages.Add(new BibliographyPage());
        }
    }
}
```

`Assets/Creational Patterns/Factory Method Pattern/Example1/FactoryMethodPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 7e11083f9d559404fa387aede8b3f297
timeCreated: 1476842875
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example1/FactoryMethodPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: b7607c05d932ca841a4ddeca8bccc361
timeCreated: 1476842883
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 7fce4399c420a1a4d856ac21f68926ec
folderAsset: yes
timeCreated: 1484051979
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example2/FactoryMethodPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FactoryMethodPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace FactoryMethodPatternExample2
{
    public class FactoryMethodPatternExample2 : MonoBehaviour
    {
        EnemyShipFactory factory;
        void Start()
        {
            factory = new EnemyShipFactory();
            Debug.Log("please type U、R、B for test~");
        }

        void Update( )
        {
            if (Input.GetKeyDown(KeyCode.U))
            {
                EnemyShip ship = factory.MakeEnemyShip(EnemyShipFactory.ShipType.UFO);
                DoStuffEnemy(ship);
            }
            else if (Input.GetKeyDown(KeyCode.R))
            {
                EnemyShip ship = factory.MakeEnemyShip(EnemyShipFactory.ShipType.Rocket);
                DoStuffEnemy(ship);
            }
            else if (Input.GetKeyDown(KeyCode.B))
            {
                EnemyShip ship = factory.MakeEnemyShip(EnemyShipFactory.ShipType.Endboss);
                DoStuffEnemy(ship);
            }
        }

        void DoStuffEnemy(EnemyShip enemyShip)
        {
            enemyShip.displayEnemyShip();
            enemyShip.followHeroShip();
            enemyShip.enemyShipShoots();
        }

    }

    // move that desicion making into another class:
    public class EnemyShipFactory
    {
        public enum ShipType
        {
            UFO,
            Rocket,
            Endboss
        }
        ;

        public EnemyShip MakeEnemyShip(ShipType shipType)
        {
            if (shipType == ShipType.UFO)
                return new UFOEnemyShip();
            else if (shipType == ShipType.Rocket)
                return new RocketEnemyShip();
            else if (shipType == ShipType.Endboss)
                return new BigEnemyShip();
            else
                return null;
        }
    }

    public class BadCodeExample : MonoBehaviour
    {
        void Start()
        {
            EnemyShip ufo = new UFOEnemyShip();
            Debug.Log("What kind of ship do you want? (R / U)");
        }

        // yes its dynamic but it is also modifyable
        // you don't want this sort of stuff going on inside of your actual program
        // lots of if and else statements and logic
        void Update()
        {
            //return; // < "deactivating"


            if (Input.GetKeyDown(KeyCode.U))
            {
                EnemyShip ship = new UFOEnemyShip();
                DoStuffEnemy(ship);
            }
            else if (Input.GetKeyDown(KeyCode.R))
            {
                EnemyShip ship = new RocketEnemyShip();
                DoStuffEnemy(ship);
            }
        }

        void DoStuffEnemy(EnemyShip enemyShip)
        {
            enemyShip.displayEnemyShip();
            enemyShip.followHeroShip();
            enemyShip.enemyShipShoots();
        }
    }

    public abstract class EnemyShip
    {
        public string name;
        public double damage;

        public void followHeroShip()
        {
            Debug.Log(name + " is following the hero.");
        }

        public void displayEnemyShip()
        {
            Debug.Log(name + " is on the screen.");
        }

        public void enemyShipShoots()
        {
            Debug.Log(name + " attacks and does " + damage + " damage");
        }
    }

    public class UFOEnemyShip : EnemyShip
    {
        public UFOEnemyShip()
        {
            name = "UFOEnemyShip";
            damage = 20;
        }
    }

    public class RocketEnemyShip : EnemyShip
    {
        public RocketEnemyShip()
        {
            name = "RocketEnemyShip";
            damage = 10;
        }
    }

    public class BigEnemyShip : UFOEnemyShip
    {
        public BigEnemyShip()
        {
            name = "BigEnemyShip";
            damage = 40;
        }
    }

}


```

`Assets/Creational Patterns/Factory Method Pattern/Example2/FactoryMethodPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: c1b68918e27a00841816c56ebcd54ba5
timeCreated: 1484051999
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Example2/FactoryMethodPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 5eee6957e341a5440b1a43d43bdb0761
timeCreated: 1484052006
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/README.md`:

```md
# Factory Method Pattern 工厂方法模式
## Definition

Define an interface for creating an object, but let subclasses decide which class to instantiate. Factory Method lets a class defer instantiation to subclasses.
<br>定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法使一个类的实例化延迟到其子类。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/factory.gif)


## Participants

The classes and objects participating in this pattern are:

### Product  (Page)
* defines the interface of objects the factory method creates
* ConcreteProduct  (SkillsPage, EducationPage, ExperiencePage)
* implements the Product interface

### Creator  (Document)
* declares the factory method, which returns an object of type Product. Creator may also define a default implementation of the factory method that returns a default ConcreteProduct object.
* may call the factory method to create a Product object.

### ConcreteCreator  (Report, Resume)
* overrides the factory method to return an instance of a ConcreteProduct.


```

`Assets/Creational Patterns/Factory Method Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: d64281c04213ac346aa81d7383524819
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: cef33cac9d411ec4b85fc526555db22c
folderAsset: yes
timeCreated: 1476337709
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Structure/FactoryMethodStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FactoryMethodStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace FactoryMethodStructure
{
   
    public class FactoryMethodStructure : MonoBehaviour
    {
	    void Start ( )
        {
            // An array of creators
            Creator[] creators = new Creator[2];

            creators[0] = new ConcreteCreatorA();
            creators[1] = new ConcreteCreatorB();

            // Iterate over creators and create products
            foreach (Creator creator in creators)
            {
                Product product = creator.FactoryMethod();
                Debug.Log("Created "+product.GetType().Name);
            }
        }
    }

    /// <summary>
    /// The 'Product' abstract class
    /// </summary>
    abstract class Product
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class ConcreteProductA : Product
    {
    }

    /// <summary>
    /// A 'ConcreteProduct' class
    /// </summary>
    class ConcreteProductB : Product
    {
    }

    /// <summary>
    /// The 'Creator' abstract class
    /// </summary>
    abstract class Creator
    {
        public abstract Product FactoryMethod();
    }

    /// <summary>
    /// A 'ConcreteCreator' class
    /// </summary>
    class ConcreteCreatorA : Creator
    {
        public override Product FactoryMethod()
        {
            return new ConcreteProductA();
        }
    }

    /// <summary>
    /// A 'ConcreteCreator' class
    /// </summary>
    class ConcreteCreatorB : Creator
    {
        public override Product FactoryMethod()
        {
            return new ConcreteProductB();
        }
    }
}
```

`Assets/Creational Patterns/Factory Method Pattern/Structure/FactoryMethodStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6bf2ad14b2687cf4c9872da0c05080db
timeCreated: 1476336395
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Factory Method Pattern/Structure/TestFactoryMethodStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 3b98110411dc6bd4a9212e6040dafec3
timeCreated: 1476336405
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern.meta`:

```meta
fileFormatVersion: 2
guid: d24462407978acd49acca24c8a5ab47a
folderAsset: yes
timeCreated: 1476243826
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 99f8400a2463d4d4f9e8cb7465fdf53f
folderAsset: yes
timeCreated: 1476844120
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example1/PrototypePatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	PrototypePatternExample1.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Prototype pattern in which new Color objects are created by copying pre-existing, user-defined Colors of the same type.

namespace PrototypePatternExample1
{
    public class PrototypePatternExample1 : MonoBehaviour
    {
        void Start()
        {
            ColorManager colormanager = new ColorManager();

            // Initialize with standard colors
            colormanager["red"] = new Color(255, 0, 0);
            colormanager["green"] = new Color(0, 255, 0);
            colormanager["blue"] = new Color(0, 0, 255);

            // User adds personalized colors
            colormanager["angry"] = new Color(255, 54, 0);
            colormanager["peace"] = new Color(128, 211, 128);
            colormanager["flame"] = new Color(211, 34, 20);

            // User clones selected colors
            Color color1 = colormanager["red"].Clone() as Color;
            Color color2 = colormanager["peace"].Clone() as Color;
            Color color3 = colormanager["flame"].Clone() as Color;

        }
    }

    /// <summary>
    /// The 'Prototype' abstract class
    /// </summary>
    abstract class ColorPrototype
    {
        public abstract ColorPrototype Clone();
    }

    /// <summary>
    /// The 'ConcretePrototype' class
    /// </summary>
    class Color : ColorPrototype
    {
        private int _red;
        private int _green;
        private int _blue;

        // Constructor
        public Color(int red, int green, int blue)
        {
            this._red = red;
            this._green = green;
            this._blue = blue;
        }

        // Create a shallow copy
        public override ColorPrototype Clone()
        {
            Debug.Log("Cloning color RGB: (" + _red + " ," + _green + "," + _blue + ")");

            return this.MemberwiseClone() as ColorPrototype;
        }
    }

    /// <summary>
    /// Prototype manager
    /// </summary>
    class ColorManager
    {
        private Dictionary<string, ColorPrototype> _colors = new Dictionary<string, ColorPrototype>();

        // Indexer
        public ColorPrototype this[string key]
        {
            get { return _colors[key]; }
            set { _colors.Add(key, value); }
        }
    }
}

```

`Assets/Creational Patterns/Prototype Pattern/Example1/PrototypePatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 18c7c8d7959e53c4897019015897f15d
timeCreated: 1476844168
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example1/PrototypePatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 970f656b1ec32a34298d99e40ba56131
timeCreated: 1476844174
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 13aca397df29a1d4184ef7069a52fc72
folderAsset: yes
timeCreated: 1484052775
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example2/PrototypePatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	PrototypePatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;

namespace PrototypePatternExample2
{
    public class PrototypePatternExample2 : MonoBehaviour
    {
        void Start()
        {
            CloneFactory factory = new CloneFactory();
            
            Sheep sally = new Sheep();

            Sheep clonedSheep = (Sheep)factory.GetClone(sally);

            Debug.Log("Sally: " + sally.ToStringEX());
            Debug.Log("Clone of Sally: " + clonedSheep.ToStringEX());
            Debug.Log("Sally Hash: " + sally.GetHashCode() + " - Cloned Sheep Hash: " + clonedSheep.GetHashCode());
        }

    }

    public class CloneFactory
    {
        public IAnimal GetClone(IAnimal animalSample)
        {
            return (IAnimal)animalSample.Clone();
        }
    }

    public interface IAnimal : ICloneable
    {
        object Clone();
    }

    public class Sheep : IAnimal
    {
        public Sheep()
        {
            Debug.Log("Made Sheep");
        }

        public object Clone()
        {
            Sheep sheep = null;

            try
            {
                sheep = (Sheep)base.MemberwiseClone();
            }
            catch (Exception e)
            {
                Debug.LogError("Error cloning Sheep");
            }

            return sheep;
        }

        public string ToStringEX()
        {
            return "Hello I'm a Sheep";
        }
    }

}


```

`Assets/Creational Patterns/Prototype Pattern/Example2/PrototypePatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: ca7ca7f7e45fd464293564100181140a
timeCreated: 1484052785
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Example2/PrototypePatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 970e2557e919c7c43999fb1de33c767a
timeCreated: 1484052803
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/README.md`:

```md
# Prototype Pattern 原型模式
## Definition

Specify the kind of objects to create using a prototypical instance, and create new objects by copying this prototype.
<br>用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/prototype.gif)


## Participants

The classes and objects participating in this pattern are:

### Prototype  (ColorPrototype)
* declares an interface for cloning itself

### ConcretePrototype  (Color)
* implements an operation for cloning itself

### Client  (ColorManager)
* creates a new object by asking a prototype to clone itself


```

`Assets/Creational Patterns/Prototype Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: e3c984f8872e4574d9fbdb0ba805da5c
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: ac431beeec388834ab007c0a6b705c6d
folderAsset: yes
timeCreated: 1476243860
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Structure/PrototypeStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	PrototypeStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class PrototypeStructure : MonoBehaviour
{

    void Start( )
    {
        // Create two instances and clone each

        ConcretePrototype1 p1 = new ConcretePrototype1("I");
        ConcretePrototype1 c1 = (ConcretePrototype1)p1.Clone();
        Debug.Log("Cloned: "+c1.Id);

        ConcretePrototype2 p2 = new ConcretePrototype2("II");
        ConcretePrototype2 c2 = (ConcretePrototype2)p2.Clone();
        Debug.Log("Cloned: "+c2.Id);

    }
}

/// <summary>
/// The 'Prototype' abstract class
/// </summary>
abstract class Prototype
{
    private string _id;

    // Constructor
    public Prototype(string id)
    {
        this._id = id;
    }

    // Gets id
    public string Id
    {
        get { return _id; }
    }

    public abstract Prototype Clone();
}

/// <summary>
/// A 'ConcretePrototype' class 
/// </summary>
class ConcretePrototype1 : Prototype
{
    // Constructor
    public ConcretePrototype1(string id)
      : base(id)
    {
    }

    // Returns a shallow copy
    public override Prototype Clone()
    {
        return (Prototype)this.MemberwiseClone();
    }
}

/// <summary>
/// A 'ConcretePrototype' class 
/// </summary>
class ConcretePrototype2 : Prototype
{
    // Constructor
    public ConcretePrototype2(string id)
      : base(id)
    {
    }

    // Returns a shallow copy
    public override Prototype Clone()
    {
        return (Prototype)this.MemberwiseClone();
    }
}

```

`Assets/Creational Patterns/Prototype Pattern/Structure/PrototypeStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 08bedeef614dd1c4fa86c3fd5a31b793
timeCreated: 1476243882
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Prototype Pattern/Structure/TestPrototypeStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: aee6cce65797f1f4986f34cac24e9ce9
timeCreated: 1476243897
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern.meta`:

```meta
fileFormatVersion: 2
guid: e055e95d34c4eb44788576a1632501fa
folderAsset: yes
timeCreated: 1476240011
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example1.meta`:

```meta
fileFormatVersion: 2
guid: 5d9927db3d8579d4e910393fa6a133ee
folderAsset: yes
timeCreated: 1476844907
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example1/SingletonPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SingletonPatternExample1.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Singleton pattern as a LoadBalancing object. Only a single instance (the singleton) of the class can be created 
//because servers may dynamically come on- or off-line and every request must go throught the one object that has knowledge about the state of the (web) farm.

namespace SingletonPatternExample1
{
    public class SingletonPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            LoadBalancer b1 = LoadBalancer.GetLoadBalancer();
            LoadBalancer b2 = LoadBalancer.GetLoadBalancer();
            LoadBalancer b3 = LoadBalancer.GetLoadBalancer();
            LoadBalancer b4 = LoadBalancer.GetLoadBalancer();

            // Same instance?
            if (b1 == b2 && b2 == b3 && b3 == b4)
            {
                Debug.Log("Same instance\n");
            }

            // Load balance 15 server requests
            LoadBalancer balancer = LoadBalancer.GetLoadBalancer();
            for (int i = 0; i < 15; i++)
            {
                string server = balancer.Server;
                Debug.Log("Dispatch Request to: " + server);
            }
        }
    }

    /// <summary>
    /// The 'Singleton' class
    /// </summary>
    class LoadBalancer
    {
        private static LoadBalancer _instance;
        private List<string> _servers = new List<string>();
        private System.Random _random = new System.Random();

        // Lock synchronization object
        private static object syncLock = new object();

        // Constructor (protected)
        protected LoadBalancer()
        {
            // List of available servers
            _servers.Add("ServerI");
            _servers.Add("ServerII");
            _servers.Add("ServerIII");
            _servers.Add("ServerIV");
            _servers.Add("ServerV");
        }

        public static LoadBalancer GetLoadBalancer()
        {
            // Support multithreaded applications through
            // 'Double checked locking' pattern which (once
            // the instance exists) avoids locking each
            // time the method is invoked
            if (_instance == null)
            {
                lock (syncLock)
                {
                    if (_instance == null)
                    {
                        _instance = new LoadBalancer();
                    }
                }
            }

            return _instance;
        }

        // Simple, but effective random load balancer
        public string Server
        {
            get
            {
                int r = _random.Next(_servers.Count);
                return _servers[r].ToString();
            }
        }
    }
}

```

`Assets/Creational Patterns/Singleton Pattern/Example1/SingletonPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 637fbce15f2009f4ba816b90c69138ba
timeCreated: 1476844922
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example1/SingletonPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 4ac423d1ff9f64b4084056da099cff18
timeCreated: 1476844929
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 4f8d6d4cd75240f4584c4802a7096cc3
folderAsset: yes
timeCreated: 1515413155
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example2/SingletonPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SingletonPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace SingletonPatternExample2
{
    public class SingletonPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            RenderManager.Instance.Show();
        }

        void Update()
        {
            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                RenderManager.Instance.Show();
            }
        }
    }


    /// <summary>
    /// 某单例manager
    /// </summary>
    public class RenderManager
    {
        private static RenderManager instance;
        public static RenderManager Instance
        {
            get
            {
                if (instance == null)
                {
                    instance = new RenderManager();
                }
                return instance;
            }
        }

        /// <summary>
        /// 随便某方法
        /// </summary>
        public void Show()
        {
            Debug.Log("RenderManager is a Singleton !");
        }
    }




}
```

`Assets/Creational Patterns/Singleton Pattern/Example2/SingletonPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 7f06bd17dbf5c7c45ade1374648465a3
timeCreated: 1515413165
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example2/SingletonPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: ccddb4a4c121ad64b943d1bdbb47b5dd
timeCreated: 1515413173
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example3.meta`:

```meta
fileFormatVersion: 2
guid: 80d8d43f1e68c9647913652f0f3d904b
folderAsset: yes
timeCreated: 1519952415
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example3/SingletonPatternExample3.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SingletonPatternExample3.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace SingletonPatternExample3
{

    public class SingletonPatternExample3 : MonoBehaviour
    {
        void Start()
        {
            //单例A
            SingletonA.Instance.DoSomething();

            //单例B
            SingletonB.Instance.DoSomething();
        }

    }

    /// <summary>
    /// 单例类基类（抽象类、泛型，其他类只需继承此类即可成为单例类）
    /// 继承该类的，即成为一个单例类
    /// </summary>
    public abstract class Singleton<T>
        where T : class, new()
    {
        private static T _instance = null;

        public static T Instance
        {
            get
            {
                if (_instance == null)
                {
                    _instance = new T();
                    return _instance;
                }
                return _instance;
            }
        }

        protected virtual void Awake()
        {
            _instance = this as T;
        }
    }


    /// <summary>
    /// 继承自Singleton<T>的单例
    /// </summary>
    public class SingletonA : Singleton<SingletonA>
    {
        public void DoSomething()
        {
            Debug.Log("SingletonA:DoSomething!");
        }
    }

    /// <summary>
    /// 继承自Singleton<T>的单例
    /// </summary>
    public class SingletonB : Singleton<SingletonB>
    {
        public void DoSomething()
        {
            Debug.Log("SingletonB:DoSomething!");
        }
    }


}
```

`Assets/Creational Patterns/Singleton Pattern/Example3/SingletonPatternExample3.cs.meta`:

```meta
fileFormatVersion: 2
guid: 7a7a0c1b39bba3d44b672799f3e8c171
timeCreated: 1519952439
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Example3/SingletonPatternExample3.unity.meta`:

```meta
fileFormatVersion: 2
guid: 4b32323d7254f6c45927ec9fdd35d8a7
timeCreated: 1519952454
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/README.md`:

```md
# Singleton Pattern 单例模式
## Definition

Ensure a class has only one instance and provide a global point of access to it.
<br>确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/singleton.gif)


## Participants

The classes and objects participating in this pattern are:

### Singleton   (LoadBalancer)
* defines an Instance operation that lets clients access its unique instance. Instance is a class operation.
* responsible for creating and maintaining its own unique instance.


```

`Assets/Creational Patterns/Singleton Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 73f80df7b44f1564d8ebda90f3f47dc0
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 07d74907947887c438e0b97082586e78
folderAsset: yes
timeCreated: 1476240078
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Structure/SingletonStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SingletonStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class SingletonStructure : MonoBehaviour
{

    void Start()
    {
        // Constructor is protected -- cannot use new
        Singleton s1 = Singleton.Instance();
        Singleton s2 = Singleton.Instance();

        // Test for same instance
        if (s1 == s2)
        {
            Debug.Log("Objects are the same instance");
        }
    }
}

/// <summary>
/// The 'Singleton' class
/// </summary>
class Singleton
{
    private static Singleton _instance;

    // Constructor is 'protected'
    protected Singleton()
    {
    }

    public static Singleton Instance()
    {
        // Uses lazy initialization.
        // Note: this is not thread safe.
        if (_instance == null)
        {
            _instance = new Singleton();
        }

        return _instance;
    }
}
```

`Assets/Creational Patterns/Singleton Pattern/Structure/SingletonStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 59916ed9e320d8e4db0c000604480536
timeCreated: 1476240088
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Creational Patterns/Singleton Pattern/Structure/TestSingletonStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 4924da4e05ab61c4cbb4e0f0355cff90
timeCreated: 1476240284
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns.meta`:

```meta
fileFormatVersion: 2
guid: 70017361ed05cbc4b992427e076d23f7
folderAsset: yes
timeCreated: 1476363090
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Component Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 65a48da916301fb4b8a69c9655de2f9b
folderAsset: yes
timeCreated: 1514208435
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Component Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: b9be78d5e3f531b448dc132f0bfef73e
folderAsset: yes
timeCreated: 1514208450
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Component Pattern/Example/ComponentPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ComponentPatternExample.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace ComponentPatternExample
{

    public class ComponentPatternExample : MonoBehaviour
    {
        RPGGame rpgGame = new RPGGame();

        void Start()
        {
            rpgGame.Start();
        }

        void Update()
        {
            rpgGame.Update();
        }
    }

    /// <summary>
    /// 游戏类
    /// </summary>
    class RPGGame
    {
        public int velocity;
        public int x = 0, y = 0;

        //辅助类对象
        public WorldX worldX = new WorldX();
        public GraphicsX graphicsX = new GraphicsX();

        //组件
        private InputComponent inputComponent;
        private PhysicsComponent physicsComponent;
        private GraphicsComponent graphicsComponent;

        //组件List
        public List<BaseComponent> ComponentList = new List<BaseComponent>();
        //组件List容量
        int componentAmount = -1;

        public void Start()
        {
            inputComponent = new PlayerInputComponent();
            physicsComponent = new PlayerPhysicsComponent();
            graphicsComponent = new PlayerGraphicsComponent();

            ComponentList.Add(inputComponent);
            ComponentList.Add(physicsComponent);
            ComponentList.Add(graphicsComponent);

            Debug.Log("Game Components Initialization Finish...");
            Debug.Log("Please enter LeftArrow or RightArrow button to play...");
        }

        public void Update()
        {
            if (ComponentList == null)
            {
                return;
            }
            componentAmount = ComponentList.Count;
            for (int i = 0; i < componentAmount; i++)
            {
                ComponentList[i].Update(this);
            }
        }
    };

    /// <summary>
    /// 输入组件
    /// </summary>
    class PlayerInputComponent : InputComponent
    {
        public void Update(RPGGame game)
        {
            if (Input.GetKeyDown(KeyCode.LeftArrow))
            {
                game.velocity -= WALK_ACCELERATION;
                Debug.Log(" game velocity= " + game.velocity.ToString());
            }
            if (Input.GetKeyDown(KeyCode.RightArrow))
            {
                game.velocity += WALK_ACCELERATION;
                Debug.Log(" game velocity= " + game.velocity.ToString());
            }
        }

        private int WALK_ACCELERATION = 1;
    }


    /// <summary>
    /// 物理组件
    /// </summary>
    class PlayerPhysicsComponent : PhysicsComponent
    {
        public void Update(RPGGame game)
        {
            game.x += game.velocity;

            //Handle Physics...

        }
    }


    /// <summary>
    /// 图形组件
    /// </summary>
    class PlayerGraphicsComponent : GraphicsComponent
    {
        public void Update(RPGGame game)
        {
            //Handle Graphics...

            if (game == null || game.graphicsX == null)
            {
                return;
            }

            Sprite sprite = spriteStand;
            if (game.velocity < 0)
            {
                sprite = spriteWalkLeft;
            }
            else if (game.velocity > 0)
            {
                sprite = spriteWalkRight;
            }
            game.graphicsX.Draw(sprite, game.x, game.y);


        }

        private Sprite spriteStand;
        private Sprite spriteWalkLeft;
        private Sprite spriteWalkRight;
    }

    #region interfaces

    interface BaseComponent
    {
        void Update(RPGGame game);
    }

    interface GraphicsComponent : BaseComponent
    {
        new void Update(RPGGame game);
    }

    interface PhysicsComponent : BaseComponent
    {
        new void Update(RPGGame game);
    }

    interface InputComponent : BaseComponent
    {
        new void Update(RPGGame game);
    }

    #endregion

    #region 辅助类

    class WorldX
    {

    }

    class GraphicsX
    {
        public void Draw(Sprite sprite, float x, float y) { }
    }
}

# endregion


```

`Assets/Game Programming Patterns/Component Pattern/Example/ComponentPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3356a2598f3175246a66f7e309a3d1bc
timeCreated: 1514208474
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Component Pattern/Example/ComponentPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: b66814b3f07e2f84f9180edc43db32ff
timeCreated: 1514208490
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Component Pattern/README.md`:

```md
# Component Pattern 组件模式

## Intent 意义

Allow a single entity to span multiple domains without coupling the domains to each other
<br>
允许一个单一的实体跨越多个不同域而不会导致耦合。



## The Pattern 模式描述

A single entity spans multiple domains. To keep the domains isolated, the code for each is placed in its own component class. The entity is reduced to a simple container of components.
<br>
单一实体横跨了多个域。为了能够保持域之间相互隔离，每个域的代码都独立地放在自己的组件类中。实体本身则可以简化为这些组件的容器。




## When to Use It 使用情形

Components are most commonly found within the core class that defines the entities in a game, but they may be useful in other places as well. This pattern can be put to good use when any of these are true:

- You have a class that touches multiple domains which you want to keep decoupled from each other.
- A class is getting massive and hard to work with.
- You want to be able to define a variety of objects that share different capabilities, but using inheritance doesn’t let you pick the parts you want to reuse precisely enough.

组件最常见于游戏中定义实体的核心类，但是它们也能够用在别的地方。当如下条件成立时，组件模式就能够发挥它的作用：
- 你有一个涉及多个域的类，但是你希望这些域保持相互解耦。
- 一个类越来越庞大，越来越难以开发。
- 你希望定义许多共享不同能力的对象，但采用继承的办法却无法令你精确地重用代码。


## Tips

Unity引擎的主要设计正是围绕组件模型来进行的。

```

`Assets/Game Programming Patterns/Component Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 3231983e871f7b647b3b0eb342583fd4
timeCreated: 1514219953
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Data Locality Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 00d2e8c349c01bb40b4fee30d6f9f3f8
folderAsset: yes
timeCreated: 1515415908
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Data Locality Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: 48fa2db59dce00c4081fd03d9767a4eb
folderAsset: yes
timeCreated: 1515417113
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Data Locality Pattern/Example/DataLocalityPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DataLocalityPatternExample.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;

namespace DataLocalityPatternExample
{
    public class DataLocalityPatternExample : MonoBehaviour
    {
        GameX gameProject;

        void Start()
        {
            gameProject = new GameX();
            gameProject.Start();
        }

        void Update()
        {
            if (gameProject!=null)
            {
                gameProject.Update();
            }
        }
    }

    /// <summary>
    /// 游戏应用程序类
    /// </summary>
    public class GameX
    {
        const int MAX_ENTITIES = 10000;

        int numEntities;

        /// <summary>
        /// 基于大数组存储保证数据连续性
        /// </summary>
        AIComponent[] aiComponents = new AIComponent[MAX_ENTITIES];
        PhysicsComponent[] physicsComponents = new PhysicsComponent[MAX_ENTITIES];
        RenderComponent[] renderComponents = new RenderComponent[MAX_ENTITIES];

        public void Start()
        {
            numEntities = 10;
            for (int i = 0; i < numEntities; i++)
            {
                aiComponents[i] = new AIComponent();
                physicsComponents[i] = new PhysicsComponent();
                renderComponents[i] = new RenderComponent();
            }

        }


        public void Update()
        {
            // Process AI.
            for (int i = 0; i < numEntities; i++)
            {
                if (aiComponents!=null && aiComponents.Length>i && aiComponents[i]!= null)
                {
                    aiComponents[i].Update();
                }
            }

            // Update physics.
            for (int i = 0; i < numEntities; i++)
            {
                if (physicsComponents != null && physicsComponents.Length > i && physicsComponents[i] != null)
                {
                    physicsComponents[i].Update();
                }

            }

            // Draw to screen.
            for (int i = 0; i < numEntities; i++)
            {
                if (renderComponents != null && renderComponents.Length > i && renderComponents[i] != null)
                {
                    renderComponents[i].Render();
                }
            }
        }



        /// <summary>
        /// 组件接口
        /// </summary>
        public interface IComponent
        {
            void Update();
        }

        /// <summary>
        /// AI组件
        /// </summary>
        public class AIComponent : IComponent
        {
            public void Update()
            {
                Debug.Log("AIComponent Update!");
            }
        }

        /// <summary>
        /// 物理组件
        /// </summary>
        public class PhysicsComponent : IComponent
        {
            public void Update()
            {
                Debug.Log("PhysicsComponent Update!");
            }
        }

        /// <summary>
        /// 渲染组件
        /// </summary>
        public class RenderComponent : IComponent
        {
            public void Update()
            {
                Debug.Log("RenderComponent Update!");
            }


            public void Render()
            {
                Debug.Log("RenderComponent Render!");
            }
        }

    }
    }

```

`Assets/Game Programming Patterns/Data Locality Pattern/Example/DataLocalityPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3d7c6012c0976734fbaa31199b3e2bdd
timeCreated: 1515415933
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Data Locality Pattern/Example/DataLocalityPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: f8e30d626da11e541a7e36804dc2d1c7
timeCreated: 1515415946
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Data Locality Pattern/README.md`:

```md
# Data Locality Pattern 数据局部性模式

## Intent 意义

Accelerate memory access by arranging data to take advantage of CPU caching.
<br>
通过合理组织数据利用CPU的缓存机制来加快内存访问速度。



## The Pattern 模式描述

Modern CPUs have caches to speed up memory access. These can access memory adjacent to recently accessed memory much quicker. Take advantage of that to improve performance by increasing data locality — keeping data in contiguous memory in the order that you process it.

现代的CPU有缓存来加速内存读取，其可以更快地读取最近访问过的内存毗邻的内存。基于这一点，我们通过保证处理的数据排列在连续内存上，以提高内存局部性，从而提高性能。

为了保证数据局部性，就要避免的缓存不命中。也许你需要牺牲一些宝贵的抽象。你越围绕数据局部性设计程序，就越放弃继承、接口和它们带来的好处。没有银弹，只有权衡。




## When to Use It 使用情形

使用数据局部性的第一准则是在遇到性能问题时使用。不要将其应用在代码库不经常使用的角落上。 优化代码后其结果往往更加复杂，更加缺乏灵活性。

就本模式而言，还得确认你的性能问题确实由缓存不命中而引发的。如果代码是因为其他原因而缓慢，这个模式自然就不会有帮助。

简单的性能评估方法是手动添加指令，用计时器检查代码中两点间消耗的时间。而为了找到糟糕的缓存使用情况，知道缓存不命中有多少发生，又是在哪里发生的，则需要使用更加复杂的工具—— profilers。

组件模式是为缓存优化的最常见例子。而任何需要接触很多数据的关键代码，考虑数据局部性都是很重要的。



```

`Assets/Game Programming Patterns/Data Locality Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: aa4979980c1232f409ecdd0e8ef9aff6
timeCreated: 1515421289
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Dirty Flag Pattern.meta`:

```meta
fileFormatVersion: 2
guid: a2a3cbd178776894dba2d9900e407975
folderAsset: yes
timeCreated: 1515511351
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Dirty Flag Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: d3952ccb543785e458321efb26f1d8ee
folderAsset: yes
timeCreated: 1515511384
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Dirty Flag Pattern/Example/DirtyFlagPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DirtyFlagPatternExample.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;

namespace DirtyFlagPatternExample
{
    public class DirtyFlagPatternExample : MonoBehaviour
    {
        GraphNode graphNode = new GraphNode(new MeshEX());
        TransformEX parentWorldTransform = new TransformEX();
        void Start()
        {
            //初始化子节点
            for (int i = 0; i < graphNode.NumChildren; i++)
            {
                graphNode.Children[i] = new GraphNode(new MeshEX());
            }
            //进行渲染
            graphNode.render(TransformEX.origin, true);
        }

        void Update()
        {
            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                //修改位置,触发脏标记
                TransformEX newLocalTransform = new TransformEX();
                newLocalTransform.Position = new Vector3(2, 2, 2);
                graphNode.setTransform(newLocalTransform);

                //再次进行渲染
                graphNode.render(parentWorldTransform, true);
            }
        }
    }

    /// <summary>
    /// 网格类
    /// </summary>
    class MeshEX
    {

    }

    /// <summary>
    /// 位置类
    /// </summary>
    class TransformEX
    {
        private Vector3 position = new Vector3(1, 1, 1);
        public Vector3 Position
        {
            get { return position; }
            set { position = value; }
        }

        public static TransformEX origin = new TransformEX();

        public TransformEX combine(TransformEX other)
        {

            TransformEX trans = new TransformEX();
            if (other != null)
            {
                trans.Position = Position + other.Position;
            }
            return trans;
        }

    };

    /// <summary>
    /// 场景图节点
    /// </summary>
    class GraphNode
    {
        //脏标记 dirty flag
        private bool dirty_;

        private MeshEX mesh_;
        private TransformEX local_;
        private TransformEX world_ = new TransformEX();
        const int MAX_CHILDREN = 100;

        /// <summary>
        /// 子节点
        /// </summary>
        private GraphNode[] children_ = new GraphNode[MAX_CHILDREN];
        public GraphNode[] Children
        {
            get { return children_; }
            set { children_ = value; }
        }

        /// <summary>
        /// 子节点
        /// </summary>
        private int numChildren_ = 88;
        public int NumChildren
        {
            get { return numChildren_; }
            set { numChildren_ = value; }
        }

        public GraphNode(MeshEX mesh)
        {
            mesh_ = mesh;
            local_ = TransformEX.origin;
            dirty_ = true;

        }

        /// <summary>
        /// 设置局部坐标位置
        /// </summary>
        public void setTransform(TransformEX local)
        {
            local_ = local;
            dirty_ = true;
        }

        /// <summary>
        /// 渲染
        /// </summary>
        public void render(TransformEX parentWorld, bool dirty)
        {
            //如果父链中它之上的任何物体标记为脏，则它将被置为true
            dirty |= dirty_;

            //而当节点没有改动时（dirty=false），跳过combine的过程，否则，表示此链为脏，进行combine
            if (dirty)
            {
                Debug.Log("this node is dirty,combine it!");
                world_ = local_.combine(parentWorld);
                dirty_ = false;
            }

            //渲染mesh
            if (mesh_ != null)
            {
                renderMesh(mesh_, world_);
            }

            for (int i = 0; i < numChildren_; i++)
            {
                if (children_[i] != null)
                {
                    children_[i].render(world_, dirty);
                }

            }
        }

        /// <summary>
        /// 网格的渲染
        /// </summary>
        private void renderMesh(MeshEX mesh_, TransformEX world_)
        {
            Debug.Log("renderMesh!");
        }
    }

}


```

`Assets/Game Programming Patterns/Dirty Flag Pattern/Example/DirtyFlagPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: f110166623088b2489a0119210f8316b
timeCreated: 1515511388
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Dirty Flag Pattern/Example/DirtyFlagPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: 6daed0e86ab3a2941b8f06a94f7d8375
timeCreated: 1515511406
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Dirty Flag Pattern/README.md`:

```md
# Dirty Flag Pattern 脏标记模式

## Intent 意义

Avoid unnecessary work by deferring it until the result is needed.
<br>
将工作推迟到必要时进行以避免不必要的工作。



## The Pattern 模式描述

A set of primary data changes over time. A set of derived data is determined from this using some expensive process. A “dirty” flag tracks when the derived data is out of sync with the primary data. It is set when the primary data changes. If the flag is set when the derived data is needed, then it is reprocessed and the flag is cleared. Otherwise, the previous cached derived data is used.

一组原始数据随时间变化。一组颜色数据经过一些代价昂贵的操作由这些数据确定。一个脏标记跟踪这个衍生数据是否和原始数据同步。它在原始数据改变时被设置。如果它被设置了，那么当需要衍生数据时，它们就会被重新计算并且标记被清除。否则就使用缓存的数据。





## When to Use It 使用情形

就像其他优化模式一样，此模式会增加代码复杂度。只在有足够大的性能问题时，再考虑使用这一模式。

脏标记在这两种情况下适用：
- 当前任务有昂贵的计算开销
- 当前任务有昂贵的同步开销。
若满足这两者之一，也就是两者从原始数据转换到目标数据会消耗很多时间，都可以考虑使用脏标记模式来节省开销。

若原始数据的变化速度远高于目标数据的使用速度，此时数据会因为随后的修改而失效，此时就不适合使用脏标记模式。


```

`Assets/Game Programming Patterns/Dirty Flag Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 2e570f0b349a0e648ab8b1ee17317b0c
timeCreated: 1515567114
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 212b83376be1df349a8b55d1c80689c7
folderAsset: yes
timeCreated: 1514299131
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: 3d7476d2420e3804c8eb5fbfedd10521
folderAsset: yes
timeCreated: 1514299195
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueue.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventQueue.cs
// Reference :https://github.com/GandhiGames/message_queue
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace EventQueuePatternExample
{

    public class EventQueue : MonoBehaviour
    {

        #region 事件队列相关

        /// <summary>
        /// 队列中待投递的事件队列
        /// </summary>
        private List<IMessageEvent> pendingEventQueueList = new List<IMessageEvent>();

        /// <summary>
        /// 事件投递函数
        /// </summary>
        void OnAddEventToQueue(IMessageEvent e)
        {
            pendingEventQueueList.Add(e);

            if (logToConsole)
            {
                Debug.Log("Message Recieved [" + System.DateTime.Now + "]: " + e.message.ToString());
            }
        }

        void Update()
        {
            for (int i = pendingEventQueueList.Count - 1; i >= 0; i--)
            {
                if (Time.time > pendingEventQueueList[i].displayTime)
                    pendingEventQueueList.RemoveAt(i);
            }
        }

        void Start()
        {
            if (pendingEventQueueList.Count > 0)
            {
                pendingEventQueueList.Clear();
            }

            EventQueueManager.Instance.AddListener<MessageEvent>(OnAddEventToQueue);
        }

        void OnDisable()
        {
            EventQueueManager.Instance.RemoveListener<MessageEvent>(OnAddEventToQueue);
        }

        #endregion



        #region UI显示相关

        void OnEnable()
        {
            SetUIStyle();
        }


        void SetUIStyle()
        {
            LOW_PRIORTY.normal.textColor = lowPriorityColour;
            LOW_PRIORTY.fontStyle = lowPriorityStyle;

            NORMAL_PRIORITY.normal.textColor = normalPriorityColour;
            NORMAL_PRIORITY.fontStyle = normalPriorityStyle;

            HIGH_PRIORITY.normal.textColor = highPriorityColour;
            HIGH_PRIORITY.fontStyle = highPriorityStyle;
        }

        public bool logToConsole = true;
        public bool prependDateTime = false;

        [Header("Message Colours")]
        public Color
            highPriorityColour = Color.red;
        public Color normalPriorityColour = Color.black;
        public Color lowPriorityColour = Color.white;

        [Header("Message Font Style")]
        public FontStyle
            highPriorityStyle = FontStyle.Bold;
        public FontStyle normalPriorityStyle = FontStyle.Normal;
        public FontStyle lowPriorityStyle = FontStyle.Normal;

        [Header("Message Location")]
        public Vector2
            queueLocation = new Vector2(25, 25);
        public Vector2 messageSize = new Vector2(200, 15);

        private static readonly GUIStyle LOW_PRIORTY = new GUIStyle(), NORMAL_PRIORITY = new GUIStyle(), HIGH_PRIORITY = new GUIStyle();


        void OnGUI()
        {
            float yPos = queueLocation.y;

            foreach (var m in pendingEventQueueList)
            {

                GUIStyle style = GetMessageStyle(m);

                string message = (prependDateTime) ? "[" + m.timeRaised + "]: " + m.message.ToString() : m.message.ToString();

                GUI.Label(new Rect(queueLocation.x, yPos, messageSize.x, messageSize.y), message, style);

                yPos += messageSize.y;
            }
        }

        GUIStyle GetMessageStyle(IMessageEvent e)
        {
            switch (e.priority)
            {
                case MessagePriority.Low:
                    return LOW_PRIORTY;
                case MessagePriority.Medium:
                    return NORMAL_PRIORITY;
                default:
                    return HIGH_PRIORITY;
            }

        }

        #endregion

    }
}

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueue.cs.meta`:

```meta
fileFormatVersion: 2
guid: 0b4ff23a1c309c641800b9690e4222fa
timeCreated: 1514300612
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueueManager.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventQueueManager.cs
// Reference :https://github.com/GandhiGames/message_queue
// http://gandhigames.co.uk/message-queue/
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;
using System.Collections.Generic;

namespace EventQueuePatternExample
{

    /// <summary>
    /// 事件Manager
    /// </summary>
    public class EventQueueManager
    {
        private static EventQueueManager _instance;
        public static EventQueueManager Instance
        {
            get
            {
                if (_instance == null)
                {
                    _instance = new EventQueueManager();
                }
                return _instance;
            }
        }

        //泛型代理
        public delegate void EventDelegateX<T>(T e) where T : GameEvent;
        //普通代理
        private delegate void EventDelegateX(GameEvent e);

        private Dictionary<System.Type, EventDelegateX> DelegatesMap = new Dictionary<System.Type, EventDelegateX>();
        private Dictionary<System.Delegate, EventDelegateX> DelegateLookupMap = new Dictionary<System.Delegate, EventDelegateX>();

        /// <summary>
        /// 添加Listener
        /// </summary>
        public void AddListener<T>(EventDelegateX<T> del) where T : GameEvent
        {

            EventDelegateX internalDelegate = (e) => { del((T)e); };

            //已存在,返回
            if (DelegateLookupMap.ContainsKey(del) && DelegateLookupMap[del] == internalDelegate)
            {
                return;
            }

            //加入delegateLookup中
            DelegateLookupMap[del] = internalDelegate;

            //加入delegates中
            EventDelegateX tempDel;
            if (DelegatesMap.TryGetValue(typeof(T), out tempDel))
            {
                DelegatesMap[typeof(T)] = tempDel += internalDelegate;
            }
            else {
                DelegatesMap[typeof(T)] = internalDelegate;
            }
        }

        /// <summary>
        /// 删除Listener
        /// </summary>
        public void RemoveListener<T>(EventDelegateX<T> del) where T : GameEvent
        {
            EventDelegateX internalDelegate;
            if (DelegateLookupMap.TryGetValue(del, out internalDelegate))
            {
                EventDelegateX tempDel;
                if (DelegatesMap.TryGetValue(typeof(T), out tempDel))
                {
                    tempDel -= internalDelegate;
                    if (tempDel == null)
                    {
                        DelegatesMap.Remove(typeof(T));
                    }
                    else {
                        DelegatesMap[typeof(T)] = tempDel;
                    }
                }

                DelegateLookupMap.Remove(del);
            }
        }
        /// <summary>
        /// 在队列中加入事件
        /// </summary>
        public void AddEventToQueue(GameEvent e)
        {
            EventDelegateX del;
            if (DelegatesMap.TryGetValue(e.GetType(), out del))
            {
                del.Invoke(e);
            }
        }

    }

    /// <summary>
    /// 事件优先级枚举
    /// </summary>
    public enum MessagePriority
    {
        Low,
        Medium,
        High
    }

    /// <summary>
    /// 事件接口
    /// </summary>
    public interface IMessageEvent
    {
        DateTime timeRaised { get; }
        float displayTime { get; }
        MessagePriority priority { get; }
        object message { get; }
    }

    /// <summary>
    /// 事件实体类
    /// </summary>
    public class MessageEvent : GameEvent, IMessageEvent
    {
        public DateTime timeRaised { private set; get; }
        public MessagePriority priority { private set; get; }
        public float displayTime { private set; get; }
        public object message { private set; get; }

        public MessageEvent(object message, float displayTime, MessagePriority priority)
        {
            this.message = message;
            this.displayTime = displayTime;
            this.priority = priority;
            timeRaised = DateTime.Now;
        }
    }


    /// <summary>
    /// 事件抽象类
    /// </summary>
    public abstract class GameEvent
    {

    }

}

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueueManager.cs.meta`:

```meta
fileFormatVersion: 2
guid: 923841540bb38b24eae39d57e4e3c86f
timeCreated: 1514305150
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueuePatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventQueuePatternExample.cs
// Reference :https://github.com/GandhiGames/message_queue
// http://gandhigames.co.uk/message-queue/
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;
using System.Collections.Generic;

namespace EventQueuePatternExample
{
    public class EventQueuePatternExample : MonoBehaviour
    {
        private Dictionary<MessagePriority, string> priorityLookup = new Dictionary<MessagePriority, string>();

        void Start()
        {
            //添加优先级
            priorityLookup.Add(MessagePriority.Low, "Low");
            priorityLookup.Add(MessagePriority.Medium, "Medium");
            priorityLookup.Add(MessagePriority.High, "High");
        }

        void Update()
        {
            //按钮响应
            if (Input.GetMouseButtonDown(0))
            {
                //随机选取优先级
                MessagePriority priority = MessagePriority.High;
                float random = UnityEngine.Random.value;
                if (random < 0.333f)
                {
                    priority = MessagePriority.Low;
                }
                else if (random < 0.666f)
                {
                    priority = MessagePriority.Medium;
                }

                //随机选取显示时间
                float showTime = UnityEngine.Random.Range(1f, 5f);

                //加入事件到队列
                EventQueueManager.Instance.AddEventToQueue(new MessageEvent(priorityLookup[priority] + " priority message shown at "
                    + System.DateTime.Now + " for " + showTime + " seconds", Time.time + showTime, priority));
            }
        }
    }
}
```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueuePatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 398a4dee7c201ff4f94565cdc03a5168
timeCreated: 1514299230
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example/EventQueuePatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: 9163d09d398a8564c945920e86df6847
timeCreated: 1514300410
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example2.meta`:

```meta
fileFormatVersion: 2
guid: 494ecf48a7244604abf4fdd6535d3303
folderAsset: yes
timeCreated: 1514339630
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example2/EventQueuePatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventQueuePatternExample2.cs
// reference ：
// [1] https://www.cnblogs.com/SeaSwallow/p/6543957.html
// [2] Event System Dispatcher :https://www.assetstore.unity3d.com/en/#!/content/12715
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using System;

namespace EventQueuePatternExample2
{
    public class EventQueuePatternExample2 : MonoBehaviour
    {
        // Use this for initialization
        void Start()
        {
            //添加对"START"信息标识的监听，收到信息后触发OnReceiveMessageHandler处理。
            MessageDispatcher.AddListener("START", OnReceiveMessageHandler);
            //添加对"START"与指定了"Filter"过滤标识信息的监听，收到拥有"START"信息标识和"Filter"过滤标识信息的发送后触发OnReceiveMessageHandler处理。
            MessageDispatcher.AddListener("START", OnReceiveMessageHandler, "Filter");
            //添加对"Custom"信息标识的监听，收到信息后触发OnReceiveMessageHandler处理。
            MessageDispatcher.AddListener("Custom", OnReceiveCustomMessageHandler);

            Debug.Log("初始化成功，请按键盘上1，2，3数字键进行消息发送。");
        }

        // Update is called once per frame
        void Update()
        {

            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                Message sMessage = new Message();
                sMessage.Type = "START";
                sMessage.Filter = "Filter";
                sMessage.Data = "你好,我是有过滤标识的信息";
                //MessageDispatcher发送一条信息出去，信息的标识为"START"，过滤标识为"Filter"。
                MessageDispatcher.SendMessage(sMessage);
            }

            if (Input.GetKeyDown(KeyCode.Alpha2))
            {
                Message sMessage = new Message();
                sMessage.Type = "START";
                sMessage.Data = "你好~~~我是一条延迟发送的消息";
                //延迟1秒后才发送
                sMessage.Delay = 1f;
                //MessageDispatcher发送一条信息出去，信息的标识为"START"。
                MessageDispatcher.SendMessage(sMessage);
            }

            if (Input.GetKeyDown(KeyCode.Alpha3))
            {
                MyCustomMessage mcm = new MyCustomMessage();
                mcm.MyCustomString = "我是自定义消息的额外数据";
                mcm.Type = "Custom";
                MessageDispatcher.SendMessage(mcm);
            }
        }

        /// <summary>
        /// 消息接收者
        /// </summary>
        /// <param name="sMessage"></param>
        private void OnReceiveMessageHandler(IMessage sMessage)
        {
            Debug.Log(sMessage.Data.ToString());
        }


        private void OnReceiveCustomMessageHandler(IMessage sMessage)
        {
            Debug.Log((sMessage as MyCustomMessage).MyCustomString);
        }

    }

    /// <summary>
    /// 自定义的消息
    /// </summary>
    public class MyCustomMessage : Message
    {
        public string MyCustomString;
    }


    /// <summary>
    /// Message类相关信息的接口，就好像一条短信一样或者一个通知一样。
    /// Message由MessageDispatcher类发送到监听对应信息者的对象中去。
    /// 对象可以通过MessageDispatcher类传递一个命令或者一些数据给另一个或多个监听对应信息的类。
    /// 可通过继承此接口自定义自己传递的数据信息
    /// </summary>
    public interface IMessage
    {
        /// <summary>
        /// 信息的标识，可以是任何值
        /// </summary>
        string Type { get; set; }

        /// <summary>
        /// 监听者的信息过滤标识
        /// </summary>
        string Filter { get; set; }

        /// <summary>
        /// 信息发送的延迟时间，单位为秒
        /// </summary>
        float Delay { get; set; }

        /// <summary>
        /// 信息的核心数据
        /// </summary>
        object Data { get; set; }

        /// <summary>
        /// 定义信息是否已发送
        /// </summary>
        bool IsSent { get; set; }

        /// <summary>
        /// 重置这个信息实例
        /// </summary>
        void Reset();
    }



    /// <summary>
    /// 消息的基类
    /// </summary>
    public class Message : IMessage
    {
        protected object mData = null;
        public object Data
        {
            get { return mData; }
            set { mData = value; }
        }

        protected float mDelay = 0;
        public float Delay
        {
            get { return mDelay; }
            set { mDelay = value; }
        }

        protected bool mIsSent = false;
        public bool IsSent
        {
            get { return mIsSent; }
            set { mIsSent = value; }
        }

        protected string mType = String.Empty;
        public string Type
        {
            get { return mType; }
            set { mType = value; }
        }

        protected string mFilter = String.Empty;
        public string Filter
        {
            get { return mFilter; }
            set { mFilter = value; }
        }

        public void Reset()
        {
            mType = String.Empty;
            mData = null;
            mIsSent = false;
            mFilter = string.Empty;
            mDelay = 0.0f;
        }
    }







    /// <summary>
    /// 用来给监听信息者收到信息后执行的处理。
    /// </summary>
    /// <param name="rMessage"></param>
    public delegate void MessageHandler(IMessage rMessage);


    /// <summary>
    /// 消息分发管理管理类
    /// </summary>
    public class MessageDispatcher
    {
        /// <summary>
        /// 创建MessageDispatcher在Unity的存根，专门处理延迟信息的发送
        /// </summary>
        private static MessageDispatcherStub sStub = (new GameObject("MessageDispatcherStub")).AddComponent<MessageDispatcherStub>();

        /// <summary>
        /// 当某些信息没有监听的时候，信息发送的处理由该委托处理。
        /// </summary>
        public static MessageHandler MessageNotHandled = null;

        /// <summary>
        /// 存储标识着延迟发送的信息
        /// </summary>
        private static List<IMessage> mMessages = new List<IMessage>();

        /// <summary>
        /// 主要存储信息对应的处理
        /// 第一个string是信息的标识，第二个string是监听过滤信息的标识，第三个是信息发送成功的处理
        /// </summary>
        private static Dictionary<string, Dictionary<string, MessageHandler>> mMessageHandlers = new Dictionary<string, Dictionary<string, MessageHandler>>();

        /// <summary>
        /// 清除所有延迟信息的列表
        /// </summary>
        public static void ClearMessages()
        {
            mMessages.Clear();
        }

        /// <summary>
        /// 添加一个对信息的监听
        /// </summary>
        /// <param name="rMessageType">所监听信息的标识</param>
        /// <param name="rFilter">所监听信息过滤的标识</param>
        /// <param name="rHandler">所监听信息后的处理，即信息由派送者发出去后的处理</param>
        public static void AddListener(string rMessageType, MessageHandler rHandler, string rFilter = "")
        {
            Dictionary<string, MessageHandler> lRecipientDictionary = null;

            //查找信息对应处理的列表里是否包含了这个信息，若包含取出他的对应的过滤和处理。
            if (mMessageHandlers.ContainsKey(rMessageType))
            {
                lRecipientDictionary = mMessageHandlers[rMessageType];
            }
            //如果没有包含这个信息处理的标识则创建他
            else
            {
                lRecipientDictionary = new Dictionary<string, MessageHandler>();
                mMessageHandlers.Add(rMessageType, lRecipientDictionary);
            }

            //检查信息过滤集合是否包含了过滤信息的标识,""代表没有过滤标识
            if (!lRecipientDictionary.ContainsKey(rFilter))
            {
                lRecipientDictionary.Add(rFilter, null);
            }

            //因为是引用，所以会自动更新到mMessageHandlers里。
            lRecipientDictionary[rFilter] += rHandler;
        }

        /// <summary>
        /// 发送信息出去
        /// </summary>
        /// <param name="rMessage"></param>
        public static void SendMessage(IMessage rMessage)
        {
            //是否丢失接收信息的监听者，默认为true
            bool lReportMissingRecipient = true;

            //如果信息有延迟时间则把该信息加入到延迟信息列表中等待触发。
            if (rMessage.Delay > 0)
            {
                if (!mMessages.Contains(rMessage))
                {
                    mMessages.Add(rMessage);
                }

                //避免触发下面的丢失监听者代码块
                lReportMissingRecipient = false;
            }
            //没有延迟的话直接看看信息相应处理列表是否包含这条信息
            else if (mMessageHandlers.ContainsKey(rMessage.Type))
            {
                //得到相应信息的处理
                Dictionary<string, MessageHandler> lHandlers = mMessageHandlers[rMessage.Type];

                //遍历相信信息的过滤的标识
                foreach (string lFilter in lHandlers.Keys)
                {
                    if (lHandlers[lFilter] == null)
                    {
                        continue;
                    }

                    if (lFilter.Equals(rMessage.Filter))
                    {
                        lHandlers[lFilter](rMessage);
                        rMessage.IsSent = true;
                        lReportMissingRecipient = false;
                    }
                }
            }

            if (lReportMissingRecipient)
            {
                if (MessageNotHandled == null)
                {
                    Debug.LogWarning(string.Format("MessageDispatcher无法识别Message.Type：{0} 或者是信息过滤指定的Message.Filter", rMessage.Type, rMessage.Filter));
                }
                else
                {
                    MessageNotHandled(rMessage);
                }
            }
        }

        /// <summary>
        /// 在每帧中负责处理延迟信息列表的发送
        /// </summary>
        public static void Update()
        {
            //处理延迟信息列表的信息发送
            for (int i = 0; i < mMessages.Count; i++)
            {
                IMessage lMessage = mMessages[i];

                // 减少延迟时间
                lMessage.Delay -= Time.deltaTime;
                if (lMessage.Delay < 0) { lMessage.Delay = 0; }

                // 如果到时间了就立即发送
                if (!lMessage.IsSent && lMessage.Delay == 0)
                {
                    SendMessage(lMessage);
                    mMessages.RemoveAt(i);
                }
            }
        }
    }

    public sealed class MessageDispatcherStub : MonoBehaviour
    {
        void Awake()
        {
            DontDestroyOnLoad(gameObject);
        }

        void Update()
        {
            MessageDispatcher.Update();
        }

        public void OnDisable()
        {
            MessageDispatcher.ClearMessages();
        }
    }



}


```

`Assets/Game Programming Patterns/Event Queue Pattern/Example2/EventQueuePatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3a55b07a83a9c904fa7984f4f7ef99eb
timeCreated: 1514341240
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example2/EventQueuePatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: a446f67adebaab8408b8101a22b3bf2c
timeCreated: 1514361599
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3.meta`:

```meta
fileFormatVersion: 2
guid: 791ec6e9d145e194f936a2dcd3189756
folderAsset: yes
timeCreated: 1514366400
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/EventQueuePatternExample3.unity.meta`:

```meta
fileFormatVersion: 2
guid: 6132f079bb6127742bc4a5dc3177cf7a
timeCreated: 1514368275
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts.meta`:

```meta
fileFormatVersion: 2
guid: acda30b1899880d4ea68188994b7b9e8
folderAsset: yes
timeCreated: 1514381026
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventManger.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventManger.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace EventQueuePatternExample3
{
    /// <summary>
    /// 消息管理类-单例
    /// </summary>
    public class EventManger
    {
        private static EventManger _Instance;
        public static EventManger Instance
        {
            get
            {
                if (_Instance == null)
                {
                    _Instance = new EventManger();
                }
                return _Instance;
            }
        }

        public delegate void EventHandler(BaseEventMsg Msg);

        // 消息ID,代理存储字典Map - <(int)EventType,EventHandler代理>
        private Dictionary<int, EventHandler> m_EventHandlerMap = new Dictionary<int, EventHandler>();

        /// <summary>
        /// 注册事件
        /// </summary>
        public void RegisterEvent(EventType eventType, EventHandler eventHandler)
        {

            if (m_EventHandlerMap == null)
            {
                m_EventHandlerMap = new Dictionary<int, EventHandler>();
            }
            int eventTypeID = (int)eventType;
            if (m_EventHandlerMap.ContainsKey(eventTypeID))
            {
                m_EventHandlerMap[eventTypeID] += eventHandler;
            }
            else
            {
                m_EventHandlerMap.Add(eventTypeID, eventHandler);
            }

        }

        /// <summary>
        /// 反注册事件-反注册该EventType下所有的注册消息
        /// </summary>
        public void UnRegisterEvent(EventType eventType)
        {
            int eventTypeID = (int)eventType;

            if (m_EventHandlerMap == null)
            {
                return;
            }

            if (m_EventHandlerMap.ContainsKey(eventTypeID))
            {
                m_EventHandlerMap.Remove(eventTypeID);
            }
        }

        /// <summary>
        /// 反注册事件-反注册该EventType下指定的EventHandler
        /// </summary>
        public void UnRegisterEvent(EventType eventType, EventHandler eventHandler)
        {
            int eventTypeID = (int)eventType;

            if (m_EventHandlerMap == null)
            {
                return;
            }
            //删除eventHandler指定的消息响应
            if (m_EventHandlerMap.ContainsKey(eventTypeID))
            {
                m_EventHandlerMap[eventTypeID] -= eventHandler;
            }
        }



        /// <summary>
        /// 从消息ID,代理存储字典Map中找到对应的消息ID绑定的事件消息
        /// </summary>
        public void SendEvent(EventType eventType, BaseEventMsg Msg)
        {
            int eventTypeID = (int)eventType;

            if (m_EventHandlerMap == null)
            {
                return;
            }

            if (m_EventHandlerMap.ContainsKey(eventTypeID))
            {
                if (m_EventHandlerMap[eventTypeID] != null)
                {
                    m_EventHandlerMap[eventTypeID](Msg);
                }
            }
        }

        /// <summary>
        /// 发送事件
        /// </summary>
        public void SendEvent(EventType eventType, params object[] inParams)
        {
            BaseEventMsg Msg = new BaseEventMsg();
            if (Msg != null)
            {
                Msg.SetEventMsg(eventType, inParams);
                SendEvent(eventType, Msg);
            }
        }
    }



    /// <summary>
    /// 消息内容
    /// </summary>
    public class BaseEventMsg
    {
        public EventType MsgType;
        public object[] Params = null;

        public BaseEventMsg()
        {

        }

        public BaseEventMsg(EventType inMsgType, params object[] InParams)
        {
            MsgType = inMsgType;
            Params = InParams;
        }

        public void SetEventMsg(EventType inMsgType, params object[] InParams)
        {
            MsgType = inMsgType;
            Params = InParams;
        }

    }

}

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventManger.cs.meta`:

```meta
fileFormatVersion: 2
guid: 1a4429c5ba895f745ae2c0a162db6dd5
timeCreated: 1514377722
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventQueuePatternExample3.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventQueuePatternExample3.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;
using System.Collections.Generic;

namespace EventQueuePatternExample3
{


    public class EventQueuePatternExample3 : MonoBehaviour
    {
        Receiver1 receiver1 = new Receiver1();
        Receiver2 receiver2 = new Receiver2();

        void Start()
        {

        }

        void Update()
        {
            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                //EventManger.Instance.SendEvent(EventType.UI_Event1, 1);

                EventManger.Instance.SendEvent(EventType.UI_Event1, "666");

                EventManger.Instance.SendEvent(EventType.UI_Event1, new GameObject());
            }

            if (Input.GetKeyDown(KeyCode.Alpha2))
            {
                EventManger.Instance.SendEvent(EventType.UI_Event2, new GameObject(), new GameObject());
            }


            if (Input.GetKeyDown(KeyCode.Alpha3))
            {
                EventManger.Instance.RegisterEvent(EventType.UI_Event3, receiver1.OnEventProcess3);
                EventManger.Instance.RegisterEvent(EventType.UI_Event3, receiver1.OnEventProcess4);
            }
            if (Input.GetKeyDown(KeyCode.Keypad3))
            {
                EventManger.Instance.SendEvent(EventType.UI_Event3, 666);
            }

            if (Input.GetKeyDown(KeyCode.Alpha4))
            {
                EventManger.Instance.UnRegisterEvent(EventType.UI_Event3, receiver1.OnEventProcess3);
            }

            if (Input.GetKeyDown(KeyCode.Alpha5))
            {
                EventManger.Instance.UnRegisterEvent(EventType.UI_Event3);
            }

            if (Input.GetKeyDown(KeyCode.Alpha6))
            {
                EventManger.Instance.RegisterEvent(EventType.UI_Event4, receiver2.OnEventProcess4);
            }
            if (Input.GetKeyDown(KeyCode.Keypad6))
            {
                GameObject msgObj = new GameObject();
                //多个消息参数
                EventManger.Instance.SendEvent(EventType.UI_Event4, 666, "hello", msgObj);
            }

        }

        void OnEnable()
        {
            receiver1.RegisterDelegates();
            receiver2.RegisterDelegates();
        }

        void OnDisable()
        {
            receiver1.UnRegisterDelegates();
            receiver2.RegisterDelegates();
        }
    }

    public class Receiver1
    {
        public void RegisterDelegates()
        {
            EventManger.Instance.RegisterEvent(EventType.UI_Event1, OnEventProcess1);
            EventManger.Instance.RegisterEvent(EventType.UI_Event2, OnEventProcess1);
        }


        public void UnRegisterDelegates()
        {
            EventManger.Instance.UnRegisterEvent(EventType.UI_Event1);
            EventManger.Instance.UnRegisterEvent(EventType.UI_Event2);
        }

        private void OnEventProcess1(BaseEventMsg msg)
        {
            Debug.Log("Receiver1! OnEventProcess1");


            if (msg != null && msg.Params.Length > 0)
            {
                //                 int data = Convert.ToInt32(msg.Params[0]);
                //                 Debug.Log("Receiver1! data= int:" + data);

                var data0 = msg.Params[0] as string;
                if (data0 != null)
                {
                    Debug.Log("Receiver1! data= string:" + data0);
                }

                var data1 = msg.Params[0] as GameObject;
                if (data1 != null)
                {
                    Debug.Log("Receiver1! data= GameObject:" + data1);
                }



                //Debug.Log("Receiver1!");
                //int data = (int)msg.Params[0];
                //Debug.Log("Receiver1! data=" + data.ToString());
            }
        }

        private void OnEventProcess2(BaseEventMsg msg)
        {
            Debug.Log("Receiver1! OnEventProcess2");
        }

        public void OnEventProcess3(BaseEventMsg msg)
        {
            int data = Convert.ToInt32(msg.Params[0]);
            Debug.Log("Receiver1! data= int:" + data);

            Debug.Log("Receiver1! OnEventProcess3 int = " + data.ToString());
        }
        public void OnEventProcess4(BaseEventMsg msg)
        {
            Debug.Log("Receiver1! OnEventProcess4");
        }

    }


    public class Receiver2
    {
        public void RegisterDelegates()
        {
            EventManger.Instance.RegisterEvent(EventType.UI_Event1, OnEventProcess1);
            EventManger.Instance.RegisterEvent(EventType.UI_Event2, OnEventProcess2);
        }


        public void UnRegisterDelegates()
        {
            EventManger.Instance.UnRegisterEvent(EventType.UI_Event1);
        }

        private void OnEventProcess1(BaseEventMsg msg)
        {
            Debug.Log("Receiver2! OnEventProcess1");
            if (msg != null && msg.Params.Length > 0)
            {
            }
        }

        private void OnEventProcess2(BaseEventMsg msg)
        {
            Debug.Log("Receiver2! OnEventProcess2");
        }

        public void OnEventProcess3(BaseEventMsg msg)
        {
            Debug.Log("Receiver2! OnEventProcess3");
        }

        public void OnEventProcess4(BaseEventMsg msg)
        {
            Debug.Log("Receiver2! OnEventProcess4");

            if (msg != null && msg.Params.Length > 2)
            {

                int data1 = (int)msg.Params[0];

                string data2 = msg.Params[1] as string;

                GameObject data3 = msg.Params[2] as GameObject;

                if (data2 != null && data3 != null)
                {
                    Debug.Log("Receiver2! OnEventProcess4 DATA:" +
                        "Data1= String" + data1.ToString() +
                        ", Data2= string :" + data2 +
                        ", Data3 GameObject :" + data3.name);
                }


            }


        }

    }

}

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventQueuePatternExample3.cs.meta`:

```meta
fileFormatVersion: 2
guid: 9bea317b356af264fa2a42e72d26fc7c
timeCreated: 1514366410
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventType.cs`:

```cs
//-------------------------------------------------------------------------------------
//	EventType.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace EventQueuePatternExample3
{
    /// <summary>
    ///  消息类型枚举
    /// </summary>
    public enum EventType
    {
        None,

        //UI事件消息
        UI_Event1 = 1,
        UI_Event2 = 2,
        UI_Event3 = 3,
        UI_Event4 = 4,
        UI_Event5 = 5,

        //渲染事件消息
        Render_Event1 = 100,
        Render_Event2,
    }
}
```

`Assets/Game Programming Patterns/Event Queue Pattern/Example3/Scripts/EventType.cs.meta`:

```meta
fileFormatVersion: 2
guid: 44102f294a22be2488bfd242b8b4ecaa
timeCreated: 1514377831
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Event Queue Pattern/README.md`:

```md
# Event Queue Pattern 事件队列模式

## Intent 意义

Decouple when a message or event is sent from when it is processed.
<br>
对消息或事件的发送与受理进行时间上的解耦。



## The Pattern 模式描述

A queue stores a series of notifications or requests in first-in, first-out order. Sending a notification enqueues the request and returns. The request processor then processes items from the queue at a later time. Requests can be handled directly or routed to interested parties. This decouples the sender from the receiver both statically and in time.

事件队列是一个按照先进先出顺序存储一系列通知或者请求的队列。发出通知时系统会将该请求置入队列并返回，请求处理器随后从事件队列中获取并处理这些请求。请求可由处理器直接处理或转交给对其感兴趣的模块。这一模式对消息的发送者与受理者进行了解耦，使消息的处理变得动态且非实时。




## When to Use It 使用情形

If you only want to decouple who receives a message from its sender, patterns like Observer and Command will take care of this with less complexity. You only need a queue when you want to decouple something in time.

I mention this in nearly every chapter, but it’s worth emphasizing. Complexity slows you down, so treat simplicity as a precious resource.

I think of it in terms of pushing and pulling. You have some code A that wants another chunk B to do some work. The natural way for A to initiate that is by pushing the request to B.

Meanwhile, the natural way for B to process that request is by pulling it in at a convenient time in its run cycle. When you have a push model on one end and a pull model on the other, you need a buffer between them. That’s what a queue provides that simpler decoupling patterns don’t.

Queues give control to the code that pulls from it — the receiver can delay processing, aggregate requests, or discard them entirely. But queues do this by taking control away from the sender. All the sender can do is throw a request on the queue and hope for the best. This makes queues a poor fit when the sender needs a response.

如果你只是想解耦接收者和发送者，像观察者模式和命令模式都可以用较小的复杂度来进行处理。在需要解耦某些实时的内容时才建议使用事件队列。

不妨用推和拉来的情形来考虑。有一块代码A需要另一块代码B去做些事情。对A自然的处理方式是将请求推给B。

同时，对B自然的处理方式是在B方便时将请求拉入。当一端有推模型另一端有拉模型时，你就需要在它们间放一个缓冲的区域。 这就是队列比简单的解耦模式多出来的那一部分。

队列给了代码对拉取的控制权——接收者可以延迟处理，合并或者忽视请求。发送者能做的就是向队列发送请求然后就完事了，并不能决定什么时候发送的请求会受到处理。而当发送者需要一些回复反馈时，队列模式就不是一个好的选择。


## Tips

Unity引擎的主要设计正是围绕组件模型来进行的。

```

`Assets/Game Programming Patterns/Event Queue Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 84beb725d89203749aa1f77029e0bb2c
timeCreated: 1514854979
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Game Loop Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 04f543c1105f57b4cbd43e975e604f2c
folderAsset: yes
timeCreated: 1514855389
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Game Loop Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: e90073f0fc5ad744d8de82a44b44306a
folderAsset: yes
timeCreated: 1514855566
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Game Loop Pattern/Example/GameLoopPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	GameLoopPatternExample.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;



namespace GameLoopPatternExample
{

    public class GameLoopPatternExample : MonoBehaviour
    {
        GameLoopManager GameLoop = new GameLoopManager();

        void Start()
        {
            //进行游戏循环
            //DoGameLoop();
            Debug.Log("Unity已经内建了游戏循环模式，即Update( )，按《游戏编程模式》书中的原版实现会导致卡死。这边仅保留代码框架，不作调用。");
        }

        void Update()
        {

        }

        /// <summary>
        /// 进行游戏循环
        /// </summary>
        void DoGameLoop()
        {
            if (GameLoop==null)
            {
                GameLoop = new GameLoopManager();
            }

            GameLoop.DoGameLoop();
        }
    }


    /// <summary>
    /// 游戏循环manager
    /// </summary>
    public class GameLoopManager
    {

        /// <summary>
        /// 游戏更新的粒度
        /// </summary>
       public const float MS_PER_UPDATE = 0.06F;
       
        /// <summary>
        /// 进行游戏循环
        /// </summary>
       public  void DoGameLoop()
        {
            double previous = Time.realtimeSinceStartup;
            double lag = 0.0;
            if (Time.realtimeSinceStartup==0f)
            {
                return;
            }
            while (true)
            {
                //当前时间
                double current = Time.realtimeSinceStartup;
                //消逝的时间
                double elapsed = current - previous;
                previous = current;
                lag += elapsed;
                ProcessInput();

                while (lag >= MS_PER_UPDATE)
                {
                    Update();
                    lag -= MS_PER_UPDATE;
                }

                Render();
            }
        }


        /// <summary>
        /// 处理按键消息
        /// </summary>
        void ProcessInput()
        {
            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                Debug.Log("[GameLoopManager]你按下了键盘1键！");
            }
        }

       /// <summary>
       /// 进行渲染
       /// </summary>
        void Render()
        {
            //do render
        }

        /// <summary>
        /// 处理更新
        /// </summary>
        void Update()
        {
            //do update
        }

    }



}

```

`Assets/Game Programming Patterns/Game Loop Pattern/Example/GameLoopPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 303690f82722c63478167e651bd7d134
timeCreated: 1514855751
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Game Loop Pattern/Example/GameLoopPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: ed921be4b19dacc42949845534e9ebe7
timeCreated: 1514855764
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Game Loop Pattern/README.md`:

```md
# Game Loop Pattern 游戏循环模式 

## Intent 意义

Decouple the progression of game time from user input and processor speed.
<br>
游戏循环模式，实现游戏运行过程中对用户输入处理和时间处理的解耦。



## The Pattern 模式描述

A game loop runs continuously during gameplay. Each turn of the loop, it processes user input without blocking, updates the game state, and renders the game. It tracks the passage of time to control the rate of gameplay.

游戏循环模式：游戏循环在游戏过程中持续运转。每循环一次，它非阻塞地处理用户的输入，更新游戏状态，并渲染游戏。它跟踪流逝的时间并控制游戏的速率。

游戏循环将游戏的处理过程和玩家输入解耦，和处理器速度解耦，实现用户输入和处理器速度在游戏行进时间上的分离。

游戏循环也许需要与平台的事件循环相协调。如果在操作系统的高层或有图形UI和内建事件循环的平台上构建游戏，那就有了两个应用循环在同时运作，需要对他们进行相应的协调。



## When to Use It 使用情形

任何游戏或游戏引擎都拥有自己的游戏循环，因为游戏循环是游戏运行的主心骨。

Unity已经内建了游戏循环模式，即Update( )方法。

```

`Assets/Game Programming Patterns/Game Loop Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 00022955503aa1a4fa2e7eccda90e53e
timeCreated: 1514860843
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 0f937c57d0b56cc47a87c5d759b16af0
folderAsset: yes
timeCreated: 1517843179
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: 6c238137d707e7a47b2f5fea9fde0785
folderAsset: yes
timeCreated: 1519459649
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Material.meta`:

```meta
fileFormatVersion: 2
guid: 6bfce09fc65a6bb41896d9480f28e86e
folderAsset: yes
timeCreated: 1519462428
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Material/Plane.mat.meta`:

```meta
fileFormatVersion: 2
guid: 7af618ba2ff2b9240bd56f1882c72dda
timeCreated: 1519529295
licenseType: Pro
NativeFormatImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Material/PoolObject.mat.meta`:

```meta
fileFormatVersion: 2
guid: 343887405a715a146b4d77e07fc21a7b
timeCreated: 1519529181
licenseType: Pro
NativeFormatImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Model.meta`:

```meta
fileFormatVersion: 2
guid: ee4da9e177955824d9b80ef2d316451f
folderAsset: yes
timeCreated: 1519529817
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Model/polygonSphere.asset.meta`:

```meta
fileFormatVersion: 2
guid: 5472b184decf70e4a93de4bb61864ced
timeCreated: 1479047316
licenseType: Store
NativeFormatImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/ObjectPoolExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: 20758ebff2f19114b9e504f370ae09b8
timeCreated: 1519532296
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Prefab.meta`:

```meta
fileFormatVersion: 2
guid: 46272b1c8cf0ac64ea77bfc516c5797d
folderAsset: yes
timeCreated: 1519529806
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Prefab/PolygonSphere.prefab.meta`:

```meta
fileFormatVersion: 2
guid: 70b17a5417e2e0144a172856b782d2e9
timeCreated: 1519529797
licenseType: Pro
NativeFormatImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/README.md`:

```md
# Screen Shot
![](objectPoolScreenShot.png)

# Reference

https://www.assetstore.unity3d.com/cn/?stay#!/content/31928





```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 78cf6f3a0ee44084392555077cc6a56d
timeCreated: 1519538407
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script.meta`:

```meta
fileFormatVersion: 2
guid: d05c069f2ea2a8c4fbf7310cbe40b554
folderAsset: yes
timeCreated: 1519462690
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Core.meta`:

```meta
fileFormatVersion: 2
guid: 9031a9c48f723d446909e43a1473d8c5
folderAsset: yes
timeCreated: 1519528097
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Core/PoolManager.cs`:

```cs
//-------------------------------------------------------------------------------------
//	PoolManager.cs
//
//	Created by 浅墨
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;


namespace ObjectPoolPatternExample
{

    /// <summary>
    /// 对象池类
    /// </summary>
    public class Pool
    {
        //池中可用对象的栈
        private Stack<PoolObject> availableObjStack = new Stack<PoolObject>();
        //是否固定尺寸
        private bool fixedSize;
        //对象prefab
        private GameObject poolObjectPrefab;
        //池的尺寸
        private int poolSize;
        //池的名称
        private string poolName;

        public Pool(string poolName, GameObject poolObjectPrefab, int initialCount, bool fixedSize)
        {
            this.poolName = poolName;
            this.poolObjectPrefab = poolObjectPrefab;
            this.poolSize = initialCount;
            this.fixedSize = fixedSize;
            //填充池 | populate the pool
            for (int index = 0; index < initialCount; index++)
            {
                AddObjectToPool(NewObjectInstance());
            }
        }

        /// <summary>
        /// 将对象加入池，复杂度o(1)
        /// </summary>
        /// <param name="po"></param>
        private void AddObjectToPool(PoolObject po)
        {
            //add to pool
            po.gameObject.SetActive(false);
            availableObjStack.Push(po);
            po.IsPooled = true;
        }

        /// <summary>
        /// 新建一个对象实例
        /// </summary>
        /// <returns></returns>
        private PoolObject NewObjectInstance()
        {
            GameObject go = (GameObject)GameObject.Instantiate(poolObjectPrefab);
            PoolObject po = go.GetComponent<PoolObject>();
            if (po == null)
            {
                po = go.AddComponent<PoolObject>();
            }
            //set name
            po.PoolName = poolName;
            return po;
        }

        //o(1)
        /// <summary>
        /// 获取一个池中可用对象，如池中已无可用对象，则新建一个对象实例
        /// </summary>
        /// <param name="position"></param>
        /// <param name="rotation"></param>
        /// <returns></returns>
        public PoolObject NextAvailableObject(Vector3 position, Quaternion rotation)
        {
            PoolObject po = null;
            //池中有可用对象，直接从池中取
            if (availableObjStack.Count > 0)
            {
                po = availableObjStack.Pop();
            }
            //池中已无可用对象，new一个
            else if (fixedSize == false)
            {
                //increment size var, this is for info purpose only
                poolSize++;
                Debug.Log(string.Format("Growing pool {0}. New size: {1}", poolName, poolSize));
                //create new object
                po = NewObjectInstance();
            }
            else
            {
                Debug.LogWarning("No object available & cannot grow pool: " + poolName);
            }

            //设置对象的行为
            GameObject result = null;
            if (po != null)
            {
                po.IsPooled = false;
                result = po.gameObject;
                result.SetActive(true);

                result.transform.position = position;
                result.transform.rotation = rotation;
            }

            return po;

            }

        /// <summary>
        /// 将指定对象返回池中，复杂度o(1)
        /// </summary>
        /// <param name="po"></param>
        public void ReturnObjectToPool(PoolObject po)
        {

            if (poolName.Equals(po.PoolName))
            {

                // We could have used availableObjStack.Contains(po) to check if this object is in pool.
                // While that would have been more robust, it would have made this method O(n) 
                if (po.IsPooled)
                {
                    Debug.LogWarning(po.gameObject.name + " is already in pool. Why are you trying to return it again? Check usage.");
                }
                else
                {
                    AddObjectToPool(po);
                }

            }
            else
            {
                Debug.LogError(string.Format("Trying to add object to incorrect pool {0} {1}", po.PoolName, poolName));
            }
        }
    }

    /// <summary>
    /// PoolManager
    /// </summary>
    public class PoolManager : MonoBehaviour
    {
        /// <summary>
        /// 单例
        /// </summary>
        private static PoolManager instance;
        public static PoolManager Instance
        {
            get
            {
                if (instance == null)
                {
                    instance = new PoolManager();
                }
                return instance;
            }
        }

        /// <summary>
        /// 多个对象池的索引<对象池名称，对应的池>
        /// </summary>
        private Dictionary<string, Pool> poolMap = new Dictionary<string, Pool>();
        public Dictionary<string, Pool> PoolMap
        {
            get { return poolMap; }
            set { poolMap = value; }
        }

        [Header("[对象池信息，(运行时修改无效)]")]
        public PoolInfo[] poolInfo;


        /// <summary>
        /// 构造函数
        /// </summary>
        PoolManager()
        {
            //set instance
            instance = this;
        }

        /// <summary>
        /// 初始化
        /// </summary>
        public void Init()
        {
            //检测对象池是否重名 | check for duplicate names
            CheckForDuplicatePoolNames();
            //创建对象池 | create pools
            CreatePools();
        }


        /// <summary>
        /// 检测对象池是否重名
        /// </summary>
        private void CheckForDuplicatePoolNames()
        {
            for (int index = 0; index < poolInfo.Length; index++)
            {
                string poolName = poolInfo[index].poolName;
                if (poolName.Length == 0)
                {
                    Debug.LogError(string.Format("Pool {0} does not have a name!", index));
                }
                for (int internalIndex = index + 1; internalIndex < poolInfo.Length; internalIndex++)
                {
                    if (poolName.Equals(poolInfo[internalIndex].poolName))
                    {
                        Debug.LogError(string.Format("Pool {0} & {1} have the same name. Assign different names.", index, internalIndex));
                    }
                }
            }
        }

        /// <summary>
        /// 创建对象池
        /// </summary>
        private void CreatePools()
        {
            foreach (PoolInfo currentPoolInfo in poolInfo)
            {

                Pool pool = new Pool(currentPoolInfo.poolName, currentPoolInfo.prefab, currentPoolInfo.poolSize, currentPoolInfo.fixedSize);

                Debug.Log("Creating Pool: " + currentPoolInfo.poolName);

                //add to mapping dict
                poolMap[currentPoolInfo.poolName] = pool;
            }
        }


        /// <summary>
        /// 从池中获取一个对象并返回
        ///  null in case the pool does not have any object available & can grow size is false.
        /// </summary>
        /// <param name="poolName">名称</param>
        /// <param name="position">位置</param>
        /// <param name="rotation">rotation</param>
        /// <returns></returns>
        public PoolObject GetObjectFromPool(string poolName, Vector3 position, Quaternion rotation)
        {
            //GameObject result = null;
            PoolObject result = null;

            if (poolMap.ContainsKey(poolName))
            {
                Pool pool = poolMap[poolName];
                result = pool.NextAvailableObject(position, rotation);
                //scenario when no available object is found in pool
                if (result == null)
                {
                    Debug.LogWarning("No object available in pool. Consider setting fixedSize to false.: " + poolName);
                }

            }
            else
            {
                Debug.LogError("Invalid pool name specified: " + poolName);
            }

            return result;
        }

        public void ReturnObjectToPool(PoolObject po)
        {
            //PoolObject po = go.GetComponent<PoolObject>();
            if (po == null)
            {
                Debug.LogWarning("Specified object is not a pooled instance: " + po.name);
            }
            else
            {
                if (poolMap.ContainsKey(po.PoolName))
                {
                    Pool pool = poolMap[po.PoolName];
                    pool.ReturnObjectToPool(po);
                }
                else
                {
                    Debug.LogWarning("No pool available with name: " + po.PoolName);
                }
            }
        }
    }


    /// <summary>
    /// 对象池信息
    /// </summary>
    [System.Serializable]
    public class PoolInfo
    {
        //名称
        public string poolName;
        //prefab对象
        public GameObject prefab;
        //尺寸
        public int poolSize;
        //是否固定尺寸的池
        public bool fixedSize;
    }
}

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Core/PoolManager.cs.meta`:

```meta
fileFormatVersion: 2
guid: 7923edcf213b37449a472421ad1dc23f
timeCreated: 1519459616
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Core/PoolObject.cs`:

```cs
//-------------------------------------------------------------------------------------
//	PoolObject.cs
//
//	Created by 浅墨
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace ObjectPoolPatternExample
{

    /// <summary>
    /// 对象池中对象的组件
    /// </summary>
    public class PoolObject : MonoBehaviour
    {
        //名称
        public string PoolName;
        //是否已在池中（还未使用，待使用）
        public bool IsPooled;
    }
}

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Core/PoolObject.cs.meta`:

```meta
fileFormatVersion: 2
guid: 0b4144ee959c80a469435c9eed4f0a3c
timeCreated: 1519459627
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Example.meta`:

```meta
fileFormatVersion: 2
guid: 65f60e80522232145bd1c2a1beb95aca
folderAsset: yes
timeCreated: 1519529248
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Example/ObjectPoolExample.cs`:

```cs
using UnityEngine;
using System.Collections;
using System.Collections.Generic;


namespace ObjectPoolPatternExample
{
    public class ObjectPoolExample : MonoBehaviour
    {
        //池名称
        public string poolName;
        //对象List
        // public List<GameObject> ObjectList = new List<GameObject>();
        public List<PoolObject> ObjectList = new List<PoolObject>();

        public void Start()
        {
            //初始化对象池
            PoolManager.Instance.Init();
            //开始运行时，先从池中取出一个对象
            GetObjectFromPool();
        }


        /// <summary>
        /// 从池中取出对象，并设置随机位置
        /// </summary>
        public void GetObjectFromPool()
        {
            if (ObjectList == null)
            {
                return;
            }

            //设置随机位置
            Vector3 pos = new Vector3();
            pos.x = Random.Range(-5, 6);
            pos.y = 0f;
            pos.z = Random.Range(-5, 6);

            PoolObject po = PoolManager.Instance.GetObjectFromPool(poolName, pos, Quaternion.identity);
            if (po)
            {
                ObjectList.Add(po);
            }
        }

        /// <summary>
        /// 将索引为0的对象返回池中
        /// </summary>
        public void ReturnOneObjectToPool()
        {
            if (ObjectList == null || ObjectList.Count <= 0)
            {
                return;
            }

            PoolManager.Instance.ReturnObjectToPool(ObjectList[0]);
            ObjectList.Remove(ObjectList[0]);
        }

        /// <summary>
        /// 将所有对象返回池中
        /// </summary>
        public void ReturnAllObjectToPool()
        {
            if (ObjectList == null)
            {
                return;
            }

            foreach (PoolObject po in ObjectList)
            {
                PoolManager.Instance.ReturnObjectToPool(po);
            }
            ObjectList.Clear();
        }
    }
}
```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Example/ObjectPoolExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 056320df615c8b143ada4e568756f3e2
timeCreated: 1519459894
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Example/PoolObjectBehaviour.cs`:

```cs
using UnityEngine;
using System.Collections;


namespace ObjectPoolPatternExample
{
    public class PoolObjectBehaviour : MonoBehaviour
    {

        /// <summary>
        /// 设置对象的初始状态
        /// </summary>
        void OnEnable()
        {
            if (GetComponent<Rigidbody>() == null)
            {
                return;
            }

            GetComponent<Rigidbody>().velocity = new Vector3(0, Random.Range(-10, 11), 0);
            GetComponent<Rigidbody>().angularVelocity = new Vector3(0, Random.Range(-10, 11), 0);
        }

    }
}
```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/Example/PoolObjectBehaviour.cs.meta`:

```meta
fileFormatVersion: 2
guid: bd943f996f94e754491919c9e1218c77
timeCreated: 1519459897
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/README.md`:

```md
# Reference

https://www.assetstore.unity3d.com/cn/?stay#!/content/31928





```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/Script/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 3a234c806a7ca3f4294d37e225986e0e
timeCreated: 1519537843
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/Example/objectPoolScreenShot.png.meta`:

```meta
fileFormatVersion: 2
guid: dc8bbdfe7a397f24797c0c82eaca2ac8
timeCreated: 1519538407
licenseType: Pro
TextureImporter:
  fileIDToRecycleName: {}
  serializedVersion: 2
  mipmaps:
    mipMapMode: 0
    enableMipMap: 1
    linearTexture: 0
    correctGamma: 0
    fadeOut: 0
    borderMipMap: 0
    mipMapFadeDistanceStart: 1
    mipMapFadeDistanceEnd: 3
  bumpmap:
    convertToNormalMap: 0
    externalNormalMap: 0
    heightScale: 0.25
    normalMapFilter: 0
  isReadable: 0
  grayScaleToAlpha: 0
  generateCubemap: 0
  cubemapConvolution: 0
  cubemapConvolutionSteps: 7
  cubemapConvolutionExponent: 1.5
  seamlessCubemap: 0
  textureFormat: -1
  maxTextureSize: 2048
  textureSettings:
    filterMode: -1
    aniso: -1
    mipBias: -1
    wrapMode: -1
  nPOTScale: 1
  lightmap: 0
  rGBM: 0
  compressionQuality: 50
  allowsAlphaSplitting: 0
  spriteMode: 0
  spriteExtrude: 1
  spriteMeshType: 1
  alignment: 0
  spritePivot: {x: 0.5, y: 0.5}
  spriteBorder: {x: 0, y: 0, z: 0, w: 0}
  spritePixelsToUnits: 100
  alphaIsTransparency: 0
  textureType: -1
  buildTargetSettings: []
  spriteSheet:
    sprites: []
    outline: []
  spritePackingTag: 
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Object Pool Pattern/README.md`:

```md
# Object Pool Pattern 对象池模式

## Intent 意义

Improve performance and memory use by reusing objects from a fixed pool instead of allocating and freeing them individually.
<br>
使用固定的对象池重用对象，取代单独地分配和释放对象，以此来达到提升性能和优化内存使用的目的。



## The Pattern 模式描述

Define a pool class that maintains a collection of reusable objects. Each object supports an “in use” query to tell if it is currently “alive”. When the pool is initialized, it creates the entire collection of objects up front (usually in a single contiguous allocation) and initializes them all to the “not in use” state.

When you want a new object, ask the pool for one. It finds an available object, initializes it to “in use”, and returns it. When the object is no longer needed, it is set back to the “not in use” state. This way, objects can be freely created and destroyed without needing to allocate memory or other resources.

定义一个保持着可重用对象集合的对象池类。其中的每个对象支持对其“使用（in use）”状态的访问，以确定这一对象目前是否“存活（alive）”。在对象池初始化时，它预先创建整个对象集合（通常为一块连续堆区域），并将它们都置为“未使用（not in use）”状态。

当我们想要创建一个新对象时，就向对象池请求。它将搜索到一个可用的对象，将其初始化为“使用中（in use）”状态并返回给你。当该对象不再被使用时，它将被置回“未使用（not in use）”状态。使用该方法，对象便可以在无需进行内存或其他资源分配的情况下进行任意的创建和销毁。



## When to Use It 使用情形

This pattern is used widely in games for obvious things like game entities and visual effects, but it is also used for less visible data structures such as currently playing sounds. Use Object Pool when:

- You need to frequently create and destroy objects.
- Objects are similar in size.
- Allocating objects on the heap is slow or could lead to memory fragmentation.
- Each object encapsulates a resource such as a database or network connection that is expensive to acquire and could be reused.


此模式被广泛地应用于游戏中的可见物体，如游戏实体对象、各种视觉特效。但是它也可在非可见的数据结构上使用，比如当前播放的声音。

满足以下情况可以使用对象池：

- 需要频繁创建和销毁对象时。
- 对象大小一致时。
- 在堆上分配对象缓慢或者会导致内存碎片时。
- 每个对象都封装了很昂贵且又可以重用的资源，如数据库、网络的连接。

```

`Assets/Game Programming Patterns/Object Pool Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: cd2583eb005e4da44ab347cd4bff5a02
timeCreated: 1519538865
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Service Locator Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 316aa7b49346e3946ae808efa6ce3c2a
folderAsset: yes
timeCreated: 1515401972
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Service Locator Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: 4b8890989c4a44c4289553f5681c2e3e
folderAsset: yes
timeCreated: 1515402021
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Service Locator Pattern/Example/ServiceLocatorPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ServiceLocatorPatternExample.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System;

namespace ServiceLocatorPatternExample
{
    public class ServiceLocatorPatternExample : MonoBehaviour
    {
        void Start()
        {
            //注册到服务定位器
            TheAudioPlayer audio = new TheAudioPlayer();
            ServiceLocator.RegisterService(audio);
        }

        void Update()
        {
            //播放声音
            if (Input.GetKeyDown(KeyCode.Alpha1))
            {
                var audio=ServiceLocator.GetAudioService();
                if (audio!=null)
                {
                    audio.PlaySound(1);
                }
            }

            //结束声音
            if (Input.GetKeyDown(KeyCode.Alpha2))
            {
                var audio = ServiceLocator.GetAudioService();
                if (audio != null)
                {
                    audio.StopSound(1);
                }
            }

            //结束所有声音
            if (Input.GetKeyDown(KeyCode.Alpha3))
            {
                var audio = ServiceLocator.GetAudioService();
                if (audio != null)
                {
                    audio.StopAllSounds();
                }
            }

            //注册日志音频类
            if (Input.GetKeyDown(KeyCode.Alpha4))
            {
                ServiceLocator.EnableAudioLogging();
            }
        }


    }



    /// <summary>
    /// 服务定位器管理类
    /// </summary>
    public class ServiceLocator
    {
        static IAudio AudioService_;
        static NullAudio NullAudioService_;

        public static IAudio GetAudioService() { return AudioService_; }

        /// <summary>
        /// 注册服务
        /// </summary>
        /// <param name="service"></param>
        public static void RegisterService(IAudio service)
        {
            if (service == null)
            {
                // Revert to null service.
                AudioService_ = NullAudioService_;
            }
            else
            {
                AudioService_ = service;
            }
            Debug.Log("[ServiceLocator]Finish Register Service!");
        }

        /// <summary>
        ///  注册带日志的音频类
        /// </summary>
        public static void EnableAudioLogging()
        {
            // Decorate the existing service.
            IAudio service = new LoggedAudio(ServiceLocator.GetAudioService());

            // Swap it in.
            RegisterService(service);
        }

    }



    /// <summary>
    ///音频接口 
    /// </summary>
    public interface IAudio
    {
        void PlaySound(int soundID);
        void StopSound(int soundID);
        void StopAllSounds();
    };

    /// <summary>
    /// 实际的播放音频的实现类
    /// </summary>
    public class TheAudioPlayer : IAudio
    {
        public void PlaySound(int soundID)
        {
            // Play sound using console audio api...
            Debug.Log("Play Sound ! ID = "+soundID.ToString());
        }

        public void StopSound(int soundID)
        {
            // Stop sound using console audio api...
            Debug.Log("Stop Sound ! ID = " + soundID.ToString());
        }

        public void StopAllSounds()
        {
            // Stop all sounds using console audio api...
            Debug.Log("Stop All Sound ! ");
        }
    };

    /// <summary>
    ///  null音频类
    /// </summary>
    public class NullAudio : IAudio
    {
        public void PlaySound(int soundID) { /* Do nothing. */ }
        public void StopSound(int soundID) { /* Do nothing. */ }
        public void StopAllSounds() { /* Do nothing. */ }
    };

    /// <summary>
    /// 带日志的音频类
    /// </summary>
    class LoggedAudio : IAudio
    {

        IAudio wrapped_;
        public LoggedAudio(IAudio wrapped)
        {
            wrapped_ = wrapped;
        }

        public void PlaySound(int soundID)
        {
            Log("[LoggedAudio]Play sound!");
            wrapped_.PlaySound(soundID);
        }

        public void StopSound(int soundID)
        {
            Log("[LoggedAudio]Stop sound!");
            wrapped_.StopSound(soundID);
        }

        public void StopAllSounds()
        {
            Log("[LoggedAudio]Stop all sounds!");
            wrapped_.StopAllSounds();
        }

        private void Log(string message)
        {
            Debug.LogError(message);
            // Code to log message...
        }
    }



}




```

`Assets/Game Programming Patterns/Service Locator Pattern/Example/ServiceLocatorPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4a374e31f2aae6445afe11866ec1a7b5
timeCreated: 1515402041
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Service Locator Pattern/Example/ServiceLocatorPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: c4ad4d65234bc1f47a02c840973af452
timeCreated: 1515402050
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Service Locator Pattern/README.md`:

```md
# Service Locator Pattern 服务定位器模式

## Intent 意义

Provide a global point of access to a service without coupling users to the concrete class that implements it.
<br>
提供服务的全局接入点，而不必让用户和实现它的具体类耦合。



## The Pattern 模式描述

A service class defines an abstract interface to a set of operations. A concrete service provider implements this interface. A separate service locator provides access to the service by finding an appropriate provider while hiding both the provider’s concrete type and the process used to locate it.
一个服务类为一系列操作定义了一个抽象的接口。一个具体的服务提供者实现这个接口。一个单独的服务定位器通过查找一个合适的提供器来提供这个服务的访问，它同时屏蔽了提供器的具体类型和定位这个服务的过程。



## When to Use It 使用情形


Instead of using a global mechanism to give some code access to an object it needs, first consider passing the object to it instead. That’s dead simple, and it makes the coupling completely obvious. That will cover most of your needs.

But… there are some times when manually passing around an object is gratuitous or actively makes code harder to read. Some systems, like logging or memory management, shouldn’t be part of a module’s public API. The parameters to your rendering code should have to do with rendering, not stuff like logging.

Likewise, other systems represent facilities that are fundamentally singular in nature. Your game probably only has one audio device or display system that it can talk to. It is an ambient property of the environment, so plumbing it through ten layers of methods just so one deeply nested call can get to it is adding needless complexity to your code.

In those kinds of cases, this pattern can help. As we’ll see, it functions as a more flexible, more configurable cousin of the Singleton pattern. When used well, it can make your codebase more flexible with little runtime cost.

The core difficulty with a service locator is that it takes a dependency — a bit of coupling between two pieces of code — and defers wiring it up until runtime. This gives you flexibility, but the price you pay is that it’s harder to understand what your dependencies are by reading the code.

一般通过使用单例或者静态类来实现服务定位模式，提供服务的全局接入点。
服务定位模式可以看做是更加灵活，更加可配置的单例模式。如果用得好，它能以很小的运行时开销，换取很大的灵活性。相反，如果用得不好，它会带来单例模式的所有缺点以及更多的运行时开销。
使用服务定位器的核心难点是它将依赖，也就是两块代码之间的一点耦合，推迟到运行时再连接。这有了更大的灵活度，但是代价是更难在阅读代码时理解其依赖的是什么


## Tips


服务定位器模式在很多方面和单例模式非常相近，所以值得考虑两者来决定哪一个更适合你的需求。

Unity引擎把这个模式和组件模式结合起来，并使用在了GetComponent()方法中。

```

`Assets/Game Programming Patterns/Service Locator Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 9991e7835ca77f448833f8bf1812c052
timeCreated: 1515414336
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 7bb0f85f69fb9de44ac06dc331e4eda5
folderAsset: yes
timeCreated: 1476155448
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: f7921a4843d2ee7439474002481a82b7
folderAsset: yes
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/FlashSpeed.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FlashSpeed.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class FlashSpeed : SuperPower
{
    //Has to have its own version of Activate()（子类实现自己版本的Activate()方法）
    public override void Activate()
    {
        Debug.Log("--------------------------FlashSpeed SuperPower Activate!--------------------");
        //make own unique features.（组合子类自己独特的功能）
        Move(100f);
        PlaySound("Flash Speed");
        SpawnParticles("Flash Particles");
    }
}

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/FlashSpeed.cs.meta`:

```meta
fileFormatVersion: 2
guid: 10eed03296f0bae468d1961a75bf2221
timeCreated: 1476157158
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/GroundDive.cs`:

```cs
//-------------------------------------------------------------------------------------
//	GroundDive.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class GroundDive : SuperPower
{
    //Has to have its own version of Activate()（子类实现自己版本的Activate()方法）
    public override void Activate()
    {
        Debug.Log("--------------------------GroundDive SuperPower Activate!--------------------");
        //make own unique features.（组合子类自己独特的功能） 
        Move(15f);
        PlaySound("GroundDive");
        SpawnParticles("GroundDive Particles");
    }
}

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/GroundDive.cs.meta`:

```meta
fileFormatVersion: 2
guid: ac784c89e3260874f861f9d1b906832a
timeCreated: 1476155595
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/SkyLaunch.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SkyLaunch.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//Subclasses
public class SkyLaunch : SuperPower
{
    //Has to have its own version of Activate()（子类实现自己版本的Activate()方法）
    public override void Activate()
    {
        Debug.Log("--------------------------SkyLaunch SuperPower Activate!--------------------");
        //make own unique features.（组合子类自己独特的功能）
        Move(10f);
        PlaySound("SkyLaunch");
        SpawnParticles("SkyLaunch Particles");
    }
}

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/SkyLaunch.cs.meta`:

```meta
fileFormatVersion: 2
guid: c3fdeae822dce8f478ebe053fb633c6a
timeCreated: 1476155587
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/SubclassSandbox.unity.meta`:

```meta
fileFormatVersion: 2
guid: 606722f5a3d51d246a2b8b3834a69fca
timeCreated: 1476156096
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/SuperPower.cs`:

```cs
//-------------------------------------------------------------------------------------
//	SuperPower.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This is the base class（基类）
public abstract class SuperPower
{
    //Abstract interface for sub class（给子类提供的抽象接口）
    public abstract void Activate();

    //Some of the tool methods given to the child class（给子类提供的一些工具方法类）
    protected void Move(float speed)
    {
        Debug.Log("Moving with speed " + speed + "!(速度)");
    }

    protected void PlaySound(string coolSound)
    {
        Debug.Log("Playing sound " + coolSound+"!(音效)");
    }

    protected void SpawnParticles(string particles)
    {
        Debug.Log("Spawn Particles "+ particles+"!(粒子特效)");
    }
}

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/SuperPower.cs.meta`:

```meta
fileFormatVersion: 2
guid: e170a1e3c2b695e4a8cff91bd998159b
timeCreated: 1476155578
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/TestSubclassSandbox.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TestSubclassSandbox.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class TestSubclassSandbox : MonoBehaviour
{
    //A list that will store all superpowers（一个存储所有超能力的List）
    List<SuperPower> _superPowers = new List<SuperPower>();

    private float _elapsedTime = 0.0f;

    void Start()
    {
        _superPowers.Add(new SkyLaunch());
        _superPowers.Add(new GroundDive());
        _superPowers.Add(new FlashSpeed());
        _elapsedTime = Time.realtimeSinceStartup;
    }

    void Update()
    {
        //Trigger once per second（每一秒触发一次）
        if (Time.realtimeSinceStartup - _elapsedTime > 1f)
        {
            for (int i = 0; i < _superPowers.Count; i++)
            {
                _superPowers[i].Activate();
            }
            _elapsedTime = Time.realtimeSinceStartup;
        }

    }
}

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/Example/TestSubclassSandbox.cs.meta`:

```meta
fileFormatVersion: 2
guid: 9a0df17e42ee07d4e9f17b3f0056d08f
timeCreated: 1476155569
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/README.md`:

```md
# Subclass Sandbox Pattern 子类沙盒模式

## Intent 意义

Define behavior in a subclass using a set of operations provided by its base class.
<br>
使用基类提供的操作集合来定义子类中的行为。



## The Pattern 模式描述

A base class defines an abstract sandbox method and several provided operations. Marking them protected makes it clear that they are for use by derived classes. Each derived sandboxed subclass implements the sandbox method using the provided operations.
<br>
一个基类定义了一个抽象的沙盒方法和一些预定义的操作集合。通过将它们设置为受保护的状态以确保它们仅供子类使用。每个派生出的沙盒子类根据父类提供的操作来实现沙盒函数。



## When to Use It 使用情形

The Subclass Sandbox pattern is a very simple, common pattern lurking in lots of codebases, even outside of games. If you have a non-virtual protected method laying around, you’re probably already using something like this. Subclass Sandbox is a good fit when:

- You have a base class with a number of derived classes.

- The base class is able to provide all of the operations that a derived class may need to perform.

- There is behavioral overlap in the subclasses and you want to make it easier to share code between them.

- You want to minimize coupling between those derived classes and the rest of the program.

沙盒模式是运用在多数代码库里、甚至游戏之外的一种非常简单通用的模式。如果你正在部署一个非虚的受保护方法，那么你很可能正在使用与之类似的模式。沙盒模式适用于以下情况：
- 你有一个带大量子类的基类。
- 基类能够提供所有子类可能需要执行的操作集合。
- 在子类之间有重叠的代码，你希望在它们之间更简便地共享代码。
- 你希望使这些继承类与程序其他代码之间的耦合最小化。




```

`Assets/Game Programming Patterns/SubclassSandbox Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 97809e98d782c80438c9e16f8d56d411
timeCreated: 1514048136
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Type Object Pattern.meta`:

```meta
fileFormatVersion: 2
guid: bc0415234c9b2e346b25d4fa77f02186
folderAsset: yes
timeCreated: 1514016872
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Type Object Pattern/Example.meta`:

```meta
fileFormatVersion: 2
guid: 5cb58ef17cac894468424c43272e752c
folderAsset: yes
timeCreated: 1514030098
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Type Object Pattern/Example/TypeObjectPatternExample.cs`:

```cs
//-------------------------------------------------------------------------------------
//	TypeObjectPatternExample.cs
// 类型对象模式 ：通过创建一个类来支持新类型的灵活创建，其每个实例都代表一个不同对象类型


// 思想：1、用聚合而不是继承。has a而不是is a。可以理解为设计模式六大原则中的合成复用原则（Composite Reuse Principle）
//           2、并且可以通过配置来灵活选择是否继承自父类
//-------------------------------------------------------------------------------------




using UnityEngine;
using System.Collections;

public class TypeObjectPatternExample : MonoBehaviour
{
    void Start()
    {
        //创建种类，生命值填0表示从父类继承。
        Breed troll = new Breed(null, 25, "The troll hits you!");

        Breed trollArcher = new Breed(troll, 0, "The troll archer fires an arrow!");

        Breed trollWizard = new Breed(troll, 0, "The troll wizard casts a spell on you!");

        //通过种类创建monster对象
        Monster trollMonster = troll.NewMonster();
        trollMonster.ShowAttack();

        Monster trollArcherMonster = trollArcher.NewMonster();
        trollArcherMonster.ShowAttack();

        Monster trollWizardMonster = trollWizard.NewMonster();
        trollWizardMonster.ShowAttack();

    }

}


/// <summary>
/// 品种类Breed
/// </summary>
public class Breed
{
    private int health_;
    private string attack_;
    Breed parent_;

    /// <summary>
    /// 构造函数
    /// </summary>
    /// <param name="parent">父类</param>
    /// <param name="health">生命值，填0表示从父类继承</param>
    /// <param name="attack">攻击表现</param>
    public Breed(Breed parent, int health, string attack)
    {
        health_ = health;
        attack_ = attack;
        parent_ = null;

        //复制“代理”，在创建一个类型时将继承的特性复制到类的内部
        //注意我们不再需要parent类中的属性，一旦构造结束，就可以忘掉基类
        if (parent != null)
        {
            parent_ = parent;

            //是0，从父层拿
            if (health == 0)
            {
                health_ = parent.GetHealth();
            }
            //是null，从父层拿
            if (attack == null)
            {
                attack_ = parent.GetAttack();
            }
        }
    }

    public Monster NewMonster()
    {
        return new Monster(this);
    }

    public int GetHealth()
    {
        return health_;
    }

    public string GetAttack()
    {
        return attack_;
    }
}



/// <summary>
/// Monster类“ has a”Breed类
/// </summary>
public class Monster
{
    private int health_;
    private Breed breed_;
    private string attack_;

    public Monster(Breed breed)
    {
        health_ = breed.GetHealth();
        breed_ = breed;
        attack_ = breed.GetAttack();
    }

    public string GetAttack()
    {
        return attack_;
    }

    public void ShowAttack()
    {
        Debug.Log(attack_);
    }
}






```

`Assets/Game Programming Patterns/Type Object Pattern/Example/TypeObjectPatternExample.cs.meta`:

```meta
fileFormatVersion: 2
guid: aea65cdbcf2cf5d48be3cbb757de786b
timeCreated: 1514016932
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Type Object Pattern/Example/TypeObjectPatternExample.unity.meta`:

```meta
fileFormatVersion: 2
guid: 1f9449179735c894b92ae16c2e902347
timeCreated: 1514016944
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Game Programming Patterns/Type Object Pattern/README.md`:

```md
# Type Object Pattern 类型对象模式

## Intent 意义

Allow the flexible creation of new “classes” by creating a single class, each instance of which represents a different type of object.
<br>
通过创建一个类来支持新类型的灵活创建，其每个实例都代表一个不同对象类型。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/type-object.png)

两个类，可以实现无限的种类


## The Pattern 模式描述

Define a type object class and a typed object class. Each type object instance represents a different logical type. Each typed object stores a reference to the type object that describes its type.

Instance-specific data is stored in the typed object instance, and data or behavior that should be shared across all instances of the same conceptual type is stored in the type object. Objects referencing the same type object will function as if they were the same type. This lets us share data and behavior across a set of similar objects, much like subclassing lets us do, but without having a fixed set of hard-coded subclasses.

定义一个类型对象类和一个持有类型对象的类。每个类型对象的实例表示一个不同的逻辑类型。每个持有类型对象类的实例引用一个描述其类型的类型对象。

实例数据被存储在持有类型对象的实例中，而所有同概念类型所共享的数据和行为被存储在类型对象中。引用同一个类型对象的对象之间能表示出“同类”的特性。这让我们可以在相似对象集合中共享数据和行为，这与类派生的作用有几分相似，但却无需硬编码出一批派生类。


## When to Use It 使用情形

This pattern is useful anytime you need to define a variety of different “kinds” of things, but baking the kinds into your language’s type system is too rigid. In particular, it’s useful when either of these is true:

- You don’t know what types you will need up front. (For example, what if our game needed to support downloading content that contained new breeds of monsters?)

- You want to be able to modify or add new types without having to recompile or change code.

当你需要定义一系列不同“种类”的东西，但又不想把那些种类硬编码进你的类型系统时，本模式都适用。尤其其是当下面任意一项成立时：
- 你不知道将来会有什么类型（例如，我们的游戏是否需要指出包含怪物新种类的资料包下载？）
- 你需要在不重新编译或修改代码的情况下，修改或添加新的类型。




```

`Assets/Game Programming Patterns/Type Object Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 29251969591b08348a3ba3ab38b3f55d
timeCreated: 1514048136
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns.meta`:

```meta
fileFormatVersion: 2
guid: b3ff4104055ba1e469883244dca9ec7b
folderAsset: yes
timeCreated: 1476362981
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern.meta`:

```meta
fileFormatVersion: 2
guid: f6e267d921882af42839e2be5047dfca
folderAsset: yes
timeCreated: 1476264924
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 5f022e1bc7a52a74b9300c226301d765
folderAsset: yes
timeCreated: 1476583560
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple1/AdapterPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AdapterPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;


//Convert the interface of a class into another interface clients expect. Adapter lets classes work together that couldn't otherwise because of incompatible interfaces.
//This real-world code demonstrates the use of a legacy chemical databank. Chemical compound objects access the databank through an Adapter interface.

namespace AdapterPatternExample1
{
    public class AdapterPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Non-adapted chemical compound
            Compound unknown = new Compound("Unknown");
            unknown.Display();

            // Adapted chemical compounds
            Compound water = new RichCompound("Water");
            water.Display();

            Compound benzene = new RichCompound("Benzene");
            benzene.Display();

            Compound ethanol = new RichCompound("Ethanol");
            ethanol.Display();
        }
    }

    /// <summary>
    /// The 'Target' class
    /// </summary>
    class Compound
    {
        protected string _chemical;
        protected float _boilingPoint;
        protected float _meltingPoint;
        protected double _molecularWeight;
        protected string _molecularFormula;

        // Constructor
        public Compound(string chemical)
        {
            this._chemical = chemical;
        }

        public virtual void Display()
        {
            Debug.Log("\nCompound:  " + _chemical + "------");
        }
    }

    /// <summary>
    /// The 'Adapter' class
    /// </summary>
    class RichCompound : Compound
    {
        private ChemicalDatabank _bank;

        // Constructor
        public RichCompound(string name)
          : base(name)
        {
        }

        public override void Display()
        {
            // The Adaptee
            _bank = new ChemicalDatabank();

            _boilingPoint = _bank.GetCriticalPoint(_chemical, "B");
            _meltingPoint = _bank.GetCriticalPoint(_chemical, "M");
            _molecularWeight = _bank.GetMolecularWeight(_chemical);
            _molecularFormula = _bank.GetMolecularStructure(_chemical);

            base.Display();
            Debug.Log(" Formula: " + _molecularFormula);
            Debug.Log(" Weight : " + _molecularWeight);
            Debug.Log(" Melting Pt: " + _meltingPoint);
            Debug.Log(" Boiling Pt: " + _boilingPoint);
        }
    }

    /// <summary>
    /// The 'Adaptee' class
    /// </summary>
    class ChemicalDatabank
    {
        // The databank 'legacy API'
        public float GetCriticalPoint(string compound, string point)
        {
            // Melting Point
            if (point == "M")
            {
                switch (compound.ToLower())
                {
                    case "water": return 0.0f;
                    case "benzene": return 5.5f;
                    case "ethanol": return -114.1f;
                    default: return 0f;
                }
            }
            // Boiling Point
            else
            {
                switch (compound.ToLower())
                {
                    case "water": return 100.0f;
                    case "benzene": return 80.1f;
                    case "ethanol": return 78.3f;
                    default: return 0f;
                }
            }
        }

        public string GetMolecularStructure(string compound)
        {
            switch (compound.ToLower())
            {
                case "water": return "H20";
                case "benzene": return "C6H6";
                case "ethanol": return "C2H5OH";
                default: return "";
            }
        }

        public double GetMolecularWeight(string compound)
        {
            switch (compound.ToLower())
            {
                case "water": return 18.015;
                case "benzene": return 78.1134;
                case "ethanol": return 46.0688;
                default: return 0d;
            }
        }
    }
}
```

`Assets/Structural Patterns/Adapter Pattern/Exmaple1/AdapterPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 09cebf61776979b4ba95e7b6fcec9635
timeCreated: 1476583582
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple1/AdapterPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 3634181dfa2d0f34cbf6f1f8f712fed6
timeCreated: 1476583588
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: e85af868ce3c04b47a29feb28fe731f0
folderAsset: yes
timeCreated: 1484095881
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple2/AdapterPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AdapterPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace AdapterPatternExample2
{

    public class AdapterPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            IEnemyAttacker tank = new EnemyTank();

            EnemyRobot fredTheRobot = new EnemyRobot();
            IEnemyAttacker adapter = new EnemyRobotAdaper(fredTheRobot);

            fredTheRobot.ReactToHuman("Hans");
            fredTheRobot.WalkForward();

            tank.AssignDriver("Frank");
            tank.DriveForward();
            tank.FireWeapon();

            adapter.AssignDriver("Mark");
            adapter.DriveForward();
            adapter.FireWeapon();
        }
    }




    public interface IEnemyAttacker
    {
        void FireWeapon();
        void DriveForward();
        void AssignDriver(string driver);
    }


    public class EnemyTank : IEnemyAttacker
    {
        public void FireWeapon()
        {
            int attackDamage = Random.Range(1, 10);
            Debug.Log("Enemy Tank does " + attackDamage + " damage");
        }

        public void DriveForward()
        {
            int movement = Random.Range(1, 5);
            Debug.Log("Enemy Tank moves " + movement + " spaces");
        }

        public void AssignDriver(string driver)
        {
            Debug.Log(driver + " is driving the tank");
        }
    }




    // Adaptee:
    public class EnemyRobot
    {
        public void SmashWithHands()
        {
            int attackDamage = Random.Range(1, 10);
            Debug.Log("Robot causes " + attackDamage + " damage with it hands");
        }

        public void WalkForward()
        {
            int movement = Random.Range(1, 3);
            Debug.Log("Robot walks " + movement + " spaces");
        }

        public void ReactToHuman(string driverName)
        {
            Debug.Log("Robot tramps on " + driverName);
        }
    }


    public class EnemyRobotAdaper : IEnemyAttacker
    {
        EnemyRobot robot;

        public EnemyRobotAdaper(EnemyRobot robot)
        {
            this.robot = robot;
        }

        public void FireWeapon()
        {
            robot.SmashWithHands();
        }

        public void DriveForward()
        {
            robot.WalkForward();
        }

        public void AssignDriver(string driver)
        {
            robot.ReactToHuman(driver);
        }
    }
}

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple2/AdapterPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: c911252f9603e424392724aa3f532a52
timeCreated: 1484095890
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Exmaple2/AdapterPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: d785892aa7d671b4db0aa1284ca42096
timeCreated: 1484095897
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/README.md`:

```md
# Adapter Pattern 适配器模式
## Definition
Convert the interface of a class into another interface clients expect. Adapter lets classes work together that couldn't otherwise because of incompatible interfaces.
<br>将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。
	
![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/adapter.gif)

## Participants

The classes and objects participating in this pattern are:

### Target   (ChemicalCompound)
* defines the domain-specific interface that Client uses.

### Adapter   (Compound)
* adapts the interface Adaptee to the Target interface.

### Adaptee   (ChemicalDatabank)
* defines an existing interface that needs adapting.

### Client   (AdapterApp)
* collaborates with objects conforming to the Target interface.



```

`Assets/Structural Patterns/Adapter Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: d09886b672b139945b598f9c2aec8a0e
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 8ce50f158023e804cbdb02d90e128143
folderAsset: yes
timeCreated: 1476264936
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Structure/AdapterStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	AdapterStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class AdapterStructure : MonoBehaviour
{
	void Start( )
    {
        // Create adapter and place a request
        Target target = new Adapter();
        target.Request();
    }
}

/// <summary>
/// The 'Target' class
/// </summary>
class Target
{
    public virtual void Request()
    {
        Debug.Log("Called Target Request()");
    }
}

/// <summary>
/// The 'Adapter' class
/// </summary>
class Adapter : Target
{
    private Adaptee _adaptee = new Adaptee();

    public override void Request()
    {
        // Possibly do some other work
        //  and then call SpecificRequest
        _adaptee.SpecificRequest();
    }
}

/// <summary>
/// The 'Adaptee' class
/// </summary>
class Adaptee
{
    public void SpecificRequest()
    {
        Debug.Log("Called SpecificRequest()");
    }
}
```

`Assets/Structural Patterns/Adapter Pattern/Structure/AdapterStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 184aae8019b26b44b931731d32c6de54
timeCreated: 1476264944
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Adapter Pattern/Structure/TestAdapterStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 85304e4e668f9e347bb41d291c7b390c
timeCreated: 1476264956
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 84859b2bdbe87cd46b1d9edb23643c27
folderAsset: yes
timeCreated: 1476265572
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 6bfb589303817b24c93bf58a4912c45a
folderAsset: yes
timeCreated: 1476594552
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple1/BridgePatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BridgePatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Bridge pattern in which a BusinessObject abstraction is decoupled from the implementation in DataObject.
//The DataObject implementations can evolve dynamically without changing any clients.

namespace BridgePatternExample1
{

    public class BridgePatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create RefinedAbstraction
            Customers customers = new Customers("Chicago");

            // Set ConcreteImplementor
            customers.Data = new CustomersData();

            // Exercise the bridge
            customers.Show();
            customers.Next();
            customers.Show();
            customers.Next();
            customers.Show();
            customers.Add("Henry Velasquez");

            customers.ShowAll();
        }
    }

    /// <summary>
    /// The 'Abstraction' class
    /// </summary>
    class CustomersBase
    {
        private DataObject _dataObject;
        protected string group;

        public CustomersBase(string group)
        {
            this.group = group;
        }

        // Property
        public DataObject Data
        {
            set { _dataObject = value; }
            get { return _dataObject; }
        }

        public virtual void Next()
        {
            _dataObject.NextRecord();
        }

        public virtual void Prior()
        {
            _dataObject.PriorRecord();
        }

        public virtual void Add(string customer)
        {
            _dataObject.AddRecord(customer);
        }

        public virtual void Delete(string customer)
        {
            _dataObject.DeleteRecord(customer);
        }

        public virtual void Show()
        {
            _dataObject.ShowRecord();
        }

        public virtual void ShowAll()
        {
            Debug.Log("Customer Group: " + group);
            _dataObject.ShowAllRecords();
        }
    }

    /// <summary>
    /// The 'RefinedAbstraction' class
    /// </summary>
    class Customers : CustomersBase
    {
        // Constructor
        public Customers(string group)
          : base(group)
        {
        }

        public override void ShowAll()
        {
            // Add separator lines
            Debug.Log("------------------------");
            base.ShowAll();
            Debug.Log("------------------------");
        }
    }

    /// <summary>
    /// The 'Implementor' abstract class
    /// </summary>
    abstract class DataObject
    {
        public abstract void NextRecord();
        public abstract void PriorRecord();
        public abstract void AddRecord(string name);
        public abstract void DeleteRecord(string name);
        public abstract void ShowRecord();
        public abstract void ShowAllRecords();
    }

    /// <summary>
    /// The 'ConcreteImplementor' class
    /// </summary>
    class CustomersData : DataObject
    {
        private List<string> _customers = new List<string>();
        private int _current = 0;

        public CustomersData()
        {
            // Loaded from a database 
            _customers.Add("Jim Jones");
            _customers.Add("Samual Jackson");
            _customers.Add("Allen Good");
            _customers.Add("Ann Stills");
            _customers.Add("Lisa Giolani");
        }

        public override void NextRecord()
        {
            if (_current <= _customers.Count - 1)
            {
                _current++;
            }
        }

        public override void PriorRecord()
        {
            if (_current > 0)
            {
                _current--;
            }
        }

        public override void AddRecord(string customer)
        {
            _customers.Add(customer);
        }

        public override void DeleteRecord(string customer)
        {
            _customers.Remove(customer);
        }

        public override void ShowRecord()
        {
            Debug.Log(_customers[_current]);
        }

        public override void ShowAllRecords()
        {
            foreach (string customer in _customers)
            {
                Debug.Log(" " + customer);
            }
        }
    }
}
```

`Assets/Structural Patterns/Bridge Pattern/Exmaple1/BridgePatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 0ab6147e35a75e641ba51bc30b359fec
timeCreated: 1476594576
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple1/BridgePatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 96c812479bd7b8843868ac6c90233149
timeCreated: 1476594583
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: 4f0748bffec85a841898cd373d602833
folderAsset: yes
timeCreated: 1484096314
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple2/BridgePatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BridgePatternExample2.cs
//-------------------------------------------------------------------------------------

/* Decouple an abstraction from its implementation so that the two can vary independently
 * 
 * Progressingly adding functionality while separating out major differences using abstract classes
 * (think of remote controls with the same buttons but difference functionality among the buttons for different tvs)
 * 
 * Use when you want to be able rto change both the abstractions (abstract classes) and concrete classes independently
 * 
 * When you want the first abstract class to define rules (Abstract TV)
 * 
 * The concrete class adds additional rules (Concrete TV)
 * 
 * An abstract class has a reference to the device and it defines abstract methods that will be defined (Abstract Remote)
 * 
 * The concrete Remote defines the abstract methods required
 * 
 * */


using UnityEngine;
using System.Collections;

namespace BridgePatternExample2
{
    public class BridgePatternExample2 : MonoBehaviour
    {
        void Start()
        {
            RemoteButton tv = new TVRemoteMute(new TVDevice(1, 200));
            RemoteButton tv2 = new TVRemotePause(new TVDevice(1, 200));

            Debug.Log("Test TV with Mute");
            tv.ButtonFivePressed();
            tv.ButtonSixPressed();
            tv.ButtonNinePressed(); // < this one differs on each tv

            Debug.Log("Test TV with Pause");
            tv2.ButtonFivePressed();
            tv2.ButtonSixPressed();
            tv2.ButtonNinePressed(); // < this one differs on each tv
        }
    }

    public abstract class EntertainmentDevice
    {
        public int deviceState;
        public int maxSetting;
        public int volumeLevel = 0;

        public abstract void ButtonFivePressed();

        public abstract void ButtonSixPressed();

        public void DeviceFeedback()
        {
            if (deviceState > maxSetting || deviceState < 0)
                deviceState = 0;

            Debug.Log("On " + deviceState);
        }

        public void ButtonSevenPressed()
        {
            volumeLevel++;
            Debug.Log("Volume at: " + volumeLevel);
        }

        public void ButtonEightPressed()
        {
            volumeLevel--;
            Debug.Log("Volume at: " + volumeLevel);
        }
    }

    public class TVDevice : EntertainmentDevice
    {
        public TVDevice(int newDeviceState, int newMaxSetting)
        {
            this.deviceState = newDeviceState;
            this.maxSetting = newMaxSetting;
        }

        public override void ButtonFivePressed()
        {
            Debug.Log("Channel up");
            deviceState++;
        }

        public override void ButtonSixPressed()
        {
            Debug.Log("Channel down");
            deviceState--;
        }
    }

    // abstraction layer
    public abstract class RemoteButton
    {
        private EntertainmentDevice device;

        public RemoteButton(EntertainmentDevice device)
        {
            this.device = device;
        }

        public void ButtonFivePressed()
        {
            device.ButtonFivePressed();
        }

        public void ButtonSixPressed()
        {
            device.ButtonSixPressed();
        }

        public void DeviceFeedback()
        {
            device.DeviceFeedback();
        }

        public abstract void ButtonNinePressed();
    }


    // refined abstraction:
    public class TVRemoteMute : RemoteButton
    {
        public TVRemoteMute(EntertainmentDevice device) : base(device)
        {
        }

        public override void ButtonNinePressed()
        {
            Debug.Log("TV was muted.");
        }
    }

    public class TVRemotePause : RemoteButton
    {
        public TVRemotePause(EntertainmentDevice device) : base(device)
        {
        }

        public override void ButtonNinePressed()
        {
            Debug.Log("TV was paused.");
        }
    }


}
```

`Assets/Structural Patterns/Bridge Pattern/Exmaple2/BridgePatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: fba42eded594f464490f68b09c5dd183
timeCreated: 1484096323
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Exmaple2/BridgePatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: dcd96ffb645e8f5498d14c18fd1b6734
timeCreated: 1484096330
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/README.md`:

```md
# Bridge Pattern 桥接模式
## Definition

Decouple an abstraction from its implementation so that the two can vary independently.
<br>将抽象和实现解耦，使得两者可以独立地变化。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/bridge.gif)


## Participants

The classes and objects participating in this pattern are:

### Abstraction   (BusinessObject)
* defines the abstraction's interface.
* maintains a reference to an object of type Implementor.

### RefinedAbstraction   (CustomersBusinessObject)
* extends the interface defined by Abstraction.

### Implementor   (DataObject)
* defines the interface for implementation classes. This interface doesn't have to correspond exactly to Abstraction's interface; in fact the two interfaces can be quite different. Typically the Implementation interface provides only primitive operations, and Abstraction defines higher-level operations based on these primitives.

### ConcreteImplementor   (CustomersDataObject)
* implements the Implementor interface and defines its concrete implementation.


```

`Assets/Structural Patterns/Bridge Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: c0c5b2b6deb32a14ca850be35a1e320e
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 5bf49f191c0af6840bbc7667721c7f64
folderAsset: yes
timeCreated: 1476265593
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Structure/BridgeStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	BridgeStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class BridgeStructure : MonoBehaviour
{
	void Start ( )
    {
        Abstraction ab = new RefinedAbstraction();

        // Set implementation and call
        ab.Implementor = new ConcreteImplementorA();
        ab.Operation();

        // Change implemention and call
        ab.Implementor = new ConcreteImplementorB();
        ab.Operation();
    }
}

/// <summary>
/// The 'Abstraction' class
/// </summary>
class Abstraction
{
    protected Implementor implementor;

    // Property
    public Implementor Implementor
    {
        set { implementor = value; }
    }

    public virtual void Operation()
    {
        implementor.Operation();
    }
}

/// <summary>
/// The 'Implementor' abstract class
/// </summary>
abstract class Implementor
{
    public abstract void Operation();
}

/// <summary>
/// The 'RefinedAbstraction' class
/// </summary>
class RefinedAbstraction : Abstraction
{
    public override void Operation()
    {
        implementor.Operation();
    }
}

/// <summary>
/// The 'ConcreteImplementorA' class
/// </summary>
class ConcreteImplementorA : Implementor
{
    public override void Operation()
    {
        Debug.Log("ConcreteImplementorA Operation");
    }
}

/// <summary>
/// The 'ConcreteImplementorB' class
/// </summary>
class ConcreteImplementorB : Implementor
{
    public override void Operation()
    {
        Debug.Log("ConcreteImplementorB Operation");
    }
}

```

`Assets/Structural Patterns/Bridge Pattern/Structure/BridgeStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 9c88415042c9be34498e2f0f5e9f4218
timeCreated: 1476265606
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Bridge Pattern/Structure/TestBridgeStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 4bd5bd83f66fd0f40acc343facb7804b
timeCreated: 1476265617
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 36656a5cf988231429bc52c4e453fd4e
folderAsset: yes
timeCreated: 1476272428
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 396ea509f63f0e447befed112afdc5c0
folderAsset: yes
timeCreated: 1476621349
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple1/CompositePatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CompositePatternExample1.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;


//This real-world code demonstrates the Composite pattern used in building a graphical tree structure made up of primitive nodes(lines, circles, etc) and composite 
// nodes(groups of drawing elements that make up more complex elements).

namespace CompositePatternExample1
{
    public class CompositePatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create a tree structure 
            CompositeElement root =
              new CompositeElement("Picture");
            root.Add(new PrimitiveElement("Red Line"));
            root.Add(new PrimitiveElement("Blue Circle"));
            root.Add(new PrimitiveElement("Green Box"));

            // Create a branch
            CompositeElement comp =
              new CompositeElement("Two Circles");
            comp.Add(new PrimitiveElement("Black Circle"));
            comp.Add(new PrimitiveElement("White Circle"));
            root.Add(comp);

            // Add and remove a PrimitiveElement
            PrimitiveElement pe =
              new PrimitiveElement("Yellow Line");
            root.Add(pe);
            root.Remove(pe);

            // Recursively display nodes
            root.Display(1);

        }
    }


    /// <summary>
    /// The 'Component' Treenode
    /// </summary>
    abstract class DrawingElement
    {
        protected string _name;

        // Constructor
        public DrawingElement(string name)
        {
            this._name = name;
        }

        public abstract void Add(DrawingElement d);
        public abstract void Remove(DrawingElement d);
        public abstract void Display(int indent);
    }

    /// <summary>
    /// The 'Leaf' class
    /// </summary>
    class PrimitiveElement : DrawingElement
    {
        // Constructor
        public PrimitiveElement(string name)
          : base(name)
        {
        }

        public override void Add(DrawingElement c)
        {
            Debug.Log("Cannot add to a PrimitiveElement");
        }

        public override void Remove(DrawingElement c)
        {
            Debug.Log("Cannot remove from a PrimitiveElement");
        }

        public override void Display(int indent)
        {
            Debug.Log(new String('-', indent) + " " + _name);
        }
    }

    /// <summary>
    /// The 'Composite' class
    /// </summary>
    class CompositeElement : DrawingElement
    {
        private List<DrawingElement> elements =
          new List<DrawingElement>();

        // Constructor
        public CompositeElement(string name)
          : base(name)
        {
        }

        public override void Add(DrawingElement d)
        {
            elements.Add(d);
        }

        public override void Remove(DrawingElement d)
        {
            elements.Remove(d);
        }

        public override void Display(int indent)
        {
            Debug.Log(new String('-', indent) +
              "+ " + _name);

            // Display each child element on this node
            foreach (DrawingElement d in elements)
            {
                d.Display(indent + 2);
            }
        }
    }
}
```

`Assets/Structural Patterns/Composite Pattern/Exmaple1/CompositePatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 30dab455c18272a45a4de8baaa6a0a33
timeCreated: 1476621408
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple1/CompositePatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: c728510a820bb0f41ae0759105950e04
timeCreated: 1476621415
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: 9fbc7b515bd20374782fa68effb64972
folderAsset: yes
timeCreated: 1484096485
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple2/CompositePatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CompositePatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

namespace CompositePatternExample2
{
    public class CompositePatternExample2 : MonoBehaviour
    {
        void Start()
        {
            SongComponent industrialMusic = new SongGroup("Industrial Music", "Industrial music is a genre of experimental music that draws on transgressive and provocative themes. The term was coined in the mid-1970s with the founding of Industrial Records by Genesis P-Orridge of Throbbing Gristle and Monte Cazazza; on Throbbing Gristle's debut album The Second Annual Report, they coined the slogan \"industrial music for industrial people\".");
            SongComponent heavyMetalMusic = new SongGroup("Heavy Metal Music", "Heavy metal is a genre of rock music[1] that developed in the late 1960s and early 1970s, largely in the United States and the United Kingdom.[2] With roots in blues rock and psychedelic rock,[3] the bands that created heavy metal developed a thick, massive sound, characterized by highly amplified distortion, extended guitar solos, emphatic beats, and overall loudness. Heavy metal lyrics and performance styles are often associated with masculinity, aggression, and machismo.[3]");
            SongComponent dubstepMusic = new SongGroup("Dubstep Music", "Dubstep /ˈdʌbstɛp/ is a genre of electronic dance music that originated in South London, England. It emerged in the late 1990s as a development within a lineage of related styles such as 2-step garage, broken beat, drum and bass, jungle, dub and reggae.[2] In the UK the origins of the genre can be traced back to the growth of the Jamaican sound system party scene in the early 1980s.[2][3] The music generally features syncopated drum and percussion patterns with bass lines that contain prominent sub bass frequencies.");

            SongComponent everySong = new SongGroup("Song List", "Every Song available");
            everySong.Add(industrialMusic);
            industrialMusic.Add(new Song("Head Like a Hole", "NIN", 1990));
            industrialMusic.Add(new Song("headhunter", "front 242", 1988));
            // see: here we are adding a group into a group and build up the hierarchy!!!!
            industrialMusic.Add(dubstepMusic);
            dubstepMusic.Add(new Song("Centipede", "Knife Party", 2012));
            dubstepMusic.Add(new Song("Tetris", "doctor P", 2011));

            everySong.Add(heavyMetalMusic);
            heavyMetalMusic.Add(new Song("War Pigs", "Black Sabath", 1970));
            heavyMetalMusic.Add(new Song("Ace of spades", "Motorhead", 1980));

            DiscJockey crazyLarry = new DiscJockey(everySong);
            crazyLarry.GetSongList();
        }
    }


    public abstract class SongComponent
    {
        public virtual void Add(SongComponent component) { }
        public virtual void Remove(SongComponent component) { }
        public virtual SongComponent Get(int index) { return null; }

        public abstract void DisplaySongInformation();
    }


    public class SongGroup : SongComponent
    {
        protected List<SongComponent> components = new List<SongComponent>();
        public string groupName { get; protected set; }
        public string groupDescription { get; protected set; }

        public SongGroup(string name, string description)
        {
            this.groupName = name;
            this.groupDescription = description;
        }

        public override void Add(SongComponent component)
        {
            components.Add(component);
        }

        public override void Remove(SongComponent component)
        {
            components.Remove(component);
        }

        public override SongComponent Get(int i)
        {
            return components[i];
        }

        public override void DisplaySongInformation()
        {
            Debug.Log(groupName + " - " + groupDescription);

            // now iterate through all groups inside this group
            IEnumerator iterator = components.GetEnumerator();
            while (iterator.MoveNext())
            {
                SongComponent songComponent = (SongComponent)iterator.Current;
                songComponent.DisplaySongInformation();
            }
        }
    }

    public class Song : SongComponent
    {
        public string songName { get; protected set; }
        public string bandName { get; protected set; }
        public int releaseYear { get; protected set; }

        public Song(string name, string band, int year)
        {
            this.songName = name;
            this.bandName = band;
            this.releaseYear = year;
        }

        public override void DisplaySongInformation()
        {
            Debug.Log("Song of " + songName + " - " + bandName + " : " + releaseYear);
        }
    }


    public class DiscJockey
    {
        protected SongComponent songList;

        public DiscJockey(SongComponent songList)
        {
            this.songList = songList;
        }

        public void GetSongList()
        {
            songList.DisplaySongInformation();
        }
    }
}

```

`Assets/Structural Patterns/Composite Pattern/Exmaple2/CompositePatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: c9dcc6468e87f3f47aac2d1218bd7af2
timeCreated: 1484096497
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Exmaple2/CompositePatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 3f627a83b0baa7546b1bc79ded005803
timeCreated: 1484096503
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/README.md`:

```md
# Composite Pattern 组合模式
## Definition

Compose objects into tree structures to represent part-whole hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly.
<br>将对象组合成树形结构以表示“部分-整体”的层次结构，使得用户对单个对象和组合对象的使用具有一致性。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/composite.gif)


## Participants

The classes and objects participating in this pattern are:

### Component   (DrawingElement)
* declares the interface for objects in the composition.
* implements default behavior for the interface common to all classes, as appropriate.
* declares an interface for accessing and managing its child components.
* (optional) defines an interface for accessing a component's parent in the recursive structure, and implements it if that's appropriate.

### Leaf   (PrimitiveElement)
* represents leaf objects in the composition. A leaf has no children.
* defines behavior for primitive objects in the composition.

### Composite   (CompositeElement)
* defines behavior for components having children.
* stores child components.
* implements child-related operations in the Component interface.

### Client  (CompositeApp)
* manipulates objects in the composition through the Component interface.


```

`Assets/Structural Patterns/Composite Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 1cc9db3a4d6039a429d3463b4cc54915
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: db27e22d04ea43542b3936fb14bdf894
folderAsset: yes
timeCreated: 1476274102
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Structure/CompositeStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	CompositeStructure.cs
//-------------------------------------------------------------------------------------

using System;
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class CompositeStructure : MonoBehaviour
{
	void Start ( )
    {
        // Create a tree structure
        Composite root = new Composite("root");
        root.Add(new Leaf("Leaf A"));
        root.Add(new Leaf("Leaf B"));

        Composite comp = new Composite("Composite X");
        comp.Add(new Leaf("Leaf XA"));
        comp.Add(new Leaf("Leaf XB"));

        root.Add(comp);
        root.Add(new Leaf("Leaf C"));

        // Add and remove a leaf
        Leaf leaf = new Leaf("Leaf D");
        root.Add(leaf);
        root.Remove(leaf);

        // Recursively display tree
        root.Display(1);

    }
}

/// <summary>
/// The 'Component' abstract class
/// </summary>
abstract class Component
{
    protected string name;

    // Constructor
    public Component(string name)
    {
        this.name = name;
    }

    public abstract void Add(Component c);
    public abstract void Remove(Component c);
    public abstract void Display(int depth);
}

/// <summary>
/// The 'Composite' class
/// </summary>
class Composite : Component
{
    private List<Component> _children = new List<Component>();

    // Constructor
    public Composite(string name)
      : base(name)
    {
    }

    public override void Add(Component component)
    {
        _children.Add(component);
    }

    public override void Remove(Component component)
    {
        _children.Remove(component);
    }

    public override void Display(int depth)
    {
        Debug.Log(new String('-', depth) + name);

        // Recursively display child nodes
        foreach (Component component in _children)
        {
            component.Display(depth + 2);
        }
    }
}

/// <summary>
/// The 'Leaf' class
/// </summary>
class Leaf : Component
{
    // Constructor
    public Leaf(string name)
      : base(name)
    {
    }

    public override void Add(Component c)
    {
        Debug.Log("Cannot add to a leaf");
    }

    public override void Remove(Component c)
    {
        Debug.Log("Cannot remove from a leaf");
    }

    public override void Display(int depth)
    {
        Debug.Log(new String('-', depth) + name);
    }
}

```

`Assets/Structural Patterns/Composite Pattern/Structure/CompositeStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: db61a4cb7eb5b184a8c0646f9494bdd0
timeCreated: 1476272447
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Composite Pattern/Structure/TestCompositeStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 1a257837ecd78a446bc4553316963939
timeCreated: 1476272456
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern.meta`:

```meta
fileFormatVersion: 2
guid: 068da35af1fa46f4b888daef50593f59
folderAsset: yes
timeCreated: 1476274088
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 8c77793c0ffffd3499998bf20c5d6d3d
folderAsset: yes
timeCreated: 1476667420
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple1/DecoratorPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DecoratorPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Decorator pattern in which 'borrowable' functionality is added to existing library items(books and videos).

namespace DecoratorPatternExample1
{

    public class DecoratorPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create book
            Book book = new Book("Worley", "Inside ASP.NET", 10);
            book.Display();

            // Create video
            Video video = new Video("Spielberg", "Jaws", 23, 92);
            video.Display();

            // Make video borrowable, then borrow and display
            Debug.Log("\nMaking video borrowable:");

            Borrowable borrowvideo = new Borrowable(video);
            borrowvideo.BorrowItem("Customer #1");
            borrowvideo.BorrowItem("Customer #2");

            borrowvideo.Display();
        }
    }

    /// <summary>
    /// The 'Component' abstract class
    /// </summary>
    abstract class LibraryItem
    {
        private int _numCopies;

        // Property
        public int NumCopies
        {
            get { return _numCopies; }
            set { _numCopies = value; }
        }

        public abstract void Display();
    }

    /// <summary>
    /// The 'ConcreteComponent' class
    /// </summary>
    class Book : LibraryItem
    {
        private string _author;
        private string _title;

        // Constructor
        public Book(string author, string title, int numCopies)
        {
            this._author = author;
            this._title = title;
            this.NumCopies = numCopies;
        }

        public override void Display()
        {
            Debug.Log("\nBook ------ ");
            Debug.Log(" Author: "+ _author);
            Debug.Log(" Title: "+ _title);
            Debug.Log(" # Copies: "+ NumCopies);
        }
    }

    /// <summary>
    /// The 'ConcreteComponent' class
    /// </summary>
    class Video : LibraryItem
    {
        private string _director;
        private string _title;
        private int _playTime;

        // Constructor
        public Video(string director, string title,
          int numCopies, int playTime)
        {
            this._director = director;
            this._title = title;
            this.NumCopies = numCopies;
            this._playTime = playTime;
        }

        public override void Display()
        {
            Debug.Log("\nVideo ----- ");
            Debug.Log(" Director: "+ _director);
            Debug.Log(" Title: "+ _title);
            Debug.Log(" # Copies: "+ NumCopies);
            Debug.Log(" Playtime: "+ _playTime+ "\n");
        }
    }

    /// <summary>
    /// The 'Decorator' abstract class
    /// </summary>
    abstract class Decorator : LibraryItem
    {
        protected LibraryItem libraryItem;

        // Constructor
        public Decorator(LibraryItem libraryItem)
        {
            this.libraryItem = libraryItem;
        }

        public override void Display()
        {
            libraryItem.Display();
        }
    }

    /// <summary>
    /// The 'ConcreteDecorator' class
    /// </summary>
    class Borrowable : Decorator
    {
        protected List<string> borrowers = new List<string>();

        // Constructor
        public Borrowable(LibraryItem libraryItem)
          : base(libraryItem)
        {
        }

        public void BorrowItem(string name)
        {
            borrowers.Add(name);
            libraryItem.NumCopies--;
        }

        public void ReturnItem(string name)
        {
            borrowers.Remove(name);
            libraryItem.NumCopies++;
        }

        public override void Display()
        {
            base.Display();

            foreach (string borrower in borrowers)
            {
                Debug.Log(" borrower: " + borrower);
            }
        }
    }
}

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple1/DecoratorPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3867b2da7ff596a47a0cd1f1fc23b54f
timeCreated: 1476667433
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple1/DecoratorPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 28b9f7cb58008504cb2c278d8a17c43b
timeCreated: 1476667438
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: bf379eb778ed4cd449876a865b82c63a
folderAsset: yes
timeCreated: 1484096879
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple2/DecoratorPatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DecoratorPatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace DecoratorPatternExample2
{
    public class DecoratorPatternExample2 : MonoBehaviour
    {
        void Start()
        {
            // Make Pizzas:
            IPizza basicPizza = new TomatoSauce(new Mozzarella(new PlainPizza()));
            Debug.Log("Ingredients of Pizza: " + basicPizza.GetDescription());
            Debug.Log("Total Cost: " + basicPizza.GetCost());
        }
    }



    public interface IPizza
    {
        string GetDescription();
        double GetCost();
    }


    public class PlainPizza : IPizza
    {
        public string GetDescription()
        {
            return "Thin Dough";
        }

        public double GetCost()
        {
            return 4.00;
        }
    }



    public abstract class ToppingDecorator : IPizza
    {
        protected IPizza tempPizza;

        public ToppingDecorator(IPizza newPizza)
        {
            this.tempPizza = newPizza;
        }


        public virtual string GetDescription()
        {
            return tempPizza.GetDescription();
        }

        public virtual double GetCost()
        {
            return tempPizza.GetCost();
        }
    }



    public class Mozzarella : ToppingDecorator
    {
        public Mozzarella(IPizza newPizza) : base(newPizza)
        {
            Debug.Log("Adding Dough");
            Debug.Log("Adding Morarella");
        }

        public override string GetDescription()
        {
            return tempPizza.GetDescription() + ", Mozzarella";
        }

        public override double GetCost()
        {
            return tempPizza.GetCost() + 0.50;
        }
    }


    public class TomatoSauce : ToppingDecorator
    {
        public TomatoSauce(IPizza newPizza) : base(newPizza)
        {
            Debug.Log("Adding Sauce");
        }

        public override string GetDescription()
        {
            return tempPizza.GetDescription() + ", Tomato Sauce";
        }

        public override double GetCost()
        {
            return tempPizza.GetCost() + 0.35;
        }
    }




    namespace BadStyleExample
    {
        public abstract class Pizza
        {
            public abstract void SetDescription(string newDescription);
            public abstract string GetDescription();
            public abstract double GetCost();
            //public abstract bool HasFontina();
        }

        // this way would force to create an infinite amount of subclasses for each type of pizza
        // and if cost if calculated off of individual topings you would have to change cost for all pizzas
        // if cost for one topping chages
        public class ThreeCheesePizza : Pizza
        {
            public override void SetDescription(string newDescription)
            {
            }

            public override string GetDescription()
            {
                return "Mozarella, Fontina, Parmesan, Cheese Pizza";
            }

            public override double GetCost()
            {
                return 10.00;
            }

        }
    }

}
```

`Assets/Structural Patterns/Decorator Pattern/Exmaple2/DecoratorPatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4657ecf6e31d6ac4b947e06c8fe27178
timeCreated: 1484096888
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Exmaple2/DecoratorPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: f9b68bd918d884844a7cd1ded9dbed17
timeCreated: 1484096895
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/README.md`:

```md
# Decorator Pattern 装饰模式
## Definition

Attach additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending functionality.
<br>动态地给一个对象添加一些额外的职责。就增加功能来说，装饰模式相比生成子类更为灵活。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/decorator.gif)


## Participants

The classes and objects participating in this pattern are:

### Component   (LibraryItem)
* defines the interface for objects that can have responsibilities added to them dynamically.

### ConcreteComponent   (Book, Video)
* defines an object to which additional responsibilities can be attached.

### Decorator   (Decorator)
* maintains a reference to a Component object and defines an interface that conforms to Component's interface.

### ConcreteDecorator   (Borrowable)
* adds responsibilities to the component.


```

`Assets/Structural Patterns/Decorator Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 1e34d70006fdecc469aee686828e99c7
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 17dd7d52b48f03449a6e93c13c1ed08b
folderAsset: yes
timeCreated: 1476274118
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Structure/DecoratorStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	DecoratorStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace DecoratorStructure
{
    public class DecoratorStructure : MonoBehaviour
    {
	    void Start ( )
        {
            // Create ConcreteComponent and two Decorators
            ConcreteComponent c = new ConcreteComponent();
            ConcreteDecoratorA d1 = new ConcreteDecoratorA();
            ConcreteDecoratorB d2 = new ConcreteDecoratorB();

            // Link decorators
            d1.SetComponent(c);
            d2.SetComponent(d1);

            d2.Operation();
        }
    }

    /// <summary>
    /// The 'Component' abstract class
    /// </summary>
    abstract class Component
    {
        public abstract void Operation();
    }

    /// <summary>
    /// The 'ConcreteComponent' class
    /// </summary>
    class ConcreteComponent : Component
    {
        public override void Operation()
        {
            Debug.Log("ConcreteComponent.Operation()");
        }
    }

    /// <summary>
    /// The 'Decorator' abstract class
    /// </summary>
    abstract class Decorator : Component
    {
        protected Component component;

        public void SetComponent(Component component)
        {
            this.component = component;
        }

        public override void Operation()
        {
            if (component != null)
            {
                component.Operation();
            }
        }
    }

    /// <summary>
    /// The 'ConcreteDecoratorA' class
    /// </summary>
    class ConcreteDecoratorA : Decorator
    {
        public override void Operation()
        {
            base.Operation();
            Debug.Log("ConcreteDecoratorA.Operation()");
        }
    }

    /// <summary>
    /// The 'ConcreteDecoratorB' class
    /// </summary>
    class ConcreteDecoratorB : Decorator
    {
        public override void Operation()
        {
            base.Operation();
            AddedBehavior();
            Debug.Log("ConcreteDecoratorB.Operation()");
        }

        void AddedBehavior()
        {
        }
    }

}
```

`Assets/Structural Patterns/Decorator Pattern/Structure/DecoratorStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 26f3b388537f98449a6db2b64d1af60f
timeCreated: 1476274160
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Decorator Pattern/Structure/TestDecoratorStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 1e1fe2243dff01246822c39e3cf61c07
timeCreated: 1476274201
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern.meta`:

```meta
fileFormatVersion: 2
guid: d4b6936bbc7f7a546a70c7c22d673e29
folderAsset: yes
timeCreated: 1476278124
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 570b487a85355ae46bf6eba5e7a75543
folderAsset: yes
timeCreated: 1476754115
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple1/FacadePatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FacadePatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This real-world code demonstrates the Facade pattern as a MortgageApplication object which provides a simplified interface to a large subsystem of classes measuring the creditworthyness of an applicant.

namespace FacadePatternExample1
{
    public class FacadePatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Facade
            Mortgage mortgage = new Mortgage();

            // Evaluate mortgage eligibility for customer
            Customer customer = new Customer("Ann McKinsey");
            bool eligible = mortgage.IsEligible(customer, 125000);

            Debug.Log("\n" + customer.Name +
                " has been " + (eligible ? "Approved" : "Rejected"));
        }
    }

    /// <summary>
    /// The 'Subsystem ClassA' class
    /// </summary>
    class Bank
    {
        public bool HasSufficientSavings(Customer c, int amount)
        {
            Debug.Log("Check bank for " + c.Name);
            return true;
        }
    }

    /// <summary>
    /// The 'Subsystem ClassB' class
    /// </summary>
    class Credit
    {
        public bool HasGoodCredit(Customer c)
        {
            Debug.Log("Check credit for " + c.Name);
            return true;
        }
    }

    /// <summary>
    /// The 'Subsystem ClassC' class
    /// </summary>
    class Loan
    {
        public bool HasNoBadLoans(Customer c)
        {
            Debug.Log("Check loans for " + c.Name);
            return true;
        }
    }

    /// <summary>
    /// Customer class
    /// </summary>
    class Customer
    {
        private string _name;

        // Constructor
        public Customer(string name)
        {
            this._name = name;
        }

        // Gets the name
        public string Name
        {
            get { return _name; }
        }
    }

    /// <summary>
    /// The 'Facade' class
    /// </summary>
    class Mortgage
    {
        private Bank _bank = new Bank();
        private Loan _loan = new Loan();
        private Credit _credit = new Credit();

        public bool IsEligible(Customer cust, int amount)
        {
            Debug.Log(cust.Name + "applies for " + amount+ " loan\n");

            bool eligible = true;

            // Check creditworthyness of applicant
            if (!_bank.HasSufficientSavings(cust, amount))
            {
                eligible = false;
            }
            else if (!_loan.HasNoBadLoans(cust))
            {
                eligible = false;
            }
            else if (!_credit.HasGoodCredit(cust))
            {
                eligible = false;
            }

            return eligible;
        }
    }
}
```

`Assets/Structural Patterns/Facade Pattern/Exmaple1/FacadePatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 075b47670877b0842a64ebd9eb6541d3
timeCreated: 1476754154
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple1/FacadePatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: d1e8995b3195e9f41bcb46f06b735286
timeCreated: 1476754818
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: 99edbd6dc0542454ea93cc5b7c33cac4
folderAsset: yes
timeCreated: 1484097384
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple2/FacadePatternExample2.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FacadePatternExample2.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace FacadePatternExample2
{
    public class FacadePatternExample2 : MonoBehaviour
    {
        void Start()
        {
            BankAccountFacade bankAccount = new BankAccountFacade(12345678, 1234);

            Debug.Log("\"I want to withdraw $50 dollars!\"");
            bankAccount.WithdrawCash(50.00);

            Debug.Log("\"Mh ok now let me withdraw $5000 dollars!?\"");
            bankAccount.WithdrawCash(5000.00);

            Debug.Log("\"What tf... maybe save some cash, here are $300 bucks ;-)\"");
            bankAccount.DepositCash(300.00);
        }
    }

    public class WelcomeToBank
    {
        public WelcomeToBank()
        {
            Debug.Log("Welcome to ABC Bank");
            Debug.Log("We are happy to deposit your money :-)");
        }
    }

    public class AccountNumberCheck
    {
        private int accountNumber = 12345678;

        public int GetAccountNumber()
        {
            return accountNumber;
        }

        public bool AccountActive(int accNumber)
        {
            if (accNumber == accountNumber)
                return true;
            else
                return false;
        }
    }

    public class SecurityCodeCheck
    {
        private int securityCode = 1234;

        public int GetSecurityCode()
        {
            return securityCode;
        }

        public bool IsCodeCorrect(int code)
        {
            if (code == securityCode)
                return true;
            else
                return false;
        }
    }

    public class FundsCheck
    {
        private double cashInAccount = 1000.00;

        public double GetCashInAccount()
        {
            return cashInAccount;
        }

        protected void DecreaseCashInAccount(double cash)
        {
            cashInAccount -= cash;
        }

        protected void IncreaseCashInAccount(double cash)
        {
            cashInAccount += cash;
        }

        public bool HaveEnoughMoney(double cashToWithdraw)
        {
            if (cashToWithdraw > GetCashInAccount())
            {
                Debug.Log("You don't have enouth money.");
                return false;
            }
            else
            {
                return true;
            }
        }

        public void MakeDeposit(double cash)
        {
            IncreaseCashInAccount(cash);
            Debug.Log("Deposit complete. Current Balance is: " + GetCashInAccount());
        }

        public void WithdrawMoney(double cash)
        {
            DecreaseCashInAccount(cash);
            Debug.Log("Withdraw complete. Current Balance is: " + GetCashInAccount());
        }
    }

    public class BankAccountFacade
    {
        private int accountNumber;
        private int securityCode;
        AccountNumberCheck accChecker;
        SecurityCodeCheck codeChecker;
        FundsCheck fundChecker;
        WelcomeToBank bankWelcome;

        public BankAccountFacade(int accountNumber, int newSecurityCode)
        {
            this.accountNumber = accountNumber;
            this.securityCode = newSecurityCode;

            bankWelcome = new WelcomeToBank();
            codeChecker = new SecurityCodeCheck();
            accChecker = new AccountNumberCheck();
            fundChecker = new FundsCheck();
        }

        public int GetAccountNumber()
        {
            return accountNumber;
        }

        public int GetSecurityCode()
        {
            return securityCode;
        }

        public void WithdrawCash(double cash)
        {
            if (accChecker.AccountActive(GetAccountNumber())
                && codeChecker.IsCodeCorrect(GetSecurityCode())
                && fundChecker.HaveEnoughMoney(cash))
            {
                fundChecker.WithdrawMoney(cash);
                Debug.Log("Transaction complete.");
            }
            else
            {
                Debug.Log("Transaction failed.");
            }
        }

        public void DepositCash(double cash)
        {
            if (accChecker.AccountActive(GetAccountNumber())
                && codeChecker.IsCodeCorrect(GetSecurityCode()))
            {
                fundChecker.MakeDeposit(cash);
                Debug.Log("Transaction complete.");
            }
            else
            {
                Debug.Log("Transaction failed.");
            }
        }
    }

}
```

`Assets/Structural Patterns/Facade Pattern/Exmaple2/FacadePatternExample2.cs.meta`:

```meta
fileFormatVersion: 2
guid: 32b0a00f6bb820c4ea08fd338341f376
timeCreated: 1484097443
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Exmaple2/FacadePatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 6011f0ae75b5e7246a791960df38ae5d
timeCreated: 1484097403
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/README.md`:

```md
# Facade Pattern 外观模式
## Definition

Provide a unified interface to a set of interfaces in a subsystem. Façade defines a higher-level interface that makes the subsystem easier to use.
<br>要求一个子系统的外部与其内部的通信必须通过一个统一的对象进行。外观模式提供一个高层次的接口，使得子系统更易于使用。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/facade.gif)


## Participants

The classes and objects participating in this pattern are:

### Facade   (MortgageApplication)
* knows which subsystem classes are responsible for a request.
* delegates client requests to appropriate subsystem objects.

### Subsystem classes   (Bank, Credit, Loan)
* implement subsystem functionality.
* handle work assigned by the Facade object.
* have no knowledge of the facade and keep no reference to it.


```

`Assets/Structural Patterns/Facade Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 16d967973f8fba6469064425965795b7
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: a00b5cbe41c5879409ffe161018dadbc
folderAsset: yes
timeCreated: 1476278139
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Structure/FacadeStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FacadeStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

public class FacadeStructure : MonoBehaviour
{
	void Start ( )
    {
        Facade facade = new Facade();

        facade.MethodA();
        facade.MethodB();
    }
}

/// <summary>
/// The 'Subsystem ClassA' class
/// </summary>
class SubSystemOne
{
    public void MethodOne()
    {
        Debug.Log(" SubSystemOne Method");
    }
}

/// <summary>
/// The 'Subsystem ClassB' class
/// </summary>
class SubSystemTwo
{
    public void MethodTwo()
    {
        Debug.Log(" SubSystemTwo Method");
    }
}

/// <summary>
/// The 'Subsystem ClassC' class
/// </summary>
class SubSystemThree
{
    public void MethodThree()
    {
        Debug.Log(" SubSystemThree Method");
    }
}

/// <summary>
/// The 'Subsystem ClassD' class
/// </summary>
class SubSystemFour
{
    public void MethodFour()
    {
        Debug.Log(" SubSystemFour Method");
    }
}

/// <summary>
/// The 'Facade' class
/// </summary>
class Facade
{
    private SubSystemOne _one;
    private SubSystemTwo _two;
    private SubSystemThree _three;
    private SubSystemFour _four;

    public Facade()
    {
        _one = new SubSystemOne();
        _two = new SubSystemTwo();
        _three = new SubSystemThree();
        _four = new SubSystemFour();
    }

    public void MethodA()
    {
        Debug.Log("\nMethodA() ---- ");
        _one.MethodOne();
        _two.MethodTwo();
        _four.MethodFour();
    }

    public void MethodB()
    {
        Debug.Log("\nMethodB() ---- ");
        _two.MethodTwo();
        _three.MethodThree();
    }
}
```

`Assets/Structural Patterns/Facade Pattern/Structure/FacadeStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 0fc9f3b028b10dc4f8e039cd61a98589
timeCreated: 1476278156
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Facade Pattern/Structure/TestFacadeStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: fdae0424d0055d6428835560167316fd
timeCreated: 1476278168
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern.meta`:

```meta
fileFormatVersion: 2
guid: cf885358d14dc43488951b99316b5f23
folderAsset: yes
timeCreated: 1476183893
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 64053b4ffa311554193ec3781a79f9a4
folderAsset: yes
timeCreated: 1476754956
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple1/FlyweightPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FlyweightPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;
using System.Collections.Generic;

//This real-world code demonstrates the Flyweight pattern in which a relatively small number of Character objects is shared many times by a document that has potentially many characters.

namespace FlyweightPatternExample1
{
    public class FlyweightPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Build a document with text
            string document = "AAZZBBZB";
            char[] chars = document.ToCharArray();

            CharacterFactory factory = new CharacterFactory();

            // extrinsic state
            int pointSize = 10;

            // For each character use a flyweight object
            foreach (char c in chars)
            {
                pointSize++;
                Character character = factory.GetCharacter(c);
                character.Display(pointSize);
            }
        }
    }

    /// <summary>
    /// The 'FlyweightFactory' class
    /// </summary>
    class CharacterFactory
    {
        private Dictionary<char, Character> _characters =
          new Dictionary<char, Character>();

        public Character GetCharacter(char key)
        {
            // Uses "lazy initialization"
            Character character = null;
            if (_characters.ContainsKey(key))
            {
                character = _characters[key];
            }
            else
            {
                switch (key)
                {
                    case 'A': character = new CharacterA(); break;
                    case 'B': character = new CharacterB(); break;
                    //...
                    case 'Z': character = new CharacterZ(); break;
                }
                _characters.Add(key, character);
            }
            return character;
        }
    }

    /// <summary>
    /// The 'Flyweight' abstract class
    /// </summary>
    abstract class Character
    {
        protected char symbol;
        protected int width;
        protected int height;
        protected int ascent;
        protected int descent;
        protected int pointSize;

        public abstract void Display(int pointSize);
    }

    /// <summary>
    /// A 'ConcreteFlyweight' class
    /// </summary>
    class CharacterA : Character
    {
        // Constructor
        public CharacterA()
        {
            this.symbol = 'A';
            this.height = 100;
            this.width = 120;
            this.ascent = 70;
            this.descent = 0;
        }

        public override void Display(int pointSize)
        {
            this.pointSize = pointSize;
            Debug.Log(this.symbol +
              " (pointsize " + this.pointSize + ")");
        }
    }

    /// <summary>
    /// A 'ConcreteFlyweight' class
    /// </summary>
    class CharacterB : Character
    {
        // Constructor
        public CharacterB()
        {
            this.symbol = 'B';
            this.height = 100;
            this.width = 140;
            this.ascent = 72;
            this.descent = 0;
        }

        public override void Display(int pointSize)
        {
            this.pointSize = pointSize;
            Debug.Log(this.symbol +
              " (pointsize " + this.pointSize + ")");
        }

    }

    // ... C, D, E, etc.

    /// <summary>
    /// A 'ConcreteFlyweight' class
    /// </summary>
    class CharacterZ : Character
    {
        // Constructor
        public CharacterZ()
        {
            this.symbol = 'Z';
            this.height = 100;
            this.width = 100;
            this.ascent = 68;
            this.descent = 0;
        }

        public override void Display(int pointSize)
        {
            this.pointSize = pointSize;
            Debug.Log(this.symbol + " (pointsize " + this.pointSize + ")");
        }
    }
}
```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple1/FlyweightPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4247c59b7e2801f4996a9c73c1ff553f
timeCreated: 1476754987
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple1/FlyweightPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: 7e3ba5b70c9907240b31163e382f1157
timeCreated: 1476754972
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple2.meta`:

```meta
fileFormatVersion: 2
guid: d2b38f262ef13d440a1b9cad3ef91279
folderAsset: yes
timeCreated: 1484098693
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Exmaple2/FlyweightPatternExample2.unity.meta`:

```meta
fileFormatVersion: 2
guid: 9edd0c980566ed042898f3efa2b74957
timeCreated: 1484098693
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/README.md`:

```md
# Flyweight Pattern 享元模式
## Definition

Use sharing to support large numbers of fine-grained objects efficiently.
<br>使用共享对象可有效地支持大量的细粒度的对象。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/flyweight.gif)


## Participants

The classes and objects participating in this pattern are:

### Flyweight   (Character)
* declares an interface through which flyweights can receive and act on extrinsic state.

### ConcreteFlyweight   (CharacterA, CharacterB, ..., CharacterZ)
* implements the Flyweight interface and adds storage for intrinsic state, if any. A ConcreteFlyweight object must be sharable. Any state it stores must be intrinsic, that is, it must be independent of the ConcreteFlyweight object's context.

### UnsharedConcreteFlyweight   ( not used )
* not all Flyweight subclasses need to be shared. The Flyweight interface enables sharing, but it doesn't enforce it. It is common for UnsharedConcreteFlyweight objects to have ConcreteFlyweight objects as children at some level in the flyweight object structure (as the Row and Column classes have).

### FlyweightFactory   (CharacterFactory)
* creates and manages flyweight objects
* ensures that flyweight are shared properly. When a client requests a flyweight, the FlyweightFactory objects assets an existing instance or creates one, if none exists.

### Client   (FlyweightApp)
* maintains a reference to flyweight(s).
* computes or stores the extrinsic state of flyweight(s).


```

`Assets/Structural Patterns/Flyweight Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: 1f7e3d8ed3b98264f8cd98ad776e2ee5
timeCreated: 1476361211
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: cdbd4123ca83a394eabb248cc90fd3fe
folderAsset: yes
timeCreated: 1476183940
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Structure/FlyweightStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	FlyweightStructure.cs
//-------------------------------------------------------------------------------------

// [Definition]
//----------------------------------------------------------------------
// Use sharing to support large numbers of fine-grained objects efficiently.

// [Participants]
//----------------------------------------------------------------------
//     The classes and objects participating in this pattern are:
// 
// Flyweight
//      declares an interface through which flyweights can receive and act on extrinsic state.
// ConcreteFlyweight
//      implements the Flyweight interface and adds storage for intrinsic state, if any.A ConcreteFlyweight object must be sharable.Any state it stores must be intrinsic, that is, it must be independent of the ConcreteFlyweight object's context.
// UnsharedConcreteFlyweight
//      not all Flyweight subclasses need to be shared.The Flyweight interface enables sharing, but it doesn't enforce it. It is common for UnsharedConcreteFlyweight objects to have ConcreteFlyweight objects as children at some level in the flyweight object structure (as the Row and Column classes have).
// FlyweightFactory
//      creates and manages flyweight objects
//      ensures that flyweight are shared properly.When a client requests a flyweight, the FlyweightFactory objects assets an existing instance or creates one, if none exists.
// Client
//      maintains a reference to flyweight(s).
//      computes or stores the extrinsic state of flyweight(s).



using UnityEngine;
using System.Collections;

public class FlyweightStructure : MonoBehaviour
{
    void Start()
    {
        // Arbitrary extrinsic state(外部状态)
        int externalState = 22;

        FlyweightFactory factory = new FlyweightFactory();

        // Work with different flyweight instances
        Flyweight fx = factory.GetFlyweight("X");
        fx.Operation(--externalState);

        Flyweight fy = factory.GetFlyweight("Y");
        fy.Operation(--externalState);

        Flyweight fz = factory.GetFlyweight("Z");
        fz.Operation(--externalState);

        UnsharedConcreteFlyweight fu = new
          UnsharedConcreteFlyweight();

        fu.Operation(--externalState);

    }
}

/// <summary>
/// The 'FlyweightFactory' class
/// </summary>
class FlyweightFactory
{
    private Hashtable flyweights = new Hashtable();

    // Constructor
    public FlyweightFactory()
    {
        flyweights.Add("X", new ConcreteFlyweight());
        flyweights.Add("Y", new ConcreteFlyweight());
        flyweights.Add("Z", new ConcreteFlyweight());
    }

    public Flyweight GetFlyweight(string key)
    {
        return ((Flyweight)flyweights[key]);
    }
}

/// <summary>
/// The 'Flyweight' abstract class
/// </summary>
abstract class Flyweight
{
    public abstract void Operation(int externalState);
}

/// <summary>
/// The 'ConcreteFlyweight' class
/// </summary>
class ConcreteFlyweight : Flyweight
{
    public override void Operation(int externalState)
    {
        Debug.Log("ConcreteFlyweight: " + externalState);
    }
}

/// <summary>
/// The 'UnsharedConcreteFlyweight' class
/// </summary>
class UnsharedConcreteFlyweight : Flyweight
{
    public override void Operation(int externalState)
    {
        Debug.Log("UnsharedConcreteFlyweight: " + externalState);
    }
}

```

`Assets/Structural Patterns/Flyweight Pattern/Structure/FlyweightStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 82c7e190889607143bf10bfe596fe239
timeCreated: 1476183975
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Flyweight Pattern/Structure/TestFlyweightStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 513ae228349861b4c88ea684246c2ec9
timeCreated: 1476188296
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern.meta`:

```meta
fileFormatVersion: 2
guid: f309d1545e508a748830cb1c72fb6be3
folderAsset: yes
timeCreated: 1476278430
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Exmaple1.meta`:

```meta
fileFormatVersion: 2
guid: 5223d4133694a314096ef2bfd6f541c7
folderAsset: yes
timeCreated: 1476755644
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Exmaple1/ProxyPatternExample1.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ProxyPatternExample1.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

//This real-world code demonstrates the Proxy pattern for a Math object represented by a MathProxy object.
namespace ProxyPatternExample1
{
    public class ProxyPatternExample1 : MonoBehaviour
    {
        void Start()
        {
            // Create math proxy
            MathProxy proxy = new MathProxy();

            // Do the math
            Debug.Log("4 + 2 = " + proxy.Add(4, 2));
            Debug.Log("4 - 2 = " + proxy.Sub(4, 2));
            Debug.Log("4 * 2 = " + proxy.Mul(4, 2));
            Debug.Log("4 / 2 = " + proxy.Div(4, 2));
        }
    }

    /// <summary>
    /// The 'Subject interface
    /// </summary>
    public interface IMath
    {
        double Add(double x, double y);
        double Sub(double x, double y);
        double Mul(double x, double y);
        double Div(double x, double y);
    }

    /// <summary>
    /// The 'RealSubject' class
    /// </summary>
    class Math : IMath
    {
        public double Add(double x, double y) { return x + y; }
        public double Sub(double x, double y) { return x - y; }
        public double Mul(double x, double y) { return x * y; }
        public double Div(double x, double y) { return x / y; }
    }

    /// <summary>
    /// The 'Proxy Object' class
    /// </summary>
    class MathProxy : IMath
    {
        private Math _math = new Math();

        public double Add(double x, double y)
        {
            return _math.Add(x, y);
        }
        public double Sub(double x, double y)
        {
            return _math.Sub(x, y);
        }
        public double Mul(double x, double y)
        {
            return _math.Mul(x, y);
        }
        public double Div(double x, double y)
        {
            return _math.Div(x, y);
        }
    }
}
```

`Assets/Structural Patterns/Proxy Pattern/Exmaple1/ProxyPatternExample1.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6a6558bdcebd3bf449f8970a3098821b
timeCreated: 1476755679
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Exmaple1/ProxyPatternExample1.unity.meta`:

```meta
fileFormatVersion: 2
guid: d1adafe4d4af2d94e9738b2ba2c46b18
timeCreated: 1476755686
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/README.md`:

```md
# Proxy Pattern 代理模式
## Definition

Provide a surrogate or placeholder for another object to control access to it.
<br>为其他对象提供一种代理以控制对这个对象的访问。

![](https://github.com/QianMo/Unity-Design-Pattern/blob/master/UML_Picture/proxy.gif)


## Participants

The classes and objects participating in this pattern are:

### Proxy   (MathProxy)
* maintains a reference that lets the proxy access the real subject. Proxy may refer to a Subject if the RealSubject and Subject interfaces are the same.
* provides an interface identical to Subject's so that a proxy can be substituted for for the real subject.
* controls access to the real subject and may be responsible for creating and deleting it.
* other responsibilites depend on the kind of proxy:
	* `remote proxies` are responsible for encoding a request and its arguments and for sending the encoded request to the real subject in a different address space.
	* `virtual proxies` may cache additional information about the real subject so that they can postpone accessing it. For example, the ImageProxy from the Motivation caches the real images's extent.
	* `protection proxies` check that the caller has the access permissions required to perform a request.

### Subject   (IMath)
* defines the common interface for RealSubject and Proxy so that a Proxy can be used anywhere a RealSubject is expected.

### RealSubject   (Math)
* defines the real object that the proxy represents.


```

`Assets/Structural Patterns/Proxy Pattern/README.md.meta`:

```meta
fileFormatVersion: 2
guid: de3de172e48cbea4096314b1706d569a
timeCreated: 1476361212
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Structure.meta`:

```meta
fileFormatVersion: 2
guid: 3f0c5cd5a31754c4d8f696b31e03432c
folderAsset: yes
timeCreated: 1476278436
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Structure/ProxyStructure.cs`:

```cs
//-------------------------------------------------------------------------------------
//	ProxyStructure.cs
//-------------------------------------------------------------------------------------

using UnityEngine;
using System.Collections;

namespace ProxyStructure
{

    public class ProxyStructure : MonoBehaviour
    {
	    void Start ( )
        {
            // Create proxy and request a service
            Proxy proxy = new Proxy();
            proxy.Request();
        }
    }

    /// <summary>
    /// The 'Subject' abstract class
    /// </summary>
    abstract class Subject
    {
        public abstract void Request();
    }

    /// <summary>
    /// The 'RealSubject' class
    /// </summary>
    class RealSubject : Subject
    {
        public override void Request()
        {
            Debug.Log("Called RealSubject.Request()");
        }
    }

    /// <summary>
    /// The 'Proxy' class
    /// </summary>
    class Proxy : Subject
    {
        private RealSubject _realSubject;

        public override void Request()
        {
            // Use 'lazy initialization'
            if (_realSubject == null)
            {
                _realSubject = new RealSubject();
            }

            _realSubject.Request();
        }
    }
}
```

`Assets/Structural Patterns/Proxy Pattern/Structure/ProxyStructure.cs.meta`:

```meta
fileFormatVersion: 2
guid: 84158e269a5be584e96fde26eaa74f14
timeCreated: 1476278444
licenseType: Pro
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Structural Patterns/Proxy Pattern/Structure/TestProxyStructure.unity.meta`:

```meta
fileFormatVersion: 2
guid: 799e2b58574bc784eadc43a48d58fbb8
timeCreated: 1476278451
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Tools.meta`:

```meta
fileFormatVersion: 2
guid: 61d6c600e012d5b42add76f840cf4a05
folderAsset: yes
timeCreated: 1476177688
licenseType: Pro
DefaultImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Tools/Canvas.prefab.meta`:

```meta
fileFormatVersion: 2
guid: 36d9b74c8d9ab0141825245b0c7b1ec4
timeCreated: 1476159139
licenseType: Pro
NativeFormatImporter:
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`ProjectSettings/ProjectVersion.txt`:

```txt
m_EditorVersion: 2017.1.5f1

```

`README.md`:

```md
![](Media/repo-cover.jpg)

# Design Patterns Written in Unity3D
This repository is about cool design patterns written in Unity3D C#. 
* Now 23 [Gang of Four Patterns] have all been finished in Unity3D in this repository.
* Each pattern contains the corresponding structure implementations, application examples and diagrams. Same way with [Naphier/unity-design-patterns], in this repository each pattern is contained in a separate folder. Inside these are a folder ("Structure") to show what classes are used in the pattern's structure in Unity3D(with a scene) and a folder or folders ("Example") showing one or more real-world example of using the pattern in Unity3D along with a scene showing it in action. Each pattern folder may contain one or more Example.
* Game design patterns from book [Game Programming Patterns] have been partially implemented.

此repo为Unity3D中各种设计模式的实践与运用。
* 目前已经在Unity中实现了《[设计模式:可复用面向对象软件的基础]》一书中提出的23种设计模式。
* 每种模式都包含对应的结构实现、应用示例以及图示介绍。类似[Naphier/unity-design-patterns]的结构，此repo中的每种模式用单独的文件夹分开。每种模式对应的文件夹中包含了名为“Structure”的子文件夹，里面存放的是此模式在Unity中的使用代码的基本框架实现，而另外包含的Example子文件夹中存放的是此模式在Unity中使用的实际示例。每种框架实现或实例示例实现都包含对应的场景，每种模式文件夹中可能包含一个或者多个Example。
* 《[游戏编程模式]》一书中介绍的常用游戏设计模式的Unity版实现也有部分实现。

# Contents
## I、Gang of Four Patterns in Unity （23种GOF设计模式的Unity实现）
### Behavioral Patterns 行为型模式
* [Command Pattern 命令模式]
* [State Pattern 状态模式]
* [Observer Pattern 观察者模式]
* [Chain of Responsibility Pattern 责任链模式]
* [Mediator Pattern 中介者模式]
* [Interpreter Pattern 解释器模式]
* [Iterator Pattern 迭代器模式]
* [Memento Pattern 备忘录模式]
* [Strategy Pattern 策略模式]
* [Template Method Pattern 模板方法模式]
* [Visitor Pattern 访问者模式]


### Structural Patterns 结构型模式
* [Adapter Pattern 适配器模式]
* [Bridge Pattern 桥接模式]
* [Composite Pattern 组合模式]
* [Decorator Pattern 装饰模式]
* [Facade Pattern 外观模式]
* [Flyweight Pattern 享元模式]
* [Proxy Pattern 代理模式]


### Creational Patterns 创建型模式
* [Prototype Pattern 原型模式]
* [Singleton Pattern 单例模式]
* [Abstract Factory Pattern 抽象工厂模式]
* [Builder Pattern 建造者模式]
* [Factory Method Pattern 工厂方法模式]

<br> 

## II、Game Programming Patterns in Unity （《游戏编程模式》的Unity实现）
* [Subclass Sandbox Pattern 子类沙盒模式]
* [Type Object Pattern 类型对象模式]
* [Component Pattern 组件模式]
* [Event Queue Pattern 事件队列模式]
* [Game Loop Pattern 游戏循环模式]
* [Service Locator Pattern 服务定位器模式]
* [Data Locality Pattern 数据局部性模式]
* [Dirty Flag Pattern 脏标记模式]
* [Object Pool Pattern 对象池模式]
<br> 

# Reference resources(参考)

* http://gameprogrammingpatterns.com/
* https://www.youtube.com/playlist?list=PLF206E906175C7E07
* https://github.com/Naphier/unity-design-patterns
* http://www.dofactory.com/net/design-patterns
* https://sourcemaking.com/design_patterns
* http://www.habrador.com/tutorials/programming-patterns/
* [Gang of Four Patterns]
* [Head First Design Patterns]
* [设计模式与游戏完美开发]

[State Pattern 状态模式]:https://github.com/QianMo/Unity3D-Design-Patterns/tree/master/Assets/Behavioral%20Patterns/State%20Pattern
[Command Pattern 命令模式]: https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Command%20Pattern
[Observer Pattern 观察者模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Observer%20Pattern
[Chain of Responsibility Pattern 责任链模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Chain%20of%20Responsibility%20Pattern
[Mediator Pattern 中介者模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Mediator%20Pattern
[Interpreter Pattern 解释器模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Interpreter%20Pattern
[Iterator Pattern 迭代器模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Iterator%20Pattern
[Memento Pattern 备忘录模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Memento%20Pattern
[Strategy Pattern 策略模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Strategy%20Pattern
[Template Method Pattern 模板方法模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Template%20Method%20Pattern
[Visitor Pattern 访问者模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Behavioral%20Patterns/Visitor%20Pattern
[Adapter Pattern 适配器模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Adapter%20Pattern
[Bridge Pattern 桥接模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Bridge%20Pattern
[Composite Pattern 组合模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Composite%20Pattern
[Decorator Pattern 装饰模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Decorator%20Pattern
[Facade Pattern 外观模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Facade%20Pattern
[Flyweight Pattern 享元模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Flyweight%20Pattern
[Proxy Pattern 代理模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Structural%20Patterns/Proxy%20Pattern
[Abstract Factory Pattern 抽象工厂模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Creational%20Patterns/Abstract%20Factory%20Pattern
[Builder Pattern 建造者模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Creational%20Patterns/Builder%20Pattern
[Factory Method Pattern 工厂方法模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Creational%20Patterns/Factory%20Method%20Pattern
[Prototype Pattern 原型模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Creational%20Patterns/Prototype%20Pattern
[Singleton Pattern 单例模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Creational%20Patterns/Singleton%20Pattern

[Subclass Sandbox Pattern 子类沙盒模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/SubclassSandbox%20Pattern
[Type Object Pattern 类型对象模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Type%20Object%20Pattern
[Component Pattern 组件模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Component%20Pattern
[Event Queue Pattern 事件队列模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Event%20Queue%20Pattern
[Game Loop Pattern 游戏循环模式]:https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Game%20Loop%20Pattern
[Service Locator Pattern 服务定位器模式]:
https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Service%20Locator%20Pattern
[Data Locality Pattern 数据局部性模式]:
https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Data%20Locality%20Pattern
[Dirty Flag Pattern 脏标记模式]:
https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Dirty%20Flag%20Pattern
[Object Pool Pattern 对象池模式]:
https://github.com/QianMo/Unity-Design-Pattern/tree/master/Assets/Game%20Programming%20Patterns/Object%20Pool%20Pattern



[Gang of Four Patterns]:https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/ref=sr_1_1?ie=UTF8&qid=1476338345&sr=8-1&keywords=design+patterns
[Game Programming Patterns]:http://gameprogrammingpatterns.com/
[设计模式:可复用面向对象软件的基础]:https://www.amazon.cn/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%9B%E4%B9%A6-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%9F%BA%E7%A1%80-Erich-Gamma/dp/B001130JN8/ref=sr_1_1?ie=UTF8&qid=1476338390&sr=8-1&keywords=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F
[游戏编程模式]:http://gameprogrammingpatterns.com/
[Head First Design Patterns]:https://www.amazon.com/dp/0596007124//ref=cm_sw_su_dp?tag=nethta-20
[Naphier/unity-design-patterns]:https://github.com/Naphier/unity-design-patterns
[设计模式与游戏完美开发]:https://www.amazon.cn/dp/B01N9GO0ZC

```

`UnityPackageManager/manifest.json`:

```json
{
	"dependencies": {
	}
}

```