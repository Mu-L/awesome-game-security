Project Path: arc_ookiineko_magiskboot_build_oig57n4d

Source Tree:

```txt
arc_ookiineko_magiskboot_build_oig57n4d
├── CMakeLists.android.txt
├── CMakeLists.compat.txt
├── CMakeLists.magisk.txt
├── CMakeLists.magiskboot.txt
├── CMakeLists.patch.txt
├── CMakeLists.rust.txt
├── CMakeLists.stub.txt
├── CMakeLists.txt
├── LICENSE
├── LICENSE.magiskboot
├── Makefile
├── README.md
├── include
│   └── flags.h.in
├── include-android
│   ├── fortify_stub.h
│   └── libbsd_stub.h
├── patches
│   ├── Magisk
│   │   ├── 0001-native-fix-header-includes.patch
│   │   ├── 0002-fix-builds-for-some-OS.patch
│   │   ├── 0003-base-files-disable-BLKGETSIZE-for-non-Linux.patch
│   │   ├── 0004-disable-funcs-not-used-by-magiskboot.patch
│   │   ├── 0005-base-rust-add-fd_path-impl-for-other-OS.patch
│   │   ├── 0006-disable-libc-funcs-not-used-by-magiskboot.patch
│   │   ├── 0007-HACK-support-cfg-attribute-in-build-script.patch
│   │   ├── 0008-fix-build-err-on-MinGW.patch
│   │   ├── 0009-drop-rust-funcs-unused-by-magiskboot.patch
│   │   └── 0010-workaround-UTF-8-issues-on-Windows.patch
│   ├── android_core
│   │   ├── 0001-Fix-inclusion-of-stdatomic.h-with-g.patch
│   │   ├── 0008-Vector-don-t-assign-to-const-object.patch
│   │   ├── 0009-Don-t-use-the-internal-glibc-header-sys-cdefs.h.patch
│   │   └── 0010-Correct-version-in-which-gettid-was-introduced-to-gl.patch
│   ├── android_libbase
│   │   ├── 0001-android-base-endian.h-fix-build-on-musl.patch
│   │   ├── 0002-remove-glibc-internal-headers-cdefs.h.patch
│   │   ├── 0003-logging.h-only-activate-ostream-warnings-when-clang-.patch
│   │   ├── 0004-Don-t-use-thread-safety-annotations-with-gcc.patch
│   │   ├── 0005-fix-unique_fd.h-for-Termux.patch
│   │   ├── 0006-remove-usage-of-__builtin_available.patch
│   │   ├── 0007-fix-properties-for-Termux.patch
│   │   ├── 0008-fix-header-include-for-non-Linux.patch
│   │   └── 0009-file-stub-GetExecutablePath-for-non-Linux.patch
│   ├── android_logging
│   │   ├── 0001-Don-t-use-the-internal-glibc-header-sys-cdefs.h.patch
│   │   ├── 0002-Fix-inclusion-of-stdatomic.h-with-g.patch
│   │   ├── 0003-fix-__INTRODUCED_IN-attributes-for-Termux.patch
│   │   ├── 0004-fix-initializer-element-is-not-constant-error-when-b.patch
│   │   ├── 0005-disable-logd-and-pmsg-on-Android.patch
│   │   ├── 0006-Cygwin-has-getprogname.patch
│   │   └── 0007-liblog-logger-don-t-use-std-namespace-on-Windows.patch
│   ├── corrosion
│   │   ├── 0001-support-pc-windows-gnullvm-targets.patch
│   │   ├── 0002-suppress-rustup-target-not-installed-error.patch
│   │   └── 0003-allow-adding-required-cargo-rust-flags-when-detectin.patch
│   ├── mman-win32
│   │   ├── 0001-set-winerr-via-winsup.patch
│   │   └── 0002-implement-MAP_PRIVATE-using-copy-on-write-protection.patch
│   └── msvc_getline
│       ├── 0001-adapt-to-MinGW.patch
│       └── 0002-support-cpp.patch
├── patches-contrib
│   └── Magisk
│       └── 0029-workaround-support-building-with-libstdcxx.patch
├── scripts
│   ├── clone_submodules.sh
│   └── magiskboot_test.sh
└── src
    ├── Magisk
    ├── android_core
    ├── android_fmtlib
    ├── android_libbase
    ├── android_logging
    ├── corrosion
    ├── libc-compat
    │   ├── common
    │   │   └── __errno.c
    │   ├── emsup
    │   │   └── mmap_hack.c
    │   ├── include
    │   │   ├── emsup
    │   │   │   └── mkdev_stubs.h
    │   │   ├── libbsd
    │   │   │   └── str_compat.h
    │   │   └── winsup
    │   │       ├── acl_compat.h
    │   │       ├── at_compat.h
    │   │       ├── dirent_compat.h
    │   │       ├── io_compat.h
    │   │       ├── link_compat.h
    │   │       ├── mkdir_compat.h
    │   │       ├── mknod_compat.h
    │   │       ├── stat_compat.h
    │   │       ├── str_compat.h
    │   │       └── uio_compat.h
    │   ├── libbsd
    │   │   └── str.c
    │   ├── non-linux
    │   │   └── sendfile_fallback.c
    │   ├── placeholder.c
    │   ├── rs
    │   │   ├── Cargo.toml
    │   │   ├── common
    │   │   │   ├── mod.rs
    │   │   │   ├── overrides.rs
    │   │   │   └── stubs
    │   │   │       ├── errno.rs
    │   │   │       ├── fcntl.rs
    │   │   │       ├── lfs64.rs
    │   │   │       ├── mod.rs
    │   │   │       ├── sc_num.rs
    │   │   │       └── sendfile.rs
    │   │   ├── emscripten
    │   │   │   ├── defs.rs
    │   │   │   ├── missing_defs.rs
    │   │   │   └── mod.rs
    │   │   ├── lib.rs
    │   │   ├── macros.rs
    │   │   └── windows
    │   │       ├── defs.rs
    │   │       ├── missing_defs.rs
    │   │       ├── mod.rs
    │   │       └── stubs.rs
    │   └── winsup
    │       ├── acl.c
    │       ├── at.c
    │       ├── crt_flags.c
    │       ├── dirent.c
    │       ├── file.c
    │       ├── internal
    │       │   ├── assert.c
    │       │   ├── assert.h
    │       │   ├── errno.c
    │       │   ├── errno.h
    │       │   ├── fd.c
    │       │   ├── fd.h
    │       │   └── winerr_map.h
    │       ├── io.c
    │       ├── link.c
    │       ├── mkdir.c
    │       ├── mknod_stub.c
    │       ├── open.c
    │       ├── stat.c
    │       ├── str.c
    │       └── uio.c
    ├── magiskbase-rs-wrapper.cc
    ├── magiskboot-rs-wrapper.cc
    ├── mman-win32
    ├── msvc_getline
    └── winsup-rs
        ├── Cargo.toml
        ├── fd.rs
        └── lib.rs

```

`CMakeLists.android.txt`:

```txt
# the followings are copied from android-tools

add_subdirectory(src/android_fmtlib EXCLUDE_FROM_ALL)

add_library(android_liblog STATIC
    src/android_logging/liblog/log_event_list.cpp
    src/android_logging/liblog/log_event_write.cpp
    src/android_logging/liblog/logger_name.cpp
    src/android_logging/liblog/logger_read.cpp
    src/android_logging/liblog/logger_write.cpp
    src/android_logging/liblog/properties.cpp
    src/android_logging/liblog/logprint.cpp)
target_compile_definitions(android_liblog PRIVATE
    -DLIBLOG_LOG_TAG=1006 -D_XOPEN_SOURCE=700 -DFAKE_LOG_DEVICE=1)
target_include_directories(android_liblog PUBLIC
    src/android_core/include
    src/android_logging/liblog/include
    src/android_core/libcutils/include
    src/android_libbase/include)

add_library(android_libbase STATIC
    src/android_libbase/abi_compatibility.cpp
    src/android_libbase/chrono_utils.cpp
    src/android_libbase/file.cpp
    src/android_libbase/hex.cpp
    src/android_libbase/logging.cpp
    src/android_libbase/mapped_file.cpp
    src/android_libbase/parsebool.cpp
    src/android_libbase/parsenetaddress.cpp
    src/android_libbase/posix_strerror_r.cpp
    src/android_libbase/properties.cpp
    src/android_libbase/stringprintf.cpp
    src/android_libbase/strings.cpp
    src/android_libbase/threads.cpp
    src/android_libbase/test_utils.cpp
    src/android_libbase/errors_unix.cpp)
target_include_directories(android_libbase PUBLIC
    src/android_libbase/include src/android_core/include)
target_link_libraries(android_libbase PUBLIC fmt::fmt android_liblog)


```

`CMakeLists.compat.txt`:

```txt
string(TOLOWER "${CMAKE_SYSTEM_NAME}" CXXBRIDGE_GEN_TARGET_OS)

if (CMAKE_SYSTEM_NAME STREQUAL "Linux")
    # no-op
elseif (CMAKE_SYSTEM_NAME STREQUAL "Android")
    # no-op
elseif (APPLE)
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -D_DARWIN_C_SOURCE -D__DARWIN_C_LEVEL=__DARWIN_C_FULL")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -D_DARWIN_C_SOURCE -D__DARWIN_C_LEVEL=__DARWIN_C_FULL")

    if (CMAKE_CROSSCOMPILING)
        message(STATUS "Homebrew is disabled due to cross-compiling")
    else()
        find_program(HOMEBREW_EXECUTABLE brew REQUIRED)
        execute_process(
            COMMAND ${HOMEBREW_EXECUTABLE} --prefix
            OUTPUT_VARIABLE "HOMEBREW_PREFIX"
            ERROR_QUIET
            OUTPUT_STRIP_TRAILING_WHITESPACE
        )
        execute_process(
            COMMAND ${HOMEBREW_EXECUTABLE} --version
            OUTPUT_VARIABLE "HOMEBREW_VERSION"
            ERROR_QUIET
            OUTPUT_STRIP_TRAILING_WHITESPACE
        )
        if (HOMEBREW_VERSION MATCHES "^Homebrew[ \t]+")
            string(REGEX MATCH "^Homebrew[ \t]+[^\n]+" HOMEBREW_VERSION ${HOMEBREW_VERSION})
            string(REGEX REPLACE "^Homebrew[ \t]+" "" HOMEBREW_VERSION ${HOMEBREW_VERSION})
        else()
            set(HOMEBREW_VERSION "unknown")
        endif()
        if (EXISTS ${HOMEBREW_PREFIX})
            message(STATUS "Found Homebrew: ${HOMEBREW_EXECUTABLE} (version ${HOMEBREW_VERSION})")
        else()
            message(WARNING "Cannot find Homebrew")
        endif()
        list(APPEND CMAKE_SYSTEM_PREFIX_PATH ${HOMEBREW_PREFIX})
    endif()
elseif (WIN32)
    # force struct stat to use 64-bit time_t (to match Rust's libc crate)
    add_compile_definitions(__MINGW_USE_VC2005_COMPAT)

    # handled in CMakeLists.stub.txt
elseif (CYGWIN)
    add_compile_definitions(__USE_LINUX_IOCTL_DEFS)
elseif (EMSCRIPTEN)
    # exists in musl but not in rust libc crate
    list(APPEND RUSTFLAGS --cfg mbb_stubs_SYS_dup3)
else()
    message(WARNING "
        New platform: ${CMAKE_SYSTEM_NAME}

        You can file an Issue about this platform at https://github.com/ookiineko/magiskboot_build/issues if the build fails")
endif()

include(CheckSymbolExists)
check_symbol_exists(_GNU_SOURCE "features.h" HAVE__GNU_SOURCE)
if(NOT HAVE__GNU_SOURCE)
    add_compile_definitions(_GNU_SOURCE)
    set(CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS} -D_GNU_SOURCE")
endif()

add_compile_definitions(_FILE_OFFSET_BITS=64 _LARGEFILE64_SOURCE)
set(CMAKE_REQUIRED_FLAGS "${CMAKE_REQUIRED_FLAGS} -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE")

list(APPEND CMAKE_REQUIRED_INCLUDES "sys/types.h")
include(CheckTypeSize)
check_type_size(off64_t SIZEOF_off64_t)
if(NOT HAVE_off64_t)
    add_compile_definitions(off64_t=off_t)
endif()

include(CheckSymbolExists)
check_symbol_exists(lseek64 "unistd.h" LSEEK64_EXISTS)
if(NOT LSEEK64_EXISTS)
    add_compile_definitions(lseek64=lseek)

    list(APPEND RUSTFLAGS --cfg mbb_stubs_lseek64)
endif()

check_symbol_exists(lseek64 "unistd.h" FTRUNCATE64_EXISTS)
if(NOT FTRUNCATE64_EXISTS)
    add_compile_definitions(ftruncate64=ftruncate)
endif()

check_symbol_exists(O_PATH "fcntl.h" HAVE_O_PATH)
if(NOT HAVE_O_PATH)
    list(APPEND RUSTFLAGS --cfg mbb_stubs_O_PATH)
endif()

check_symbol_exists(SYS_dup3 "sys/syscall.h" HAVE_SYS_dup3)
if(NOT HAVE_SYS_dup3)
    list(APPEND RUSTFLAGS --cfg mbb_stubs_SYS_dup3)
endif()

if (CMAKE_SYSTEM_NAME MATCHES "Android")
    message(STATUS "Fortify enabled")
    add_compile_options(-D_FORTIFY_SOURCE=2)
else()
    message(STATUS "Fortify disabled")
    # Couldn't bypass fortify, so disable it
    # see also: include-android/fortify_stub.h
    add_compile_options(-U_FORTIFY_SOURCE)

    include(CMakeLists.android.txt)
endif()

check_symbol_exists(sendfile "sys/sendfile.h" HAVE_sendfile)
if (NOT HAVE_sendfile)
    list(APPEND RUSTFLAGS --cfg mbb_stubs_sendfile)
endif()

check_symbol_exists(__errno "errno.h" HAVE___errno)
if(NOT HAVE___errno)
    list(APPEND RUSTFLAGS --cfg mbb_stubs___errno)
endif()

```

`CMakeLists.magisk.txt`:

```txt
if (NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/include/flags.h)
    find_package(Git REQUIRED)
    if (EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk/.git)
        execute_process(
            COMMAND ${GIT_EXECUTABLE} rev-parse --short HEAD
            WORKING_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk"
            OUTPUT_VARIABLE "MAGISK_VERSION"
            COMMAND_ERROR_IS_FATAL ANY
            OUTPUT_STRIP_TRAILING_WHITESPACE
        )
    else()
        message(FATAL_ERROR "Cannot find Magisk")
    endif()

    # fallback version
    set(MAGISK_VER_CODE 1000000)

    if (EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk/gradle.properties)
        file(STRINGS ${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk/gradle.properties MAGISK_CONFIG_CONTENTS)
        foreach (MAGISK_CONFIG_LINE ${MAGISK_CONFIG_CONTENTS})
            string(REGEX REPLACE "^[ ]+" "" MAGISK_CONFIG_LINE ${MAGISK_CONFIG_LINE})
            if (MAGISK_CONFIG_LINE STREQUAL "" OR MAGISK_CONFIG_LINE MATCHES "^#")
                continue()
            else()
                string(REGEX MATCH "^[^=]+=[^=#]+" MAGISK_CONFIG_KV ${MAGISK_CONFIG_LINE})
                if (MAGISK_CONFIG_KV STREQUAL "")
                    continue()
                else()
                    if (MAGISK_CONFIG_KV MATCHES "^magisk\\.")
                        string(REGEX REPLACE "^magisk\\." "" MAGISK_CONFIG_KV ${MAGISK_CONFIG_KV})
                        string(REGEX MATCH "^[^=]+" MAGISK_CONFIG_KEY ${MAGISK_CONFIG_KV})
                        string(REGEX REPLACE "^${MAGISK_CONFIG_KEY}=" "" MAGISK_CONFIG_VALUE ${MAGISK_CONFIG_KV})
                        if (MAGISK_CONFIG_KEY STREQUAL "versionCode")
                            set(MAGISK_VER_CODE "${MAGISK_CONFIG_VALUE}")
                        else()
                            continue()
                        endif()
                    else()
                        continue()
                    endif()
                endif()
            endif()
        endforeach()
    endif()
    message(STATUS "Magisk version: ${MAGISK_VERSION} (version code \"${MAGISK_VER_CODE}\")")
    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/include/flags.h.in ${CMAKE_CURRENT_SOURCE_DIR}/include/flags.h @ONLY)
endif()

if (CMAKE_BUILD_TYPE MATCHES "Debug")
    set(MAGISK_DEBUG "1")
else()
    set(MAGISK_DEBUG "0")
endif()
find_program(sed_EXECUTABLE sed REQUIRED)
message(STATUS "Found sed: ${sed_EXECUTABLE}")

# https://unix.stackexchange.com/questions/715352/using-sed-with-i-option-creates-strangely-named-new-file-while-leaving-the
if (APPLE)
    # need a space
    set(sed_REPLACE_COMMAND ${sed_EXECUTABLE} -i '')
else()
    # need no space
    set(sed_REPLACE_COMMAND ${sed_EXECUTABLE} -i'')
endif()

add_custom_target(generate_flags_h_in
                  DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/include/flags.h
                  BYPRODUCTS ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h.in
                  COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_CURRENT_BINARY_DIR}/generated
                  COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/include/flags.h ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h.in
                  COMMAND ${sed_REPLACE_COMMAND} "s/!MAGISK_DEBUG!/${MAGISK_DEBUG}/g" ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h.in
                  COMMENT "Generating C header flags.h.in")
add_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h
                   DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h.in
                   COMMAND ${CMAKE_COMMAND} -E copy_if_different ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h.in ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h
                   COMMENT "Preparing C header flags.h")
add_custom_target(prepared_generated_directory
                  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/generated/flags.h)

```

`CMakeLists.magiskboot.txt`:

```txt
# partially copied from Magisk

corrosion_import_crate(MANIFEST_PATH ${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk/native/src/Cargo.toml
                       CRATES magiskboot)
if (RUSTFLAGS)
    corrosion_add_target_rustflags(magiskboot ${RUSTFLAGS})
endif()
if (CARGO_FLAGS)
    corrosion_set_cargo_flags(magiskboot ${CARGO_FLAGS})
endif()
corrosion_set_env_vars(magiskboot
                       CXXBRIDGE_GEN_TARGET_OS=${CXXBRIDGE_GEN_TARGET_OS}
                       RUSTC_BOOTSTRAP=${RUSTC_BOOTSTRAP})

add_custom_target(workspace_cleanup
                 COMMAND ${CMAKE_COMMAND} -E remove -f ${CMAKE_CURRENT_SOURCE_DIR}/src/Magisk/native/src/.cargo/config.toml
                 COMMENT "Cleaning up workspace")
add_dependencies(_cargo-build_magiskboot workspace_cleanup)

add_library(libbase STATIC
    src/Magisk/native/src/base/files.cpp
    src/Magisk/native/src/base/misc.cpp
    src/Magisk/native/src/base/logging.cpp
    src/Magisk/native/src/base/stream.cpp
    src/Magisk/native/src/external/cxx-rs/src/cxx.cc
    src/magiskbase-rs-wrapper.cc)
add_dependencies(libbase magiskboot-static)
target_compile_definitions(libbase PRIVATE -DRUST_CXX_NO_EXCEPTIONS)
add_dependencies(libbase prepared_generated_directory)
target_include_directories(libbase PRIVATE
    src/Magisk/native/src/base
    src/Magisk/native/src/external/cxx-rs/include
    ${CMAKE_CURRENT_BINARY_DIR}/generated)
target_include_directories(libbase PUBLIC
    src/Magisk/native/src/include
    src/Magisk/native/src/base/include)
if (CMAKE_SYSTEM_NAME MATCHES "Android")
    message(STATUS "Native liblog enabled")
    target_link_libraries(libbase log)
else()
    target_compile_options(libbase PUBLIC --include=${CMAKE_CURRENT_SOURCE_DIR}/include-android/fortify_stub.h)

    include(CheckSymbolExists)
    check_symbol_exists("__printflike" "sys/cdefs.h" HAVE_PRINTFLIKE)
    if (NOT HAVE_PRINTFLIKE)
        target_compile_options(libbase PUBLIC --include=${CMAKE_CURRENT_SOURCE_DIR}/include-android/libbsd_stub.h)
    endif()

    message(STATUS "Using bundled liblog")
    target_link_libraries(libbase android_liblog)
endif()

add_library(libzopfli STATIC
    src/Magisk/native/src/external/zopfli/src/zopfli/blocksplitter.c
    src/Magisk/native/src/external/zopfli/src/zopfli/cache.c
    src/Magisk/native/src/external/zopfli/src/zopfli/deflate.c
    src/Magisk/native/src/external/zopfli/src/zopfli/gzip_container.c
    src/Magisk/native/src/external/zopfli/src/zopfli/hash.c
    src/Magisk/native/src/external/zopfli/src/zopfli/katajainen.c
    src/Magisk/native/src/external/zopfli/src/zopfli/lz77.c
    src/Magisk/native/src/external/zopfli/src/zopfli/squeeze.c
    src/Magisk/native/src/external/zopfli/src/zopfli/tree.c
    src/Magisk/native/src/external/zopfli/src/zopfli/util.c
    src/Magisk/native/src/external/zopfli/src/zopfli/zlib_container.c
    src/Magisk/native/src/external/zopfli/src/zopfli/zopfli_lib.c)
target_include_directories(libzopfli PUBLIC
    src/Magisk/native/src/external/zopfli/src)
target_compile_options(libzopfli PRIVATE
    -Werror -Wno-unused -Wno-unused-parameter)

add_executable(magiskboot_exe
    src/Magisk/native/src/boot/main.cpp
    src/Magisk/native/src/boot/bootimg.cpp
    src/Magisk/native/src/boot/compress.cpp
    src/Magisk/native/src/boot/format.cpp
    src/magiskboot-rs-wrapper.cc)
add_dependencies(magiskboot_exe magiskboot-static)
target_include_directories(magiskboot_exe PRIVATE
    src/Magisk/native/src/external/cxx-rs/include)
target_link_libraries(magiskboot_exe
    libbase
    magiskboot-static
    LibLZMA::LibLZMA
    PkgConfig::liblz4
    BZip2::BZip2
    ZLIB::ZLIB
    libzopfli
    Threads::Threads)

include(GNUInstallDirs)
install(TARGETS magiskboot_exe DESTINATION ${CMAKE_INSTALL_BINDIR})

```

`CMakeLists.patch.txt`:

```txt
# XXX: Consider using https://cmake.org/cmake/help/v3.0/module/ExternalProject.html
if(NOT EXISTS ${CMAKE_CURRENT_BINARY_DIR}/.mbb_patched AND EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/patches")
    find_program(PATCH_EXECUTABLE patch REQUIRED)
    message(STATUS "Found patch: ${PATCH_EXECUTABLE}")

    find_package(Git REQUIRED)

    if (${CMAKE_HOST_SYSTEM_NAME} MATCHES "Windows|MSYS")
        # for searching "find" program, not the win32 one
        find_program(cygpath_EXECUTABLE cygpath REQUIRED)
        message(STATUS "Found cygpath: ${cygpath_EXECUTABLE}")

        execute_process(
            COMMAND ${cygpath_EXECUTABLE} -m /bin
            OUTPUT_VARIABLE "FIND_FIND_PATH"
            COMMAND_ERROR_IS_FATAL ANY
            OUTPUT_STRIP_TRAILING_WHITESPACE
        )

        # for the below quirk
        find_program(find_EXECUTABLE find REQUIRED PATHS ${FIND_FIND_PATH})
        message(STATUS "Found find: ${find_EXECUTABLE}")
    endif()

    set(vendored_dirs
        Magisk
        android_logging
        android_libbase
        android_core
        android_fmtlib
        mman-win32
        msvc_getline
        corrosion)

    if (${CMAKE_HOST_SYSTEM_NAME} MATCHES "Windows|MSYS")
        execute_process(COMMAND ${GIT_EXECUTABLE} submodule foreach --recursive ${GIT_EXECUTABLE} config core.symlinks true
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    endif()

    execute_process(COMMAND ${GIT_EXECUTABLE} submodule update --force --recursive
                    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    execute_process(COMMAND ${GIT_EXECUTABLE} submodule foreach --recursive ${GIT_EXECUTABLE} clean -fd
                    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})

    if (${CMAKE_HOST_SYSTEM_NAME} MATCHES "Windows|MSYS")
        # HACK: On Windows, symlinks have two different types: file and directory,
        #       if the target path doesn't exist when the symlink is created,
        #       Cygwin will fallback to create a non-native link, which makes the
        #       symlink unusable to pure Win32 apps (e.g. our compilers) later.
        #
        #       Since the target path may not exist at the time of creation, we can fix
        #       this by deleting all the symlinks after the first checkout and
        #       letting Git to re-create them for us.
        execute_process(COMMAND ${find_EXECUTABLE} -type l -exec rm -f {} +
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
        execute_process(COMMAND ${GIT_EXECUTABLE} submodule update --force --recursive
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    endif()

    foreach(vendored_dir ${vendored_dirs})
        file(GLOB patches ${CMAKE_CURRENT_SOURCE_DIR}/patches/${vendored_dir}/*.patch)
        if(patches)
            foreach(patch_filename ${patches})
                message(STATUS "Applying ${patch_filename} for: ${vendored_dir}")
                execute_process(COMMAND ${PATCH_EXECUTABLE} -p1 -i ${patch_filename} --no-backup-if-mismatch
                    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/src/${vendored_dir}
                                RESULT_VARIABLE ret)

                if(NOT ret STREQUAL "0")
                    message(FATAL_ERROR "Couldn't apply ${patch_filename} for ${vendored_dir}")
                endif()
            endforeach()
        endif()
    endforeach()

    file(WRITE ${CMAKE_CURRENT_BINARY_DIR}/.mbb_patched "")
endif()

```

`CMakeLists.rust.txt`:

```txt
if (CMAKE_BUILD_TYPE MATCHES "MinSize")
    message(STATUS "Rust build will be optimized for size")
    list(APPEND RUSTFLAGS -Copt-level=z)
endif()

if (CMAKE_BUILD_TYPE MATCHES "WithDebInfo")
    message(STATUS "Debug info enabled for Rust build")
    list(APPEND RUSTFLAGS -g)
endif()

list(APPEND RUSTFLAGS -A dead_code
                      -A unused_imports
                      -A redundant_semicolons
                      -A unused_unsafe)

if (RUST_BUILD_STD)
    message(STATUS "Building Rust STD from source")
    set(CARGO_FLAGS ${CARGO_FLAGS} -Zbuild-std)
    set(Rust_Detect_CARGO_FLAGS ${Rust_Detect_CARGO_FLAGS} -Zbuild-std)
else()
    message(STATUS "Using prebuilt Rust STD")
endif()

set(Rust_Detect_ENV_VARS RUSTC_BOOTSTRAP=${RUSTC_BOOTSTRAP})

if (FULL_RUST_LTO)
    message(STATUS "Full LTO enabled")
    list(APPEND RUSTFLAGS -Clto=yes)
    list(APPEND RUSTFLAGS -Clinker-plugin-lto=yes)
    list(APPEND RUSTFLAGS -Cembed-bitcode=yes)
else()
    message(STATUS "Full LTO disabled")
    list(APPEND RUSTFLAGS -Clto=no)
    list(APPEND RUSTFLAGS -Clinker-plugin-lto=no)
    list(APPEND RUSTFLAGS -Cembed-bitcode=no)
endif()

message(STATUS "RUSTFLAGS: ${RUSTFLAGS}")
message(STATUS "CARGO_FLAGS: ${CARGO_FLAGS}")

# Rust/Cargo integration for CMake (aka cmake-cargo)
# Doc: https://corrosion-rs.github.io/corrosion/
add_subdirectory(src/corrosion)

```

`CMakeLists.stub.txt`:

```txt
include(CheckSymbolExists)
check_symbol_exists(
    "strlcpy"
    "string.h"
    HAVE_STRLCPY)
if (HAVE_STRLCPY)
    target_compile_definitions(libbase PRIVATE
        -DHAVE_STRLCPY)
endif()

add_library(platform_stubs STATIC
    src/libc-compat/placeholder.c)
target_include_directories(platform_stubs PUBLIC src/libc-compat/include)

if (NOT HAVE_sendfile)
    message(STATUS "Using generic sendfile replacement")
    target_sources(platform_stubs PRIVATE
        src/libc-compat/non-linux/sendfile_fallback.c)
endif()

if (NOT HAVE_STRLCPY)
    message(STATUS "Using bundled libbsd strlcpy implementation")
    target_sources(platform_stubs PRIVATE
        src/libc-compat/libbsd/str.c)
endif()

if(NOT HAVE___errno)
    target_sources(platform_stubs PRIVATE
        src/libc-compat/common/__errno.c)

    # e.g Linux and Emscripten
    check_symbol_exists(__errno_location "errno.h" HAVE___errno_location)
    if (HAVE___errno_location)
        set_source_files_properties(src/libc-compat/common/__errno.c PROPERTIES
                                    COMPILE_FLAGS -DHAVE___errno_location)
    else()
        # e.g macOS
        check_symbol_exists(__error "errno.h" HAVE___error)
        if (HAVE___error)
        set_source_files_properties(src/libc-compat/common/__errno.c PROPERTIES
                                    COMPILE_FLAGS -DHAVE___error)
        else()
            # e.g MinGW
            check_symbol_exists(_errno "errno.h" HAVE__errno)
            if (HAVE__errno)
                set_source_files_properties(src/libc-compat/common/__errno.c PROPERTIES
                                            COMPILE_FLAGS -DHAVE__errno)
            else()
                message(FATAL_ERROR "Don't know errno implementation on this platform")
            endif()
        endif()
    endif()

    message(STATUS "Using __errno alias")
endif()

if (WIN32)
    message(STATUS "Using win32 libc-compat")

    target_sources(platform_stubs PRIVATE
        src/libc-compat/winsup/acl.c
        src/libc-compat/winsup/at.c
        src/libc-compat/winsup/dirent.c
        src/libc-compat/winsup/file.c
        src/libc-compat/winsup/io.c
        src/libc-compat/winsup/link.c
        src/libc-compat/winsup/mkdir.c
        src/libc-compat/winsup/mknod_stub.c
        src/libc-compat/winsup/open.c
        src/libc-compat/winsup/stat.c
        src/libc-compat/winsup/str.c
        src/libc-compat/winsup/uio.c
        src/libc-compat/winsup/internal/assert.c
        src/libc-compat/winsup/internal/errno.c
        src/libc-compat/winsup/internal/fd.c)
    target_link_libraries(platform_stubs INTERFACE shlwapi)

    # these source files contains symbols that must not be excluded from the final executable
    target_sources(magiskboot_exe PRIVATE
        src/libc-compat/winsup/crt_flags.c)

    add_library(libmman STATIC
        src/mman-win32/mman.c)
    target_compile_definitions(libmman PRIVATE -DWITH_WINSUP)
    target_include_directories(libmman PUBLIC src/mman-win32)
    target_link_libraries(platform_stubs INTERFACE libmman)

    add_library(libgetline STATIC
        src/msvc_getline/getline.c)
    target_include_directories(libgetline PUBLIC src/msvc_getline)
    target_link_libraries(platform_stubs INTERFACE libgetline)

    target_include_directories(android_libbase PRIVATE src/libc-compat/include)

    # libc-compat overrides
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--wrap=creat -Wl,--wrap=open -Wl,--wrap=fopen")
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--wrap=fdopen -Wl,--wrap=fstat -Wl,--wrap=CreateFileW")

    # Rust STD is directly using these
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--wrap=_creat -Wl,--wrap=_open -Wl,--wrap=_fdopen -Wl,--wrap=_fstat64")

    # llvm-mingw uses a different mangling
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--wrap=CreateFileW@28")
endif()

if (EMSCRIPTEN)
    message(STATUS "Using Emscripten mmap stubs")

    target_sources(platform_stubs PRIVATE
        src/libc-compat/emsup/mmap_hack.c)

    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -sALLOW_MEMORY_GROWTH -Wl,-u,ntohs -Wl,-u,htons -Wl,-u,htonl")
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--wrap=close -Wl,--wrap=fclose")
endif()

target_link_libraries(libbase platform_stubs)
target_link_libraries(magiskboot_exe platform_stubs)

```

`CMakeLists.txt`:

```txt
cmake_minimum_required(VERSION 3.22)
project(magiskboot_build LANGUAGES C)

# Build-related options
option(WITHOUT_BUILD "Turn this on if you are creating source tarball only" OFF)

option(TRY_USE_LLD "Prefer LLD for linking when available" ON)

# Option to enable or disable building static linked version of magiskboot.
# If enabled, the build result will be a standalone binary which you can run
# on any device with the same operating system and architecture.
# This requires installing depended static libraries on the host.
option(PREFER_STATIC_LINKING "Prefer static libraries when linking" OFF)

# C++ related options
option(WITH_LIBCXX "Link libcxx instead of libstdc++" ON)

# Rust related options
option(FULL_RUST_LTO "Keep LLVM bitcode in Rust libraries for LTO (requires LLD)" OFF)
set(RUSTFLAGS "" CACHE STRING "extra flags passed to rustc")
set(CARGO_FLAGS "" CACHE STRING "extra flags passed to cargo")
set(RUSTC_BOOTSTRAP "winsup,base,magiskboot" CACHE STRING "")

# useful for cross-compiling
option(RUST_BUILD_STD "Build Rust standard library" OFF)

if (NOT WITHOUT_BUILD)
    enable_language(CXX)

    set(CMAKE_C_STANDARD 11)
    set(CMAKE_C_EXTENSIONS ON)
    set(CMAKE_C_STANDARD_REQUIRED ON)
    set(CMAKE_CXX_STANDARD 20)
    set(CMAKE_CXX_EXTENSIONS ON)
    set(CMAKE_CXX_STANDARD_REQUIRED ON)

    include(CheckCXXSourceCompiles)
    check_cxx_source_compiles("
        int main () {
            struct { int x; } __attribute__ ((packed)) foo = { 1337 };
            [] (int &a) { (void) a; } (foo.x);
        }
    " CXX_COMPILER_BIND_PACKED_FIELD_WORKS)

    if (NOT CXX_COMPILER_BIND_PACKED_FIELD_WORKS)
        message(FATAL_ERROR "Your C++ compiler is not capable of building magiskboot, please check FAQ in README for more details.")
    endif()

    if (WITH_LIBCXX)
        message(STATUS "Libc++ is enabled")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libc++")
        set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -stdlib=libc++")
    else()
        message(STATUS "Libc++ is disabled")
    endif()
endif()

include(CMakeLists.magisk.txt)
include(CMakeLists.patch.txt)

if (NOT WITHOUT_BUILD)
    include(CheckLinkerFlag)
    if (TRY_USE_LLD)
        check_linker_flag(CXX -fuse-ld=lld FUSE_LD_EQ_LLD_WORKS)

        # prefer LLD when it is available
        if (FUSE_LD_EQ_LLD_WORKS)
            set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -fuse-ld=lld")
            set(CMAKE_REQUIRED_LINK_OPTIONS ${CMAKE_REQUIRED_LINK_OPTIONS} -fuse-ld=lld)
        endif()
    endif()

    include(CMakeLists.compat.txt)

    find_package(PkgConfig REQUIRED)
    if (PREFER_STATIC_LINKING)
        message(STATUS "Static/standalone build")
        list(INSERT CMAKE_FIND_LIBRARY_PREFIXES 0 ${CMAKE_STATIC_LIBRARY_PREFIX})
        list(INSERT CMAKE_FIND_LIBRARY_SUFFIXES 0 ${CMAKE_STATIC_LIBRARY_SUFFIX})
        list(APPEND PKG_CONFIG_EXECUTABLE "--static")
        include(CheckLinkerFlag)
        check_linker_flag(CXX -static STATIC_LINK_WORKS)
        if (STATIC_LINK_WORKS)
            set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static")
        endif()
        check_linker_flag(CXX -static-libgcc STATIC_LIBGCC_LINK_WORKS)
        if (STATIC_LIBGCC_LINK_WORKS)
            set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static-libgcc")
        endif()
        check_linker_flag(CXX -static-libstdc++ STATIC_LIBSTDCXX_LINK_WORKS)
        if (STATIC_LIBSTDCXX_LINK_WORKS)
            set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static-libstdc++")
        endif()
    else()
        message(STATUS "Dynamic build")
    endif()

    set(THREADS_PREFER_PTHREAD_FLAG ON)
    find_package(Threads REQUIRED)
    find_package(LibLZMA REQUIRED)
    pkg_check_modules(liblz4 REQUIRED IMPORTED_TARGET liblz4)
    find_package(BZip2 REQUIRED)
    find_package(ZLIB REQUIRED)

    add_compile_options(-Wall)

    include(CMakeLists.rust.txt)
    include(CMakeLists.magiskboot.txt)

    if (CMAKE_BUILD_TYPE MATCHES "Debug")
        set_target_properties(magiskboot_exe PROPERTIES OUTPUT_NAME "magiskboot_debug")
        message(STATUS "Debug (unoptimized) build")
    else()
        set_target_properties(magiskboot_exe PROPERTIES OUTPUT_NAME "magiskboot")
        message(STATUS "Release (optimized) build")
    endif()

    include(CMakeLists.stub.txt)
endif()

# CPack configuration for creating source tarballs which already include
# patched versions of the vendored dependencies.
set(CPACK_SOURCE_GENERATOR "TXZ")
set(CPACK_SOURCE_PACKAGE_FILE_NAME "magiskboot_${MAGISK_VERSION}_${MAGISK_VER_CODE}-src")
set(CPACK_SOURCE_IGNORE_FILES "/patches/" "/build/" "/.git/" "/src/Magisk/app/"
    "/src/Magisk/buildSrc/" "/src/Magisk/docs/" "/src/Magisk/gradle/"
    "/src/Magisk/scripts/" "/src/Magisk/stub/" "/src/Magisk/tools/ndk-bins"
    "\\\\.so$" "\\\\.dll$" "\\\\.zip$" "\\\\.orig" "\\\\.rej" "\\\\.tar$"
    "\\\\.tar\\\\..*$" "\\\\.tgz$" "\\\\.data$" "aes_128_gcm.txt" "aes_256_gcm.txt")
include(CPack)

```

`LICENSE`:

```

                                 Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

```

`LICENSE.magiskboot`:

```magiskboot
                    GNU GENERAL PUBLIC LICENSE
                       Version 3, 29 June 2007

 Copyright (C) 2007 Free Software Foundation, Inc. <http://fsf.org/>
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

                            Preamble

  The GNU General Public License is a free, copyleft license for
software and other kinds of works.

  The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom to
share and change all versions of a program--to make sure it remains free
software for all its users.  We, the Free Software Foundation, use the
GNU General Public License for most of our software; it applies also to
any other work released this way by its authors.  You can apply it to
your programs, too.

  When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

  To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you have
certain responsibilities if you distribute copies of the software, or if
you modify it: responsibilities to respect the freedom of others.

  For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too, receive
or can get the source code.  And you must show them these terms so they
know their rights.

  Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

  For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

  Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the manufacturer
can do so.  This is fundamentally incompatible with the aim of
protecting users' freedom to change the software.  The systematic
pattern of such abuse occurs in the area of products for individuals to
use, which is precisely where it is most unacceptable.  Therefore, we
have designed this version of the GPL to prohibit the practice for those
products.  If such problems arise substantially in other domains, we
stand ready to extend this provision to those domains in future versions
of the GPL, as needed to protect the freedom of users.

  Finally, every program is threatened constantly by software patents.
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish to
avoid the special danger that patents applied to a free program could
make it effectively proprietary.  To prevent this, the GPL assures that
patents cannot be used to render the program non-free.

  The precise terms and conditions for copying, distribution and
modification follow.

                       TERMS AND CONDITIONS

  0. Definitions.

  "This License" refers to version 3 of the GNU General Public License.

  "Copyright" also means copyright-like laws that apply to other kinds of
works, such as semiconductor masks.

  "The Program" refers to any copyrightable work licensed under this
License.  Each licensee is addressed as "you".  "Licensees" and
"recipients" may be individuals or organizations.

  To "modify" a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of an
exact copy.  The resulting work is called a "modified version" of the
earlier work or a work "based on" the earlier work.

  A "covered work" means either the unmodified Program or a work based
on the Program.

  To "propagate" a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

  To "convey" a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user through
a computer network, with no transfer of a copy, is not conveying.

  An interactive user interface displays "Appropriate Legal Notices"
to the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

  1. Source Code.

  The "source code" for a work means the preferred form of the work
for making modifications to it.  "Object code" means any non-source
form of a work.

  A "Standard Interface" means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

  The "System Libraries" of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
"Major Component", in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

  The "Corresponding Source" for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

  The Corresponding Source need not include anything that users
can regenerate automatically from other parts of the Corresponding
Source.

  The Corresponding Source for a work in source code form is that
same work.

  2. Basic Permissions.

  All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

  You may make, run and propagate covered works that you do not
convey, without conditions so long as your license otherwise remains
in force.  You may convey covered works to others for the sole purpose
of having them make modifications exclusively for you, or provide you
with facilities for running those works, provided that you comply with
the terms of this License in conveying all material for which you do
not control copyright.  Those thus making or running the covered works
for you must do so exclusively on your behalf, under your direction
and control, on terms that prohibit them from making any copies of
your copyrighted material outside their relationship with you.

  Conveying under any other circumstances is permitted solely under
the conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

  3. Protecting Users' Legal Rights From Anti-Circumvention Law.

  No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

  When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such circumvention
is effected by exercising rights under this License with respect to
the covered work, and you disclaim any intention to limit operation or
modification of the work as a means of enforcing, against the work's
users, your or third parties' legal rights to forbid circumvention of
technological measures.

  4. Conveying Verbatim Copies.

  You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

  You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

  5. Conveying Modified Source Versions.

  You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these conditions:

    a) The work must carry prominent notices stating that you modified
    it, and giving a relevant date.

    b) The work must carry prominent notices stating that it is
    released under this License and any conditions added under section
    7.  This requirement modifies the requirement in section 4 to
    "keep intact all notices".

    c) You must license the entire work, as a whole, under this
    License to anyone who comes into possession of a copy.  This
    License will therefore apply, along with any applicable section 7
    additional terms, to the whole of the work, and all its parts,
    regardless of how they are packaged.  This License gives no
    permission to license the work in any other way, but it does not
    invalidate such permission if you have separately received it.

    d) If the work has interactive user interfaces, each must display
    Appropriate Legal Notices; however, if the Program has interactive
    interfaces that do not display Appropriate Legal Notices, your
    work need not make them do so.

  A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
"aggregate" if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

  6. Conveying Non-Source Forms.

  You may convey a covered work in object code form under the terms
of sections 4 and 5, provided that you also convey the
machine-readable Corresponding Source under the terms of this License,
in one of these ways:

    a) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by the
    Corresponding Source fixed on a durable physical medium
    customarily used for software interchange.

    b) Convey the object code in, or embodied in, a physical product
    (including a physical distribution medium), accompanied by a
    written offer, valid for at least three years and valid for as
    long as you offer spare parts or customer support for that product
    model, to give anyone who possesses the object code either (1) a
    copy of the Corresponding Source for all the software in the
    product that is covered by this License, on a durable physical
    medium customarily used for software interchange, for a price no
    more than your reasonable cost of physically performing this
    conveying of source, or (2) access to copy the
    Corresponding Source from a network server at no charge.

    c) Convey individual copies of the object code with a copy of the
    written offer to provide the Corresponding Source.  This
    alternative is allowed only occasionally and noncommercially, and
    only if you received the object code with such an offer, in accord
    with subsection 6b.

    d) Convey the object code by offering access from a designated
    place (gratis or for a charge), and offer equivalent access to the
    Corresponding Source in the same way through the same place at no
    further charge.  You need not require recipients to copy the
    Corresponding Source along with the object code.  If the place to
    copy the object code is a network server, the Corresponding Source
    may be on a different server (operated by you or a third party)
    that supports equivalent copying facilities, provided you maintain
    clear directions next to the object code saying where to find the
    Corresponding Source.  Regardless of what server hosts the
    Corresponding Source, you remain obligated to ensure that it is
    available for as long as needed to satisfy these requirements.

    e) Convey the object code using peer-to-peer transmission, provided
    you inform other peers where the object code and Corresponding
    Source of the work are being offered to the general public at no
    charge under subsection 6d.

  A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

  A "User Product" is either (1) a "consumer product", which means any
tangible personal property which is normally used for personal, family,
or household purposes, or (2) anything designed or sold for incorporation
into a dwelling.  In determining whether a product is a consumer product,
doubtful cases shall be resolved in favor of coverage.  For a particular
product received by a particular user, "normally used" refers to a
typical or common use of that class of product, regardless of the status
of the particular user or of the way in which the particular user
actually uses, or expects or is expected to use, the product.  A product
is a consumer product regardless of whether the product has substantial
commercial, industrial or non-consumer uses, unless such uses represent
the only significant mode of use of the product.

  "Installation Information" for a User Product means any methods,
procedures, authorization keys, or other information required to install
and execute modified versions of a covered work in that User Product from
a modified version of its Corresponding Source.  The information must
suffice to ensure that the continued functioning of the modified object
code is in no case prevented or interfered with solely because
modification has been made.

  If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

  The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or updates
for a work that has been modified or installed by the recipient, or for
the User Product in which it has been modified or installed.  Access to a
network may be denied when the modification itself materially and
adversely affects the operation of the network or violates the rules and
protocols for communication across the network.

  Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

  7. Additional Terms.

  "Additional permissions" are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

  When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

  Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders of
that material) supplement the terms of this License with terms:

    a) Disclaiming warranty or limiting liability differently from the
    terms of sections 15 and 16 of this License; or

    b) Requiring preservation of specified reasonable legal notices or
    author attributions in that material or in the Appropriate Legal
    Notices displayed by works containing it; or

    c) Prohibiting misrepresentation of the origin of that material, or
    requiring that modified versions of such material be marked in
    reasonable ways as different from the original version; or

    d) Limiting the use for publicity purposes of names of licensors or
    authors of the material; or

    e) Declining to grant rights under trademark law for use of some
    trade names, trademarks, or service marks; or

    f) Requiring indemnification of licensors and authors of that
    material by anyone who conveys the material (or modified versions of
    it) with contractual assumptions of liability to the recipient, for
    any liability that these contractual assumptions directly impose on
    those licensors and authors.

  All other non-permissive additional terms are considered "further
restrictions" within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

  If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

  Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions;
the above requirements apply either way.

  8. Termination.

  You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

  However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly and
finally terminates your license, and (b) permanently, if the copyright
holder fails to notify you of the violation by some reasonable means
prior to 60 days after the cessation.

  Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

  Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

  9. Acceptance Not Required for Having Copies.

  You are not required to accept this License in order to receive or
run a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

  10. Automatic Licensing of Downstream Recipients.

  Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

  An "entity transaction" is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

  You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

  11. Patents.

  A "contributor" is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's "contributor version".

  A contributor's "essential patent claims" are all patent claims
owned or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, "control" includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

  Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

  In the following three paragraphs, a "patent license" is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To "grant" such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

  If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  "Knowingly relying" means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

  If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

  A patent license is "discriminatory" if it does not include within
the scope of its coverage, prohibits the exercise of, or is
conditioned on the non-exercise of one or more of the rights that are
specifically granted under this License.  You may not convey a covered
work if you are a party to an arrangement with a third party that is
in the business of distributing software, under which you make payment
to the third party based on the extent of your activity of conveying
the work, and under which the third party grants, to any of the
parties who would receive the covered work from you, a discriminatory
patent license (a) in connection with copies of the covered work
conveyed by you (or copies made from those copies), or (b) primarily
for and in connection with specific products or compilations that
contain the covered work, unless you entered into that arrangement,
or that patent license was granted, prior to 28 March 2007.

  Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

  12. No Surrender of Others' Freedom.

  If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey a
covered work so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you may
not convey it at all.  For example, if you agree to terms that obligate you
to collect a royalty for further conveying from those to whom you convey
the Program, the only way you could satisfy both those terms and this
License would be to refrain entirely from conveying the Program.

  13. Use with the GNU Affero General Public License.

  Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

  14. Revised Versions of this License.

  The Free Software Foundation may publish revised and/or new versions of
the GNU General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

  Each version is given a distinguishing version number.  If the
Program specifies that a certain numbered version of the GNU General
Public License "or any later version" applies to it, you have the
option of following the terms and conditions either of that numbered
version or of any later version published by the Free Software
Foundation.  If the Program does not specify a version number of the
GNU General Public License, you may choose any version ever published
by the Free Software Foundation.

  If the Program specifies that a proxy can decide which future
versions of the GNU General Public License can be used, that proxy's
public statement of acceptance of a version permanently authorizes you
to choose that version for the Program.

  Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

  15. Disclaimer of Warranty.

  THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY
OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO,
THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM
IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF
ALL NECESSARY SERVICING, REPAIR OR CORRECTION.

  16. Limitation of Liability.

  IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS
THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF
DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
SUCH DAMAGES.

  17. Interpretation of Sections 15 and 16.

  If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

                     END OF TERMS AND CONDITIONS

            How to Apply These Terms to Your New Programs

  If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

  To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the "copyright" line and a pointer to where the full notice is found.

    {one line to give the program's name and a brief idea of what it does.}
    Copyright (C) {year}  {name of author}

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

Also add information on how to contact you by electronic and paper mail.

  If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

    {project}  Copyright (C) {year}  {fullname}
    This program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type `show c' for details.

The hypothetical commands `show w' and `show c' should show the appropriate
parts of the General Public License.  Of course, your program's commands
might be different; for a GUI interface, you would use an "about box".

  You should also get your employer (if you work as a programmer) or school,
if any, to sign a "copyright disclaimer" for the program, if necessary.
For more information on this, and how to apply and follow the GNU GPL, see
<http://www.gnu.org/licenses/>.

  The GNU General Public License does not permit incorporating your program
into proprietary programs.  If your program is a subroutine library, you
may consider it more useful to permit linking proprietary applications with
the library.  If this is what you want to do, use the GNU Lesser General
Public License instead of this License.  But first, please read
<http://www.gnu.org/philosophy/why-not-lgpl.html>.

```

`Makefile`:

```
all:

clean:
	rm -rf build
ifneq ($(wildcard .git),)
	rm -f include/flags.h
ifeq ($(OS),Windows_NT)
	git submodule foreach --recursive git config core.symlinks true
endif  # Windows_NT
	git submodule update -f --recursive
	git submodule foreach --recursive git clean -fd
# HACK: On Windows, symlinks have two different types: file and directory,
#       if the target path doesn't exist when the symlink is created,
#       Cygwin will fallback to create a non-native link, which makes the
#       symlink unusable to pure Win32 apps (e.g. our compilers) later.
#
#       Since the target path may not exist at the time of creation, we can fix
#       this by deleting all the symlinks after the first checkout and
#       letting Git to re-create them for us.
ifeq ($(OS),Windows_NT)
	find -type l -exec rm -f {} +
	git submodule update -f --recursive
endif  # Windows_NT
endif  # wildcard .git

```

`README.md`:

```md
## magiskboot_build

![Magisk Version Badge](https://img.shields.io/badge/Magisk%20version-v27.0%20Canary%20(27002)-green?logo=magisk)
![GitHub Workflow Status](https://img.shields.io/github/actions/workflow/status/ookiineko/magiskboot_build/ci.yaml?logo=githubactions&logoColor=orange&label=CI%20build)
![Last Upstream Sync Date](https://img.shields.io/github/gist/last-commit/cc0e3019a9107116d12df1e94e4a5c79?logo=git&label=Last%20upstream%20sync&color=blue)

a simple portable CMake-based build system for magiskboot

### Requirements

magiskboot itself depends on the following libraries:

1. [LZMA][LZMA]
2. [LZ4][LZ4]
3. [bzip2][bzip]
4. [zlib][zlib]

for build-time dependencies:

1. [pkg-config][pkg-config]
2. [Clang][Clang] (maybe also others, but GCC doesn't work, see [this part](#your-compiler-is-not-capable-of-building-magiskboot))
3. [Rust][Rust] (stable channel is OK... spoiler: `RUSTC_BOOTSTRAP` HACK is used)
4. [CMake][CMake]
5. [Libc++][Libcxx] (optional, see [this part](#can-i-build-without-libcxx))

please make sure you have installed the above softwares before building

here are examples for some supported popular operating systems/distributions:

<details><summary>Android</summary>

#### Android

Please check the instructions for [Cross compiling](#cross-compiling) first.

Download [ONDK][ONDK], set environment variable `ANDROID_NDK_HOME` to the extracted directory, and use [vcpkg][vcpkg] to install the dependencies.

Use `/path/to/your/ondk/build/cmake/android.toolchain.cmake` as the toolchain file for vcpkg.

Then, set the CMake variable `ANDROID_PLATFORM` to the desired API level, and `ANDROID_ABI` to the desired archiecture,

for more details about these variables, please refer to the [NDK documentation](https://developer.android.com/ndk/guides/cmake#variables).

Make sure to enable source build for the Rust standard library (STD), then activate the Rust toolchain by append it to your current `PATH`:

````shell
export PATH=/path/to/your/ondk/toolchains/rust/bin:$PATH
````

#### Termux

> **Note**
>
> Termux build is not actively tested by CI, but it might work without problem.
>
> If you find the build is broken, please file a [bug report](../../issues).

````shell
apt update
apt upgrade  # upgrade all existing packages (optional)
apt install build-essential liblzma liblz4 libbz2 zlib pkg-config \
            clang rust cmake ninja
````

</details>

<details><summary>Linux</summary>

#### Ubuntu 22.04 (jammy)

````shell
sudo apt update
sudo apt upgrade  # upgrade all existing packages (optional)

# replace clang-15, libc++-15-dev, libc++abi-15-dev with
# appropriate version according to your Ubuntu release
sudo apt install build-essential lzma-dev liblzma-dev liblz4-dev libbz2-dev \
                 zlib1g-dev pkg-config clang-15 libc++-15-dev libc++abi-15-dev cmake \
                 ninja-build rustc cargo
````

When configuring, set `CC` and `CXX` to correct values, for example: `clang-15` and `clang++-15`.

#### Alpine Linux (edge)

````shell
sudo apk update
sudo apk upgrade  # upgrade all existing packages (recommended)
sudo apk add build-base linux-headers xz-dev lz4-dev bzip2-dev \
             zlib-dev pkgconf clang libc++-dev cmake \
             samurai rust cargo
````

#### archlinux

````shell
sudo pacman -S --needed base-devel xz lz4 bzip2 zlib pkgconf \
                        clang libc++ cmake ninja rust
````

</details>

<details><summary>macOS</summary>

#### macOS Monterey (or higher verison)

install [Homebrew][Homebrew] first

````shell
brew update
brew upgrade  # upgrade all existing packages (optional)
brew install xz lz4 pkg-config cmake ninja rust
````

Theoretically you can build for older macOS version as well, but Homebrew only support the last three OS releases of macOS, so you will need to install the depended packages using other ways (maybe using MacPorts or sth?)

#### LTO configuration

To use [LTO](#lto) (optional), also install the `llvm` package, and add it to your current `PATH`:

````shell
export PATH="$(brew --prefix)/opt/llvm/bin:$PATH" CC=clang CXX=clang++
````

and pass `-DCMAKE_AR=llvm-ar -DCMAKE_RANLIB=llvm-ranlib` to CMake when configuring.

</details>

<details><summary>Windows</summary>

#### Windows (MinGW)

Install [MSYS2][MSYS2] first, and change the setting of `mintty.exe` to grant it with administrator privileges (needed for using native symlinks in some conditions).

> **Warning**
>
> LLD from MINGW/UCRT environments currently has a bug that produces bad executables, so if you want to use LTO, please build under CLANG environments.
>
> For more details on differences between these environments, you can refer to the [MSYS2 documentation](https://www.msys2.org/docs/environments/).

don't forget to set this environtment variable to allow symlinks to work properly: `export MSYS=winsymlinks:native` (required for the build I guess)

````shell
pacman -Syu  # upgrade all existing packages (optional, you may need to do this for multiple times)
pacman -S --needed base-devel pactoys
pacboy -S --needed {xz,lz4,bzip2,zlib,pkgconf,clang,cmake,libc++,ninja,rust}:p
````

##### Cross builds

If you are cross-compiling from a non-Windows host and using vcpkg to manage the dependencies, please make sure CMake variable `MINGW` is set to `TRUE` during configuring.

#### Cygwin (Experimental)

> **Warning**
>
> Cygwin support is experimental, you may run into problems.

> **Note**
>
> You can get a prebuilt binary at [GitHub releases](../../releases/tag/cygwin-test).

To build for Cygwin, you need to compile a Rust toolchain from source, for more info: [Cygwin Rust porting](https://gist.github.com/ookiineko/057eb3a91825313caeaf6d793a33b0b2)

Currently Cygwin Rust has no host tools support, so cross compiling is needed, make sure to read the instructions for [Cross compiling](#cross-compiling).

The cross compiler is available on Fedora Linux, provided by the [Fedora Cygwin][fedora-cygwin], alternatively, you can also try [arch-cygwin](https://github.com/ookiineko/arch-cygwin).

When configuring, use `cygwin64-cmake` (`x86_64-pc-cygwin-cmake` on arch-cygwin) instead of `cmake`, but don't use it for `cmake --build` and other CMake commands.

For Fedora Cygwin, you need to build the LLVM & Clang yourself, a patched [LLVM 15 source](https://github.com/ookiineko-cygport/llvm-project) is there. To use the patched Clang in Fedora Cygwin, set both `CMAKE_C_COMPILER_TARGET` and `CMAKE_CXX_COMPILER_TARGET` to `x86_64-unknown-windows-cygnus` and `CMAKE_SYSROOT` to `/usr/x86_64-pc-cygwin/sys-root` when configuring.

On Fedora Cygwin, there is another issue that `cygwin64-cmake` overrides C and C++ compilers to GCC, this is not supported by Magisk, and somehow ignoring the `CC` and `CXX` variables we are settings. To workaround this, set `CMAKE_C_COMPILER` and `CMAKE_CXX_COMPILER` manually to the path of the previous Cygwin cross Clang and Clang++.

On arch-cygwin, set `CYGWIN_CC` and `CYGWIN_CXX` to `x86_64-pc-cygwin-clang` and `x86_64-pc-cygwin-clang++`.

</details>

<details><summary>WebAssembly</summary>

#### Emscripten

> **Note**
>
> Currently this port only support running with NodeJS.
>
> A web frontend wrapper must be written to handle the argument passing and file system management in browsers.
>
> This should be implemented soon in the future ([#19](../../issues/19)), but unfortunately I am not a web developer, any help on this will be welcome QwQ

Please read the [Cross compiling](#cross-compiling) instructions first.

Install the [Emscripten][Emscripten] SDK and also a Rust compiler with Emscripten target (probably via [rustup][rustup]).

> **Warning**
>
> emsdk version 3.1.37 is recommended, you might run into weird problems with other versions.

Use [vcpkg][vcpkg] to install the [depended libraries](#requirements), the triplet is called `wasm32-emscripten`.

When configuring, use `emcmake cmake` instead of `cmake` (but don't use it for `cmake --build` and other CMake commands) , and use `/path/to/your/emsdk/emscripten/cmake/Modules/Platform/Emscripten.cmake` as the toolchain file for vcpkg.

For NodeJS, make sure to set `CMAKE_EXE_LINKER_FLAGS` to `-sNODERAWFS` to allow using the host filesystem.

finally, you can run the result with [NodeJS][NodeJS] using: `node magiskboot.js`

</details>

### Usage

Please refer to [Magisk documentation](https://topjohnwu.github.io/Magisk/tools.html#magiskboot).

### Download

> [!IMPORTANT]
>
> The official magiskboot only supports running on Android and Linux,
>
> If you find something that works on the officially supported platforms,
> but not on the extra platforms supported by magiskboot_build, then that
> is a magiskboot_build-specific bug.
>
> Please, do ***NOT*** report magiskboot_build bugs to the upstream Magisk!

For prebuilt binaries, go check [GitHub Releases](../../releases/latest) for selected CI builds.

### Build & Install

First get and extract the latest source tarball (called `magiskboot_<COMMIT_ID>_<VERCODE>-src.tar.xz`) from [Github Releases](../../releases/latest).

Or clone this repository using Git, note that cloning with `--recurse-submodules` is not recommended, and you should run `scripts/clone_submodules.sh` after clone because it skips the submodules that is not necessary for building magiskboot.

````shell
CC=clang CXX=clang++ cmake -G Ninja -B build -DCMAKE_BUILD_TYPE=Release  # configure
cmake --build build -j $(nproc)  # build
./build/magiskboot  # running
# install to system (may need sudo, to specify different install dir, set the `DESTDIR' environment variable)
cmake --install build
````

To produce a statically linked binary (optional), pass `-DPREFER_STATIC_LINKING=ON` to CMake while configuring, make sure you have the static version of the [depended libraries](#requirements), otherwise you'll run into configure or link errors.

#### Rust

You can specify extra arguments passed to Cargo by setting CMake variable `CARGO_FLAGS` while configuring, you can also provide an initial value of environment `RUSTFLAGS` by setting the corresponding CMake variable.

Note: these variables are using [CMake's list syntax](https://cmake.org/cmake/help/latest/manual/cmake-language.7.html#cmake-language-lists), not string. that is, replace all your spaces with `;`, e.g. `-DCARGO_FLAGS="-Z;no-index-update"` instead of `-DCARGO_FLAGS="-Z no-index-update"`

#### Cross compiling

First get a cross-compiler and likely also a Clang from somewhere (usually your distribution's package manager). If you don't have Libc++ installed for your crossed target, you could probably also try to link against [Libstdc++][Libstdcxx] instead, see [this part](#can-i-build-without-libcxx).

Install Rust using [rustup][rustup] and add your cross target like this: `rustup target add aarch64-unknown-linux-gnu` (replace `aarch64-unknown-linux-gnu` with the Rust target of your target platform).

If the cross Rust target can't be installed using [rustup][rustup], you can still compile if you build the Rust standard library (STD) from source, to do this, pass `-DRUST_BUILD_STD=ON` during configuration (Note this will require Nightly Rust and the STD source code to be installed on your system).

To cross-compile, you may need a [CMake toolchain file][cmake-toolchains] describing your target specs (for example the sysroot location, and target triplet for using Clang), the location of the cross compiler toolchain and strategy for CMake to seek for the depended libraries.

You can install the depended libraries for your cross target by using [vcpkg][vcpkg], for example:

````shell
vcpkg install --host-triplet=arm64-linux bzip2 lz4 zlib liblzma
````

`arm64-linux` is the triplet of your cross target, pass this value to CMake using the `VCPKG_TARGET_TRIPLET` variable during configuration.

Set variable `Rust_CARGO_TARGET` to the Rust target you wanted to cross compile for, e.g. `aarch64-unknown-linux-gnu` (You can find them in [rustc documentation](https://doc.rust-lang.org/rustc/platform-support.html)).

To integrate vcpkg with CMake, pass `-DCMAKE_TOOLCHAIN_FILE=/path/to/your/vcpkg/scripts/buildsystems/vcpkg.cmake` to CMake, to use your toolchain file with vcpkg, set the variable `VCPKG_CHAINLOAD_TOOLCHAIN_FILE` to the path of your actual toolchain file.

#### LTO

Set `LDFLAGS` to `" -flto"` before calling CMake.

If you want to perform LTO for the Rust part at final link time, pass `-DFULL_RUST_LTO=ON` to CMake during configuring. (And you will need to install [LLD][LLD]. Note: you may need to make sure your LLVM and LLD are sharing the same LLVM version with Rust.)

### Testing

> [!NOTE]
> Features not tested by CI doesn't necessarily mean it can't work.

A very basic shell script is provided under the [`scripts`](scripts/magiskboot_test.sh) directory, currently the following functions are automatically tested with Github CI:

- [x] unpack* (currently not all header versions and variants are tested)
- [x] repack* (same as above)
- [ ] verify
- [ ] sign
- [ ] extract
- [x] hexpatch

* cpio* (currently not widely tested on all common ramdisks)
  - [ ] cpio exists
  - [x] cpio ls
  - [ ] cpio rm
  - [ ] cpio mkdir
  - [ ] cpio ln
  - [ ] cpio mv
  - [x] cpio add
  - [x] cpio extract
  - [ ] cpio test
  - [ ] cpio patch
  - [ ] cpio backup
  - [ ] cpio restore

* dtb
  - [ ] dtb print
  - [x] dtb test
  - [ ] dtb patch

- [ ] split
- [x] sha1
- [ ] cleanup
- [x] compress
- [x] decompress

### Generating source tarball

> [!NOTE]
>
> You may not be able to generate source tarball on Windows/Cygwin due to issues with symlinks.

````shell
# configure for only packaging source
CC=true cmake -G Ninja -B build \
    -DCMAKE_C_COMPILER_WORKS=YES -DWITHOUT_BUILD=ON
cmake --build build -t package_source  # make a source package
````

Make sure to pass the above flags to CMake while configuring, which will allow creating source tarball without installing the [build dependencies](#requirements).

you should be able to find your source package under the `build` folder

### FAQ

#### Something isn't working

Please use debug builds and paste your information (like crash or error logs) in a new [Issue](../../issues).

#### Can I build without Libcxx?

If you need to build with [Libstdc++][Libstdcxx] instead of [Libc++][Libcxx], pass `-DWITH_LIBCXX=OFF` to CMake during configuring, also apply [this patch](patches-contrib/Magisk/0029-workaround-support-building-with-libstdcxx.patch).

#### "Your compiler is not capable of building magiskboot"

Make sure you are using Clang to build. GCC doesn't work because of: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=36566

#### Is this thing using the latest Magisk source?

Check the version status badges at [the top of README](#magiskboot_build).

This project is very similiar to [android-tools][android-tools] which just maintains a set of patches on top of a specific upstream Magisk commit and require manual adaption for compiling with newer source.

Although I may update the version once in a while, [Pull requests](../../pulls) are welcome.

#### Can you add ... platform support?

This project aims to be portable, it should be possible to port it to new platforms with some efforts, as long as your platform meets the the above [requirements](#requirements).

Feel free to add an [Issue](../../issues) about support on your new platform.

### Development

#### Clean builds

To quickly discard the current `build` directory and dirty vendored submodule (`src/`) changes, please run `make clean`.

#### Vendor projects patching

If you are building directly from the Git source tree, all the patches under the `patches/` directory will be automatically applied on the first configure. After that a flag file called `.mbb_patched` is created under your build directory (i.e. `build/`).

Removing the flag file and re-configure will discard any dirty changes in vendored projects, and re-apply all the patches to them again.

To avoid applying any patch at configure time, create the flag file manually before calling CMake. Note that in this case this project might not build on anything other than Android.

### License

Patches and stub codes created by this project (not borrowed from other places) are licensed under Apache 2.0 or GNU General Public License (GPL) v3 at your option,

All parts of the code borrowed from other projects are licensed under their corresponding license.

However, please note that when combining them are a whole and to distribute the magiskboot binary, all sources have to be licensed under GPL v3.

For more details about these licenses, please see [LICENSE](LICENSE) and [LICENSE.magiskboot](LICENSE.magiskboot).

### Special thanks to

- [android-tools][android-tools] developers for many code and inspiration of this repository
- [Magisk][Magisk] developers for the magiskboot utility
- all other used projects' developers (mentioned in the [Requirements](#requirements) section)

[pkg-config]: https://www.freedesktop.org/wiki/Software/pkg-config/
[LZMA]: https://tukaani.org/lzma/
[LZ4]: https://lz4.github.io/lz4/
[bzip]: http://www.bzip.org/
[zlib]: https://zlib.net/
[Clang]: https://clang.llvm.org/
[LLD]: https://lld.llvm.org/
[Rust]: https://www.rust-lang.org/
[CMake]: https://cmake.org/
[Magisk]: https://github.com/topjohnwu/Magisk.git
[android-tools]: https://github.com/nmeum/android-tools
[rustup]: https://rustup.rs/
[Homebrew]: https://brew.sh/
[Libcxx]: https://libcxx.llvm.org/
[Libstdcxx]: https://gcc.gnu.org/onlinedocs/libstdc++/
[MSYS2]: https://www.msys2.org/
[fedora-cygwin]: https://copr.fedorainfracloud.org/coprs/yselkowitz/cygwin/
[cmake-toolchains]: https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html
[vcpkg]: https://vcpkg.io/
[Emscripten]: https://github.com/emscripten-core/emsdk
[NodeJS]: https://nodejs.org/
[ONDK]: https://github.com/topjohnwu/ondk

```

`include-android/fortify_stub.h`:

```h
#ifndef _MAGISKBOOT_BUILD_FORTIFY_STUB
#define _MAGISKBOOT_BUILD_FORTIFY_STUB

#ifndef __call_bypassing_fortify
#  define __call_bypassing_fortify(x) x
#endif

#endif /* _MAGISKBOOT_BUILD_FORTIFY_STUB */

```

`include-android/libbsd_stub.h`:

```h
#ifndef _MAGISKBOOT_BUILD_LIBBSD_STUB
#define _MAGISKBOOT_BUILD_LIBBSD_STUB

#ifndef __printflike
#  define __printflike(fmt, var) __attribute__((format(printf,fmt,var)))
#endif

#endif /* _MAGISKBOOT_BUILD_LIBBSD_STUB */

```

`include/flags.h.in`:

```in
	#pragma once
	#define quote(s)            #s
	#define str(s)              quote(s)
	#define MAGISK_FULL_VER     MAGISK_VERSION "(" str(MAGISK_VER_CODE) ")"
	#define NAME_WITH_VER(name) str(name) " " MAGISK_FULL_VER
	#define MAGISK_VERSION      "@MAGISK_VERSION@"
	#define MAGISK_VER_CODE     @MAGISK_VER_CODE@
	#define MAGISK_DEBUG        !MAGISK_DEBUG!

```

`patches-contrib/Magisk/0029-workaround-support-building-with-libstdcxx.patch`:

```patch
From 03220a4a97225457eb88e25ceb1d11abcc80f84c Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Tue, 12 Dec 2023 03:07:40 +0000
Subject: [PATCH] workaround: support building with libstdc++

* may be useful for some really old distros

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/base/files.cpp  | 3 +++
 native/src/base/files.hpp  | 3 +++
 native/src/base/misc.cpp   | 3 +++
 native/src/base/misc.hpp   | 3 +++
 native/src/base/stream.cpp | 3 +++
 native/src/boot/format.hpp | 3 +++
 6 files changed, 18 insertions(+)

diff --git a/native/src/base/files.cpp b/native/src/base/files.cpp
index 050bda6..c05cf18 100644
--- a/native/src/base/files.cpp
+++ b/native/src/base/files.cpp
@@ -32,6 +32,9 @@
 #define dirent _dirent_stub
 #define getline msvc_getline
 #endif
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#endif
 
 #include <base.hpp>
 
diff --git a/native/src/base/files.hpp b/native/src/base/files.hpp
index 9c2d890..19c2dd6 100644
--- a/native/src/base/files.hpp
+++ b/native/src/base/files.hpp
@@ -5,6 +5,10 @@
 #include <string_view>
 #include <string>
 #include <vector>
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#include <memory>
+#endif
 
 #ifdef __linux__
 #include <linux/fs.h>
diff --git a/native/src/base/misc.cpp b/native/src/base/misc.cpp
index 249b698..4e3c342 100644
--- a/native/src/base/misc.cpp
+++ b/native/src/base/misc.cpp
@@ -28,6 +28,9 @@
 #ifdef _WIN32
 #include <winsup/str_compat.h>
 #endif
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#endif
 
 #include <base.hpp>
 
diff --git a/native/src/base/misc.hpp b/native/src/base/misc.hpp
index 7ced155..3e9869f 100644
--- a/native/src/base/misc.hpp
+++ b/native/src/base/misc.hpp
@@ -6,6 +6,10 @@
 #include <string_view>
 #include <bitset>
 #include <random>
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#include <memory>
+#endif
 #include <cxx.h>
 
 #include "xwrap.hpp"
diff --git a/native/src/base/stream.cpp b/native/src/base/stream.cpp
index 271cad2..850beb0 100644
--- a/native/src/base/stream.cpp
+++ b/native/src/base/stream.cpp
@@ -1,5 +1,8 @@
 #include <unistd.h>
 #include <cstddef>
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#endif
 
 #include <base.hpp>
 #include <stream.hpp>
diff --git a/native/src/boot/format.hpp b/native/src/boot/format.hpp
index e0634ba..c9e3773 100644
--- a/native/src/boot/format.hpp
+++ b/native/src/boot/format.hpp
@@ -1,6 +1,9 @@
 #pragma once
 
 #include <string_view>
+#ifndef _LIBCPP_VERSION
+#include <cstring>
+#endif
 
 typedef enum {
     UNKNOWN,
-- 
2.41.0


```

`patches/Magisk/0001-native-fix-header-includes.patch`:

```patch
From 84df261f5b5cfd5cda74bb02df99495fc873fe81 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Thu, 9 Mar 2023 23:29:40 +0800
Subject: [PATCH] native: fix header includes

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/Cargo.toml       |  1 +
 native/src/base/files.cpp   |  8 ++++++++
 native/src/base/files.hpp   |  6 ++++++
 native/src/base/logging.hpp |  4 ++++
 native/src/base/misc.cpp    | 17 +++++++++++++++++
 native/src/base/stream.cpp  |  3 +++
 native/src/base/xwrap.hpp   |  5 +++++
 7 files changed, 44 insertions(+)

diff --git a/native/src/Cargo.toml b/native/src/Cargo.toml
index 114b55c..0b6e3c0 100644
--- a/native/src/Cargo.toml
+++ b/native/src/Cargo.toml
@@ -1,12 +1,12 @@
 [workspace]
 exclude = ["external"]
-members = ["base", "boot", "core", "init", "sepolicy"]
+members = ["base", "boot"]
 resolver = "2"
 
 [workspace.dependencies]
 cxx = { path = "external/cxx-rs" }
 cxx-gen = { path = "external/cxx-rs/gen/lib" }
-libc = "0.2"
+libc = { path = "../../../../src/libc-compat/rs" }
 cfg-if = "1.0"
 num-traits = "0.2"
 num-derive = "0.4"
@@ -38,13 +38,5 @@ git = "https://github.com/tafia/quick-protobuf.git"
 rev = "2f37d5a65504de7d716b5b28fd82219501a901a9"
 
-[profile.dev]
-opt-level = "z"
-lto = true
-codegen-units = 1
-panic = "abort"
 
 [profile.release]
-opt-level = "z"
-lto = true
 codegen-units = 1
-panic = "abort"

diff --git a/native/src/base/files.cpp b/native/src/base/files.cpp
index 6829de2..8aef651 100644
--- a/native/src/base/files.cpp
+++ b/native/src/base/files.cpp
@@ -1,10 +1,39 @@
+#ifdef _WIN32
+#  include <mman.h>
+#else
 #include <sys/mman.h>
+#endif
+#ifdef __linux__
 #include <sys/sendfile.h>
 #include <sys/sysmacros.h>
 #include <linux/fs.h>
+#else
+#  include <sys/types.h>
+#  if defined(__APPLE__)
+#    include <sys/disk.h>
+#  endif
+#endif
+#ifndef _WIN32
+#  include <sys/ioctl.h>
+#endif
 #include <fcntl.h>
 #include <unistd.h>
 #include <libgen.h>
+#ifdef _WIN32
+#  define O_CLOEXEC O_NOINHERIT
+
+#  include <getline.h>
+#  include <winsup/acl_compat.h>
+#  include <winsup/at_compat.h>
+#  include <winsup/dirent_compat.h>
+#  include <winsup/mknod_compat.h>
+#  include <winsup/stat_compat.h>
+
+#  define dirent _dirent_stub
+#  define getline msvc_getline
+#elif defined(__EMSCRIPTEN__)
+#  include <emsup/mkdev_stubs.h>
+#endif
 
 #include <base.hpp>
 #include <selinux.hpp>
diff --git a/native/src/base/files.hpp b/native/src/base/files.hpp
index 0d8d11c..c4bb952 100644
--- a/native/src/base/files.hpp
+++ b/native/src/base/files.hpp
@@ -6,7 +6,19 @@
 #include <string>
 #include <vector>
 
+#ifdef __linux__
 #include <linux/fs.h>
+#elif defined(__APPLE__)
+#  include <sys/disk.h>
+#elif defined(__CYGWIN__)
+#  include <cygwin/fs.h>
+#elif defined(_WIN32)
+#  include <winsup/dirent_compat.h>
+
+#  define closedir _closedir_stub
+#  define DIR _DIR_stub
+#  define opendir _opendir_stub
+#endif
 #include "misc.hpp"
 
 template <typename T>
diff --git a/native/src/base/misc.cpp b/native/src/base/misc.cpp
index 313d136..f0188b5 100644
--- a/native/src/base/misc.cpp
+++ b/native/src/base/misc.cpp
@@ -1,13 +1,40 @@
 #include <sys/types.h>
+#ifndef _WIN32
 #include <sys/wait.h>
+#endif
+#ifdef __linux__
 #include <sys/prctl.h>
 #include <sys/sysmacros.h>
+#else
+#  include <sys/types.h>
+#endif
 #include <fcntl.h>
+#ifndef _WIN32
 #include <pwd.h>
+#endif
 #include <unistd.h>
+#ifdef __APPLE__
+#  define environ (*_NSGetEnviron())
+
+#  include <crt_externs.h>
+#  include <sys/syscall.h>
+#endif
+#ifdef __linux__
 #include <syscall.h>
+#else
+#  include <pthread.h>
+#  ifndef _WIN32
+#    include <signal.h>
+#  endif
+#endif
 #include <random>
 #include <string>
+#ifdef _WIN32
+#  include <winsup/str_compat.h>
+#endif
+#ifndef HAVE_STRLCPY
+#  include <libbsd/str_compat.h>
+#endif
 
 #include <base.hpp>
 
diff --git a/native/src/base/xwrap.hpp b/native/src/base/xwrap.hpp
index ce7a6dd..b4ba2c0 100644
--- a/native/src/base/xwrap.hpp
+++ b/native/src/base/xwrap.hpp
@@ -2,8 +2,23 @@
 
 #include <dirent.h>
 #include <stdio.h>
+#include <sys/types.h>  // bionic quirks?
+#ifdef _WIN32
+typedef int socklen_t;
+struct msghdr;
+typedef unsigned long int nfds_t;
+struct pollfd;
+#else
+#include <sys/socket.h>  // same as above
 #include <poll.h>
+#endif
 #include <fcntl.h>
+#ifdef _WIN32
+#  include <winsup/dirent_compat.h>
+
+#  define dirent _dirent_stub
+#  define DIR _DIR_stub
+#endif
 
 extern "C" {
 
-- 
2.41.0


```

`patches/Magisk/0002-fix-builds-for-some-OS.patch`:

```patch
diff --git a/native/src/boot/cpio.rs b/native/src/boot/cpio.rs
index d19ce29..0e36b4d 100644
--- a/native/src/boot/cpio.rs
+++ b/native/src/boot/cpio.rs
@@ -353,7 +353,7 @@ impl Cpio {
                 FsPath::from(&buf).symlink_to(out)?;
             }
             S_IFBLK | S_IFCHR => {
-                let dev = makedev(entry.rdevmajor.try_into()?, entry.rdevminor.try_into()?);
+                let dev = unsafe { makedev(entry.rdevmajor.try_into()?, entry.rdevminor.try_into()?) };
                 unsafe { mknod(out.as_ptr().cast(), entry.mode, dev) };
             }
             _ => {
diff --git a/native/src/base/files.rs b/native/src/base/files.rs
index 6582eee..8678392 100644
--- a/native/src/base/files.rs
+++ b/native/src/base/files.rs
@@ -206,7 +206,7 @@ impl FileAttr {
     #[inline(always)]
     #[allow(clippy::unnecessary_cast)]
     fn is(&self, mode: mode_t) -> bool {
-        (self.st.st_mode & libc::S_IFMT as u32) as mode_t == mode
+        ((self.st.st_mode as mode_t) & libc::S_IFMT) == mode
     }
 
     pub fn is_dir(&self) -> bool {
diff --git a/native/src/boot/bootimg.cpp b/native/src/boot/bootimg.cpp
index f853e61..1f6b2dc 100644
--- a/native/src/boot/bootimg.cpp
+++ b/native/src/boot/bootimg.cpp
@@ -16,6 +16,23 @@
 
 using namespace std;
 
+// refs: https://github.com/AcademySoftwareFoundation/Imath/pull/350
+//       https://stackoverflow.com/questions/67521312/safe-equivalent-of-stdbit-cast-in-c11
+#if !defined(__cpp_lib_bit_cast) || __cpp_lib_bit_cast < 201806L
+template <class T2, class T1>
+constexpr T2 cpp11_bit_cast(T1 t1) {
+  static_assert(sizeof(T1)==sizeof(T2), "Types must match sizes");
+  static_assert(std::is_pod<T1>::value, "Requires POD input");
+  static_assert(std::is_pod<T2>::value, "Requires POD output");
+
+  T2 t2;
+  std::memcpy( std::addressof(t2), std::addressof(t1), sizeof(T1) );
+  return t2;
+}
+
+#define bit_cast cpp11_bit_cast
+#endif
+
 #define PADDING 15
 #define SHA256_DIGEST_SIZE 32
 #define SHA_DIGEST_SIZE 20

```

`patches/Magisk/0003-base-files-disable-BLKGETSIZE-for-non-Linux.patch`:

```patch
From 350222e64d496615ece40de309b6c9ba9e6b7740 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Mon, 20 Mar 2023 01:42:32 +0800
Subject: [PATCH 2/6] base: files: disable BLKGETSIZE for non-Linux

- not actually useful to us

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/base/files.hpp | 7 +++++++
 native/src/base/files.rs  | 12 ++++++++++++
 2 file changed, 26 insertions(+)

diff --git a/native/src/base/files.rs b/native/src/base/files.rs
index f107c34..465d63a 100644
--- a/native/src/base/files.rs
+++ b/native/src/base/files.rs
@@ -483,20 +485,32 @@
 
 // We mark the returned slice static because it is valid until explicitly unmapped
 pub(crate) fn map_file(path: &Utf8CStr, rw: bool) -> io::Result<&'static mut [u8]> {
+    cfg_if::cfg_if! {
+        if #[cfg(any(target_os = "linux", target_os = "android"))] {
     #[cfg(target_pointer_width = "64")]
     const BLKGETSIZE64: u32 = 0x80081272;
 
     #[cfg(target_pointer_width = "32")]
     const BLKGETSIZE64: u32 = 0x80041272;
+        } else {
+            // no-op
+        }
+    }
 
     let flag = if rw { O_RDWR } else { O_RDONLY };
     let f = File::from(open_fd!(path, flag | O_CLOEXEC)?);
 
     let attr = FsPath::from(path).get_attr()?;
     let sz = if attr.is_block_device() {
+        cfg_if::cfg_if! {
+            if #[cfg(any(target_os = "linux", target_os = "android"))] {
         let mut sz = 0_u64;
         unsafe { ioctl(f.as_raw_fd(), BLKGETSIZE64, &mut sz) }.as_os_err()?;
         sz
+            } else {
+                panic!("Unreachable code");
+            }
+        }
     } else {
         attr.st.st_size as u64
     };-- 
diff --git a/native/src/base/files.hpp b/native/src/base/files.hpp
index 0d8d11c..3fda87d 100644
--- a/native/src/base/files.hpp
+++ b/native/src/base/files.hpp
@@ -43,8 +43,10 @@ struct mount_info {
 };
 
 struct mmap_data : public byte_data {
+#ifdef __linux__
     static_assert((sizeof(void *) == 8 && BLKGETSIZE64 == 0x80081272) ||
                   (sizeof(void *) == 4 && BLKGETSIZE64 == 0x80041272));
+#endif
     ALLOW_MOVE_ONLY(mmap_data)
 
     explicit mmap_data(const char *name, bool rw = false);
-- 
2.41.0

```

`patches/Magisk/0004-disable-funcs-not-used-by-magiskboot.patch`:

```patch
--- a/native/src/base/misc.cpp
+++ b/native/src/base/misc.cpp
@@ -68,6 +68,7 @@ int fork_dont_care() {
     return 0;
 }
 
+#ifdef __linux__
 int fork_no_orphan() {
     int pid = xfork();
     if (pid)
@@ -77,6 +78,7 @@ int fork_no_orphan() {
         exit(1);
     return 0;
 }
+#endif
 
 int exec_command(exec_t &exec) {
     auto pipefd = array<int, 2>{-1, -1};
@@ -270,6 +270,7 @@ uint32_t binary_gcd(uint32_t u, uint32_t v) {
     return u << shift;
 }
 
+#ifdef __linux__
 int switch_mnt_ns(int pid) {
     char mnt[32];
     ssprintf(mnt, sizeof(mnt), "/proc/%d/ns/mnt", pid);
@@ -283,6 +284,7 @@ int switch_mnt_ns(int pid) {
     close(fd);
     return ret;
 }
+#endif
 
 string &replace_all(string &str, string_view from, string_view to) {
     size_t pos = 0;
--- a/native/src/base/stream.cpp
+++ b/native/src/base/stream.cpp
@@ -9,6 +9,7 @@
 
 using namespace std;
 
+#if 0
 static int strm_read(void *v, char *buf, int len) {
     auto strm = static_cast<channel *>(v);
     return strm->read(buf, len);
@@ -34,6 +50,7 @@ sFILE make_channel_fp(channel_ptr &&strm) {
     setbuf(fp.get(), nullptr);
     return fp;
 }
+#endif
 
 ssize_t in_stream::readFully(void *buf, size_t len) {
     size_t read_sz = 0;

```

`patches/Magisk/0005-base-rust-add-fd_path-impl-for-other-OS.patch`:

```patch
From 18d027606fe53bbb25fc3faa9cd4c5593af4427d Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Mon, 20 Mar 2023 03:51:40 +0800
Subject: [PATCH] base: rust: add fd_path impl for other OS

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/base/files.rs   | 17 +++++++++++++++++
 native/src/base/Cargo.toml | 3  +++
 2 file changed, 20 insertions(+)

diff --git a/native/src/base/files.rs b/native/src/base/files.rs
index 892d375..25ed2e7 100644
--- a/native/src/base/files.rs
+++ b/native/src/base/files.rs
@@ -45,12 +45,58 @@ pub fn readlink(path: &Utf8CStr, data: &mut [u8]) -> io::Result<usize> {
     };
 }
 
+#[cfg(any(target_os = "android", target_os = "linux",
+          target_os = "cygwin", target_os = "emscripten"))]
 pub fn fd_path(fd: RawFd, buf: &mut dyn Utf8CStrBuf) -> io::Result<()> {
     let mut arr = Utf8CStrBufArr::<40>::new();
     let path = FsPathBuf::new(&mut arr).join("/proc/self/fd").join_fmt(fd);
     path.read_link(buf)
 }
 
+#[cfg(target_vendor = "apple")]
+pub fn fd_path(fd: RawFd, utf8_buf: &mut dyn Utf8CStrBuf) -> io::Result<()> {
+    unsafe {
+        let buf = utf8_buf.as_str_mut().as_bytes_mut();
+        let mut path_buf: [u8; libc::PATH_MAX as usize] = [0; libc::PATH_MAX as usize];
+        let ret: isize = libc::fcntl(fd, libc::F_GETPATH, path_buf.as_mut_ptr()) as isize;
+        if ret < 0 {
+            return Err(io::Error::last_os_error())
+        }
+        let len = path_buf.iter().position(|&x| x == 0).unwrap();
+        let copy_len: usize = len.min(buf.len().saturating_sub(1));
+        buf[..copy_len].copy_from_slice(&path_buf[..copy_len]);
+        buf.get_mut(copy_len).map(|b| *b = 0);
+        Ok(())
+    }
+}
+
+#[cfg(target_os = "windows")]
+use filepath::FilePath;
+
+#[cfg(target_os = "windows")]
+pub fn fd_path(fd: RawFd, utf8_buf: &mut dyn Utf8CStrBuf) -> io::Result<()> {
+    unsafe {
+        let buf = utf8_buf.as_str_mut().as_bytes_mut();
+        let file = File::from_raw_fd(fd);
+        let path = match file.path() {
+           Ok(p) => p,
+           Err(_) => {
+               return Err(io::Error::last_os_error())
+           }
+       };
+       let path_str = match path.to_str() {
+           Some(s) => s.as_bytes(),
+           None => {
+               return Err(io::Error::last_os_error())
+           }
+       };
+       let bytes_to_copy = path_str.len().min(buf.len().saturating_sub(1));
+       buf[..bytes_to_copy].copy_from_slice(&path_str[..bytes_to_copy]);
+       buf.get_mut(bytes_to_copy).map(|b| *b = 0);
+       Ok(())
+   }
+}
+
 pub trait ReadExt {
     fn skip(&mut self, len: usize) -> io::Result<()>;
     fn read_pod<F: Pod>(&mut self, data: &mut F) -> io::Result<()>;
diff --git a/native/src/base/Cargo.toml b/native/src/base/Cargo.toml
index bfb8e57..f89abca 100644
--- a/native/src/base/Cargo.toml
+++ b/native/src/base/Cargo.toml
@@ -15,3 +15,6 @@ bytemuck = { workspace = true }
 num-traits = { workspace = true }
 num-derive = { workspace = true }
 const_format = { workspace = true }
+
+[target.'cfg(target_os = "windows")'.dependencies]
+filepath = "0.1.2"
--
2.40.0


```

`patches/Magisk/0006-disable-libc-funcs-not-used-by-magiskboot.patch`:

```patch
--- a/native/src/base/xwrap.rs
+++ b/native/src/base/xwrap.rs
@@ -237,6 +237,7 @@ extern "C" fn xlseek64(fd: RawFd, offset: i64, whence: i32) -> i64 {
     }
 }
 
+#[cfg(any(target_os = "linux", target_os = "android"))]
 pub(crate) fn xpipe2(fds: &mut [i32; 2], flags: i32) -> i32 {
     unsafe {
         let r = libc::pipe2(fds.as_mut_ptr(), flags);
@@ -249,6 +249,7 @@ pub(crate) fn xpipe2(fds: &mut [i32; 2], flags: i32) -> i32 {
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 extern "C" fn xsetns(fd: RawFd, nstype: i32) -> i32 {
     unsafe {
         let r = libc::setns(fd, nstype);
@@ -260,6 +261,7 @@ extern "C" fn xsetns(fd: RawFd, nstype: i32) -> i32 {
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 extern "C" fn xunshare(flags: i32) -> i32 {
     unsafe {
         let r = libc::unshare(flags);
@@ -353,6 +355,7 @@ extern "C" fn xlisten(socket: i32, backlog: i32) -> i32 {
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 unsafe extern "C" fn xaccept4(
     sockfd: RawFd,
     addr: *mut sockaddr,
@@ -461,6 +464,7 @@ extern "C" fn xdup2(oldfd: RawFd, newfd: RawFd) -> RawFd {
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 extern "C" fn xdup3(oldfd: RawFd, newfd: RawFd, flags: i32) -> RawFd {
     unsafe {
         let fd = libc::syscall(SYS_dup3, oldfd, newfd, flags) as RawFd;
@@ -524,6 +527,7 @@ unsafe extern "C" fn xlinkat(
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 unsafe extern "C" fn xmount(
     src: *const c_char,
     target: *const c_char,
@@ -539,6 +543,7 @@ unsafe extern "C" fn xmount(
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 unsafe extern "C" fn xumount(target: *const c_char) -> i32 {
     let r = libc::umount(target);
     if r < 0 {
@@ -548,6 +553,7 @@ unsafe extern "C" fn xumount(target: *const c_char) -> i32 {
 }
 
 #[no_mangle]
+#[cfg(any(target_os = "linux", target_os = "android"))]
 unsafe extern "C" fn xumount2(target: *const c_char, flags: i32) -> i32 {
     let r = libc::umount2(target, flags);
     if r < 0 {
--- a/native/src/base/lib.rs
+++ b/native/src/base/lib.rs
@@ -41,7 +41,9 @@ pub mod ffi {
 
     #[namespace = "rust"]
     extern "Rust" {
+        #[cfg(any(target_os = "linux", target_os = "android"))]
         fn xpipe2(fds: &mut [i32; 2], flags: i32) -> i32;
+
         #[cxx_name = "fd_path"]
         fn fd_path(fd: i32, buf: &mut [u8]) -> isize;
         #[cxx_name = "map_file"
--- a/native/src/base/misc.cpp
+++ b/native/src/base/misc.cpp
@@ -99,11 +99,20 @@ int gen_rand_str(char *buf, int len, bool varlen) {
 }
 
 int exec_command(exec_t &exec) {
+#ifdef __linux__
     auto pipefd = array<int, 2>{-1, -1};
+#else
+    int pipefd[2] = {-1, -1};
+#endif
+
     int outfd = -1;
 
     if (exec.fd == -1) {
+#ifdef __linux__
         if (xpipe2(pipefd, O_CLOEXEC) == -1)
+#else
+        if (pipe(pipefd) == -1)
+#endif
             return -1;
         outfd = pipefd[1];
     } else if (exec.fd >= 0) {
@@ -175,7 +175,9 @@ void init_argv0(int argc, char **argv) {
 void set_nice_name(const char *name) {
     memset(argv0, 0, name_len);
     strscpy(argv0, name, name_len);
+#if 0
     prctl(PR_SET_NAME, name);
+#endif
 }
 
 /*
--- a/native/src/base/include/base.hpp
+++ b/native/src/base/include/base.hpp
@@ -9,5 +9,7 @@
 #endif
 #include "../base-rs.hpp"
 
+#ifdef __linux__
 using rust::xpipe2;
+#endif
 using rust::fd_path;
\ No newline at end of file

```

`patches/Magisk/0007-HACK-support-cfg-attribute-in-build-script.patch`:

```patch
From b6f6e76b8586065ca5f706605a94b17fc3c7844f Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Fri, 28 Jul 2023 08:57:59 +0800
Subject: [PATCH] HACK: support cfg attribute in build script

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/external/cxx-rs/gen/src/cfg.rs | 25 +++++++++++++++++++++----
 1 file changed, 21 insertions(+), 4 deletions(-)

diff --git a/native/src/external/cxx-rs/gen/src/cfg.rs b/native/src/external/cxx-rs/gen/src/cfg.rs
index da589085..fd3d2542 100644
--- a/native/src/external/cxx-rs/gen/src/cfg.rs
+++ b/native/src/external/cxx-rs/gen/src/cfg.rs
@@ -5,15 +5,32 @@ use crate::syntax::Api;
 use quote::quote;
 use std::collections::BTreeSet as Set;
 use syn::{Error, LitStr};
+use std::env;
 
 pub(super) struct UnsupportedCfgEvaluator;
 
 impl CfgEvaluator for UnsupportedCfgEvaluator {
     fn eval(&self, name: &str, value: Option<&str>) -> CfgResult {
-        let _ = name;
-        let _ = value;
+        if name == "target_os" {
+            if let Ok(target_os_value) = env::var("CXXBRIDGE_GEN_TARGET_OS") {
+                if let Some(value) = value {
+                    if target_os_value == value {
+                        CfgResult::True
+                    } else {
+                        CfgResult::False
+                    }
+                } else {
+                    let msg = "specify the value for the 'target_os' cfg attribute";
+                    CfgResult::Undetermined { msg: msg.to_owned() }
+                }
+            } else {
+                let msg = "set the environment variable 'CXXBRIDGE_GEN_TARGET_OS' to use this attribute";
+                CfgResult::Undetermined { msg: msg.to_owned() }
+            }
+        } else {
         let msg = "cfg attribute is not supported".to_owned();
         CfgResult::Undetermined { msg }
+        }
     }
 }
 
-- 
2.41.0


```

`patches/Magisk/0008-fix-build-err-on-MinGW.patch`:

```patch
diff --git a/native/src/external/zopfli/src/zopfli/cache.c b/native/src/external/zopfli/src/zopfli/cache.c
index 6b9444f..87b3402 100644
--- a/native/src/external/zopfli/src/zopfli/cache.c
+++ b/native/src/external/zopfli/src/zopfli/cache.c
@@ -33,8 +33,13 @@ void ZopfliInitCache(size_t blocksize, ZopfliLongestMatchCache* lmc) {
   lmc->sublen = (unsigned char*)malloc(ZOPFLI_CACHE_LENGTH * 3 * blocksize);
   if(lmc->sublen == NULL) {
     fprintf(stderr,
+#ifdef _WIN32
+        "Error: Out of memory. Tried allocating %llu bytes of memory.\n",
+        (unsigned long long)ZOPFLI_CACHE_LENGTH * 3 * blocksize);
+#else
         "Error: Out of memory. Tried allocating %lu bytes of memory.\n",
         (unsigned long)ZOPFLI_CACHE_LENGTH * 3 * blocksize);
+#endif
     exit (EXIT_FAILURE);
   }
 
diff --git a/native/src/base/Cargo.toml b/native/src/base/Cargo.toml
index f89abca..42baccf 100644
--- a/native/src/base/Cargo.toml
+++ b/native/src/base/Cargo.toml
@@ -3,3 +3,4 @@ cxx-gen = { workspace = true }
 
 [target.'cfg(windows)'.dependencies]
 filepath = "0.1.2"
+winsup = { path = "../../../../../src/winsup-rs" }
diff --git a/native/src/base/cxx_extern.rs b/native/src/base/cxx_extern.rs
index 86f56a8..a83b1df 100644
--- a/native/src/base/cxx_extern.rs
+++ b/native/src/base/cxx_extern.rs
@@ -2,8 +2,13 @@
 // Functions in this file are only for exporting to C++, DO NOT USE IN RUST
 
 use std::io;
+
+#[cfg(not(target_os = "windows"))]
 use std::os::fd::{BorrowedFd, OwnedFd, RawFd};
 
+#[cfg(target_os = "windows")]
+use winsup::fd::{BorrowedFd, OwnedFd, RawFd};
+
 use cfg_if::cfg_if;
 use cxx::private::c_char;
 use libc::mode_t;
@@ -61,8 +66,16 @@ pub(crate) fn map_file_for_cxx(path: &[u8], rw: bool) -> &'static mut [u8] {
 
 pub(crate) fn map_fd_for_cxx(fd: RawFd, sz: usize, rw: bool) -> &'static mut [u8] {
     unsafe {
+        cfg_if::cfg_if! {
+            if #[cfg(not(target_os = "windows"))] {
         map_fd(BorrowedFd::borrow_raw(fd), sz, rw)
             .log_cxx()
             .unwrap_or(&mut [])
+            } else {
+                map_fd(BorrowedFd::borrow_raw(libc::get_osfhandle(fd) as *mut libc::c_void), sz, rw)
+                    .log_cxx()
+                    .unwrap_or(&mut [])
+            }
+        }
     }
 }
diff --git a/native/src/base/files.rs b/native/src/base/files.rs
index bb1a1f7..0b4929b 100644
--- a/native/src/base/files.rs
+++ b/native/src/base/files.rs
@@ -20,9 +20,16 @@
 use std::fs::File;
 use std::io::{BufRead, Read, Seek, SeekFrom, Write};
 use std::ops::Deref;
+cfg_if::cfg_if! {
+if #[cfg(not(target_os = "windows"))] {
 use std::os::fd::{AsFd, BorrowedFd, IntoRawFd};
 use std::os::unix::ffi::OsStrExt;
 use std::os::unix::io::{AsRawFd, FromRawFd, OwnedFd, RawFd};
+} else {
+use winsup::fd::{AsFd, BorrowedFd, IntoRawFd};
+use winsup::fd::{AsRawFd, FromRawFd, OwnedFd, RawFd};
+}
+}
 use std::path::Path;
 use std::{io, mem, ptr, slice};
 
@@ -478,9 +487,15 @@ impl AsRawFd for Directory {
 }
 
 impl AsFd for Directory {
+    #[cfg(not(target_os = "windows"))]
     fn as_fd(&self) -> BorrowedFd {
         unsafe { BorrowedFd::borrow_raw(self.as_raw_fd()) }
     }
+
+    #[cfg(target_os = "windows")]
+    fn as_fd(&self) -> BorrowedFd {
+        unsafe { BorrowedFd::borrow_raw(libc::get_osfhandle(self.as_raw_fd()) as *mut libc::c_void) }
+    }
 }
 
 impl Drop for Directory {
@@ -843,7 +843,12 @@ impl FsPath {
     pub fn parent(&self, buf: &mut dyn Utf8CStrWrite) -> bool {
         buf.clear();
         if let Some(parent) = Path::new(self.as_str()).parent() {
+            #[cfg(not(target_os = "windows"))]
             let bytes = parent.as_os_str().as_bytes();
+
+            #[cfg(target_os = "windows")]
+            let bytes = parent.to_str().expect("failed to convert Path to str").as_bytes();
+
             // SAFETY: all substring of self is valid UTF-8
             let parent = unsafe { std::str::from_utf8_unchecked(bytes) };
             buf.push_str(parent);
diff --git a/native/src/base/misc.cpp b/native/src/base/misc.cpp
index ee97878..0040ee3 100644
--- a/native/src/base/misc.cpp
+++ b/native/src/base/misc.cpp
@@ -76,6 +76,7 @@ rust::Vec<size_t> mut_u8_patch(
     return data.patch(from, to);
 }
 
+#ifndef _WIN32
 int fork_dont_care() {
     if (int pid = xfork()) {
         waitpid(pid, nullptr, 0);
@@ -170,6 +169,7 @@ int exec_command_sync(exec_t &exec) {
     waitpid(pid, &status, 0);
     return WEXITSTATUS(status);
 }
+#endif
 
 int new_daemon_thread(thread_entry entry, void *arg) {
     pthread_t thread;
diff --git a/native/src/base/misc.hpp b/native/src/base/misc.hpp
index 3bead41..d097388 100644
--- a/native/src/base/misc.hpp
+++ b/native/src/base/misc.hpp
@@ -282,7 +284,11 @@ struct exec_t {
     bool err = false;
     int fd = -2;
     void (*pre_exec)() = nullptr;
+#ifdef _WIN32
+    int (*fork)() = nullptr;
+#else
     int (*fork)() = xfork;
+#endif
     const char **argv = nullptr;
 };
 
@@ -292,6 +292,7 @@ struct exec_t {
     const char **argv = nullptr;
 };
 
+#ifndef _WIN32
 int exec_command(exec_t &exec);
 template <class ...Args>
 int exec_command(exec_t &exec, Args &&...args) {
@@ -322,6 +323,7 @@ void exec_command_async(Args &&...args) {
     };
     exec_command(exec);
 }
+#endif
 
 template <typename T>
 constexpr auto operator+(T e) noexcept ->
diff --git a/native/src/base/xwrap.rs b/native/src/base/xwrap.rs
index 7e7a894..04fb1f9 100644
--- a/native/src/base/xwrap.rs
+++ b/native/src/base/xwrap.rs
@@ -2,7 +2,13 @@
 // Functions in this file are only for exporting to C++, DO NOT USE IN RUST
 
 use std::ffi::CStr;
+
+#[cfg(not(target_os = "windows"))]
 use std::os::unix::io::RawFd;
+
+#[cfg(target_os = "windows")]
+use winsup::fd::RawFd;
+
 use std::ptr;
 
 use libc::{
@@ -53,8 +59,12 @@ macro_rules! perror {
 }
 
 mod c_export {
+    #[cfg(not(target_os = "windows"))]
     use std::os::unix::io::RawFd;
 
+    #[cfg(target_os = "windows")]
+    use winsup::fd::RawFd;
+
     use crate::{slice_from_ptr, slice_from_ptr_mut};
 
     #[no_mangle]
@@ -312,6 +322,8 @@ unsafe extern "C" fn xreaddir(dirp: *mut libc::DIR) -> *mut libc::dirent {
     }
 }
 
+cfg_if::cfg_if! {
+if #[cfg(not(target_os = "windows"))] {
 #[no_mangle]
 extern "C" fn xsetsid() -> i32 {
     unsafe {
@@ -335,6 +351,7 @@ extern "C" fn xsocket(domain: i32, ty: i32, protocol: i32) -> RawFd {
 }
 
 #[no_mangle]
+#[cfg(not(target_os = "windows"))]
 unsafe extern "C" fn xbind(socket: i32, address: *const sockaddr, len: socklen_t) -> i32 {
     let r = libc::bind(socket, address, len);
     if r < 0 {
@@ -386,6 +398,8 @@ unsafe extern "C" fn xrecvmsg(fd: RawFd, msg: *mut libc::msghdr, flags: i32) ->
     }
     r
 }
+}
+}
 
 #[no_mangle]
 unsafe extern "C" fn xaccess(path: *const c_char, mode: i32) -> i32 {
@@ -632,6 +646,7 @@ unsafe extern "C" fn xmmap(
 }
 
 #[no_mangle]
+#[cfg(not(target_os = "windows"))]
 extern "C" fn xfork() -> i32 {
     unsafe {
         let r = libc::fork();
@@ -625,6 +662,7 @@ extern "C" fn xfork() -> i32 {
 }
 
 #[no_mangle]
+#[cfg(not(target_os = "windows"))]
 unsafe extern "C" fn xpoll(fds: *mut pollfd, nfds: nfds_t, timeout: i32) -> i32 {
     let r = libc::poll(fds, nfds, timeout);
     if r < 0 {
diff --git a/native/src/boot/Cargo.toml b/native/src/boot/Cargo.toml
index bcf3b25..c0aa236 100644
--- a/native/src/boot/Cargo.toml
+++ b/native/src/boot/Cargo.toml
@@ -26,3 +26,6 @@ p384 = { workspace = true }
 fdt = { workspace = true }
 bytemuck = { workspace = true, features = ["derive", "min_const_generics"] }
 num-traits = { workspace = true }
+
+[target.'cfg(windows)'.dependencies]
+winsup = { path = "../../../../../src/winsup-rs" }
diff --git a/native/src/boot/payload.rs b/native/src/boot/payload.rs
index dab86d8..c0aca63 100644
--- a/native/src/boot/payload.rs
+++ b/native/src/boot/payload.rs
@@ -1,7 +1,12 @@
 use std::fs::File;
 use std::io::{BufReader, Read, Seek, SeekFrom, Write};
+
+#[cfg(not(target_os = "windows"))]
 use std::os::fd::{AsRawFd, FromRawFd};
 
+#[cfg(target_os = "windows")]
+use winsup::fd::{AsRawFd, FromRawFd};
+
 use byteorder::{BigEndian, ReadBytesExt};
 use quick_protobuf::{BytesReader, MessageRead};
 

diff --git a/native/src/base/files.hpp b/native/src/base/files.hpp
index 0d8d11c..c4bb952 100644
--- a/native/src/base/files.hpp
+++ b/native/src/base/files.hpp

@@ -110,7 +110,11 @@ std::vector<mount_info> parse_mount_info(const char *pid);
 std::string resolve_preinit_dir(const char *base_dir);
 
 using sFILE = std::unique_ptr<FILE, decltype(&fclose)>;
+#ifdef _WIN32
+using sDIR = std::unique_ptr<DIR, int (*)(DIR*)>;
+#else
 using sDIR = std::unique_ptr<DIR, decltype(&closedir)>;
+#endif
 sDIR make_dir(DIR *dp);
 sFILE make_file(FILE *fp);
 
diff --git a/native/src/base/include/stream.hpp b/native/src/base/include/stream.hpp
index 4742085..b461534 100644
--- a/native/src/base/include/stream.hpp
+++ b/native/src/base/include/stream.hpp
@@ -1,6 +1,10 @@
 #pragma once

+#ifdef _WIN32
+#  include <winsup/uio_compat.h>
+#else
 #include <sys/uio.h>
+#endif
 #include <cstdio>
 #include <memory>
 
diff --git a/native/src/base/stream.cpp b/native/src/base/stream.cpp
index b7a775c..9a77dde 100644
--- a/native/src/base/stream.cpp
+++ b/native/src/base/stream.cpp
@@ -12,6 +12,10 @@
 
 using namespace std;
 
+#ifdef _WIN32
+#  define byte std::byte
+#endif
+
 #if 0
 static int strm_read(void *v, char *buf, size_t len) {
     auto strm = static_cast<channel *>(v);
diff --git a/native/src/boot/format.hpp b/native/src/boot/format.hpp
index 79dac8f..e0634ba 100644
--- a/native/src/boot/format.hpp
+++ b/native/src/boot/format.hpp
@@ -9,7 +9,12 @@ typedef enum {
     AOSP,
     AOSP_VENDOR,
     DHTB,
+#ifdef _WIN32
+    FORMAT_BLOB,
+#   define BLOB FORMAT_BLOB
+#else
     BLOB,
+#endif
 /* Compression formats */
     GZIP,
     ZOPFLI,
diff --git a/native/src/boot/bootimg.cpp b/native/src/boot/bootimg.cpp
index a80a746..857eff2 100644
--- a/native/src/boot/bootimg.cpp
+++ b/native/src/boot/bootimg.cpp
@@ -1,6 +1,11 @@
 #include <functional>
 #include <memory>

+#ifdef _WIN32
+#  define O_CLOEXEC O_NOINHERIT
+
+#  include <winsup/str_compat.h>
+#endif
 #include <base.hpp>

 #include "boot-rs.hpp"
-- 
2.41.0.windows.3

```

`patches/Magisk/0009-drop-rust-funcs-unused-by-magiskboot.patch`:

```patch
--- b/native/src/base/cstr.rs
+++ a/native/src/base/cstr.rs
@@ -2,7 +2,10 @@
 use std::ffi::{CStr, FromBytesWithNulError, OsStr};
 use std::fmt::{Arguments, Debug, Display, Formatter, Write};
 use std::ops::{Deref, DerefMut};
+
+#[cfg(unix)]
 use std::os::unix::ffi::OsStrExt;
+
 use std::path::{Path, PathBuf};
 use std::str::{Utf8Chunks, Utf8Error};
 use std::{fmt, mem, slice, str};
@@ -123,6 +122,7 @@
     }
 }
 
+#[cfg(unix)]
 impl StringExt for PathBuf {
     #[allow(mutable_transmutes)]
     fn nul_terminate(&mut self) -> &mut [u8] {
--- a/native/src/base/files.rs
+++ b/native/src/base/files.rs
@@ -981,6 +981,8 @@ pub(crate) fn map_fd(fd: BorrowedFd, sz: usize, rw: bool) -> io::Result<&'static
     }
 }
 
+cfg_if::cfg_if! {
+    if #[cfg(any(target_os = "android", target_os = "linux"))] {
 #[allow(dead_code)]
 pub struct MountInfo {
     pub id: u32,
@@ -1059,4 +1061,6 @@ pub fn parse_mount_info(pid: &str) -> Vec<MountInfo> {
         });
     }
     res
+}
+    }
 }

```

`patches/Magisk/0010-workaround-UTF-8-issues-on-Windows.patch`:

```patch
From 7f4f80f0d520abb0fdf25a02bdc656f66fb5b797 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Tue, 9 Apr 2024 00:45:17 +0800
Subject: [PATCH] workaround UTF-8 issues on Windows

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 native/src/base/cstr.rs | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/native/src/base/cstr.rs b/native/src/base/cstr.rs
index d93db87..4bbbeb9 100644
--- a/native/src/base/cstr.rs
+++ b/native/src/base/cstr.rs
@@ -312,7 +312,9 @@ pub struct Utf8CStr([u8]);
 impl Utf8CStr {
     pub fn from_cstr(cstr: &CStr) -> Result<&Utf8CStr, StrErr> {
         // Validate the buffer during construction
+        #[cfg(not(target_os = "windows"))]
         str::from_utf8(cstr.to_bytes())?;
+
         Ok(unsafe { Self::from_bytes_unchecked(cstr.to_bytes_with_nul()) })
     }
 
-- 
2.44.0


```

`patches/android_core/0001-Fix-inclusion-of-stdatomic.h-with-g.patch`:

```patch
From 448fa2a3c470ff3a58135458fb34d33732600f67 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?S=C3=B6ren=20Tempel?= <soeren+git@soeren-tempel.net>
Date: Tue, 27 Feb 2018 16:30:30 +0100
Subject: [PATCH] Fix inclusion of stdatomic.h with g++

See: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=60932#c5
---
 libcutils/include/cutils/atomic.h | 6 ++++++
 libcutils/include/cutils/trace.h  | 5 +++++
 2 files changed, 11 insertions(+)

diff --git a/libcutils/include/cutils/atomic.h b/libcutils/include/cutils/atomic.h
index 0c88bfedd..84606e307 100644
--- a/libcutils/include/cutils/atomic.h
+++ b/libcutils/include/cutils/atomic.h
@@ -19,7 +19,13 @@
 
 #include <stdint.h>
 #include <sys/types.h>
+
+#ifdef __cplusplus
+#include <atomic>
+using namespace std;
+#else
 #include <stdatomic.h>
+#endif
 
 #ifndef ANDROID_ATOMIC_INLINE
 #define ANDROID_ATOMIC_INLINE static inline
diff --git a/libcutils/include/cutils/trace.h b/libcutils/include/cutils/trace.h
index ef426ff7b..f7d7ccc3c 100644
--- a/libcutils/include/cutils/trace.h
+++ b/libcutils/include/cutils/trace.h
@@ -18,7 +18,12 @@
 #define _LIBS_CUTILS_TRACE_H
 
 #include <inttypes.h>
+#ifdef __cplusplus
+#include <atomic>
+using namespace std;
+#else
 #include <stdatomic.h>
+#endif
 #include <stdbool.h>
 #include <stdint.h>
 #include <stdio.h>

```

`patches/android_core/0008-Vector-don-t-assign-to-const-object.patch`:

```patch
From 55a4b14b6557c7e767afd043571c2b7485c6e1eb Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C4=90o=C3=A0n=20Tr=E1=BA=A7n=20C=C3=B4ng=20Danh?=
 <congdanhqx@gmail.com>
Date: Sun, 1 Nov 2020 10:14:11 +0700
Subject: [PATCH] Vector: don't assign to const object

---
 libutils/include/utils/Vector.h | 15 ---------------
 1 file changed, 15 deletions(-)

diff --git a/libutils/include/utils/Vector.h b/libutils/include/utils/Vector.h
index be35ea2f0..20804f702 100644
--- a/libutils/include/utils/Vector.h
+++ b/libutils/include/utils/Vector.h
@@ -67,10 +67,7 @@ public:
     virtual                 ~Vector();
 
     /*! copy operator */
-            const Vector<TYPE>&     operator = (const Vector<TYPE>& rhs) const;
             Vector<TYPE>&           operator = (const Vector<TYPE>& rhs);
-
-            const Vector<TYPE>&     operator = (const SortedVector<TYPE>& rhs) const;
             Vector<TYPE>&           operator = (const SortedVector<TYPE>& rhs);
 
             /*
@@ -254,24 +251,12 @@ Vector<TYPE>& Vector<TYPE>::operator = (const Vector<TYPE>& rhs) {
     return *this;
 }
 
-template<class TYPE> inline
-const Vector<TYPE>& Vector<TYPE>::operator = (const Vector<TYPE>& rhs) const {
-    VectorImpl::operator = (static_cast<const VectorImpl&>(rhs));
-    return *this;
-}
-
 template<class TYPE> inline
 Vector<TYPE>& Vector<TYPE>::operator = (const SortedVector<TYPE>& rhs) {
     VectorImpl::operator = (static_cast<const VectorImpl&>(rhs));
     return *this;
 }
 
-template<class TYPE> inline
-const Vector<TYPE>& Vector<TYPE>::operator = (const SortedVector<TYPE>& rhs) const {
-    VectorImpl::operator = (rhs);
-    return *this;
-}
-
 template<class TYPE> inline
 const TYPE* Vector<TYPE>::array() const {
     return static_cast<const TYPE *>(arrayImpl());

```

`patches/android_core/0009-Don-t-use-the-internal-glibc-header-sys-cdefs.h.patch`:

```patch
From 49a3dad208220b35ca7d81b7ea7f053801ada9dd Mon Sep 17 00:00:00 2001
From: John Zimmermann <me@johnnynator.dev>
Date: Thu, 18 Mar 2021 12:22:51 +0100
Subject: [PATCH] Don't use the internal glibc header sys/cdefs.h

        for file in $(ag -l '__BEGIN_DECLS|sys/cdefs.h'); do
                sed -i "${file}" \
                        -e 's/__BEGIN_DECLS/#ifdef __cplusplus\nextern "C" {\n#endif/g' \
                        -e 's/__END_DECLS/#ifdef __cplusplus\n}\n#endif/g' \
                        -e '/#include <sys\/cdefs.h>/d'
        done

https://wiki.musl-libc.org/faq.html#Q:-When-compiling-something-against-musl,-I-get-error-messages-about-%3Ccode%3Esys/cdefs.h%3C/code%3E
---
 debuggerd/include/debuggerd/client.h          |  1 -
 debuggerd/include/debuggerd/handler.h         |  9 +++++---
 debuggerd/util.h                              |  1 -
 fs_mgr/fs_mgr_priv_boot_config.h              |  1 -
 init/keychords.cpp                            |  1 -
 init/reboot.cpp                               |  1 -
 libasyncio/include/asyncio/AsyncIO.h          |  1 -
 libcutils/android_get_control_env.h           |  9 +++++---
 libcutils/include/cutils/android_reboot.h     |  9 +++++---
 libcutils/include/cutils/bitops.h             |  9 +++++---
 libcutils/include/cutils/klog.h               |  9 +++++---
 libcutils/include/cutils/partition_utils.h    |  9 +++++---
 libcutils/include/cutils/properties.h         |  1 -
 libcutils/include/cutils/str_parms.h          |  9 +++++---
 libcutils/include/cutils/trace.h              |  9 +++++---
 libcutils/include/private/canned_fs_config.h  |  9 +++++---
 libcutils/include/private/fs_config.h         |  9 +++++---
 libkeyutils/include/keyutils.h                |  9 +++++---
 libnetutils/include/netutils/ifc.h            |  9 +++++---
 .../packagelistparser/packagelistparser.h     |  8 +++++--
 libprocessgroup/cgroup_map.h                  |  1 -
 .../cgrouprc/include/android/cgrouprc.h       |  8 +++++--
 .../include/processgroup/processgroup.h       |  9 +++++---
 libprocessgroup/task_profiles.h               |  1 -
 libsuspend/autosuspend_ops.h                  |  8 +++++--
 libsuspend/include/suspend/autosuspend.h      |  9 +++++---
 libsync/include/android/sync.h                |  8 +++++--
 libsync/include/ndk/sync.h                    |  9 +++++---
 libsync/sw_sync.h                             |  8 +++++--
 libsystem/include/system/camera.h             |  9 +++++---
 libsystem/include/system/radio.h              |  1 -
 libutils/Singleton_test.h                     |  9 +++++---
 llkd/include/llkd.h                           | 21 +++++++++++++------
 llkd/libllkd.cpp                              |  1 -
 trusty/gatekeeper/trusty_gatekeeper_ipc.h     |  8 +++++--
 .../ipc/trusty_keymaster_ipc.h                |  8 +++++--
 .../storage/lib/include/trusty/lib/storage.h  |  8 +++++--
 37 files changed, 165 insertions(+), 84 deletions(-)

diff --git a/debuggerd/include/debuggerd/client.h b/debuggerd/include/debuggerd/client.h
index b7284b08ec..b85b6e542e 100644
--- a/debuggerd/include/debuggerd/client.h
+++ b/debuggerd/include/debuggerd/client.h
@@ -17,7 +17,6 @@
 #pragma once
 
 #include <stdbool.h>
-#include <sys/cdefs.h>
 #include <unistd.h>
 
 #include <android-base/unique_fd.h>
diff --git a/debuggerd/include/debuggerd/handler.h b/debuggerd/include/debuggerd/handler.h
index bc08327a1c..c008b66f70 100644
--- a/debuggerd/include/debuggerd/handler.h
+++ b/debuggerd/include/debuggerd/handler.h
@@ -20,11 +20,9 @@
 #include <signal.h>
 #include <stdint.h>
 #include <string.h>
-#include <sys/cdefs.h>
 #include <sys/system_properties.h>
 #include <sys/types.h>
 
-__BEGIN_DECLS
 
 // Forward declare these classes so not everyone has to include GWP-ASan
 // headers.
@@ -80,4 +78,3 @@ static void __attribute__((__unused__)) debuggerd_register_handlers(struct sigac
   sigaction(BIONIC_SIGNAL_DEBUGGER, action, nullptr);
 }
 
-__END_DECLS
diff --git a/debuggerd/util.h b/debuggerd/util.h
index 43758702f2..58c0816802 100644
--- a/debuggerd/util.h
+++ b/debuggerd/util.h
@@ -20,7 +20,6 @@
 #include <string>
 #include <vector>
 
-#include <sys/cdefs.h>
 #include <sys/types.h>
 
 std::vector<std::string> get_command_line(pid_t pid);
diff --git a/fs_mgr/fs_mgr_priv_boot_config.h b/fs_mgr/fs_mgr_priv_boot_config.h
index 6a38401319..c081c3da2a 100644
--- a/fs_mgr/fs_mgr_priv_boot_config.h
+++ b/fs_mgr/fs_mgr_priv_boot_config.h
@@ -17,7 +17,6 @@
 #ifndef __CORE_FS_MGR_PRIV_BOOTCONFIG_H
 #define __CORE_FS_MGR_PRIV_BOOTCONFIG_H
 
-#include <sys/cdefs.h>
 #include <string>
 #include <utility>
 #include <vector>
diff --git a/init/keychords.cpp b/init/keychords.cpp
index adec383295..40e8524899 100644
--- a/init/keychords.cpp
+++ b/init/keychords.cpp
@@ -19,7 +19,6 @@
 #include <dirent.h>
 #include <fcntl.h>
 #include <linux/input.h>
-#include <sys/cdefs.h>
 #include <sys/inotify.h>
 #include <sys/ioctl.h>
 #include <sys/types.h>
diff --git a/init/reboot.cpp b/init/reboot.cpp
index 6aa9912e15..9431fcf6f2 100644
--- a/init/reboot.cpp
+++ b/init/reboot.cpp
@@ -23,7 +23,6 @@
 #include <mntent.h>
 #include <semaphore.h>
 #include <stdlib.h>
-#include <sys/cdefs.h>
 #include <sys/ioctl.h>
 #include <sys/mount.h>
 #include <sys/stat.h>
diff --git a/libasyncio/include/asyncio/AsyncIO.h b/libasyncio/include/asyncio/AsyncIO.h
index 9620d2a843..005fc6648f 100644
--- a/libasyncio/include/asyncio/AsyncIO.h
+++ b/libasyncio/include/asyncio/AsyncIO.h
@@ -20,7 +20,6 @@
 #include <linux/aio_abi.h>
 #include <stdbool.h>
 #include <stdint.h>
-#include <sys/cdefs.h>
 #include <sys/types.h>
 #include <time.h>
 #include <unistd.h>
diff --git a/libcutils/android_get_control_env.h b/libcutils/android_get_control_env.h
index a830269183..125274cad8 100644
--- a/libcutils/android_get_control_env.h
+++ b/libcutils/android_get_control_env.h
@@ -16,11 +16,8 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
 
 int __android_get_control_from_env(const char* prefix, const char* name)
         __attribute__((visibility("hidden")));
 
-__END_DECLS
diff --git a/libcutils/include/cutils/android_reboot.h b/libcutils/include/cutils/android_reboot.h
index 24e32d560a..56a31bc7a4 100644
--- a/libcutils/include/cutils/android_reboot.h
+++ b/libcutils/include/cutils/android_reboot.h
@@ -16,9 +16,10 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /* Commands */
 #define ANDROID_RB_RESTART 0xDEAD0001 /* deprecated. Use RESTART2. */
@@ -40,4 +41,6 @@ __BEGIN_DECLS
  */
 int android_reboot(unsigned cmd, int flags, const char* arg);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libcutils/include/cutils/bitops.h b/libcutils/include/cutils/bitops.h
index 38d284039a..79193b5895 100644
--- a/libcutils/include/cutils/bitops.h
+++ b/libcutils/include/cutils/bitops.h
@@ -20,9 +20,10 @@
 #include <stdbool.h>
 #include <string.h>
 #include <strings.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 static inline int popcount(unsigned int x) {
     return __builtin_popcount(x);
@@ -36,6 +37,8 @@ static inline int popcountll(unsigned long long x) {
     return __builtin_popcountll(x);
 }
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* __CUTILS_BITOPS_H */
diff --git a/libcutils/include/cutils/klog.h b/libcutils/include/cutils/klog.h
index 5ae6216eb0..8006be7309 100644
--- a/libcutils/include/cutils/klog.h
+++ b/libcutils/include/cutils/klog.h
@@ -17,11 +17,12 @@
 #ifndef _CUTILS_KLOG_H_
 #define _CUTILS_KLOG_H_
 
-#include <sys/cdefs.h>
 #include <sys/uio.h>
 #include <stdarg.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 void klog_set_level(int level);
 
@@ -29,7 +30,9 @@ void klog_write(int level, const char *fmt, ...)
     __attribute__ ((format(printf, 2, 3)));
 void klog_writev(int level, const struct iovec* iov, int iov_count);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #define KLOG_ERROR_LEVEL   3
 #define KLOG_WARNING_LEVEL 4
diff --git a/libcutils/include/cutils/partition_utils.h b/libcutils/include/cutils/partition_utils.h
index 8bc9b48b30..ff1d13a064 100644
--- a/libcutils/include/cutils/partition_utils.h
+++ b/libcutils/include/cutils/partition_utils.h
@@ -17,12 +17,15 @@
 #ifndef __CUTILS_PARTITION_WIPED_H__
 #define __CUTILS_PARTITION_WIPED_H__
 
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 int partition_wiped(const char* source);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* __CUTILS_PARTITION_WIPED_H__ */
diff --git a/libcutils/include/cutils/properties.h b/libcutils/include/cutils/properties.h
index 78d8bc6544..9f87212036 100644
--- a/libcutils/include/cutils/properties.h
+++ b/libcutils/include/cutils/properties.h
@@ -16,7 +16,6 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <stddef.h>
 #include <stdint.h>
 
diff --git a/libcutils/include/cutils/str_parms.h b/libcutils/include/cutils/str_parms.h
index aa1435a080..160792a372 100644
--- a/libcutils/include/cutils/str_parms.h
+++ b/libcutils/include/cutils/str_parms.h
@@ -18,9 +18,10 @@
 #define __CUTILS_STR_PARMS_H
 
 #include <stdint.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 struct str_parms;
 
@@ -55,6 +56,8 @@ char *str_parms_to_str(struct str_parms *str_parms);
 /* debug */
 void str_parms_dump(struct str_parms *str_parms);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* __CUTILS_STR_PARMS_H */
diff --git a/libcutils/include/cutils/trace.h b/libcutils/include/cutils/trace.h
index ab2c64c2c5..c649e0d24f 100644
--- a/libcutils/include/cutils/trace.h
+++ b/libcutils/include/cutils/trace.h
@@ -27,12 +27,13 @@ using namespace std;
 #include <stdbool.h>
 #include <stdint.h>
 #include <stdio.h>
-#include <sys/cdefs.h>
 #include <sys/types.h>
 #include <unistd.h>
 #include <cutils/compiler.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /**
  * The ATRACE_TAG macro can be defined before including this header to trace
@@ -272,6 +273,8 @@ static inline void atrace_int64(uint64_t tag, const char* name, int64_t value)
     }
 }
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif // _LIBS_CUTILS_TRACE_H
diff --git a/libcutils/include/private/canned_fs_config.h b/libcutils/include/private/canned_fs_config.h
index ad4de4ce6c..caf4b6186a 100644
--- a/libcutils/include/private/canned_fs_config.h
+++ b/libcutils/include/private/canned_fs_config.h
@@ -17,12 +17,15 @@
 #pragma once
 
 #include <inttypes.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 int load_canned_fs_config(const char* fn);
 void canned_fs_config(const char* path, int dir, const char* target_out_path, unsigned* uid,
                       unsigned* gid, unsigned* mode, uint64_t* capabilities);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libcutils/include/private/fs_config.h b/libcutils/include/private/fs_config.h
index 8a9a1ffd77..40cb55f23a 100644
--- a/libcutils/include/private/fs_config.h
+++ b/libcutils/include/private/fs_config.h
@@ -22,7 +22,6 @@
 #pragma once
 
 #include <stdint.h>
-#include <sys/cdefs.h>
 
 #if defined(__BIONIC__)
 #include <linux/capability.h>
@@ -32,7 +31,9 @@
 
 /* Rules for directories and files has moved to system/code/libcutils/fs_config.c */
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /*
  * Used in:
@@ -47,4 +48,6 @@ __BEGIN_DECLS
 void fs_config(const char* path, int dir, const char* target_out_path, unsigned* uid, unsigned* gid,
                unsigned* mode, uint64_t* capabilities);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libkeyutils/include/keyutils.h b/libkeyutils/include/keyutils.h
index c508f27902..2c3b4b0b12 100644
--- a/libkeyutils/include/keyutils.h
+++ b/libkeyutils/include/keyutils.h
@@ -31,9 +31,10 @@
 
 #include <linux/keyctl.h>
 #include <stdint.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 typedef int32_t key_serial_t;
 
@@ -55,6 +56,8 @@ long keyctl_restrict_keyring(key_serial_t keyring, const char* type, const char*
 
 long keyctl_get_security(key_serial_t key, char* buffer, size_t buflen);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif
diff --git a/libnetutils/include/netutils/ifc.h b/libnetutils/include/netutils/ifc.h
index ee896ac086..3816f3371d 100644
--- a/libnetutils/include/netutils/ifc.h
+++ b/libnetutils/include/netutils/ifc.h
@@ -19,9 +19,10 @@
 
 #include <arpa/inet.h>
 #include <stdbool.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 extern int ifc_init(void);
 extern void ifc_close(void);
@@ -64,6 +65,8 @@ extern int ifc_configure(const char *ifname, in_addr_t address,
 
 extern in_addr_t prefixLengthToIpv4Netmask(int prefix_length);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* _NETUTILS_IFC_H_ */
diff --git a/libpackagelistparser/include/packagelistparser/packagelistparser.h b/libpackagelistparser/include/packagelistparser/packagelistparser.h
index e89cb5400d..86b6604ca2 100644
--- a/libpackagelistparser/include/packagelistparser/packagelistparser.h
+++ b/libpackagelistparser/include/packagelistparser/packagelistparser.h
@@ -19,7 +19,9 @@
 #include <stdbool.h>
 #include <sys/types.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 typedef struct gid_list {
   /** Number of gids. */
@@ -78,4 +80,6 @@ bool packagelist_parse_file(const char* path, bool (*callback)(pkg_info* info, v
 /** Frees the given `pkg_info`. */
 void packagelist_free(pkg_info* info);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libprocessgroup/cgroup_map.h b/libprocessgroup/cgroup_map.h
index 5cdf8b28c0..322d4c4778 100644
--- a/libprocessgroup/cgroup_map.h
+++ b/libprocessgroup/cgroup_map.h
@@ -16,7 +16,6 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <sys/types.h>
 
 #include <map>
diff --git a/libprocessgroup/cgrouprc/include/android/cgrouprc.h b/libprocessgroup/cgrouprc/include/android/cgrouprc.h
index e704a36aac..39d9684d55 100644
--- a/libprocessgroup/cgrouprc/include/android/cgrouprc.h
+++ b/libprocessgroup/cgrouprc/include/android/cgrouprc.h
@@ -19,7 +19,9 @@
 #include <sys/cdefs.h>
 #include <stdint.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 // For host builds, __INTRODUCED_IN is not defined.
 #ifndef __INTRODUCED_IN
@@ -92,4 +94,6 @@ __attribute__((warn_unused_result)) const char* ACgroupController_getName(const
 __attribute__((warn_unused_result)) const char* ACgroupController_getPath(const ACgroupController*)
         __INTRODUCED_IN(29);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libprocessgroup/include/processgroup/processgroup.h b/libprocessgroup/include/processgroup/processgroup.h
index c5badc941f..8ecc416784 100644
--- a/libprocessgroup/include/processgroup/processgroup.h
+++ b/libprocessgroup/include/processgroup/processgroup.h
@@ -16,7 +16,6 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <sys/types.h>
 #include <initializer_list>
 #include <span>
@@ -24,7 +23,9 @@
 #include <string_view>
 #include <vector>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 static constexpr const char* CGROUPV2_CONTROLLER_NAME = "cgroup2";
 
@@ -37,7 +38,9 @@ bool CgroupGetAttributePathForTask(const std::string& attr_name, int tid, std::s
 bool SetTaskProfiles(int tid, const std::vector<std::string>& profiles, bool use_fd_cache = false);
 bool SetProcessProfiles(uid_t uid, pid_t pid, const std::vector<std::string>& profiles);

-__END_DECLS
+#ifdef __cplusplus
+}
+#endif

 bool SetTaskProfiles(int tid, std::initializer_list<std::string_view> profiles,
                      bool use_fd_cache = false);
@@ -48,7 +51,9 @@ bool SetTaskProfiles(int tid, std::span<const std::string_view> profiles,
 bool SetProcessProfiles(uid_t uid, pid_t pid, std::span<const std::string_view> profiles);
 #endif

-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif

 #ifndef __ANDROID_VNDK__

@@ -92,4 +97,6 @@ bool getAttributePathForTask(const std::string& attr_name, int tid, std::string*

 #endif // __ANDROID_VNDK__
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/libprocessgroup/task_profiles.h b/libprocessgroup/task_profiles.h
index 9ee3781a62..f424483603 100644
--- a/libprocessgroup/task_profiles.h
+++ b/libprocessgroup/task_profiles.h
@@ -16,7 +16,6 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <sys/types.h>
 #include <functional>
 #include <map>
diff --git a/libsuspend/autosuspend_ops.h b/libsuspend/autosuspend_ops.h
index b0024c8bb2..ea0eafd00e 100644
--- a/libsuspend/autosuspend_ops.h
+++ b/libsuspend/autosuspend_ops.h
@@ -24,8 +24,12 @@ struct autosuspend_ops {
     void (*set_wakeup_callback)(void (*func)(bool success));
 };
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 struct autosuspend_ops *autosuspend_wakeup_count_init(void);
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif
diff --git a/libsuspend/include/suspend/autosuspend.h b/libsuspend/include/suspend/autosuspend.h
index 21f4d61bf8..dbbca161c1 100644
--- a/libsuspend/include/suspend/autosuspend.h
+++ b/libsuspend/include/suspend/autosuspend.h
@@ -17,10 +17,11 @@
 #ifndef _LIBSUSPEND_AUTOSUSPEND_H_
 #define _LIBSUSPEND_AUTOSUSPEND_H_
 
-#include <sys/cdefs.h>
 #include <stdbool.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /*
  * autosuspend_enable
@@ -64,6 +65,8 @@ int autosuspend_force_suspend(int timeout_ms);
  */
 void autosuspend_set_wakeup_callback(void (*func)(bool success));
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif
diff --git a/libsync/include/android/sync.h b/libsync/include/android/sync.h
index 32bb878baa..59a8f9fadf 100644
--- a/libsync/include/android/sync.h
+++ b/libsync/include/android/sync.h
@@ -39,11 +39,15 @@
 
 #include "../ndk/sync.h"
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /* timeout in msecs */
 int sync_wait(int fd, int timeout);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* __SYS_CORE_SYNC_H */
diff --git a/libsync/include/ndk/sync.h b/libsync/include/ndk/sync.h
index 38ccb686c1..04c8e07adb 100644
--- a/libsync/include/ndk/sync.h
+++ b/libsync/include/ndk/sync.h
@@ -27,11 +27,12 @@
 #define ANDROID_SYNC_H
 
 #include <stdint.h>
-#include <sys/cdefs.h>
 
 #include <linux/sync_file.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /* Fences indicate the status of an asynchronous task. They are initially
  * in unsignaled state (0), and make a one-time transition to either signaled
@@ -99,7 +100,9 @@ static inline struct sync_fence_info* sync_get_fence_info(const struct sync_file
  */
 void sync_file_info_free(struct sync_file_info* info) __INTRODUCED_IN(26);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* ANDROID_SYNC_H */

diff --git a/libsync/sw_sync.h b/libsync/sw_sync.h
index fda1c4c57c..395c38072c 100644
--- a/libsync/sw_sync.h
+++ b/libsync/sw_sync.h
@@ -19,7 +19,9 @@
 #ifndef __SYS_CORE_SW_SYNC_H
 #define __SYS_CORE_SW_SYNC_H
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /*
  * sw_sync is mainly intended for testing and should not be compiled into
@@ -30,6 +32,8 @@ int sw_sync_timeline_create(void);
 int sw_sync_timeline_inc(int fd, unsigned count);
 int sw_sync_fence_create(int fd, const char *name, unsigned value);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* __SYS_CORE_SW_SYNC_H */
diff --git a/libsystem/include/system/camera.h b/libsystem/include/system/camera.h
index 2ca90c395b..c42f559667 100644
--- a/libsystem/include/system/camera.h
+++ b/libsystem/include/system/camera.h
@@ -18,13 +18,14 @@
 #define SYSTEM_CORE_INCLUDE_ANDROID_CAMERA_H
 
 #include <stdint.h>
-#include <sys/cdefs.h>
 #include <sys/types.h>
 #include <cutils/native_handle.h>
 #include <hardware/hardware.h>
 #include <hardware/gralloc.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /**
  * A set of bit masks for specifying how the received preview frames are
@@ -302,6 +303,8 @@ typedef struct camera_frame_metadata {
     camera_face_t *faces;
 } camera_frame_metadata_t;
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* SYSTEM_CORE_INCLUDE_ANDROID_CAMERA_H */
diff --git a/libsystem/include/system/radio.h b/libsystem/include/system/radio.h
index acf3ea787a..dfd254fc6d 100644
--- a/libsystem/include/system/radio.h
+++ b/libsystem/include/system/radio.h
@@ -20,7 +20,6 @@
 #include <stdbool.h>
 #include <stdint.h>
 #include <stdio.h>
-#include <sys/cdefs.h>
 #include <sys/types.h>
 
 
diff --git a/libutils/Singleton_test.h b/libutils/Singleton_test.h
index c77d9ffe66..00bd56242c 100644
--- a/libutils/Singleton_test.h
+++ b/libutils/Singleton_test.h
@@ -17,7 +17,6 @@
 #ifndef ANDROID_UTILS_SINGLETON_TEST_H
 #define ANDROID_UTILS_SINGLETON_TEST_H
 
-#include <sys/cdefs.h>
 
 #include "Singleton_test.h"
 
@@ -27,13 +26,17 @@ struct SingletonTestData : Singleton<SingletonTestData> {
     unsigned int contents;
 };
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 unsigned int singletonGetInstanceContents();
 void singletonSetInstanceContents(unsigned int);
 bool singletonHasInstance();
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 }
 
diff --git a/llkd/include/llkd.h b/llkd/include/llkd.h
index 0822a3e2bf..a4e3037c18 100644
--- a/llkd/include/llkd.h
+++ b/llkd/include/llkd.h
@@ -22,9 +22,10 @@
 #endif
 
 #include <stdbool.h>
-#include <sys/cdefs.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 bool llkInit(const char* threadname); /* threadname NULL, not spawned */
 unsigned llkCheckMilliseconds(void);
@@ -63,17 +64,25 @@ unsigned llkCheckMilliseconds(void);
 #define LLK_IGNORELIST_STACK_DEFAULT    "init,lmkd.llkd,llkd,keystore,keystore2,ueventd,apexd"
 /* clang-format on */
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #ifdef __cplusplus
-extern "C++" { /* In case this included wrapped with __BEGIN_DECLS */
+extern "C++" { /* In case this included wrapped with #ifdef __cplusplus
+extern "C" {
+#endif */
 
 #include <chrono>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 /* C++ code allowed to not specify threadname argument for this C linkage */
 bool llkInit(const char* threadname = nullptr);
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 std::chrono::milliseconds llkCheck(bool checkRunning = false);
 
 /* clang-format off */
diff --git a/llkd/libllkd.cpp b/llkd/libllkd.cpp
index 42602e9ee0..ed348bb855 100644
--- a/llkd/libllkd.cpp
+++ b/llkd/libllkd.cpp
@@ -25,7 +25,6 @@
 #include <signal.h>
 #include <stdint.h>
 #include <string.h>
-#include <sys/cdefs.h>  // ___STRING, __predict_true() and _predict_false()
 #include <sys/mman.h>   // mlockall()
 #include <sys/prctl.h>
 #include <sys/stat.h>     // lstat()
diff --git a/trusty/gatekeeper/trusty_gatekeeper_ipc.h b/trusty/gatekeeper/trusty_gatekeeper_ipc.h
index f8de7f8738..fa8fd40198 100644
--- a/trusty/gatekeeper/trusty_gatekeeper_ipc.h
+++ b/trusty/gatekeeper/trusty_gatekeeper_ipc.h
@@ -14,11 +14,15 @@
  * limitations under the License.
  */
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 int trusty_gatekeeper_connect();
 int trusty_gatekeeper_call(uint32_t cmd, void *in, uint32_t in_size, uint8_t *out,
                            uint32_t *out_size);
 void trusty_gatekeeper_disconnect();
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/trusty/keymaster/include/trusty_keymaster/ipc/trusty_keymaster_ipc.h b/trusty/keymaster/include/trusty_keymaster/ipc/trusty_keymaster_ipc.h
index 16207e6d98..9a1245886b 100644
--- a/trusty/keymaster/include/trusty_keymaster/ipc/trusty_keymaster_ipc.h
+++ b/trusty/keymaster/include/trusty_keymaster/ipc/trusty_keymaster_ipc.h
@@ -20,7 +20,9 @@
 #include <keymaster/android_keymaster_messages.h>
 #include <trusty_keymaster/ipc/keymaster_ipc.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 const uint32_t TRUSTY_KEYMASTER_RECV_BUF_SIZE = 2 * PAGE_SIZE;
 const uint32_t TRUSTY_KEYMASTER_SEND_BUF_SIZE =
@@ -35,6 +37,8 @@ keymaster_error_t translate_error(int err);
 keymaster_error_t trusty_keymaster_send(uint32_t command, const keymaster::Serializable& req,
                                         keymaster::KeymasterResponse* rsp);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif  // TRUSTY_KEYMASTER_TRUSTY_KEYMASTER_IPC_H_
diff --git a/trusty/storage/lib/include/trusty/lib/storage.h b/trusty/storage/lib/include/trusty/lib/storage.h
index b8ddf67d87..6cac8750cd 100644
--- a/trusty/storage/lib/include/trusty/lib/storage.h
+++ b/trusty/storage/lib/include/trusty/lib/storage.h
@@ -21,7 +21,9 @@
 
 #define STORAGE_MAX_NAME_LENGTH_BYTES 159
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 typedef uint32_t storage_session_t;
 typedef uint64_t file_handle_t;
@@ -151,4 +153,6 @@ int storage_get_file_size(file_handle_t handle, storage_off_t *size);
 int storage_end_transaction(storage_session_t session, bool complete);
 
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif

```

`patches/android_core/0010-Correct-version-in-which-gettid-was-introduced-to-gl.patch`:

```patch
From 0950d4ac7ab12f3fc493e9e5b5e2e74154291bbd Mon Sep 17 00:00:00 2001
From: munix9 <44939650+munix9@users.noreply.github.com>
Date: Mon, 5 Jul 2021 23:33:46 +0200
Subject: [PATCH] Correct version in which gettid was introduced to glibc

---
 libcutils/include/cutils/threads.h | 2 +-
 libcutils/threads.cpp              | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/libcutils/include/cutils/threads.h b/libcutils/include/cutils/threads.h
index 0082c6c63..a85e12988 100644
--- a/libcutils/include/cutils/threads.h
+++ b/libcutils/include/cutils/threads.h
@@ -31,7 +31,7 @@ extern "C" {
 //
 // Deprecated: use android::base::GetThreadId instead, which doesn't truncate on Mac/Windows.
 //
-#if !defined(__GLIBC__) || __GLIBC__ >= 2 && __GLIBC_MINOR__ < 32
+#if !defined(__GLIBC__) || __GLIBC__ >= 2 && __GLIBC_MINOR__ < 31
 extern pid_t gettid();
 #endif
 
diff --git a/libcutils/threads.cpp b/libcutils/threads.cpp
index 6ece7a3af..a15ff6aa3 100644
--- a/libcutils/threads.cpp
+++ b/libcutils/threads.cpp
@@ -25,7 +25,7 @@
 #include <windows.h>
 #endif
 
-#if defined(__BIONIC__) || defined(__GLIBC__) && __GLIBC_MINOR__ >= 32
+#if defined(__BIONIC__) || defined(__GLIBC__) && __GLIBC_MINOR__ >= 31
 // No definition needed for Android because we'll just pick up bionic's copy.
 // No definition needed for Glibc >= 2.32 because it exposes its own copy.
 #else

```

`patches/android_libbase/0001-android-base-endian.h-fix-build-on-musl.patch`:

```patch
From c57c764c290e09eac3b177848a87bf6356f76d18 Mon Sep 17 00:00:00 2001
From: jershell <jershell@mail.ru>
Date: Tue, 7 Jun 2022 00:29:25 +0300
Subject: [PATCH] android-base/endian.h: fix build on musl

---
 include/android-base/endian.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/include/android-base/endian.h b/include/android-base/endian.h
index b47494b..ddfe36f 100644
--- a/include/android-base/endian.h
+++ b/include/android-base/endian.h
@@ -25,7 +25,7 @@
 
 #include <sys/endian.h>
 
-#elif defined(__GLIBC__) || defined(ANDROID_HOST_MUSL)
+#elif defined(__GLIBC__) || defined(ANDROID_HOST_MUSL) || defined(__linux__)
 
 /* glibc and musl's <endian.h> are like bionic's <sys/endian.h>. */
 #include <endian.h>

```

`patches/android_libbase/0002-remove-glibc-internal-headers-cdefs.h.patch`:

```patch
From 412a557f67209e17d680fae14287acef91a1aaab Mon Sep 17 00:00:00 2001
From: jershell <jershell@mail.ru>
Date: Mon, 30 May 2022 15:19:59 +0300
Subject: [PATCH] remove glibc internal headers cdefs.h

---
 include/android-base/endian.h     | 2 +-
 include/android-base/properties.h | 1 -
 2 files changed, 1 insertion(+), 2 deletions(-)

diff --git a/include/android-base/endian.h b/include/android-base/endian.h
index b47494b..c29845e 100644
--- a/include/android-base/endian.h
+++ b/include/android-base/endian.h
@@ -19,7 +19,7 @@
 /* A cross-platform equivalent of bionic's <sys/endian.h>. */

 /* For __BIONIC__ and __GLIBC__ */
-#include <sys/cdefs.h>
+#include <cfloat>

 #if defined(__BIONIC__)

diff --git a/include/android-base/properties.h b/include/android-base/properties.h
index 021f466..53b8ea1 100644
--- a/include/android-base/properties.h
+++ b/include/android-base/properties.h
@@ -16,7 +16,6 @@

 #pragma once

-#include <sys/cdefs.h>

 #include <chrono>
 #include <limits>

```

`patches/android_libbase/0003-logging.h-only-activate-ostream-warnings-when-clang-.patch`:

```patch
From 8f57183a68460bca9d57b75c4b394fc3d7b3286c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C4=90o=C3=A0n=20Tr=E1=BA=A7n=20C=C3=B4ng=20Danh?=
 <congdanhqx@gmail.com>
Date: Sat, 31 Oct 2020 19:40:34 +0700
Subject: [PATCH] logging.h: only activate ostream warnings when clang is used

---
 include/android-base/logging.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/include/android-base/logging.h b/include/android-base/logging.h
index 9064075..239cb2e 100644
--- a/include/android-base/logging.h
+++ b/include/android-base/logging.h
@@ -467,6 +467,7 @@ namespace std {  // NOLINT(cert-dcl58-cpp)
 // Note: to print the pointer, use "<< static_cast<const void*>(string_pointer)" instead.
 // Note: a not-recommended alternative is to let Clang ignore the warning by adding
 //       -Wno-user-defined-warnings to CPPFLAGS.
+#ifdef __clang__
 #pragma clang diagnostic push
 #pragma clang diagnostic ignored "-Wgcc-compat"
 #define OSTREAM_STRING_POINTER_USAGE_WARNING \
@@ -476,5 +477,6 @@ std::ostream& operator<<(std::ostream& stream, const std::string* string_pointer
   return stream << static_cast<const void*>(string_pointer);
 }
 #pragma clang diagnostic pop
+#endif /* defined(__clang__) */
 
 }  // namespace std

```

`patches/android_libbase/0004-Don-t-use-thread-safety-annotations-with-gcc.patch`:

```patch
From cceac8459bda753b1709499f47606d83a47c1452 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C4=90o=C3=A0n=20Tr=E1=BA=A7n=20C=C3=B4ng=20Danh?=
 <congdanhqx@gmail.com>
Date: Sat, 31 Oct 2020 19:41:43 +0700
Subject: [PATCH] Don't use thread safety annotations with gcc

These annotations are primarily useful for detecting race conditions in
code. They don't seem to have any runtime effect and are not supported
by gcc.

See: https://clang.llvm.org/docs/ThreadSafetyAnalysis.html
---
 include/android-base/thread_annotations.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/include/android-base/thread_annotations.h b/include/android-base/thread_annotations.h
index 53fe6da..bc62f80 100644
--- a/include/android-base/thread_annotations.h
+++ b/include/android-base/thread_annotations.h
@@ -18,7 +18,11 @@
 
 #include <mutex>
 
+#ifdef __clang__
 #define THREAD_ANNOTATION_ATTRIBUTE__(x) __attribute__((x))
+#else
+#define THREAD_ANNOTATION_ATTRIBUTE__(x)
+#endif
 
 #define CAPABILITY(x) \
       THREAD_ANNOTATION_ATTRIBUTE__(capability(x))

```

`patches/android_libbase/0005-fix-unique_fd.h-for-Termux.patch`:

```patch
From dc8972eff142d2455420ac01ff6bd069f1a8f8d6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=3D=3FUTF-8=3Fq=3F=3DE9=3D9F=3DA9=3DE6=3D9C=3DB4=3DE5=3DAE?=
 =?UTF-8?q?=3D87=3F=3D?= <w12101111@gmail.com>
Date: Thu, 8 Apr 2021 00:51:30 +0800
Subject: [PATCH] fix unique_fd.h for Termux

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 include/android-base/unique_fd.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/android-base/unique_fd.h b/include/android-base/unique_fd.h
index 1ffe02f..d7a8376 100644
--- a/include/android-base/unique_fd.h
+++ b/include/android-base/unique_fd.h
@@ -29,7 +29,7 @@
 // Including other headers from libbase frequently results in inclusion of
 // android-base/macros.h, which causes macro collisions.
 
-#if defined(__BIONIC__)
+#if 0
 #include <android/fdsan.h>
 #endif
 #if !defined(_WIN32) && !defined(__TRUSTY__)
@@ -151,7 +151,7 @@ class unique_fd_impl final {
 // The actual details of closing are factored out to support unusual cases.
 // Almost everyone will want this DefaultCloser, which handles fdsan on bionic.
 struct DefaultCloser {
-#if defined(__BIONIC__)
+#if 0
   static void Tag(int fd, void* old_addr, void* new_addr) {
     if (android_fdsan_exchange_owner_tag) {
       uint64_t old_tag = android_fdsan_create_owner_tag(ANDROID_FDSAN_OWNER_TYPE_UNIQUE_FD,
-- 
2.39.2


```

`patches/android_libbase/0006-remove-usage-of-__builtin_available.patch`:

```patch
From eeed6a8ba037863cf96323ecc57b1368eeaddac3 Mon Sep 17 00:00:00 2001
From: John Zimmermann <me@johnnynator.dev>
Date: Thu, 18 Mar 2021 15:27:47 +0100
Subject: [PATCH] remove usage of __builtin_available

s/__builtin_available([^\)]*)/false/g
---
 logging.cpp | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

diff --git a/logging.cpp b/logging.cpp
index d71a261..d07b2fb 100644
--- a/logging.cpp
+++ b/logging.cpp
@@ -213,7 +213,7 @@ static std::recursive_mutex& TagLock() {
 static std::string* gDefaultTag;
 
 void SetDefaultTag(const std::string& tag) {
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     __android_log_set_default_tag(tag.c_str());
   } else {
     std::lock_guard<std::recursive_mutex> lock(TagLock());
@@ -316,7 +316,7 @@ static void LogdLogChunk(LogId id, LogSeverity severity, const char* tag, const
   int32_t lg_id = LogIdTolog_id_t(id);
   int32_t priority = LogSeverityToPriority(severity);
 
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     __android_log_message log_message = {sizeof(__android_log_message),     lg_id, priority, tag,
                                          static_cast<const char*>(nullptr), 0,     message};
     __android_log_logd_logger(&log_message);
@@ -398,7 +398,7 @@ LogFunction SetLogger(LogFunction&& logger) {
   LogFunction old_logger = std::move(Logger());
   Logger() = std::move(logger);
 
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     __android_log_set_logger([](const struct __android_log_message* log_message) {
       auto log_id = log_id_tToLogId(log_message->buffer_id);
       auto severity = PriorityToLogSeverity(log_message->priority);
@@ -414,7 +414,7 @@ AbortFunction SetAborter(AbortFunction&& aborter) {
   AbortFunction old_aborter = std::move(Aborter());
   Aborter() = std::move(aborter);
 
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     __android_log_set_aborter([](const char* abort_message) { Aborter()(abort_message); });
   }
   return old_aborter;
@@ -502,7 +502,7 @@ LogMessage::~LogMessage() {
 
   // Abort if necessary.
   if (data_->GetSeverity() == FATAL) {
-    if (__builtin_available(android 30, *)) {
+    if (false) {
       __android_log_call_aborter(msg.c_str());
     } else {
       Aborter()(msg.c_str());
@@ -517,7 +517,7 @@ std::ostream& LogMessage::stream() {
 void LogMessage::LogLine(const char* file, unsigned int line, LogSeverity severity, const char* tag,
                          const char* message) {
   int32_t priority = LogSeverityToPriority(severity);
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     __android_log_message log_message = {
         sizeof(__android_log_message), LOG_ID_DEFAULT, priority, tag, file, line, message};
     __android_log_write_log_message(&log_message);
@@ -536,7 +536,7 @@ void LogMessage::LogLine(const char* file, unsigned int line, LogSeverity severi
 }
 
 LogSeverity GetMinimumLogSeverity() {
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     return PriorityToLogSeverity(__android_log_get_minimum_priority());
   } else {
     return gMinimumLogSeverity;
@@ -547,7 +547,7 @@ bool ShouldLog(LogSeverity severity, const char* tag) {
   // Even though we're not using the R liblog functions in this function, if we're running on Q,
   // we need to fall back to using gMinimumLogSeverity, since __android_log_is_loggable() will not
   // take into consideration the value from SetMinimumLogSeverity().
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     int32_t priority = LogSeverityToPriority(severity);
     return __android_log_is_loggable(priority, tag, ANDROID_LOG_INFO);
   } else {
@@ -556,7 +556,7 @@ bool ShouldLog(LogSeverity severity, const char* tag) {
 }
 
 LogSeverity SetMinimumLogSeverity(LogSeverity new_severity) {
-  if (__builtin_available(android 30, *)) {
+  if (false) {
     int32_t priority = LogSeverityToPriority(new_severity);
     return PriorityToLogSeverity(__android_log_set_minimum_priority(priority));
   } else {

```

`patches/android_libbase/0007-fix-properties-for-Termux.patch`:

```patch
From aa360f6b6062589e0e9946e54cea3a10f0adfdb0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=3D=3FUTF-8=3Fq=3F=3DE9=3D9F=3DA9=3DE6=3D9C=3DB4=3DE5=3DAE?=
 =?UTF-8?q?=3D87=3F=3D?= <w12101111@gmail.com>
Date: Fri, 29 Oct 2021 14:52:25 +0800
Subject: [PATCH] fix properties for Termux

Co-authored-by: Ian Hu <hu2008yinxiang@163.com>

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 properties.cpp | 12 ++++--------
 1 file changed, 4 insertions(+), 8 deletions(-)

diff --git a/properties.cpp b/properties.cpp
index 8190987..6d48ab8 100644
--- a/properties.cpp
+++ b/properties.cpp
@@ -16,7 +16,7 @@
 
 #include "android-base/properties.h"
 
-#if defined(__BIONIC__)
+#if 0
 #define _REALLY_INCLUDE_SYS__SYSTEM_PROPERTIES_H_
 #include <sys/system_properties.h>
 #include <sys/_system_properties.h>
@@ -32,11 +32,9 @@
 #include <android-base/parseint.h>
 #include <android-base/strings.h>
 
-#if !defined(__BIONIC__)
-
 #define PROP_VALUE_MAX 92
 
-static std::map<std::string, std::string>& g_properties = *new std::map<std::string, std::string>;
+static std::map<std::string, std::string> g_properties;
 
 int __system_property_set(const char* key, const char* value) {
   if (key == nullptr || *key == '\0') return -1;
@@ -63,8 +61,6 @@ int __system_property_get(const char* key, char* value) {
   return strlen(value);
 }
 
-#endif
-
 namespace android {
 namespace base {
 
@@ -108,7 +104,7 @@ template uint64_t GetUintProperty(const std::string&, uint64_t, uint64_t);
 
 std::string GetProperty(const std::string& key, const std::string& default_value) {
   std::string property_value;
-#if defined(__BIONIC__)
+#if 0
   const prop_info* pi = __system_property_find(key.c_str());
   if (pi == nullptr) return default_value;
 
@@ -134,7 +130,7 @@ bool SetProperty(const std::string& key, const std::string& value) {
   return (__system_property_set(key.c_str(), value.c_str()) == 0);
 }
 
-#if defined(__BIONIC__)
+#if 0
 
 struct WaitForPropertyData {
   bool done;
-- 
2.39.2


```

`patches/android_libbase/0008-fix-header-include-for-non-Linux.patch`:

```patch
From 4dd2d39f64e754b43b068905bba29f17b3077b03 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Sat, 29 Jul 2023 16:13:35 +0800
Subject: [PATCH] fix header include non-Linux

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 cmsg.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/cmsg.cpp b/cmsg.cpp
index 95db303..aa36686 100644
--- a/cmsg.cpp
+++ b/cmsg.cpp
@@ -20,7 +20,9 @@
 #include <fcntl.h>
 #include <stdlib.h>
 #include <sys/socket.h>
+#if 0
 #include <sys/user.h>
+#endif
 
 #include <memory>
 
-- 
2.41.0


```

`patches/android_libbase/0009-file-stub-GetExecutablePath-for-non-Linux.patch`:

```patch
From 48bd561bc79bae4df24297968a4e841f036e3359 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Tue, 9 Jan 2024 23:21:57 +0800
Subject: [PATCH] file: stub GetExecutablePath for non-Linux

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 file.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/file.cpp b/file.cpp
index bc831e3..a0c694d 100644
--- a/file.cpp
+++ b/file.cpp
@@ -489,7 +489,7 @@ std::string GetExecutablePath() {
   path[PATH_MAX - 1] = 0;
   return path;
 #else
-#error unknown OS
+  abort();
 #endif
 }
 
-- 
2.43.0


```

`patches/android_logging/0001-Don-t-use-the-internal-glibc-header-sys-cdefs.h.patch`:

```patch
From 71ea766e0a45c4082e49962009342958b2c764e1 Mon Sep 17 00:00:00 2001
From: John Zimmermann <me@johnnynator.dev>
Date: Thu, 18 Mar 2021 15:08:33 +0100
Subject: [PATCH] Don't use the internal glibc header sys/cdefs.h

---
 liblog/include/android/log.h  | 1 -
 liblog/include/log/log_main.h | 9 ++++++---
 liblog/logd_reader.h          | 9 ++++++---
 liblog/logger.h               | 9 ++++++---
 liblog/pmsg_reader.h          | 9 ++++++---
 logcat/logcat.cpp             | 1 -
 logcat/tests/logcat_test.cpp  | 1 -
 logd/ChattyLogBuffer.cpp      | 1 -
 logd/LogListener.cpp          | 1 -
 logd/LogUtils.h               | 1 -
 logd/libaudit.h               | 9 ++++++---
 11 files changed, 30 insertions(+), 21 deletions(-)

diff --git a/liblog/include/android/log.h b/liblog/include/android/log.h
index 5dc365a4..12de5958 100644
--- a/liblog/include/android/log.h
+++ b/liblog/include/android/log.h
@@ -57,7 +57,6 @@
 #include <stdarg.h>
 #include <stddef.h>
 #include <stdint.h>
-#include <sys/cdefs.h>
 
 #if !defined(__BIONIC__) && !defined(__INTRODUCED_IN)
 #define __INTRODUCED_IN(x)
diff --git a/liblog/include/log/log_main.h b/liblog/include/log/log_main.h
index 1bd1c8ae..c71bbdd4 100644
--- a/liblog/include/log/log_main.h
+++ b/liblog/include/log/log_main.h
@@ -17,12 +17,13 @@
 #pragma once
 
 #include <stdbool.h>
-#include <sys/cdefs.h>
 #include <sys/types.h>
 
 #include <android/log.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 /*
  * Normally we strip the effects of ALOGV (VERBOSE messages),
@@ -377,4 +378,6 @@ int __android_log_is_loggable_len(int prio, const char* tag, size_t len, int def
 #pragma clang diagnostic pop
 #endif
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/liblog/logd_reader.h b/liblog/logd_reader.h
index 68eef027..64e400ff 100644
--- a/liblog/logd_reader.h
+++ b/liblog/logd_reader.h
@@ -16,16 +16,19 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <unistd.h>
 
 #include "log/log_read.h"
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 int LogdRead(struct logger_list* logger_list, struct log_msg* log_msg);
 void LogdClose(struct logger_list* logger_list);
 
 ssize_t SendLogdControlMessage(char* buf, size_t buf_size);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/liblog/logger.h b/liblog/logger.h
index ddff19dd..263859db 100644
--- a/liblog/logger.h
+++ b/liblog/logger.h
@@ -17,13 +17,14 @@
 #pragma once
 
 #include <stdatomic.h>
-#include <sys/cdefs.h>
 
 #include <log/log.h>
 
 #include "uio.h"
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 struct logger_list {
   atomic_int fd;
@@ -48,4 +49,6 @@ inline bool android_logger_is_logd(struct logger* logger) {
   return reinterpret_cast<uintptr_t>(logger) & LOGGER_LOGD;
 }
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/liblog/pmsg_reader.h b/liblog/pmsg_reader.h
index b784f9ff..88aeec9c 100644
--- a/liblog/pmsg_reader.h
+++ b/liblog/pmsg_reader.h
@@ -16,14 +16,17 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <unistd.h>
 
 #include "log/log_read.h"
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 int PmsgRead(struct logger_list* logger_list, struct log_msg* log_msg);
 void PmsgClose(struct logger_list* logger_list);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
diff --git a/logcat/logcat.cpp b/logcat/logcat.cpp
index 084003e7..9eecf737 100644
--- a/logcat/logcat.cpp
+++ b/logcat/logcat.cpp
@@ -26,7 +26,6 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <sys/cdefs.h>
 #include <sys/ioctl.h>
 #include <sys/resource.h>
 #include <sys/stat.h>
diff --git a/logcat/tests/logcat_test.cpp b/logcat/tests/logcat_test.cpp
index b835bd5a..25cb94c5 100644
--- a/logcat/tests/logcat_test.cpp
+++ b/logcat/tests/logcat_test.cpp
@@ -22,7 +22,6 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <sys/cdefs.h>
 #include <sys/stat.h>
 #include <sys/types.h>
 #include <sys/wait.h>
diff --git a/logd/LogListener.cpp b/logd/LogListener.cpp
index a6ab50b8..641def0f 100644
--- a/logd/LogListener.cpp
+++ b/logd/LogListener.cpp
@@ -15,7 +15,6 @@
  */
 
 #include <limits.h>
-#include <sys/cdefs.h>
 #include <sys/prctl.h>
 #include <sys/socket.h>
 #include <sys/types.h>
diff --git a/logd/LogUtils.h b/logd/LogUtils.h
index c0f62d39..5c759793 100644
--- a/logd/LogUtils.h
+++ b/logd/LogUtils.h
@@ -16,7 +16,6 @@
 
 #pragma once
 
-#include <sys/cdefs.h>
 #include <sys/types.h>
 
 #include <private/android_logger.h>
diff --git a/logd/libaudit.h b/logd/libaudit.h
index 27b08669..872d6996 100644
--- a/logd/libaudit.h
+++ b/logd/libaudit.h
@@ -20,14 +20,15 @@
 #pragma once
 
 #include <stdint.h>
-#include <sys/cdefs.h>
 #include <sys/socket.h>
 #include <sys/types.h>
 
 #include <linux/audit.h>
 #include <linux/netlink.h>
 
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 
 #define MAX_AUDIT_MESSAGE_LENGTH 8970
 
@@ -100,4 +101,6 @@ extern int audit_setup(int fd, pid_t pid);
  */
 extern int audit_rate_limit(int fd, uint32_t limit);
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif

```

`patches/android_logging/0002-Fix-inclusion-of-stdatomic.h-with-g.patch`:

```patch
From e878c6856f9b828a9538b7bc962c7697039e58d5 Mon Sep 17 00:00:00 2001
From: John Zimmermann <me@johnnynator.dev>
Date: Thu, 18 Mar 2021 15:14:03 +0100
Subject: [PATCH] Fix inclusion of stdatomic.h with g++

See: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=60932#c5
---
 liblog/logger.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/liblog/logger.h b/liblog/logger.h
index 263859db..46361731 100644
--- a/liblog/logger.h
+++ b/liblog/logger.h
@@ -16,7 +16,12 @@
 
 #pragma once
 
+#ifdef __cplusplus
+#include <atomic>
+using namespace std;
+#else
 #include <stdatomic.h>
+#endif
 
 #include <log/log.h>
 

```

`patches/android_logging/0003-fix-__INTRODUCED_IN-attributes-for-Termux.patch`:

```patch
From 198d805d596fe0aa61e556690cbfa692bb7db812 Mon Sep 17 00:00:00 2001
From: Ian Hu <hu2008yinxiang@163.com>
Date: Fri, 29 Oct 2021 14:52:25 +0800
Subject: [PATCH] fix __INTRODUCED_IN attributes for Termux

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 liblog/include/android/log.h | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/liblog/include/android/log.h b/liblog/include/android/log.h
index 12de595..6742aa9 100644
--- a/liblog/include/android/log.h
+++ b/liblog/include/android/log.h
@@ -229,7 +229,7 @@ typedef void (*__android_aborter_function)(const char* abort_message);
  *
  * Available since API level 30.
  */
-void __android_log_write_log_message(struct __android_log_message* log_message) __INTRODUCED_IN(30);
+void __android_log_write_log_message(struct __android_log_message* log_message) __INTRODUCED_IN(24);
 
 /**
  * Sets a user defined logger function.  All log messages sent to liblog will be set to the
@@ -241,7 +241,7 @@ void __android_log_write_log_message(struct __android_log_message* log_message)
  *
  * Available since API level 30.
  */
-void __android_log_set_logger(__android_logger_function logger) __INTRODUCED_IN(30);
+void __android_log_set_logger(__android_logger_function logger) __INTRODUCED_IN(24);
 
 /**
  * Writes the log message to logd.  This is an __android_logger_function and can be provided to
@@ -251,7 +251,7 @@ void __android_log_set_logger(__android_logger_function logger) __INTRODUCED_IN(
  *
  * Available since API level 30.
  */
-void __android_log_logd_logger(const struct __android_log_message* log_message) __INTRODUCED_IN(30);
+void __android_log_logd_logger(const struct __android_log_message* log_message) __INTRODUCED_IN(24);
 
 /**
  * Writes the log message to stderr.  This is an __android_logger_function and can be provided to
@@ -262,7 +262,7 @@ void __android_log_logd_logger(const struct __android_log_message* log_message)
  * Available since API level 30.
  */
 void __android_log_stderr_logger(const struct __android_log_message* log_message)
-    __INTRODUCED_IN(30);
+    __INTRODUCED_IN(24);
 
 /**
  * Sets a user defined aborter function that is called for __android_log_assert() failures.  This
@@ -273,7 +273,7 @@ void __android_log_stderr_logger(const struct __android_log_message* log_message
  *
  * Available since API level 30.
  */
-void __android_log_set_aborter(__android_aborter_function aborter) __INTRODUCED_IN(30);
+void __android_log_set_aborter(__android_aborter_function aborter) __INTRODUCED_IN(24);
 
 /**
  * Calls the stored aborter function.  This allows for other logging libraries to use the same
@@ -284,7 +284,7 @@ void __android_log_set_aborter(__android_aborter_function aborter) __INTRODUCED_
  *
  * Available since API level 30.
  */
-void __android_log_call_aborter(const char* abort_message) __INTRODUCED_IN(30);
+void __android_log_call_aborter(const char* abort_message) __INTRODUCED_IN(24);
 
 /**
  * Sets android_set_abort_message() on device then aborts().  This is the default aborter.
@@ -295,7 +295,7 @@ void __android_log_call_aborter(const char* abort_message) __INTRODUCED_IN(30);
  * Available since API level 30.
  */
 void __android_log_default_aborter(const char* abort_message) __attribute__((noreturn))
-__INTRODUCED_IN(30);
+__INTRODUCED_IN(24);
 
 /**
  * Use the per-tag properties "log.tag.<tagname>" along with the minimum priority from
@@ -314,7 +314,7 @@ __INTRODUCED_IN(30);
  *
  * Available since API level 30.
  */
-int __android_log_is_loggable(int prio, const char* tag, int default_prio) __INTRODUCED_IN(30);
+int __android_log_is_loggable(int prio, const char* tag, int default_prio) __INTRODUCED_IN(24);
 
 /**
  * Use the per-tag properties "log.tag.<tagname>" along with the minimum priority from
@@ -335,7 +335,7 @@ int __android_log_is_loggable(int prio, const char* tag, int default_prio) __INT
  * Available since API level 30.
  */
 int __android_log_is_loggable_len(int prio, const char* tag, size_t len, int default_prio)
-    __INTRODUCED_IN(30);
+    __INTRODUCED_IN(24);
 
 /**
  * Sets the minimum priority that will be logged for this process.
@@ -346,7 +346,7 @@ int __android_log_is_loggable_len(int prio, const char* tag, size_t len, int def
  *
  * Available since API level 30.
  */
-int32_t __android_log_set_minimum_priority(int32_t priority) __INTRODUCED_IN(30);
+int32_t __android_log_set_minimum_priority(int32_t priority) __INTRODUCED_IN(24);
 
 /**
  * Gets the minimum priority that will be logged for this process.  If none has been set by a
@@ -357,7 +357,7 @@ int32_t __android_log_set_minimum_priority(int32_t priority) __INTRODUCED_IN(30)
  *
  * Available since API level 30.
  */
-int32_t __android_log_get_minimum_priority(void) __INTRODUCED_IN(30);
+int32_t __android_log_get_minimum_priority(void) __INTRODUCED_IN(24);
 
 /**
  * Sets the default tag if no tag is provided when writing a log message.  Defaults to
@@ -368,7 +368,7 @@ int32_t __android_log_get_minimum_priority(void) __INTRODUCED_IN(30);
  *
  * Available since API level 30.
  */
-void __android_log_set_default_tag(const char* tag) __INTRODUCED_IN(30);
+void __android_log_set_default_tag(const char* tag) __INTRODUCED_IN(24);
 
 #ifdef __cplusplus
 }
-- 
2.39.2


```

`patches/android_logging/0004-fix-initializer-element-is-not-constant-error-when-b.patch`:

```patch
From 0287fb7244568a5f08c0ac153dcb464df67ff140 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?S=C3=B6ren=20Tempel?= <soeren+git@soeren-tempel.net>
Date: Tue, 27 Feb 2018 17:37:12 +0100
Subject: [PATCH] fix "initializer element is not constant"-error when building
 with g++

---
 liblog/logprint.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/liblog/logprint.cpp b/liblog/logprint.cpp
index a5c5edd0..71868a35 100644
--- a/liblog/logprint.cpp
+++ b/liblog/logprint.cpp
@@ -884,9 +884,9 @@ static int android_log_printBinaryEvent(const unsigned char** pEventData, size_t
           }
           break;
         case TYPE_MONOTONIC: {
-          static const uint64_t minute = 60;
-          static const uint64_t hour = 60 * minute;
-          static const uint64_t day = 24 * hour;
+          #define minute (60)
+          #define hour (60 * minute)
+          #define day (24 * hour)
 
           /* Repaint as unsigned seconds, minutes, hours ... */
           outBuf -= outCount;

```

`patches/android_logging/0005-disable-logd-and-pmsg-on-Android.patch`:

```patch
From 0d126f64100e275c737e4da3d5d6c15b61740ee8 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=3D=3FUTF-8=3Fq=3F=3DE9=3D9F=3DA9=3DE6=3D9C=3DB4=3DE5=3DAE?=
 =?UTF-8?q?=3D87=3F=3D?= <w12101111@gmail.com>
Date: Thu, 8 Apr 2021 00:51:30 +0800
Subject: [PATCH] disable logd and pmsg on Android

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 liblog/logger_write.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/liblog/logger_write.cpp b/liblog/logger_write.cpp
index 596b1af..7057a60 100644
--- a/liblog/logger_write.cpp
+++ b/liblog/logger_write.cpp
@@ -39,6 +39,8 @@
 #include "logger.h"
 #include "uio.h"
 
+#undef __ANDROID__
+
 #ifdef __ANDROID__
 #include "logd_writer.h"
 #include "pmsg_writer.h"
-- 
2.39.2


```

`patches/android_logging/0006-Cygwin-has-getprogname.patch`:

```patch
From 9e32730427f4045158ff7a643b25ab3e7ba73b75 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Sat, 29 Jul 2023 16:49:40 +0800
Subject: [PATCH] Cygwin has getprogname

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 liblog/logger_write.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/liblog/logger_write.cpp b/liblog/logger_write.cpp
index 7057a605..397ece1a 100644
--- a/liblog/logger_write.cpp
+++ b/liblog/logger_write.cpp
@@ -120,7 +120,7 @@ void __android_log_close() {
 }
 
 // BSD-based systems like Android/macOS have getprogname(). Others need us to provide one.
-#if !defined(__APPLE__) && !defined(__BIONIC__)
+#if !defined(__APPLE__) && !defined(__BIONIC__) && !defined(__CYGWIN__)
 static const char* getprogname() {
 #ifdef _WIN32
   static bool first = true;
-- 
2.41.0


```

`patches/android_logging/0007-liblog-logger-don-t-use-std-namespace-on-Windows.patch`:

```patch
From c1163f7c74113301e7a2a66de371e78e728c1c40 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Mon, 20 Mar 2023 08:27:45 +0800
Subject: [PATCH] liblog: logger: don't use std namespace on Windows

- it causes std::byte to conflict with the one in MinGW headers
  (when you include windows.h it will appear)

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 liblog/logger.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/liblog/logger.h b/liblog/logger.h
index 4636173..bcf6e0f 100644
--- a/liblog/logger.h
+++ b/liblog/logger.h
@@ -18,7 +18,11 @@
 
 #ifdef __cplusplus
 #include <atomic>
+#ifdef _WIN32
+using std::atomic_int;
+#else
 using namespace std;
+#endif
 #else
 #include <stdatomic.h>
 #endif
-- 
2.40.0.windows.1


```

`patches/corrosion/0001-support-pc-windows-gnullvm-targets.patch`:

```patch
From 84bd18c9af0bec8bcd36706a60f7b71cba6b7873 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Sun, 7 Apr 2024 22:50:35 +0900
Subject: [PATCH] support `*-pc-windows-gnullvm` targets

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 cmake/Corrosion.cmake | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/cmake/Corrosion.cmake b/cmake/Corrosion.cmake
index e47efe4..b78e283 100644
--- a/cmake/Corrosion.cmake
+++ b/cmake/Corrosion.cmake
@@ -347,6 +347,7 @@ function(_corrosion_add_library_target)
 
     set(is_windows "")
     set(is_windows_gnu "")
+    set(is_windows_gnullvm "")
     set(is_windows_msvc "")
     set(is_macos "")
     if(Rust_CARGO_TARGET_OS STREQUAL "windows")
@@ -355,6 +356,8 @@ function(_corrosion_add_library_target)
             set(is_windows_msvc TRUE)
         elseif(Rust_CARGO_TARGET_ENV STREQUAL "gnu")
             set(is_windows_gnu TRUE)
+        elseif(Rust_CARGO_TARGET_ENV STREQUAL "gnullvm")
+            set(is_windows_gnullvm TRUE)
         endif()
     elseif(Rust_CARGO_TARGET_OS STREQUAL "darwin")
         set(is_macos TRUE)
@@ -379,7 +382,7 @@ function(_corrosion_add_library_target)
 
     if(is_windows_msvc)
         set(implib_name "${lib_name}.dll.lib")
-    elseif(is_windows_gnu)
+    elseif(is_windows_gnu OR is_windows_gnullvm)
         set(implib_name "lib${lib_name}.dll.a")
     elseif(is_windows)
         message(FATAL_ERROR "Unknown windows environment - Can't determine implib name")
-- 
2.44.0


```

`patches/corrosion/0002-suppress-rustup-target-not-installed-error.patch`:

```patch
From ce3ab90de811b243bb87f9db43feafafe3f5d8cd Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Sun, 7 Apr 2024 23:43:53 +0900
Subject: [PATCH] suppress rustup target not installed error

- we want to be able to prefer building STD from source

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 cmake/Corrosion.cmake | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/cmake/Corrosion.cmake b/cmake/Corrosion.cmake
index b78e283..22f44f2 100644
--- a/cmake/Corrosion.cmake
+++ b/cmake/Corrosion.cmake
@@ -47,7 +47,7 @@ if(Rust_TOOLCHAIN_IS_RUSTUP_MANAGED)
         message(DEBUG "Cargo target ${Rust_CARGO_TARGET} is an official target-triple")
         message(DEBUG "Installed targets: ${INSTALLED_TARGETS}")
         if(NOT ("${Rust_CARGO_TARGET}" IN_LIST INSTALLED_TARGETS))
-            message(FATAL_ERROR "Target ${Rust_CARGO_TARGET} is not installed for toolchain ${Rust_TOOLCHAIN}.\n"
+            message(WARNING "Target ${Rust_CARGO_TARGET} is not installed for toolchain ${Rust_TOOLCHAIN}.\n"
                     "Help: Run `rustup target add --toolchain ${Rust_TOOLCHAIN} ${Rust_CARGO_TARGET}` to install "
                     "the missing target."
             )
-- 
2.44.0


```

`patches/corrosion/0003-allow-adding-required-cargo-rust-flags-when-detectin.patch`:

```patch
From e35d1fc471466eb9194f57803c90ff305024ca05 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Mon, 8 Apr 2024 01:09:20 +0900
Subject: [PATCH] allow adding required cargo/rust flags when detecting LDLIBs
 for staticlib

- this is useful when the STD is supported but built from source instead

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 cmake/FindRust.cmake | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/cmake/FindRust.cmake b/cmake/FindRust.cmake
index 97c65db..678c7dd 100644
--- a/cmake/FindRust.cmake
+++ b/cmake/FindRust.cmake
@@ -147,7 +147,9 @@ function(_corrosion_determine_libs_new target_triple out_libs)
     execute_process(
         COMMAND ${CMAKE_COMMAND} -E env
             "CARGO_BUILD_RUSTC=${Rust_COMPILER_CACHED}"
-        ${Rust_CARGO_CACHED} rustc --verbose --color never --target=${target_triple} -- --print=native-static-libs
+            "RUSTFLAGS=${Rust_Detect_RUSTFLAGS}"
+            ${Rust_Detect_ENV_VARS}
+        ${Rust_CARGO_CACHED} ${Rust_Detect_CARGO_FLAGS} rustc --verbose --color never --target=${target_triple} -- --print=native-static-libs
         WORKING_DIRECTORY "${CMAKE_BINARY_DIR}/corrosion/required_libs"
         RESULT_VARIABLE cargo_build_result
         ERROR_VARIABLE cargo_build_error_message
@@ -286,7 +288,7 @@ if (NOT Rust_RUSTUP)
 endif()
 
 # List of user variables that will override any toolchain-provided setting
-set(_Rust_USER_VARS Rust_COMPILER Rust_CARGO Rust_CARGO_TARGET Rust_CARGO_HOST_TARGET)
+set(_Rust_USER_VARS Rust_COMPILER Rust_CARGO Rust_CARGO_TARGET Rust_CARGO_HOST_TARGET Rust_Detect_RUSTFLAGS Rust_Detect_CARGO_FLAGS Rust_Detect_ENV_VARS)
 foreach(_VAR ${_Rust_USER_VARS})
     if (DEFINED "${_VAR}")
         set(${_VAR}_CACHED "${${_VAR}}" CACHE INTERNAL "Internal cache of ${_VAR}")
-- 
2.44.0


```

`patches/mman-win32/0001-set-winerr-via-winsup.patch`:

```patch
From 7b13afa5bf72cac57118029ec8529b8f07d721f9 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Fri, 17 Nov 2023 16:01:37 +0800
Subject: [PATCH] set winerr via winsup

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 mman.c | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

diff --git a/mman.c b/mman.c
index e71666c..97b0408 100644
--- a/mman.c
+++ b/mman.c
@@ -9,6 +9,10 @@
 #define FILE_MAP_EXECUTE    0x0020
 #endif /* FILE_MAP_EXECUTE */
 
+#ifdef WITH_WINSUP
+// this function is defined in src/libc-compat/winsup/internal/errno.c
+extern void __set_errno_via_winerr(DWORD winerr);
+#else
 static int __map_mman_error(const DWORD err, const int deferr)
 {
     if (err == 0)
@@ -16,6 +20,7 @@ static int __map_mman_error(const DWORD err, const int deferr)
     //TODO: implement
     return err;
 }
+#endif
 
 static DWORD __map_mmap_prot_page(const int prot)
 {
@@ -107,7 +112,11 @@ void* mmap(void *addr, size_t len, int prot, int flags, int fildes, OffsetType o
 
     if (fm == NULL)
     {
+#ifdef WITH_WINSUP
+        __set_errno_via_winerr(GetLastError());
+#else
         errno = __map_mman_error(GetLastError(), EPERM);
+#endif
         return MAP_FAILED;
     }
   
@@ -124,7 +133,11 @@ void* mmap(void *addr, size_t len, int prot, int flags, int fildes, OffsetType o
   
     if (map == NULL)
     {
+#ifdef WITH_WINSUP
+        __set_errno_via_winerr(GetLastError());
+#else
         errno = __map_mman_error(GetLastError(), EPERM);
+#endif
         return MAP_FAILED;
     }
 
@@ -136,7 +149,11 @@ int munmap(void *addr, size_t len)
     if (UnmapViewOfFile(addr))
         return 0;
         
+#ifdef WITH_WINSUP
+    __set_errno_via_winerr(GetLastError());
+#else
     errno =  __map_mman_error(GetLastError(), EPERM);
+#endif
     
     return -1;
 }
@@ -149,7 +166,11 @@ int _mprotect(void *addr, size_t len, int prot)
     if (VirtualProtect(addr, len, newProtect, &oldProtect))
         return 0;
     
+#ifdef WITH_WINSUP
+    __set_errno_via_winerr(GetLastError());
+#else
     errno =  __map_mman_error(GetLastError(), EPERM);
+#endif
     
     return -1;
 }
@@ -159,7 +180,11 @@ int msync(void *addr, size_t len, int flags)
     if (FlushViewOfFile(addr, len))
         return 0;
     
+#ifdef WITH_WINSUP
+    __set_errno_via_winerr(GetLastError());
+#else
     errno =  __map_mman_error(GetLastError(), EPERM);
+#endif
     
     return -1;
 }
@@ -169,7 +194,11 @@ int mlock(const void *addr, size_t len)
     if (VirtualLock((LPVOID)addr, len))
         return 0;
         
+#ifdef WITH_WINSUP
+    __set_errno_via_winerr(GetLastError());
+#else
     errno =  __map_mman_error(GetLastError(), EPERM);
+#endif
     
     return -1;
 }
@@ -179,7 +208,11 @@ int munlock(const void *addr, size_t len)
     if (VirtualUnlock((LPVOID)addr, len))
         return 0;
         
+#ifdef WITH_WINSUP
+    __set_errno_via_winerr(GetLastError());
+#else
     errno =  __map_mman_error(GetLastError(), EPERM);
+#endif
     
     return -1;
 }
-- 
2.42.0


```

`patches/mman-win32/0002-implement-MAP_PRIVATE-using-copy-on-write-protection.patch`:

```patch
From b7679531f5dfd3132ff79095fb6edda862ab0939 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Fri, 17 Nov 2023 17:17:43 +0800
Subject: [PATCH] implement MAP_PRIVATE using copy on write protection

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 mman.c | 35 ++++++++++++++++++++++-------------
 mman.h |  2 +-
 2 files changed, 23 insertions(+), 14 deletions(-)

diff --git a/mman.c b/mman.c
index 97b0408..6e7f5d6 100644
--- a/mman.c
+++ b/mman.c
@@ -2,6 +2,7 @@
 #include <windows.h>
 #include <errno.h>
 #include <io.h>
+#include <stdbool.h>
 
 #include "mman.h"
 
@@ -22,7 +23,7 @@ static int __map_mman_error(const DWORD err, const int deferr)
 }
 #endif
 
-static DWORD __map_mmap_prot_page(const int prot)
+static DWORD __map_mmap_prot_page(const int prot, const int flags)
 {
     DWORD protect = 0;
     
@@ -32,29 +33,36 @@ static DWORD __map_mmap_prot_page(const int prot)
     if ((prot & PROT_EXEC) != 0)
     {
         protect = ((prot & PROT_WRITE) != 0) ? 
-                    PAGE_EXECUTE_READWRITE : PAGE_EXECUTE_READ;
+                    (((flags & MAP_PRIVATE) != 0) ? PAGE_EXECUTE_WRITECOPY : PAGE_EXECUTE_READWRITE) : PAGE_EXECUTE_READ;
     }
     else
     {
         protect = ((prot & PROT_WRITE) != 0) ?
-                    PAGE_READWRITE : PAGE_READONLY;
+                    (((flags & MAP_PRIVATE) != 0) ? PAGE_WRITECOPY : PAGE_READWRITE) : PAGE_READONLY;
     }
     
     return protect;
 }
 
-static DWORD __map_mmap_prot_file(const int prot)
+static DWORD __map_mmap_prot_file(const int prot, const int flags)
 {
     DWORD desiredAccess = 0;
     
     if (prot == PROT_NONE)
         return desiredAccess;
-        
-    if ((prot & PROT_READ) != 0)
+    
+    bool map_read = (prot & PROT_READ) != 0;
+    bool map_write = (prot & PROT_WRITE) != 0;
+    bool map_exec = (prot & PROT_EXEC) != 0;
+    bool map_private = (flags & MAP_PRIVATE) != 0;
+    bool map_copy = map_write && map_private;
+    
+    // ref: https://stackoverflow.com/questions/55018806/copy-on-write-file-mapping-on-windows
+    if (map_read && !map_copy)
         desiredAccess |= FILE_MAP_READ;
-    if ((prot & PROT_WRITE) != 0)
-        desiredAccess |= FILE_MAP_WRITE;
-    if ((prot & PROT_EXEC) != 0)
+    if (map_write)
+        desiredAccess |= map_private ? FILE_MAP_COPY : FILE_MAP_WRITE;
+    if (map_exec)
         desiredAccess |= FILE_MAP_EXECUTE;
     
     return desiredAccess;
@@ -75,8 +83,8 @@ void* mmap(void *addr, size_t len, int prot, int flags, int fildes, OffsetType o
                     (DWORD)off : (DWORD)(off & 0xFFFFFFFFL);
     const DWORD dwFileOffsetHigh = (sizeof(OffsetType) <= sizeof(DWORD)) ?
                     (DWORD)0 : (DWORD)((off >> 32) & 0xFFFFFFFFL);
-    const DWORD protect = __map_mmap_prot_page(prot);
-    const DWORD desiredAccess = __map_mmap_prot_file(prot);
+    const DWORD protect = __map_mmap_prot_page(prot, flags);
+    const DWORD desiredAccess = __map_mmap_prot_file(prot, flags);
 
     const OffsetType maxSize = off + (OffsetType)len;
 
@@ -158,9 +166,10 @@ int munmap(void *addr, size_t len)
     return -1;
 }
 
-int _mprotect(void *addr, size_t len, int prot)
+// TODO: not portable, use VirtualQuery to get old protection instead
+int _mprotect_np(void *addr, size_t len, int prot, int map_flags)
 {
-    DWORD newProtect = __map_mmap_prot_page(prot);
+    DWORD newProtect = __map_mmap_prot_page(prot, map_flags);
     DWORD oldProtect = 0;
     
     if (VirtualProtect(addr, len, newProtect, &oldProtect))
diff --git a/mman.h b/mman.h
index 047d3a0..ac0ce2b 100644
--- a/mman.h
+++ b/mman.h
@@ -64,7 +64,7 @@ extern "C" {
 
 MMANSHARED_EXPORT void*   mmap(void *addr, size_t len, int prot, int flags, int fildes, OffsetType off);
 MMANSHARED_EXPORT int     munmap(void *addr, size_t len);
-MMANSHARED_EXPORT int     _mprotect(void *addr, size_t len, int prot);
+MMANSHARED_EXPORT int     _mprotect_np(void *addr, size_t len, int prot, int map_flags);
 MMANSHARED_EXPORT int     msync(void *addr, size_t len, int flags);
 MMANSHARED_EXPORT int     mlock(const void *addr, size_t len);
 MMANSHARED_EXPORT int     munlock(const void *addr, size_t len);
-- 
2.42.0


```

`patches/msvc_getline/0001-adapt-to-MinGW.patch`:

```patch
From ec3c9a9b3a977e8fa26029f2a39a79ffbc8d21e3 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Wed, 22 Mar 2023 09:24:04 +0800
Subject: [PATCH] adapt to MinGW

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 getline.c | 10 ++++++++++
 getline.h |  6 ++++++
 2 files changed, 16 insertions(+)

diff --git a/getline.c b/getline.c
index 6c3f699..5d7f4b6 100644
--- a/getline.c
+++ b/getline.c
@@ -3,9 +3,48 @@
 #include <stdlib.h>
 #include <errno.h>
 
-// MSVC specific implementation
+#ifdef _UCRT
+#  ifndef WIN32_LEAN_AND_MEAN
+#  define WIN32_LEAN_AND_MEAN
+#endif
+#include <windows.h>
+
+#ifndef _IOERROR
+#  define _IOERROR	(0x0010)
+#endif
+
+struct __crt_stdio_stream_data
+{
+    union
+    {
+        FILE  _public_file;
+        char* _ptr;
+    };
+
+    char*            _base;
+    int              _cnt;
+    long             _flags;
+    long             _file;
+    int              _charbuf;
+    int              _bufsiz;
+    char*            _tmpfname;
+    CRITICAL_SECTION _lock;
+};
+#endif
+
 static void fseterr(FILE *fp)
 {
+#ifdef _UCRT
+    // UCRT specific implementation
+    _lock_file(fp);
+    _InterlockedOr(&(((struct __crt_stdio_stream_data *)fp)->_flags), _IOERROR);
+    _unlock_file(fp);
+#else
+#  ifdef __MINGW32__
+    // MinGW specific implementation
+    ((struct _iobuf *)fp)->_flag |= _IOERR;
+#  else
+    // MSVC specific implementation
     struct file { // Undocumented implementation detail
         unsigned char *_ptr;
         unsigned char *_base;
@@ -18,6 +56,8 @@ static void fseterr(FILE *fp)
     #define _IOERR 0x10
 
     ((struct file *)fp)->_flag |= _IOERR;
+#  endif
+#endif
 }
 
 ssize_t getdelim(char **restrict lineptr, size_t *restrict n, int delim, FILE *restrict stream)
@@ -66,7 +106,11 @@ ssize_t getdelim(char **restrict lineptr, size_t *restrict n, int delim, FILE *r
     return nread;
 }
 
+#ifdef __MINGW32__
+ssize_t msvc_getline(char **restrict lineptr, size_t *restrict n, FILE *restrict stream)
+#else
 ssize_t getline(char **restrict lineptr, size_t *restrict n, FILE *restrict stream)
+#endif
 {
     return getdelim(lineptr, n, '\n', stream);
 }
diff --git a/getline.h b/getline.h
index ffbb699..b7bab62 100644
--- a/getline.h
+++ b/getline.h
@@ -4,9 +4,15 @@
 #include <stdio.h>
 
 #define restrict __restrict
+#ifndef __MINGW32__
 typedef long long ssize_t;
+#endif
 
+#ifdef __MINGW32__
+ssize_t msvc_getline(char **restrict lineptr, size_t *restrict n, FILE *restrict stream);
+#else
 ssize_t getline(char **restrict lineptr, size_t *restrict n, FILE *restrict stream);
+#endif
 ssize_t getdelim(char **restrict lineptr, size_t *restrict n, int delim, FILE *restrict stream);
 
 /*
-- 
2.40.0.windows.1


```

`patches/msvc_getline/0002-support-cpp.patch`:

```patch
From 1361cc5d12a62c3caad765bd13a5de22233fe244 Mon Sep 17 00:00:00 2001
From: Ookiineko <chiisaineko@protonmail.com>
Date: Tue, 1 Aug 2023 18:10:39 +0800
Subject: [PATCH] support c++

Signed-off-by: Ookiineko <chiisaineko@protonmail.com>
---
 getline.h | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/getline.h b/getline.h
index b7bab62..3a33017 100644
--- a/getline.h
+++ b/getline.h
@@ -1,6 +1,10 @@
 #ifndef GETLINE_H
 #define GETLINE_H
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 #include <stdio.h>
 
 #define restrict __restrict
@@ -135,4 +139,8 @@ COLOPHON
 GNU                               2019-03-06                        GETLINE(3)
 */
 
+#ifdef __cplusplus
+}
+#endif
+
 #endif /* GETLINE_H */
-- 
2.41.0.windows.3


```

`scripts/clone_submodules.sh`:

```sh
#!/bin/bash

# fail fast
set -e

set -x
git submodule update --init --depth=1 --single-branch -j $(nproc) "$@" \
    src/{Magisk,android_{core,fmtlib,libbase,logging},corrosion,mman-win32,msvc_getline}/
git -C src/Magisk submodule update --init --depth=1 --single-branch -j $(nproc) "$@" native/src/external/{cxx-rs,zopfli}/
set +x

```

`scripts/magiskboot_test.sh`:

```sh
#!/bin/bash

#
# a very shitty bash script for testing basic functionalities of magiskboot
#
# dependencies: coreutils, file, wget, xxd
#

# fail fast
set -e
set -o pipefail

if [ "$#" -ne 1 -o ! -f "$1" ]; then
    echo "Usage: $0 <magiskboot binary>"
    exit 1
fi

if [[ "$1" == *.js ]]; then
    magiskboot="node $(realpath $1)"
elif [[ ! -z "${EMULATOR}" ]]; then
    magiskboot="$EMULATOR $(realpath $1)"
else
    magiskboot="$(realpath $1)"
fi
echo -e "\n### magiskboot binary: $1 ###\n"
file $1

__workspace="$(mktemp -d -t magiskboot_test.XXXXXXXXXX)"
echo -e "\n### created temporary working directory: ${__workspace} ###\n"
cd "${__workspace}"
cleanup() {
    if [ -d "${__workspace}" ]; then
        cd ${TMPDIR:-/tmp}
        (rm -rf "${__workspace}" && echo -e "\n### removed working directory: ${__workspace} ###\n") || true
    fi
}
trap cleanup EXIT

mkdir -pv tmp

# prepare image files for test
echo -e "\n### downloading test images ###\n"
# TODO: add more image with different header version and update method
set -x
wget -nv https://github.com/dandelion64-Archives/redmi_dandelion_dump/raw/dandelion-user-11-RP1A.200720.011-V12.5.11.0.RCZMIXM-release-keys/boot.img.aa
wget -nv https://github.com/dandelion64-Archives/redmi_dandelion_dump/raw/dandelion-user-11-RP1A.200720.011-V12.5.11.0.RCZMIXM-release-keys/boot.img.ab
cat boot.img.aa boot.img.ab > boot.img
set +x
rm -vf boot.img.aa boot.img.ab
file boot.img

# check the downloaded image
sha512sum -c - << EOF
3b3b47a3ff94344c2ad8423fe9f90d1f3df77a9e2bd0b945e8b8c28015290aeb717d53d9c82abd96e9ceeafc982ff26a0e131d6820e54a753b55a07ce1016f5b  boot.img
EOF

# test: unpack
echo -e "\n### testing unpack ###\n"
set -x; $magiskboot unpack -n -h boot.img; set +x
file dtb header kernel ramdisk.cpio

# verify: unpack
check_results() {
    sha512sum -c - << EOF
0cd76b98aa1f55558bebd2cf1b58cdda15bdc4daaad2031e8191e5df9c8283259a071c32adcbb3dda32cb51ee2071d3acf19a6f79421142568a88a4997655abe  dtb
7aa1841bce0ff7ffba254f98c49dcbfefdbe6f3fe6ee86b1303fcee46234007c250ee8e3b36522f799fa3a1383398d2c6a04e7b6348c1788b58279ede823cf3a  header
f6bb3d1340accc23a6db7e74c311d81c6e0dd41da757ccd12c6095a20104314fb8413d3a0498bf141c1830bb9763c3897e4431379a6f88232dc283047e9c4a25  kernel
2bb406bf7665535cc8571205ea933113cdb7e7bf85e9f0773e2810c0ccc20e030729c82659d4b12564df70bf6c2dd46b4c30e833afbf4525ab60ad5b3dad50ea  ramdisk.cpio
EOF
}
check_results

# test: repack
echo -e "\n### testing repack ###\n"
set -x; $magiskboot repack boot.img tmp/new.img; set +x
file tmp/new.img

# verify: repack
pushd tmp
set -x; $magiskboot unpack -n -h new.img 2> /dev/null; set +x
check_results
popd

# test: compress & decompress
if [[ "$OSTYPE" == "darwin"* ]]; then
    set -x; dd if=/dev/urandom of=kitten bs=1m count=8; set +x
else
    set -x; dd if=/dev/urandom of=kitten bs=1M count=8; set +x
fi
__randfile_checksum="$(sha512sum kitten)"
compress_kitten() {
    # compress and capture console output
    local __conout="$((set -x; $magiskboot compress=$1 kitten 2>&1; set +x) | tee >(cat >&2))"
    # find out the output archive name
    if  grep -E -q 'Compressing to \[(.*)\]' <<< "${__conout}"; then
        # extract and return the output archive name
        sed -nE 's/Compressing to \[(.*)\]/\1/p' <<< "${__conout}"
        return 0
    fi

    # maybe some error occurred
    return 1
}
check_kitten() {
    file kitten
    sha512sum -c - <<< "${__randfile_checksum}"
}
check_kitten
for __method in gzip zopfli xz lzma bzip2 lz4 lz4_legacy lz4_lg; do
    echo -e "\n### testing ${__method} compression & decompression ###\n"

    __out="$(compress_kitten ${__method})"
    file "${__out}"
    rm -vf kitten
    set -x; $magiskboot decompress "${__out}"; set +x
    rm -vf "${__out}"
    check_kitten
done

# test: cpio ls
echo -e "\n### testing cpio ls ###\n"
cat > expected_out.txt << EOF
drwxr-xr-x	0	0	0 B	0:0	avb
drwxr-xr-x	0	0	0 B	0:0	debug_ramdisk
drwxr-xr-x	0	0	0 B	0:0	dev
-rw-r-----	0	0	4.57 KB	0:0	fstab.mt6762
-rw-r-----	0	0	4.57 KB	0:0	fstab.mt6765
-rwxr-x---	0	0	1.29 MB	0:0	init
drwxr-xr-x	0	0	0 B	0:0	mnt
drwxr-xr-x	0	0	0 B	0:0	proc
drwxr-xr-x	0	0	0 B	0:0	sys
-rw-r--r--	0	0	524 B	0:0	verity_key
EOF
set -x
$magiskboot cleanup 2> /dev/null
$magiskboot unpack boot.img 2> /dev/null
$magiskboot cpio ramdisk.cpio 'ls' | tee out.txt
diff -u out.txt expected_out.txt
set +x

# test: cpio add
echo -e "\n### testing cpio add ###\n"
set -x
echo 'Hello, world!' > foo
$magiskboot cpio ramdisk.cpio 'add 644 bar foo'
$magiskboot cpio ramdisk.cpio 'ls bar' | grep -E '\-rw-r--r--\s0\s0\s14 B\s0:0\sbar'
set +x

# TODO: add tests for more cpio sub-commands

# test: cpio extract
echo -e "\n### testing cpio extract ###\n"
cat > expected.list << EOF
ext
ext/avb
ext/avb/q-gsi.avbpubkey
ext/avb/r-gsi.avbpubkey
ext/avb/s-gsi.avbpubkey
ext/debug_ramdisk
ext/dev
ext/fstab.mt6762
ext/fstab.mt6765
ext/init
ext/mnt
ext/proc
ext/sys
ext/verity_key
EOF
set -x
$magiskboot cleanup 2> /dev/null
$magiskboot unpack boot.img 2> /dev/null
set +x
mkdir -pv ext && pushd ext
set -x; $magiskboot cpio ../ramdisk.cpio 'extract'; set +x
popd
set -x
find ext | sort > list.txt
diff -u list.txt expected.list
set +x
sha512sum -c - << EOF
ad623b7c491250d8cd001b1c0c07eced9fb79d68e1f208c3556d4d476349e7354c1cef58a27e1ee31fab02cc4f1929b86d04c979b6ac02b61d3c4ca0d3005894  ext/avb/q-gsi.avbpubkey
060f8a0173b53a133499c46fc0237fa24938fd7bfb3aa39b658a18efe0da826e3f0c8cf16c2691ef8a29990a0ed0344ed72164f8acf556ef3598bb944ce4ca6f  ext/avb/r-gsi.avbpubkey
1afb924f33cc62067166f2ab75a6345228fc448250b32f1fe34c2eec247301b1a3761cf1043c456b3979ad4b63df34232b133ae371b36046e5cd20136e1eab2a  ext/avb/s-gsi.avbpubkey
d070818df28c1f8614c8289c43b066fb9f630cb1e21628ca989980ab4838d3d45cc063a2461f1b6916ee2bdbe1d33f43297eaa9b60582b41d5f737c738f66b91  ext/fstab.mt6762
d070818df28c1f8614c8289c43b066fb9f630cb1e21628ca989980ab4838d3d45cc063a2461f1b6916ee2bdbe1d33f43297eaa9b60582b41d5f737c738f66b91  ext/fstab.mt6765
bc461ed94a3d1298d4d6ad310904d1b2e8ba705c2f3ad751d76454109cc7c69f951d33a72eff7f4f0e9e08e053c0fc9335dd6a87f06790098b752a0a3d42a321  ext/init
103c552f302d6d62d4b3973defc80f43eaf10d57dd32cb419f1f8384c4e805032d01aba32d7a2fe8d3e21ab0cd77818f6ecbdb3d0bc2e1d705c2a292d3021b20  ext/verity_key
EOF

# test: hexpatch
echo -e "\n### testing hexpatch ###\n"
set -x; echo -ne '\xb0\x00\xba\xca\xfe\xd0\x0d' > test.bin; set +x
file test.bin
xxd test.bin
set -x; $magiskboot hexpatch test.bin cafe badd; set +x
file test.bin
xxd test.bin
set -x
echo -ne '\xb0\x00\xba\xba\xdd\xd0\x0d' > expected.bin
diff test.bin expected.bin
set +x

# TODO: add test for payload.bin extraction

# test: dtb
echo -e "\n### testing dtb ###\n"
set -x; $magiskboot dtb dtb test; set +x
# TODO: add test for dtb patch

# TODO: add test for AVB related functions

# test: sha1
echo -e "\n### testing sha1 ###\n"
__randfile_sha1="$(sha1sum kitten | cut -d ' ' -f 1 | tee >(cat >&2))"
set -x; ($magiskboot sha1 kitten | grep "${__randfile_sha1}"); set +x

```

`src/libc-compat/common/__errno.c`:

```c
#include <errno.h>

int *__errno (void) {
#ifdef HAVE___errno_location
  return __errno_location();
#elif defined(HAVE___error)
  return __error();
#elif defined(HAVE__errno)
  return _errno();
#else
#  error "Unreachable"
#endif
}

```

`src/libc-compat/emsup/mmap_hack.c`:

```c
// See:
//   https://github.com/emscripten-core/emscripten/issues/20459
//
// shared read/write file mapping on Emscripten currently
// requires keeping the original fd open before a call to
// munmap() to sync the changes to the filesystem
//
// so here we wrap around some related functions to delay
// the close() to where munmap() is called

#include <assert.h>
#include <errno.h>
#include <fcntl.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <sys/types.h>
#include <unistd.h>

struct map_entry {
    void *ptr;
    size_t len;
    int fd;
    FILE *fp;
    bool have_fp;
    bool want_close;
    struct map_entry *next;
};

// TODO: not thread-safe, add a lock if needed
// (currently magiskboot is a single-threaded program)
static struct map_entry *maps = NULL;

#define filter_map_by_key_or(_name, _key, _handler, _else)  \
    {   \
        __attribute__((unused)) struct map_entry *i; \
        __attribute__((unused)) struct map_entry *prev = NULL; \
        bool flag = false;  \
        for (i = maps; i; i = i->next) {    \
            if (i->_name == _key) {     \
                flag = true;    \
                _handler;   \
            }   \
            prev = i;   \
        }   \
        if (!flag)  \
            _else;      \
    }

void *_mmap_stub_impl(void *addr, size_t len, int prot,
                int flags, int fildes, off_t off) {
    void *ptr = mmap(addr, len, prot, flags, fildes, off);

    if (ptr == MAP_FAILED)
        return ptr;

    if (!(fildes < 0) &&
            (prot & PROT_WRITE) && (flags & MAP_SHARED)) {
        // this is the map we are interested in

        struct map_entry *map = malloc(sizeof(struct map_entry));

        assert(map);

        map->ptr = ptr;
        map->len = len;
        map->fd = fildes;
        map->have_fp = false;  // we wouldn't know yet until a call to fclose()
        map->want_close = false;

        // add to linked list
        map->next = maps;
        maps = map;
    }

    return ptr;
}

// close() stub is using ld's --wrap feature
// bcs we must also override its usage in Rust STD

int __real_close(int fildes);

int __wrap_close(int fildes) {
    if (fcntl(fildes, F_GETFD) < 0)
        return -1;  // invalid fd

    filter_map_by_key_or(fd, fildes, {
        // mark all matches as todo for munmap
        i->want_close = true;
    }, {
        // no match, closing as-is
        return __real_close(fildes);
    });

    return 0;
}

// fclose() is in libc,
// we don't know if it calls close() internally,
// so better way is we also handle it

int __real_fclose(FILE *stream);

int __wrap_fclose(FILE *stream) {
    int fildes;

    if (!stream) {
        // invalid fp
        errno = EBADF;
        return EOF;
    }

    if ((fildes = fileno(stream)) < 0) {
        // probably opened by funopen or sth
        // not interested
        return __real_fclose(stream);
    }

    filter_map_by_key_or(fd, fildes, {
        // mark all matches as todo for munmap
        i->want_close = true;
        i->fp = stream;
        i->have_fp = true;
    }, {
        // no match, closing as-is
        return __real_fclose(stream);
    });

    // we couldn't close yet,
    // but we could try to flush it now
    fflush(stream);

    return 0;
}

static inline void post_munmap_hook(struct map_entry *map, size_t len) {
    // we dont support partial munmapping
    assert(map->len == len);

    filter_map_by_key_or(fd, map->fd, {
        // delay the close until the last file mapping
        // associcated with this fd is munmapped
        assert(i->want_close);

        break;
    }, {
        // perform the delayed close
        if (map->have_fp)
            assert(!__real_fclose(map->fp));
        else
            assert(!__real_close(map->fd));
    });
}

int _munmap_stub_impl(void *addr, size_t len) {
    int res = munmap(addr, len);

    if (res < 0)
        return res;

    filter_map_by_key_or(ptr, addr, {
        // remove from linked list
        if (prev)
            prev->next = i->next;
        else
            maps = i->next;

        if (i->want_close)
            post_munmap_hook(i, len);

        free(i);

        break;
    }, {
        // no match, no action needed
    });

    return res;
}

```

`src/libc-compat/include/emsup/mkdev_stubs.h`:

```h
#ifndef _MAGISKBOOT_BUILD_EMSUP_MKDEV_STUBS
#define _MAGISKBOOT_BUILD_EMSUP_MKDEV_STUBS

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/types.h>

#define major(dev) __gnu_dev_major(dev)
#define minor(dev) __gnu_dev_minor(dev)
#define makedev(maj, min) __gnu_dev_makedev(maj, min)

static inline dev_t
__gnu_dev_makedev(int maj, int min)
{
        return (((maj) << 16) | ((min) & 0xffff));
}

static inline int
__gnu_dev_major(dev_t dev)
{
        return (int)(((dev) >> 16) & 0xffff);
}

static inline int
__gnu_dev_minor(dev_t dev)
{
        return (int)((dev) & 0xffff);
}

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_EMSUP_MKDEV_STUBS */

```

`src/libc-compat/include/libbsd/str_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_LIBBSD_STR_COMPAT
#define _MAGISKBOOT_BUILD_LIBBSD_STR_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/types.h>

size_t strlcpy(char *dst, const char *src, size_t siz);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_LIBBSD_STR_COMPAT */

```

`src/libc-compat/include/winsup/acl_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_ACL_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_ACL_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/types.h>

typedef short uid_t, gid_t;

int     chown (const char *path, uid_t owner, gid_t group);
int     fchmod (int fd, mode_t mode);
int     fchown (int fildes, uid_t owner, gid_t group);
int     lchown (const char *path, uid_t owner, gid_t group);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_ACL_COMPAT */

```

`src/libc-compat/include/winsup/at_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_AT_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_AT_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <dirent.h>
#include <sys/stat.h>
#include <sys/types.h>

#define AT_REMOVEDIR 1
#define AT_SYMLINK_NOFOLLOW 2

ssize_t readlinkat (int dirfd, const char *__restrict path,
                            char *__restrict buf, size_t len);

int       symlinkat (const char *, int, const char *);

int     linkat (int dirfd1, const char *path1, int dirfd2, const char *path2, int flags);

int unlinkat (int dirfd, const char *pathname, int flags);

int openat (int dirfd, const char *pathname, int flags, ...);

int faccessat (int dirfd, const char *path, int mode, int flags);

int fstatat (int dirfd, const char *__restrict pathname, struct stat *__restrict buf, int flags);

int mkdirat (int dirfd, const char *pathname, mode_t mode);

int    renameat (int, const char *, int, const char *);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_AT_COMPAT */

```

`src/libc-compat/include/winsup/dirent_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_DIRENT_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_DIRENT_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <dirent.h>

#define DT_UNKNOWN 0
#define DT_REG 1
#define DT_LNK 2
#define DT_DIR 3
#define DT_FIFO 4
#define DT_SOCK 5
#define DT_BLK 6
#define DT_CHR 7

typedef struct _DIR_wrap _DIR_stub;

struct _dirent_stub
{
        long            d_ino;          /* Always zero. */
        unsigned char   d_type;         /* file type. this may not be supported
                                             by all the file systems */
        unsigned short  d_reclen;       /* Always zero. */
        unsigned short  d_namlen;       /* Length of name in d_name. */
        char            d_name[260]; /* [FILENAME_MAX] */ /* File name. */
};

struct _DIR_wrap {
    DIR *dirp;
    int fd;
};

_DIR_stub *_opendir_stub (const char*);

_DIR_stub *fdopendir(int fd);

struct _dirent_stub* _readdir_stub (_DIR_stub*);

int _closedir_stub (_DIR_stub*);

void _rewinddir_stub (_DIR_stub*);

long _telldir_stub (_DIR_stub*);

void _seekdir_stub (_DIR_stub*, long);

int dirfd (_DIR_stub*);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_DIRENT_COMPAT */

```

`src/libc-compat/include/winsup/io_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_IO_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_IO_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <fcntl.h>
#include <sys/types.h>

ssize_t _read_stub(int fd, void *buf, size_t count);

ssize_t _write_stub(int fd, const void *buf, size_t count);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_IO_COMPAT */

```

`src/libc-compat/include/winsup/link_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_LINK_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_LINK_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/stat.h>
#include <sys/types.h>

ssize_t readlink (const char *__restrict path,
                          char *__restrict buf, size_t len);

int link(const char *path1, const char *path2);

int     symlink (const char *name1, const char *name2);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_LINK_COMPAT */

```

`src/libc-compat/include/winsup/mkdir_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_MKDIR_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_MKDIR_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/types.h>

int _mkdir_stub (const char *path, mode_t mode);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_MKDIR_COMPAT */

```

`src/libc-compat/include/winsup/mknod_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_MKNOD_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_MKNOD_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/types.h>

#define major(dev) __gnu_dev_major(dev)
#define minor(dev) __gnu_dev_minor(dev)
#define makedev(maj, min) __gnu_dev_makedev(maj, min)

static inline dev_t
__gnu_dev_makedev(int maj, int min)
{
        return (((maj) << 16) | ((min) & 0xffff));
}

static inline int
__gnu_dev_major(dev_t dev)
{
        return (int)(((dev) >> 16) & 0xffff);
}

static inline int
__gnu_dev_minor(dev_t dev)
{
        return (int)((dev) & 0xffff);
}

int mknod (const char *path, mode_t mode, dev_t dev );

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_MKNOD_COMPAT */


```

`src/libc-compat/include/winsup/stat_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_STAT_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_STAT_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <sys/stat.h>

#define S_IFLNK 0x6000
#define S_IFSOCK 0xC000

#define     S_ISLNK(m)      (((m)&S_IFMT) == S_IFLNK)
#define     S_ISSOCK(m)     (((m)&S_IFMT) == S_IFSOCK)

int lstat (const char *__restrict path, struct stat *__restrict buf);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_STAT_COMPAT */

```

`src/libc-compat/include/winsup/str_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_STR_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_STR_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <string.h>

void *memmem(const void *haystack, int haystacklen, const void *needle, int needlelen);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_STR_COMPAT */

```

`src/libc-compat/include/winsup/uio_compat.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_UIO_COMPAT
#define _MAGISKBOOT_BUILD_WINSUP_UIO_COMPAT

#ifdef __cplusplus
extern "C" {
#endif

#include <stdbool.h>
#include <sys/types.h>

struct iovec {
    void *iov_base;
    size_t iov_len;
};

ssize_t readv(int fd, const struct iovec *iov, int iov_cnt);
ssize_t writev(int fd, const struct iovec *iov, int iov_cnt);

#ifdef __cplusplus
}
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_UIO_COMPAT */

```

`src/libc-compat/libbsd/str.c`:

```c
/* From OpenBSD libc: strlcpy.c,v 1.5 2001/05/13 15:40:16 deraadt Exp $	*/

/*
 * Copyright (c) 1998 Todd C. Miller <Todd.Miller@courtesan.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
 * THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#include <sys/types.h>

#include "../include/libbsd/str_compat.h"

/*
 * Copy src to string dst of size siz.  At most siz-1 characters
 * will be copied.  Always NUL terminates (unless siz == 0).
 * Returns strlen(src); if retval >= siz, truncation occurred.
 */
size_t strlcpy(char *dst, const char *src, size_t siz) {
    register char *d = dst;
    register const char *s = src;
    register size_t n = siz;

    /* Copy as many bytes as will fit */
    if (n != 0 && --n != 0) {
        do {
            if ((*d++ = *s++) == 0)
                break;
        } while (--n != 0);
    }

    /* Not enough room in dst, add NUL and traverse rest of src */
    if (n == 0) {
        if (siz != 0)
            *d = '\0';      /* NUL-terminate dst */
        while (*s++)
            ;
    }

    return(s - src - 1);    /* count does not include NUL */
}

```

`src/libc-compat/non-linux/sendfile_fallback.c`:

```c
#include <assert.h>
#include <errno.h>
#include <sys/param.h>
#include <sys/types.h>
#include <unistd.h>

#ifndef NDEBUG
#  include <stdio.h>
#endif

#ifndef MIN
#  define MIN(a, b)   (((a) < (b)) ? (a) : (b))
#endif

#define sf_buf_size     8192

void __sendfile_stub(int out_fd, int in_fd, size_t count) {
    char sf_buf[sf_buf_size];
    size_t n_read, n_write, n_write_new;
    off_t n_left = count;

    while (n_left) {
        n_read = read(in_fd, &sf_buf, MIN(n_left, sf_buf_size));
        if (n_read == 0)
            break;
        if (n_read < 0) {
            if (errno == EINTR)  // operation interrupted by signal
                continue;  // retry the read
#ifndef NDEBUG
            perror("read");
#endif
            break;
        }
        n_write = write(out_fd, &sf_buf, n_read);
        assert(n_write != 0);
        if (n_write < 0) {
            if (errno == EINTR)  // operation interrupted by signal
                n_write = 0;  // allow retrying the write
            else {
#ifndef NDEBUG
                perror("write");
#endif
                return;
            }
        }
        while (n_write < n_read) {
            n_write_new = write(out_fd, (&sf_buf) + n_write, n_read - n_write);
            assert(n_write_new != 0);
            if (n_write_new < 0) {
                if (errno == EINTR)  // operation interrupted by signal
                    continue;  // retry the write
#ifndef NDEBUG
                perror("write");
#endif
                return;
            }
            n_write += n_write_new;
        }
        n_left -= n_write;
    }

    return;
}

```

`src/libc-compat/rs/Cargo.toml`:

```toml
[package]
name = "libc"
version = "0.0.0"
edition = "2021"

[lib]
path = "lib.rs"

[dependencies]
libc = "*"
cfg-if = "*"

```

`src/libc-compat/rs/common/mod.rs`:

```rs
#[macro_use]
mod stubs;

pub use stubs::*;

#[macro_use]
mod overrides;

```

`src/libc-compat/rs/common/overrides.rs`:

```rs
macro_rules! post_defs_overrides {
    () => {
        add_sendfile_stubs_if_needed!();
    }
}

```

`src/libc-compat/rs/common/stubs/errno.rs`:

```rs
// android (bionic libc) errno

#[cfg(mbb_stubs___errno)]
extern "C" {
    pub fn __errno() -> *mut crate::c_int;
}

```

`src/libc-compat/rs/common/stubs/fcntl.rs`:

```rs
// for platform those doesn't have O_PATH

#[cfg(mbb_stubs_O_PATH)]
pub const O_PATH: crate::c_int = 0;  // no-op

```

`src/libc-compat/rs/common/stubs/lfs64.rs`:

```rs
// just aliases

#[cfg(mbb_stubs_lseek64)]
extern "C" {
    #[link_name = "lseek"]
    pub fn lseek64(fd: crate::c_int, offset: crate::off_t, whence: crate::c_int) -> crate::off_t;
}

```

`src/libc-compat/rs/common/stubs/mod.rs`:

```rs
mod errno;
pub use errno::*;

mod fcntl;
pub use fcntl::*;

mod lfs64;
pub use lfs64::*;

mod sc_num;
pub use sc_num::*;

#[macro_use]
mod sendfile;

```

`src/libc-compat/rs/common/stubs/sc_num.rs`:

```rs
// no actually used, just for passing build

#[cfg(mbb_stubs_SYS_dup3)]
pub const SYS_dup3: crate::c_int = 0;  // stub

```

`src/libc-compat/rs/common/stubs/sendfile.rs`:

```rs
// defined in src/libc-compat/non-linux/sendfile_fallback.c

macro_rules! add_sendfile_stubs_if_needed {
    () => {
        cfg_if::cfg_if! {
            if #[cfg(mbb_stubs_sendfile)] {
                extern "C" {
                    #[link_name = "__sendfile_stub"]
                    fn real_sendfile(
                        out_fd: crate::c_int,
                        in_fd: crate::c_int,
                        count: crate::size_t
                    );
                }

                f! {
                    pub fn sendfile(
                        out_fd: crate::c_int,
                        in_fd: crate::c_int,
                        offset: *mut crate::off_t,
                        count: crate::size_t
                    ) -> crate::ssize_t {
                        if offset.is_null() {
                            real_sendfile(out_fd, in_fd, count);
                            0
                        } else {
                            panic!("unreachable code")
                        }
                    }
                }
            }
        }
    };
}

```

`src/libc-compat/rs/emscripten/defs.rs`:

```rs
pub use libc::*;

// shadowing these functions to use our stubs
// check src/libc-compat/emsup/mmap_hack.c for details

extern "C" {
    #[link_name = "_mmap_stub_impl"]
    pub fn mmap(
        addr: *mut c_void,
        len: size_t,
        prot: c_int,
        flags: c_int,
        fd: c_int,
        offset: off_t,
    ) -> *mut c_void;

    #[link_name = "_munmap_stub_impl"]
    pub fn munmap(addr: *mut c_void, len: size_t) -> c_int;

    // close() is shadowed using a --wrap ldflag
}

```

`src/libc-compat/rs/emscripten/missing_defs.rs`:

```rs
// at

extern "C" {
    pub fn faccessat(
        dirfd: crate::c_int,
        pathname: *const crate::c_char,
        mode: crate::c_int,
        flags: crate::c_int,
    ) -> crate::c_int;
}

// string

extern "C" {
    pub fn memmem(
        haystack: *const crate::c_void,
        haystacklen: crate::size_t,
        needle: *const crate::c_void,
        needlelen: crate::size_t,
    ) -> *mut crate::c_void;
}

```

`src/libc-compat/rs/emscripten/mod.rs`:

```rs
mod defs;
mod missing_defs;

pub use defs::*;
pub use missing_defs::*;

```

`src/libc-compat/rs/lib.rs`:

```rs
#![allow(
    non_camel_case_types, unused_macros, unused_imports, non_upper_case_globals
)]

#[macro_use]
mod macros;

cfg_if::cfg_if! {
    if #[cfg(target_os = "windows")] {
        // windows has some missing defs,
        // we also need to shadow add some extra stuffs

        mod windows;
        pub use windows::*;
    } else if #[cfg(target_os = "emscripten")] {
        // emscripten has some missing defs
        // and we want to shadow some mman funcs

        mod emscripten;
        pub use emscripten::*;
    } else {
        pub use libc::*;
    }
}

#[macro_use]
mod common;

post_defs_overrides!();

pub use common::*;

```

`src/libc-compat/rs/macros.rs`:

```rs
macro_rules! __item {
    ($i:item) => {
        $i
    };
}

macro_rules! s {
    ($($(#[$attr:meta])* pub $t:ident $i:ident { $($field:tt)* })*) => ($(
        s!(it: $(#[$attr])* pub $t $i { $($field)* });
    )*);
    (it: $(#[$attr:meta])* pub union $i:ident { $($field:tt)* }) => (
        compile_error!("unions cannot derive extra traits, use s_no_extra_traits instead");
    );
    (it: $(#[$attr:meta])* pub struct $i:ident { $($field:tt)* }) => (
        __item! {
            #[repr(C)]
            #[cfg_attr(feature = "extra_traits", derive(Debug, Eq, Hash, PartialEq))]
            #[allow(deprecated)]
            $(#[$attr])*
            pub struct $i { $($field)* }
        }
        #[allow(deprecated)]
        impl core::marker::Copy for $i {}
        #[allow(deprecated)]
        impl core::clone::Clone for $i {
            fn clone(&self) -> $i { *self }
        }
    );
}

macro_rules! s_no_extra_traits {
    ($($(#[$attr:meta])* pub $t:ident $i:ident { $($field:tt)* })*) => ($(
        s_no_extra_traits!(it: $(#[$attr])* pub $t $i { $($field)* });
    )*);
    (it: $(#[$attr:meta])* pub struct $i:ident { $($field:tt)* }) => (
        __item! {
            #[repr(C)]
            $(#[$attr])*
            pub struct $i { $($field)* }
        }
        #[allow(deprecated)]
        impl core::marker::Copy for $i {}
        #[allow(deprecated)]
        impl core::clone::Clone for $i {
            fn clone(&self) -> $i { *self }
        }
    );
}

macro_rules! f {
    ($($(#[$attr:meta])* pub $({$constness:ident})* fn $i:ident(
                $($arg:ident: $argty:ty),*
    ) -> $ret:ty {
        $($body:stmt);*
    })*) => ($(
        #[inline]
        $(#[$attr])*
        pub unsafe extern fn $i($($arg: $argty),*
        ) -> $ret {
            $($body);*
        }
    )*)
}

macro_rules! safe_f {
    ($($(#[$attr:meta])* pub $({$constness:ident})* fn $i:ident(
                $($arg:ident: $argty:ty),*
    ) -> $ret:ty {
        $($body:stmt);*
    })*) => ($(
        #[inline]
        $(#[$attr])*
        pub extern fn $i($($arg: $argty),*
        ) -> $ret {
            $($body);*
        }
    )*)
}

```

`src/libc-compat/rs/windows/defs.rs`:

```rs
pub use libc::*;

// mkdir

// this shadows the original one provided by MinGW
// we add the missing mode arg here :)

extern "C" {
    #[link_name = "_mkdir_stub"]
    pub fn mkdir(path: *const crate::c_char, mode: crate::mode_t) -> crate::c_int;
}

// io

// wtf

extern "C" {
    #[link_name = "_read_stub"]
    pub fn read(fd: crate::c_int, buf: *mut crate::c_void, count: crate::size_t) -> crate::ssize_t;

    #[link_name = "_write_stub"]
    pub fn write(fd: crate::c_int, buf: *const crate::c_void, count: crate::size_t) -> crate::ssize_t;
}

// type mismatch

// changed from c_int to mode_t (c_short)
// values are not chanegd :)

pub const S_IFCHR: crate::mode_t = 8192;
pub const S_IFDIR: crate::mode_t = 16384;
pub const S_IFREG: crate::mode_t = 32768;
pub const S_IFMT: crate::mode_t = 61440;
pub const S_IEXEC: crate::mode_t = 64;
pub const S_IWRITE: crate::mode_t = 128;
pub const S_IREAD: crate::mode_t = 256;

// acl

// for mode_t type mismatch

extern "C" {
    #[link_name = "chmod"]
    fn old_chmod(path: *const c_char, mode: c_int) -> c_int;
}

f! {
    pub fn chmod(path: *const c_char, mode: crate::mode_t) -> c_int {
        old_chmod(path, mode as c_int)
    }
}


```

`src/libc-compat/rs/windows/missing_defs.rs`:

```rs
// stat

pub type mode_t = crate::c_ushort;
pub type gid_t = crate::c_short;
pub type uid_t = crate::c_short;

// stdlib

pub const F_OK: crate::c_int = 0;

```

`src/libc-compat/rs/windows/mod.rs`:

```rs
mod defs;
mod missing_defs;
mod stubs;

pub use defs::*;
pub use missing_defs::*;
pub use stubs::*;

```

`src/libc-compat/rs/windows/stubs.rs`:

```rs
use core::{clone::Clone, marker::Copy};

// dirent

// there is an additional d_type field
// compared to the original MinGW dirent

s_no_extra_traits! {
    pub struct dirent {
        pub d_ino: crate::c_long,
        pub d_type: crate::c_uchar,
        pub d_reclen: crate::c_ushort,
        pub d_namlen: crate::c_ushort,
        pub d_name: [crate::c_char; 260],
    }
}

pub const DT_REG: u8 = 1;
pub const DT_LNK: u8 = 2;
pub const DT_DIR: u8 = 3;
pub const DT_FIFO: u8 = 4;
pub const DT_SOCK: u8 = 5;
pub const DT_BLK: u8 = 6;
pub const DT_CHR: u8 = 7;

// replace the MinGW impls bcs we've modified dirent struct and added dir fd support

pub enum DIR {}
impl Copy for DIR {}
impl Clone for DIR {
    fn clone(&self) -> DIR {
        *self
    }
}

extern "C" {
    #[link_name = "_opendir_stub"]
    pub fn opendir(dirname: *const crate::c_char) -> *mut DIR;

    #[link_name = "_readdir_stub"]
    pub fn readdir(dirp: *mut DIR) -> *mut crate::dirent;

    #[link_name = "_rewinddir_stub"]
    pub fn rewinddir(dirp: *mut DIR);

    #[link_name = "_closedir_stub"]
    pub fn closedir(dirp: *mut DIR) -> crate::c_int;
}

extern "C" {
    pub fn fdopendir(fd: crate::c_int) -> *mut DIR;
    pub fn dirfd(dirp: *mut DIR) -> crate::c_int;
}

// fcntl

pub const O_CLOEXEC: crate::c_int = crate::O_NOINHERIT;

// link

extern "C" {
    pub fn link(src: *const crate::c_char, dst: *const crate::c_char) -> crate::c_int;
    pub fn readlink(path: *const crate::c_char, buf: *mut crate::c_char, bufsz: crate::size_t) -> crate::ssize_t;
    pub fn symlink(path1: *const crate::c_char, path2: *const crate::c_char) -> crate::c_int;
}

// at

pub const AT_REMOVEDIR: crate::c_int = 1;
pub const AT_SYMLINK_NOFOLLOW: crate::c_int = 2;

extern "C" {
    pub fn readlinkat(dirfd: crate::c_int,
        pathname: *const crate::c_char,
        buf: *mut crate::c_char,
        bufsiz: crate::size_t) -> crate::ssize_t;
    pub fn symlinkat(
        target: *const crate::c_char,
        newdirfd: crate::c_int,
        linkpath: *const crate::c_char,
    ) -> crate::c_int;
    pub fn linkat(
        olddirfd: crate::c_int,
        oldpath: *const crate::c_char,
        newdirfd: crate::c_int,
        newpath: *const crate::c_char,
        flags: crate::c_int,
    ) -> crate::c_int;
    pub fn unlinkat(dirfd: crate::c_int, pathname: *const crate::c_char, flags: crate::c_int) -> crate::c_int;
    pub fn openat(dirfd: crate::c_int, pathname: *const crate::c_char,
                          flags: crate::c_int, ...) -> crate::c_int;
    pub fn faccessat(
        dirfd: crate::c_int,
        pathname: *const crate::c_char,
        mode: crate::c_int,
        flags: crate::c_int,
    ) -> crate::c_int;
    pub fn fstatat(
        dirfd: crate::c_int,
        pathname: *const crate::c_char,
        buf: *mut crate::stat,
        flags: crate::c_int,
    ) -> crate::c_int;
    pub fn mkdirat(dirfd: crate::c_int, pathname: *const crate::c_char,
                          mode: crate::mode_t) -> crate::c_int;
    pub fn renameat(
        olddirfd: crate::c_int,
        oldpath: *const crate::c_char,
        newdirfd: crate::c_int,
        newpath: *const crate::c_char,
    ) -> crate::c_int;
}

// mman

extern "C" {
    #[link_name = "mmap"]
    fn real_mmap(
        addr: *mut crate::c_void,
        len: crate::size_t,
        prot: crate::c_int,
        flags: crate::c_int,
        fd: crate::c_int,
        offset: crate::c_longlong,
    ) -> *mut crate::c_void;
    pub fn munmap(addr: *mut crate::c_void, len: crate::size_t) -> crate::c_int;
}

pub fn mmap(
    addr: *mut crate::c_void,
    len: crate::size_t,
    prot: crate::c_int,
    flags: crate::c_int,
    fd: crate::c_int,
    offset: crate::off_t,
) -> *mut crate::c_void {
    unsafe { real_mmap(addr, len, prot, flags, fd, offset as crate::c_longlong) }
}

pub const MAP_SHARED: crate::c_int = 1;
pub const MAP_PRIVATE: crate::c_int = 2;
pub const MAP_FAILED: *mut crate::c_void = !0 as *mut crate::c_void;
pub const PROT_READ: crate::c_int = 1;
pub const PROT_WRITE: crate::c_int = 2;

// mknod

extern "C" {
    pub fn mknod(pathname: *const crate::c_char, mode: crate::mode_t, dev: crate::dev_t) -> crate::c_int;
}

f! {
    pub fn major(dev: crate::dev_t) -> crate::c_int {
        ((dev >> 16) & 0xffff) as crate::c_int
    }

    pub fn minor(dev: crate::dev_t) -> crate::c_int {
        (dev & 0xffff) as crate::c_int
    }
}

safe_f! {
    pub {const} fn makedev(ma: crate::c_int, mi: crate::c_int) -> crate::dev_t {
        let ma = ma as crate::dev_t;
        let mi = mi as crate::dev_t;
        (ma << 16) | (mi & 0xffff)
    }
}

// stat

pub const S_IFBLK: crate::mode_t = 12288;
pub const S_IFLNK: crate::mode_t = 24576;
pub const S_IFSOCK: crate::mode_t = 49152;
pub const S_IFIFO: crate::mode_t = 4096;

extern "C" {
    pub fn lstat(path: *const crate::c_char, buf: *mut crate::stat) -> crate::c_int;
}

pub const S_IRGRP: crate::mode_t = 32;
pub const S_IROTH: crate::mode_t = 4;
pub const S_IRUSR: crate::mode_t = 256;
pub const S_IWOTH: crate::mode_t = 2;
pub const S_IWGRP: crate::mode_t = 16;
pub const S_IWUSR: crate::mode_t = 128;
pub const S_IXGRP: crate::mode_t = 8;
pub const S_IXOTH: crate::mode_t = 1;
pub const S_IXUSR: crate::mode_t = 64;

// poll

pub type nfds_t = crate::c_ulong;

pub enum pollfd {}
impl Copy for pollfd {}
impl Clone for pollfd {
    fn clone(&self) -> pollfd {
        *self
    }
}

// winsock

pub type socklen_t = crate::c_int;

// acl

extern "C" {
    pub fn lchown(path: *const crate::c_char, uid: crate::uid_t, gid: crate::gid_t) -> crate::c_int;
    pub fn fchmod(fd: crate::c_int, mode: crate::mode_t) -> crate::c_int;
    pub fn fchown(fd: crate::c_int, owner: crate::uid_t, group: crate::gid_t) -> crate::c_int;
}

// string

extern "C" {
    pub fn memmem(
        haystack: *const crate::c_void,
        haystacklen: crate::size_t,
        needle: *const crate::c_void,
        needlelen: crate::size_t,
    ) -> *mut crate::c_void;
}

```

`src/libc-compat/winsup/acl.c`:

```c
#include <fcntl.h>
#include <sys/stat.h>
#include <unistd.h>

#define WIN32_MEAN_AND_LEAN
#include <windows.h>

#include "../include/winsup/acl_compat.h"
#include "../include/winsup/stat_compat.h"

#include "internal/errno.h"

#include "../include/winsup/acl_compat.h"

#ifndef NDEBUG
#  include <stdio.h>
#endif

int fchmod (int fd, mode_t mode) {
    HANDLE h = (HANDLE) _get_osfhandle(fd);

    if (h == INVALID_HANDLE_VALUE)
        return -1;  // errno is already set to EBADF by _get_osfhandle

    BY_HANDLE_FILE_INFORMATION hfi = {};

    if (!GetFileInformationByHandle(h, &hfi)) {
        __set_errno_via_winerr(GetLastError());

#ifndef NDEBUG
        perror("GetFileInformationByHandle");
#endif

        return -1;
    }

    // ref: https://github.com/reactos/reactos/blob/7f346b1aa350942540c7dee9fce3869bea2a72a6/sdk/lib/crt/stdio/file.c#L764

    DWORD new_attr = (mode & (S_IWUSR | S_IWGRP | S_IWOTH)) ? (hfi.dwFileAttributes & ~FILE_ATTRIBUTE_READONLY) : (hfi.dwFileAttributes | FILE_ATTRIBUTE_READONLY);

    if (new_attr == hfi.dwFileAttributes)
        return 0;  // attr unchanged

    FILE_BASIC_INFO info = {};

    info.FileAttributes = new_attr;

    if (!SetFileInformationByHandle(h, FileBasicInfo, &info, sizeof(info))) {
        __set_errno_via_winerr(GetLastError());

#ifndef NDEBUG
        perror("SetFileInformationByHandle");
#endif

        return -1;
    }

    return 0;
}

int     chown (const char *path, uid_t owner, gid_t group) {
    if (access(path, F_OK) != 0)
        return -1;

    return 0;  // FIXME: stub
}

int     fchown (int fildes, uid_t owner, gid_t group) {
    struct stat buf;

    if (fstat(fildes, &buf) < 0)
        return -1;

    return 0;  // FIXME: stub
}

int lchown (const char *path, uid_t owner, gid_t group) {
    struct stat buf;

    if (lstat(path, &buf) < 0)
        return -1;

    return 0;  // FIXME: stub
}

```

`src/libc-compat/winsup/at.c`:

```c
#include <assert.h>
#include <dirent.h>
#include <errno.h>
#include <fcntl.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <shlwapi.h>

#include "../include/winsup/at_compat.h"
#include "../include/winsup/link_compat.h"
#include "../include/winsup/mkdir_compat.h"
#include "../include/winsup/stat_compat.h"

#include "internal/fd.h"

ssize_t readlinkat (int dirfd, const char *__restrict path,
                            char *__restrict buf, size_t len) {
    if (PathIsRelative(path) == FALSE)
        return readlink(path, buf, len);  // ignore dirfd if path is absolute

    char *real_path = __get_path_at(dirfd, path);

    if (!real_path)
        return -1;  // errno already set by this call

    ssize_t ret = readlink(real_path, buf, len);

    free(real_path);

    return ret;
}

int       symlinkat (const char *oldpath, int newdirfd, const char *newpath) {
    if (PathIsRelative(newpath) == FALSE) {
        // ignore newdirfd if newpath is absolute
        return symlink(oldpath, newpath);
    }

    char *real_newpath = __get_path_at(newdirfd, newpath);

    if (!real_newpath)
        return -1;  // errno is already set by this call

    int ret = symlink(oldpath, real_newpath);

    free(real_newpath);

    return ret;
}

int     linkat (int dirfd1, const char *path1, int dirfd2, const char *path2, int flags) {
    (void) flags;  // flags is not implemented and unused for now

    int ret = -1;

    char *real_path1 = NULL;
    char *real_path2 = NULL;

    // ignore dirfd if path is absolute

    if (PathIsRelative(path1) == FALSE) {
        real_path1 = strdup(path1);

        if (!real_path1) {
strdup_failed:
#ifndef NDEBUG
            perror("strdup");
#endif
            assert(0);
        }
    } else {
        real_path1 = __get_path_at(dirfd1, path1);  // errno is set by this call

        if (!real_path1)
            goto error;
    }

    if (PathIsRelative(path2) == FALSE) {
        real_path2 = strdup(path2);

        if (!real_path2)
            goto strdup_failed;
    } else {
        real_path2 = __get_path_at(dirfd2, path2);  // errno is set by this call

        if (!real_path2)
            goto error;
    }

    ret = link(real_path1, real_path2);

error:
    if (real_path1)
        free(real_path1);

    if (real_path2)
        free(real_path2);

    return ret;
}

int unlinkat (int dirfd, const char *pathname, int flags) {
    int (*unlinkat_funcptr)(const char *pathname);

    if (flags == AT_REMOVEDIR)
        unlinkat_funcptr = rmdir;
    else if (flags == 0)
        unlinkat_funcptr = unlink;
    else {
        // POSIX say should not allow unknown flags
        errno = EINVAL;
        return -1;
    }

    if (PathIsRelative(pathname) == FALSE) {
        // ignore dirfd if pathname is absolute
        return unlinkat_funcptr(pathname);
    }

    char *real_pathname = __get_path_at(dirfd, pathname);

    if (!real_pathname)
        return -1;  // errno already set by the call

    int ret = unlinkat_funcptr(real_pathname);

    free(real_pathname);

    return ret;
}

int openat (int dirfd, const char *pathname, int flags, ...) {
    char *real_pathname;

    if (PathIsRelative(pathname) == FALSE) {
        real_pathname = strdup(pathname);

        if (!real_pathname) {
#ifndef NDEBUG
            perror("strdup");
#endif
            assert(0);
        }
    } else {
        real_pathname = __get_path_at(dirfd, pathname);

        if (!real_pathname)
            return -1;  // errno already set by the call
    }

    int ret;

    if (flags & O_CREAT) {
        va_list ap;
        va_start(ap, flags);
        mode_t mode = (mode_t) va_arg(ap, int);
        va_end(ap);
        ret = open(pathname, flags, mode);
    } else
        ret = open(pathname, flags);

    free(real_pathname);

    return ret;
}

int faccessat (int dirfd, const char *path, int mode, int flags) {
    if (flags == AT_SYMLINK_NOFOLLOW) {
        struct stat buf;

        if (fstatat(dirfd, path, &buf, AT_SYMLINK_NOFOLLOW) < 0)
            return -1;

        mode &= (R_OK | W_OK | X_OK);

        if (mode == 0)
            goto have_access;  // F_OK, others are ignores and treat as F_OK

        if ((mode & R_OK) && !(buf.st_mode & (S_IRUSR | S_IRGRP | S_IROTH)))
            return -1;

        if ((mode & W_OK) && !(buf.st_mode & (S_IWUSR | S_IWGRP | S_IWOTH)))
            return -1;

        if ((mode & X_OK) && !(buf.st_mode & (S_IXUSR | S_IXGRP | S_IXOTH)))
            return -1;

have_access:
        return 0;
    } else if (flags) {
        errno = EINVAL;
        return -1;
    }

    if (PathIsRelative(path) == FALSE)
        return access(path, mode);  // ignore dirfd if path is absolute

    char *real_path = __get_path_at(dirfd, path);

    if (!real_path)
        return -1;  // errno already set by this call

    int ret = access(real_path, mode);

    free(real_path);

    return ret;
}

int fstatat (int dirfd, const char *__restrict pathname, struct stat *__restrict buf, int flags) {
    int (*fstatat_funcptr)(const char *path, struct stat *buf);

    if (flags == AT_SYMLINK_NOFOLLOW)
        fstatat_funcptr = lstat;
    else if (flags == 0)
        fstatat_funcptr = stat;
    else {
        errno = EINVAL;
        return -1;
    }

    if (PathIsRelative(pathname) == FALSE) {
        // ignore dirfd if pathname is absolute
        return fstatat_funcptr(pathname, buf);
    }

    char *real_pathname = __get_path_at(dirfd, pathname);

    if (!real_pathname)
        return -1;  // errno already set by the call

    int ret = fstatat_funcptr(real_pathname, buf);

    free(real_pathname);

    return ret;
}

int mkdirat (int dirfd, const char *pathname, mode_t mode) {
    if (PathIsRelative(pathname) == FALSE)
        return _mkdir_stub(pathname, mode);  // ignore dirfd if pathname is absolute

    char *real_pathname = __get_path_at(dirfd, pathname);

    if (!real_pathname)
        return -1;  // errno already set by this call

    int ret = _mkdir_stub(real_pathname, mode);

    free(real_pathname);

    return ret;
}

int renameat (int olddirfd, const char *oldpath, int newdirfd, const char * newpath) {
    int ret = -1;

    char *real_oldpath = NULL;
    char *real_newpath = NULL;

    // ignore dirfd if path is absolute

    if (PathIsRelative(oldpath) == FALSE) {
        real_oldpath = strdup(oldpath);

        if (!real_oldpath) {
strdup_failed:
#ifndef NDEBUG
            perror("strdup");
#endif
            assert(0);
        }
    } else {
        real_oldpath = __get_path_at(olddirfd, oldpath);  // errno is set by this call

        if (!real_oldpath)
            goto error;
    }

    if (PathIsRelative(newpath) == FALSE) {
        real_newpath = strdup(newpath);

        if (!real_newpath)
            goto strdup_failed;
    } else {
        real_newpath = __get_path_at(newdirfd, newpath);  // errno is set by this call

        if (!real_newpath)
            goto error;
    }

    ret = rename(real_oldpath, real_newpath);

error:
    if (real_oldpath)
        free(real_oldpath);

    if (real_newpath)
        free(real_newpath);

    return ret;
}

```

`src/libc-compat/winsup/crt_flags.c`:

```c
// wildcard matching for file paths in argument could be enabled by
// default if the MinGW runtime is configured with `--enable-wildcard`
// but we explicitly dont want this behavior on Windows
int _dowildcard = 0;

```

`src/libc-compat/winsup/dirent.c`:

```c
// only used in magiskboot, not including its dependencies

#include <assert.h>
#include <dirent.h>
#include <errno.h>
#include <fcntl.h>
#include <stdlib.h>
#include <string.h>
#include <sys/param.h>
#include <sys/stat.h>
#include <unistd.h>

#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include "../include/libbsd/str_compat.h"

#include "../include/winsup/at_compat.h"
#include "../include/winsup/dirent_compat.h"
#include "../include/winsup/stat_compat.h"

#include "internal/errno.h"
#include "internal/fd.h"

#ifndef O_PATH
#  define O_PATH      0
#endif

#ifndef MIN
#  define MIN(a, b)   (((a) < (b)) ? (a) : (b))
#endif

_DIR_stub *_opendir_stub (const char *path) {
    _DIR_stub *res = NULL;
    DIR *real_dirp;
    int fd = open(path, O_PATH);

    if (fd < 0)
        goto error;

    // no need to check if path is a dir,
    // since the real opendir will check it

    if (!(res = malloc(sizeof(_DIR_stub))))
        goto error;

    if (!(real_dirp = opendir(path)))
        goto error;

    res->dirp = real_dirp;
    res->fd = fd;

    return res;

error:
    if (!(fd < 0))
        close(fd);

    if (res)
        free(res);

    // if real_dirp was opened, we shouldn't reach here

    return NULL;
}

_DIR_stub *fdopendir(int fd) {
    _DIR_stub *res = NULL;
    DIR *real_dirp;
    char *path = NULL;

    if (!__is_dirfd(fd))
        goto error;  // errno is already set by this call

    if (!(path = __fd_get_path(fd))) {
        __set_errno_via_winerr(GetLastError());

        goto error;
    }

    if (!(res = malloc(sizeof(_DIR_stub))))
        goto error;

    if (!(real_dirp = opendir(path)))
        goto error;

    free(path);

    res->dirp = real_dirp;
    res->fd = fd;

    return res;

error:
    // real_dirp was not opened
    // so the ownership is not transferred
    // not closing the fd

    if (path)
        free(path);

    if (res)
        free(res);

    return NULL;
}

struct _dirent_stub* _readdir_stub (_DIR_stub* dirp) {
    struct dirent *d;
    static struct _dirent_stub res;  // not thread-safe
    struct stat buf;
    unsigned char type = DT_UNKNOWN;

    if (!dirp || !dirp->dirp || dirp->fd < 0) {
        errno = EBADF;

        return NULL;
    }

    if (!(d = readdir(dirp->dirp)))
        return NULL;

    // fstatat should not fail
    assert(!(fstatat(dirp->fd, d->d_name, &buf, AT_SYMLINK_NOFOLLOW) < 0));

    if (S_ISREG(buf.st_mode))
        type = DT_REG;
    else if (S_ISLNK(buf.st_mode))
        type = DT_LNK;
    else if (S_ISDIR(buf.st_mode))
        type = DT_DIR;
    else if (S_ISFIFO(buf.st_mode))
        type = DT_FIFO;
    else if (S_ISSOCK(buf.st_mode))
        type = DT_SOCK;
    else if (S_ISBLK(buf.st_mode))
        type = DT_BLK;
    else if(S_ISCHR(buf.st_mode))
        type = DT_CHR;

    // clone data
    res.d_ino = d->d_ino;
    res.d_reclen = d->d_reclen;
    res.d_namlen = strlcpy(res.d_name, d->d_name, MIN(sizeof(res.d_name), d->d_namlen));
    res.d_type = type;

    // Windows doesn't care this
    // just for emulation
    // in case any one try to do sth with it
    assert(!lseek(dirp->fd, 1, SEEK_CUR));

    return &res;
}

int _closedir_stub (_DIR_stub *dirp) {
    // try to free maximum resources

    if (!dirp) {
        errno = EBADF;

        return -1;
    }

    if (dirp->dirp)
        closedir(dirp->dirp);

    if (!(dirp->fd < 0))
        close(dirp->fd);

    free(dirp);

    return 0;
}

void _rewinddir_stub (_DIR_stub *dirp) {
    if (!dirp)  // POSIX didn't say to set errno
        return;

    if (dirp->dirp)
        rewinddir(dirp->dirp);

    if (!(dirp->fd < 0))
        assert(!lseek(dirp->fd, 0, SEEK_SET));

    return;
}

long _telldir_stub (_DIR_stub *dirp) {
    if (!dirp || !dirp->dirp) {
        errno = EBADF;

        return -1;
    }

    return telldir(dirp->dirp);
}

void _seekdir_stub (_DIR_stub *dirp, long loc) {
    if (!dirp)  // POSIX didn't say to set errno
        return;

    if (dirp->dirp)
        seekdir(dirp->dirp, loc);

    if (!(dirp->fd < 0))
        assert(!lseek(dirp->fd, loc, SEEK_SET));

    return;
}

int dirfd (_DIR_stub* dirp) {
    if (!dirp) {
        errno = EINVAL;

        return -1;
    }

    return dirp->fd;
}

```

`src/libc-compat/winsup/file.c`:

```c
#include <errno.h>
#include <fcntl.h>
#include <stdbool.h>
#include <stdio.h>
#include <string.h>
#include <sys/stat.h>

#ifndef O_CLOEXEC
#  define O_CLOEXEC               O_NOINHERIT
#endif

// Origin: https://github.com/wine-mirror/wine/blob/0170cd3a4c67bd99291234dd8e0d638a824d7715/dlls/msvcrt/file.c#L2629
#define CREAT_OFLAGS            (O_CREAT | O_TRUNC | O_RDWR)

// From musl:
//      https://github.com/bminor/musl/blob/f314e133929b6379eccc632bef32eaebb66a7335/src/stdio/__fmodeflags.c
//      https://github.com/bminor/musl/blob/f314e133929b6379eccc632bef32eaebb66a7335/src/stdio/fopen.c#L12-L16
static int __fmodeflags(const char *mode)
{
    if (!strchr("rwa", *mode))
        // check if mode is valid
        return -1;

    int flags;

    if (strchr(mode, '+')) flags = O_RDWR;
    else if (*mode == 'r') flags = O_RDONLY;
    else flags = O_WRONLY;

    if (strchr(mode, 'x')) flags |= O_EXCL;
    if (strchr(mode, 'e') || strchr(mode, 'N')) flags |= O_CLOEXEC;
    if (*mode != 'r') flags |= O_CREAT;
    if (*mode == 'w') flags |= O_TRUNC;
    if (*mode == 'a') flags |= O_APPEND;

    flags |= O_BINARY;

    return flags;
}

static int __fixup_fmode(const char *old_mode, char *mode) {
    int flags = __fmodeflags(old_mode);

    if (flags < 0)
        return -1;

    bool plus = false;
    int ptr = 0;

    if (flags & O_RDWR) {
        plus = true;

        if (flags & O_APPEND)
            mode[ptr] = 'a';
        else if (flags & O_TRUNC)
            mode[ptr] = 'w';
        else if (!(flags & O_CREAT))
            mode[ptr] = 'r';
        else
            return -1;
    } else if (flags & O_WRONLY) {
        if (flags & O_TRUNC)
            mode[ptr] = 'w';
        else if (flags & O_APPEND)
            mode[ptr] = 'a';
        else
            return -1;
    } else  // O_RDONLY
        mode[ptr] = 'r';

    ptr++;

    if (mode[0] != 'r' && !(flags & O_CREAT))
        return -1;

    if (plus) {
        mode[ptr] = '+';
        ptr++;
    }

    mode[ptr] = 'b';
    ptr++;

    // fd already opened, ignore nonsense O_EXCL and O_CLOEXEC

    mode[ptr] = '\0';

    return 0;
}

FILE *__cdecl __real_fdopen(int fd, const char *mode);

FILE *__cdecl __wrap_fdopen(int fd, const char *mode) {
    char new_mode[16];

    if (__fixup_fmode(mode, new_mode) < 0) {
        errno = EINVAL;
        return NULL;
    }

    return __real_fdopen(fd, new_mode);
}

FILE *__cdecl __wrap_fopen(const char *__restrict pathname, const char *__restrict mode) {
    int flags = __fmodeflags(mode);

    if (flags < 0) {
        errno = EINVAL;
        return NULL;
    }

    int fd;

    if (flags & O_CREAT)
        fd = open(pathname, flags, 0666);
    else
        fd = open(pathname, flags);

    if (fd < 0)
        return NULL;

    return fdopen(fd, mode);
}

int __cdecl __wrap_creat(const char *path, int mode) {
    // HACK: for msvcrt behavior on UCRT
    // msvcrt ignores unsupported modes
    // but UCRT will give EINVAL

    int fixed_mode = 0;

    if (mode & (S_IRUSR | S_IRGRP | S_IROTH))
        fixed_mode |= S_IREAD;

    if (mode & (S_IWUSR | S_IWGRP | S_IWOTH))
        fixed_mode |= S_IWRITE;

    return open(path, CREAT_OFLAGS, fixed_mode);
}

// for Rust

FILE *__cdecl __wrap__fdopen(int fd, const char *mode) {
    return fdopen(fd, mode);
}

int __cdecl __wrap__creat(const char *path, int mode) {
    return creat(path, mode);
}

```

`src/libc-compat/winsup/internal/assert.c`:

```c
#include <stdlib.h>

#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include "assert.h"

#ifndef NDEBUG
#  define LOG_TAG             "assert_internal"
#endif

static char __win_strerror_buf[64 * 1024 - 1];

const char *win_strerror(DWORD winerr) {
    if (!FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, NULL,
                       winerr, MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US),
                       __win_strerror_buf, sizeof(__win_strerror_buf), NULL)) {
#ifndef NDEBUG
        LOG_ERR("FormatMessage for WinError %ld failed (WinError %ld)", winerr, GetLastError());
#endif
        return "Unknown error (win_strerror failed)";
    }

    return __win_strerror_buf;
}

```

`src/libc-compat/winsup/internal/assert.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_INTERNAL_ASSERT
#define _MAGISKBOOT_BUILD_WINSUP_INTERNAL_ASSERT

#include <stdio.h>

#ifndef WIN32_LEAN_AND_MEAN
#  define WIN32_LEAN_AND_MEAN
#endif
#include <windows.h>

#define LOG_ERR(_fmt, ...)      \
    fprintf(stderr, "winsup " LOG_TAG ": " _fmt "\n", ##__VA_ARGS__)

const char* win_strerror(DWORD);

#ifdef WIN32_LEAN_AND_MEAN
#  undef WIN32_LEAN_AND_MEAN
#endif

#endif

```

`src/libc-compat/winsup/internal/errno.c`:

```c
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include "winerr_map.h"

#include "errno.h"

#ifndef NDEBUG
#  include "assert.h"

#  define LOG_TAG             "errno_internal"
#endif

void __set_errno_via_winerr(DWORD winerr) {
    if (winerr == NO_ERROR)
        errno = 0;
    else if (winerr < __winerr_map_size) {
        int mapped_err = __winerr_map[winerr];

        if (!mapped_err)
            goto unk_err;

        errno = mapped_err;
    } else {
unk_err:
#ifndef NDEBUG
        LOG_ERR("Unmapped winerr: %s (%ld)", win_strerror(winerr), winerr);
#endif

        errno = -1;
    }

    return;
}

```

`src/libc-compat/winsup/internal/errno.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_INTERNAL_ERRNO
#define _MAGISKBOOT_BUILD_WINSUP_INTERNAL_ERRNO

#ifndef WIN32_LEAN_AND_MEAN
#  define WIN32_LEAN_AND_MEAN
#endif
#include <windows.h>

void __set_errno_via_winerr(DWORD winerr);

#ifdef WIN32_LEAN_AND_MEAN
#  undef WIN32_LEAN_AND_MEAN
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_INTERNAL_ERRNO */

```

`src/libc-compat/winsup/internal/fd.c`:

```c
#include <assert.h>
#include <errno.h>
#include <fcntl.h>
#include <limits.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>

#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <winternl.h>

#include "errno.h"

#include "fd.h"

#ifndef NDEBUG
#  include "assert.h"

#  define LOG_TAG             "fd_internal"
#endif

#ifndef OPEN_MAX
#  ifndef _UCRT
// this value can be found in Windows SDK source
#    define OPEN_MAX            (8192)
#  else
// Origin: https://github.com/reactos/reactos/blob/f889c29af691e0e956c8d3bae08f7b647c9ff643/sdk/lib/crt/stdio/file.c#L111-L112
#    define OPEN_MAX            (2048)
#  endif
#endif

struct fd_cache_entry {
    int oflag;
};

// TODO: not thread-safe, add a lock if needed
// (currently magiskboot is a sinelg-threaded program)
static struct fd_cache_entry fd_cache[OPEN_MAX];

static size_t fd_cache_max_size = 0;

char *__fd_get_path(int fd) {
    HANDLE h = (HANDLE) _get_osfhandle(fd);

    if (h == INVALID_HANDLE_VALUE) {
        SetLastError(ERROR_INVALID_HANDLE);
        return NULL;
    }

    char *buf = malloc(PATH_MAX);

    if (!buf)
        return NULL;

    if (!GetFinalPathNameByHandle(h, buf, PATH_MAX, 0)) {
#ifndef NDEBUG
        LOG_ERR("GetFinalPathNameByHandle failed: %s", win_strerror(GetLastError()));
#endif
        free(buf);

        return NULL;
    }

    size_t buf_len = strlen(buf);
    size_t path_len;

    if (!strncmp(buf, "\\\\?\\UNC\\", 8)) {
        path_len = buf_len - 8;
        memmove(buf + 2, buf + 8, path_len);
        buf[path_len + 2] = '\0';
    } else if (!strncmp(buf, "\\\\?\\", 4)) {
        path_len = buf_len - 4;
        memmove(buf, buf + 4, path_len);
        buf[path_len] = '\0';
    }

    return buf;
}

int __open_dir_fd(const char *path, DWORD access, DWORD share_mode, int flags) {
    HANDLE h;
    int fd;

    if ((h = CreateFile(path, access, share_mode, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, NULL)) == INVALID_HANDLE_VALUE)
        return -1;

    if ((fd = _open_osfhandle((intptr_t) h, flags)) < 0) {
#ifndef NDEBUG
        LOG_ERR("_open_osfhandle failed");
#endif
        SetLastError(ERROR_INVALID_PARAMETER);  // EINVAL

        CloseHandle(h);

        return -1;
    }

    // don't close the original handle, the ownership is transferred to the fd

    return fd;
}

int __open_symlink_fd(const char *path, DWORD access, DWORD share_mode, int flags) {
    HANDLE h;
    int fd;

    if ((h = CreateFile(path, access, share_mode, NULL, OPEN_EXISTING,
            FILE_FLAG_OPEN_REPARSE_POINT | FILE_FLAG_BACKUP_SEMANTICS, NULL)) == INVALID_HANDLE_VALUE)
        return -1;

    if ((fd = _open_osfhandle((intptr_t) h, flags)) < 0) {
#ifndef NDEBUG
        LOG_ERR("_open_osfhandle failed");
#endif
        SetLastError(ERROR_INVALID_PARAMETER);  // EINVAL

        CloseHandle(h);

        return -1;
    }

    // don't close the original handle, the ownership is transferred to the fd

    return fd;
}

bool __is_dirfd(int fd) {
    struct stat buf;

    if (fstat(fd, &buf) < 0)
        goto not;  // errno is set by fstat

    if (S_ISDIR(buf.st_mode))
        return true;

not:
    errno = ENOTDIR;
    return false;
}

char *__get_path_at(int dirfd, const char *name) {
    if (!__is_dirfd(dirfd))
        return NULL;  // errno is set by this call

    char *parent = __fd_get_path(dirfd);

    if (!parent) {
        __set_errno_via_winerr(GetLastError());

        return NULL;
    }

    char *buff = NULL;

    if ((strlen(parent) + 1 + strlen(name)) > PATH_MAX) {
        errno = ENAMETOOLONG;

        goto exit;
    }

    buff = malloc(PATH_MAX + 1);

    if (!buff)
        goto exit;

    snprintf(buff, PATH_MAX + 1, "%s/%s", parent, name);

exit:
    if (parent)
        free(parent);

    return buff;
}

static int __get_osfhandle_oflag_fallback(HANDLE h) {
    OBJECT_BASIC_INFORMATION obi;

    NTSTATUS status = NtQueryObject(h, ObjectBasicInformation, &obi, sizeof(obi), NULL);

    if (!NT_SUCCESS(status)) {
#ifndef NDEBUG
        LOG_ERR("NtQueryObject failed: %s", win_strerror(RtlNtStatusToDosError(status)));
#endif

        return 0;
    }

    // Ref: https://github.com/rust-lang/rust/blob/32f5db98909de7bfb23cad3a48f740b99a19b01c/library/std/src/sys/windows/fs.rs#L245-L248

    if (obi.GrantedAccess & FILE_WRITE_DATA)
        return 0;  // not append mode

    return (obi.GrantedAccess & FILE_APPEND_DATA) ? O_APPEND : 0;
}

int __get_osfhandle_oflag(HANDLE h) {
    int fd;
    int oflag;
    HANDLE other;

    if (h == INVALID_HANDLE_VALUE)
        return 0;

    for (fd = 0; fd < fd_cache_max_size; fd++) {
        if ((oflag = fd_cache[fd].oflag) < 0)
            continue;  // not cached, check next one

        if ((other = (HANDLE) _get_osfhandle(fd)) == INVALID_HANDLE_VALUE) {
            // cache is outdated, fd is already closed

            fd_cache[fd].oflag = -1;

            if (fd == (fd_cache_max_size - 1))
                fd_cache_max_size--;

            continue;
        }

        if (h == other)
            return oflag;
    }

    // not cached, maybe handle opened from Rust with no fd associcated

    return __get_osfhandle_oflag_fallback(h);
}

void __fd_cache_oflag(int fd, int oflag) {
    assert(!(fd < 0));
    assert(fd < OPEN_MAX);

    fd_cache[fd].oflag = oflag & O_APPEND;  // only O_APPEND is useful for opened handle

    if (fd_cache_max_size <= fd)
        fd_cache_max_size = fd + 1;
}

__attribute__((constructor)) static void __init_oflag_cache(void) {
    int fd;

    for (fd = 0; fd < OPEN_MAX; fd++)
        fd_cache[fd].oflag = -1;
}

```

`src/libc-compat/winsup/internal/fd.h`:

```h
#ifndef _MAGISKBOOT_BUILD_WINSUP_INTERNAL_FD
#define _MAGISKBOOT_BUILD_WINSUP_INTERNAL_FD

#include <stdbool.h>
#ifndef WIN32_LEAN_AND_MEAN
#  define WIN32_LEAN_AND_MEAN
#endif
#include <windows.h>

char *__fd_get_path(int fd);

char *__get_path_at(int dirfd, const char *name);

int __open_dir_fd(const char *path, DWORD access, DWORD share_mode, int flags);

bool __is_dirfd(int fd);

int __open_symlink_fd(const char *path, DWORD access, DWORD share_mode, int flags);

int __get_osfhandle_oflag(HANDLE h);

void __fd_cache_oflag(int fd, int oflag);

#ifdef WIN32_LEAN_AND_MEAN
#  undef WIN32_LEAN_AND_MEAN
#endif

#endif /* _MAGISKBOOT_BUILD_WINSUP_INTERNAL_FD */

```

`src/libc-compat/winsup/internal/winerr_map.h`:

```h
// From Cygwin:
//      https://github.com/cygwin/cygwin/blob/3b4f6217c371cf70d5ec5137436cfa5892bb45e8/winsup/cygwin/local_includes/errmap.h

#ifndef _MAGISKBOOT_BUILD_WINSUP_INTERNAL_WINERR_MAP
#define _MAGISKBOOT_BUILD_WINSUP_INTERNAL_WINERR_MAP

#include <errno.h>

/* FIXME: Some of these choices are arbitrary! */
const int __winerr_map[] =
{
  0,			/* ERROR_SUCCESS */
  EINVAL,		/* ERROR_INVALID_FUNCTION */
  ENOENT,		/* ERROR_FILE_NOT_FOUND */
  ENOENT,		/* ERROR_PATH_NOT_FOUND */
  EMFILE,		/* ERROR_TOO_MANY_OPEN_FILES */
  EACCES,		/* ERROR_ACCESS_DENIED */
  EBADF,		/* ERROR_INVALID_HANDLE */
  0,			/* ERROR_ARENA_TRASHED */
  ENOMEM,		/* ERROR_NOT_ENOUGH_MEMORY */
  0,			/* ERROR_INVALID_BLOCK */
  0,			/* ERROR_BAD_ENVIRONMENT */
  0,			/* ERROR_BAD_FORMAT */
  0,			/* ERROR_INVALID_ACCESS */
  EINVAL,		/* ERROR_INVALID_DATA */
  ENOMEM,		/* ERROR_OUTOFMEMORY */
  ENODEV,		/* ERROR_INVALID_DRIVE */
  0,			/* ERROR_CURRENT_DIRECTORY */
  EXDEV,		/* ERROR_NOT_SAME_DEVICE */
  ENOENT,		/* ERROR_NO_MORE_FILES */
  EROFS,		/* ERROR_WRITE_PROTECT */
  ENODEV,		/* ERROR_BAD_UNIT */
  EIO,			/* ERROR_NOT_READY */
  0,			/* ERROR_BAD_COMMAND */
  EIO,			/* ERROR_CRC */
  0,			/* ERROR_BAD_LENGTH */
  EINVAL,		/* ERROR_SEEK */
  0,			/* ERROR_NOT_DOS_DISK */
  EINVAL,		/* ERROR_SECTOR_NOT_FOUND */
  0,			/* ERROR_OUT_OF_PAPER */
  0,			/* ERROR_WRITE_FAULT */
  0,			/* ERROR_READ_FAULT */
  0,			/* ERROR_GEN_FAILURE */
  EBUSY,		/* ERROR_SHARING_VIOLATION */
  EBUSY,		/* ERROR_LOCK_VIOLATION */
  0,			/* ERROR_WRONG_DISK */
  0,			/* 35 */
  ENOLCK,		/* ERROR_SHARING_BUFFER_EXCEEDED */
  0,			/* 37 */
  ENODATA,		/* ERROR_HANDLE_EOF */
  ENOSPC,		/* ERROR_HANDLE_DISK_FULL */
  0,			/* 40 */
  0,			/* 41 */
  0,			/* 42 */
  0,			/* 43 */
  0,			/* 44 */
  0,			/* 45 */
  0,			/* 46 */
  0,			/* 47 */
  0,			/* 48 */
  0,			/* 49 */
  ENOSYS,		/* ERROR_NOT_SUPPORTED */
  EHOSTUNREACH,		/* ERROR_REM_NOT_LIST */
  EADDRINUSE,		/* ERROR_DUP_NAME */
  ENOENT,		/* ERROR_BAD_NETPATH */
  0,			/* ERROR_NETWORK_BUSY */
  ENOENT,		/* ERROR_DEV_NOT_EXIST */
  0,			/* ERROR_TOO_MANY_CMDS */
  0,			/* ERROR_ADAP_HDW_ERR */
  ENOSYS,		/* ERROR_BAD_NET_RESP */
  EIO,			/* ERROR_UNEXP_NET_ERR */
  0,			/* ERROR_BAD_REM_ADAP */
  0,			/* ERROR_PRINTQ_FULL */
  0,			/* ERROR_NO_SPOOL_SPACE */
  0,			/* ERROR_PRINT_CANCELLED */
  ENOENT,		/* ERROR_NETNAME_DELETED */
  0,			/* ERROR_NETWORK_ACCESS_DENIED */
  0,			/* ERROR_BAD_DEV_TYPE */
  ENOENT,		/* ERROR_BAD_NET_NAME */
  0,			/* ERROR_TOO_MANY_NAMES */
  0,			/* ERROR_TOO_MANY_SESS */
  0,			/* ERROR_SHARING_PAUSED */
  0,			/* ERROR_REQ_NOT_ACCEP */
  0,			/* ERROR_REDIR_PAUSED */
  0,			/* 73 */
  0,			/* 74 */
  0,			/* 75 */
  0,			/* 76 */
  0,			/* 77 */
  0,			/* 78 */
  0,			/* 79 */
  EEXIST,		/* ERROR_FILE_EXISTS */
  0,			/* 81 */
  EPERM,		/* ERROR_CANNOT_MAKE */
  0,			/* ERROR_FAIL_I24 */
  0,			/* ERROR_OUT_OF_STRUCTURES */
  0,			/* ERROR_ALREADY_ASSIGNED */
  0,			/* ERROR_INVALID_PASSWORD */
  EINVAL,		/* ERROR_INVALID_PARAMETER */
  0,			/* ERROR_NET_WRITE_FAULT */
  EAGAIN,		/* ERROR_NO_PROC_SLOTS */
  0,			/* 90 */
  0,			/* 91 */
  0,			/* 92 */
  0,			/* 93 */
  0,			/* 94 */
  0,			/* 95 */
  0,			/* 96 */
  0,			/* 97 */
  0,			/* 98 */
  0,			/* 99 */
  0,			/* ERROR_TOO_MANY_SEMAPHORES */
  0,			/* ERROR_EXCL_SEM_ALREADY_OWNED */
  0,			/* ERROR_SEM_IS_SET */
  0,			/* ERROR_TOO_MANY_SEM_REQUESTS */
  EINTR,		/* ERROR_INVALID_AT_INTERRUPT_TIME */
  0,			/* ERROR_SEM_OWNER_DIED */
  0,			/* ERROR_SEM_USER_LIMIT */
  0,			/* ERROR_DISK_CHANGE */
  0,			/* ERROR_DRIVE_LOCKED */
  EPIPE,		/* ERROR_BROKEN_PIPE */
  EIO,			/* ERROR_OPEN_FAILED */
  0,			/* ERROR_BUFFER_OVERFLOW */
  ENOSPC,		/* ERROR_DISK_FULL */
  ENFILE,		/* ERROR_NO_MORE_SEARCH_HANDLES */
  0,			/* ERROR_INVALID_TARGET_HANDLE */
  0,			/* 115 */
  0,			/* 116 */
  0,			/* ERROR_INVALID_CATEGORY */
  0,			/* ERROR_INVALID_VERIFY_SWITCH */
  0,			/* ERROR_BAD_DRIVER_LEVEL */
  ENOSYS,		/* ERROR_CALL_NOT_IMPLEMENTED */
  0,			/* ERROR_SEM_TIMEOUT */
  0,			/* ERROR_INSUFFICIENT_BUFFER */
  ENOENT,		/* ERROR_INVALID_NAME */
  0,			/* ERROR_INVALID_LEVEL */
  0,			/* ERROR_NO_VOLUME_LABEL */
  ENOENT,		/* ERROR_MOD_NOT_FOUND */
  ESRCH,		/* ERROR_PROC_NOT_FOUND */
  ECHILD,		/* ERROR_WAIT_NO_CHILDREN */
  EBUSY,		/* ERROR_CHILD_NOT_COMPLETE */
  0,			/* ERROR_DIRECT_ACCESS_HANDLE */
  EINVAL,		/* ERROR_NEGATIVE_SEEK */
  0,			/* ERROR_SEEK_ON_DEVICE */
  0,			/* ERROR_IS_JOIN_TARGET */
  0,			/* ERROR_IS_JOINED */
  0,			/* ERROR_IS_SUBSTED */
  0,			/* ERROR_NOT_JOINED */
  0,			/* ERROR_NOT_SUBSTED */
  0,			/* ERROR_JOIN_TO_JOIN */
  0,			/* ERROR_SUBST_TO_SUBST */
  0,			/* ERROR_JOIN_TO_SUBST */
  0,			/* ERROR_SUBST_TO_JOIN */
  0,			/* ERROR_BUSY_DRIVE */
  0,			/* ERROR_SAME_DRIVE */
  0,			/* ERROR_DIR_NOT_ROOT */
  ENOTEMPTY,		/* ERROR_DIR_NOT_EMPTY */
  0,			/* ERROR_IS_SUBST_PATH */
  0,			/* ERROR_IS_JOIN_PATH */
  0,			/* ERROR_PATH_BUSY */
  0,			/* ERROR_IS_SUBST_TARGET */
  0,			/* ERROR_SYSTEM_TRACE */
  0,			/* ERROR_INVALID_EVENT_COUNT */
  0,			/* ERROR_TOO_MANY_MUXWAITERS */
  0,			/* ERROR_INVALID_LIST_FORMAT */
  0,			/* ERROR_LABEL_TOO_LONG */
  0,			/* ERROR_TOO_MANY_TCBS */
  EIO,			/* ERROR_SIGNAL_REFUSED */
  0,			/* ERROR_DISCARDED */
  0,			/* ERROR_NOT_LOCKED */
  0,			/* ERROR_BAD_THREADID_ADDR */
  0,			/* ERROR_BAD_ARGUMENTS */
  ENOENT,		/* ERROR_BAD_PATHNAME */
  EBUSY,		/* ERROR_SIGNAL_PENDING */
  0,			/* 163 */
  EAGAIN,		/* ERROR_MAX_THRDS_REACHED */
  0,			/* 165 */
  0,			/* 166 */
  0,			/* ERROR_LOCK_FAILED */
  0,			/* 168 */
  0,			/* 169 */
  EBUSY,		/* ERROR_BUSY */
  0,			/* 171 */
  0,			/* 172 */
  0,			/* ERROR_CANCEL_VIOLATION */
  0,			/* ERROR_ATOMIC_LOCKS_NOT_SUPPORTED */
  0,			/* 175 */
  0,			/* 176 */
  0,			/* 177 */
  0,			/* 178 */
  0,			/* 179 */
  0,			/* ERROR_INVALID_SEGMENT_NUMBER */
  0,			/* 181 */
  0,			/* ERROR_INVALID_ORDINAL */
  EEXIST,		/* ERROR_ALREADY_EXISTS */
  0,			/* 184 */
  0,			/* 185 */
  0,			/* ERROR_INVALID_FLAG_NUMBER */
  0,			/* ERROR_SEM_NOT_FOUND */
  0,			/* ERROR_INVALID_STARTING_CODESEG */
  0,			/* ERROR_INVALID_STACKSEG */
  0,			/* ERROR_INVALID_MODULETYPE */
  ENOEXEC,		/* ERROR_INVALID_EXE_SIGNATURE */
  ENOEXEC,		/* ERROR_EXE_MARKED_INVALID */
  ENOEXEC,		/* ERROR_BAD_EXE_FORMAT */
  0,			/* ERROR_ITERATED_DATA_EXCEEDS_64k */
  0,			/* ERROR_INVALID_MINALLOCSIZE */
  0,			/* ERROR_DYNLINK_FROM_INVALID_RING */
  ENOEXEC,		/* ERROR_IOPL_NOT_ENABLED */
  0,			/* ERROR_INVALID_SEGDPL */
  0,			/* ERROR_AUTODATASEG_EXCEEDS_64k */
  0,			/* ERROR_RING2SEG_MUST_BE_MOVABLE */
  0,			/* ERROR_RELOC_CHAIN_XEEDS_SEGLIM */
  0,			/* ERROR_INFLOOP_IN_RELOC_CHAIN */
  0,			/* ERROR_ENVVAR_NOT_FOUND */
  0,			/* 204 */
  EIO,			/* ERROR_NO_SIGNAL_SENT */
  ENAMETOOLONG,		/* ERROR_FILENAME_EXCED_RANGE */
  0,			/* ERROR_RING2_STACK_IN_USE */
  EINVAL,		/* ERROR_META_EXPANSION_TOO_LONG */
  EINVAL,		/* ERROR_INVALID_SIGNAL_NUMBER */
  EINVAL,		/* ERROR_THREAD_1_INACTIVE */
  0,			/* 211 */
  0,			/* ERROR_LOCKED */
  0,			/* 213 */
  0,			/* ERROR_TOO_MANY_MODULES */
  0,			/* ERROR_NESTING_NOT_ALLOWED */
  ENOEXEC,		/* ERROR_EXE_MACHINE_TYPE_MISMATCH */
  0,			/* ERROR_EXE_CANNOT_MODIFY_SIGNED_BINARY */
  0,			/* ERROR_EXE_CANNOT_MODIFY_STRONG_SIGNED_BINARY */
  0,			/* 219 */
  0,			/* ERROR_FILE_CHECKED_OUT */
  0,			/* ERROR_CHECKOUT_REQUIRED */
  0,			/* ERROR_BAD_FILE_TYPE */
  0,			/* ERROR_FILE_TOO_LARGE */
  0,			/* ERROR_FORMS_AUTH_REQUIRED */
  0,			/* 225 */
  0,			/* 226 */
  0,			/* 227 */
  0,			/* 228 */
  0,			/* ERROR_PIPE_LOCAL */
  EINVAL,		/* ERROR_BAD_PIPE */
  EBUSY,		/* ERROR_PIPE_BUSY */
  EPIPE,		/* ERROR_NO_DATA */
  EPIPE,		/* ERROR_PIPE_NOT_CONNECTED */
  EMSGSIZE,		/* ERROR_MORE_DATA */
  0,			/* 235 */
  0,			/* 236 */
  0,			/* 237 */
  0,			/* 238 */
  0,			/* 239 */
  0,			/* ERROR_VC_DISCONNECTED */
  0,			/* 241 */
  0,			/* 242 */
  0,			/* 243 */
  0,			/* 244 */
  0,			/* 245 */
  0,			/* 246 */
  0,			/* 247 */
  0,			/* 248 */
  0,			/* 249 */
  0,			/* 250 */
  0,			/* 251 */
  0,			/* 252 */
  0,			/* 253 */
  EINVAL,		/* ERROR_INVALID_EA_NAME */
  EINVAL,		/* ERROR_EA_LIST_INCONSISTENT */
  0,			/* 256 */
  0,			/* 257 */
  0,			/* 258 */
  ENOENT,		/* ERROR_NO_MORE_ITEMS */
  0,			/* 260 */
  0,			/* 261 */
  0,			/* 262 */
  0,			/* 263 */
  0,			/* 264 */
  0,			/* 265 */
  0,			/* ERROR_CANNOT_COPY */
  ENOTDIR,		/* ERROR_DIRECTORY */
  0,			/* 268 */
  0,			/* 269 */
  0,			/* 270 */
  0,			/* 271 */
  0,			/* 272 */
  0,			/* 273 */
  0,			/* 274 */
  ENOSPC,		/* ERROR_EAS_DIDNT_FIT */
  0,			/* ERROR_EA_FILE_CORRUPT */
  ENOSPC,		/* ERROR_EA_TABLE_FULL */
  0,			/* ERROR_INVALID_EA_HANDLE */
  0,			/* 279 */
  0,			/* 280 */
  0,			/* 281 */
  ENOTSUP,		/* ERROR_EAS_NOT_SUPPORTED */
  0,			/* 283 */
  0,			/* 284 */
  0,			/* 285 */
  0,			/* 286 */
  0,			/* 287 */
  EPERM,		/* ERROR_NOT_OWNER */
  0,			/* 289 */
  0,			/* 290 */
  0,			/* 291 */
  0,			/* 292 */
  0,			/* 293 */
  0,			/* 294 */
  0,			/* 295 */
  0,			/* 296 */
  0,			/* 297 */
  0,			/* ERROR_TOO_MANY_POSTS */
  0,			/* ERROR_PARTIAL_COPY */
  0,			/* ERROR_OPLOCK_NOT_GRANTED */
  0,			/* ERROR_INVALID_OPLOCK_PROTOCOL */
  0,			/* ERROR_DISK_TOO_FRAGMENTED */
  0,			/* ERROR_DELETE_PENDING */
  0,			/* 304 */
  0,			/* 305 */
  0,			/* 306 */
  0,			/* 307 */
  0,			/* 308 */
  0,			/* 309 */
  0,			/* 310 */
  0,			/* 311 */
  0,			/* 312 */
  0,			/* 313 */
  0,			/* 314 */
  0,			/* ERROR_INVALID_TOKEN */
  0,			/* 316 */
  0,			/* ERROR_MR_MID_NOT_FOUND */
  0,			/* ERROR_SCOPE_NOT_FOUND */
  0,			/* 319 */
  0,			/* 320 */
  0,			/* 321 */
  0,			/* 322 */
  0,			/* 323 */
  0,			/* 324 */
  0,			/* 325 */
  0,			/* 326 */
  0,			/* 327 */
  0,			/* 328 */
  0,			/* 329 */
  0,			/* 330 */
  0,			/* 331 */
  0,			/* 332 */
  0,			/* 333 */
  0,			/* 334 */
  0,			/* 335 */
  0,			/* 336 */
  0,			/* 337 */
  0,			/* 338 */
  0,			/* 339 */
  0,			/* 340 */
  0,			/* 341 */
  0,			/* ERROR_OBJECT_NOT_EXTERNALLY_BACKED */
  0,			/* ERROR_EXTERNAL_BACKING_PROVIDER_UNKNOWN */
  0,			/* ERROR_COMPRESSION_NOT_BENEFICIAL */
  0,			/* 345 */
  0,			/* 346 */
  0,			/* 347 */
  0,			/* 348 */
  0,			/* 349 */
  0,			/* 350 */
  0,			/* 351 */
  0,			/* 352 */
  0,			/* 353 */
  0,			/* 354 */
  0,			/* 355 */
  0,			/* 356 */
  0,			/* 357 */
  0,			/* 358 */
  0,			/* 359 */
  0,			/* 360 */
  0,			/* 361 */
  0,			/* 362 */
  0,			/* 363 */
  0,			/* 364 */
  0,			/* 365 */
  0,			/* 366 */
  0,			/* 367 */
  0,			/* 368 */
  0,			/* 369 */
  0,			/* 370 */
  0,			/* 371 */
  0,			/* 372 */
  0,			/* 373 */
  0,			/* 374 */
  0,			/* 375 */
  0,			/* 376 */
  0,			/* 377 */
  0,			/* 378 */
  0,			/* 379 */
  0,			/* 380 */
  0,			/* 381 */
  0,			/* 382 */
  0,			/* 383 */
  0,			/* 384 */
  0,			/* 385 */
  0,			/* 386 */
  0,			/* 387 */
  0,			/* 388 */
  0,			/* 389 */
  0,			/* 390 */
  0,			/* 391 */
  0,			/* 392 */
  0,			/* 393 */
  0,			/* 394 */
  0,			/* 395 */
  0,			/* 396 */
  0,			/* 397 */
  0,			/* 398 */
  0,			/* 399 */
  0,			/* 400 */
  0,			/* 401 */
  0,			/* 402 */
  0,			/* 403 */
  0,			/* 404 */
  0,			/* 405 */
  0,			/* 406 */
  0,			/* 407 */
  0,			/* 408 */
  0,			/* 409 */
  0,			/* 410 */
  0,			/* 411 */
  0,			/* 412 */
  0,			/* 413 */
  0,			/* 414 */
  0,			/* 415 */
  0,			/* 416 */
  0,			/* 417 */
  0,			/* 418 */
  0,			/* 419 */
  0,			/* 420 */
  0,			/* 421 */
  0,			/* 422 */
  0,			/* 423 */
  EINVAL,		/* ERROR_CASE_DIFFERING_NAMES_IN_DIR */
  0,			/* 425 */
  0,			/* 426 */
  0,			/* 427 */
  0,			/* 428 */
  0,			/* 429 */
  0,			/* 430 */
  0,			/* 431 */
  0,			/* 432 */
  0,			/* 433 */
  0,			/* 434 */
  0,			/* 435 */
  0,			/* 436 */
  0,			/* 437 */
  0,			/* 438 */
  0,			/* 439 */
  0,			/* 440 */
  0,			/* 441 */
  0,			/* 442 */
  0,			/* 443 */
  0,			/* 444 */
  0,			/* 445 */
  0,			/* 446 */
  0,			/* 447 */
  0,			/* 448 */
  0,			/* 449 */
  0,			/* 450 */
  0,			/* 451 */
  0,			/* 452 */
  0,			/* 453 */
  0,			/* 454 */
  0,			/* 455 */
  0,			/* 456 */
  0,			/* 457 */
  0,			/* 458 */
  0,			/* 459 */
  0,			/* 460 */
  0,			/* 461 */
  0,			/* 462 */
  0,			/* 463 */
  0,			/* 464 */
  0,			/* 465 */
  0,			/* 466 */
  0,			/* 467 */
  0,			/* 468 */
  0,			/* 469 */
  0,			/* 470 */
  0,			/* 471 */
  0,			/* 472 */
  0,			/* 473 */
  0,			/* 474 */
  0,			/* 475 */
  0,			/* 476 */
  0,			/* 477 */
  0,			/* 478 */
  0,			/* 479 */
  0,			/* 480 */
  0,			/* 481 */
  0,			/* 482 */
  0,			/* 483 */
  0,			/* 484 */
  0,			/* 485 */
  0,			/* 486 */
  EINVAL,		/* ERROR_INVALID_ADDRESS */
  0,			/* 488 */
  0,			/* 489 */
  0,			/* 490 */
  0,			/* 491 */
  0,			/* 492 */
  0,			/* 493 */
  0,			/* 494 */
  0,			/* 495 */
  0,			/* 496 */
  0,			/* 497 */
  0,			/* 498 */
  0,			/* 499 */
  0,			/* 500 */
  0,			/* 501 */
  0,			/* 502 */
  0,			/* 503 */
  0,			/* 504 */
  0,			/* 505 */
  0,			/* 506 */
  0,			/* 507 */
  0,			/* 508 */
  0,			/* 509 */
  0,			/* 510 */
  0,			/* 511 */
  0,			/* 512 */
  0,			/* 513 */
  0,			/* 514 */
  0,			/* 515 */
  0,			/* 516 */
  0,			/* 517 */
  0,			/* 518 */
  0,			/* 519 */
  0,			/* 520 */
  0,			/* 521 */
  0,			/* 522 */
  0,			/* 523 */
  0,			/* 524 */
  0,			/* 525 */
  0,			/* 526 */
  0,			/* 527 */
  0,			/* 528 */
  0,			/* 529 */
  0,			/* 530 */
  0,			/* 531 */
  0,			/* 532 */
  0,			/* 533 */
  0,			/* ERROR_ARITHMETIC_OVERFLOW */
  EBUSY,		/* ERROR_PIPE_CONNECTED */
  EPIPE,		/* ERROR_PIPE_LISTENING */
  0,			/* 537 */
  0,			/* 538 */
  0,			/* 539 */
  0,			/* 540 */
  0,			/* 541 */
  0,			/* 542 */
  0,			/* 543 */
  0,			/* 544 */
  0,			/* 545 */
  0,			/* 546 */
  0,			/* 547 */
  0,			/* 548 */
  0,			/* 549 */
  0,			/* 550 */
  0,			/* 551 */
  0,			/* 552 */
  0,			/* 553 */
  0,			/* 554 */
  0,			/* 555 */
  0,			/* 556 */
  0,			/* 557 */
  0,			/* 558 */
  0,			/* 559 */
  0,			/* 560 */
  0,			/* 561 */
  0,			/* 562 */
  0,			/* 563 */
  0,			/* 564 */
  0,			/* 565 */
  0,			/* 566 */
  0,			/* 567 */
  0,			/* 568 */
  0,			/* 569 */
  0,			/* 570 */
  0,			/* 571 */
  0,			/* 572 */
  0,			/* 573 */
  0,			/* 574 */
  0,			/* 575 */
  0,			/* 576 */
  0,			/* 577 */
  0,			/* 578 */
  0,			/* 579 */
  0,			/* 580 */
  0,			/* 581 */
  0,			/* 582 */
  0,			/* 583 */
  0,			/* 584 */
  0,			/* 585 */
  0,			/* 586 */
  0,			/* 587 */
  0,			/* 588 */
  0,			/* 589 */
  0,			/* 590 */
  0,			/* 591 */
  0,			/* 592 */
  0,			/* 593 */
  0,			/* 594 */
  0,			/* 595 */
  0,			/* 596 */
  0,			/* 597 */
  0,			/* 598 */
  0,			/* 599 */
  0,			/* 600 */
  0,			/* 601 */
  0,			/* 602 */
  0,			/* 603 */
  0,			/* 604 */
  0,			/* 605 */
  0,			/* 606 */
  0,			/* 607 */
  0,			/* 608 */
  0,			/* 609 */
  0,			/* 610 */
  0,			/* 611 */
  0,			/* 612 */
  0,			/* 613 */
  0,			/* 614 */
  0,			/* 615 */
  0,			/* 616 */
  0,			/* 617 */
  0,			/* 618 */
  0,			/* 619 */
  0,			/* 620 */
  0,			/* 621 */
  0,			/* 622 */
  0,			/* 623 */
  0,			/* 624 */
  0,			/* 625 */
  0,			/* 626 */
  0,			/* 627 */
  0,			/* 628 */
  0,			/* 629 */
  0,			/* 630 */
  0,			/* 631 */
  0,			/* 632 */
  0,			/* 633 */
  0,			/* 634 */
  0,			/* ERROR_COMMITMENT_MINIMUM */
  0,			/* 636 */
  0,			/* 637 */
  0,			/* 638 */
  0,			/* 639 */
  0,			/* 640 */
  0,			/* 641 */
  0,			/* 642 */
  0,			/* 643 */
  0,			/* 644 */
  0,			/* 645 */
  0,			/* 646 */
  0,			/* 647 */
  0,			/* 648 */
  0,			/* 649 */
  0,			/* 650 */
  0,			/* 651 */
  0,			/* 652 */
  0,			/* 653 */
  0,			/* 654 */
  0,			/* 655 */
  0,			/* 656 */
  0,			/* 657 */
  0,			/* 658 */
  0,			/* 659 */
  0,			/* 660 */
  0,			/* 661 */
  0,			/* 662 */
  0,			/* 663 */
  0,			/* 664 */
  0,			/* 665 */
  0,			/* 666 */
  0,			/* 667 */
  0,			/* 668 */
  0,			/* 669 */
  0,			/* 670 */
  0,			/* 671 */
  0,			/* 672 */
  0,			/* 673 */
  0,			/* 674 */
  0,			/* 675 */
  0,			/* 676 */
  0,			/* 677 */
  0,			/* 678 */
  0,			/* 679 */
  0,			/* 680 */
  0,			/* 681 */
  0,			/* 682 */
  0,			/* 683 */
  0,			/* 684 */
  0,			/* 685 */
  0,			/* 686 */
  0,			/* 687 */
  0,			/* 688 */
  0,			/* 689 */
  0,			/* 690 */
  0,			/* 691 */
  0,			/* 692 */
  0,			/* 693 */
  0,			/* 694 */
  0,			/* 695 */
  0,			/* 696 */
  0,			/* 697 */
  0,			/* 698 */
  0,			/* 699 */
  0,			/* 700 */
  0,			/* 701 */
  0,			/* 702 */
  0,			/* 703 */
  0,			/* 704 */
  0,			/* 705 */
  0,			/* 706 */
  0,			/* 707 */
  0,			/* 708 */
  0,			/* 709 */
  0,			/* 710 */
  0,			/* 711 */
  0,			/* 712 */
  0,			/* 713 */
  0,			/* 714 */
  0,			/* 715 */
  0,			/* 716 */
  0,			/* 717 */
  0,			/* 718 */
  0,			/* 719 */
  0,			/* 720 */
  0,			/* 721 */
  0,			/* 722 */
  0,			/* 723 */
  0,			/* 724 */
  0,			/* 725 */
  0,			/* 726 */
  0,			/* 727 */
  0,			/* 728 */
  0,			/* 729 */
  0,			/* ERROR_WAKE_SYSTEM */
  0,			/* ERROR_WAIT_1 */
  0,			/* ERROR_WAIT_2 */
  0,			/* ERROR_WAIT_3 */
  0,			/* ERROR_WAIT_63 */
  0,			/* ERROR_ABANDONED_WAIT_0 */
  0,			/* ERROR_ABANDONED_WAIT_63 */
  0,			/* ERROR_USER_APC */
  0,			/* ERROR_KERNEL_APC */
  0,			/* ERROR_ALERTED */
  0,			/* 740 */
  0,			/* 741 */
  0,			/* 742 */
  0,			/* 743 */
  0,			/* 744 */
  0,			/* 745 */
  0,			/* 746 */
  0,			/* 747 */
  0,			/* 748 */
  0,			/* 749 */
  0,			/* 750 */
  0,			/* 751 */
  0,			/* 752 */
  0,			/* 753 */
  0,			/* 754 */
  0,			/* 755 */
  0,			/* 756 */
  0,			/* 757 */
  0,			/* 758 */
  0,			/* 759 */
  0,			/* 760 */
  0,			/* 761 */
  0,			/* 762 */
  0,			/* 763 */
  0,			/* 764 */
  0,			/* 765 */
  0,			/* 766 */
  0,			/* 767 */
  0,			/* 768 */
  0,			/* 769 */
  0,			/* 770 */
  0,			/* 771 */
  0,			/* 772 */
  0,			/* 773 */
  0,			/* 774 */
  0,			/* 775 */
  0,			/* 776 */
  0,			/* 777 */
  0,			/* 778 */
  0,			/* 779 */
  0,			/* 780 */
  0,			/* 781 */
  0,			/* 782 */
  0,			/* 783 */
  0,			/* 784 */
  0,			/* 785 */
  0,			/* 786 */
  0,			/* 787 */
  0,			/* 788 */
  0,			/* 789 */
  0,			/* 790 */
  0,			/* 791 */
  0,			/* 792 */
  0,			/* 793 */
  0,			/* 794 */
  0,			/* 795 */
  0,			/* 796 */
  0,			/* 797 */
  0,			/* 798 */
  0,			/* 799 */
  0,			/* 800 */
  0,			/* 801 */
  0,			/* 802 */
  0,			/* 803 */
  0,			/* 804 */
  0,			/* 805 */
  0,			/* 806 */
  0,			/* 807 */
  0,			/* 808 */
  0,			/* 809 */
  0,			/* 810 */
  0,			/* 811 */
  0,			/* 812 */
  0,			/* 813 */
  0,			/* 814 */
  0,			/* 815 */
  0,			/* 816 */
  0,			/* 817 */
  0,			/* 818 */
  0,			/* 819 */
  0,			/* 820 */
  0,			/* 821 */
  0,			/* 822 */
  0,			/* 823 */
  0,			/* 824 */
  0,			/* 825 */
  0,			/* 826 */
  0,			/* 827 */
  0,			/* 828 */
  0,			/* 829 */
  0,			/* 830 */
  0,			/* 831 */
  0,			/* 832 */
  0,			/* 833 */
  0,			/* 834 */
  0,			/* 835 */
  0,			/* 836 */
  0,			/* 837 */
  0,			/* 838 */
  0,			/* 839 */
  0,			/* 840 */
  0,			/* 841 */
  0,			/* 842 */
  0,			/* 843 */
  0,			/* 844 */
  0,			/* 845 */
  0,			/* 846 */
  0,			/* 847 */
  0,			/* 848 */
  0,			/* 849 */
  0,			/* 850 */
  0,			/* 851 */
  0,			/* 852 */
  0,			/* 853 */
  0,			/* 854 */
  0,			/* 855 */
  0,			/* 856 */
  0,			/* 857 */
  0,			/* 858 */
  0,			/* 859 */
  0,			/* 860 */
  0,			/* 861 */
  0,			/* 862 */
  0,			/* 863 */
  0,			/* 864 */
  0,			/* 865 */
  0,			/* 866 */
  0,			/* 867 */
  0,			/* 868 */
  0,			/* 869 */
  0,			/* 870 */
  0,			/* 871 */
  0,			/* 872 */
  0,			/* 873 */
  0,			/* 874 */
  0,			/* 875 */
  0,			/* 876 */
  0,			/* 877 */
  0,			/* 878 */
  0,			/* 879 */
  0,			/* 880 */
  0,			/* 881 */
  0,			/* 882 */
  0,			/* 883 */
  0,			/* 884 */
  0,			/* 885 */
  0,			/* 886 */
  0,			/* 887 */
  0,			/* 888 */
  0,			/* 889 */
  0,			/* 890 */
  0,			/* 891 */
  0,			/* 892 */
  0,			/* 893 */
  0,			/* 894 */
  0,			/* 895 */
  0,			/* 896 */
  0,			/* 897 */
  0,			/* 898 */
  0,			/* 899 */
  0,			/* 900 */
  0,			/* 901 */
  0,			/* 902 */
  0,			/* 903 */
  0,			/* 904 */
  0,			/* 905 */
  0,			/* 906 */
  0,			/* 907 */
  0,			/* 908 */
  0,			/* 909 */
  0,			/* 910 */
  0,			/* 911 */
  0,			/* 912 */
  0,			/* 913 */
  0,			/* 914 */
  0,			/* 915 */
  0,			/* 916 */
  0,			/* 917 */
  0,			/* 918 */
  0,			/* 919 */
  0,			/* 920 */
  0,			/* 921 */
  0,			/* 922 */
  0,			/* 923 */
  0,			/* 924 */
  0,			/* 925 */
  0,			/* 926 */
  0,			/* 927 */
  0,			/* 928 */
  0,			/* 929 */
  0,			/* 930 */
  0,			/* 931 */
  0,			/* 932 */
  0,			/* 933 */
  0,			/* 934 */
  0,			/* 935 */
  0,			/* 936 */
  0,			/* 937 */
  0,			/* 938 */
  0,			/* 939 */
  0,			/* 940 */
  0,			/* 941 */
  0,			/* 942 */
  0,			/* 943 */
  0,			/* 944 */
  0,			/* 945 */
  0,			/* 946 */
  0,			/* 947 */
  0,			/* 948 */
  0,			/* 949 */
  0,			/* 950 */
  0,			/* 951 */
  0,			/* 952 */
  0,			/* 953 */
  0,			/* 954 */
  0,			/* 955 */
  0,			/* 956 */
  0,			/* 957 */
  0,			/* 958 */
  0,			/* 959 */
  0,			/* 960 */
  0,			/* 961 */
  0,			/* 962 */
  0,			/* 963 */
  0,			/* 964 */
  0,			/* 965 */
  0,			/* 966 */
  0,			/* 967 */
  0,			/* 968 */
  0,			/* 969 */
  0,			/* 970 */
  0,			/* 971 */
  0,			/* 972 */
  0,			/* 973 */
  0,			/* 974 */
  0,			/* 975 */
  0,			/* 976 */
  0,			/* 977 */
  0,			/* 978 */
  0,			/* 979 */
  0,			/* 980 */
  0,			/* 981 */
  0,			/* 982 */
  0,			/* 983 */
  0,			/* 984 */
  0,			/* 985 */
  0,			/* 986 */
  0,			/* 987 */
  0,			/* 988 */
  0,			/* 989 */
  0,			/* 990 */
  0,			/* 991 */
  0,			/* 992 */
  0,			/* 993 */
  0,			/* ERROR_EA_ACCESS_DENIED */
  0,			/* ERROR_OPERATION_ABORTED */
  EAGAIN,		/* ERROR_IO_INCOMPLETE */
  EAGAIN,		/* ERROR_IO_PENDING */
  EFAULT,		/* ERROR_NOACCESS */
  0,			/* ERROR_SWAPERROR */
  0,			/* 1000 */
  0,			/* ERROR_STACK_OVERFLOW */
  0,			/* ERROR_INVALID_MESSAGE */
  0,			/* ERROR_CAN_NOT_COMPLETE */
  0,			/* ERROR_INVALID_FLAGS */
  0,			/* ERROR_UNRECOGNIZED_VOLUME */
  ENXIO,		/* ERROR_FILE_INVALID */
  0,			/* ERROR_FULLSCREEN_MODE */
  EINVAL,		/* ERROR_NO_TOKEN */
  0,			/* ERROR_BADDB */
  0,			/* ERROR_BADKEY */
  0,			/* ERROR_CANTOPEN */
  0,			/* ERROR_CANTREAD */
  0,			/* ERROR_CANTWRITE */
  0,			/* ERROR_REGISTRY_RECOVERED */
  0,			/* ERROR_REGISTRY_CORRUPT */
  0,			/* ERROR_REGISTRY_IO_FAILED */
  0,			/* ERROR_NOT_REGISTRY_FILE */
  0,			/* ERROR_KEY_DELETED */
  0,			/* ERROR_NO_LOG_SPACE */
  0,			/* ERROR_KEY_HAS_CHILDREN */
  0,			/* ERROR_CHILD_MUST_BE_VOLATILE */
  0,			/* ERROR_NOTIFY_ENUM_DIR */
  0,			/* 1023 */
  0,			/* 1024 */
  0,			/* 1025 */
  0,			/* 1026 */
  0,			/* 1027 */
  0,			/* 1028 */
  0,			/* 1029 */
  0,			/* 1030 */
  0,			/* 1031 */
  0,			/* 1032 */
  0,			/* 1033 */
  0,			/* 1034 */
  0,			/* 1035 */
  0,			/* 1036 */
  0,			/* 1037 */
  0,			/* 1038 */
  0,			/* 1039 */
  0,			/* 1040 */
  0,			/* 1041 */
  0,			/* 1042 */
  0,			/* 1043 */
  0,			/* 1044 */
  0,			/* 1045 */
  0,			/* 1046 */
  0,			/* 1047 */
  0,			/* 1048 */
  0,			/* 1049 */
  0,			/* 1050 */
  0,			/* ERROR_DEPENDENT_SERVICES_RUNNING */
  0,			/* ERROR_INVALID_SERVICE_CONTROL */
  EBUSY,		/* ERROR_SERVICE_REQUEST_TIMEOUT */
  0,			/* ERROR_SERVICE_NO_THREAD */
  0,			/* ERROR_SERVICE_DATABASE_LOCKED */
  0,			/* ERROR_SERVICE_ALREADY_RUNNING */
  0,			/* ERROR_INVALID_SERVICE_ACCOUNT */
  0,			/* ERROR_SERVICE_DISABLED */
  0,			/* ERROR_CIRCULAR_DEPENDENCY */
  0,			/* ERROR_SERVICE_DOES_NOT_EXIST */
  0,			/* ERROR_SERVICE_CANNOT_ACCEPT_CTRL */
  0,			/* ERROR_SERVICE_NOT_ACTIVE */
  0,			/* ERROR_FAILED_SERVICE_CONTROLLER_CONNECT */
  0,			/* ERROR_EXCEPTION_IN_SERVICE */
  0,			/* ERROR_DATABASE_DOES_NOT_EXIST */
  0,			/* ERROR_SERVICE_SPECIFIC_ERROR */
  EFAULT,		/* ERROR_PROCESS_ABORTED */
  0,			/* ERROR_SERVICE_DEPENDENCY_FAIL */
  0,			/* ERROR_SERVICE_LOGON_FAILED */
  0,			/* ERROR_SERVICE_START_HANG */
  0,			/* ERROR_INVALID_SERVICE_LOCK */
  0,			/* ERROR_SERVICE_MARKED_FOR_DELETE */
  0,			/* ERROR_SERVICE_EXISTS */
  0,			/* ERROR_ALREADY_RUNNING_LKG */
  0,			/* ERROR_SERVICE_DEPENDENCY_DELETED */
  0,			/* ERROR_BOOT_ALREADY_ACCEPTED */
  0,			/* ERROR_SERVICE_NEVER_STARTED */
  0,			/* ERROR_DUPLICATE_SERVICE_NAME */
  0,			/* ERROR_DIFFERENT_SERVICE_ACCOUNT */
  0,			/* ERROR_CANNOT_DETECT_DRIVER_FAILURE */
  0,			/* ERROR_CANNOT_DETECT_PROCESS_ABORT */
  0,			/* ERROR_NO_RECOVERY_PROGRAM */
  0,			/* ERROR_SERVICE_NOT_IN_EXE */
  0,			/* ERROR_NOT_SAFEBOOT_SERVICE */
  0,			/* 1085 */
  0,			/* 1086 */
  0,			/* 1087 */
  0,			/* 1088 */
  0,			/* 1089 */
  0,			/* 1090 */
  0,			/* 1091 */
  0,			/* 1092 */
  0,			/* 1093 */
  0,			/* 1094 */
  0,			/* 1095 */
  0,			/* 1096 */
  0,			/* 1097 */
  0,			/* 1098 */
  0,			/* 1099 */
  ENOSPC,		/* ERROR_END_OF_MEDIA */
  EIO,			/* ERROR_FILEMARK_DETECTED */
  EIO,			/* ERROR_BEGINNING_OF_MEDIA */
  EIO,			/* ERROR_SETMARK_DETECTED */
  EIO,			/* ERROR_NO_DATA_DETECTED */
  0,			/* ERROR_PARTITION_FAILURE */
  EIO,			/* ERROR_INVALID_BLOCK_LENGTH */
  0,			/* ERROR_DEVICE_NOT_PARTITIONED */
  0,			/* ERROR_UNABLE_TO_LOCK_MEDIA */
  0,			/* ERROR_UNABLE_TO_UNLOAD_MEDIA */
  0,			/* ERROR_MEDIA_CHANGED */
  EIO,			/* ERROR_BUS_RESET */
  EIO,		/* ERROR_NO_MEDIA_IN_DRIVE */
  0,			/* ERROR_NO_UNICODE_TRANSLATION */
  0,			/* ERROR_DLL_INIT_FAILED */
  0,			/* ERROR_SHUTDOWN_IN_PROGRESS */
  0,			/* ERROR_NO_SHUTDOWN_IN_PROGRESS */
  EIO,			/* ERROR_IO_DEVICE */
  0,			/* ERROR_SERIAL_NO_DEVICE */
  0,			/* ERROR_IRQ_BUSY */
  0,			/* ERROR_MORE_WRITES */
  0,			/* ERROR_COUNTER_TIMEOUT */
  0,			/* ERROR_FLOPPY_ID_MARK_NOT_FOUND */
  0,			/* ERROR_FLOPPY_WRONG_CYLINDER */
  0,			/* ERROR_FLOPPY_UNKNOWN_ERROR */
  0,			/* ERROR_FLOPPY_BAD_REGISTERS */
  0,			/* ERROR_DISK_RECALIBRATE_FAILED */
  0,			/* ERROR_DISK_OPERATION_FAILED */
  0,			/* ERROR_DISK_RESET_FAILED */
  EIO,			/* ERROR_EOM_OVERFLOW */
  0,			/* ERROR_NOT_ENOUGH_SERVER_MEMORY */
  EDEADLOCK,		/* ERROR_POSSIBLE_DEADLOCK */
  0,			/* ERROR_MAPPED_ALIGNMENT */
  0,			/* 1133 */
  0,			/* 1134 */
  0,			/* 1135 */
  0,			/* 1136 */
  0,			/* 1137 */
  0,			/* 1138 */
  0,			/* 1139 */
  0,			/* ERROR_SET_POWER_STATE_VETOED */
  0,			/* ERROR_SET_POWER_STATE_FAILED */
  EMLINK,		/* ERROR_TOO_MANY_LINKS */
  0,			/* 1143 */
  0,			/* 1144 */
  0,			/* 1145 */
  0,			/* 1146 */
  0,			/* 1147 */
  0,			/* 1148 */
  0,			/* 1149 */
  0,			/* ERROR_OLD_WIN_VERSION */
  0,			/* ERROR_APP_WRONG_OS */
  0,			/* ERROR_SINGLE_INSTANCE_APP */
  0,			/* ERROR_RMODE_APP */
  0,			/* ERROR_INVALID_DLL */
  0,			/* ERROR_NO_ASSOCIATION */
  0,			/* ERROR_DDE_FAIL */
  0,			/* ERROR_DLL_NOT_FOUND */
  0,			/* ERROR_NO_MORE_USER_HANDLES */
  0,			/* ERROR_MESSAGE_SYNC_ONLY */
  0,			/* ERROR_SOURCE_ELEMENT_EMPTY */
  0,			/* ERROR_DESTINATION_ELEMENT_FULL */
  0,			/* ERROR_ILLEGAL_ELEMENT_ADDRESS */
  0,			/* ERROR_MAGAZINE_NOT_PRESENT */
  0,			/* ERROR_DEVICE_REINITIALIZATION_NEEDED */
  EIO,			/* ERROR_DEVICE_REQUIRES_CLEANING */
  EIO,			/* ERROR_DEVICE_DOOR_OPEN */
  0,			/* ERROR_DEVICE_NOT_CONNECTED */
  0,			/* ERROR_NOT_FOUND */
  0,			/* ERROR_NO_MATCH */
  0,			/* ERROR_SET_NOT_FOUND */
  0,			/* ERROR_POINT_NOT_FOUND */
  0,			/* ERROR_NO_TRACKING_SERVICE */
  0,			/* ERROR_NO_VOLUME_ID */
  0,			/* 1174 */
  0,			/* ERROR_UNABLE_TO_REMOVE_REPLACED */
  0,			/* ERROR_UNABLE_TO_MOVE_REPLACEMENT */
  0,			/* ERROR_UNABLE_TO_MOVE_REPLACEMENT_2 */
  0,			/* ERROR_JOURNAL_DELETE_IN_PROGRESS */
  0,			/* ERROR_JOURNAL_NOT_ACTIVE */
  0,			/* ERROR_POTENTIAL_FILE_FOUND */
  0,			/* ERROR_JOURNAL_ENTRY_DELETED */
  0,			/* 1182 */
  0,			/* 1183 */
  0,			/* 1184 */
  0,			/* 1185 */
  0,			/* 1186 */
  0,			/* 1187 */
  0,			/* 1188 */
  0,			/* 1189 */
  0,			/* 1190 */
  0,			/* 1191 */
  0,			/* 1192 */
  0,			/* 1193 */
  0,			/* 1194 */
  0,			/* 1195 */
  0,			/* 1196 */
  0,			/* 1197 */
  0,			/* 1198 */
  0,			/* 1199 */
  ENODEV,		/* ERROR_BAD_DEVICE */
  0,			/* ERROR_CONNECTION_UNAVAIL */
  0,			/* ERROR_DEVICE_ALREADY_REMEMBERED */
  0,			/* ERROR_NO_NET_OR_BAD_PATH */
  0,			/* ERROR_BAD_PROVIDER */
  0,			/* ERROR_CANNOT_OPEN_PROFILE */
  0,			/* ERROR_BAD_PROFILE */
  0,			/* ERROR_NOT_CONTAINER */
  0,			/* ERROR_EXTENDED_ERROR */
  0,			/* ERROR_INVALID_GROUPNAME */
  0,			/* ERROR_INVALID_COMPUTERNAME */
  0,			/* ERROR_INVALID_EVENTNAME */
  0,			/* ERROR_INVALID_DOMAINNAME */
  0,			/* ERROR_INVALID_SERVICENAME */
  0,			/* ERROR_INVALID_NETNAME */
  0,			/* ERROR_INVALID_SHARENAME */
  0,			/* ERROR_INVALID_PASSWORDNAME */
  0,			/* ERROR_INVALID_MESSAGENAME */
  0,			/* ERROR_INVALID_MESSAGEDEST */
  0,			/* ERROR_SESSION_CREDENTIAL_CONFLICT */
  0,			/* ERROR_REMOTE_SESSION_LIMIT_EXCEEDED */
  0,			/* ERROR_DUP_DOMAINNAME */
  0,			/* ERROR_NO_NETWORK */
  EINTR,		/* ERROR_CANCELLED */
  0,			/* ERROR_USER_MAPPED_FILE */
  ECONNREFUSED,		/* ERROR_CONNECTION_REFUSED */
  0,			/* ERROR_GRACEFUL_DISCONNECT */
  0,			/* ERROR_ADDRESS_ALREADY_ASSOCIATED */
  0,			/* ERROR_ADDRESS_NOT_ASSOCIATED */
  0,			/* ERROR_CONNECTION_INVALID */
  0,			/* ERROR_CONNECTION_ACTIVE */
  0,			/* ERROR_NETWORK_UNREACHABLE */
  0,			/* ERROR_HOST_UNREACHABLE */
  0,			/* ERROR_PROTOCOL_UNREACHABLE */
  0,			/* ERROR_PORT_UNREACHABLE */
  0,			/* ERROR_REQUEST_ABORTED */
  0,			/* ERROR_CONNECTION_ABORTED */
  0,			/* ERROR_RETRY */
  0,			/* ERROR_CONNECTION_COUNT_LIMIT */
  0,			/* ERROR_LOGIN_TIME_RESTRICTION */
  0,			/* ERROR_LOGIN_WKSTA_RESTRICTION */
  0,			/* ERROR_INCORRECT_ADDRESS */
  0,			/* ERROR_ALREADY_REGISTERED */
  0,			/* ERROR_SERVICE_NOT_FOUND */
  0,			/* ERROR_NOT_AUTHENTICATED */
  0,			/* ERROR_NOT_LOGGED_ON */
  0,			/* ERROR_CONTINUE */
  0,			/* ERROR_ALREADY_INITIALIZED */
  0,			/* ERROR_NO_MORE_DEVICES */
  0,			/* ERROR_NO_SUCH_SITE */
  0,			/* ERROR_DOMAIN_CONTROLLER_EXISTS */
  0,			/* ERROR_ONLY_IF_CONNECTED */
  0,			/* ERROR_OVERRIDE_NOCHANGES */
  0,			/* ERROR_BAD_USER_PROFILE */
  0,			/* ERROR_NOT_SUPPORTED_ON_SBS */
  0,			/* ERROR_SERVER_SHUTDOWN_IN_PROGRESS */
  0,			/* ERROR_HOST_DOWN */
  0,			/* ERROR_NON_ACCOUNT_SID */
  0,			/* ERROR_NON_DOMAIN_SID */
  0,			/* ERROR_APPHELP_BLOCK */
  0,			/* ERROR_ACCESS_DISABLED_BY_POLICY */
  0,			/* ERROR_REG_NAT_CONSUMPTION */
  0,			/* ERROR_CSCSHARE_OFFLINE */
  0,			/* ERROR_PKINIT_FAILURE */
  0,			/* ERROR_SMARTCARD_SUBSYSTEM_FAILURE */
  0,			/* ERROR_DOWNGRADE_DETECTED */
  0,			/* 1266 */
  0,			/* 1267 */
  0,			/* 1268 */
  0,			/* 1269 */
  0,			/* 1270 */
  0,			/* ERROR_MACHINE_LOCKED */
  0,			/* 1272 */
  0,			/* ERROR_CALLBACK_SUPPLIED_INVALID_DATA */
  0,			/* ERROR_SYNC_FOREGROUND_REFRESH_REQUIRED */
  0,			/* ERROR_DRIVER_BLOCKED */
  0,			/* ERROR_INVALID_IMPORT_OF_NON_DLL */
  0,			/* ERROR_ACCESS_DISABLED_WEBBLADE */
  0,			/* ERROR_ACCESS_DISABLED_WEBBLADE_TAMPER */
  0,			/* ERROR_RECOVERY_FAILURE */
  0,			/* ERROR_ALREADY_FIBER */
  0,			/* ERROR_ALREADY_THREAD */
  0,			/* ERROR_STACK_BUFFER_OVERRUN */
  0,			/* ERROR_PARAMETER_QUOTA_EXCEEDED */
  0,			/* ERROR_DEBUGGER_INACTIVE */
  0,			/* ERROR_DELAY_LOAD_FAILED */
  0,			/* ERROR_VDM_DISALLOWED */
  0,			/* ERROR_UNIDENTIFIED_ERROR */
  0,			/* 1288 */
  0,			/* 1289 */
  0,			/* 1290 */
  0,			/* 1291 */
  0,			/* 1292 */
  0,			/* 1293 */
  0,			/* 1294 */
  0,			/* 1295 */
  0,			/* 1296 */
  0,			/* 1297 */
  0,			/* 1298 */
  0,			/* 1299 */
  0,			/* ERROR_NOT_ALL_ASSIGNED */
  0,			/* ERROR_SOME_NOT_MAPPED */
  0,			/* ERROR_NO_QUOTAS_FOR_ACCOUNT */
  0,			/* ERROR_LOCAL_USER_SESSION_KEY */
  0,			/* ERROR_NULL_LM_PASSWORD */
  0,			/* ERROR_UNKNOWN_REVISION */
  0,			/* ERROR_REVISION_MISMATCH */
  0,			/* ERROR_INVALID_OWNER */
  0,			/* ERROR_INVALID_PRIMARY_GROUP */
  0,			/* ERROR_NO_IMPERSONATION_TOKEN */
  0,			/* ERROR_CANT_DISABLE_MANDATORY */
  0,			/* ERROR_NO_LOGON_SERVERS */
  0,			/* ERROR_NO_SUCH_LOGON_SESSION */
  0,			/* ERROR_NO_SUCH_PRIVILEGE */
  EPERM,		/* ERROR_PRIVILEGE_NOT_HELD */
  0,			/* ERROR_INVALID_ACCOUNT_NAME */
  0,			/* ERROR_USER_EXISTS */
  0,			/* ERROR_NO_SUCH_USER */
  0,			/* ERROR_GROUP_EXISTS */
  0,			/* ERROR_NO_SUCH_GROUP */
  0,			/* ERROR_MEMBER_IN_GROUP */
  0,			/* ERROR_MEMBER_NOT_IN_GROUP */
  0,			/* ERROR_LAST_ADMIN */
  0,			/* ERROR_WRONG_PASSWORD */
  0,			/* ERROR_ILL_FORMED_PASSWORD */
  0,			/* ERROR_PASSWORD_RESTRICTION */
  0,			/* ERROR_LOGON_FAILURE */
  0,			/* ERROR_ACCOUNT_RESTRICTION */
  0,			/* ERROR_INVALID_LOGON_HOURS */
  0,			/* ERROR_INVALID_WORKSTATION */
  0,			/* ERROR_PASSWORD_EXPIRED */
  0,			/* ERROR_ACCOUNT_DISABLED */
  EINVAL,		/* ERROR_NONE_MAPPED */
  0,			/* ERROR_TOO_MANY_LUIDS_REQUESTED */
  0,			/* ERROR_LUIDS_EXHAUSTED */
  0,			/* ERROR_INVALID_SUB_AUTHORITY */
  0,			/* ERROR_INVALID_ACL */
  0,			/* ERROR_INVALID_SID */
  0,			/* ERROR_INVALID_SECURITY_DESCR */
  0,			/* 1339 */
  0,			/* ERROR_BAD_INHERITANCE_ACL */
  0,			/* ERROR_SERVER_DISABLED */
  0,			/* ERROR_SERVER_NOT_DISABLED */
  0,			/* ERROR_INVALID_ID_AUTHORITY */
  0,			/* ERROR_ALLOTTED_SPACE_EXCEEDED */
  0,			/* ERROR_INVALID_GROUP_ATTRIBUTES */
  0,			/* ERROR_BAD_IMPERSONATION_LEVEL */
  0,			/* ERROR_CANT_OPEN_ANONYMOUS */
  0,			/* ERROR_BAD_VALIDATION_CLASS */
  0,			/* ERROR_BAD_TOKEN_TYPE */
  0,			/* ERROR_NO_SECURITY_ON_OBJECT */
  0,			/* ERROR_CANT_ACCESS_DOMAIN_INFO */
  0,			/* ERROR_INVALID_SERVER_STATE */
  0,			/* ERROR_INVALID_DOMAIN_STATE */
  0,			/* ERROR_INVALID_DOMAIN_ROLE */
  0,			/* ERROR_NO_SUCH_DOMAIN */
  0,			/* ERROR_DOMAIN_EXISTS */
  0,			/* ERROR_DOMAIN_LIMIT_EXCEEDED */
  0,			/* ERROR_INTERNAL_DB_CORRUPTION */
  0,			/* ERROR_INTERNAL_ERROR */
  0,			/* ERROR_GENERIC_NOT_MAPPED */
  0,			/* ERROR_BAD_DESCRIPTOR_FORMAT */
  0,			/* ERROR_NOT_LOGON_PROCESS */
  0,			/* ERROR_LOGON_SESSION_EXISTS */
  0,			/* ERROR_NO_SUCH_PACKAGE */
  0,			/* ERROR_BAD_LOGON_SESSION_STATE */
  0,			/* ERROR_LOGON_SESSION_COLLISION */
  0,			/* ERROR_INVALID_LOGON_TYPE */
  0,			/* ERROR_CANNOT_IMPERSONATE */
  0,			/* ERROR_RXACT_INVALID_STATE */
  0,			/* ERROR_RXACT_COMMIT_FAILURE */
  0,			/* ERROR_SPECIAL_ACCOUNT */
  0,			/* ERROR_SPECIAL_GROUP */
  0,			/* ERROR_SPECIAL_USER */
  0,			/* ERROR_MEMBERS_PRIMARY_GROUP */
  0,			/* ERROR_TOKEN_ALREADY_IN_USE */
  0,			/* ERROR_NO_SUCH_ALIAS */
  0,			/* ERROR_MEMBER_NOT_IN_ALIAS */
  0,			/* ERROR_MEMBER_IN_ALIAS */
  0,			/* ERROR_ALIAS_EXISTS */
  0,			/* ERROR_LOGON_NOT_GRANTED */
  0,			/* ERROR_TOO_MANY_SECRETS */
  0,			/* ERROR_SECRET_TOO_LONG */
  0,			/* ERROR_INTERNAL_DB_ERROR */
  0,			/* ERROR_TOO_MANY_CONTEXT_IDS */
  0,			/* ERROR_LOGON_TYPE_NOT_GRANTED */
  0,			/* ERROR_NT_CROSS_ENCRYPTION_REQUIRED */
  0,			/* ERROR_NO_SUCH_MEMBER */
  0,			/* ERROR_INVALID_MEMBER */
  0,			/* ERROR_TOO_MANY_SIDS */
  0,			/* ERROR_LM_CROSS_ENCRYPTION_REQUIRED */
  0,			/* ERROR_NO_INHERITANCE */
  EEXIST,		/* ERROR_FILE_CORRUPT */
  EIO,			/* ERROR_DISK_CORRUPT */
  0,			/* ERROR_NO_USER_SESSION_KEY */
  0,			/* ERROR_LICENSE_QUOTA_EXCEEDED */
  0,			/* ERROR_WRONG_TARGET_NAME */
  0,			/* ERROR_MUTUAL_AUTH_FAILED */
  0,			/* ERROR_TIME_SKEW */
  0,			/* ERROR_CURRENT_DOMAIN_NOT_ALLOWED */
  0,			/* ERROR_INVALID_WINDOW_HANDLE */
  0,			/* ERROR_INVALID_MENU_HANDLE */
  0,			/* ERROR_INVALID_CURSOR_HANDLE */
  0,			/* ERROR_INVALID_ACCEL_HANDLE */
  0,			/* ERROR_INVALID_HOOK_HANDLE */
  0,			/* ERROR_INVALID_DWP_HANDLE */
  0,			/* ERROR_TLW_WITH_WSCHILD */
  0,			/* ERROR_CANNOT_FIND_WND_CLASS */
  0,			/* ERROR_WINDOW_OF_OTHER_THREAD */
  0,			/* ERROR_HOTKEY_ALREADY_REGISTERED */
  0,			/* ERROR_CLASS_ALREADY_EXISTS */
  0,			/* ERROR_CLASS_DOES_NOT_EXIST */
  0,			/* ERROR_CLASS_HAS_WINDOWS */
  0,			/* ERROR_INVALID_INDEX */
  0,			/* ERROR_INVALID_ICON_HANDLE */
  0,			/* ERROR_PRIVATE_DIALOG_INDEX */
  0,			/* ERROR_LISTBOX_ID_NOT_FOUND */
  0,			/* ERROR_NO_WILDCARD_CHARACTERS */
  0,			/* ERROR_CLIPBOARD_NOT_OPEN */
  0,			/* ERROR_HOTKEY_NOT_REGISTERED */
  0,			/* ERROR_WINDOW_NOT_DIALOG */
  0,			/* ERROR_CONTROL_ID_NOT_FOUND */
  0,			/* ERROR_INVALID_COMBOBOX_MESSAGE */
  0,			/* ERROR_WINDOW_NOT_COMBOBOX */
  0,			/* ERROR_INVALID_EDIT_HEIGHT */
  0,			/* ERROR_DC_NOT_FOUND */
  0,			/* ERROR_INVALID_HOOK_FILTER */
  0,			/* ERROR_INVALID_FILTER_PROC */
  0,			/* ERROR_HOOK_NEEDS_HMOD */
  0,			/* ERROR_GLOBAL_ONLY_HOOK */
  0,			/* ERROR_JOURNAL_HOOK_SET */
  0,			/* ERROR_HOOK_NOT_INSTALLED */
  0,			/* ERROR_INVALID_LB_MESSAGE */
  0,			/* ERROR_SETCOUNT_ON_BAD_LB */
  0,			/* ERROR_LB_WITHOUT_TABSTOPS */
  0,			/* ERROR_DESTROY_OBJECT_OF_OTHER_THREAD */
  0,			/* ERROR_CHILD_WINDOW_MENU */
  0,			/* ERROR_NO_SYSTEM_MENU */
  0,			/* ERROR_INVALID_MSGBOX_STYLE */
  0,			/* ERROR_INVALID_SPI_VALUE */
  0,			/* ERROR_SCREEN_ALREADY_LOCKED */
  0,			/* ERROR_HWNDS_HAVE_DIFF_PARENT */
  0,			/* ERROR_NOT_CHILD_WINDOW */
  0,			/* ERROR_INVALID_GW_COMMAND */
  0,			/* ERROR_INVALID_THREAD_ID */
  0,			/* ERROR_NON_MDICHILD_WINDOW */
  0,			/* ERROR_POPUP_ALREADY_ACTIVE */
  0,			/* ERROR_NO_SCROLLBARS */
  0,			/* ERROR_INVALID_SCROLLBAR_RANGE */
  0,			/* ERROR_INVALID_SHOWWIN_COMMAND */
  EFBIG,		/* ERROR_NO_SYSTEM_RESOURCES */
  EAGAIN,		/* ERROR_NONPAGED_SYSTEM_RESOURCES */
  EAGAIN,		/* ERROR_PAGED_SYSTEM_RESOURCES */
  EAGAIN,		/* ERROR_WORKING_SET_QUOTA */
  EAGAIN,		/* ERROR_PAGEFILE_QUOTA */
  EAGAIN,		/* ERROR_COMMITMENT_LIMIT */
  0,			/* ERROR_MENU_ITEM_NOT_FOUND */
  0,			/* ERROR_INVALID_KEYBOARD_HANDLE */
  0,			/* ERROR_HOOK_TYPE_NOT_ALLOWED */
  0,			/* ERROR_REQUIRES_INTERACTIVE_WINDOWSTATION */
  EBUSY,		/* ERROR_TIMEOUT */
  0,			/* ERROR_INVALID_MONITOR_HANDLE */
  0,			/* ERROR_INCORRECT_SIZE */
  0,			/* ERROR_SYMLINK_CLASS_DISABLED */
  0,			/* ERROR_SYMLINK_NOT_SUPPORTED */
  0,			/* ERROR_XML_PARSE_ERROR */
  0,			/* ERROR_XMLDSIG_ERROR */
  0,			/* ERROR_RESTART_APPLICATION */
  0,			/* ERROR_WRONG_COMPARTMENT */
  0,			/* ERROR_AUTHIP_FAILURE */
  0,			/* ERROR_NO_NVRAM_RESOURCES */
  0,			/* ERROR_NOT_GUI_PROCESS */
  0,			/* 1472 */
  0,			/* 1473 */
  0,			/* 1474 */
  0,			/* 1475 */
  0,			/* 1476 */
  0,			/* 1477 */
  0,			/* 1478 */
  0,			/* 1479 */
  0,			/* 1480 */
  0,			/* 1481 */
  0,			/* 1482 */
  0,			/* 1483 */
  0,			/* 1484 */
  0,			/* 1485 */
  0,			/* 1486 */
  0,			/* 1487 */
  0,			/* 1488 */
  0,			/* 1489 */
  0,			/* 1490 */
  0,			/* 1491 */
  0,			/* 1492 */
  0,			/* 1493 */
  0,			/* 1494 */
  0,			/* 1495 */
  0,			/* 1496 */
  0,			/* 1497 */
  0,			/* 1498 */
  0,			/* 1499 */
  0,			/* ERROR_EVENTLOG_FILE_CORRUPT */
  0,			/* ERROR_EVENTLOG_CANT_START */
  0,			/* ERROR_LOG_FILE_FULL */
  0,			/* ERROR_EVENTLOG_FILE_CHANGED */
  0,			/* 1504 */
  0,			/* 1505 */
  0,			/* 1506 */
  0,			/* 1507 */
  0,			/* 1508 */
  0,			/* 1509 */
  0,			/* 1510 */
  0,			/* 1511 */
  0,			/* 1512 */
  0,			/* 1513 */
  0,			/* 1514 */
  0,			/* 1515 */
  0,			/* 1516 */
  0,			/* 1517 */
  0,			/* 1518 */
  0,			/* 1519 */
  0,			/* 1520 */
  0,			/* 1521 */
  0,			/* 1522 */
  0,			/* 1523 */
  0,			/* 1524 */
  0,			/* 1525 */
  0,			/* 1526 */
  0,			/* 1527 */
  0,			/* 1528 */
  0,			/* 1529 */
  0,			/* 1530 */
  0,			/* 1531 */
  0,			/* 1532 */
  0,			/* 1533 */
  0,			/* 1534 */
  0,			/* 1535 */
  0,			/* 1536 */
  0,			/* 1537 */
  0,			/* 1538 */
  0,			/* 1539 */
  0,			/* 1540 */
  0,			/* 1541 */
  0,			/* 1542 */
  0,			/* 1543 */
  0,			/* 1544 */
  0,			/* 1545 */
  0,			/* 1546 */
  0,			/* 1547 */
  0,			/* 1548 */
  0,			/* 1549 */
  0,			/* 1550 */
  0,			/* 1551 */
  0,			/* 1552 */
  0,			/* 1553 */
  0,			/* 1554 */
  0,			/* 1555 */
  0,			/* 1556 */
  0,			/* 1557 */
  0,			/* 1558 */
  0,			/* 1559 */
  0,			/* 1560 */
  0,			/* 1561 */
  0,			/* 1562 */
  0,			/* 1563 */
  0,			/* 1564 */
  0,			/* 1565 */
  0,			/* 1566 */
  0,			/* 1567 */
  0,			/* 1568 */
  0,			/* 1569 */
  0,			/* 1570 */
  0,			/* 1571 */
  0,			/* 1572 */
  0,			/* 1573 */
  0,			/* 1574 */
  0,			/* 1575 */
  0,			/* 1576 */
  0,			/* 1577 */
  0,			/* 1578 */
  0,			/* 1579 */
  0,			/* 1580 */
  0,			/* 1581 */
  0,			/* 1582 */
  0,			/* 1583 */
  0,			/* 1584 */
  0,			/* 1585 */
  0,			/* 1586 */
  0,			/* 1587 */
  0,			/* 1588 */
  0,			/* 1589 */
  0,			/* 1590 */
  0,			/* 1591 */
  0,			/* 1592 */
  0,			/* 1593 */
  0,			/* 1594 */
  0,			/* 1595 */
  0,			/* 1596 */
  0,			/* 1597 */
  0,			/* 1598 */
  0,			/* 1599 */
  0,			/* 1600 */
  0,			/* ERROR_INSTALL_SERVICE_FAILURE */
  0,			/* ERROR_INSTALL_USEREXIT */
  0,			/* ERROR_INSTALL_FAILURE */
  0,			/* ERROR_INSTALL_SUSPEND */
  0,			/* ERROR_UNKNOWN_PRODUCT */
  0,			/* ERROR_UNKNOWN_FEATURE */
  0,			/* ERROR_UNKNOWN_COMPONENT */
  0,			/* ERROR_UNKNOWN_PROPERTY */
  0,			/* ERROR_INVALID_HANDLE_STATE */
  0,			/* ERROR_BAD_CONFIGURATION */
  0,			/* ERROR_INDEX_ABSENT */
  0,			/* ERROR_INSTALL_SOURCE_ABSENT */
  0,			/* ERROR_INSTALL_PACKAGE_VERSION */
  0,			/* ERROR_PRODUCT_UNINSTALLED */
  0,			/* ERROR_BAD_QUERY_SYNTAX */
  0,			/* ERROR_INVALID_FIELD */
  0,			/* ERROR_DEVICE_REMOVED */
  0,			/* ERROR_INSTALL_ALREADY_RUNNING */
  0,			/* ERROR_INSTALL_PACKAGE_OPEN_FAILED */
  0,			/* ERROR_INSTALL_PACKAGE_INVALID */
  0,			/* ERROR_INSTALL_UI_FAILURE */
  0,			/* ERROR_INSTALL_LOG_FAILURE */
  0,			/* ERROR_INSTALL_LANGUAGE_UNSUPPORTED */
  0,			/* ERROR_INSTALL_TRANSFORM_FAILURE */
  0,			/* ERROR_INSTALL_PACKAGE_REJECTED */
  0,			/* ERROR_FUNCTION_NOT_CALLED */
  0,			/* ERROR_FUNCTION_FAILED */
  0,			/* ERROR_INVALID_TABLE */
  0,			/* ERROR_DATATYPE_MISMATCH */
  0,			/* ERROR_UNSUPPORTED_TYPE */
  0,			/* ERROR_CREATE_FAILED */
  0,			/* ERROR_INSTALL_TEMP_UNWRITABLE */
  0,			/* ERROR_INSTALL_PLATFORM_UNSUPPORTED */
  0,			/* ERROR_INSTALL_NOTUSED */
  0,			/* ERROR_PATCH_PACKAGE_OPEN_FAILED */
  0,			/* ERROR_PATCH_PACKAGE_INVALID */
  0,			/* ERROR_PATCH_PACKAGE_UNSUPPORTED */
  0,			/* ERROR_PRODUCT_VERSION */
  0,			/* ERROR_INVALID_COMMAND_LINE */
  0,			/* ERROR_INSTALL_REMOTE_DISALLOWED */
  0,			/* ERROR_SUCCESS_REBOOT_INITIATED */
  0,			/* ERROR_PATCH_TARGET_NOT_FOUND */
  0,			/* ERROR_PATCH_PACKAGE_REJECTED */
  0,			/* ERROR_INSTALL_TRANSFORM_REJECTED */
  0,			/* ERROR_INSTALL_REMOTE_PROHIBITED */
  0,			/* 1646 */
  0,			/* 1647 */
  0,			/* 1648 */
  0,			/* 1649 */
  0,			/* 1650 */
  0,			/* 1651 */
  0,			/* 1652 */
  0,			/* 1653 */
  0,			/* 1654 */
  0,			/* 1655 */
  0,			/* 1656 */
  0,			/* 1657 */
  0,			/* 1658 */
  0,			/* 1659 */
  0,			/* 1660 */
  0,			/* 1661 */
  0,			/* 1662 */
  0,			/* 1663 */
  0,			/* 1664 */
  0,			/* 1665 */
  0,			/* 1666 */
  0,			/* 1667 */
  0,			/* 1668 */
  0,			/* 1669 */
  0,			/* 1670 */
  0,			/* 1671 */
  0,			/* 1672 */
  0,			/* 1673 */
  0,			/* 1674 */
  0,			/* 1675 */
  0,			/* 1676 */
  0,			/* 1677 */
  0,			/* 1678 */
  0,			/* 1679 */
  0,			/* 1680 */
  0,			/* 1681 */
  0,			/* 1682 */
  0,			/* 1683 */
  0,			/* 1684 */
  0,			/* 1685 */
  0,			/* 1686 */
  0,			/* 1687 */
  0,			/* 1688 */
  0,			/* 1689 */
  0,			/* 1690 */
  0,			/* 1691 */
  0,			/* 1692 */
  0,			/* 1693 */
  0,			/* 1694 */
  0,			/* 1695 */
  0,			/* 1696 */
  0,			/* 1697 */
  0,			/* 1698 */
  0,			/* 1699 */
  0,			/* 1700 */
  0,			/* 1701 */
  0,			/* 1702 */
  0,			/* 1703 */
  0,			/* 1704 */
  0,			/* 1705 */
  0,			/* 1706 */
  0,			/* 1707 */
  0,			/* 1708 */
  0,			/* 1709 */
  0,			/* 1710 */
  0,			/* 1711 */
  0,			/* 1712 */
  0,			/* 1713 */
  0,			/* 1714 */
  0,			/* 1715 */
  0,			/* 1716 */
  0,			/* 1717 */
  0,			/* 1718 */
  0,			/* 1719 */
  0,			/* 1720 */
  0,			/* 1721 */
  0,			/* 1722 */
  0,			/* 1723 */
  0,			/* 1724 */
  0,			/* 1725 */
  0,			/* 1726 */
  0,			/* 1727 */
  0,			/* 1728 */
  0,			/* 1729 */
  0,			/* 1730 */
  0,			/* 1731 */
  0,			/* 1732 */
  0,			/* 1733 */
  0,			/* 1734 */
  0,			/* 1735 */
  0,			/* 1736 */
  0,			/* 1737 */
  0,			/* 1738 */
  0,			/* 1739 */
  0,			/* 1740 */
  0,			/* 1741 */
  0,			/* 1742 */
  0,			/* 1743 */
  0,			/* 1744 */
  0,			/* 1745 */
  0,			/* 1746 */
  0,			/* 1747 */
  0,			/* 1748 */
  0,			/* 1749 */
  0,			/* 1750 */
  0,			/* 1751 */
  0,			/* 1752 */
  0,			/* 1753 */
  0,			/* 1754 */
  0,			/* 1755 */
  0,			/* 1756 */
  0,			/* 1757 */
  0,			/* 1758 */
  0,			/* 1759 */
  0,			/* 1760 */
  0,			/* 1761 */
  0,			/* 1762 */
  0,			/* 1763 */
  0,			/* 1764 */
  0,			/* 1765 */
  0,			/* 1766 */
  0,			/* 1767 */
  0,			/* 1768 */
  0,			/* 1769 */
  0,			/* 1770 */
  0,			/* 1771 */
  0,			/* 1772 */
  0,			/* 1773 */
  0,			/* 1774 */
  0,			/* 1775 */
  0,			/* 1776 */
  0,			/* 1777 */
  0,			/* 1778 */
  0,			/* 1779 */
  0,			/* 1780 */
  0,			/* 1781 */
  0,			/* 1782 */
  0,			/* 1783 */
  0,			/* ERROR_INVALID_USER_BUFFER */
  0,			/* ERROR_UNRECOGNIZED_MEDIA */
  0,			/* ERROR_NO_TRUST_LSA_SECRET */
  0,			/* ERROR_NO_TRUST_SAM_ACCOUNT */
  0,			/* ERROR_TRUSTED_DOMAIN_FAILURE */
  0,			/* ERROR_TRUSTED_RELATIONSHIP_FAILURE */
  0,			/* ERROR_TRUST_FAILURE */
  0,			/* 1791 */
  0,			/* ERROR_NETLOGON_NOT_STARTED */
  0,			/* ERROR_ACCOUNT_EXPIRED */
  0,			/* ERROR_REDIRECTOR_HAS_OPEN_HANDLES */
  0,			/* ERROR_PRINTER_DRIVER_ALREADY_INSTALLED */
  0,			/* ERROR_UNKNOWN_PORT */
  0,			/* ERROR_UNKNOWN_PRINTER_DRIVER */
  0,			/* ERROR_UNKNOWN_PRINTPROCESSOR */
  0,			/* ERROR_INVALID_SEPARATOR_FILE */
  0,			/* ERROR_INVALID_PRIORITY */
  0,			/* ERROR_INVALID_PRINTER_NAME */
  0,			/* ERROR_PRINTER_ALREADY_EXISTS */
  0,			/* ERROR_INVALID_PRINTER_COMMAND */
  0,			/* ERROR_INVALID_DATATYPE */
  0,			/* ERROR_INVALID_ENVIRONMENT */
  0,			/* 1806 */
  0,			/* ERROR_NOLOGON_INTERDOMAIN_TRUST_ACCOUNT */
  0,			/* ERROR_NOLOGON_WORKSTATION_TRUST_ACCOUNT */
  0,			/* ERROR_NOLOGON_SERVER_TRUST_ACCOUNT */
  0,			/* ERROR_DOMAIN_TRUST_INCONSISTENT */
  0,			/* ERROR_SERVER_HAS_OPEN_HANDLES */
  0,			/* ERROR_RESOURCE_DATA_NOT_FOUND */
  0,			/* ERROR_RESOURCE_TYPE_NOT_FOUND */
  0,			/* ERROR_RESOURCE_NAME_NOT_FOUND */
  0,			/* ERROR_RESOURCE_LANG_NOT_FOUND */
  EIO,			/* ERROR_NOT_ENOUGH_QUOTA */
  0,			/* 1817 */
  0,			/* 1818 */
  0,			/* 1819 */
  0,			/* 1820 */
  0,			/* 1821 */
  0,			/* 1822 */
  0,			/* 1823 */
  0,			/* 1824 */
  0,			/* 1825 */
  0,			/* 1826 */
  0,			/* 1827 */
  0,			/* 1828 */
  0,			/* 1829 */
  0,			/* 1830 */
  0,			/* 1831 */
  0,			/* 1832 */
  0,			/* 1833 */
  0,			/* 1834 */
  0,			/* 1835 */
  0,			/* 1836 */
  0,			/* 1837 */
  0,			/* 1838 */
  0,			/* 1839 */
  0,			/* 1840 */
  0,			/* 1841 */
  0,			/* 1842 */
  0,			/* 1843 */
  0,			/* 1844 */
  0,			/* 1845 */
  0,			/* 1846 */
  0,			/* 1847 */
  0,			/* 1848 */
  0,			/* 1849 */
  0,			/* 1850 */
  0,			/* 1851 */
  0,			/* 1852 */
  0,			/* 1853 */
  0,			/* 1854 */
  0,			/* 1855 */
  0,			/* 1856 */
  0,			/* 1857 */
  0,			/* 1858 */
  0,			/* 1859 */
  0,			/* 1860 */
  0,			/* 1861 */
  0,			/* 1862 */
  0,			/* 1863 */
  0,			/* 1864 */
  0,			/* 1865 */
  0,			/* 1866 */
  0,			/* 1867 */
  0,			/* 1868 */
  0,			/* 1869 */
  0,			/* 1870 */
  0,			/* 1871 */
  0,			/* 1872 */
  0,			/* 1873 */
  0,			/* 1874 */
  0,			/* 1875 */
  0,			/* 1876 */
  0,			/* 1877 */
  0,			/* 1878 */
  0,			/* 1879 */
  0,			/* 1880 */
  0,			/* 1881 */
  0,			/* 1882 */
  0,			/* 1883 */
  0,			/* 1884 */
  0,			/* 1885 */
  0,			/* 1886 */
  0,			/* 1887 */
  0,			/* 1888 */
  0,			/* 1889 */
  0,			/* 1890 */
  0,			/* 1891 */
  0,			/* 1892 */
  0,			/* 1893 */
  0,			/* 1894 */
  0,			/* 1895 */
  0,			/* 1896 */
  0,			/* 1897 */
  0,			/* 1898 */
  0,			/* 1899 */
  0,			/* 1900 */
  0,			/* ERROR_INVALID_TIME */
  0,			/* ERROR_INVALID_FORM_NAME */
  0,			/* ERROR_INVALID_FORM_SIZE */
  0,			/* ERROR_ALREADY_WAITING */
  0,			/* ERROR_PRINTER_DELETED */
  0,			/* ERROR_INVALID_PRINTER_STATE */
  0,			/* ERROR_PASSWORD_MUST_CHANGE */
  0,			/* ERROR_DOMAIN_CONTROLLER_NOT_FOUND */
  0,			/* ERROR_ACCOUNT_LOCKED_OUT */
  0,			/* 1910 */
  0,			/* 1911 */
  0,			/* 1912 */
  0,			/* 1913 */
  0,			/* 1914 */
  0,			/* 1915 */
  0,			/* 1916 */
  0,			/* 1917 */
  0,			/* 1918 */
  0,			/* ERROR_NO_SITENAME */
  0,			/* ERROR_CANT_ACCESS_FILE */
  0,			/* ERROR_CANT_RESOLVE_FILENAME */
  0,			/* 1922 */
  0,			/* 1923 */
  0,			/* 1924 */
  0,			/* 1925 */
  0,			/* 1926 */
  0,			/* 1927 */
  0,			/* 1928 */
  0,			/* 1929 */
  0,			/* ERROR_KM_DRIVER_BLOCKED */
  0,			/* ERROR_CONTEXT_EXPIRED */
  0,			/* ERROR_PER_USER_TRUST_QUOTA_EXCEEDED */
  0,			/* ERROR_ALL_USER_TRUST_QUOTA_EXCEEDED */
  0,			/* ERROR_USER_DELETE_TRUST_QUOTA_EXCEEDED */
  0,			/* ERROR_AUTHENTICATION_FIREWALL_FAILED */
  0,			/* ERROR_REMOTE_PRINT_CONNECTIONS_BLOCKED */
  0,			/* 1937 */
  0,			/* 1938 */
  0,			/* 1939 */
  0,			/* 1940 */
  0,			/* 1941 */
  0,			/* 1942 */
  0,			/* 1943 */
  0,			/* 1944 */
  0,			/* 1945 */
  0,			/* 1946 */
  0,			/* 1947 */
  0,			/* 1948 */
  0,			/* 1949 */
  0,			/* 1950 */
  0,			/* 1951 */
  0,			/* 1952 */
  0,			/* 1953 */
  0,			/* 1954 */
  0,			/* 1955 */
  0,			/* 1956 */
  0,			/* 1957 */
  0,			/* 1958 */
  0,			/* 1959 */
  0,			/* 1960 */
  0,			/* 1961 */
  0,			/* 1962 */
  0,			/* 1963 */
  0,			/* 1964 */
  0,			/* 1965 */
  0,			/* 1966 */
  0,			/* 1967 */
  0,			/* 1968 */
  0,			/* 1969 */
  0,			/* 1970 */
  0,			/* 1971 */
  0,			/* 1972 */
  0,			/* 1973 */
  0,			/* 1974 */
  0,			/* 1975 */
  0,			/* 1976 */
  0,			/* 1977 */
  0,			/* 1978 */
  0,			/* 1979 */
  0,			/* 1980 */
  0,			/* 1981 */
  0,			/* 1982 */
  0,			/* 1983 */
  0,			/* 1984 */
  0,			/* 1985 */
  0,			/* 1986 */
  0,			/* 1987 */
  0,			/* 1988 */
  0,			/* 1989 */
  0,			/* 1990 */
  0,			/* 1991 */
  0,			/* 1992 */
  0,			/* 1993 */
  0,			/* 1994 */
  0,			/* 1995 */
  0,			/* 1996 */
  0,			/* 1997 */
  0,			/* 1998 */
  0,			/* 1999 */
  0,			/* ERROR_INVALID_PIXEL_FORMAT */
  0,			/* ERROR_BAD_DRIVER */
  0,			/* ERROR_INVALID_WINDOW_STYLE */
  0,			/* ERROR_METAFILE_NOT_SUPPORTED */
  0,			/* ERROR_TRANSFORM_NOT_SUPPORTED */
  0,			/* ERROR_CLIPPING_NOT_SUPPORTED */
  0,			/* 2006 */
  0,			/* 2007 */
  0,			/* 2008 */
  0,			/* 2009 */
  0,			/* ERROR_INVALID_CMM */
  0,			/* ERROR_INVALID_PROFILE */
  0,			/* ERROR_TAG_NOT_FOUND */
  0,			/* ERROR_TAG_NOT_PRESENT */
  0,			/* ERROR_DUPLICATE_TAG */
  0,			/* ERROR_PROFILE_NOT_ASSOCIATED_WITH_DEVICE */
  0,			/* ERROR_PROFILE_NOT_FOUND */
  0,			/* ERROR_INVALID_COLORSPACE */
  0,			/* ERROR_ICM_NOT_ENABLED */
  0,			/* ERROR_DELETING_ICM_XFORM */
  0,			/* ERROR_INVALID_TRANSFORM */
  0,			/* ERROR_COLORSPACE_MISMATCH */
  0,			/* ERROR_INVALID_COLORINDEX */
  0,			/* 2023 */
  0,			/* 2024 */
  0,			/* 2025 */
  0,			/* 2026 */
  0,			/* 2027 */
  0,			/* 2028 */
  0,			/* 2029 */
  0,			/* 2030 */
  0,			/* 2031 */
  0,			/* 2032 */
  0,			/* 2033 */
  0,			/* 2034 */
  0,			/* 2035 */
  0,			/* 2036 */
  0,			/* 2037 */
  0,			/* 2038 */
  0,			/* 2039 */
  0,			/* 2040 */
  0,			/* 2041 */
  0,			/* 2042 */
  0,			/* 2043 */
  0,			/* 2044 */
  0,			/* 2045 */
  0,			/* 2046 */
  0,			/* 2047 */
  0,			/* 2048 */
  0,			/* 2049 */
  0,			/* 2050 */
  0,			/* 2051 */
  0,			/* 2052 */
  0,			/* 2053 */
  0,			/* 2054 */
  0,			/* 2055 */
  0,			/* 2056 */
  0,			/* 2057 */
  0,			/* 2058 */
  0,			/* 2059 */
  0,			/* 2060 */
  0,			/* 2061 */
  0,			/* 2062 */
  0,			/* 2063 */
  0,			/* 2064 */
  0,			/* 2065 */
  0,			/* 2066 */
  0,			/* 2067 */
  0,			/* 2068 */
  0,			/* 2069 */
  0,			/* 2070 */
  0,			/* 2071 */
  0,			/* 2072 */
  0,			/* 2073 */
  0,			/* 2074 */
  0,			/* 2075 */
  0,			/* 2076 */
  0,			/* 2077 */
  0,			/* 2078 */
  0,			/* 2079 */
  0,			/* 2080 */
  0,			/* 2081 */
  0,			/* 2082 */
  0,			/* 2083 */
  0,			/* 2084 */
  0,			/* 2085 */
  0,			/* 2086 */
  0,			/* 2087 */
  0,			/* 2088 */
  0,			/* 2089 */
  0,			/* 2090 */
  0,			/* 2091 */
  0,			/* 2092 */
  0,			/* 2093 */
  0,			/* 2094 */
  0,			/* 2095 */
  0,			/* 2096 */
  0,			/* 2097 */
  0,			/* 2098 */
  0,			/* 2099 */
  0,			/* 2100 */
  0,			/* 2101 */
  0,			/* 2102 */
  0,			/* 2103 */
  0,			/* 2104 */
  0,			/* 2105 */
  0,			/* 2106 */
  0,			/* 2107 */
  0,			/* ERROR_CONNECTED_OTHER_PASSWORD */
  0,			/* ERROR_CONNECTED_OTHER_PASSWORD_DEFAULT */
  0,			/* 2110 */
  0,			/* 2111 */
  0,			/* 2112 */
  0,			/* 2113 */
  0,			/* 2114 */
  0,			/* 2115 */
  0,			/* 2116 */
  0,			/* 2117 */
  0,			/* 2118 */
  0,			/* 2119 */
  0,			/* 2120 */
  0,			/* 2121 */
  0,			/* 2122 */
  0,			/* 2123 */
  0,			/* 2124 */
  0,			/* 2125 */
  0,			/* 2126 */
  0,			/* 2127 */
  0,			/* 2128 */
  0,			/* 2129 */
  0,			/* 2130 */
  0,			/* 2131 */
  0,			/* 2132 */
  0,			/* 2133 */
  0,			/* 2134 */
  0,			/* 2135 */
  0,			/* 2136 */
  0,			/* 2137 */
  0,			/* 2138 */
  0,			/* 2139 */
  0,			/* 2140 */
  0,			/* 2141 */
  0,			/* 2142 */
  0,			/* 2143 */
  0,			/* 2144 */
  0,			/* 2145 */
  0,			/* 2146 */
  0,			/* 2147 */
  0,			/* 2148 */
  0,			/* 2149 */
  0,			/* 2150 */
  0,			/* 2151 */
  0,			/* 2152 */
  0,			/* 2153 */
  0,			/* 2154 */
  0,			/* 2155 */
  0,			/* 2156 */
  0,			/* 2157 */
  0,			/* 2158 */
  0,			/* 2159 */
  0,			/* 2160 */
  0,			/* 2161 */
  0,			/* 2162 */
  0,			/* 2163 */
  0,			/* 2164 */
  0,			/* 2165 */
  0,			/* 2166 */
  0,			/* 2167 */
  0,			/* 2168 */
  0,			/* 2169 */
  0,			/* 2170 */
  0,			/* 2171 */
  0,			/* 2172 */
  0,			/* 2173 */
  0,			/* 2174 */
  0,			/* 2175 */
  0,			/* 2176 */
  0,			/* 2177 */
  0,			/* 2178 */
  0,			/* 2179 */
  0,			/* 2180 */
  0,			/* 2181 */
  0,			/* 2182 */
  0,			/* 2183 */
  0,			/* 2184 */
  0,			/* 2185 */
  0,			/* 2186 */
  0,			/* 2187 */
  0,			/* 2188 */
  0,			/* 2189 */
  0,			/* 2190 */
  0,			/* 2191 */
  0,			/* 2192 */
  0,			/* 2193 */
  0,			/* 2194 */
  0,			/* 2195 */
  0,			/* 2196 */
  0,			/* 2197 */
  0,			/* 2198 */
  0,			/* 2199 */
  0,			/* 2200 */
  0,			/* 2201 */
  EINVAL,		/* ERROR_BAD_USERNAME */
  0,			/* 2203 */
  0,			/* 2204 */
  0,			/* 2205 */
  0,			/* 2206 */
  0,			/* 2207 */
  0,			/* 2208 */
  0,			/* 2209 */
  0,			/* 2210 */
  0,			/* 2211 */
  0,			/* 2212 */
  0,			/* 2213 */
  0,			/* 2214 */
  0,			/* 2215 */
  0,			/* 2216 */
  0,			/* 2217 */
  0,			/* 2218 */
  0,			/* 2219 */
  0,			/* 2220 */
  0,			/* 2221 */
  0,			/* 2222 */
  0,			/* 2223 */
  0,			/* 2224 */
  0,			/* 2225 */
  0,			/* 2226 */
  0,			/* 2227 */
  0,			/* 2228 */
  0,			/* 2229 */
  0,			/* 2230 */
  0,			/* 2231 */
  0,			/* 2232 */
  0,			/* 2233 */
  0,			/* 2234 */
  0,			/* 2235 */
  0,			/* 2236 */
  0,			/* 2237 */
  0,			/* 2238 */
  0,			/* 2239 */
  0,			/* 2240 */
  0,			/* 2241 */
  0,			/* 2242 */
  0,			/* 2243 */
  0,			/* 2244 */
  0,			/* 2245 */
  0,			/* 2246 */
  0,			/* 2247 */
  0,			/* 2248 */
  0,			/* 2249 */
  ENOLINK,		/* ERROR_NOT_CONNECTED */
  0,			/* 2251 */
  0,			/* 2252 */
  0,			/* 2253 */
  0,			/* 2254 */
  0,			/* 2255 */
  0,			/* 2256 */
  0,			/* 2257 */
  0,			/* 2258 */
  0,			/* 2259 */
  0,			/* 2260 */
  0,			/* 2261 */
  0,			/* 2262 */
  0,			/* 2263 */
  0,			/* 2264 */
  0,			/* 2265 */
  0,			/* 2266 */
  0,			/* 2267 */
  0,			/* 2268 */
  0,			/* 2269 */
  0,			/* 2270 */
  0,			/* 2271 */
  0,			/* 2272 */
  0,			/* 2273 */
  0,			/* 2274 */
  0,			/* 2275 */
  0,			/* 2276 */
  0,			/* 2277 */
  0,			/* 2278 */
  0,			/* 2279 */
  0,			/* 2280 */
  0,			/* 2281 */
  0,			/* 2282 */
  0,			/* 2283 */
  0,			/* 2284 */
  0,			/* 2285 */
  0,			/* 2286 */
  0,			/* 2287 */
  0,			/* 2288 */
  0,			/* 2289 */
  0,			/* 2290 */
  0,			/* 2291 */
  0,			/* 2292 */
  0,			/* 2293 */
  0,			/* 2294 */
  0,			/* 2295 */
  0,			/* 2296 */
  0,			/* 2297 */
  0,			/* 2298 */
  0,			/* 2299 */
  0,			/* 2300 */
  0,			/* 2301 */
  0,			/* 2302 */
  0,			/* 2303 */
  0,			/* 2304 */
  0,			/* 2305 */
  0,			/* 2306 */
  0,			/* 2307 */
  0,			/* 2308 */
  0,			/* 2309 */
  0,			/* 2310 */
  0,			/* 2311 */
  0,			/* 2312 */
  0,			/* 2313 */
  0,			/* 2314 */
  0,			/* 2315 */
  0,			/* 2316 */
  0,			/* 2317 */
  0,			/* 2318 */
  0,			/* 2319 */
  0,			/* 2320 */
  0,			/* 2321 */
  0,			/* 2322 */
  0,			/* 2323 */
  0,			/* 2324 */
  0,			/* 2325 */
  0,			/* 2326 */
  0,			/* 2327 */
  0,			/* 2328 */
  0,			/* 2329 */
  0,			/* 2330 */
  0,			/* 2331 */
  0,			/* 2332 */
  0,			/* 2333 */
  0,			/* 2334 */
  0,			/* 2335 */
  0,			/* 2336 */
  0,			/* 2337 */
  0,			/* 2338 */
  0,			/* 2339 */
  0,			/* 2340 */
  0,			/* 2341 */
  0,			/* 2342 */
  0,			/* 2343 */
  0,			/* 2344 */
  0,			/* 2345 */
  0,			/* 2346 */
  0,			/* 2347 */
  0,			/* 2348 */
  0,			/* 2349 */
  0,			/* 2350 */
  0,			/* 2351 */
  0,			/* 2352 */
  0,			/* 2353 */
  0,			/* 2354 */
  0,			/* 2355 */
  0,			/* 2356 */
  0,			/* 2357 */
  0,			/* 2358 */
  0,			/* 2359 */
  0,			/* 2360 */
  0,			/* 2361 */
  0,			/* 2362 */
  0,			/* 2363 */
  0,			/* 2364 */
  0,			/* 2365 */
  0,			/* 2366 */
  0,			/* 2367 */
  0,			/* 2368 */
  0,			/* 2369 */
  0,			/* 2370 */
  0,			/* 2371 */
  0,			/* 2372 */
  0,			/* 2373 */
  0,			/* 2374 */
  0,			/* 2375 */
  0,			/* 2376 */
  0,			/* 2377 */
  0,			/* 2378 */
  0,			/* 2379 */
  0,			/* 2380 */
  0,			/* 2381 */
  0,			/* 2382 */
  0,			/* 2383 */
  0,			/* 2384 */
  0,			/* 2385 */
  0,			/* 2386 */
  0,			/* 2387 */
  0,			/* 2388 */
  0,			/* 2389 */
  0,			/* 2390 */
  0,			/* 2391 */
  0,			/* 2392 */
  0,			/* 2393 */
  0,			/* 2394 */
  0,			/* 2395 */
  0,			/* 2396 */
  0,			/* 2397 */
  0,			/* 2398 */
  0,			/* 2399 */
  0,			/* 2400 */
  EAGAIN,		/* ERROR_OPEN_FILES */
  EAGAIN,		/* ERROR_ACTIVE_CONNECTIONS */
  0,			/* 2403 */
  EAGAIN,		/* ERROR_DEVICE_IN_USE */
  0,			/* 2405 */
  0,			/* 2406 */
  0,			/* 2407 */
  0,			/* 2408 */
  0,			/* 2409 */
  0,			/* 2410 */
  0,			/* 2411 */
  0,			/* 2412 */
  0,			/* 2413 */
  0,			/* 2414 */
  0,			/* 2415 */
  0,			/* 2416 */
  0,			/* 2417 */
  0,			/* 2418 */
  0,			/* 2419 */
  0,			/* 2420 */
  0,			/* 2421 */
  0,			/* 2422 */
  0,			/* 2423 */
  0,			/* 2424 */
  0,			/* 2425 */
  0,			/* 2426 */
  0,			/* 2427 */
  0,			/* 2428 */
  0,			/* 2429 */
  0,			/* 2430 */
  0,			/* 2431 */
  0,			/* 2432 */
  0,			/* 2433 */
  0,			/* 2434 */
  0,			/* 2435 */
  0,			/* 2436 */
  0,			/* 2437 */
  0,			/* 2438 */
  0,			/* 2439 */
  0,			/* 2440 */
  0,			/* 2441 */
  0,			/* 2442 */
  0,			/* 2443 */
  0,			/* 2444 */
  0,			/* 2445 */
  0,			/* 2446 */
  0,			/* 2447 */
  0,			/* 2448 */
  0,			/* 2449 */
  0,			/* 2450 */
  0,			/* 2451 */
  0,			/* 2452 */
  0,			/* 2453 */
  0,			/* 2454 */
  0,			/* 2455 */
  0,			/* 2456 */
  0,			/* 2457 */
  0,			/* 2458 */
  0,			/* 2459 */
  0,			/* 2460 */
  0,			/* 2461 */
  0,			/* 2462 */
  0,			/* 2463 */
  0,			/* 2464 */
  0,			/* 2465 */
  0,			/* 2466 */
  0,			/* 2467 */
  0,			/* 2468 */
  0,			/* 2469 */
  0,			/* 2470 */
  0,			/* 2471 */
  0,			/* 2472 */
  0,			/* 2473 */
  0,			/* 2474 */
  0,			/* 2475 */
  0,			/* 2476 */
  0,			/* 2477 */
  0,			/* 2478 */
  0,			/* 2479 */
  0,			/* 2480 */
  0,			/* 2481 */
  0,			/* 2482 */
  0,			/* 2483 */
  0,			/* 2484 */
  0,			/* 2485 */
  0,			/* 2486 */
  0,			/* 2487 */
  0,			/* 2488 */
  0,			/* 2489 */
  0,			/* 2490 */
  0,			/* 2491 */
  0,			/* 2492 */
  0,			/* 2493 */
  0,			/* 2494 */
  0,			/* 2495 */
  0,			/* 2496 */
  0,			/* 2497 */
  0,			/* 2498 */
  0,			/* 2499 */
  0,			/* 2500 */
  0,			/* 2501 */
  0,			/* 2502 */
  0,			/* 2503 */
  0,			/* 2504 */
  0,			/* 2505 */
  0,			/* 2506 */
  0,			/* 2507 */
  0,			/* 2508 */
  0,			/* 2509 */
  0,			/* 2510 */
  0,			/* 2511 */
  0,			/* 2512 */
  0,			/* 2513 */
  0,			/* 2514 */
  0,			/* 2515 */
  0,			/* 2516 */
  0,			/* 2517 */
  0,			/* 2518 */
  0,			/* 2519 */
  0,			/* 2520 */
  0,			/* 2521 */
  0,			/* 2522 */
  0,			/* 2523 */
  0,			/* 2524 */
  0,			/* 2525 */
  0,			/* 2526 */
  0,			/* 2527 */
  0,			/* 2528 */
  0,			/* 2529 */
  0,			/* 2530 */
  0,			/* 2531 */
  0,			/* 2532 */
  0,			/* 2533 */
  0,			/* 2534 */
  0,			/* 2535 */
  0,			/* 2536 */
  0,			/* 2537 */
  0,			/* 2538 */
  0,			/* 2539 */
  0,			/* 2540 */
  0,			/* 2541 */
  0,			/* 2542 */
  0,			/* 2543 */
  0,			/* 2544 */
  0,			/* 2545 */
  0,			/* 2546 */
  0,			/* 2547 */
  0,			/* 2548 */
  0,			/* 2549 */
  0,			/* 2550 */
  0,			/* 2551 */
  0,			/* 2552 */
  0,			/* 2553 */
  0,			/* 2554 */
  0,			/* 2555 */
  0,			/* 2556 */
  0,			/* 2557 */
  0,			/* 2558 */
  0,			/* 2559 */
  0,			/* 2560 */
  0,			/* 2561 */
  0,			/* 2562 */
  0,			/* 2563 */
  0,			/* 2564 */
  0,			/* 2565 */
  0,			/* 2566 */
  0,			/* 2567 */
  0,			/* 2568 */
  0,			/* 2569 */
  0,			/* 2570 */
  0,			/* 2571 */
  0,			/* 2572 */
  0,			/* 2573 */
  0,			/* 2574 */
  0,			/* 2575 */
  0,			/* 2576 */
  0,			/* 2577 */
  0,			/* 2578 */
  0,			/* 2579 */
  0,			/* 2580 */
  0,			/* 2581 */
  0,			/* 2582 */
  0,			/* 2583 */
  0,			/* 2584 */
  0,			/* 2585 */
  0,			/* 2586 */
  0,			/* 2587 */
  0,			/* 2588 */
  0,			/* 2589 */
  0,			/* 2590 */
  0,			/* 2591 */
  0,			/* 2592 */
  0,			/* 2593 */
  0,			/* 2594 */
  0,			/* 2595 */
  0,			/* 2596 */
  0,			/* 2597 */
  0,			/* 2598 */
  0,			/* 2599 */
  0,			/* 2600 */
  0,			/* 2601 */
  0,			/* 2602 */
  0,			/* 2603 */
  0,			/* 2604 */
  0,			/* 2605 */
  0,			/* 2606 */
  0,			/* 2607 */
  0,			/* 2608 */
  0,			/* 2609 */
  0,			/* 2610 */
  0,			/* 2611 */
  0,			/* 2612 */
  0,			/* 2613 */
  0,			/* 2614 */
  0,			/* 2615 */
  0,			/* 2616 */
  0,			/* 2617 */
  0,			/* 2618 */
  0,			/* 2619 */
  0,			/* 2620 */
  0,			/* 2621 */
  0,			/* 2622 */
  0,			/* 2623 */
  0,			/* 2624 */
  0,			/* 2625 */
  0,			/* 2626 */
  0,			/* 2627 */
  0,			/* 2628 */
  0,			/* 2629 */
  0,			/* 2630 */
  0,			/* 2631 */
  0,			/* 2632 */
  0,			/* 2633 */
  0,			/* 2634 */
  0,			/* 2635 */
  0,			/* 2636 */
  0,			/* 2637 */
  0,			/* 2638 */
  0,			/* 2639 */
  0,			/* 2640 */
  0,			/* 2641 */
  0,			/* 2642 */
  0,			/* 2643 */
  0,			/* 2644 */
  0,			/* 2645 */
  0,			/* 2646 */
  0,			/* 2647 */
  0,			/* 2648 */
  0,			/* 2649 */
  0,			/* 2650 */
  0,			/* 2651 */
  0,			/* 2652 */
  0,			/* 2653 */
  0,			/* 2654 */
  0,			/* 2655 */
  0,			/* 2656 */
  0,			/* 2657 */
  0,			/* 2658 */
  0,			/* 2659 */
  0,			/* 2660 */
  0,			/* 2661 */
  0,			/* 2662 */
  0,			/* 2663 */
  0,			/* 2664 */
  0,			/* 2665 */
  0,			/* 2666 */
  0,			/* 2667 */
  0,			/* 2668 */
  0,			/* 2669 */
  0,			/* 2670 */
  0,			/* 2671 */
  0,			/* 2672 */
  0,			/* 2673 */
  0,			/* 2674 */
  0,			/* 2675 */
  0,			/* 2676 */
  0,			/* 2677 */
  0,			/* 2678 */
  0,			/* 2679 */
  0,			/* 2680 */
  0,			/* 2681 */
  0,			/* 2682 */
  0,			/* 2683 */
  0,			/* 2684 */
  0,			/* 2685 */
  0,			/* 2686 */
  0,			/* 2687 */
  0,			/* 2688 */
  0,			/* 2689 */
  0,			/* 2690 */
  0,			/* 2691 */
  0,			/* 2692 */
  0,			/* 2693 */
  0,			/* 2694 */
  0,			/* 2695 */
  0,			/* 2696 */
  0,			/* 2697 */
  0,			/* 2698 */
  0,			/* 2699 */
  0,			/* 2700 */
  0,			/* 2701 */
  0,			/* 2702 */
  0,			/* 2703 */
  0,			/* 2704 */
  0,			/* 2705 */
  0,			/* 2706 */
  0,			/* 2707 */
  0,			/* 2708 */
  0,			/* 2709 */
  0,			/* 2710 */
  0,			/* 2711 */
  0,			/* 2712 */
  0,			/* 2713 */
  0,			/* 2714 */
  0,			/* 2715 */
  0,			/* 2716 */
  0,			/* 2717 */
  0,			/* 2718 */
  0,			/* 2719 */
  0,			/* 2720 */
  0,			/* 2721 */
  0,			/* 2722 */
  0,			/* 2723 */
  0,			/* 2724 */
  0,			/* 2725 */
  0,			/* 2726 */
  0,			/* 2727 */
  0,			/* 2728 */
  0,			/* 2729 */
  0,			/* 2730 */
  0,			/* 2731 */
  0,			/* 2732 */
  0,			/* 2733 */
  0,			/* 2734 */
  0,			/* 2735 */
  0,			/* 2736 */
  0,			/* 2737 */
  0,			/* 2738 */
  0,			/* 2739 */
  0,			/* 2740 */
  0,			/* 2741 */
  0,			/* 2742 */
  0,			/* 2743 */
  0,			/* 2744 */
  0,			/* 2745 */
  0,			/* 2746 */
  0,			/* 2747 */
  0,			/* 2748 */
  0,			/* 2749 */
  0,			/* 2750 */
  0,			/* 2751 */
  0,			/* 2752 */
  0,			/* 2753 */
  0,			/* 2754 */
  0,			/* 2755 */
  0,			/* 2756 */
  0,			/* 2757 */
  0,			/* 2758 */
  0,			/* 2759 */
  0,			/* 2760 */
  0,			/* 2761 */
  0,			/* 2762 */
  0,			/* 2763 */
  0,			/* 2764 */
  0,			/* 2765 */
  0,			/* 2766 */
  0,			/* 2767 */
  0,			/* 2768 */
  0,			/* 2769 */
  0,			/* 2770 */
  0,			/* 2771 */
  0,			/* 2772 */
  0,			/* 2773 */
  0,			/* 2774 */
  0,			/* 2775 */
  0,			/* 2776 */
  0,			/* 2777 */
  0,			/* 2778 */
  0,			/* 2779 */
  0,			/* 2780 */
  0,			/* 2781 */
  0,			/* 2782 */
  0,			/* 2783 */
  0,			/* 2784 */
  0,			/* 2785 */
  0,			/* 2786 */
  0,			/* 2787 */
  0,			/* 2788 */
  0,			/* 2789 */
  0,			/* 2790 */
  0,			/* 2791 */
  0,			/* 2792 */
  0,			/* 2793 */
  0,			/* 2794 */
  0,			/* 2795 */
  0,			/* 2796 */
  0,			/* 2797 */
  0,			/* 2798 */
  0,			/* 2799 */
  0,			/* 2800 */
  0,			/* 2801 */
  0,			/* 2802 */
  0,			/* 2803 */
  0,			/* 2804 */
  0,			/* 2805 */
  0,			/* 2806 */
  0,			/* 2807 */
  0,			/* 2808 */
  0,			/* 2809 */
  0,			/* 2810 */
  0,			/* 2811 */
  0,			/* 2812 */
  0,			/* 2813 */
  0,			/* 2814 */
  0,			/* 2815 */
  0,			/* 2816 */
  0,			/* 2817 */
  0,			/* 2818 */
  0,			/* 2819 */
  0,			/* 2820 */
  0,			/* 2821 */
  0,			/* 2822 */
  0,			/* 2823 */
  0,			/* 2824 */
  0,			/* 2825 */
  0,			/* 2826 */
  0,			/* 2827 */
  0,			/* 2828 */
  0,			/* 2829 */
  0,			/* 2830 */
  0,			/* 2831 */
  0,			/* 2832 */
  0,			/* 2833 */
  0,			/* 2834 */
  0,			/* 2835 */
  0,			/* 2836 */
  0,			/* 2837 */
  0,			/* 2838 */
  0,			/* 2839 */
  0,			/* 2840 */
  0,			/* 2841 */
  0,			/* 2842 */
  0,			/* 2843 */
  0,			/* 2844 */
  0,			/* 2845 */
  0,			/* 2846 */
  0,			/* 2847 */
  0,			/* 2848 */
  0,			/* 2849 */
  0,			/* 2850 */
  0,			/* 2851 */
  0,			/* 2852 */
  0,			/* 2853 */
  0,			/* 2854 */
  0,			/* 2855 */
  0,			/* 2856 */
  0,			/* 2857 */
  0,			/* 2858 */
  0,			/* 2859 */
  0,			/* 2860 */
  0,			/* 2861 */
  0,			/* 2862 */
  0,			/* 2863 */
  0,			/* 2864 */
  0,			/* 2865 */
  0,			/* 2866 */
  0,			/* 2867 */
  0,			/* 2868 */
  0,			/* 2869 */
  0,			/* 2870 */
  0,			/* 2871 */
  0,			/* 2872 */
  0,			/* 2873 */
  0,			/* 2874 */
  0,			/* 2875 */
  0,			/* 2876 */
  0,			/* 2877 */
  0,			/* 2878 */
  0,			/* 2879 */
  0,			/* 2880 */
  0,			/* 2881 */
  0,			/* 2882 */
  0,			/* 2883 */
  0,			/* 2884 */
  0,			/* 2885 */
  0,			/* 2886 */
  0,			/* 2887 */
  0,			/* 2888 */
  0,			/* 2889 */
  0,			/* 2890 */
  0,			/* 2891 */
  0,			/* 2892 */
  0,			/* 2893 */
  0,			/* 2894 */
  0,			/* 2895 */
  0,			/* 2896 */
  0,			/* 2897 */
  0,			/* 2898 */
  0,			/* 2899 */
  0,			/* 2900 */
  0,			/* 2901 */
  0,			/* 2902 */
  0,			/* 2903 */
  0,			/* 2904 */
  0,			/* 2905 */
  0,			/* 2906 */
  0,			/* 2907 */
  0,			/* 2908 */
  0,			/* 2909 */
  0,			/* 2910 */
  0,			/* 2911 */
  0,			/* 2912 */
  0,			/* 2913 */
  0,			/* 2914 */
  0,			/* 2915 */
  0,			/* 2916 */
  0,			/* 2917 */
  0,			/* 2918 */
  0,			/* 2919 */
  0,			/* 2920 */
  0,			/* 2921 */
  0,			/* 2922 */
  0,			/* 2923 */
  0,			/* 2924 */
  0,			/* 2925 */
  0,			/* 2926 */
  0,			/* 2927 */
  0,			/* 2928 */
  0,			/* 2929 */
  0,			/* 2930 */
  0,			/* 2931 */
  0,			/* 2932 */
  0,			/* 2933 */
  0,			/* 2934 */
  0,			/* 2935 */
  0,			/* 2936 */
  0,			/* 2937 */
  0,			/* 2938 */
  0,			/* 2939 */
  0,			/* 2940 */
  0,			/* 2941 */
  0,			/* 2942 */
  0,			/* 2943 */
  0,			/* 2944 */
  0,			/* 2945 */
  0,			/* 2946 */
  0,			/* 2947 */
  0,			/* 2948 */
  0,			/* 2949 */
  0,			/* 2950 */
  0,			/* 2951 */
  0,			/* 2952 */
  0,			/* 2953 */
  0,			/* 2954 */
  0,			/* 2955 */
  0,			/* 2956 */
  0,			/* 2957 */
  0,			/* 2958 */
  0,			/* 2959 */
  0,			/* 2960 */
  0,			/* 2961 */
  0,			/* 2962 */
  0,			/* 2963 */
  0,			/* 2964 */
  0,			/* 2965 */
  0,			/* 2966 */
  0,			/* 2967 */
  0,			/* 2968 */
  0,			/* 2969 */
  0,			/* 2970 */
  0,			/* 2971 */
  0,			/* 2972 */
  0,			/* 2973 */
  0,			/* 2974 */
  0,			/* 2975 */
  0,			/* 2976 */
  0,			/* 2977 */
  0,			/* 2978 */
  0,			/* 2979 */
  0,			/* 2980 */
  0,			/* 2981 */
  0,			/* 2982 */
  0,			/* 2983 */
  0,			/* 2984 */
  0,			/* 2985 */
  0,			/* 2986 */
  0,			/* 2987 */
  0,			/* 2988 */
  0,			/* 2989 */
  0,			/* 2990 */
  0,			/* 2991 */
  0,			/* 2992 */
  0,			/* 2993 */
  0,			/* 2994 */
  0,			/* 2995 */
  0,			/* 2996 */
  0,			/* 2997 */
  0,			/* 2998 */
  0,			/* 2999 */
  0,			/* ERROR_UNKNOWN_PRINT_MONITOR */
  0,			/* ERROR_PRINTER_DRIVER_IN_USE */
  0,			/* ERROR_SPOOL_FILE_NOT_FOUND */
  0,			/* ERROR_SPL_NO_STARTDOC */
  0,			/* ERROR_SPL_NO_ADDJOB */
  0,			/* ERROR_PRINT_PROCESSOR_ALREADY_INSTALLED */
  0,			/* ERROR_PRINT_MONITOR_ALREADY_INSTALLED */
  0,			/* ERROR_INVALID_PRINT_MONITOR */
  0,			/* ERROR_PRINT_MONITOR_IN_USE */
  0,			/* ERROR_PRINTER_HAS_JOBS_QUEUED */
  0,			/* ERROR_SUCCESS_REBOOT_REQUIRED */
  0,			/* ERROR_SUCCESS_RESTART_REQUIRED */
  0,			/* ERROR_PRINTER_NOT_FOUND */
  0,			/* ERROR_PRINTER_DRIVER_WARNED */
  0,			/* ERROR_PRINTER_DRIVER_BLOCKED */
  0,			/* 3015 */
  0,			/* 3016 */
  0,			/* 3017 */
  0,			/* 3018 */
  0,			/* 3019 */
  0,			/* 3020 */
  0,			/* 3021 */
  0,			/* 3022 */
  0,			/* 3023 */
  0,			/* 3024 */
  0,			/* 3025 */
  0,			/* 3026 */
  0,			/* 3027 */
  0,			/* 3028 */
  0,			/* 3029 */
  0,			/* 3030 */
  0,			/* 3031 */
  0,			/* 3032 */
  0,			/* 3033 */
  0,			/* 3034 */
  0,			/* 3035 */
  0,			/* 3036 */
  0,			/* 3037 */
  0,			/* 3038 */
  0,			/* 3039 */
  0,			/* 3040 */
  0,			/* 3041 */
  0,			/* 3042 */
  0,			/* 3043 */
  0,			/* 3044 */
  0,			/* 3045 */
  0,			/* 3046 */
  0,			/* 3047 */
  0,			/* 3048 */
  0,			/* 3049 */
  0,			/* 3050 */
  0,			/* 3051 */
  0,			/* 3052 */
  0,			/* 3053 */
  0,			/* 3054 */
  0,			/* 3055 */
  0,			/* 3056 */
  0,			/* 3057 */
  0,			/* 3058 */
  0,			/* 3059 */
  0,			/* 3060 */
  0,			/* 3061 */
  0,			/* 3062 */
  0,			/* 3063 */
  0,			/* 3064 */
  0,			/* 3065 */
  0,			/* 3066 */
  0,			/* 3067 */
  0,			/* 3068 */
  0,			/* 3069 */
  0,			/* 3070 */
  0,			/* 3071 */
  0,			/* 3072 */
  0,			/* 3073 */
  0,			/* 3074 */
  0,			/* 3075 */
  0,			/* 3076 */
  0,			/* 3077 */
  0,			/* 3078 */
  0,			/* 3079 */
  0,			/* 3080 */
  0,			/* 3081 */
  0,			/* 3082 */
  0,			/* 3083 */
  0,			/* 3084 */
  0,			/* 3085 */
  0,			/* 3086 */
  0,			/* 3087 */
  0,			/* 3088 */
  0,			/* 3089 */
  0,			/* 3090 */
  0,			/* 3091 */
  0,			/* 3092 */
  0,			/* 3093 */
  0,			/* 3094 */
  0,			/* 3095 */
  0,			/* 3096 */
  0,			/* 3097 */
  0,			/* 3098 */
  0,			/* 3099 */
  0,			/* 3100 */
  0,			/* 3101 */
  0,			/* 3102 */
  0,			/* 3103 */
  0,			/* 3104 */
  0,			/* 3105 */
  0,			/* 3106 */
  0,			/* 3107 */
  0,			/* 3108 */
  0,			/* 3109 */
  0,			/* 3110 */
  0,			/* 3111 */
  0,			/* 3112 */
  0,			/* 3113 */
  0,			/* 3114 */
  0,			/* 3115 */
  0,			/* 3116 */
  0,			/* 3117 */
  0,			/* 3118 */
  0,			/* 3119 */
  0,			/* 3120 */
  0,			/* 3121 */
  0,			/* 3122 */
  0,			/* 3123 */
  0,			/* 3124 */
  0,			/* 3125 */
  0,			/* 3126 */
  0,			/* 3127 */
  0,			/* 3128 */
  0,			/* 3129 */
  0,			/* 3130 */
  0,			/* 3131 */
  0,			/* 3132 */
  0,			/* 3133 */
  0,			/* 3134 */
  0,			/* 3135 */
  0,			/* 3136 */
  0,			/* 3137 */
  0,			/* 3138 */
  0,			/* 3139 */
  0,			/* 3140 */
  0,			/* 3141 */
  0,			/* 3142 */
  0,			/* 3143 */
  0,			/* 3144 */
  0,			/* 3145 */
  0,			/* 3146 */
  0,			/* 3147 */
  0,			/* 3148 */
  0,			/* 3149 */
  0,			/* 3150 */
  0,			/* 3151 */
  0,			/* 3152 */
  0,			/* 3153 */
  0,			/* 3154 */
  0,			/* 3155 */
  0,			/* 3156 */
  0,			/* 3157 */
  0,			/* 3158 */
  0,			/* 3159 */
  0,			/* 3160 */
  0,			/* 3161 */
  0,			/* 3162 */
  0,			/* 3163 */
  0,			/* 3164 */
  0,			/* 3165 */
  0,			/* 3166 */
  0,			/* 3167 */
  0,			/* 3168 */
  0,			/* 3169 */
  0,			/* 3170 */
  0,			/* 3171 */
  0,			/* 3172 */
  0,			/* 3173 */
  0,			/* 3174 */
  0,			/* 3175 */
  0,			/* 3176 */
  0,			/* 3177 */
  0,			/* 3178 */
  0,			/* 3179 */
  0,			/* 3180 */
  0,			/* 3181 */
  0,			/* 3182 */
  0,			/* 3183 */
  0,			/* 3184 */
  0,			/* 3185 */
  0,			/* 3186 */
  0,			/* 3187 */
  0,			/* 3188 */
  0,			/* 3189 */
  0,			/* 3190 */
  0,			/* 3191 */
  0,			/* 3192 */
  0,			/* 3193 */
  0,			/* 3194 */
  0,			/* 3195 */
  0,			/* 3196 */
  0,			/* 3197 */
  0,			/* 3198 */
  0,			/* 3199 */
  0,			/* 3200 */
  0,			/* 3201 */
  0,			/* 3202 */
  0,			/* 3203 */
  0,			/* 3204 */
  0,			/* 3205 */
  0,			/* 3206 */
  0,			/* 3207 */
  0,			/* 3208 */
  0,			/* 3209 */
  0,			/* 3210 */
  0,			/* 3211 */
  0,			/* 3212 */
  0,			/* 3213 */
  0,			/* 3214 */
  0,			/* 3215 */
  0,			/* 3216 */
  0,			/* 3217 */
  0,			/* 3218 */
  0,			/* 3219 */
  0,			/* 3220 */
  0,			/* 3221 */
  0,			/* 3222 */
  0,			/* 3223 */
  0,			/* 3224 */
  0,			/* 3225 */
  0,			/* 3226 */
  0,			/* 3227 */
  0,			/* 3228 */
  0,			/* 3229 */
  0,			/* 3230 */
  0,			/* 3231 */
  0,			/* 3232 */
  0,			/* 3233 */
  0,			/* 3234 */
  0,			/* 3235 */
  0,			/* 3236 */
  0,			/* 3237 */
  0,			/* 3238 */
  0,			/* 3239 */
  0,			/* 3240 */
  0,			/* 3241 */
  0,			/* 3242 */
  0,			/* 3243 */
  0,			/* 3244 */
  0,			/* 3245 */
  0,			/* 3246 */
  0,			/* 3247 */
  0,			/* 3248 */
  0,			/* 3249 */
  0,			/* 3250 */
  0,			/* 3251 */
  0,			/* 3252 */
  0,			/* 3253 */
  0,			/* 3254 */
  0,			/* 3255 */
  0,			/* 3256 */
  0,			/* 3257 */
  0,			/* 3258 */
  0,			/* 3259 */
  0,			/* 3260 */
  0,			/* 3261 */
  0,			/* 3262 */
  0,			/* 3263 */
  0,			/* 3264 */
  0,			/* 3265 */
  0,			/* 3266 */
  0,			/* 3267 */
  0,			/* 3268 */
  0,			/* 3269 */
  0,			/* 3270 */
  0,			/* 3271 */
  0,			/* 3272 */
  0,			/* 3273 */
  0,			/* 3274 */
  0,			/* 3275 */
  0,			/* 3276 */
  0,			/* 3277 */
  0,			/* 3278 */
  0,			/* 3279 */
  0,			/* 3280 */
  0,			/* 3281 */
  0,			/* 3282 */
  0,			/* 3283 */
  0,			/* 3284 */
  0,			/* 3285 */
  0,			/* 3286 */
  0,			/* 3287 */
  0,			/* 3288 */
  0,			/* 3289 */
  0,			/* 3290 */
  0,			/* 3291 */
  0,			/* 3292 */
  0,			/* 3293 */
  0,			/* 3294 */
  0,			/* 3295 */
  0,			/* 3296 */
  0,			/* 3297 */
  0,			/* 3298 */
  0,			/* 3299 */
  0,			/* 3300 */
  0,			/* 3301 */
  0,			/* 3302 */
  0,			/* 3303 */
  0,			/* 3304 */
  0,			/* 3305 */
  0,			/* 3306 */
  0,			/* 3307 */
  0,			/* 3308 */
  0,			/* 3309 */
  0,			/* 3310 */
  0,			/* 3311 */
  0,			/* 3312 */
  0,			/* 3313 */
  0,			/* 3314 */
  0,			/* 3315 */
  0,			/* 3316 */
  0,			/* 3317 */
  0,			/* 3318 */
  0,			/* 3319 */
  0,			/* 3320 */
  0,			/* 3321 */
  0,			/* 3322 */
  0,			/* 3323 */
  0,			/* 3324 */
  0,			/* 3325 */
  0,			/* 3326 */
  0,			/* 3327 */
  0,			/* 3328 */
  0,			/* 3329 */
  0,			/* 3330 */
  0,			/* 3331 */
  0,			/* 3332 */
  0,			/* 3333 */
  0,			/* 3334 */
  0,			/* 3335 */
  0,			/* 3336 */
  0,			/* 3337 */
  0,			/* 3338 */
  0,			/* 3339 */
  0,			/* 3340 */
  0,			/* 3341 */
  0,			/* 3342 */
  0,			/* 3343 */
  0,			/* 3344 */
  0,			/* 3345 */
  0,			/* 3346 */
  0,			/* 3347 */
  0,			/* 3348 */
  0,			/* 3349 */
  0,			/* 3350 */
  0,			/* 3351 */
  0,			/* 3352 */
  0,			/* 3353 */
  0,			/* 3354 */
  0,			/* 3355 */
  0,			/* 3356 */
  0,			/* 3357 */
  0,			/* 3358 */
  0,			/* 3359 */
  0,			/* 3360 */
  0,			/* 3361 */
  0,			/* 3362 */
  0,			/* 3363 */
  0,			/* 3364 */
  0,			/* 3365 */
  0,			/* 3366 */
  0,			/* 3367 */
  0,			/* 3368 */
  0,			/* 3369 */
  0,			/* 3370 */
  0,			/* 3371 */
  0,			/* 3372 */
  0,			/* 3373 */
  0,			/* 3374 */
  0,			/* 3375 */
  0,			/* 3376 */
  0,			/* 3377 */
  0,			/* 3378 */
  0,			/* 3379 */
  0,			/* 3380 */
  0,			/* 3381 */
  0,			/* 3382 */
  0,			/* 3383 */
  0,			/* 3384 */
  0,			/* 3385 */
  0,			/* 3386 */
  0,			/* 3387 */
  0,			/* 3388 */
  0,			/* 3389 */
  0,			/* 3390 */
  0,			/* 3391 */
  0,			/* 3392 */
  0,			/* 3393 */
  0,			/* 3394 */
  0,			/* 3395 */
  0,			/* 3396 */
  0,			/* 3397 */
  0,			/* 3398 */
  0,			/* 3399 */
  0,			/* 3400 */
  0,			/* 3401 */
  0,			/* 3402 */
  0,			/* 3403 */
  0,			/* 3404 */
  0,			/* 3405 */
  0,			/* 3406 */
  0,			/* 3407 */
  0,			/* 3408 */
  0,			/* 3409 */
  0,			/* 3410 */
  0,			/* 3411 */
  0,			/* 3412 */
  0,			/* 3413 */
  0,			/* 3414 */
  0,			/* 3415 */
  0,			/* 3416 */
  0,			/* 3417 */
  0,			/* 3418 */
  0,			/* 3419 */
  0,			/* 3420 */
  0,			/* 3421 */
  0,			/* 3422 */
  0,			/* 3423 */
  0,			/* 3424 */
  0,			/* 3425 */
  0,			/* 3426 */
  0,			/* 3427 */
  0,			/* 3428 */
  0,			/* 3429 */
  0,			/* 3430 */
  0,			/* 3431 */
  0,			/* 3432 */
  0,			/* 3433 */
  0,			/* 3434 */
  0,			/* 3435 */
  0,			/* 3436 */
  0,			/* 3437 */
  0,			/* 3438 */
  0,			/* 3439 */
  0,			/* 3440 */
  0,			/* 3441 */
  0,			/* 3442 */
  0,			/* 3443 */
  0,			/* 3444 */
  0,			/* 3445 */
  0,			/* 3446 */
  0,			/* 3447 */
  0,			/* 3448 */
  0,			/* 3449 */
  0,			/* 3450 */
  0,			/* 3451 */
  0,			/* 3452 */
  0,			/* 3453 */
  0,			/* 3454 */
  0,			/* 3455 */
  0,			/* 3456 */
  0,			/* 3457 */
  0,			/* 3458 */
  0,			/* 3459 */
  0,			/* 3460 */
  0,			/* 3461 */
  0,			/* 3462 */
  0,			/* 3463 */
  0,			/* 3464 */
  0,			/* 3465 */
  0,			/* 3466 */
  0,			/* 3467 */
  0,			/* 3468 */
  0,			/* 3469 */
  0,			/* 3470 */
  0,			/* 3471 */
  0,			/* 3472 */
  0,			/* 3473 */
  0,			/* 3474 */
  0,			/* 3475 */
  0,			/* 3476 */
  0,			/* 3477 */
  0,			/* 3478 */
  0,			/* 3479 */
  0,			/* 3480 */
  0,			/* 3481 */
  0,			/* 3482 */
  0,			/* 3483 */
  0,			/* 3484 */
  0,			/* 3485 */
  0,			/* 3486 */
  0,			/* 3487 */
  0,			/* 3488 */
  0,			/* 3489 */
  0,			/* 3490 */
  0,			/* 3491 */
  0,			/* 3492 */
  0,			/* 3493 */
  0,			/* 3494 */
  0,			/* 3495 */
  0,			/* 3496 */
  0,			/* 3497 */
  0,			/* 3498 */
  0,			/* 3499 */
  0,			/* 3500 */
  0,			/* 3501 */
  0,			/* 3502 */
  0,			/* 3503 */
  0,			/* 3504 */
  0,			/* 3505 */
  0,			/* 3506 */
  0,			/* 3507 */
  0,			/* 3508 */
  0,			/* 3509 */
  0,			/* 3510 */
  0,			/* 3511 */
  0,			/* 3512 */
  0,			/* 3513 */
  0,			/* 3514 */
  0,			/* 3515 */
  0,			/* 3516 */
  0,			/* 3517 */
  0,			/* 3518 */
  0,			/* 3519 */
  0,			/* 3520 */
  0,			/* 3521 */
  0,			/* 3522 */
  0,			/* 3523 */
  0,			/* 3524 */
  0,			/* 3525 */
  0,			/* 3526 */
  0,			/* 3527 */
  0,			/* 3528 */
  0,			/* 3529 */
  0,			/* 3530 */
  0,			/* 3531 */
  0,			/* 3532 */
  0,			/* 3533 */
  0,			/* 3534 */
  0,			/* 3535 */
  0,			/* 3536 */
  0,			/* 3537 */
  0,			/* 3538 */
  0,			/* 3539 */
  0,			/* 3540 */
  0,			/* 3541 */
  0,			/* 3542 */
  0,			/* 3543 */
  0,			/* 3544 */
  0,			/* 3545 */
  0,			/* 3546 */
  0,			/* 3547 */
  0,			/* 3548 */
  0,			/* 3549 */
  0,			/* 3550 */
  0,			/* 3551 */
  0,			/* 3552 */
  0,			/* 3553 */
  0,			/* 3554 */
  0,			/* 3555 */
  0,			/* 3556 */
  0,			/* 3557 */
  0,			/* 3558 */
  0,			/* 3559 */
  0,			/* 3560 */
  0,			/* 3561 */
  0,			/* 3562 */
  0,			/* 3563 */
  0,			/* 3564 */
  0,			/* 3565 */
  0,			/* 3566 */
  0,			/* 3567 */
  0,			/* 3568 */
  0,			/* 3569 */
  0,			/* 3570 */
  0,			/* 3571 */
  0,			/* 3572 */
  0,			/* 3573 */
  0,			/* 3574 */
  0,			/* 3575 */
  0,			/* 3576 */
  0,			/* 3577 */
  0,			/* 3578 */
  0,			/* 3579 */
  0,			/* 3580 */
  0,			/* 3581 */
  0,			/* 3582 */
  0,			/* 3583 */
  0,			/* 3584 */
  0,			/* 3585 */
  0,			/* 3586 */
  0,			/* 3587 */
  0,			/* 3588 */
  0,			/* 3589 */
  0,			/* 3590 */
  0,			/* 3591 */
  0,			/* 3592 */
  0,			/* 3593 */
  0,			/* 3594 */
  0,			/* 3595 */
  0,			/* 3596 */
  0,			/* 3597 */
  0,			/* 3598 */
  0,			/* 3599 */
  0,			/* 3600 */
  0,			/* 3601 */
  0,			/* 3602 */
  0,			/* 3603 */
  0,			/* 3604 */
  0,			/* 3605 */
  0,			/* 3606 */
  0,			/* 3607 */
  0,			/* 3608 */
  0,			/* 3609 */
  0,			/* 3610 */
  0,			/* 3611 */
  0,			/* 3612 */
  0,			/* 3613 */
  0,			/* 3614 */
  0,			/* 3615 */
  0,			/* 3616 */
  0,			/* 3617 */
  0,			/* 3618 */
  0,			/* 3619 */
  0,			/* 3620 */
  0,			/* 3621 */
  0,			/* 3622 */
  0,			/* 3623 */
  0,			/* 3624 */
  0,			/* 3625 */
  0,			/* 3626 */
  0,			/* 3627 */
  0,			/* 3628 */
  0,			/* 3629 */
  0,			/* 3630 */
  0,			/* 3631 */
  0,			/* 3632 */
  0,			/* 3633 */
  0,			/* 3634 */
  0,			/* 3635 */
  0,			/* 3636 */
  0,			/* 3637 */
  0,			/* 3638 */
  0,			/* 3639 */
  0,			/* 3640 */
  0,			/* 3641 */
  0,			/* 3642 */
  0,			/* 3643 */
  0,			/* 3644 */
  0,			/* 3645 */
  0,			/* 3646 */
  0,			/* 3647 */
  0,			/* 3648 */
  0,			/* 3649 */
  0,			/* 3650 */
  0,			/* 3651 */
  0,			/* 3652 */
  0,			/* 3653 */
  0,			/* 3654 */
  0,			/* 3655 */
  0,			/* 3656 */
  0,			/* 3657 */
  0,			/* 3658 */
  0,			/* 3659 */
  0,			/* 3660 */
  0,			/* 3661 */
  0,			/* 3662 */
  0,			/* 3663 */
  0,			/* 3664 */
  0,			/* 3665 */
  0,			/* 3666 */
  0,			/* 3667 */
  0,			/* 3668 */
  0,			/* 3669 */
  0,			/* 3670 */
  0,			/* 3671 */
  0,			/* 3672 */
  0,			/* 3673 */
  0,			/* 3674 */
  0,			/* 3675 */
  0,			/* 3676 */
  0,			/* 3677 */
  0,			/* 3678 */
  0,			/* 3679 */
  0,			/* 3680 */
  0,			/* 3681 */
  0,			/* 3682 */
  0,			/* 3683 */
  0,			/* 3684 */
  0,			/* 3685 */
  0,			/* 3686 */
  0,			/* 3687 */
  0,			/* 3688 */
  0,			/* 3689 */
  0,			/* 3690 */
  0,			/* 3691 */
  0,			/* 3692 */
  0,			/* 3693 */
  0,			/* 3694 */
  0,			/* 3695 */
  0,			/* 3696 */
  0,			/* 3697 */
  0,			/* 3698 */
  0,			/* 3699 */
  0,			/* 3700 */
  0,			/* 3701 */
  0,			/* 3702 */
  0,			/* 3703 */
  0,			/* 3704 */
  0,			/* 3705 */
  0,			/* 3706 */
  0,			/* 3707 */
  0,			/* 3708 */
  0,			/* 3709 */
  0,			/* 3710 */
  0,			/* 3711 */
  0,			/* 3712 */
  0,			/* 3713 */
  0,			/* 3714 */
  0,			/* 3715 */
  0,			/* 3716 */
  0,			/* 3717 */
  0,			/* 3718 */
  0,			/* 3719 */
  0,			/* 3720 */
  0,			/* 3721 */
  0,			/* 3722 */
  0,			/* 3723 */
  0,			/* 3724 */
  0,			/* 3725 */
  0,			/* 3726 */
  0,			/* 3727 */
  0,			/* 3728 */
  0,			/* 3729 */
  0,			/* 3730 */
  0,			/* 3731 */
  0,			/* 3732 */
  0,			/* 3733 */
  0,			/* 3734 */
  0,			/* 3735 */
  0,			/* 3736 */
  0,			/* 3737 */
  0,			/* 3738 */
  0,			/* 3739 */
  0,			/* 3740 */
  0,			/* 3741 */
  0,			/* 3742 */
  0,			/* 3743 */
  0,			/* 3744 */
  0,			/* 3745 */
  0,			/* 3746 */
  0,			/* 3747 */
  0,			/* 3748 */
  0,			/* 3749 */
  0,			/* 3750 */
  0,			/* 3751 */
  0,			/* 3752 */
  0,			/* 3753 */
  0,			/* 3754 */
  0,			/* 3755 */
  0,			/* 3756 */
  0,			/* 3757 */
  0,			/* 3758 */
  0,			/* 3759 */
  0,			/* 3760 */
  0,			/* 3761 */
  0,			/* 3762 */
  0,			/* 3763 */
  0,			/* 3764 */
  0,			/* 3765 */
  0,			/* 3766 */
  0,			/* 3767 */
  0,			/* 3768 */
  0,			/* 3769 */
  0,			/* 3770 */
  0,			/* 3771 */
  0,			/* 3772 */
  0,			/* 3773 */
  0,			/* 3774 */
  0,			/* 3775 */
  0,			/* 3776 */
  0,			/* 3777 */
  0,			/* 3778 */
  0,			/* 3779 */
  0,			/* 3780 */
  0,			/* 3781 */
  0,			/* 3782 */
  0,			/* 3783 */
  0,			/* 3784 */
  0,			/* 3785 */
  0,			/* 3786 */
  0,			/* 3787 */
  0,			/* 3788 */
  0,			/* 3789 */
  0,			/* 3790 */
  0,			/* 3791 */
  0,			/* 3792 */
  0,			/* 3793 */
  0,			/* 3794 */
  0,			/* 3795 */
  0,			/* 3796 */
  0,			/* 3797 */
  0,			/* 3798 */
  0,			/* 3799 */
  0,			/* 3800 */
  0,			/* 3801 */
  0,			/* 3802 */
  0,			/* 3803 */
  0,			/* 3804 */
  0,			/* 3805 */
  0,			/* 3806 */
  0,			/* 3807 */
  0,			/* 3808 */
  0,			/* 3809 */
  0,			/* 3810 */
  0,			/* 3811 */
  0,			/* 3812 */
  0,			/* 3813 */
  0,			/* 3814 */
  0,			/* 3815 */
  0,			/* 3816 */
  0,			/* 3817 */
  0,			/* 3818 */
  0,			/* 3819 */
  0,			/* 3820 */
  0,			/* 3821 */
  0,			/* 3822 */
  0,			/* 3823 */
  0,			/* 3824 */
  0,			/* 3825 */
  0,			/* 3826 */
  0,			/* 3827 */
  0,			/* 3828 */
  0,			/* 3829 */
  0,			/* 3830 */
  0,			/* 3831 */
  0,			/* 3832 */
  0,			/* 3833 */
  0,			/* 3834 */
  0,			/* 3835 */
  0,			/* 3836 */
  0,			/* 3837 */
  0,			/* 3838 */
  0,			/* 3839 */
  0,			/* 3840 */
  0,			/* 3841 */
  0,			/* 3842 */
  0,			/* 3843 */
  0,			/* 3844 */
  0,			/* 3845 */
  0,			/* 3846 */
  0,			/* 3847 */
  0,			/* 3848 */
  0,			/* 3849 */
  0,			/* 3850 */
  0,			/* 3851 */
  0,			/* 3852 */
  0,			/* 3853 */
  0,			/* 3854 */
  0,			/* 3855 */
  0,			/* 3856 */
  0,			/* 3857 */
  0,			/* 3858 */
  0,			/* 3859 */
  0,			/* 3860 */
  0,			/* 3861 */
  0,			/* 3862 */
  0,			/* 3863 */
  0,			/* 3864 */
  0,			/* 3865 */
  0,			/* 3866 */
  0,			/* 3867 */
  0,			/* 3868 */
  0,			/* 3869 */
  0,			/* 3870 */
  0,			/* 3871 */
  0,			/* 3872 */
  0,			/* 3873 */
  0,			/* 3874 */
  0,			/* 3875 */
  0,			/* 3876 */
  0,			/* 3877 */
  0,			/* 3878 */
  0,			/* 3879 */
  0,			/* 3880 */
  0,			/* 3881 */
  0,			/* 3882 */
  0,			/* 3883 */
  0,			/* 3884 */
  0,			/* 3885 */
  0,			/* 3886 */
  0,			/* 3887 */
  0,			/* 3888 */
  0,			/* 3889 */
  0,			/* 3890 */
  0,			/* 3891 */
  0,			/* 3892 */
  0,			/* 3893 */
  0,			/* 3894 */
  0,			/* 3895 */
  0,			/* 3896 */
  0,			/* 3897 */
  0,			/* 3898 */
  0,			/* 3899 */
  0,			/* 3900 */
  0,			/* 3901 */
  0,			/* 3902 */
  0,			/* 3903 */
  0,			/* 3904 */
  0,			/* 3905 */
  0,			/* 3906 */
  0,			/* 3907 */
  0,			/* 3908 */
  0,			/* 3909 */
  0,			/* 3910 */
  0,			/* 3911 */
  0,			/* 3912 */
  0,			/* 3913 */
  0,			/* 3914 */
  0,			/* 3915 */
  0,			/* 3916 */
  0,			/* 3917 */
  0,			/* 3918 */
  0,			/* 3919 */
  0,			/* 3920 */
  0,			/* 3921 */
  0,			/* 3922 */
  0,			/* 3923 */
  0,			/* 3924 */
  0,			/* 3925 */
  0,			/* 3926 */
  0,			/* 3927 */
  0,			/* 3928 */
  0,			/* 3929 */
  0,			/* 3930 */
  0,			/* 3931 */
  0,			/* 3932 */
  0,			/* 3933 */
  0,			/* 3934 */
  0,			/* 3935 */
  0,			/* 3936 */
  0,			/* 3937 */
  0,			/* 3938 */
  0,			/* 3939 */
  0,			/* 3940 */
  0,			/* 3941 */
  0,			/* 3942 */
  0,			/* 3943 */
  0,			/* 3944 */
  0,			/* 3945 */
  0,			/* 3946 */
  0,			/* 3947 */
  0,			/* 3948 */
  0,			/* 3949 */
  0,			/* 3950 */
  0,			/* 3951 */
  0,			/* 3952 */
  0,			/* 3953 */
  0,			/* 3954 */
  0,			/* 3955 */
  0,			/* 3956 */
  0,			/* 3957 */
  0,			/* 3958 */
  0,			/* 3959 */
  0,			/* 3960 */
  0,			/* 3961 */
  0,			/* 3962 */
  0,			/* 3963 */
  0,			/* 3964 */
  0,			/* 3965 */
  0,			/* 3966 */
  0,			/* 3967 */
  0,			/* 3968 */
  0,			/* 3969 */
  0,			/* 3970 */
  0,			/* 3971 */
  0,			/* 3972 */
  0,			/* 3973 */
  0,			/* 3974 */
  0,			/* 3975 */
  0,			/* 3976 */
  0,			/* 3977 */
  0,			/* 3978 */
  0,			/* 3979 */
  0,			/* 3980 */
  0,			/* 3981 */
  0,			/* 3982 */
  0,			/* 3983 */
  0,			/* 3984 */
  0,			/* 3985 */
  0,			/* 3986 */
  0,			/* 3987 */
  0,			/* 3988 */
  0,			/* 3989 */
  0,			/* 3990 */
  0,			/* 3991 */
  0,			/* 3992 */
  0,			/* 3993 */
  0,			/* 3994 */
  0,			/* 3995 */
  0,			/* 3996 */
  0,			/* 3997 */
  0,			/* 3998 */
  0,			/* 3999 */
  0,			/* ERROR_WINS_INTERNAL */
  0,			/* ERROR_CAN_NOT_DEL_LOCAL_WINS */
  0,			/* ERROR_STATIC_INIT */
  0,			/* ERROR_INC_BACKUP */
  0,			/* ERROR_FULL_BACKUP */
  0,			/* ERROR_REC_NON_EXISTENT */
  0,			/* ERROR_RPL_NOT_ALLOWED */
  0,			/* 4007 */
  0,			/* 4008 */
  0,			/* 4009 */
  0,			/* 4010 */
  0,			/* 4011 */
  0,			/* 4012 */
  0,			/* 4013 */
  0,			/* 4014 */
  0,			/* 4015 */
  0,			/* 4016 */
  0,			/* 4017 */
  0,			/* 4018 */
  0,			/* 4019 */
  0,			/* 4020 */
  0,			/* 4021 */
  0,			/* 4022 */
  0,			/* 4023 */
  0,			/* 4024 */
  0,			/* 4025 */
  0,			/* 4026 */
  0,			/* 4027 */
  0,			/* 4028 */
  0,			/* 4029 */
  0,			/* 4030 */
  0,			/* 4031 */
  0,			/* 4032 */
  0,			/* 4033 */
  0,			/* 4034 */
  0,			/* 4035 */
  0,			/* 4036 */
  0,			/* 4037 */
  0,			/* 4038 */
  0,			/* 4039 */
  0,			/* 4040 */
  0,			/* 4041 */
  0,			/* 4042 */
  0,			/* 4043 */
  0,			/* 4044 */
  0,			/* 4045 */
  0,			/* 4046 */
  0,			/* 4047 */
  0,			/* 4048 */
  0,			/* 4049 */
  0,			/* 4050 */
  0,			/* 4051 */
  0,			/* 4052 */
  0,			/* 4053 */
  0,			/* 4054 */
  0,			/* 4055 */
  0,			/* 4056 */
  0,			/* 4057 */
  0,			/* 4058 */
  0,			/* 4059 */
  0,			/* 4060 */
  0,			/* 4061 */
  0,			/* 4062 */
  0,			/* 4063 */
  0,			/* 4064 */
  0,			/* 4065 */
  0,			/* 4066 */
  0,			/* 4067 */
  0,			/* 4068 */
  0,			/* 4069 */
  0,			/* 4070 */
  0,			/* 4071 */
  0,			/* 4072 */
  0,			/* 4073 */
  0,			/* 4074 */
  0,			/* 4075 */
  0,			/* 4076 */
  0,			/* 4077 */
  0,			/* 4078 */
  0,			/* 4079 */
  0,			/* 4080 */
  0,			/* 4081 */
  0,			/* 4082 */
  0,			/* 4083 */
  0,			/* 4084 */
  0,			/* 4085 */
  0,			/* 4086 */
  0,			/* 4087 */
  0,			/* 4088 */
  0,			/* 4089 */
  0,			/* 4090 */
  0,			/* 4091 */
  0,			/* 4092 */
  0,			/* 4093 */
  0,			/* 4094 */
  0,			/* 4095 */
  0,			/* 4096 */
  0,			/* 4097 */
  0,			/* 4098 */
  0,			/* 4099 */
  0,			/* ERROR_DHCP_ADDRESS_CONFLICT */
  0,			/* 4101 */
  0,			/* 4102 */
  0,			/* 4103 */
  0,			/* 4104 */
  0,			/* 4105 */
  0,			/* 4106 */
  0,			/* 4107 */
  0,			/* 4108 */
  0,			/* 4109 */
  0,			/* 4110 */
  0,			/* 4111 */
  0,			/* 4112 */
  0,			/* 4113 */
  0,			/* 4114 */
  0,			/* 4115 */
  0,			/* 4116 */
  0,			/* 4117 */
  0,			/* 4118 */
  0,			/* 4119 */
  0,			/* 4120 */
  0,			/* 4121 */
  0,			/* 4122 */
  0,			/* 4123 */
  0,			/* 4124 */
  0,			/* 4125 */
  0,			/* 4126 */
  0,			/* 4127 */
  0,			/* 4128 */
  0,			/* 4129 */
  0,			/* 4130 */
  0,			/* 4131 */
  0,			/* 4132 */
  0,			/* 4133 */
  0,			/* 4134 */
  0,			/* 4135 */
  0,			/* 4136 */
  0,			/* 4137 */
  0,			/* 4138 */
  0,			/* 4139 */
  0,			/* 4140 */
  0,			/* 4141 */
  0,			/* 4142 */
  0,			/* 4143 */
  0,			/* 4144 */
  0,			/* 4145 */
  0,			/* 4146 */
  0,			/* 4147 */
  0,			/* 4148 */
  0,			/* 4149 */
  0,			/* 4150 */
  0,			/* 4151 */
  0,			/* 4152 */
  0,			/* 4153 */
  0,			/* 4154 */
  0,			/* 4155 */
  0,			/* 4156 */
  0,			/* 4157 */
  0,			/* 4158 */
  0,			/* 4159 */
  0,			/* 4160 */
  0,			/* 4161 */
  0,			/* 4162 */
  0,			/* 4163 */
  0,			/* 4164 */
  0,			/* 4165 */
  0,			/* 4166 */
  0,			/* 4167 */
  0,			/* 4168 */
  0,			/* 4169 */
  0,			/* 4170 */
  0,			/* 4171 */
  0,			/* 4172 */
  0,			/* 4173 */
  0,			/* 4174 */
  0,			/* 4175 */
  0,			/* 4176 */
  0,			/* 4177 */
  0,			/* 4178 */
  0,			/* 4179 */
  0,			/* 4180 */
  0,			/* 4181 */
  0,			/* 4182 */
  0,			/* 4183 */
  0,			/* 4184 */
  0,			/* 4185 */
  0,			/* 4186 */
  0,			/* 4187 */
  0,			/* 4188 */
  0,			/* 4189 */
  0,			/* 4190 */
  0,			/* 4191 */
  0,			/* 4192 */
  0,			/* 4193 */
  0,			/* 4194 */
  0,			/* 4195 */
  0,			/* 4196 */
  0,			/* 4197 */
  0,			/* 4198 */
  0,			/* 4199 */
  0,			/* ERROR_WMI_GUID_NOT_FOUND */
  0,			/* ERROR_WMI_INSTANCE_NOT_FOUND */
  0,			/* ERROR_WMI_ITEMID_NOT_FOUND */
  0,			/* ERROR_WMI_TRY_AGAIN */
  0,			/* ERROR_WMI_DP_NOT_FOUND */
  0,			/* ERROR_WMI_UNRESOLVED_INSTANCE_REF */
  0,			/* ERROR_WMI_ALREADY_ENABLED */
  0,			/* ERROR_WMI_GUID_DISCONNECTED */
  0,			/* ERROR_WMI_SERVER_UNAVAILABLE */
  0,			/* ERROR_WMI_DP_FAILED */
  0,			/* ERROR_WMI_INVALID_MOF */
  0,			/* ERROR_WMI_INVALID_REGINFO */
  0,			/* ERROR_WMI_ALREADY_DISABLED */
  0,			/* ERROR_WMI_READ_ONLY */
  0,			/* ERROR_WMI_SET_FAILURE */
  0,			/* 4215 */
  0,			/* 4216 */
  0,			/* 4217 */
  0,			/* 4218 */
  0,			/* 4219 */
  0,			/* 4220 */
  0,			/* 4221 */
  0,			/* 4222 */
  0,			/* 4223 */
  0,			/* 4224 */
  0,			/* 4225 */
  0,			/* 4226 */
  0,			/* 4227 */
  0,			/* 4228 */
  0,			/* 4229 */
  0,			/* 4230 */
  0,			/* 4231 */
  0,			/* 4232 */
  0,			/* 4233 */
  0,			/* 4234 */
  0,			/* 4235 */
  0,			/* 4236 */
  0,			/* 4237 */
  0,			/* 4238 */
  0,			/* 4239 */
  0,			/* 4240 */
  0,			/* 4241 */
  0,			/* 4242 */
  0,			/* 4243 */
  0,			/* 4244 */
  0,			/* 4245 */
  0,			/* 4246 */
  0,			/* 4247 */
  0,			/* 4248 */
  0,			/* 4249 */
  0,			/* 4250 */
  0,			/* 4251 */
  0,			/* 4252 */
  0,			/* 4253 */
  0,			/* 4254 */
  0,			/* 4255 */
  0,			/* 4256 */
  0,			/* 4257 */
  0,			/* 4258 */
  0,			/* 4259 */
  0,			/* 4260 */
  0,			/* 4261 */
  0,			/* 4262 */
  0,			/* 4263 */
  0,			/* 4264 */
  0,			/* 4265 */
  0,			/* 4266 */
  0,			/* 4267 */
  0,			/* 4268 */
  0,			/* 4269 */
  0,			/* 4270 */
  0,			/* 4271 */
  0,			/* 4272 */
  0,			/* 4273 */
  0,			/* 4274 */
  0,			/* 4275 */
  0,			/* 4276 */
  0,			/* 4277 */
  0,			/* 4278 */
  0,			/* 4279 */
  0,			/* 4280 */
  0,			/* 4281 */
  0,			/* 4282 */
  0,			/* 4283 */
  0,			/* 4284 */
  0,			/* 4285 */
  0,			/* 4286 */
  0,			/* 4287 */
  0,			/* 4288 */
  0,			/* 4289 */
  0,			/* 4290 */
  0,			/* 4291 */
  0,			/* 4292 */
  0,			/* 4293 */
  0,			/* 4294 */
  0,			/* 4295 */
  0,			/* 4296 */
  0,			/* 4297 */
  0,			/* 4298 */
  0,			/* 4299 */
  0,			/* ERROR_INVALID_MEDIA */
  0,			/* ERROR_INVALID_LIBRARY */
  0,			/* ERROR_INVALID_MEDIA_POOL */
  0,			/* ERROR_DRIVE_MEDIA_MISMATCH */
  0,			/* ERROR_MEDIA_OFFLINE */
  0,			/* ERROR_LIBRARY_OFFLINE */
  0,			/* ERROR_EMPTY */
  0,			/* ERROR_NOT_EMPTY */
  0,			/* ERROR_MEDIA_UNAVAILABLE */
  0,			/* ERROR_RESOURCE_DISABLED */
  0,			/* ERROR_INVALID_CLEANER */
  0,			/* ERROR_UNABLE_TO_CLEAN */
  0,			/* ERROR_OBJECT_NOT_FOUND */
  0,			/* ERROR_DATABASE_FAILURE */
  0,			/* ERROR_DATABASE_FULL */
  0,			/* ERROR_MEDIA_INCOMPATIBLE */
  0,			/* ERROR_RESOURCE_NOT_PRESENT */
  0,			/* ERROR_INVALID_OPERATION */
  0,			/* ERROR_MEDIA_NOT_AVAILABLE */
  0,			/* ERROR_DEVICE_NOT_AVAILABLE */
  0,			/* ERROR_REQUEST_REFUSED */
  0,			/* ERROR_INVALID_DRIVE_OBJECT */
  0,			/* ERROR_LIBRARY_FULL */
  0,			/* ERROR_MEDIUM_NOT_ACCESSIBLE */
  0,			/* ERROR_UNABLE_TO_LOAD_MEDIUM */
  0,			/* ERROR_UNABLE_TO_INVENTORY_DRIVE */
  0,			/* ERROR_UNABLE_TO_INVENTORY_SLOT */
  0,			/* ERROR_UNABLE_TO_INVENTORY_TRANSPORT */
  0,			/* ERROR_TRANSPORT_FULL */
  0,			/* ERROR_CONTROLLING_IEPORT */
  0,			/* ERROR_UNABLE_TO_EJECT_MOUNTED_MEDIA */
  0,			/* ERROR_CLEANER_SLOT_SET */
  0,			/* ERROR_CLEANER_SLOT_NOT_SET */
  0,			/* ERROR_CLEANER_CARTRIDGE_SPENT */
  0,			/* ERROR_UNEXPECTED_OMID */
  0,			/* ERROR_CANT_DELETE_LAST_ITEM */
  0,			/* ERROR_MESSAGE_EXCEEDS_MAX_SIZE */
  0,			/* ERROR_VOLUME_CONTAINS_SYS_FILES */
  0,			/* ERROR_INDIGENOUS_TYPE */
  0,			/* ERROR_NO_SUPPORTING_DRIVES */
  0,			/* ERROR_CLEANER_CARTRIDGE_INSTALLED */
  0,			/* ERROR_IEPORT_FULL */
  0,			/* 4342 */
  0,			/* 4343 */
  0,			/* 4344 */
  0,			/* 4345 */
  0,			/* 4346 */
  0,			/* 4347 */
  0,			/* 4348 */
  0,			/* 4349 */
  0,			/* ERROR_FILE_OFFLINE */
  0,			/* ERROR_REMOTE_STORAGE_NOT_ACTIVE */
  0,			/* ERROR_REMOTE_STORAGE_MEDIA_ERROR */
  0,			/* 4353 */
  0,			/* 4354 */
  0,			/* 4355 */
  0,			/* 4356 */
  0,			/* 4357 */
  0,			/* 4358 */
  0,			/* 4359 */
  0,			/* 4360 */
  0,			/* 4361 */
  0,			/* 4362 */
  0,			/* 4363 */
  0,			/* 4364 */
  0,			/* 4365 */
  0,			/* 4366 */
  0,			/* 4367 */
  0,			/* 4368 */
  0,			/* 4369 */
  0,			/* 4370 */
  0,			/* 4371 */
  0,			/* 4372 */
  0,			/* 4373 */
  0,			/* 4374 */
  0,			/* 4375 */
  0,			/* 4376 */
  0,			/* 4377 */
  0,			/* 4378 */
  0,			/* 4379 */
  0,			/* 4380 */
  0,			/* 4381 */
  0,			/* 4382 */
  0,			/* 4383 */
  0,			/* 4384 */
  0,			/* 4385 */
  0,			/* 4386 */
  0,			/* 4387 */
  0,			/* 4388 */
  0,			/* 4389 */
  0,			/* ERROR_NOT_A_REPARSE_POINT */
  0,			/* ERROR_REPARSE_ATTRIBUTE_CONFLICT */
  0,			/* ERROR_INVALID_REPARSE_DATA */
  0,			/* ERROR_REPARSE_TAG_INVALID */
  0,			/* ERROR_REPARSE_TAG_MISMATCH */
  0,			/* 4395 */
  0,			/* 4396 */
  0,			/* 4397 */
  0,			/* 4398 */
  0,			/* 4399 */
  0,			/* 4400 */
  0,			/* 4401 */
  0,			/* 4402 */
  0,			/* 4403 */
  0,			/* 4404 */
  0,			/* 4405 */
  0,			/* 4406 */
  0,			/* 4407 */
  0,			/* 4408 */
  0,			/* 4409 */
  0,			/* 4410 */
  0,			/* 4411 */
  0,			/* 4412 */
  0,			/* 4413 */
  0,			/* 4414 */
  0,			/* 4415 */
  0,			/* 4416 */
  0,			/* 4417 */
  0,			/* 4418 */
  0,			/* 4419 */
  0,			/* 4420 */
  0,			/* 4421 */
  0,			/* 4422 */
  0,			/* 4423 */
  0,			/* 4424 */
  0,			/* 4425 */
  0,			/* 4426 */
  0,			/* 4427 */
  0,			/* 4428 */
  0,			/* 4429 */
  0,			/* 4430 */
  0,			/* 4431 */
  0,			/* 4432 */
  0,			/* 4433 */
  0,			/* 4434 */
  0,			/* 4435 */
  0,			/* 4436 */
  0,			/* 4437 */
  0,			/* 4438 */
  0,			/* 4439 */
  0,			/* 4440 */
  0,			/* 4441 */
  0,			/* 4442 */
  0,			/* 4443 */
  0,			/* 4444 */
  0,			/* 4445 */
  0,			/* 4446 */
  0,			/* 4447 */
  0,			/* 4448 */
  0,			/* 4449 */
  0,			/* 4450 */
  0,			/* 4451 */
  0,			/* 4452 */
  0,			/* 4453 */
  0,			/* 4454 */
  0,			/* 4455 */
  0,			/* 4456 */
  0,			/* 4457 */
  0,			/* 4458 */
  0,			/* 4459 */
  0,			/* 4460 */
  0,			/* 4461 */
  0,			/* 4462 */
  0,			/* 4463 */
  0,			/* 4464 */
  0,			/* 4465 */
  0,			/* 4466 */
  0,			/* 4467 */
  0,			/* 4468 */
  0,			/* 4469 */
  0,			/* 4470 */
  0,			/* 4471 */
  0,			/* 4472 */
  0,			/* 4473 */
  0,			/* 4474 */
  0,			/* 4475 */
  0,			/* 4476 */
  0,			/* 4477 */
  0,			/* 4478 */
  0,			/* 4479 */
  0,			/* 4480 */
  0,			/* 4481 */
  0,			/* 4482 */
  0,			/* 4483 */
  0,			/* 4484 */
  0,			/* 4485 */
  0,			/* 4486 */
  0,			/* 4487 */
  0,			/* 4488 */
  0,			/* 4489 */
  0,			/* 4490 */
  0,			/* 4491 */
  0,			/* 4492 */
  0,			/* 4493 */
  0,			/* 4494 */
  0,			/* 4495 */
  0,			/* 4496 */
  0,			/* 4497 */
  0,			/* 4498 */
  0,			/* 4499 */
  0,			/* ERROR_VOLUME_NOT_SIS_ENABLED */
  0,			/* 4501 */
  0,			/* 4502 */
  0,			/* 4503 */
  0,			/* 4504 */
  0,			/* 4505 */
  0,			/* 4506 */
  0,			/* 4507 */
  0,			/* 4508 */
  0,			/* 4509 */
  0,			/* 4510 */
  0,			/* 4511 */
  0,			/* 4512 */
  0,			/* 4513 */
  0,			/* 4514 */
  0,			/* 4515 */
  0,			/* 4516 */
  0,			/* 4517 */
  0,			/* 4518 */
  0,			/* 4519 */
  0,			/* 4520 */
  0,			/* 4521 */
  0,			/* 4522 */
  0,			/* 4523 */
  0,			/* 4524 */
  0,			/* 4525 */
  0,			/* 4526 */
  0,			/* 4527 */
  0,			/* 4528 */
  0,			/* 4529 */
  0,			/* 4530 */
  0,			/* 4531 */
  0,			/* 4532 */
  0,			/* 4533 */
  0,			/* 4534 */
  0,			/* 4535 */
  0,			/* 4536 */
  0,			/* 4537 */
  0,			/* 4538 */
  0,			/* 4539 */
  0,			/* 4540 */
  0,			/* 4541 */
  0,			/* 4542 */
  0,			/* 4543 */
  0,			/* 4544 */
  0,			/* 4545 */
  0,			/* 4546 */
  0,			/* 4547 */
  0,			/* 4548 */
  0,			/* 4549 */
  0,			/* 4550 */
  0,			/* 4551 */
  0,			/* 4552 */
  0,			/* 4553 */
  0,			/* 4554 */
  0,			/* 4555 */
  0,			/* 4556 */
  0,			/* 4557 */
  0,			/* 4558 */
  0,			/* 4559 */
  0,			/* 4560 */
  0,			/* 4561 */
  0,			/* 4562 */
  0,			/* 4563 */
  0,			/* 4564 */
  0,			/* 4565 */
  0,			/* 4566 */
  0,			/* 4567 */
  0,			/* 4568 */
  0,			/* 4569 */
  0,			/* 4570 */
  0,			/* 4571 */
  0,			/* 4572 */
  0,			/* 4573 */
  0,			/* 4574 */
  0,			/* 4575 */
  0,			/* 4576 */
  0,			/* 4577 */
  0,			/* 4578 */
  0,			/* 4579 */
  0,			/* 4580 */
  0,			/* 4581 */
  0,			/* 4582 */
  0,			/* 4583 */
  0,			/* 4584 */
  0,			/* 4585 */
  0,			/* 4586 */
  0,			/* 4587 */
  0,			/* 4588 */
  0,			/* 4589 */
  0,			/* 4590 */
  0,			/* 4591 */
  0,			/* 4592 */
  0,			/* 4593 */
  0,			/* 4594 */
  0,			/* 4595 */
  0,			/* 4596 */
  0,			/* 4597 */
  0,			/* 4598 */
  0,			/* 4599 */
  0,			/* 4600 */
  0,			/* 4601 */
  0,			/* 4602 */
  0,			/* 4603 */
  0,			/* 4604 */
  0,			/* 4605 */
  0,			/* 4606 */
  0,			/* 4607 */
  0,			/* 4608 */
  0,			/* 4609 */
  0,			/* 4610 */
  0,			/* 4611 */
  0,			/* 4612 */
  0,			/* 4613 */
  0,			/* 4614 */
  0,			/* 4615 */
  0,			/* 4616 */
  0,			/* 4617 */
  0,			/* 4618 */
  0,			/* 4619 */
  0,			/* 4620 */
  0,			/* 4621 */
  0,			/* 4622 */
  0,			/* 4623 */
  0,			/* 4624 */
  0,			/* 4625 */
  0,			/* 4626 */
  0,			/* 4627 */
  0,			/* 4628 */
  0,			/* 4629 */
  0,			/* 4630 */
  0,			/* 4631 */
  0,			/* 4632 */
  0,			/* 4633 */
  0,			/* 4634 */
  0,			/* 4635 */
  0,			/* 4636 */
  0,			/* 4637 */
  0,			/* 4638 */
  0,			/* 4639 */
  0,			/* 4640 */
  0,			/* 4641 */
  0,			/* 4642 */
  0,			/* 4643 */
  0,			/* 4644 */
  0,			/* 4645 */
  0,			/* 4646 */
  0,			/* 4647 */
  0,			/* 4648 */
  0,			/* 4649 */
  0,			/* 4650 */
  0,			/* 4651 */
  0,			/* 4652 */
  0,			/* 4653 */
  0,			/* 4654 */
  0,			/* 4655 */
  0,			/* 4656 */
  0,			/* 4657 */
  0,			/* 4658 */
  0,			/* 4659 */
  0,			/* 4660 */
  0,			/* 4661 */
  0,			/* 4662 */
  0,			/* 4663 */
  0,			/* 4664 */
  0,			/* 4665 */
  0,			/* 4666 */
  0,			/* 4667 */
  0,			/* 4668 */
  0,			/* 4669 */
  0,			/* 4670 */
  0,			/* 4671 */
  0,			/* 4672 */
  0,			/* 4673 */
  0,			/* 4674 */
  0,			/* 4675 */
  0,			/* 4676 */
  0,			/* 4677 */
  0,			/* 4678 */
  0,			/* 4679 */
  0,			/* 4680 */
  0,			/* 4681 */
  0,			/* 4682 */
  0,			/* 4683 */
  0,			/* 4684 */
  0,			/* 4685 */
  0,			/* 4686 */
  0,			/* 4687 */
  0,			/* 4688 */
  0,			/* 4689 */
  0,			/* 4690 */
  0,			/* 4691 */
  0,			/* 4692 */
  0,			/* 4693 */
  0,			/* 4694 */
  0,			/* 4695 */
  0,			/* 4696 */
  0,			/* 4697 */
  0,			/* 4698 */
  0,			/* 4699 */
  0,			/* 4700 */
  0,			/* 4701 */
  0,			/* 4702 */
  0,			/* 4703 */
  0,			/* 4704 */
  0,			/* 4705 */
  0,			/* 4706 */
  0,			/* 4707 */
  0,			/* 4708 */
  0,			/* 4709 */
  0,			/* 4710 */
  0,			/* 4711 */
  0,			/* 4712 */
  0,			/* 4713 */
  0,			/* 4714 */
  0,			/* 4715 */
  0,			/* 4716 */
  0,			/* 4717 */
  0,			/* 4718 */
  0,			/* 4719 */
  0,			/* 4720 */
  0,			/* 4721 */
  0,			/* 4722 */
  0,			/* 4723 */
  0,			/* 4724 */
  0,			/* 4725 */
  0,			/* 4726 */
  0,			/* 4727 */
  0,			/* 4728 */
  0,			/* 4729 */
  0,			/* 4730 */
  0,			/* 4731 */
  0,			/* 4732 */
  0,			/* 4733 */
  0,			/* 4734 */
  0,			/* 4735 */
  0,			/* 4736 */
  0,			/* 4737 */
  0,			/* 4738 */
  0,			/* 4739 */
  0,			/* 4740 */
  0,			/* 4741 */
  0,			/* 4742 */
  0,			/* 4743 */
  0,			/* 4744 */
  0,			/* 4745 */
  0,			/* 4746 */
  0,			/* 4747 */
  0,			/* 4748 */
  0,			/* 4749 */
  0,			/* 4750 */
  0,			/* 4751 */
  0,			/* 4752 */
  0,			/* 4753 */
  0,			/* 4754 */
  0,			/* 4755 */
  0,			/* 4756 */
  0,			/* 4757 */
  0,			/* 4758 */
  0,			/* 4759 */
  0,			/* 4760 */
  0,			/* 4761 */
  0,			/* 4762 */
  0,			/* 4763 */
  0,			/* 4764 */
  0,			/* 4765 */
  0,			/* 4766 */
  0,			/* 4767 */
  0,			/* 4768 */
  0,			/* 4769 */
  0,			/* 4770 */
  0,			/* 4771 */
  0,			/* 4772 */
  0,			/* 4773 */
  0,			/* 4774 */
  0,			/* 4775 */
  0,			/* 4776 */
  0,			/* 4777 */
  0,			/* 4778 */
  0,			/* 4779 */
  0,			/* 4780 */
  0,			/* 4781 */
  0,			/* 4782 */
  0,			/* 4783 */
  0,			/* 4784 */
  0,			/* 4785 */
  0,			/* 4786 */
  0,			/* 4787 */
  0,			/* 4788 */
  0,			/* 4789 */
  0,			/* 4790 */
  0,			/* 4791 */
  0,			/* 4792 */
  0,			/* 4793 */
  0,			/* 4794 */
  0,			/* 4795 */
  0,			/* 4796 */
  0,			/* 4797 */
  0,			/* 4798 */
  0,			/* 4799 */
  0,			/* 4800 */
  0,			/* 4801 */
  0,			/* 4802 */
  0,			/* 4803 */
  0,			/* 4804 */
  0,			/* 4805 */
  0,			/* 4806 */
  0,			/* 4807 */
  0,			/* 4808 */
  0,			/* 4809 */
  0,			/* 4810 */
  0,			/* 4811 */
  0,			/* 4812 */
  0,			/* 4813 */
  0,			/* 4814 */
  0,			/* 4815 */
  0,			/* 4816 */
  0,			/* 4817 */
  0,			/* 4818 */
  0,			/* 4819 */
  0,			/* 4820 */
  0,			/* 4821 */
  0,			/* 4822 */
  0,			/* 4823 */
  0,			/* 4824 */
  0,			/* 4825 */
  0,			/* 4826 */
  0,			/* 4827 */
  0,			/* 4828 */
  0,			/* 4829 */
  0,			/* 4830 */
  0,			/* 4831 */
  0,			/* 4832 */
  0,			/* 4833 */
  0,			/* 4834 */
  0,			/* 4835 */
  0,			/* 4836 */
  0,			/* 4837 */
  0,			/* 4838 */
  0,			/* 4839 */
  0,			/* 4840 */
  0,			/* 4841 */
  0,			/* 4842 */
  0,			/* 4843 */
  0,			/* 4844 */
  0,			/* 4845 */
  0,			/* 4846 */
  0,			/* 4847 */
  0,			/* 4848 */
  0,			/* 4849 */
  0,			/* 4850 */
  0,			/* 4851 */
  0,			/* 4852 */
  0,			/* 4853 */
  0,			/* 4854 */
  0,			/* 4855 */
  0,			/* 4856 */
  0,			/* 4857 */
  0,			/* 4858 */
  0,			/* 4859 */
  0,			/* 4860 */
  0,			/* 4861 */
  0,			/* 4862 */
  0,			/* 4863 */
  0,			/* 4864 */
  0,			/* 4865 */
  0,			/* 4866 */
  0,			/* 4867 */
  0,			/* 4868 */
  0,			/* 4869 */
  0,			/* 4870 */
  0,			/* 4871 */
  0,			/* 4872 */
  0,			/* 4873 */
  0,			/* 4874 */
  0,			/* 4875 */
  0,			/* 4876 */
  0,			/* 4877 */
  0,			/* 4878 */
  0,			/* 4879 */
  0,			/* 4880 */
  0,			/* 4881 */
  0,			/* 4882 */
  0,			/* 4883 */
  0,			/* 4884 */
  0,			/* 4885 */
  0,			/* 4886 */
  0,			/* 4887 */
  0,			/* 4888 */
  0,			/* 4889 */
  0,			/* 4890 */
  0,			/* 4891 */
  0,			/* 4892 */
  0,			/* 4893 */
  0,			/* 4894 */
  0,			/* 4895 */
  0,			/* 4896 */
  0,			/* 4897 */
  0,			/* 4898 */
  0,			/* 4899 */
  0,			/* 4900 */
  0,			/* 4901 */
  0,			/* 4902 */
  0,			/* 4903 */
  0,			/* 4904 */
  0,			/* 4905 */
  0,			/* 4906 */
  0,			/* 4907 */
  0,			/* 4908 */
  0,			/* 4909 */
  0,			/* 4910 */
  0,			/* 4911 */
  0,			/* 4912 */
  0,			/* 4913 */
  0,			/* 4914 */
  0,			/* 4915 */
  0,			/* 4916 */
  0,			/* 4917 */
  0,			/* 4918 */
  0,			/* 4919 */
  0,			/* 4920 */
  0,			/* 4921 */
  0,			/* 4922 */
  0,			/* 4923 */
  0,			/* 4924 */
  0,			/* 4925 */
  0,			/* 4926 */
  0,			/* 4927 */
  0,			/* 4928 */
  0,			/* 4929 */
  0,			/* 4930 */
  0,			/* 4931 */
  0,			/* 4932 */
  0,			/* 4933 */
  0,			/* 4934 */
  0,			/* 4935 */
  0,			/* 4936 */
  0,			/* 4937 */
  0,			/* 4938 */
  0,			/* 4939 */
  0,			/* 4940 */
  0,			/* 4941 */
  0,			/* 4942 */
  0,			/* 4943 */
  0,			/* 4944 */
  0,			/* 4945 */
  0,			/* 4946 */
  0,			/* 4947 */
  0,			/* 4948 */
  0,			/* 4949 */
  0,			/* 4950 */
  0,			/* 4951 */
  0,			/* 4952 */
  0,			/* 4953 */
  0,			/* 4954 */
  0,			/* 4955 */
  0,			/* 4956 */
  0,			/* 4957 */
  0,			/* 4958 */
  0,			/* 4959 */
  0,			/* 4960 */
  0,			/* 4961 */
  0,			/* 4962 */
  0,			/* 4963 */
  0,			/* 4964 */
  0,			/* 4965 */
  0,			/* 4966 */
  0,			/* 4967 */
  0,			/* 4968 */
  0,			/* 4969 */
  0,			/* 4970 */
  0,			/* 4971 */
  0,			/* 4972 */
  0,			/* 4973 */
  0,			/* 4974 */
  0,			/* 4975 */
  0,			/* 4976 */
  0,			/* 4977 */
  0,			/* 4978 */
  0,			/* 4979 */
  0,			/* 4980 */
  0,			/* 4981 */
  0,			/* 4982 */
  0,			/* 4983 */
  0,			/* 4984 */
  0,			/* 4985 */
  0,			/* 4986 */
  0,			/* 4987 */
  0,			/* 4988 */
  0,			/* 4989 */
  0,			/* 4990 */
  0,			/* 4991 */
  0,			/* 4992 */
  0,			/* 4993 */
  0,			/* 4994 */
  0,			/* 4995 */
  0,			/* 4996 */
  0,			/* 4997 */
  0,			/* 4998 */
  0,			/* 4999 */
  0,			/* 5000 */
  0,			/* ERROR_DEPENDENT_RESOURCE_EXISTS */
  0,			/* ERROR_DEPENDENCY_NOT_FOUND */
  0,			/* ERROR_DEPENDENCY_ALREADY_EXISTS */
  0,			/* ERROR_RESOURCE_NOT_ONLINE */
  0,			/* ERROR_HOST_NODE_NOT_AVAILABLE */
  0,			/* ERROR_RESOURCE_NOT_AVAILABLE */
  0,			/* ERROR_RESOURCE_NOT_FOUND */
  0,			/* ERROR_SHUTDOWN_CLUSTER */
  0,			/* ERROR_CANT_EVICT_ACTIVE_NODE */
  0,			/* ERROR_OBJECT_ALREADY_EXISTS */
  0,			/* ERROR_OBJECT_IN_LIST */
  0,			/* ERROR_GROUP_NOT_AVAILABLE */
  0,			/* ERROR_GROUP_NOT_FOUND */
  0,			/* ERROR_GROUP_NOT_ONLINE */
  0,			/* ERROR_HOST_NODE_NOT_RESOURCE_OWNER */
  0,			/* ERROR_HOST_NODE_NOT_GROUP_OWNER */
  0,			/* ERROR_RESMON_CREATE_FAILED */
  0,			/* ERROR_RESMON_ONLINE_FAILED */
  0,			/* ERROR_RESOURCE_ONLINE */
  0,			/* ERROR_QUORUM_RESOURCE */
  0,			/* ERROR_NOT_QUORUM_CAPABLE */
  0,			/* ERROR_CLUSTER_SHUTTING_DOWN */
  0,			/* ERROR_INVALID_STATE */
  0,			/* ERROR_RESOURCE_PROPERTIES_STORED */
  0,			/* ERROR_NOT_QUORUM_CLASS */
  0,			/* ERROR_CORE_RESOURCE */
  0,			/* ERROR_QUORUM_RESOURCE_ONLINE_FAILED */
  0,			/* ERROR_QUORUMLOG_OPEN_FAILED */
  0,			/* ERROR_CLUSTERLOG_CORRUPT */
  0,			/* ERROR_CLUSTERLOG_RECORD_EXCEEDS_MAXSIZE */
  0,			/* ERROR_CLUSTERLOG_EXCEEDS_MAXSIZE */
  0,			/* ERROR_CLUSTERLOG_CHKPOINT_NOT_FOUND */
  0,			/* ERROR_CLUSTERLOG_NOT_ENOUGH_SPACE */
  0,			/* ERROR_QUORUM_OWNER_ALIVE */
  0,			/* ERROR_NETWORK_NOT_AVAILABLE */
  0,			/* ERROR_NODE_NOT_AVAILABLE */
  0,			/* ERROR_ALL_NODES_NOT_AVAILABLE */
  0,			/* ERROR_RESOURCE_FAILED */
  0,			/* ERROR_CLUSTER_INVALID_NODE */
  0,			/* ERROR_CLUSTER_NODE_EXISTS */
  0,			/* ERROR_CLUSTER_JOIN_IN_PROGRESS */
  0,			/* ERROR_CLUSTER_NODE_NOT_FOUND */
  0,			/* ERROR_CLUSTER_LOCAL_NODE_NOT_FOUND */
  0,			/* ERROR_CLUSTER_NETWORK_EXISTS */
  0,			/* ERROR_CLUSTER_NETWORK_NOT_FOUND */
  0,			/* ERROR_CLUSTER_NETINTERFACE_EXISTS */
  0,			/* ERROR_CLUSTER_NETINTERFACE_NOT_FOUND */
  0,			/* ERROR_CLUSTER_INVALID_REQUEST */
  0,			/* ERROR_CLUSTER_INVALID_NETWORK_PROVIDER */
  0,			/* ERROR_CLUSTER_NODE_DOWN */
  0,			/* ERROR_CLUSTER_NODE_UNREACHABLE */
  0,			/* ERROR_CLUSTER_NODE_NOT_MEMBER */
  0,			/* ERROR_CLUSTER_JOIN_NOT_IN_PROGRESS */
  0,			/* ERROR_CLUSTER_INVALID_NETWORK */
  0,			/* 5055 */
  0,			/* ERROR_CLUSTER_NODE_UP */
  0,			/* ERROR_CLUSTER_IPADDR_IN_USE */
  0,			/* ERROR_CLUSTER_NODE_NOT_PAUSED */
  0,			/* ERROR_CLUSTER_NO_SECURITY_CONTEXT */
  0,			/* ERROR_CLUSTER_NETWORK_NOT_INTERNAL */
  0,			/* ERROR_CLUSTER_NODE_ALREADY_UP */
  0,			/* ERROR_CLUSTER_NODE_ALREADY_DOWN */
  0,			/* ERROR_CLUSTER_NETWORK_ALREADY_ONLINE */
  0,			/* ERROR_CLUSTER_NETWORK_ALREADY_OFFLINE */
  0,			/* ERROR_CLUSTER_NODE_ALREADY_MEMBER */
  0,			/* ERROR_CLUSTER_LAST_INTERNAL_NETWORK */
  0,			/* ERROR_CLUSTER_NETWORK_HAS_DEPENDENTS */
  0,			/* ERROR_INVALID_OPERATION_ON_QUORUM */
  0,			/* ERROR_DEPENDENCY_NOT_ALLOWED */
  0,			/* ERROR_CLUSTER_NODE_PAUSED */
  0,			/* ERROR_NODE_CANT_HOST_RESOURCE */
  0,			/* ERROR_CLUSTER_NODE_NOT_READY */
  0,			/* ERROR_CLUSTER_NODE_SHUTTING_DOWN */
  0,			/* ERROR_CLUSTER_JOIN_ABORTED */
  0,			/* ERROR_CLUSTER_INCOMPATIBLE_VERSIONS */
  0,			/* ERROR_CLUSTER_MAXNUM_OF_RESOURCES_EXCEEDED */
  0,			/* ERROR_CLUSTER_SYSTEM_CONFIG_CHANGED */
  0,			/* ERROR_CLUSTER_RESOURCE_TYPE_NOT_FOUND */
  0,			/* ERROR_CLUSTER_RESTYPE_NOT_SUPPORTED */
  0,			/* ERROR_CLUSTER_RESNAME_NOT_FOUND */
  0,			/* ERROR_CLUSTER_NO_RPC_PACKAGES_REGISTERED */
  0,			/* ERROR_CLUSTER_OWNER_NOT_IN_PREFLIST */
  0,			/* ERROR_CLUSTER_DATABASE_SEQMISMATCH */
  0,			/* ERROR_RESMON_INVALID_STATE */
  0,			/* ERROR_CLUSTER_GUM_NOT_LOCKER */
  0,			/* ERROR_QUORUM_DISK_NOT_FOUND */
  0,			/* ERROR_DATABASE_BACKUP_CORRUPT */
  0,			/* ERROR_CLUSTER_NODE_ALREADY_HAS_DFS_ROOT */
  0,			/* ERROR_RESOURCE_PROPERTY_UNCHANGEABLE */
  0,			/* 5090 */
  0,			/* 5091 */
  0,			/* 5092 */
  0,			/* 5093 */
  0,			/* 5094 */
  0,			/* 5095 */
  0,			/* 5096 */
  0,			/* 5097 */
  0,			/* 5098 */
  0,			/* 5099 */
  0,			/* 5100 */
  0,			/* 5101 */
  0,			/* 5102 */
  0,			/* 5103 */
  0,			/* 5104 */
  0,			/* 5105 */
  0,			/* 5106 */
  0,			/* 5107 */
  0,			/* 5108 */
  0,			/* 5109 */
  0,			/* 5110 */
  0,			/* 5111 */
  0,			/* 5112 */
  0,			/* 5113 */
  0,			/* 5114 */
  0,			/* 5115 */
  0,			/* 5116 */
  0,			/* 5117 */
  0,			/* 5118 */
  0,			/* 5119 */
  0,			/* 5120 */
  0,			/* 5121 */
  0,			/* 5122 */
  0,			/* 5123 */
  0,			/* 5124 */
  0,			/* 5125 */
  0,			/* 5126 */
  0,			/* 5127 */
  0,			/* 5128 */
  0,			/* 5129 */
  0,			/* 5130 */
  0,			/* 5131 */
  0,			/* 5132 */
  0,			/* 5133 */
  0,			/* 5134 */
  0,			/* 5135 */
  0,			/* 5136 */
  0,			/* 5137 */
  0,			/* 5138 */
  0,			/* 5139 */
  0,			/* 5140 */
  0,			/* 5141 */
  0,			/* 5142 */
  0,			/* 5143 */
  0,			/* 5144 */
  0,			/* 5145 */
  0,			/* 5146 */
  0,			/* 5147 */
  0,			/* 5148 */
  0,			/* 5149 */
  0,			/* 5150 */
  0,			/* 5151 */
  0,			/* 5152 */
  0,			/* 5153 */
  0,			/* 5154 */
  0,			/* 5155 */
  0,			/* 5156 */
  0,			/* 5157 */
  0,			/* 5158 */
  0,			/* 5159 */
  0,			/* 5160 */
  0,			/* 5161 */
  0,			/* 5162 */
  0,			/* 5163 */
  0,			/* 5164 */
  0,			/* 5165 */
  0,			/* 5166 */
  0,			/* 5167 */
  0,			/* 5168 */
  0,			/* 5169 */
  0,			/* 5170 */
  0,			/* 5171 */
  0,			/* 5172 */
  0,			/* 5173 */
  0,			/* 5174 */
  0,			/* 5175 */
  0,			/* 5176 */
  0,			/* 5177 */
  0,			/* 5178 */
  0,			/* 5179 */
  0,			/* 5180 */
  0,			/* 5181 */
  0,			/* 5182 */
  0,			/* 5183 */
  0,			/* 5184 */
  0,			/* 5185 */
  0,			/* 5186 */
  0,			/* 5187 */
  0,			/* 5188 */
  0,			/* 5189 */
  0,			/* 5190 */
  0,			/* 5191 */
  0,			/* 5192 */
  0,			/* 5193 */
  0,			/* 5194 */
  0,			/* 5195 */
  0,			/* 5196 */
  0,			/* 5197 */
  0,			/* 5198 */
  0,			/* 5199 */
  0,			/* 5200 */
  0,			/* 5201 */
  0,			/* 5202 */
  0,			/* 5203 */
  0,			/* 5204 */
  0,			/* 5205 */
  0,			/* 5206 */
  0,			/* 5207 */
  0,			/* 5208 */
  0,			/* 5209 */
  0,			/* 5210 */
  0,			/* 5211 */
  0,			/* 5212 */
  0,			/* 5213 */
  0,			/* 5214 */
  0,			/* 5215 */
  0,			/* 5216 */
  0,			/* 5217 */
  0,			/* 5218 */
  0,			/* 5219 */
  0,			/* 5220 */
  0,			/* 5221 */
  0,			/* 5222 */
  0,			/* 5223 */
  0,			/* 5224 */
  0,			/* 5225 */
  0,			/* 5226 */
  0,			/* 5227 */
  0,			/* 5228 */
  0,			/* 5229 */
  0,			/* 5230 */
  0,			/* 5231 */
  0,			/* 5232 */
  0,			/* 5233 */
  0,			/* 5234 */
  0,			/* 5235 */
  0,			/* 5236 */
  0,			/* 5237 */
  0,			/* 5238 */
  0,			/* 5239 */
  0,			/* 5240 */
  0,			/* 5241 */
  0,			/* 5242 */
  0,			/* 5243 */
  0,			/* 5244 */
  0,			/* 5245 */
  0,			/* 5246 */
  0,			/* 5247 */
  0,			/* 5248 */
  0,			/* 5249 */
  0,			/* 5250 */
  0,			/* 5251 */
  0,			/* 5252 */
  0,			/* 5253 */
  0,			/* 5254 */
  0,			/* 5255 */
  0,			/* 5256 */
  0,			/* 5257 */
  0,			/* 5258 */
  0,			/* 5259 */
  0,			/* 5260 */
  0,			/* 5261 */
  0,			/* 5262 */
  0,			/* 5263 */
  0,			/* 5264 */
  0,			/* 5265 */
  0,			/* 5266 */
  0,			/* 5267 */
  0,			/* 5268 */
  0,			/* 5269 */
  0,			/* 5270 */
  0,			/* 5271 */
  0,			/* 5272 */
  0,			/* 5273 */
  0,			/* 5274 */
  0,			/* 5275 */
  0,			/* 5276 */
  0,			/* 5277 */
  0,			/* 5278 */
  0,			/* 5279 */
  0,			/* 5280 */
  0,			/* 5281 */
  0,			/* 5282 */
  0,			/* 5283 */
  0,			/* 5284 */
  0,			/* 5285 */
  0,			/* 5286 */
  0,			/* 5287 */
  0,			/* 5288 */
  0,			/* 5289 */
  0,			/* 5290 */
  0,			/* 5291 */
  0,			/* 5292 */
  0,			/* 5293 */
  0,			/* 5294 */
  0,			/* 5295 */
  0,			/* 5296 */
  0,			/* 5297 */
  0,			/* 5298 */
  0,			/* 5299 */
  0,			/* 5300 */
  0,			/* 5301 */
  0,			/* 5302 */
  0,			/* 5303 */
  0,			/* 5304 */
  0,			/* 5305 */
  0,			/* 5306 */
  0,			/* 5307 */
  0,			/* 5308 */
  0,			/* 5309 */
  0,			/* 5310 */
  0,			/* 5311 */
  0,			/* 5312 */
  0,			/* 5313 */
  0,			/* 5314 */
  0,			/* 5315 */
  0,			/* 5316 */
  0,			/* 5317 */
  0,			/* 5318 */
  0,			/* 5319 */
  0,			/* 5320 */
  0,			/* 5321 */
  0,			/* 5322 */
  0,			/* 5323 */
  0,			/* 5324 */
  0,			/* 5325 */
  0,			/* 5326 */
  0,			/* 5327 */
  0,			/* 5328 */
  0,			/* 5329 */
  0,			/* 5330 */
  0,			/* 5331 */
  0,			/* 5332 */
  0,			/* 5333 */
  0,			/* 5334 */
  0,			/* 5335 */
  0,			/* 5336 */
  0,			/* 5337 */
  0,			/* 5338 */
  0,			/* 5339 */
  0,			/* 5340 */
  0,			/* 5341 */
  0,			/* 5342 */
  0,			/* 5343 */
  0,			/* 5344 */
  0,			/* 5345 */
  0,			/* 5346 */
  0,			/* 5347 */
  0,			/* 5348 */
  0,			/* 5349 */
  0,			/* 5350 */
  0,			/* 5351 */
  0,			/* 5352 */
  0,			/* 5353 */
  0,			/* 5354 */
  0,			/* 5355 */
  0,			/* 5356 */
  0,			/* 5357 */
  0,			/* 5358 */
  0,			/* 5359 */
  0,			/* 5360 */
  0,			/* 5361 */
  0,			/* 5362 */
  0,			/* 5363 */
  0,			/* 5364 */
  0,			/* 5365 */
  0,			/* 5366 */
  0,			/* 5367 */
  0,			/* 5368 */
  0,			/* 5369 */
  0,			/* 5370 */
  0,			/* 5371 */
  0,			/* 5372 */
  0,			/* 5373 */
  0,			/* 5374 */
  0,			/* 5375 */
  0,			/* 5376 */
  0,			/* 5377 */
  0,			/* 5378 */
  0,			/* 5379 */
  0,			/* 5380 */
  0,			/* 5381 */
  0,			/* 5382 */
  0,			/* 5383 */
  0,			/* 5384 */
  0,			/* 5385 */
  0,			/* 5386 */
  0,			/* 5387 */
  0,			/* 5388 */
  0,			/* 5389 */
  0,			/* 5390 */
  0,			/* 5391 */
  0,			/* 5392 */
  0,			/* 5393 */
  0,			/* 5394 */
  0,			/* 5395 */
  0,			/* 5396 */
  0,			/* 5397 */
  0,			/* 5398 */
  0,			/* 5399 */
  0,			/* 5400 */
  0,			/* 5401 */
  0,			/* 5402 */
  0,			/* 5403 */
  0,			/* 5404 */
  0,			/* 5405 */
  0,			/* 5406 */
  0,			/* 5407 */
  0,			/* 5408 */
  0,			/* 5409 */
  0,			/* 5410 */
  0,			/* 5411 */
  0,			/* 5412 */
  0,			/* 5413 */
  0,			/* 5414 */
  0,			/* 5415 */
  0,			/* 5416 */
  0,			/* 5417 */
  0,			/* 5418 */
  0,			/* 5419 */
  0,			/* 5420 */
  0,			/* 5421 */
  0,			/* 5422 */
  0,			/* 5423 */
  0,			/* 5424 */
  0,			/* 5425 */
  0,			/* 5426 */
  0,			/* 5427 */
  0,			/* 5428 */
  0,			/* 5429 */
  0,			/* 5430 */
  0,			/* 5431 */
  0,			/* 5432 */
  0,			/* 5433 */
  0,			/* 5434 */
  0,			/* 5435 */
  0,			/* 5436 */
  0,			/* 5437 */
  0,			/* 5438 */
  0,			/* 5439 */
  0,			/* 5440 */
  0,			/* 5441 */
  0,			/* 5442 */
  0,			/* 5443 */
  0,			/* 5444 */
  0,			/* 5445 */
  0,			/* 5446 */
  0,			/* 5447 */
  0,			/* 5448 */
  0,			/* 5449 */
  0,			/* 5450 */
  0,			/* 5451 */
  0,			/* 5452 */
  0,			/* 5453 */
  0,			/* 5454 */
  0,			/* 5455 */
  0,			/* 5456 */
  0,			/* 5457 */
  0,			/* 5458 */
  0,			/* 5459 */
  0,			/* 5460 */
  0,			/* 5461 */
  0,			/* 5462 */
  0,			/* 5463 */
  0,			/* 5464 */
  0,			/* 5465 */
  0,			/* 5466 */
  0,			/* 5467 */
  0,			/* 5468 */
  0,			/* 5469 */
  0,			/* 5470 */
  0,			/* 5471 */
  0,			/* 5472 */
  0,			/* 5473 */
  0,			/* 5474 */
  0,			/* 5475 */
  0,			/* 5476 */
  0,			/* 5477 */
  0,			/* 5478 */
  0,			/* 5479 */
  0,			/* 5480 */
  0,			/* 5481 */
  0,			/* 5482 */
  0,			/* 5483 */
  0,			/* 5484 */
  0,			/* 5485 */
  0,			/* 5486 */
  0,			/* 5487 */
  0,			/* 5488 */
  0,			/* 5489 */
  0,			/* 5490 */
  0,			/* 5491 */
  0,			/* 5492 */
  0,			/* 5493 */
  0,			/* 5494 */
  0,			/* 5495 */
  0,			/* 5496 */
  0,			/* 5497 */
  0,			/* 5498 */
  0,			/* 5499 */
  0,			/* 5500 */
  0,			/* 5501 */
  0,			/* 5502 */
  0,			/* 5503 */
  0,			/* 5504 */
  0,			/* 5505 */
  0,			/* 5506 */
  0,			/* 5507 */
  0,			/* 5508 */
  0,			/* 5509 */
  0,			/* 5510 */
  0,			/* 5511 */
  0,			/* 5512 */
  0,			/* 5513 */
  0,			/* 5514 */
  0,			/* 5515 */
  0,			/* 5516 */
  0,			/* 5517 */
  0,			/* 5518 */
  0,			/* 5519 */
  0,			/* 5520 */
  0,			/* 5521 */
  0,			/* 5522 */
  0,			/* 5523 */
  0,			/* 5524 */
  0,			/* 5525 */
  0,			/* 5526 */
  0,			/* 5527 */
  0,			/* 5528 */
  0,			/* 5529 */
  0,			/* 5530 */
  0,			/* 5531 */
  0,			/* 5532 */
  0,			/* 5533 */
  0,			/* 5534 */
  0,			/* 5535 */
  0,			/* 5536 */
  0,			/* 5537 */
  0,			/* 5538 */
  0,			/* 5539 */
  0,			/* 5540 */
  0,			/* 5541 */
  0,			/* 5542 */
  0,			/* 5543 */
  0,			/* 5544 */
  0,			/* 5545 */
  0,			/* 5546 */
  0,			/* 5547 */
  0,			/* 5548 */
  0,			/* 5549 */
  0,			/* 5550 */
  0,			/* 5551 */
  0,			/* 5552 */
  0,			/* 5553 */
  0,			/* 5554 */
  0,			/* 5555 */
  0,			/* 5556 */
  0,			/* 5557 */
  0,			/* 5558 */
  0,			/* 5559 */
  0,			/* 5560 */
  0,			/* 5561 */
  0,			/* 5562 */
  0,			/* 5563 */
  0,			/* 5564 */
  0,			/* 5565 */
  0,			/* 5566 */
  0,			/* 5567 */
  0,			/* 5568 */
  0,			/* 5569 */
  0,			/* 5570 */
  0,			/* 5571 */
  0,			/* 5572 */
  0,			/* 5573 */
  0,			/* 5574 */
  0,			/* 5575 */
  0,			/* 5576 */
  0,			/* 5577 */
  0,			/* 5578 */
  0,			/* 5579 */
  0,			/* 5580 */
  0,			/* 5581 */
  0,			/* 5582 */
  0,			/* 5583 */
  0,			/* 5584 */
  0,			/* 5585 */
  0,			/* 5586 */
  0,			/* 5587 */
  0,			/* 5588 */
  0,			/* 5589 */
  0,			/* 5590 */
  0,			/* 5591 */
  0,			/* 5592 */
  0,			/* 5593 */
  0,			/* 5594 */
  0,			/* 5595 */
  0,			/* 5596 */
  0,			/* 5597 */
  0,			/* 5598 */
  0,			/* 5599 */
  0,			/* 5600 */
  0,			/* 5601 */
  0,			/* 5602 */
  0,			/* 5603 */
  0,			/* 5604 */
  0,			/* 5605 */
  0,			/* 5606 */
  0,			/* 5607 */
  0,			/* 5608 */
  0,			/* 5609 */
  0,			/* 5610 */
  0,			/* 5611 */
  0,			/* 5612 */
  0,			/* 5613 */
  0,			/* 5614 */
  0,			/* 5615 */
  0,			/* 5616 */
  0,			/* 5617 */
  0,			/* 5618 */
  0,			/* 5619 */
  0,			/* 5620 */
  0,			/* 5621 */
  0,			/* 5622 */
  0,			/* 5623 */
  0,			/* 5624 */
  0,			/* 5625 */
  0,			/* 5626 */
  0,			/* 5627 */
  0,			/* 5628 */
  0,			/* 5629 */
  0,			/* 5630 */
  0,			/* 5631 */
  0,			/* 5632 */
  0,			/* 5633 */
  0,			/* 5634 */
  0,			/* 5635 */
  0,			/* 5636 */
  0,			/* 5637 */
  0,			/* 5638 */
  0,			/* 5639 */
  0,			/* 5640 */
  0,			/* 5641 */
  0,			/* 5642 */
  0,			/* 5643 */
  0,			/* 5644 */
  0,			/* 5645 */
  0,			/* 5646 */
  0,			/* 5647 */
  0,			/* 5648 */
  0,			/* 5649 */
  0,			/* 5650 */
  0,			/* 5651 */
  0,			/* 5652 */
  0,			/* 5653 */
  0,			/* 5654 */
  0,			/* 5655 */
  0,			/* 5656 */
  0,			/* 5657 */
  0,			/* 5658 */
  0,			/* 5659 */
  0,			/* 5660 */
  0,			/* 5661 */
  0,			/* 5662 */
  0,			/* 5663 */
  0,			/* 5664 */
  0,			/* 5665 */
  0,			/* 5666 */
  0,			/* 5667 */
  0,			/* 5668 */
  0,			/* 5669 */
  0,			/* 5670 */
  0,			/* 5671 */
  0,			/* 5672 */
  0,			/* 5673 */
  0,			/* 5674 */
  0,			/* 5675 */
  0,			/* 5676 */
  0,			/* 5677 */
  0,			/* 5678 */
  0,			/* 5679 */
  0,			/* 5680 */
  0,			/* 5681 */
  0,			/* 5682 */
  0,			/* 5683 */
  0,			/* 5684 */
  0,			/* 5685 */
  0,			/* 5686 */
  0,			/* 5687 */
  0,			/* 5688 */
  0,			/* 5689 */
  0,			/* 5690 */
  0,			/* 5691 */
  0,			/* 5692 */
  0,			/* 5693 */
  0,			/* 5694 */
  0,			/* 5695 */
  0,			/* 5696 */
  0,			/* 5697 */
  0,			/* 5698 */
  0,			/* 5699 */
  0,			/* 5700 */
  0,			/* 5701 */
  0,			/* 5702 */
  0,			/* 5703 */
  0,			/* 5704 */
  0,			/* 5705 */
  0,			/* 5706 */
  0,			/* 5707 */
  0,			/* 5708 */
  0,			/* 5709 */
  0,			/* 5710 */
  0,			/* 5711 */
  0,			/* 5712 */
  0,			/* 5713 */
  0,			/* 5714 */
  0,			/* 5715 */
  0,			/* 5716 */
  0,			/* 5717 */
  0,			/* 5718 */
  0,			/* 5719 */
  0,			/* 5720 */
  0,			/* 5721 */
  0,			/* 5722 */
  0,			/* 5723 */
  0,			/* 5724 */
  0,			/* 5725 */
  0,			/* 5726 */
  0,			/* 5727 */
  0,			/* 5728 */
  0,			/* 5729 */
  0,			/* 5730 */
  0,			/* 5731 */
  0,			/* 5732 */
  0,			/* 5733 */
  0,			/* 5734 */
  0,			/* 5735 */
  0,			/* 5736 */
  0,			/* 5737 */
  0,			/* 5738 */
  0,			/* 5739 */
  0,			/* 5740 */
  0,			/* 5741 */
  0,			/* 5742 */
  0,			/* 5743 */
  0,			/* 5744 */
  0,			/* 5745 */
  0,			/* 5746 */
  0,			/* 5747 */
  0,			/* 5748 */
  0,			/* 5749 */
  0,			/* 5750 */
  0,			/* 5751 */
  0,			/* 5752 */
  0,			/* 5753 */
  0,			/* 5754 */
  0,			/* 5755 */
  0,			/* 5756 */
  0,			/* 5757 */
  0,			/* 5758 */
  0,			/* 5759 */
  0,			/* 5760 */
  0,			/* 5761 */
  0,			/* 5762 */
  0,			/* 5763 */
  0,			/* 5764 */
  0,			/* 5765 */
  0,			/* 5766 */
  0,			/* 5767 */
  0,			/* 5768 */
  0,			/* 5769 */
  0,			/* 5770 */
  0,			/* 5771 */
  0,			/* 5772 */
  0,			/* 5773 */
  0,			/* 5774 */
  0,			/* 5775 */
  0,			/* 5776 */
  0,			/* 5777 */
  0,			/* 5778 */
  0,			/* 5779 */
  0,			/* 5780 */
  0,			/* 5781 */
  0,			/* 5782 */
  0,			/* 5783 */
  0,			/* 5784 */
  0,			/* 5785 */
  0,			/* 5786 */
  0,			/* 5787 */
  0,			/* 5788 */
  0,			/* 5789 */
  0,			/* 5790 */
  0,			/* 5791 */
  0,			/* 5792 */
  0,			/* 5793 */
  0,			/* 5794 */
  0,			/* 5795 */
  0,			/* 5796 */
  0,			/* 5797 */
  0,			/* 5798 */
  0,			/* 5799 */
  0,			/* 5800 */
  0,			/* 5801 */
  0,			/* 5802 */
  0,			/* 5803 */
  0,			/* 5804 */
  0,			/* 5805 */
  0,			/* 5806 */
  0,			/* 5807 */
  0,			/* 5808 */
  0,			/* 5809 */
  0,			/* 5810 */
  0,			/* 5811 */
  0,			/* 5812 */
  0,			/* 5813 */
  0,			/* 5814 */
  0,			/* 5815 */
  0,			/* 5816 */
  0,			/* 5817 */
  0,			/* 5818 */
  0,			/* 5819 */
  0,			/* 5820 */
  0,			/* 5821 */
  0,			/* 5822 */
  0,			/* 5823 */
  0,			/* 5824 */
  0,			/* 5825 */
  0,			/* 5826 */
  0,			/* 5827 */
  0,			/* 5828 */
  0,			/* 5829 */
  0,			/* 5830 */
  0,			/* 5831 */
  0,			/* 5832 */
  0,			/* 5833 */
  0,			/* 5834 */
  0,			/* 5835 */
  0,			/* 5836 */
  0,			/* 5837 */
  0,			/* 5838 */
  0,			/* 5839 */
  0,			/* 5840 */
  0,			/* 5841 */
  0,			/* 5842 */
  0,			/* 5843 */
  0,			/* 5844 */
  0,			/* 5845 */
  0,			/* 5846 */
  0,			/* 5847 */
  0,			/* 5848 */
  0,			/* 5849 */
  0,			/* 5850 */
  0,			/* 5851 */
  0,			/* 5852 */
  0,			/* 5853 */
  0,			/* 5854 */
  0,			/* 5855 */
  0,			/* 5856 */
  0,			/* 5857 */
  0,			/* 5858 */
  0,			/* 5859 */
  0,			/* 5860 */
  0,			/* 5861 */
  0,			/* 5862 */
  0,			/* 5863 */
  0,			/* 5864 */
  0,			/* 5865 */
  0,			/* 5866 */
  0,			/* 5867 */
  0,			/* 5868 */
  0,			/* 5869 */
  0,			/* 5870 */
  0,			/* 5871 */
  0,			/* 5872 */
  0,			/* 5873 */
  0,			/* 5874 */
  0,			/* 5875 */
  0,			/* 5876 */
  0,			/* 5877 */
  0,			/* 5878 */
  0,			/* 5879 */
  0,			/* 5880 */
  0,			/* 5881 */
  0,			/* 5882 */
  0,			/* 5883 */
  0,			/* 5884 */
  0,			/* 5885 */
  0,			/* 5886 */
  0,			/* 5887 */
  0,			/* 5888 */
  0,			/* 5889 */
  0,			/* ERROR_CLUSTER_MEMBERSHIP_INVALID_STATE */
  0,			/* ERROR_CLUSTER_QUORUMLOG_NOT_FOUND */
  0,			/* ERROR_CLUSTER_MEMBERSHIP_HALT */
  0,			/* ERROR_CLUSTER_INSTANCE_ID_MISMATCH */
  0,			/* ERROR_CLUSTER_NETWORK_NOT_FOUND_FOR_IP */
  0,			/* ERROR_CLUSTER_PROPERTY_DATA_TYPE_MISMATCH */
  0,			/* ERROR_CLUSTER_EVICT_WITHOUT_CLEANUP */
  0,			/* ERROR_CLUSTER_PARAMETER_MISMATCH */
  0,			/* ERROR_NODE_CANNOT_BE_CLUSTERED */
  0,			/* ERROR_CLUSTER_WRONG_OS_VERSION */
  0,			/* ERROR_CLUSTER_CANT_CREATE_DUP_CLUSTER_NAME */
  0,			/* ERROR_CLUSCFG_ALREADY_COMMITTED */
  0,			/* ERROR_CLUSCFG_ROLLBACK_FAILED */
  0,			/* ERROR_CLUSCFG_SYSTEM_DISK_DRIVE_LETTER_CONFLICT */
  0,			/* ERROR_CLUSTER_OLD_VERSION */
  0,			/* ERROR_CLUSTER_MISMATCHED_COMPUTER_ACCT_NAME */
  0,			/* 5906 */
  0,			/* 5907 */
  0,			/* 5908 */
  0,			/* 5909 */
  0,			/* 5910 */
  0,			/* 5911 */
  0,			/* 5912 */
  0,			/* 5913 */
  0,			/* 5914 */
  0,			/* 5915 */
  0,			/* 5916 */
  0,			/* 5917 */
  0,			/* 5918 */
  0,			/* 5919 */
  0,			/* 5920 */
  0,			/* 5921 */
  0,			/* 5922 */
  0,			/* 5923 */
  0,			/* 5924 */
  0,			/* 5925 */
  0,			/* 5926 */
  0,			/* 5927 */
  0,			/* 5928 */
  0,			/* 5929 */
  0,			/* 5930 */
  0,			/* 5931 */
  0,			/* 5932 */
  0,			/* 5933 */
  0,			/* 5934 */
  0,			/* 5935 */
  0,			/* 5936 */
  0,			/* 5937 */
  0,			/* 5938 */
  0,			/* 5939 */
  0,			/* 5940 */
  0,			/* 5941 */
  0,			/* 5942 */
  0,			/* 5943 */
  0,			/* 5944 */
  0,			/* 5945 */
  0,			/* 5946 */
  0,			/* 5947 */
  0,			/* 5948 */
  0,			/* 5949 */
  0,			/* 5950 */
  0,			/* 5951 */
  0,			/* 5952 */
  0,			/* 5953 */
  0,			/* 5954 */
  0,			/* 5955 */
  0,			/* 5956 */
  0,			/* 5957 */
  0,			/* 5958 */
  0,			/* 5959 */
  0,			/* 5960 */
  0,			/* 5961 */
  0,			/* 5962 */
  0,			/* 5963 */
  0,			/* 5964 */
  0,			/* 5965 */
  0,			/* 5966 */
  0,			/* 5967 */
  0,			/* 5968 */
  0,			/* 5969 */
  0,			/* 5970 */
  0,			/* 5971 */
  0,			/* 5972 */
  0,			/* 5973 */
  0,			/* 5974 */
  0,			/* 5975 */
  0,			/* 5976 */
  0,			/* 5977 */
  0,			/* 5978 */
  0,			/* 5979 */
  0,			/* 5980 */
  0,			/* 5981 */
  0,			/* 5982 */
  0,			/* 5983 */
  0,			/* 5984 */
  0,			/* 5985 */
  0,			/* 5986 */
  0,			/* 5987 */
  0,			/* 5988 */
  0,			/* 5989 */
  0,			/* 5990 */
  0,			/* 5991 */
  0,			/* 5992 */
  0,			/* 5993 */
  0,			/* 5994 */
  0,			/* 5995 */
  0,			/* 5996 */
  0,			/* 5997 */
  0,			/* 5998 */
  0,			/* 5999 */
  0,			/* ERROR_ENCRYPTION_FAILED */
  0,			/* ERROR_DECRYPTION_FAILED */
  0,			/* ERROR_FILE_ENCRYPTED */
  0,			/* ERROR_NO_RECOVERY_POLICY */
  0,			/* ERROR_NO_EFS */
  0,			/* ERROR_WRONG_EFS */
  0,			/* ERROR_NO_USER_KEYS */
  0,			/* ERROR_FILE_NOT_ENCRYPTED */
  0,			/* ERROR_NOT_EXPORT_FORMAT */
  0,			/* ERROR_FILE_READ_ONLY */
  0,			/* ERROR_DIR_EFS_DISALLOWED */
  0,			/* ERROR_EFS_SERVER_NOT_TRUSTED */
  0,			/* ERROR_BAD_RECOVERY_POLICY */
  0,			/* ERROR_EFS_ALG_BLOB_TOO_BIG */
  0,			/* ERROR_VOLUME_NOT_SUPPORT_EFS */
  0,			/* ERROR_EFS_DISABLED */
  0,			/* ERROR_EFS_VERSION_NOT_SUPPORT */
  0,			/* 6017 */
  0,			/* 6018 */
  0,			/* 6019 */
  0,			/* 6020 */
  0,			/* 6021 */
  0,			/* 6022 */
  0,			/* 6023 */
  0,			/* 6024 */
  0,			/* 6025 */
  0,			/* 6026 */
  0,			/* 6027 */
  0,			/* 6028 */
  0,			/* 6029 */
  0,			/* 6030 */
  0,			/* 6031 */
  0,			/* 6032 */
  0,			/* 6033 */
  0,			/* 6034 */
  0,			/* 6035 */
  0,			/* 6036 */
  0,			/* 6037 */
  0,			/* 6038 */
  0,			/* 6039 */
  0,			/* 6040 */
  0,			/* 6041 */
  0,			/* 6042 */
  0,			/* 6043 */
  0,			/* 6044 */
  0,			/* 6045 */
  0,			/* 6046 */
  0,			/* 6047 */
  0,			/* 6048 */
  0,			/* 6049 */
  0,			/* 6050 */
  0,			/* 6051 */
  0,			/* 6052 */
  0,			/* 6053 */
  0,			/* 6054 */
  0,			/* 6055 */
  0,			/* 6056 */
  0,			/* 6057 */
  0,			/* 6058 */
  0,			/* 6059 */
  0,			/* 6060 */
  0,			/* 6061 */
  0,			/* 6062 */
  0,			/* 6063 */
  0,			/* 6064 */
  0,			/* 6065 */
  0,			/* 6066 */
  0,			/* 6067 */
  0,			/* 6068 */
  0,			/* 6069 */
  0,			/* 6070 */
  0,			/* 6071 */
  0,			/* 6072 */
  0,			/* 6073 */
  0,			/* 6074 */
  0,			/* 6075 */
  0,			/* 6076 */
  0,			/* 6077 */
  0,			/* 6078 */
  0,			/* 6079 */
  0,			/* 6080 */
  0,			/* 6081 */
  0,			/* 6082 */
  0,			/* 6083 */
  0,			/* 6084 */
  0,			/* 6085 */
  0,			/* 6086 */
  0,			/* 6087 */
  0,			/* 6088 */
  0,			/* 6089 */
  0,			/* 6090 */
  0,			/* 6091 */
  0,			/* 6092 */
  0,			/* 6093 */
  0,			/* 6094 */
  0,			/* 6095 */
  0,			/* 6096 */
  0,			/* 6097 */
  0,			/* 6098 */
  0,			/* 6099 */
  0,			/* 6100 */
  0,			/* 6101 */
  0,			/* 6102 */
  0,			/* 6103 */
  0,			/* 6104 */
  0,			/* 6105 */
  0,			/* 6106 */
  0,			/* 6107 */
  0,			/* 6108 */
  0,			/* 6109 */
  0,			/* 6110 */
  0,			/* 6111 */
  0,			/* 6112 */
  0,			/* 6113 */
  0,			/* 6114 */
  0,			/* 6115 */
  0,			/* 6116 */
  0,			/* 6117 */
  0,			/* ERROR_NO_BROWSER_SERVERS_FOUND */
  0,			/* 6119 */
  0,			/* 6120 */
  0,			/* 6121 */
  0,			/* 6122 */
  0,			/* 6123 */
  0,			/* 6124 */
  0,			/* 6125 */
  0,			/* 6126 */
  0,			/* 6127 */
  0,			/* 6128 */
  0,			/* 6129 */
  0,			/* 6130 */
  0,			/* 6131 */
  0,			/* 6132 */
  0,			/* 6133 */
  0,			/* 6134 */
  0,			/* 6135 */
  0,			/* 6136 */
  0,			/* 6137 */
  0,			/* 6138 */
  0,			/* 6139 */
  0,			/* 6140 */
  0,			/* 6141 */
  0,			/* 6142 */
  0,			/* 6143 */
  0,			/* 6144 */
  0,			/* 6145 */
  0,			/* 6146 */
  0,			/* 6147 */
  0,			/* 6148 */
  0,			/* 6149 */
  0,			/* 6150 */
  0,			/* 6151 */
  0,			/* 6152 */
  0,			/* 6153 */
  0,			/* 6154 */
  0,			/* 6155 */
  0,			/* 6156 */
  0,			/* 6157 */
  0,			/* 6158 */
  0,			/* 6159 */
  0,			/* 6160 */
  0,			/* 6161 */
  0,			/* 6162 */
  0,			/* 6163 */
  0,			/* 6164 */
  0,			/* 6165 */
  0,			/* 6166 */
  0,			/* 6167 */
  0,			/* 6168 */
  0,			/* 6169 */
  0,			/* 6170 */
  0,			/* 6171 */
  0,			/* 6172 */
  0,			/* 6173 */
  0,			/* 6174 */
  0,			/* 6175 */
  0,			/* 6176 */
  0,			/* 6177 */
  0,			/* 6178 */
  0,			/* 6179 */
  0,			/* 6180 */
  0,			/* 6181 */
  0,			/* 6182 */
  0,			/* 6183 */
  0,			/* 6184 */
  0,			/* 6185 */
  0,			/* 6186 */
  0,			/* 6187 */
  0,			/* 6188 */
  0,			/* 6189 */
  0,			/* 6190 */
  0,			/* 6191 */
  0,			/* 6192 */
  0,			/* 6193 */
  0,			/* 6194 */
  0,			/* 6195 */
  0,			/* 6196 */
  0,			/* 6197 */
  0,			/* 6198 */
  0,			/* 6199 */
  0,			/* 6200 */
  0,			/* 6201 */
  0,			/* 6202 */
  0,			/* 6203 */
  0,			/* 6204 */
  0,			/* 6205 */
  0,			/* 6206 */
  0,			/* 6207 */
  0,			/* 6208 */
  0,			/* 6209 */
  0,			/* 6210 */
  0,			/* 6211 */
  0,			/* 6212 */
  0,			/* 6213 */
  0,			/* 6214 */
  0,			/* 6215 */
  0,			/* 6216 */
  0,			/* 6217 */
  0,			/* 6218 */
  0,			/* 6219 */
  0,			/* 6220 */
  0,			/* 6221 */
  0,			/* 6222 */
  0,			/* 6223 */
  0,			/* 6224 */
  0,			/* 6225 */
  0,			/* 6226 */
  0,			/* 6227 */
  0,			/* 6228 */
  0,			/* 6229 */
  0,			/* 6230 */
  0,			/* 6231 */
  0,			/* 6232 */
  0,			/* 6233 */
  0,			/* 6234 */
  0,			/* 6235 */
  0,			/* 6236 */
  0,			/* 6237 */
  0,			/* 6238 */
  0,			/* 6239 */
  0,			/* 6240 */
  0,			/* 6241 */
  0,			/* 6242 */
  0,			/* 6243 */
  0,			/* 6244 */
  0,			/* 6245 */
  0,			/* 6246 */
  0,			/* 6247 */
  0,			/* 6248 */
  0,			/* 6249 */
  0,			/* 6250 */
  0,			/* 6251 */
  0,			/* 6252 */
  0,			/* 6253 */
  0,			/* 6254 */
  0,			/* 6255 */
  0,			/* 6256 */
  0,			/* 6257 */
  0,			/* 6258 */
  0,			/* 6259 */
  0,			/* 6260 */
  0,			/* 6261 */
  0,			/* 6262 */
  0,			/* 6263 */
  0,			/* 6264 */
  0,			/* 6265 */
  0,			/* 6266 */
  0,			/* 6267 */
  0,			/* 6268 */
  0,			/* 6269 */
  0,			/* 6270 */
  0,			/* 6271 */
  0,			/* 6272 */
  0,			/* 6273 */
  0,			/* 6274 */
  0,			/* 6275 */
  0,			/* 6276 */
  0,			/* 6277 */
  0,			/* 6278 */
  0,			/* 6279 */
  0,			/* 6280 */
  0,			/* 6281 */
  0,			/* 6282 */
  0,			/* 6283 */
  0,			/* 6284 */
  0,			/* 6285 */
  0,			/* 6286 */
  0,			/* 6287 */
  0,			/* 6288 */
  0,			/* 6289 */
  0,			/* 6290 */
  0,			/* 6291 */
  0,			/* 6292 */
  0,			/* 6293 */
  0,			/* 6294 */
  0,			/* 6295 */
  0,			/* 6296 */
  0,			/* 6297 */
  0,			/* 6298 */
  0,			/* 6299 */
  0,			/* 6300 */
  0,			/* 6301 */
  0,			/* 6302 */
  0,			/* 6303 */
  0,			/* 6304 */
  0,			/* 6305 */
  0,			/* 6306 */
  0,			/* 6307 */
  0,			/* 6308 */
  0,			/* 6309 */
  0,			/* 6310 */
  0,			/* 6311 */
  0,			/* 6312 */
  0,			/* 6313 */
  0,			/* 6314 */
  0,			/* 6315 */
  0,			/* 6316 */
  0,			/* 6317 */
  0,			/* 6318 */
  0,			/* 6319 */
  0,			/* 6320 */
  0,			/* 6321 */
  0,			/* 6322 */
  0,			/* 6323 */
  0,			/* 6324 */
  0,			/* 6325 */
  0,			/* 6326 */
  0,			/* 6327 */
  0,			/* 6328 */
  0,			/* 6329 */
  0,			/* 6330 */
  0,			/* 6331 */
  0,			/* 6332 */
  0,			/* 6333 */
  0,			/* 6334 */
  0,			/* 6335 */
  0,			/* 6336 */
  0,			/* 6337 */
  0,			/* 6338 */
  0,			/* 6339 */
  0,			/* 6340 */
  0,			/* 6341 */
  0,			/* 6342 */
  0,			/* 6343 */
  0,			/* 6344 */
  0,			/* 6345 */
  0,			/* 6346 */
  0,			/* 6347 */
  0,			/* 6348 */
  0,			/* 6349 */
  0,			/* 6350 */
  0,			/* 6351 */
  0,			/* 6352 */
  0,			/* 6353 */
  0,			/* 6354 */
  0,			/* 6355 */
  0,			/* 6356 */
  0,			/* 6357 */
  0,			/* 6358 */
  0,			/* 6359 */
  0,			/* 6360 */
  0,			/* 6361 */
  0,			/* 6362 */
  0,			/* 6363 */
  0,			/* 6364 */
  0,			/* 6365 */
  0,			/* 6366 */
  0,			/* 6367 */
  0,			/* 6368 */
  0,			/* 6369 */
  0,			/* 6370 */
  0,			/* 6371 */
  0,			/* 6372 */
  0,			/* 6373 */
  0,			/* 6374 */
  0,			/* 6375 */
  0,			/* 6376 */
  0,			/* 6377 */
  0,			/* 6378 */
  0,			/* 6379 */
  0,			/* 6380 */
  0,			/* 6381 */
  0,			/* 6382 */
  0,			/* 6383 */
  0,			/* 6384 */
  0,			/* 6385 */
  0,			/* 6386 */
  0,			/* 6387 */
  0,			/* 6388 */
  0,			/* 6389 */
  0,			/* 6390 */
  0,			/* 6391 */
  0,			/* 6392 */
  0,			/* 6393 */
  0,			/* 6394 */
  0,			/* 6395 */
  0,			/* 6396 */
  0,			/* 6397 */
  0,			/* 6398 */
  0,			/* 6399 */
  0,			/* 6400 */
  0,			/* 6401 */
  0,			/* 6402 */
  0,			/* 6403 */
  0,			/* 6404 */
  0,			/* 6405 */
  0,			/* 6406 */
  0,			/* 6407 */
  0,			/* 6408 */
  0,			/* 6409 */
  0,			/* 6410 */
  0,			/* 6411 */
  0,			/* 6412 */
  0,			/* 6413 */
  0,			/* 6414 */
  0,			/* 6415 */
  0,			/* 6416 */
  0,			/* 6417 */
  0,			/* 6418 */
  0,			/* 6419 */
  0,			/* 6420 */
  0,			/* 6421 */
  0,			/* 6422 */
  0,			/* 6423 */
  0,			/* 6424 */
  0,			/* 6425 */
  0,			/* 6426 */
  0,			/* 6427 */
  0,			/* 6428 */
  0,			/* 6429 */
  0,			/* 6430 */
  0,			/* 6431 */
  0,			/* 6432 */
  0,			/* 6433 */
  0,			/* 6434 */
  0,			/* 6435 */
  0,			/* 6436 */
  0,			/* 6437 */
  0,			/* 6438 */
  0,			/* 6439 */
  0,			/* 6440 */
  0,			/* 6441 */
  0,			/* 6442 */
  0,			/* 6443 */
  0,			/* 6444 */
  0,			/* 6445 */
  0,			/* 6446 */
  0,			/* 6447 */
  0,			/* 6448 */
  0,			/* 6449 */
  0,			/* 6450 */
  0,			/* 6451 */
  0,			/* 6452 */
  0,			/* 6453 */
  0,			/* 6454 */
  0,			/* 6455 */
  0,			/* 6456 */
  0,			/* 6457 */
  0,			/* 6458 */
  0,			/* 6459 */
  0,			/* 6460 */
  0,			/* 6461 */
  0,			/* 6462 */
  0,			/* 6463 */
  0,			/* 6464 */
  0,			/* 6465 */
  0,			/* 6466 */
  0,			/* 6467 */
  0,			/* 6468 */
  0,			/* 6469 */
  0,			/* 6470 */
  0,			/* 6471 */
  0,			/* 6472 */
  0,			/* 6473 */
  0,			/* 6474 */
  0,			/* 6475 */
  0,			/* 6476 */
  0,			/* 6477 */
  0,			/* 6478 */
  0,			/* 6479 */
  0,			/* 6480 */
  0,			/* 6481 */
  0,			/* 6482 */
  0,			/* 6483 */
  0,			/* 6484 */
  0,			/* 6485 */
  0,			/* 6486 */
  0,			/* 6487 */
  0,			/* 6488 */
  0,			/* 6489 */
  0,			/* 6490 */
  0,			/* 6491 */
  0,			/* 6492 */
  0,			/* 6493 */
  0,			/* 6494 */
  0,			/* 6495 */
  0,			/* 6496 */
  0,			/* 6497 */
  0,			/* 6498 */
  0,			/* 6499 */
  0,			/* 6500 */
  0,			/* 6501 */
  0,			/* 6502 */
  0,			/* 6503 */
  0,			/* 6504 */
  0,			/* 6505 */
  0,			/* 6506 */
  0,			/* 6507 */
  0,			/* 6508 */
  0,			/* 6509 */
  0,			/* 6510 */
  0,			/* 6511 */
  0,			/* 6512 */
  0,			/* 6513 */
  0,			/* 6514 */
  0,			/* 6515 */
  0,			/* 6516 */
  0,			/* 6517 */
  0,			/* 6518 */
  0,			/* 6519 */
  0,			/* 6520 */
  0,			/* 6521 */
  0,			/* 6522 */
  0,			/* 6523 */
  0,			/* 6524 */
  0,			/* 6525 */
  0,			/* 6526 */
  0,			/* 6527 */
  0,			/* 6528 */
  0,			/* 6529 */
  0,			/* 6530 */
  0,			/* 6531 */
  0,			/* 6532 */
  0,			/* 6533 */
  0,			/* 6534 */
  0,			/* 6535 */
  0,			/* 6536 */
  0,			/* 6537 */
  0,			/* 6538 */
  0,			/* 6539 */
  0,			/* 6540 */
  0,			/* 6541 */
  0,			/* 6542 */
  0,			/* 6543 */
  0,			/* 6544 */
  0,			/* 6545 */
  0,			/* 6546 */
  0,			/* 6547 */
  0,			/* 6548 */
  0,			/* 6549 */
  0,			/* 6550 */
  0,			/* 6551 */
  0,			/* 6552 */
  0,			/* 6553 */
  0,			/* 6554 */
  0,			/* 6555 */
  0,			/* 6556 */
  0,			/* 6557 */
  0,			/* 6558 */
  0,			/* 6559 */
  0,			/* 6560 */
  0,			/* 6561 */
  0,			/* 6562 */
  0,			/* 6563 */
  0,			/* 6564 */
  0,			/* 6565 */
  0,			/* 6566 */
  0,			/* 6567 */
  0,			/* 6568 */
  0,			/* 6569 */
  0,			/* 6570 */
  0,			/* 6571 */
  0,			/* 6572 */
  0,			/* 6573 */
  0,			/* 6574 */
  0,			/* 6575 */
  0,			/* 6576 */
  0,			/* 6577 */
  0,			/* 6578 */
  0,			/* 6579 */
  0,			/* 6580 */
  0,			/* 6581 */
  0,			/* 6582 */
  0,			/* 6583 */
  0,			/* 6584 */
  0,			/* 6585 */
  0,			/* 6586 */
  0,			/* 6587 */
  0,			/* 6588 */
  0,			/* 6589 */
  0,			/* 6590 */
  0,			/* 6591 */
  0,			/* 6592 */
  0,			/* 6593 */
  0,			/* 6594 */
  0,			/* 6595 */
  0,			/* 6596 */
  0,			/* 6597 */
  0,			/* 6598 */
  0,			/* 6599 */
  0,			/* 6600 */
  0,			/* 6601 */
  0,			/* 6602 */
  0,			/* 6603 */
  0,			/* 6604 */
  0,			/* 6605 */
  0,			/* 6606 */
  0,			/* 6607 */
  0,			/* 6608 */
  0,			/* 6609 */
  0,			/* 6610 */
  0,			/* 6611 */
  0,			/* 6612 */
  0,			/* 6613 */
  0,			/* 6614 */
  0,			/* 6615 */
  0,			/* 6616 */
  0,			/* 6617 */
  0,			/* 6618 */
  0,			/* 6619 */
  0,			/* 6620 */
  0,			/* 6621 */
  0,			/* 6622 */
  0,			/* 6623 */
  0,			/* 6624 */
  0,			/* 6625 */
  0,			/* 6626 */
  0,			/* 6627 */
  0,			/* 6628 */
  0,			/* 6629 */
  0,			/* 6630 */
  0,			/* 6631 */
  0,			/* 6632 */
  0,			/* 6633 */
  0,			/* 6634 */
  0,			/* 6635 */
  0,			/* 6636 */
  0,			/* 6637 */
  0,			/* 6638 */
  0,			/* 6639 */
  0,			/* 6640 */
  0,			/* 6641 */
  0,			/* 6642 */
  0,			/* 6643 */
  0,			/* 6644 */
  0,			/* 6645 */
  0,			/* 6646 */
  0,			/* 6647 */
  0,			/* 6648 */
  0,			/* 6649 */
  0,			/* 6650 */
  0,			/* 6651 */
  0,			/* 6652 */
  0,			/* 6653 */
  0,			/* 6654 */
  0,			/* 6655 */
  0,			/* 6656 */
  0,			/* 6657 */
  0,			/* 6658 */
  0,			/* 6659 */
  0,			/* 6660 */
  0,			/* 6661 */
  0,			/* 6662 */
  0,			/* 6663 */
  0,			/* 6664 */
  0,			/* 6665 */
  0,			/* 6666 */
  0,			/* 6667 */
  0,			/* 6668 */
  0,			/* 6669 */
  0,			/* 6670 */
  0,			/* 6671 */
  0,			/* 6672 */
  0,			/* 6673 */
  0,			/* 6674 */
  0,			/* 6675 */
  0,			/* 6676 */
  0,			/* 6677 */
  0,			/* 6678 */
  0,			/* 6679 */
  0,			/* 6680 */
  0,			/* 6681 */
  0,			/* 6682 */
  0,			/* 6683 */
  0,			/* 6684 */
  0,			/* 6685 */
  0,			/* 6686 */
  0,			/* 6687 */
  0,			/* 6688 */
  0,			/* 6689 */
  0,			/* 6690 */
  0,			/* 6691 */
  0,			/* 6692 */
  0,			/* 6693 */
  0,			/* 6694 */
  0,			/* 6695 */
  0,			/* 6696 */
  0,			/* 6697 */
  0,			/* 6698 */
  0,			/* 6699 */
  0,			/* 6700 */
  0,			/* 6701 */
  0,			/* 6702 */
  0,			/* 6703 */
  0,			/* 6704 */
  0,			/* 6705 */
  0,			/* 6706 */
  0,			/* 6707 */
  0,			/* 6708 */
  0,			/* 6709 */
  0,			/* 6710 */
  0,			/* 6711 */
  0,			/* 6712 */
  0,			/* 6713 */
  0,			/* 6714 */
  0,			/* 6715 */
  0,			/* 6716 */
  0,			/* 6717 */
  0,			/* 6718 */
  0,			/* 6719 */
  0,			/* 6720 */
  0,			/* 6721 */
  0,			/* 6722 */
  0,			/* 6723 */
  0,			/* 6724 */
  0,			/* 6725 */
  0,			/* 6726 */
  0,			/* 6727 */
  0,			/* 6728 */
  0,			/* 6729 */
  0,			/* 6730 */
  0,			/* 6731 */
  0,			/* 6732 */
  0,			/* 6733 */
  0,			/* 6734 */
  0,			/* 6735 */
  0,			/* 6736 */
  0,			/* 6737 */
  0,			/* 6738 */
  0,			/* 6739 */
  0,			/* 6740 */
  0,			/* 6741 */
  0,			/* 6742 */
  0,			/* 6743 */
  0,			/* 6744 */
  0,			/* 6745 */
  0,			/* 6746 */
  0,			/* 6747 */
  0,			/* 6748 */
  0,			/* 6749 */
  0,			/* 6750 */
  0,			/* 6751 */
  0,			/* 6752 */
  0,			/* 6753 */
  0,			/* 6754 */
  0,			/* 6755 */
  0,			/* 6756 */
  0,			/* 6757 */
  0,			/* 6758 */
  0,			/* 6759 */
  0,			/* 6760 */
  0,			/* 6761 */
  0,			/* 6762 */
  0,			/* 6763 */
  0,			/* 6764 */
  0,			/* 6765 */
  0,			/* 6766 */
  0,			/* 6767 */
  0,			/* 6768 */
  0,			/* 6769 */
  0,			/* 6770 */
  0,			/* 6771 */
  0,			/* 6772 */
  0,			/* 6773 */
  0,			/* 6774 */
  0,			/* 6775 */
  0,			/* 6776 */
  0,			/* 6777 */
  0,			/* 6778 */
  0,			/* 6779 */
  0,			/* 6780 */
  0,			/* 6781 */
  0,			/* 6782 */
  0,			/* 6783 */
  0,			/* 6784 */
  0,			/* 6785 */
  0,			/* 6786 */
  0,			/* 6787 */
  0,			/* 6788 */
  0,			/* 6789 */
  0,			/* 6790 */
  0,			/* 6791 */
  0,			/* 6792 */
  0,			/* 6793 */
  0,			/* 6794 */
  0,			/* 6795 */
  0,			/* 6796 */
  0,			/* 6797 */
  0,			/* 6798 */
  0,			/* 6799 */
  0,			/* 6800 */
  0,			/* 6801 */
  0,			/* 6802 */
  0,			/* 6803 */
  0,			/* 6804 */
  0,			/* 6805 */
  0,			/* 6806 */
  0,			/* 6807 */
  0,			/* 6808 */
  0,			/* 6809 */
  0,			/* 6810 */
  0,			/* 6811 */
  0,			/* 6812 */
  0,			/* 6813 */
  0,			/* 6814 */
  0,			/* 6815 */
  0,			/* 6816 */
  0,			/* 6817 */
  0,			/* 6818 */
  0,			/* 6819 */
  0,			/* 6820 */
  0,			/* 6821 */
  0,			/* 6822 */
  0,			/* 6823 */
  0,			/* 6824 */
  0,			/* 6825 */
  0,			/* 6826 */
  0,			/* 6827 */
  0,			/* 6828 */
  0,			/* 6829 */
  0,			/* 6830 */
  0,			/* 6831 */
  0,			/* 6832 */
  0,			/* 6833 */
  0,			/* 6834 */
  0,			/* 6835 */
  0,			/* 6836 */
  0,			/* 6837 */
  0,			/* 6838 */
  0,			/* 6839 */
  0,			/* 6840 */
  0,			/* 6841 */
  0,			/* 6842 */
  0,			/* 6843 */
  0,			/* 6844 */
  0,			/* 6845 */
  0,			/* 6846 */
  0,			/* 6847 */
  0,			/* 6848 */
  0,			/* 6849 */
  0,			/* 6850 */
  0,			/* 6851 */
  0,			/* 6852 */
  0,			/* 6853 */
  0,			/* 6854 */
  0,			/* 6855 */
  0,			/* 6856 */
  0,			/* 6857 */
  0,			/* 6858 */
  0,			/* 6859 */
  0,			/* 6860 */
  0,			/* 6861 */
  0,			/* 6862 */
  0,			/* 6863 */
  0,			/* 6864 */
  0,			/* 6865 */
  0,			/* 6866 */
  0,			/* 6867 */
  0,			/* 6868 */
  0,			/* 6869 */
  0,			/* 6870 */
  0,			/* 6871 */
  0,			/* 6872 */
  0,			/* 6873 */
  0,			/* 6874 */
  0,			/* 6875 */
  0,			/* 6876 */
  0,			/* 6877 */
  0,			/* 6878 */
  0,			/* 6879 */
  0,			/* 6880 */
  0,			/* 6881 */
  0,			/* 6882 */
  0,			/* 6883 */
  0,			/* 6884 */
  0,			/* 6885 */
  0,			/* 6886 */
  0,			/* 6887 */
  0,			/* 6888 */
  0,			/* 6889 */
  0,			/* 6890 */
  0,			/* 6891 */
  0,			/* 6892 */
  0,			/* 6893 */
  0,			/* 6894 */
  0,			/* 6895 */
  0,			/* 6896 */
  0,			/* 6897 */
  0,			/* 6898 */
  0,			/* 6899 */
  0,			/* 6900 */
  0,			/* 6901 */
  0,			/* 6902 */
  0,			/* 6903 */
  0,			/* 6904 */
  0,			/* 6905 */
  0,			/* 6906 */
  0,			/* 6907 */
  0,			/* 6908 */
  0,			/* 6909 */
  0,			/* 6910 */
  0,			/* 6911 */
  0,			/* 6912 */
  0,			/* 6913 */
  0,			/* 6914 */
  0,			/* 6915 */
  0,			/* 6916 */
  0,			/* 6917 */
  0,			/* 6918 */
  0,			/* 6919 */
  0,			/* 6920 */
  0,			/* 6921 */
  0,			/* 6922 */
  0,			/* 6923 */
  0,			/* 6924 */
  0,			/* 6925 */
  0,			/* 6926 */
  0,			/* 6927 */
  0,			/* 6928 */
  0,			/* 6929 */
  0,			/* 6930 */
  0,			/* 6931 */
  0,			/* 6932 */
  0,			/* 6933 */
  0,			/* 6934 */
  0,			/* 6935 */
  0,			/* 6936 */
  0,			/* 6937 */
  0,			/* 6938 */
  0,			/* 6939 */
  0,			/* 6940 */
  0,			/* 6941 */
  0,			/* 6942 */
  0,			/* 6943 */
  0,			/* 6944 */
  0,			/* 6945 */
  0,			/* 6946 */
  0,			/* 6947 */
  0,			/* 6948 */
  0,			/* 6949 */
  0,			/* 6950 */
  0,			/* 6951 */
  0,			/* 6952 */
  0,			/* 6953 */
  0,			/* 6954 */
  0,			/* 6955 */
  0,			/* 6956 */
  0,			/* 6957 */
  0,			/* 6958 */
  0,			/* 6959 */
  0,			/* 6960 */
  0,			/* 6961 */
  0,			/* 6962 */
  0,			/* 6963 */
  0,			/* 6964 */
  0,			/* 6965 */
  0,			/* 6966 */
  0,			/* 6967 */
  0,			/* 6968 */
  0,			/* 6969 */
  0,			/* 6970 */
  0,			/* 6971 */
  0,			/* 6972 */
  0,			/* 6973 */
  0,			/* 6974 */
  0,			/* 6975 */
  0,			/* 6976 */
  0,			/* 6977 */
  0,			/* 6978 */
  0,			/* 6979 */
  0,			/* 6980 */
  0,			/* 6981 */
  0,			/* 6982 */
  0,			/* 6983 */
  0,			/* 6984 */
  0,			/* 6985 */
  0,			/* 6986 */
  0,			/* 6987 */
  0,			/* 6988 */
  0,			/* 6989 */
  0,			/* 6990 */
  0,			/* 6991 */
  0,			/* 6992 */
  0,			/* 6993 */
  0,			/* 6994 */
  0,			/* 6995 */
  0,			/* 6996 */
  0,			/* 6997 */
  0,			/* 6998 */
  0,			/* 6999 */
  0,			/* 7000 */
  0,			/* ERROR_CTX_WINSTATION_NAME_INVALID */
  0,			/* ERROR_CTX_INVALID_PD */
  0,			/* ERROR_CTX_PD_NOT_FOUND */
  0,			/* ERROR_CTX_WD_NOT_FOUND */
  0,			/* ERROR_CTX_CANNOT_MAKE_EVENTLOG_ENTRY */
  0,			/* ERROR_CTX_SERVICE_NAME_COLLISION */
  0,			/* ERROR_CTX_CLOSE_PENDING */
  0,			/* ERROR_CTX_NO_OUTBUF */
  0,			/* ERROR_CTX_MODEM_INF_NOT_FOUND */
  0,			/* ERROR_CTX_INVALID_MODEMNAME */
  0,			/* ERROR_CTX_MODEM_RESPONSE_ERROR */
  0,			/* ERROR_CTX_MODEM_RESPONSE_TIMEOUT */
  0,			/* ERROR_CTX_MODEM_RESPONSE_NO_CARRIER */
  0,			/* ERROR_CTX_MODEM_RESPONSE_NO_DIALTONE */
  0,			/* ERROR_CTX_MODEM_RESPONSE_BUSY */
  0,			/* ERROR_CTX_MODEM_RESPONSE_VOICE */
  0,			/* ERROR_CTX_TD_ERROR */
  0,			/* 7018 */
  0,			/* 7019 */
  0,			/* 7020 */
  0,			/* 7021 */
  0,			/* ERROR_CTX_WINSTATION_NOT_FOUND */
  0,			/* ERROR_CTX_WINSTATION_ALREADY_EXISTS */
  0,			/* ERROR_CTX_WINSTATION_BUSY */
  0,			/* ERROR_CTX_BAD_VIDEO_MODE */
  0,			/* 7026 */
  0,			/* 7027 */
  0,			/* 7028 */
  0,			/* 7029 */
  0,			/* 7030 */
  0,			/* 7031 */
  0,			/* 7032 */
  0,			/* 7033 */
  0,			/* 7034 */
  0,			/* ERROR_CTX_GRAPHICS_INVALID */
  0,			/* 7036 */
  0,			/* ERROR_CTX_LOGON_DISABLED */
  0,			/* ERROR_CTX_NOT_CONSOLE */
  0,			/* 7039 */
  0,			/* ERROR_CTX_CLIENT_QUERY_TIMEOUT */
  0,			/* ERROR_CTX_CONSOLE_DISCONNECT */
  0,			/* ERROR_CTX_CONSOLE_CONNECT */
  0,			/* 7043 */
  0,			/* ERROR_CTX_SHADOW_DENIED */
  0,			/* ERROR_CTX_WINSTATION_ACCESS_DENIED */
  0,			/* 7046 */
  0,			/* 7047 */
  0,			/* 7048 */
  0,			/* ERROR_CTX_INVALID_WD */
  0,			/* ERROR_CTX_SHADOW_INVALID */
  0,			/* ERROR_CTX_SHADOW_DISABLED */
  0,			/* ERROR_CTX_CLIENT_LICENSE_IN_USE */
  0,			/* ERROR_CTX_CLIENT_LICENSE_NOT_SET */
  0,			/* ERROR_CTX_LICENSE_NOT_AVAILABLE */
  0,			/* ERROR_CTX_LICENSE_CLIENT_INVALID */
  0,			/* ERROR_CTX_LICENSE_EXPIRED */
  0,			/* ERROR_CTX_SHADOW_NOT_RUNNING */
  0,			/* ERROR_CTX_SHADOW_ENDED_BY_MODE_CHANGE */
  0,			/* ERROR_ACTIVATION_COUNT_EXCEEDED */
  0,			/* 7060 */
  0,			/* 7061 */
  0,			/* 7062 */
  0,			/* 7063 */
  0,			/* 7064 */
  0,			/* 7065 */
  0,			/* 7066 */
  0,			/* 7067 */
  0,			/* 7068 */
  0,			/* 7069 */
  0,			/* 7070 */
  0,			/* 7071 */
  0,			/* 7072 */
  0,			/* 7073 */
  0,			/* 7074 */
  0,			/* 7075 */
  0,			/* 7076 */
  0,			/* 7077 */
  0,			/* 7078 */
  0,			/* 7079 */
  0,			/* 7080 */
  0,			/* 7081 */
  0,			/* 7082 */
  0,			/* 7083 */
  0,			/* 7084 */
  0,			/* 7085 */
  0,			/* 7086 */
  0,			/* 7087 */
  0,			/* 7088 */
  0,			/* 7089 */
  0,			/* 7090 */
  0,			/* 7091 */
  0,			/* 7092 */
  0,			/* 7093 */
  0,			/* 7094 */
  0,			/* 7095 */
  0,			/* 7096 */
  0,			/* 7097 */
  0,			/* 7098 */
  0,			/* 7099 */
  0,			/* 7100 */
  0,			/* 7101 */
  0,			/* 7102 */
  0,			/* 7103 */
  0,			/* 7104 */
  0,			/* 7105 */
  0,			/* 7106 */
  0,			/* 7107 */
  0,			/* 7108 */
  0,			/* 7109 */
  0,			/* 7110 */
  0,			/* 7111 */
  0,			/* 7112 */
  0,			/* 7113 */
  0,			/* 7114 */
  0,			/* 7115 */
  0,			/* 7116 */
  0,			/* 7117 */
  0,			/* 7118 */
  0,			/* 7119 */
  0,			/* 7120 */
  0,			/* 7121 */
  0,			/* 7122 */
  0,			/* 7123 */
  0,			/* 7124 */
  0,			/* 7125 */
  0,			/* 7126 */
  0,			/* 7127 */
  0,			/* 7128 */
  0,			/* 7129 */
  0,			/* 7130 */
  0,			/* 7131 */
  0,			/* 7132 */
  0,			/* 7133 */
  0,			/* 7134 */
  0,			/* 7135 */
  0,			/* 7136 */
  0,			/* 7137 */
  0,			/* 7138 */
  0,			/* 7139 */
  0,			/* 7140 */
  0,			/* 7141 */
  0,			/* 7142 */
  0,			/* 7143 */
  0,			/* 7144 */
  0,			/* 7145 */
  0,			/* 7146 */
  0,			/* 7147 */
  0,			/* 7148 */
  0,			/* 7149 */
  0,			/* 7150 */
  0,			/* 7151 */
  0,			/* 7152 */
  0,			/* 7153 */
  0,			/* 7154 */
  0,			/* 7155 */
  0,			/* 7156 */
  0,			/* 7157 */
  0,			/* 7158 */
  0,			/* 7159 */
  0,			/* 7160 */
  0,			/* 7161 */
  0,			/* 7162 */
  0,			/* 7163 */
  0,			/* 7164 */
  0,			/* 7165 */
  0,			/* 7166 */
  0,			/* 7167 */
  0,			/* 7168 */
  0,			/* 7169 */
  0,			/* 7170 */
  0,			/* 7171 */
  0,			/* 7172 */
  0,			/* 7173 */
  0,			/* 7174 */
  0,			/* 7175 */
  0,			/* 7176 */
  0,			/* 7177 */
  0,			/* 7178 */
  0,			/* 7179 */
  0,			/* 7180 */
  0,			/* 7181 */
  0,			/* 7182 */
  0,			/* 7183 */
  0,			/* 7184 */
  0,			/* 7185 */
  0,			/* 7186 */
  0,			/* 7187 */
  0,			/* 7188 */
  0,			/* 7189 */
  0,			/* 7190 */
  0,			/* 7191 */
  0,			/* 7192 */
  0,			/* 7193 */
  0,			/* 7194 */
  0,			/* 7195 */
  0,			/* 7196 */
  0,			/* 7197 */
  0,			/* 7198 */
  0,			/* 7199 */
  0,			/* 7200 */
  0,			/* 7201 */
  0,			/* 7202 */
  0,			/* 7203 */
  0,			/* 7204 */
  0,			/* 7205 */
  0,			/* 7206 */
  0,			/* 7207 */
  0,			/* 7208 */
  0,			/* 7209 */
  0,			/* 7210 */
  0,			/* 7211 */
  0,			/* 7212 */
  0,			/* 7213 */
  0,			/* 7214 */
  0,			/* 7215 */
  0,			/* 7216 */
  0,			/* 7217 */
  0,			/* 7218 */
  0,			/* 7219 */
  0,			/* 7220 */
  0,			/* 7221 */
  0,			/* 7222 */
  0,			/* 7223 */
  0,			/* 7224 */
  0,			/* 7225 */
  0,			/* 7226 */
  0,			/* 7227 */
  0,			/* 7228 */
  0,			/* 7229 */
  0,			/* 7230 */
  0,			/* 7231 */
  0,			/* 7232 */
  0,			/* 7233 */
  0,			/* 7234 */
  0,			/* 7235 */
  0,			/* 7236 */
  0,			/* 7237 */
  0,			/* 7238 */
  0,			/* 7239 */
  0,			/* 7240 */
  0,			/* 7241 */
  0,			/* 7242 */
  0,			/* 7243 */
  0,			/* 7244 */
  0,			/* 7245 */
  0,			/* 7246 */
  0,			/* 7247 */
  0,			/* 7248 */
  0,			/* 7249 */
  0,			/* 7250 */
  0,			/* 7251 */
  0,			/* 7252 */
  0,			/* 7253 */
  0,			/* 7254 */
  0,			/* 7255 */
  0,			/* 7256 */
  0,			/* 7257 */
  0,			/* 7258 */
  0,			/* 7259 */
  0,			/* 7260 */
  0,			/* 7261 */
  0,			/* 7262 */
  0,			/* 7263 */
  0,			/* 7264 */
  0,			/* 7265 */
  0,			/* 7266 */
  0,			/* 7267 */
  0,			/* 7268 */
  0,			/* 7269 */
  0,			/* 7270 */
  0,			/* 7271 */
  0,			/* 7272 */
  0,			/* 7273 */
  0,			/* 7274 */
  0,			/* 7275 */
  0,			/* 7276 */
  0,			/* 7277 */
  0,			/* 7278 */
  0,			/* 7279 */
  0,			/* 7280 */
  0,			/* 7281 */
  0,			/* 7282 */
  0,			/* 7283 */
  0,			/* 7284 */
  0,			/* 7285 */
  0,			/* 7286 */
  0,			/* 7287 */
  0,			/* 7288 */
  0,			/* 7289 */
  0,			/* 7290 */
  0,			/* 7291 */
  0,			/* 7292 */
  0,			/* 7293 */
  0,			/* 7294 */
  0,			/* 7295 */
  0,			/* 7296 */
  0,			/* 7297 */
  0,			/* 7298 */
  0,			/* 7299 */
  0,			/* 7300 */
  0,			/* 7301 */
  0,			/* 7302 */
  0,			/* 7303 */
  0,			/* 7304 */
  0,			/* 7305 */
  0,			/* 7306 */
  0,			/* 7307 */
  0,			/* 7308 */
  0,			/* 7309 */
  0,			/* 7310 */
  0,			/* 7311 */
  0,			/* 7312 */
  0,			/* 7313 */
  0,			/* 7314 */
  0,			/* 7315 */
  0,			/* 7316 */
  0,			/* 7317 */
  0,			/* 7318 */
  0,			/* 7319 */
  0,			/* 7320 */
  0,			/* 7321 */
  0,			/* 7322 */
  0,			/* 7323 */
  0,			/* 7324 */
  0,			/* 7325 */
  0,			/* 7326 */
  0,			/* 7327 */
  0,			/* 7328 */
  0,			/* 7329 */
  0,			/* 7330 */
  0,			/* 7331 */
  0,			/* 7332 */
  0,			/* 7333 */
  0,			/* 7334 */
  0,			/* 7335 */
  0,			/* 7336 */
  0,			/* 7337 */
  0,			/* 7338 */
  0,			/* 7339 */
  0,			/* 7340 */
  0,			/* 7341 */
  0,			/* 7342 */
  0,			/* 7343 */
  0,			/* 7344 */
  0,			/* 7345 */
  0,			/* 7346 */
  0,			/* 7347 */
  0,			/* 7348 */
  0,			/* 7349 */
  0,			/* 7350 */
  0,			/* 7351 */
  0,			/* 7352 */
  0,			/* 7353 */
  0,			/* 7354 */
  0,			/* 7355 */
  0,			/* 7356 */
  0,			/* 7357 */
  0,			/* 7358 */
  0,			/* 7359 */
  0,			/* 7360 */
  0,			/* 7361 */
  0,			/* 7362 */
  0,			/* 7363 */
  0,			/* 7364 */
  0,			/* 7365 */
  0,			/* 7366 */
  0,			/* 7367 */
  0,			/* 7368 */
  0,			/* 7369 */
  0,			/* 7370 */
  0,			/* 7371 */
  0,			/* 7372 */
  0,			/* 7373 */
  0,			/* 7374 */
  0,			/* 7375 */
  0,			/* 7376 */
  0,			/* 7377 */
  0,			/* 7378 */
  0,			/* 7379 */
  0,			/* 7380 */
  0,			/* 7381 */
  0,			/* 7382 */
  0,			/* 7383 */
  0,			/* 7384 */
  0,			/* 7385 */
  0,			/* 7386 */
  0,			/* 7387 */
  0,			/* 7388 */
  0,			/* 7389 */
  0,			/* 7390 */
  0,			/* 7391 */
  0,			/* 7392 */
  0,			/* 7393 */
  0,			/* 7394 */
  0,			/* 7395 */
  0,			/* 7396 */
  0,			/* 7397 */
  0,			/* 7398 */
  0,			/* 7399 */
  0,			/* 7400 */
  0,			/* 7401 */
  0,			/* 7402 */
  0,			/* 7403 */
  0,			/* 7404 */
  0,			/* 7405 */
  0,			/* 7406 */
  0,			/* 7407 */
  0,			/* 7408 */
  0,			/* 7409 */
  0,			/* 7410 */
  0,			/* 7411 */
  0,			/* 7412 */
  0,			/* 7413 */
  0,			/* 7414 */
  0,			/* 7415 */
  0,			/* 7416 */
  0,			/* 7417 */
  0,			/* 7418 */
  0,			/* 7419 */
  0,			/* 7420 */
  0,			/* 7421 */
  0,			/* 7422 */
  0,			/* 7423 */
  0,			/* 7424 */
  0,			/* 7425 */
  0,			/* 7426 */
  0,			/* 7427 */
  0,			/* 7428 */
  0,			/* 7429 */
  0,			/* 7430 */
  0,			/* 7431 */
  0,			/* 7432 */
  0,			/* 7433 */
  0,			/* 7434 */
  0,			/* 7435 */
  0,			/* 7436 */
  0,			/* 7437 */
  0,			/* 7438 */
  0,			/* 7439 */
  0,			/* 7440 */
  0,			/* 7441 */
  0,			/* 7442 */
  0,			/* 7443 */
  0,			/* 7444 */
  0,			/* 7445 */
  0,			/* 7446 */
  0,			/* 7447 */
  0,			/* 7448 */
  0,			/* 7449 */
  0,			/* 7450 */
  0,			/* 7451 */
  0,			/* 7452 */
  0,			/* 7453 */
  0,			/* 7454 */
  0,			/* 7455 */
  0,			/* 7456 */
  0,			/* 7457 */
  0,			/* 7458 */
  0,			/* 7459 */
  0,			/* 7460 */
  0,			/* 7461 */
  0,			/* 7462 */
  0,			/* 7463 */
  0,			/* 7464 */
  0,			/* 7465 */
  0,			/* 7466 */
  0,			/* 7467 */
  0,			/* 7468 */
  0,			/* 7469 */
  0,			/* 7470 */
  0,			/* 7471 */
  0,			/* 7472 */
  0,			/* 7473 */
  0,			/* 7474 */
  0,			/* 7475 */
  0,			/* 7476 */
  0,			/* 7477 */
  0,			/* 7478 */
  0,			/* 7479 */
  0,			/* 7480 */
  0,			/* 7481 */
  0,			/* 7482 */
  0,			/* 7483 */
  0,			/* 7484 */
  0,			/* 7485 */
  0,			/* 7486 */
  0,			/* 7487 */
  0,			/* 7488 */
  0,			/* 7489 */
  0,			/* 7490 */
  0,			/* 7491 */
  0,			/* 7492 */
  0,			/* 7493 */
  0,			/* 7494 */
  0,			/* 7495 */
  0,			/* 7496 */
  0,			/* 7497 */
  0,			/* 7498 */
  0,			/* 7499 */
  0,			/* 7500 */
  0,			/* 7501 */
  0,			/* 7502 */
  0,			/* 7503 */
  0,			/* 7504 */
  0,			/* 7505 */
  0,			/* 7506 */
  0,			/* 7507 */
  0,			/* 7508 */
  0,			/* 7509 */
  0,			/* 7510 */
  0,			/* 7511 */
  0,			/* 7512 */
  0,			/* 7513 */
  0,			/* 7514 */
  0,			/* 7515 */
  0,			/* 7516 */
  0,			/* 7517 */
  0,			/* 7518 */
  0,			/* 7519 */
  0,			/* 7520 */
  0,			/* 7521 */
  0,			/* 7522 */
  0,			/* 7523 */
  0,			/* 7524 */
  0,			/* 7525 */
  0,			/* 7526 */
  0,			/* 7527 */
  0,			/* 7528 */
  0,			/* 7529 */
  0,			/* 7530 */
  0,			/* 7531 */
  0,			/* 7532 */
  0,			/* 7533 */
  0,			/* 7534 */
  0,			/* 7535 */
  0,			/* 7536 */
  0,			/* 7537 */
  0,			/* 7538 */
  0,			/* 7539 */
  0,			/* 7540 */
  0,			/* 7541 */
  0,			/* 7542 */
  0,			/* 7543 */
  0,			/* 7544 */
  0,			/* 7545 */
  0,			/* 7546 */
  0,			/* 7547 */
  0,			/* 7548 */
  0,			/* 7549 */
  0,			/* 7550 */
  0,			/* 7551 */
  0,			/* 7552 */
  0,			/* 7553 */
  0,			/* 7554 */
  0,			/* 7555 */
  0,			/* 7556 */
  0,			/* 7557 */
  0,			/* 7558 */
  0,			/* 7559 */
  0,			/* 7560 */
  0,			/* 7561 */
  0,			/* 7562 */
  0,			/* 7563 */
  0,			/* 7564 */
  0,			/* 7565 */
  0,			/* 7566 */
  0,			/* 7567 */
  0,			/* 7568 */
  0,			/* 7569 */
  0,			/* 7570 */
  0,			/* 7571 */
  0,			/* 7572 */
  0,			/* 7573 */
  0,			/* 7574 */
  0,			/* 7575 */
  0,			/* 7576 */
  0,			/* 7577 */
  0,			/* 7578 */
  0,			/* 7579 */
  0,			/* 7580 */
  0,			/* 7581 */
  0,			/* 7582 */
  0,			/* 7583 */
  0,			/* 7584 */
  0,			/* 7585 */
  0,			/* 7586 */
  0,			/* 7587 */
  0,			/* 7588 */
  0,			/* 7589 */
  0,			/* 7590 */
  0,			/* 7591 */
  0,			/* 7592 */
  0,			/* 7593 */
  0,			/* 7594 */
  0,			/* 7595 */
  0,			/* 7596 */
  0,			/* 7597 */
  0,			/* 7598 */
  0,			/* 7599 */
  0,			/* 7600 */
  0,			/* 7601 */
  0,			/* 7602 */
  0,			/* 7603 */
  0,			/* 7604 */
  0,			/* 7605 */
  0,			/* 7606 */
  0,			/* 7607 */
  0,			/* 7608 */
  0,			/* 7609 */
  0,			/* 7610 */
  0,			/* 7611 */
  0,			/* 7612 */
  0,			/* 7613 */
  0,			/* 7614 */
  0,			/* 7615 */
  0,			/* 7616 */
  0,			/* 7617 */
  0,			/* 7618 */
  0,			/* 7619 */
  0,			/* 7620 */
  0,			/* 7621 */
  0,			/* 7622 */
  0,			/* 7623 */
  0,			/* 7624 */
  0,			/* 7625 */
  0,			/* 7626 */
  0,			/* 7627 */
  0,			/* 7628 */
  0,			/* 7629 */
  0,			/* 7630 */
  0,			/* 7631 */
  0,			/* 7632 */
  0,			/* 7633 */
  0,			/* 7634 */
  0,			/* 7635 */
  0,			/* 7636 */
  0,			/* 7637 */
  0,			/* 7638 */
  0,			/* 7639 */
  0,			/* 7640 */
  0,			/* 7641 */
  0,			/* 7642 */
  0,			/* 7643 */
  0,			/* 7644 */
  0,			/* 7645 */
  0,			/* 7646 */
  0,			/* 7647 */
  0,			/* 7648 */
  0,			/* 7649 */
  0,			/* 7650 */
  0,			/* 7651 */
  0,			/* 7652 */
  0,			/* 7653 */
  0,			/* 7654 */
  0,			/* 7655 */
  0,			/* 7656 */
  0,			/* 7657 */
  0,			/* 7658 */
  0,			/* 7659 */
  0,			/* 7660 */
  0,			/* 7661 */
  0,			/* 7662 */
  0,			/* 7663 */
  0,			/* 7664 */
  0,			/* 7665 */
  0,			/* 7666 */
  0,			/* 7667 */
  0,			/* 7668 */
  0,			/* 7669 */
  0,			/* 7670 */
  0,			/* 7671 */
  0,			/* 7672 */
  0,			/* 7673 */
  0,			/* 7674 */
  0,			/* 7675 */
  0,			/* 7676 */
  0,			/* 7677 */
  0,			/* 7678 */
  0,			/* 7679 */
  0,			/* 7680 */
  0,			/* 7681 */
  0,			/* 7682 */
  0,			/* 7683 */
  0,			/* 7684 */
  0,			/* 7685 */
  0,			/* 7686 */
  0,			/* 7687 */
  0,			/* 7688 */
  0,			/* 7689 */
  0,			/* 7690 */
  0,			/* 7691 */
  0,			/* 7692 */
  0,			/* 7693 */
  0,			/* 7694 */
  0,			/* 7695 */
  0,			/* 7696 */
  0,			/* 7697 */
  0,			/* 7698 */
  0,			/* 7699 */
  0,			/* 7700 */
  0,			/* 7701 */
  0,			/* 7702 */
  0,			/* 7703 */
  0,			/* 7704 */
  0,			/* 7705 */
  0,			/* 7706 */
  0,			/* 7707 */
  0,			/* 7708 */
  0,			/* 7709 */
  0,			/* 7710 */
  0,			/* 7711 */
  0,			/* 7712 */
  0,			/* 7713 */
  0,			/* 7714 */
  0,			/* 7715 */
  0,			/* 7716 */
  0,			/* 7717 */
  0,			/* 7718 */
  0,			/* 7719 */
  0,			/* 7720 */
  0,			/* 7721 */
  0,			/* 7722 */
  0,			/* 7723 */
  0,			/* 7724 */
  0,			/* 7725 */
  0,			/* 7726 */
  0,			/* 7727 */
  0,			/* 7728 */
  0,			/* 7729 */
  0,			/* 7730 */
  0,			/* 7731 */
  0,			/* 7732 */
  0,			/* 7733 */
  0,			/* 7734 */
  0,			/* 7735 */
  0,			/* 7736 */
  0,			/* 7737 */
  0,			/* 7738 */
  0,			/* 7739 */
  0,			/* 7740 */
  0,			/* 7741 */
  0,			/* 7742 */
  0,			/* 7743 */
  0,			/* 7744 */
  0,			/* 7745 */
  0,			/* 7746 */
  0,			/* 7747 */
  0,			/* 7748 */
  0,			/* 7749 */
  0,			/* 7750 */
  0,			/* 7751 */
  0,			/* 7752 */
  0,			/* 7753 */
  0,			/* 7754 */
  0,			/* 7755 */
  0,			/* 7756 */
  0,			/* 7757 */
  0,			/* 7758 */
  0,			/* 7759 */
  0,			/* 7760 */
  0,			/* 7761 */
  0,			/* 7762 */
  0,			/* 7763 */
  0,			/* 7764 */
  0,			/* 7765 */
  0,			/* 7766 */
  0,			/* 7767 */
  0,			/* 7768 */
  0,			/* 7769 */
  0,			/* 7770 */
  0,			/* 7771 */
  0,			/* 7772 */
  0,			/* 7773 */
  0,			/* 7774 */
  0,			/* 7775 */
  0,			/* 7776 */
  0,			/* 7777 */
  0,			/* 7778 */
  0,			/* 7779 */
  0,			/* 7780 */
  0,			/* 7781 */
  0,			/* 7782 */
  0,			/* 7783 */
  0,			/* 7784 */
  0,			/* 7785 */
  0,			/* 7786 */
  0,			/* 7787 */
  0,			/* 7788 */
  0,			/* 7789 */
  0,			/* 7790 */
  0,			/* 7791 */
  0,			/* 7792 */
  0,			/* 7793 */
  0,			/* 7794 */
  0,			/* 7795 */
  0,			/* 7796 */
  0,			/* 7797 */
  0,			/* 7798 */
  0,			/* 7799 */
  0,			/* 7800 */
  0,			/* 7801 */
  0,			/* 7802 */
  0,			/* 7803 */
  0,			/* 7804 */
  0,			/* 7805 */
  0,			/* 7806 */
  0,			/* 7807 */
  0,			/* 7808 */
  0,			/* 7809 */
  0,			/* 7810 */
  0,			/* 7811 */
  0,			/* 7812 */
  0,			/* 7813 */
  0,			/* 7814 */
  0,			/* 7815 */
  0,			/* 7816 */
  0,			/* 7817 */
  0,			/* 7818 */
  0,			/* 7819 */
  0,			/* 7820 */
  0,			/* 7821 */
  0,			/* 7822 */
  0,			/* 7823 */
  0,			/* 7824 */
  0,			/* 7825 */
  0,			/* 7826 */
  0,			/* 7827 */
  0,			/* 7828 */
  0,			/* 7829 */
  0,			/* 7830 */
  0,			/* 7831 */
  0,			/* 7832 */
  0,			/* 7833 */
  0,			/* 7834 */
  0,			/* 7835 */
  0,			/* 7836 */
  0,			/* 7837 */
  0,			/* 7838 */
  0,			/* 7839 */
  0,			/* 7840 */
  0,			/* 7841 */
  0,			/* 7842 */
  0,			/* 7843 */
  0,			/* 7844 */
  0,			/* 7845 */
  0,			/* 7846 */
  0,			/* 7847 */
  0,			/* 7848 */
  0,			/* 7849 */
  0,			/* 7850 */
  0,			/* 7851 */
  0,			/* 7852 */
  0,			/* 7853 */
  0,			/* 7854 */
  0,			/* 7855 */
  0,			/* 7856 */
  0,			/* 7857 */
  0,			/* 7858 */
  0,			/* 7859 */
  0,			/* 7860 */
  0,			/* 7861 */
  0,			/* 7862 */
  0,			/* 7863 */
  0,			/* 7864 */
  0,			/* 7865 */
  0,			/* 7866 */
  0,			/* 7867 */
  0,			/* 7868 */
  0,			/* 7869 */
  0,			/* 7870 */
  0,			/* 7871 */
  0,			/* 7872 */
  0,			/* 7873 */
  0,			/* 7874 */
  0,			/* 7875 */
  0,			/* 7876 */
  0,			/* 7877 */
  0,			/* 7878 */
  0,			/* 7879 */
  0,			/* 7880 */
  0,			/* 7881 */
  0,			/* 7882 */
  0,			/* 7883 */
  0,			/* 7884 */
  0,			/* 7885 */
  0,			/* 7886 */
  0,			/* 7887 */
  0,			/* 7888 */
  0,			/* 7889 */
  0,			/* 7890 */
  0,			/* 7891 */
  0,			/* 7892 */
  0,			/* 7893 */
  0,			/* 7894 */
  0,			/* 7895 */
  0,			/* 7896 */
  0,			/* 7897 */
  0,			/* 7898 */
  0,			/* 7899 */
  0,			/* 7900 */
  0,			/* 7901 */
  0,			/* 7902 */
  0,			/* 7903 */
  0,			/* 7904 */
  0,			/* 7905 */
  0,			/* 7906 */
  0,			/* 7907 */
  0,			/* 7908 */
  0,			/* 7909 */
  0,			/* 7910 */
  0,			/* 7911 */
  0,			/* 7912 */
  0,			/* 7913 */
  0,			/* 7914 */
  0,			/* 7915 */
  0,			/* 7916 */
  0,			/* 7917 */
  0,			/* 7918 */
  0,			/* 7919 */
  0,			/* 7920 */
  0,			/* 7921 */
  0,			/* 7922 */
  0,			/* 7923 */
  0,			/* 7924 */
  0,			/* 7925 */
  0,			/* 7926 */
  0,			/* 7927 */
  0,			/* 7928 */
  0,			/* 7929 */
  0,			/* 7930 */
  0,			/* 7931 */
  0,			/* 7932 */
  0,			/* 7933 */
  0,			/* 7934 */
  0,			/* 7935 */
  0,			/* 7936 */
  0,			/* 7937 */
  0,			/* 7938 */
  0,			/* 7939 */
  0,			/* 7940 */
  0,			/* 7941 */
  0,			/* 7942 */
  0,			/* 7943 */
  0,			/* 7944 */
  0,			/* 7945 */
  0,			/* 7946 */
  0,			/* 7947 */
  0,			/* 7948 */
  0,			/* 7949 */
  0,			/* 7950 */
  0,			/* 7951 */
  0,			/* 7952 */
  0,			/* 7953 */
  0,			/* 7954 */
  0,			/* 7955 */
  0,			/* 7956 */
  0,			/* 7957 */
  0,			/* 7958 */
  0,			/* 7959 */
  0,			/* 7960 */
  0,			/* 7961 */
  0,			/* 7962 */
  0,			/* 7963 */
  0,			/* 7964 */
  0,			/* 7965 */
  0,			/* 7966 */
  0,			/* 7967 */
  0,			/* 7968 */
  0,			/* 7969 */
  0,			/* 7970 */
  0,			/* 7971 */
  0,			/* 7972 */
  0,			/* 7973 */
  0,			/* 7974 */
  0,			/* 7975 */
  0,			/* 7976 */
  0,			/* 7977 */
  0,			/* 7978 */
  0,			/* 7979 */
  0,			/* 7980 */
  0,			/* 7981 */
  0,			/* 7982 */
  0,			/* 7983 */
  0,			/* 7984 */
  0,			/* 7985 */
  0,			/* 7986 */
  0,			/* 7987 */
  0,			/* 7988 */
  0,			/* 7989 */
  0,			/* 7990 */
  0,			/* 7991 */
  0,			/* 7992 */
  0,			/* 7993 */
  0,			/* 7994 */
  0,			/* 7995 */
  0,			/* 7996 */
  0,			/* 7997 */
  0,			/* 7998 */
  0,			/* 7999 */
  0,			/* 8000 */
  0,			/* 8001 */
  0,			/* 8002 */
  0,			/* 8003 */
  0,			/* 8004 */
  0,			/* 8005 */
  0,			/* 8006 */
  0,			/* 8007 */
  0,			/* 8008 */
  0,			/* 8009 */
  0,			/* 8010 */
  0,			/* 8011 */
  0,			/* 8012 */
  0,			/* 8013 */
  0,			/* 8014 */
  0,			/* 8015 */
  0,			/* 8016 */
  0,			/* 8017 */
  0,			/* 8018 */
  0,			/* 8019 */
  0,			/* 8020 */
  0,			/* 8021 */
  0,			/* 8022 */
  0,			/* 8023 */
  0,			/* 8024 */
  0,			/* 8025 */
  0,			/* 8026 */
  0,			/* 8027 */
  0,			/* 8028 */
  0,			/* 8029 */
  0,			/* 8030 */
  0,			/* 8031 */
  0,			/* 8032 */
  0,			/* 8033 */
  0,			/* 8034 */
  0,			/* 8035 */
  0,			/* 8036 */
  0,			/* 8037 */
  0,			/* 8038 */
  0,			/* 8039 */
  0,			/* 8040 */
  0,			/* 8041 */
  0,			/* 8042 */
  0,			/* 8043 */
  0,			/* 8044 */
  0,			/* 8045 */
  0,			/* 8046 */
  0,			/* 8047 */
  0,			/* 8048 */
  0,			/* 8049 */
  0,			/* 8050 */
  0,			/* 8051 */
  0,			/* 8052 */
  0,			/* 8053 */
  0,			/* 8054 */
  0,			/* 8055 */
  0,			/* 8056 */
  0,			/* 8057 */
  0,			/* 8058 */
  0,			/* 8059 */
  0,			/* 8060 */
  0,			/* 8061 */
  0,			/* 8062 */
  0,			/* 8063 */
  0,			/* 8064 */
  0,			/* 8065 */
  0,			/* 8066 */
  0,			/* 8067 */
  0,			/* 8068 */
  0,			/* 8069 */
  0,			/* 8070 */
  0,			/* 8071 */
  0,			/* 8072 */
  0,			/* 8073 */
  0,			/* 8074 */
  0,			/* 8075 */
  0,			/* 8076 */
  0,			/* 8077 */
  0,			/* 8078 */
  0,			/* 8079 */
  0,			/* 8080 */
  0,			/* 8081 */
  0,			/* 8082 */
  0,			/* 8083 */
  0,			/* 8084 */
  0,			/* 8085 */
  0,			/* 8086 */
  0,			/* 8087 */
  0,			/* 8088 */
  0,			/* 8089 */
  0,			/* 8090 */
  0,			/* 8091 */
  0,			/* 8092 */
  0,			/* 8093 */
  0,			/* 8094 */
  0,			/* 8095 */
  0,			/* 8096 */
  0,			/* 8097 */
  0,			/* 8098 */
  0,			/* 8099 */
  0,			/* 8100 */
  0,			/* 8101 */
  0,			/* 8102 */
  0,			/* 8103 */
  0,			/* 8104 */
  0,			/* 8105 */
  0,			/* 8106 */
  0,			/* 8107 */
  0,			/* 8108 */
  0,			/* 8109 */
  0,			/* 8110 */
  0,			/* 8111 */
  0,			/* 8112 */
  0,			/* 8113 */
  0,			/* 8114 */
  0,			/* 8115 */
  0,			/* 8116 */
  0,			/* 8117 */
  0,			/* 8118 */
  0,			/* 8119 */
  0,			/* 8120 */
  0,			/* 8121 */
  0,			/* 8122 */
  0,			/* 8123 */
  0,			/* 8124 */
  0,			/* 8125 */
  0,			/* 8126 */
  0,			/* 8127 */
  0,			/* 8128 */
  0,			/* 8129 */
  0,			/* 8130 */
  0,			/* 8131 */
  0,			/* 8132 */
  0,			/* 8133 */
  0,			/* 8134 */
  0,			/* 8135 */
  0,			/* 8136 */
  0,			/* 8137 */
  0,			/* 8138 */
  0,			/* 8139 */
  0,			/* 8140 */
  0,			/* 8141 */
  0,			/* 8142 */
  0,			/* 8143 */
  0,			/* 8144 */
  0,			/* 8145 */
  0,			/* 8146 */
  0,			/* 8147 */
  0,			/* 8148 */
  0,			/* 8149 */
  0,			/* 8150 */
  0,			/* 8151 */
  0,			/* 8152 */
  0,			/* 8153 */
  0,			/* 8154 */
  0,			/* 8155 */
  0,			/* 8156 */
  0,			/* 8157 */
  0,			/* 8158 */
  0,			/* 8159 */
  0,			/* 8160 */
  0,			/* 8161 */
  0,			/* 8162 */
  0,			/* 8163 */
  0,			/* 8164 */
  0,			/* 8165 */
  0,			/* 8166 */
  0,			/* 8167 */
  0,			/* 8168 */
  0,			/* 8169 */
  0,			/* 8170 */
  0,			/* 8171 */
  0,			/* 8172 */
  0,			/* 8173 */
  0,			/* 8174 */
  0,			/* 8175 */
  0,			/* 8176 */
  0,			/* 8177 */
  0,			/* 8178 */
  0,			/* 8179 */
  0,			/* 8180 */
  0,			/* 8181 */
  0,			/* 8182 */
  0,			/* 8183 */
  0,			/* 8184 */
  0,			/* 8185 */
  0,			/* 8186 */
  0,			/* 8187 */
  0,			/* 8188 */
  0,			/* 8189 */
  0,			/* 8190 */
  0,			/* 8191 */
  0,			/* 8192 */
  0,			/* 8193 */
  0,			/* 8194 */
  0,			/* 8195 */
  0,			/* 8196 */
  0,			/* 8197 */
  0,			/* 8198 */
  0,			/* 8199 */
  0,			/* ERROR_DS_NOT_INSTALLED */
  0,			/* ERROR_DS_MEMBERSHIP_EVALUATED_LOCALLY */
  0,			/* ERROR_DS_NO_ATTRIBUTE_OR_VALUE */
  0,			/* ERROR_DS_INVALID_ATTRIBUTE_SYNTAX */
  0,			/* ERROR_DS_ATTRIBUTE_TYPE_UNDEFINED */
  0,			/* ERROR_DS_ATTRIBUTE_OR_VALUE_EXISTS */
  0,			/* ERROR_DS_BUSY */
  0,			/* ERROR_DS_UNAVAILABLE */
  0,			/* ERROR_DS_NO_RIDS_ALLOCATED */
  0,			/* ERROR_DS_NO_MORE_RIDS */
  0,			/* ERROR_DS_INCORRECT_ROLE_OWNER */
  0,			/* ERROR_DS_RIDMGR_INIT_ERROR */
  0,			/* ERROR_DS_OBJ_CLASS_VIOLATION */
  0,			/* ERROR_DS_CANT_ON_NON_LEAF */
  0,			/* ERROR_DS_CANT_ON_RDN */
  0,			/* ERROR_DS_CANT_MOD_OBJ_CLASS */
  0,			/* ERROR_DS_CROSS_DOM_MOVE_ERROR */
  0,			/* ERROR_DS_GC_NOT_AVAILABLE */
  0,			/* ERROR_SHARED_POLICY */
  0,			/* ERROR_POLICY_OBJECT_NOT_FOUND */
  0,			/* ERROR_POLICY_ONLY_IN_DS */
  0,			/* ERROR_PROMOTION_ACTIVE */
  0,			/* ERROR_NO_PROMOTION_ACTIVE */
  0,			/* 8223 */
  0,			/* ERROR_DS_OPERATIONS_ERROR */
  0,			/* ERROR_DS_PROTOCOL_ERROR */
  0,			/* ERROR_DS_TIMELIMIT_EXCEEDED */
  0,			/* ERROR_DS_SIZELIMIT_EXCEEDED */
  0,			/* ERROR_DS_ADMIN_LIMIT_EXCEEDED */
  0,			/* ERROR_DS_COMPARE_FALSE */
  0,			/* ERROR_DS_COMPARE_TRUE */
  0,			/* ERROR_DS_AUTH_METHOD_NOT_SUPPORTED */
  0,			/* ERROR_DS_STRONG_AUTH_REQUIRED */
  0,			/* ERROR_DS_INAPPROPRIATE_AUTH */
  0,			/* ERROR_DS_AUTH_UNKNOWN */
  0,			/* ERROR_DS_REFERRAL */
  0,			/* ERROR_DS_UNAVAILABLE_CRIT_EXTENSION */
  0,			/* ERROR_DS_CONFIDENTIALITY_REQUIRED */
  0,			/* ERROR_DS_INAPPROPRIATE_MATCHING */
  0,			/* ERROR_DS_CONSTRAINT_VIOLATION */
  0,			/* ERROR_DS_NO_SUCH_OBJECT */
  0,			/* ERROR_DS_ALIAS_PROBLEM */
  0,			/* ERROR_DS_INVALID_DN_SYNTAX */
  0,			/* ERROR_DS_IS_LEAF */
  0,			/* ERROR_DS_ALIAS_DEREF_PROBLEM */
  0,			/* ERROR_DS_UNWILLING_TO_PERFORM */
  0,			/* ERROR_DS_LOOP_DETECT */
  0,			/* ERROR_DS_NAMING_VIOLATION */
  0,			/* ERROR_DS_OBJECT_RESULTS_TOO_LARGE */
  0,			/* ERROR_DS_AFFECTS_MULTIPLE_DSAS */
  0,			/* ERROR_DS_SERVER_DOWN */
  0,			/* ERROR_DS_LOCAL_ERROR */
  0,			/* ERROR_DS_ENCODING_ERROR */
  0,			/* ERROR_DS_DECODING_ERROR */
  0,			/* ERROR_DS_FILTER_UNKNOWN */
  0,			/* ERROR_DS_PARAM_ERROR */
  0,			/* ERROR_DS_NOT_SUPPORTED */
  0,			/* ERROR_DS_NO_RESULTS_RETURNED */
  0,			/* ERROR_DS_CONTROL_NOT_FOUND */
  0,			/* ERROR_DS_CLIENT_LOOP */
  0,			/* ERROR_DS_REFERRAL_LIMIT_EXCEEDED */
  0,			/* ERROR_DS_SORT_CONTROL_MISSING */
  0,			/* ERROR_DS_OFFSET_RANGE_ERROR */
  0,			/* 8263 */
  0,			/* 8264 */
  0,			/* 8265 */
  0,			/* 8266 */
  0,			/* 8267 */
  0,			/* 8268 */
  0,			/* 8269 */
  0,			/* 8270 */
  0,			/* 8271 */
  0,			/* 8272 */
  0,			/* 8273 */
  0,			/* 8274 */
  0,			/* 8275 */
  0,			/* 8276 */
  0,			/* 8277 */
  0,			/* 8278 */
  0,			/* 8279 */
  0,			/* 8280 */
  0,			/* 8281 */
  0,			/* 8282 */
  0,			/* 8283 */
  0,			/* 8284 */
  0,			/* 8285 */
  0,			/* 8286 */
  0,			/* 8287 */
  0,			/* 8288 */
  0,			/* 8289 */
  0,			/* 8290 */
  0,			/* 8291 */
  0,			/* 8292 */
  0,			/* 8293 */
  0,			/* 8294 */
  0,			/* 8295 */
  0,			/* 8296 */
  0,			/* 8297 */
  0,			/* 8298 */
  0,			/* 8299 */
  0,			/* 8300 */
  0,			/* ERROR_DS_ROOT_MUST_BE_NC */
  0,			/* ERROR_DS_ADD_REPLICA_INHIBITED */
  0,			/* ERROR_DS_ATT_NOT_DEF_IN_SCHEMA */
  0,			/* ERROR_DS_MAX_OBJ_SIZE_EXCEEDED */
  0,			/* ERROR_DS_OBJ_STRING_NAME_EXISTS */
  0,			/* ERROR_DS_NO_RDN_DEFINED_IN_SCHEMA */
  0,			/* ERROR_DS_RDN_DOESNT_MATCH_SCHEMA */
  0,			/* ERROR_DS_NO_REQUESTED_ATTS_FOUND */
  0,			/* ERROR_DS_USER_BUFFER_TO_SMALL */
  0,			/* ERROR_DS_ATT_IS_NOT_ON_OBJ */
  0,			/* ERROR_DS_ILLEGAL_MOD_OPERATION */
  0,			/* ERROR_DS_OBJ_TOO_LARGE */
  0,			/* ERROR_DS_BAD_INSTANCE_TYPE */
  0,			/* ERROR_DS_MASTERDSA_REQUIRED */
  0,			/* ERROR_DS_OBJECT_CLASS_REQUIRED */
  0,			/* ERROR_DS_MISSING_REQUIRED_ATT */
  0,			/* ERROR_DS_ATT_NOT_DEF_FOR_CLASS */
  0,			/* ERROR_DS_ATT_ALREADY_EXISTS */
  0,			/* 8319 */
  0,			/* ERROR_DS_CANT_ADD_ATT_VALUES */
  0,			/* ERROR_DS_SINGLE_VALUE_CONSTRAINT */
  0,			/* ERROR_DS_RANGE_CONSTRAINT */
  0,			/* ERROR_DS_ATT_VAL_ALREADY_EXISTS */
  0,			/* ERROR_DS_CANT_REM_MISSING_ATT */
  0,			/* ERROR_DS_CANT_REM_MISSING_ATT_VAL */
  0,			/* ERROR_DS_ROOT_CANT_BE_SUBREF */
  0,			/* ERROR_DS_NO_CHAINING */
  0,			/* ERROR_DS_NO_CHAINED_EVAL */
  0,			/* ERROR_DS_NO_PARENT_OBJECT */
  0,			/* ERROR_DS_PARENT_IS_AN_ALIAS */
  0,			/* ERROR_DS_CANT_MIX_MASTER_AND_REPS */
  0,			/* ERROR_DS_CHILDREN_EXIST */
  0,			/* ERROR_DS_OBJ_NOT_FOUND */
  0,			/* ERROR_DS_ALIASED_OBJ_MISSING */
  0,			/* ERROR_DS_BAD_NAME_SYNTAX */
  0,			/* ERROR_DS_ALIAS_POINTS_TO_ALIAS */
  0,			/* ERROR_DS_CANT_DEREF_ALIAS */
  0,			/* ERROR_DS_OUT_OF_SCOPE */
  0,			/* ERROR_DS_OBJECT_BEING_REMOVED */
  0,			/* ERROR_DS_CANT_DELETE_DSA_OBJ */
  EIO,			/* ERROR_DS_GENERIC_ERROR */
  0,			/* ERROR_DS_DSA_MUST_BE_INT_MASTER */
  0,			/* ERROR_DS_CLASS_NOT_DSA */
  0,			/* ERROR_DS_INSUFF_ACCESS_RIGHTS */
  0,			/* ERROR_DS_ILLEGAL_SUPERIOR */
  0,			/* ERROR_DS_ATTRIBUTE_OWNED_BY_SAM */
  0,			/* ERROR_DS_NAME_TOO_MANY_PARTS */
  0,			/* ERROR_DS_NAME_TOO_LONG */
  0,			/* ERROR_DS_NAME_VALUE_TOO_LONG */
  0,			/* ERROR_DS_NAME_UNPARSEABLE */
  0,			/* ERROR_DS_NAME_TYPE_UNKNOWN */
  0,			/* ERROR_DS_NOT_AN_OBJECT */
  0,			/* ERROR_DS_SEC_DESC_TOO_SHORT */
  0,			/* ERROR_DS_SEC_DESC_INVALID */
  0,			/* ERROR_DS_NO_DELETED_NAME */
  0,			/* ERROR_DS_SUBREF_MUST_HAVE_PARENT */
  0,			/* ERROR_DS_NCNAME_MUST_BE_NC */
  0,			/* ERROR_DS_CANT_ADD_SYSTEM_ONLY */
  0,			/* ERROR_DS_CLASS_MUST_BE_CONCRETE */
  0,			/* ERROR_DS_INVALID_DMD */
  0,			/* ERROR_DS_OBJ_GUID_EXISTS */
  0,			/* ERROR_DS_NOT_ON_BACKLINK */
  0,			/* ERROR_DS_NO_CROSSREF_FOR_NC */
  0,			/* ERROR_DS_SHUTTING_DOWN */
  0,			/* ERROR_DS_UNKNOWN_OPERATION */
  0,			/* ERROR_DS_INVALID_ROLE_OWNER */
  0,			/* ERROR_DS_COULDNT_CONTACT_FSMO */
  0,			/* ERROR_DS_CROSS_NC_DN_RENAME */
  0,			/* ERROR_DS_CANT_MOD_SYSTEM_ONLY */
  0,			/* ERROR_DS_REPLICATOR_ONLY */
  0,			/* ERROR_DS_OBJ_CLASS_NOT_DEFINED */
  0,			/* ERROR_DS_OBJ_CLASS_NOT_SUBCLASS */
  0,			/* ERROR_DS_NAME_REFERENCE_INVALID */
  0,			/* ERROR_DS_CROSS_REF_EXISTS */
  0,			/* ERROR_DS_CANT_DEL_MASTER_CROSSREF */
  0,			/* ERROR_DS_SUBTREE_NOTIFY_NOT_NC_HEAD */
  0,			/* ERROR_DS_NOTIFY_FILTER_TOO_COMPLEX */
  0,			/* ERROR_DS_DUP_RDN */
  0,			/* ERROR_DS_DUP_OID */
  0,			/* ERROR_DS_DUP_MAPI_ID */
  0,			/* ERROR_DS_DUP_SCHEMA_ID_GUID */
  0,			/* ERROR_DS_DUP_LDAP_DISPLAY_NAME */
  0,			/* ERROR_DS_SEMANTIC_ATT_TEST */
  0,			/* ERROR_DS_SYNTAX_MISMATCH */
  0,			/* ERROR_DS_EXISTS_IN_MUST_HAVE */
  0,			/* ERROR_DS_EXISTS_IN_MAY_HAVE */
  0,			/* ERROR_DS_NONEXISTENT_MAY_HAVE */
  0,			/* ERROR_DS_NONEXISTENT_MUST_HAVE */
  0,			/* ERROR_DS_AUX_CLS_TEST_FAIL */
  0,			/* ERROR_DS_NONEXISTENT_POSS_SUP */
  0,			/* ERROR_DS_SUB_CLS_TEST_FAIL */
  0,			/* ERROR_DS_BAD_RDN_ATT_ID_SYNTAX */
  0,			/* ERROR_DS_EXISTS_IN_AUX_CLS */
  0,			/* ERROR_DS_EXISTS_IN_SUB_CLS */
  0,			/* ERROR_DS_EXISTS_IN_POSS_SUP */
  0,			/* ERROR_DS_RECALCSCHEMA_FAILED */
  0,			/* ERROR_DS_TREE_DELETE_NOT_FINISHED */
  0,			/* ERROR_DS_CANT_DELETE */
  0,			/* ERROR_DS_ATT_SCHEMA_REQ_ID */
  0,			/* ERROR_DS_BAD_ATT_SCHEMA_SYNTAX */
  0,			/* ERROR_DS_CANT_CACHE_ATT */
  0,			/* ERROR_DS_CANT_CACHE_CLASS */
  0,			/* ERROR_DS_CANT_REMOVE_ATT_CACHE */
  0,			/* ERROR_DS_CANT_REMOVE_CLASS_CACHE */
  0,			/* ERROR_DS_CANT_RETRIEVE_DN */
  0,			/* ERROR_DS_MISSING_SUPREF */
  0,			/* ERROR_DS_CANT_RETRIEVE_INSTANCE */
  0,			/* ERROR_DS_CODE_INCONSISTENCY */
  0,			/* ERROR_DS_DATABASE_ERROR */
  0,			/* ERROR_DS_GOVERNSID_MISSING */
  0,			/* ERROR_DS_MISSING_EXPECTED_ATT */
  0,			/* ERROR_DS_NCNAME_MISSING_CR_REF */
  0,			/* ERROR_DS_SECURITY_CHECKING_ERROR */
  0,			/* ERROR_DS_SCHEMA_NOT_LOADED */
  0,			/* ERROR_DS_SCHEMA_ALLOC_FAILED */
  0,			/* ERROR_DS_ATT_SCHEMA_REQ_SYNTAX */
  0,			/* ERROR_DS_GCVERIFY_ERROR */
  0,			/* ERROR_DS_DRA_SCHEMA_MISMATCH */
  0,			/* ERROR_DS_CANT_FIND_DSA_OBJ */
  0,			/* ERROR_DS_CANT_FIND_EXPECTED_NC */
  0,			/* ERROR_DS_CANT_FIND_NC_IN_CACHE */
  0,			/* ERROR_DS_CANT_RETRIEVE_CHILD */
  0,			/* ERROR_DS_SECURITY_ILLEGAL_MODIFY */
  0,			/* ERROR_DS_CANT_REPLACE_HIDDEN_REC */
  0,			/* ERROR_DS_BAD_HIERARCHY_FILE */
  0,			/* ERROR_DS_BUILD_HIERARCHY_TABLE_FAILED */
  0,			/* ERROR_DS_CONFIG_PARAM_MISSING */
  0,			/* ERROR_DS_COUNTING_AB_INDICES_FAILED */
  0,			/* ERROR_DS_HIERARCHY_TABLE_MALLOC_FAILED */
  0,			/* ERROR_DS_INTERNAL_FAILURE */
  0,			/* ERROR_DS_UNKNOWN_ERROR */
  0,			/* ERROR_DS_ROOT_REQUIRES_CLASS_TOP */
  0,			/* ERROR_DS_REFUSING_FSMO_ROLES */
  0,			/* ERROR_DS_MISSING_FSMO_SETTINGS */
  0,			/* ERROR_DS_UNABLE_TO_SURRENDER_ROLES */
  0,			/* ERROR_DS_DRA_GENERIC */
  0,			/* ERROR_DS_DRA_INVALID_PARAMETER */
  0,			/* ERROR_DS_DRA_BUSY */
  0,			/* ERROR_DS_DRA_BAD_DN */
  0,			/* ERROR_DS_DRA_BAD_NC */
  0,			/* ERROR_DS_DRA_DN_EXISTS */
  0,			/* ERROR_DS_DRA_INTERNAL_ERROR */
  0,			/* ERROR_DS_DRA_INCONSISTENT_DIT */
  0,			/* ERROR_DS_DRA_CONNECTION_FAILED */
  0,			/* ERROR_DS_DRA_BAD_INSTANCE_TYPE */
  0,			/* ERROR_DS_DRA_OUT_OF_MEM */
  0,			/* ERROR_DS_DRA_MAIL_PROBLEM */
  0,			/* ERROR_DS_DRA_REF_ALREADY_EXISTS */
  0,			/* ERROR_DS_DRA_REF_NOT_FOUND */
  0,			/* ERROR_DS_DRA_OBJ_IS_REP_SOURCE */
  0,			/* ERROR_DS_DRA_DB_ERROR */
  0,			/* ERROR_DS_DRA_NO_REPLICA */
  0,			/* ERROR_DS_DRA_ACCESS_DENIED */
  0,			/* ERROR_DS_DRA_NOT_SUPPORTED */
  0,			/* ERROR_DS_DRA_RPC_CANCELLED */
  0,			/* ERROR_DS_DRA_SOURCE_DISABLED */
  0,			/* ERROR_DS_DRA_SINK_DISABLED */
  0,			/* ERROR_DS_DRA_NAME_COLLISION */
  0,			/* ERROR_DS_DRA_SOURCE_REINSTALLED */
  0,			/* ERROR_DS_DRA_MISSING_PARENT */
  0,			/* ERROR_DS_DRA_PREEMPTED */
  0,			/* ERROR_DS_DRA_ABANDON_SYNC */
  0,			/* ERROR_DS_DRA_SHUTDOWN */
  0,			/* ERROR_DS_DRA_INCOMPATIBLE_PARTIAL_SET */
  0,			/* ERROR_DS_DRA_SOURCE_IS_PARTIAL_REPLICA */
  0,			/* ERROR_DS_DRA_EXTN_CONNECTION_FAILED */
  0,			/* ERROR_DS_INSTALL_SCHEMA_MISMATCH */
  0,			/* ERROR_DS_DUP_LINK_ID */
  0,			/* ERROR_DS_NAME_ERROR_RESOLVING */
  0,			/* ERROR_DS_NAME_ERROR_NOT_FOUND */
  0,			/* ERROR_DS_NAME_ERROR_NOT_UNIQUE */
  0,			/* ERROR_DS_NAME_ERROR_NO_MAPPING */
  0,			/* ERROR_DS_NAME_ERROR_DOMAIN_ONLY */
  0,			/* ERROR_DS_NAME_ERROR_NO_SYNTACTICAL_MAPPING */
  0,			/* ERROR_DS_CONSTRUCTED_ATT_MOD */
  0,			/* ERROR_DS_WRONG_OM_OBJ_CLASS */
  0,			/* ERROR_DS_DRA_REPL_PENDING */
  0,			/* ERROR_DS_DS_REQUIRED */
  0,			/* ERROR_DS_INVALID_LDAP_DISPLAY_NAME */
  0,			/* ERROR_DS_NON_BASE_SEARCH */
  0,			/* ERROR_DS_CANT_RETRIEVE_ATTS */
  0,			/* ERROR_DS_BACKLINK_WITHOUT_LINK */
  0,			/* ERROR_DS_EPOCH_MISMATCH */
  0,			/* ERROR_DS_SRC_NAME_MISMATCH */
  0,			/* ERROR_DS_SRC_AND_DST_NC_IDENTICAL */
  0,			/* ERROR_DS_DST_NC_MISMATCH */
  0,			/* ERROR_DS_NOT_AUTHORITIVE_FOR_DST_NC */
  0,			/* ERROR_DS_SRC_GUID_MISMATCH */
  0,			/* ERROR_DS_CANT_MOVE_DELETED_OBJECT */
  0,			/* ERROR_DS_PDC_OPERATION_IN_PROGRESS */
  0,			/* ERROR_DS_CROSS_DOMAIN_CLEANUP_REQD */
  0,			/* ERROR_DS_ILLEGAL_XDOM_MOVE_OPERATION */
  0,			/* ERROR_DS_CANT_WITH_ACCT_GROUP_MEMBERSHPS */
  0,			/* ERROR_DS_NC_MUST_HAVE_NC_PARENT */
  0,			/* ERROR_DS_CR_IMPOSSIBLE_TO_VALIDATE */
  0,			/* ERROR_DS_DST_DOMAIN_NOT_NATIVE */
  0,			/* ERROR_DS_MISSING_INFRASTRUCTURE_CONTAINER */
  0,			/* ERROR_DS_CANT_MOVE_ACCOUNT_GROUP */
  0,			/* ERROR_DS_CANT_MOVE_RESOURCE_GROUP */
  0,			/* ERROR_DS_INVALID_SEARCH_FLAG */
  0,			/* ERROR_DS_NO_TREE_DELETE_ABOVE_NC */
  0,			/* ERROR_DS_COULDNT_LOCK_TREE_FOR_DELETE */
  0,			/* ERROR_DS_COULDNT_IDENTIFY_OBJECTS_FOR_TREE_DELETE */
  0,			/* ERROR_DS_SAM_INIT_FAILURE */
  0,			/* ERROR_DS_SENSITIVE_GROUP_VIOLATION */
  0,			/* ERROR_DS_CANT_MOD_PRIMARYGROUPID */
  0,			/* ERROR_DS_ILLEGAL_BASE_SCHEMA_MOD */
  0,			/* ERROR_DS_NONSAFE_SCHEMA_CHANGE */
  0,			/* ERROR_DS_SCHEMA_UPDATE_DISALLOWED */
  0,			/* ERROR_DS_CANT_CREATE_UNDER_SCHEMA */
  0,			/* ERROR_DS_INSTALL_NO_SRC_SCH_VERSION */
  0,			/* ERROR_DS_INSTALL_NO_SCH_VERSION_IN_INIFILE */
  0,			/* ERROR_DS_INVALID_GROUP_TYPE */
  0,			/* ERROR_DS_NO_NEST_GLOBALGROUP_IN_MIXEDDOMAIN */
  0,			/* ERROR_DS_NO_NEST_LOCALGROUP_IN_MIXEDDOMAIN */
  0,			/* ERROR_DS_GLOBAL_CANT_HAVE_LOCAL_MEMBER */
  0,			/* ERROR_DS_GLOBAL_CANT_HAVE_UNIVERSAL_MEMBER */
  0,			/* ERROR_DS_UNIVERSAL_CANT_HAVE_LOCAL_MEMBER */
  0,			/* ERROR_DS_GLOBAL_CANT_HAVE_CROSSDOMAIN_MEMBER */
  0,			/* ERROR_DS_LOCAL_CANT_HAVE_CROSSDOMAIN_LOCAL_MEMBER */
  0,			/* ERROR_DS_HAVE_PRIMARY_MEMBERS */
  0,			/* ERROR_DS_STRING_SD_CONVERSION_FAILED */
  0,			/* ERROR_DS_NAMING_MASTER_GC */
  0,			/* ERROR_DS_DNS_LOOKUP_FAILURE */
  0,			/* ERROR_DS_COULDNT_UPDATE_SPNS */
  0,			/* ERROR_DS_CANT_RETRIEVE_SD */
  0,			/* ERROR_DS_KEY_NOT_UNIQUE */
  0,			/* ERROR_DS_WRONG_LINKED_ATT_SYNTAX */
  0,			/* ERROR_DS_SAM_NEED_BOOTKEY_PASSWORD */
  0,			/* ERROR_DS_SAM_NEED_BOOTKEY_FLOPPY */
  0,			/* ERROR_DS_CANT_START */
  0,			/* ERROR_DS_INIT_FAILURE */
  0,			/* ERROR_DS_NO_PKT_PRIVACY_ON_CONNECTION */
  0,			/* ERROR_DS_SOURCE_DOMAIN_IN_FOREST */
  0,			/* ERROR_DS_DESTINATION_DOMAIN_NOT_IN_FOREST */
  0,			/* ERROR_DS_DESTINATION_AUDITING_NOT_ENABLED */
  0,			/* ERROR_DS_CANT_FIND_DC_FOR_SRC_DOMAIN */
  0,			/* ERROR_DS_SRC_OBJ_NOT_GROUP_OR_USER */
  0,			/* ERROR_DS_SRC_SID_EXISTS_IN_FOREST */
  0,			/* ERROR_DS_SRC_AND_DST_OBJECT_CLASS_MISMATCH */
  0,			/* ERROR_SAM_INIT_FAILURE */
  0,			/* ERROR_DS_DRA_SCHEMA_INFO_SHIP */
  0,			/* ERROR_DS_DRA_SCHEMA_CONFLICT */
  0,			/* ERROR_DS_DRA_EARLIER_SCHEMA_CONFLICT */
  0,			/* ERROR_DS_DRA_OBJ_NC_MISMATCH */
  0,			/* ERROR_DS_NC_STILL_HAS_DSAS */
  0,			/* ERROR_DS_GC_REQUIRED */
  0,			/* ERROR_DS_LOCAL_MEMBER_OF_LOCAL_ONLY */
  0,			/* ERROR_DS_NO_FPO_IN_UNIVERSAL_GROUPS */
  0,			/* ERROR_DS_CANT_ADD_TO_GC */
  0,			/* ERROR_DS_NO_CHECKPOINT_WITH_PDC */
  0,			/* ERROR_DS_SOURCE_AUDITING_NOT_ENABLED */
  0,			/* ERROR_DS_CANT_CREATE_IN_NONDOMAIN_NC */
  0,			/* ERROR_DS_INVALID_NAME_FOR_SPN */
  0,			/* ERROR_DS_FILTER_USES_CONTRUCTED_ATTRS */
  0,			/* ERROR_DS_UNICODEPWD_NOT_IN_QUOTES */
  0,			/* ERROR_DS_MACHINE_ACCOUNT_QUOTA_EXCEEDED */
  0,			/* ERROR_DS_MUST_BE_RUN_ON_DST_DC */
  0,			/* ERROR_DS_SRC_DC_MUST_BE_SP4_OR_GREATER */
  0,			/* ERROR_DS_CANT_TREE_DELETE_CRITICAL_OBJ */
  0,			/* ERROR_DS_INIT_FAILURE_CONSOLE */
  0,			/* ERROR_DS_SAM_INIT_FAILURE_CONSOLE */
  0,			/* ERROR_DS_FOREST_VERSION_TOO_HIGH */
  0,			/* ERROR_DS_DOMAIN_VERSION_TOO_HIGH */
  0,			/* ERROR_DS_FOREST_VERSION_TOO_LOW */
  0,			/* ERROR_DS_DOMAIN_VERSION_TOO_LOW */
  0,			/* ERROR_DS_INCOMPATIBLE_VERSION */
  0,			/* ERROR_DS_LOW_DSA_VERSION */
  0,			/* ERROR_DS_NO_BEHAVIOR_VERSION_IN_MIXEDDOMAIN */
  0,			/* ERROR_DS_NOT_SUPPORTED_SORT_ORDER */
  0,			/* ERROR_DS_NAME_NOT_UNIQUE */
  0,			/* ERROR_DS_MACHINE_ACCOUNT_CREATED_PRENT4 */
  0,			/* ERROR_DS_OUT_OF_VERSION_STORE */
  0,			/* ERROR_DS_INCOMPATIBLE_CONTROLS_USED */
  0,			/* ERROR_DS_NO_REF_DOMAIN */
  0,			/* ERROR_DS_RESERVED_LINK_ID */
  0,			/* ERROR_DS_LINK_ID_NOT_AVAILABLE */
  0,			/* ERROR_DS_AG_CANT_HAVE_UNIVERSAL_MEMBER */
  0,			/* ERROR_DS_MODIFYDN_DISALLOWED_BY_INSTANCE_TYPE */
  0,			/* ERROR_DS_NO_OBJECT_MOVE_IN_SCHEMA_NC */
  0,			/* ERROR_DS_MODIFYDN_DISALLOWED_BY_FLAG */
  0,			/* ERROR_DS_MODIFYDN_WRONG_GRANDPARENT */
  0,			/* ERROR_DS_NAME_ERROR_TRUST_REFERRAL */
  0,			/* ERROR_NOT_SUPPORTED_ON_STANDARD_SERVER */
  0,			/* ERROR_DS_CANT_ACCESS_REMOTE_PART_OF_AD */
  0,			/* ERROR_DS_CR_IMPOSSIBLE_TO_VALIDATE_V2 */
  0,			/* ERROR_DS_THREAD_LIMIT_EXCEEDED */
  0,			/* ERROR_DS_NOT_CLOSEST */
  0,			/* ERROR_DS_CANT_DERIVE_SPN_WITHOUT_SERVER_REF */
  0,			/* ERROR_DS_SINGLE_USER_MODE_FAILED */
  0,			/* ERROR_DS_NTDSCRIPT_SYNTAX_ERROR */
  0,			/* ERROR_DS_NTDSCRIPT_PROCESS_ERROR */
  0,			/* ERROR_DS_DIFFERENT_REPL_EPOCHS */
  0,			/* ERROR_DS_DRS_EXTENSIONS_CHANGED */
  0,			/* ERROR_DS_REPLICA_SET_CHANGE_NOT_ALLOWED_ON_DISABLED_CR */
  0,			/* ERROR_DS_NO_MSDS_INTID */
  0,			/* ERROR_DS_DUP_MSDS_INTID */
  0,			/* ERROR_DS_EXISTS_IN_RDNATTID */
  0,			/* ERROR_DS_AUTHORIZATION_FAILED */
  0,			/* ERROR_DS_INVALID_SCRIPT */
  0,			/* ERROR_DS_REMOTE_CROSSREF_OP_FAILED */
  0,			/* ERROR_DS_CROSS_REF_BUSY */
  0,			/* ERROR_DS_CANT_DERIVE_SPN_FOR_DELETED_DOMAIN */
  0,			/* ERROR_DS_CANT_DEMOTE_WITH_WRITEABLE_NC */
  0,			/* ERROR_DS_DUPLICATE_ID_FOUND */
  0,			/* ERROR_DS_INSUFFICIENT_ATTR_TO_CREATE_OBJECT */
  0,			/* ERROR_DS_GROUP_CONVERSION_ERROR */
  0,			/* ERROR_DS_CANT_MOVE_APP_BASIC_GROUP */
  0,			/* ERROR_DS_CANT_MOVE_APP_QUERY_GROUP */
  0,			/* ERROR_DS_ROLE_NOT_VERIFIED */
  0,			/* ERROR_DS_WKO_CONTAINER_CANNOT_BE_SPECIAL */
  0,			/* ERROR_DS_DOMAIN_RENAME_IN_PROGRESS */
  0,			/* ERROR_DS_EXISTING_AD_CHILD_NC */
  0,			/* ERROR_DS_REPL_LIFETIME_EXCEEDED */
  0,			/* ERROR_DS_DISALLOWED_IN_SYSTEM_CONTAINER */
  0,			/* ERROR_DS_LDAP_SEND_QUEUE_FULL */
  0,			/* ERROR_DS_DRA_OUT_SCHEDULE_WINDOW */
  0,			/* 8618 */
  0,			/* 8619 */
  0,			/* 8620 */
  0,			/* 8621 */
  0,			/* 8622 */
  0,			/* 8623 */
  0,			/* 8624 */
  0,			/* 8625 */
  0,			/* 8626 */
  0,			/* 8627 */
  0,			/* 8628 */
  0,			/* 8629 */
  0,			/* 8630 */
  0,			/* 8631 */
  0,			/* 8632 */
  0,			/* 8633 */
  0,			/* 8634 */
  0,			/* 8635 */
  0,			/* 8636 */
  0,			/* 8637 */
  0,			/* 8638 */
  0,			/* 8639 */
  0,			/* 8640 */
  0,			/* 8641 */
  0,			/* 8642 */
  0,			/* 8643 */
  0,			/* 8644 */
  0,			/* 8645 */
  0,			/* 8646 */
  0,			/* 8647 */
  0,			/* 8648 */
  0,			/* 8649 */
  0,			/* 8650 */
  0,			/* 8651 */
  0,			/* 8652 */
  0,			/* 8653 */
  0,			/* 8654 */
  0,			/* 8655 */
  0,			/* 8656 */
  0,			/* 8657 */
  0,			/* 8658 */
  0,			/* 8659 */
  0,			/* 8660 */
  0,			/* 8661 */
  0,			/* 8662 */
  0,			/* 8663 */
  0,			/* 8664 */
  0,			/* 8665 */
  0,			/* 8666 */
  0,			/* 8667 */
  0,			/* 8668 */
  0,			/* 8669 */
  0,			/* 8670 */
  0,			/* 8671 */
  0,			/* 8672 */
  0,			/* 8673 */
  0,			/* 8674 */
  0,			/* 8675 */
  0,			/* 8676 */
  0,			/* 8677 */
  0,			/* 8678 */
  0,			/* 8679 */
  0,			/* 8680 */
  0,			/* 8681 */
  0,			/* 8682 */
  0,			/* 8683 */
  0,			/* 8684 */
  0,			/* 8685 */
  0,			/* 8686 */
  0,			/* 8687 */
  0,			/* 8688 */
  0,			/* 8689 */
  0,			/* 8690 */
  0,			/* 8691 */
  0,			/* 8692 */
  0,			/* 8693 */
  0,			/* 8694 */
  0,			/* 8695 */
  0,			/* 8696 */
  0,			/* 8697 */
  0,			/* 8698 */
  0,			/* 8699 */
  0,			/* 8700 */
  0,			/* 8701 */
  0,			/* 8702 */
  0,			/* 8703 */
  0,			/* 8704 */
  0,			/* 8705 */
  0,			/* 8706 */
  0,			/* 8707 */
  0,			/* 8708 */
  0,			/* 8709 */
  0,			/* 8710 */
  0,			/* 8711 */
  0,			/* 8712 */
  0,			/* 8713 */
  0,			/* 8714 */
  0,			/* 8715 */
  0,			/* 8716 */
  0,			/* 8717 */
  0,			/* 8718 */
  0,			/* 8719 */
  0,			/* 8720 */
  0,			/* 8721 */
  0,			/* 8722 */
  0,			/* 8723 */
  0,			/* 8724 */
  0,			/* 8725 */
  0,			/* 8726 */
  0,			/* 8727 */
  0,			/* 8728 */
  0,			/* 8729 */
  0,			/* 8730 */
  0,			/* 8731 */
  0,			/* 8732 */
  0,			/* 8733 */
  0,			/* 8734 */
  0,			/* 8735 */
  0,			/* 8736 */
  0,			/* 8737 */
  0,			/* 8738 */
  0,			/* 8739 */
  0,			/* 8740 */
  0,			/* 8741 */
  0,			/* 8742 */
  0,			/* 8743 */
  0,			/* 8744 */
  0,			/* 8745 */
  0,			/* 8746 */
  0,			/* 8747 */
  0,			/* 8748 */
  0,			/* 8749 */
  0,			/* 8750 */
  0,			/* 8751 */
  0,			/* 8752 */
  0,			/* 8753 */
  0,			/* 8754 */
  0,			/* 8755 */
  0,			/* 8756 */
  0,			/* 8757 */
  0,			/* 8758 */
  0,			/* 8759 */
  0,			/* 8760 */
  0,			/* 8761 */
  0,			/* 8762 */
  0,			/* 8763 */
  0,			/* 8764 */
  0,			/* 8765 */
  0,			/* 8766 */
  0,			/* 8767 */
  0,			/* 8768 */
  0,			/* 8769 */
  0,			/* 8770 */
  0,			/* 8771 */
  0,			/* 8772 */
  0,			/* 8773 */
  0,			/* 8774 */
  0,			/* 8775 */
  0,			/* 8776 */
  0,			/* 8777 */
  0,			/* 8778 */
  0,			/* 8779 */
  0,			/* 8780 */
  0,			/* 8781 */
  0,			/* 8782 */
  0,			/* 8783 */
  0,			/* 8784 */
  0,			/* 8785 */
  0,			/* 8786 */
  0,			/* 8787 */
  0,			/* 8788 */
  0,			/* 8789 */
  0,			/* 8790 */
  0,			/* 8791 */
  0,			/* 8792 */
  0,			/* 8793 */
  0,			/* 8794 */
  0,			/* 8795 */
  0,			/* 8796 */
  0,			/* 8797 */
  0,			/* 8798 */
  0,			/* 8799 */
  0,			/* 8800 */
  0,			/* 8801 */
  0,			/* 8802 */
  0,			/* 8803 */
  0,			/* 8804 */
  0,			/* 8805 */
  0,			/* 8806 */
  0,			/* 8807 */
  0,			/* 8808 */
  0,			/* 8809 */
  0,			/* 8810 */
  0,			/* 8811 */
  0,			/* 8812 */
  0,			/* 8813 */
  0,			/* 8814 */
  0,			/* 8815 */
  0,			/* 8816 */
  0,			/* 8817 */
  0,			/* 8818 */
  0,			/* 8819 */
  0,			/* 8820 */
  0,			/* 8821 */
  0,			/* 8822 */
  0,			/* 8823 */
  0,			/* 8824 */
  0,			/* 8825 */
  0,			/* 8826 */
  0,			/* 8827 */
  0,			/* 8828 */
  0,			/* 8829 */
  0,			/* 8830 */
  0,			/* 8831 */
  0,			/* 8832 */
  0,			/* 8833 */
  0,			/* 8834 */
  0,			/* 8835 */
  0,			/* 8836 */
  0,			/* 8837 */
  0,			/* 8838 */
  0,			/* 8839 */
  0,			/* 8840 */
  0,			/* 8841 */
  0,			/* 8842 */
  0,			/* 8843 */
  0,			/* 8844 */
  0,			/* 8845 */
  0,			/* 8846 */
  0,			/* 8847 */
  0,			/* 8848 */
  0,			/* 8849 */
  0,			/* 8850 */
  0,			/* 8851 */
  0,			/* 8852 */
  0,			/* 8853 */
  0,			/* 8854 */
  0,			/* 8855 */
  0,			/* 8856 */
  0,			/* 8857 */
  0,			/* 8858 */
  0,			/* 8859 */
  0,			/* 8860 */
  0,			/* 8861 */
  0,			/* 8862 */
  0,			/* 8863 */
  0,			/* 8864 */
  0,			/* 8865 */
  0,			/* 8866 */
  0,			/* 8867 */
  0,			/* 8868 */
  0,			/* 8869 */
  0,			/* 8870 */
  0,			/* 8871 */
  0,			/* 8872 */
  0,			/* 8873 */
  0,			/* 8874 */
  0,			/* 8875 */
  0,			/* 8876 */
  0,			/* 8877 */
  0,			/* 8878 */
  0,			/* 8879 */
  0,			/* 8880 */
  0,			/* 8881 */
  0,			/* 8882 */
  0,			/* 8883 */
  0,			/* 8884 */
  0,			/* 8885 */
  0,			/* 8886 */
  0,			/* 8887 */
  0,			/* 8888 */
  0,			/* 8889 */
  0,			/* 8890 */
  0,			/* 8891 */
  0,			/* 8892 */
  0,			/* 8893 */
  0,			/* 8894 */
  0,			/* 8895 */
  0,			/* 8896 */
  0,			/* 8897 */
  0,			/* 8898 */
  0,			/* 8899 */
  0,			/* 8900 */
  0,			/* 8901 */
  0,			/* 8902 */
  0,			/* 8903 */
  0,			/* 8904 */
  0,			/* 8905 */
  0,			/* 8906 */
  0,			/* 8907 */
  0,			/* 8908 */
  0,			/* 8909 */
  0,			/* 8910 */
  0,			/* 8911 */
  0,			/* 8912 */
  0,			/* 8913 */
  0,			/* 8914 */
  0,			/* 8915 */
  0,			/* 8916 */
  0,			/* 8917 */
  0,			/* 8918 */
  0,			/* 8919 */
  0,			/* 8920 */
  0,			/* 8921 */
  0,			/* 8922 */
  0,			/* 8923 */
  0,			/* 8924 */
  0,			/* 8925 */
  0,			/* 8926 */
  0,			/* 8927 */
  0,			/* 8928 */
  0,			/* 8929 */
  0,			/* 8930 */
  0,			/* 8931 */
  0,			/* 8932 */
  0,			/* 8933 */
  0,			/* 8934 */
  0,			/* 8935 */
  0,			/* 8936 */
  0,			/* 8937 */
  0,			/* 8938 */
  0,			/* 8939 */
  0,			/* 8940 */
  0,			/* 8941 */
  0,			/* 8942 */
  0,			/* 8943 */
  0,			/* 8944 */
  0,			/* 8945 */
  0,			/* 8946 */
  0,			/* 8947 */
  0,			/* 8948 */
  0,			/* 8949 */
  0,			/* 8950 */
  0,			/* 8951 */
  0,			/* 8952 */
  0,			/* 8953 */
  0,			/* 8954 */
  0,			/* 8955 */
  0,			/* 8956 */
  0,			/* 8957 */
  0,			/* 8958 */
  0,			/* 8959 */
  0,			/* 8960 */
  0,			/* 8961 */
  0,			/* 8962 */
  0,			/* 8963 */
  0,			/* 8964 */
  0,			/* 8965 */
  0,			/* 8966 */
  0,			/* 8967 */
  0,			/* 8968 */
  0,			/* 8969 */
  0,			/* 8970 */
  0,			/* 8971 */
  0,			/* 8972 */
  0,			/* 8973 */
  0,			/* 8974 */
  0,			/* 8975 */
  0,			/* 8976 */
  0,			/* 8977 */
  0,			/* 8978 */
  0,			/* 8979 */
  0,			/* 8980 */
  0,			/* 8981 */
  0,			/* 8982 */
  0,			/* 8983 */
  0,			/* 8984 */
  0,			/* 8985 */
  0,			/* 8986 */
  0,			/* 8987 */
  0,			/* 8988 */
  0,			/* 8989 */
  0,			/* 8990 */
  0,			/* 8991 */
  0,			/* 8992 */
  0,			/* 8993 */
  0,			/* 8994 */
  0,			/* 8995 */
  0,			/* 8996 */
  0,			/* 8997 */
  0,			/* 8998 */
  0,			/* 8999 */
};

#define __winerr_map_size		(sizeof(__winerr_map) / sizeof(int))

#endif /* _MAGISKBOOT_BUILD_WINSUP_INTERNAL_WINERR_MAP */

```

`src/libc-compat/winsup/io.c`:

```c
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>  // for _fmode
#include <sys/types.h>
#include <unistd.h>

#include "../include/winsup/io_compat.h"

ssize_t _read_stub(int fd, void *buf, size_t count) {
    return read(fd, buf, count);
}

ssize_t _write_stub(int fd, const void *buf, size_t count) {
    return write(fd, buf, count);
}

// From libnt:
//      https://github.com/svoboda18/libnt/blob/f3027ff6261a1bfdbcec32de09ac6987aca80f22/libnt.c#L308-L324
__attribute__((constructor)) static void __init_io_mode(void) {
    _fmode = O_BINARY;
    _setmode(_fileno(stdin), O_BINARY);
    _setmode(_fileno(stdout), O_BINARY);
    _setmode(_fileno(stderr), O_BINARY);
}

```

`src/libc-compat/winsup/link.c`:

```c
#include <assert.h>
#include <errno.h>
#include <fcntl.h>
#include <stdlib.h>
#include <sys/param.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

#ifndef NDEBUG
#  include <stdio.h>
#endif

#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <ntdef.h>
#include <winioctl.h>

#include "internal/assert.h"
#include "internal/errno.h"
#include "internal/fd.h"

#include "../include/winsup/link_compat.h"

#define LOG_TAG             "link_compat"

#ifndef MIN
#  define MIN(a, b)   (((a) < (b)) ? (a) : (b))
#endif

ssize_t readlink (const char *__restrict path,
                          char *__restrict buf, size_t len) {
    if (!(len > 0)) {
        errno = EINVAL;
        return -1;
    }

    int fd;

    if ((fd = __open_symlink_fd(path, GENERIC_READ, FILE_SHARE_VALID_FLAGS, 0)) < 0) {
        __set_errno_via_winerr(GetLastError());

        return -1;
    }

    HANDLE h;

    if ((h = (HANDLE) _get_osfhandle(fd)) == INVALID_HANDLE_VALUE) {
        // errno is already set to EBADF by _get_osfhandle

        close(fd);  // ownership not transferred

        return -1;
    }

    ssize_t ret = -1;

    REPARSE_DATA_BUFFER *buff = malloc(MAXIMUM_REPARSE_DATA_BUFFER_SIZE);

    if (!buff)
        goto error;

    DWORD bytes;

    if (!DeviceIoControl(h, FSCTL_GET_REPARSE_POINT, NULL, 0, buff, MAXIMUM_REPARSE_DATA_BUFFER_SIZE, &bytes, NULL)) {
        __set_errno_via_winerr(GetLastError());

#ifndef NDEBUG
        perror("DeviceIoControl");
#endif

        goto error;
    }

    if (buff->ReparseTag != IO_REPARSE_TAG_SYMLINK) {
        // not a symlink
        errno = EINVAL;
        goto error;
    }

    WCHAR *ws_ptr;
    size_t ws_len;

    // From windows-libc:
    //     https://github.com/SibiSiddharthan/windows-libc/blob/dcb7a2a5889d5bd54e6241dbf6d469114e8a3302/src/unistd/readlink.c#L76-L98
    if (buff->SymbolicLinkReparseBuffer.PrintNameLength != 0) {
        ws_ptr = (WCHAR *) ((CHAR *) (buff->SymbolicLinkReparseBuffer.PathBuffer) + buff->SymbolicLinkReparseBuffer.PrintNameOffset);
        ws_len = buff->SymbolicLinkReparseBuffer.PrintNameLength;
    } else if (buff->SymbolicLinkReparseBuffer.SubstituteNameLength != 0) {
        ws_ptr = (WCHAR *) ((CHAR *) (buff->SymbolicLinkReparseBuffer.PathBuffer) + buff->SymbolicLinkReparseBuffer.SubstituteNameOffset);
        ws_len = buff->SymbolicLinkReparseBuffer.SubstituteNameLength;
    } else {
        // this should not happen
        assert(0);
        return -1;  // never reached
    }

    int chars;
    chars = WideCharToMultiByte(CP_ACP, WC_NO_BEST_FIT_CHARS,
                                ws_ptr, ws_len + 1, buf, len, NULL, NULL);
    if (!chars) {
        LOG_ERR("WideCharToMultiByte failed: %s", win_strerror(GetLastError()));

        abort();
    }

    ret = chars - 1;  // not including the terminating NULL

error:
    if (h != INVALID_HANDLE_VALUE)
        CloseHandle(h);  // no need to close fd since handle already owns it

    if (buff)
        free(buff);

    return ret;
}

int link(const char *path1, const char *path2) {
    struct stat buf;

    if (stat(path1, &buf) < 0)
        return -1;

    if (S_ISDIR(buf.st_mode)) {
        errno = EPERM;  // not supported

        return -1;
    }

    if (!CreateHardLink(path2, path1, NULL)) {
        __set_errno_via_winerr(GetLastError());

        return -1;
    }

    return 0;
}

int     symlink (const char *name1, const char *name2) {
    /*
     * this is not perfect
     *
     * this doesn't map well to Windows API,
     * because it depend on the link type.
     *
     * a wrong type can make the symlink unusable
     * this also applies when the target doesn't exist
     *  or changes its type after calling symlink
     *
     * for now we just ignore these
     */

    struct stat buf;
    // prefer non-privileged access when possible
    DWORD flags = SYMBOLIC_LINK_FLAG_ALLOW_UNPRIVILEGED_CREATE;

    if (stat(name1, &buf) < 0)
        goto not_directory;

    if (S_ISDIR(buf.st_mode))
        flags |= SYMBOLIC_LINK_FLAG_DIRECTORY;

not_directory:
    if (!CreateSymbolicLink(name2, name1, flags)) {
        __set_errno_via_winerr(GetLastError());

        return -1;
    }

    return 0;
}

```

`src/libc-compat/winsup/mkdir.c`:

```c
#include <assert.h>
#include <errno.h>
#include <stdbool.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

#include "../include/winsup/mkdir_compat.h"

int _mkdir_stub (const char *path, mode_t mode) {
    if (mkdir(path) < 0)
        return -1;

    if (chmod(path, mode) < 0) {
        int old_errno = errno;
        assert(!rmdir(path));  // mkdir() just succeed, how come
        errno = old_errno;
        return -1;
    }

    return 0;
}

```

`src/libc-compat/winsup/mknod_stub.c`:

```c
#include <errno.h>
#include <unistd.h>
#include <sys/types.h>

#include "../include/winsup/mknod_compat.h"

int mknod (const char *path, mode_t mode, dev_t dev ) {
    if (access(path, R_OK) == 0) {
        errno = EEXIST;

        return -1;
    }

    // no easy way to implement mknod properly on Win32
    // since we don't have device files in normal filesystem
    errno = ENOTSUP;  // maybe set a listed errno in man page?
    return -1;
}

```

`src/libc-compat/winsup/open.c`:

```c
#include <errno.h>
#include <fcntl.h>
#include <limits.h>
#include <stdarg.h>
#include <stdbool.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/types.h>

#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include "internal/assert.h"
#include "internal/errno.h"
#include "internal/fd.h"

#define LOG_TAG             "open_compat"

int __cdecl __real_open(const char *path, int oflag, ... );

static int open_impl(const char *path, int oflag, va_list ap) {
    oflag |= O_BINARY;

    struct stat buf;

    if (oflag & O_CREAT) {
        // creating file, cannot be a directory

        int ret = __real_open(path, oflag, (mode_t) va_arg(ap, int));

        return ret;
    }

    // otherwise the 3rd argument `mode' is unused

    if (stat(path, &buf) < 0)
        // doesn't exist, cannot be a directory
        goto use_mingw;

    if (S_ISDIR(buf.st_mode)) {
        DWORD access = 0, share_mode = 0;

        switch (oflag & O_ACCMODE) {
            case O_RDONLY:  // this is the default
                access = GENERIC_READ;
                share_mode = FILE_SHARE_VALID_FLAGS;
                break;
            case O_WRONLY:
            case O_RDWR:
                // writing to directory fd is nonsense
                errno = EISDIR;
                return -1;
            default:
#ifndef NDEBUG
                LOG_ERR("invalid access mode");
#endif
                errno = EINVAL;
                return -1;
        }

        // ignoring other oflags according to POSIX

        int fd = __open_dir_fd(path, access, share_mode, oflag);

        if (fd < 0) {
            __set_errno_via_winerr(GetLastError());

            return -1;
        }

        return fd;
    }

use_mingw:
    return __real_open(path, oflag);  // not a directory, mingw impl is good
}

int __cdecl __wrap_open(const char *path, int oflag, ... ) {
    va_list ap;
    va_start(ap, oflag);

    int fd = open_impl(path, oflag, ap);

    va_end(ap);

    if (!(fd < 0))
        __fd_cache_oflag(fd, oflag);

    return fd;
}

// for Rust

int __cdecl __wrap__open(const char *path, int oflag, ... ) {
    va_list ap;
    int res;

    va_start(ap, oflag);
    if (oflag & O_CREAT)
        res = open(path, oflag, (mode_t) va_arg(ap, int));
    else
        res = open(path, oflag);
    va_end(ap);

    return res;
}

HANDLE WINAPI __real_CreateFileW(const wchar_t *lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode,
                                 SECURITY_ATTRIBUTES *lpSecurityAttributes, DWORD dwCreationDisposition,
                                 DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);

HANDLE WINAPI __wrap_CreateFileW(const wchar_t *lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode,
                                 SECURITY_ATTRIBUTES *lpSecurityAttributes, DWORD dwCreationDisposition,
                                 DWORD dwFlagsAndAttributes, HANDLE hTemplateFile) {
    if (!lpFileName || !lpFileName[0])
        goto skip;  // bad arguments

    switch (dwCreationDisposition) {
        case CREATE_ALWAYS:
        case CREATE_NEW:
        case OPEN_ALWAYS:
            // these flags might ask to create a new file
            break;
        case OPEN_EXISTING:
        case TRUNCATE_EXISTING:
            // these flags will always open an existing file
            goto skip;
        default:
            LOG_ERR("FIXME: unhandled dwCreationDisposition %ld", dwCreationDisposition);
            break;
    }

    char path[PATH_MAX + 1];

    if (!WideCharToMultiByte(CP_ACP, WC_NO_BEST_FIT_CHARS,
                             lpFileName, -1, path, sizeof(path), NULL, NULL)) {
        LOG_ERR("WideCharToMultiByte failed: %s", win_strerror(GetLastError()));

        abort();
    }

skip:
    return __real_CreateFileW(lpFileName, dwDesiredAccess, dwShareMode, lpSecurityAttributes,
                              dwCreationDisposition, dwFlagsAndAttributes, hTemplateFile);
}

```

`src/libc-compat/winsup/stat.c`:

```c
#include <ctype.h>
#include <errno.h>
#include <fcntl.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>

#ifndef NDEBUG
#  include <stdio.h>
#endif

#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <winternl.h>

#include "../include/winsup/link_compat.h"
#include "../include/winsup/stat_compat.h"

#include "internal/errno.h"
#include "internal/fd.h"

#define EXE_SUFFIX          (('e' << 2) | ('x' << 1) | 'e')
#define BAT_SUFFIX          (('b' << 2) | ('a' << 1) | 't')
#define CMD_SUFFIX          (('c' << 2) | ('m' << 1) | 'd')
#define COM_SUFFIX          (('c' << 2) | ('o' << 1) | 'm')

_Static_assert(sizeof(struct stat) == sizeof(struct _stat64), "struct stat is not 64-bit");

int __cdecl __wrap_fstat(int fd, struct _stat64 *buf) {
    return _fstat64(fd, buf);
}

int __cdecl __wrap__fstat64(int fd, struct _stat64 *buf) {
    // ref: https://github.com/reactos/reactos/blob/455f33077599729c27f1f1347ad2f6329d50d1f3/sdk/lib/crt/stdio/stat64.c
    HANDLE h = (HANDLE) _get_osfhandle(fd);

    if (h == INVALID_HANDLE_VALUE)
        return -1;  // errno is already set to EBADF by _get_osfhandle

    BY_HANDLE_FILE_INFORMATION hfi;

    memset(&hfi, 0, sizeof(hfi));

    if (!GetFileInformationByHandle(h, &hfi)) {
        __set_errno_via_winerr(GetLastError());

#ifndef NDEBUG
        perror("GetFileInformationByHandle");
#endif

        return -1;
    }

    memset(buf, 0, sizeof(struct stat));

    char *path = __fd_get_path(fd);

    int ret = -1;

    DWORD type = GetFileType(h);

    if (type == FILE_TYPE_UNKNOWN) {
        DWORD winerr = GetLastError();

        if (winerr == NO_ERROR) {
            // IDK if this is the correct way to error handle
            errno = ENOENT;
            goto error;
        } else {
            // GetFileType failed
            __set_errno_via_winerr(winerr);

#ifndef NDEBUG
            perror("GetFileType");
#endif

            goto error;
        }
    } else if (type == FILE_TYPE_CHAR) {
        buf->st_mode |= S_IFCHR;
        buf->st_dev = buf->st_rdev = fd;
        buf->st_nlink = 1;
    } else if (type == FILE_TYPE_PIPE) {
        buf->st_mode |= S_IFIFO;
        buf->st_dev = buf->st_rdev = fd;
        buf->st_nlink = 1;
    } else {  // type == FILE_TYPE_DISK
        buf->st_mode |= (S_IRUSR | S_IRGRP | S_IROTH);

        if (hfi.dwFileAttributes & FILE_ATTRIBUTE_REPARSE_POINT)
            buf->st_mode |= S_IFLNK;
        else if (hfi.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
            buf->st_mode |= (S_IFDIR | S_IXUSR | S_IXGRP | S_IXOTH);
        else {
            buf->st_mode |= S_IFREG;

            if (path) {
                ssize_t path_len = strlen(path);

                if (path_len >= 4 && path[path_len - 4] == '.') {
                    int ext = (tolower(path[path_len - 3]) << 2) | (tolower(path[path_len - 2]) << 1) | tolower(path[path_len - 1]);

                    if (ext == EXE_SUFFIX || ext == BAT_SUFFIX || ext == CMD_SUFFIX || ext == COM_SUFFIX)
                        buf->st_mode |= (S_IXUSR | S_IXGRP | S_IXOTH);
                }
            }
        }

        buf->st_nlink = hfi.nNumberOfLinks;
    }

    if (!(hfi.dwFileAttributes & FILE_ATTRIBUTE_READONLY))
        buf->st_mode |= (S_IWUSR | S_IWGRP | S_IWOTH);

    if (hfi.dwFileAttributes & FILE_ATTRIBUTE_REPARSE_POINT) {
        if (path) {
            char path_buf[PATH_MAX];
            ssize_t len = readlink(path, path_buf, PATH_MAX);

            if (len > 0)
                buf->st_size = len;
        }
    } else
        buf->st_size = ((__int64) hfi.nFileSizeHigh << 32) + hfi.nFileSizeLow;

    DWORD dw = 0;

    RtlTimeToSecondsSince1970((LARGE_INTEGER *) &hfi.ftLastAccessTime, &dw);
    buf->st_atime = dw;

    dw = 0;

    RtlTimeToSecondsSince1970((LARGE_INTEGER *) &hfi.ftLastWriteTime, &dw);
    buf->st_mtime = buf->st_ctime = dw;

    // should not close fd or handle after stat

    ret = 0;

error:
    if (path)
        free(path);

    return ret;
}

int lstat (const char *__restrict path, struct stat *__restrict buf) {
    int fd = __open_symlink_fd(path, GENERIC_READ, FILE_SHARE_VALID_FLAGS, 0);

    if (fd < 0) {
        __set_errno_via_winerr(GetLastError());

        return -1;
    }

    int ret = fstat(fd, buf);

    close(fd);

    return ret;
}

```

`src/libc-compat/winsup/str.c`:

```c
#include <string.h>

#include "../include/winsup/str_compat.h"

// by deltamind106 from:
//    https://stackoverflow.com/questions/52988769/writing-own-memmem-for-windows
void *memmem(const void *haystack, int haystacklen, const void *needle, int needlelen) {
    unsigned char *csrc = (unsigned char *)haystack;
    unsigned char *ctrg = (unsigned char *)needle;
    unsigned char *tptr, *cptr;
    int searchlen;
    int ndx = 0;

    if (!haystack || !haystacklen || !needle || !needlelen)
        return NULL;

    while (ndx <= haystacklen) {
        cptr = &csrc[ndx];
        if ((searchlen = haystacklen - ndx - needlelen + 1) <= 0) {
            return NULL;
        }
        if ((tptr = memchr(cptr, *ctrg, searchlen)) == NULL) {
            return NULL;
        }
        if (memcmp(tptr, ctrg, needlelen) == 0) {
            return tptr;
        }
        ndx += tptr - cptr + 1;
    }

    return NULL;
}

```

`src/libc-compat/winsup/uio.c`:

```c
/*
 * from QEMU:
 *      https://github.com/qemu/qemu/blob/802341823f1720511dd5cf53ae40285f7978c61b/util/osdep.c#L560
 *
 * Copyright (c) 2003 Fabrice Bellard
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

#include <errno.h>
#include <unistd.h>

#include "../include/winsup/uio_compat.h"

static inline ssize_t __uio_impl(int fd, const struct iovec *iov, int iov_cnt, bool do_write) {
    unsigned i = 0;
    ssize_t ret = 0;
    ssize_t off = 0;
    while (i < iov_cnt) {
        ssize_t r = do_write
            ? write(fd, iov[i].iov_base + off, iov[i].iov_len - off)
            : read(fd, iov[i].iov_base + off, iov[i].iov_len - off);
        if (r > 0) {
            ret += r;
            off += r;
            if (off < iov[i].iov_len) {
                continue;
            }
        } else if (!r) {
            break;
        } else if (errno == EINTR) {
            continue;
        } else {
            /* else it is some "other" error,
             * only return if there was no data processed. */
            if (ret == 0) {
                ret = -1;
            }
            break;
        }
        off = 0;
        i++;
    }
    return ret;
}

ssize_t readv(int fd, const struct iovec *iov, int iov_cnt) {
    return __uio_impl(fd, iov, iov_cnt, false);
}

ssize_t writev(int fd, const struct iovec *iov, int iov_cnt) {
    return __uio_impl(fd, iov, iov_cnt, true);
}

```

`src/magiskbase-rs-wrapper.cc`:

```cc
// dynamtically generated during build
#include "Magisk/native/src/base/base-rs.cpp"

```

`src/magiskboot-rs-wrapper.cc`:

```cc
// dynamtically generated during build
#include "Magisk/native/src/boot/boot-rs.cpp"

```

`src/winsup-rs/Cargo.toml`:

```toml
[package]
name = "winsup"
version = "0.0.0"
edition = "2021"

[lib]
path = "lib.rs"

[dependencies]
libc = { path = "../libc-compat/rs" }

```

`src/winsup-rs/fd.rs`:

```rs
pub use std::os::windows::io::{OwnedHandle as OwnedFd, BorrowedHandle as BorrowedFd};
pub use libc::c_int as RawFd;

use std::fs::File;
use std::os::windows::io::{RawHandle, FromRawHandle, AsHandle, AsRawHandle, IntoRawHandle};
use libc::{get_osfhandle, c_void, open_osfhandle, c_int, O_BINARY};

pub trait FromRawFd {
    unsafe fn from_raw_fd(fd: RawFd) -> Self;
}

pub trait AsFd {
    fn as_fd(&self) -> BorrowedFd<'_>;
}

pub trait AsRawFd {
    fn as_raw_fd(&self) -> RawFd;
}

pub trait IntoRawFd {
    fn into_raw_fd(self) -> RawFd;
}

impl FromRawFd for File {
    #[inline]
    unsafe fn from_raw_fd(fd: RawFd) -> File {
        Self::from_raw_handle(get_osfhandle(fd) as *mut c_void)
    }
}

impl FromRawFd for OwnedFd {
    #[inline]
    unsafe fn from_raw_fd(fd: RawFd) -> Self {
        Self::from_raw_handle(get_osfhandle(fd) as *mut c_void)
    }
}

impl<T: AsFd + AsHandle> AsFd for &T {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

impl<T: AsFd + AsHandle> AsFd for &mut T {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

impl<T: AsFd + AsHandle> AsFd for Box<T> {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

impl AsFd for BorrowedFd<'_> {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

impl AsFd for OwnedFd {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

impl AsFd for File {
    #[inline]
    fn as_fd(&self) -> BorrowedFd<'_> {
        self.as_handle()
    }
}

extern "C" {
    #[link_name = "__get_osfhandle_oflag"]
    fn get_oflag(h: RawHandle) -> c_int;
}

impl AsRawFd for File {
    #[inline]
    fn as_raw_fd(&self) -> RawFd {
        let h = self.as_raw_handle();
        unsafe { open_osfhandle(h as isize, get_oflag(h) | O_BINARY) }
    }
}

impl AsRawFd for BorrowedFd<'_> {
    #[inline]
    fn as_raw_fd(&self) -> RawFd {
        let h = self.as_raw_handle();
        unsafe { open_osfhandle(h as isize, get_oflag(h) | O_BINARY) }
    }
}

impl AsRawFd for OwnedFd {
    #[inline]
    fn as_raw_fd(&self) -> RawFd {
        let h = self.as_raw_handle();
        unsafe { open_osfhandle(h as isize, get_oflag(h) | O_BINARY) }
    }
}

impl IntoRawFd for File {
    #[inline]
    fn into_raw_fd(self) -> RawFd {
        let h = self.into_raw_handle();
        unsafe { open_osfhandle(h as isize, get_oflag(h) | O_BINARY) }
    }
}

impl IntoRawFd for OwnedFd {
    #[inline]
    fn into_raw_fd(self) -> RawFd {
        let h = self.into_raw_handle();
        unsafe { open_osfhandle(h as isize, get_oflag(h) | O_BINARY) }
    }
}

```

`src/winsup-rs/lib.rs`:

```rs
pub mod fd;

```