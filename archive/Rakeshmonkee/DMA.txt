Project Path: arc_Rakeshmonkee_DMA_ubw8l0bg

Source Tree:

```txt
arc_Rakeshmonkee_DMA_ubw8l0bg
â”œâ”€â”€ 1:1 CFG of real device
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ Anti-Cheese FW Creation
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ Anti-Cheese FW Customisations
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ Automatic Firmware Creation
â”‚   â”œâ”€â”€ project.py
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ DMA FAQ.md
â”œâ”€â”€ DMA Troubleshooting
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ How to Flash
â”‚   â”œâ”€â”€ CH341PAR.rar
â”‚   â”œâ”€â”€ GhostDMA-openocd.rar
â”‚   â”œâ”€â”€ MVPDMA.rar
â”‚   â”œâ”€â”€ flash_screamer.rar
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ Speed Test
â”‚   â”œâ”€â”€ lone dma test.rar
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ VGK FW Creation
â”‚   â””â”€â”€ readme.md
â”œâ”€â”€ Vivado Customisations
â”‚   â”œâ”€â”€ Vivado.py
â”‚   â”œâ”€â”€ generate-project.py
â”‚   â”œâ”€â”€ readme.md
â”‚   â””â”€â”€ script.tcl
â””â”€â”€ readme.md

```

`1:1 CFG of real device/readme.md`:

```md
# 1:1 CFG space of real PCIe device

### Requirements
1. Telescan

For this guide, I will be using telescan to get the device config

Run, [.tlscan to .coe](https://github.com/Rakeshmonkee/DMA/tree/main/.tlscan%20to%20.coe) python file and generate the output.coe file

This part below needs to be edited before generating the ipcore within vivado

1. With the generated file, replace the contents of `pcileech_cfgspace.coe` with the content of `output.coe`
   
2. in `pcileech_fifo.sv` change the value of `CFGTLP ZERO DATA` to `0`

3. in `pcileech_pcie_cfg_a7.sv` change `DSN`, `Master Abort Flag`, `Bus Master Flag`

After Changing these, you can now generate the IP core

The next steps are done within Vivado

1. Match everything seen in the header that you see in telescan

2. Change 

```
EXT_CFG_CAP_PTR 
EXT_CFG_XP_CAP_PTR
```

in the core_top.sv file to the blocks, you want your capability to start

3. generate bitstream and flash

```

`Anti-Cheese FW Creation/readme.md`:

```md
# Creation of Anti-cheese Firmware

> [!NOTE]
> It is assumed the person following this guide knows how to use vivado and get values from their donor board. This is not a guide on how to use vivado and how to get values from a donor board

The steps below will be done to bypass some Anti-Cheeses at a basic level and will be in the [FW Customisations list for some Anti-Cheeses](https://github.com/Rakeshmonkee/DMA/blob/main/EAC-BE%20FW%20Creation/EAC-BE%20FW%20Customisations). You might have also seen this list in the [Possible Vivado Customisations](https://github.com/Silverr12/DMA-CFW-Guide/blob/main/Possible%20Vivado%20Customisations.md) list I made in the [DMA-CFW-Guide](https://github.com/Silverr12/DMA-CFW-Guide/tree/main) which I contributed to. 

To bypass some Anti-Cheeses at a moderate level you should change a few more values around within the config space and implement Bar Emulation to successfully load the driver of the device you are trying to mimic which can be found [here](https://github.com/Rakeshmonkee/DMA/tree/main/Bar%20Emulation). otherwise, you will most likely see a yellow icon next to the device in Device Manager.

For a high-level bypass, use TLP Emulation

You can be assured after you follow the basic steps, you will last a while on any some Anti-Cheeses game considering you don't rage cheat and be blatant about cheating. I personally have done the basic step as a test and have lasted over 1 month, no Anti-Cheeses ban but I did receive 1 temp ban for 7 days during the process which was most likely done manually by the server admin because I got too many reports. I got this temp ban because I was too blatant. The game will not be mentioned, but it does use an very well known Anti-Cheese. All I can suggest is, don't be blatant about cheating

By changing these values to match your donor board, you can bypass some Anti-Cheeses at a basic level. You don't need to go into the Core Top file and change PTRS/NEXT PTRS around. You could maybe even bypass Ricochet AC and maybe even Electronic Arts Anti Cheat. I am not sure about those 2 and have not tested them.

Steps:
1. Change DSN value[215], master abort flag[209], and bus master[210] in `/PCIeSquirrel/src/pcileech_pcie_cfg_a7.sv` [xx] being the line
2. Generate the pcileech IP core
3. Under the basic tab in the `Re-Customise IP` UI, set the Mode to `Advanced`

Everything I mention here is what to change to match your donor board

Basic Tab:
- Number of Lanes
- Maximum Link Speed

IDs Tab:
- Vendor ID
- Device ID
- Revision ID
- Subsystem Vendor ID
- Subsystem ID

- Base Class Menu/Value
- Sub Class Interface Menu/Value
- Interface Value
- Cardbus CIS Pointer

Bars Tab:

Will need to look at your donor board to see how many bars to enable
- Size Unit
- Size Value
- 64 bit
- Prefetchable

Core Capabilities Tab:

Try to match the Device Capabilities Register Hex to match the hex on your donor board
- Max Payload Size
- Extended Tag Field
- Extended Tag Default
- Phantom Functions
- Acceptable L0s Latency
- Acceptable L1 Latency

Link Registers Tab:
- ASPM Optionality
- DLL Link Active Reporting Capability
- Target Link Speeds
- Slot Clock Configuration

Interrupts Tab:
- Interrupt Pin
- MSI Capability Struct
- 64-bit address Capable
- Per Vector Masking Capable
- Multiple Message Capable
- MSIx Capability Struct

Power Management Tab:
- Device Specific Initialisation
- D1 Support
- D2 Support
- PME Support

EXT Capabilities Tab:
- DSN Capability
- VC Capability
- VSEC Capability
- User Defined Configuration Capabilities

EXT Capabilities 2 Tab:
- AER

```

`Anti-Cheese FW Customisations/readme.md`:

```md
IDs:
- Vendor ID 
- Device ID 
- Revision ID 
- Subsystem Vendor ID 
- Subsystem ID 


Class Code:
- Base Class Menu 
- Base Class Value
- Sub Class Interface Menu
- Sub Class Value
- Cardbus CIS Pointer


Bars (0):
- Type
- Size Unit
- Size Value
- Prefetchable


Device Capabilities Register:
- Max Payload Size
- Extended Tag Field
- Extended Tag Default
- Phantom Functions
- Acceptable L0s Latency
- Acceptable L1 Latency


Link Status Register:
- Slot Clock Configuration


Legacy Interrupt Settings:
- Interrupt PIN


MSI Capabilities:
- MSI Capability Structure
- 64 bit Address Structure


MSIx Capabilities:
-- will need to calculate table and PBA Offset


Power Management Registers:
- Device Specific Initialization
- D1 Support
 -D2 Support


PME SUPPORT:
- D0
- D1
- D2
- D3hot
- D3cold
- No Soft Reset

DSN Capability:
- DSN Capability
- Change DSN value within `pcileech_pcie_cfg_a7.sv`


Vendor Specific Capability:
- VSEC Capability


Virtual Channel Capability:
- VC Capability
- Reject Snoop Transactions

```

`Automatic Firmware Creation/project.py`:

```py
import requests
import subprocess
import os
import shutil
import tempfile
import time
import threading
import re
import random
from colorama import Fore, init, Back, Style
init(convert=True)
os.system("mode 100, 70")
os.system("cls")



replacement_file_prefix = 'directory of replacement files'

vivado_path = "directory of vivado.bat E.G. D:/Xilinx/Vivado/2023.2/bin/vivado.bat"

def Generate():

    replacement_files = {
        """Dict containing the files within pcileech-FPGA you want to replace"""
        """Example:"""
        'IP/pcileech_bar_zero4k.coe': replacement_file_prefix + '/example/pcileech_bar_zero4k.coe',
        'src/pcileech_pcie_cfg_a7.sv': replacement_file_prefix + '/example/pcileech_pcie_cfg_a7.sv'
    }

    # Tcl script paths
    tcl_script_name = "example.tcl"

    generatebitstream_tcl_name = "generatebitstream.tcl"

    script_dir = os.path.dirname(os.path.abspath(__file__))
    tcl_script_path = os.path.join(script_dir, tcl_script_name)
    generatebitstream_tcl_path = os.path.join(script_dir, generatebitstream_tcl_name)

    # Last replacement files after running Tcl script
    last_replacement_files = {
        'pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/ directory of pcie_7x_0_core_top.v to replace'
    }

    def generate_random_hex_string(length=8):
        return ''.join(random.choices('0123456789ABCDEF', k=length))

    # Function to replace files if directory exists if the
    # path exists, it will replace the file with the last_replacement_files
    def replace_file_if_directory_exists(working_dir, directory_path, replacement_files, vivado_path,
                                         generatebitstream_tcl_path):
        while True:
            target_dir = os.path.join(working_dir, directory_path)
            if os.path.exists(target_dir):
                for relative_path, replacement_path in replacement_files.items():
                    target_path = os.path.join(working_dir, relative_path)
                    if os.path.exists(target_path):
                        os.remove(target_path)
                    shutil.copyfile(replacement_path, target_path)
                print(Fore.LIGHTGREEN_EX + "Successfully replaced the file in the directory.")
                print(Style.RESET_ALL)
                working_dir_with_squirrel = os.path.join(working_dir, 'pcileech_squirrel')
                bin_thread = threading.Thread(target=checkbin, args=(working_dir_with_squirrel,))
                bin_thread.start()

                generate_bitstream(vivado_path, working_dir_with_squirrel, generatebitstream_tcl_path)

            time.sleep(5)  # Sleep to avoid busy-waiting

    def checkbin(working_dir):
        bin_file = os.path.join(r"", working_dir, r"pcileech_squirrel.runs", r"impl_1", r"pcileech_squirrel_top.bin")
        while not os.path.isfile(bin_file):
            """file doesn't exist"""

        print(Fore.LIGHTGREEN_EX + "File exists")
        print(Style.RESET_ALL)


    def download_and_extract_repo(url, temp_dir):
        zip_path = os.path.join(temp_dir, 'repo.zip')

        response = requests.get(url)
        with open(zip_path, 'wb') as file:
            file.write(response.content)

        extracted_dir = os.path.join(temp_dir, 'extracted')
        shutil.unpack_archive(zip_path, extracted_dir)

        source_dir = os.path.join(extracted_dir, 'pcileech-fpga-4.15', 'PCIeSquirrel')
        dest_dir = os.path.join(temp_dir, 'PCIeSquirrel')
        shutil.move(source_dir, dest_dir)

        for item in os.listdir(extracted_dir):
            if item != 'PCIeSquirrel':
                shutil.rmtree(os.path.join(extracted_dir, item))

        return dest_dir

    def replace_files(base_dir, replacements):
        for relative_path, replacement_path in replacements.items():
            target_path = os.path.join(base_dir, relative_path)
            target_dir = os.path.dirname(target_path)
            os.makedirs(target_dir, exist_ok=True)
            shutil.copyfile(replacement_path, target_path)

    def edit_file(file_path):
        with open(file_path, 'r') as file:
            content = file.readlines()

        pattern = r'^\s*rw\[127:64\]'
        replacement_hex = "64'h00000000" + generate_random_hex_string(8)

        for i, line in enumerate(content):
            if re.search(pattern, line):
                content[i] = re.sub(r'64\'h[0-9A-Fa-f]{16}', replacement_hex, line)

        with open(file_path, 'w') as file:
            file.writelines(content)

    def run_vivado(vivado_path, working_dir, tcl_file, generatebitstream_tcl_path):
        thread = threading.Thread(target=replace_file_if_directory_exists, args=(
        working_dir, 'pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source', last_replacement_files,
        vivado_path, generatebitstream_tcl_path))
        thread.start()

        subprocess.run([vivado_path, '-mode', 'tcl', '-source', tcl_file], cwd=working_dir)

        thread.join()

    def generate_bitstream(vivado_path, working_dir, tcl_file):
        subprocess.run([vivado_path, '-mode', 'tcl', '-source', tcl_file], cwd=working_dir)

    with tempfile.TemporaryDirectory() as temp_dir:
        repo_dir = download_and_extract_repo(
            'https://github.com/ufrisk/pcileech-fpga/archive/refs/tags/v4.15.zip', temp_dir)

        replace_files(repo_dir, replacement_files)
        edit_file(os.path.join(repo_dir, 'src/pcileech_pcie_cfg_a7.sv'))

        run_vivado(vivado_path, repo_dir, tcl_script_path, generatebitstream_tcl_path)


Generate()
```

`Automatic Firmware Creation/readme.md`:

```md
# Automatic Firmware Creation

## Requirements
1. Python 3.13
  - requests
  - colorama 
2. Xilinx Vivado


Parts of this part have been redacted to ensure people who paste firmware cannot abuse this script. Those who have used Vivado and its TCL commands within Vivado will know what goes where. It's pretty simple. HINT: You can get all the commands from within the terminal in Vivado while generating the core and bitstream. TCL is needed to create the firmware with vivado.bat. I'm not telling which and where the commands are supposed to go. It's your job to learn ðŸ’–

To those who think the script is useless, you are correct. It is useless as is. It is your job to create and modify the TCL files to your firmware specifics, the same as the files that are being replaced. Once you get the TCL files completed, the script is no longer useless. See the examples of the TCL scripts below (NOTE: SOME COMMANDS IN THE EXAMPLES ARE MISSING. AGAIN, YOUR JOB TO DO THIS PART).

This video showcases what happens when everything is working.

https://youtu.be/qU3CvEFWHAA

### Scripts used in video

```tcl
Soundcard.tcl
35tgeneratebitstream.tcl
```

### Files replaced in video

```python
pcie_7x_0_core_top.v
pcileech_bar_zero4k.coe
pcileech_cfgspace.coe
pcileech_fifo.sv
pcileech_pcie_a7.sv
pcileech_pcie_cfg_a7.sv

------------------------------------------------------------------------

replacement_files = {
    'IP/pcileech_bar_zero4k.coe': replacement_file_prefix + '/SoundCard/pcileech_bar_zero4k.coe',
    'IP/pcileech_cfgspace.coe': replacement_file_prefix + '/SoundCard/pcileech_cfgspace.coe',
    'src/pcileech_fifo.sv': replacement_file_prefix + '/SoundCard/pcileech_fifo.sv',
    'src/pcileech_pcie_cfg_a7.sv': replacement_file_prefix + '/SoundCard/pcileech_pcie_cfg_a7.sv',
    'src/pcileech_pcie_a7.sv': replacement_file_prefix + '/SoundCard/pcileech_pcie_a7.sv'
}


last_replacement_files = {
    'pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/SoundCard/pcie_7x_0_core_top.v'
}
```
Replace the original files with your updated ones configured to the firmware you want to make

Example:

Original pcileech_cfgspace.coe

```python
memory_initialization_radix=16;
memory_initialization_vector=

fffff000,fffff004,fffff008,fffff00c,
fffff010,fffff014,fffff018,fffff01c,
fffff020,fffff024,fffff028,fffff02c,
fffff030,fffff034,fffff038,fffff03c,
fffff040,fffff044,fffff048,fffff04c,
fffff050,fffff054,fffff058,fffff05c,
fffff060,fffff064,fffff068,fffff06c,
fffff070,fffff074,fffff078,fffff07c,
fffff080,fffff084,fffff088,fffff08c,
fffff090,fffff094,fffff098,fffff09c,
fffff0a0,fffff0a4,fffff0a8,fffff0ac,
fffff0b0,fffff0b4,fffff0b8,fffff0bc,
fffff0c0,fffff0c4,fffff0c8,fffff0cc,
fffff0d0,fffff0d4,fffff0d8,fffff0dc,
fffff0e0,fffff0e4,fffff0e8,fffff0ec,
fffff0f0,fffff0f4,fffff0f8,fffff0fc,
```
<br>

When replacing the original with your updated pcileech_cfgspace.coe

```python
memory_initialization_radix=16;
memory_initialization_vector=

02111200,06001000,01000304,10000000,
04c07ffc,00000000,04807ffc,00000000,
00000000,00000000,00000000,02111000,
00000000,40000000,00000000,18010000,
01500304,08000000,00000000,00000000,
05708001,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
10000200,00802c01,10200000,113c0200,
40001110,00000000,00000000,00000000,
00000000,10000000,10000000,02000000,
00000000,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
00000000,00000000,00000000,00000000,
```

<br>


TCL scripts and files being replaced are configured to my firmware (Sound Card). If you want to create NIC firmware, you will need to change the `tcl_script_name` Script and the files that are being replaced.

Scripts can be used to make 35t, 75t, 100t, and M.2. You'll need to edit the Python script, and `tcl_script_name` for that part.

```tcl
35t - open_project pcileech_squirrel.xpr
75t - open_project pcileech_enigma_x1.xpr
100t - open_project pcileech_tbx4_100t.xpr
M.2 - open_project pcileech_screamer_m2.xpr
```

### 35T py

```python
tcl_script_name = "SoundCard.tcl"
generatebitstream_tcl_name = "35tgeneratebitstream.tcl"

working_dir_with_squirrel = os.path.join(working_dir, 'pcileech_squirrel')
last_replacement_files = {
    'pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/SoundCard/pcie_7x_0_core_top.v'
}

bin_file = os.path.join(r"", working_dir, r"pcileech_squirrel.runs", r"impl_1", r"pcileech_squirrel_top.bin")

source_dir = os.path.join(extracted_dir, 'pcileech-fpga-4.15', 'PCIeSquirrel')
dest_dir = os.path.join(temp_dir, 'PCIeSquirrel')

if item != 'PCIeSquirrel':

thread = threading.Thread(target=replace_file_if_directory_exists, args=(
working_dir, 'pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source', last_replacement_files,
vivado_path, generatebitstream_tcl_path))

```





### 75T py

```python
tcl_script_name = "SoundCard.tcl"
generatebitstream_tcl_name = "75tgeneratebitstream.tcl"

working_dir_with_squirrel = os.path.join(working_dir, 'pcileech_enigma_x1')

last_replacement_files = {
    'pcileech_enigma_x1/pcileech_enigma_x1.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/SoundCard/pcie_7x_0_core_top.v'
}

bin_file = os.path.join(r"", working_dir, r"pcileech_enigma_x1.runs", r"impl_1", r"pcileech_enigma_x1_top.bin")

source_dir = os.path.join(extracted_dir, 'pcileech-fpga-4.15', 'EnigmaX1')
dest_dir = os.path.join(temp_dir, 'EnigmaX1')

if item != 'EnigmaX1':

thread = threading.Thread(target=replace_file_if_directory_exists, args=(
working_dir, 'pcileech_enigma_x1/pcileech_enigma_x1.srcs/sources_1/ip/pcie_7x_0/source', last_replacement_files,
vivado_path, generatebitstream_tcl_path))
```


### 100T py

```python
tcl_script_name = "SoundCard_100t.tcl"
generatebitstream_tcl_name = "100tgeneratebitstream.tcl"

working_dir_with_squirrel = os.path.join(working_dir, 'pcileech_tbx4_100t')

last_replacement_files = {
    'pcileech_tbx4_100t/pcileech_tbx4_100t.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/SoundCard/pcie_7x_0_core_top.v'
}

bin_file = os.path.join(r"", working_dir, r"pcileech_tbx4_100t.runs", r"impl_1", r"pcileech_tbx4_100t_top.bin")

source_dir = os.path.join(extracted_dir, 'pcileech-fpga-4.15', 'ZDMA')
dest_dir = os.path.join(temp_dir, 'ZDMA')

if item != 'ZDMA':

thread = threading.Thread(target=replace_file_if_directory_exists, args=(
        working_dir, 'pcileech_tbx4_100t/pcileech_tbx4_100t.srcs/sources_1/ip/pcie_7x_0/source', last_replacement_files,
        vivado_path, generatebitstream_tcl_path))

edit_file(os.path.join(repo_dir, '100T/src/pcileech_pcie_cfg_a7.sv'))
```

### M.2 py
```python
tcl_script_name = "SoundCard.tcl"
generatebitstream_tcl_name = "M.2generatebitstream.tcl"

working_dir_with_squirrel = os.path.join(working_dir, 'pcileech_screamer_m2')

last_replacement_files = {
    'pcileech_screamer_m2/pcileech_screamer_m2.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v': replacement_file_prefix + '/SoundCard/DrvRed/pcie_7x_0_core_top.v'
}

bin_file = os.path.join(r"", working_dir, r"pcileech_screamer_m2.runs", r"impl_1", r"pcileech_screamer_m2_top.bin")

source_dir = os.path.join(extracted_dir, 'pcileech-fpga-4.14', 'ScreamerM2')
dest_dir = os.path.join(temp_dir, 'ScreamerM2')

if item != 'ScreamerM2':

thread = threading.Thread(target=replace_file_if_directory_exists, args=(
        working_dir, 'pcileech_screamer_m2/pcileech_screamer_m2.srcs/sources_1/ip/pcie_7x_0/source', last_replacement_files,
        vivado_path, generatebitstream_tcl_path))
```

### Parts to do yourself:
- generatebitstream_tcl_name TCL file
- tcl_script_name TCL file
- Replacement files


## project.py

```python
replacement_file_prefix
vivado_path
tcl_script_name
generatebitstream_tcl_name
last_replacement_files
```

replacement_file_prefix is the directory where the files you want to replace are in either /IP or /src sit

vivado_path is the directory where Xilinx Vivado is installed. Link the directory where `vivado.bat` is, which is in `Xilinx/Vivado/2023.2/bin/`. 
E.G `D:/Xilinx/Vivado/2023.2/bin/vivado.bat`

tcl_script_name and generatebitstream_tcl_name are the directories where the TCL script will be 

last_replacement_files is the directory where the last replacement file will be, which will be the core_top.v file.

## tcl_script_name
#### Example TCL script
```tcl
source vivado_generate_project.tcl -notrace

set_property -dict [list \
.....
] [get_ips pcie_7x_0]

generate_target {all} [get_files pcie_7x_0.xci]

lock core command here
```


## generatebitstream_tcl_name
#### Example TCL script
```tcl
open_project xpr file name

update_compile_order -fileset sources_1

generate bitstream command here
```

```

`DMA FAQ.md`:

```md
# Frequently Asked DMA Questions

__which DMA card should I get?__
: If you want to save money, 35T. If you don't mind spending more for a faster and new DMA card, I suggest the 75T.

__What Firmware do I need for my DMA card?__
: 35T - Squirrel,  75T - EnigmaX1.

__If I have a 35T, and I buy a new card E.g(cap DMA 4th Gen), is it fine to flash the same FW?__
: Yes, both 35T and 4th gen cap DMA share the same prototype chip (squirrel).

__What are the minimum specs I need for my second computer?__
: USB 3.0, at least 6GB RAM, 

__Why do I get Tiny PCIe TLP Algorithm when running a speed test?__
: This happens due to the motherboard in the main PC not liking the config space of the DMA FW.

__How do I flash my FW?__
: If you are using 35T, use Open OCD to [program](https://docs.lambdaconcept.com/screamer/programming.html) and [to upgrade](https://docs.lambdaconcept.com/screamer/openocd.html) or visit [How to Flash](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash)

__What donor board do I need?__
: Any PCIe Device technically can be used as a donor board. I wouldn't recommend using the values from an already existing PCIe Device you have on your computer. E.g. (GPU). I use an Intel Wifi 6 Ax200 card. You don't need to use this, you can use devices such as video capture cards, USB extensions, Sound Cards, SATA Expansion Cards, and so on.

__What is Firmware Locking__
: Firmware locking refers to the process of securing the firmware on a device to prevent unauthorized access, modification, or copying

__How does Firmware Locking Work?__
: Firmware locking works by getting the EFUSE FUSER_DNA value of the Artix7 chip from your DMA card and running a check on system bootup to check if a hard-coded(yourDNA) value is the same as your Artix7 DNA.
If the DNA values match, the firmware will work, otherwise, the firmware won't work. This is intended to work for 1 person, and 1 person only since Artix7 chips have their own <b>Unique Identifier</b>(DNA). 



More coming soon

```

`DMA Troubleshooting/readme.md`:

```md
# DMA Troubleshooting


Common Types of DMA Errors
1. [VMM Init fails](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting#vmm-init-fail)
2. [FPGA Error: Unable to connect to USB/FT601 device](https://github.com/Rakeshmonkee/DMA/blob/main/DMA%20Troubleshooting/readme.md#fpga-error-unable-to-connect-to-usbft601-device)
3. [Tiny PCIe TLP Algo](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting#tiny-pcie-tlp-algo)
4. [OpenOCD](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting#openocd)


# VMM INIT FAIL

Main reasons why VMM INIT failed is thrown when doing a speed test or trying to connect the DMA to VMM

1. FTDI Drivers on radar / second PC are not correctly installed / corrupted
2. Main Computer Bios Virtualisation (VMT) / IOMMU is not Disabled.
3. USB Cable is still in JTAG port, not the DATA port.
4. Bad firmware

## How to fix:

### 1. FTDI Drivers

On the second computer, head to [FTD3XX](https://ftdichip.com/drivers/d3xx-drivers/) website and download the latest compatible driver for your computer.

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/96935470-bd1e-4ef5-a7cc-a9f39ebb8292)

if your computer is a 64-bit operating system, download the X64 (64-Bit) driver

if your computer is a 32-bit operating system, download the X86 (32-Bit) driver

Once the folder has been downloaded, extract the folder to your desktop.

Back in the folder right right-click on the `ftdibus3.inf` file and click install.

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/c10aa9c9-ecea-4653-bd6e-80eecb863578)

### 2. Disabling Virtualisation / IOMMU

The following steps are within the BIOS


### MSI Click BIOS:
OC > Advanced CPU Configuration > SVM Mode > Disabled

### ASUS BIOS:

Advanced Mode[F7] > Advanced > CPU Configuration > Intel [VMX] Virtualisation Technology > Disabled

### Gigabyte BIOS:

Advanced Mode[F2] > Tweaker > Advanced CPU Settings > SVM Mode > Disabled

### ASRock:

Advanced > CPU Configuration > SVM MODE > Disabled

### Biostar:

Advanced > CPU Settings and Information > Intel Virtualisation > Disabled




# FPGA Error: Unable to connect to USB/FT601 device

Main reasons why FPGA Error: Unable to connect to USB/FT601 device

1. Faulty USBC-USB3.0 cable
2. USB Cable is still in JTAG port, not the DATA port.
3. FTDI Drivers on radar / second PC are not correctly installed / corrupted

## How to fix:

### 1. Buying a new USB-C to USB A cable. I recommend this USB Cable from [AMAZON](https://www.amazon.com.au/CableCreation-Transfer-10Gbps-Charging-External/dp/B09QKHPT35/ref=sr_1_2_sspa?dib=eyJ2IjoiMSJ9.Gf0JIfmmFhmI5TU_Hx-PfacNeAkKjmOlBeBQaKN5Xhblz2OF36mS3-0MK8Wo29I3qt4ENT1PMhz4ZhaDJQyAi7vufKb8VNex0zjJ616vM7wSm3wKbycBQEFiLNzK2PVC7A8DuTQ_7t5peKKf9irUWh5YSKGkPlv0IJKr99c34lmWqUjXwH7ywQFE7-XH27eh5WNilpeUUhX0VNogKm3mMVq_955BqxYOTdbvLpAnQPbrXCMZ37pyfRKBtHUP0OoQz9Qof_LYDRD8ePw5jf-yNQKIZQJvFSh25MHzqA-2c-I.JHVF_jJx0q260kYEsskiyps3NBXaqnXc8__Cn4lgsHc&dib_tag=se&keywords=usb%2Bc%2Bto%2Busb%2Ba%2B3.2&qid=1719671885&sr=8-2-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&th=1)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/10bf26d1-ccb2-4b6c-9819-8353482959de)


### 2. Change the cable from the JTAG port to DATA Port

### 3. See [FTDI DRIVERS](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting#1-ftdi-drivers)


## Tiny PCIe TLP Algo

Main reasons why Tiny PCIe TLP Algo is chosen

### 1. Faulty Firmware

Sometimes faulty firmware can cause Tiny PCIe TLP Algo error. The only impact this has on the DMA is the throughput speeds and read speeds

### 2. Bad / faulty USB Cable. 

See [USB-C to USB A Cable](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting#how-to-fix-1) on how to fix this issue


# OpenOCD

Types of Errors:

1. `Info : auto-selecting first available session transport "jtag". To override use 'transport select <transport>'.`



## How to fix:

### 1. Auto Selecting JTAG 

For which ever device you are using, make sure to download the drivers correctly. [WinUSB](https://zadig.akeo.ie/), [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar), or check [Flashing Guide](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash)

Make sure when you are installing the drivers, the cable is in the JTAG port.

OR

A simple restart on your second computer can fix this issue

OR

Putting the USB Cable into the JTAG port

```

`How to Flash/readme.md`:

```md
# How to Flash DMA Firmware

> [!NOTE]
> This is a WIP (WORK IN PROGRESS), not everything is finished


TODO:
- ZDMA
- NinjaDMA 
- RaptorDMA
- LynxDMA  
- PCIeScreamer
- GameboyDMA
- C1 Terminator
- Hack DMA

Finished:
- [X] CaptainDMA
- [X] GhostDMA
- [X] LeetDMA
- [X] MVP DMA
- [X] StarkDMA
- [X] OnetapDMA
- [X] EnigmaX1 DMA 


# Content
- 35T
  - [CaptainDMA](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#captaindma-35t)
    - 3rd Gen(squirrel)
    - 4th Gen
    - 4.1th Gen
    - 5th Gen
  - [LeetDMA](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#leetdma-35t)
  - [MVP](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#mvp-dma-35t--75t)
  - [GhostDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#ghostdma-35t)
- 75T
  - [CaptainDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#captain-dma--engima-75t)
  - [EnigmaX-1](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#captain-dma--engima-75t)
  - [MVP](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#mvp-dma-35t--75t)
  - [StarkDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#starkdma)
  - [OneTapDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#onetap-dma)





# CaptainDMA 35T

Everything done here is on the second computer. Make sure your cable on the DMA is connected to the JTAG port

#### Download 
-  [Open OCD](https://docs.lambdaconcept.com/screamer/_downloads/e72a9b76299cd3a4cb30e53dd62505ff/openocd-win.zip)
-  [Zadig](https://zadig.akeo.ie/)
-  [Flash_Screamer](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/flash_screamer.rar)

#### Steps

##### Zadig

1. Open Zadig as Admin
2. Click on Options > Show all devices
3. In the drop-down menu, select your device, which should be RS232 +HS(Interface 0)
4. Click on reinstall driver. This should replace the FTDI Bus Driver with WinUSB 

Let the driver install it. You don't need to restart.

##### Open OCD and Flash_Screamer
1. Unzip both of the folders and place them on your Desktop. There should be the OpenOCD and flash_screamer folder on your Desktop.
2. With your .bin (Firmware) file, place this inside the flash_screamer folder.


##### Flashing Firmware

Before Flashing, make sure the USB is connected to the JTAG slot on your DMA board

1. Open the command prompt as a user and cd to `cd Desktop/flash_screamer`
2. Once you are in the flash_screamer folder, on a new command line type in `..\openocd\bin\openocd.exe -f flash_screamer_squirrel.cfg`
3. Your Firmware should flash and show something like

```
Info : sector 0 took 113 ms
Info : sector 1 took 108 ms
Info : sector 2 took 113 ms
Info : sector 3 took 116 ms
Info : sector 4 took 125 ms
Info : sector 5 took 114 ms
Info : sector 6 took 110 ms
Info : sector 7 took 98 ms
Info : sector 8 took 122 ms
Info : sector 9 took 118 ms
Info : sector 10 took 117 ms
Info : sector 11 took 114 ms
Info : sector 12 took 108 ms
```

Will go up to sector 23 or 24

Once it shows something like

```
Info : Found flash device 'issi is25lp256d' (ID 0x0019609d)
Warn : device needs paging or 4-byte addresses - not implemented
shutdown command invoked
``` 

This means the Firmware has successfully flashed onto your DMA board.

You will now need to restart your Main PC. (It is necessary to restart your Main PC after flashing)


# GhostDMA 35T

#### Download 

Download the OpenOCD and CH341PAR folders provided above.

- [OpenOCD](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/GhostDMA-openocd.rar)
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the dma
2. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file
3. Open the OpenOCD folder and place your firmware (.bin) file inside and rename the file to `firmware.bin` instead of the original `pcileech_squirrel_top.bin`
4. In the OpenOCD folder, type `cmd.exe` into the search address and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/016a29e6-b432-4429-aa74-806b57d914c3)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/7ec678b1-094a-4f52-9721-2b12c855a552)

5. in command prompt type in `openocd.exe -f flash.cfg` and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/660e5f2e-3a5f-4261-baf4-2fae8812de2c)

Command prompt should spit out sector information, let this run. After its flashed, it will say something like `Close CH347`, once this is shown your firmware has been flashed. Restart Main pc to see the changes


# LeetDMA 35T

#### Download 

Download the OpenOCD and CH341PAR folders provided above.

- [OpenOCD](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/GhostDMA-openocd.rar)
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the dma
2. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file
3. Open the OpenOCD folder and place your firmware (.bin) file inside and rename the file to `firmware.bin` instead of the original `pcileech_squirrel_top.bin`
4. In the OpenOCD folder, type `cmd.exe` into the search address and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/016a29e6-b432-4429-aa74-806b57d914c3)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/7ec678b1-094a-4f52-9721-2b12c855a552)

5. in command prompt type in `openocd.exe -f flash.cfg` and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/660e5f2e-3a5f-4261-baf4-2fae8812de2c)

Command prompt should spit out sector information, let this run. After its flashed, it will say something like `Close CH347`, once this is shown your firmware has been flashed. Restart Main pc to see the changes


# MVP DMA 35T & 75T

#### Download 
- [MVP DMA Flash Tool](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/MVPDMA.rar)
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called MVP DMA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Now place your firmware file in the openocd folder. Make sure the name of the firmware file (.bin) is called `firmware` with the .bin extension on the end.
5. Open the current directory in command prompt, or go to the file directory path and type in `cmd.exe`. This should open command prompt as a user.

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/016a29e6-b432-4429-aa74-806b57d914c3)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/7ec678b1-094a-4f52-9721-2b12c855a552)

Follow below for the prompt. Make sure to do the prompt for your XC7A chip

### 35T
`openocd.exe -f xc7a35t.cfg`

### 75T
`openocd.exe -f xc7a75t.cfg`


Command prompt should spit out sector information, let this run. After its flashed, it will say something like `Close CH347`, once this is shown your firmware has been flashed. Restart Main pc to see the changes



# StarkDMA

#### Download 
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)
- [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/tree/main/CH347FPGATool)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called Ch347 FPGA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Run `CH347FpgaDownloadTool.exe` as an administrator.
5. Chose XC7A75T for the chip
6. Change from bit to bin in the drop-down
7. Leave the clock speed as the default
8. Select the .bin file (firmware)
9. Press the Download button

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


# OneTap DMA

#### Download 
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)
- [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/tree/main/CH347FPGATool)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called Ch347 FPGA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Run `CH347FpgaDownloadTool.exe` as an administrator.
5. Chose XC7A75T for the chip
6. Change from bit to bin in the drop-down
7. Leave the clock speed as the default
8. Select the .bin file (firmware)
9. Press the Download button

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


# Captain DMA & Engima 75t

#### Download 
-  [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/releases/tag/CH347_OpenOCD_Release)
-  [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Chip Info

35T - XC7A35T

75T - XC7A75T


#### Steps

1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called MVP DMA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. run the ch347 FPGA flash tool executable
5. Chose the FPGA chip you have (look at chip info above)
6. Change from bit to bin in the drop-down
7. leave the clock speed as the default
8. Select your .bin file (firmware) 
9. Download

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


```

`Speed Test/readme.md`:

```md
# DMA Speed Test 

```

`VGK FW Creation/readme.md`:

```md
# Creation of VGK Firmware

#### Before starting this, I want to thank my friend Movinggun for initially showing me this method/technique on how to bypass VGK ðŸ’–. I was going to release this earlier but I wanted a go from him.

> [!WARNING]
> The VGK bypass has been patched, and no longer works. Props to them for being malware. no Anti-Cheese should run at UEFI boot.
> 


> [!NOTE]
> This method only works for primarily MSI motherboards, other motherboards may work, but I suggest you use an MSI motherboard for this method.
>
> It is been found that some DMA speed tests won't recognise the DMA card and others will


Before you do the steps below, it is required to complete the customisations shown [here](https://github.com/Rakeshmonkee/DMA/blob/main/EAC-BE%20FW%20Creation/EAC-BE%20FW%20Customisations) as the steps below are an add on.


This section will be quick and easy as there aren't many things to change

Within the core_top.v file,

1. set `HEADER_TYPE` to 80,
2. set `CAPABILITIES_PTR` to 80

By changing just these 2 values to 80 within the config space, you will break the config space and allow us to bypass VGK. If you do a speed test, tiny pcie tlp algo might be selected, this is for you to fix. Go NULL some stuff out in the config space till tiny pcie tlp algo goes away. I suggest you expand on this more, don't just change some values and Header_Type and Cap_Ptr. For this to last a while you need more changes within the config space.



Now you can save $200+ just by changing 2 lines

```

`Vivado Customisations/Vivado.py`:

```py

#Made with <3 by RakeshMonkee

#Make sure to uncomment the customisations you want to change

# Change File Path to the path of your pcie_7x_0_core_top.v File
# Make sure pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v is on the end
file_path = "C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v"
with open(file_path, 'r') as file:
    verilog_contents = file.read()

InputvendorID: str = str(input("VendorID: "))[:4]

InputDeviceID = str(input("DevicedID: "))[:4]

InputRevisionID = str(input("RevisionID: "))[:2]

InputSubsystemID = str(input("SubsystemID: "))[:4]

InputSubsystemVendorID = str(input("SubsystemVendorID: "))[:4]

#InputHeaderTypeID: str = str(input("Header Type: "))[:2]

#InputInterupPinID: str = str(input("Interup Pin: "))[:2]

#InputCapabilitesPtrID: str = str(input("Capabilites Ptr: "))[:2]

VendorID = f"CFG_VEND_ID        = 16'h{InputvendorID}"

DeviceID = f"CFG_DEV_ID         = 16'h{InputDeviceID}"

RevisionID = f"CFG_REV_ID         =  8'h{InputRevisionID}"

SubsystemVendorID = f"CFG_SUBSYS_VEND_ID = 16'h{InputSubsystemVendorID}"

SubsystemID = f"CFG_SUBSYS_ID      = 16'h{InputSubsystemID}"
#HeaderTypeID = f"HEADER_TYPE = 8'h{InputHeaderTypeID}"
#CapabitiesPtrID = f"CAPABILITIES_PTR = 8'h{InputCapabilitesPtrID}"
#InteruptPinID = f"INTERRUPT_PIN = 8'{InputInteruptPinID}"

#uncomment ClassCode and ClassCode Verilog_contents if you want to change Class Code aswell. Only do if you know what you are doing
#ClassCode = "24'h060000"

# Leave all these Values
verilog_contents = verilog_contents.replace("CFG_VEND_ID        = 16'h10EE", f"{VendorID}")
verilog_contents = verilog_contents.replace("CFG_DEV_ID         = 16'h0666", f"{DeviceID}")
verilog_contents = verilog_contents.replace("CFG_REV_ID         =  8'h02", f"{RevisionID}")
verilog_contents = verilog_contents.replace("CFG_SUBSYS_VEND_ID = 16'h10EE", f"{SubsystemVendorID}")
verilog_contents = verilog_contents.replace("CFG_SUBSYS_ID      = 16'h0007", f"{SubsystemID}")
#verilog_contents = verilog_contents.replace("HEADER_TYPE = 8'h00", f"{HeaderTypeID})
#verilog_contents = verilog_contents.replace("CAPABILITIES_PTR = 8'h40", f"{CapabitiesPtrID})
#verilog_contents = verilog_contents.replace("INTERRUPT_PIN = 8'h1", f"{InteruptPinID})
#verilog_contents = verilog_contents.replace("24'h020000", f"{ClassCode}")


with open(file_path, 'w') as file:
    file.write(verilog_contents)
```

`Vivado Customisations/generate-project.py`:

```py
import os
import subprocess

#Made with <3 by RakeshMonkee

script_dir = os.path.dirname(os.path.abspath(__file__))

# Change to DIr of your xilinx vivado installation
vivado_path = "D:/Xilinx/Vivado/2023.2/bin/vivado.bat"


tcl_script_name = "script.tcl"


tcl_script_path = os.path.join(script_dir, tcl_script_name)

# Change to Dir of your project
project_dir = "C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel"


command = [vivado_path, "-mode", "tcl", "-source", tcl_script_path, "-notrace"]

subprocess.run(command, cwd=project_dir)
```

`Vivado Customisations/readme.md`:

```md
## Automatically generate and customise ip core for pcileech-fpga-4.14/PCIeSquirrel

This is just something I made in 20 mins for fun. Not really a purpose to use but use it if you want. was made for version 4.13. I will upload and update the files soon for 4.14

> [!WARNING]
> There might be an issue with the vivado.py file. I can't be bothered anymore to update that


> [!NOTE]
> You will need to go into each file and change the file location to the dir of your project
>
> You will need to comment/uncomment the customisations you want
> 
> This doesn't create the .bin file. you will need to open the xpr file in /PCIeSquirrel/pcileech_squirrel and generate the file within Vivado by pressing Generate Bitstream, or Synthesis.



##### List of possible customisations as of now
- Device ID
- Vendor ID
- Subsystem ID
- Subsystem Vendor ID
- Revision ID

##### Soon to come
- Class Code
- Header Type
- Int Pin
- Bars
- Base Ptrs (MSI/MSIx/Header0/PMC/PCIe)
- Next Ptrs (MSI/MSIx/Header0/PMC/PCIe)

## Steps:
1. Make sure Python and Xilinx Vivado is installed on your OS
   
2. Download the project
   
3. Leave all 3 files in the same directory
   
4. Run the `generate-project.py` until the IP core is generated. Depending on your PC specs, this might be fast or slow. To check go to `pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0`.

You can stop the `generate-project.py` file if you can see this directory. If you don't see this directory, let the IP core generate.

5. Run `Vivado.py`

Once Vivado.py has finished running. You can go to this directory `PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/` and open the `pcie_7x_0_core_top.v` to see if your customisations have been changed. 




```

`Vivado Customisations/script.tcl`:

```tcl
#Made with <3 by RakeshMonkee

source vivado_generate_project.tcl -notrace

#change to your dir, needs to look like dir below
cd C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0

generate_target {all} [get_files pcie_7x_0.xci]

set_property is_managed false [get_files pcie_7x_0.xci]
```

`readme.md`:

```md
## DMA Firmware, Flashing, trouble-shooting Guide.

The point of making this repo is to reduce the price of DMA custom firmware. But now, it is more of a repo to help people with DMA.




> [!WARNING]
> 
> This guide has been specifically created for educational purposes to provide valuable information and insights to help users understand anything todo with DMA, Firmware creation, Flashing, and Trouble-shooting
> 


> [!IMPORTANT]
> 
> This guide is not a spoon feed. I have purposely left out some information. It is your job to make FW while learning something.
> 


### Contents
- [Automatic Firmware Creation](https://github.com/Rakeshmonkee/DMA/tree/main/Automatic%20Firmware%20Creation)
- [Vivado Customisations](https://github.com/Rakeshmonkee/DMA/tree/main/Vivado%20Customisations)
- [DMA FAQ](https://github.com/Rakeshmonkee/DMA/blob/main/DMA%20FAQ.md)
- [How to Flash](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash)
- [Anti-Cheese FW Creation](https://github.com/Rakeshmonkee/DMA/tree/main/Anti-Cheese%20FW%20Creation)
- [VGK FW Creation](https://github.com/Rakeshmonkee/DMA/tree/main/VGK%20FW%20Creation)
- [TLSCAN to COE](https://github.com/Rakeshmonkee/DMA/tree/main/.tlscan%20to%20.coe)
- [1:1 CFG of real device](https://github.com/Rakeshmonkee/DMA/tree/main/1%3A1%20CFG%20of%20real%20device)
- [DMA Troubleshooting](https://github.com/Rakeshmonkee/DMA/tree/main/DMA%20Troubleshooting)

#### If you have any questions or problems/issues, feel free to join my discord server and ask in one of the channels that best suits your issue.

[![Discord Banner](https://discord.com/api/guilds/1201428101964513300/widget.png?style=banner2)](https://discord.gg/4kSWZsexvq)

------------------------
# Disclaimer:

The content of this post is intended for educational and informational purposes only. Any references to anti-cheat software, including but not limited to descriptions, functionalities, or general characteristics, are made in the context of promoting security awareness and understanding within the software development community. This post does not endorse or promote any actions that would violate the terms of service of any software or service.

All trademarks, service marks, and company names are the property of their respective owners. The use of these names, logos, and brands is for identification purposes only and does not imply endorsement. If you represent a company and believe this post infringes on your intellectual property, please contact me, and I will take appropriate action.




```