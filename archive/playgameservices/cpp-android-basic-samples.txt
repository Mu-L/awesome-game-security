Project Path: arc_playgameservices_cpp-android-basic-samples_uenx8f_f

Source Tree:

```txt
arc_playgameservices_cpp-android-basic-samples_uenx8f_f
├── README.md
└── samples-android
    ├── CollectAllTheStarsNative
    │   ├── CMakeLists.txt
    │   ├── README.md
    │   ├── build.gradle
    │   ├── proguard-project.txt
    │   └── src
    │       └── main
    │           ├── AndroidManifest.xml
    │           ├── assets
    │           │   ├── Shaders
    │           │   │   ├── ShaderPlain.fsh
    │           │   │   └── VS_ShaderPlain.vsh
    │           │   └── gps.png
    │           ├── cpp
    │           │   ├── CollectAllTheStarsNativeActivity.cpp
    │           │   ├── CollectAllTheStarsNativeActivity.h
    │           │   └── CollectAllTheStarsNativeActivity_Engine.cpp
    │           ├── java
    │           │   └── com
    │           │       └── google
    │           │           └── example
    │           │               └── games
    │           │                   └── cats
    │           │                       ├── CollectAllTheStarsApplication.java
    │           │                       └── CollectAllTheStarsNativeActivity.java
    │           └── res
    │               ├── drawable-hdpi
    │               │   └── ic_launcher.png
    │               ├── drawable-ldpi
    │               │   └── ic_launcher.png
    │               ├── drawable-mdpi
    │               │   └── ic_launcher.png
    │               ├── drawable-xhdpi
    │               │   └── ic_launcher.png
    │               ├── layout
    │               │   └── widgets.xml
    │               ├── values
    │               │   ├── ids.xml
    │               │   ├── strings.xml
    │               │   └── styles.xml
    │               ├── values-v11
    │               │   └── styles.xml
    │               └── values-v14
    │                   └── styles.xml
    ├── Common
    │   ├── JuiHelper
    │   │   ├── CMakeLists.txt
    │   │   ├── build.gradle
    │   │   └── src
    │   │       └── main
    │   │           ├── AndroidManifest.xml
    │   │           ├── cpp
    │   │           │   ├── JavaUI.cpp
    │   │           │   ├── JavaUI.h
    │   │           │   ├── JavaUI_Dialog.cpp
    │   │           │   ├── JavaUI_Layouts.cpp
    │   │           │   ├── JavaUI_Toast.cpp
    │   │           │   ├── JavaUI_Toast.h
    │   │           │   ├── JavaUI_View.h
    │   │           │   └── JavaUI_Window.cpp
    │   │           └── java
    │   │               └── com
    │   │                   └── sample
    │   │                       └── helper
    │   │                           ├── JUIAlertDialog.java
    │   │                           ├── JUIButton.java
    │   │                           ├── JUICheckBox.java
    │   │                           ├── JUICheckedTextView.java
    │   │                           ├── JUIDialog.java
    │   │                           ├── JUIForwardingPopupWindow.java
    │   │                           ├── JUIHelper.java
    │   │                           ├── JUILinearLayout.java
    │   │                           ├── JUIProgressBar.java
    │   │                           ├── JUIRadioButton.java
    │   │                           ├── JUIRadioGroup.java
    │   │                           ├── JUIRelativeLayout.java
    │   │                           ├── JUISeekBar.java
    │   │                           ├── JUISwitch.java
    │   │                           ├── JUITextView.java
    │   │                           ├── JUIToggleButton.java
    │   │                           └── NDKHelper.java
    │   ├── NDKHelper
    │   │   ├── CMakeLists.txt
    │   │   ├── build.gradle
    │   │   └── src
    │   │       └── main
    │   │           ├── AndroidManifest.xml
    │   │           └── cpp
    │   │               ├── GLContext.cpp
    │   │               ├── GLContext.h
    │   │               ├── JNIHelper.cpp
    │   │               ├── JNIHelper.h
    │   │               ├── NDKHelper.h
    │   │               ├── gestureDetector.cpp
    │   │               ├── gestureDetector.h
    │   │               ├── gl3stub.cpp
    │   │               ├── gl3stub.h
    │   │               ├── interpolator.cpp
    │   │               ├── interpolator.h
    │   │               ├── perfMonitor.cpp
    │   │               ├── perfMonitor.h
    │   │               ├── sensorManager.cpp
    │   │               ├── sensorManager.h
    │   │               ├── shader.cpp
    │   │               ├── shader.h
    │   │               ├── tapCamera.cpp
    │   │               ├── tapCamera.h
    │   │               ├── vecmath.cpp
    │   │               └── vecmath.h
    │   ├── TeapotRenderer
    │   │   ├── TeapotRenderer.cpp
    │   │   ├── TeapotRenderer.h
    │   │   └── teapot.inl
    │   ├── external
    │   │   └── jsoncpp
    │   │       ├── AUTHORS
    │   │       ├── LICENSE
    │   │       ├── include
    │   │       │   └── json
    │   │       │       ├── autolink.h
    │   │       │       ├── config.h
    │   │       │       ├── features.h
    │   │       │       ├── forwards.h
    │   │       │       ├── json.h
    │   │       │       ├── reader.h
    │   │       │       ├── value.h
    │   │       │       └── writer.h
    │   │       └── src
    │   │           ├── jsontestrunner
    │   │           │   ├── main.cpp
    │   │           │   └── sconscript
    │   │           ├── lib_json
    │   │           │   ├── json_batchallocator.h
    │   │           │   ├── json_internalarray.inl
    │   │           │   ├── json_internalmap.inl
    │   │           │   ├── json_reader.cpp
    │   │           │   ├── json_value.cpp
    │   │           │   ├── json_valueiterator.inl
    │   │           │   └── json_writer.cpp
    │   │           └── test_lib_json
    │   │               ├── jsontest.cpp
    │   │               ├── jsontest.h
    │   │               ├── main.cpp
    │   │               └── sconscript
    │   └── gpg-sdk
    │       └── build.gradle
    ├── Minimalist
    │   ├── CMakeLists.txt
    │   ├── build.gradle
    │   ├── proguard-project.txt
    │   └── src
    │       └── main
    │           ├── AndroidManifest.xml
    │           ├── cpp
    │           │   ├── StateManager.cpp
    │           │   ├── StateManager.h
    │           │   └── main.cpp
    │           ├── java
    │           │   └── README
    │           ├── res
    │           │   ├── drawable-hdpi
    │           │   │   └── ic_launcher.png
    │           │   ├── drawable-ldpi
    │           │   │   └── ic_launcher.png
    │           │   ├── drawable-mdpi
    │           │   │   └── ic_launcher.png
    │           │   ├── drawable-xhdpi
    │           │   │   └── ic_launcher.png
    │           │   └── values
    │           │       ├── ids.xml
    │           │       └── strings.xml
    │           └── resources
    │               └── README
    ├── Teapot
    │   ├── CMakeLists.txt
    │   ├── build.gradle
    │   ├── proguard-project.txt
    │   └── src
    │       └── main
    │           ├── AndroidManifest.xml
    │           ├── assets
    │           │   └── Shaders
    │           │       ├── ShaderPlain.fsh
    │           │       └── VS_ShaderPlain.vsh
    │           ├── cpp
    │           │   ├── NativeGameActivity.cpp
    │           │   ├── StateManager.cpp
    │           │   └── StateManager.h
    │           ├── java
    │           │   └── com
    │           │       └── google
    │           │           └── example
    │           │               └── nativegame
    │           │                   ├── NativeGameActivity.java
    │           │                   └── NativeGameApplication.java
    │           └── res
    │               ├── drawable-hdpi
    │               │   └── ic_launcher.png
    │               ├── drawable-ldpi
    │               │   └── ic_launcher.png
    │               ├── drawable-mdpi
    │               │   └── ic_launcher.png
    │               ├── drawable-xhdpi
    │               │   └── ic_launcher.png
    │               ├── layout
    │               │   └── widgets.xml
    │               └── values
    │                   ├── ids.xml
    │                   ├── strings.xml
    │                   └── styles.xml
    ├── build.gradle
    ├── gradle
    │   └── wrapper
    │       ├── gradle-wrapper.jar
    │       └── gradle-wrapper.properties
    ├── gradlew
    ├── gradlew.bat
    └── settings.gradle

```

`README.md`:

```md
Android Google Play Games Native Samples
=======================================
These samples illustrate how to use Google Play Game Services with your Android game.

* **CollectAllTheStarsNative**: Demonstrates how to use the Saved Games feature to save game data. The sample signs the user in, synchronizes their data from a named game save, and then updates the UI to reflect the saved game state.

* **minimalist**: Demonstrates a minimal use case for the Google Play Game Services API.

* **Teapots**: Demonstrates use of the Leaderboard and Achievement APIs.

Pre-requisites
--------------
1. Change the applicationId inside each individual samples build.gradle to your own package name
2. Modify res/values/ids.xml and place your IDs there, as given by the
   Developer Console (create the leaderboards and achievements necessary for
   the sample, if any). In the Developer console, select a resource type
   (Achievements, Events, Leaderboards) and click "Get Resources".  Copy the
    contents from the console and replace the contents of res/values/ids.xml.

Build with Android Studio
-------------------------
This project requires Android Studio 1.5+.
1. Android SDK version r10e or eariler.
2. Launch Android Studio.
3. Import the project by selecting File > New > Import Project and select
        samples-android/build.gradle.
4. Edit the local.properties file (which is created by Android Studio) and
        set the ndk.dir property to the location of your r10e or eariler NDK.
5. Change applicationId in the sample app build.gradle to your own package name
        that matches the configuration in the Play Game developer console.
6. Replace res/values/ids.xml contents with your values from the developer console.
7. Run the select project. Android Studio will compile, load and start your project on your device

All projects could be built at one shot from Android Studio menu "Build" -> "Clean Project"/"Rebuild Project"
you could also build with Gradle on Terminal/Command line

Build using Gradle on OS X or Linux
-----------------------------------
1. Install Android Studio
1. Set the path to the Android SDK

    export ANDROID_HOME=~/Library/Android/sdk

1. Add the SDK to your path

    export PATH=$PATH;$ANDROID_HOME/tools;$ANDROID_HOME/platform-tools

1. Set the path to the Android NDK

    export ANDROID_NDK_HOME=<PATH_TO_NDK>/android-ndk-r10e

1. Execute the build script

    ./gradlew assemble

Build on Windows using Gradle
-----------------------------
1. Install Android Studio
1. Set the path to the Android SDK

    set ANDROID_HOME=C:\Users\<yourusername>\AppData\Local\Android\sdk

1. Add the SDK to your path

    set PATH=%PATH%;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools

1. Set the path to the Android NDK

    set ANDROID_NDK_HOME=C:\Users\<yourusername>\Desktop\android-ndk-r10e

1. (Optional) On some versions of Windows it is helpful to map the samples folder to a shortened path.

    subst G: C:\<full-path-to-sample-folder>

1. Execute the build script

    G:
    gradlew.bat assemble

Support
-------
If you've found an error in these samples, please [file an issue](https://github.com/playgameservices/cpp-android-basic-samples/issues/new).

Patches are encouraged, and may be submitted by [forking this project](https://github.com/playgameservices/cpp-android-basic-samples/fork) and
submitting a pull request through GitHub. Please see [CONTRIBUTING.md](CONTRIBUTING.md) for more details.

- [Stack Overflow](http://stackoverflow.com/questions/tagged/google-play-games)
- [Android Tools Feedbacks](http://tools.android.com/feedback)


License
-------
Copyright 2015 Google, Inc.

Licensed to the Apache Software Foundation (ASF) under one or more contributor
license agreements.  See the NOTICE file distributed with this work for
additional information regarding copyright ownership.  The ASF licenses this
file to you under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License.  You may obtain a copy of
the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
License for the specific language governing permissions and limitations under
the License.

```

`samples-android/CollectAllTheStarsNative/CMakeLists.txt`:

```txt
# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##

# For more information about using CMake with Android Studio, read the
# documentation: https://d.android.com/studio/projects/add-native-code.html

# Sets the minimum version of CMake required to build the native library.

cmake_minimum_required(VERSION 3.4.1)

add_library(gpg_sdk STATIC IMPORTED)
set_target_properties(gpg_sdk PROPERTIES IMPORTED_LOCATION
    ${GPG_SDK_PATH}/lib/c++/${ANDROID_ABI}/libgpg.a)

# build native_app_glue as a static lib
add_library(native_app_glue STATIC
    ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)

# build cpufeatures as a static lib
add_library(cpufeatures STATIC
             ${ANDROID_NDK}/sources/android/cpufeatures/cpu-features.c)

#include the native part of JUI Helper
add_subdirectory (${JUI_HELPER_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}/libjuihelper")

#include the native part of NDKHelper
add_subdirectory (${NDK_HELPER_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}/libndkhelper")

#JSON library
add_library(json STATIC
    ${JSON_PATH}/src/lib_json/json_writer.cpp
 ${JSON_PATH}/src/lib_json/json_reader.cpp
 ${JSON_PATH}/src/lib_json/json_value.cpp
 )
 target_include_directories(json PRIVATE
      ${JSON_PATH}/include
      )

# Export ANativeActivity_onCreate(), 
# Refer to: https://github.com/android-ndk/ndk/issues/381.
set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -u ANativeActivity_onCreate")

# Creates and names a library, sets it as either STATIC
# or SHARED, and provides the relative paths to its source code.
# You can define multiple libraries, and CMake builds them for you.
# Gradle automatically packages shared libraries with your APK.

add_library( # Sets the name of the library.
             CollectAllTheStarsNativeActivity

             # Sets the library as a shared library.
             SHARED
             # Provides a relative path to your source file(s).
            src/main/cpp/CollectAllTheStarsNativeActivity.cpp
            src/main/cpp/CollectAllTheStarsNativeActivity_Engine.cpp
            ${TEAPOT_RENDERER_PATH}/TeapotRenderer.cpp
           )

target_include_directories(CollectAllTheStarsNativeActivity PRIVATE
     ${ANDROID_NDK}/sources/android/native_app_glue
     ${ANDROID_NDK}/sources/android/cpufeatures
     ${GPG_SDK_PATH}/include
     ${JSON_PATH}/include
     ${juihelper_SOURCE_DIR}/src/main/cpp
     ${ndkhelper_SOURCE_DIR}/src/main/cpp
     ${TEAPOT_RENDERER_PATH}
)

# Specifies libraries CMake should link to your target library. You
# can link multiple libraries, such as libraries you define in this
# build script, prebuilt third-party libraries, or system libraries.

target_link_libraries( # Specifies the target library.
                       CollectAllTheStarsNativeActivity
                       gpg_sdk
                        native_app_glue
                        cpufeatures
                        juihelper
                        ndkhelper
                        json
                        log
                        android
                        EGL
                        GLESv2
                        z)

```

`samples-android/CollectAllTheStarsNative/README.md`:

```md
Google Play game services - CollectAllTheStarsNative C++ Samples
===========================================
Copyright (C) 2013 Google Inc.

<h2>Contents</h2>

CollectAllTheStarsNative: The sample demonstrates how to use Snapshot feature with C++ code with Google Play game services native SDK.

<h2>How to run a sample</h2>

1. Set up the project in Developer Console. For more info:

      https://developers.google.com/games/services/console/enabling
 
   Note your package name and the APP ID of the project.

1. Enable  Turn-based multiplayer setting in Saved Games
   (see the ones that the sample needs in its res/values/ids.xml)

<h3>Modify IDs, compile and run</h3>
1. In Android Studio toolbar, select CollectAllTheStars confituration to be the active project
1. In build.gradle(Module:collectAlltheStars), change applicationId to be your own package name
   (the same one you registered in Developer Console!).
1. Modify res/values/strings.xml and place your game ID there, as assigned by the
   Play Developer Console (create the leaderboards and achievements necessary for
   the sample, if any). Remember that the App ID is only the *numerical* portion
   of your client ID, so use `123456789012` and not `123456789012.apps.gooogleusercontent.com`.
1. Compile and run.

IMPORTANT: make sure to sign your apk with the same certificate
as the one whose fingerprint you configured on Developer Console, otherwise
you will see errors.

IMPORTANT: if you are testing an unpublished game, make sure that the account you intend
to sign in with (the account on the test device) is listed as a tester in the
project on your Developer Console setup (check the list in the "Testing"
section), otherwise the server will act as though your project did not exist and
return errors.

<h2>Support</h2>

First of all, take a look at our [troubleshooting guide](https://developers.google.com/games/services/android/troubleshooting). Most setup issues can be solved by following this guide.

If your question is not answered by the troubleshooting guide, we encourage you to post your question to [stackoverflow.com](stackoverflow.com). Our team answers questions there reguarly.

```

`samples-android/CollectAllTheStarsNative/build.gradle`:

```gradle
/*
 * Copyright 2017 (C) Google LLC
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

apply plugin: 'com.android.application'

android {
    compileSdkVersion 27
    defaultConfig {
        //
        //  REPLACE THE APPLICATION ID with your bundle ID
        //
        applicationId "com.google.example.games.ReplaceMe"
        versionCode 1
        versionName "1.0"

        minSdkVersion 14
        targetSdkVersion 27

        ndk.abiFilters 'x86', 'armeabi-v7a', 'arm64-v8a'

        externalNativeBuild {
            cmake {
                cppFlags "-std=c++11 -frtti -Wall -Werror"
                arguments "-DJUI_HELPER_PATH=${project(':Common:JuiHelper').projectDir}" ,
                        "-DNDK_HELPER_PATH=${project(':Common:NDKHelper').projectDir}" ,
                        "-DGPG_SDK_PATH=${project(':Common:gpg-sdk').projectDir}/gpg-cpp-sdk/android",
                        "-DJSON_PATH=${project(':Common:gpg-sdk').projectDir}/../external/jsoncpp/",
                        "-DTEAPOT_RENDERER_PATH=${project(':Common').projectDir}/TeapotRenderer" ,
                        "-DANDROID_STL=c++_static",
                        "-DANDROID_TOOLCHAIN=clang"
            }

        }
    }

    externalNativeBuild {
            cmake.path "CMakeLists.txt"
    }
}

dependencies {
    implementation project(":Common:JuiHelper")
    implementation 'com.google.android.gms:play-services-games:11.8.0'
    implementation 'com.google.android.gms:play-services-nearby:11.8.0'
    implementation 'com.android.support:support-v4:27.0.2'
}

```

`samples-android/CollectAllTheStarsNative/proguard-project.txt`:

```txt
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

```

`samples-android/CollectAllTheStarsNative/src/main/AndroidManifest.xml`:

```xml
<!--
     Copyright 2018 Google LLC

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          package="com.google.example.games.cats">

    <uses-feature android:glEsVersion="0x00020000"/>

    <application
        android:name="com.google.example.games.cats.CollectAllTheStarsApplication"
        android:allowBackup="false"
        android:hasCode="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        tools:ignore="GoogleAppIndexingWarning">
        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />
        <meta-data
            android:name="com.google.android.gms.games.APP_ID"
            android:value="@string/app_id" />

        <!--
             Our activity is the built-in NativeActivity framework class.
             This will take care of integrating with our NDK code.
        -->
        <activity
            android:name="com.google.example.games.cats.CollectAllTheStarsNativeActivity"
            android:label="@string/app_name"
            android:configChanges="orientation"
            android:screenOrientation="portrait">

            <!-- Tell NativeActivity the name of or .so -->
            <meta-data
                android:name="android.app.lib_name"
                android:value="CollectAllTheStarsNativeActivity" />

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>
```

`samples-android/CollectAllTheStarsNative/src/main/assets/Shaders/ShaderPlain.fsh`:

```fsh

//
//  ShaderPlain.fsh
//

#define USE_PHONG (1)

uniform lowp vec3 vMaterialAmbient;
uniform mediump vec4 vMaterialSpecular;

varying lowp vec4 colorDiffuse;

#if USE_PHONG
uniform highp vec3 vLight0;
varying mediump vec3 position;
varying mediump vec3 normal;
#else
varying lowp vec4 colorSpecular;
#endif

/*
    Standard phong fragment shader implementation.
    Take object space light position and normal, derive a specular intensity.
*/
void main() {
#if USE_PHONG
  mediump vec3
  halfVector = normalize(-vLight0 + position);
  mediump
  float NdotH = max(dot(normalize(normal), halfVector), 0.0);
  mediump
  float fPower = vMaterialSpecular.w;
  mediump
  float specular = pow(NdotH, fPower);

  lowp vec4
  colorSpecular = vec4(vMaterialSpecular.xyz * specular, 1);
  gl_FragColor = colorDiffuse + colorSpecular;
#else
  gl_FragColor = colorDiffuse + colorSpecular;
#endif
}
```

`samples-android/CollectAllTheStarsNative/src/main/assets/Shaders/VS_ShaderPlain.vsh`:

```vsh
//
//  ShaderPlain.vsh
//

#define USE_PHONG (1)

attribute highp vec3 myVertex;
attribute highp vec3 myNormal;
attribute mediump vec2 myUV;
attribute mediump vec4 myBone;

varying mediump vec2 texCoord;
varying lowp vec4 colorDiffuse;

#if USE_PHONG
varying mediump vec3 position;
varying mediump vec3 normal;
#else
varying lowp vec4 colorSpecular;
#endif

uniform highp mat4 uMVMatrix;
uniform highp mat4 uPMatrix;

uniform highp vec3 vLight0;

uniform lowp vec4 vMaterialDiffuse;
uniform lowp vec3 vMaterialAmbient;
uniform lowp vec4 vMaterialSpecular;

/*
    Standard vertex shader shader implementation.
    Transform vertices and normal,
    derive diffuse value and pass object space light source
    position to fragment shader for phong shading.
*/
void main(void) {
  highp vec4
  p = vec4(myVertex, 1);
  gl_Position = uPMatrix * p;

  texCoord = myUV;

  highp vec3
  worldNormal = vec3(
      mat3(uMVMatrix[0].xyz, uMVMatrix[1].xyz, uMVMatrix[2].xyz) * myNormal);
  highp vec3
  ecPosition = p.xyz;

  colorDiffuse = dot(worldNormal, normalize(-vLight0 + ecPosition))
      * vMaterialDiffuse + vec4(vMaterialAmbient, 1);

#if USE_PHONG
  normal = worldNormal;
  position = ecPosition;
#else
  highp vec3 halfVector = normalize(ecPosition - vLight0);

  highp float NdotH = max(-dot(worldNormal, halfVector), 0.0);
  float fPower = vMaterialSpecular.w;
  highp float specular = min( pow(NdotH, fPower), 1.0);
  colorSpecular = vec4(vMaterialSpecular.xyz * specular, 1);
#endif
}

```

`samples-android/CollectAllTheStarsNative/src/main/cpp/CollectAllTheStarsNativeActivity.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * Include files
 */
#include "CollectAllTheStarsNativeActivity.h"

/*
 * Key for JSON object
 */
const char *JSON_VERSION = "1.1";
const char *JSON_KEY_VERSION = "version";
const char *JSON_KEY_LEVELS = "levels";

/*
 * Initialize GooglePlayGameServices
 */
void Engine::InitGooglePlayGameServices() {
  gpg::AndroidInitialization::android_main(app_);

  if (service_ == nullptr) {
    // Game Services have not been initialized, create a new Game Services.
    gpg::AndroidPlatformConfiguration platform_configuration;
    platform_configuration.SetActivity(app_->activity->clazz);

    gpg::GameServices::Builder builder;

    service_ = builder.SetOnAuthActionStarted([this](gpg::AuthOperation op) {
      OnAuthActionStarted(op);
    })
        .SetOnAuthActionFinished(
            [this](gpg::AuthOperation op, gpg::AuthStatus status) {
      OnAuthActionFinished(op, status);
    })
        .EnableSnapshots(). //Enable Snapshot
        Create(platform_configuration);
  }
}

/*
 * Callback: Authentication started
 */
void Engine::OnAuthActionStarted(gpg::AuthOperation op) {
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this, op]() {
    EnableUI(false);
    authorizing_ = true;
    if (status_text_) {
      if (op == gpg::AuthOperation::SIGN_IN) {
        LOGI("Signing in to GPG");
        status_text_->SetAttribute("Text", "Signing In...");
      } else {
        LOGI("Signing out from GPG");
        status_text_->SetAttribute("Text", "Signing Out...");
      }
    }
  });
}

/*
 * Callback: Authentication finishes
 */
void Engine::OnAuthActionFinished(gpg::AuthOperation op,
                                  gpg::AuthStatus status) {
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this, status]() {
    EnableUI(true);
    authorizing_ = false;
    if (button_sign_in_) {
      button_sign_in_->SetAttribute(
          "Text", gpg::IsSuccess(status) ? "Sign Out" : "Sign In");
    }

    if (status_text_) {
      status_text_->SetAttribute(
          "Text",
          gpg::IsSuccess(status) ? "Signed In" : "Signed Out");
    }
  });
}

/*
 * Show snapshot select UI
 */
void Engine::ShowSnapshotSelectUI() {
  service_->Snapshots().ShowSelectUIOperation(
      ALLOW_CREATE_SNAPSHOT_INUI,
      ALLOW_DELETE_SNAPSHOT_INUI,
      MAX_SNAPSHOTS,
      SNAPSHOT_UI_TITLE,
      [this](gpg::SnapshotManager::SnapshotSelectUIResponse const & response) {
    LOGI("Snapshot selected");
    if (IsSuccess(response.status)) {
      if (response.data.Valid()) {
        LOGI("Description: %s", response.data.Description().c_str());
        LOGI("FileName %s", response.data.FileName().c_str());

        //Opening the snapshot data
        current_snapshot_ = response.data;
        LoadFromSnapshot();
      } else {
        LOGI("Creating new snapshot");
        SaveSnapshot();
      }
    } else {
      LOGI("ShowSelectUIOperation returns an error %d", response.status);
      EnableUI(true);
    }
  });
}

/*
 * Save Snapshot
 */
void Engine::SaveSnapshot() {
  EnableUI(false);
  std::string fileName;
  if (!current_snapshot_.Valid()) {
    fileName = GenerateSaveFileName();
    LOGI("Creating new snapshot %s", fileName.c_str());
  } else {
    fileName = current_snapshot_.FileName();
  }

  service_->Snapshots().Open(
      fileName,
      gpg::SnapshotConflictPolicy::MANUAL,
      [this](gpg::SnapshotManager::OpenResponse const & response) {
    LOGI("Opened file");
    if (IsSuccess(response.status)) {
      gpg::SnapshotMetadata metadata = response.data;
      if (response.conflict_id != "") {
        //Conflict detected
        LOGI("Snapshot conflict detected going to resolve that");
        bool b = ResolveConflicts(response, 0);
        if (!b) {
          LOGI("Failed resolving conflicts");
          EnableUI(true);
          return;
        }
      }

      //Create image to represent the snapshot
      //Reading png from asset for now
      std::vector<uint8_t> pngData;
      if (!ndk_helper::JNIHelper::GetInstance()->ReadFile("gps.png",
                                                          &pngData)) {
        LOGI("Can not open a file:%s", "gps.png");
        EnableUI(true);
        return;
      }

      gpg::SnapshotMetadataChange::Builder builder;
      gpg::SnapshotMetadataChange metadata_change =
          builder.SetDescription("CollectAllTheStar savedata ")
              .SetCoverImageFromPngData(pngData).Create();
      // Save the snapshot.
      gpg::SnapshotManager::CommitResponse commitResponse =
          service_->Snapshots()
              .CommitBlocking(metadata, metadata_change, SetupSnapshotData());

      if (IsSuccess(commitResponse.status)) {
        LOGI("Saved game");
      } else {
        LOGI("Saved game failed error: %d", commitResponse.status);
      }
    }
    EnableUI(true);
  });
}

bool
Engine::ResolveConflicts(gpg::SnapshotManager::OpenResponse const &originalResponse,
                         const int32_t retry) {
  if (originalResponse.conflict_id == "") {
    LOGI("No conflict detected");
    return true;
  }
  //
  // Note: Expecting ResolveConflicts() is called within callback, we are using
  // blocking read here
  //
  gpg::SnapshotManager &manager = service_->Snapshots();
  gpg::SnapshotManager::OpenResponse responseBase =
      manager.OpenBlocking(originalResponse.conflict_original.FileName(),
                           gpg::SnapshotConflictPolicy::MANUAL);
  gpg::SnapshotManager::ReadResponse responseReadBase =
      manager.ReadBlocking(responseBase.conflict_original);
  ParseSnapshotData(responseReadBase.data);

  // Temporary store data,
  int32_t temp_scores[NUM_GAME_WORLD][NUM_GAME_STAGES]; //960 bytes
  for (int32_t i = 0; i < NUM_GAME_WORLD; ++i)
    for (int32_t j = 0; j < NUM_GAME_STAGES; ++j) {
      temp_scores[i][j] = scores_[i][j];
    }

  gpg::SnapshotManager::OpenResponse responseRemote =
      manager.OpenBlocking(originalResponse.conflict_unmerged.FileName(),
                           gpg::SnapshotConflictPolicy::MANUAL);
  gpg::SnapshotManager::ReadResponse responseReadRemote =
      manager.ReadBlocking(responseRemote.conflict_unmerged);
  ParseSnapshotData(responseReadRemote.data);

  // Merging them
  for (int32_t i = 0; i < NUM_GAME_WORLD; ++i)
    for (int32_t j = 0; j < NUM_GAME_STAGES; ++j) {
      if (temp_scores[i][j] > scores_[i][j])
        scores_[i][j] = temp_scores[i][j];
    }

  //Create image to represent the snapshot
  //Reading png from asset for now
  std::vector<uint8_t> pngData;
  if (!ndk_helper::JNIHelper::GetInstance()->ReadFile("gps.png", &pngData)) {
    LOGI("Can not open a file:%s", "gps.png");
    return false;
  }

  gpg::SnapshotMetadataChange::Builder builder;
  gpg::SnapshotMetadataChange metadata_change =
      builder.SetDescription("CollectAllTheStar savedata ")
          .SetCoverImageFromPngData(pngData).Create();

  //Resolve conflict
  gpg::SnapshotManager::OpenResponse openResponse =
      manager.ResolveConflictBlocking(originalResponse.conflict_id,
                                      originalResponse.data, metadata_change,
                                      SetupSnapshotData());


  if (IsSuccess(openResponse.status)) {
    LOGI("Conflict resolution succeeded");
  } else {
    LOGI("Conflict resolution failed error: %d", openResponse.status);
  }

  //Try to re-open,
  gpg::SnapshotManager::OpenResponse retryResponse =
      manager.OpenBlocking(current_snapshot_.FileName(),
                         gpg::SnapshotConflictPolicy::MANUAL);
  if (IsSuccess(retryResponse.status)) {
    if (retryResponse.conflict_id != "") {
      if (retry > MAX_RETRY)
        return false;
      LOGI("Need conflict resolution again..");
      return ResolveConflicts(retryResponse, retry + 1);
    }
  }

  return true;
}

/*
 * Load snapshot data
 */
void Engine::LoadFromSnapshot() {
  if (!current_snapshot_.Valid()) {
    LOGI("Snapshot is not valid!");
    EnableUI(true);
    return;
  }
  LOGI("Opening file");
  service_->Snapshots()
      .Open(current_snapshot_.FileName(),
            gpg::SnapshotConflictPolicy::MANUAL,
            [this](gpg::SnapshotManager::OpenResponse const & response) {
    LOGI("Opened file");
    if (IsSuccess(response.status)) {
      //Do need conflict resolution?
      if (!response.data.Valid()) {
        if (response.conflict_id != "") {
          LOGI("Need conflict resolution");
          bool b = ResolveConflicts(response, 0);
          if (!b) {
            LOGI("Failed resolving conflicts");
            EnableUI(true);
            return;
          }
        } else {
          EnableUI(true);
          return;
        }
      }

      LOGI("Reading file");
      gpg::SnapshotManager::ReadResponse responseRead =
          service_->Snapshots().ReadBlocking(response.data);
      if (IsSuccess(responseRead.status)) {
        LOGI("Parsing data");
        ParseSnapshotData(responseRead.data);
        ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this]() {
          UpdateGameUI();
        });
      }
    }

    EnableUI(true);
  });
}

/*
 * Parse JSON match data
 */
void Engine::ParseSnapshotData(const std::vector<uint8_t> &data) {
  LOGI("Parsing snapshot data");
  if (data.size() == 0) {
    LOGI("Game data not found");
    return;
  }

  std::string str(data.begin(), data.end());
  LOGI("Data: %s", str.c_str());

  Json::Value root;
  Json::Reader reader;
  bool parsingSuccessful = reader.parse(str, root);
  if (!parsingSuccessful) {
    LOGI("Data parse error");
    return;
  }

  std::string version = root[JSON_KEY_VERSION].asString();
  if (version != JSON_VERSION) {
    LOGI("Data version mismatch");
    return;
  }

  //Reset existing data
  for (int32_t i = 0; i < NUM_GAME_WORLD; ++i)
    for (int32_t j = 0; j < NUM_GAME_STAGES; ++j)
      scores_[i][j] = 0;

  //Level data
  const Json::Value levels = root[JSON_KEY_LEVELS];
  Json::ValueIterator it = levels.begin();
  Json::ValueIterator itEnd = levels.end();
  while (it != itEnd) {
    std::string stage = it.key().asString();
    int32_t score = (*it).asInt();
    LOGI("stage:%s score:%d", stage.c_str(), score);

    if (map_scores_.find(stage) != map_scores_.end())
      *map_scores_[stage] = score;
    ++it;
  }
}

/*
 * Create JSON data to store
 */
std::vector<uint8_t> Engine::SetupSnapshotData() {
  Json::StyledWriter writer;
  Json::Value root;

  root[JSON_KEY_VERSION] = JSON_VERSION;
  std::string strKey = std::string(JSON_KEY_LEVELS);
  for (int32_t i = 0; i < NUM_GAME_WORLD; ++i)
    for (int32_t j = 0; j < NUM_GAME_STAGES; ++j) {
      if (scores_[i][j]) {
        std::ostringstream str;
        str << i + 1 << "-" << j + 1;
        root[strKey][str.str()] = scores_[i][j];
      }
    }

  std::string source = writer.write(root);

  std::vector<uint8_t> v;
  auto it = source.begin();
  auto end = source.end();
  while (it != end) {
    uint8_t i = static_cast<uint8_t>(*it++);
    v.push_back(i);
  }

  LOGI("Created Game Data: size: %d", static_cast<int>(v.size()));
  return v;
}

/*
 * Generate a unique filename
 */
std::string Engine::GenerateSaveFileName() {
  // Generates random filename
  timeval Time;
  gettimeofday(&Time, NULL);

  std::ostringstream str;
  str << "snapshotTemp-" << Time.tv_usec;

  return str.str();
}

/*
 * Update gameUI
 */
void Engine::UpdateGameUI() {
  for (int32_t i = 0; i < NUM_GAME_STAGES; ++i) {
    std::ostringstream str;
    str << current_world_ + 1 << "-" << i + 1 << "\n";
    int32_t j = 0;
    for (; j < scores_[current_world_][i]; ++j)
      str << "★";
    for (; j < MAX_STARS; ++j)
      str << "☆";

    button_games_[i]->SetAttribute("Text", str.str().c_str());
  }

  std::ostringstream str;
  str << "World " << current_world_ + 1;
  labelWorld_->SetAttribute("Text", str.str().c_str());
}

jui_helper::JUIButton *Engine::CreateButton(int32_t i) {
  jui_helper::JUIButton *button =
      new jui_helper::JUIButton("1-1\n☆☆☆☆☆");
  button->SetAttribute("TextSize", jui_helper::ATTRIBUTE_UNIT_SP, 12.f);
  button->SetCallback(
      [this, i](jui_helper::JUIView * view, const int32_t message) {
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      //Update game data
      scores_[current_world_][i] =
          (scores_[current_world_][i] + 1) % (MAX_STARS + 1);
      UpdateGameUI();
    }
  });
  return button;
}

/*
 * Initialize main sample UI,
 * invoking jui_helper functions to create java UIs
 */
void Engine::InitUI() {
  const int32_t buttonWidth = 600;
    // Show toast with app label
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([]() {
    jui_helper::JUIToast toast(
        ndk_helper::JNIHelper::GetInstance()->GetAppLabel());
    toast.Show();
  });

  // The window initialization
  jui_helper::JUIWindow::Init(app_->activity, JUIHELPER_CLASS_NAME);

  //
  // Buttons
  //
  // Setting up game UI
  int32_t index = 0;
  jui_helper::JUILinearLayout *masterLayout = new jui_helper::JUILinearLayout();
  masterLayout->SetAttribute("Orientation",
                             jui_helper::LAYOUT_ORIENTATION_VERTICAL);
  masterLayout->SetAttribute("Gravity",
                             jui_helper::ATTRIBUTE_GRAVITY_CENTER_VERTICAL);
  masterLayout->SetLayoutParams(jui_helper::ATTRIBUTE_SIZE_MATCH_PARENT,
                                jui_helper::ATTRIBUTE_SIZE_WRAP_CONTENT);

  //Select stage
  jui_helper::JUILinearLayout *layout = new jui_helper::JUILinearLayout();
  layout->SetLayoutParams(jui_helper::ATTRIBUTE_SIZE_MATCH_PARENT,
                          jui_helper::ATTRIBUTE_SIZE_WRAP_CONTENT);
  layout->SetMargins(0, 50, 0, 50);
  layout->SetAttribute("Orientation",
                       jui_helper::LAYOUT_ORIENTATION_HORIZONTAL);
  layout->SetAttribute("Gravity", jui_helper::ATTRIBUTE_GRAVITY_CENTER);
  buttonLeft_ = new jui_helper::JUIButton("<<");
  buttonRight_ = new jui_helper::JUIButton(">>");
  labelWorld_ = new jui_helper::JUITextView("Stage 1");
  buttonLeft_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      //Change game world
      if (current_world_ > 0) {
        current_world_--;
        UpdateGameUI();
      }
    }
  });
  buttonRight_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      //Change game world
      if (current_world_ < NUM_GAME_WORLD - 1) {
        current_world_++;
        UpdateGameUI();
      }
    }
  });

  layout->AddView(buttonLeft_);
  layout->AddView(labelWorld_);
  layout->AddView(buttonRight_);
  masterLayout->AddView(layout);

  for (int32_t i = 0; i < 4; ++i) {
    button_games_[index + 0] = CreateButton(index + 0);
    button_games_[index + 1] = CreateButton(index + 1);
    button_games_[index + 2] = CreateButton(index + 2);

    //Center element
    button_games_[index + 1]
        ->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                  jui_helper::LAYOUT_PARAMETER_TRUE);
    button_games_[index + 1]->SetMargins(50, 50, 50, 50);

    jui_helper::JUILinearLayout *layout2 = new jui_helper::JUILinearLayout();
    layout2->SetLayoutParams(jui_helper::ATTRIBUTE_SIZE_MATCH_PARENT,
                            jui_helper::ATTRIBUTE_SIZE_WRAP_CONTENT);
    layout2->SetMargins(0, 50, 0, 50);
    layout2->SetAttribute("Orientation",
                         jui_helper::LAYOUT_ORIENTATION_HORIZONTAL);
    layout2->SetAttribute("Gravity", jui_helper::ATTRIBUTE_GRAVITY_CENTER);
    layout2->AddView(button_games_[index + 0]);
    layout2->AddView(button_games_[index + 1]);
    layout2->AddView(button_games_[index + 2]);
    masterLayout->AddView(layout2);

    index += 3;
  }
  jui_helper::JUIWindow::GetInstance()->AddView(masterLayout);

  status_text_ = new jui_helper::JUITextView(
      service_->IsAuthorized() ? "Signed In." : "Signed Out.");

  status_text_->AddRule(jui_helper::LAYOUT_PARAMETER_ALIGN_PARENT_BOTTOM,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  status_text_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  jui_helper::JUIWindow::GetInstance()->AddView(status_text_);

  // Sign in button.
  button_sign_in_ = new jui_helper::JUIButton(
      service_->IsAuthorized() ? "Sign Out" : "Sign In");
  button_sign_in_->AddRule(jui_helper::LAYOUT_PARAMETER_ABOVE, status_text_);
  button_sign_in_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                           jui_helper::LAYOUT_PARAMETER_TRUE);
  button_sign_in_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    LOGI("button_sign_in_ click: %d", message);
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      if (service_->IsAuthorized()) {
        service_->SignOut();
      } else {
        service_->StartAuthorizationUI();
      }
    }
  });
  button_sign_in_->SetAttribute("MinimumWidth", buttonWidth);
  button_sign_in_->SetMargins(0, 50, 0, 0);

  // Select button.
  button_select_ = new jui_helper::JUIButton("Select");
  button_select_->AddRule(jui_helper::LAYOUT_PARAMETER_ABOVE, button_sign_in_);
  button_select_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                          jui_helper::LAYOUT_PARAMETER_TRUE);
  button_select_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    LOGI("button_select_ click: %d", message);
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      EnableUI(false);
      ShowSnapshotSelectUI();
    }
  });
  button_select_->SetAttribute("MinimumWidth", buttonWidth);

  // Save button.
  button_save_ = new jui_helper::JUIButton("Save");
  button_save_->AddRule(jui_helper::LAYOUT_PARAMETER_ABOVE, button_select_);
  button_save_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  button_save_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    LOGI("button_save_ click: %d", message);
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      //Save snapshot
      SaveSnapshot();
    }
  });
  button_save_->SetAttribute("MinimumWidth", buttonWidth);

  // Load button.
  button_load_ = new jui_helper::JUIButton("Load");
  button_load_->AddRule(jui_helper::LAYOUT_PARAMETER_ABOVE, button_save_);
  button_load_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  button_load_->SetCallback(
      [this](jui_helper::JUIView * view, const int32_t message) {
    LOGI("button_load_ click: %d", message);
    if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
      EnableUI(false);
      LoadFromSnapshot();
    }
  });
  button_load_->SetAttribute("MinimumWidth", buttonWidth);

  jui_helper::JUIWindow::GetInstance()->AddView(button_sign_in_);
  jui_helper::JUIWindow::GetInstance()->AddView(button_select_);
  jui_helper::JUIWindow::GetInstance()->AddView(button_save_);
  jui_helper::JUIWindow::GetInstance()->AddView(button_load_);

  textViewFPS_ = new jui_helper::JUITextView("0.0FPS");
  textViewFPS_->SetAttribute("Gravity", jui_helper::ATTRIBUTE_GRAVITY_LEFT);
  textViewFPS_->SetAttribute("TextColor", 0xffffffff);
  textViewFPS_->SetAttribute("TextSize", jui_helper::ATTRIBUTE_UNIT_SP, 18.f);
  textViewFPS_->SetAttribute("Padding", 10, 10, 10, 10);
  jui_helper::JUIWindow::GetInstance()->AddView(textViewFPS_);

  // Progress bar
  progressBar_ = new jui_helper::JUIProgressBar();
  progressBar_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  jui_helper::JUIWindow::GetInstance()->AddView(progressBar_);
  progressBar_->SetAttribute("Hidden", true);

  //Update game ui
  UpdateGameUI();

  if (authorizing_)
    EnableUI(false);
  return;
}

void Engine::EnableUI(bool enable) {
  LOGI("Updating UI:%d", enable);
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this, enable]() {
    button_sign_in_->SetAttribute("Enabled", enable);

    bool b = enable;
    if (service_->IsAuthorized() == false)
      b = false;
    button_select_->SetAttribute("Enabled", b);
    if (current_snapshot_.Valid())
      button_load_->SetAttribute("Enabled", b);
    else
      button_load_->SetAttribute("Enabled", false);
    button_save_->SetAttribute("Enabled", b);

    //Enable/Disable Game UI
    buttonLeft_->SetAttribute("Enabled", enable);
    buttonRight_->SetAttribute("Enabled", enable);
    for (int32_t i = 0; i < NUM_GAME_STAGES; ++i) {
      button_games_[i]->SetAttribute("Enabled", enable);
    }

    // Show progress bar?
    if (enable)
      progressBar_->SetAttribute(
          "Visibility", jui_helper::ViewVisibility::VIEW_VISIVILITY_GONE);
    else
      progressBar_->SetAttribute(
          "Visibility", jui_helper::ViewVisibility::VIEW_VISIVILITY_VISIBLE);
  });
}

/*
 * JNI functions those manage activity lifecycle
 */
extern "C" {
/*
 * These callbacks are necessary to work Google Play Game Services UIs properly
 *
 * For apps which target Android 2.3 or 3.x devices (API Version prior to 14),
 * Play Game Services has no way to automatically receive Activity lifecycle
 * callbacks. In these cases, Play Game Services relies on the owning Activity
 * to notify it of lifecycle events. Any Activity which owns a GameServices
 * object should call the AndroidSupport::* functions from within their own
 * lifecycle callback functions. The arguments in these functions match those
 * provided by Android, so no additional processing is necessary.
 */
JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityResult(
    JNIEnv *env, jobject thiz, jobject activity, jint requestCode,
    jint resultCode, jobject data) {
  gpg::AndroidSupport::OnActivityResult(env, activity, requestCode, resultCode,
                                        data);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityCreated(
    JNIEnv *env, jobject thiz, jobject activity, jobject saved_instance_state) {
  gpg::AndroidSupport::OnActivityCreated(env, activity, saved_instance_state);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityDestroyed(
    JNIEnv *env, jobject thiz, jobject activity) {
  gpg::AndroidSupport::OnActivityDestroyed(env, activity);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityPaused(
    JNIEnv *env, jobject thiz, jobject activity) {
  gpg::AndroidSupport::OnActivityPaused(env, activity);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityResumed(
    JNIEnv *env, jobject thiz, jobject activity) {
  gpg::AndroidSupport::OnActivityResumed(env, activity);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivitySaveInstanceState(
    JNIEnv *env, jobject thiz, jobject activity, jobject out_state) {
  gpg::AndroidSupport::OnActivitySaveInstanceState(env, activity, out_state);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityStarted(
    JNIEnv *env, jobject thiz, jobject activity) {
  gpg::AndroidSupport::OnActivityStarted(env, activity);
}

JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_nativeOnActivityStopped(
    JNIEnv *env, jobject thiz, jobject activity) {
  gpg::AndroidSupport::OnActivityStopped(env, activity);
}

}

```

`samples-android/CollectAllTheStarsNative/src/main/cpp/CollectAllTheStarsNativeActivity.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef TBMPSLEKETONNATIVIACTIVITY_H_
#define TBMPSLEKETONNATIVIACTIVITY_H_

/*
 * Include files
 */
#include <jni.h>
#include <errno.h>

#include <android/log.h>
#include <android_native_app_glue.h>
#include <android/native_window_jni.h>
#include <cpu-features.h>
#include <sstream>
#include <algorithm>
#include <map>

// For GPGS
#include "gpg/gpg.h"

// For JSON parser
#include "json/json.h"

#include "TeapotRenderer.h"
#include "NDKHelper.h"
#include "JavaUI.h"

/*
 * Preprocessors
 */

// Class name of helper function
#define HELPER_CLASS_NAME "com.sample.helper.NDKHelper"
// Class name of JUIhelper function
#define JUIHELPER_CLASS_NAME "com.sample.helper.JUIHelper"
// Share object name of helper function library
#define HELPER_CLASS_SONAME "CollectAllTheStarsNativeActivity"

//
// Also set "com.google.android.gms.games.APP_ID" in AndrdoiManifest.xml
//

const int32_t MIN_PLAYERS = 1;
const int32_t MAX_PLAYERS = 3;

const int32_t NUM_GAME_STAGES = 12;
const int32_t NUM_GAME_WORLD = 20;
const int32_t MAX_STARS = 5;

// Snapshot related
const int32_t MAX_RETRY = 5;
const int32_t MAX_SNAPSHOTS = 3;
const bool ALLOW_CREATE_SNAPSHOT_INUI = true;
const bool ALLOW_DELETE_SNAPSHOT_INUI = true;
const char* const SNAPSHOT_UI_TITLE = "Collect All The Stars";

/*
 * Engine class of the sample
 */
struct android_app;
class Engine {
public:
  // GPG related methods
  void InitGooglePlayGameServices();
  void ShowSnapshotSelectUI();
  void LoadFromSnapshot();
  void SaveSnapshot();
  bool ResolveConflicts(gpg::SnapshotManager::OpenResponse const &originalResponse,
                        const int32_t retry);

  // Event handling
  static void HandleCmd(struct android_app *app, int32_t cmd);
  static int32_t HandleInput(android_app *app, AInputEvent *event);
  void UpdatePosition(AInputEvent *event, int32_t iIndex, float &fX, float &fY);

  // Engine life cycles
  Engine();
  ~Engine();
  void SetState(android_app *state);
  int InitDisplay(const int32_t cmd);
  void LoadResources();
  void UnloadResources();
  void DrawFrame();
  void TermDisplay(const int32_t cmd);
  void TrimMemory();
  bool IsReady();

  // Sensor managers
  void ProcessSensors(const int32_t id) { sensroManager_.Process(id); }
  void ResumeSensors() { sensroManager_.Resume(); }
  void SuspendSensors() { sensroManager_.Suspend(); }

private:
  // Callbacks from GPG.
  void OnAuthActionStarted(gpg::AuthOperation op);
  void OnAuthActionFinished(gpg::AuthOperation op, gpg::AuthStatus status);

  void ParseSnapshotData(const std::vector<uint8_t> &data);
  std::vector<uint8_t> SetupSnapshotData();

  // Misc methods
  void EnableUI(bool enable);
  void InitUI();
  void TransformPosition(ndk_helper::Vec2 &vec);
  void UpdateFPS(float fFPS);

  void UpdateGameUI();

  jui_helper::JUIButton *CreateButton(int32_t i);
  std::string GenerateSaveFileName();

  // GPG related Members
  std::unique_ptr<gpg::GameServices> service_;
  gpg::SnapshotMetadata current_snapshot_;

  // Game data
  int32_t current_world_;
  int32_t scores_[NUM_GAME_WORLD][NUM_GAME_STAGES];
  std::map<std::string, int32_t *> map_scores_;

  bool authorizing_;
  // Renderer of a teapot
  TeapotRenderer renderer_;

  // GLContext instance
  ndk_helper::GLContext *gl_context_;

  // Sensor manager
  ndk_helper::SensorManager sensroManager_;

  bool initialized_resources_;
  bool has_focus_;

  // Helpers for touch control
  ndk_helper::DoubletapDetector doubletap_detector_;
  ndk_helper::PinchDetector pinch_detector_;
  ndk_helper::DragDetector drag_detector_;
  ndk_helper::PerfMonitor monitor_;
  ndk_helper::TapCamera tap_camera_;

  // JUI text view to show FPS
  jui_helper::JUITextView *textViewFPS_;

  // Native acitivity app instance
  android_app *app_;

  // JUI dialog
  jui_helper::JUIDialog *dialog_;

  jui_helper::JUITextView *labelWorld_;
  jui_helper::JUIButton *button_games_[NUM_GAME_STAGES];

  jui_helper::JUIButton *button_sign_in_;
  jui_helper::JUIButton *button_load_;
  jui_helper::JUIButton *button_save_;
  jui_helper::JUIButton *button_select_;

  jui_helper::JUIButton *buttonLeft_;
  jui_helper::JUIButton *buttonRight_;

  jui_helper::JUITextView *status_text_;

  jui_helper::JUIProgressBar *progressBar_;

};

#endif //TBMPSLEKETONNATIVIACTIVITY_H_

```

`samples-android/CollectAllTheStarsNative/src/main/cpp/CollectAllTheStarsNativeActivity_Engine.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * Include files
 */
#include "CollectAllTheStarsNativeActivity.h"

/*
 * Ctor
 */
Engine::Engine()
    : authorizing_(false), initialized_resources_(false), has_focus_(false),
      textViewFPS_(nullptr), app_(nullptr), dialog_(nullptr),
      labelWorld_(nullptr), button_sign_in_(nullptr), button_load_(nullptr),
      button_save_(nullptr), button_select_(nullptr), status_text_(nullptr) {
  gl_context_ = ndk_helper::GLContext::GetInstance();

  //Init game score
  current_world_ = 0;
  for (int32_t i = 0; i < NUM_GAME_WORLD; ++i)
    for (int32_t j = 0; j < NUM_GAME_STAGES; ++j) {
      scores_[i][j] = 0;

      std::ostringstream str;
      str << i + 1 << "-" << j + 1;
      map_scores_[str.str()] = &scores_[i][j];
    }
}

/*
 * Dtor
 */
Engine::~Engine() {
  jui_helper::JUIWindow::GetInstance()->Close();
  delete dialog_;
}

/**
 * Load resources
 */
void Engine::LoadResources() {
  renderer_.Init();
  renderer_.Bind(&tap_camera_);
}

/**
 * Unload resources
 */
void Engine::UnloadResources() { renderer_.Unload(); }

/**
 * Initialize an EGL context for the current display.
 */
int Engine::InitDisplay(const int32_t cmd) {
  if (!initialized_resources_) {
    gl_context_->Init(app_->window);
    InitUI();
    LoadResources();
    initialized_resources_ = true;
  } else {
    // initialize OpenGL ES and EGL
    if (EGL_SUCCESS != gl_context_->Resume(app_->window)) {
      UnloadResources();
      LoadResources();
    }

    jui_helper::JUIWindow::GetInstance()->Resume(app_->activity, cmd);
  }

  // Enable culling OpenGL state
  glEnable(GL_CULL_FACE);

  // Enabled depth test OpenGL state
  glEnable(GL_DEPTH_TEST);
  glDepthFunc(GL_LEQUAL);

  // Note that screen size might have been changed
  glViewport(0, 0, gl_context_->GetScreenWidth(),
             gl_context_->GetScreenHeight());
  renderer_.UpdateViewport();

  tap_camera_.SetFlip(1.f, -1.f, -1.f);
  tap_camera_.SetPinchTransformFactor(2.f, 2.f, 8.f);

  return 0;
}

/**
 * Just the current frame in the display.
 */
void Engine::DrawFrame() {
  float fFPS;
  if (monitor_.Update(fFPS)) {
    UpdateFPS(fFPS);
  }
  renderer_.Update(monitor_.GetCurrentTime());

  // Just fill the screen with a color.
  glClearColor(0.5f, 0.5f, 0.5f, 1.f);
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  renderer_.Render();

  // Swap
  if (EGL_SUCCESS != gl_context_->Swap()) {
    UnloadResources();
    LoadResources();
  }
}

/**
 * Tear down the EGL context currently associated with the display.
 */
void Engine::TermDisplay(const int32_t cmd) {
  gl_context_->Suspend();
  jui_helper::JUIWindow::GetInstance()->Suspend(cmd);
}

void Engine::TrimMemory() {
  LOGI("Trimming memory");
  gl_context_->Invalidate();
}

/**
 * Process the next input event.
 * In the handler, it passes touch events to gesture detector helper class
 * Based on gesture detection, the app moves camera, model view accordingly
 */
int32_t Engine::HandleInput(android_app *app, AInputEvent *event) {
  Engine *eng = (Engine *)app->userData;
  if (AInputEvent_getType(event) == AINPUT_EVENT_TYPE_MOTION) {
    ndk_helper::GESTURE_STATE doubleTapState =
        eng->doubletap_detector_.Detect(event);
    ndk_helper::GESTURE_STATE dragState = eng->drag_detector_.Detect(event);
    ndk_helper::GESTURE_STATE pinchState = eng->pinch_detector_.Detect(event);

    // Double tap detector has a priority over other detectors
    if (doubleTapState == ndk_helper::GESTURE_STATE_ACTION) {
      // Detect double tap
      eng->tap_camera_.Reset(true);
    } else {
      // Handle drag state
      if (dragState & ndk_helper::GESTURE_STATE_START) {
        // Otherwise, start dragging
        ndk_helper::Vec2 v;
        eng->drag_detector_.GetPointer(v);
        eng->TransformPosition(v);
        eng->tap_camera_.BeginDrag(v);
      } else if (dragState & ndk_helper::GESTURE_STATE_MOVE) {
        ndk_helper::Vec2 v;
        eng->drag_detector_.GetPointer(v);
        eng->TransformPosition(v);
        eng->tap_camera_.Drag(v);
      } else if (dragState & ndk_helper::GESTURE_STATE_END) {
        eng->tap_camera_.EndDrag();
      }

      // Handle pinch state
      if (pinchState & ndk_helper::GESTURE_STATE_START) {
        // Start new pinch
        ndk_helper::Vec2 v1;
        ndk_helper::Vec2 v2;
        eng->pinch_detector_.GetPointers(v1, v2);
        eng->TransformPosition(v1);
        eng->TransformPosition(v2);
        eng->tap_camera_.BeginPinch(v1, v2);
      } else if (pinchState & ndk_helper::GESTURE_STATE_MOVE) {
        // Multi touch
        // Start new pinch
        ndk_helper::Vec2 v1;
        ndk_helper::Vec2 v2;
        eng->pinch_detector_.GetPointers(v1, v2);
        eng->TransformPosition(v1);
        eng->TransformPosition(v2);
        eng->tap_camera_.Pinch(v1, v2);
      }
    }
    return 1;
  }
  return 0;
}

/**
 * Process the next main command.
 */
void Engine::HandleCmd(struct android_app *app, int32_t cmd) {
  Engine *eng = (Engine *)app->userData;
  LOGI("message %d", cmd);
  switch (cmd) {
  case APP_CMD_SAVE_STATE:
    break;
  case APP_CMD_INIT_WINDOW:
    if (app->window != NULL) {
      eng->InitDisplay(APP_CMD_INIT_WINDOW);
      eng->DrawFrame();
    }

    break;
  case APP_CMD_TERM_WINDOW:
    // Note that JUI helper needs to know if a window has been terminated
    eng->TermDisplay(APP_CMD_TERM_WINDOW);

    eng->has_focus_ = false;
    break;
  case APP_CMD_START:
    break;
  case APP_CMD_STOP:
    break;
  case APP_CMD_RESUME:
    jui_helper::JUIWindow::GetInstance()->Resume(app->activity, APP_CMD_RESUME);
    break;
  case APP_CMD_GAINED_FOCUS:
    // Start animation
    eng->ResumeSensors();
    eng->has_focus_ = true;
    jui_helper::JUIWindow::GetInstance()->Resume(app->activity,
                                                 APP_CMD_GAINED_FOCUS);
    break;
  case APP_CMD_LOST_FOCUS:
    // Also stop animating.
    eng->SuspendSensors();
    eng->has_focus_ = false;
    eng->DrawFrame();
    break;
  case APP_CMD_LOW_MEMORY:
    // Free up GL resources
    eng->TrimMemory();
    break;
  case APP_CMD_CONFIG_CHANGED:
    // Configuration changes
    eng->TermDisplay(APP_CMD_CONFIG_CHANGED);
    eng->InitDisplay(APP_CMD_CONFIG_CHANGED);
    break;
  case APP_CMD_DESTROY:
    ndk_helper::JNIHelper::GetInstance()->DetachCurrentThread();
    break;
  }
}

/*
 * Misc
 */
void Engine::SetState(android_app *state) {
  app_ = state;
  doubletap_detector_.SetConfiguration(app_->config);
  drag_detector_.SetConfiguration(app_->config);
  pinch_detector_.SetConfiguration(app_->config);
  sensroManager_.Init(state);
}

bool Engine::IsReady() {
  return has_focus_;

}

void Engine::TransformPosition(ndk_helper::Vec2 &vec) {
  vec = ndk_helper::Vec2(2.0f, 2.0f) * vec /
            ndk_helper::Vec2(gl_context_->GetScreenWidth(),
                             gl_context_->GetScreenHeight()) -
        ndk_helper::Vec2(1.f, 1.f);
}

void Engine::UpdateFPS(float fFPS) {
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([fFPS, this]() {
    const int32_t count = 64;
    char str[count];
    snprintf(str, count, "%2.2f FPS", fFPS);
    textViewFPS_->SetAttribute("Text", (const char *)str);
  });

  return;
}

Engine g_engine;

/**
 * This is the main entry point of a native application that is using
 * android_native_app_glue.  It runs in its own thread, with its own
 * event loop for receiving input events and doing other things.
 */
void android_main(android_app *state) {

  g_engine.SetState(state);

  // Init helper functions
  ndk_helper::JNIHelper::Init(state->activity, HELPER_CLASS_NAME,
                              HELPER_CLASS_SONAME);

  // Init play game services
  g_engine.InitGooglePlayGameServices();

  state->userData = &g_engine;
  state->onAppCmd = Engine::HandleCmd;
  state->onInputEvent = Engine::HandleInput;

  // loop waiting for stuff to do.
  while (1) {
    // Read all pending events.
    int id;
    int events;
    android_poll_source *source;

    // If not animating, we will block forever waiting for events.
    // If animating, we loop until all events are read, then continue
    // to draw the next frame of animation.
    while ((id = ALooper_pollAll(g_engine.IsReady() ? 0 : -1, NULL, &events,
                                 (void **)&source)) >= 0) {
      // Process this event.
      if (source != NULL)
        source->process(state, source);

      g_engine.ProcessSensors(id);

      // Check if we are exiting.
      if (state->destroyRequested != 0) {
        g_engine.TermDisplay(APP_CMD_TERM_WINDOW);
        return;
      }
    }

    if (g_engine.IsReady()) {
      // Drawing is throttled to the screen update rate, so there
      // is no need to do timing here.
      g_engine.DrawFrame();
    }
  }
}

extern "C" {
JNIEXPORT void
Java_com_google_example_games_cats_CollectAllTheStarsNativeActivity_OnPauseHandler(
    JNIEnv *env) {
  // This call is to suppress 'E/WindowManager(): android.view.WindowLeaked...'
  // errors.
  // Since orientation change events in NativeActivity comes later than
  // expected, we can not dismiss
  // popupWindow gracefully from NativeActivity.
  // So we are releasing popupWindows explicitly triggered from Java callback
  // through JNI call.
  jui_helper::JUIWindow::GetInstance()->Suspend(APP_CMD_PAUSE);
}
}

```

`samples-android/CollectAllTheStarsNative/src/main/java/com/google/example/games/cats/CollectAllTheStarsApplication.java`:

```java
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.example.games.cats;

import android.app.Application;

public class CollectAllTheStarsApplication extends Application {
    public void onCreate() {
        super.onCreate();
    }
}

```

`samples-android/CollectAllTheStarsNative/src/main/java/com/google/example/games/cats/CollectAllTheStarsNativeActivity.java`:

```java
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.example.games.cats;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.NativeActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class CollectAllTheStarsNativeActivity extends NativeActivity {
    // Load SO
    static {
   System.loadLibrary("CollectAllTheStarsNativeActivity");
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Hide toolbar
        int SDK_INT = android.os.Build.VERSION.SDK_INT;
        if (SDK_INT >= 19) {
            setImmersiveSticky();

            View decorView = getWindow().getDecorView();
            decorView
                    .setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {
                        @Override
                        public void onSystemUiVisibilityChange(int visibility) {
                            setImmersiveSticky();
                        }
                    });
        }

        nativeOnActivityCreated(this, savedInstanceState);
    }

    @SuppressLint("InlinedApi")
    @SuppressWarnings("deprecation")
    protected void onResume() {
        super.onResume();

        // Hide toolbar
        int SDK_INT = android.os.Build.VERSION.SDK_INT;
        if (SDK_INT >= 11 && SDK_INT < 14) {
            getWindow().getDecorView().setSystemUiVisibility(
                    View.STATUS_BAR_HIDDEN);
        } else if (SDK_INT >= 14 && SDK_INT < 19) {
            getWindow().getDecorView().setSystemUiVisibility(
                    View.SYSTEM_UI_FLAG_FULLSCREEN
                            | View.SYSTEM_UI_FLAG_LOW_PROFILE);
        } else if (SDK_INT >= 19) {
            setImmersiveSticky();
        }

        nativeOnActivityResumed(this);
    }

    @SuppressLint("InlinedApi")
    void setImmersiveSticky() {
        View decorView = getWindow().getDecorView();
        decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN
                | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
    }

    protected void onPause() {
        super.onPause();
        // This call is to suppress 'E/WindowManager():
        // android.view.WindowLeaked...' errors.
        // Since orientation change events in NativeActivity comes later than
        // expected, we can not dismiss
        // popupWindow gracefully from NativeActivity.
        // So we are releasing popupWindows explicitly triggered from Java
        // callback through JNI call.
        OnPauseHandler();

        nativeOnActivityPaused(this);
    }

    protected void onDestroy() {
        super.onDestroy();
        nativeOnActivityDestroyed(this);
    }

    protected void onStart() {
        super.onStart();
        nativeOnActivityStarted(this);
    }

    protected void onStop() {
        super.onStop();
        nativeOnActivityStopped(this);
    }

    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        nativeOnActivitySaveInstanceState(this, outState);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        nativeOnActivityResult(this, requestCode,resultCode, data);
    }

    // Implemented in C++.
    public static native void nativeOnActivityResult(Activity activity,
            int requestCode, int resultCode, Intent data);

    public static native void nativeOnActivityCreated(Activity activity,
            Bundle savedInstanceState);

    private static native void nativeOnActivityDestroyed(Activity activity);

    private static native void nativeOnActivityPaused(Activity activity);

    private static native void nativeOnActivityResumed(Activity activity);

    private static native void nativeOnActivitySaveInstanceState(
            Activity activity, Bundle outState);

    private static native void nativeOnActivityStarted(Activity activity);

    private static native void nativeOnActivityStopped(Activity activity);

    native public void OnPauseHandler();
}

```

`samples-android/CollectAllTheStarsNative/src/main/res/layout/widgets.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top"
    android:orientation="vertical" >

</LinearLayout>
```

`samples-android/CollectAllTheStarsNative/src/main/res/values-v11/styles.xml`:

```xml
<resources>

    <!--
        Base application theme for API 11+. This theme completely replaces
        AppBaseTheme from res/values/styles.xml on API 11+ devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Holo.Light">
        <!-- API 11 theme customizations can go here. -->
    </style>

</resources>
```

`samples-android/CollectAllTheStarsNative/src/main/res/values-v14/styles.xml`:

```xml
<resources>

    <!--
        Base application theme for API 14+. This theme completely replaces
        AppBaseTheme from BOTH res/values/styles.xml and
        res/values-v11/styles.xml on API 14+ devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
        <!-- API 14 theme customizations can go here. -->
    </style>

</resources>
```

`samples-android/CollectAllTheStarsNative/src/main/res/values/ids.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
Google Play game services IDs.
Save this file as res/values/games-ids.xml in your project.
-->
<resources>
  <string name="app_id">REPLACE_ME</string>
</resources>


```

`samples-android/CollectAllTheStarsNative/src/main/res/values/strings.xml`:

```xml
<resources>
    <string name="app_name">CollectAllTheStarsNative</string>
</resources>

```

`samples-android/CollectAllTheStarsNative/src/main/res/values/styles.xml`:

```xml
<resources>

    <!--
        Base application theme, dependent on API level. This theme is replaced
        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Light">
        <!--
            Theme customizations available in newer API levels can go in
            res/values-vXX/styles.xml, while customizations related to
            backward-compatibility can go here.
        -->
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    </style>

</resources>
```

`samples-android/Common/JuiHelper/CMakeLists.txt`:

```txt
# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##

# For more information about using CMake with Android Studio, read the
# documentation: https://d.android.com/studio/projects/add-native-code.html

# Sets the minimum version of CMake required to build the native library.

cmake_minimum_required(VERSION 3.4.1)
set(CMAKE_VERBOSE_MAKEFILE on)

project(juihelper)

#include the native part of NDKHelper
add_subdirectory (${NDK_HELPER_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}/libndkhelper")

add_library(juihelper STATIC
            src/main/cpp/JavaUI.cpp
            src/main/cpp/JavaUI_Dialog.cpp
            src/main/cpp/JavaUI_Layouts.cpp
            src/main/cpp/JavaUI_Toast.cpp
            src/main/cpp/JavaUI_Window.cpp
            )

target_include_directories(juihelper PRIVATE
                 ${ANDROID_NDK}/sources/android/native_app_glue
                      ${ndkhelper_SOURCE_DIR}/src/main/cpp
                 )
set_target_properties(juihelper
                      PROPERTIES
                      ARCHIVE_OUTPUT_DIRECTORY
                      "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}")

```

`samples-android/Common/JuiHelper/build.gradle`:

```gradle
/* Copyright (C) 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
apply plugin: 'com.android.library'

android {
  compileSdkVersion 26
  defaultConfig {
    minSdkVersion 14
    targetSdkVersion 26

    ndk.abiFilters 'x86', 'armeabi-v7a', 'arm64-v8a'

    externalNativeBuild {
      cmake {
        cppFlags "-std=c++11 -frtti -Wall -Werror"
        targets "juihelper"
        arguments "-DNDK_HELPER_PATH=${project(':Common:NDKHelper').projectDir}",
                  "-DANDROID_STL=c++_static",
                  "-DANDROID_TOOLCHAIN=clang"
      }
    }
  }

  externalNativeBuild {
    cmake.path "CMakeLists.txt"
  }

  buildTypes {
    release {
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt')
    }
  }
}

```

`samples-android/Common/JuiHelper/src/main/AndroidManifest.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.google.example.games.juihelper">
    <application/>
</manifest>

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI.cpp`:

```cpp
/*
 * Copyright 2015 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "JavaUI.h"

namespace jui_helper {

/*
 * Callback Handler for Java events
 */
extern "C" {
JNIEXPORT void Java_com_sample_helper_JUIHelper_JUICallbackHandler(
    JNIEnv *env, jobject thiz, int32_t id, int32_t message, int32_t param1,
    int32_t param2) {
  /*
   * id from Java is generated token from native side, which would be mapped back
   * into an UI pointer; so id is opaque to Java -- Java receives and returns back 
   * the same id to native side
   */
  JUIBase *p = JUIBase::id_factory_.getUIBase(id);
  if( p )
      p->DispatchEvent(message, param1, param2);
  else {
      LOGE("Failed to get JUIBase pointer for %d in %s", id, __FILE__);
  }
}
}

/*
 * IdFactory Implementation: our ID is just a simple integer starting from 1,and
 *                           keeps on counting up. There is no re-use -- even
 *                           one ID is removed from cache, we still counting up
 *                           It will take a long while to overflow a 32 bit integer
 *                           for UI ids. Even it does, it wrap back, at that time,
 *                           previous low values will long gone.
 */
int32_t IdFactory::cur_id_ = 0;
int32_t IdFactory::getId(const JUIBase* ui_object) {
    auto it = ids_.find(ui_object);
    if (it == ids_.end()) {
        LOGE("IDs not inside hash for %p, patching done (%d)", ui_object, cur_id_);
        ids_[ui_object] = ++cur_id_;
        return cur_id_;
    }
    return it->second;
}
JUIBase* IdFactory::getUIBase(int32_t ui_id) {
    for (auto id: ids_) {
        if(id.second == ui_id) {
            return const_cast<JUIBase*>(id.first);
        }
    }
    LOGE("Unable to find object point for ID(%d, %x)", ui_id, ui_id);
    return nullptr;
}
bool IdFactory::insert(const JUIBase* ui_object) {
    bool status = true;
    auto it = ids_.find(ui_object);
    if (it != ids_.end()) {
        LOGE("Error: %p is already in = %d", it->first, it->second);
        LOGE("Overwriting %p with %p for it", it->first, ui_object);
        status = false;
        //return status;  ---> let it fall through
    }
    ids_[ui_object] = ++cur_id_;
    return status;
}
bool  IdFactory::remove(const JUIBase* ui_object) {
    auto it = ids_.find(ui_object);
    if (it == ids_.end()) {
        LOGE("IDs not inside hash for %p!!!", ui_object);
        return false;
    }
    ids_.erase(it);
    return true;
}
void IdFactory::debugDumpCurrentHashTable(void) {
    for (auto id: ids_) {
        LOGI("Cached ID (%p = %d)", id.first, id.second);
    }
}

/*
 * Our global instance for id factory
 */
IdFactory JUIBase::id_factory_;

/*
 * JUIView
 */
// Attribute types for View
std::unordered_map<std::string, int32_t> JUIView::map_attributes_;
const AttributeType JUIView::attributes_[] = {
  { "AccessibilityLiveRegion", ATTRIBUTE_PARAMETER_INT },
  { "Alpha", ATTRIBUTE_PARAMETER_FLOAT },
  { "BackgroundResource", ATTRIBUTE_PARAMETER_INT },
  { "Clickable", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Enabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "DrawingCacheQuality", ATTRIBUTE_PARAMETER_INT },
  { "ScrollbarFadingEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "FilterTouchesWhenObscured", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "FitsSystemWindows", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Focusable", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "FocusableATTRIBUTE_PARAMETER_INTouchMode", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "HapticFeedbackEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Id", ATTRIBUTE_PARAMETER_INT },
  { "ImportantForAccessibility", ATTRIBUTE_PARAMETER_INT },
  { "ScrollContainer", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "KeepScreenOn", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "LayoutDirection", ATTRIBUTE_PARAMETER_INT },
  { "LongClickable", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "MinimumHeight", ATTRIBUTE_PARAMETER_INT },
  { "MinimumWidth", ATTRIBUTE_PARAMETER_INT },
  { "NextFocusDownId", ATTRIBUTE_PARAMETER_INT },
  { "NextFocusForwardId", ATTRIBUTE_PARAMETER_INT },
  { "NextFocusLeftId", ATTRIBUTE_PARAMETER_INT },
  { "NextFocusRightId", ATTRIBUTE_PARAMETER_INT },
  { "NextFocusUpId", ATTRIBUTE_PARAMETER_INT },
  { "PaddingRelative", ATTRIBUTE_PARAMETER_IIII },
  { "Padding", ATTRIBUTE_PARAMETER_IIII },
  { "VerticalFadingEdgeEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Rotation", ATTRIBUTE_PARAMETER_FLOAT },
  { "RotationX", ATTRIBUTE_PARAMETER_FLOAT },
  { "RotationY", ATTRIBUTE_PARAMETER_FLOAT },
  { "SaveEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "ScaleX", ATTRIBUTE_PARAMETER_FLOAT },
  { "ScaleY", ATTRIBUTE_PARAMETER_FLOAT },
  { "ScrollBarDefaultDelayBeforeFade", ATTRIBUTE_PARAMETER_INT },
  { "ScrollBarFadeDuration", ATTRIBUTE_PARAMETER_INT },
  { "ScrollBarSize", ATTRIBUTE_PARAMETER_INT },
  { "ScrollBarStyle", ATTRIBUTE_PARAMETER_INT },
  { "SoundEffectsEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "TextAlignment", ATTRIBUTE_PARAMETER_INT },
  { "TextDirection", ATTRIBUTE_PARAMETER_INT },
  { "PivotX", ATTRIBUTE_PARAMETER_FLOAT },
  { "PivotY", ATTRIBUTE_PARAMETER_FLOAT },
  { "TranslationX", ATTRIBUTE_PARAMETER_FLOAT },
  { "TranslationY", ATTRIBUTE_PARAMETER_FLOAT },
  { "Visibility", ATTRIBUTE_PARAMETER_INT },
};

JUIView::JUIView()
    : layoutWidth_(ATTRIBUTE_SIZE_WRAP_CONTENT),
      layoutHeight_(ATTRIBUTE_SIZE_WRAP_CONTENT), layoutWeight_(0.f),
      marginLeft_(0), marginRight_(0), marginTop_(0), marginBottom_(0) {
  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }

  for (int32_t i = 0; i < LAYOUT_PARAMETER_COUNT; ++i) {
    array_current_rules_[i] = LAYOUT_PARAMETER_UNKNOWN;
  }
}

JUIView::~JUIView() {
  auto it = map_attribute_parameters.begin();
  auto itEnd = map_attribute_parameters.end();
  while (it != itEnd) {
    AttributeParameterStore &p = map_attribute_parameters[it->first];
    switch (p.type) {
    case ATTRIBUTE_PARAMETER_STRING:
      if (it->second.str != NULL)
        delete it->second.str;
      break;
    default:
      break;
    }
    it++;
  }
}

/*
 * Add relative layout rule to the view
 */
void JUIView::AddRule(const int32_t layoutParameterIndex,
                      const int32_t parameter) {
  if (layoutParameterIndex < 0 ||
      layoutParameterIndex >= LAYOUT_PARAMETER_COUNT) {
    LOGE("Invalid rule index");
    return;
  }
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "addRule",
      "(Landroid/view/View;II)V", GetJobject(), layoutParameterIndex,
      parameter);
  array_current_rules_[layoutParameterIndex] = parameter;
}

void JUIView::AddRule(const int32_t layoutParameterIndex,
                      const JUIView *parameter) {

  /*
   * perform pointer to id xlation
   */
    AddRule(layoutParameterIndex, id_factory_.getId(parameter));
}

void JUIView::SetLayoutParams(const int32_t width, const int32_t height) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "setLayoutParams",
      "(Landroid/view/View;II)V", GetJobject(), width, height);
  layoutWidth_ = width;
  layoutHeight_ = height;
  layoutWeight_ = 0.f;
}

void JUIView::SetLayoutParams(const int32_t width, const int32_t height,
                              const float weight) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "setLayoutParams",
      "(Landroid/view/View;IIF)V", GetJobject(), width, height, weight);
  layoutWidth_ = width;
  layoutHeight_ = height;
  layoutWeight_ = weight;
}

void JUIView::SetMargins(const int32_t left, const int32_t top,
                         const int32_t right, const int32_t bottom) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "setMargins",
      "(Landroid/view/View;IIII)V", GetJobject(), left, top, right, bottom);
  marginLeft_ = left;
  marginRight_ = right;
  marginTop_ = top;
  marginBottom_ = bottom;
}

void JUIView::RestoreParameters(std::unordered_map<std::string, int32_t> &map) {
  // Restore Layout Rule
  for (int32_t i = 0; i < LAYOUT_PARAMETER_COUNT; ++i) {
    if (array_current_rules_[i] != LAYOUT_PARAMETER_UNKNOWN) {
      AddRule(i, array_current_rules_[i]);
    }
  }

  auto it = map_attribute_parameters.begin();
  auto itEnd = map_attribute_parameters.end();
  while (it != itEnd) {
    AttributeParameterStore &p = map_attribute_parameters[it->first];
    switch (p.type) {
    case ATTRIBUTE_PARAMETER_INT:
      JUIBase::SetAttribute(map, it->first.c_str(), (int32_t) p.i);
      break;
    case ATTRIBUTE_PARAMETER_FLOAT:
      JUIBase::SetAttribute(map, it->first.c_str(), p.f);
      break;
    case ATTRIBUTE_PARAMETER_BOOLEAN:
      JUIBase::SetAttribute(map, it->first.c_str(), p.f);
      break;
    case ATTRIBUTE_PARAMETER_STRING:
      JUIBase::SetAttribute(map, it->first.c_str(), p.str->c_str());
      break;
    case ATTRIBUTE_PARAMETER_IF:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_if.i1,
                            p.param_if.f2);
      break;
    case ATTRIBUTE_PARAMETER_FF:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_ff.f1,
                            p.param_ff.f2);
      break;
    case ATTRIBUTE_PARAMETER_IIII:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_iiii.i1,
                            p.param_iiii.i2, p.param_iiii.i3, p.param_iiii.i4);
      break;
    case ATTRIBUTE_PARAMETER_FFFI:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_fffi.f1,
                            p.param_fffi.f2, p.param_fffi.f3, p.param_fffi.i);
      break;
    default:
      break;
    }
    it++;
  }

  if (layoutWidth_ != ATTRIBUTE_SIZE_WRAP_CONTENT ||
      layoutHeight_ != ATTRIBUTE_SIZE_WRAP_CONTENT || layoutWeight_ != 0.f) {
    if (layoutWeight_ != 0.f)
      SetLayoutParams(layoutWidth_, layoutHeight_, layoutWeight_);
    else
      SetLayoutParams(layoutWidth_, layoutHeight_);
  }

  if (marginLeft_ || marginRight_ || marginTop_ || marginBottom_) {
    SetMargins(marginLeft_, marginTop_, marginRight_, marginBottom_);
  }
}

/*
 * ProgressBar
 */
std::unordered_map<std::string, int32_t> JUIProgressBar::map_attributes_;
const AttributeType JUIProgressBar::attributes_[] = {
  { "Indeterminate", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Max", ATTRIBUTE_PARAMETER_INT }, { "Progress", ATTRIBUTE_PARAMETER_INT },
  { "SecondaryProgress", ATTRIBUTE_PARAMETER_INT },
  { "Visibility", ATTRIBUTE_PARAMETER_INT },
};

JUIProgressBar::JUIProgressBar() : JUIView(), style_(0) {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIProgressBar", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUIProgressBar::JUIProgressBar(const jui_helper::ProgressBarStyleType style)
    : JUIView() {
  style_ = style;
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIProgressBar", this, style);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUIProgressBar::~JUIProgressBar() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUIProgressBar::Restore() {
  // Recreate Java Widget when the activity has been disposed
  if (!style_)
    obj_ = JUIWindow::GetInstance()->CreateWidget("JUIProgressBar", this);
  else
    obj_ =
        JUIWindow::GetInstance()->CreateWidget("JUIProgressBar", this, style_);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);
}

/*
 * SeekBar
 */
std::unordered_map<std::string, int32_t> JUISeekBar::map_attributes_;
const AttributeType JUISeekBar::attributes_[] = {
  { "Max", ATTRIBUTE_PARAMETER_INT }, { "Progress", ATTRIBUTE_PARAMETER_INT }
};

JUISeekBar::JUISeekBar()
    : JUIProgressBar(), stop_tracking_callback_(NULL),
      start_tracking_callback_(NULL), progress_changed_callback_(NULL),
      current_progress_(0) {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUISeekBar", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUISeekBar::~JUISeekBar() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUISeekBar::DispatchEvent(const int32_t message, const int32_t param1,
                               const int32_t param2) {
  switch (message) {
  case JUICALLBACK_SEEKBAR_STOP_TRACKING_TOUCH:
    if (stop_tracking_callback_ != NULL)
      stop_tracking_callback_(this, message, param1, param2);
    break;
  case JUICALLBACK_SEEKBAR_START_TRACKING_TOUCH:
    if (start_tracking_callback_ != NULL)
      start_tracking_callback_(this, message, param1, param2);
    break;
  case JUICALLBACK_SEEKBAR_PROGRESSCHANGED:
    if (progress_changed_callback_ != NULL)
      progress_changed_callback_(this, message, param1, param2);
    current_progress_ = param1;
    break;
  default:
    break;
  }
}

bool JUISeekBar::SetCallback(
    const int32_t message,
    std::function<void(jui_helper::JUIView *, const int32_t, const int32_t,
                       const int32_t)> callback) {
  bool b = true;
  switch (message) {
  case JUICALLBACK_SEEKBAR_STOP_TRACKING_TOUCH:
    stop_tracking_callback_ = callback;
    break;
  case JUICALLBACK_SEEKBAR_START_TRACKING_TOUCH:
    start_tracking_callback_ = callback;
    break;
  case JUICALLBACK_SEEKBAR_PROGRESSCHANGED:
    progress_changed_callback_ = callback;
    break;
  default:
    b = false;
    break;
  }
  return b;
}

void JUISeekBar::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUISeekBar", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);

  // Restore progress
  SetAttribute("Progress", current_progress_);
}

/*
 * SeekBar
 */
std::unordered_map<std::string, int32_t> JUITextView::map_attributes_;
const AttributeType JUITextView::attributes_[] = {
  { "AutoLinkMask", ATTRIBUTE_PARAMETER_INT },
  { "Text", ATTRIBUTE_PARAMETER_STRING },
  { "CursorVisible", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "CompoundDrawablesWithIntrinsicBounds", ATTRIBUTE_PARAMETER_IIII },
  { "CompoundDrawablesRelativeWithIntrinsicBounds", ATTRIBUTE_PARAMETER_IIII },
  { "CompoundDrawablePadding", ATTRIBUTE_PARAMETER_INT },
  { "InputExtras", ATTRIBUTE_PARAMETER_INT },
  { "Ellipsize", ATTRIBUTE_PARAMETER_INT /*TextUtils.TruncateAt*/ },
  { "Ems", ATTRIBUTE_PARAMETER_INT },
  { "Typeface", ATTRIBUTE_PARAMETER_INT /*Typeface*/ },
  { "FreezesText", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Gravity", ATTRIBUTE_PARAMETER_INT }, { "Height", ATTRIBUTE_PARAMETER_INT },
  { "Hint", ATTRIBUTE_PARAMETER_INT },
  { "ImeOptions", ATTRIBUTE_PARAMETER_INT },
  { "IncludeFontPadding", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "RawInputType", ATTRIBUTE_PARAMETER_INT },
  { "LineSpacing", ATTRIBUTE_PARAMETER_FF },
  { "Lines", ATTRIBUTE_PARAMETER_INT },
  { "LinksClickable", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "MarqueeRepeatLimit", ATTRIBUTE_PARAMETER_INT },
  { "MaxEms", ATTRIBUTE_PARAMETER_INT },
  { "MaxHeight", ATTRIBUTE_PARAMETER_INT },
  { "MaxLines", ATTRIBUTE_PARAMETER_INT },
  { "MaxWidth", ATTRIBUTE_PARAMETER_INT },
  { "MinEms", ATTRIBUTE_PARAMETER_INT },
  { "MinHeight", ATTRIBUTE_PARAMETER_INT },
  { "MinLines", ATTRIBUTE_PARAMETER_INT },
  { "MinWidth", ATTRIBUTE_PARAMETER_INT },
  { "PrivateImeOptions", ATTRIBUTE_PARAMETER_STRING },
  { "HorizontallyScrolling", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "SelectAllOnFocus", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "ShadowLayer", ATTRIBUTE_PARAMETER_FFFI },
  { "AllCaps", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "TextColor", ATTRIBUTE_PARAMETER_INT },
  { "HighlightColor", ATTRIBUTE_PARAMETER_INT },
  { "HintTextColor", ATTRIBUTE_PARAMETER_INT },
  { "LinkTextColor", ATTRIBUTE_PARAMETER_INT },
  { "TextScaleX", ATTRIBUTE_PARAMETER_FLOAT },
  { "TextSize", ATTRIBUTE_PARAMETER_IF }, { "Width", ATTRIBUTE_PARAMETER_INT }
};

JUITextView::JUITextView() : JUIView() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUITextView", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  Init();
}

JUITextView::JUITextView(const char *str) : JUIView() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUITextView", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  Init();
  SetAttribute("Text", str);
}

JUITextView::JUITextView(const bool b) : JUIView() {
  if (b == true)
    JUITextView();
  else
    Init();
}

void JUITextView::Init() {
  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUITextView::~JUITextView() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUITextView::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUITextView", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);
}

/*
 * Button
 */
JUIButton::JUIButton() : JUITextView(false), onclick_callback_(NULL) { Init(); }

JUIButton::JUIButton(const char *str) : JUITextView(false) {
  Init();
  SetAttribute("Text", str);
}

JUIButton::JUIButton(const bool b) : JUITextView(false) {
  if (b == true)
    JUIButton();
}

void JUIButton::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");
}

JUIButton::~JUIButton() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUIButton::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);
}

void JUIButton::DispatchEvent(const int32_t message, const int32_t param1,
                              const int32_t param2) {
  if (onclick_callback_ != NULL)
    onclick_callback_(this, message);
}

bool JUIButton::SetCallback(
    std::function<void(jui_helper::JUIView *, const int32_t)> callback) {
  bool b = true;
  onclick_callback_ = callback;
  return b;
}

/*
 * JUICompoundButton
 */
std::unordered_map<std::string, int32_t> JUICompoundButton::map_attributes_;
const AttributeType JUICompoundButton::attributes_[] = {
  { "Checked", ATTRIBUTE_PARAMETER_BOOLEAN },
};

JUICompoundButton::JUICompoundButton()
    : JUIButton(false), checked_changed_callback_(NULL),
      current_checked_(false) {
  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUIButton::map_attributes_.begin(),
                           JUIButton::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUICompoundButton::~JUICompoundButton() {}

void JUICompoundButton::DispatchEvent(const int32_t message,
                                      const int32_t param1,
                                      const int32_t param2) {
  switch (message) {
  case JUICALLBACK_COMPOUNDBUTTON_CHECKED:
    if (checked_changed_callback_ != NULL)
      checked_changed_callback_(this, param1);
    current_checked_ = param1;
    break;
  default:
    break;
  }
}

bool JUICompoundButton::SetCallback(
    std::function<void(jui_helper::JUIView *, const bool)> callback) {
  bool b = true;
  checked_changed_callback_ = callback;
  return b;
}

void JUICompoundButton::Restore() {
  SetAttribute("Checked", current_checked_);
  RestoreParameters(map_attributes_);
}

/*
 * JUICheckBox
 */
JUICheckBox::JUICheckBox() : JUICompoundButton() { Init(); }

JUICheckBox::JUICheckBox(const char *str) : JUICompoundButton() {
  Init();
  SetAttribute("Text", str);
}

void JUICheckBox::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUICheckBox", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");
}

JUICheckBox::~JUICheckBox() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUICheckBox::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUICheckBox", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  JUICompoundButton::Restore();
}

/*
 * Switch
 */
std::unordered_map<std::string, int32_t> JUISwitch::map_attributes_;
const AttributeType JUISwitch::attributes_[] = {
  { "TextOn", ATTRIBUTE_PARAMETER_STRING },
  { "TextOff", ATTRIBUTE_PARAMETER_STRING },
  { "SwitchMinWidth", ATTRIBUTE_PARAMETER_INT },
  { "SwitchPadding", ATTRIBUTE_PARAMETER_INT },
  { "SwitchTypeface", ATTRIBUTE_PARAMETER_INT },
  { "ThumbTextPadding", ATTRIBUTE_PARAMETER_INT },
};

JUISwitch::JUISwitch() : JUICompoundButton() { Init(); }

JUISwitch::JUISwitch(const char *str) : JUICompoundButton() {
  Init();
  SetAttribute("Text", str);
}

void JUISwitch::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUISwitch", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUICompoundButton::map_attributes_.begin(),
                           JUICompoundButton::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUISwitch::~JUISwitch() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUISwitch::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUISwitch", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  SetAttribute("Checked", current_checked_);
  RestoreParameters(map_attributes_);
}

/*
 * JUIRadioButton
 */
JUIRadioButton::JUIRadioButton() : JUICompoundButton() { Init(); }

JUIRadioButton::JUIRadioButton(const char *str) : JUICompoundButton() {
  Init();
  SetAttribute("Text", str);
}

void JUIRadioButton::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRadioButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");
}

JUIRadioButton::~JUIRadioButton() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUIRadioButton::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRadioButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  JUICompoundButton::Restore();
}

/*
 * JUIToggleButton
 */
std::unordered_map<std::string, int32_t> JUIToggleButton::map_attributes_;
const AttributeType JUIToggleButton::attributes_[] = {
  { "TextOn", ATTRIBUTE_PARAMETER_STRING },
  { "TextOff", ATTRIBUTE_PARAMETER_STRING },
};

JUIToggleButton::JUIToggleButton() : JUICompoundButton() { Init(); }

JUIToggleButton::JUIToggleButton(const char *strOn, const char *strOff)
    : JUICompoundButton() {
  Init();
  SetAttribute("TextOn", strOn);
  SetAttribute("TextOff", strOff);
}

void JUIToggleButton::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIToggleButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    // Add base class's map
    map_attributes_.insert(JUICompoundButton::map_attributes_.begin(),
                           JUICompoundButton::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUIToggleButton::~JUIToggleButton() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUIToggleButton::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIToggleButton", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  SetAttribute("Checked", current_checked_);
  RestoreParameters(map_attributes_);
}

/*
 * JUICheckedTextView
 */
JUICheckedTextView::JUICheckedTextView() : JUICompoundButton() { Init(); }

JUICheckedTextView::JUICheckedTextView(const char *str) : JUICompoundButton() {
  Init();
  SetAttribute("Text", str);
}

void JUICheckedTextView::Init() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUICheckedTextView", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");
}

JUICheckedTextView::~JUICheckedTextView() {
  if (obj_ != NULL) {
    jui_helper::JUIWindow::GetInstance()->CloseWidget(obj_);
    obj_ = NULL;
  }
}

void JUICheckedTextView::Restore() {
  // Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUICheckedTextView", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  JUICompoundButton::Restore();
}

} // namespace jui_helper

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef JAVAUI_H_
#define JAVAUI_H_

#include <jni.h>
#include <errno.h>
#include <time.h>
#include <vector>
#include <list>
#include <map>
#include <unordered_map>
#include <string>
#include <functional>
#include "JNIHelper.h"

#include "JavaUI_View.h"
#include "JavaUI_Toast.h"

/******************************************************************
 * jui_helper is a helper library to use Java UI easily from Native code.
 * With the helper, an application can instantiate Java controls such as Button,
 * CheckBox,
 * SeekBar from Native code and put it over NativeActivity. Also you can
 * register a native
 * callback to the controls.
 * For a sample implementation how to use jui_helper, refer JavaUI sample.
 *
 * NOTE: To use Dialog, Android Support library is required.
 * Setup support library:
 * http://developer.android.com/tools/support-library/setup.html
 */
namespace jui_helper {

/******************************************************************
 * Helper class to access Java UI from native code
 */

/*
 * Forward decls
 */
class JUIView;
class JUIWindow;
class JUIDialog;

/*
 * JUILinearLayout
 * Corresponding implementation for android.widget.LinearLayout
 */
class JUILinearLayout : public JUIView {
public:
  JUILinearLayout();
  virtual ~JUILinearLayout();

  /*
   * Add JUIView based classes to the linear layout.
   * The layout automatically deletes views in the layout.
   * Caller does not have to delete the added views.
   */
  void AddView(JUIView *view);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

private:
  static const AttributeType attributes_[];
  void Init();

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;
  std::vector<JUIView *> views_;
  virtual void Restore();

  JUILinearLayout(const bool b);
};

/*
 * JUIRelativeLayout
 * Corresponding implementation for android.widget.RelativeLayout
 */
class JUIRelativeLayout : public JUIView {
public:
  JUIRelativeLayout();
  virtual ~JUIRelativeLayout();

  /*
   * Add JUIView based classes to the linear layout.
   * The layout automatically deletes views in the layout.
   * Caller does not have to delete the added views.
   */
  void AddView(JUIView *view);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

private:
  static const AttributeType attributes_[];
  void Init();

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;
  std::vector<JUIView *> views_;
  virtual void Restore();

  JUIRelativeLayout(const bool b);
};

/*
 * JUIRadioGroup
 * In a radio group, you can add multiple radioButtons
 */
class JUIRadioGroup : public JUILinearLayout {
public:
  JUIRadioGroup();
  virtual ~JUIRadioGroup();

private:
protected:
  virtual void Restore();

  JUIRadioGroup(const bool b);
};

/*
 * JUIProgressBar
 * In the constructor you can specify a type of progressbar with
 * PROGRESS_BAR_STYLE parameter.
 */
class JUIProgressBar : public JUIView {
public:
  JUIProgressBar();
  /*
   * Constructer with a style
   */
  JUIProgressBar(const jui_helper::ProgressBarStyleType style);

  virtual ~JUIProgressBar();

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

private:
  const static AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;
  int32_t style_;

protected:
  virtual void Restore();
};

/*
 * JUISeekBar
 */
class JUISeekBar : public JUIProgressBar {
public:
  JUISeekBar();
  virtual ~JUISeekBar();

  /*
   * Set callback to each input event of seekBar widget
   * such as start/stop/change progress
   */
  bool SetCallback(const int32_t message,
                   std::function<void(jui_helper::JUIView *, const int32_t,
                                      const int32_t, const int32_t)> callback);

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

private:
  const static AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;
  std::function<void(jui_helper::JUIView *, const int32_t, const int32_t,
                     const int32_t)> stop_tracking_callback_;
  std::function<void(jui_helper::JUIView *, const int32_t, const int32_t,
                     const int32_t)> start_tracking_callback_;
  std::function<void(jui_helper::JUIView *, const int32_t, const int32_t,
                     const int32_t)> progress_changed_callback_;
  int32_t current_progress_;

protected:
  virtual void Restore();
};

//-------------------------------------------------
//JUITextView
//-------------------------------------------------
class JUITextView : public JUIView {
public:
  JUITextView();
  JUITextView(const char *str);
  virtual ~JUITextView();

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

  template <typename T, typename T2>
  bool SetAttribute(const char *strAttribute, T t, T2 t2) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t, t2);
  }

  template <typename T, typename T2, typename T3, typename T4>
  bool SetAttribute(const char *strAttribute, T p1, T2 p2, T3 p3, T4 p4) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, p1, p2, p3, p4);
  }

  /*
   * Retriee attribute of the widget
   */
  template <typename T> bool GetAttribute(const char *strAttribute, T &value) {
    return JUIView::GetAttribute(map_attributes_, strAttribute, value);
  }

private:
  const static AttributeType attributes_[];
  void Init();

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;
  virtual void Restore();

  JUITextView(const bool b);
};

/*
 * JUIButton
 */
class JUIButton : public JUITextView {
public:
  JUIButton();
  JUIButton(const char *str);
  virtual ~JUIButton();

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2);

  /*
   * Set callback to an input event
   */
  bool SetCallback(
      std::function<void(jui_helper::JUIView *, const int32_t)> callback);

private:
  void Init();
  std::function<void(jui_helper::JUIView *, const int32_t)> onclick_callback_;

protected:
  JUIButton(const bool b);

  virtual void Restore();
};

//-------------------------------------------------
//JUICompoundButton
//-------------------------------------------------
class JUICompoundButton : public JUIButton {
public:
  JUICompoundButton();
  virtual ~JUICompoundButton();

  /*
   * Set callback to an input event
   */
  bool SetCallback(
      std::function<void(jui_helper::JUIView *, const bool)> callback);

  /*
   * Retrieve the check status of the widget
   */
  bool IsChecked() { return current_checked_; }

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

private:
  const static AttributeType attributes_[];
  std::function<void(jui_helper::JUIView *, const bool)>
      checked_changed_callback_;

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;
  bool current_checked_;

  virtual void Restore();
};

/*
 * JUICheckBox
 */
class JUICheckBox : public JUICompoundButton {
public:
  JUICheckBox();
  JUICheckBox(const char *str);
  virtual ~JUICheckBox();

private:
  void Init();

protected:
  virtual void Restore();
};

/*
 * JUISwitch
 */
class JUISwitch : public JUICompoundButton {
public:
  JUISwitch();
  JUISwitch(const char *str);
  virtual ~JUISwitch();

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

private:
  const static AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;

  void Init();

protected:
  virtual void Restore();
};

/*
 * JUISwitch
 */
class JUIToggleButton : public JUICompoundButton {
public:
  JUIToggleButton();
  JUIToggleButton(const char *strOn, const char *strOff);
  virtual ~JUIToggleButton();

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

private:
  const static AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;

  void Init();

protected:
  virtual void Restore();
};

/*
 * JUICheckedTextView
 */
class JUICheckedTextView : public JUICompoundButton {
public:
  JUICheckedTextView();
  JUICheckedTextView(const char *str);
  virtual ~JUICheckedTextView();

private:
  void Init();

protected:
  virtual void Restore();
};

/*
 * JUICheckedTextView
 */
class JUIRadioButton : public JUICompoundButton {
public:
  JUIRadioButton();
  JUIRadioButton(const char *str);
  virtual ~JUIRadioButton();

private:
  void Init();

protected:
  virtual void Restore();
};

/*
 * JUIWindow represents a popup window with a relative layout put on the window
 * An application can create JUIView based classes and add them to JUIWindow to
 * show Java Widget over
 * native activity.
 */
class JUIWindow {
  /*
   * These classes need to be a friend class to access protected methods
   */
  friend class JUIView;
  friend class JUIProgressBar;
  friend class JUISeekBar;
  friend class JUITextView;
  friend class JUIButton;
  friend class JUICheckBox;
  friend class JUISwitch;
  friend class JUIToggleButton;
  friend class JUIRadioButton;
  friend class JUICheckedTextView;
  friend class JUILinearLayout;
  friend class JUIRelativeLayout;
  friend class JUIRadioGroup;
  friend class JUIToast;
  friend class JUIDialog;

public:
  /*
   * Retrieve the singleton object of the helper.
   * Static member of the class

   * Methods in the class are NOT designed as thread safe.
   */
  static JUIWindow *GetInstance();

  /*
   * Retrieve an instance of JUIHelper Java class
   *
   */
  static jobject GetHelperClassInstance();

  /*
   * Retrieve JUIHelper Java class
   *
   */
  static jclass GetHelperClass();

  /*
   * Initialize window with an activity
   */
  static void Init(ANativeActivity *activity,
                   const char *helper_class_name = NULL);

  /*
   * Close the window
   */
  void Close();

  /*
   * Resume JUIWindow
   * This function needs to be invoked corresponding activity life cycle event
   */
  void Resume(ANativeActivity *activity, const int32_t command);

  /*
   * Suspend JUIWindow
   * This function needs to be invoked corresponding activity life cycle event
   */
  void Suspend(const int32_t command);

  /*
   * Add JUIView classes to the window
   */
  void AddView(JUIView *view);

  /*
   * Get context associated with the window class
   */
  jobject GetContext() {
    if (activity_ == NULL)
      return NULL;
    return activity_->clazz;
  }

  /*
   * Get mutex for JUI helpers
   */
  std::mutex &GetMutex() { return mutex_; }

private:
  JUIWindow();
  ~JUIWindow();
  JUIWindow(const JUIWindow &rhs);
  JUIWindow &operator=(const JUIWindow &rhs);

  ANativeActivity *activity_;
  jobject popupWindow_;

  std::vector<JUIView *> views_;

  bool suspended_;
  bool windowDestroyed_;

  jobject jni_helper_java_ref_;
  jclass jni_helper_java_class_;

  JUIDialog *dialog_;

  //mutex for synchronization
  mutable std::mutex mutex_;

  jobject CreateWidget(const char *strWidgetName, void *id);
  jobject CreateWidget(const char *strWidgetName, void *id,
                       const int32_t param);
  void CloseWidget(jobject obj);

  void SetDialog(JUIDialog *dialog) { dialog_ = dialog; }
};

/*
 * JUIDialog represents a dialog framgent
 * An application can create JUIView based classes and add them to JUIDialog to
 * show Java Widget over
 * native activity.
 */
class JUIDialog : public JUIBase {
  /*
   * These classes need to be a friend class to access protected methods
   */
  friend class JUIView;
  friend class JUIProgressBar;
  friend class JUISeekBar;
  friend class JUITextView;
  friend class JUIButton;
  friend class JUICheckBox;
  friend class JUISwitch;
  friend class JUIToggleButton;
  friend class JUIRadioButton;
  friend class JUICheckedTextView;
  friend class JUILinearLayout;
  friend class JUIRelativeLayout;
  friend class JUIRadioGroup;
  friend class JUIToast;
  friend class JUIWindow;

public:
  JUIDialog();
  JUIDialog(ANativeActivity *activity);
  virtual ~JUIDialog();

  /*
   * Initialize window with an activity
   */
  void Init(ANativeActivity *activity);

  /*
   * Close the dialog
   */
  void Close();

  /*
   * Show dialog
   */
  void Show();

  /*
   * Add JUIView classes to the dialog
   */
  void AddView(JUIView *view);

  /*
   * Set a callback to dialog life cycle event
   */
  bool SetCallback(const int32_t message,
                   std::function<void(jui_helper::JUIDialog *dialog,
                                      const int32_t message)> callback);

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

private:
protected:
  static const AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;

  ANativeActivity *activity_;
  std::vector<JUIView *> views_;
  bool suspended_;

  std::function<void(jui_helper::JUIDialog *dialog, const int32_t message)>
      dismiss_callback_;
  std::function<void(jui_helper::JUIDialog *dialog, const int32_t message)>
      cancel_callback_;

  void CreateDialog();
  void DeleteObject();
  virtual void Suspend();
  virtual void Resume(ANativeActivity *activity);
  void RestoreParameters(std::unordered_map<std::string, int32_t> &map);
};

class JUIAlertDialog : public JUIDialog {
public:
  JUIAlertDialog(ANativeActivity *activity);
  virtual ~JUIAlertDialog();

  /*
   * Initialize window with an activity
   */
  void Init(ANativeActivity *activity);

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2);

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

  bool SetButton(
      const int32_t button, const char *message,
      std::function<void(jui_helper::JUIView *, const int32_t)> callback);

private:
  static const AttributeType attributes_[];
  static std::unordered_map<std::string, int32_t> map_attributes_;

  void CreateDialog();

  std::function<void(jui_helper::JUIView *, const int32_t)> callback_positive_;
  std::function<void(jui_helper::JUIView *, const int32_t)> callback_negative_;
  std::function<void(jui_helper::JUIView *, const int32_t)> callback_neutral_;

protected:
  virtual void Resume(ANativeActivity *activity);
};

}      //namespace ndkHelper
#endif /* JAVAUI_H_ */

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_Dialog.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "JavaUI.h"

namespace jui_helper {
/*
 * JUI Dialog
 */
std::unordered_map<std::string, int32_t> JUIDialog::map_attributes_;
const AttributeType JUIDialog::attributes_[] = {
  { "Title", ATTRIBUTE_PARAMETER_STRING },
};

JUIDialog::JUIDialog()
    : activity_(NULL), suspended_(false), dismiss_callback_(NULL),
      cancel_callback_(NULL) {
  map_attribute_parameters.clear();
}

JUIDialog::JUIDialog(ANativeActivity *activity)
    : suspended_(false), dismiss_callback_(NULL), cancel_callback_(NULL) {
  Init(activity);
}

JUIDialog::~JUIDialog() {
  Close();

  auto it = map_attribute_parameters.begin();
  auto itEnd = map_attribute_parameters.end();
  while (it != itEnd) {

    AttributeParameterStore &p = map_attribute_parameters[it->first];
    switch (p.type) {
    case ATTRIBUTE_PARAMETER_STRING:
      if (it->second.str != NULL)
        delete it->second.str;
      break;
    default:
      break;
    }
    it++;
  }
}

/*
 * Init
 */
void JUIDialog::Init(ANativeActivity *activity) {
  //setup attribute map (once)
  if (map_attributes_.size() == 0) {
    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }

  activity_ = activity;
  CreateDialog();
}

void JUIDialog::CreateDialog() {
  ndk_helper::JNIHelper &helper = *ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper.AttachCurrentThread();

  //Create dialog
  jmethodID mid = env->GetMethodID(
      JUIWindow::GetInstance()->GetHelperClass(), "createDialog",
      "(Landroid/app/NativeActivity;)Ljava/lang/Object;");
  jobject obj =
      env->CallObjectMethod(JUIWindow::GetInstance()->GetHelperClassInstance(),
                            mid, activity_->clazz);
  if (obj == NULL) {
    LOGI("Failed creating Dialog object");
  }
  obj_ = env->NewGlobalRef(obj);

  //Notify 'id' to JNI side
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "setID", "(I)V",
                                                       id_factory_.getId(this));
  env->DeleteLocalRef(obj);
}

void JUIDialog::DeleteObject() {
  if (obj_) {
    ndk_helper::JNIHelper *helper = ndk_helper::JNIHelper::GetInstance();
    JNIEnv *env = helper->AttachCurrentThread();
    env->DeleteGlobalRef(obj_);
    obj_ = NULL;
  }
}

/*
 * Close
 */
void JUIDialog::Close() {
  if (obj_) {
    LOGI("Closing Dialog");

    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "dismiss",
                                                         "()V");

    //Delete child views
    auto itBegin = views_.begin();
    auto itEnd = views_.end();
    while (itBegin != itEnd) {
      delete *itBegin;
      itBegin++;
    }

    DeleteObject();
    views_.clear();
    activity_ = NULL;
    obj_ = NULL;
    jui_helper::JUIWindow::GetInstance()->SetDialog(NULL);
  }
}

/*
 * Add JUIView to popup window
 */
void JUIDialog::AddView(JUIView *view) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      obj_, "addView", "(Landroid/view/View;)V", view->GetJobject());
  views_.push_back(view);
}

void JUIDialog::Show() {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "show", "()V");
  jui_helper::JUIWindow::GetInstance()->SetDialog(this);
}

void JUIDialog::Suspend() {
  //Close existing dialog
  DeleteObject();
  LOGI("Suspending Dialog");
  suspended_ = true;
}

void JUIDialog::Resume(ANativeActivity *activity) {
  LOGI("Resuming Dialog");
  activity_ = activity;
  DeleteObject();

  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this]() {
    suspended_ = false;
    //Creating dialog asynchronous to avoid a crash inside a framework
    CreateDialog();
    RestoreParameters(map_attributes_);

    //Restore widgets
    auto itBegin = views_.begin();
    auto itEnd = views_.end();
    while (itBegin != itEnd) {
      //Restore
      (*itBegin)->Restore();
      ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
          obj_, "addView", "(Landroid/view/View;)V", (*itBegin)->GetJobject());

      itBegin++;
    }

    Show(); //Show the dialog again
  });
}

void JUIDialog::DispatchEvent(const int32_t message, const int32_t param1,
                              const int32_t param2) {
  switch (message) {
  case JUICALLBACK_DIALOG_DISMISSED:
    if (suspended_ == false) {
      jui_helper::JUIWindow::GetInstance()->SetDialog(NULL);
      if (dismiss_callback_)
        dismiss_callback_(this, message);
    }
    break;
  case JUICALLBACK_DIALOG_CANCELLED:
    if (suspended_ == false) {
      jui_helper::JUIWindow::GetInstance()->SetDialog(NULL);
      if (cancel_callback_)
        cancel_callback_(this, message);
    }
    break;
  default:
    break;
  }
}

bool
JUIDialog::SetCallback(const int32_t message,
                       std::function<void(jui_helper::JUIDialog *dialog,
                                          const int32_t message)> callback) {
  switch (message) {
  case JUICALLBACK_DIALOG_DISMISSED:
    dismiss_callback_ = callback;
    break;
  case JUICALLBACK_DIALOG_CANCELLED:
    cancel_callback_ = callback;
    break;
  default:
    break;
  }
  return true;
}

void
JUIDialog::RestoreParameters(std::unordered_map<std::string, int32_t> &map) {
  auto it = map_attribute_parameters.begin();
  auto itEnd = map_attribute_parameters.end();
  while (it != itEnd) {
    AttributeParameterStore &p = map_attribute_parameters[it->first];
    switch (p.type) {
    case ATTRIBUTE_PARAMETER_INT:
      JUIBase::SetAttribute(map, it->first.c_str(), (int32_t) p.i);
      break;
    case ATTRIBUTE_PARAMETER_FLOAT:
      JUIBase::SetAttribute(map, it->first.c_str(), p.f);
      break;
    case ATTRIBUTE_PARAMETER_BOOLEAN:
      JUIBase::SetAttribute(map, it->first.c_str(), p.f);
      break;
    case ATTRIBUTE_PARAMETER_STRING:
      JUIBase::SetAttribute(map, it->first.c_str(), p.str->c_str());
      break;
    case ATTRIBUTE_PARAMETER_IF:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_if.i1,
                            p.param_if.f2);
      break;
    case ATTRIBUTE_PARAMETER_FF:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_ff.f1,
                            p.param_ff.f2);
      break;
    case ATTRIBUTE_PARAMETER_IIII:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_iiii.i1,
                            p.param_iiii.i2, p.param_iiii.i3, p.param_iiii.i4);
      break;
    case ATTRIBUTE_PARAMETER_FFFI:
      JUIBase::SetAttribute(map, it->first.c_str(), p.param_fffi.f1,
                            p.param_fffi.f2, p.param_fffi.f3, p.param_fffi.i);
      break;
    default:
      break;
    }
    it++;
  }
}

/*
 * JUIAlert dialog
 */
std::unordered_map<std::string, int32_t> JUIAlertDialog::map_attributes_;
const AttributeType JUIAlertDialog::attributes_[] = {
  { "Icon", ATTRIBUTE_PARAMETER_INT },
  { "IconAttribute", ATTRIBUTE_PARAMETER_INT },
  { "InverseBackgroundForced", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Message", ATTRIBUTE_PARAMETER_STRING },
  { "Title", ATTRIBUTE_PARAMETER_STRING },
  { "ButtonPositive", ATTRIBUTE_PARAMETER_STRING },
  { "ButtonNeutral", ATTRIBUTE_PARAMETER_STRING },
  { "ButtonNegative", ATTRIBUTE_PARAMETER_STRING },
};

JUIAlertDialog::JUIAlertDialog(ANativeActivity *activity)
    : JUIDialog(), callback_positive_(NULL), callback_negative_(NULL),
      callback_neutral_(NULL) {
  Init(activity);
}

JUIAlertDialog::~JUIAlertDialog() {}

/*
 *Init
 */
void JUIAlertDialog::Init(ANativeActivity *activity) {
  //setup attribute map (once)
  if (map_attributes_.size() == 0) {
    //Add base class's map
    map_attributes_.insert(JUIDialog::map_attributes_.begin(),
                           JUIDialog::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }

  activity_ = activity;
  CreateDialog();
}

void JUIAlertDialog::CreateDialog() {
  ndk_helper::JNIHelper &helper = *ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper.AttachCurrentThread();

  //Create dialog
  jmethodID mid = env->GetMethodID(
      JUIWindow::GetInstance()->GetHelperClass(), "createAlertDialog",
      "(Landroid/app/NativeActivity;)Ljava/lang/Object;");
  jobject obj =
      env->CallObjectMethod(JUIWindow::GetInstance()->GetHelperClassInstance(),
                            mid, activity_->clazz);
  if (obj == NULL) {
    LOGI("Failed creating Dialog object");
  }
  obj_ = env->NewGlobalRef(obj);

  //Notify 'id' to JNI side
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "setID", "(I)V",
                                                       id_factory_.getId(this));
  env->DeleteLocalRef(obj);
}

void JUIAlertDialog::Resume(ANativeActivity *activity) {
  LOGI("JUIAlertDialog Resuming Dialog");
  activity_ = activity;
  DeleteObject();

  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this]() {
    suspended_ = false;
    //Creating dialog asynchronous to avoid a crash inside a framework
    CreateDialog();
    RestoreParameters(map_attributes_);

    //Restore widgets
    auto itBegin = views_.begin();
    auto itEnd = views_.end();
    while (itBegin != itEnd) {
      //Restore
      (*itBegin)->Restore();
      ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
          obj_, "addView", "(Landroid/view/View;)V", (*itBegin)->GetJobject());
      itBegin++;
    }

    Show(); //Show the dialog again
  });
}

void JUIAlertDialog::DispatchEvent(const int32_t message, const int32_t param1,
                                   const int32_t param2) {
  switch (message) {
  case JUICALLBACK_BUTTON_UP:
    switch (param1) {
    case ALERTDIALOG_BUTTON_NEGATIVE:
      callback_negative_(NULL, JUICALLBACK_BUTTON_UP);
      break;
    case ALERTDIALOG_BUTTON_POSITIVE:
      callback_positive_(NULL, JUICALLBACK_BUTTON_UP);
      break;
    case ALERTDIALOG_BUTTON_NEUTRAL:
      callback_neutral_(NULL, JUICALLBACK_BUTTON_UP);
      break;
    default:
      break;
    }
    break;
  default:
    JUIDialog::DispatchEvent(message, param1, param2);
    break;
  }
}

bool JUIAlertDialog::SetButton(
    const int32_t button, const char *message,
    std::function<void(jui_helper::JUIView *, const int32_t)> callback) {
  switch (button) {
  case ALERTDIALOG_BUTTON_NEGATIVE:
    callback_negative_ = callback;
    SetAttribute("ButtonNegative", message);
    break;
  case ALERTDIALOG_BUTTON_POSITIVE:
    callback_positive_ = callback;
    SetAttribute("ButtonPositive", message);
    break;
  case ALERTDIALOG_BUTTON_NEUTRAL:
    callback_neutral_ = callback;
    SetAttribute("ButtonNeutral", message);
    break;
  default:
    break;
  }
  return true;
}

} //namespace jui_helper

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_Layouts.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include "JavaUI.h"

namespace jui_helper {

/*
 * JUILinearLayout
 */
std::unordered_map<std::string, int32_t> JUILinearLayout::map_attributes_;
const AttributeType JUILinearLayout::attributes_[] = {
  { "BaselineAligned", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "BaselineAlignedChildIndex", ATTRIBUTE_PARAMETER_INT },
  { "DividerPadding", ATTRIBUTE_PARAMETER_INT },
  { "Gravity", ATTRIBUTE_PARAMETER_INT },
  { "HorizontalGravity", ATTRIBUTE_PARAMETER_INT },
  { "MeasureWithLargestChildEnabled", ATTRIBUTE_PARAMETER_BOOLEAN },
  { "Orientation", ATTRIBUTE_PARAMETER_INT },
  { "ShowDividers", ATTRIBUTE_PARAMETER_INT },
  { "VerticalGravity", ATTRIBUTE_PARAMETER_INT },
  { "WeightSum", ATTRIBUTE_PARAMETER_FLOAT },
};

JUILinearLayout::JUILinearLayout() : JUIView() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUILinearLayout", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  Init();
}

JUILinearLayout::JUILinearLayout(const bool b) : JUIView() {
  if (b == true)
    JUILinearLayout();
  else
    Init();
}

void JUILinearLayout::Init() {
  //setup attribute map (once)
  if (map_attributes_.size() == 0) {
    //Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUILinearLayout::~JUILinearLayout() {
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    delete *itBegin;
    itBegin++;
  }

  views_.clear();

  JUIWindow::GetInstance()->CloseWidget(obj_);
}

void JUILinearLayout::Restore() {
  //Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUILinearLayout", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);

  //Restore widgets
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    //Restore
    (*itBegin)->Restore();
    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
        JUIWindow::GetHelperClassInstance(), "addView",
        "(Landroid/view/ViewGroup;Landroid/view/View;)V", GetJobject(),
        (*itBegin)->GetJobject());

    itBegin++;
  }

}

/*
 * Add JUIView to the layout
 */
void JUILinearLayout::AddView(JUIView *view) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "addView",
      "(Landroid/view/ViewGroup;Landroid/view/View;)V", GetJobject(),
      view->GetJobject());
  views_.push_back(view);
}

/*
 * JUIRadioGroup
 */
JUIRadioGroup::JUIRadioGroup() : JUILinearLayout(false) {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRadioGroup", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

}

JUIRadioGroup::~JUIRadioGroup() { JUIWindow::GetInstance()->CloseWidget(obj_); }

void JUIRadioGroup::Restore() {
  //Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRadioGroup", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);

  //Restore widgets
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    //Restore
    (*itBegin)->Restore();
    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
        JUIWindow::GetHelperClassInstance(), "addView",
        "(Landroid/view/ViewGroup;Landroid/view/View;)V", GetJobject(),
        (*itBegin)->GetJobject());

    itBegin++;
  }
}

/*
 * JUIRelativeLayout
 */
std::unordered_map<std::string, int32_t> JUIRelativeLayout::map_attributes_;
const AttributeType JUIRelativeLayout::attributes_[] = {
  { "Gravity", ATTRIBUTE_PARAMETER_INT },
  { "HorizontalGravity", ATTRIBUTE_PARAMETER_INT },
  { "IgnoreGravity", ATTRIBUTE_PARAMETER_INT },
  { "VerticalGravity", ATTRIBUTE_PARAMETER_INT },
};

JUIRelativeLayout::JUIRelativeLayout() : JUIView() {
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRelativeLayout", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  Init();
}

JUIRelativeLayout::JUIRelativeLayout(const bool b) : JUIView() {
  if (b == true)
    JUIRelativeLayout();
  else
    Init();
}

void JUIRelativeLayout::Init() {
  //setup attribute map (once)
  if (map_attributes_.size() == 0) {
    //Add base class's map
    map_attributes_.insert(JUIView::map_attributes_.begin(),
                           JUIView::map_attributes_.end());

    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }
}

JUIRelativeLayout::~JUIRelativeLayout() {
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    delete *itBegin;
    itBegin++;
  }

  views_.clear();

  JUIWindow::GetInstance()->CloseWidget(obj_);
}

void JUIRelativeLayout::Restore() {
  //Recreate Java Widget when the activity has been disposed
  obj_ = JUIWindow::GetInstance()->CreateWidget("JUIRelativeLayout", this);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  RestoreParameters(map_attributes_);

  //Restore widgets
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    //Restore
    (*itBegin)->Restore();
    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
        JUIWindow::GetHelperClassInstance(), "addView",
        "(Landroid/view/ViewGroup;Landroid/view/View;)V", GetJobject(),
        (*itBegin)->GetJobject());

    itBegin++;
  }
}

/*
 * Add JUIView to the layout
 */
void JUIRelativeLayout::AddView(JUIView *view) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      JUIWindow::GetHelperClassInstance(), "addView",
      "(Landroid/view/ViewGroup;Landroid/view/View;)V", GetJobject(),
      view->GetJobject());
  views_.push_back(view);
}

} //namespace jui_helper

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_Toast.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "JavaUI.h"

namespace jui_helper {

/*
 * JUIToast, showing java ui toast
 */
std::unordered_map<std::string, int32_t> JUIToast::map_attributes_;
const AttributeType JUIToast::attributes_[] = {
  { "Duration", ATTRIBUTE_PARAMETER_INT },
  { "Gravity", ATTRIBUTE_PARAMETER_III }, { "Margin", ATTRIBUTE_PARAMETER_FF },
  { "Text", ATTRIBUTE_PARAMETER_STRING },
};

JUIToast::JUIToast() { InitToast(); }

JUIToast::JUIToast(const char *str) {
  InitToast();
  SetAttribute("Text", str);
}

JUIToast::JUIToast(const char *str, const int32_t duration) {
  InitToast();
  SetAttribute("Text", str);
  SetAttribute("Duration", duration);

}

void JUIToast::InitToast() {
  // setup attribute map (once)
  if (map_attributes_.size() == 0) {
    for (int32_t i = 0; i < sizeof(attributes_) / sizeof(attributes_[0]); ++i) {
      map_attributes_[std::string(attributes_[i].attribute_name)] =
          attributes_[i].attribute_type;
    }
  }

  // Init toast object
  JNIEnv *env = ndk_helper::JNIHelper::GetInstance()->AttachCurrentThread();
  jclass cls = ndk_helper::JNIHelper::GetInstance()->RetrieveClass(
      env, "android/widget/Toast");

  jmethodID mid = env->GetStaticMethodID(
      cls, "makeText", "(Landroid/content/Context;Ljava/lang/"
                       "CharSequence;I)Landroid/widget/Toast;");

  jobject context = JUIWindow::GetInstance()->GetContext();
  jstring emptyString = env->NewStringUTF("");
  jobject obj = env->CallStaticObjectMethod(cls, mid, context, emptyString, 0);
  obj_ = env->NewGlobalRef(obj);
  if (obj_ == NULL)
    LOGI("Class initialization failure");

  env->DeleteLocalRef(emptyString);
  env->DeleteLocalRef(obj);
  env->DeleteLocalRef(cls);
}

JUIToast::~JUIToast() {
  if (obj_) {
    ndk_helper::JNIHelper::GetInstance()->DeleteObject(obj_);
    obj_ = NULL;
  }
}

void JUIToast::SetView(JUIView *view) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      obj_, "show", "(Landroid/view/View;)V", view->GetJobject());
}

void JUIToast::Show() {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "show", "()V");
}

void JUIToast::Cancel() {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, "cancel", "()V");
}

} // namespace jui_helper

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_Toast.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef JAVAUI_TOAST_H_
#define JAVAUI_TOAST_H_

#include "JavaUI_View.h"

namespace jui_helper {

/*
 * JUIToast class
 * To show the toast, use this class like below.
 * Note that this class needs to be invoked inside UIThread
 *
 *  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread( []()
 {
 jui_helper::JUIToast toast("Toast!");
 toast.Show();
 } );
 *
 */
class JUIToast : JUIBase {
  friend class JUIWindow;

public:
  JUIToast();
  JUIToast(const char *str);
  JUIToast(const char *str, const int32_t duration);
  virtual ~JUIToast();

  /*
   * Set a view in the toast
   */
  void SetView(JUIView *view);

  /*
   * Show the toast
   */
  void Show();

  /*
   * Cancel (pending) toast
   */
  void Cancel();

  /*
   * Set attributes to the component
   * For a list of attributes, refer attributes_ array
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

  template <typename T, typename T2>
  bool SetAttribute(const char *strAttribute, T t, T2 t2) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t, t2);
  }

  template <typename T, typename T2, typename T3>
  bool SetAttribute(const char *strAttribute, T p1, T2 p2, T3 p3) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, p1, p2, p3);
  }

  /*
   * Get attribute
   */
  template <typename T> bool GetAttribute(const char *strAttribute, T &value) {
    return JUIBase::GetAttribute(map_attributes_, strAttribute, value);
  }

private:
  static const AttributeType attributes_[];

  void InitToast();

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;

};

} //namespace ndkHelper

#endif /* JAVAUI_TOAST_H_ */

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_View.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef JAVAUI_VIEW_H_
#define JAVAUI_VIEW_H_

namespace jui_helper {

/*
 * Layout parameters for AddRule() call.
 * Similar behavior to Java RelativeLayout definitions
 */
enum LayoutParameterType {
  LAYOUT_PARAMETER_UNKNOWN = -2,
  LAYOUT_PARAMETER_TRUE = -1,
  LAYOUT_PARAMETER_LEFT_OF = 0,
  LAYOUT_PARAMETER_RIGHT_OF = 1,
  LAYOUT_PARAMETER_ABOVE = 2,
  LAYOUT_PARAMETER_BELOW = 3,
  LAYOUT_PARAMETER_ALIGN_BASELINE = 4,
  LAYOUT_PARAMETER_ALIGN_LEFT = 5,
  LAYOUT_PARAMETER_ALIGN_TOP = 6,
  LAYOUT_PARAMETER_ALIGN_RIGHT = 7,
  LAYOUT_PARAMETER_ALIGN_BOTTOM = 8,
  LAYOUT_PARAMETER_ALIGN_PARENT_LEFT = 9,
  LAYOUT_PARAMETER_ALIGN_PARENT_TOP = 10,
  LAYOUT_PARAMETER_ALIGN_PARENT_RIGHT = 11,
  LAYOUT_PARAMETER_ALIGN_PARENT_BOTTOM = 12,
  LAYOUT_PARAMETER_CENTER_IN_PARENT = 13,
  LAYOUT_PARAMETER_CENTER_HORIZONTAL = 14,
  LAYOUT_PARAMETER_CENTER_VERTICAL = 15,
  LAYOUT_PARAMETER_START_OF = 16,
  LAYOUT_PARAMETER_END_OF = 17,
  LAYOUT_PARAMETER_ALIGN_START = 18,
  LAYOUT_PARAMETER_ALIGN_END = 19,
  LAYOUT_PARAMETER_ALIGN_PARENT_START = 20,
  LAYOUT_PARAMETER_ALIGN_PARENT_END = 21,
  LAYOUT_PARAMETER_COUNT = 22,
};

/*
 * Callback type for event callbacks in widgets.
 * Parameter for SetCallback() call.
 */
enum JUICallbackType {
  JUICALLBACK_SEEKBAR_STOP_TRACKING_TOUCH = 1,
  JUICALLBACK_SEEKBAR_START_TRACKING_TOUCH = 2,
  JUICALLBACK_SEEKBAR_PROGRESSCHANGED = 3,
  JUICALLBACK_COMPOUNDBUTTON_CHECKED = 4,
  JUICALLBACK_BUTTON_DOWN = 5,
  JUICALLBACK_BUTTON_UP = 6,
  JUICALLBACK_BUTTON_CANCELED = 7,

  JUICALLBACK_DIALOG_DISMISSED = 108,
  JUICALLBACK_DIALOG_CANCELLED = 109,
};

/*
 * Gravity attribute settings
 */
enum AttributeGravityType {
  ATTRIBUTE_GRAVITY_TOP = 0x30,
  ATTRIBUTE_GRAVITY_BOTTOM = 0x50,
  ATTRIBUTE_GRAVITY_LEFT = 0x03,
  ATTRIBUTE_GRAVITY_RIGHT = 0x05,
  ATTRIBUTE_GRAVITY_CENTER_VERTICAL = 0x10,
  ATTRIBUTE_GRAVITY_FILL_VERTICAL = 0x70,
  ATTRIBUTE_GRAVITY_CENTER_HORIZONTAL = 0x01,
  ATTRIBUTE_GRAVITY_FILL_HORIZONTAL = 0x07,
  ATTRIBUTE_GRAVITY_CENTER = 0x11,
  ATTRIBUTE_GRAVITY_FILL = 0x77,
  ATTRIBUTE_GRAVITY_CLIP_VERTICAL = 0x80,
  ATTRIBUTE_GRAVITY_CLIP_HORIZONTAL = 0x08,
  ATTRIBUTE_GRAVITY_START = 0x00800003,
  ATTRIBUTE_GRAVITY_END = 0x00800005,
};

/*
 * Attribute unit for SetAttribute() parameter
 */
enum AttributeUnitType {
  ATTRIBUTE_UNIT_PX = 0x0,
  ATTRIBUTE_UNIT_DIP = 0x1,
  ATTRIBUTE_UNIT_SP = 0x2,
  ATTRIBUTE_UNIT_PT = 0x3,
  ATTRIBUTE_UNIT_IN = 0x4,
  ATTRIBUTE_UNIT_MM = 0x5,
};

/*
 * Size attribute for AddRule()
 */
enum AttributeSizeType {
  ATTRIBUTE_SIZE_MATCH_PARENT = -1,
  ATTRIBUTE_SIZE_WRAP_CONTENT = -2,
};

/*
 * Linear layout orientation
 */
enum LayoutOrientationType {
  LAYOUT_ORIENTATION_HORIZONTAL = 0,
  LAYOUT_ORIENTATION_VERTICAL = 1,
};

/*
 * Enum for alert dialog button
 */
enum AlertDialogButtonType {
  ALERTDIALOG_BUTTON_NEGATIVE = -2,
  ALERTDIALOG_BUTTON_NEUTRAL = -3,
  ALERTDIALOG_BUTTON_POSITIVE = -1,
};

/*
 * ProgressBar style
 */
enum ProgressBarStyleType {
  PROGRESS_BAR_STYLE_DEFAULT = 0x01010077,
  PROGRESS_BAR_STYLE_HIROZONTAL = 0x01010078,
  PROGRESS_BAR_STYLE_SMALL = 0x01010079,
  PROGRESS_BAR_STYLE_LARGE = 0x101007A,
  PROGRESS_BAR_STYLE_INVERSE = 0x01010287,
  PROGRESS_BAR_STYLE_SMALL_INVERSE = 0x01010288,
  PROGRESS_BAR_STYLE_LARGE_INVARSE = 0x01010289,
  PROGRESS_BAR_STYLE_SMALL_TITLE = 0x0101020f,
};

enum ViewVisibility {
  VIEW_VISIVILITY_VISIBLE = 0,
  VIEW_VISIVILITY_INVISIBLE = 4,
  VIEW_VISIVILITY_GONE = 8,
};

/*
 * Internal enums for attribute parameter type
 */
enum AttributeParapeterType {
  ATTRIBUTE_PARAMETER_INT,
  ATTRIBUTE_PARAMETER_FLOAT,
  ATTRIBUTE_PARAMETER_BOOLEAN,
  ATTRIBUTE_PARAMETER_STRING,
  ATTRIBUTE_PARAMETER_IF,   //parameters of int32_t, float
  ATTRIBUTE_PARAMETER_FF,   //parameters of 2 floats
  ATTRIBUTE_PARAMETER_III,  //parameters of int32_t, int32_t, int32_t
  ATTRIBUTE_PARAMETER_IIII, //parameters of int32_t, int32_t, int32_t, int32_t
  ATTRIBUTE_PARAMETER_FFFI, //parameters of float, float, float, int32_t
};

/*
 * Internal structure to store attribute parameters
 */
struct AttributeParameterStore {
  AttributeParapeterType type;
  union {
    int32_t i;
    float f;
    bool b;
    std::string *str;
    struct {
      int32_t i1;
      float f2;
    } param_if;
    struct {
      float f1;
      float f2;
    } param_ff;
    struct {
      int32_t i1;
      int32_t i2;
      int32_t i3;
    } param_iii;
    struct {
      float f1;
      float f2;
      float f3;
      int32_t i;
    } param_fffi;
    struct {
      int32_t i1;
      int32_t i2;
      int32_t i3;
      int32_t i4;
    } param_iiii;
  };
};

struct AttributeType {
  const char *attribute_name;
  const int32_t attribute_type;
};

/*
 * class IdFactory: cache UI pointers and generate an ID, send ID to Java side
 *                  when get id back from Java, retrieve the UI pointer for that
 *                  ID, and continue. Mainly purpose is for things to be called
 *                  back on UI thread
 */
class JUIBase;
class IdFactory {
   public:
      int32_t   getId(const JUIBase* ui_object);
      JUIBase*  getUIBase(int32_t ui_id);
      void      debugDumpCurrentHashTable(void);
      bool      insert(const JUIBase* ui_object);
      bool      remove(const JUIBase* ui_object);

   private:
      std::unordered_map<const JUIBase*, int32_t> ids_;
      static int32_t cur_id_;
};

/*
 * Base class of JUIView
 */
class JUIBase {
public:
  JUIBase() : obj_(NULL) {  id_factory_.insert(this); }
  virtual ~JUIBase() {  id_factory_.remove(this); }

  /*
   * Dispatch Widget events. This one is called from Java code through
   * Java_com_sample_helper_JUIHelper_JUICallbackHandler()
   */
  virtual void DispatchEvent(const int32_t message, const int32_t param1,
                             const int32_t param2) {}

  /*
   * Template for 1 parameter version of SetAttribute
   */
  template <typename T>
  bool SetAttribute(std::unordered_map<std::string, int32_t> &map,
                    const char *strAttribute, const T t) {
    LOGI("Attribute '%s' updating", strAttribute);
    auto it = map.find(strAttribute);
    if (it != map.end()) {
      std::string s = std::string("set");
      s += it->first;

      AttributeParameterStore &p = map_attribute_parameters[it->first];
      switch (it->second) {
      case ATTRIBUTE_PARAMETER_INT:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(I)V", (int32_t) t);
        p.type = ATTRIBUTE_PARAMETER_INT;
        p.i = (int32_t) t;
        break;
      case ATTRIBUTE_PARAMETER_FLOAT:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, s.c_str(),
                                                             "(F)V", (float) t);
        p.type = ATTRIBUTE_PARAMETER_FLOAT;
        p.f = (float) t;
        break;
      case ATTRIBUTE_PARAMETER_BOOLEAN:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(obj_, s.c_str(),
                                                             "(Z)V", (bool) t);
        p.type = ATTRIBUTE_PARAMETER_BOOLEAN;
        p.b = (bool) t;
        break;
      default:
        LOGI("Attribute parameter does not match : %s", strAttribute);
        break;
      }
    } else {
      LOGI("Attribute '%s' not found", strAttribute);
      return false;
    }
    return true;
  }

  /*
   * Specialized Template for string version of SetAttribute
   */
  bool SetAttribute(std::unordered_map<std::string, int32_t> &map,
                    const char *strAttribute, const char *str) {
    auto it = map.find(strAttribute);
    if (it != map.end()) {
      std::string s = std::string("set");
      s += it->first;

      AttributeParameterStore &p = map_attribute_parameters[it->first];
      switch (it->second) {
      case ATTRIBUTE_PARAMETER_STRING: {
        JNIEnv *env =
            ndk_helper::JNIHelper::GetInstance()->AttachCurrentThread();
        jstring string = env->NewStringUTF(str);
        jstring stringGlobal = (jstring) env->NewGlobalRef(string);
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(Ljava/lang/CharSequence;)V", stringGlobal);
        env->DeleteGlobalRef(stringGlobal);
        env->DeleteLocalRef(string);

        p.type = ATTRIBUTE_PARAMETER_STRING;
        if (p.str != NULL) {
          if (p.str->compare(str) != 0) {
            delete p.str;
            p.str = new std::string(str);
          }
        } else {
          p.str = new std::string(str);
        }
      } break;
      default:
        LOGI("Attribute parameter does not match : %s", strAttribute);
        break;
      }
    } else {
      LOGI("Attribute '%s' not found", strAttribute);
      return false;
    }
    return true;
  }

  /*
   * Template for 2 parameters version of SetAttribute
   */
  template <typename T, typename T2>
  bool SetAttribute(std::unordered_map<std::string, int32_t> &map,
                    const char *strAttribute, T t, T2 t2) {
    auto it = map.find(strAttribute);
    if (it != map.end()) {
      std::string s = std::string("set");
      s += it->first;

      AttributeParameterStore &p = map_attribute_parameters[it->first];
      switch (it->second) {
      case ATTRIBUTE_PARAMETER_IF:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(IF)V", (int32_t) t, (float) t2);
        p.type = ATTRIBUTE_PARAMETER_IF;
        p.param_if.i1 = (int32_t) t;
        p.param_if.f2 = (float) t2;
        break;
      case ATTRIBUTE_PARAMETER_FF:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(FF)V", (float) t, (float) t2);
        p.type = ATTRIBUTE_PARAMETER_FF;
        p.param_ff.f1 = (float) t;
        p.param_ff.f2 = (float) t2;
        break;
      default:
        LOGI("Attribute parameter does not match : %s", strAttribute);
        break;
      }
    } else {
      LOGI("Attribute '%s' not found", strAttribute);
      return false;
    }
    return true;
  }

  /*
   * Template for 4 parameters version of SetAttribute
   */
  template <typename T, typename T2, typename T3, typename T4>
  bool SetAttribute(std::unordered_map<std::string, int32_t> &map,
                    const char *strAttribute, T p1, T2 p2, T3 p3, T4 p4) {
    auto it = map.find(strAttribute);
    if (it != map.end()) {
      std::string s = std::string("set");
      s += it->first;

      AttributeParameterStore &p = map_attribute_parameters[it->first];
      switch (it->second) {
      case ATTRIBUTE_PARAMETER_IIII:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(IIII)V", (int32_t) p1, (int32_t) p2,
            (int32_t) p3, (int32_t) p4);
        p.type = ATTRIBUTE_PARAMETER_IIII;
        p.param_iiii.i1 = (int32_t) p1;
        p.param_iiii.i2 = (int32_t) p2;
        p.param_iiii.i3 = (int32_t) p3;
        p.param_iiii.i4 = (int32_t) p4;
        break;
      case ATTRIBUTE_PARAMETER_FFFI:
        ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
            obj_, s.c_str(), "(FFFI)V", (float) p1, (float) p2, (float) p3,
            (int32_t) p4);
        p.type = ATTRIBUTE_PARAMETER_FFFI;
        p.param_fffi.f1 = (float) p1;
        p.param_fffi.f2 = (float) p2;
        p.param_fffi.f3 = (float) p3;
        p.param_fffi.i = (int32_t) p4;
        break;
      default:
        LOGI("Attribute parameter does not match : %s", strAttribute);
        break;
      }
    } else {
      LOGI("Attribute '%s' not found", strAttribute);
      return false;
    }
    return true;
  }

  /*
   * Retrieve attribute
   */
  template <typename T>
  bool GetAttribute(std::unordered_map<std::string, int32_t> &map,
                    const char *strAttribute, T &value) {
    T ret;
    auto it = map.find(strAttribute);
    if (it != map.end()) {
      std::string s = std::string("get");
      s += it->first;

      switch (it->second) {
      case ATTRIBUTE_PARAMETER_INT:
        ret = (T) ndk_helper::JNIHelper::GetInstance()->CallIntMethod(
            obj_, s.c_str(), "()I");
        break;
      case ATTRIBUTE_PARAMETER_FLOAT:
        ret = (T) ndk_helper::JNIHelper::GetInstance()->CallFloatMethod(
            obj_, s.c_str(), "()F");
        break;
      case ATTRIBUTE_PARAMETER_BOOLEAN:
        ret = (T) ndk_helper::JNIHelper::GetInstance()->CallBooleanMethod(
            obj_, s.c_str(), "()Z");
        break;
      default:
        ret = 0;
        break;
      }
    } else {
      LOGI("Attribute '%s' not found", strAttribute);
      return false;
    }
    value = ret;
    return true;
  }

  static IdFactory id_factory_;

protected:
  std::unordered_map<std::string, AttributeParameterStore>
      map_attribute_parameters;
  jobject obj_;
  jobject GetJobject() { return obj_; }
};

/*
 * JUIView class
 */
class JUIView : public JUIBase {
  friend class JUIWindow;
  friend class JUILinearLayout;
  friend class JUIRelativeLayout;
  friend class JUIRadioGroup;
  friend class JUIToast;
  friend class JUIDialog;
  friend class JUIAlertDialog;

public:
  JUIView();
  virtual ~JUIView();

  /*
   * Add layout rule to the widget
   */
  void AddRule(const int32_t layoutParameterIndex, const int32_t parameter);
  void AddRule(const int32_t layoutParameterIndex, const JUIView *parameter);
  /*
   * Set LayoutParams for RelativeLayout
   */
  void SetLayoutParams(const int32_t width, const int32_t height);
  /*
   * Set LayoutParams for LinearLayout
   */
  void SetLayoutParams(const int32_t width, const int32_t height,
                       const float f);

  /*
   * Set Margins
   */
  void SetMargins(const int32_t left, const int32_t top, const int32_t right,
                  const int32_t bottom);

  /*
   * Set attribute of the widget
   * See attributes_ for available attribute names
   */
  template <typename T> bool SetAttribute(const char *strAttribute, const T t) {
    return SetAttribute(map_attributes_, strAttribute, t);
  }

  bool SetAttribute(const char *strAttribute, const char *str) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, str);
  }

  template <typename T, typename T2>
  bool SetAttribute(const char *strAttribute, T t, T2 t2) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, t, t2);
  }

  template <typename T, typename T2, typename T3, typename T4>
  bool SetAttribute(const char *strAttribute, T p1, T2 p2, T3 p3, T4 p4) {
    return JUIBase::SetAttribute(map_attributes_, strAttribute, p1, p2, p3, p4);
  }

  template <typename T> bool GetAttribute(const char *strAttribute, T &value) {
    return JUIBase::GetAttribute(map_attributes_, strAttribute, value);
  }

private:
  const static AttributeType attributes_[];
  int32_t array_current_rules_[LAYOUT_PARAMETER_COUNT];

  int32_t layoutWidth_;
  int32_t layoutHeight_;
  float layoutWeight_;

  int32_t marginLeft_;
  int32_t marginRight_;
  int32_t marginTop_;
  int32_t marginBottom_;

protected:
  static std::unordered_map<std::string, int32_t> map_attributes_;

  void RestoreParameters(std::unordered_map<std::string, int32_t> &map);
  virtual void Restore() = 0;
};

} //namespace ndkHelper

#endif /* JAVAUI_VIEW_H_ */

```

`samples-android/Common/JuiHelper/src/main/cpp/JavaUI_Window.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "JavaUI.h"

namespace jui_helper {

/*
 * JUIWindow
 */
JUIWindow::JUIWindow()
    : activity_(NULL), suspended_(false), windowDestroyed_(false),
      jni_helper_java_ref_(NULL), jni_helper_java_class_(NULL), dialog_(NULL) {
  JUIBase::id_factory_.insert(reinterpret_cast<const JUIBase*>(this));
  views_.clear();
}

JUIWindow::~JUIWindow() {
  ndk_helper::JNIHelper *helper = ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper->AttachCurrentThread();

  env->DeleteGlobalRef(jni_helper_java_ref_);
  env->DeleteGlobalRef(jni_helper_java_class_);

  JUIBase::id_factory_.remove(reinterpret_cast<const JUIBase *>(this));

}

/*
 * Singleton implementation, JUIWindow is a single instance that put
 * all of widget on that
 */
JUIWindow *JUIWindow::GetInstance() {
  static JUIWindow window;
  return &window;
}

jobject JUIWindow::GetHelperClassInstance() {
  if (JUIWindow::GetInstance()->jni_helper_java_ref_ == NULL)
    LOGE("JUIWindow::GetHelperClass(): Null helper class instance!");
  return JUIWindow::GetInstance()->jni_helper_java_ref_;
}

jclass JUIWindow::GetHelperClass() {
  if (JUIWindow::GetInstance()->jni_helper_java_class_ == NULL)
    LOGE("JUIWindow::GetHelperClass(): Null helper class!");
  return JUIWindow::GetInstance()->jni_helper_java_class_;
}

/*
 * Init
 */
void JUIWindow::Init(ANativeActivity *activity, const char *helper_class_name) {
  JUIWindow &window = *GetInstance();
  LOGI("Initialized Java UI");
  if (window.activity_) {
    LOGI("The class has been already initialized with an activity");
    return;
  }
  window.activity_ = activity;

  ndk_helper::JNIHelper &helper = *ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper.AttachCurrentThread();

  if (helper_class_name != NULL && window.jni_helper_java_class_ == NULL &&
      window.jni_helper_java_ref_ == NULL) {
    //Instantiate JUIHelper class
    jclass cls = helper.RetrieveClass(env, helper_class_name);

    window.jni_helper_java_class_ = (jclass) env->NewGlobalRef(cls);

    jmethodID constructor =
        env->GetMethodID(window.jni_helper_java_class_, "<init>",
                         "(Landroid/app/NativeActivity;)V");
    window.jni_helper_java_ref_ = env->NewObject(window.jni_helper_java_class_,
                                                 constructor, activity->clazz);
    window.jni_helper_java_ref_ =
        env->NewGlobalRef(window.jni_helper_java_ref_);
    env->DeleteLocalRef(cls);
  }

  //Create popupWindow
  jmethodID mid = env->GetMethodID(
      window.jni_helper_java_class_, "createPopupWindow",
      "(Landroid/app/NativeActivity;)Landroid/widget/PopupWindow;");
  jobject obj = env->CallObjectMethod(window.jni_helper_java_ref_, mid,
                                      window.activity_->clazz);
  jobject objGlobal = env->NewGlobalRef(obj);

  if (objGlobal == NULL) {
    LOGI("Failed creating popupWindow");
  }
  window.popupWindow_ = objGlobal;
  env->DeleteLocalRef(obj);
}

/*
 * Suspend
 */
void JUIWindow::Suspend(const int32_t cmd) {
  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  if (cmd == APP_CMD_TERM_WINDOW)
    windowDestroyed_ = true;

  if (suspended_ == true) {
    LOGI("The window has been suspended already");
    return;
  }

  LOGI("Suspending JUI");
  if (popupWindow_) {
    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
        jni_helper_java_ref_, "suspendPopupWindow",
        "(Landroid/widget/PopupWindow;)V", popupWindow_);
    popupWindow_ = NULL;
  }

  if (dialog_) {
    dialog_->Suspend();
  }

  suspended_ = true;
}

/*
 * Resume
 */
void JUIWindow::Resume(ANativeActivity *activity, const int32_t cmd) {
  if (suspended_ != true) {
    LOGI("The window has not been suspended");
    return;
  }

  /*
   * Special case handling for sleep
   * In case of the situation that
   * 1) screen has been slept
   * 2) but lockscreen has not been initiated
   * Only a message coming is:
   * APP_CMD_START & APP_CMD_TERM_RESUME
   * Usually windows should not be initialized at these message,
   * but we do it only for the situation
   */
  LOGI("resuming %d, %d", cmd, windowDestroyed_);
  if (windowDestroyed_ == true && cmd == APP_CMD_RESUME) {
    LOGI("Won't resume JUI");
    return;
  }

  LOGI("Resuming JUI");

  //Re-initialize popupWindow
  activity_ = NULL;
  Init(activity);

  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      jni_helper_java_ref_, "resumePopupWindow",
      "(Landroid/app/NativeActivity;Landroid/widget/PopupWindow;)V",
      activity_->clazz, popupWindow_);

  //Restore widgets
  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    //Restore
    (*itBegin)->Restore();
    ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
        jni_helper_java_ref_, "addView", "(Landroid/view/View;)V",
        (*itBegin)->GetJobject());

    itBegin++;
  }

  //Restore dialog
  if (dialog_)
    dialog_->Resume(activity);

  LOGI("Resumed JUI");
  suspended_ = false;
  windowDestroyed_ = false;
}

/*
 * Close
 */
void JUIWindow::Close() {
  LOGI("Closing JUI");
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      jni_helper_java_ref_, "closePopupWindow",
      "(Landroid/widget/PopupWindow;)V", popupWindow_);
  ndk_helper::JNIHelper::GetInstance()->DeleteObject(popupWindow_);

  auto itBegin = views_.begin();
  auto itEnd = views_.end();
  while (itBegin != itEnd) {
    delete *itBegin;
    itBegin++;
  }

  views_.clear();

  if (dialog_)
    dialog_->Close();

  activity_ = NULL;
  popupWindow_ = NULL;
}

/*
 * Add JUIView to popup window
 */
void JUIWindow::AddView(JUIView *view) {
  ndk_helper::JNIHelper::GetInstance()->CallVoidMethod(
      jni_helper_java_ref_, "addView", "(Landroid/view/View;)V",
      view->GetJobject());
  views_.push_back(view);
}

jobject JUIWindow::CreateWidget(const char *strWidgetName, void *id) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return NULL;
  }

  ndk_helper::JNIHelper *helper = ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper->AttachCurrentThread();

  //Create widget
  jstring name = env->NewStringUTF(strWidgetName);
  static jmethodID mid = NULL;
  if (mid == NULL) {
    mid = env->GetMethodID(jni_helper_java_class_, "createWidget",
                           "(Ljava/lang/String;I)Landroid/view/View;");
    if (mid == NULL) {
      LOGI("method ID 'createWidget', "
           "'(Ljava/lang/String;I)Landroid/view/View;' not found");
      return NULL;
    }
  }

  jobject obj = env->CallObjectMethod(jni_helper_java_ref_, mid, name, JUIBase::id_factory_.getId(reinterpret_cast<const JUIBase*>(id)));
  jobject objGlobal = env->NewGlobalRef(obj);
  env->DeleteLocalRef(name);
  env->DeleteLocalRef(obj);

  return objGlobal;
}

jobject JUIWindow::CreateWidget(const char *strWidgetName, void *id,
                                const int32_t param) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return NULL;
  }

  ndk_helper::JNIHelper *helper = ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper->AttachCurrentThread();

  //Create widget
  jstring name = env->NewStringUTF(strWidgetName);
  static jmethodID mid = NULL;
  if (mid == NULL) {
    mid = env->GetMethodID(jni_helper_java_class_, "createWidget",
                           "(Ljava/lang/String;II)Landroid/view/View;");
    if (mid == NULL) {
      LOGI("method ID 'createWidget', "
           "'(Ljava/lang/String;II)Landroid/view/View;' not found");
      return NULL;
    }
  }
  jobject obj = env->CallObjectMethod(jni_helper_java_ref_, mid, name,
                                      JUIBase::id_factory_.getId(reinterpret_cast<const JUIBase*>(id)), (int32_t) param);

  jobject objGlobal = env->NewGlobalRef(obj);
  env->DeleteLocalRef(name);
  env->DeleteLocalRef(objGlobal);
  return objGlobal;
}

void JUIWindow::CloseWidget(jobject obj) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return;
  }

  ndk_helper::JNIHelper *helper = ndk_helper::JNIHelper::GetInstance();
  JNIEnv *env = helper->AttachCurrentThread();

  static jmethodID mid = NULL;
  if (mid == NULL) {
    mid = env->GetMethodID(jni_helper_java_class_, "closeWidget",
                           "(Landroid/view/View;)V");
    if (mid == NULL) {
      LOGI("method  not found");
      return;
    }
  }

  env->CallVoidMethod(jni_helper_java_ref_, mid, obj);
  env->DeleteGlobalRef(obj);

  return;
}

} //namespace jui_helper

```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIAlertDialog.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.view.View;
import android.widget.RelativeLayout;
import android.app.AlertDialog;
import android.app.NativeActivity;
import android.content.DialogInterface;

/*
 * Java UI AlertDialog implementation
 * Helper functions for jui_helper
 */
public class JUIAlertDialog extends AlertDialog {

    private NativeActivity activity_;
    private RelativeLayout dialogRelativeLayout_;
    private int id_ = 0;

    public JUIAlertDialog(final NativeActivity act) {
        super(act);
        activity_ = act;

        // Setup relative layout
        dialogRelativeLayout_ = new RelativeLayout(activity_);
        setView(dialogRelativeLayout_);

        setOnDismissListener(new OnDismissListener() {
            @Override
            public void onDismiss(DialogInterface dialog) {
                if (id_ != 0)
                    JUIHelper.JUICallbackHandler(id_,
                            JUIHelper.JUICALLBACK_DIALOG_DISMISSED, 0, 0);
            }
        });

        setOnCancelListener(new OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                if (id_ != 0)
                    JUIHelper.JUICallbackHandler(id_,
                            JUIHelper.JUICALLBACK_DIALOG_CANCELLED, 0, 0);
            }
        });
    }

    public void setID(int id) {
        id_ = id;
    }

    public void addView(final View view) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (dialogRelativeLayout_ != null)
                    dialogRelativeLayout_.addView(view);
            }
        });
    }

    private OnClickListener listener = new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            if (id_ != 0)
                JUIHelper.JUICallbackHandler(id_,
                        JUIHelper.JUICALLBACK_BUTTON_UP, which, 0);
        }
    };

    public void setButtonPositive(CharSequence text) {
        setButton(BUTTON_POSITIVE, text, listener);
    }

    public void setButtonNegative(CharSequence text) {
        setButton(BUTTON_NEGATIVE, text, listener);
    }

    public void setButtonNeutral(CharSequence text) {
        setButton(BUTTON_NEUTRAL, text, listener);
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIButton.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;

//
//Java UI SeekBar implementation
//
public class JUIButton extends Button {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUIButton(final NativeActivity activity) {
        super(activity, null, android.R.attr.buttonStyle);

        final Drawable d = getBackground();

        setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.i("test", "clicked, action" + event.getAction());
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    // setPressed(true);
                    d.setState(PRESSED_ENABLED_STATE_SET);

                    JUIHelper.JUICallbackHandler(getId(),
                            JUIHelper.JUICALLBACK_BUTTON_DOWN, 0, 0);
                    return true;
                    // break;
                case MotionEvent.ACTION_CANCEL:
                    JUIHelper.JUICallbackHandler(getId(),
                            JUIHelper.JUICALLBACK_BUTTON_CANCEL, 0, 0);
                    return true;
                case MotionEvent.ACTION_UP:
                    JUIHelper.JUICallbackHandler(getId(),
                            JUIHelper.JUICALLBACK_BUTTON_UP, 0, 0);
                    d.setState(ENABLED_STATE_SET);

                    // setPressed(false);
                    // break;
                    return true;
                case MotionEvent.ACTION_MOVE:
                    d.setState(PRESSED_ENABLED_STATE_SET);
                    return true;

                }

                return false;
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }
}

```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUICheckBox.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.CheckBox;
import android.widget.CompoundButton;

/*
 * Java UI Checkbox implementation
 */
public class JUICheckBox extends CheckBox {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUICheckBox(final NativeActivity activity) {
        super(activity);

        setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_COMPOUNDBUTTON_CHECKEDCHANGED,
                        isChecked ? 1 : 0, 0);
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUICheckedTextView.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.CheckedTextView;

/*
 * Java UI CheckedTextView implementation
 */
public class JUICheckedTextView extends CheckedTextView {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUICheckedTextView(final NativeActivity activity) {
        super(activity);

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIDialog.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.view.View;
import android.widget.RelativeLayout;
import android.annotation.SuppressLint;
import android.app.Dialog;
import android.app.NativeActivity;
import android.content.DialogInterface;

/*
 * Java UI Dialog implementation
 */
public class JUIDialog extends Dialog {

    private NativeActivity activity_;
    private RelativeLayout dialogRelativeLayout_;
    private int id_ = 0;

    public JUIDialog(final NativeActivity act) {
        super(act);
        activity_ = act;

        // Setup relative layout
        dialogRelativeLayout_ = new RelativeLayout(activity_);
        setContentView(dialogRelativeLayout_);

        setOnDismissListener(new OnDismissListener() {
            @Override
            public void onDismiss(DialogInterface dialog) {
                NDKHelper.checkSOLoaded();
                if (id_ != 0)
                    JUIHelper.JUICallbackHandler(id_,
                            JUIHelper.JUICALLBACK_DIALOG_DISMISSED, 0, 0);
            }
        });

        setOnCancelListener(new OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                NDKHelper.checkSOLoaded();
                if (id_ != 0)
                    JUIHelper.JUICallbackHandler(id_,
                            JUIHelper.JUICALLBACK_DIALOG_CANCELLED, 0, 0);
            }
        });
    }

    public void setID(int id) {
        id_ = id;
    }

    @SuppressLint("NewApi")
    public void addView(final View view) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (dialogRelativeLayout_ != null)
                    dialogRelativeLayout_.addView(view);
            }
        });
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIForwardingPopupWindow.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.content.Context;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.Window;
import android.widget.LinearLayout;
import android.widget.PopupWindow;

/*
 * Popup window that forward user inputs to underlying widgets
 */
class JUIForwardingLayout extends LinearLayout {
    View target;

    public JUIForwardingLayout(Context context) {
        super(context);
    }

    public JUIForwardingLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setTarget(View view) {
        target = view;
    }

    public boolean onTouchEvent(MotionEvent ev) {
        if (target != null)
            target.dispatchTouchEvent(ev);
        return true;
    }
}

public class JUIForwardingPopupWindow extends PopupWindow {
    JUIForwardingPopupWindow(final NativeActivity activity, final View view) {
        super(view.getWidth(), view.getHeight());

        JUIForwardingLayout dummyRelativeLayout = new JUIForwardingLayout(
                activity);
        dummyRelativeLayout.setTarget(view);
        setContentView(dummyRelativeLayout);

        activity.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Window window = activity.getWindow();
                if( window != null )
                {
                    View decor = window.getDecorView();
                    if( decor != null )
                    {
                        showAtLocation(decor, Gravity.TOP
                                | Gravity.START, view.getLeft(), view.getTop());
                    }
                }

            }
        });
    }

    void update(View view) {
        int[] location = new int[2];
        view.getLocationInWindow(location);
        super.update(location[0], location[1], view.getWidth(),
                view.getHeight());
    }
}

```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIHelper.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.sample.helper;

import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.util.LinkedList;

import android.annotation.TargetApi;
import android.app.Dialog;
import android.app.NativeActivity;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Build;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.MarginLayoutParams;
import android.view.Window;
import android.view.WindowManager.LayoutParams;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.RadioGroup;
import android.widget.RelativeLayout;

@TargetApi(Build.VERSION_CODES.GINGERBREAD)
public class JUIHelper {
    private static final String TAG = "JUIHelper";

    public JUIHelper(NativeActivity act) {
        activity_ = act;
    }

    private NativeActivity activity_;

    //
    // JUI related helpers
    //
    private LinkedList<PopupWindow> dummyWindows_ = new LinkedList<>();
    private RelativeLayout JUIRelativeLayout_;
    public static final int JUICALLBACK_SEEKBAR_STOP_TRACKING_TOUCH = 1;
    public static final int JUICALLBACK_SEEKBAR_START_TRACKING_TOUCH = 2;
    public static final int JUICALLBACK_SEEKBAR_PROGRESSCHANGED = 3;
    public static final int JUICALLBACK_COMPOUNDBUTTON_CHECKEDCHANGED = 4;
    public static final int JUICALLBACK_BUTTON_DOWN = 5;
    public static final int JUICALLBACK_BUTTON_UP = 6;
    public static final int JUICALLBACK_BUTTON_CANCEL = 7;
    public static final int JUICALLBACK_DIALOG_DISMISSED = 108;
    public static final int JUICALLBACK_DIALOG_CANCELLED = 109;

    native static public void JUICallbackHandler(int id, int message,
            int param1, int pram2);

    private void initializeWidget(final View view) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                // Check if the control has dummy popupwindow to forward user
                // inputs
                try {
                    Method method = view.getClass().getMethod("getDummyWindow");
                    JUIForwardingPopupWindow window = (JUIForwardingPopupWindow) method
                            .invoke(view);
                    if (window != null)
                        dummyWindows_.add(window);
                } catch (NoSuchMethodException e) {
                    return;
                } catch (Exception e) {
                    return;
                }

                // Set layoutParameter for Widget
                RelativeLayout.LayoutParams relativeParams = new RelativeLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                view.setLayoutParams(relativeParams);
            }
        });
    }

    public View createWidget(String className, int id) {
        View view;
        try {
            String baseName = getClass().getName().substring(0,
                    getClass().getName().lastIndexOf(".") + 1);
            @SuppressWarnings("rawtypes")
            Class cls = Class.forName(baseName + className);
            @SuppressWarnings("unchecked")
            Constructor<View> ctor = cls.getConstructor(NativeActivity.class);
            view = ctor.newInstance(activity_);
            view.setId(id);
        } catch (Exception e) {
            return null;
        }

        initializeWidget(view);
        return view;
    }

    public View createWidget(String className, int id, int param) {
        View view;
        try {
            String baseName = getClass().getName().substring(0,
                    getClass().getName().lastIndexOf(".") + 1);
            @SuppressWarnings("rawtypes")
            Class cls = Class.forName(baseName + className);
            @SuppressWarnings("unchecked")
            Constructor<View> ctor = cls.getConstructor(NativeActivity.class,
                    int.class);
            view = ctor.newInstance(activity_, param);
            view.setId(id);
        } catch (Exception e) {
            return null;
        }

        initializeWidget(view);
        return view;
    }

    public void closeWidget(final View view) {
        JUIForwardingPopupWindow window = null;
        // Check if the control has dummy popupwindow to forward user inputs
        try {
            Method method = view.getClass().getMethod("getDummyWindow");
            window = (JUIForwardingPopupWindow) method.invoke(view);
        } catch (Exception e) {
            Log.e(TAG, "Exception closing view", e);
        }

        final PopupWindow closingWindow = window;
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (closingWindow != null) {
                    dummyWindows_.remove(closingWindow);
                    closingWindow.dismiss();
                }
                JUIRelativeLayout_.removeView(view);
            }
        });
    }

    public void addRule(final View view, final int param1, final int param2) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                RelativeLayout.LayoutParams relativeParams = (RelativeLayout.LayoutParams) view
                        .getLayoutParams();
                relativeParams.addRule(param1, param2);
            }
        });
    }

    public void setLayoutParams(final View view, final int width,
            final int height) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                ViewGroup.LayoutParams params = view.getLayoutParams();
                params.width = width;
                params.height = height;
            }
        });
    }

    public void setMargins(final View view, final int left, final int top,
            final int right, final int bottom) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view
                        .getLayoutParams();
                params.setMargins(left, top, right, bottom);
            }
        });
    }

    public void setLayoutParams(final View view, final int width,
            final int height, final float weight) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                ViewGroup.LayoutParams params = view.getLayoutParams();

                if (params instanceof LinearLayout.LayoutParams) {
                    LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) params;
                    layoutParams.width = width;
                    layoutParams.height = height;
                    layoutParams.weight = weight;
                } else {
                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            width, height, weight);
                    view.setLayoutParams(layoutParams);
                }
            }
        });
    }

    public void addView(final View view) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (JUIRelativeLayout_ != null) {
                    JUIRelativeLayout_.addView(view);
                    ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view
                            .getLayoutParams();

                    if (!(params instanceof RelativeLayout.LayoutParams)) {
                        // Switching to relative layout param
                        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                                params.width, params.height);
                        layoutParams.leftMargin = params.leftMargin;
                        layoutParams.bottomMargin = params.bottomMargin;
                        layoutParams.rightMargin = params.rightMargin;
                        layoutParams.topMargin = params.topMargin;
                        view.setLayoutParams(layoutParams);
                    }
                }
            }
        });
    }

    public void addView(final ViewGroup layout, final View view) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                layout.addView(view);

                ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view
                        .getLayoutParams();
                if (layout instanceof RadioGroup) {
                    if (!(params instanceof RadioGroup.LayoutParams)) {
                        // Switching to linear layout param
                        RadioGroup.LayoutParams layoutParams = new RadioGroup.LayoutParams(
                                params.width, params.height);
                        layoutParams.leftMargin = params.leftMargin;
                        layoutParams.bottomMargin = params.bottomMargin;
                        layoutParams.rightMargin = params.rightMargin;
                        layoutParams.topMargin = params.topMargin;
                        view.setLayoutParams(layoutParams);
                    }
                } else if (layout instanceof LinearLayout) {
                    if (!(params instanceof LinearLayout.LayoutParams)) {
                        // Switching to linear layout param
                        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                                params.width, params.height);
                        layoutParams.leftMargin = params.leftMargin;
                        layoutParams.bottomMargin = params.bottomMargin;
                        layoutParams.rightMargin = params.rightMargin;
                        layoutParams.topMargin = params.topMargin;
                        view.setLayoutParams(layoutParams);
                    }
                } else if (layout instanceof RelativeLayout) {
                    if (!(params instanceof RelativeLayout.LayoutParams)) {
                        // Switching to linear layout param
                        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
                                params.width, params.height);
                        layoutParams.leftMargin = params.leftMargin;
                        layoutParams.bottomMargin = params.bottomMargin;
                        layoutParams.rightMargin = params.rightMargin;
                        layoutParams.topMargin = params.topMargin;
                        view.setLayoutParams(layoutParams);
                    }
                }
            }
        });
    }

    //
    // Create PopupWindow over nativeActivity with RelativeLayout
    //
    public PopupWindow createPopupWindow(final NativeActivity act) {
        // Check manifest settings if the activity wouldn't be destroyed when
        // the device orientation changes
        try {
            ActivityInfo info = act.getPackageManager().getActivityInfo(
                    act.getComponentName(), 0);
            if ((info.configChanges & ActivityInfo.CONFIG_ORIENTATION) == 0
                    || (info.configChanges & ActivityInfo.CONFIG_SCREEN_SIZE) == 0) {
                Log.i("NDKHelper",
                        "Activity does not have android:configChanges='orientation|screenSize' attributes in AndroidManifest.xml.");
            }
        } catch (NameNotFoundException e) {
            Log.e(TAG,"Exception creating popup window", e);
        }

        activity_ = act;
        // activity.setTheme(android.R.style.Theme_DeviceDefault);

        final PopupWindow popupWindow = new PopupWindow(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);

        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Window window = activity_.getWindow();
                if( window != null )
                {
                    View decorView = window.getDecorView();
                    if( decorView == null )
                    {
                        // Put dummy layout to NativeActivity
                        LinearLayout mainLayout = new LinearLayout(activity_);
                        MarginLayoutParams params = new MarginLayoutParams(
                                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
                        params.setMargins(0, 0, 0, 0);
                        activity_.setContentView(mainLayout, params);
                        decorView = mainLayout;
                    }

                    // Setup relative layout
                    JUIRelativeLayout_ = new RelativeLayout(activity_);
                    popupWindow.setContentView(JUIRelativeLayout_);

                    // Show our UI over NativeActivity window
                    popupWindow.showAtLocation(decorView, Gravity.TOP
                            | Gravity.START, 0, 0);
                    popupWindow.setTouchable(false);
                    popupWindow.update();
                }
            }
        });
        return popupWindow;
    }

    public void suspendPopupWindow(final PopupWindow window) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                // Dismiss dummy windows
                for (PopupWindow w : dummyWindows_) {
                    w.dismiss();
                }
                dummyWindows_.clear();
                window.dismiss();
                if (dialog_ != null)
                    dialog_.dismiss();

                JUIRelativeLayout_ = null;
            }
        });
    }

    public void resumePopupWindow(NativeActivity act, final PopupWindow p) {
        activity_ = act;
    }

    public void closePopupWindow(final PopupWindow window) {
        activity_.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                // Dismiss dummy windows
                for (PopupWindow w : dummyWindows_) {
                    w.dismiss();
                }
                dummyWindows_.clear();
                window.dismiss();

                if (dialog_ != null)
                    dialog_.dismiss();
            }
        });
    }

    /*
     * Dialog helpers
     */
    private Dialog dialog_;

    public Object createDialog(final NativeActivity act) {
        JUIDialog dlg = new JUIDialog(act);
        dialog_ = dlg;

        return dlg;
    }

    public Object createAlertDialog(final NativeActivity act) {
        JUIAlertDialog dlg = new JUIAlertDialog(act);
        dialog_ = dlg;
        return dlg;
    }
}

```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUILinearLayout.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.LinearLayout;

/*
 * Java UI LinearLayout implementation
 */
public class JUILinearLayout extends LinearLayout {
    public JUIForwardingPopupWindow getDummyWindow() {
        return null;
    }

    public JUILinearLayout(final NativeActivity activity) {
        super(activity);
    }
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIProgressBar.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.ProgressBar;

/*
 * Java UI ProgressBar implementation
 */
public class JUIProgressBar extends ProgressBar {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUIProgressBar(final NativeActivity activity) {
        super(activity);
        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    public JUIProgressBar(final NativeActivity activity, int param ) {
        super(activity, null, param );
        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIRadioButton.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.annotation.TargetApi;
import android.app.NativeActivity;
import android.os.Build;
import android.widget.CompoundButton;
import android.widget.RadioButton;

/*
 * Java UI RadioButton implementation
 */
public class JUIRadioButton extends RadioButton {
    private JUIForwardingPopupWindow dummyPopupWindow;

    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUIRadioButton(final NativeActivity activity) {
        super(activity);

        setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_COMPOUNDBUTTON_CHECKEDCHANGED,
                        isChecked ? 1 : 0, 0);
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIRadioGroup.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.RadioGroup;

//
//Java UI LinearLayout implementation
//
public class JUIRadioGroup extends RadioGroup {
	public JUIForwardingPopupWindow getDummyWindow() {
		return null;
	}

	public JUIRadioGroup(final NativeActivity activity) {
		super(activity);
	}
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIRelativeLayout.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.RelativeLayout;

/*
 * Java UI RelativeLayout implementation
 */
public class JUIRelativeLayout extends RelativeLayout {
    public JUIForwardingPopupWindow getDummyWindow() {
        return null;
    }

    public JUIRelativeLayout(final NativeActivity activity) {
        super(activity);
    }
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUISeekBar.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.SeekBar;

/*
 * Java UI SeelBar implementation
 */
public class JUISeekBar extends SeekBar {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUISeekBar(final NativeActivity activity) {
        super(activity);
        setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onStopTrackingTouch(SeekBar arg0) {
                JUIHelper
                        .JUICallbackHandler(
                                getId(),
                                JUIHelper.JUICALLBACK_SEEKBAR_STOP_TRACKING_TOUCH,
                                0, 0);
            }

            public void onStartTrackingTouch(SeekBar arg0) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_SEEKBAR_START_TRACKING_TOUCH, 0,
                        0);
            }

            public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_SEEKBAR_PROGRESSCHANGED, arg1,
                        arg2 ? 1 : 0);
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }
}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUISwitch.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.annotation.TargetApi;
import android.app.NativeActivity;
import android.os.Build;
import android.widget.CompoundButton;
import android.widget.Switch;

//
//Java UI Switch implementation
//
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public class JUISwitch extends Switch {
    private JUIForwardingPopupWindow dummyPopupWindow;

    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUISwitch(final NativeActivity activity) {
        super(activity);

        setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_COMPOUNDBUTTON_CHECKEDCHANGED,
                        isChecked ? 1 : 0, 0);
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }
    
    @Override 
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        
        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUITextView.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.TextView;

/*
 * Java UI TextView implementation
 */
public class JUITextView extends TextView {
    public JUITextView(final NativeActivity activity) {
        super(activity);
    }

    public JUIForwardingPopupWindow getDummyWindow() {
        return null;
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/JUIToggleButton.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.sample.helper;

import android.app.NativeActivity;
import android.widget.CompoundButton;
import android.widget.ToggleButton;

//
//Java UI ToggleButton implementation
//
public class JUIToggleButton extends ToggleButton {
    private JUIForwardingPopupWindow dummyPopupWindow;

    public JUIForwardingPopupWindow getDummyWindow() {
        return dummyPopupWindow;
    }

    public JUIToggleButton(final NativeActivity activity) {
        super(activity);

        setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                JUIHelper.JUICallbackHandler(getId(),
                        JUIHelper.JUICALLBACK_COMPOUNDBUTTON_CHECKEDCHANGED,
                        isChecked ? 1 : 0, 0);
            }
        });

        dummyPopupWindow = new JUIForwardingPopupWindow(activity, this);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Put dummy popupWindow over the control
        // so that relativeLayout can pass through touch events to native
        // activity for a background area
        if (changed) {
            dummyPopupWindow.update(this);
        }
    }

}
```

`samples-android/Common/JuiHelper/src/main/java/com/sample/helper/NDKHelper.java`:

```java
/*
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.sample.helper;

import android.annotation.TargetApi;
import android.app.NativeActivity;
import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.media.AudioManager;
import android.media.AudioTrack;
import android.opengl.GLUtils;
import android.os.Build;
import android.util.Log;

import java.io.File;
import java.io.FileInputStream;

import javax.microedition.khronos.opengles.GL10;

@TargetApi(Build.VERSION_CODES.GINGERBREAD)
public class NDKHelper {

  private static final String TAG = "NDKHelper";

  public NDKHelper(NativeActivity act) {
    activity = act;
  }

  public void loadLibrary(String soname) {
    if (!soname.isEmpty()) {
      System.loadLibrary(soname);
      loadedSO = true;
    }
  }

  public static Boolean checkSOLoaded() {
    if (!loadedSO) {
      Log.e("NDKHelper",
              "--------------------------------------------\n"
                      + ".so has not been loaded. To use JUI helper, please initialize with \n"
                      + "NDKHelper::Init( ANativeActivity* activity, const char* helper_class_name, const char* native_soname);\n"
                      + "--------------------------------------------\n");
      return false;
    } else
      return true;
  }

  private static boolean loadedSO = false;
  NativeActivity activity;

  //
  // Load Bitmap
  // Java helper is useful decoding PNG, TIFF etc rather than linking libPng
  // etc separately
  //
  private int nextPOT(int i) {
    int pot = 1;
    while (pot < i)
      pot <<= 1;
    return pot;
  }

  private Bitmap scaleBitmap(Bitmap bitmapToScale, float newWidth,
                             float newHeight) {
    if (bitmapToScale == null)
      return null;
    // get the original width and height
    int width = bitmapToScale.getWidth();
    int height = bitmapToScale.getHeight();
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();

    // resize the bit map
    matrix.postScale(newWidth / width, newHeight / height);

    // recreate the new Bitmap and set it back
    return Bitmap.createBitmap(bitmapToScale, 0, 0,
            bitmapToScale.getWidth(), bitmapToScale.getHeight(), matrix,
            true);
  }

  public class TextureInformation {
    boolean ret;
    boolean alphaChannel;
    int originalWidth;
    int originalHeight;
  }

  public Object loadTexture(String path) {
    Bitmap bitmap = null;
    TextureInformation info = new TextureInformation();
    try {
      String str = path;
      if (!path.startsWith("/")) {
        str = "/" + path;
      }

      File file = new File(activity.getExternalFilesDir(null), str);
      if (file.canRead()) {
        bitmap = BitmapFactory.decodeStream(new FileInputStream(file));
      } else {
        bitmap = BitmapFactory.decodeStream(activity.getResources()
                .getAssets().open(path));
      }
      // Matrix matrix = new Matrix();
      // // resize the bit map
      // matrix.postScale(-1F, 1F);
      //
      // // recreate the new Bitmap and set it back
      // bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
      // bitmap.getHeight(), matrix, true);

    } catch (Exception e) {
      Log.w("NDKHelper", "Coundn't load a file:" + path);
      info.ret = false;
      return info;
    }

    if (bitmap != null) {
      GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
    }
    info.ret = true;
    info.alphaChannel = bitmap.hasAlpha();
    info.originalWidth = getBitmapWidth(bitmap);
    info.originalHeight = getBitmapHeight(bitmap);

    return info;

  }

  public Bitmap openBitmap(String path, boolean iScalePOT) {
    Bitmap bitmap = null;
    try {
      bitmap = BitmapFactory.decodeStream(activity.getResources()
              .getAssets().open(path));
      if (iScalePOT) {
        int originalWidth = getBitmapWidth(bitmap);
        int originalHeight = getBitmapHeight(bitmap);
        int width = nextPOT(originalWidth);
        int height = nextPOT(originalHeight);
        if (originalWidth != width || originalHeight != height) {
          // Scale it
          bitmap = scaleBitmap(bitmap, width, height);
        }
      }

    } catch (Exception e) {
      Log.w("NDKHelper", "Coundn't load a file:" + path);
    }

    return bitmap;
  }

  public int getBitmapWidth(Bitmap bmp) {
    return bmp.getWidth();
  }

  public int getBitmapHeight(Bitmap bmp) {
    return bmp.getHeight();
  }

  public void getBitmapPixels(Bitmap bmp, int[] pixels) {
    int w = bmp.getWidth();
    int h = bmp.getHeight();
    bmp.getPixels(pixels, 0, w, 0, 0, w, h);
  }

  public void closeBitmap(Bitmap bmp) {
    bmp.recycle();
  }

  public String getNativeLibraryDirectory(Context appContext) {
    ApplicationInfo ai = activity.getApplicationInfo();

    Log.w("NDKHelper", "ai.nativeLibraryDir:" + ai.nativeLibraryDir);

    if ((ai.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) != 0
            || (ai.flags & ApplicationInfo.FLAG_SYSTEM) == 0) {
      return ai.nativeLibraryDir;
    }
    return "/system/lib/";
  }

  public String getApplicationName() {
    final PackageManager pm = activity.getPackageManager();
    ApplicationInfo ai;
    try {
      ai = pm.getApplicationInfo(activity.getPackageName(), 0);
    } catch (final NameNotFoundException e) {
      ai = null;
    }
    String applicationName = (String) (ai != null ? pm
            .getApplicationLabel(ai) : "(unknown)");
    return applicationName;
  }

  public String getStringResource(String resourceName) {
    int id = activity.getResources().getIdentifier(resourceName, "string", activity.getPackageName());
    String value = id == 0 ? "" : (String) activity.getResources().getText(id);
    return value;
  }

  //
  // Audio related helpers
  //
  @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
  public int getNativeAudioBufferSize() {
    int SDK_INT = android.os.Build.VERSION.SDK_INT;
    if (SDK_INT >= 17) {
      AudioManager am = (AudioManager) activity
              .getSystemService(Context.AUDIO_SERVICE);
      if (am != null) {
        String framesPerBuffer = am
                .getProperty(AudioManager.PROPERTY_OUTPUT_FRAMES_PER_BUFFER);
        return Integer.parseInt(framesPerBuffer);
      } else {
        Log.e(TAG, "Cannot get Audio Service!");
      }
    }
    return 0;
  }

  public int getNativeAudioSampleRate() {
    return AudioTrack.getNativeOutputSampleRate(AudioManager.STREAM_SYSTEM);
  }

  /*
   * Helper to execute function in UIThread
   */
  public void runOnUIThread(final long p) {
    if (checkSOLoaded()) {
      activity.runOnUiThread(new Runnable() {
        @Override
        public void run() {
          RunOnUiThreadHandler(p);
        }
      });
    }
  }

  /*
   * Native code helper for RunOnUiThread
   */
  native public void RunOnUiThreadHandler(long pointer);
}

```

`samples-android/Common/NDKHelper/CMakeLists.txt`:

```txt
# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##

# For more information about using CMake with Android Studio, read the
# documentation: https://d.android.com/studio/projects/add-native-code.html

# Sets the minimum version of CMake required to build the native library.

cmake_minimum_required(VERSION 3.4.1)
set(CMAKE_VERBOSE_MAKEFILE on)

project(ndkhelper)

IF (NOT TARGET ndkhelper)
  add_library(ndkhelper STATIC
        src/main/cpp/gestureDetector.cpp
        src/main/cpp/gl3stub.cpp
        src/main/cpp/GLContext.cpp
        src/main/cpp/interpolator.cpp
        src/main/cpp/JNIHelper.cpp
        src/main/cpp/perfMonitor.cpp
        src/main/cpp/sensorManager.cpp
        src/main/cpp/shader.cpp
        src/main/cpp/tapCamera.cpp
        src/main/cpp/vecmath.cpp
  )

  target_include_directories(ndkhelper PRIVATE
        ${NDK_HELPER_PATH}
        ${ANDROID_NDK}/sources/android/native_app_glue
  )

  set_target_properties(ndkhelper PROPERTIES
        ARCHIVE_OUTPUT_DIRECTORY
        "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}"
  )

ENDIF(NOT TARGET ndkhelper)

```

`samples-android/Common/NDKHelper/build.gradle`:

```gradle
/* Copyright (C) 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
apply plugin: 'com.android.library'

android {
  compileSdkVersion 26
  defaultConfig {
    minSdkVersion 14
    targetSdkVersion 26

    ndk.abiFilters 'x86', 'armeabi-v7a', 'arm64-v8a'

    externalNativeBuild {
      cmake {
        cppFlags "-std=c++11 -frtti -Wall -Werror"
        targets "ndkhelper"
        arguments "-DNDK_HELPER_PATH=${project(':Common:JuiHelper').projectDir}",
                  "-DANDROID_STL=c++_static",
                  "-DANDROID_TOOLCHAIN=clang"
      }
    }
  }

  externalNativeBuild {
    cmake.path "CMakeLists.txt"
  }

  buildTypes {
    release {
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt')
    }
  }
}

```

`samples-android/Common/NDKHelper/src/main/AndroidManifest.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.google.example.games.juihelper">
    <application/>
</manifest>

```

`samples-android/Common/NDKHelper/src/main/cpp/GLContext.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// GLContext.cpp
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
// includes
//--------------------------------------------------------------------------------
#include <unistd.h>
#include <string.h>
#include "GLContext.h"
#include "gl3stub.h"

namespace ndk_helper {

//--------------------------------------------------------------------------------
// eGLContext
//--------------------------------------------------------------------------------
const int32_t SWAPINTERVAL_DEFAULT = 1;

//--------------------------------------------------------------------------------
// Ctor
//--------------------------------------------------------------------------------
GLContext::GLContext()
    : window_(nullptr), display_(EGL_NO_DISPLAY), surface_(EGL_NO_SURFACE),
      context_(EGL_NO_CONTEXT), screen_width_(0), screen_height_(0),
      msaa_size_(1), restoreInterval_(false),
      swapInterval_(SWAPINTERVAL_DEFAULT), gles_initialized_(false),
      egl_context_initialized_(false), es3_supported_(false), gl_version_(0),
      context_valid_(false) {}

void GLContext::InitGLES() {
  if (gles_initialized_)
    return;
  //
  //Initialize OpenGL ES 3 if available
  //
  const char *versionStr = reinterpret_cast<const char*>(glGetString(GL_VERSION));
  if (strstr(versionStr, "OpenGL ES 3.") && gl3stubInit()) {
    es3_supported_ = true;
    gl_version_ = 3.0f;
  } else {
    gl_version_ = 2.0f;
  }

  gles_initialized_ = true;
}

//--------------------------------------------------------------------------------
// Dtor
//--------------------------------------------------------------------------------
GLContext::~GLContext() { Terminate(); }

bool GLContext::Init(ANativeWindow *window, const int32_t msaa) {
  if (egl_context_initialized_)
    return true;

  //
  //Initialize EGL
  //
  window_ = window;
  msaa_size_ = msaa;
  InitEGLSurface();
  InitEGLContext();
  InitGLES();

  egl_context_initialized_ = true;

  return true;
}

bool GLContext::InitEGLSurface() {
  display_ = eglGetDisplay(EGL_DEFAULT_DISPLAY);
  eglInitialize(display_, 0, 0);

  /*
   * Here specify the attributes of the desired configuration.
   * Below, we select an EGLConfig with at least 8 bits per color
   * component compatible with on-screen windows
   */
  const EGLint attribs0[] = { EGL_RENDERABLE_TYPE,
                             EGL_OPENGL_ES2_BIT, //Request opengl ES2.0
                             EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_BLUE_SIZE, 8,
                             EGL_GREEN_SIZE, 8, EGL_RED_SIZE, 8, EGL_DEPTH_SIZE,
                             24, EGL_SAMPLES, msaa_size_, EGL_NONE };
  color_size_ = 8;
  depth_size_ = 24;

  EGLint num_configs;
  eglChooseConfig(display_, attribs0, &config_, 1, &num_configs);

  if (msaa_size_ > 1 && !num_configs) {
    LOGW("No EGL config with MSAA");
    //Fall back to non MSAA
    const EGLint attribs[] = { EGL_RENDERABLE_TYPE,
                               EGL_OPENGL_ES2_BIT, //Request opengl ES2.0
                               EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_BLUE_SIZE,
                               8, EGL_GREEN_SIZE, 8, EGL_RED_SIZE, 8,
                               EGL_DEPTH_SIZE, 24, EGL_NONE };
    msaa_size_ = 1;
    eglChooseConfig(display_, attribs, &config_, 1, &num_configs);
  }

  if (!num_configs) {
    LOGW("No 24bit depth buffer");

    //Fall back to 16bit depth buffer
    const EGLint attribs[] = { EGL_RENDERABLE_TYPE,
                               EGL_OPENGL_ES2_BIT, //Request opengl ES2.0
                               EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_BLUE_SIZE,
                               8, EGL_GREEN_SIZE, 8, EGL_RED_SIZE, 8,
                               EGL_DEPTH_SIZE, 16, EGL_NONE };
    eglChooseConfig(display_, attribs, &config_, 1, &num_configs);
    depth_size_ = 16;
  }

  if (!num_configs) {
    LOGW("Unable to retrieve EGL config");
    return false;
  }

  surface_ = eglCreateWindowSurface(display_, config_, window_, NULL);
  eglQuerySurface(display_, surface_, EGL_WIDTH, &screen_width_);
  eglQuerySurface(display_, surface_, EGL_HEIGHT, &screen_height_);

  return true;
}

bool GLContext::InitEGLContext() {
  const EGLint context_attribs[] = { EGL_CONTEXT_CLIENT_VERSION,
                                     2, //Request opengl ES2.0
                                     EGL_NONE };
  context_ = eglCreateContext(display_, config_, NULL, context_attribs);

  if (eglMakeCurrent(display_, surface_, surface_, context_) == EGL_FALSE) {
    LOGW("Unable to eglMakeCurrent");
    return false;
  }

  context_valid_ = true;
  return true;
}

EGLint GLContext::Swap() {
  bool b = eglSwapBuffers(display_, surface_);
  if (!b) {
    EGLint err = eglGetError();
    if (err == EGL_BAD_SURFACE) {
      //Recreate surface
      InitEGLSurface();
      err = EGL_SUCCESS; //Still consider glContext is valid
    } else if (err == EGL_CONTEXT_LOST || err == EGL_BAD_CONTEXT) {
      //Context has been lost!!
      context_valid_ = false;
      Terminate();
      InitEGLContext();
    }

    return err;
  }
  if (restoreInterval_ && swapInterval_ != SWAPINTERVAL_DEFAULT) {
    eglSwapInterval(display_, swapInterval_); //Restore Swap interval
  }
  return EGL_SUCCESS;
}

void GLContext::Terminate() {
  if (display_ != EGL_NO_DISPLAY) {
    eglMakeCurrent(display_, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT);
    if (context_ != EGL_NO_CONTEXT) {
      eglDestroyContext(display_, context_);
    }

    if (surface_ != EGL_NO_SURFACE) {
      eglDestroySurface(display_, surface_);
    }
    eglTerminate(display_);
  }

  display_ = EGL_NO_DISPLAY;
  context_ = EGL_NO_CONTEXT;
  surface_ = EGL_NO_SURFACE;
  context_valid_ = false;

}

EGLint GLContext::Resume(ANativeWindow *window) {
  if (egl_context_initialized_ == false) {
    Init(window, msaa_size_);
    return EGL_SUCCESS;
  }

  int32_t original_widhth = screen_width_;
  int32_t original_height = screen_height_;

  //Create surface
  window_ = window;
  surface_ = eglCreateWindowSurface(display_, config_, window_, NULL);
  eglQuerySurface(display_, surface_, EGL_WIDTH, &screen_width_);
  eglQuerySurface(display_, surface_, EGL_HEIGHT, &screen_height_);

  if (screen_width_ != original_widhth || screen_height_ != original_height) {
    //Screen resized
    LOGI("Screen resized");
  }

  if (eglMakeCurrent(display_, surface_, surface_, context_) == EGL_TRUE)
    return EGL_SUCCESS;

  EGLint err = eglGetError();
  LOGW("Unable to eglMakeCurrent %d", err);

  if (err == EGL_CONTEXT_LOST) {
    //Recreate context
    LOGI("Re-creating egl context");
    InitEGLContext();
  } else {
    //Recreate surface
    Terminate();
    InitEGLSurface();
    InitEGLContext();
  }

  return err;
}

void GLContext::Suspend() {
  if (surface_ != EGL_NO_SURFACE) {
    eglDestroySurface(display_, surface_);
    surface_ = EGL_NO_SURFACE;
  }
  restoreInterval_ = true;
}

bool GLContext::Invalidate() {
  Terminate();

  egl_context_initialized_ = false;
  return true;
}

bool GLContext::CheckExtension(const char *extension) {
  if (extension == NULL)
    return false;

  std::string extensions = std::string((char *)glGetString(GL_EXTENSIONS));
  std::string str = std::string(extension);
  str.append(" ");

  size_t pos = 0;
  if (extensions.find(extension, pos) != std::string::npos) {
    return true;
  }

  return false;
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/GLContext.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// GLContext.h
//--------------------------------------------------------------------------------
#ifndef GLCONTEXT_H_
#define GLCONTEXT_H_

#include <EGL/egl.h>
#include <GLES2/gl2.h>
#include <android/log.h>

#include "JNIHelper.h"

namespace ndk_helper {

//--------------------------------------------------------------------------------
// Constants
//--------------------------------------------------------------------------------

//--------------------------------------------------------------------------------
// Class
//--------------------------------------------------------------------------------

/******************************************************************
 * OpenGL context handler
 * The class handles OpenGL and EGL context based on Android activity life cycle
 * The caller needs to call corresponding methods for each activity life cycle
 * events as it's done in sample codes.
 *
 * Also the class initializes OpenGL ES3 when the compatible driver is installed
 * in the device.
 * getGLVersion() returns 3.0~ when the device supports OpenGLES3.0
 *
 * Thread safety: OpenGL context is expecting used within dedicated single
 * thread,
 * thus GLContext class is not designed as a thread-safe
 */
class GLContext {
private:
  //EGL configurations
  ANativeWindow *window_;
  EGLDisplay display_;
  EGLSurface surface_;
  EGLContext context_;
  EGLConfig config_;

  //Screen parameters
  int32_t screen_width_;
  int32_t screen_height_;
  int32_t color_size_;
  int32_t depth_size_;
  int32_t msaa_size_;

  //EGL Swap interval
  bool restoreInterval_;
  int32_t swapInterval_;

  //Flags
  bool gles_initialized_;
  bool egl_context_initialized_;
  bool es3_supported_;
  float gl_version_;
  bool context_valid_;

  void InitGLES();
  void Terminate();
  bool InitEGLSurface();
  bool InitEGLContext();

  GLContext(GLContext const &);
  void operator=(GLContext const &);
  GLContext();
  virtual ~GLContext();

public:
  static GLContext *GetInstance() {
    //Singleton
    static GLContext instance;

    return &instance;
  }

  bool Init(ANativeWindow *window, const int32_t msaa = 1);
  EGLint Swap();
  bool Invalidate();

  void Suspend();
  EGLint Resume(ANativeWindow *window);

  int32_t GetScreenWidth() { return screen_width_; }
  int32_t GetScreenHeight() { return screen_height_; }

  int32_t GetBufferColorSize() { return color_size_; }
  int32_t GetBufferDepthSize() { return depth_size_; }
  int32_t GetMSAASize() { return msaa_size_; }

  float GetGLVersion() { return gl_version_; }
  bool CheckExtension(const char *extension);

  /*
   * Set SwapInterval to EGL context
   * SwapInterval:1 indicates that frame rate is synchronous to vblank interval
   * which is usually 59.94hz.
   * In API 17 (JellyBeans)~, the API accepts value of 0, which does not sync to
   * vblank.
   * This mode is useful while performance tuning.
   */
  void SetSwapInterval(const int32_t interval) {
    eglSwapInterval(display_, interval);
    swapInterval_ = interval;
  }
};

} //namespace ndkHelper

#endif /* GLCONTEXT_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/JNIHelper.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include <EGL/egl.h>
#include <GLES2/gl2.h>
#include <fstream>
#include <iostream>
#include <assert.h>
#include <string.h>

#include "JNIHelper.h"

namespace ndk_helper {

#define NATIVEACTIVITY_CLASS_NAME "android/app/NativeActivity"

/*
 * JNI Helper functions
 */

/*
 * Singleton
 */
JNIHelper *JNIHelper::GetInstance() {
  static JNIHelper* pHelper = new JNIHelper();
  return pHelper;
}

/*
 * Ctor
 */
JNIHelper::JNIHelper() : activity_(NULL) {}

/*
 * Dtor
 */
JNIHelper::~JNIHelper() {
  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  JNIEnv *env = AttachCurrentThread();
  env->DeleteGlobalRef(jni_helper_java_ref_);
  env->DeleteGlobalRef(jni_helper_java_class_);
}

/*
 * Init
 */
void JNIHelper::Init(ANativeActivity *activity, const char *helper_class_name) {
  JNIHelper &helper = *GetInstance();

  helper.activity_ = activity;

  // Lock mutex
  std::lock_guard<std::mutex> lock(helper.mutex_);

  JNIEnv *env = helper.AttachCurrentThread();

  //Retrieve app bundle id
  jclass android_content_Context = env->GetObjectClass(helper.activity_->clazz);
  jmethodID midGetPackageName = env->GetMethodID(
      android_content_Context, "getPackageName", "()Ljava/lang/String;");

  jstring packageName = static_cast<jstring>(
      env->CallObjectMethod(helper.activity_->clazz, midGetPackageName));
  const char *appname = env->GetStringUTFChars(packageName, NULL);
  helper.app_bunlde_name_ = std::string(appname);

  //Instantiate JNIHelper class
  jclass cls = helper.RetrieveClass(env, helper_class_name);
  helper.jni_helper_java_class_ = static_cast<jclass>(env->NewGlobalRef(cls));

  jmethodID constructor =
      env->GetMethodID(helper.jni_helper_java_class_, "<init>",
                       "(Landroid/app/NativeActivity;)V");

  helper.jni_helper_java_ref_ = env
      ->NewObject(helper.jni_helper_java_class_, constructor, activity->clazz);
  helper.jni_helper_java_ref_ = env->NewGlobalRef(helper.jni_helper_java_ref_);

  //Get app label
  jstring labelName = static_cast<jstring>(
      helper.CallObjectMethod("getApplicationName", "()Ljava/lang/String;"));
  const char *label = env->GetStringUTFChars(labelName, NULL);
  helper.app_label_ = std::string(label);

  env->ReleaseStringUTFChars(packageName, appname);
  env->ReleaseStringUTFChars(labelName, label);
  env->DeleteLocalRef(packageName);
  env->DeleteLocalRef(labelName);
  env->DeleteLocalRef(cls);
}

void JNIHelper::Init(ANativeActivity *activity, const char *helper_class_name,
                     const char *native_soname) {
  Init(activity, helper_class_name);
  if (native_soname) {
    JNIHelper &helper = *GetInstance();
    // Lock mutex
    std::lock_guard<std::mutex> lock(helper.mutex_);

    JNIEnv *env = helper.AttachCurrentThread();

    // Setup soname
    jstring soname = env->NewStringUTF(native_soname);

    jmethodID mid = env->GetMethodID(helper.jni_helper_java_class_,
                                     "loadLibrary", "(Ljava/lang/String;)V");
    env->CallVoidMethod(helper.jni_helper_java_ref_, mid, soname);

    env->DeleteLocalRef(soname);
  }
}

/*
 * ReadFile
 */
bool JNIHelper::ReadFile(const char *fileName,
                         std::vector<uint8_t> *buffer_ref) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized.Call init() to initialize the "
         "helper");
    return false;
  }

  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  // First, try reading from externalFileDir;
  JNIEnv *env = AttachCurrentThread();

  jstring str_path = GetExternalFilesDirJString(env);
  const char *path = env->GetStringUTFChars(str_path, NULL);
  std::string s(path);

  if (fileName[0] != '/') {
    s.append("/");
  }
  s.append(fileName);
  std::ifstream f(s.c_str(), std::ios::binary);

  env->ReleaseStringUTFChars(str_path, path);
  env->DeleteLocalRef(str_path);
  activity_->vm->DetachCurrentThread();

  if (f) {
    LOGI("reading:%s", s.c_str());
    f.seekg(0, std::ifstream::end);
    long long int fileSize = f.tellg();
    f.seekg(0, std::ifstream::beg);
    buffer_ref->reserve(static_cast<unsigned long>(fileSize));
    buffer_ref->assign(std::istreambuf_iterator<char>(f),
                       std::istreambuf_iterator<char>());
    f.close();
    return true;
  } else {
    //Fallback to assetManager
    AAssetManager *assetManager = activity_->assetManager;
    AAsset *assetFile =
        AAssetManager_open(assetManager, fileName, AASSET_MODE_BUFFER);
    if (!assetFile) {
      return false;
    }
    const uint8_t *data = static_cast<const uint8_t*>(AAsset_getBuffer(assetFile));
    size_t size = static_cast<size_t>(AAsset_getLength(assetFile));
    if (data == NULL) {
      AAsset_close(assetFile);

      LOGI("Failed to load:%s", fileName);
      return false;
    }

    buffer_ref->reserve(size);
    buffer_ref->assign(data, data + size);

    AAsset_close(assetFile);
    return true;
  }
}

std::string JNIHelper::GetExternalFilesDir() {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return std::string("");
  }

  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  // First, try reading from externalFileDir;
  JNIEnv *env = AttachCurrentThread();

  jstring strPath = GetExternalFilesDirJString(env);
  const char *path = env->GetStringUTFChars(strPath, NULL);
  std::string s(path);

  env->ReleaseStringUTFChars(strPath, path);
  env->DeleteLocalRef(strPath);
  return s;
}

uint32_t JNIHelper::LoadTexture(const char *file_name, int32_t *outWidth,
                                int32_t *outHeight, bool *hasAlpha) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return 0;
  }

  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  JNIEnv *env = AttachCurrentThread();
  jstring name = env->NewStringUTF(file_name);

  GLuint tex;
  glGenTextures(1, &tex);
  glBindTexture(GL_TEXTURE_2D, tex);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                  GL_LINEAR_MIPMAP_NEAREST);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
  jmethodID mid = env->GetMethodID(jni_helper_java_class_, "loadTexture",
                                   "(Ljava/lang/String;)Ljava/lang/Object;");

  jobject out = env->CallObjectMethod(jni_helper_java_ref_, mid, name);

  jclass javaCls =
      RetrieveClass(env, "com/sample/helper/NDKHelper$TextureInformation");
  jfieldID fidRet = env->GetFieldID(javaCls, "ret", "Z");
  jfieldID fidHasAlpha = env->GetFieldID(javaCls, "alphaChannel", "Z");
  jfieldID fidWidth = env->GetFieldID(javaCls, "originalWidth", "I");
  jfieldID fidHeight = env->GetFieldID(javaCls, "originalHeight", "I");
  bool ret = env->GetBooleanField(out, fidRet);
  bool alpha = env->GetBooleanField(out, fidHasAlpha);
  int32_t width = env->GetIntField(out, fidWidth);
  int32_t height = env->GetIntField(out, fidHeight);
  if (!ret) {
    glDeleteTextures(1, &tex);
    tex = 0xffff;
    LOGI("Texture load failed %s", file_name);
  }
  LOGI("Loaded texture original size:%dx%d alpha:%d", width, height,
       static_cast<int32_t>(alpha));
  if (outWidth != NULL) {
    *outWidth = width;
  }
  if (outHeight != NULL) {
    *outHeight = height;
  }
  if (hasAlpha != NULL) {
    *hasAlpha = alpha;
  }

  //Generate mipmap
  glGenerateMipmap(GL_TEXTURE_2D);

  env->DeleteLocalRef(name);
  env->DeleteLocalRef(javaCls);

  return tex;
}

std::string JNIHelper::ConvertString(const char *str, const char *encode) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return std::string("");
  }

  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  JNIEnv *env = AttachCurrentThread();
  env->PushLocalFrame(16);

  jsize iLength = static_cast<jsize>(strlen(str));

  jbyteArray array = env->NewByteArray(iLength);
  env->SetByteArrayRegion(array, 0, iLength, reinterpret_cast<const jbyte*>(str));

  jstring strEncode = env->NewStringUTF(encode);

  jclass cls = env->FindClass("java/lang/String");
  jmethodID ctor = env->GetMethodID(cls, "<init>", "([BLjava/lang/String;)V");
  jstring object = static_cast<jstring>(env->NewObject(cls, ctor, array, strEncode));

  const char *cparam = env->GetStringUTFChars(object, NULL);

  std::string s = std::string(cparam);

  env->ReleaseStringUTFChars(object, cparam);
  env->DeleteLocalRef(array);
  env->DeleteLocalRef(strEncode);
  env->DeleteLocalRef(object);
  env->DeleteLocalRef(cls);

  env->PopLocalFrame(NULL);

  return s;
}
/*
 * Retrieve string resource with a given name
 * arguments:
 *  in: resourceName, name of string resource to retrieve
 * return: string resource value, returns "" when there is no string resource with given name
 */
std::string JNIHelper::GetStringResource(const std::string& resourceName)
{
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return std::string("");
  }

  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  JNIEnv *env = AttachCurrentThread();
  jstring name = env->NewStringUTF(resourceName.c_str());

  jstring ret = static_cast<jstring>(
      CallObjectMethod("getStringResource", "(Ljava/lang/String;)Ljava/lang/String;", name));

  const char *resource = env->GetStringUTFChars(ret, NULL);
  std::string s = std::string(resource);

  env->ReleaseStringUTFChars(ret, resource);
  env->DeleteLocalRef(ret);
  env->DeleteLocalRef(name);

  return s;
}
/*
 * Audio helpers
 */
int32_t JNIHelper::GetNativeAudioBufferSize() {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return 0;
  }

  JNIEnv *env = AttachCurrentThread();
  jmethodID mid = env->GetMethodID(jni_helper_java_class_,
                                   "getNativeAudioBufferSize", "()I");
  int32_t i = env->CallIntMethod(jni_helper_java_ref_, mid);
  return i;
}

int32_t JNIHelper::GetNativeAudioSampleRate() {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return 0;
  }

  JNIEnv *env = AttachCurrentThread();
  jmethodID mid = env->GetMethodID(jni_helper_java_class_,
                                   "getNativeAudioSampleRate", "()I");
  int32_t i = env->CallIntMethod(jni_helper_java_ref_, mid);
  return i;
}

/*
 * Misc implementations
 */
jclass JNIHelper::RetrieveClass(JNIEnv *jni, const char *class_name) {
  jclass activity_class = jni->FindClass(NATIVEACTIVITY_CLASS_NAME);
  jmethodID get_class_loader = jni->GetMethodID(
      activity_class, "getClassLoader", "()Ljava/lang/ClassLoader;");
  jobject cls = jni->CallObjectMethod(activity_->clazz, get_class_loader);
  jclass class_loader = jni->FindClass("java/lang/ClassLoader");
  jmethodID find_class = jni->GetMethodID(
      class_loader, "loadClass", "(Ljava/lang/String;)Ljava/lang/Class;");

  jstring str_class_name = jni->NewStringUTF(class_name);
  jclass class_retrieved =
      static_cast<jclass>(jni->CallObjectMethod(cls, find_class, str_class_name));
  jni->DeleteLocalRef(str_class_name);
  jni->DeleteLocalRef(activity_class);
  jni->DeleteLocalRef(class_loader);
  return class_retrieved;
}

jstring JNIHelper::GetExternalFilesDirJString(JNIEnv *env) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return NULL;
  }

  // Invoking getExternalFilesDir() java API
  jclass cls_Env = env->FindClass(NATIVEACTIVITY_CLASS_NAME);
  jmethodID mid = env->GetMethodID(cls_Env, "getExternalFilesDir",
                                   "(Ljava/lang/String;)Ljava/io/File;");
  jobject obj_File = env->CallObjectMethod(activity_->clazz, mid, NULL);
  jclass cls_File = env->FindClass("java/io/File");
  jmethodID mid_getPath =
      env->GetMethodID(cls_File, "getPath", "()Ljava/lang/String;");
  jstring obj_Path = static_cast<jstring>(env->CallObjectMethod(obj_File, mid_getPath));

  return obj_Path;
}

void JNIHelper::DeleteObject(jobject obj) {
  if (obj == NULL) {
    LOGI("obj can not be NULL");
    return;
  }

  JNIEnv *env = AttachCurrentThread();
  env->DeleteGlobalRef(obj);
}

jobject JNIHelper::CallObjectMethod(const char *strMethodName,
                                    const char *strSignature, ...) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return NULL;
  }

  JNIEnv *env = AttachCurrentThread();
  jmethodID mid =
      env->GetMethodID(jni_helper_java_class_, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return NULL;
  }

  va_list args;
  va_start(args, strSignature);
  jobject obj = env->CallObjectMethodV(jni_helper_java_ref_, mid, args);
  va_end(args);

  return obj;
}

void JNIHelper::CallVoidMethod(const char *strMethodName,
                               const char *strSignature, ...) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return;
  }

  JNIEnv *env = AttachCurrentThread();
  jmethodID mid =
      env->GetMethodID(jni_helper_java_class_, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return;
  }
  va_list args;
  va_start(args, strSignature);
  env->CallVoidMethodV(jni_helper_java_ref_, mid, args);
  va_end(args);

  return;
}

jobject JNIHelper::CallObjectMethod(jobject object, const char *strMethodName,
                                    const char *strSignature, ...) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return NULL;
  }

  JNIEnv *env = AttachCurrentThread();
  jclass cls = env->GetObjectClass(object);
  jmethodID mid = env->GetMethodID(cls, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return NULL;
  }

  va_list args;
  va_start(args, strSignature);
  jobject obj = env->CallObjectMethodV(object, mid, args);
  va_end(args);

  env->DeleteLocalRef(cls);
  return obj;
}

void JNIHelper::CallVoidMethod(jobject object, const char *strMethodName,
                               const char *strSignature, ...) {
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return;
  }

  JNIEnv *env = AttachCurrentThread();
  jclass cls = env->GetObjectClass(object);
  jmethodID mid = env->GetMethodID(cls, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return;
  }

  va_list args;
  va_start(args, strSignature);
  env->CallVoidMethodV(object, mid, args);
  va_end(args);

  env->DeleteLocalRef(cls);
  return;
}

float JNIHelper::CallFloatMethod(jobject object, const char *strMethodName,
                                 const char *strSignature, ...) {
  float f = 0.f;
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return f;
  }

  JNIEnv *env = AttachCurrentThread();
  jclass cls = env->GetObjectClass(object);
  jmethodID mid = env->GetMethodID(cls, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return f;
  }
  va_list args;
  va_start(args, strSignature);
  f = env->CallFloatMethodV(object, mid, args);
  va_end(args);

  env->DeleteLocalRef(cls);
  return f;
}

int32_t JNIHelper::CallIntMethod(jobject object, const char *strMethodName,
                                 const char *strSignature, ...) {
  int32_t i = 0;
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return i;
  }

  JNIEnv *env = AttachCurrentThread();
  jclass cls = env->GetObjectClass(object);
  jmethodID mid = env->GetMethodID(cls, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return i;
  }
  va_list args;
  va_start(args, strSignature);
  i = env->CallIntMethodV(object, mid, args);
  va_end(args);

  env->DeleteLocalRef(cls);
  return i;
}

bool JNIHelper::CallBooleanMethod(jobject object, const char *strMethodName,
                                  const char *strSignature, ...) {
  bool b;
  if (activity_ == NULL) {
    LOGI("JNIHelper has not been initialized. Call init() to initialize the "
         "helper");
    return false;
  }

  JNIEnv *env = AttachCurrentThread();
  jclass cls = env->GetObjectClass(object);
  jmethodID mid = env->GetMethodID(cls, strMethodName, strSignature);
  if (mid == NULL) {
    LOGI("method ID %s, '%s' not found", strMethodName, strSignature);
    return false;
  }
  va_list args;
  va_start(args, strSignature);
  b = env->CallBooleanMethodV(object, mid, args);
  va_end(args);

  env->DeleteLocalRef(cls);
  return b;
}

jobject JNIHelper::CreateObject(const char *class_name) {
  JNIEnv *env = AttachCurrentThread();

  jclass cls = env->FindClass(class_name);
  jmethodID constructor = env->GetMethodID(cls, "<init>", "()V");

  jobject obj = env->NewObject(cls, constructor);
  jobject objGlobal = env->NewGlobalRef(obj);
  env->DeleteLocalRef(obj);
  env->DeleteLocalRef(cls);
  return objGlobal;
}

void JNIHelper::RunOnUiThread(std::function<void()> callback) {
  // Lock mutex
  std::lock_guard<std::mutex> lock(mutex_);

  JNIEnv *env = AttachCurrentThread();
  static jmethodID mid = NULL;
  if (mid == NULL)
    mid = env->GetMethodID(jni_helper_java_class_, "runOnUIThread", "(J)V");

  // Allocate temporary function object to be passed around
  std::function<void()> *pCallback = new std::function<void()>(callback);
  env->CallVoidMethod(jni_helper_java_ref_, mid, reinterpret_cast<int64_t>(pCallback));
}

// This JNI function is invoked from UIThread asynchronously
extern "C" {
JNIEXPORT void
Java_com_sample_helper_NDKHelper_RunOnUiThreadHandler(JNIEnv *env, jobject thiz,
                                                      int64_t pointer) {
#pragma unused (env)
#pragma unused (thiz)
  std::function<void()> *pCallback = reinterpret_cast< std::function<void()> *>(pointer);
  (*pCallback)();

  // Deleting temporary object
  delete pCallback;
}
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/JNIHelper.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#pragma once

#include <jni.h>
#include <vector>
#include <string>
#include <functional>
#include <assert.h>
#include <mutex>
#include <pthread.h>

#include <android/log.h>
#include <android_native_app_glue.h>

#define LOGI(...)                                                              \
  ((void) __android_log_print(                                                 \
      ANDROID_LOG_INFO, ndk_helper::JNIHelper::GetInstance()->GetAppName(),    \
      __VA_ARGS__))
#define LOGW(...)                                                              \
  ((void) __android_log_print(                                                 \
      ANDROID_LOG_WARN, ndk_helper::JNIHelper::GetInstance()->GetAppName(),    \
      __VA_ARGS__))
#define LOGE(...)                                                              \
  ((void) __android_log_print(                                                 \
      ANDROID_LOG_ERROR, ndk_helper::JNIHelper::GetInstance()->GetAppName(),   \
      __VA_ARGS__))

namespace ndk_helper {

class JUIView;

/******************************************************************
 * Helper functions for JNI calls
 * This class wraps JNI calls and provides handy interface calling commonly used
 * features
 * in Java SDK.
 * Such as
 * - loading graphics files (e.g. PNG, JPG)
 * - character code conversion
 * - retrieving system properties which only supported in Java SDK
 *
 * NOTE: To use this class, add NDKHelper.java as a corresponding helpers in
 * Java code
 */
class JNIHelper {
public:
  /*
   * To load your own Java classes, JNIHelper requires to be initialized with a
   * ANativeActivity handle.
   * This methods need to be called before any call to the helper class.
   * Static member of the class
   *
   * arguments:
   * in: activity, pointer to ANativeActivity. Used internally to set up JNI
   * environment
   * in: helper_class_name, pointer to Java side helper class name. (e.g.
   * "com/sample/helper/NDKHelper" in samples )
   */
  static void Init(ANativeActivity *activity, const char *helper_class_name);

  /*
   * Init() that accept so name.
   * When using a JUI helper class, Java side requires SO name to initialize JNI
   * calls to invoke native callbacks.
   * Use this version when using JUI helper.
   *
   * arguments:
   * in: activity, pointer to ANativeActivity. Used internally to set up JNI
   * environment
   * in: helper_class_name, pointer to Java side helper class name. (e.g.
   * "com/sample/helper/NDKHelper" in samples )
   * in: native_soname, pointer to soname of native library. (e.g.
   * "NativeActivity" for "libNativeActivity.so" )
   */
  static void Init(ANativeActivity *activity, const char *helper_class_name,
                   const char *native_soname);

  /*
   * Retrieve the singleton object of the helper.
   * Static member of the class

   * Methods in the class are designed as thread safe.
   */
  static JNIHelper *GetInstance();

  /*
   * Read a file from a strorage.
   * First, the method tries to read the file from an external storage.
   * If it fails to read, it falls back to use assset manager and try to read
   * the file from APK asset.
   *
   * arguments:
   * in: file_name, file name to read
   * out: buffer_ref, pointer to a vector buffer to read a file.
   *      when the call succeeded, the buffer includes contents of specified
   * file
   *      when the call failed, contents of the buffer remains same
   * return:
   * true when file read succeeded
   * false when it failed to read the file
   */
  bool ReadFile(const char *file_name, std::vector<uint8_t> *buffer_ref);

  /*
   * Load and create OpenGL texture from given file name.
   * The method invokes BitmapFactory in Java so it can read jpeg/png formatted
   * files
   *
   * The methods creates mip-map and set texture parameters like this,
   * glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
   * GL_LINEAR_MIPMAP_NEAREST );
   * glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
   * glGenerateMipmap( GL_TEXTURE_2D );
   *
   * arguments:
   * in: file_name, file name to read, PNG&JPG is supported
   * outWidth(Optional) pointer to retrieve original bitmap width
   * outHeight(Optional) pointer to retrieve original bitmap height
   * return:
   * OpenGL texture name when the call succeeded
   * When it failed to load the texture, it returns -1
   */
  uint32_t LoadTexture(const char *file_name, int32_t *outWidth = NULL,
                       int32_t *outHeight = NULL, bool *hasAlpha = NULL);

  /*
   * Convert string from character code other than UTF-8
   *
   * arguments:
   *  in: str, pointer to a string which is encoded other than UTF-8
   *  in: encoding, pointer to a character encoding string.
   *  The encoding string can be any valid java.nio.charset.Charset name
   *  e.g. "UTF-16", "Shift_JIS"
   * return: converted input string as an UTF-8 std::string
   */
  std::string ConvertString(const char *str, const char *encode);
  /*
   * Retrieve external file directory through JNI call
   *
   * return: std::string containing external file diretory
   */
  std::string GetExternalFilesDir();

  /*
   * Retrieve string resource with a given name
   * arguments:
   *  in: resourceName, name of string resource to retrieve
   * return: string resource value, returns "" when there is no string resource with given name
   */
  std::string GetStringResource(const std::string& resourceName);

  /*
   * Audio helper
   * Retrieves native audio buffer size which is required to achieve low latency
   * audio
   *
   * return: Native audio buffer size which is a hint to achieve low latency
   * audio
   * If the API is not supported (API level < 17), it returns 0
   */
  int32_t GetNativeAudioBufferSize();

  /*
   * Audio helper
   * Retrieves native audio sample rate which is required to achieve low latency
   * audio
   *
   * return: Native audio sample rate which is a hint to achieve low latency
   * audio
   */
  int32_t GetNativeAudioSampleRate();

  /*
   * Retrieves application bundle name
   *
   * return: pointer to an app name string
   *
   */
  const char *GetAppName() { return app_bunlde_name_.c_str(); }

  /*
   * Retrieves application label
   *
   * return: pointer to an app label string
   *
   */
  const char *GetAppLabel() { return app_label_.c_str(); }

  /*
   * Execute given function in Java UIThread.
   *
   * arguments:
   *  in: pFunction, a pointer to a function to be executed in Java UI Thread.
   *  Note that the helper function returns immediately without synchronizing a
   * function completion.
   */
  void RunOnUiThread(std::function<void()> callback);

  /*
   * Attach current thread
   * In Android, the thread doesn't have to be 'Detach' current thread
   * as application process is only killed and VM does not shut down
   */
  JNIEnv *AttachCurrentThread() {
    JNIEnv *env;
    if (activity_->vm->GetEnv(reinterpret_cast<void**>(&env), JNI_VERSION_1_4) == JNI_OK)
      return env;
    activity_->vm->AttachCurrentThread(&env, NULL);
    pthread_key_create(
            reinterpret_cast<pthread_key_t *>(activity_), DetachCurrentThreadDtor);
    return env;
  }

  void DetachCurrentThread() {
    activity_->vm->DetachCurrentThread();
    return;
  }

  /*
   * Decrement a global reference to the object
   * arguments:
   *  in: obj, obj to decrement a global reference
   */
  void DeleteObject(jobject obj);

  /*
   * Helper methods to call a method in given object
   */
  jobject CreateObject(const char *class_name);
  jobject CallObjectMethod(jobject object, const char *strMethodName,
                           const char *strSignature, ...);
  void CallVoidMethod(jobject object, const char *strMethodName,
                      const char *strSignature, ...);
  float CallFloatMethod(jobject object, const char *strMethodName,
                        const char *strSignature, ...);
  int32_t CallIntMethod(jobject object, const char *strMethodName,
                        const char *strSignature, ...);
  bool CallBooleanMethod(jobject object, const char *strMethodName,
                         const char *strSignature, ...);
  jclass RetrieveClass(JNIEnv *jni, const char *class_name);

private:
  std::string app_bunlde_name_;
  std::string app_label_;

  ANativeActivity *activity_;
  jobject jni_helper_java_ref_;
  jclass jni_helper_java_class_;

  //mutex for synchronization
  //This class uses singleton pattern and can be invoked from multiple threads,
  //each methods locks the mutex for a thread safety
  mutable std::mutex mutex_;

  jstring GetExternalFilesDirJString(JNIEnv *env);

  JNIHelper();
  ~JNIHelper();
  JNIHelper(const JNIHelper &rhs);
  JNIHelper &operator=(const JNIHelper &rhs);

  /*
   * Call method in JNIHelper class
   */
  jobject CallObjectMethod(const char *strMethodName, const char *strSignature,
                           ...);
  void CallVoidMethod(const char *strMethodName, const char *strSignature, ...);

  /*
   * Unregister this thread from the VM
   */
  static void DetachCurrentThreadDtor(void *p) {
    LOGI("detached current thread");
    ANativeActivity *activity = reinterpret_cast<ANativeActivity *>(p);
    activity->vm->DetachCurrentThread();
  }

};

extern "C" {
JNIEXPORT void
    Java_com_sample_helper_NDKHelper_RunOnUiThreadHandler(JNIEnv *env,jobject thiz,
                                                          int64_t pointer);
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/NDKHelper.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef _NDKSUPPORT_H
#define _NDKSUPPORT_H

/******************************************************************
 * NDK support helpers
 * Utility module to provide misc functionalities that is used widely in native
 * applications,
 * such as gesture detection, jni bridge, openGL context etc.
 *
 * The purpose of this module is,
 * - Provide best practices using NDK
 * - Provide handy utility functions for NDK development
 * - Make NDK samples more simpler and readable
 */
#include "gl3stub.h"   //GLES3 stubs
#include "GLContext.h" //EGL & OpenGL manager
#include "shader.h"    //Shader compiler support
#include "vecmath.h" //Vector math support, C++ implementation n current version
#include "tapCamera.h"       //Tap/Pinch camera control
#include "JNIHelper.h"       //JNI support
#include "gestureDetector.h" //Tap/Doubletap/Pinch detector
#include "perfMonitor.h"     //FPS counter
#include "sensorManager.h"   //SensorManager
#include "interpolator.h"    //Interpolator
#endif

```

`samples-android/Common/NDKHelper/src/main/cpp/gestureDetector.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "gestureDetector.h"

//--------------------------------------------------------------------------------
// gestureDetector.cpp
//--------------------------------------------------------------------------------
namespace ndk_helper {

//--------------------------------------------------------------------------------
// includes
//--------------------------------------------------------------------------------

//--------------------------------------------------------------------------------
// GestureDetector
//--------------------------------------------------------------------------------
GestureDetector::GestureDetector() { dp_factor_ = 1.f; }

void GestureDetector::SetConfiguration(AConfiguration *config) {
  dp_factor_ = 160.f / AConfiguration_getDensity(config);
}

//--------------------------------------------------------------------------------
// TapDetector
//--------------------------------------------------------------------------------
TapDetector::TapDetector() : down_x_(0), down_y_(0) {}

GESTURE_STATE TapDetector::Detect(const AInputEvent *motion_event) {
  if (AMotionEvent_getPointerCount(motion_event) > 1) {
    //Only support single touch
    return false;
  }

  int32_t action = AMotionEvent_getAction(motion_event);
  unsigned int flags = action & AMOTION_EVENT_ACTION_MASK;
  switch (flags) {
  case AMOTION_EVENT_ACTION_DOWN:
    down_pointer_id_ = AMotionEvent_getPointerId(motion_event, 0);
    down_x_ = AMotionEvent_getX(motion_event, 0);
    down_y_ = AMotionEvent_getY(motion_event, 0);
    break;
  case AMOTION_EVENT_ACTION_UP: {
    int64_t eventTime = AMotionEvent_getEventTime(motion_event);
    int64_t downTime = AMotionEvent_getDownTime(motion_event);
    if (eventTime - downTime <= TAP_TIMEOUT) {
      if (down_pointer_id_ == AMotionEvent_getPointerId(motion_event, 0)) {
        float x = AMotionEvent_getX(motion_event, 0) - down_x_;
        float y = AMotionEvent_getY(motion_event, 0) - down_y_;
        if (x * x + y * y < TOUCH_SLOP * TOUCH_SLOP * dp_factor_) {
          LOGI("TapDetector: Tap detected");
          return GESTURE_STATE_ACTION;
        }
      }
    }
    break;
  }
  }
  return GESTURE_STATE_NONE;
}

//--------------------------------------------------------------------------------
// DoubletapDetector
//--------------------------------------------------------------------------------
DoubletapDetector::DoubletapDetector() : last_tap_x_(0), last_tap_y_(0) {}

GESTURE_STATE DoubletapDetector::Detect(const AInputEvent *motion_event) {
  if (AMotionEvent_getPointerCount(motion_event) > 1) {
    //Only support single double tap
    return false;
  }

  bool tap_detected = tap_detector_.Detect(motion_event);

  int32_t action = AMotionEvent_getAction(motion_event);
  unsigned int flags = action & AMOTION_EVENT_ACTION_MASK;
  switch (flags) {
  case AMOTION_EVENT_ACTION_DOWN: {
    int64_t eventTime = AMotionEvent_getEventTime(motion_event);
    if (eventTime - last_tap_time_ <= DOUBLE_TAP_TIMEOUT) {
      float x = AMotionEvent_getX(motion_event, 0) - last_tap_x_;
      float y = AMotionEvent_getY(motion_event, 0) - last_tap_y_;
      if (x * x + y * y < DOUBLE_TAP_SLOP * DOUBLE_TAP_SLOP * dp_factor_) {
        LOGI("DoubletapDetector: Doubletap detected");
        return GESTURE_STATE_ACTION;
      }
    }
    break;
  }
  case AMOTION_EVENT_ACTION_UP:
    if (tap_detected) {
      last_tap_time_ = AMotionEvent_getEventTime(motion_event);
      last_tap_x_ = AMotionEvent_getX(motion_event, 0);
      last_tap_y_ = AMotionEvent_getY(motion_event, 0);
    }
    break;
  }
  return GESTURE_STATE_NONE;
}

void DoubletapDetector::SetConfiguration(AConfiguration *config) {
  dp_factor_ = 160.f / AConfiguration_getDensity(config);
  tap_detector_.SetConfiguration(config);
}

//--------------------------------------------------------------------------------
// PinchDetector
//--------------------------------------------------------------------------------

int32_t PinchDetector::FindIndex(const AInputEvent *event, int32_t id) {
  int32_t count = AMotionEvent_getPointerCount(event);
  for (uint32_t i = 0; i < count; ++i) {
    if (id == AMotionEvent_getPointerId(event, i))
      return i;
  }
  return -1;
}

GESTURE_STATE PinchDetector::Detect(const AInputEvent *event) {
  GESTURE_STATE ret = GESTURE_STATE_NONE;
  int32_t action = AMotionEvent_getAction(event);
  uint32_t flags = action & AMOTION_EVENT_ACTION_MASK;
  event_ = event;

  int32_t count = AMotionEvent_getPointerCount(event);
  switch (flags) {
  case AMOTION_EVENT_ACTION_DOWN:
    vec_pointers_.push_back(AMotionEvent_getPointerId(event, 0));
    break;
  case AMOTION_EVENT_ACTION_POINTER_DOWN: {
    int32_t iIndex = (action & AMOTION_EVENT_ACTION_POINTER_INDEX_MASK) >>
                     AMOTION_EVENT_ACTION_POINTER_INDEX_SHIFT;
    vec_pointers_.push_back(AMotionEvent_getPointerId(event, iIndex));
    if (count == 2) {
      //Start new pinch
      ret = GESTURE_STATE_START;
    }
  } break;
  case AMOTION_EVENT_ACTION_UP:
    vec_pointers_.pop_back();
    break;
  case AMOTION_EVENT_ACTION_POINTER_UP: {
    int32_t index = (action & AMOTION_EVENT_ACTION_POINTER_INDEX_MASK) >>
                    AMOTION_EVENT_ACTION_POINTER_INDEX_SHIFT;
    int32_t released_pointer_id = AMotionEvent_getPointerId(event, index);

    std::vector<int32_t>::iterator it = vec_pointers_.begin();
    std::vector<int32_t>::iterator it_end = vec_pointers_.end();
    int32_t i = 0;
    for (; it != it_end; ++it, ++i) {
      if (*it == released_pointer_id) {
        vec_pointers_.erase(it);
        break;
      }
    }

    if (i <= 1) {
      //Reset pinch or drag
      if (count != 2) {
        //Start new pinch
        ret = GESTURE_STATE_START | GESTURE_STATE_END;
      }
    }
  } break;
  case AMOTION_EVENT_ACTION_MOVE:
    switch (count) {
    case 1:
      break;
    default:
      //Multi touch
      ret = GESTURE_STATE_MOVE;
      break;
    }
    break;
  case AMOTION_EVENT_ACTION_CANCEL:
    break;
  }

  return ret;
}

bool PinchDetector::GetPointers(Vec2 &v1, Vec2 &v2) {
  if (vec_pointers_.size() < 2)
    return false;

  int32_t index = FindIndex(event_, vec_pointers_[0]);
  if (index == -1)
    return false;

  float x = AMotionEvent_getX(event_, index);
  float y = AMotionEvent_getY(event_, index);

  index = FindIndex(event_, vec_pointers_[1]);
  if (index == -1)
    return false;

  float x2 = AMotionEvent_getX(event_, index);
  float y2 = AMotionEvent_getY(event_, index);

  v1 = Vec2(x, y);
  v2 = Vec2(x2, y2);

  return true;
}

//--------------------------------------------------------------------------------
// DragDetector
//--------------------------------------------------------------------------------

int32_t DragDetector::FindIndex(const AInputEvent *event, int32_t id) {
  int32_t count = AMotionEvent_getPointerCount(event);
  for (uint32_t i = 0; i < count; ++i) {
    if (id == AMotionEvent_getPointerId(event, i))
      return i;
  }
  return -1;
}

GESTURE_STATE DragDetector::Detect(const AInputEvent *event) {
  GESTURE_STATE ret = GESTURE_STATE_NONE;
  int32_t action = AMotionEvent_getAction(event);
  int32_t index = (action & AMOTION_EVENT_ACTION_POINTER_INDEX_MASK) >>
                  AMOTION_EVENT_ACTION_POINTER_INDEX_SHIFT;
  uint32_t flags = action & AMOTION_EVENT_ACTION_MASK;
  event_ = event;

  int32_t count = AMotionEvent_getPointerCount(event);
  switch (flags) {
  case AMOTION_EVENT_ACTION_DOWN:
    vec_pointers_.push_back(AMotionEvent_getPointerId(event, 0));
    ret = GESTURE_STATE_START;
    break;
  case AMOTION_EVENT_ACTION_POINTER_DOWN:
    vec_pointers_.push_back(AMotionEvent_getPointerId(event, index));
    break;
  case AMOTION_EVENT_ACTION_UP:
    vec_pointers_.pop_back();
    ret = GESTURE_STATE_END;
    break;
  case AMOTION_EVENT_ACTION_POINTER_UP: {
    int32_t released_pointer_id = AMotionEvent_getPointerId(event, index);

    std::vector<int32_t>::iterator it = vec_pointers_.begin();
    std::vector<int32_t>::iterator it_end = vec_pointers_.end();
    int32_t i = 0;
    for (; it != it_end; ++it, ++i) {
      if (*it == released_pointer_id) {
        vec_pointers_.erase(it);
        break;
      }
    }

    if (i <= 1) {
      //Reset pinch or drag
      if (count == 2) {
        ret = GESTURE_STATE_START;
      }
    }
    break;
  }
  case AMOTION_EVENT_ACTION_MOVE:
    switch (count) {
    case 1:
      //Drag
      ret = GESTURE_STATE_MOVE;
      break;
    default:
      break;
    }
    break;
  case AMOTION_EVENT_ACTION_CANCEL:
    break;
  }

  return ret;
}

bool DragDetector::GetPointer(Vec2 &v) {
  if (vec_pointers_.size() < 1)
    return false;

  int32_t iIndex = FindIndex(event_, vec_pointers_[0]);
  if (iIndex == -1)
    return false;

  float x = AMotionEvent_getX(event_, iIndex);
  float y = AMotionEvent_getY(event_, iIndex);

  v = Vec2(x, y);

  return true;
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/gestureDetector.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// gestureDetector.h
//--------------------------------------------------------------------------------
#ifndef GESTUREDETECTOR_H_
#define GESTUREDETECTOR_H_

#include <vector>

#include <android/sensor.h>
#include <android/log.h>
#include <android_native_app_glue.h>
#include <android/native_window_jni.h>
#include "JNIHelper.h"
#include "vecmath.h"

namespace ndk_helper {
//--------------------------------------------------------------------------------
// Constants
//--------------------------------------------------------------------------------
const int32_t DOUBLE_TAP_TIMEOUT = 300 * 1000000;
const int32_t TAP_TIMEOUT = 180 * 1000000;
const int32_t DOUBLE_TAP_SLOP = 100;
const int32_t TOUCH_SLOP = 8;

enum {
  GESTURE_STATE_NONE = 0,
  GESTURE_STATE_START = 1,
  GESTURE_STATE_MOVE = 2,
  GESTURE_STATE_END = 4,
  GESTURE_STATE_ACTION = (GESTURE_STATE_START | GESTURE_STATE_END),
};
typedef int32_t GESTURE_STATE;

/******************************************************************
 * Base class of Gesture Detectors
 * GestureDetectors handles input events and detect gestures
 * Note that different detectors may detect gestures with an event at
 * same time. The caller needs to manage gesture priority accordingly
 *
 */
class GestureDetector {
protected:
  float dp_factor_;

public:
  GestureDetector();
  virtual ~GestureDetector() {}
  virtual void SetConfiguration(AConfiguration *config);

  virtual GESTURE_STATE Detect(const AInputEvent *motion_event) {
    return GESTURE_STATE_NONE;
  }
  ;
};

/******************************************************************
 * Tap gesture detector
 * Returns GESTURE_STATE_ACTION when a tap gesture is detected
 *
 */
class TapDetector : public GestureDetector {
private:
  int32_t down_pointer_id_;
  float down_x_;
  float down_y_;

public:
  TapDetector();
  virtual ~TapDetector() {}
  virtual GESTURE_STATE Detect(const AInputEvent *motion_event);
};

/******************************************************************
 * Pinch gesture detector
 * Returns GESTURE_STATE_ACTION when a double-tap gesture is detected
 *
 */
class DoubletapDetector : public GestureDetector {
private:
  TapDetector tap_detector_;
  int64_t last_tap_time_;
  float last_tap_x_;
  float last_tap_y_;

public:
  DoubletapDetector();
  virtual ~DoubletapDetector() {}
  virtual GESTURE_STATE Detect(const AInputEvent *motion_event);
  virtual void SetConfiguration(AConfiguration *config);
};

/******************************************************************
 * Double gesture detector
 * Returns pinch gesture state when a pinch gesture is detected
 * The class handles multiple touches more than 2
 * When the finger 1,2,3 are tapped and then finger 1 is released,
 * the detector start new pinch gesture with finger 2 & 3.
 */
class PinchDetector : public GestureDetector {
private:
  int32_t FindIndex(const AInputEvent *event, int32_t id);
  const AInputEvent *event_;
  std::vector<int32_t> vec_pointers_;

public:
  PinchDetector() : event_(nullptr) {}
  virtual ~PinchDetector() {}
  virtual GESTURE_STATE Detect(const AInputEvent *event);
  bool GetPointers(Vec2 &v1, Vec2 &v2);
};

/******************************************************************
 * Drag gesture detector
 * Returns drag gesture state when a drag-tap gesture is detected
 *
 */
class DragDetector : public GestureDetector {
private:
  int32_t FindIndex(const AInputEvent *event, int32_t id);
  const AInputEvent *event_;
  std::vector<int32_t> vec_pointers_;

public:
  DragDetector() : event_(nullptr) {}
  virtual ~DragDetector() {}
  virtual GESTURE_STATE Detect(const AInputEvent *event);
  bool GetPointer(Vec2 &v);
};

}      //namespace ndkHelper
#endif /* GESTUREDETECTOR_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/gl3stub.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <EGL/egl.h>
#include "gl3stub.h"

GLboolean gl3stubInit() {
#define FIND_PROC(s) s = (decltype(s)) eglGetProcAddress(#s);
  FIND_PROC(glReadBuffer);
  FIND_PROC(glDrawRangeElements);
  FIND_PROC(glTexImage3D);
  FIND_PROC(glTexSubImage3D);
  FIND_PROC(glCopyTexSubImage3D);
  FIND_PROC(glCompressedTexImage3D);
  FIND_PROC(glCompressedTexSubImage3D);
  FIND_PROC(glGenQueries);
  FIND_PROC(glDeleteQueries);
  FIND_PROC(glIsQuery);
  FIND_PROC(glBeginQuery);
  FIND_PROC(glEndQuery);
  FIND_PROC(glGetQueryiv);
  FIND_PROC(glGetQueryObjectuiv);
  FIND_PROC(glUnmapBuffer);
  FIND_PROC(glGetBufferPointerv);
  FIND_PROC(glDrawBuffers);
  FIND_PROC(glUniformMatrix2x3fv);
  FIND_PROC(glUniformMatrix3x2fv);
  FIND_PROC(glUniformMatrix2x4fv);
  FIND_PROC(glUniformMatrix4x2fv);
  FIND_PROC(glUniformMatrix3x4fv);
  FIND_PROC(glUniformMatrix4x3fv);
  FIND_PROC(glBlitFramebuffer);
  FIND_PROC(glRenderbufferStorageMultisample);
  FIND_PROC(glFramebufferTextureLayer);
  FIND_PROC(glMapBufferRange);
  FIND_PROC(glFlushMappedBufferRange);
  FIND_PROC(glBindVertexArray);
  FIND_PROC(glDeleteVertexArrays);
  FIND_PROC(glGenVertexArrays);
  FIND_PROC(glIsVertexArray);
  FIND_PROC(glGetIntegeri_v);
  FIND_PROC(glBeginTransformFeedback);
  FIND_PROC(glEndTransformFeedback);
  FIND_PROC(glBindBufferRange);
  FIND_PROC(glBindBufferBase);
  FIND_PROC(glTransformFeedbackVaryings);
  FIND_PROC(glGetTransformFeedbackVarying);
  FIND_PROC(glVertexAttribIPointer);
  FIND_PROC(glGetVertexAttribIiv);
  FIND_PROC(glGetVertexAttribIuiv);
  FIND_PROC(glVertexAttribI4i);
  FIND_PROC(glVertexAttribI4ui);
  FIND_PROC(glVertexAttribI4iv);
  FIND_PROC(glVertexAttribI4uiv);
  FIND_PROC(glGetUniformuiv);
  FIND_PROC(glGetFragDataLocation);
  FIND_PROC(glUniform1ui);
  FIND_PROC(glUniform2ui);
  FIND_PROC(glUniform3ui);
  FIND_PROC(glUniform4ui);
  FIND_PROC(glUniform1uiv);
  FIND_PROC(glUniform2uiv);
  FIND_PROC(glUniform3uiv);
  FIND_PROC(glUniform4uiv);
  FIND_PROC(glClearBufferiv);
  FIND_PROC(glClearBufferuiv);
  FIND_PROC(glClearBufferfv);
  FIND_PROC(glClearBufferfi);
  FIND_PROC(glGetStringi);
  FIND_PROC(glCopyBufferSubData);
  FIND_PROC(glGetUniformIndices);
  FIND_PROC(glGetActiveUniformsiv);
  FIND_PROC(glGetUniformBlockIndex);
  FIND_PROC(glGetActiveUniformBlockiv);
  FIND_PROC(glGetActiveUniformBlockName);
  FIND_PROC(glUniformBlockBinding);
  FIND_PROC(glDrawArraysInstanced);
  FIND_PROC(glDrawElementsInstanced);
  FIND_PROC(glFenceSync);
  FIND_PROC(glIsSync);
  FIND_PROC(glDeleteSync);
  FIND_PROC(glClientWaitSync);
  FIND_PROC(glWaitSync);
  FIND_PROC(glGetInteger64v);
  FIND_PROC(glGetSynciv);
  FIND_PROC(glGetInteger64i_v);
  FIND_PROC(glGetBufferParameteri64v);
  FIND_PROC(glGenSamplers);
  FIND_PROC(glDeleteSamplers);
  FIND_PROC(glIsSampler);
  FIND_PROC(glBindSampler);
  FIND_PROC(glSamplerParameteri);
  FIND_PROC(glSamplerParameteriv);
  FIND_PROC(glSamplerParameterf);
  FIND_PROC(glSamplerParameterfv);
  FIND_PROC(glGetSamplerParameteriv);
  FIND_PROC(glGetSamplerParameterfv);
  FIND_PROC(glVertexAttribDivisor);
  FIND_PROC(glBindTransformFeedback);
  FIND_PROC(glDeleteTransformFeedbacks);
  FIND_PROC(glGenTransformFeedbacks);
  FIND_PROC(glIsTransformFeedback);
  FIND_PROC(glPauseTransformFeedback);
  FIND_PROC(glResumeTransformFeedback);
  FIND_PROC(glGetProgramBinary);
  FIND_PROC(glProgramBinary);
  FIND_PROC(glProgramParameteri);
  FIND_PROC(glInvalidateFramebuffer);
  FIND_PROC(glInvalidateSubFramebuffer);
  FIND_PROC(glTexStorage2D);
  FIND_PROC(glTexStorage3D);
  FIND_PROC(glGetInternalformativ);
#undef FIND_PROC

  if (!glReadBuffer || !glDrawRangeElements || !glTexImage3D ||
      !glTexSubImage3D || !glCopyTexSubImage3D || !glCompressedTexImage3D ||
      !glCompressedTexSubImage3D || !glGenQueries || !glDeleteQueries ||
      !glIsQuery || !glBeginQuery || !glEndQuery || !glGetQueryiv ||
      !glGetQueryObjectuiv || !glUnmapBuffer || !glGetBufferPointerv ||
      !glDrawBuffers || !glUniformMatrix2x3fv || !glUniformMatrix3x2fv ||
      !glUniformMatrix2x4fv || !glUniformMatrix4x2fv || !glUniformMatrix3x4fv ||
      !glUniformMatrix4x3fv || !glBlitFramebuffer ||
      !glRenderbufferStorageMultisample || !glFramebufferTextureLayer ||
      !glMapBufferRange || !glFlushMappedBufferRange || !glBindVertexArray ||
      !glDeleteVertexArrays || !glGenVertexArrays || !glIsVertexArray ||
      !glGetIntegeri_v || !glBeginTransformFeedback ||
      !glEndTransformFeedback || !glBindBufferRange || !glBindBufferBase ||
      !glTransformFeedbackVaryings || !glGetTransformFeedbackVarying ||
      !glVertexAttribIPointer || !glGetVertexAttribIiv ||
      !glGetVertexAttribIuiv || !glVertexAttribI4i || !glVertexAttribI4ui ||
      !glVertexAttribI4iv || !glVertexAttribI4uiv || !glGetUniformuiv ||
      !glGetFragDataLocation || !glUniform1ui || !glUniform2ui ||
      !glUniform3ui || !glUniform4ui || !glUniform1uiv || !glUniform2uiv ||
      !glUniform3uiv || !glUniform4uiv || !glClearBufferiv ||
      !glClearBufferuiv || !glClearBufferfv || !glClearBufferfi ||
      !glGetStringi || !glCopyBufferSubData || !glGetUniformIndices ||
      !glGetActiveUniformsiv || !glGetUniformBlockIndex ||
      !glGetActiveUniformBlockiv || !glGetActiveUniformBlockName ||
      !glUniformBlockBinding || !glDrawArraysInstanced ||
      !glDrawElementsInstanced || !glFenceSync || !glIsSync || !glDeleteSync ||
      !glClientWaitSync || !glWaitSync || !glGetInteger64v || !glGetSynciv ||
      !glGetInteger64i_v || !glGetBufferParameteri64v || !glGenSamplers ||
      !glDeleteSamplers || !glIsSampler || !glBindSampler ||
      !glSamplerParameteri || !glSamplerParameteriv || !glSamplerParameterf ||
      !glSamplerParameterfv || !glGetSamplerParameteriv ||
      !glGetSamplerParameterfv || !glVertexAttribDivisor ||
      !glBindTransformFeedback || !glDeleteTransformFeedbacks ||
      !glGenTransformFeedbacks || !glIsTransformFeedback ||
      !glPauseTransformFeedback || !glResumeTransformFeedback ||
      !glGetProgramBinary || !glProgramBinary || !glProgramParameteri ||
      !glInvalidateFramebuffer || !glInvalidateSubFramebuffer ||
      !glTexStorage2D || !glTexStorage3D || !glGetInternalformativ) {
    return GL_FALSE;
  }

  return GL_TRUE;
}

/* Function pointer definitions */ GL_APICALL void (*GL_APIENTRY glReadBuffer)(
    GLenum mode);
GL_APICALL void (*GL_APIENTRY glDrawRangeElements)(GLenum mode, GLuint start,
                                                   GLuint end, GLsizei count,
                                                   GLenum type,
                                                   const GLvoid *indices);
GL_APICALL void (*GL_APIENTRY glTexImage3D)(GLenum target, GLint level,
                                            GLint internalformat, GLsizei width,
                                            GLsizei height, GLsizei depth,
                                            GLint border, GLenum format,
                                            GLenum type, const GLvoid *pixels);
GL_APICALL void (*GL_APIENTRY glTexSubImage3D)(GLenum target, GLint level,
                                               GLint xoffset, GLint yoffset,
                                               GLint zoffset, GLsizei width,
                                               GLsizei height, GLsizei depth,
                                               GLenum format, GLenum type,
                                               const GLvoid *pixels);
GL_APICALL void (*GL_APIENTRY glCopyTexSubImage3D)(GLenum target, GLint level,
                                                   GLint xoffset, GLint yoffset,
                                                   GLint zoffset, GLint x,
                                                   GLint y, GLsizei width,
                                                   GLsizei height);
GL_APICALL void (*GL_APIENTRY glCompressedTexImage3D)(
    GLenum target, GLint level, GLenum internalformat, GLsizei width,
    GLsizei height, GLsizei depth, GLint border, GLsizei imageSize,
    const GLvoid *data);
GL_APICALL void (*GL_APIENTRY glCompressedTexSubImage3D)(
    GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint zoffset,
    GLsizei width, GLsizei height, GLsizei depth, GLenum format,
    GLsizei imageSize, const GLvoid *data);
GL_APICALL void (*GL_APIENTRY glGenQueries)(GLsizei n, GLuint *ids);
GL_APICALL void (*GL_APIENTRY glDeleteQueries)(GLsizei n, const GLuint *ids);
GL_APICALL GLboolean (*GL_APIENTRY glIsQuery)(GLuint id);
GL_APICALL void (*GL_APIENTRY glBeginQuery)(GLenum target, GLuint id);
GL_APICALL void (*GL_APIENTRY glEndQuery)(GLenum target);
GL_APICALL void (*GL_APIENTRY glGetQueryiv)(GLenum target, GLenum pname,
                                            GLint *params);
GL_APICALL void (*GL_APIENTRY glGetQueryObjectuiv)(GLuint id, GLenum pname,
                                                   GLuint *params);
GL_APICALL GLboolean (*GL_APIENTRY glUnmapBuffer)(GLenum target);
GL_APICALL void (*GL_APIENTRY glGetBufferPointerv)(GLenum target, GLenum pname,
                                                   GLvoid **params);
GL_APICALL void (*GL_APIENTRY glDrawBuffers)(GLsizei n, const GLenum *bufs);
GL_APICALL void (*GL_APIENTRY glUniformMatrix2x3fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glUniformMatrix3x2fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glUniformMatrix2x4fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glUniformMatrix4x2fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glUniformMatrix3x4fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glUniformMatrix4x3fv)(GLint location,
                                                    GLsizei count,
                                                    GLboolean transpose,
                                                    const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glBlitFramebuffer)(
    GLint srcX0, GLint srcY0, GLint srcX1, GLint srcY1, GLint dstX0,
    GLint dstY0, GLint dstX1, GLint dstY1, GLbitfield mask, GLenum filter);
GL_APICALL void (*GL_APIENTRY glRenderbufferStorageMultisample)(
    GLenum target, GLsizei samples, GLenum internalformat, GLsizei width,
    GLsizei height);
GL_APICALL void (*GL_APIENTRY glFramebufferTextureLayer)(
    GLenum target, GLenum attachment, GLuint texture, GLint level, GLint layer);
GL_APICALL GLvoid *(*GL_APIENTRY glMapBufferRange)(GLenum target,
                                                   GLintptr offset,
                                                   GLsizeiptr length,
                                                   GLbitfield access);
GL_APICALL void (*GL_APIENTRY glFlushMappedBufferRange)(GLenum target,
                                                        GLintptr offset,
                                                        GLsizeiptr length);
GL_APICALL void (*GL_APIENTRY glBindVertexArray)(GLuint array);
GL_APICALL void (*GL_APIENTRY glDeleteVertexArrays)(GLsizei n,
                                                    const GLuint *arrays);
GL_APICALL void (*GL_APIENTRY glGenVertexArrays)(GLsizei n, GLuint *arrays);
GL_APICALL GLboolean (*GL_APIENTRY glIsVertexArray)(GLuint array);
GL_APICALL void (*GL_APIENTRY glGetIntegeri_v)(GLenum target, GLuint index,
                                               GLint *data);
GL_APICALL void (*GL_APIENTRY glBeginTransformFeedback)(GLenum primitiveMode);
GL_APICALL void (*GL_APIENTRY glEndTransformFeedback)(void);
GL_APICALL void (*GL_APIENTRY glBindBufferRange)(GLenum target, GLuint index,
                                                 GLuint buffer, GLintptr offset,
                                                 GLsizeiptr size);
GL_APICALL void (*GL_APIENTRY glBindBufferBase)(GLenum target, GLuint index,
                                                GLuint buffer);
GL_APICALL void (*GL_APIENTRY glTransformFeedbackVaryings)(
    GLuint program, GLsizei count, const GLchar *const *varyings,
    GLenum bufferMode);
GL_APICALL void (*GL_APIENTRY glGetTransformFeedbackVarying)(
    GLuint program, GLuint index, GLsizei bufSize, GLsizei *length,
    GLsizei *size, GLenum *type, GLchar *name);
GL_APICALL void (*GL_APIENTRY glVertexAttribIPointer)(GLuint index, GLint size,
                                                      GLenum type,
                                                      GLsizei stride,
                                                      const GLvoid *pointer);
GL_APICALL void (*GL_APIENTRY glGetVertexAttribIiv)(GLuint index, GLenum pname,
                                                    GLint *params);
GL_APICALL void (*GL_APIENTRY glGetVertexAttribIuiv)(GLuint index, GLenum pname,
                                                     GLuint *params);
GL_APICALL void (*GL_APIENTRY glVertexAttribI4i)(GLuint index, GLint x, GLint y,
                                                 GLint z, GLint w);
GL_APICALL void (*GL_APIENTRY glVertexAttribI4ui)(GLuint index, GLuint x,
                                                  GLuint y, GLuint z, GLuint w);
GL_APICALL void (*GL_APIENTRY glVertexAttribI4iv)(GLuint index, const GLint *v);
GL_APICALL void (*GL_APIENTRY glVertexAttribI4uiv)(GLuint index,
                                                   const GLuint *v);
GL_APICALL void (*GL_APIENTRY glGetUniformuiv)(GLuint program, GLint location,
                                               GLuint *params);
GL_APICALL GLint (*GL_APIENTRY glGetFragDataLocation)(GLuint program,
                                                      const GLchar *name);
GL_APICALL void (*GL_APIENTRY glUniform1ui)(GLint location, GLuint v0);
GL_APICALL void (*GL_APIENTRY glUniform2ui)(GLint location, GLuint v0,
                                            GLuint v1);
GL_APICALL void (*GL_APIENTRY glUniform3ui)(GLint location, GLuint v0,
                                            GLuint v1, GLuint v2);
GL_APICALL void (*GL_APIENTRY glUniform4ui)(GLint location, GLuint v0,
                                            GLuint v1, GLuint v2, GLuint v3);
GL_APICALL void (*GL_APIENTRY glUniform1uiv)(GLint location, GLsizei count,
                                             const GLuint *value);
GL_APICALL void (*GL_APIENTRY glUniform2uiv)(GLint location, GLsizei count,
                                             const GLuint *value);
GL_APICALL void (*GL_APIENTRY glUniform3uiv)(GLint location, GLsizei count,
                                             const GLuint *value);
GL_APICALL void (*GL_APIENTRY glUniform4uiv)(GLint location, GLsizei count,
                                             const GLuint *value);
GL_APICALL void (*GL_APIENTRY glClearBufferiv)(GLenum buffer, GLint drawbuffer,
                                               const GLint *value);
GL_APICALL void (*GL_APIENTRY glClearBufferuiv)(GLenum buffer, GLint drawbuffer,
                                                const GLuint *value);
GL_APICALL void (*GL_APIENTRY glClearBufferfv)(GLenum buffer, GLint drawbuffer,
                                               const GLfloat *value);
GL_APICALL void (*GL_APIENTRY glClearBufferfi)(GLenum buffer, GLint drawbuffer,
                                               GLfloat depth, GLint stencil);
GL_APICALL const GLubyte *(*GL_APIENTRY glGetStringi)(GLenum name,
                                                      GLuint index);
GL_APICALL void (*GL_APIENTRY glCopyBufferSubData)(GLenum readTarget,
                                                   GLenum writeTarget,
                                                   GLintptr readOffset,
                                                   GLintptr writeOffset,
                                                   GLsizeiptr size);
GL_APICALL void (*GL_APIENTRY glGetUniformIndices)(
    GLuint program, GLsizei uniformCount, const GLchar *const *uniformNames,
    GLuint *uniformIndices);
GL_APICALL void (*GL_APIENTRY glGetActiveUniformsiv)(
    GLuint program, GLsizei uniformCount, const GLuint *uniformIndices,
    GLenum pname, GLint *params);
GL_APICALL GLuint (*GL_APIENTRY glGetUniformBlockIndex)(
    GLuint program, const GLchar *uniformBlockName);
GL_APICALL void (*GL_APIENTRY glGetActiveUniformBlockiv)(
    GLuint program, GLuint uniformBlockIndex, GLenum pname, GLint *params);
GL_APICALL void (*GL_APIENTRY glGetActiveUniformBlockName)(
    GLuint program, GLuint uniformBlockIndex, GLsizei bufSize, GLsizei *length,
    GLchar *uniformBlockName);
GL_APICALL void (*GL_APIENTRY glUniformBlockBinding)(
    GLuint program, GLuint uniformBlockIndex, GLuint uniformBlockBinding);
GL_APICALL void (*GL_APIENTRY glDrawArraysInstanced)(GLenum mode, GLint first,
                                                     GLsizei count,
                                                     GLsizei instanceCount);
GL_APICALL void (*GL_APIENTRY glDrawElementsInstanced)(GLenum mode,
                                                       GLsizei count,
                                                       GLenum type,
                                                       const GLvoid *indices,
                                                       GLsizei instanceCount);
GL_APICALL GLsync (*GL_APIENTRY glFenceSync)(GLenum condition,
                                             GLbitfield flags);
GL_APICALL GLboolean (*GL_APIENTRY glIsSync)(GLsync sync);
GL_APICALL void (*GL_APIENTRY glDeleteSync)(GLsync sync);
GL_APICALL GLenum (*GL_APIENTRY glClientWaitSync)(GLsync sync, GLbitfield flags,
                                                  GLuint64 timeout);
GL_APICALL void (*GL_APIENTRY glWaitSync)(GLsync sync, GLbitfield flags,
                                          GLuint64 timeout);
GL_APICALL void (*GL_APIENTRY glGetInteger64v)(GLenum pname, GLint64 *params);
GL_APICALL void (*GL_APIENTRY glGetSynciv)(GLsync sync, GLenum pname,
                                           GLsizei bufSize, GLsizei *length,
                                           GLint *values);
GL_APICALL void (*GL_APIENTRY glGetInteger64i_v)(GLenum target, GLuint index,
                                                 GLint64 *data);
GL_APICALL void (*GL_APIENTRY glGetBufferParameteri64v)(GLenum target,
                                                        GLenum pname,
                                                        GLint64 *params);
GL_APICALL void (*GL_APIENTRY glGenSamplers)(GLsizei count, GLuint *samplers);
GL_APICALL void (*GL_APIENTRY glDeleteSamplers)(GLsizei count,
                                                const GLuint *samplers);
GL_APICALL GLboolean (*GL_APIENTRY glIsSampler)(GLuint sampler);
GL_APICALL void (*GL_APIENTRY glBindSampler)(GLuint unit, GLuint sampler);
GL_APICALL void (*GL_APIENTRY glSamplerParameteri)(GLuint sampler, GLenum pname,
                                                   GLint param);
GL_APICALL void (*GL_APIENTRY glSamplerParameteriv)(GLuint sampler,
                                                    GLenum pname,
                                                    const GLint *param);
GL_APICALL void (*GL_APIENTRY glSamplerParameterf)(GLuint sampler, GLenum pname,
                                                   GLfloat param);
GL_APICALL void (*GL_APIENTRY glSamplerParameterfv)(GLuint sampler,
                                                    GLenum pname,
                                                    const GLfloat *param);
GL_APICALL void (*GL_APIENTRY glGetSamplerParameteriv)(GLuint sampler,
                                                       GLenum pname,
                                                       GLint *params);
GL_APICALL void (*GL_APIENTRY glGetSamplerParameterfv)(GLuint sampler,
                                                       GLenum pname,
                                                       GLfloat *params);
GL_APICALL void (*GL_APIENTRY glVertexAttribDivisor)(GLuint index,
                                                     GLuint divisor);
GL_APICALL void (*GL_APIENTRY glBindTransformFeedback)(GLenum target,
                                                       GLuint id);
GL_APICALL void (*GL_APIENTRY glDeleteTransformFeedbacks)(GLsizei n,
                                                          const GLuint *ids);
GL_APICALL void (*GL_APIENTRY glGenTransformFeedbacks)(GLsizei n, GLuint *ids);
GL_APICALL GLboolean (*GL_APIENTRY glIsTransformFeedback)(GLuint id);
GL_APICALL void (*GL_APIENTRY glPauseTransformFeedback)(void);
GL_APICALL void (*GL_APIENTRY glResumeTransformFeedback)(void);
GL_APICALL void (*GL_APIENTRY glGetProgramBinary)(GLuint program,
                                                  GLsizei bufSize,
                                                  GLsizei *length,
                                                  GLenum *binaryFormat,
                                                  GLvoid *binary);
GL_APICALL void (*GL_APIENTRY glProgramBinary)(GLuint program,
                                               GLenum binaryFormat,
                                               const GLvoid *binary,
                                               GLsizei length);
GL_APICALL void (*GL_APIENTRY glProgramParameteri)(GLuint program, GLenum pname,
                                                   GLint value);
GL_APICALL void (*GL_APIENTRY glInvalidateFramebuffer)(
    GLenum target, GLsizei numAttachments, const GLenum *attachments);
GL_APICALL void (*GL_APIENTRY glInvalidateSubFramebuffer)(
    GLenum target, GLsizei numAttachments, const GLenum *attachments, GLint x,
    GLint y, GLsizei width, GLsizei height);
GL_APICALL void (*GL_APIENTRY glTexStorage2D)(GLenum target, GLsizei levels,
                                              GLenum internalformat,
                                              GLsizei width, GLsizei height);
GL_APICALL void (*GL_APIENTRY glTexStorage3D)(GLenum target, GLsizei levels,
                                              GLenum internalformat,
                                              GLsizei width, GLsizei height,
                                              GLsizei depth);
GL_APICALL void (*GL_APIENTRY glGetInternalformativ)(GLenum target,
                                                     GLenum internalformat,
                                                     GLenum pname,
                                                     GLsizei bufSize,
                                                     GLint *params);

```

`samples-android/Common/NDKHelper/src/main/cpp/gl3stub.h`:

```h
#ifndef __gl3_h_
#define __gl3_h_

/*
 * stub gl3.h for dynamic loading, based on:
 * gl3.h last updated on $Date: 2013-02-12 14:37:24 -0800 (Tue, 12 Feb 2013) $
 *
 * Changes:
 * - Added #include <GLES2/gl2.h>
 * - Removed duplicate OpenGL ES 2.0 declarations
 * - Converted OpenGL ES 3.0 function prototypes to function pointer
 *   declarations
 * - Added gl3stubInit() declaration
 */

#include <GLES2/gl2.h>

#ifdef __cplusplus
extern "C" {
#endif

/*
 ** Copyright (c) 2007-2013 The Khronos Group Inc.
 **
 ** Permission is hereby granted, free of charge, to any person obtaining a
 ** copy of this software and/or associated documentation files (the
 ** "Materials"), to deal in the Materials without restriction, including
 ** without limitation the rights to use, copy, modify, merge, publish,
 ** distribute, sublicense, and/or sell copies of the Materials, and to
 ** permit persons to whom the Materials are furnished to do so, subject to
 ** the following conditions:
 **
 ** The above copyright notice and this permission notice shall be included
 ** in all copies or substantial portions of the Materials.
 **
 ** THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 ** EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 ** MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 ** IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 ** CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 ** TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 ** MATERIALS OR THE USE OR OTHER DEALINGS IN THE MATERIALS.
 */

/*
 * This files is for apps that want to use ES3 if present,
 * but continue to work on pre-API-18 devices. They can't just link to -lGLESv3
 * since
 * that library doesn't exist on pre-API-18 devices.
 * The function dynamically check if OpenGLES3.0 APIs are present and fill in if
 * there are.
 * Also the header defines some extra variables for OpenGLES3.0.
 *
 */

/* Call this function before calling any OpenGL ES 3.0 functions. It will
 * return GL_TRUE if the OpenGL ES 3.0 was successfully initialized, GL_FALSE
 * otherwise. */
GLboolean gl3stubInit();

/*-------------------------------------------------------------------------
 * Data type definitions
 *-----------------------------------------------------------------------*/

/* OpenGL ES 3.0 */

typedef unsigned short GLhalf;
typedef khronos_int64_t GLint64;
typedef khronos_uint64_t GLuint64;
typedef struct __GLsync *GLsync;

/*-------------------------------------------------------------------------
 * Token definitions
 *-----------------------------------------------------------------------*/

/* OpenGL ES core versions */
#define GL_ES_VERSION_3_0 1

/* OpenGL ES 3.0 */

#define GL_READ_BUFFER 0x0C02
#define GL_UNPACK_ROW_LENGTH 0x0CF2
#define GL_UNPACK_SKIP_ROWS 0x0CF3
#define GL_UNPACK_SKIP_PIXELS 0x0CF4
#define GL_PACK_ROW_LENGTH 0x0D02
#define GL_PACK_SKIP_ROWS 0x0D03
#define GL_PACK_SKIP_PIXELS 0x0D04
#define GL_COLOR 0x1800
#define GL_DEPTH 0x1801
#define GL_STENCIL 0x1802
#define GL_RED 0x1903
#define GL_RGB8 0x8051
#define GL_RGBA8 0x8058
#define GL_RGB10_A2 0x8059
#define GL_TEXTURE_BINDING_3D 0x806A
#define GL_UNPACK_SKIP_IMAGES 0x806D
#define GL_UNPACK_IMAGE_HEIGHT 0x806E
#define GL_TEXTURE_3D 0x806F
#define GL_TEXTURE_WRAP_R 0x8072
#define GL_MAX_3D_TEXTURE_SIZE 0x8073
#define GL_UNSIGNED_INT_2_10_10_10_REV 0x8368
#define GL_MAX_ELEMENTS_VERTICES 0x80E8
#define GL_MAX_ELEMENTS_INDICES 0x80E9
#define GL_TEXTURE_MIN_LOD 0x813A
#define GL_TEXTURE_MAX_LOD 0x813B
#define GL_TEXTURE_BASE_LEVEL 0x813C
#define GL_TEXTURE_MAX_LEVEL 0x813D
#define GL_MIN 0x8007
#define GL_MAX 0x8008
#define GL_DEPTH_COMPONENT24 0x81A6
#define GL_MAX_TEXTURE_LOD_BIAS 0x84FD
#define GL_TEXTURE_COMPARE_MODE 0x884C
#define GL_TEXTURE_COMPARE_FUNC 0x884D
#define GL_CURRENT_QUERY 0x8865
#define GL_QUERY_RESULT 0x8866
#define GL_QUERY_RESULT_AVAILABLE 0x8867
#define GL_BUFFER_MAPPED 0x88BC
#define GL_BUFFER_MAP_POINTER 0x88BD
#define GL_STREAM_READ 0x88E1
#define GL_STREAM_COPY 0x88E2
#define GL_STATIC_READ 0x88E5
#define GL_STATIC_COPY 0x88E6
#define GL_DYNAMIC_READ 0x88E9
#define GL_DYNAMIC_COPY 0x88EA
#define GL_MAX_DRAW_BUFFERS 0x8824
#define GL_DRAW_BUFFER0 0x8825
#define GL_DRAW_BUFFER1 0x8826
#define GL_DRAW_BUFFER2 0x8827
#define GL_DRAW_BUFFER3 0x8828
#define GL_DRAW_BUFFER4 0x8829
#define GL_DRAW_BUFFER5 0x882A
#define GL_DRAW_BUFFER6 0x882B
#define GL_DRAW_BUFFER7 0x882C
#define GL_DRAW_BUFFER8 0x882D
#define GL_DRAW_BUFFER9 0x882E
#define GL_DRAW_BUFFER10 0x882F
#define GL_DRAW_BUFFER11 0x8830
#define GL_DRAW_BUFFER12 0x8831
#define GL_DRAW_BUFFER13 0x8832
#define GL_DRAW_BUFFER14 0x8833
#define GL_DRAW_BUFFER15 0x8834
#define GL_MAX_FRAGMENT_UNIFORM_COMPONENTS 0x8B49
#define GL_MAX_VERTEX_UNIFORM_COMPONENTS 0x8B4A
#define GL_SAMPLER_3D 0x8B5F
#define GL_SAMPLER_2D_SHADOW 0x8B62
#define GL_FRAGMENT_SHADER_DERIVATIVE_HINT 0x8B8B
#define GL_PIXEL_PACK_BUFFER 0x88EB
#define GL_PIXEL_UNPACK_BUFFER 0x88EC
#define GL_PIXEL_PACK_BUFFER_BINDING 0x88ED
#define GL_PIXEL_UNPACK_BUFFER_BINDING 0x88EF
#define GL_FLOAT_MAT2x3 0x8B65
#define GL_FLOAT_MAT2x4 0x8B66
#define GL_FLOAT_MAT3x2 0x8B67
#define GL_FLOAT_MAT3x4 0x8B68
#define GL_FLOAT_MAT4x2 0x8B69
#define GL_FLOAT_MAT4x3 0x8B6A
#define GL_SRGB 0x8C40
#define GL_SRGB8 0x8C41
#define GL_SRGB8_ALPHA8 0x8C43
#define GL_COMPARE_REF_TO_TEXTURE 0x884E
#define GL_MAJOR_VERSION 0x821B
#define GL_MINOR_VERSION 0x821C
#define GL_NUM_EXTENSIONS 0x821D
#define GL_RGBA32F 0x8814
#define GL_RGB32F 0x8815
#define GL_RGBA16F 0x881A
#define GL_RGB16F 0x881B
#define GL_VERTEX_ATTRIB_ARRAY_INTEGER 0x88FD
#define GL_MAX_ARRAY_TEXTURE_LAYERS 0x88FF
#define GL_MIN_PROGRAM_TEXEL_OFFSET 0x8904
#define GL_MAX_PROGRAM_TEXEL_OFFSET 0x8905
#define GL_MAX_VARYING_COMPONENTS 0x8B4B
#define GL_TEXTURE_2D_ARRAY 0x8C1A
#define GL_TEXTURE_BINDING_2D_ARRAY 0x8C1D
#define GL_R11F_G11F_B10F 0x8C3A
#define GL_UNSIGNED_INT_10F_11F_11F_REV 0x8C3B
#define GL_RGB9_E5 0x8C3D
#define GL_UNSIGNED_INT_5_9_9_9_REV 0x8C3E
#define GL_TRANSFORM_FEEDBACK_VARYING_MAX_LENGTH 0x8C76
#define GL_TRANSFORM_FEEDBACK_BUFFER_MODE 0x8C7F
#define GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS 0x8C80
#define GL_TRANSFORM_FEEDBACK_VARYINGS 0x8C83
#define GL_TRANSFORM_FEEDBACK_BUFFER_START 0x8C84
#define GL_TRANSFORM_FEEDBACK_BUFFER_SIZE 0x8C85
#define GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN 0x8C88
#define GL_RASTERIZER_DISCARD 0x8C89
#define GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS 0x8C8A
#define GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS 0x8C8B
#define GL_INTERLEAVED_ATTRIBS 0x8C8C
#define GL_SEPARATE_ATTRIBS 0x8C8D
#define GL_TRANSFORM_FEEDBACK_BUFFER 0x8C8E
#define GL_TRANSFORM_FEEDBACK_BUFFER_BINDING 0x8C8F
#define GL_RGBA32UI 0x8D70
#define GL_RGB32UI 0x8D71
#define GL_RGBA16UI 0x8D76
#define GL_RGB16UI 0x8D77
#define GL_RGBA8UI 0x8D7C
#define GL_RGB8UI 0x8D7D
#define GL_RGBA32I 0x8D82
#define GL_RGB32I 0x8D83
#define GL_RGBA16I 0x8D88
#define GL_RGB16I 0x8D89
#define GL_RGBA8I 0x8D8E
#define GL_RGB8I 0x8D8F
#define GL_RED_INTEGER 0x8D94
#define GL_RGB_INTEGER 0x8D98
#define GL_RGBA_INTEGER 0x8D99
#define GL_SAMPLER_2D_ARRAY 0x8DC1
#define GL_SAMPLER_2D_ARRAY_SHADOW 0x8DC4
#define GL_SAMPLER_CUBE_SHADOW 0x8DC5
#define GL_UNSIGNED_INT_VEC2 0x8DC6
#define GL_UNSIGNED_INT_VEC3 0x8DC7
#define GL_UNSIGNED_INT_VEC4 0x8DC8
#define GL_INT_SAMPLER_2D 0x8DCA
#define GL_INT_SAMPLER_3D 0x8DCB
#define GL_INT_SAMPLER_CUBE 0x8DCC
#define GL_INT_SAMPLER_2D_ARRAY 0x8DCF
#define GL_UNSIGNED_INT_SAMPLER_2D 0x8DD2
#define GL_UNSIGNED_INT_SAMPLER_3D 0x8DD3
#define GL_UNSIGNED_INT_SAMPLER_CUBE 0x8DD4
#define GL_UNSIGNED_INT_SAMPLER_2D_ARRAY 0x8DD7
#define GL_BUFFER_ACCESS_FLAGS 0x911F
#define GL_BUFFER_MAP_LENGTH 0x9120
#define GL_BUFFER_MAP_OFFSET 0x9121
#define GL_DEPTH_COMPONENT32F 0x8CAC
#define GL_DEPTH32F_STENCIL8 0x8CAD
#define GL_FLOAT_32_UNSIGNED_INT_24_8_REV 0x8DAD
#define GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING 0x8210
#define GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE 0x8211
#define GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE 0x8212
#define GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE 0x8213
#define GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE 0x8214
#define GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE 0x8215
#define GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE 0x8216
#define GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE 0x8217
#define GL_FRAMEBUFFER_DEFAULT 0x8218
#define GL_FRAMEBUFFER_UNDEFINED 0x8219
#define GL_DEPTH_STENCIL_ATTACHMENT 0x821A
#define GL_DEPTH_STENCIL 0x84F9
#define GL_UNSIGNED_INT_24_8 0x84FA
#define GL_DEPTH24_STENCIL8 0x88F0
#define GL_UNSIGNED_NORMALIZED 0x8C17
#define GL_DRAW_FRAMEBUFFER_BINDING GL_FRAMEBUFFER_BINDING
#define GL_READ_FRAMEBUFFER 0x8CA8
#define GL_DRAW_FRAMEBUFFER 0x8CA9
#define GL_READ_FRAMEBUFFER_BINDING 0x8CAA
#define GL_RENDERBUFFER_SAMPLES 0x8CAB
#define GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER 0x8CD4
#define GL_MAX_COLOR_ATTACHMENTS 0x8CDF
#define GL_COLOR_ATTACHMENT1 0x8CE1
#define GL_COLOR_ATTACHMENT2 0x8CE2
#define GL_COLOR_ATTACHMENT3 0x8CE3
#define GL_COLOR_ATTACHMENT4 0x8CE4
#define GL_COLOR_ATTACHMENT5 0x8CE5
#define GL_COLOR_ATTACHMENT6 0x8CE6
#define GL_COLOR_ATTACHMENT7 0x8CE7
#define GL_COLOR_ATTACHMENT8 0x8CE8
#define GL_COLOR_ATTACHMENT9 0x8CE9
#define GL_COLOR_ATTACHMENT10 0x8CEA
#define GL_COLOR_ATTACHMENT11 0x8CEB
#define GL_COLOR_ATTACHMENT12 0x8CEC
#define GL_COLOR_ATTACHMENT13 0x8CED
#define GL_COLOR_ATTACHMENT14 0x8CEE
#define GL_COLOR_ATTACHMENT15 0x8CEF
#define GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE 0x8D56
#define GL_MAX_SAMPLES 0x8D57
#define GL_HALF_FLOAT 0x140B
#define GL_MAP_READ_BIT 0x0001
#define GL_MAP_WRITE_BIT 0x0002
#define GL_MAP_INVALIDATE_RANGE_BIT 0x0004
#define GL_MAP_INVALIDATE_BUFFER_BIT 0x0008
#define GL_MAP_FLUSH_EXPLICIT_BIT 0x0010
#define GL_MAP_UNSYNCHRONIZED_BIT 0x0020
#define GL_RG 0x8227
#define GL_RG_INTEGER 0x8228
#define GL_R8 0x8229
#define GL_RG8 0x822B
#define GL_R16F 0x822D
#define GL_R32F 0x822E
#define GL_RG16F 0x822F
#define GL_RG32F 0x8230
#define GL_R8I 0x8231
#define GL_R8UI 0x8232
#define GL_R16I 0x8233
#define GL_R16UI 0x8234
#define GL_R32I 0x8235
#define GL_R32UI 0x8236
#define GL_RG8I 0x8237
#define GL_RG8UI 0x8238
#define GL_RG16I 0x8239
#define GL_RG16UI 0x823A
#define GL_RG32I 0x823B
#define GL_RG32UI 0x823C
#define GL_VERTEX_ARRAY_BINDING 0x85B5
#define GL_R8_SNORM 0x8F94
#define GL_RG8_SNORM 0x8F95
#define GL_RGB8_SNORM 0x8F96
#define GL_RGBA8_SNORM 0x8F97
#define GL_SIGNED_NORMALIZED 0x8F9C
#define GL_PRIMITIVE_RESTART_FIXED_INDEX 0x8D69
#define GL_COPY_READ_BUFFER 0x8F36
#define GL_COPY_WRITE_BUFFER 0x8F37
#define GL_COPY_READ_BUFFER_BINDING GL_COPY_READ_BUFFER
#define GL_COPY_WRITE_BUFFER_BINDING GL_COPY_WRITE_BUFFER
#define GL_UNIFORM_BUFFER 0x8A11
#define GL_UNIFORM_BUFFER_BINDING 0x8A28
#define GL_UNIFORM_BUFFER_START 0x8A29
#define GL_UNIFORM_BUFFER_SIZE 0x8A2A
#define GL_MAX_VERTEX_UNIFORM_BLOCKS 0x8A2B
#define GL_MAX_FRAGMENT_UNIFORM_BLOCKS 0x8A2D
#define GL_MAX_COMBINED_UNIFORM_BLOCKS 0x8A2E
#define GL_MAX_UNIFORM_BUFFER_BINDINGS 0x8A2F
#define GL_MAX_UNIFORM_BLOCK_SIZE 0x8A30
#define GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS 0x8A31
#define GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS 0x8A33
#define GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT 0x8A34
#define GL_ACTIVE_UNIFORM_BLOCK_MAX_NAME_LENGTH 0x8A35
#define GL_ACTIVE_UNIFORM_BLOCKS 0x8A36
#define GL_UNIFORM_TYPE 0x8A37
#define GL_UNIFORM_SIZE 0x8A38
#define GL_UNIFORM_NAME_LENGTH 0x8A39
#define GL_UNIFORM_BLOCK_INDEX 0x8A3A
#define GL_UNIFORM_OFFSET 0x8A3B
#define GL_UNIFORM_ARRAY_STRIDE 0x8A3C
#define GL_UNIFORM_MATRIX_STRIDE 0x8A3D
#define GL_UNIFORM_IS_ROW_MAJOR 0x8A3E
#define GL_UNIFORM_BLOCK_BINDING 0x8A3F
#define GL_UNIFORM_BLOCK_DATA_SIZE 0x8A40
#define GL_UNIFORM_BLOCK_NAME_LENGTH 0x8A41
#define GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS 0x8A42
#define GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES 0x8A43
#define GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER 0x8A44
#define GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER 0x8A46
#define GL_INVALID_INDEX 0xFFFFFFFFu
#define GL_MAX_VERTEX_OUTPUT_COMPONENTS 0x9122
#define GL_MAX_FRAGMENT_INPUT_COMPONENTS 0x9125
#define GL_MAX_SERVER_WAIT_TIMEOUT 0x9111
#define GL_OBJECT_TYPE 0x9112
#define GL_SYNC_CONDITION 0x9113
#define GL_SYNC_STATUS 0x9114
#define GL_SYNC_FLAGS 0x9115
#define GL_SYNC_FENCE 0x9116
#define GL_SYNC_GPU_COMMANDS_COMPLETE 0x9117
#define GL_UNSIGNALED 0x9118
#define GL_SIGNALED 0x9119
#define GL_ALREADY_SIGNALED 0x911A
#define GL_TIMEOUT_EXPIRED 0x911B
#define GL_CONDITION_SATISFIED 0x911C
#define GL_WAIT_FAILED 0x911D
#define GL_SYNC_FLUSH_COMMANDS_BIT 0x00000001
#define GL_TIMEOUT_IGNORED 0xFFFFFFFFFFFFFFFFull
#define GL_VERTEX_ATTRIB_ARRAY_DIVISOR 0x88FE
#define GL_ANY_SAMPLES_PASSED 0x8C2F
#define GL_ANY_SAMPLES_PASSED_CONSERVATIVE 0x8D6A
#define GL_SAMPLER_BINDING 0x8919
#define GL_RGB10_A2UI 0x906F
#define GL_TEXTURE_SWIZZLE_R 0x8E42
#define GL_TEXTURE_SWIZZLE_G 0x8E43
#define GL_TEXTURE_SWIZZLE_B 0x8E44
#define GL_TEXTURE_SWIZZLE_A 0x8E45
#define GL_GREEN 0x1904
#define GL_BLUE 0x1905
#define GL_INT_2_10_10_10_REV 0x8D9F
#define GL_TRANSFORM_FEEDBACK 0x8E22
#define GL_TRANSFORM_FEEDBACK_PAUSED 0x8E23
#define GL_TRANSFORM_FEEDBACK_ACTIVE 0x8E24
#define GL_TRANSFORM_FEEDBACK_BINDING 0x8E25
#define GL_PROGRAM_BINARY_RETRIEVABLE_HINT 0x8257
#define GL_PROGRAM_BINARY_LENGTH 0x8741
#define GL_NUM_PROGRAM_BINARY_FORMATS 0x87FE
#define GL_PROGRAM_BINARY_FORMATS 0x87FF
#define GL_COMPRESSED_R11_EAC 0x9270
#define GL_COMPRESSED_SIGNED_R11_EAC 0x9271
#define GL_COMPRESSED_RG11_EAC 0x9272
#define GL_COMPRESSED_SIGNED_RG11_EAC 0x9273
#define GL_COMPRESSED_RGB8_ETC2 0x9274
#define GL_COMPRESSED_SRGB8_ETC2 0x9275
#define GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 0x9276
#define GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 0x9277
#define GL_COMPRESSED_RGBA8_ETC2_EAC 0x9278
#define GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC 0x9279
#define GL_TEXTURE_IMMUTABLE_FORMAT 0x912F
#define GL_MAX_ELEMENT_INDEX 0x8D6B
#define GL_NUM_SAMPLE_COUNTS 0x9380
#define GL_TEXTURE_IMMUTABLE_LEVELS 0x82DF

/*-------------------------------------------------------------------------
 * Entrypoint definitions
 *-----------------------------------------------------------------------*/

/* OpenGL ES 3.0 */

extern GL_APICALL void (*GL_APIENTRY glReadBuffer)(GLenum mode);
extern GL_APICALL void (*GL_APIENTRY glDrawRangeElements)(
    GLenum mode, GLuint start, GLuint end, GLsizei count, GLenum type,
    const GLvoid *indices);
extern GL_APICALL void (*GL_APIENTRY glTexImage3D)(
    GLenum target, GLint level, GLint internalformat, GLsizei width,
    GLsizei height, GLsizei depth, GLint border, GLenum format, GLenum type,
    const GLvoid *pixels);
extern GL_APICALL void (*GL_APIENTRY glTexSubImage3D)(
    GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint zoffset,
    GLsizei width, GLsizei height, GLsizei depth, GLenum format, GLenum type,
    const GLvoid *pixels);
extern GL_APICALL void (*GL_APIENTRY glCopyTexSubImage3D)(
    GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint zoffset,
    GLint x, GLint y, GLsizei width, GLsizei height);
extern GL_APICALL void (*GL_APIENTRY glCompressedTexImage3D)(
    GLenum target, GLint level, GLenum internalformat, GLsizei width,
    GLsizei height, GLsizei depth, GLint border, GLsizei imageSize,
    const GLvoid *data);
extern GL_APICALL void (*GL_APIENTRY glCompressedTexSubImage3D)(
    GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint zoffset,
    GLsizei width, GLsizei height, GLsizei depth, GLenum format,
    GLsizei imageSize, const GLvoid *data);
extern GL_APICALL void (*GL_APIENTRY glGenQueries)(GLsizei n, GLuint *ids);
extern GL_APICALL void (*GL_APIENTRY glDeleteQueries)(GLsizei n,
                                                      const GLuint *ids);
extern GL_APICALL GLboolean (*GL_APIENTRY glIsQuery)(GLuint id);
extern GL_APICALL void (*GL_APIENTRY glBeginQuery)(GLenum target, GLuint id);
extern GL_APICALL void (*GL_APIENTRY glEndQuery)(GLenum target);
extern GL_APICALL void (*GL_APIENTRY glGetQueryiv)(GLenum target, GLenum pname,
                                                   GLint *params);
extern GL_APICALL void (*GL_APIENTRY glGetQueryObjectuiv)(GLuint id,
                                                          GLenum pname,
                                                          GLuint *params);
extern GL_APICALL GLboolean (*GL_APIENTRY glUnmapBuffer)(GLenum target);
extern GL_APICALL void (*GL_APIENTRY glGetBufferPointerv)(GLenum target,
                                                          GLenum pname,
                                                          GLvoid **params);
extern GL_APICALL void (*GL_APIENTRY glDrawBuffers)(GLsizei n,
                                                    const GLenum *bufs);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix2x3fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix3x2fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix2x4fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix4x2fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix3x4fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glUniformMatrix4x3fv)(
    GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glBlitFramebuffer)(
    GLint srcX0, GLint srcY0, GLint srcX1, GLint srcY1, GLint dstX0,
    GLint dstY0, GLint dstX1, GLint dstY1, GLbitfield mask, GLenum filter);
extern GL_APICALL void (*GL_APIENTRY glRenderbufferStorageMultisample)(
    GLenum target, GLsizei samples, GLenum internalformat, GLsizei width,
    GLsizei height);
extern GL_APICALL void (*GL_APIENTRY glFramebufferTextureLayer)(
    GLenum target, GLenum attachment, GLuint texture, GLint level, GLint layer);
extern GL_APICALL GLvoid *(*GL_APIENTRY glMapBufferRange)(GLenum target,
                                                          GLintptr offset,
                                                          GLsizeiptr length,
                                                          GLbitfield access);
extern GL_APICALL void (*GL_APIENTRY glFlushMappedBufferRange)(
    GLenum target, GLintptr offset, GLsizeiptr length);
extern GL_APICALL void (*GL_APIENTRY glBindVertexArray)(GLuint array);
extern GL_APICALL void (*GL_APIENTRY glDeleteVertexArrays)(
    GLsizei n, const GLuint *arrays);
extern GL_APICALL void (*GL_APIENTRY glGenVertexArrays)(GLsizei n,
                                                        GLuint *arrays);
extern GL_APICALL GLboolean (*GL_APIENTRY glIsVertexArray)(GLuint array);
extern GL_APICALL void (*GL_APIENTRY glGetIntegeri_v)(GLenum target,
                                                      GLuint index,
                                                      GLint *data);
extern GL_APICALL void (*GL_APIENTRY glBeginTransformFeedback)(
    GLenum primitiveMode);
extern GL_APICALL void (*GL_APIENTRY glEndTransformFeedback)(void);
extern GL_APICALL void (*GL_APIENTRY glBindBufferRange)(GLenum target,
                                                        GLuint index,
                                                        GLuint buffer,
                                                        GLintptr offset,
                                                        GLsizeiptr size);
extern GL_APICALL void (*GL_APIENTRY glBindBufferBase)(GLenum target,
                                                       GLuint index,
                                                       GLuint buffer);
extern GL_APICALL void (*GL_APIENTRY glTransformFeedbackVaryings)(
    GLuint program, GLsizei count, const GLchar *const *varyings,
    GLenum bufferMode);
extern GL_APICALL void (*GL_APIENTRY glGetTransformFeedbackVarying)(
    GLuint program, GLuint index, GLsizei bufSize, GLsizei *length,
    GLsizei *size, GLenum *type, GLchar *name);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribIPointer)(
    GLuint index, GLint size, GLenum type, GLsizei stride,
    const GLvoid *pointer);
extern GL_APICALL void (*GL_APIENTRY glGetVertexAttribIiv)(GLuint index,
                                                           GLenum pname,
                                                           GLint *params);
extern GL_APICALL void (*GL_APIENTRY glGetVertexAttribIuiv)(GLuint index,
                                                            GLenum pname,
                                                            GLuint *params);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribI4i)(GLuint index, GLint x,
                                                        GLint y, GLint z,
                                                        GLint w);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribI4ui)(GLuint index, GLuint x,
                                                         GLuint y, GLuint z,
                                                         GLuint w);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribI4iv)(GLuint index,
                                                         const GLint *v);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribI4uiv)(GLuint index,
                                                          const GLuint *v);
extern GL_APICALL void (*GL_APIENTRY glGetUniformuiv)(GLuint program,
                                                      GLint location,
                                                      GLuint *params);
extern GL_APICALL
    GLint (*GL_APIENTRY glGetFragDataLocation)(GLuint program,
                                               const GLchar *name);
extern GL_APICALL void (*GL_APIENTRY glUniform1ui)(GLint location, GLuint v0);
extern GL_APICALL void (*GL_APIENTRY glUniform2ui)(GLint location, GLuint v0,
                                                   GLuint v1);
extern GL_APICALL void (*GL_APIENTRY glUniform3ui)(GLint location, GLuint v0,
                                                   GLuint v1, GLuint v2);
extern GL_APICALL void (*GL_APIENTRY glUniform4ui)(GLint location, GLuint v0,
                                                   GLuint v1, GLuint v2,
                                                   GLuint v3);
extern GL_APICALL void (*GL_APIENTRY glUniform1uiv)(GLint location,
                                                    GLsizei count,
                                                    const GLuint *value);
extern GL_APICALL void (*GL_APIENTRY glUniform2uiv)(GLint location,
                                                    GLsizei count,
                                                    const GLuint *value);
extern GL_APICALL void (*GL_APIENTRY glUniform3uiv)(GLint location,
                                                    GLsizei count,
                                                    const GLuint *value);
extern GL_APICALL void (*GL_APIENTRY glUniform4uiv)(GLint location,
                                                    GLsizei count,
                                                    const GLuint *value);
extern GL_APICALL void (*GL_APIENTRY glClearBufferiv)(GLenum buffer,
                                                      GLint drawbuffer,
                                                      const GLint *value);
extern GL_APICALL void (*GL_APIENTRY glClearBufferuiv)(GLenum buffer,
                                                       GLint drawbuffer,
                                                       const GLuint *value);
extern GL_APICALL void (*GL_APIENTRY glClearBufferfv)(GLenum buffer,
                                                      GLint drawbuffer,
                                                      const GLfloat *value);
extern GL_APICALL void (*GL_APIENTRY glClearBufferfi)(GLenum buffer,
                                                      GLint drawbuffer,
                                                      GLfloat depth,
                                                      GLint stencil);
extern GL_APICALL const GLubyte *(*GL_APIENTRY glGetStringi)(GLenum name,
                                                             GLuint index);
extern GL_APICALL void (*GL_APIENTRY glCopyBufferSubData)(GLenum readTarget,
                                                          GLenum writeTarget,
                                                          GLintptr readOffset,
                                                          GLintptr writeOffset,
                                                          GLsizeiptr size);
extern GL_APICALL void (*GL_APIENTRY glGetUniformIndices)(
    GLuint program, GLsizei uniformCount, const GLchar *const *uniformNames,
    GLuint *uniformIndices);
extern GL_APICALL void (*GL_APIENTRY glGetActiveUniformsiv)(
    GLuint program, GLsizei uniformCount, const GLuint *uniformIndices,
    GLenum pname, GLint *params);
extern GL_APICALL GLuint (*GL_APIENTRY glGetUniformBlockIndex)(
    GLuint program, const GLchar *uniformBlockName);
extern GL_APICALL void (*GL_APIENTRY glGetActiveUniformBlockiv)(
    GLuint program, GLuint uniformBlockIndex, GLenum pname, GLint *params);
extern GL_APICALL void (*GL_APIENTRY glGetActiveUniformBlockName)(
    GLuint program, GLuint uniformBlockIndex, GLsizei bufSize, GLsizei *length,
    GLchar *uniformBlockName);
extern GL_APICALL void (*GL_APIENTRY glUniformBlockBinding)(
    GLuint program, GLuint uniformBlockIndex, GLuint uniformBlockBinding);
extern GL_APICALL void (*GL_APIENTRY glDrawArraysInstanced)(
    GLenum mode, GLint first, GLsizei count, GLsizei instanceCount);
extern GL_APICALL void (*GL_APIENTRY glDrawElementsInstanced)(
    GLenum mode, GLsizei count, GLenum type, const GLvoid *indices,
    GLsizei instanceCount);
extern GL_APICALL GLsync (*GL_APIENTRY glFenceSync)(GLenum condition,
                                                    GLbitfield flags);
extern GL_APICALL GLboolean (*GL_APIENTRY glIsSync)(GLsync sync);
extern GL_APICALL void (*GL_APIENTRY glDeleteSync)(GLsync sync);
extern GL_APICALL GLenum (*GL_APIENTRY glClientWaitSync)(GLsync sync,
                                                         GLbitfield flags,
                                                         GLuint64 timeout);
extern GL_APICALL void (*GL_APIENTRY glWaitSync)(GLsync sync, GLbitfield flags,
                                                 GLuint64 timeout);
extern GL_APICALL void (*GL_APIENTRY glGetInteger64v)(GLenum pname,
                                                      GLint64 *params);
extern GL_APICALL void (*GL_APIENTRY glGetSynciv)(GLsync sync, GLenum pname,
                                                  GLsizei bufSize,
                                                  GLsizei *length,
                                                  GLint *values);
extern GL_APICALL void (*GL_APIENTRY glGetInteger64i_v)(GLenum target,
                                                        GLuint index,
                                                        GLint64 *data);
extern GL_APICALL void (*GL_APIENTRY glGetBufferParameteri64v)(GLenum target,
                                                               GLenum pname,
                                                               GLint64 *params);
extern GL_APICALL void (*GL_APIENTRY glGenSamplers)(GLsizei count,
                                                    GLuint *samplers);
extern GL_APICALL void (*GL_APIENTRY glDeleteSamplers)(GLsizei count,
                                                       const GLuint *samplers);
extern GL_APICALL GLboolean (*GL_APIENTRY glIsSampler)(GLuint sampler);
extern GL_APICALL void (*GL_APIENTRY glBindSampler)(GLuint unit,
                                                    GLuint sampler);
extern GL_APICALL void (*GL_APIENTRY glSamplerParameteri)(GLuint sampler,
                                                          GLenum pname,
                                                          GLint param);
extern GL_APICALL void (*GL_APIENTRY glSamplerParameteriv)(GLuint sampler,
                                                           GLenum pname,
                                                           const GLint *param);
extern GL_APICALL void (*GL_APIENTRY glSamplerParameterf)(GLuint sampler,
                                                          GLenum pname,
                                                          GLfloat param);
extern GL_APICALL void (*GL_APIENTRY glSamplerParameterfv)(
    GLuint sampler, GLenum pname, const GLfloat *param);
extern GL_APICALL void (*GL_APIENTRY glGetSamplerParameteriv)(GLuint sampler,
                                                              GLenum pname,
                                                              GLint *params);
extern GL_APICALL void (*GL_APIENTRY glGetSamplerParameterfv)(GLuint sampler,
                                                              GLenum pname,
                                                              GLfloat *params);
extern GL_APICALL void (*GL_APIENTRY glVertexAttribDivisor)(GLuint index,
                                                            GLuint divisor);
extern GL_APICALL void (*GL_APIENTRY glBindTransformFeedback)(GLenum target,
                                                              GLuint id);
extern GL_APICALL void (*GL_APIENTRY glDeleteTransformFeedbacks)(
    GLsizei n, const GLuint *ids);
extern GL_APICALL void (*GL_APIENTRY glGenTransformFeedbacks)(GLsizei n,
                                                              GLuint *ids);
extern GL_APICALL GLboolean (*GL_APIENTRY glIsTransformFeedback)(GLuint id);
extern GL_APICALL void (*GL_APIENTRY glPauseTransformFeedback)(void);
extern GL_APICALL void (*GL_APIENTRY glResumeTransformFeedback)(void);
extern GL_APICALL void (*GL_APIENTRY glGetProgramBinary)(GLuint program,
                                                         GLsizei bufSize,
                                                         GLsizei *length,
                                                         GLenum *binaryFormat,
                                                         GLvoid *binary);
extern GL_APICALL void (*GL_APIENTRY glProgramBinary)(GLuint program,
                                                      GLenum binaryFormat,
                                                      const GLvoid *binary,
                                                      GLsizei length);
extern GL_APICALL void (*GL_APIENTRY glProgramParameteri)(GLuint program,
                                                          GLenum pname,
                                                          GLint value);
extern GL_APICALL void (*GL_APIENTRY glInvalidateFramebuffer)(
    GLenum target, GLsizei numAttachments, const GLenum *attachments);
extern GL_APICALL void (*GL_APIENTRY glInvalidateSubFramebuffer)(
    GLenum target, GLsizei numAttachments, const GLenum *attachments, GLint x,
    GLint y, GLsizei width, GLsizei height);
extern GL_APICALL void (*GL_APIENTRY glTexStorage2D)(GLenum target,
                                                     GLsizei levels,
                                                     GLenum internalformat,
                                                     GLsizei width,
                                                     GLsizei height);
extern GL_APICALL void (*GL_APIENTRY glTexStorage3D)(
    GLenum target, GLsizei levels, GLenum internalformat, GLsizei width,
    GLsizei height, GLsizei depth);
extern GL_APICALL void (*GL_APIENTRY glGetInternalformativ)(
    GLenum target, GLenum internalformat, GLenum pname, GLsizei bufSize,
    GLint *params);

#ifdef __cplusplus
}
#endif

#endif

```

`samples-android/Common/NDKHelper/src/main/cpp/interpolator.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "interpolator.h"
#include <math.h>
#include "interpolator.h"

namespace ndk_helper {

//-------------------------------------------------
//Ctor
//-------------------------------------------------
Interpolator::Interpolator() { list_params_.clear(); }

//-------------------------------------------------
//Dtor
//-------------------------------------------------
Interpolator::~Interpolator() { list_params_.clear(); }

void Interpolator::Clear() { list_params_.clear(); }

Interpolator &Interpolator::Set(const float start, const float dest,
                                const INTERPOLATOR_TYPE type,
                                const double duration) {
  //init the parameters for the interpolation process
  start_time_ = PerfMonitor::GetCurrentTime();
  dest_time_ = start_time_ + duration;
  type_ = type;

  start_value_ = start;
  dest_value_ = dest;
  return *this;
}

Interpolator &Interpolator::Add(const float dest, const INTERPOLATOR_TYPE type,
                                const double duration) {
  InterpolatorParams param;
  param.dest_value_ = dest;
  param.type_ = type;
  param.duration_ = duration;
  list_params_.push_back(param);
  return *this;
}

bool Interpolator::Update(const double current_time, float &p) {
  bool bContinue;
  if (current_time >= dest_time_) {
    p = dest_value_;
    if (list_params_.size()) {
      InterpolatorParams &item = list_params_.front();
      Set(dest_value_, item.dest_value_, item.type_, item.duration_);
      list_params_.pop_front();

      bContinue = true;
    } else {
      bContinue = false;
    }
  } else {
    float t = (float)(current_time - start_time_);
    float d = (float)(dest_time_ - start_time_);
    float b = start_value_;
    float c = dest_value_ - start_value_;
    p = GetFormula(type_, t, b, d, c);

    bContinue = true;
  }
  return bContinue;
}

float Interpolator::GetFormula(const INTERPOLATOR_TYPE type, const float t,
                               const float b, const float d, const float c) {
  float t1;
  switch (type) {
  case INTERPOLATOR_TYPE_LINEAR:
    // simple linear interpolation - no easing
    return (c * t / d + b);

  case INTERPOLATOR_TYPE_EASEINQUAD:
    // quadratic (t^2) easing in - accelerating from zero velocity
    t1 = t / d;
    return (c * t1 * t1 + b);

  case INTERPOLATOR_TYPE_EASEOUTQUAD:
    // quadratic (t^2) easing out - decelerating to zero velocity
    t1 = t / d;
    return (-c * t1 * (t1 - 2) + b);

  case INTERPOLATOR_TYPE_EASEINOUTQUAD:
    // quadratic easing in/out - acceleration until halfway, then deceleration
    t1 = t / d / 2;
    if (t1 < 1)
      return (c / 2 * t1 * t1 + b);
    else {
      t1 = t1 - 1;
      return (-c / 2 * (t1 * (t1 - 2) - 1) + b);
    }
  case INTERPOLATOR_TYPE_EASEINCUBIC:
    // cubic easing in - accelerating from zero velocity
    t1 = t / d;
    return (c * t1 * t1 * t1 + b);

  case INTERPOLATOR_TYPE_EASEOUTCUBIC:
    // cubic easing in - accelerating from zero velocity
    t1 = t / d - 1;
    return (c * (t1 * t1 * t1 + 1) + b);

  case INTERPOLATOR_TYPE_EASEINOUTCUBIC:
    // cubic easing in - accelerating from zero velocity
    t1 = t / d / 2;

    if (t1 < 1)
      return (c / 2 * t1 * t1 * t1 + b);
    else {
      t1 -= 2;
      return (c / 2 * (t1 * t1 * t1 + 2) + b);
    }
  case INTERPOLATOR_TYPE_EASEINQUART:
    // quartic easing in - accelerating from zero velocity
    t1 = t / d;
    return (c * t1 * t1 * t1 * t1 + b);

  case INTERPOLATOR_TYPE_EASEINEXPO:
    // exponential (2^t) easing in - accelerating from zero velocity
    if (t == 0)
      return b;
    else
      return (c * powf(2, (10 * (t / d - 1))) + b);

  case INTERPOLATOR_TYPE_EASEOUTEXPO:
    // exponential (2^t) easing out - decelerating to zero velocity
    if (t == d)
      return (b + c);
    else
      return (c * (-powf(2, -10 * t / d) + 1) + b);
  default:
    return 0;
  }
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/interpolator.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef INTERPOLATOR_H_
#define INTERPOLATOR_H_

#include <jni.h>
#include <errno.h>
#include <time.h>
#include "JNIHelper.h"
#include "perfMonitor.h"
#include <list>

namespace ndk_helper {

enum INTERPOLATOR_TYPE {
  INTERPOLATOR_TYPE_LINEAR,
  INTERPOLATOR_TYPE_EASEINQUAD,
  INTERPOLATOR_TYPE_EASEOUTQUAD,
  INTERPOLATOR_TYPE_EASEINOUTQUAD,
  INTERPOLATOR_TYPE_EASEINCUBIC,
  INTERPOLATOR_TYPE_EASEOUTCUBIC,
  INTERPOLATOR_TYPE_EASEINOUTCUBIC,
  INTERPOLATOR_TYPE_EASEINQUART,
  INTERPOLATOR_TYPE_EASEINEXPO,
  INTERPOLATOR_TYPE_EASEOUTEXPO,
};

struct InterpolatorParams {
  float dest_value_;
  INTERPOLATOR_TYPE type_;
  double duration_;
};

/******************************************************************
 * Interpolates values with several interpolation methods
 */
class Interpolator {
private:
  double start_time_;
  double dest_time_;
  INTERPOLATOR_TYPE type_;

  float start_value_;
  float dest_value_;
  std::list<InterpolatorParams> list_params_;

  float GetFormula(const INTERPOLATOR_TYPE type, const float t, const float b,
                   const float d, const float c);

public:
  Interpolator();
  ~Interpolator();

  Interpolator &Set(const float start, const float dest,
                    const INTERPOLATOR_TYPE type, double duration);

  Interpolator &Add(const float dest, const INTERPOLATOR_TYPE type,
                    const double duration);

  bool Update(const double currentTime, float &p);

  void Clear();
};

}      //namespace ndkHelper
#endif /* INTERPOLATOR_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/perfMonitor.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include "perfMonitor.h"

namespace ndk_helper {

PerfMonitor::PerfMonitor()
    : current_FPS_(0), tv_last_sec_(0), last_tick_(0), tickindex_(0),
      ticksum_(0) {
  for (int32_t i = 0; i < NUM_SAMPLES; ++i)
    ticklist_[i] = 0;
}

PerfMonitor::~PerfMonitor() {}

double PerfMonitor::UpdateTick(double currentTick) {
  ticksum_ -= ticklist_[tickindex_];
  ticksum_ += currentTick;
  ticklist_[tickindex_] = currentTick;
  tickindex_ = (tickindex_ + 1) % NUM_SAMPLES;

  return ((double) ticksum_ / NUM_SAMPLES);
}

bool PerfMonitor::Update(float &fFPS) {
  struct timeval Time;
  gettimeofday(&Time, NULL);

  double time = Time.tv_sec + Time.tv_usec * 1.0 / 1000000.0;
  double tick = time - last_tick_;
  double d = UpdateTick(tick);
  last_tick_ = time;

  if (Time.tv_sec - tv_last_sec_ >= 1) {
    current_FPS_ = 1.f / d;
    tv_last_sec_ = Time.tv_sec;
    fFPS = current_FPS_;
    return true;
  } else {
    fFPS = current_FPS_;
    return false;
  }
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/perfMonitor.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef PERFMONITOR_H_
#define PERFMONITOR_H_

#include <jni.h>
#include <errno.h>
#include <time.h>
#include "JNIHelper.h"

namespace ndk_helper {

const int32_t NUM_SAMPLES = 100;

/******************************************************************
 * Helper class for a performance monitoring and get current tick time
 */
class PerfMonitor {
private:
  float current_FPS_;
  time_t tv_last_sec_;

  double last_tick_;
  int32_t tickindex_;
  double ticksum_;
  double ticklist_[NUM_SAMPLES];

  double UpdateTick(double current_tick);

public:
  PerfMonitor();
  virtual ~PerfMonitor();

  bool Update(float &fFPS);

  static double GetCurrentTime() {
    struct timeval time;
    gettimeofday(&time, NULL);
    double ret = time.tv_sec + time.tv_usec * 1.0 / 1000000.0;
    return ret;
  }
};

}      //namespace ndkHelper
#endif /* PERFMONITOR_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/sensorManager.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <math.h>
#include "sensorManager.h"

//--------------------------------------------------------------------------------
// sensorManager.cpp
//--------------------------------------------------------------------------------
namespace ndk_helper {

//--------------------------------------------------------------------------------
// includes
//--------------------------------------------------------------------------------

//-------------------------------------------------------------------------
//Sensor handlers
//-------------------------------------------------------------------------
SensorManager::SensorManager()
    : sensorManager_(nullptr), accelerometerSensor_(nullptr),
      sensorEventQueue_(nullptr) {}

SensorManager::~SensorManager() {}

void SensorManager::Init(android_app *app) {
  sensorManager_ = ASensorManager_getInstance();
  accelerometerSensor_ = ASensorManager_getDefaultSensor(
      sensorManager_, ASENSOR_TYPE_ACCELEROMETER);
  sensorEventQueue_ = ASensorManager_createEventQueue(
      sensorManager_, app->looper, LOOPER_ID_USER, NULL, NULL);
}

void SensorManager::Process(const int32_t id) {
  // If a sensor has data, process it now.
  if (id == LOOPER_ID_USER) {
    if (accelerometerSensor_ != NULL) {
      ASensorEvent event;
      while (ASensorEventQueue_getEvents(sensorEventQueue_, &event, 1) > 0) {
        float maginitude = event.acceleration.x * event.acceleration.x +
                           event.acceleration.y * event.acceleration.y;
        if (maginitude * 4 >= event.acceleration.z * event.acceleration.z) {
          int32_t orientation = ORIENTATION_REVERSE_LANDSCAPE;
          float angle = atan2f(-event.acceleration.y, event.acceleration.x);
          if (angle <= -M_PI_2 - M_PI_4) {
            orientation = ORIENTATION_REVERSE_LANDSCAPE;
          } else if (angle <= -M_PI_4) {
            orientation = ORIENTATION_PORTRAIT;
          } else if (angle <= M_PI_4) {
            orientation = ORIENTATION_LANDSCAPE;
          } else if (angle <= M_PI_2 + M_PI_4) {
            orientation = ORIENTATION_REVERSE_PORTRAIT;
          }

          //					LOGI( "orientation %f %d", angle, orientation);
        }

      }
    }
  }
}

void SensorManager::Resume() {
  // When the app gains focus, start monitoring the accelerometer.
  if (accelerometerSensor_ != NULL) {
    ASensorEventQueue_enableSensor(sensorEventQueue_, accelerometerSensor_);
    // We'd like to get 60 events per second (in us).
    ASensorEventQueue_setEventRate(sensorEventQueue_, accelerometerSensor_,
                                   (1000L / 60) * 1000);
  }
}

void SensorManager::Suspend() {
  // When the app loses focus, stop monitoring the accelerometer.
  // This is to avoid consuming battery while not being used.
  if (accelerometerSensor_ != NULL) {
    ASensorEventQueue_disableSensor(sensorEventQueue_, accelerometerSensor_);
  }
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/sensorManager.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// sensorManager.h
//--------------------------------------------------------------------------------
#ifndef SENSORMANAGER_H_
#define SENSORMANAGER_H_

#include <android/sensor.h>
#include "JNIHelper.h"

namespace ndk_helper {
//--------------------------------------------------------------------------------
// Constants
//--------------------------------------------------------------------------------
enum ORIENTATION {
  ORIENTATION_UNKNOWN = -1,
  ORIENTATION_PORTRAIT = 0,
  ORIENTATION_LANDSCAPE = 1,
  ORIENTATION_REVERSE_PORTRAIT = 2,
  ORIENTATION_REVERSE_LANDSCAPE = 3,
};

/*
 * Helper to handle sensor inputs such as accelerometer.
 * The helper also check for screen rotation
 *
 */
class SensorManager {
  ASensorManager *sensorManager_;
  const ASensor *accelerometerSensor_;
  ASensorEventQueue *sensorEventQueue_;

protected:
public:
  SensorManager();
  ~SensorManager();
  void Init(android_app *state);
  void Process(const int32_t id);
  void Suspend();
  void Resume();
};

}      //namespace ndkHelper
#endif /* SENSORMANAGER_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/shader.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <EGL/egl.h>
#include <GLES2/gl2.h>
#include <malloc.h>

#include "shader.h"
#include "JNIHelper.h"

namespace ndk_helper {

#define DEBUG (1)

bool shader::CompileShader(
    GLuint *shader, const GLenum type, const char *str_file_name,
    const std::map<std::string, std::string> &map_parameters) {
  std::vector<uint8_t> data;
  if (!JNIHelper::GetInstance()->ReadFile(str_file_name, &data)) {
    LOGI("Can not open a file:%s", str_file_name);
    return false;
  }

  const char REPLACEMENT_TAG = '*';
  //Fill-in parameters
  std::string str(data.begin(), data.end());
  std::string str_replacement_map(data.size(), ' ');

  std::map<std::string, std::string>::const_iterator it =
      map_parameters.begin();
  std::map<std::string, std::string>::const_iterator itEnd =
      map_parameters.end();
  while (it != itEnd) {
    size_t pos = 0;
    while ((pos = str.find(it->first, pos)) != std::string::npos) {
      //Check if the sub string is already touched

      size_t replaced_pos = str_replacement_map.find(REPLACEMENT_TAG, pos);
      if (replaced_pos == std::string::npos || replaced_pos > pos) {

        str.replace(pos, it->first.length(), it->second);
        str_replacement_map.replace(pos, it->first.length(), it->first.length(),
                                    REPLACEMENT_TAG);
        pos += it->second.length();
      } else {
        //The replacement target has been touched by other tag, skipping them
        pos += it->second.length();
      }
    }
    it++;
  }

  LOGI("Patched Shdader:\n%s", str.c_str());

  std::vector<uint8_t> v(str.begin(), str.end());
  str.clear();
  return shader::CompileShader(shader, type, v);
}

bool shader::CompileShader(GLuint *shader, const GLenum type,
                           const GLchar *source, const int32_t iSize) {
  if (source == NULL || iSize <= 0)
    return false;

  *shader = glCreateShader(type);
  glShaderSource(
      *shader, 1, &source,
      &iSize); //Not specifying 3rd parameter (size) could be troublesome..

  glCompileShader(*shader);

#if defined(DEBUG)
  GLint logLength;
  glGetShaderiv(*shader, GL_INFO_LOG_LENGTH, &logLength);
  if (logLength > 0) {
    GLchar *log = (GLchar *)malloc(logLength);
    glGetShaderInfoLog(*shader, logLength, &logLength, log);
    LOGI("Shader compile log:\n%s", log);
    free(log);
  }
#endif

  GLint status;
  glGetShaderiv(*shader, GL_COMPILE_STATUS, &status);
  if (status == 0) {
    glDeleteShader(*shader);
    return false;
  }

  return true;
}

bool shader::CompileShader(GLuint *shader, const GLenum type,
                           std::vector<uint8_t> &data) {
  if (!data.size())
    return false;

  const GLchar *source = (GLchar *)&data[0];
  int32_t iSize = data.size();
  return shader::CompileShader(shader, type, source, iSize);
}

bool shader::CompileShader(GLuint *shader, const GLenum type,
                           const char *strFileName) {
  std::vector<uint8_t> data;
  bool b = JNIHelper::GetInstance()->ReadFile(strFileName, &data);
  if (!b) {
    LOGI("Can not open a file:%s", strFileName);
    return false;
  }

  return shader::CompileShader(shader, type, data);
}

bool shader::LinkProgram(const GLuint prog) {
  GLint status;

  glLinkProgram(prog);

#if defined(DEBUG)
  GLint logLength;
  glGetProgramiv(prog, GL_INFO_LOG_LENGTH, &logLength);
  if (logLength > 0) {
    GLchar *log = (GLchar *)malloc(logLength);
    glGetProgramInfoLog(prog, logLength, &logLength, log);
    LOGI("Program link log:\n%s", log);
    free(log);
  }
#endif

  glGetProgramiv(prog, GL_LINK_STATUS, &status);
  if (status == 0) {
    LOGI("Program link failed\n");
    return false;
  }

  return true;
}

bool shader::ValidateProgram(const GLuint prog) {
  GLint logLength, status;

  glValidateProgram(prog);
  glGetProgramiv(prog, GL_INFO_LOG_LENGTH, &logLength);
  if (logLength > 0) {
    GLchar *log = (GLchar *)malloc(logLength);
    glGetProgramInfoLog(prog, logLength, &logLength, log);
    LOGI("Program validate log:\n%s", log);
    free(log);
  }

  glGetProgramiv(prog, GL_VALIDATE_STATUS, &status);
  if (status == 0)
    return false;

  return true;
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/shader.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef SHADER_H_
#define SHADER_H_

#include <jni.h>

#include <vector>
#include <map>
#include <string>

#include <EGL/egl.h>
#include <GLES/gl.h>

#include <android/log.h>

#include "JNIHelper.h"

namespace ndk_helper {

namespace shader {

/******************************************************************
 * Shader compiler helper
 * namespace: ndkHelper::shader
 *
 */

/******************************************************************
 * CompileShader() with vector
 *
 * arguments:
 *  out: shader, shader variable
 *  in: type, shader type (i.e. GL_VERTEX_SHADER/GL_FRAGMENT_SHADER)
 *  in: data, source vector
 * return: true if a shader compilation succeeded, false if it failed
 *
 */
bool CompileShader(GLuint *shader, const GLenum type,
                   std::vector<uint8_t> &data);

/******************************************************************
 * CompileShader() with buffer
 *
 * arguments:
 *  out: shader, shader variable
 *  in: type, shader type (i.e. GL_VERTEX_SHADER/GL_FRAGMENT_SHADER)
 *  in: source, source buffer
 *  in: iSize, buffer size
 * return: true if a shader compilation succeeded, false if it failed
 *
 */
bool CompileShader(GLuint *shader, const GLenum type, const GLchar *source,
                   const int32_t iSize);

/******************************************************************
 * CompileShader() with filename
 *
 * arguments:
 *  out: shader, shader variable
 *  in: type, shader type (i.e. GL_VERTEX_SHADER/GL_FRAGMENT_SHADER)
 *  in: strFilename, filename
 * return: true if a shader compilation succeeded, false if it failed
 *
 */
bool CompileShader(GLuint *shader, const GLenum type, const char *strFileName);

/******************************************************************
 * CompileShader() with std::map helps patching on a shader on the fly.
 *
 * arguments:
 *  out: shader, shader variable
 *  in: type, shader type (i.e. GL_VERTEX_SHADER/GL_FRAGMENT_SHADER)
 *  in: mapParameters
 *      For a example,
 *      map : %KEY% -> %VALUE% replaces all %KEY% entries in the given shader
 * code to %VALUE"
 * return: true if a shader compilation succeeded, false if it failed
 *
 */
bool CompileShader(GLuint *shader, const GLenum type, const char *str_file_name,
                   const std::map<std::string, std::string> &map_parameters);

/******************************************************************
 * LinkProgram()
 *
 * arguments:
 *  in: program, program
 * return: true if a shader linkage succeeded, false if it failed
 *
 */
bool LinkProgram(const GLuint prog);

/******************************************************************
 * validateProgram()
 *
 * arguments:
 *  in: program, program
 * return: true if a shader validation succeeded, false if it failed
 *
 */
bool ValidateProgram(const GLuint prog);
} //namespace shader

}      //namespace ndkHelper
#endif /* SHADER_H_ */

```

`samples-android/Common/NDKHelper/src/main/cpp/tapCamera.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//----------------------------------------------------------
//  tapCamera.cpp
//  Camera control with tap
//
//----------------------------------------------------------
#include <fstream>
#include "tapCamera.h"

namespace ndk_helper {

const float TRANSFORM_FACTOR = 15.f;
const float TRANSFORM_FACTORZ = 10.f;

const float MOMENTUM_FACTOR_DECREASE = 0.85f;
const float MOMENTUM_FACTOR_DECREASE_SHIFT = 0.9f;
const float MOMENTUM_FACTOR = 0.8f;
const float MOMENTUM_FACTOR_THRESHOLD = 0.001f;

//----------------------------------------------------------
//  Ctor
//----------------------------------------------------------
TapCamera::TapCamera()
    : ball_radius_(0.75f), dragging_(false), pinching_(false),
      pinch_start_distance_SQ_(0.f), camera_rotation_(0.f),
      camera_rotation_start_(0.f), camera_rotation_now_(0.f), momentum_(false),
      momemtum_steps_(0.f), flip_z_(0.f) {
  //Init offset
  InitParameters();

  vec_flip_ = Vec2(1.f, -1.f);
  flip_z_ = -1.f;
  vec_pinch_transform_factor_ = Vec3(1.f, 1.f, 1.f);

  vec_ball_center_ = Vec2(0, 0);
  vec_ball_now_ = Vec2(0, 0);
  vec_ball_down_ = Vec2(0, 0);

  vec_pinch_start_ = Vec2(0, 0);
  vec_pinch_start_center_ = Vec2(0, 0);

  vec_flip_ = Vec2(0, 0);

}

void TapCamera::InitParameters() {
  //Init parameters
  vec_offset_ = Vec3();
  vec_offset_now_ = Vec3();

  quat_ball_rot_ = Quaternion();
  quat_ball_now_ = Quaternion();
  quat_ball_now_.ToMatrix(mat_rotation_);
  camera_rotation_ = 0.f;

  vec_drag_delta_ = Vec2();
  vec_offset_delta_ = Vec3();

  momentum_ = false;
}

//----------------------------------------------------------
//  Dtor
//----------------------------------------------------------
TapCamera::~TapCamera() {}

void TapCamera::Update(const double time) {
  if (momentum_) {
    const float MOMENTAM_UNIT = 0.0166f;
    //Activate every 16.6msec
    if (time - time_stamp_ >= MOMENTAM_UNIT) {
      float momenttum_steps = momemtum_steps_;

      //Momentum rotation
      Vec2 v = vec_drag_delta_;
      BeginDrag(Vec2()); //NOTE:This call reset _VDragDelta
      Drag(v * vec_flip_);

      //Momentum shift
      vec_offset_ += vec_offset_delta_;

      BallUpdate();
      EndDrag();

      //Decrease deltas
      vec_drag_delta_ = v * MOMENTUM_FACTOR_DECREASE;
      vec_offset_delta_ = vec_offset_delta_ * MOMENTUM_FACTOR_DECREASE_SHIFT;

      //Count steps
      momemtum_steps_ = momenttum_steps * MOMENTUM_FACTOR_DECREASE;
      if (momemtum_steps_ < MOMENTUM_FACTOR_THRESHOLD) {
        momentum_ = false;
      }
      time_stamp_ = time;
    }
  } else {
    vec_drag_delta_ *= MOMENTUM_FACTOR;
    vec_offset_delta_ = vec_offset_delta_ * MOMENTUM_FACTOR;
    BallUpdate();
    time_stamp_ = time;
  }

  Vec3 vec = vec_offset_ + vec_offset_now_;
  Vec3 vec_tmp(TRANSFORM_FACTOR, -TRANSFORM_FACTOR, TRANSFORM_FACTORZ);

  vec *= vec_tmp * vec_pinch_transform_factor_;

  mat_transform_ = Mat4::Translation(vec);
}

Mat4 &TapCamera::GetRotationMatrix() { return mat_rotation_; }

Mat4 &TapCamera::GetTransformMatrix() { return mat_transform_; }

void TapCamera::Reset(const bool bAnimate) {
  InitParameters();
  Update(0.f);

}

//----------------------------------------------------------
//Drag control
//----------------------------------------------------------
void TapCamera::BeginDrag(const Vec2 &v) {
  if (dragging_)
    EndDrag();

  if (pinching_)
    EndPinch();

  Vec2 vec = v * vec_flip_;
  vec_ball_now_ = vec;
  vec_ball_down_ = vec_ball_now_;

  dragging_ = true;
  momentum_ = false;
  vec_last_input_ = vec;
  vec_drag_delta_ = Vec2();
}

void TapCamera::EndDrag() {
  quat_ball_down_ = quat_ball_now_;
  quat_ball_rot_ = Quaternion();

  dragging_ = false;
  momentum_ = true;
  momemtum_steps_ = 1.0f;
}

void TapCamera::Drag(const Vec2 &v) {
  if (!dragging_)
    return;

  Vec2 vec = v * vec_flip_;
  vec_ball_now_ = vec;

  vec_drag_delta_ = vec_drag_delta_ * MOMENTUM_FACTOR + (vec - vec_last_input_);
  vec_last_input_ = vec;
}

//----------------------------------------------------------
//Pinch controll
//----------------------------------------------------------
void TapCamera::BeginPinch(const Vec2 &v1, const Vec2 &v2) {
  if (dragging_)
    EndDrag();

  if (pinching_)
    EndPinch();

  BeginDrag(Vec2());

  vec_pinch_start_center_ = (v1 + v2) / 2.f;

  Vec2 vec = v1 - v2;
  float x_diff;
  float y_diff;
  vec.Value(x_diff, y_diff);

  pinch_start_distance_SQ_ = x_diff * x_diff + y_diff * y_diff;
  camera_rotation_start_ = atan2f(y_diff, x_diff);
  camera_rotation_now_ = 0;

  pinching_ = true;
  momentum_ = false;

  //Init momentum factors
  vec_offset_delta_ = Vec3();
}

void TapCamera::EndPinch() {
  pinching_ = false;
  momentum_ = true;
  momemtum_steps_ = 1.f;
  vec_offset_ += vec_offset_now_;
  camera_rotation_ += camera_rotation_now_;
  vec_offset_now_ = Vec3();

  camera_rotation_now_ = 0;

  EndDrag();
}

void TapCamera::Pinch(const Vec2 &v1, const Vec2 &v2) {
  if (!pinching_)
    return;

  //Update momentum factor
  vec_offset_last_ = vec_offset_now_;

  float x_diff, y_diff;
  Vec2 vec = v1 - v2;
  vec.Value(x_diff, y_diff);

  float fDistanceSQ = x_diff * x_diff + y_diff * y_diff;

  float f = pinch_start_distance_SQ_ / fDistanceSQ;
  if (f < 1.f)
    f = -1.f / f + 1.0f;
  else
    f = f - 1.f;
  if (isnan(f))
    f = 0.f;

  vec = (v1 + v2) / 2.f - vec_pinch_start_center_;
  vec_offset_now_ = Vec3(vec, flip_z_ * f);

  //Update momentum factor
  vec_offset_delta_ = vec_offset_delta_ * MOMENTUM_FACTOR +
                      (vec_offset_now_ - vec_offset_last_);

  //
  //Update ration quaternion
  float fRotation = atan2f(y_diff, x_diff);
  camera_rotation_now_ = fRotation - camera_rotation_start_;

  //Trackball rotation
  quat_ball_rot_ = Quaternion(0.f, 0.f, sinf(-camera_rotation_now_ * 0.5f),
                              cosf(-camera_rotation_now_ * 0.5f));
}

//----------------------------------------------------------
//Trackball controll
//----------------------------------------------------------
void TapCamera::BallUpdate() {
  if (dragging_) {
    Vec3 vec_from = PointOnSphere(vec_ball_down_);
    Vec3 vec_to = PointOnSphere(vec_ball_now_);

    Vec3 vec = vec_from.Cross(vec_to);
    float w = vec_from.Dot(vec_to);

    Quaternion qDrag = Quaternion(vec, w);
    qDrag = qDrag * quat_ball_down_;
    quat_ball_now_ = quat_ball_rot_ * qDrag;
  }
  quat_ball_now_.ToMatrix(mat_rotation_);
}

Vec3 TapCamera::PointOnSphere(Vec2 &point) {
  Vec3 ball_mouse;
  float mag;
  Vec2 vec = (point - vec_ball_center_) / ball_radius_;
  mag = vec.Dot(vec);
  if (mag > 1.f) {
    float scale = 1.f / sqrtf(mag);
    vec *= scale;
    ball_mouse = Vec3(vec, 0.f);
  } else {
    ball_mouse = Vec3(vec, sqrtf(1.f - mag));
  }
  return ball_mouse;
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/tapCamera.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#pragma once
#include <vector>
#include <string>
#include <GLES2/gl2.h>

#include "JNIHelper.h"
#include "vecmath.h"
#include "interpolator.h"

namespace ndk_helper {

/******************************************************************
 * Camera control helper class with a tap gesture
 * This class is mainly used for 3D space camera control in samples.
 *
 */
class TapCamera {
private:
  //Trackball
  Vec2 vec_ball_center_;
  float ball_radius_;
  Quaternion quat_ball_now_;
  Quaternion quat_ball_down_;
  Vec2 vec_ball_now_;
  Vec2 vec_ball_down_;
  Quaternion quat_ball_rot_;

  bool dragging_;
  bool pinching_;

  //Pinch related info
  Vec2 vec_pinch_start_;
  Vec2 vec_pinch_start_center_;
  float pinch_start_distance_SQ_;

  //Camera shift
  Vec3 vec_offset_;
  Vec3 vec_offset_now_;

  //Camera Rotation
  float camera_rotation_;
  float camera_rotation_start_;
  float camera_rotation_now_;

  //Momentum support
  bool momentum_;
  double time_stamp_;
  Vec2 vec_drag_delta_;
  Vec2 vec_last_input_;
  Vec3 vec_offset_last_;
  Vec3 vec_offset_delta_;
  float momemtum_steps_;

  Vec2 vec_flip_;
  float flip_z_;

  Mat4 mat_rotation_;
  Mat4 mat_transform_;

  Vec3 vec_pinch_transform_factor_;

  Vec3 PointOnSphere(Vec2 &point);
  void BallUpdate();
  void InitParameters();

public:
  TapCamera();
  virtual ~TapCamera();
  void BeginDrag(const Vec2 &vec);
  void EndDrag();
  void Drag(const Vec2 &vec);
  void Update(const double time);

  Mat4 &GetRotationMatrix();
  Mat4 &GetTransformMatrix();

  void BeginPinch(const Vec2 &v1, const Vec2 &v2);
  void EndPinch();
  void Pinch(const Vec2 &v1, const Vec2 &v2);

  void SetFlip(const float x, const float y, const float z) {
    vec_flip_ = Vec2(x, y);
    flip_z_ = z;
  }

  void SetPinchTransformFactor(const float x, const float y, const float z) {
    vec_pinch_transform_factor_ = Vec3(x, y, z);
  }

  void Reset(const bool bAnimate);

};

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/vecmath.cpp`:

```cpp
/*
 * Copy_right 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * y_ou may_ not use this file ex_cept in compliance with the License.
 * You may_ obtain a copy_ of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by_ applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either ex_press or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// vecmath.cpp
//--------------------------------------------------------------------------------
#include "vecmath.h"

namespace ndk_helper {

//--------------------------------------------------------------------------------
// vec3
//--------------------------------------------------------------------------------
Vec3::Vec3(const Vec4 &vec) {
  x_ = vec.x_;
  y_ = vec.y_;
  z_ = vec.z_;
}

//--------------------------------------------------------------------------------
// vec4
//--------------------------------------------------------------------------------
Vec4 Vec4::operator*(const Mat4 &rhs) const {
  Vec4 out;
  out.x_ = x_ * rhs.f_[0] + y_ * rhs.f_[1] + z_ * rhs.f_[2] + w_ * rhs.f_[3];
  out.y_ = x_ * rhs.f_[4] + y_ * rhs.f_[5] + z_ * rhs.f_[6] + w_ * rhs.f_[7];
  out.z_ = x_ * rhs.f_[8] + y_ * rhs.f_[9] + z_ * rhs.f_[10] + w_ * rhs.f_[11];
  out.w_ =
      x_ * rhs.f_[12] + y_ * rhs.f_[13] + z_ * rhs.f_[14] + w_ * rhs.f_[15];
  return out;
}

//--------------------------------------------------------------------------------
// mat4
//--------------------------------------------------------------------------------
Mat4::Mat4() {
  f_[0] = 1.f;
  f_[1] = 0;
  f_[2] = 0;
  f_[3] = 0;
  f_[4] = 0;
  f_[5] = 1.f;
  f_[6] = 0;
  f_[7] = 0;
  f_[8] = 0;
  f_[9] = 0;
  f_[10] = 1.f;
  f_[11] = 0;
  f_[12] = 0;
  f_[13] = 0;
  f_[14] = 0;
  f_[15] = 1.f;
}

Mat4::Mat4(const float *mIn) {
  for (int32_t i = 0; i < 16; ++i)
    f_[i] = mIn[i];
}

Mat4 Mat4::operator*(const Mat4 &rhs) const {
  Mat4 ret;
  ret.f_[0] = f_[0] * rhs.f_[0] + f_[4] * rhs.f_[1] + f_[8] * rhs.f_[2] +
              f_[12] * rhs.f_[3];
  ret.f_[1] = f_[1] * rhs.f_[0] + f_[5] * rhs.f_[1] + f_[9] * rhs.f_[2] +
              f_[13] * rhs.f_[3];
  ret.f_[2] = f_[2] * rhs.f_[0] + f_[6] * rhs.f_[1] + f_[10] * rhs.f_[2] +
              f_[14] * rhs.f_[3];
  ret.f_[3] = f_[3] * rhs.f_[0] + f_[7] * rhs.f_[1] + f_[11] * rhs.f_[2] +
              f_[15] * rhs.f_[3];

  ret.f_[4] = f_[0] * rhs.f_[4] + f_[4] * rhs.f_[5] + f_[8] * rhs.f_[6] +
              f_[12] * rhs.f_[7];
  ret.f_[5] = f_[1] * rhs.f_[4] + f_[5] * rhs.f_[5] + f_[9] * rhs.f_[6] +
              f_[13] * rhs.f_[7];
  ret.f_[6] = f_[2] * rhs.f_[4] + f_[6] * rhs.f_[5] + f_[10] * rhs.f_[6] +
              f_[14] * rhs.f_[7];
  ret.f_[7] = f_[3] * rhs.f_[4] + f_[7] * rhs.f_[5] + f_[11] * rhs.f_[6] +
              f_[15] * rhs.f_[7];

  ret.f_[8] = f_[0] * rhs.f_[8] + f_[4] * rhs.f_[9] + f_[8] * rhs.f_[10] +
              f_[12] * rhs.f_[11];
  ret.f_[9] = f_[1] * rhs.f_[8] + f_[5] * rhs.f_[9] + f_[9] * rhs.f_[10] +
              f_[13] * rhs.f_[11];
  ret.f_[10] = f_[2] * rhs.f_[8] + f_[6] * rhs.f_[9] + f_[10] * rhs.f_[10] +
               f_[14] * rhs.f_[11];
  ret.f_[11] = f_[3] * rhs.f_[8] + f_[7] * rhs.f_[9] + f_[11] * rhs.f_[10] +
               f_[15] * rhs.f_[11];

  ret.f_[12] = f_[0] * rhs.f_[12] + f_[4] * rhs.f_[13] + f_[8] * rhs.f_[14] +
               f_[12] * rhs.f_[15];
  ret.f_[13] = f_[1] * rhs.f_[12] + f_[5] * rhs.f_[13] + f_[9] * rhs.f_[14] +
               f_[13] * rhs.f_[15];
  ret.f_[14] = f_[2] * rhs.f_[12] + f_[6] * rhs.f_[13] + f_[10] * rhs.f_[14] +
               f_[14] * rhs.f_[15];
  ret.f_[15] = f_[3] * rhs.f_[12] + f_[7] * rhs.f_[13] + f_[11] * rhs.f_[14] +
               f_[15] * rhs.f_[15];

  return ret;
}

Vec4 Mat4::operator*(const Vec4 &rhs) const {
  Vec4 ret;
  ret.x_ = rhs.x_ * f_[0] + rhs.y_ * f_[4] + rhs.z_ * f_[8] + rhs.w_ * f_[12];
  ret.y_ = rhs.x_ * f_[1] + rhs.y_ * f_[5] + rhs.z_ * f_[9] + rhs.w_ * f_[13];
  ret.z_ = rhs.x_ * f_[2] + rhs.y_ * f_[6] + rhs.z_ * f_[10] + rhs.w_ * f_[14];
  ret.w_ = rhs.x_ * f_[3] + rhs.y_ * f_[7] + rhs.z_ * f_[11] + rhs.w_ * f_[15];
  return ret;
}

Mat4 Mat4::Inverse() {
  Mat4 ret;
  float det_1;
  float pos = 0;
  float neg = 0;
  float temp;

  temp = f_[0] * f_[5] * f_[10];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  temp = f_[4] * f_[9] * f_[2];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  temp = f_[8] * f_[1] * f_[6];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  temp = -f_[8] * f_[5] * f_[2];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  temp = -f_[4] * f_[1] * f_[10];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  temp = -f_[0] * f_[9] * f_[6];
  if (temp >= 0)
    pos += temp;
  else
    neg += temp;
  det_1 = pos + neg;

  if (det_1 == 0.0) {
    //Error
  } else {
    det_1 = 1.0f / det_1;
    ret.f_[0] = (f_[5] * f_[10] - f_[9] * f_[6]) * det_1;
    ret.f_[1] = -(f_[1] * f_[10] - f_[9] * f_[2]) * det_1;
    ret.f_[2] = (f_[1] * f_[6] - f_[5] * f_[2]) * det_1;
    ret.f_[4] = -(f_[4] * f_[10] - f_[8] * f_[6]) * det_1;
    ret.f_[5] = (f_[0] * f_[10] - f_[8] * f_[2]) * det_1;
    ret.f_[6] = -(f_[0] * f_[6] - f_[4] * f_[2]) * det_1;
    ret.f_[8] = (f_[4] * f_[9] - f_[8] * f_[5]) * det_1;
    ret.f_[9] = -(f_[0] * f_[9] - f_[8] * f_[1]) * det_1;
    ret.f_[10] = (f_[0] * f_[5] - f_[4] * f_[1]) * det_1;

    /* Calculate -C * inverse(A) */
    ret.f_[12] =
        -(f_[12] * ret.f_[0] + f_[13] * ret.f_[4] + f_[14] * ret.f_[8]);
    ret.f_[13] =
        -(f_[12] * ret.f_[1] + f_[13] * ret.f_[5] + f_[14] * ret.f_[9]);
    ret.f_[14] =
        -(f_[12] * ret.f_[2] + f_[13] * ret.f_[6] + f_[14] * ret.f_[10]);

    ret.f_[3] = 0.0f;
    ret.f_[7] = 0.0f;
    ret.f_[11] = 0.0f;
    ret.f_[15] = 1.0f;
  }

  *this = ret;
  return *this;
}

//--------------------------------------------------------------------------------
// Misc
//--------------------------------------------------------------------------------
Mat4 Mat4::RotationX(const float fAngle) {
  Mat4 ret;
  float fCosine, fSine;

  fCosine = cosf(fAngle);
  fSine = sinf(fAngle);

  ret.f_[0] = 1.0f;
  ret.f_[4] = 0.0f;
  ret.f_[8] = 0.0f;
  ret.f_[12] = 0.0f;
  ret.f_[1] = 0.0f;
  ret.f_[5] = fCosine;
  ret.f_[9] = fSine;
  ret.f_[13] = 0.0f;
  ret.f_[2] = 0.0f;
  ret.f_[6] = -fSine;
  ret.f_[10] = fCosine;
  ret.f_[14] = 0.0f;
  ret.f_[3] = 0.0f;
  ret.f_[7] = 0.0f;
  ret.f_[11] = 0.0f;
  ret.f_[15] = 1.0f;
  return ret;
}

Mat4 Mat4::RotationY(const float fAngle) {
  Mat4 ret;
  float fCosine, fSine;

  fCosine = cosf(fAngle);
  fSine = sinf(fAngle);

  ret.f_[0] = fCosine;
  ret.f_[4] = 0.0f;
  ret.f_[8] = -fSine;
  ret.f_[12] = 0.0f;
  ret.f_[1] = 0.0f;
  ret.f_[5] = 1.0f;
  ret.f_[9] = 0.0f;
  ret.f_[13] = 0.0f;
  ret.f_[2] = fSine;
  ret.f_[6] = 0.0f;
  ret.f_[10] = fCosine;
  ret.f_[14] = 0.0f;
  ret.f_[3] = 0.0f;
  ret.f_[7] = 0.0f;
  ret.f_[11] = 0.0f;
  ret.f_[15] = 1.0f;
  return ret;

}

Mat4 Mat4::RotationZ(const float fAngle) {
  Mat4 ret;
  float fCosine, fSine;

  fCosine = cosf(fAngle);
  fSine = sinf(fAngle);

  ret.f_[0] = fCosine;
  ret.f_[4] = fSine;
  ret.f_[8] = 0.0f;
  ret.f_[12] = 0.0f;
  ret.f_[1] = -fSine;
  ret.f_[5] = fCosine;
  ret.f_[9] = 0.0f;
  ret.f_[13] = 0.0f;
  ret.f_[2] = 0.0f;
  ret.f_[6] = 0.0f;
  ret.f_[10] = 1.0f;
  ret.f_[14] = 0.0f;
  ret.f_[3] = 0.0f;
  ret.f_[7] = 0.0f;
  ret.f_[11] = 0.0f;
  ret.f_[15] = 1.0f;
  return ret;
}

Mat4 Mat4::Scale(const float scaleX, const float scaleY, const float scaleZ) {
  Mat4 ret;
  ret.f_[0] = scaleX;
  ret.f_[5] = scaleY;
  ret.f_[10] = scaleZ;
  ret.f_[1] = ret.f_[2] = ret.f_[3] = ret.f_[4] = ret.f_[6] = ret.f_[7] =
      ret.f_[8] = ret.f_[9] = ret.f_[11] = ret.f_[12] = ret.f_[13] =
          ret.f_[14] = 0.f;
  ret.f_[15] = 1.0f;
  return ret;
}

Mat4 Mat4::Translation(const float fX, const float fY, const float fZ) {
  Mat4 ret;
  ret.f_[0] = 1.0f;
  ret.f_[4] = 0.0f;
  ret.f_[8] = 0.0f;
  ret.f_[12] = fX;
  ret.f_[1] = 0.0f;
  ret.f_[5] = 1.0f;
  ret.f_[9] = 0.0f;
  ret.f_[13] = fY;
  ret.f_[2] = 0.0f;
  ret.f_[6] = 0.0f;
  ret.f_[10] = 1.0f;
  ret.f_[14] = fZ;
  ret.f_[3] = 0.0f;
  ret.f_[7] = 0.0f;
  ret.f_[11] = 0.0f;
  ret.f_[15] = 1.0f;
  return ret;
}

Mat4 Mat4::Translation(const Vec3 vec) {
  Mat4 ret;
  ret.f_[0] = 1.0f;
  ret.f_[4] = 0.0f;
  ret.f_[8] = 0.0f;
  ret.f_[12] = vec.x_;
  ret.f_[1] = 0.0f;
  ret.f_[5] = 1.0f;
  ret.f_[9] = 0.0f;
  ret.f_[13] = vec.y_;
  ret.f_[2] = 0.0f;
  ret.f_[6] = 0.0f;
  ret.f_[10] = 1.0f;
  ret.f_[14] = vec.z_;
  ret.f_[3] = 0.0f;
  ret.f_[7] = 0.0f;
  ret.f_[11] = 0.0f;
  ret.f_[15] = 1.0f;
  return ret;
}

Mat4 Mat4::Perspective(float width, float height, float nearPlane,
                       float farPlane) {
  float n2 = 2.0f * nearPlane;
  float rcpnmf = 1.f / (nearPlane - farPlane);

  Mat4 result;
  result.f_[0] = n2 / width;
  result.f_[4] = 0;
  result.f_[8] = 0;
  result.f_[12] = 0;
  result.f_[1] = 0;
  result.f_[5] = n2 / height;
  result.f_[9] = 0;
  result.f_[13] = 0;
  result.f_[2] = 0;
  result.f_[6] = 0;
  result.f_[10] = (farPlane + nearPlane) * rcpnmf;
  result.f_[14] = farPlane * rcpnmf * n2;
  result.f_[3] = 0;
  result.f_[7] = 0;
  result.f_[11] = -1.0;
  result.f_[15] = 0;

  return result;
}

Mat4 Mat4::Ortho2D(float left, float top, float right, float bottom) {
  const float zNear = -1.0f;
  const float zFar = 1.0f;
  const float inv_z = 1.0f / (zFar - zNear);
  const float inv_y = 1.0f / (-top + bottom);
  const float inv_x = 1.0f / (right - left);

  Mat4 result;
  result.f_[0] = 2.0f * inv_x;
  result.f_[1] = 0.0f;
  result.f_[2] = 0.0f;
  result.f_[3] = 0.0f;

  result.f_[4] = 0.0f;
  result.f_[5] = 2.0 * inv_y;
  result.f_[6] = 0.0f;
  result.f_[7] = 0.0f;

  result.f_[8] = 0.0f;
  result.f_[9] = 0.0f;
  result.f_[10] = -2.0f * inv_z;
  result.f_[11] = 0.0f;

  result.f_[12] = -(right + left) * inv_x;
  result.f_[13] = (top + bottom) * inv_y;
  result.f_[14] = -(zFar + zNear) * inv_z;
  result.f_[15] = 1.0f;
  return result;
}

Mat4 Mat4::LookAt(const Vec3 &vec_eye, const Vec3 &vec_at, const Vec3 &vec_up) {
  Vec3 vec_forward, vec_up_norm, vec_side;
  Mat4 result;

  vec_forward.x_ = vec_eye.x_ - vec_at.x_;
  vec_forward.y_ = vec_eye.y_ - vec_at.y_;
  vec_forward.z_ = vec_eye.z_ - vec_at.z_;

  vec_forward.Normalize();
  vec_up_norm = vec_up;
  vec_up_norm.Normalize();
  vec_side = vec_up_norm.Cross(vec_forward);
  vec_up_norm = vec_forward.Cross(vec_side);

  result.f_[0] = vec_side.x_;
  result.f_[4] = vec_side.y_;
  result.f_[8] = vec_side.z_;
  result.f_[12] = 0;
  result.f_[1] = vec_up_norm.x_;
  result.f_[5] = vec_up_norm.y_;
  result.f_[9] = vec_up_norm.z_;
  result.f_[13] = 0;
  result.f_[2] = vec_forward.x_;
  result.f_[6] = vec_forward.y_;
  result.f_[10] = vec_forward.z_;
  result.f_[14] = 0;
  result.f_[3] = 0;
  result.f_[7] = 0;
  result.f_[11] = 0;
  result.f_[15] = 1.0;

  result.PostTranslate(-vec_eye.x_, -vec_eye.y_, -vec_eye.z_);
  return result;
}

} //namespace ndkHelper

```

`samples-android/Common/NDKHelper/src/main/cpp/vecmath.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#ifndef VECMATH_H_
#define VECMATH_H_

#include <math.h>
#include "JNIHelper.h"

namespace ndk_helper {

/******************************************************************
 * Helper class for vector math operations
 * Currently all implementations are in pure C++.
 * Each class is an opaque class so caller does not have a direct access
 * to each element. This is for an ease of future optimization to use vector
 * operations.
 *
 */

class Vec2;
class Vec3;
class Vec4;
class Mat4;

/******************************************************************
 * 2 elements vector class
 *
 */
class Vec2 {
private:
  float x_;
  float y_;

public:
  friend class Vec3;
  friend class Vec4;
  friend class Mat4;
  friend class Quaternion;

  Vec2() { x_ = y_ = 0.f; }

  Vec2(const float fX, const float fY) {
    x_ = fX;
    y_ = fY;
  }

  Vec2(const Vec2 &vec) {
    x_ = vec.x_;
    y_ = vec.y_;
  }

  Vec2(const float *pVec) {
    x_ = (*pVec++);
    y_ = (*pVec++);
  }

  //Operators
  Vec2 operator*(const Vec2 &rhs) const {
    Vec2 ret;
    ret.x_ = x_ * rhs.x_;
    ret.y_ = y_ * rhs.y_;
    return ret;
  }

  Vec2 operator/(const Vec2 &rhs) const {
    Vec2 ret;
    ret.x_ = x_ / rhs.x_;
    ret.y_ = y_ / rhs.y_;
    return ret;
  }

  Vec2 operator+(const Vec2 &rhs) const {
    Vec2 ret;
    ret.x_ = x_ + rhs.x_;
    ret.y_ = y_ + rhs.y_;
    return ret;
  }

  Vec2 operator-(const Vec2 &rhs) const {
    Vec2 ret;
    ret.x_ = x_ - rhs.x_;
    ret.y_ = y_ - rhs.y_;
    return ret;
  }

  Vec2 &operator+=(const Vec2 &rhs) {
    x_ += rhs.x_;
    y_ += rhs.y_;
    return *this;
  }

  Vec2 &operator-=(const Vec2 &rhs) {
    x_ -= rhs.x_;
    y_ -= rhs.y_;
    return *this;
  }

  Vec2 &operator*=(const Vec2 &rhs) {
    x_ *= rhs.x_;
    y_ *= rhs.y_;
    return *this;
  }

  Vec2 &operator/=(const Vec2 &rhs) {
    x_ /= rhs.x_;
    y_ /= rhs.y_;
    return *this;
  }

  //External operators
  friend Vec2 operator-(const Vec2 &rhs) { return Vec2(rhs) *= -1; }

  friend Vec2 operator*(const float lhs, const Vec2 &rhs) {
    Vec2 ret;
    ret.x_ = lhs * rhs.x_;
    ret.y_ = lhs * rhs.y_;
    return ret;
  }

  friend Vec2 operator/(const float lhs, const Vec2 &rhs) {
    Vec2 ret;
    ret.x_ = lhs / rhs.x_;
    ret.y_ = lhs / rhs.y_;
    return ret;
  }

  //Operators with float
  Vec2 operator*(const float &rhs) const {
    Vec2 ret;
    ret.x_ = x_ * rhs;
    ret.y_ = y_ * rhs;
    return ret;
  }

  Vec2 &operator*=(const float &rhs) {
    x_ = x_ * rhs;
    y_ = y_ * rhs;
    return *this;
  }

  Vec2 operator/(const float &rhs) const {
    Vec2 ret;
    ret.x_ = x_ / rhs;
    ret.y_ = y_ / rhs;
    return ret;
  }

  Vec2 &operator/=(const float &rhs) {
    x_ = x_ / rhs;
    y_ = y_ / rhs;
    return *this;
  }

  //Compare
  bool operator==(const Vec2 &rhs) const {
    if (x_ != rhs.x_ || y_ != rhs.y_)
      return false;
    return true;
  }

  bool operator!=(const Vec2 &rhs) const {
    if (x_ == rhs.x_)
      return false;

    return true;
  }

  float Length() const { return sqrtf(x_ * x_ + y_ * y_); }

  Vec2 Normalize() {
    float len = Length();
    x_ = x_ / len;
    y_ = y_ / len;
    return *this;
  }

  float Dot(const Vec2 &rhs) { return x_ * rhs.x_ + y_ * rhs.y_; }

  bool Validate() {
    if (isnan(x_) || isnan(y_))
      return false;
    return true;
  }

  void Value(float &fX, float &fY) {
    fX = x_;
    fY = y_;
  }

  void Dump() { LOGI("Vec2 %f %f", x_, y_); }
};

/******************************************************************
 * 3 elements vector class
 *
 */
class Vec3 {
private:
  float x_, y_, z_;

public:
  friend class Vec4;
  friend class Mat4;
  friend class Quaternion;

  Vec3() { x_ = y_ = z_ = 0.f; }

  Vec3(const float fX, const float fY, const float fZ) {
    x_ = fX;
    y_ = fY;
    z_ = fZ;
  }

  Vec3(const Vec3 &vec) {
    x_ = vec.x_;
    y_ = vec.y_;
    z_ = vec.z_;
  }

  Vec3(const float *pVec) {
    x_ = (*pVec++);
    y_ = (*pVec++);
    z_ = *pVec;
  }

  Vec3(const Vec2 &vec, float f) {
    x_ = vec.x_;
    y_ = vec.y_;
    z_ = f;
  }

  Vec3(const Vec4 &vec);

  //Operators
  Vec3 operator*(const Vec3 &rhs) const {
    Vec3 ret;
    ret.x_ = x_ * rhs.x_;
    ret.y_ = y_ * rhs.y_;
    ret.z_ = z_ * rhs.z_;
    return ret;
  }

  Vec3 operator/(const Vec3 &rhs) const {
    Vec3 ret;
    ret.x_ = x_ / rhs.x_;
    ret.y_ = y_ / rhs.y_;
    ret.z_ = z_ / rhs.z_;
    return ret;
  }

  Vec3 operator+(const Vec3 &rhs) const {
    Vec3 ret;
    ret.x_ = x_ + rhs.x_;
    ret.y_ = y_ + rhs.y_;
    ret.z_ = z_ + rhs.z_;
    return ret;
  }

  Vec3 operator-(const Vec3 &rhs) const {
    Vec3 ret;
    ret.x_ = x_ - rhs.x_;
    ret.y_ = y_ - rhs.y_;
    ret.z_ = z_ - rhs.z_;
    return ret;
  }

  Vec3 &operator+=(const Vec3 &rhs) {
    x_ += rhs.x_;
    y_ += rhs.y_;
    z_ += rhs.z_;
    return *this;
  }

  Vec3 &operator-=(const Vec3 &rhs) {
    x_ -= rhs.x_;
    y_ -= rhs.y_;
    z_ -= rhs.z_;
    return *this;
  }

  Vec3 &operator*=(const Vec3 &rhs) {
    x_ *= rhs.x_;
    y_ *= rhs.y_;
    z_ *= rhs.z_;
    return *this;
  }

  Vec3 &operator/=(const Vec3 &rhs) {
    x_ /= rhs.x_;
    y_ /= rhs.y_;
    z_ /= rhs.z_;
    return *this;
  }

  //External operators
  friend Vec3 operator-(const Vec3 &rhs) { return Vec3(rhs) *= -1; }

  friend Vec3 operator*(const float lhs, const Vec3 &rhs) {
    Vec3 ret;
    ret.x_ = lhs * rhs.x_;
    ret.y_ = lhs * rhs.y_;
    ret.z_ = lhs * rhs.z_;
    return ret;
  }

  friend Vec3 operator/(const float lhs, const Vec3 &rhs) {
    Vec3 ret;
    ret.x_ = lhs / rhs.x_;
    ret.y_ = lhs / rhs.y_;
    ret.z_ = lhs / rhs.z_;
    return ret;
  }

  //Operators with float
  Vec3 operator*(const float &rhs) const {
    Vec3 ret;
    ret.x_ = x_ * rhs;
    ret.y_ = y_ * rhs;
    ret.z_ = z_ * rhs;
    return ret;
  }

  Vec3 &operator*=(const float &rhs) {
    x_ = x_ * rhs;
    y_ = y_ * rhs;
    z_ = z_ * rhs;
    return *this;
  }

  Vec3 operator/(const float &rhs) const {
    Vec3 ret;
    ret.x_ = x_ / rhs;
    ret.y_ = y_ / rhs;
    ret.z_ = z_ / rhs;
    return ret;
  }

  Vec3 &operator/=(const float &rhs) {
    x_ = x_ / rhs;
    y_ = y_ / rhs;
    z_ = z_ / rhs;
    return *this;
  }

  //Compare
  bool operator==(const Vec3 &rhs) const {
    if (x_ != rhs.x_ || y_ != rhs.y_ || z_ != rhs.z_)
      return false;
    return true;
  }

  bool operator!=(const Vec3 &rhs) const {
    if (x_ == rhs.x_)
      return false;

    return true;
  }

  float Length() const { return sqrtf(x_ * x_ + y_ * y_ + z_ * z_); }

  Vec3 Normalize() {
    float len = Length();
    x_ = x_ / len;
    y_ = y_ / len;
    z_ = z_ / len;
    return *this;
  }

  float Dot(const Vec3 &rhs) { return x_ * rhs.x_ + y_ * rhs.y_ + z_ * rhs.z_; }

  Vec3 Cross(const Vec3 &rhs) {
    Vec3 ret;
    ret.x_ = y_ * rhs.z_ - z_ * rhs.y_;
    ret.y_ = z_ * rhs.x_ - x_ * rhs.z_;
    ret.z_ = x_ * rhs.y_ - y_ * rhs.x_;
    return ret;
  }

  bool Validate() {
    if (isnan(x_) || isnan(y_) || isnan(z_))
      return false;
    return true;
  }

  void Value(float &fX, float &fY, float &fZ) {
    fX = x_;
    fY = y_;
    fZ = z_;
  }

  void Dump() { LOGI("Vec3 %f %f %f", x_, y_, z_); }
};

/******************************************************************
 * 4 elements vector class
 *
 */
class Vec4 {
private:
  float x_, y_, z_, w_;

public:
  friend class Vec3;
  friend class Mat4;
  friend class Quaternion;

  Vec4() { x_ = y_ = z_ = w_ = 0.f; }

  Vec4(const float fX, const float fY, const float fZ, const float fW) {
    x_ = fX;
    y_ = fY;
    z_ = fZ;
    w_ = fW;
  }

  Vec4(const Vec4 &vec) {
    x_ = vec.x_;
    y_ = vec.y_;
    z_ = vec.z_;
    w_ = vec.w_;
  }

  Vec4(const Vec3 &vec, const float fW) {
    x_ = vec.x_;
    y_ = vec.y_;
    z_ = vec.z_;
    w_ = fW;
  }

  Vec4(const float *pVec) {
    x_ = (*pVec++);
    y_ = (*pVec++);
    z_ = *pVec;
    w_ = *pVec;
  }

  //Operators
  Vec4 operator*(const Vec4 &rhs) const {
    Vec4 ret;
    ret.x_ = x_ * rhs.x_;
    ret.y_ = y_ * rhs.y_;
    ret.z_ = z_ * rhs.z_;
    ret.w_ = z_ * rhs.w_;
    return ret;
  }

  Vec4 operator/(const Vec4 &rhs) const {
    Vec4 ret;
    ret.x_ = x_ / rhs.x_;
    ret.y_ = y_ / rhs.y_;
    ret.z_ = z_ / rhs.z_;
    ret.w_ = z_ / rhs.w_;
    return ret;
  }

  Vec4 operator+(const Vec4 &rhs) const {
    Vec4 ret;
    ret.x_ = x_ + rhs.x_;
    ret.y_ = y_ + rhs.y_;
    ret.z_ = z_ + rhs.z_;
    ret.w_ = z_ + rhs.w_;
    return ret;
  }

  Vec4 operator-(const Vec4 &rhs) const {
    Vec4 ret;
    ret.x_ = x_ - rhs.x_;
    ret.y_ = y_ - rhs.y_;
    ret.z_ = z_ - rhs.z_;
    ret.w_ = z_ - rhs.w_;
    return ret;
  }

  Vec4 &operator+=(const Vec4 &rhs) {
    x_ += rhs.x_;
    y_ += rhs.y_;
    z_ += rhs.z_;
    w_ += rhs.w_;
    return *this;
  }

  Vec4 &operator-=(const Vec4 &rhs) {
    x_ -= rhs.x_;
    y_ -= rhs.y_;
    z_ -= rhs.z_;
    w_ -= rhs.w_;
    return *this;
  }

  Vec4 &operator*=(const Vec4 &rhs) {
    x_ *= rhs.x_;
    y_ *= rhs.y_;
    z_ *= rhs.z_;
    w_ *= rhs.w_;
    return *this;
  }

  Vec4 &operator/=(const Vec4 &rhs) {
    x_ /= rhs.x_;
    y_ /= rhs.y_;
    z_ /= rhs.z_;
    w_ /= rhs.w_;
    return *this;
  }

  //External operators
  friend Vec4 operator-(const Vec4 &rhs) { return Vec4(rhs) *= -1; }

  friend Vec4 operator*(const float lhs, const Vec4 &rhs) {
    Vec4 ret;
    ret.x_ = lhs * rhs.x_;
    ret.y_ = lhs * rhs.y_;
    ret.z_ = lhs * rhs.z_;
    ret.w_ = lhs * rhs.w_;
    return ret;
  }

  friend Vec4 operator/(const float lhs, const Vec4 &rhs) {
    Vec4 ret;
    ret.x_ = lhs / rhs.x_;
    ret.y_ = lhs / rhs.y_;
    ret.z_ = lhs / rhs.z_;
    ret.w_ = lhs / rhs.w_;
    return ret;
  }

  //Operators with float
  Vec4 operator*(const float &rhs) const {
    Vec4 ret;
    ret.x_ = x_ * rhs;
    ret.y_ = y_ * rhs;
    ret.z_ = z_ * rhs;
    ret.w_ = w_ * rhs;
    return ret;
  }

  Vec4 &operator*=(const float &rhs) {
    x_ = x_ * rhs;
    y_ = y_ * rhs;
    z_ = z_ * rhs;
    w_ = w_ * rhs;
    return *this;
  }

  Vec4 operator/(const float &rhs) const {
    Vec4 ret;
    ret.x_ = x_ / rhs;
    ret.y_ = y_ / rhs;
    ret.z_ = z_ / rhs;
    ret.w_ = w_ / rhs;
    return ret;
  }

  Vec4 &operator/=(const float &rhs) {
    x_ = x_ / rhs;
    y_ = y_ / rhs;
    z_ = z_ / rhs;
    w_ = w_ / rhs;
    return *this;
  }

  //Compare
  bool operator==(const Vec4 &rhs) const {
    if (x_ != rhs.x_ || y_ != rhs.y_ || z_ != rhs.z_ || w_ != rhs.w_)
      return false;
    return true;
  }

  bool operator!=(const Vec4 &rhs) const {
    if (x_ == rhs.x_)
      return false;

    return true;
  }

  Vec4 operator*(const Mat4 &rhs) const;

  float Length() const { return sqrtf(x_ * x_ + y_ * y_ + z_ * z_ + w_ * w_); }

  Vec4 Normalize() {
    float len = Length();
    x_ = x_ / len;
    y_ = y_ / len;
    z_ = z_ / len;
    w_ = w_ / len;
    return *this;
  }

  float Dot(const Vec3 &rhs) { return x_ * rhs.x_ + y_ * rhs.y_ + z_ * rhs.z_; }

  Vec3 Cross(const Vec3 &rhs) {
    Vec3 ret;
    ret.x_ = y_ * rhs.z_ - z_ * rhs.y_;
    ret.y_ = z_ * rhs.x_ - x_ * rhs.z_;
    ret.z_ = x_ * rhs.y_ - y_ * rhs.x_;
    return ret;
  }

  bool Validate() {
    if (isnan(x_) || isnan(y_) || isnan(z_) || isnan(w_))
      return false;
    return true;
  }

  void Value(float &fX, float &fY, float &fZ, float &fW) {
    fX = x_;
    fY = y_;
    fZ = z_;
    fW = w_;
  }
};

/******************************************************************
 * 4x4 matrix
 *
 */
class Mat4 {
private:
  float f_[16];

public:
  friend class Vec3;
  friend class Vec4;
  friend class Quaternion;

  Mat4();
  Mat4(const float *);

  Mat4 operator*(const Mat4 &rhs) const;
  Vec4 operator*(const Vec4 &rhs) const;

  Mat4 operator+(const Mat4 &rhs) const {
    Mat4 ret;
    for (int32_t i = 0; i < 16; ++i) {
      ret.f_[i] = f_[i] + rhs.f_[i];
    }
    return ret;
  }

  Mat4 operator-(const Mat4 &rhs) const {
    Mat4 ret;
    for (int32_t i = 0; i < 16; ++i) {
      ret.f_[i] = f_[i] - rhs.f_[i];
    }
    return ret;
  }

  Mat4 &operator+=(const Mat4 &rhs) {
    for (int32_t i = 0; i < 16; ++i) {
      f_[i] += rhs.f_[i];
    }
    return *this;
  }

  Mat4 &operator-=(const Mat4 &rhs) {
    for (int32_t i = 0; i < 16; ++i) {
      f_[i] -= rhs.f_[i];
    }
    return *this;
  }

  Mat4 &operator*=(const Mat4 &rhs) {
    Mat4 ret;
    ret.f_[0] = f_[0] * rhs.f_[0] + f_[4] * rhs.f_[1] + f_[8] * rhs.f_[2] +
                f_[12] * rhs.f_[3];
    ret.f_[1] = f_[1] * rhs.f_[0] + f_[5] * rhs.f_[1] + f_[9] * rhs.f_[2] +
                f_[13] * rhs.f_[3];
    ret.f_[2] = f_[2] * rhs.f_[0] + f_[6] * rhs.f_[1] + f_[10] * rhs.f_[2] +
                f_[14] * rhs.f_[3];
    ret.f_[3] = f_[3] * rhs.f_[0] + f_[7] * rhs.f_[1] + f_[11] * rhs.f_[2] +
                f_[15] * rhs.f_[3];

    ret.f_[4] = f_[0] * rhs.f_[4] + f_[4] * rhs.f_[5] + f_[8] * rhs.f_[6] +
                f_[12] * rhs.f_[7];
    ret.f_[5] = f_[1] * rhs.f_[4] + f_[5] * rhs.f_[5] + f_[9] * rhs.f_[6] +
                f_[13] * rhs.f_[7];
    ret.f_[6] = f_[2] * rhs.f_[4] + f_[6] * rhs.f_[5] + f_[10] * rhs.f_[6] +
                f_[14] * rhs.f_[7];
    ret.f_[7] = f_[3] * rhs.f_[4] + f_[7] * rhs.f_[5] + f_[11] * rhs.f_[6] +
                f_[15] * rhs.f_[7];

    ret.f_[8] = f_[0] * rhs.f_[8] + f_[4] * rhs.f_[9] + f_[8] * rhs.f_[10] +
                f_[12] * rhs.f_[11];
    ret.f_[9] = f_[1] * rhs.f_[8] + f_[5] * rhs.f_[9] + f_[9] * rhs.f_[10] +
                f_[13] * rhs.f_[11];
    ret.f_[10] = f_[2] * rhs.f_[8] + f_[6] * rhs.f_[9] + f_[10] * rhs.f_[10] +
                 f_[14] * rhs.f_[11];
    ret.f_[11] = f_[3] * rhs.f_[8] + f_[7] * rhs.f_[9] + f_[11] * rhs.f_[10] +
                 f_[15] * rhs.f_[11];

    ret.f_[12] = f_[0] * rhs.f_[12] + f_[4] * rhs.f_[13] + f_[8] * rhs.f_[14] +
                 f_[12] * rhs.f_[15];
    ret.f_[13] = f_[1] * rhs.f_[12] + f_[5] * rhs.f_[13] + f_[9] * rhs.f_[14] +
                 f_[13] * rhs.f_[15];
    ret.f_[14] = f_[2] * rhs.f_[12] + f_[6] * rhs.f_[13] + f_[10] * rhs.f_[14] +
                 f_[14] * rhs.f_[15];
    ret.f_[15] = f_[3] * rhs.f_[12] + f_[7] * rhs.f_[13] + f_[11] * rhs.f_[14] +
                 f_[15] * rhs.f_[15];

    *this = ret;
    return *this;
  }

  Mat4 operator*(const float rhs) {
    Mat4 ret;
    for (int32_t i = 0; i < 16; ++i) {
      ret.f_[i] = f_[i] * rhs;
    }
    return ret;
  }

  Mat4 &operator*=(const float rhs) {
    for (int32_t i = 0; i < 16; ++i) {
      f_[i] *= rhs;
    }
    return *this;
  }

  Mat4 &operator=(const Mat4 &rhs) {
    for (int32_t i = 0; i < 16; ++i) {
      f_[i] = rhs.f_[i];
    }
    return *this;
  }

  Mat4 Inverse();

  Mat4 Transpose() {
    Mat4 ret;
    ret.f_[0] = f_[0];
    ret.f_[1] = f_[4];
    ret.f_[2] = f_[8];
    ret.f_[3] = f_[12];
    ret.f_[4] = f_[1];
    ret.f_[5] = f_[5];
    ret.f_[6] = f_[9];
    ret.f_[7] = f_[13];
    ret.f_[8] = f_[2];
    ret.f_[9] = f_[6];
    ret.f_[10] = f_[10];
    ret.f_[11] = f_[14];
    ret.f_[12] = f_[3];
    ret.f_[13] = f_[7];
    ret.f_[14] = f_[11];
    ret.f_[15] = f_[15];
    *this = ret;
    return *this;
  }

  Mat4 &PostTranslate(float tx, float ty, float tz) {
    f_[12] += (tx * f_[0]) + (ty * f_[4]) + (tz * f_[8]);
    f_[13] += (tx * f_[1]) + (ty * f_[5]) + (tz * f_[9]);
    f_[14] += (tx * f_[2]) + (ty * f_[6]) + (tz * f_[10]);
    f_[15] += (tx * f_[3]) + (ty * f_[7]) + (tz * f_[11]);
    return *this;
  }

  float *Ptr() { return f_; }

  //--------------------------------------------------------------------------------
  // Misc
  //--------------------------------------------------------------------------------
  static Mat4 Perspective(float width, float height, float nearPlane,
                          float farPlane);
  static Mat4 Ortho2D(float left, float top, float right, float bottom);

  static Mat4 LookAt(const Vec3 &vEye, const Vec3 &vAt, const Vec3 &vUp);

  static Mat4 Translation(const float fX, const float fY, const float fZ);
  static Mat4 Translation(const Vec3 vec);

  static Mat4 RotationX(const float angle);

  static Mat4 RotationY(const float angle);

  static Mat4 RotationZ(const float angle);

  static Mat4 Scale(const float scaleX, const float scaleY, const float scaleZ);

  static Mat4 Identity() {
    Mat4 ret;
    ret.f_[0] = 1.f;
    ret.f_[1] = 0;
    ret.f_[2] = 0;
    ret.f_[3] = 0;
    ret.f_[4] = 0;
    ret.f_[5] = 1.f;
    ret.f_[6] = 0;
    ret.f_[7] = 0;
    ret.f_[8] = 0;
    ret.f_[9] = 0;
    ret.f_[10] = 1.f;
    ret.f_[11] = 0;
    ret.f_[12] = 0;
    ret.f_[13] = 0;
    ret.f_[14] = 0;
    ret.f_[15] = 1.f;
    return ret;
  }

  void Dump() {
    LOGI("%f %f %f %f", f_[0], f_[1], f_[2], f_[3]);
    LOGI("%f %f %f %f", f_[4], f_[5], f_[6], f_[7]);
    LOGI("%f %f %f %f", f_[8], f_[9], f_[10], f_[11]);
    LOGI("%f %f %f %f", f_[12], f_[13], f_[14], f_[15]);
  }
};

/******************************************************************
 * Quaternion class
 *
 */
class Quaternion {
private:
  float x_, y_, z_, w_;

public:
  friend class Vec3;
  friend class Vec4;
  friend class Mat4;

  Quaternion() {
    x_ = 0.f;
    y_ = 0.f;
    z_ = 0.f;
    w_ = 1.f;
  }

  Quaternion(const float fX, const float fY, const float fZ, const float fW) {
    x_ = fX;
    y_ = fY;
    z_ = fZ;
    w_ = fW;
  }

  Quaternion(const Vec3 vec, const float fW) {
    x_ = vec.x_;
    y_ = vec.y_;
    z_ = vec.z_;
    w_ = fW;
  }

  Quaternion(const float *p) {
    x_ = *p++;
    y_ = *p++;
    z_ = *p++;
    w_ = *p++;
  }

  Quaternion operator*(const Quaternion rhs) {
    Quaternion ret;
    ret.x_ = x_ * rhs.w_ + y_ * rhs.z_ - z_ * rhs.y_ + w_ * rhs.x_;
    ret.y_ = -x_ * rhs.z_ + y_ * rhs.w_ + z_ * rhs.x_ + w_ * rhs.y_;
    ret.z_ = x_ * rhs.y_ - y_ * rhs.x_ + z_ * rhs.w_ + w_ * rhs.z_;
    ret.w_ = -x_ * rhs.x_ - y_ * rhs.y_ - z_ * rhs.z_ + w_ * rhs.w_;
    return ret;
  }

  Quaternion &operator*=(const Quaternion rhs) {
    Quaternion ret;
    ret.x_ = x_ * rhs.w_ + y_ * rhs.z_ - z_ * rhs.y_ + w_ * rhs.x_;
    ret.y_ = -x_ * rhs.z_ + y_ * rhs.w_ + z_ * rhs.x_ + w_ * rhs.y_;
    ret.z_ = x_ * rhs.y_ - y_ * rhs.x_ + z_ * rhs.w_ + w_ * rhs.z_;
    ret.w_ = -x_ * rhs.x_ - y_ * rhs.y_ - z_ * rhs.z_ + w_ * rhs.w_;
    *this = ret;
    return *this;
  }

  Quaternion Conjugate() {
    x_ = -x_;
    y_ = -y_;
    z_ = -z_;
    return *this;
  }

  //Non destuctive version
  Quaternion Conjugated() {
    Quaternion ret;
    ret.x_ = -x_;
    ret.y_ = -y_;
    ret.z_ = -z_;
    ret.w_ = w_;
    return ret;
  }

  void ToMatrix(Mat4 &mat) {
    float x2 = x_ * x_ * 2.0f;
    float y2 = y_ * y_ * 2.0f;
    float z2 = z_ * z_ * 2.0f;
    float xy = x_ * y_ * 2.0f;
    float yz = y_ * z_ * 2.0f;
    float zx = z_ * x_ * 2.0f;
    float xw = x_ * w_ * 2.0f;
    float yw = y_ * w_ * 2.0f;
    float zw = z_ * w_ * 2.0f;

    mat.f_[0] = 1.0f - y2 - z2;
    mat.f_[1] = xy + zw;
    mat.f_[2] = zx - yw;
    mat.f_[4] = xy - zw;
    mat.f_[5] = 1.0f - z2 - x2;
    mat.f_[6] = yz + xw;
    mat.f_[8] = zx + yw;
    mat.f_[9] = yz - xw;
    mat.f_[10] = 1.0f - x2 - y2;

    mat.f_[3] = mat.f_[7] = mat.f_[11] = mat.f_[12] = mat.f_[13] = mat.f_[14] =
        0.0f;
    mat.f_[15] = 1.0f;
  }

  void ToMatrixPreserveTranslate(Mat4 &mat) {
    float x2 = x_ * x_ * 2.0f;
    float y2 = y_ * y_ * 2.0f;
    float z2 = z_ * z_ * 2.0f;
    float xy = x_ * y_ * 2.0f;
    float yz = y_ * z_ * 2.0f;
    float zx = z_ * x_ * 2.0f;
    float xw = x_ * w_ * 2.0f;
    float yw = y_ * w_ * 2.0f;
    float zw = z_ * w_ * 2.0f;

    mat.f_[0] = 1.0f - y2 - z2;
    mat.f_[1] = xy + zw;
    mat.f_[2] = zx - yw;
    mat.f_[4] = xy - zw;
    mat.f_[5] = 1.0f - z2 - x2;
    mat.f_[6] = yz + xw;
    mat.f_[8] = zx + yw;
    mat.f_[9] = yz - xw;
    mat.f_[10] = 1.0f - x2 - y2;

    mat.f_[3] = mat.f_[7] = mat.f_[11] = 0.0f;
    mat.f_[15] = 1.0f;
  }

  static Quaternion RotationAxis(const Vec3 axis, const float angle) {
    Quaternion ret;
    float s = sinf(angle / 2);
    ret.x_ = s * axis.x_;
    ret.y_ = s * axis.y_;
    ret.z_ = s * axis.z_;
    ret.w_ = cosf(angle / 2);
    return ret;
  }

  void Value(float &fX, float &fY, float &fZ, float &fW) {
    fX = x_;
    fY = y_;
    fZ = z_;
    fW = w_;
  }
};

}      //namespace ndk_helper
#endif /* VECMATH_H_ */

```

`samples-android/Common/TeapotRenderer/TeapotRenderer.cpp`:

```cpp
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// TeapotRenderer.cpp
// Render a teapot
//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
// Include files
//--------------------------------------------------------------------------------
#include "TeapotRenderer.h"

//--------------------------------------------------------------------------------
// Teapot model data
//--------------------------------------------------------------------------------
#include "teapot.inl"

//--------------------------------------------------------------------------------
// Ctor
//--------------------------------------------------------------------------------
TeapotRenderer::TeapotRenderer()
{

}

//--------------------------------------------------------------------------------
// Dtor
//--------------------------------------------------------------------------------
TeapotRenderer::~TeapotRenderer()
{
    Unload();
}

void TeapotRenderer::Init()
{
    //Settings
    glFrontFace( GL_CCW );

    //Load shader
    LoadShaders( &shader_param_, "Shaders/VS_ShaderPlain.vsh",
            "Shaders/ShaderPlain.fsh" );

    //Create Index buffer
    num_indices_ = sizeof(teapotIndices) / sizeof(teapotIndices[0]);
    glGenBuffers( 1, &ibo_ );
    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, ibo_ );
    glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof(teapotIndices), teapotIndices,
            GL_STATIC_DRAW );
    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 );

    //Create VBO
    num_vertices_ = sizeof(teapotPositions) / sizeof(teapotPositions[0]) / 3;
    int32_t iStride = sizeof(TEAPOT_VERTEX);
    int32_t iIndex = 0;
    TEAPOT_VERTEX* p = new TEAPOT_VERTEX[num_vertices_];
    for( int32_t i = 0; i < num_vertices_; ++i )
    {
        p[i].pos[0] = teapotPositions[iIndex];
        p[i].pos[1] = teapotPositions[iIndex + 1];
        p[i].pos[2] = teapotPositions[iIndex + 2];

        p[i].normal[0] = teapotNormals[iIndex];
        p[i].normal[1] = teapotNormals[iIndex + 1];
        p[i].normal[2] = teapotNormals[iIndex + 2];
        iIndex += 3;
    }
    glGenBuffers( 1, &vbo_ );
    glBindBuffer( GL_ARRAY_BUFFER, vbo_ );
    glBufferData( GL_ARRAY_BUFFER, iStride * num_vertices_, p, GL_STATIC_DRAW );
    glBindBuffer( GL_ARRAY_BUFFER, 0 );

    delete[] p;

    UpdateViewport();
    mat_model_ = ndk_helper::Mat4::Translation( 0, 0, -15.f );

    ndk_helper::Mat4 mat = ndk_helper::Mat4::RotationX( (float)M_PI / 3);
    mat_model_ = mat * mat_model_;
}

void TeapotRenderer::UpdateViewport()
{
    //Init Projection matrices
    int32_t viewport[4];
    glGetIntegerv( GL_VIEWPORT, viewport );
    float fAspect = (float) viewport[2] / (float) viewport[3];

    const float CAM_NEAR = 5.f;
    const float CAM_FAR = 10000.f;
    mat_projection_ = ndk_helper::Mat4::Perspective( fAspect, 1.f, CAM_NEAR, CAM_FAR );
}

void TeapotRenderer::Unload()
{
    if( vbo_ )
    {
        glDeleteBuffers( 1, &vbo_ );
        vbo_ = 0;
    }

    if( ibo_ )
    {
        glDeleteBuffers( 1, &ibo_ );
        ibo_ = 0;
    }

    if( shader_param_.program_ )
    {
        glDeleteProgram( shader_param_.program_ );
        shader_param_.program_ = 0;
    }
}

void TeapotRenderer::Update( const double time )
{
    const float CAM_X = 0.f;
    const float CAM_Y = 0.f;
    const float CAM_Z = 700.f;

    mat_view_ = ndk_helper::Mat4::LookAt( ndk_helper::Vec3( CAM_X, CAM_Y, CAM_Z ),
            ndk_helper::Vec3( 0.f, 0.f, 0.f ), ndk_helper::Vec3( 0.f, 1.f, 0.f ) );

    if( camera_ )
    {
        camera_->Update( time );
        mat_view_ = camera_->GetTransformMatrix() * mat_view_
                * camera_->GetRotationMatrix() * mat_model_;
    }
    else
    {
        mat_view_ = mat_view_ * mat_model_;
    }
}

void TeapotRenderer::Render()
{
    //
    // Feed Projection and Model View matrices to the shaders
    ndk_helper::Mat4 mat_vp = mat_projection_ * mat_view_;

    // Bind the VBO
    glBindBuffer( GL_ARRAY_BUFFER, vbo_ );

    int32_t iStride = sizeof(TEAPOT_VERTEX);
    // Pass the vertex data
    glVertexAttribPointer( ATTRIB_VERTEX, 3, GL_FLOAT, GL_FALSE, iStride,
            BUFFER_OFFSET( 0 ) );
    glEnableVertexAttribArray( ATTRIB_VERTEX );

    glVertexAttribPointer( ATTRIB_NORMAL, 3, GL_FLOAT, GL_FALSE, iStride,
            BUFFER_OFFSET( 3 * sizeof(GLfloat) ) );
    glEnableVertexAttribArray( ATTRIB_NORMAL );

    // Bind the IB
    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, ibo_ );

    glUseProgram( shader_param_.program_ );

    TEAPOT_MATERIALS material = { { 1.0f, 0.5f, 0.5f }, { 1.0f, 1.0f, 1.0f, 10.f }, {
            0.1f, 0.1f, 0.1f }, };

    //Update uniforms
    glUniform4f( shader_param_.material_diffuse_, material.diffuse_color[0],
            material.diffuse_color[1], material.diffuse_color[2], 1.f );

    glUniform4f( shader_param_.material_specular_, material.specular_color[0],
            material.specular_color[1], material.specular_color[2],
            material.specular_color[3] );
    //
    //using glUniform3fv here was troublesome
    //
    glUniform3f( shader_param_.material_ambient_, material.ambient_color[0],
            material.ambient_color[1], material.ambient_color[2] );

    glUniformMatrix4fv( shader_param_.matrix_projection_, 1, GL_FALSE, mat_vp.Ptr() );
    glUniformMatrix4fv( shader_param_.matrix_view_, 1, GL_FALSE, mat_view_.Ptr() );
    glUniform3f( shader_param_.light0_, 100.f, -200.f, -600.f );

    glDrawElements( GL_TRIANGLES, num_indices_, GL_UNSIGNED_SHORT, BUFFER_OFFSET(0) );

    glBindBuffer( GL_ARRAY_BUFFER, 0 );
    glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, 0 );
}

bool TeapotRenderer::LoadShaders( SHADER_PARAMS* params,
        const char* strVsh,
        const char* strFsh )
{
    GLuint program;
    GLuint vert_shader, frag_shader;

    // Create shader program
    program = glCreateProgram();
    LOGI( "Created Shader %d", program );

    // Create and compile vertex shader
    if( !ndk_helper::shader::CompileShader( &vert_shader, GL_VERTEX_SHADER, strVsh ) )
    {
        LOGI( "Failed to compile vertex shader" );
        glDeleteProgram( program );
        return false;
    }

    // Create and compile fragment shader
    if( !ndk_helper::shader::CompileShader( &frag_shader, GL_FRAGMENT_SHADER, strFsh ) )
    {
        LOGI( "Failed to compile fragment shader" );
        glDeleteProgram( program );
        return false;
    }

    // Attach vertex shader to program
    glAttachShader( program, vert_shader );

    // Attach fragment shader to program
    glAttachShader( program, frag_shader );

    // Bind attribute locations
    // this needs to be done prior to linking
    glBindAttribLocation( program, ATTRIB_VERTEX, "myVertex" );
    glBindAttribLocation( program, ATTRIB_NORMAL, "myNormal" );
    glBindAttribLocation( program, ATTRIB_UV, "myUV" );

    // Link program
    if( !ndk_helper::shader::LinkProgram( program ) )
    {
        LOGI( "Failed to link program: %d", program );

        if( vert_shader )
        {
            glDeleteShader( vert_shader );
            vert_shader = 0;
        }
        if( frag_shader )
        {
            glDeleteShader( frag_shader );
            frag_shader = 0;
        }
        if( program )
        {
            glDeleteProgram( program );
        }

        return false;
    }

    // Get uniform locations
    params->matrix_projection_ = (GLuint) glGetUniformLocation(program, "uPMatrix" );
    params->matrix_view_ = (GLuint) glGetUniformLocation(program, "uMVMatrix" );

    params->light0_ = (GLuint) glGetUniformLocation(program, "vLight0" );
    params->material_diffuse_ = (GLuint) glGetUniformLocation(program, "vMaterialDiffuse" );
    params->material_ambient_ = (GLuint) glGetUniformLocation(program, "vMaterialAmbient" );
    params->material_specular_ = (GLuint) glGetUniformLocation(program, "vMaterialSpecular" );

    // Release vertex and fragment shaders
    if( vert_shader )
        glDeleteShader( vert_shader );
    if( frag_shader )
        glDeleteShader( frag_shader );

    params->program_ = program;
    return true;
}

bool TeapotRenderer::Bind( ndk_helper::TapCamera* camera )
{
    camera_ = camera;
    return true;
}


```

`samples-android/Common/TeapotRenderer/TeapotRenderer.h`:

```h
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//--------------------------------------------------------------------------------
// Teapot Renderer.h
// Renderer for teapots
//--------------------------------------------------------------------------------
#ifndef _TEAPOTRENDERER_H
#define _TEAPOTRENDERER_H

//--------------------------------------------------------------------------------
// Include files
//--------------------------------------------------------------------------------
#include <jni.h>
#include <errno.h>

#include <vector>

#include <EGL/egl.h>
#include <GLES/gl.h>

#include <android/sensor.h>
#include <android/log.h>
#include <android_native_app_glue.h>
#include <android/native_window_jni.h>
#include <cpu-features.h>

#include "NDKHelper.h"

#define BUFFER_OFFSET(i) ((char *)NULL + (i))

struct TEAPOT_VERTEX
{
    float pos[3];
    float normal[3];
};

enum SHADER_ATTRIBUTES
{
    ATTRIB_VERTEX, ATTRIB_NORMAL, ATTRIB_UV,
};

struct SHADER_PARAMS
{
    GLuint program_;
    GLuint light0_;
    GLuint material_diffuse_;
    GLuint material_ambient_;
    GLuint material_specular_;

    GLuint matrix_projection_;
    GLuint matrix_view_;
};

struct TEAPOT_MATERIALS
{
    float diffuse_color[3];
    float specular_color[4];
    float ambient_color[3];
};

class TeapotRenderer
{
    int32_t num_indices_;
    int32_t num_vertices_;
    GLuint ibo_;
    GLuint vbo_;

    SHADER_PARAMS shader_param_;
    bool LoadShaders( SHADER_PARAMS* params, const char* strVsh, const char* strFsh );

    ndk_helper::Mat4 mat_projection_;
    ndk_helper::Mat4 mat_view_;
    ndk_helper::Mat4 mat_model_;

    ndk_helper::TapCamera* camera_;
public:
    TeapotRenderer();
    virtual ~TeapotRenderer();
    void Init();
    void Render();
    void Update( const double time );
    bool Bind( ndk_helper::TapCamera* camera );
    void Unload();
    void UpdateViewport();
};

#endif


```

`samples-android/Common/TeapotRenderer/teapot.inl`:

```inl
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//
// Teapot.inl
// Derived from WebGL sample
// https://github.com/KhronosGroup/WebGL/blob/master/sdk/demos/google/shiny-teapot/teapot-streams.js
//

float teapotPositions[] = { 17.83489990234375, 0, 30.573999404907227, 16.452699661254883, -7.000179767608643, 30.573999404907227,
        16.223100662231445, -6.902520179748535, 31.51460075378418, 17.586000442504883, 0, 31.51460075378418,
        16.48940086364746, -7.015810012817383, 31.828100204467773, 17.87470054626465, 0, 31.828100204467773,
        17.031099319458008, -7.246280193328857, 31.51460075378418, 18.46190071105957, 0, 31.51460075378418,
        17.62779998779297, -7.500199794769287, 30.573999404907227, 19.108800888061523, 0, 30.573999404907227,
        12.662699699401855, -12.662699699401855, 30.573999404907227, 12.486100196838379, -12.486100196838379, 31.51460075378418,
        12.690999984741211, -12.690999984741211, 31.828100204467773, 13.10789966583252, -13.10789966583252, 31.51460075378418,
        13.56719970703125, -13.56719970703125, 30.573999404907227, 7.000179767608643, -16.452699661254883, 30.573999404907227,
        6.902520179748535, -16.223100662231445, 31.51460075378418, 7.015810012817383, -16.48940086364746, 31.828100204467773,
        7.246280193328857, -17.031099319458008, 31.51460075378418, 7.500199794769287, -17.62779998779297, 30.573999404907227,
        0, -17.83489990234375, 30.573999404907227, 0, -17.586000442504883, 31.51460075378418,
        0, -17.87470054626465, 31.828100204467773, 0, -18.46190071105957, 31.51460075378418,
        0, -19.108800888061523, 30.573999404907227, 0, -17.83489990234375, 30.573999404907227,
        -7.483870029449463, -16.452699661254883, 30.573999404907227, -7.106579780578613, -16.223100662231445, 31.51460075378418,
        0, -17.586000442504883, 31.51460075378418, -7.07627010345459, -16.48940086364746, 31.828100204467773,
        0, -17.87470054626465, 31.828100204467773, -7.25383996963501, -17.031099319458008, 31.51460075378418,
        0, -18.46190071105957, 31.51460075378418, -7.500199794769287, -17.62779998779297, 30.573999404907227,
        0, -19.108800888061523, 30.573999404907227, -13.092700004577637, -12.662699699401855, 30.573999404907227,
        -12.667499542236328, -12.486100196838379, 31.51460075378418, -12.744799613952637, -12.690999984741211, 31.828100204467773,
        -13.11460018157959, -13.10789966583252, 31.51460075378418, -13.56719970703125, -13.56719970703125, 30.573999404907227,
        -16.61389923095703, -7.000179767608643, 30.573999404907227, -16.291099548339844, -6.902520179748535, 31.51460075378418,
        -16.50950050354004, -7.015810012817383, 31.828100204467773, -17.033599853515625, -7.246280193328857, 31.51460075378418,
        -17.62779998779297, -7.500199794769287, 30.573999404907227, -17.83489990234375, 0, 30.573999404907227,
        -17.586000442504883, 0, 31.51460075378418, -17.87470054626465, 0, 31.828100204467773,
        -18.46190071105957, 0, 31.51460075378418, -19.108800888061523, 0, 30.573999404907227,
        -17.83489990234375, 0, 30.573999404907227, -16.452699661254883, 7.000179767608643, 30.573999404907227,
        -16.223100662231445, 6.902520179748535, 31.51460075378418, -17.586000442504883, 0, 31.51460075378418,
        -16.48940086364746, 7.015810012817383, 31.828100204467773, -17.87470054626465, 0, 31.828100204467773,
        -17.031099319458008, 7.246280193328857, 31.51460075378418, -18.46190071105957, 0, 31.51460075378418,
        -17.62779998779297, 7.500199794769287, 30.573999404907227, -19.108800888061523, 0, 30.573999404907227,
        -12.662699699401855, 12.662699699401855, 30.573999404907227, -12.486100196838379, 12.486100196838379, 31.51460075378418,
        -12.690999984741211, 12.690999984741211, 31.828100204467773, -13.10789966583252, 13.10789966583252, 31.51460075378418,
        -13.56719970703125, 13.56719970703125, 30.573999404907227, -7.000179767608643, 16.452699661254883, 30.573999404907227,
        -6.902520179748535, 16.223100662231445, 31.51460075378418, -7.015810012817383, 16.48940086364746, 31.828100204467773,
        -7.246280193328857, 17.031099319458008, 31.51460075378418, -7.500199794769287, 17.62779998779297, 30.573999404907227,
        0, 17.83489990234375, 30.573999404907227, 0, 17.586000442504883, 31.51460075378418,
        0, 17.87470054626465, 31.828100204467773, 0, 18.46190071105957, 31.51460075378418,
        0, 19.108800888061523, 30.573999404907227, 0, 17.83489990234375, 30.573999404907227,
        7.000179767608643, 16.452699661254883, 30.573999404907227, 6.902520179748535, 16.223100662231445, 31.51460075378418,
        0, 17.586000442504883, 31.51460075378418, 7.015810012817383, 16.48940086364746, 31.828100204467773,
        0, 17.87470054626465, 31.828100204467773, 7.246280193328857, 17.031099319458008, 31.51460075378418,
        0, 18.46190071105957, 31.51460075378418, 7.500199794769287, 17.62779998779297, 30.573999404907227,
        0, 19.108800888061523, 30.573999404907227, 12.662699699401855, 12.662699699401855, 30.573999404907227,
        12.486100196838379, 12.486100196838379, 31.51460075378418, 12.690999984741211, 12.690999984741211, 31.828100204467773,
        13.10789966583252, 13.10789966583252, 31.51460075378418, 13.56719970703125, 13.56719970703125, 30.573999404907227,
        16.452699661254883, 7.000179767608643, 30.573999404907227, 16.223100662231445, 6.902520179748535, 31.51460075378418,
        16.48940086364746, 7.015810012817383, 31.828100204467773, 17.031099319458008, 7.246280193328857, 31.51460075378418,
        17.62779998779297, 7.500199794769287, 30.573999404907227, 17.83489990234375, 0, 30.573999404907227,
        17.586000442504883, 0, 31.51460075378418, 17.87470054626465, 0, 31.828100204467773,
        18.46190071105957, 0, 31.51460075378418, 19.108800888061523, 0, 30.573999404907227,
        19.108800888061523, 0, 30.573999404907227, 17.62779998779297, -7.500199794769287, 30.573999404907227,
        19.785400390625, -8.418190002441406, 25.572900772094727, 21.447599411010742, 0, 25.572900772094727,
        21.667600631713867, -9.218990325927734, 20.661399841308594, 23.487899780273438, 0, 20.661399841308594,
        22.99880027770996, -9.785409927368164, 15.928999900817871, 24.930999755859375, 0, 15.928999900817871,
        23.503799438476562, -10.000300407409668, 11.465299606323242, 25.4783992767334, 0, 11.465299606323242,
        13.56719970703125, -13.56719970703125, 30.573999404907227, 15.227800369262695, -15.227800369262695, 25.572900772094727,
        16.67639923095703, -16.67639923095703, 20.661399841308594, 17.701000213623047, -17.701000213623047, 15.928999900817871,
        18.089599609375, -18.089599609375, 11.465299606323242, 7.500199794769287, -17.62779998779297, 30.573999404907227,
        8.418190002441406, -19.785400390625, 25.572900772094727, 9.218990325927734, -21.667600631713867, 20.661399841308594,
        9.785409927368164, -22.99880027770996, 15.928999900817871, 10.000300407409668, -23.503799438476562, 11.465299606323242,
        0, -19.108800888061523, 30.573999404907227, 0, -21.447599411010742, 25.572900772094727,
        0, -23.487899780273438, 20.661399841308594, 0, -24.930999755859375, 15.928999900817871,
        0, -25.4783992767334, 11.465299606323242, 0, -19.108800888061523, 30.573999404907227,
        -7.500199794769287, -17.62779998779297, 30.573999404907227, -8.418190002441406, -19.785400390625, 25.572900772094727,
        0, -21.447599411010742, 25.572900772094727, -9.218990325927734, -21.667600631713867, 20.661399841308594,
        0, -23.487899780273438, 20.661399841308594, -9.785409927368164, -22.99880027770996, 15.928999900817871,
        0, -24.930999755859375, 15.928999900817871, -10.000300407409668, -23.503799438476562, 11.465299606323242,
        0, -25.4783992767334, 11.465299606323242, -13.56719970703125, -13.56719970703125, 30.573999404907227,
        -15.227800369262695, -15.227800369262695, 25.572900772094727, -16.67639923095703, -16.67639923095703, 20.661399841308594,
        -17.701000213623047, -17.701000213623047, 15.928999900817871, -18.089599609375, -18.089599609375, 11.465299606323242,
        -17.62779998779297, -7.500199794769287, 30.573999404907227, -19.785400390625, -8.418190002441406, 25.572900772094727,
        -21.667600631713867, -9.218990325927734, 20.661399841308594, -22.99880027770996, -9.785409927368164, 15.928999900817871,
        -23.503799438476562, -10.000300407409668, 11.465299606323242, -19.108800888061523, 0, 30.573999404907227,
        -21.447599411010742, 0, 25.572900772094727, -23.487899780273438, 0, 20.661399841308594,
        -24.930999755859375, 0, 15.928999900817871, -25.4783992767334, 0, 11.465299606323242,
        -19.108800888061523, 0, 30.573999404907227, -17.62779998779297, 7.500199794769287, 30.573999404907227,
        -19.785400390625, 8.418190002441406, 25.572900772094727, -21.447599411010742, 0, 25.572900772094727,
        -21.667600631713867, 9.218990325927734, 20.661399841308594, -23.487899780273438, 0, 20.661399841308594,
        -22.99880027770996, 9.785409927368164, 15.928999900817871, -24.930999755859375, 0, 15.928999900817871,
        -23.503799438476562, 10.000300407409668, 11.465299606323242, -25.4783992767334, 0, 11.465299606323242,
        -13.56719970703125, 13.56719970703125, 30.573999404907227, -15.227800369262695, 15.227800369262695, 25.572900772094727,
        -16.67639923095703, 16.67639923095703, 20.661399841308594, -17.701000213623047, 17.701000213623047, 15.928999900817871,
        -18.089599609375, 18.089599609375, 11.465299606323242, -7.500199794769287, 17.62779998779297, 30.573999404907227,
        -8.418190002441406, 19.785400390625, 25.572900772094727, -9.218990325927734, 21.667600631713867, 20.661399841308594,
        -9.785409927368164, 22.99880027770996, 15.928999900817871, -10.000300407409668, 23.503799438476562, 11.465299606323242,
        0, 19.108800888061523, 30.573999404907227, 0, 21.447599411010742, 25.572900772094727,
        0, 23.487899780273438, 20.661399841308594, 0, 24.930999755859375, 15.928999900817871,
        0, 25.4783992767334, 11.465299606323242, 0, 19.108800888061523, 30.573999404907227,
        7.500199794769287, 17.62779998779297, 30.573999404907227, 8.418190002441406, 19.785400390625, 25.572900772094727,
        0, 21.447599411010742, 25.572900772094727, 9.218990325927734, 21.667600631713867, 20.661399841308594,
        0, 23.487899780273438, 20.661399841308594, 9.785409927368164, 22.99880027770996, 15.928999900817871,
        0, 24.930999755859375, 15.928999900817871, 10.000300407409668, 23.503799438476562, 11.465299606323242,
        0, 25.4783992767334, 11.465299606323242, 13.56719970703125, 13.56719970703125, 30.573999404907227,
        15.227800369262695, 15.227800369262695, 25.572900772094727, 16.67639923095703, 16.67639923095703, 20.661399841308594,
        17.701000213623047, 17.701000213623047, 15.928999900817871, 18.089599609375, 18.089599609375, 11.465299606323242,
        17.62779998779297, 7.500199794769287, 30.573999404907227, 19.785400390625, 8.418190002441406, 25.572900772094727,
        21.667600631713867, 9.218990325927734, 20.661399841308594, 22.99880027770996, 9.785409927368164, 15.928999900817871,
        23.503799438476562, 10.000300407409668, 11.465299606323242, 19.108800888061523, 0, 30.573999404907227,
        21.447599411010742, 0, 25.572900772094727, 23.487899780273438, 0, 20.661399841308594,
        24.930999755859375, 0, 15.928999900817871, 25.4783992767334, 0, 11.465299606323242,
        25.4783992767334, 0, 11.465299606323242, 23.503799438476562, -10.000300407409668, 11.465299606323242,
        22.5856990814209, -9.609620094299316, 7.688300132751465, 24.48310089111328, 0, 7.688300132751465,
        20.565799713134766, -8.750229835510254, 4.89661979675293, 22.29360008239746, 0, 4.89661979675293,
        18.54599952697754, -7.890830039978027, 3.0006699562072754, 20.104000091552734, 0, 3.0006699562072754,
        17.62779998779297, -7.500199794769287, 1.9108799695968628, 19.108800888061523, 0, 1.9108799695968628,
        18.089599609375, -18.089599609375, 11.465299606323242, 17.382999420166016, -17.382999420166016, 7.688300132751465,
        15.828399658203125, -15.828399658203125, 4.89661979675293, 14.273900032043457, -14.273900032043457, 3.0006699562072754,
        13.56719970703125, -13.56719970703125, 1.9108799695968628, 10.000300407409668, -23.503799438476562, 11.465299606323242,
        9.609620094299316, -22.5856990814209, 7.688300132751465, 8.750229835510254, -20.565799713134766, 4.89661979675293,
        7.890830039978027, -18.54599952697754, 3.0006699562072754, 7.500199794769287, -17.62779998779297, 1.9108799695968628,
        0, -25.4783992767334, 11.465299606323242, 0, -24.48310089111328, 7.688300132751465,
        0, -22.29360008239746, 4.89661979675293, 0, -20.104000091552734, 3.0006699562072754,
        0, -19.108800888061523, 1.9108799695968628, 0, -25.4783992767334, 11.465299606323242,
        -10.000300407409668, -23.503799438476562, 11.465299606323242, -9.609620094299316, -22.5856990814209, 7.688300132751465,
        0, -24.48310089111328, 7.688300132751465, -8.750229835510254, -20.565799713134766, 4.89661979675293,
        0, -22.29360008239746, 4.89661979675293, -7.890830039978027, -18.54599952697754, 3.0006699562072754,
        0, -20.104000091552734, 3.0006699562072754, -7.500199794769287, -17.62779998779297, 1.9108799695968628,
        0, -19.108800888061523, 1.9108799695968628, -18.089599609375, -18.089599609375, 11.465299606323242,
        -17.382999420166016, -17.382999420166016, 7.688300132751465, -15.828399658203125, -15.828399658203125, 4.89661979675293,
        -14.273900032043457, -14.273900032043457, 3.0006699562072754, -13.56719970703125, -13.56719970703125, 1.9108799695968628,
        -23.503799438476562, -10.000300407409668, 11.465299606323242, -22.5856990814209, -9.609620094299316, 7.688300132751465,
        -20.565799713134766, -8.750229835510254, 4.89661979675293, -18.54599952697754, -7.890830039978027, 3.0006699562072754,
        -17.62779998779297, -7.500199794769287, 1.9108799695968628, -25.4783992767334, 0, 11.465299606323242,
        -24.48310089111328, 0, 7.688300132751465, -22.29360008239746, 0, 4.89661979675293,
        -20.104000091552734, 0, 3.0006699562072754, -19.108800888061523, 0, 1.9108799695968628,
        -25.4783992767334, 0, 11.465299606323242, -23.503799438476562, 10.000300407409668, 11.465299606323242,
        -22.5856990814209, 9.609620094299316, 7.688300132751465, -24.48310089111328, 0, 7.688300132751465,
        -20.565799713134766, 8.750229835510254, 4.89661979675293, -22.29360008239746, 0, 4.89661979675293,
        -18.54599952697754, 7.890830039978027, 3.0006699562072754, -20.104000091552734, 0, 3.0006699562072754,
        -17.62779998779297, 7.500199794769287, 1.9108799695968628, -19.108800888061523, 0, 1.9108799695968628,
        -18.089599609375, 18.089599609375, 11.465299606323242, -17.382999420166016, 17.382999420166016, 7.688300132751465,
        -15.828399658203125, 15.828399658203125, 4.89661979675293, -14.273900032043457, 14.273900032043457, 3.0006699562072754,
        -13.56719970703125, 13.56719970703125, 1.9108799695968628, -10.000300407409668, 23.503799438476562, 11.465299606323242,
        -9.609620094299316, 22.5856990814209, 7.688300132751465, -8.750229835510254, 20.565799713134766, 4.89661979675293,
        -7.890830039978027, 18.54599952697754, 3.0006699562072754, -7.500199794769287, 17.62779998779297, 1.9108799695968628,
        0, 25.4783992767334, 11.465299606323242, 0, 24.48310089111328, 7.688300132751465,
        0, 22.29360008239746, 4.89661979675293, 0, 20.104000091552734, 3.0006699562072754,
        0, 19.108800888061523, 1.9108799695968628, 0, 25.4783992767334, 11.465299606323242,
        10.000300407409668, 23.503799438476562, 11.465299606323242, 9.609620094299316, 22.5856990814209, 7.688300132751465,
        0, 24.48310089111328, 7.688300132751465, 8.750229835510254, 20.565799713134766, 4.89661979675293,
        0, 22.29360008239746, 4.89661979675293, 7.890830039978027, 18.54599952697754, 3.0006699562072754,
        0, 20.104000091552734, 3.0006699562072754, 7.500199794769287, 17.62779998779297, 1.9108799695968628,
        0, 19.108800888061523, 1.9108799695968628, 18.089599609375, 18.089599609375, 11.465299606323242,
        17.382999420166016, 17.382999420166016, 7.688300132751465, 15.828399658203125, 15.828399658203125, 4.89661979675293,
        14.273900032043457, 14.273900032043457, 3.0006699562072754, 13.56719970703125, 13.56719970703125, 1.9108799695968628,
        23.503799438476562, 10.000300407409668, 11.465299606323242, 22.5856990814209, 9.609620094299316, 7.688300132751465,
        20.565799713134766, 8.750229835510254, 4.89661979675293, 18.54599952697754, 7.890830039978027, 3.0006699562072754,
        17.62779998779297, 7.500199794769287, 1.9108799695968628, 25.4783992767334, 0, 11.465299606323242,
        24.48310089111328, 0, 7.688300132751465, 22.29360008239746, 0, 4.89661979675293,
        20.104000091552734, 0, 3.0006699562072754, 19.108800888061523, 0, 1.9108799695968628,
        19.108800888061523, 0, 1.9108799695968628, 17.62779998779297, -7.500199794769287, 1.9108799695968628,
        17.228500366210938, -7.330269813537598, 1.2092299461364746, 18.675800323486328, 0, 1.2092299461364746,
        15.093799591064453, -6.422039985656738, 0.5971490144729614, 16.361900329589844, 0, 0.5971490144729614,
        9.819259643554688, -4.177840232849121, 0.16421599686145782, 10.644200325012207, 0, 0.16421599686145782,
        0, 0, 0, 0, 0, 0,
        13.56719970703125, -13.56719970703125, 1.9108799695968628, 13.25979995727539, -13.25979995727539, 1.2092299461364746,
        11.616900444030762, -11.616900444030762, 0.5971490144729614, 7.557370185852051, -7.557370185852051, 0.16421599686145782,
        0, 0, 0, 7.500199794769287, -17.62779998779297, 1.9108799695968628,
        7.330269813537598, -17.228500366210938, 1.2092299461364746, 6.422039985656738, -15.093799591064453, 0.5971490144729614,
        4.177840232849121, -9.819259643554688, 0.16421599686145782, 0, 0, 0,
        0, -19.108800888061523, 1.9108799695968628, 0, -18.675800323486328, 1.2092299461364746,
        0, -16.361900329589844, 0.5971490144729614, 0, -10.644200325012207, 0.16421599686145782,
        0, 0, 0, 0, -19.108800888061523, 1.9108799695968628,
        -7.500199794769287, -17.62779998779297, 1.9108799695968628, -7.330269813537598, -17.228500366210938, 1.2092299461364746,
        0, -18.675800323486328, 1.2092299461364746, -6.422039985656738, -15.093799591064453, 0.5971490144729614,
        0, -16.361900329589844, 0.5971490144729614, -4.177840232849121, -9.819259643554688, 0.16421599686145782,
        0, -10.644200325012207, 0.16421599686145782, 0, 0, 0,
        0, 0, 0, -13.56719970703125, -13.56719970703125, 1.9108799695968628,
        -13.25979995727539, -13.25979995727539, 1.2092299461364746, -11.616900444030762, -11.616900444030762, 0.5971490144729614,
        -7.557370185852051, -7.557370185852051, 0.16421599686145782, 0, 0, 0,
        -17.62779998779297, -7.500199794769287, 1.9108799695968628, -17.228500366210938, -7.330269813537598, 1.2092299461364746,
        -15.093799591064453, -6.422039985656738, 0.5971490144729614, -9.819259643554688, -4.177840232849121, 0.16421599686145782,
        0, 0, 0, -19.108800888061523, 0, 1.9108799695968628,
        -18.675800323486328, 0, 1.2092299461364746, -16.361900329589844, 0, 0.5971490144729614,
        -10.644200325012207, 0, 0.16421599686145782, 0, 0, 0,
        -19.108800888061523, 0, 1.9108799695968628, -17.62779998779297, 7.500199794769287, 1.9108799695968628,
        -17.228500366210938, 7.330269813537598, 1.2092299461364746, -18.675800323486328, 0, 1.2092299461364746,
        -15.093799591064453, 6.422039985656738, 0.5971490144729614, -16.361900329589844, 0, 0.5971490144729614,
        -9.819259643554688, 4.177840232849121, 0.16421599686145782, -10.644200325012207, 0, 0.16421599686145782,
        0, 0, 0, 0, 0, 0,
        -13.56719970703125, 13.56719970703125, 1.9108799695968628, -13.25979995727539, 13.25979995727539, 1.2092299461364746,
        -11.616900444030762, 11.616900444030762, 0.5971490144729614, -7.557370185852051, 7.557370185852051, 0.16421599686145782,
        0, 0, 0, -7.500199794769287, 17.62779998779297, 1.9108799695968628,
        -7.330269813537598, 17.228500366210938, 1.2092299461364746, -6.422039985656738, 15.093799591064453, 0.5971490144729614,
        -4.177840232849121, 9.819259643554688, 0.16421599686145782, 0, 0, 0,
        0, 19.108800888061523, 1.9108799695968628, 0, 18.675800323486328, 1.2092299461364746,
        0, 16.361900329589844, 0.5971490144729614, 0, 10.644200325012207, 0.16421599686145782,
        0, 0, 0, 0, 19.108800888061523, 1.9108799695968628,
        7.500199794769287, 17.62779998779297, 1.9108799695968628, 7.330269813537598, 17.228500366210938, 1.2092299461364746,
        0, 18.675800323486328, 1.2092299461364746, 6.422039985656738, 15.093799591064453, 0.5971490144729614,
        0, 16.361900329589844, 0.5971490144729614, 4.177840232849121, 9.819259643554688, 0.16421599686145782,
        0, 10.644200325012207, 0.16421599686145782, 0, 0, 0,
        0, 0, 0, 13.56719970703125, 13.56719970703125, 1.9108799695968628,
        13.25979995727539, 13.25979995727539, 1.2092299461364746, 11.616900444030762, 11.616900444030762, 0.5971490144729614,
        7.557370185852051, 7.557370185852051, 0.16421599686145782, 0, 0, 0,
        17.62779998779297, 7.500199794769287, 1.9108799695968628, 17.228500366210938, 7.330269813537598, 1.2092299461364746,
        15.093799591064453, 6.422039985656738, 0.5971490144729614, 9.819259643554688, 4.177840232849121, 0.16421599686145782,
        0, 0, 0, 19.108800888061523, 0, 1.9108799695968628,
        18.675800323486328, 0, 1.2092299461364746, 16.361900329589844, 0, 0.5971490144729614,
        10.644200325012207, 0, 0.16421599686145782, 0, 0, 0,
        -20.382699966430664, 0, 25.796899795532227, -20.1835994720459, -2.149739980697632, 26.244699478149414,
        -26.511600494384766, -2.149739980697632, 26.192899703979492, -26.334299087524414, 0, 25.752099990844727,
        -31.156299591064453, -2.149739980697632, 25.830400466918945, -30.733299255371094, 0, 25.438600540161133,
        -34.016998291015625, -2.149739980697632, 24.846500396728516, -33.46030044555664, 0, 24.587600708007812,
        -34.99290084838867, -2.149739980697632, 22.930500030517578, -34.39580154418945, 0, 22.930500030517578,
        -19.74570083618164, -2.8663198947906494, 27.229999542236328, -26.901599884033203, -2.8663198947906494, 27.162799835205078,
        -32.08679962158203, -2.8663198947906494, 26.69260025024414, -35.241798400878906, -2.8663198947906494, 25.416200637817383,
        -36.30670166015625, -2.8663198947906494, 22.930500030517578, -19.30780029296875, -2.149739980697632, 28.215299606323242,
        -27.29159927368164, -2.149739980697632, 28.132699966430664, -33.017398834228516, -2.149739980697632, 27.55470085144043,
        -36.46649932861328, -2.149739980697632, 25.98579978942871, -37.620399475097656, -2.149739980697632, 22.930500030517578,
        -19.108800888061523, 0, 28.66320037841797, -27.468900680541992, 0, 28.57360076904297,
        -33.440399169921875, 0, 27.94659996032715, -37.02330017089844, 0, 26.244699478149414,
        -38.21760177612305, 0, 22.930500030517578, -19.108800888061523, 0, 28.66320037841797,
        -19.30780029296875, 2.149739980697632, 28.215299606323242, -27.29159927368164, 2.149739980697632, 28.132699966430664,
        -27.468900680541992, 0, 28.57360076904297, -33.017398834228516, 2.149739980697632, 27.55470085144043,
        -33.440399169921875, 0, 27.94659996032715, -36.46649932861328, 2.149739980697632, 25.98579978942871,
        -37.02330017089844, 0, 26.244699478149414, -37.620399475097656, 2.149739980697632, 22.930500030517578,
        -38.21760177612305, 0, 22.930500030517578, -19.74570083618164, 2.8663198947906494, 27.229999542236328,
        -26.901599884033203, 2.8663198947906494, 27.162799835205078, -32.08679962158203, 2.8663198947906494, 26.69260025024414,
        -35.241798400878906, 2.8663198947906494, 25.416200637817383, -36.30670166015625, 2.8663198947906494, 22.930500030517578,
        -20.1835994720459, 2.149739980697632, 26.244699478149414, -26.511600494384766, 2.149739980697632, 26.192899703979492,
        -31.156299591064453, 2.149739980697632, 25.830400466918945, -34.016998291015625, 2.149739980697632, 24.846500396728516,
        -34.99290084838867, 2.149739980697632, 22.930500030517578, -20.382699966430664, 0, 25.796899795532227,
        -26.334299087524414, 0, 25.752099990844727, -30.733299255371094, 0, 25.438600540161133,
        -33.46030044555664, 0, 24.587600708007812, -34.39580154418945, 0, 22.930500030517578,
        -34.39580154418945, 0, 22.930500030517578, -34.99290084838867, -2.149739980697632, 22.930500030517578,
        -34.44089889526367, -2.149739980697632, 20.082199096679688, -33.89820098876953, 0, 20.33289909362793,
        -32.711299896240234, -2.149739980697632, 16.81529998779297, -32.32569885253906, 0, 17.197900772094727,
        -29.69420051574707, -2.149739980697632, 13.590499877929688, -29.558900833129883, 0, 14.062899589538574,
        -25.279300689697266, -2.149739980697632, 10.8681001663208, -25.4783992767334, 0, 11.465299606323242,
        -36.30670166015625, -2.8663198947906494, 22.930500030517578, -35.6348991394043, -2.8663198947906494, 19.530500411987305,
        -33.55979919433594, -2.8663198947906494, 15.973699569702148, -29.99180030822754, -2.8663198947906494, 12.551300048828125,
        -24.841400146484375, -2.8663198947906494, 9.554389953613281, -37.620399475097656, -2.149739980697632, 22.930500030517578,
        -36.82889938354492, -2.149739980697632, 18.97879981994629, -34.408199310302734, -2.149739980697632, 15.132100105285645,
        -30.289499282836914, -2.149739980697632, 11.512200355529785, -24.403499603271484, -2.149739980697632, 8.240659713745117,
        -38.21760177612305, 0, 22.930500030517578, -37.37160110473633, 0, 18.728099822998047,
        -34.79389953613281, 0, 14.749600410461426, -30.424800872802734, 0, 11.039799690246582,
        -24.204500198364258, 0, 7.643509864807129, -38.21760177612305, 0, 22.930500030517578,
        -37.620399475097656, 2.149739980697632, 22.930500030517578, -36.82889938354492, 2.149739980697632, 18.97879981994629,
        -37.37160110473633, 0, 18.728099822998047, -34.408199310302734, 2.149739980697632, 15.132100105285645,
        -34.79389953613281, 0, 14.749600410461426, -30.289499282836914, 2.149739980697632, 11.512200355529785,
        -30.424800872802734, 0, 11.039799690246582, -24.403499603271484, 2.149739980697632, 8.240659713745117,
        -24.204500198364258, 0, 7.643509864807129, -36.30670166015625, 2.8663198947906494, 22.930500030517578,
        -35.6348991394043, 2.8663198947906494, 19.530500411987305, -33.55979919433594, 2.8663198947906494, 15.973699569702148,
        -29.99180030822754, 2.8663198947906494, 12.551300048828125, -24.841400146484375, 2.8663198947906494, 9.554389953613281,
        -34.99290084838867, 2.149739980697632, 22.930500030517578, -34.44089889526367, 2.149739980697632, 20.082199096679688,
        -32.711299896240234, 2.149739980697632, 16.81529998779297, -29.69420051574707, 2.149739980697632, 13.590499877929688,
        -25.279300689697266, 2.149739980697632, 10.8681001663208, -34.39580154418945, 0, 22.930500030517578,
        -33.89820098876953, 0, 20.33289909362793, -32.32569885253906, 0, 17.197900772094727,
        -29.558900833129883, 0, 14.062899589538574, -25.4783992767334, 0, 11.465299606323242,
        21.656600952148438, 0, 18.15329933166504, 21.656600952148438, -4.729420185089111, 16.511199951171875,
        28.233999252319336, -4.270359992980957, 18.339000701904297, 27.76740074157715, 0, 19.55660057067871,
        31.011899948120117, -3.2604401111602783, 22.221399307250977, 30.4148006439209, 0, 22.930500030517578,
        32.59560012817383, -2.2505099773406982, 26.764400482177734, 31.867900848388672, 0, 27.020999908447266,
        35.5900993347168, -1.791450023651123, 30.573999404907227, 34.39580154418945, 0, 30.573999404907227,
        21.656600952148438, -6.3059000968933105, 12.89840030670166, 29.260299682617188, -5.693819999694824, 15.660200119018555,
        32.32569885253906, -4.347249984741211, 20.661399841308594, 34.19670104980469, -3.0006699562072754, 26.199899673461914,
        38.21760177612305, -2.3886001110076904, 30.573999404907227, 21.656600952148438, -4.729420185089111, 9.285670280456543,
        30.286699295043945, -4.270359992980957, 12.981499671936035, 33.639400482177734, -3.2604401111602783, 19.101299285888672,
        35.79790115356445, -2.2505099773406982, 25.635400772094727, 40.845001220703125, -1.791450023651123, 30.573999404907227,
        21.656600952148438, 0, 7.643509864807129, 30.75320053100586, 0, 11.763799667358398,
        34.23659896850586, 0, 18.392200469970703, 36.52560043334961, 0, 25.378799438476562,
        42.03929901123047, 0, 30.573999404907227, 21.656600952148438, 0, 7.643509864807129,
        21.656600952148438, 4.729420185089111, 9.285670280456543, 30.286699295043945, 4.270359992980957, 12.981499671936035,
        30.75320053100586, 0, 11.763799667358398, 33.639400482177734, 3.2604401111602783, 19.101299285888672,
        34.23659896850586, 0, 18.392200469970703, 35.79790115356445, 2.2505099773406982, 25.635400772094727,
        36.52560043334961, 0, 25.378799438476562, 40.845001220703125, 1.791450023651123, 30.573999404907227,
        42.03929901123047, 0, 30.573999404907227, 21.656600952148438, 6.3059000968933105, 12.89840030670166,
        29.260299682617188, 5.693819999694824, 15.660200119018555, 32.32569885253906, 4.347249984741211, 20.661399841308594,
        34.19670104980469, 3.0006699562072754, 26.199899673461914, 38.21760177612305, 2.3886001110076904, 30.573999404907227,
        21.656600952148438, 4.729420185089111, 16.511199951171875, 28.233999252319336, 4.270359992980957, 18.339000701904297,
        31.011899948120117, 3.2604401111602783, 22.221399307250977, 32.59560012817383, 2.2505099773406982, 26.764400482177734,
        35.5900993347168, 1.791450023651123, 30.573999404907227, 21.656600952148438, 0, 18.15329933166504,
        27.76740074157715, 0, 19.55660057067871, 30.4148006439209, 0, 22.930500030517578,
        31.867900848388672, 0, 27.020999908447266, 34.39580154418945, 0, 30.573999404907227,
        34.39580154418945, 0, 30.573999404907227, 35.5900993347168, -1.791450023651123, 30.573999404907227,
        36.59049987792969, -1.679479956626892, 31.137699127197266, 35.3114013671875, 0, 31.111499786376953,
        37.18870162963867, -1.4331599473953247, 31.332599639892578, 35.98820114135742, 0, 31.290599822998047,
        37.206600189208984, -1.1868300437927246, 31.1481990814209, 36.187198638916016, 0, 31.111499786376953,
        36.46590042114258, -1.074869990348816, 30.573999404907227, 35.669700622558594, 0, 30.573999404907227,
        38.21760177612305, -2.3886001110076904, 30.573999404907227, 39.40439987182617, -2.2393100261688232, 31.195499420166016,
        39.829898834228516, -1.9108799695968628, 31.424999237060547, 39.44919967651367, -1.582450032234192, 31.229000091552734,
        38.21760177612305, -1.4331599473953247, 30.573999404907227, 40.845001220703125, -1.791450023651123, 30.573999404907227,
        42.218299865722656, -1.679479956626892, 31.25320053100586, 42.47100067138672, -1.4331599473953247, 31.51740074157715,
        41.69169998168945, -1.1868300437927246, 31.309900283813477, 39.969200134277344, -1.074869990348816, 30.573999404907227,
        42.03929901123047, 0, 30.573999404907227, 43.49729919433594, 0, 31.279399871826172,
        43.67150115966797, 0, 31.55929946899414, 42.71110153198242, 0, 31.346599578857422,
        40.76539993286133, 0, 30.573999404907227, 42.03929901123047, 0, 30.573999404907227,
        40.845001220703125, 1.791450023651123, 30.573999404907227, 42.218299865722656, 1.679479956626892, 31.25320053100586,
        43.49729919433594, 0, 31.279399871826172, 42.47100067138672, 1.4331599473953247, 31.51740074157715,
        43.67150115966797, 0, 31.55929946899414, 41.69169998168945, 1.1868300437927246, 31.309900283813477,
        42.71110153198242, 0, 31.346599578857422, 39.969200134277344, 1.074869990348816, 30.573999404907227,
        40.76539993286133, 0, 30.573999404907227, 38.21760177612305, 2.3886001110076904, 30.573999404907227,
        39.40439987182617, 2.2393100261688232, 31.195499420166016, 39.829898834228516, 1.9108799695968628, 31.424999237060547,
        39.44919967651367, 1.582450032234192, 31.229000091552734, 38.21760177612305, 1.4331599473953247, 30.573999404907227,
        35.5900993347168, 1.791450023651123, 30.573999404907227, 36.59049987792969, 1.679479956626892, 31.137699127197266,
        37.18870162963867, 1.4331599473953247, 31.332599639892578, 37.206600189208984, 1.1868300437927246, 31.1481990814209,
        36.46590042114258, 1.074869990348816, 30.573999404907227, 34.39580154418945, 0, 30.573999404907227,
        35.3114013671875, 0, 31.111499786376953, 35.98820114135742, 0, 31.290599822998047,
        36.187198638916016, 0, 31.111499786376953, 35.669700622558594, 0, 30.573999404907227,
        0, 0, 40.12839889526367, 0, 0, 40.12839889526367,
        4.004499912261963, -1.7077000141143799, 39.501399993896484, 4.339280128479004, 0, 39.501399993896484,
        3.8207099437713623, -1.6290700435638428, 37.97869873046875, 4.140230178833008, 0, 37.97869873046875,
        2.314160108566284, -0.985912024974823, 36.09769821166992, 2.5080299377441406, 0, 36.09769821166992,
        2.3503799438476562, -1.0000300407409668, 34.39580154418945, 2.547840118408203, 0, 34.39580154418945,
        0, 0, 40.12839889526367, 3.0849199295043945, -3.0849199295043945, 39.501399993896484,
        2.943150043487549, -2.943150043487549, 37.97869873046875, 1.782039999961853, -1.782039999961853, 36.09769821166992,
        1.8089599609375, -1.8089599609375, 34.39580154418945, 0, 0, 40.12839889526367,
        1.7077000141143799, -4.004499912261963, 39.501399993896484, 1.6290700435638428, -3.8207099437713623, 37.97869873046875,
        0.985912024974823, -2.314160108566284, 36.09769821166992, 1.0000300407409668, -2.3503799438476562, 34.39580154418945,
        0, 0, 40.12839889526367, 0, -4.339280128479004, 39.501399993896484,
        0, -4.140230178833008, 37.97869873046875, 0, -2.5080299377441406, 36.09769821166992,
        0, -2.547840118408203, 34.39580154418945, 0, 0, 40.12839889526367,
        0, 0, 40.12839889526367, -1.7077000141143799, -4.004499912261963, 39.501399993896484,
        0, -4.339280128479004, 39.501399993896484, -1.6290700435638428, -3.8207099437713623, 37.97869873046875,
        0, -4.140230178833008, 37.97869873046875, -0.985912024974823, -2.314160108566284, 36.09769821166992,
        0, -2.5080299377441406, 36.09769821166992, -1.0000300407409668, -2.3503799438476562, 34.39580154418945,
        0, -2.547840118408203, 34.39580154418945, 0, 0, 40.12839889526367,
        -3.0849199295043945, -3.0849199295043945, 39.501399993896484, -2.943150043487549, -2.943150043487549, 37.97869873046875,
        -1.782039999961853, -1.782039999961853, 36.09769821166992, -1.8089599609375, -1.8089599609375, 34.39580154418945,
        0, 0, 40.12839889526367, -4.004499912261963, -1.7077000141143799, 39.501399993896484,
        -3.8207099437713623, -1.6290700435638428, 37.97869873046875, -2.314160108566284, -0.985912024974823, 36.09769821166992,
        -2.3503799438476562, -1.0000300407409668, 34.39580154418945, 0, 0, 40.12839889526367,
        -4.339280128479004, 0, 39.501399993896484, -4.140230178833008, 0, 37.97869873046875,
        -2.5080299377441406, 0, 36.09769821166992, -2.547840118408203, 0, 34.39580154418945,
        0, 0, 40.12839889526367, 0, 0, 40.12839889526367,
        -4.004499912261963, 1.7077000141143799, 39.501399993896484, -4.339280128479004, 0, 39.501399993896484,
        -3.8207099437713623, 1.6290700435638428, 37.97869873046875, -4.140230178833008, 0, 37.97869873046875,
        -2.314160108566284, 0.985912024974823, 36.09769821166992, -2.5080299377441406, 0, 36.09769821166992,
        -2.3503799438476562, 1.0000300407409668, 34.39580154418945, -2.547840118408203, 0, 34.39580154418945,
        0, 0, 40.12839889526367, -3.0849199295043945, 3.0849199295043945, 39.501399993896484,
        -2.943150043487549, 2.943150043487549, 37.97869873046875, -1.782039999961853, 1.782039999961853, 36.09769821166992,
        -1.8089599609375, 1.8089599609375, 34.39580154418945, 0, 0, 40.12839889526367,
        -1.7077000141143799, 4.004499912261963, 39.501399993896484, -1.6290700435638428, 3.8207099437713623, 37.97869873046875,
        -0.985912024974823, 2.314160108566284, 36.09769821166992, -1.0000300407409668, 2.3503799438476562, 34.39580154418945,
        0, 0, 40.12839889526367, 0, 4.339280128479004, 39.501399993896484,
        0, 4.140230178833008, 37.97869873046875, 0, 2.5080299377441406, 36.09769821166992,
        0, 2.547840118408203, 34.39580154418945, 0, 0, 40.12839889526367,
        0, 0, 40.12839889526367, 1.7077000141143799, 4.004499912261963, 39.501399993896484,
        0, 4.339280128479004, 39.501399993896484, 1.6290700435638428, 3.8207099437713623, 37.97869873046875,
        0, 4.140230178833008, 37.97869873046875, 0.985912024974823, 2.314160108566284, 36.09769821166992,
        0, 2.5080299377441406, 36.09769821166992, 1.0000300407409668, 2.3503799438476562, 34.39580154418945,
        0, 2.547840118408203, 34.39580154418945, 0, 0, 40.12839889526367,
        3.0849199295043945, 3.0849199295043945, 39.501399993896484, 2.943150043487549, 2.943150043487549, 37.97869873046875,
        1.782039999961853, 1.782039999961853, 36.09769821166992, 1.8089599609375, 1.8089599609375, 34.39580154418945,
        0, 0, 40.12839889526367, 4.004499912261963, 1.7077000141143799, 39.501399993896484,
        3.8207099437713623, 1.6290700435638428, 37.97869873046875, 2.314160108566284, 0.985912024974823, 36.09769821166992,
        2.3503799438476562, 1.0000300407409668, 34.39580154418945, 0, 0, 40.12839889526367,
        4.339280128479004, 0, 39.501399993896484, 4.140230178833008, 0, 37.97869873046875,
        2.5080299377441406, 0, 36.09769821166992, 2.547840118408203, 0, 34.39580154418945,
        2.547840118408203, 0, 34.39580154418945, 2.3503799438476562, -1.0000300407409668, 34.39580154418945,
        5.361800193786621, -2.2813100814819336, 33.261199951171875, 5.812250137329102, 0, 33.261199951171875,
        9.695320129394531, -4.125110149383545, 32.484901428222656, 10.50979995727539, 0, 32.484901428222656,
        13.58810043334961, -5.781400203704834, 31.708599090576172, 14.729700088500977, 0, 31.708599090576172,
        15.27750015258789, -6.5001702308654785, 30.573999404907227, 16.56089973449707, 0, 30.573999404907227,
        1.8089599609375, -1.8089599609375, 34.39580154418945, 4.126699924468994, -4.126699924468994, 33.261199951171875,
        7.461979866027832, -7.461979866027832, 32.484901428222656, 10.458100318908691, -10.458100318908691, 31.708599090576172,
        11.758299827575684, -11.758299827575684, 30.573999404907227, 1.0000300407409668, -2.3503799438476562, 34.39580154418945,
        2.2813100814819336, -5.361800193786621, 33.261199951171875, 4.125110149383545, -9.695320129394531, 32.484901428222656,
        5.781400203704834, -13.58810043334961, 31.708599090576172, 6.5001702308654785, -15.27750015258789, 30.573999404907227,
        0, -2.547840118408203, 34.39580154418945, 0, -5.812250137329102, 33.261199951171875,
        0, -10.50979995727539, 32.484901428222656, 0, -14.729700088500977, 31.708599090576172,
        0, -16.56089973449707, 30.573999404907227, 0, -2.547840118408203, 34.39580154418945,
        -1.0000300407409668, -2.3503799438476562, 34.39580154418945, -2.2813100814819336, -5.361800193786621, 33.261199951171875,
        0, -5.812250137329102, 33.261199951171875, -4.125110149383545, -9.695320129394531, 32.484901428222656,
        0, -10.50979995727539, 32.484901428222656, -5.781400203704834, -13.58810043334961, 31.708599090576172,
        0, -14.729700088500977, 31.708599090576172, -6.5001702308654785, -15.27750015258789, 30.573999404907227,
        0, -16.56089973449707, 30.573999404907227, -1.8089599609375, -1.8089599609375, 34.39580154418945,
        -4.126699924468994, -4.126699924468994, 33.261199951171875, -7.461979866027832, -7.461979866027832, 32.484901428222656,
        -10.458100318908691, -10.458100318908691, 31.708599090576172, -11.758299827575684, -11.758299827575684, 30.573999404907227,
        -2.3503799438476562, -1.0000300407409668, 34.39580154418945, -5.361800193786621, -2.2813100814819336, 33.261199951171875,
        -9.695320129394531, -4.125110149383545, 32.484901428222656, -13.58810043334961, -5.781400203704834, 31.708599090576172,
        -15.27750015258789, -6.5001702308654785, 30.573999404907227, -2.547840118408203, 0, 34.39580154418945,
        -5.812250137329102, 0, 33.261199951171875, -10.50979995727539, 0, 32.484901428222656,
        -14.729700088500977, 0, 31.708599090576172, -16.56089973449707, 0, 30.573999404907227,
        -2.547840118408203, 0, 34.39580154418945, -2.3503799438476562, 1.0000300407409668, 34.39580154418945,
        -5.361800193786621, 2.2813100814819336, 33.261199951171875, -5.812250137329102, 0, 33.261199951171875,
        -9.695320129394531, 4.125110149383545, 32.484901428222656, -10.50979995727539, 0, 32.484901428222656,
        -13.58810043334961, 5.781400203704834, 31.708599090576172, -14.729700088500977, 0, 31.708599090576172,
        -15.27750015258789, 6.5001702308654785, 30.573999404907227, -16.56089973449707, 0, 30.573999404907227,
        -1.8089599609375, 1.8089599609375, 34.39580154418945, -4.126699924468994, 4.126699924468994, 33.261199951171875,
        -7.461979866027832, 7.461979866027832, 32.484901428222656, -10.458100318908691, 10.458100318908691, 31.708599090576172,
        -11.758299827575684, 11.758299827575684, 30.573999404907227, -1.0000300407409668, 2.3503799438476562, 34.39580154418945,
        -2.2813100814819336, 5.361800193786621, 33.261199951171875, -4.125110149383545, 9.695320129394531, 32.484901428222656,
        -5.781400203704834, 13.58810043334961, 31.708599090576172, -6.5001702308654785, 15.27750015258789, 30.573999404907227,
        0, 2.547840118408203, 34.39580154418945, 0, 5.812250137329102, 33.261199951171875,
        0, 10.50979995727539, 32.484901428222656, 0, 14.729700088500977, 31.708599090576172,
        0, 16.56089973449707, 30.573999404907227, 0, 2.547840118408203, 34.39580154418945,
        1.0000300407409668, 2.3503799438476562, 34.39580154418945, 2.2813100814819336, 5.361800193786621, 33.261199951171875,
        0, 5.812250137329102, 33.261199951171875, 4.125110149383545, 9.695320129394531, 32.484901428222656,
        0, 10.50979995727539, 32.484901428222656, 5.781400203704834, 13.58810043334961, 31.708599090576172,
        0, 14.729700088500977, 31.708599090576172, 6.5001702308654785, 15.27750015258789, 30.573999404907227,
        0, 16.56089973449707, 30.573999404907227, 1.8089599609375, 1.8089599609375, 34.39580154418945,
        4.126699924468994, 4.126699924468994, 33.261199951171875, 7.461979866027832, 7.461979866027832, 32.484901428222656,
        10.458100318908691, 10.458100318908691, 31.708599090576172, 11.758299827575684, 11.758299827575684, 30.573999404907227,
        2.3503799438476562, 1.0000300407409668, 34.39580154418945, 5.361800193786621, 2.2813100814819336, 33.261199951171875,
        9.695320129394531, 4.125110149383545, 32.484901428222656, 13.58810043334961, 5.781400203704834, 31.708599090576172,
        15.27750015258789, 6.5001702308654785, 30.573999404907227, 2.547840118408203, 0, 34.39580154418945,
        5.812250137329102, 0, 33.261199951171875, 10.50979995727539, 0, 32.484901428222656,
        14.729700088500977, 0, 31.708599090576172, 16.56089973449707, 0, 30.573999404907227 };

float teapotNormals[] = { -0.9667419791221619, 0, -0.25575199723243713, -0.8930140137672424, 0.3698819875717163, -0.2563450038433075,
        -0.8934370279312134, 0.36910200119018555, 0.2559970021247864, -0.9668239951133728, 0, 0.2554430067539215,
        -0.0838799998164177, 0.03550700098276138, 0.9958429932594299, -0.09205400198698044, 0, 0.9957540035247803,
        0.629721999168396, -0.2604379951953888, 0.7318620085716248, 0.6820489764213562, 0, 0.7313070297241211,
        0.803725004196167, -0.3325839936733246, 0.4933690130710602, 0.8703010082244873, 0, 0.4925200045108795,
        -0.6834070086479187, 0.6834070086479187, -0.2567310035228729, -0.6835309863090515, 0.6835309863090515, 0.25606799125671387,
        -0.06492599844932556, 0.06492500007152557, 0.9957759976387024, 0.48139700293540955, -0.48139700293540955, 0.7324709892272949,
        0.6148040294647217, -0.6148040294647217, 0.4939970076084137, -0.3698819875717163, 0.8930140137672424, -0.2563450038433075,
        -0.36910200119018555, 0.8934370279312134, 0.2559959888458252, -0.03550700098276138, 0.0838790014386177, 0.9958429932594299,
        0.26043900847435, -0.6297230124473572, 0.7318609952926636, 0.3325839936733246, -0.803725004196167, 0.4933690130710602,
        -0.002848000032827258, 0.9661769866943359, -0.25786298513412476, -0.001921999966725707, 0.9670090079307556, 0.2547360062599182,
        -0.00026500000967644155, 0.09227199852466583, 0.9957339763641357, 0.00002300000051036477, -0.6820600032806396, 0.7312960028648376,
        0, -0.8703010082244873, 0.4925200045108795, -0.002848000032827258, 0.9661769866943359, -0.25786298513412476,
        0.37905800342559814, 0.852770984172821, -0.35929998755455017, 0.37711000442504883, 0.9140909910202026, 0.14908500015735626,
        -0.001921999966725707, 0.9670090079307556, 0.2547360062599182, 0.0275030005723238, 0.12255500257015228, 0.9920809864997864,
        -0.00026500000967644155, 0.09227199852466583, 0.9957339763641357, -0.26100900769233704, -0.6353650093078613, 0.7267630100250244,
        0.00002300000051036477, -0.6820600032806396, 0.7312960028648376, -0.33248499035835266, -0.8042709827423096, 0.4925459921360016,
        0, -0.8703010082244873, 0.4925200045108795, 0.6635469794273376, 0.6252639889717102, -0.4107919931411743,
        0.712664008140564, 0.6976209878921509, 0.07372400164604187, 0.09972699731588364, 0.12198299914598465, 0.98750901222229,
        -0.4873189926147461, -0.4885669946670532, 0.7237560153007507, -0.6152420043945312, -0.6154839992523193, 0.4926010072231293,
        0.8800280094146729, 0.3387089967727661, -0.3329069912433624, 0.9172769784927368, 0.36149299144744873, 0.16711199283599854,
        0.11358699947595596, 0.04806999862194061, 0.9923650026321411, -0.6341490149497986, -0.2618879973888397, 0.7275090217590332,
        -0.8041260242462158, -0.33270499110221863, 0.49263399839401245, 0.9666900038719177, -0.010453999973833561, -0.2557379901409149,
        0.967441976070404, -0.00810300000011921, 0.25296199321746826, 0.0934389978647232, -0.0012799999676644802, 0.9956240057945251,
        -0.6821659803390503, 0.0003429999924264848, 0.7311969995498657, -0.8703219890594482, 0.00005400000009103678, 0.492482990026474,
        0.9666900038719177, -0.010453999973833561, -0.2557379901409149, 0.8930140137672424, -0.3698819875717163, -0.2563450038433075,
        0.8934370279312134, -0.36910200119018555, 0.2559970021247864, 0.967441976070404, -0.00810300000011921, 0.25296199321746826,
        0.0838799998164177, -0.03550700098276138, 0.9958429932594299, 0.0934389978647232, -0.0012799999676644802, 0.9956240057945251,
        -0.629721999168396, 0.2604379951953888, 0.7318620085716248, -0.6821659803390503, 0.0003429999924264848, 0.7311969995498657,
        -0.803725004196167, 0.3325839936733246, 0.4933690130710602, -0.8703219890594482, 0.00005400000009103678, 0.492482990026474,
        0.6834070086479187, -0.6834070086479187, -0.2567310035228729, 0.6835309863090515, -0.6835309863090515, 0.25606799125671387,
        0.06492599844932556, -0.06492500007152557, 0.9957759976387024, -0.48139700293540955, 0.48139700293540955, 0.7324709892272949,
        -0.6148040294647217, 0.6148040294647217, 0.4939970076084137, 0.3698819875717163, -0.8930140137672424, -0.2563450038433075,
        0.36910200119018555, -0.8934370279312134, 0.2559959888458252, 0.03550700098276138, -0.0838790014386177, 0.9958429932594299,
        -0.26043900847435, 0.6297230124473572, 0.7318609952926636, -0.3325839936733246, 0.803725004196167, 0.4933690130710602,
        0, -0.9667419791221619, -0.25575199723243713, 0, -0.9668239951133728, 0.2554430067539215,
        0, -0.09205400198698044, 0.9957540035247803, 0, 0.6820489764213562, 0.7313070297241211,
        0, 0.8703010082244873, 0.4925200045108795, 0, -0.9667419791221619, -0.25575199723243713,
        -0.3698819875717163, -0.8930140137672424, -0.2563450038433075, -0.36910200119018555, -0.8934370279312134, 0.2559970021247864,
        0, -0.9668239951133728, 0.2554430067539215, -0.03550700098276138, -0.0838799998164177, 0.9958429932594299,
        0, -0.09205400198698044, 0.9957540035247803, 0.2604379951953888, 0.629721999168396, 0.7318620085716248,
        0, 0.6820489764213562, 0.7313070297241211, 0.3325839936733246, 0.803725004196167, 0.4933690130710602,
        0, 0.8703010082244873, 0.4925200045108795, -0.6834070086479187, -0.6834070086479187, -0.2567310035228729,
        -0.6835309863090515, -0.6835309863090515, 0.25606799125671387, -0.06492500007152557, -0.06492599844932556, 0.9957759976387024,
        0.48139700293540955, 0.48139700293540955, 0.7324709892272949, 0.6148040294647217, 0.6148040294647217, 0.4939970076084137,
        -0.8930140137672424, -0.3698819875717163, -0.2563450038433075, -0.8934370279312134, -0.36910200119018555, 0.2559959888458252,
        -0.0838790014386177, -0.03550700098276138, 0.9958429932594299, 0.6297230124473572, 0.26043900847435, 0.7318609952926636,
        0.803725004196167, 0.3325839936733246, 0.4933690130710602, -0.9667419791221619, 0, -0.25575199723243713,
        -0.9668239951133728, 0, 0.2554430067539215, -0.09205400198698044, 0, 0.9957540035247803,
        0.6820489764213562, 0, 0.7313070297241211, 0.8703010082244873, 0, 0.4925200045108795,
        0.8703010082244873, 0, 0.4925200045108795, 0.803725004196167, -0.3325839936733246, 0.4933690130710602,
        0.8454390168190002, -0.34983500838279724, 0.40354499220848083, 0.9153209924697876, 0, 0.4027250111103058,
        0.8699960112571716, -0.36004599928855896, 0.33685898780822754, 0.9418079853057861, 0, 0.33615100383758545,
        0.9041929841041565, -0.37428000569343567, 0.20579099655151367, 0.9786900281906128, 0, 0.20534199476242065,
        0.9218789935112, -0.38175201416015625, -0.06636899709701538, 0.9978039860725403, 0, -0.06623899936676025,
        0.6148040294647217, -0.6148040294647217, 0.4939970076084137, 0.6468020081520081, -0.6468020081520081, 0.40409600734710693,
        0.6656550168991089, -0.6656550168991089, 0.3373520076274872, 0.6919230222702026, -0.6919230222702026, 0.20611999928951263,
        0.7055429816246033, -0.7055429816246033, -0.06647899746894836, 0.3325839936733246, -0.803725004196167, 0.4933690130710602,
        0.34983500838279724, -0.8454390168190002, 0.40354499220848083, 0.36004701256752014, -0.8699960112571716, 0.33685800433158875,
        0.37428000569343567, -0.9041929841041565, 0.20579099655151367, 0.38175201416015625, -0.9218789935112, -0.06636899709701538,
        0, -0.8703010082244873, 0.4925200045108795, 0, -0.9153209924697876, 0.4027250111103058,
        0, -0.9418079853057861, 0.33615100383758545, 0, -0.9786900281906128, 0.20534199476242065,
        0, -0.9978039860725403, -0.06623899936676025, 0, -0.8703010082244873, 0.4925200045108795,
        -0.33248499035835266, -0.8042709827423096, 0.4925459921360016, -0.34983500838279724, -0.8454390168190002, 0.40354499220848083,
        0, -0.9153209924697876, 0.4027250111103058, -0.36004599928855896, -0.8699960112571716, 0.33685898780822754,
        0, -0.9418079853057861, 0.33615100383758545, -0.37428000569343567, -0.9041929841041565, 0.20579099655151367,
        0, -0.9786900281906128, 0.20534199476242065, -0.38175201416015625, -0.9218789935112, -0.06636899709701538,
        0, -0.9978039860725403, -0.06623899936676025, -0.6152420043945312, -0.6154839992523193, 0.4926010072231293,
        -0.6468020081520081, -0.6468020081520081, 0.40409600734710693, -0.6656550168991089, -0.6656550168991089, 0.3373520076274872,
        -0.6919230222702026, -0.6919230222702026, 0.20611999928951263, -0.7055429816246033, -0.7055429816246033, -0.06647899746894836,
        -0.8041260242462158, -0.33270499110221863, 0.49263399839401245, -0.8454390168190002, -0.34983500838279724, 0.40354499220848083,
        -0.8699960112571716, -0.36004701256752014, 0.33685800433158875, -0.9041929841041565, -0.37428000569343567, 0.20579099655151367,
        -0.9218789935112, -0.38175201416015625, -0.06636899709701538, -0.8703219890594482, 0.00005400000009103678, 0.492482990026474,
        -0.9153209924697876, 0, 0.4027250111103058, -0.9418079853057861, 0, 0.33615100383758545,
        -0.9786900281906128, 0, 0.20534199476242065, -0.9978039860725403, 0, -0.06623899936676025,
        -0.8703219890594482, 0.00005400000009103678, 0.492482990026474, -0.803725004196167, 0.3325839936733246, 0.4933690130710602,
        -0.8454390168190002, 0.34983500838279724, 0.40354499220848083, -0.9153209924697876, 0, 0.4027250111103058,
        -0.8699960112571716, 0.36004599928855896, 0.33685898780822754, -0.9418079853057861, 0, 0.33615100383758545,
        -0.9041929841041565, 0.37428000569343567, 0.20579099655151367, -0.9786900281906128, 0, 0.20534199476242065,
        -0.9218789935112, 0.38175201416015625, -0.06636899709701538, -0.9978039860725403, 0, -0.06623899936676025,
        -0.6148040294647217, 0.6148040294647217, 0.4939970076084137, -0.6468020081520081, 0.6468020081520081, 0.40409600734710693,
        -0.6656550168991089, 0.6656550168991089, 0.3373520076274872, -0.6919230222702026, 0.6919230222702026, 0.20611999928951263,
        -0.7055429816246033, 0.7055429816246033, -0.06647899746894836, -0.3325839936733246, 0.803725004196167, 0.4933690130710602,
        -0.34983500838279724, 0.8454390168190002, 0.40354499220848083, -0.36004701256752014, 0.8699960112571716, 0.33685800433158875,
        -0.37428000569343567, 0.9041929841041565, 0.20579099655151367, -0.38175201416015625, 0.9218789935112, -0.06636899709701538,
        0, 0.8703010082244873, 0.4925200045108795, 0, 0.9153209924697876, 0.4027250111103058,
        0, 0.9418079853057861, 0.33615100383758545, 0, 0.9786900281906128, 0.20534199476242065,
        0, 0.9978039860725403, -0.06623899936676025, 0, 0.8703010082244873, 0.4925200045108795,
        0.3325839936733246, 0.803725004196167, 0.4933690130710602, 0.34983500838279724, 0.8454390168190002, 0.40354499220848083,
        0, 0.9153209924697876, 0.4027250111103058, 0.36004599928855896, 0.8699960112571716, 0.33685898780822754,
        0, 0.9418079853057861, 0.33615100383758545, 0.37428000569343567, 0.9041929841041565, 0.20579099655151367,
        0, 0.9786900281906128, 0.20534199476242065, 0.38175201416015625, 0.9218789935112, -0.06636899709701538,
        0, 0.9978039860725403, -0.06623899936676025, 0.6148040294647217, 0.6148040294647217, 0.4939970076084137,
        0.6468020081520081, 0.6468020081520081, 0.40409600734710693, 0.6656550168991089, 0.6656550168991089, 0.3373520076274872,
        0.6919230222702026, 0.6919230222702026, 0.20611999928951263, 0.7055429816246033, 0.7055429816246033, -0.06647899746894836,
        0.803725004196167, 0.3325839936733246, 0.4933690130710602, 0.8454390168190002, 0.34983500838279724, 0.40354499220848083,
        0.8699960112571716, 0.36004701256752014, 0.33685800433158875, 0.9041929841041565, 0.37428000569343567, 0.20579099655151367,
        0.9218789935112, 0.38175201416015625, -0.06636899709701538, 0.8703010082244873, 0, 0.4925200045108795,
        0.9153209924697876, 0, 0.4027250111103058, 0.9418079853057861, 0, 0.33615100383758545,
        0.9786900281906128, 0, 0.20534199476242065, 0.9978039860725403, 0, -0.06623899936676025,
        0.9978039860725403, 0, -0.06623899936676025, 0.9218789935112, -0.38175201416015625, -0.06636899709701538,
        0.8314369916915894, -0.3441790044307709, -0.4361799955368042, 0.9001820087432861, 0, -0.4355129897594452,
        0.6735119819641113, -0.2785939872264862, -0.6846650242805481, 0.7296109795570374, 0, -0.6838629841804504,
        0.6403989791870117, -0.26487401127815247, -0.7209240198135376, 0.6939510107040405, 0, -0.7200220227241516,
        0.7329490184783936, -0.303166002035141, -0.6089959740638733, 0.7939500212669373, 0, -0.6079840064048767,
        0.7055429816246033, -0.7055429816246033, -0.06647899746894836, 0.6360920071601868, -0.6360920071601868, -0.4367780089378357,
        0.5149649977684021, -0.5149649977684021, -0.6852890253067017, 0.48965099453926086, -0.48965099453926086, -0.7214459776878357,
        0.5605549812316895, -0.5605549812316895, -0.6095539927482605, 0.38175201416015625, -0.9218789935112, -0.06636899709701538,
        0.3441790044307709, -0.8314369916915894, -0.4361799955368042, 0.2785939872264862, -0.6735119819641113, -0.6846650242805481,
        0.26487401127815247, -0.6403989791870117, -0.7209240198135376, 0.303166002035141, -0.7329490184783936, -0.6089959740638733,
        0, -0.9978039860725403, -0.06623899936676025, 0, -0.9001820087432861, -0.4355129897594452,
        0, -0.7296109795570374, -0.6838629841804504, 0, -0.6939510107040405, -0.7200220227241516,
        0, -0.7939500212669373, -0.6079840064048767, 0, -0.9978039860725403, -0.06623899936676025,
        -0.38175201416015625, -0.9218789935112, -0.06636899709701538, -0.3441790044307709, -0.8314369916915894, -0.4361799955368042,
        0, -0.9001820087432861, -0.4355129897594452, -0.2785939872264862, -0.6735119819641113, -0.6846650242805481,
        0, -0.7296109795570374, -0.6838629841804504, -0.26487401127815247, -0.6403989791870117, -0.7209240198135376,
        0, -0.6939510107040405, -0.7200220227241516, -0.303166002035141, -0.7329490184783936, -0.6089959740638733,
        0, -0.7939500212669373, -0.6079840064048767, -0.7055429816246033, -0.7055429816246033, -0.06647899746894836,
        -0.6360920071601868, -0.6360920071601868, -0.4367780089378357, -0.5149649977684021, -0.5149649977684021, -0.6852890253067017,
        -0.48965099453926086, -0.48965099453926086, -0.7214459776878357, -0.5605549812316895, -0.5605549812316895, -0.6095539927482605,
        -0.9218789935112, -0.38175201416015625, -0.06636899709701538, -0.8314369916915894, -0.3441790044307709, -0.4361799955368042,
        -0.6735119819641113, -0.2785939872264862, -0.6846650242805481, -0.6403989791870117, -0.26487401127815247, -0.7209240198135376,
        -0.7329490184783936, -0.303166002035141, -0.6089959740638733, -0.9978039860725403, 0, -0.06623899936676025,
        -0.9001820087432861, 0, -0.4355129897594452, -0.7296109795570374, 0, -0.6838629841804504,
        -0.6939510107040405, 0, -0.7200220227241516, -0.7939500212669373, 0, -0.6079840064048767,
        -0.9978039860725403, 0, -0.06623899936676025, -0.9218789935112, 0.38175201416015625, -0.06636899709701538,
        -0.8314369916915894, 0.3441790044307709, -0.4361799955368042, -0.9001820087432861, 0, -0.4355129897594452,
        -0.6735119819641113, 0.2785939872264862, -0.6846650242805481, -0.7296109795570374, 0, -0.6838629841804504,
        -0.6403989791870117, 0.26487401127815247, -0.7209240198135376, -0.6939510107040405, 0, -0.7200220227241516,
        -0.7329490184783936, 0.303166002035141, -0.6089959740638733, -0.7939500212669373, 0, -0.6079840064048767,
        -0.7055429816246033, 0.7055429816246033, -0.06647899746894836, -0.6360920071601868, 0.6360920071601868, -0.4367780089378357,
        -0.5149649977684021, 0.5149649977684021, -0.6852890253067017, -0.48965099453926086, 0.48965099453926086, -0.7214459776878357,
        -0.5605549812316895, 0.5605549812316895, -0.6095539927482605, -0.38175201416015625, 0.9218789935112, -0.06636899709701538,
        -0.3441790044307709, 0.8314369916915894, -0.4361799955368042, -0.2785939872264862, 0.6735119819641113, -0.6846650242805481,
        -0.26487401127815247, 0.6403989791870117, -0.7209240198135376, -0.303166002035141, 0.7329490184783936, -0.6089959740638733,
        0, 0.9978039860725403, -0.06623899936676025, 0, 0.9001820087432861, -0.4355129897594452,
        0, 0.7296109795570374, -0.6838629841804504, 0, 0.6939510107040405, -0.7200220227241516,
        0, 0.7939500212669373, -0.6079840064048767, 0, 0.9978039860725403, -0.06623899936676025,
        0.38175201416015625, 0.9218789935112, -0.06636899709701538, 0.3441790044307709, 0.8314369916915894, -0.4361799955368042,
        0, 0.9001820087432861, -0.4355129897594452, 0.2785939872264862, 0.6735119819641113, -0.6846650242805481,
        0, 0.7296109795570374, -0.6838629841804504, 0.26487401127815247, 0.6403989791870117, -0.7209240198135376,
        0, 0.6939510107040405, -0.7200220227241516, 0.303166002035141, 0.7329490184783936, -0.6089959740638733,
        0, 0.7939500212669373, -0.6079840064048767, 0.7055429816246033, 0.7055429816246033, -0.06647899746894836,
        0.6360920071601868, 0.6360920071601868, -0.4367780089378357, 0.5149649977684021, 0.5149649977684021, -0.6852890253067017,
        0.48965099453926086, 0.48965099453926086, -0.7214459776878357, 0.5605549812316895, 0.5605549812316895, -0.6095539927482605,
        0.9218789935112, 0.38175201416015625, -0.06636899709701538, 0.8314369916915894, 0.3441790044307709, -0.4361799955368042,
        0.6735119819641113, 0.2785939872264862, -0.6846650242805481, 0.6403989791870117, 0.26487401127815247, -0.7209240198135376,
        0.7329490184783936, 0.303166002035141, -0.6089959740638733, 0.9978039860725403, 0, -0.06623899936676025,
        0.9001820087432861, 0, -0.4355129897594452, 0.7296109795570374, 0, -0.6838629841804504,
        0.6939510107040405, 0, -0.7200220227241516, 0.7939500212669373, 0, -0.6079840064048767,
        0.7939500212669373, 0, -0.6079840064048767, 0.7329490184783936, -0.303166002035141, -0.6089959740638733,
        0.576229989528656, -0.23821599781513214, -0.7818009853363037, 0.6238600015640259, 0, -0.7815359830856323,
        0.16362899541854858, -0.06752700358629227, -0.9842079877853394, 0.17729100584983826, 0, -0.984158992767334,
        0.04542100057005882, -0.018735000863671303, -0.9987919926643372, 0.04920699819922447, 0, -0.9987890124320984,
        0, 0, -1, 0, 0, -1,
        0.5605549812316895, -0.5605549812316895, -0.6095539927482605, 0.44041600823402405, -0.44041600823402405, -0.7823479771614075,
        0.12490200251340866, -0.12490200251340866, -0.9842759966850281, 0.034662000834941864, -0.034662000834941864, -0.9987980127334595,
        0, 0, -1, 0.303166002035141, -0.7329490184783936, -0.6089959740638733,
        0.23821599781513214, -0.576229989528656, -0.7818009853363037, 0.06752700358629227, -0.16362899541854858, -0.9842079877853394,
        0.018735000863671303, -0.04542100057005882, -0.9987919926643372, 0, 0, -1,
        0, -0.7939500212669373, -0.6079840064048767, 0, -0.6238600015640259, -0.7815359830856323,
        0, -0.17729100584983826, -0.984158992767334, 0, -0.04920699819922447, -0.9987890124320984,
        0, 0, -1, 0, -0.7939500212669373, -0.6079840064048767,
        -0.303166002035141, -0.7329490184783936, -0.6089959740638733, -0.23821599781513214, -0.576229989528656, -0.7818009853363037,
        0, -0.6238600015640259, -0.7815359830856323, -0.06752700358629227, -0.16362899541854858, -0.9842079877853394,
        0, -0.17729100584983826, -0.984158992767334, -0.018735000863671303, -0.04542100057005882, -0.9987919926643372,
        0, -0.04920699819922447, -0.9987890124320984, 0, 0, -1,
        0, 0, -1, -0.5605549812316895, -0.5605549812316895, -0.6095539927482605,
        -0.44041600823402405, -0.44041600823402405, -0.7823479771614075, -0.12490200251340866, -0.12490200251340866, -0.9842759966850281,
        -0.034662000834941864, -0.034662000834941864, -0.9987980127334595, 0, 0, -1,
        -0.7329490184783936, -0.303166002035141, -0.6089959740638733, -0.576229989528656, -0.23821599781513214, -0.7818009853363037,
        -0.16362899541854858, -0.06752700358629227, -0.9842079877853394, -0.04542100057005882, -0.018735000863671303, -0.9987919926643372,
        0, 0, -1, -0.7939500212669373, 0, -0.6079840064048767,
        -0.6238600015640259, 0, -0.7815359830856323, -0.17729100584983826, 0, -0.984158992767334,
        -0.04920699819922447, 0, -0.9987890124320984, 0, 0, -1,
        -0.7939500212669373, 0, -0.6079840064048767, -0.7329490184783936, 0.303166002035141, -0.6089959740638733,
        -0.576229989528656, 0.23821599781513214, -0.7818009853363037, -0.6238600015640259, 0, -0.7815359830856323,
        -0.16362899541854858, 0.06752700358629227, -0.9842079877853394, -0.17729100584983826, 0, -0.984158992767334,
        -0.04542100057005882, 0.018735000863671303, -0.9987919926643372, -0.04920699819922447, 0, -0.9987890124320984,
        0, 0, -1, 0, 0, -1,
        -0.5605549812316895, 0.5605549812316895, -0.6095539927482605, -0.44041600823402405, 0.44041600823402405, -0.7823479771614075,
        -0.12490200251340866, 0.12490200251340866, -0.9842759966850281, -0.034662000834941864, 0.034662000834941864, -0.9987980127334595,
        0, 0, -1, -0.303166002035141, 0.7329490184783936, -0.6089959740638733,
        -0.23821599781513214, 0.576229989528656, -0.7818009853363037, -0.06752700358629227, 0.16362899541854858, -0.9842079877853394,
        -0.018735000863671303, 0.04542100057005882, -0.9987919926643372, 0, 0, -1,
        0, 0.7939500212669373, -0.6079840064048767, 0, 0.6238600015640259, -0.7815359830856323,
        0, 0.17729100584983826, -0.984158992767334, 0, 0.04920699819922447, -0.9987890124320984,
        0, 0, -1, 0, 0.7939500212669373, -0.6079840064048767,
        0.303166002035141, 0.7329490184783936, -0.6089959740638733, 0.23821599781513214, 0.576229989528656, -0.7818009853363037,
        0, 0.6238600015640259, -0.7815359830856323, 0.06752700358629227, 0.16362899541854858, -0.9842079877853394,
        0, 0.17729100584983826, -0.984158992767334, 0.018735000863671303, 0.04542100057005882, -0.9987919926643372,
        0, 0.04920699819922447, -0.9987890124320984, 0, 0, -1,
        0, 0, -1, 0.5605549812316895, 0.5605549812316895, -0.6095539927482605,
        0.44041600823402405, 0.44041600823402405, -0.7823479771614075, 0.12490200251340866, 0.12490200251340866, -0.9842759966850281,
        0.034662000834941864, 0.034662000834941864, -0.9987980127334595, 0, 0, -1,
        0.7329490184783936, 0.303166002035141, -0.6089959740638733, 0.576229989528656, 0.23821599781513214, -0.7818009853363037,
        0.16362899541854858, 0.06752700358629227, -0.9842079877853394, 0.04542100057005882, 0.018735000863671303, -0.9987919926643372,
        0, 0, -1, 0.7939500212669373, 0, -0.6079840064048767,
        0.6238600015640259, 0, -0.7815359830856323, 0.17729100584983826, 0, -0.984158992767334,
        0.04920699819922447, 0, -0.9987890124320984, 0, 0, -1,
        0.007784999907016754, 0.00021499999274965376, -0.999970018863678, 0.007038000039756298, -0.5829259753227234, -0.8124949932098389,
        0.0361270010471344, -0.5456140041351318, -0.837257981300354, 0.03913800045847893, 0.0009879999561235309, -0.9992330074310303,
        0.16184599697589874, -0.5630490183830261, -0.8104209899902344, 0.17951199412345886, 0.0043680001981556416, -0.9837459921836853,
        0.4823650121688843, -0.6427459716796875, -0.5951480269432068, 0.6122999787330627, 0.010459000244736671, -0.790556013584137,
        0.7387199997901917, -0.6641989946365356, -0.11459299921989441, 0.9861519932746887, 0.006668999791145325, -0.16570700705051422,
        -0.0019079999765381217, -0.9867690205574036, 0.1621209979057312, 0.002761000068858266, -0.9998499751091003, 0.017105000093579292,
        0.010532000102102757, -0.9972469806671143, 0.07339800149202347, -0.06604000180959702, -0.9893029928207397, 0.13006900250911713,
        -0.09442699700593948, -0.9953929781913757, 0.016594000160694122, -0.009201999753713608, -0.4902929961681366, 0.8715090155601501,
        -0.04860600084066391, -0.5394579768180847, 0.8406090140342712, -0.22329799830913544, -0.5527390241622925, 0.8028810024261475,
        -0.5963649749755859, -0.5751349925994873, 0.5599709749221802, -0.8033369779586792, -0.5916029810905457, 0.06823500245809555,
        -0.01056000031530857, -0.00010299999848939478, 0.9999439716339111, -0.05879800021648407, -0.0007089999853633344, 0.9982699751853943,
        -0.28071001172065735, -0.0032679999712854624, 0.9597870111465454, -0.7497230172157288, -0.004267000127583742, 0.6617379784584045,
        -0.9973509907722473, -0.0020580000709742308, 0.07271400094032288, -0.01056000031530857, -0.00010299999848939478, 0.9999439716339111,
        -0.008791999891400337, 0.49032899737358093, 0.8714929819107056, -0.04649300128221512, 0.5387560129165649, 0.8411779999732971,
        -0.05879800021648407, -0.0007089999853633344, 0.9982699751853943, -0.21790899336338043, 0.5491610169410706, 0.8068069815635681,
        -0.28071001172065735, -0.0032679999712854624, 0.9597870111465454, -0.5972909927368164, 0.5741199851036072, 0.560027003288269,
        -0.7497230172157288, -0.004267000127583742, 0.6617379784584045, -0.8040000200271606, 0.5912910103797913, 0.0629120022058487,
        -0.9973509907722473, -0.0020580000709742308, 0.07271400094032288, -0.0018050000071525574, 0.986840009689331, 0.16169099509716034,
        0.0020310000982135534, 0.999891996383667, 0.014553000219166279, 0.009215000085532665, 0.9981520175933838, 0.060068998485803604,
        -0.059335000813007355, 0.9917230010032654, 0.11386600136756897, -0.08690100163221359, 0.9961410164833069, 0.01228999998420477,
        0.006417000200599432, 0.5830950140953064, -0.812379002571106, 0.03378299996256828, 0.5453730225563049, -0.8375130295753479,
        0.1571130007505417, 0.562188982963562, -0.8119469881057739, 0.4844059944152832, 0.6465290188789368, -0.5893650054931641,
        0.7388700246810913, 0.6661880016326904, -0.10131999850273132, 0.007784999907016754, 0.00021499999274965376, -0.999970018863678,
        0.03913800045847893, 0.0009879999561235309, -0.9992330074310303, 0.17951199412345886, 0.0043680001981556416, -0.9837459921836853,
        0.6122999787330627, 0.010459000244736671, -0.790556013584137, 0.9861519932746887, 0.006668999791145325, -0.16570700705051422,
        0.9861519932746887, 0.006668999791145325, -0.16570700705051422, 0.7387199997901917, -0.6641989946365356, -0.11459299921989441,
        0.7256090044975281, -0.6373609900474548, 0.25935098528862, 0.94651198387146, 0.0033569999504834414, 0.3226499855518341,
        0.6459450125694275, -0.6077200174331665, 0.46198800206184387, 0.8258299827575684, 0.007451999932527542, 0.5638700127601624,
        0.5316150188446045, -0.5586140155792236, 0.6366599798202515, 0.6500110030174255, 0.006936000194400549, 0.759893000125885,
        0.4249640107154846, -0.5955389738082886, 0.6817179918289185, 0.5324289798736572, 0.005243999883532524, 0.8464580178260803,
        -0.09442699700593948, -0.9953929781913757, 0.016594000160694122, -0.04956100136041641, -0.9985759854316711, -0.01975500024855137,
        -0.03781700134277344, -0.998649001121521, -0.035624999552965164, -0.0379129983484745, -0.9986140131950378, -0.03651199862360954,
        -0.1688539981842041, -0.9395300149917603, -0.2979460060596466, -0.8033369779586792, -0.5916029810905457, 0.06823500245809555,
        -0.7423409819602966, -0.5995240211486816, -0.2991659939289093, -0.6196020245552063, -0.5795029997825623, -0.5294060111045837,
        -0.483707994222641, -0.5438370108604431, -0.6857600212097168, -0.44529199600219727, -0.4131770133972168, -0.7943549752235413,
        -0.9973509907722473, -0.0020580000709742308, 0.07271400094032288, -0.9265130162239075, -0.0019950000569224358, -0.3762570023536682,
        -0.7539200186729431, -0.004317000042647123, -0.6569520235061646, -0.5662239789962769, -0.003461000043898821, -0.8242440223693848,
        -0.4818040132522583, -0.0018500000005587935, -0.8762770295143127, -0.9973509907722473, -0.0020580000709742308, 0.07271400094032288,
        -0.8040000200271606, 0.5912910103797913, 0.0629120022058487, -0.7446749806404114, 0.5989770293235779, -0.29442399740219116,
        -0.9265130162239075, -0.0019950000569224358, -0.3762570023536682, -0.6219490170478821, 0.5781649947166443, -0.5281140208244324,
        -0.7539200186729431, -0.004317000042647123, -0.6569520235061646, -0.48117101192474365, 0.5428280234336853, -0.6883400082588196,
        -0.5662239789962769, -0.003461000043898821, -0.8242440223693848, -0.43805500864982605, 0.41574400663375854, -0.7970349788665771,
        -0.4818040132522583, -0.0018500000005587935, -0.8762770295143127, -0.08690100163221359, 0.9961410164833069, 0.01228999998420477,
        -0.04433799907565117, 0.9988710284233093, -0.017055999487638474, -0.026177000254392624, 0.9992600083351135, -0.02816700004041195,
        -0.025293000042438507, 0.9992780089378357, -0.028332000598311424, -0.15748199820518494, 0.9441670179367065, -0.28939300775527954,
        0.7388700246810913, 0.6661880016326904, -0.10131999850273132, 0.7282440066337585, 0.63714200258255, 0.25240999460220337,
        0.6470540165901184, 0.6082550287246704, 0.4597249925136566, 0.5229939818382263, 0.5621700286865234, 0.6406570076942444,
        0.4099780023097992, 0.6046689748764038, 0.6828569769859314, 0.9861519932746887, 0.006668999791145325, -0.16570700705051422,
        0.94651198387146, 0.0033569999504834414, 0.3226499855518341, 0.8258299827575684, 0.007451999932527542, 0.5638700127601624,
        0.6500110030174255, 0.006936000194400549, 0.759893000125885, 0.5324289798736572, 0.005243999883532524, 0.8464580178260803,
        -0.230786994099617, 0.006523000076413155, 0.9729819893836975, -0.15287800133228302, -0.7101899981498718, 0.6872109770774841,
        -0.31672099232673645, -0.7021129727363586, 0.6377500295639038, -0.5489360094070435, 0.0015109999803826213, 0.8358629941940308,
        -0.6010670065879822, -0.645330011844635, 0.471451997756958, -0.8756710290908813, -0.009891999885439873, 0.4828070104122162,
        -0.635890007019043, -0.629800021648407, 0.4460900127887726, -0.8775539994239807, -0.01909100078046322, 0.47909700870513916,
        -0.4357450008392334, -0.670009970664978, 0.6010090112686157, -0.6961889863014221, -0.02449600026011467, 0.7174400091171265,
        0.11111299693584442, -0.9901599884033203, -0.08506900072097778, 0.22330999374389648, -0.9747260212898254, 0.006539999973028898,
        0.19009700417518616, -0.9694579839706421, 0.15496399998664856, 0.005270000081509352, -0.9818699955940247, 0.18948200345039368,
        -0.011750999838113785, -0.9690240025520325, 0.24668699502944946, 0.3439059853553772, -0.5994120240211487, -0.7227950096130371,
        0.5724899768829346, -0.5916270017623901, -0.5676559805870056, 0.7874360084533691, -0.5605109930038452, -0.2564600110054016,
        0.6470969915390015, -0.6981409788131714, -0.3063740134239197, 0.4275279939174652, -0.7535750269889832, -0.49934399127960205,
        0.4109260141849518, -0.0012839999981224537, -0.9116680026054382, 0.6715199947357178, 0.0008989999769255519, -0.7409859895706177,
        0.9220259785652161, 0.00725199980661273, -0.3870599865913391, 0.8469099998474121, 0.01385399978607893, -0.5315560102462769,
        0.5359240174293518, 0.010503999888896942, -0.8442010283470154, 0.4109260141849518, -0.0012839999981224537, -0.9116680026054382,
        0.3411880135536194, 0.6009309887886047, -0.7228230237960815, 0.5786640048027039, 0.591838002204895, -0.5611389875411987,
        0.6715199947357178, 0.0008989999769255519, -0.7409859895706177, 0.7848690152168274, 0.5665420293807983, -0.25102001428604126,
        0.9220259785652161, 0.00725199980661273, -0.3870599865913391, 0.6426810026168823, 0.7039899826049805, -0.3022570013999939,
        0.8469099998474121, 0.01385399978607893, -0.5315560102462769, 0.4185889959335327, 0.7581170201301575, -0.5000420212745667,
        0.5359240174293518, 0.010503999888896942, -0.8442010283470154, 0.11580599844455719, 0.9901139736175537, -0.07913900166749954,
        0.23281100392341614, 0.9724410176277161, 0.012564999982714653, 0.20666299760341644, 0.9662799835205078, 0.15360000729560852,
        0.02449899911880493, 0.9865779876708984, 0.16144299507141113, 0.0033809999004006386, 0.9774550199508667, 0.2111150026321411,
        -0.13491199910640717, 0.7135509848594666, 0.6874909996986389, -0.31953999400138855, 0.7050619721412659, 0.6330729722976685,
        -0.6039019823074341, 0.6499029994010925, 0.4614419937133789, -0.6318150162696838, 0.6400719881057739, 0.43716898560523987,
        -0.4243049919605255, 0.6667500138282776, 0.6127070188522339, -0.230786994099617, 0.006523000076413155, 0.9729819893836975,
        -0.5489360094070435, 0.0015109999803826213, 0.8358629941940308, -0.8756710290908813, -0.009891999885439873, 0.4828070104122162,
        -0.8775539994239807, -0.01909100078046322, 0.47909700870513916, -0.6961889863014221, -0.02449600026011467, 0.7174400091171265,
        -0.6961889863014221, -0.02449600026011467, 0.7174400091171265, -0.4357450008392334, -0.670009970664978, 0.6010090112686157,
        -0.25985801219940186, -0.5525479912757874, 0.7919380068778992, -0.42579901218414307, -0.010804999619722366, 0.9047530293464661,
        0.009537000209093094, 0.021669000387191772, 0.9997199773788452, 0.022041000425815582, -0.001623000018298626, 0.9997559785842896,
        0.4101540148258209, 0.8490809798240662, 0.3329179883003235, 0.9995980262756348, -0.01155600044876337, 0.02587899938225746,
        0.5415220260620117, 0.6370009779930115, -0.5486199855804443, 0.7095860242843628, -0.009670999832451344, -0.7045519948005676,
        -0.011750999838113785, -0.9690240025520325, 0.24668699502944946, 0.046310000121593475, -0.8891720175743103, 0.45522499084472656,
        -0.010688000358641148, -0.14889900386333466, 0.9887949824333191, -0.04437499865889549, 0.7291200160980225, 0.6829460263252258,
        0.12282499670982361, 0.9923850297927856, 0.009232000447809696, 0.4275279939174652, -0.7535750269889832, -0.49934399127960205,
        0.48183900117874146, -0.857479989528656, -0.18044300377368927, 0.45527198910713196, -0.49992498755455017, 0.7367510199546814,
        -0.22054199874401093, 0.3582780063152313, 0.9071930050849915, -0.23591899871826172, 0.7157959938049316, 0.6572499871253967,
        0.5359240174293518, 0.010503999888896942, -0.8442010283470154, 0.7280910015106201, 0.015584999695420265, -0.6853029727935791,
        0.8887389898300171, 0.016679000109434128, 0.4581089913845062, -0.26009801030158997, -0.0007999999797903001, 0.965582013130188,
        -0.37161099910736084, 0.004416999872773886, 0.9283779859542847, 0.5359240174293518, 0.010503999888896942, -0.8442010283470154,
        0.4185889959335327, 0.7581170201301575, -0.5000420212745667, 0.4801650047302246, 0.8588529825210571, -0.17836299538612366,
        0.7280910015106201, 0.015584999695420265, -0.6853029727935791, 0.4881030023097992, 0.49794700741767883, 0.7168020009994507,
        0.8887389898300171, 0.016679000109434128, 0.4581089913845062, -0.2220049947500229, -0.36189401149749756, 0.9053990244865417,
        -0.26009801030158997, -0.0007999999797903001, 0.965582013130188, -0.23540399968624115, -0.7104769945144653, 0.6631799936294556,
        -0.37161099910736084, 0.004416999872773886, 0.9283779859542847, 0.0033809999004006386, 0.9774550199508667, 0.2111150026321411,
        0.058719001710414886, 0.8971999883651733, 0.437703013420105, 0.0013249999610707164, 0.164000004529953, 0.9864590167999268,
        -0.04418899863958359, -0.7303190231323242, 0.6816750168800354, 0.13880200684070587, -0.9897300004959106, -0.034189000725746155,
        -0.4243049919605255, 0.6667500138282776, 0.6127070188522339, -0.25888898968696594, 0.5453789830207825, 0.7972059845924377,
        0.012268000282347202, -0.01928500086069107, 0.9997389912605286, 0.3986299932003021, -0.8456630110740662, 0.3548929989337921,
        0.5375639796257019, -0.6107370257377625, -0.5813990235328674, -0.6961889863014221, -0.02449600026011467, 0.7174400091171265,
        -0.42579901218414307, -0.010804999619722366, 0.9047530293464661, 0.022041000425815582, -0.001623000018298626, 0.9997559785842896,
        0.9995980262756348, -0.01155600044876337, 0.02587899938225746, 0.7095860242843628, -0.009670999832451344, -0.7045519948005676,
        0, 0, 1, 0, 0, 1,
        0.7626410126686096, -0.31482499837875366, 0.5650339722633362, 0.8245400190353394, -0.00001700000029813964, 0.5658029913902283,
        0.8479819893836975, -0.3500339984893799, -0.39799800515174866, 0.917701005935669, -0.00003300000025774352, -0.397271990776062,
        0.8641409873962402, -0.35644200444221497, -0.3552600145339966, 0.9352689981460571, -0.00011200000153621659, -0.3539389967918396,
        0.7209920287132263, -0.29793301224708557, 0.6256250143051147, 0.7807120084762573, -0.00007500000356230885, 0.6248909831047058,
        0, 0, 1, 0.5833569765090942, -0.5833380222320557, 0.5651649832725525,
        0.648485004901886, -0.6484479904174805, -0.3987259864807129, 0.6608719825744629, -0.6607480049133301, -0.35589399933815,
        0.5518630146980286, -0.5517799854278564, 0.6252880096435547, 0, 0, 1,
        0.31482499837875366, -0.762628972530365, 0.5650510191917419, 0.35004499554634094, -0.8479880094528198, -0.39797601103782654,
        0.35647401213645935, -0.8641520142555237, -0.35519900918006897, 0.29798200726509094, -0.7210670113563538, 0.6255149841308594,
        0, 0, 1, -0.00001700000029813964, -0.8245400190353394, 0.5658029913902283,
        -0.00003300000025774352, -0.917701005935669, -0.397271990776062, -0.00011200000153621659, -0.9352689981460571, -0.3539389967918396,
        -0.00007500000356230885, -0.7807120084762573, 0.6248900294303894, 0, 0, 1,
        0, 0, 1, -0.31482499837875366, -0.7626410126686096, 0.5650339722633362,
        -0.00001700000029813964, -0.8245400190353394, 0.5658029913902283, -0.3500339984893799, -0.8479819893836975, -0.39799800515174866,
        -0.00003300000025774352, -0.917701005935669, -0.397271990776062, -0.35644200444221497, -0.8641409873962402, -0.3552600145339966,
        -0.00011200000153621659, -0.9352689981460571, -0.3539389967918396, -0.29793301224708557, -0.7209920287132263, 0.6256250143051147,
        -0.00007500000356230885, -0.7807120084762573, 0.6248900294303894, 0, 0, 1,
        -0.5833380222320557, -0.5833569765090942, 0.5651649832725525, -0.6484479904174805, -0.648485004901886, -0.3987259864807129,
        -0.6607480049133301, -0.6608719825744629, -0.35589399933815, -0.5517799854278564, -0.5518630146980286, 0.6252880096435547,
        0, 0, 1, -0.762628972530365, -0.31482499837875366, 0.5650510191917419,
        -0.8479880094528198, -0.35004499554634094, -0.39797601103782654, -0.8641520142555237, -0.35647401213645935, -0.35519900918006897,
        -0.7210670113563538, -0.29798200726509094, 0.6255149841308594, 0, 0, 1,
        -0.8245400190353394, 0.00001700000029813964, 0.5658029913902283, -0.917701005935669, 0.00003300000025774352, -0.397271990776062,
        -0.9352689981460571, 0.00011200000153621659, -0.3539389967918396, -0.7807120084762573, 0.00007500000356230885, 0.6248900294303894,
        0, 0, 1, 0, 0, 1,
        -0.7626410126686096, 0.31482499837875366, 0.5650339722633362, -0.8245400190353394, 0.00001700000029813964, 0.5658029913902283,
        -0.8479819893836975, 0.3500339984893799, -0.39799800515174866, -0.917701005935669, 0.00003300000025774352, -0.397271990776062,
        -0.8641409873962402, 0.35644200444221497, -0.3552600145339966, -0.9352689981460571, 0.00011200000153621659, -0.3539389967918396,
        -0.7209920287132263, 0.29793301224708557, 0.6256250143051147, -0.7807120084762573, 0.00007500000356230885, 0.6248900294303894,
        0, 0, 1, -0.5833569765090942, 0.5833380222320557, 0.5651649832725525,
        -0.648485004901886, 0.6484479904174805, -0.3987259864807129, -0.6608719825744629, 0.6607480049133301, -0.35589399933815,
        -0.5518630146980286, 0.5517799854278564, 0.6252880096435547, 0, 0, 1,
        -0.31482499837875366, 0.762628972530365, 0.5650510191917419, -0.35004499554634094, 0.8479880094528198, -0.39797601103782654,
        -0.35647401213645935, 0.8641520142555237, -0.35519900918006897, -0.29798200726509094, 0.7210670113563538, 0.6255149841308594,
        0, 0, 1, 0.00001700000029813964, 0.8245400190353394, 0.5658029913902283,
        0.00003300000025774352, 0.917701005935669, -0.397271990776062, 0.00011200000153621659, 0.9352689981460571, -0.3539389967918396,
        0.00007500000356230885, 0.7807120084762573, 0.6248900294303894, 0, 0, 1,
        0, 0, 1, 0.31482499837875366, 0.7626410126686096, 0.5650339722633362,
        0.00001700000029813964, 0.8245400190353394, 0.5658029913902283, 0.3500339984893799, 0.8479819893836975, -0.39799800515174866,
        0.00003300000025774352, 0.917701005935669, -0.397271990776062, 0.35644200444221497, 0.8641409873962402, -0.3552600145339966,
        0.00011200000153621659, 0.9352689981460571, -0.3539389967918396, 0.29793301224708557, 0.7209920287132263, 0.6256250143051147,
        0.00007500000356230885, 0.7807120084762573, 0.6248900294303894, 0, 0, 1,
        0.5833380222320557, 0.5833569765090942, 0.5651649832725525, 0.6484479904174805, 0.648485004901886, -0.3987259864807129,
        0.6607480049133301, 0.6608719825744629, -0.35589399933815, 0.5517799854278564, 0.5518630146980286, 0.6252880096435547,
        0, 0, 1, 0.762628972530365, 0.31482499837875366, 0.5650510191917419,
        0.8479880094528198, 0.35004499554634094, -0.39797601103782654, 0.8641520142555237, 0.35647401213645935, -0.35519900918006897,
        0.7210670113563538, 0.29798200726509094, 0.6255149841308594, 0, 0, 1,
        0.8245400190353394, -0.00001700000029813964, 0.5658029913902283, 0.917701005935669, -0.00003300000025774352, -0.397271990776062,
        0.9352689981460571, -0.00011200000153621659, -0.3539389967918396, 0.7807120084762573, -0.00007500000356230885, 0.6248909831047058,
        0.7807120084762573, -0.00007500000356230885, 0.6248909831047058, 0.7209920287132263, -0.29793301224708557, 0.6256250143051147,
        0.21797800064086914, -0.0902160033583641, 0.9717749953269958, 0.23658299446105957, 0, 0.9716110229492188,
        0.1595889925956726, -0.06596100330352783, 0.9849770069122314, 0.17308400571346283, 0, 0.9849069714546204,
        0.3504979908466339, -0.1447400003671646, 0.9253119826316833, 0.37970298528671265, 0, 0.925108015537262,
        0.48558899760246277, -0.20147399604320526, 0.8506529927253723, 0.5266720056533813, 0, 0.8500679731369019,
        0.5518630146980286, -0.5517799854278564, 0.6252880096435547, 0.16663099825382233, -0.16663099825382233, 0.9718379974365234,
        0.12190800160169601, -0.12190800160169601, 0.9850260019302368, 0.2676680088043213, -0.2676680088043213, 0.9255849719047546,
        0.37131500244140625, -0.37131500244140625, 0.8510289788246155, 0.29798200726509094, -0.7210670113563538, 0.6255149841308594,
        0.0902160033583641, -0.21797800064086914, 0.9717749953269958, 0.06596100330352783, -0.1595889925956726, 0.9849770069122314,
        0.1447400003671646, -0.3504979908466339, 0.9253119826316833, 0.20147399604320526, -0.48558899760246277, 0.8506529927253723,
        -0.00007500000356230885, -0.7807120084762573, 0.6248900294303894, 0, -0.23658299446105957, 0.9716110229492188,
        0, -0.17308400571346283, 0.9849069714546204, 0, -0.37970298528671265, 0.925108015537262,
        0, -0.5266720056533813, 0.8500679731369019, -0.00007500000356230885, -0.7807120084762573, 0.6248900294303894,
        -0.29793301224708557, -0.7209920287132263, 0.6256250143051147, -0.0902160033583641, -0.21797800064086914, 0.9717749953269958,
        0, -0.23658299446105957, 0.9716110229492188, -0.06596100330352783, -0.1595889925956726, 0.9849770069122314,
        0, -0.17308400571346283, 0.9849069714546204, -0.1447400003671646, -0.3504979908466339, 0.9253119826316833,
        0, -0.37970298528671265, 0.925108015537262, -0.20147399604320526, -0.48558899760246277, 0.8506529927253723,
        0, -0.5266720056533813, 0.8500679731369019, -0.5517799854278564, -0.5518630146980286, 0.6252880096435547,
        -0.16663099825382233, -0.16663099825382233, 0.9718379974365234, -0.12190800160169601, -0.12190800160169601, 0.9850260019302368,
        -0.2676680088043213, -0.2676680088043213, 0.9255849719047546, -0.37131500244140625, -0.37131500244140625, 0.8510289788246155,
        -0.7210670113563538, -0.29798200726509094, 0.6255149841308594, -0.21797800064086914, -0.0902160033583641, 0.9717749953269958,
        -0.1595889925956726, -0.06596100330352783, 0.9849770069122314, -0.3504979908466339, -0.1447400003671646, 0.9253119826316833,
        -0.48558899760246277, -0.20147399604320526, 0.8506529927253723, -0.7807120084762573, 0.00007500000356230885, 0.6248900294303894,
        -0.23658299446105957, 0, 0.9716110229492188, -0.17308400571346283, 0, 0.9849069714546204,
        -0.37970298528671265, 0, 0.925108015537262, -0.5266720056533813, 0, 0.8500679731369019,
        -0.7807120084762573, 0.00007500000356230885, 0.6248900294303894, -0.7209920287132263, 0.29793301224708557, 0.6256250143051147,
        -0.21797800064086914, 0.0902160033583641, 0.9717749953269958, -0.23658299446105957, 0, 0.9716110229492188,
        -0.1595889925956726, 0.06596100330352783, 0.9849770069122314, -0.17308400571346283, 0, 0.9849069714546204,
        -0.3504979908466339, 0.1447400003671646, 0.9253119826316833, -0.37970298528671265, 0, 0.925108015537262,
        -0.48558899760246277, 0.20147399604320526, 0.8506529927253723, -0.5266720056533813, 0, 0.8500679731369019,
        -0.5518630146980286, 0.5517799854278564, 0.6252880096435547, -0.16663099825382233, 0.16663099825382233, 0.9718379974365234,
        -0.12190800160169601, 0.12190800160169601, 0.9850260019302368, -0.2676680088043213, 0.2676680088043213, 0.9255849719047546,
        -0.37131500244140625, 0.37131500244140625, 0.8510289788246155, -0.29798200726509094, 0.7210670113563538, 0.6255149841308594,
        -0.0902160033583641, 0.21797800064086914, 0.9717749953269958, -0.06596100330352783, 0.1595889925956726, 0.9849770069122314,
        -0.1447400003671646, 0.3504979908466339, 0.9253119826316833, -0.20147399604320526, 0.48558899760246277, 0.8506529927253723,
        0.00007500000356230885, 0.7807120084762573, 0.6248900294303894, 0, 0.23658299446105957, 0.9716110229492188,
        0, 0.17308400571346283, 0.9849069714546204, 0, 0.37970298528671265, 0.925108015537262,
        0, 0.5266720056533813, 0.8500679731369019, 0.00007500000356230885, 0.7807120084762573, 0.6248900294303894,
        0.29793301224708557, 0.7209920287132263, 0.6256250143051147, 0.0902160033583641, 0.21797800064086914, 0.9717749953269958,
        0, 0.23658299446105957, 0.9716110229492188, 0.06596100330352783, 0.1595889925956726, 0.9849770069122314,
        0, 0.17308400571346283, 0.9849069714546204, 0.1447400003671646, 0.3504979908466339, 0.9253119826316833,
        0, 0.37970298528671265, 0.925108015537262, 0.20147399604320526, 0.48558899760246277, 0.8506529927253723,
        0, 0.5266720056533813, 0.8500679731369019, 0.5517799854278564, 0.5518630146980286, 0.6252880096435547,
        0.16663099825382233, 0.16663099825382233, 0.9718379974365234, 0.12190800160169601, 0.12190800160169601, 0.9850260019302368,
        0.2676680088043213, 0.2676680088043213, 0.9255849719047546, 0.37131500244140625, 0.37131500244140625, 0.8510289788246155,
        0.7210670113563538, 0.29798200726509094, 0.6255149841308594, 0.21797800064086914, 0.0902160033583641, 0.9717749953269958,
        0.1595889925956726, 0.06596100330352783, 0.9849770069122314, 0.3504979908466339, 0.1447400003671646, 0.9253119826316833,
        0.48558899760246277, 0.20147399604320526, 0.8506529927253723, 0.7807120084762573, -0.00007500000356230885, 0.6248909831047058,
        0.23658299446105957, 0, 0.9716110229492188, 0.17308400571346283, 0, 0.9849069714546204,
        0.37970298528671265, 0, 0.925108015537262, 0.5266720056533813, 0, 0.8500679731369019 };

float teapotTangents[] = { 0.012897999957203865, 0.998727023601532, -0.048757001757621765, 0.3861910104751587, 0.9210079908370972, -0.016421999782323837,
        0.38136398792266846, 0.9230089783668518, 0.000155999994603917, 0.012866999953985214, 0.9987300038337708, 0.04870200157165527,
        0.3750790059566498, 0.9061710238456726, -0.0007169999880716205, 0.19210100173950195, 0.9812139868736267, 0.01775900088250637,
        0.3782620131969452, 0.9142940044403076, -0.00011300000187475234, 0.10451500117778778, 0.9897350072860718, -0.09747499972581863,
        0.3655939996242523, 0.9257190227508545, 0.028463000431656837, 0.04767199978232384, 0.9953050017356873, -0.08423800021409988,
        0.7092679738998413, 0.7031199932098389, -0.016364000737667084, 0.7061989903450012, 0.7061989903450012, 0,
        0.6937360167503357, 0.6937360167503357, 0, 0.6997770071029663, 0.6997770071029663, 0,
        0.6924030184745789, 0.7150859832763672, 0.02822900004684925, 0.9243540167808533, 0.37810400128364563, -0.01657800003886223,
        0.9230089783668518, 0.38136398792266846, -0.000155999994603917, 0.9061710238456726, 0.3750790059566498, 0.0007169999880716205,
        0.9142940044403076, 0.3782620131969452, 0.00011300000187475234, 0.9133660197257996, 0.39544400572776794, 0.028490999713540077,
        0.9987040162086487, 0.015853000804781914, 0.04836999997496605, 0.9987369775772095, 0.014649000018835068, -0.04806999862194061,
        0.9812150001525879, 0.19211700558662415, -0.01754000037908554, 0.9897350072860718, 0.10452800244092941, 0.09745799750089645,
        0.9953050017356873, 0.04767199978232384, 0.08423800021409988, 0.9988179802894592, -0.009758999571204185, -0.047600001096725464,
        0.9094679951667786, -0.4095839858055115, -0.012636999599635601, 0.9240090250968933, -0.3811509907245636, -0.0003150000120513141,
        0.9987890124320984, -0.01066299993544817, 0.04801800101995468, 0.9072269797325134, -0.37142300605773926, 0.0207310002297163,
        0.9814350008964539, -0.19095200300216675, 0.01795700006186962, 0.914870023727417, -0.3771440088748932, -0.0011480000102892518,
        0.989749014377594, -0.10442499816417694, -0.09742700308561325, 0.925815999507904, -0.3653950095176697, 0.028308000415563583,
        0.9953050017356873, -0.04767199978232384, -0.08423800021409988, 0.6768929958343506, -0.7314029932022095, -0.01988700032234192,
        0.6994619965553284, -0.7145140171051025, -0.00029799999902024865, 0.6940590143203735, -0.6933979988098145, 0.015560000203549862,
        0.7002580165863037, -0.6996300220489502, -0.000783999974373728, 0.715142011642456, -0.6923869848251343, 0.028078999370336533,
        0.351936012506485, -0.933899998664856, -0.019843999296426773, 0.36654001474380493, -0.9298419952392578, -0.0005210000090301037,
        0.37116900086402893, -0.9084830284118652, 0.00152299995534122, 0.3776479959487915, -0.9147650003433228, -0.00011000000085914508,
        0.39533698558807373, -0.9134349822998047, 0.028410999104380608, 0.0013210000470280647, -0.9989479780197144, 0.045830998569726944,
        0.003897000104188919, -0.9988909959793091, -0.04690299928188324, 0.18705999851226807, -0.9821630120277405, -0.018818000331521034,
        0.10363999754190445, -0.9898579716682434, 0.09715499728918076, 0.04757700115442276, -0.9953129887580872, 0.08418799936771393,
        -0.02296699956059456, -0.9986780285835266, -0.04599199816584587, -0.3861910104751587, -0.9210079908370972, -0.016421999782323837,
        -0.38136398792266846, -0.9230089783668518, 0.000155999994603917, -0.020431000739336014, -0.9987260103225708, 0.04614400118589401,
        -0.3750790059566498, -0.9061710238456726, -0.0007169999880716205, -0.19216600060462952, -0.9812189936637878, 0.01677200011909008,
        -0.3782620131969452, -0.9142940044403076, -0.00011300000187475234, -0.10471200197935104, -0.9897390007972717, -0.09722500294446945,
        -0.3655939996242523, -0.9257190227508545, 0.028463000431656837, -0.047710999846458435, -0.9953050017356873, -0.08420699834823608,
        -0.7092679738998413, -0.7031199932098389, -0.016364000737667084, -0.7061989903450012, -0.7061989903450012, 0,
        -0.6937360167503357, -0.6937360167503357, 0, -0.6997770071029663, -0.6997770071029663, 0,
        -0.6924030184745789, -0.7150859832763672, 0.02822900004684925, -0.9243540167808533, -0.37810400128364563, -0.01657800003886223,
        -0.9230089783668518, -0.38136398792266846, -0.000155999994603917, -0.9061710238456726, -0.3750790059566498, 0.0007169999880716205,
        -0.9142940044403076, -0.3782620131969452, 0.00011300000187475234, -0.9133660197257996, -0.39544400572776794, 0.028490999713540077,
        -0.998727023601532, -0.012897999957203865, 0.048757001757621765, -0.9987300038337708, -0.012866999953985214, -0.04870200157165527,
        -0.9812139868736267, -0.19210100173950195, -0.01775900088250637, -0.9897350072860718, -0.10451500117778778, 0.09747499972581863,
        -0.9953050017356873, -0.04767199978232384, 0.08423800021409988, -0.998727023601532, 0.012897999957203865, -0.048757001757621765,
        -0.9210079908370972, 0.3861910104751587, -0.016421999782323837, -0.9230089783668518, 0.38136398792266846, 0.000155999994603917,
        -0.9987300038337708, 0.012866999953985214, 0.04870200157165527, -0.9061710238456726, 0.3750790059566498, -0.0007169999880716205,
        -0.9812139868736267, 0.19210100173950195, 0.01775900088250637, -0.9142940044403076, 0.3782620131969452, -0.00011300000187475234,
        -0.9897350072860718, 0.10451500117778778, -0.09747499972581863, -0.9257190227508545, 0.3655939996242523, 0.028463000431656837,
        -0.9953050017356873, 0.04767199978232384, -0.08423800021409988, -0.7031199932098389, 0.7092679738998413, -0.016364000737667084,
        -0.7061989903450012, 0.7061989903450012, 0, -0.6937360167503357, 0.6937360167503357, 0,
        -0.6997770071029663, 0.6997770071029663, 0, -0.7150859832763672, 0.6924030184745789, 0.02822900004684925,
        -0.37810400128364563, 0.9243540167808533, -0.01657800003886223, -0.38136398792266846, 0.9230089783668518, -0.000155999994603917,
        -0.3750790059566498, 0.9061710238456726, 0.0007169999880716205, -0.3782620131969452, 0.9142940044403076, 0.00011300000187475234,
        -0.39544400572776794, 0.9133660197257996, 0.028490999713540077, -0.012897999957203865, 0.998727023601532, 0.048757001757621765,
        -0.012866999953985214, 0.9987300038337708, -0.04870200157165527, -0.19210100173950195, 0.9812139868736267, -0.01775900088250637,
        -0.10451500117778778, 0.9897350072860718, 0.09747499972581863, -0.04767199978232384, 0.9953050017356873, 0.08423800021409988,
        0.04767199978232384, 0.9953050017356873, -0.08423800021409988, 0.39544400572776794, 0.9133660197257996, -0.028490999713540077,
        0.38111698627471924, 0.9210190176963806, -0.000015999999959603883, 0.031922999769449234, 0.9968529939651489, -0.07255599647760391,
        0.3815299868583679, 0.9219080209732056, 0.0000019999999949504854, 0.022261999547481537, 0.9978039860725403, -0.06237399950623512,
        0.3821389973163605, 0.9231889843940735, 0.00001700000029813964, 0.008317999541759491, 0.9991790056228638, -0.03964800015091896,
        0.38228899240493774, 0.9239469766616821, -0.004430000204592943, 0.0008660000166855752, 0.9999139904975891, 0.013048999942839146,
        0.7150859832763672, 0.6924030184745789, -0.02822900004684925, 0.7048519849777222, 0.7048519849777222, 0,
        0.7055330276489258, 0.7055330276489258, 0, 0.7065179944038391, 0.7065179944038391, 0,
        0.7068390250205994, 0.707252025604248, -0.004379999823868275, 0.9257190227508545, 0.3655939996242523, -0.028463000431656837,
        0.9210180044174194, 0.38111698627471924, 0.000015999999959603883, 0.9219080209732056, 0.3815299868583679, -0.0000019999999949504854,
        0.9231889843940735, 0.3821389973163605, -0.00001700000029813964, 0.9237229824066162, 0.38283199071884155, -0.004399999976158142,
        0.9953050017356873, 0.04767199978232384, 0.08423800021409988, 0.9968529939651489, 0.031922999769449234, 0.07255599647760391,
        0.9978039860725403, 0.022261999547481537, 0.06237399950623512, 0.9991790056228638, 0.008317999541759491, 0.03964800015091896,
        0.9999139904975891, 0.0008660000166855752, -0.013048999942839146, 0.9953050017356873, -0.04767199978232384, -0.08423800021409988,
        0.9135000109672546, -0.3951619863510132, -0.02861100062727928, 0.9210190176963806, -0.38111698627471924, -0.000015999999959603883,
        0.9968529939651489, -0.031922999769449234, -0.07255599647760391, 0.9219080209732056, -0.3815299868583679, 0.0000019999999949504854,
        0.9978039860725403, -0.022261999547481537, -0.06237399950623512, 0.9231889843940735, -0.3821389973163605, 0.00001700000029813964,
        0.9991790056228638, -0.008317999541759491, -0.03964800015091896, 0.9239469766616821, -0.38228899240493774, -0.004430000204592943,
        0.9999139904975891, -0.0008660000166855752, 0.013048999942839146, 0.6925899982452393, -0.7149369716644287, -0.028262000530958176,
        0.7048519849777222, -0.7048519849777222, 0, 0.7055330276489258, -0.7055330276489258, 0,
        0.7065179944038391, -0.7065179944038391, 0, 0.707252025604248, -0.7068390250205994, -0.004379999823868275,
        0.3656100034713745, -0.9257280230522156, -0.02841299958527088, 0.38111698627471924, -0.9210180044174194, 0.000015999999959603883,
        0.3815299868583679, -0.9219080209732056, -0.0000019999999949504854, 0.3821389973163605, -0.9231889843940735, -0.00001700000029813964,
        0.38283199071884155, -0.9237229824066162, -0.004399999976158142, 0.04757700115442276, -0.9953129887580872, 0.08418799936771393,
        0.031922999769449234, -0.9968529939651489, 0.07255599647760391, 0.022261999547481537, -0.9978039860725403, 0.06237399950623512,
        0.008317999541759491, -0.9991790056228638, 0.03964800015091896, 0.0008660000166855752, -0.9999139904975891, -0.013048999942839146,
        -0.047710999846458435, -0.9953050017356873, -0.08420699834823608, -0.39544400572776794, -0.9133660197257996, -0.028490999713540077,
        -0.38111698627471924, -0.9210190176963806, -0.000015999999959603883, -0.031922999769449234, -0.9968529939651489, -0.07255599647760391,
        -0.3815299868583679, -0.9219080209732056, 0.0000019999999949504854, -0.022261999547481537, -0.9978039860725403, -0.06237399950623512,
        -0.3821389973163605, -0.9231889843940735, 0.00001700000029813964, -0.008317999541759491, -0.9991790056228638, -0.03964800015091896,
        -0.38228899240493774, -0.9239469766616821, -0.004430000204592943, -0.0008660000166855752, -0.9999139904975891, 0.013048999942839146,
        -0.7150859832763672, -0.6924030184745789, -0.02822900004684925, -0.7048519849777222, -0.7048519849777222, 0,
        -0.7055330276489258, -0.7055330276489258, 0, -0.7065179944038391, -0.7065179944038391, 0,
        -0.7068390250205994, -0.707252025604248, -0.004379999823868275, -0.9257190227508545, -0.3655939996242523, -0.028463000431656837,
        -0.9210180044174194, -0.38111698627471924, 0.000015999999959603883, -0.9219080209732056, -0.3815299868583679, -0.0000019999999949504854,
        -0.9231889843940735, -0.3821389973163605, -0.00001700000029813964, -0.9237229824066162, -0.38283199071884155, -0.004399999976158142,
        -0.9953050017356873, -0.04767199978232384, 0.08423800021409988, -0.9968529939651489, -0.031922999769449234, 0.07255599647760391,
        -0.9978039860725403, -0.022261999547481537, 0.06237399950623512, -0.9991790056228638, -0.008317999541759491, 0.03964800015091896,
        -0.9999139904975891, -0.0008660000166855752, -0.013048999942839146, -0.9953050017356873, 0.04767199978232384, -0.08423800021409988,
        -0.9133660197257996, 0.39544400572776794, -0.028490999713540077, -0.9210190176963806, 0.38111698627471924, -0.000015999999959603883,
        -0.9968529939651489, 0.031922999769449234, -0.07255599647760391, -0.9219080209732056, 0.3815299868583679, 0.0000019999999949504854,
        -0.9978039860725403, 0.022261999547481537, -0.06237399950623512, -0.9231889843940735, 0.3821389973163605, 0.00001700000029813964,
        -0.9991790056228638, 0.008317999541759491, -0.03964800015091896, -0.9239469766616821, 0.38228899240493774, -0.004430000204592943,
        -0.9999139904975891, 0.0008660000166855752, 0.013048999942839146, -0.6924030184745789, 0.7150859832763672, -0.02822900004684925,
        -0.7048519849777222, 0.7048519849777222, 0, -0.7055330276489258, 0.7055330276489258, 0,
        -0.7065179944038391, 0.7065179944038391, 0, -0.707252025604248, 0.7068390250205994, -0.004379999823868275,
        -0.3655939996242523, 0.9257190227508545, -0.028463000431656837, -0.38111698627471924, 0.9210180044174194, 0.000015999999959603883,
        -0.3815299868583679, 0.9219080209732056, -0.0000019999999949504854, -0.3821389973163605, 0.9231889843940735, -0.00001700000029813964,
        -0.38283199071884155, 0.9237229824066162, -0.004399999976158142, -0.04767199978232384, 0.9953050017356873, 0.08423800021409988,
        -0.031922999769449234, 0.9968529939651489, 0.07255599647760391, -0.022261999547481537, 0.9978039860725403, 0.06237399950623512,
        -0.008317999541759491, 0.9991790056228638, 0.03964800015091896, -0.0008660000166855752, 0.9999139904975891, -0.013048999942839146,
        0.0008660000166855752, 0.9999139904975891, 0.013048999942839146, 0.38283199071884155, 0.9237229824066162, 0.004399999976158142,
        0.38101500272750854, 0.9204739928245544, -0.00003899999865097925, 0.03731299936771393, 0.9963229894638062, 0.07712399959564209,
        0.37877199053764343, 0.9154880046844482, 0.00008399999933317304, 0.09151100367307663, 0.9910060167312622, 0.097632996737957,
        0.378387987613678, 0.9145749807357788, 0.00009999999747378752, 0.10134600102901459, 0.9900450110435486, 0.09767600148916245,
        0.356795996427536, 0.9266510009765625, -0.03188199922442436, 0.07246600091457367, 0.9928709864616394, 0.09463199973106384,
        0.707252025604248, 0.7068390250205994, 0.004379999823868275, 0.7044739723205566, 0.7044739723205566, 0,
        0.7006790041923523, 0.7006790041923523, 0, 0.6999930143356323, 0.6999930143356323, 0,
        0.6847820281982422, 0.7192310094833374, -0.03167999908328056, 0.9239469766616821, 0.38228899240493774, 0.004430000204592943,
        0.9204739928245544, 0.38101500272750854, 0.00003899999865097925, 0.9154880046844482, 0.37877199053764343, -0.00008399999933317304,
        0.9145749807357788, 0.378387987613678, -0.00009999999747378752, 0.9078760147094727, 0.40216198563575745, -0.03206299990415573,
        0.9999139904975891, 0.0008660000166855752, -0.013048999942839146, 0.9963229894638062, 0.03731299936771393, -0.07712399959564209,
        0.9910060167312622, 0.09151100367307663, -0.097632996737957, 0.9900450110435486, 0.10134600102901459, -0.09767600148916245,
        0.9928709864616394, 0.07246600091457367, -0.09463199973106384, 0.9999139904975891, -0.0008660000166855752, 0.013048999942839146,
        0.9237229824066162, -0.38283199071884155, 0.004399999976158142, 0.9204739928245544, -0.38101500272750854, -0.00003899999865097925,
        0.9963229894638062, -0.03731299936771393, 0.07712399959564209, 0.9154880046844482, -0.37877199053764343, 0.00008399999933317304,
        0.9910060167312622, -0.09151100367307663, 0.097632996737957, 0.9145749807357788, -0.378387987613678, 0.00009999999747378752,
        0.9900450110435486, -0.10134600102901459, 0.09767600148916245, 0.9266510009765625, -0.356795996427536, -0.03188199922442436,
        0.9928709864616394, -0.07246600091457367, 0.09463199973106384, 0.7068390250205994, -0.707252025604248, 0.004379999823868275,
        0.7044739723205566, -0.7044739723205566, 0, 0.7006790041923523, -0.7006790041923523, 0,
        0.6999930143356323, -0.6999930143356323, 0, 0.7192310094833374, -0.6847820281982422, -0.03167999908328056,
        0.38228899240493774, -0.9239469766616821, 0.004430000204592943, 0.38101500272750854, -0.9204739928245544, 0.00003899999865097925,
        0.37877199053764343, -0.9154880046844482, -0.00008399999933317304, 0.378387987613678, -0.9145749807357788, -0.00009999999747378752,
        0.40216198563575745, -0.9078760147094727, -0.03206299990415573, 0.0008660000166855752, -0.9999139904975891, -0.013048999942839146,
        0.03731299936771393, -0.9963229894638062, -0.07712399959564209, 0.09151100367307663, -0.9910060167312622, -0.097632996737957,
        0.10134600102901459, -0.9900450110435486, -0.09767600148916245, 0.07246600091457367, -0.9928709864616394, -0.09463199973106384,
        -0.0008660000166855752, -0.9999139904975891, 0.013048999942839146, -0.38283199071884155, -0.9237229824066162, 0.004399999976158142,
        -0.38101500272750854, -0.9204739928245544, -0.00003899999865097925, -0.03731299936771393, -0.9963229894638062, 0.07712399959564209,
        -0.37877199053764343, -0.9154880046844482, 0.00008399999933317304, -0.09151100367307663, -0.9910060167312622, 0.097632996737957,
        -0.378387987613678, -0.9145749807357788, 0.00009999999747378752, -0.10134600102901459, -0.9900450110435486, 0.09767600148916245,
        -0.356795996427536, -0.9266510009765625, -0.03188199922442436, -0.07246600091457367, -0.9928709864616394, 0.09463199973106384,
        -0.707252025604248, -0.7068390250205994, 0.004379999823868275, -0.7044739723205566, -0.7044739723205566, 0,
        -0.7006790041923523, -0.7006790041923523, 0, -0.6999930143356323, -0.6999930143356323, 0,
        -0.6847820281982422, -0.7192310094833374, -0.03167999908328056, -0.9239469766616821, -0.38228899240493774, 0.004430000204592943,
        -0.9204739928245544, -0.38101500272750854, 0.00003899999865097925, -0.9154880046844482, -0.37877199053764343, -0.00008399999933317304,
        -0.9145749807357788, -0.378387987613678, -0.00009999999747378752, -0.9078760147094727, -0.40216198563575745, -0.03206299990415573,
        -0.9999139904975891, -0.0008660000166855752, -0.013048999942839146, -0.9963229894638062, -0.03731299936771393, -0.07712399959564209,
        -0.9910060167312622, -0.09151100367307663, -0.097632996737957, -0.9900450110435486, -0.10134600102901459, -0.09767600148916245,
        -0.9928709864616394, -0.07246600091457367, -0.09463199973106384, -0.9999139904975891, 0.0008660000166855752, 0.013048999942839146,
        -0.9237229824066162, 0.38283199071884155, 0.004399999976158142, -0.9204739928245544, 0.38101500272750854, -0.00003899999865097925,
        -0.9963229894638062, 0.03731299936771393, 0.07712399959564209, -0.9154880046844482, 0.37877199053764343, 0.00008399999933317304,
        -0.9910060167312622, 0.09151100367307663, 0.097632996737957, -0.9145749807357788, 0.378387987613678, 0.00009999999747378752,
        -0.9900450110435486, 0.10134600102901459, 0.09767600148916245, -0.9266510009765625, 0.356795996427536, -0.03188199922442436,
        -0.9928709864616394, 0.07246600091457367, 0.09463199973106384, -0.7068390250205994, 0.707252025604248, 0.004379999823868275,
        -0.7044739723205566, 0.7044739723205566, 0, -0.7006790041923523, 0.7006790041923523, 0,
        -0.6999930143356323, 0.6999930143356323, 0, -0.7192310094833374, 0.6847820281982422, -0.03167999908328056,
        -0.38228899240493774, 0.9239469766616821, 0.004430000204592943, -0.38101500272750854, 0.9204739928245544, 0.00003899999865097925,
        -0.37877199053764343, 0.9154880046844482, -0.00008399999933317304, -0.378387987613678, 0.9145749807357788, -0.00009999999747378752,
        -0.40216198563575745, 0.9078760147094727, -0.03206299990415573, -0.0008660000166855752, 0.9999139904975891, -0.013048999942839146,
        -0.03731299936771393, 0.9963229894638062, -0.07712399959564209, -0.09151100367307663, 0.9910060167312622, -0.097632996737957,
        -0.10134600102901459, 0.9900450110435486, -0.09767600148916245, -0.07246600091457367, 0.9928709864616394, -0.09463199973106384,
        0.07246600091457367, 0.9928709864616394, 0.09463199973106384, 0.40216198563575745, 0.9078760147094727, 0.03206299990415573,
        0.37766799330711365, 0.912958025932312, 0.00018099999579135329, 0.11919300258159637, 0.9883019924163818, 0.09514500200748444,
        0.37516000866889954, 0.906607985496521, 0.00016799999866634607, 0.187733992934227, 0.9816380143165588, 0.03381900116801262,
        0.2823430001735687, 0.767549991607666, -0.1682250052690506, 0.12883399426937103, 0.6540690064430237, -0.32698601484298706,
        0.06457000225782394, 0.32701900601387024, -0.6666669845581055, 0, 0, -1,
        0.7192320227622986, 0.6847820281982422, 0.03167999908328056, 0.6987630128860474, 0.6987630128860474, 0,
        0.694034993648529, 0.694034993648529, 0, 0.5551990270614624, 0.6008960008621216, -0.16825300455093384,
        0.1854030042886734, 0.27701398730278015, -0.6666669845581055, 0.9266499876976013, 0.3567950129508972, 0.03188199922442436,
        0.912958025932312, 0.37766799330711365, -0.00018099999579135329, 0.906607985496521, 0.37516000866889954, -0.00016799999866634607,
        0.742605984210968, 0.3426159918308258, -0.1683180034160614, 0.27701398730278015, 0.1854030042886734, -0.6666669845581055,
        0.9928709864616394, 0.07246600091457367, -0.09463199973106384, 0.9883019924163818, 0.11919300258159637, -0.09514500200748444,
        0.9816370010375977, 0.187733992934227, -0.03381900116801262, 0.9811030030250549, 0.19325199723243713, -0.009519999846816063,
        0.49052900075912476, 0.0968559980392456, -0.5, 0.9928709864616394, -0.07246600091457367, 0.09463199973106384,
        0.9078760147094727, -0.40216198563575745, 0.03206299990415573, 0.912958025932312, -0.37766799330711365, 0.00018099999579135329,
        0.9883019924163818, -0.11919300258159637, 0.09514500200748444, 0.906607985496521, -0.37516000866889954, 0.00016799999866634607,
        0.9816380143165588, -0.187733992934227, 0.03381900116801262, 0.767549991607666, -0.2823430001735687, -0.1682250052690506,
        0.6540690064430237, -0.12883399426937103, -0.32698601484298706, 0.32701900601387024, -0.06457000225782394, -0.6666669845581055,
        0, 0, -1, 0.6847820281982422, -0.7192320227622986, 0.03167999908328056,
        0.6987630128860474, -0.6987630128860474, 0, 0.694034993648529, -0.694034993648529, 0,
        0.6008960008621216, -0.5551990270614624, -0.16825300455093384, 0.27701398730278015, -0.1854030042886734, -0.6666669845581055,
        0.3567950129508972, -0.9266499876976013, 0.03188199922442436, 0.37766799330711365, -0.912958025932312, -0.00018099999579135329,
        0.37516000866889954, -0.906607985496521, -0.00016799999866634607, 0.3426159918308258, -0.742605984210968, -0.1683180034160614,
        0.1854030042886734, -0.27701398730278015, -0.6666669845581055, 0.07246600091457367, -0.9928709864616394, -0.09463199973106384,
        0.11919300258159637, -0.9883019924163818, -0.09514500200748444, 0.187733992934227, -0.9816370010375977, -0.03381900116801262,
        0.19325199723243713, -0.9811030030250549, -0.009519999846816063, 0.0968559980392456, -0.49052900075912476, -0.5,
        -0.07246600091457367, -0.9928709864616394, 0.09463199973106384, -0.40216198563575745, -0.9078760147094727, 0.03206299990415573,
        -0.37766799330711365, -0.912958025932312, 0.00018099999579135329, -0.11919300258159637, -0.9883019924163818, 0.09514500200748444,
        -0.37516000866889954, -0.906607985496521, 0.00016799999866634607, -0.187733992934227, -0.9816380143165588, 0.03381900116801262,
        -0.2823430001735687, -0.767549991607666, -0.1682250052690506, -0.12883399426937103, -0.6540690064430237, -0.32698601484298706,
        -0.06457000225782394, -0.32701900601387024, -0.6666669845581055, 0, 0, -1,
        -0.7192320227622986, -0.6847820281982422, 0.03167999908328056, -0.6987630128860474, -0.6987630128860474, 0,
        -0.694034993648529, -0.694034993648529, 0, -0.5551990270614624, -0.6008960008621216, -0.16825300455093384,
        -0.1854030042886734, -0.27701398730278015, -0.6666669845581055, -0.9266499876976013, -0.3567950129508972, 0.03188199922442436,
        -0.912958025932312, -0.37766799330711365, -0.00018099999579135329, -0.906607985496521, -0.37516000866889954, -0.00016799999866634607,
        -0.742605984210968, -0.3426159918308258, -0.1683180034160614, -0.27701398730278015, -0.1854030042886734, -0.6666669845581055,
        -0.9928709864616394, -0.07246600091457367, -0.09463199973106384, -0.9883019924163818, -0.11919300258159637, -0.09514500200748444,
        -0.9816370010375977, -0.187733992934227, -0.03381900116801262, -0.9811030030250549, -0.19325199723243713, -0.009519999846816063,
        -0.49052900075912476, -0.0968559980392456, -0.5, -0.9928709864616394, 0.07246600091457367, 0.09463199973106384,
        -0.9078760147094727, 0.40216198563575745, 0.03206299990415573, -0.912958025932312, 0.37766799330711365, 0.00018099999579135329,
        -0.9883019924163818, 0.11919300258159637, 0.09514500200748444, -0.906607985496521, 0.37516000866889954, 0.00016799999866634607,
        -0.9816380143165588, 0.187733992934227, 0.03381900116801262, -0.767549991607666, 0.2823430001735687, -0.1682250052690506,
        -0.6540690064430237, 0.12883399426937103, -0.32698601484298706, -0.32701900601387024, 0.06457000225782394, -0.6666669845581055,
        0, 0, -1, -0.6847820281982422, 0.7192320227622986, 0.03167999908328056,
        -0.6987630128860474, 0.6987630128860474, 0, -0.694034993648529, 0.694034993648529, 0,
        -0.6008960008621216, 0.5551990270614624, -0.16825300455093384, -0.27701398730278015, 0.1854030042886734, -0.6666669845581055,
        -0.3567950129508972, 0.9266499876976013, 0.03188199922442436, -0.37766799330711365, 0.912958025932312, -0.00018099999579135329,
        -0.37516000866889954, 0.906607985496521, -0.00016799999866634607, -0.3426159918308258, 0.742605984210968, -0.1683180034160614,
        -0.1854030042886734, 0.27701398730278015, -0.6666669845581055, -0.07246600091457367, 0.9928709864616394, -0.09463199973106384,
        -0.11919300258159637, 0.9883019924163818, -0.09514500200748444, -0.187733992934227, 0.9816370010375977, -0.03381900116801262,
        -0.19325199723243713, 0.9811030030250549, -0.009519999846816063, -0.0968559980392456, 0.49052900075912476, -0.5,
        -0.006597999949008226, 0.9961680173873901, 0.0001630000042496249, -0.043907999992370605, 0.779125988483429, -0.55936598777771,
        0.23287899792194366, 0.79271000623703, -0.506534993648529, 0.11139900237321854, 0.9923329949378967, 0.0053449999541044235,
        0.4521920084953308, 0.7370989918708801, -0.42180201411247253, 0.17797799408435822, 0.9827970266342163, 0.036841001361608505,
        0.6075379848480225, 0.7066869735717773, -0.270797997713089, 0.11894699931144714, 0.9864829778671265, 0.10517799854278564,
        0.6583719849586487, 0.7438470125198364, -0.06727500259876251, 0.0010629999451339245, 0.99891597032547, 0.04653400182723999,
        -0.1622990071773529, -0.14869500696659088, -0.9069569706916809, 0.3020159900188446, -0.014301000162959099, -0.8847119808197021,
        0.7048640251159668, -0.042514998465776443, -0.6788020133972168, 0.8948519825935364, -0.11078000068664551, -0.38824599981307983,
        0.9622920155525208, -0.09367900341749191, -0.14349600672721863, -0.12511900067329407, -0.8479049801826477, -0.4783349931240082,
        0.11315400153398514, -0.8153669834136963, -0.5167160034179688, 0.3956319987773895, -0.7910019755363464, -0.4345270097255707,
        0.5244609713554382, -0.8012329936027527, -0.2643829882144928, 0.571465015411377, -0.7902160286903381, -0.12332800030708313,
        -0.0943560004234314, -0.9955379962921143, -0.0010989999864250422, 0.012040999718010426, -0.9965500235557556, 0,
        0.09501499682664871, -0.9936969876289368, 0.02440500073134899, 0.03737499937415123, -0.9978089928627014, 0.035909999161958694,
        -0.0008800000068731606, -0.9973530173301697, -0.04031199961900711, 0.007164000067859888, -0.9961649775505066, -0.00002700000004551839,
        0.043988000601530075, -0.8330309987068176, 0.4691329896450043, -0.2334270030260086, -0.7983189821243286, 0.49840399622917175,
        -0.10737399756908417, -0.9927549958229065, -0.007029999978840351, -0.45147499442100525, -0.7576299905776978, 0.39375001192092896,
        -0.15364399552345276, -0.9863160252571106, -0.048294998705387115, -0.5575600266456604, -0.7753210067749023, 0.2001740038394928,
        -0.07242999970912933, -0.9923030138015747, -0.08845999836921692, -0.5877019762992859, -0.8041930198669434, 0.04768599942326546,
        0.0005830000154674053, -0.9997940063476562, -0.020301999524235725, 0.13663700222969055, -0.14665700495243073, 0.8966140151023865,
        -0.3045389950275421, -0.012237999588251114, 0.8833180069923401, -0.7020289897918701, -0.033987998962402344, 0.6724730134010315,
        -0.8890330195426941, -0.09636799991130829, 0.37605398893356323, -0.9668099880218506, -0.08601800352334976, 0.1358419954776764,
        0.12022499740123749, 0.7918559908866882, 0.5693140029907227, -0.11313500255346298, 0.8111780285835266, 0.5236610174179077,
        -0.39790698885917664, 0.7734419703483582, 0.45853298902511597, -0.5793390274047852, 0.7346490025520325, 0.32973799109458923,
        -0.6447499990463257, 0.7340419888496399, 0.12459299713373184, 0.09378799796104431, 0.9955919981002808, 0.000944000028539449,
        -0.01607999950647354, 0.9964879751205444, 0.00035600000410340726, -0.11933200061321259, 0.9912199974060059, -0.01737299934029579,
        -0.08618299663066864, 0.9940080046653748, -0.053598999977111816, -0.004110999871045351, 0.9980229735374451, 0.015703000128269196,
        0.010142000392079353, 0.9933879971504211, 0.10034400224685669, 0.6597890257835388, 0.7114480137825012, 0.12964099645614624,
        0.5634239912033081, 0.7594000101089478, 0.289902001619339, -0.021227000281214714, 0.9976930022239685, 0.05189099907875061,
        0.3972559869289398, 0.7709670066833496, 0.45872700214385986, -0.05054600164294243, 0.9957669973373413, 0.060869000852108,
        0.11805199831724167, 0.7611619830131531, 0.5692800283432007, -0.11414600163698196, 0.9869359731674194, 0.08862999826669693,
        -0.0012870000209659338, 0.7195389866828918, 0.6293820142745972, -0.18971200287342072, 0.9752820134162903, 0.11328700184822083,
        0.9685969948768616, -0.08966200053691864, 0.13331100344657898, 0.8902140259742737, -0.051961999386548996, 0.39323100447654724,
        0.6728280186653137, -0.050324998795986176, 0.6965069770812988, 0.25133201479911804, -0.04306900128722191, 0.9169719815254211,
        -0.19813700020313263, -0.2512879967689514, 0.9046909809112549, 0.5937719941139221, -0.8024669885635376, 0.03307799994945526,
        0.5571249723434448, -0.7907459735870361, 0.2022089958190918, 0.4313510060310364, -0.8083119988441467, 0.37996000051498413,
        0.19395600259304047, -0.8197799921035767, 0.5133119821548462, -0.1517219990491867, -0.8084930181503296, 0.5055829882621765,
        0.0035200000274926424, -0.9997940063476562, 0.019979000091552734, 0.01159599982202053, -0.9981369972229004, -0.02326199971139431,
        0.01310999970883131, -0.9988970160484314, -0.008480999618768692, -0.02485400065779686, -0.9978809952735901, 0.021263999864459038,
        -0.11335399746894836, -0.9881970286369324, 0.06441199779510498, -0.0035459999926388264, -0.9954169988632202, -0.07682599872350693,
        -0.5816869735717773, -0.7760900259017944, -0.13957500457763672, -0.5260769724845886, -0.790789008140564, -0.2781960070133209,
        0.017288999632000923, -0.9983699917793274, -0.03728000074625015, -0.36800798773765564, -0.7982890009880066, -0.4405499994754791,
        0.03743100166320801, -0.9973520040512085, -0.03640099987387657, -0.09636899828910828, -0.7829139828681946, -0.5500450134277344,
        0.10426300019025803, -0.9894949793815613, -0.06746900081634521, 0.10083399713039398, -0.8161320090293884, -0.48112401366233826,
        0.18510299921035767, -0.9776470065116882, -0.09971100091934204, -0.9615049958229065, -0.08203399926424026, -0.14958199858665466,
        -0.8876789808273315, -0.04622500017285347, -0.39955899119377136, -0.6675580143928528, -0.03723999857902527, -0.7007560133934021,
        -0.245511993765831, -0.03216199949383736, -0.9151920080184937, 0.15477199852466583, -0.24929499626159668, -0.8975690007209778,
        -0.6700729727745056, 0.7402250170707703, -0.01942499913275242, -0.5923460125923157, 0.7624830007553101, -0.21566900610923767,
        -0.45611900091171265, 0.7868310213088989, -0.39906400442123413, -0.21001900732517242, 0.8031420111656189, -0.5333020091056824,
        0.05119999870657921, 0.7096909880638123, -0.6591699719429016, -0.014175999909639359, 0.9989240169525146, -0.04416000097990036,
        -0.0065449997782707214, 0.9983869791030884, 0.008813999593257904, 0.0023960000835359097, 0.9989259839057922, -0.016711000353097916,
        0.03813000023365021, 0.9969249963760376, -0.04171599820256233, 0.11744900047779083, 0.986670970916748, -0.0799890011548996,
        -0.02072799950838089, -0.997963011264801, 0.0017740000039339066, 0.10236400365829468, -0.695684015750885, -0.6961740255355835,
        0.28174999356269836, -0.7065439820289612, -0.6379269957542419, -0.027713999152183533, -0.9983959794044495, -0.016395000740885735,
        0.4621469974517822, -0.7501789927482605, -0.43765199184417725, -0.014942999929189682, -0.9960020184516907, -0.04751100018620491,
        0.6121799945831299, -0.7355859875679016, -0.1658719927072525, 0.08200599998235703, -0.9833409786224365, 0.11102399975061417,
        0.7232419848442078, -0.6012910008430481, -0.14595800638198853, 0.32238098978996277, -0.9036369919776917, 0.28197699785232544,
        0.1188960000872612, 0.09661199897527695, -0.9692260026931763, 0.3230240046977997, 0.06791900098323822, -0.9069269895553589,
        0.6287810206413269, 0.00962899997830391, -0.711097002029419, 0.8952469825744629, -0.060169998556375504, -0.3366979956626892,
        0.9689210057258606, -0.04508800059556961, -0.13095800578594208, 0.06500200182199478, 0.7708680033683777, -0.6083509922027588,
        0.1816529929637909, 0.7457069754600525, -0.593995988368988, 0.37600401043891907, 0.7467949986457825, -0.4776870012283325,
        0.6288849711418152, 0.7020969986915588, -0.27160701155662537, 0.8230010271072388, 0.5295370221138, -0.09450399875640869,
        -0.12820099294185638, 0.9899809956550598, -0.05917999893426895, -0.11097600311040878, 0.9872509837150574, -0.09937400370836258,
        -0.06767299771308899, 0.9865689873695374, -0.1427209973335266, -0.0003349999897181988, 0.9967420101165771, 0.025443999096751213,
        0.29019099473953247, 0.9243509769439697, 0.1957239955663681, 0.07294999808073044, 0.9949049949645996, 0.03147900104522705,
        -0.04948300123214722, 0.7695090174674988, 0.6163870096206665, -0.24193400144577026, 0.7750219702720642, 0.5679330229759216,
        0.05620399862527847, 0.9959489703178406, 0.052143000066280365, -0.4294399917125702, 0.779321014881134, 0.41615501046180725,
        0.023887999355793, 0.9943940043449402, 0.07553800195455551, -0.6655910015106201, 0.6939520239830017, 0.20106400549411774,
        -0.09678799659013748, 0.9791589975357056, -0.12869000434875488, -0.7716730237007141, 0.5443729758262634, 0.1793539971113205,
        -0.417836993932724, 0.8721759915351868, -0.2544029951095581, -0.09499499946832657, 0.08934500068426132, 0.9787889719009399,
        -0.3299880027770996, 0.06701900064945221, 0.9273520112037659, -0.6511250138282776, 0.023523999378085136, 0.7280719876289368,
        -0.9116759896278381, -0.033263999968767166, 0.34162598848342896, -0.9896330237388611, -0.013496000319719315, 0.07834099978208542,
        -0.07044100016355515, -0.6954740285873413, 0.7080140113830566, -0.21969600021839142, -0.6959800124168396, 0.6642320156097412,
        -0.4075010120868683, -0.7370589971542358, 0.5047789812088013, -0.5866039991378784, -0.7473030090332031, 0.24636299908161163,
        -0.799036979675293, -0.5617390275001526, 0.05794600024819374, 0.07605399936437607, -0.9967970252037048, 0.02472200058400631,
        0.08756300061941147, -0.9926980137825012, 0.05929899960756302, 0.07250799983739853, -0.9901790022850037, 0.11122000217437744,
        0.015556000173091888, -0.9970260262489319, -0.011235999874770641, -0.194814994931221, -0.9439409971237183, -0.22127500176429749,
        0.3417310118675232, -0.8896859884262085, 0.3012309968471527, 0.8375009894371033, -0.4931910037994385, 0.05739299952983856,
        0.8273029923439026, -0.4684619903564453, -0.05539099872112274, 0.5311300158500671, -0.8121910095214844, 0.24026300013065338,
        0.8069959878921509, -0.47689300775527954, 0.002638000063598156, 0.644743025302887, -0.7642210125923157, -0.015455000102519989,
        0.8856800198554993, -0.4464530050754547, 0.047488000243902206, -0.011536000296473503, -0.999845027923584, -0.0008730000117793679,
        0.7597830295562744, -0.6229599714279175, 0.026636000722646713, 0.321245014667511, -0.8855000138282776, 0.3356960117816925,
        0.998091995716095, -0.005673000123351812, 0.025262000039219856, 0.9941530227661133, 0.046904999762773514, -0.00951599981635809,
        0.9838590025901794, -0.00041700000292621553, 0.010572000406682491, 0.990556001663208, 0.01886500045657158, 0.04422200098633766,
        0.9921990036964417, -0.12290599942207336, 0.011202000081539154, 0.828000009059906, 0.5258169770240784, -0.0846100002527237,
        0.8704839944839478, 0.4878079891204834, 0.00635599996894598, 0.7773939967155457, 0.5659670233726501, -0.09634699672460556,
        0.8190580010414124, 0.4740380048751831, 0.01190400030463934, 0.9017590284347534, 0.3486430048942566, -0.05601400136947632,
        0.41038599610328674, 0.870602011680603, 0.27135801315307617, 0.3019320070743561, 0.8897680044174194, 0.34101900458335876,
        0.13912299275398254, 0.9423390030860901, -0.3042120039463043, 0.6167309880256653, 0.7692840099334717, 0.1667650043964386,
        0.5558350086212158, 0.8010749816894531, 0.21867799758911133, -0.4410029947757721, 0.8555399775505066, -0.2693159878253937,
        -0.8639690279960632, 0.464356005191803, -0.019222000613808632, -0.8705710172653198, 0.4855479896068573, -0.005623999983072281,
        -0.33969300985336304, 0.8762779831886292, -0.34097298979759216, -0.7608209848403931, 0.5840269923210144, 0.11236599832773209,
        -0.16763299703598022, 0.9419429898262024, 0.29091599583625793, -0.8260639905929565, 0.47304999828338623, -0.0134699996560812,
        -0.6006280183792114, 0.7822970151901245, -0.1611420065164566, -0.8495870232582092, 0.4440779983997345, 0.17417700588703156,
        -0.5251449942588806, 0.8236340284347534, -0.21412399411201477, -0.9991480112075806, 0.0017519999528303742, 0.007890000008046627,
        -0.9946579933166504, 0.06129400059580803, 0.007796999998390675, -0.9840919971466064, 0.008732999674975872, -0.0001289999927394092,
        -0.9916059970855713, 0.015207000076770782, -0.04798699915409088, -0.9899899959564209, -0.13816699385643005, -0.019433999434113503,
        -0.7927820086479187, -0.5669599771499634, 0.06795799732208252, -0.8363490104675293, -0.4685719907283783, 0.048955000936985016,
        -0.8138830065727234, -0.4743089973926544, 0.0008379999781027436, -0.8869869709014893, -0.4417180120944977, -0.05625399947166443,
        -0.7898640036582947, -0.5522750020027161, -0.15016800165176392, -0.297340989112854, -0.8998129963874817, -0.3192580044269562,
        -0.49759799242019653, -0.8317790031433105, -0.24411599338054657, -0.6295620203018188, -0.7765420079231262, 0.01261799968779087,
        -0.011338000185787678, -0.9998990297317505, -0.008561000227928162, -0.3547320067882538, -0.8679590225219727, -0.3453510105609894,
        0.09618999809026718, 0.49066001176834106, -0.5, 0.1851000040769577, 0.27721700072288513, -0.6666669845581055,
        0.32566601037979126, 0.76139897108078, -0.18199099600315094, 0.062401000410318375, 0.9939020276069641, -0.09090700000524521,
        0.3803209960460663, 0.9214360117912292, -0.00007100000220816582, 0.030918000265955925, 0.9969729781150818, 0.07133600115776062,
        0.3804109990596771, 0.9220889806747437, 0.0001630000042496249, 0.02471200004220009, 0.9975799918174744, 0.06498300284147263,
        0.35510900616645813, 0.926891028881073, 0.03216100111603737, 0.07657899707555771, 0.9924740195274353, -0.09555599838495255,
        0.27721700072288513, 0.1851000040769577, -0.6666669845581055, 0.5929989814758301, 0.5781109929084778, -0.18205299973487854,
        0.7048519849777222, 0.7048519849777222, 0, 0.7052720189094543, 0.7054179906845093, -0.00002499999936844688,
        0.6835219860076904, 0.7199410200119019, 0.03204600140452385, 0.3271070122718811, 0.06412599980831146, -0.6666669845581055,
        0.7694699764251709, 0.3061000108718872, -0.18225300312042236, 0.9214379787445068, 0.38033199310302734, 0.0000670000008540228,
        0.9220880270004272, 0.3804430067539215, -0.00016799999866634607, 0.9071130156517029, 0.403003990650177, 0.032437000423669815,
        0, 0, -1, 0.6626030206680298, 0.04157499969005585, -0.272724986076355,
        0.9969789981842041, 0.03082600049674511, -0.07129299640655518, 0.9975910186767578, 0.024447999894618988, -0.06492199748754501,
        0.9925040006637573, 0.07630900293588638, 0.09545700252056122, 0.49066001176834106, -0.09618999809026718, -0.5,
        0.27721700072288513, -0.1851000040769577, -0.6666669845581055, 0.76139897108078, -0.32566601037979126, -0.18199099600315094,
        0.9939020276069641, -0.062401000410318375, -0.09090700000524521, 0.9214360117912292, -0.3803209960460663, -0.00007100000220816582,
        0.9969729781150818, -0.030918000265955925, 0.07133600115776062, 0.9220889806747437, -0.3804109990596771, 0.0001630000042496249,
        0.9975799918174744, -0.02471200004220009, 0.06498300284147263, 0.926891028881073, -0.35510900616645813, 0.03216100111603737,
        0.9924740195274353, -0.07657899707555771, -0.09555599838495255, 0.1851000040769577, -0.27721700072288513, -0.6666669845581055,
        0.5781109929084778, -0.5929989814758301, -0.18205299973487854, 0.7048519849777222, -0.7048519849777222, 0,
        0.7054179906845093, -0.7052720189094543, -0.00002499999936844688, 0.7199410200119019, -0.6835219860076904, 0.03204600140452385,
        0.06412599980831146, -0.3271070122718811, -0.6666669845581055, 0.3061000108718872, -0.7694699764251709, -0.18225300312042236,
        0.38033199310302734, -0.9214379787445068, 0.0000670000008540228, 0.3804430067539215, -0.9220880270004272, -0.00016799999866634607,
        0.403003990650177, -0.9071130156517029, 0.032437000423669815, 0, 0, -1,
        0.04157499969005585, -0.6626030206680298, -0.272724986076355, 0.03082600049674511, -0.9969789981842041, -0.07129299640655518,
        0.024447999894618988, -0.9975910186767578, -0.06492199748754501, 0.07630900293588638, -0.9925040006637573, 0.09545700252056122,
        -0.09618999809026718, -0.49066001176834106, -0.5, -0.1851000040769577, -0.27721700072288513, -0.6666669845581055,
        -0.32566601037979126, -0.76139897108078, -0.18199099600315094, -0.062401000410318375, -0.9939020276069641, -0.09090700000524521,
        -0.3803209960460663, -0.9214360117912292, -0.00007100000220816582, -0.030918000265955925, -0.9969729781150818, 0.07133600115776062,
        -0.3804109990596771, -0.9220889806747437, 0.0001630000042496249, -0.02471200004220009, -0.9975799918174744, 0.06498300284147263,
        -0.35510900616645813, -0.926891028881073, 0.03216100111603737, -0.07657899707555771, -0.9924740195274353, -0.09555599838495255,
        -0.27721700072288513, -0.1851000040769577, -0.6666669845581055, -0.5929989814758301, -0.5781109929084778, -0.18205299973487854,
        -0.7048519849777222, -0.7048519849777222, 0, -0.7052720189094543, -0.7054179906845093, -0.00002499999936844688,
        -0.6835219860076904, -0.7199410200119019, 0.03204600140452385, -0.3271070122718811, -0.06412599980831146, -0.6666669845581055,
        -0.7694699764251709, -0.3061000108718872, -0.18225300312042236, -0.9214379787445068, -0.38033199310302734, 0.0000670000008540228,
        -0.9220880270004272, -0.3804430067539215, -0.00016799999866634607, -0.9071130156517029, -0.403003990650177, 0.032437000423669815,
        0, 0, -1, -0.6626030206680298, -0.04157499969005585, -0.272724986076355,
        -0.9969789981842041, -0.03082600049674511, -0.07129299640655518, -0.9975910186767578, -0.024447999894618988, -0.06492199748754501,
        -0.9925040006637573, -0.07630900293588638, 0.09545700252056122, -0.49066001176834106, 0.09618999809026718, -0.5,
        -0.27721700072288513, 0.1851000040769577, -0.6666669845581055, -0.76139897108078, 0.32566601037979126, -0.18199099600315094,
        -0.9939020276069641, 0.062401000410318375, -0.09090700000524521, -0.9214360117912292, 0.3803209960460663, -0.00007100000220816582,
        -0.9969729781150818, 0.030918000265955925, 0.07133600115776062, -0.9220889806747437, 0.3804109990596771, 0.0001630000042496249,
        -0.9975799918174744, 0.02471200004220009, 0.06498300284147263, -0.926891028881073, 0.35510900616645813, 0.03216100111603737,
        -0.9924740195274353, 0.07657899707555771, -0.09555599838495255, -0.1851000040769577, 0.27721700072288513, -0.6666669845581055,
        -0.5781109929084778, 0.5929989814758301, -0.18205299973487854, -0.7048519849777222, 0.7048519849777222, 0,
        -0.7054179906845093, 0.7052720189094543, -0.00002499999936844688, -0.7199410200119019, 0.6835219860076904, 0.03204600140452385,
        -0.06412599980831146, 0.3271070122718811, -0.6666669845581055, -0.3061000108718872, 0.7694699764251709, -0.18225300312042236,
        -0.38033199310302734, 0.9214379787445068, 0.0000670000008540228, -0.3804430067539215, 0.9220880270004272, -0.00016799999866634607,
        -0.403003990650177, 0.9071130156517029, 0.032437000423669815, 0, 0, -1,
        -0.04157499969005585, 0.6626030206680298, -0.272724986076355, -0.03082600049674511, 0.9969789981842041, -0.07129299640655518,
        -0.024447999894618988, 0.9975910186767578, -0.06492199748754501, -0.07630900293588638, 0.9925040006637573, 0.09545700252056122,
        0.07657899707555771, 0.9924740195274353, -0.09555599838495255, 0.40307098627090454, 0.9070649743080139, -0.03255299851298332,
        0.3753640055656433, 0.9070209860801697, 0.000007000000096013537, 0.18306200206279755, 0.9820899963378906, -0.04457399994134903,
        0.3751649856567383, 0.9065750241279602, -0.00007400000322377309, 0.18801499903202057, 0.9816100001335144, -0.03304100036621094,
        0.3759070038795471, 0.908607006072998, -0.00026199998683296144, 0.16623400151729584, 0.983722984790802, -0.06822899729013443,
        0.33324098587036133, 0.9290030002593994, 0.029803000390529633, 0.14071400463581085, 0.9862040281295776, -0.08718100190162659,
        0.7198299765586853, 0.6836559772491455, -0.032017000019550323, 0.6943539977073669, 0.6943539977073669, 0,
        0.694034993648529, 0.694034993648529, 0, 0.6955100297927856, 0.6955100297927856, 0,
        0.6639170050621033, 0.7306150197982788, 0.029100999236106873, 0.9268649816513062, 0.35523301362991333, -0.03203999996185303,
        0.9070209860801697, 0.3753649890422821, -0.000007000000096013537, 0.9065750241279602, 0.3751649856567383, 0.00007300000288523734,
        0.908607006072998, 0.3759070038795471, 0.00026199998683296144, 0.8926259875297546, 0.4211460053920746, 0.028991999104619026,
        0.9924740195274353, 0.07646500319242477, 0.09565100073814392, 0.9820899963378906, 0.18306200206279755, 0.04457399994134903,
        0.9816100001335144, 0.18801499903202057, 0.03304100036621094, 0.983722984790802, 0.16623400151729584, 0.06822899729013443,
        0.9862040281295776, 0.14071400463581085, 0.08718100190162659, 0.9924740195274353, -0.07657899707555771, -0.09555599838495255,
        0.9070649743080139, -0.40307098627090454, -0.03255299851298332, 0.9070209860801697, -0.3753640055656433, 0.000007000000096013537,
        0.9820899963378906, -0.18306200206279755, -0.04457399994134903, 0.9065750241279602, -0.3751649856567383, -0.00007400000322377309,
        0.9816100001335144, -0.18801499903202057, -0.03304100036621094, 0.908607006072998, -0.3759070038795471, -0.00026199998683296144,
        0.983722984790802, -0.16623400151729584, -0.06822899729013443, 0.9290030002593994, -0.33324098587036133, 0.029803000390529633,
        0.9862040281295776, -0.14071400463581085, -0.08718100190162659, 0.6836559772491455, -0.7198299765586853, -0.032017000019550323,
        0.6943539977073669, -0.6943539977073669, 0, 0.694034993648529, -0.694034993648529, 0,
        0.6955100297927856, -0.6955100297927856, 0, 0.7306150197982788, -0.6639170050621033, 0.029100999236106873,
        0.35523301362991333, -0.9268649816513062, -0.03203999996185303, 0.3753649890422821, -0.9070209860801697, -0.000007000000096013537,
        0.3751649856567383, -0.9065750241279602, 0.00007300000288523734, 0.3759070038795471, -0.908607006072998, 0.00026199998683296144,
        0.4211460053920746, -0.8926259875297546, 0.028991999104619026, 0.07646500319242477, -0.9924740195274353, 0.09565100073814392,
        0.18306200206279755, -0.9820899963378906, 0.04457399994134903, 0.18801499903202057, -0.9816100001335144, 0.03304100036621094,
        0.16623400151729584, -0.983722984790802, 0.06822899729013443, 0.14071400463581085, -0.9862040281295776, 0.08718100190162659,
        -0.07657899707555771, -0.9924740195274353, -0.09555599838495255, -0.40307098627090454, -0.9070649743080139, -0.03255299851298332,
        -0.3753640055656433, -0.9070209860801697, 0.000007000000096013537, -0.18306200206279755, -0.9820899963378906, -0.04457399994134903,
        -0.3751649856567383, -0.9065750241279602, -0.00007400000322377309, -0.18801499903202057, -0.9816100001335144, -0.03304100036621094,
        -0.3759070038795471, -0.908607006072998, -0.00026199998683296144, -0.16623400151729584, -0.983722984790802, -0.06822899729013443,
        -0.33324098587036133, -0.9290030002593994, 0.029803000390529633, -0.14071400463581085, -0.9862040281295776, -0.08718100190162659,
        -0.7198299765586853, -0.6836559772491455, -0.032017000019550323, -0.6943539977073669, -0.6943539977073669, 0,
        -0.694034993648529, -0.694034993648529, 0, -0.6955100297927856, -0.6955100297927856, 0,
        -0.6639170050621033, -0.7306150197982788, 0.029100999236106873, -0.9268649816513062, -0.35523301362991333, -0.03203999996185303,
        -0.9070209860801697, -0.3753649890422821, -0.000007000000096013537, -0.9065750241279602, -0.3751649856567383, 0.00007300000288523734,
        -0.908607006072998, -0.3759070038795471, 0.00026199998683296144, -0.8926259875297546, -0.4211460053920746, 0.028991999104619026,
        -0.9924740195274353, -0.07646500319242477, 0.09565100073814392, -0.9820899963378906, -0.18306200206279755, 0.04457399994134903,
        -0.9816100001335144, -0.18801499903202057, 0.03304100036621094, -0.983722984790802, -0.16623400151729584, 0.06822899729013443,
        -0.9862040281295776, -0.14071400463581085, 0.08718100190162659, -0.9924740195274353, 0.07657899707555771, -0.09555599838495255,
        -0.9070649743080139, 0.40307098627090454, -0.03255299851298332, -0.9070209860801697, 0.3753640055656433, 0.000007000000096013537,
        -0.9820899963378906, 0.18306200206279755, -0.04457399994134903, -0.9065750241279602, 0.3751649856567383, -0.00007400000322377309,
        -0.9816100001335144, 0.18801499903202057, -0.03304100036621094, -0.908607006072998, 0.3759070038795471, -0.00026199998683296144,
        -0.983722984790802, 0.16623400151729584, -0.06822899729013443, -0.9290030002593994, 0.33324098587036133, 0.029803000390529633,
        -0.9862040281295776, 0.14071400463581085, -0.08718100190162659, -0.6836559772491455, 0.7198299765586853, -0.032017000019550323,
        -0.6943539977073669, 0.6943539977073669, 0, -0.694034993648529, 0.694034993648529, 0,
        -0.6955100297927856, 0.6955100297927856, 0, -0.7306150197982788, 0.6639170050621033, 0.029100999236106873,
        -0.35523301362991333, 0.9268649816513062, -0.03203999996185303, -0.3753649890422821, 0.9070209860801697, -0.000007000000096013537,
        -0.3751649856567383, 0.9065750241279602, 0.00007300000288523734, -0.3759070038795471, 0.908607006072998, 0.00026199998683296144,
        -0.4211460053920746, 0.8926259875297546, 0.028991999104619026, -0.07646500319242477, 0.9924740195274353, 0.09565100073814392,
        -0.18306200206279755, 0.9820899963378906, 0.04457399994134903, -0.18801499903202057, 0.9816100001335144, 0.03304100036621094,
        -0.16623400151729584, 0.983722984790802, 0.06822899729013443, -0.14071400463581085, 0.9862040281295776, 0.08718100190162659 };


float  teapotBinormals[] = { 0.2554270029067993, -0.05043400079011917, -0.9655119776725769, 0.2302899956703186, -0.11379700154066086, -0.9664459824562073,
        -0.23653900623321533, 0.09789499640464783, -0.9666780233383179, -0.2551180124282837, 0.05037299916148186, -0.9655969738960266,
        -0.9201610088348389, 0.38079801201820374, -0.09108299762010574, -0.9770479798316956, 0.1929199993610382, -0.09032399952411652,
        -0.6762400269508362, 0.2798590064048767, 0.6814529895782471, -0.723800003528595, 0.1429159939289093, 0.6750479936599731,
        -0.4681990146636963, 0.1581760048866272, 0.869350016117096, -0.4902079999446869, 0.09679199755191803, 0.8662149906158447,
        0.16952399909496307, -0.1934960037469864, -0.9663439989089966, -0.18106800317764282, 0.18106800317764282, -0.9666590094566345,
        -0.7041199803352356, 0.7041199803352356, -0.09181900322437286, -0.5179349780082703, 0.5179349780082703, 0.6807990074157715,
        -0.37217798829078674, 0.3260670006275177, 0.8690019845962524, 0.08221600204706192, -0.243368998169899, -0.9664430022239685,
        -0.09789499640464783, 0.23653900623321533, -0.9666780233383179, -0.38079801201820374, 0.9201610088348389, -0.09108199924230576,
        -0.2798590064048767, 0.6762400269508362, 0.6814540028572083, -0.21894000470638275, 0.44305500388145447, 0.8693490028381348,
        0.050822000950574875, -0.2573910057544708, -0.9649699926376343, -0.05021600052714348, 0.25432100892066956, -0.965815007686615,
        -0.19291600584983826, 0.9770249724388123, -0.09059000015258789, -0.14291299879550934, 0.7237870097160339, 0.6750609874725342,
        -0.09679199755191803, 0.4902079999446869, 0.8662149906158447, -0.048507001250982285, -0.2576940059661865, -0.965008020401001,
        -0.15833300352096558, -0.3227809965610504, -0.933135986328125, 0.05656199902296066, 0.13793900609016418, -0.9888240098953247,
        0.049150001257658005, 0.2545199990272522, -0.9658179879188538, 0.378387987613678, 0.9173290133476257, -0.12381099909543991,
        0.1917950063943863, 0.9772530198097229, -0.09050799906253815, 0.2777239978313446, 0.6716070175170898, 0.6868870258331299,
        0.14281700551509857, 0.7238019704818726, 0.6750659942626953, 0.15788200497627258, 0.4674209952354431, 0.8698220252990723,
        0.09679199755191803, 0.4902079999446869, 0.8662149906158447, -0.3139069974422455, -0.2657270133495331, -0.9115110039710999,
        0.05247500166296959, 0.05178600177168846, -0.9972789883613586, 0.699787974357605, 0.6969379782676697, -0.15676100552082062,
        0.511929988861084, 0.5116159915924072, 0.6900550127029419, 0.32515400648117065, 0.37111398577690125, 0.8697980046272278,
        -0.3181929886341095, -0.09987600147724152, -0.9427499771118164, 0.1552799940109253, 0.06176299974322319, -0.9859380125999451,
        0.9187250137329102, 0.3751460015773773, -0.1233299970626831, 0.6724870204925537, 0.2775439918041229, 0.6860979795455933,
        0.4424299895763397, 0.21853800117969513, 0.8697689771652222, -0.255948007106781, -0.04464200139045715, -0.9656590223312378,
        0.25306200981140137, 0.046362001448869705, -0.9663389921188354, 0.9778940081596375, 0.18800100684165955, -0.09153299778699875,
        0.7238150238990784, 0.14205799996852875, 0.675212025642395, 0.49017900228500366, 0.0967010036110878, 0.8662409782409668,
        -0.25491899251937866, 0.05033399909734726, -0.9656509757041931, -0.2302899956703186, 0.11379700154066086, -0.9664459824562073,
        0.23653900623321533, -0.09789499640464783, -0.9666780233383179, 0.252265989780426, -0.04980999976396561, -0.9663749933242798,
        0.9201610088348389, -0.38079801201820374, -0.09108299762010574, 0.9769039750099182, -0.19289200007915497, -0.09193000197410583,
        0.6762400269508362, -0.2798590064048767, 0.6814529895782471, 0.7236610054969788, -0.14288799464702606, 0.6752020120620728,
        0.4681990146636963, -0.1581760048866272, 0.869350016117096, 0.4901660084724426, -0.09678400307893753, 0.8662390112876892,
        -0.16952399909496307, 0.1934960037469864, -0.9663439989089966, 0.18106800317764282, -0.18106800317764282, -0.9666590094566345,
        0.7041199803352356, -0.7041199803352356, -0.09181900322437286, 0.5179349780082703, -0.5179349780082703, 0.6807990074157715,
        0.37217798829078674, -0.3260670006275177, 0.8690019845962524, -0.08221600204706192, 0.243368998169899, -0.9664430022239685,
        0.09789499640464783, -0.23653900623321533, -0.9666780233383179, 0.38079801201820374, -0.9201610088348389, -0.09108199924230576,
        0.2798590064048767, -0.6762400269508362, 0.6814540028572083, 0.21894000470638275, -0.44305500388145447, 0.8693490028381348,
        -0.05043400079011917, 0.2554270029067993, -0.9655119776725769, 0.05037299916148186, -0.2551180124282837, -0.9655969738960266,
        0.1929199993610382, -0.9770479798316956, -0.09032399952411652, 0.1429159939289093, -0.723800003528595, 0.6750479936599731,
        0.09679199755191803, -0.4902079999446869, 0.8662149906158447, 0.05043400079011917, 0.2554270029067993, -0.9655119776725769,
        0.11379700154066086, 0.2302899956703186, -0.9664459824562073, -0.09789499640464783, -0.23653900623321533, -0.9666780233383179,
        -0.05037299916148186, -0.2551180124282837, -0.9655969738960266, -0.38079801201820374, -0.9201610088348389, -0.09108299762010574,
        -0.1929199993610382, -0.9770479798316956, -0.09032399952411652, -0.2798590064048767, -0.6762400269508362, 0.6814529895782471,
        -0.1429159939289093, -0.723800003528595, 0.6750479936599731, -0.1581760048866272, -0.4681990146636963, 0.869350016117096,
        -0.09679199755191803, -0.4902079999446869, 0.8662149906158447, 0.1934960037469864, 0.16952399909496307, -0.9663439989089966,
        -0.18106800317764282, -0.18106800317764282, -0.9666590094566345, -0.7041199803352356, -0.7041199803352356, -0.09181900322437286,
        -0.5179349780082703, -0.5179349780082703, 0.6807990074157715, -0.3260670006275177, -0.37217798829078674, 0.8690019845962524,
        0.243368998169899, 0.08221600204706192, -0.9664430022239685, -0.23653900623321533, -0.09789499640464783, -0.9666780233383179,
        -0.9201610088348389, -0.38079801201820374, -0.09108199924230576, -0.6762400269508362, -0.2798590064048767, 0.6814540028572083,
        -0.44305500388145447, -0.21894000470638275, 0.8693490028381348, 0.2554270029067993, 0.05043400079011917, -0.9655119776725769,
        -0.2551180124282837, -0.05037299916148186, -0.9655969738960266, -0.9770479798316956, -0.1929199993610382, -0.09032399952411652,
        -0.723800003528595, -0.1429159939289093, 0.6750479936599731, -0.4902079999446869, -0.09679199755191803, 0.8662149906158447,
        -0.4902079999446869, 0.09679199755191803, 0.8662149906158447, -0.44305500388145447, 0.21893900632858276, 0.8693490028381348,
        -0.37287598848342896, 0.15431199967861176, 0.9149600267410278, -0.4014579951763153, 0.07926800101995468, 0.9124410152435303,
        -0.3112579882144928, 0.12881100177764893, 0.9415550231933594, -0.33541300892829895, 0.0662280023097992, 0.939740002155304,
        -0.19015200436115265, 0.07869099825620651, 0.9785959720611572, -0.20517399907112122, 0.040511999279260635, 0.977886974811554,
        0.06301800161600113, -0.021289000287652016, 0.9977849721908569, 0.06623400002717972, -0.013078000396490097, 0.9977179765701294,
        -0.3260670006275177, 0.37217798829078674, 0.8690019845962524, -0.285739004611969, 0.285739004611969, 0.9147170186042786,
        -0.23854400217533112, 0.23854400217533112, 0.9413790106773376, -0.14574900269508362, 0.14574900269508362, 0.9785270094871521,
        0.05011200159788132, -0.04390300065279007, 0.9977779984474182, -0.1581760048866272, 0.4681999981403351, 0.869350016117096,
        -0.15431199967861176, 0.37287598848342896, 0.9149600267410278, -0.12881100177764893, 0.3112579882144928, 0.9415550231933594,
        -0.07869099825620651, 0.19015100598335266, 0.9785959720611572, 0.02946699969470501, -0.05963199958205223, 0.9977849721908569,
        -0.09679199755191803, 0.4902079999446869, 0.8662149906158447, -0.07926800101995468, 0.4014579951763153, 0.9124410152435303,
        -0.0662280023097992, 0.33541300892829895, 0.939740002155304, -0.040511999279260635, 0.20517399907112122, 0.977886974811554,
        0.013078000396490097, -0.06623400002717972, 0.9977179765701294, 0.09679199755191803, 0.4902079999446869, 0.8662149906158447,
        0.21858200430870056, 0.4423219859600067, 0.86981201171875, 0.15431199967861176, 0.37287598848342896, 0.9149600267410278,
        0.07926800101995468, 0.4014579951763153, 0.9124410152435303, 0.12881100177764893, 0.3112579882144928, 0.9415550231933594,
        0.0662280023097992, 0.33541300892829895, 0.939740002155304, 0.07869099825620651, 0.19015200436115265, 0.9785959720611572,
        0.040511999279260635, 0.20517399907112122, 0.977886974811554, -0.021289000287652016, -0.06301800161600113, 0.9977849721908569,
        -0.013078000396490097, -0.06623400002717972, 0.9977179765701294, 0.3711329996585846, 0.3251489996910095, 0.8697919845581055,
        0.285739004611969, 0.285739004611969, 0.9147170186042786, 0.23854400217533112, 0.23854400217533112, 0.9413790106773376,
        0.14574900269508362, 0.14574900269508362, 0.9785270094871521, -0.04390300065279007, -0.05011200159788132, 0.9977779984474182,
        0.46750199794769287, 0.15794099867343903, 0.8697680234909058, 0.37287598848342896, 0.15431199967861176, 0.9149600267410278,
        0.3112579882144928, 0.12881100177764893, 0.9415550231933594, 0.19015100598335266, 0.07869099825620651, 0.9785959720611572,
        -0.05963199958205223, -0.02946699969470501, 0.9977849721908569, 0.49017900228500366, 0.0967010036110878, 0.8662409782409668,
        0.4014579951763153, 0.07926800101995468, 0.9124410152435303, 0.33541300892829895, 0.0662280023097992, 0.939740002155304,
        0.20517399907112122, 0.040511999279260635, 0.977886974811554, -0.06623400002717972, -0.013078000396490097, 0.9977179765701294,
        0.4901660084724426, -0.09678400307893753, 0.8662390112876892, 0.44305500388145447, -0.21893900632858276, 0.8693490028381348,
        0.37287598848342896, -0.15431199967861176, 0.9149600267410278, 0.4014579951763153, -0.07926800101995468, 0.9124410152435303,
        0.3112579882144928, -0.12881100177764893, 0.9415550231933594, 0.33541300892829895, -0.0662280023097992, 0.939740002155304,
        0.19015200436115265, -0.07869099825620651, 0.9785959720611572, 0.20517399907112122, -0.040511999279260635, 0.977886974811554,
        -0.06301800161600113, 0.021289000287652016, 0.9977849721908569, -0.06623400002717972, 0.013078000396490097, 0.9977179765701294,
        0.3260670006275177, -0.37217798829078674, 0.8690019845962524, 0.285739004611969, -0.285739004611969, 0.9147170186042786,
        0.23854400217533112, -0.23854400217533112, 0.9413790106773376, 0.14574900269508362, -0.14574900269508362, 0.9785270094871521,
        -0.05011200159788132, 0.04390300065279007, 0.9977779984474182, 0.1581760048866272, -0.4681999981403351, 0.869350016117096,
        0.15431199967861176, -0.37287598848342896, 0.9149600267410278, 0.12881100177764893, -0.3112579882144928, 0.9415550231933594,
        0.07869099825620651, -0.19015100598335266, 0.9785959720611572, -0.02946699969470501, 0.05963199958205223, 0.9977849721908569,
        0.09679199755191803, -0.4902079999446869, 0.8662149906158447, 0.07926800101995468, -0.4014579951763153, 0.9124410152435303,
        0.0662280023097992, -0.33541300892829895, 0.939740002155304, 0.040511999279260635, -0.20517399907112122, 0.977886974811554,
        -0.013078000396490097, 0.06623400002717972, 0.9977179765701294, -0.09679199755191803, -0.4902079999446869, 0.8662149906158447,
        -0.21893900632858276, -0.44305500388145447, 0.8693490028381348, -0.15431199967861176, -0.37287598848342896, 0.9149600267410278,
        -0.07926800101995468, -0.4014579951763153, 0.9124410152435303, -0.12881100177764893, -0.3112579882144928, 0.9415550231933594,
        -0.0662280023097992, -0.33541300892829895, 0.939740002155304, -0.07869099825620651, -0.19015200436115265, 0.9785959720611572,
        -0.040511999279260635, -0.20517399907112122, 0.977886974811554, 0.021289000287652016, 0.06301800161600113, 0.9977849721908569,
        0.013078000396490097, 0.06623400002717972, 0.9977179765701294, -0.37217798829078674, -0.3260670006275177, 0.8690019845962524,
        -0.285739004611969, -0.285739004611969, 0.9147170186042786, -0.23854400217533112, -0.23854400217533112, 0.9413790106773376,
        -0.14574900269508362, -0.14574900269508362, 0.9785270094871521, 0.04390300065279007, 0.05011200159788132, 0.9977779984474182,
        -0.4681999981403351, -0.1581760048866272, 0.869350016117096, -0.37287598848342896, -0.15431199967861176, 0.9149600267410278,
        -0.3112579882144928, -0.12881100177764893, 0.9415550231933594, -0.19015100598335266, -0.07869099825620651, 0.9785959720611572,
        0.05963199958205223, 0.02946699969470501, 0.9977849721908569, -0.4902079999446869, -0.09679199755191803, 0.8662149906158447,
        -0.4014579951763153, -0.07926800101995468, 0.9124410152435303, -0.33541300892829895, -0.0662280023097992, 0.939740002155304,
        -0.20517399907112122, -0.040511999279260635, 0.977886974811554, 0.06623400002717972, 0.013078000396490097, 0.9977179765701294,
        0.06623400002717972, -0.013078000396490097, 0.9977179765701294, 0.05963199958205223, -0.02946699969470501, 0.9977849721908569,
        0.40303200483322144, -0.1667889952659607, 0.8998590111732483, 0.4339120090007782, -0.08567699790000916, 0.8968719840049744,
        0.6326310038566589, -0.2618109881877899, 0.7288579940795898, 0.6777120232582092, -0.13381600379943848, 0.723048985004425,
        0.6661339998245239, -0.27567601203918457, 0.6930140256881714, 0.7128540277481079, -0.14075499773025513, 0.6870430111885071,
        0.5777599811553955, -0.19519099593162537, 0.792523980140686, 0.6036490201950073, -0.11919199675321579, 0.7882900238037109,
        0.04390300065279007, -0.05011200159788132, 0.9977779984474182, 0.30884799361228943, -0.30884799361228943, 0.8995699882507324,
        0.48457300662994385, -0.48457300662994385, 0.7282710075378418, 0.510138988494873, -0.510138988494873, 0.6924710273742676,
        0.4591110050678253, -0.40222999453544617, 0.7921029925346375, 0.021289000287652016, -0.06301800161600113, 0.9977849721908569,
        0.16678999364376068, -0.40303200483322144, 0.8998590111732483, 0.2618109881877899, -0.6326310038566589, 0.7288579940795898,
        0.27567601203918457, -0.6661339998245239, 0.6930140256881714, 0.2701770067214966, -0.546737015247345, 0.7925170063972473,
        0.013078000396490097, -0.06623400002717972, 0.9977179765701294, 0.08567599952220917, -0.4339120090007782, 0.8968719840049744,
        0.13381600379943848, -0.6777120232582092, 0.723048985004425, 0.14075499773025513, -0.7128540277481079, 0.6870430111885071,
        0.11919199675321579, -0.6036490201950073, 0.7882900238037109, -0.013078000396490097, -0.06623400002717972, 0.9977179765701294,
        -0.02946699969470501, -0.05963199958205223, 0.9977849721908569, -0.1667889952659607, -0.40303200483322144, 0.8998590111732483,
        -0.08567699790000916, -0.4339120090007782, 0.8968719840049744, -0.2618109881877899, -0.6326310038566589, 0.7288579940795898,
        -0.13381600379943848, -0.6777120232582092, 0.723048985004425, -0.27567601203918457, -0.6661339998245239, 0.6930140256881714,
        -0.14075499773025513, -0.7128540277481079, 0.6870430111885071, -0.19519099593162537, -0.5777599811553955, 0.792523980140686,
        -0.11919199675321579, -0.6036490201950073, 0.7882900238037109, -0.05011200159788132, -0.04390300065279007, 0.9977779984474182,
        -0.30884799361228943, -0.30884799361228943, 0.8995699882507324, -0.48457300662994385, -0.48457300662994385, 0.7282710075378418,
        -0.510138988494873, -0.510138988494873, 0.6924710273742676, -0.40222999453544617, -0.4591110050678253, 0.7921029925346375,
        -0.06301800161600113, -0.021289000287652016, 0.9977849721908569, -0.40303200483322144, -0.16678999364376068, 0.8998590111732483,
        -0.6326310038566589, -0.2618109881877899, 0.7288579940795898, -0.6661339998245239, -0.27567601203918457, 0.6930140256881714,
        -0.546737015247345, -0.2701770067214966, 0.7925170063972473, -0.06623400002717972, -0.013078000396490097, 0.9977179765701294,
        -0.4339120090007782, -0.08567599952220917, 0.8968719840049744, -0.6777120232582092, -0.13381600379943848, 0.723048985004425,
        -0.7128540277481079, -0.14075499773025513, 0.6870430111885071, -0.6036490201950073, -0.11919199675321579, 0.7882900238037109,
        -0.06623400002717972, 0.013078000396490097, 0.9977179765701294, -0.05963199958205223, 0.02946699969470501, 0.9977849721908569,
        -0.40303200483322144, 0.1667889952659607, 0.8998590111732483, -0.4339120090007782, 0.08567699790000916, 0.8968719840049744,
        -0.6326310038566589, 0.2618109881877899, 0.7288579940795898, -0.6777120232582092, 0.13381600379943848, 0.723048985004425,
        -0.6661339998245239, 0.27567601203918457, 0.6930140256881714, -0.7128540277481079, 0.14075499773025513, 0.6870430111885071,
        -0.5777599811553955, 0.19519099593162537, 0.792523980140686, -0.6036490201950073, 0.11919199675321579, 0.7882900238037109,
        -0.04390300065279007, 0.05011200159788132, 0.9977779984474182, -0.30884799361228943, 0.30884799361228943, 0.8995699882507324,
        -0.48457300662994385, 0.48457300662994385, 0.7282710075378418, -0.510138988494873, 0.510138988494873, 0.6924710273742676,
        -0.4591110050678253, 0.40222999453544617, 0.7921029925346375, -0.021289000287652016, 0.06301800161600113, 0.9977849721908569,
        -0.16678999364376068, 0.40303200483322144, 0.8998590111732483, -0.2618109881877899, 0.6326310038566589, 0.7288579940795898,
        -0.27567601203918457, 0.6661339998245239, 0.6930140256881714, -0.2701770067214966, 0.546737015247345, 0.7925170063972473,
        -0.013078000396490097, 0.06623400002717972, 0.9977179765701294, -0.08567599952220917, 0.4339120090007782, 0.8968719840049744,
        -0.13381600379943848, 0.6777120232582092, 0.723048985004425, -0.14075499773025513, 0.7128540277481079, 0.6870430111885071,
        -0.11919199675321579, 0.6036490201950073, 0.7882900238037109, 0.013078000396490097, 0.06623400002717972, 0.9977179765701294,
        0.02946699969470501, 0.05963199958205223, 0.9977849721908569, 0.1667889952659607, 0.40303200483322144, 0.8998590111732483,
        0.08567699790000916, 0.4339120090007782, 0.8968719840049744, 0.2618109881877899, 0.6326310038566589, 0.7288579940795898,
        0.13381600379943848, 0.6777120232582092, 0.723048985004425, 0.27567601203918457, 0.6661339998245239, 0.6930140256881714,
        0.14075499773025513, 0.7128540277481079, 0.6870430111885071, 0.19519099593162537, 0.5777599811553955, 0.792523980140686,
        0.11919199675321579, 0.6036490201950073, 0.7882900238037109, 0.05011200159788132, 0.04390300065279007, 0.9977779984474182,
        0.30884799361228943, 0.30884799361228943, 0.8995699882507324, 0.48457300662994385, 0.48457300662994385, 0.7282710075378418,
        0.510138988494873, 0.510138988494873, 0.6924710273742676, 0.40222999453544617, 0.4591110050678253, 0.7921029925346375,
        0.06301800161600113, 0.021289000287652016, 0.9977849721908569, 0.40303200483322144, 0.16678999364376068, 0.8998590111732483,
        0.6326310038566589, 0.2618109881877899, 0.7288579940795898, 0.6661339998245239, 0.27567601203918457, 0.6930140256881714,
        0.546737015247345, 0.2701770067214966, 0.7925170063972473, 0.06623400002717972, 0.013078000396490097, 0.9977179765701294,
        0.4339120090007782, 0.08567599952220917, 0.8968719840049744, 0.6777120232582092, 0.13381600379943848, 0.723048985004425,
        0.7128540277481079, 0.14075499773025513, 0.6870430111885071, 0.6036490201950073, 0.11919199675321579, 0.7882900238037109,
        0.6036490201950073, -0.11919199675321579, 0.7882900238037109, 0.546737015247345, -0.2701770067214966, 0.7925170063972473,
        0.7223830223083496, -0.2989569902420044, 0.623528003692627, 0.7723940014839172, -0.15251100063323975, 0.616562008857727,
        0.9094089865684509, -0.3763520121574402, 0.1770150065422058, 0.9660869836807251, -0.19075599312782288, 0.1740349978208542,
        0.9408230185508728, -0.3353259861469269, 0.04907499998807907, 0.9843119978904724, -0.16964000463485718, 0.048493001610040665,
        0.9810580015182495, -0.1937119960784912, 0, 0.7071070075035095, -0.7071070075035095, 0,
        0.40222999453544617, -0.4591110050678253, 0.7921029925346375, 0.5532029867172241, -0.5532029867172241, 0.622842013835907,
        0.6959879994392395, -0.6959879994392395, 0.17663900554180145, 0.7403979897499084, -0.6703829765319824, 0.048958998173475266,
        0.8310419917106628, -0.5562090277671814, 0, 0.19519099593162537, -0.5777599811553955, 0.792523980140686,
        0.2989560067653656, -0.7223830223083496, 0.623528003692627, 0.3763520121574402, -0.9094089865684509, 0.1770150065422058,
        0.4275760054588318, -0.902646005153656, 0.04906899854540825, 0.5562090277671814, -0.8310419917106628, 0,
        0.11919199675321579, -0.6036490201950073, 0.7882900238037109, 0.15251100063323975, -0.7723940014839172, 0.616562008857727,
        0.19075599312782288, -0.9660869836807251, 0.1740349978208542, 0.19348600506782532, -0.9799140095710754, 0.048277001827955246,
        0.1937119960784912, -0.9810580015182495, 0, -0.11919199675321579, -0.6036490201950073, 0.7882900238037109,
        -0.2701770067214966, -0.546737015247345, 0.7925170063972473, -0.2989569902420044, -0.7223830223083496, 0.623528003692627,
        -0.15251100063323975, -0.7723940014839172, 0.616562008857727, -0.3763520121574402, -0.9094089865684509, 0.1770150065422058,
        -0.19075599312782288, -0.9660869836807251, 0.1740349978208542, -0.3353259861469269, -0.9408230185508728, 0.04907499998807907,
        -0.16964000463485718, -0.9843119978904724, 0.04849399998784065, -0.1937119960784912, -0.9810580015182495, 0,
        0.7071070075035095, -0.7071070075035095, 0, -0.4591110050678253, -0.40222999453544617, 0.7921029925346375,
        -0.5532029867172241, -0.5532029867172241, 0.622842013835907, -0.6959879994392395, -0.6959879994392395, 0.17663900554180145,
        -0.6703829765319824, -0.7403979897499084, 0.048958998173475266, -0.5562090277671814, -0.8310419917106628, 0,
        -0.5777599811553955, -0.19519099593162537, 0.792523980140686, -0.7223830223083496, -0.2989560067653656, 0.623528003692627,
        -0.9094089865684509, -0.3763520121574402, 0.1770150065422058, -0.902646005153656, -0.4275760054588318, 0.04906899854540825,
        -0.8310419917106628, -0.5562090277671814, 0, -0.6036490201950073, -0.11919199675321579, 0.7882900238037109,
        -0.7723940014839172, -0.15251100063323975, 0.616562008857727, -0.9660869836807251, -0.19075599312782288, 0.1740349978208542,
        -0.9799140095710754, -0.19348600506782532, 0.048277001827955246, -0.9810580015182495, -0.1937119960784912, 0,
        -0.6036490201950073, 0.11919199675321579, 0.7882900238037109, -0.546737015247345, 0.2701770067214966, 0.7925170063972473,
        -0.7223830223083496, 0.2989569902420044, 0.623528003692627, -0.7723940014839172, 0.15251100063323975, 0.616562008857727,
        -0.9094089865684509, 0.3763520121574402, 0.1770150065422058, -0.9660869836807251, 0.19075599312782288, 0.1740349978208542,
        -0.9408230185508728, 0.3353259861469269, 0.04907499998807907, -0.9843119978904724, 0.16964000463485718, 0.04849399998784065,
        -0.9810580015182495, 0.1937119960784912, 0, 0.7071070075035095, -0.7071070075035095, 0,
        -0.40222999453544617, 0.4591110050678253, 0.7921029925346375, -0.5532029867172241, 0.5532029867172241, 0.622842013835907,
        -0.6959879994392395, 0.6959879994392395, 0.17663900554180145, -0.7403979897499084, 0.6703829765319824, 0.048958998173475266,
        -0.8310419917106628, 0.5562090277671814, 0, -0.19519099593162537, 0.5777599811553955, 0.792523980140686,
        -0.2989560067653656, 0.7223830223083496, 0.623528003692627, -0.3763520121574402, 0.9094089865684509, 0.1770150065422058,
        -0.4275760054588318, 0.902646005153656, 0.04906899854540825, -0.5562090277671814, 0.8310419917106628, 0,
        -0.11919199675321579, 0.6036490201950073, 0.7882900238037109, -0.15251100063323975, 0.7723940014839172, 0.616562008857727,
        -0.19075599312782288, 0.9660869836807251, 0.1740349978208542, -0.19348600506782532, 0.9799140095710754, 0.048277001827955246,
        -0.1937119960784912, 0.9810580015182495, 0, 0.11919199675321579, 0.6036490201950073, 0.7882900238037109,
        0.2701770067214966, 0.546737015247345, 0.7925170063972473, 0.2989569902420044, 0.7223830223083496, 0.623528003692627,
        0.15251100063323975, 0.7723940014839172, 0.616562008857727, 0.3763520121574402, 0.9094089865684509, 0.1770150065422058,
        0.19075599312782288, 0.9660869836807251, 0.1740349978208542, 0.3353259861469269, 0.9408230185508728, 0.04907499998807907,
        0.16964000463485718, 0.9843119978904724, 0.04849399998784065, 0.1937119960784912, 0.9810580015182495, 0,
        0.7071070075035095, -0.7071070075035095, 0, 0.4591110050678253, 0.40222999453544617, 0.7921029925346375,
        0.5532029867172241, 0.5532029867172241, 0.622842013835907, 0.6959879994392395, 0.6959879994392395, 0.17663900554180145,
        0.6703829765319824, 0.7403979897499084, 0.048958998173475266, 0.5562090277671814, 0.8310419917106628, 0,
        0.5777599811553955, 0.19519099593162537, 0.792523980140686, 0.7223830223083496, 0.2989560067653656, 0.623528003692627,
        0.9094089865684509, 0.3763520121574402, 0.1770150065422058, 0.902646005153656, 0.4275760054588318, 0.04906899854540825,
        0.8310419917106628, 0.5562090277671814, 0, 0.6036490201950073, 0.11919199675321579, 0.7882900238037109,
        0.7723940014839172, 0.15251100063323975, 0.616562008857727, 0.9660869836807251, 0.19075599312782288, 0.1740349978208542,
        0.9799150228500366, 0.19348600506782532, 0.048277001827955246, 0.9810580015182495, 0.1937119960784912, 0,
        0.9999480247497559, 0.006622000131756067, 0.007786999922245741, 0.9989290237426758, 0.04125700145959854, -0.020945999771356583,
        0.9700260162353516, -0.18230900168418884, 0.1606609970331192, 0.9929869771003723, -0.1116809993982315, 0.038782998919487,
        0.8677089810371399, -0.30993399024009705, 0.38861599564552307, 0.9675049781799316, -0.18179599940776825, 0.17574100196361542,
        0.6127229928970337, -0.23797500133514404, 0.753616988658905, 0.781611979007721, -0.1585649996995926, 0.6032750010490417,
        0.13049399852752686, -0.02585900016129017, 0.9911119937896729, 0.16583800315856934, -0.04606600105762482, 0.9850770235061646,
        0.9847609996795654, -0.03004699945449829, -0.17129500210285187, 0.9463850259780884, 0.008138000033795834, 0.3229379951953888,
        0.6942890286445618, 0.06011800095438957, 0.7171810269355774, 0.405923992395401, 0.09244199842214584, 0.9092199802398682,
        0.1477230042219162, 0.0024739999789744616, 0.9890260100364685, 0.991798996925354, -0.11557900160551071, -0.05454900115728378,
        0.9920099973678589, 0.07202500104904175, 0.10358300060033798, 0.8882240056991577, 0.2238840013742447, 0.40116599202156067,
        0.6046879887580872, 0.13691100478172302, 0.7846069931983948, 0.12908099591732025, -0.06111999973654747, 0.989749014377594,
        0.9954820275306702, -0.09436299651861191, 0.010502999648451805, 0.9981970191001892, 0.012060999870300293, 0.05880200117826462,
        0.9550639986991882, 0.09819000214338303, 0.27966299653053284, 0.6606940031051636, 0.05169999971985817, 0.7488729953765869,
        0.07273799926042557, -0.04034300148487091, 0.9965350031852722, 0.9999179840087891, 0.007191000040620565, 0.010560999624431133,
        0.9989050030708313, 0.04436499997973442, -0.014883999712765217, 0.9694769978523254, -0.17860299348831177, 0.1679760068655014,
        0.9924619793891907, -0.10775599628686905, 0.058378998190164566, 0.8567489981651306, -0.28829601407051086, 0.4276289939880371,
        0.9473999738693237, -0.16112199425697327, 0.27653801441192627, 0.5627779960632324, -0.19747799634933472, 0.8026729822158813,
        0.6577669978141785, -0.11438000202178955, 0.7444859743118286, 0.07901199907064438, 0.0013689999468624592, 0.9968730211257935,
        0.07274100184440613, -0.02020600065588951, 0.9971460103988647, 0.9888780117034912, 0.025808999314904213, -0.14647500216960907,
        0.9453979730606079, -0.006663000211119652, 0.3258500099182129, 0.6921399831771851, -0.04972299933433533, 0.7200480103492737,
        0.3957499861717224, -0.08134900033473969, 0.9147480130195618, 0.13914500176906586, -0.00007899999764049426, 0.9902719855308533,
        0.9924669861793518, -0.10311000049114227, -0.06616800278425217, 0.9926300048828125, 0.07926999777555466, 0.09165900200605392,
        0.900858998298645, 0.2553130090236664, 0.3510949909687042, 0.6513699889183044, 0.18318000435829163, 0.7363160252571106,
        0.15978699922561646, -0.02714099921286106, 0.9867780208587646, 0.9955620169639587, -0.09379199892282486, 0.0077309999614953995,
        0.9991030097007751, 0.01610800065100193, 0.039149001240730286, 0.9764699935913086, 0.12068899720907211, 0.17871999740600586,
        0.7859060168266296, 0.10103499889373779, 0.6100350022315979, 0.16579000651836395, -0.014832000248134136, 0.986050009727478,
        0.1655299961566925, -0.10078699886798859, 0.9810410141944885, -0.0046790000051259995, -0.1750659942626953, 0.9845460057258606,
        -0.3859579861164093, -0.06494200229644775, 0.9202280044555664, -0.3219670057296753, -0.05600599944591522, 0.9450929760932922,
        -0.6471610069274902, -0.11495299637317657, 0.7536370158195496, -0.5616440176963806, -0.078855000436306, 0.8236119747161865,
        -0.8379700183868408, -0.23749999701976776, 0.4913240075111389, -0.7512590289115906, -0.1447169929742813, 0.6439470052719116,
        -0.9052090048789978, -0.2807050049304962, 0.3190630078315735, -0.8249419927597046, -0.2209009975194931, 0.5202630162239075,
        -0.13363699615001678, 0.0291920006275177, 0.9905999898910522, -0.4039649963378906, 0.0019519999623298645, 0.9147719740867615,
        -0.7191359996795654, 0.002443999983370304, 0.6948649883270264, -0.9637579917907715, 0.026884999126195908, 0.26541900634765625,
        -0.9637719988822937, 0.2207069993019104, -0.14977200329303741, 0.03522900119423866, 0.06716900318861008, 0.9971190094947815,
        -0.3620629906654358, -0.01676199957728386, 0.9320030212402344, -0.6534259915351868, 0.007120999973267317, 0.7569569945335388,
        -0.8528590202331543, 0.11686599999666214, 0.5088940262794495, -0.8814889788627625, 0.3579840064048767, 0.3079349994659424,
        0.0726580023765564, 0.02018200047314167, 0.9971529841423035, -0.37608298659324646, -0.025955000892281532, 0.926222026348114,
        -0.6568350195884705, -0.015021000057458878, 0.7538840174674988, -0.8238760232925415, 0.03257700055837631, 0.5658339858055115,
        -0.8688690066337585, 0.13078700006008148, 0.4774540066719055, 0.07265599817037582, -0.07700400054454803, 0.994379997253418,
        -0.0343950018286705, -0.151870995759964, 0.9878020286560059, -0.40362000465393066, -0.05282000079751015, 0.9134010076522827,
        -0.37586501240730286, -0.041078001260757446, 0.9257640242576599, -0.6878190040588379, -0.0810059979557991, 0.721347987651825,
        -0.6558970212936401, -0.052101001143455505, 0.7530509829521179, -0.8708800077438354, -0.2062380015850067, 0.44613200426101685,
        -0.8175939917564392, -0.12448199838399887, 0.5621780157089233, -0.8926960229873657, -0.3055669963359833, 0.33124300837516785,
        -0.8565059900283813, -0.21024300158023834, 0.4713769853115082, -0.15155400335788727, -0.025412000715732574, 0.9881219863891602,
        -0.41033700108528137, -0.0026420000940561295, 0.9119300246238708, -0.7240620255470276, 0.00047400000039488077, 0.6897349953651428,
        -0.9655590057373047, -0.017078999429941177, 0.2596229910850525, -0.973825991153717, -0.19711799919605255, -0.1131730005145073,
        0.06214199960231781, 0.08235500007867813, 0.9946640133857727, -0.3334290087223053, 0.007625999860465527, 0.9427440166473389,
        -0.608610987663269, 0.04885999858379364, 0.7919629812240601, -0.8253309726715088, 0.14631199836730957, 0.5453640222549438,
        -0.9105669856071472, 0.3146660029888153, 0.2680560052394867, 0.16523399949073792, 0.04589800164103508, 0.985185980796814,
        -0.32260099053382874, -0.010471000336110592, 0.9464769959449768, -0.5639140009880066, 0.015166000463068485, 0.8256940245628357,
        -0.758965015411377, 0.05617399886250496, 0.6487039923667908, -0.8382350206375122, 0.14245299994945526, 0.5263739824295044,
        0.9727830290794373, -0.019794000312685966, 0.2308720052242279, 0.9828159809112549, -0.036465998739004135, 0.18095199763774872,
        0.9050639867782593, -0.02252200059592724, 0.4246790111064911, 0.8354039788246155, -0.03220000118017197, 0.5486930012702942,
        0.6465700268745422, -0.045921001583337784, 0.7614709734916687, 0.4826749861240387, -0.04895399883389473, 0.8744300007820129,
        0.4453999996185303, 0.17256900668144226, 0.8785430192947388, 0.47231200337409973, 0.13768500089645386, 0.8706120252609253,
        0.4824250042438507, 0.3898639976978302, 0.7843930125236511, 0.641398012638092, 0.4275979995727539, 0.6370000243186951,
        0.9863939881324768, 0.0994419977068901, 0.13091400265693665, 0.9154840111732483, 0.2120320051908493, 0.34195101261138916,
        0.7246469855308533, 0.245046004652977, 0.6440799832344055, 0.35685500502586365, 0.17885500192642212, 0.9168779850006104,
        0.14101800322532654, 0.24263200163841248, 0.9598140120506287, 0.9366779923439026, 0.16484400629997253, 0.3089669942855835,
        0.7982620000839233, 0.2441370040178299, 0.5506129860877991, 0.4769439995288849, 0.2904820144176483, 0.8295450210571289,
        0.4125959873199463, -0.017246000468730927, 0.9107509851455688, 0.341374009847641, -0.37689098715782166, 0.8610560297966003,
        0.9026100039482117, 0.14119599759578705, 0.40664398670196533, 0.7326020002365112, 0.1491979956626892, 0.6641039848327637,
        0.38115599751472473, 0.15792299807071686, 0.9109230041503906, 0.5317370295524597, -0.02143399976193905, 0.846638023853302,
        0.7915729880332947, -0.3539769947528839, 0.49810999631881714, 0.9087340235710144, -0.07959599792957306, 0.40971601009368896,
        0.9386569857597351, -0.17680299282073975, 0.29607900977134705, 0.7781569957733154, -0.19467000663280487, 0.5971400141716003,
        0.738847017288208, -0.07674700021743774, 0.6694890260696411, 0.43915998935699463, -0.22276799380779266, 0.870352029800415,
        0.3863860070705414, -0.0790880024433136, 0.918940007686615, 0.3576120138168335, 0.07325199991464615, 0.9309930205345154,
        0.5227140188217163, 0.16167999804019928, 0.8370360136032104, 0.4246380031108856, 0.3233239948749542, 0.845661997795105,
        0.733618974685669, 0.48907899856567383, 0.4718089997768402, 0.9886019825935364, -0.10717800259590149, 0.10573200136423111,
        0.9131960272789001, -0.22303399443626404, 0.3410690128803253, 0.7163559794425964, -0.25636500120162964, 0.6489310264587402,
        0.35149699449539185, -0.15968100726604462, 0.922469973564148, 0.07999800145626068, -0.2107039988040924, 0.9742709994316101,
        0.9883249998092651, 0.04732999950647354, 0.14482200145721436, 0.9210500121116638, 0.07413999736309052, 0.3823229968547821,
        0.6804890036582947, 0.11895299702882767, 0.7230389714241028, 0.4935390055179596, -0.10269299894571304, 0.8636389970779419,
        0.3912479877471924, -0.4752289950847626, 0.7880880236625671, 0.9700270295143127, 0.07970499992370605, 0.2295520007610321,
        0.831250011920929, 0.10592100024223328, 0.5457149744033813, 0.4774230122566223, 0.13252699375152588, 0.8686220049858093,
        0.47922399640083313, -0.0024129999801516533, 0.877689003944397, 0.6902980208396912, -0.29711300134658813, 0.6597059965133667,
        0.6312130093574524, 0.4550989866256714, 0.628055989742279, 0.26494699716567993, 0.5426689982414246, 0.797065019607544,
        0.4216960072517395, 0.6728450059890747, 0.6078259944915771, 0.7324270009994507, 0.5829970240592957, 0.35166099667549133,
        0.5086709856987, 0.8606399893760681, -0.023507000878453255, 0.7640720009803772, 0.6449369788169861, -0.015798000618815422,
        0.19029100239276886, 0.2773289978504181, -0.9417420029640198, 0.02588699944317341, 0.0005750000127591193, -0.9996650218963623,
        -0.33045700192451477, -0.4387669861316681, -0.8356329798698425, -0.6271269917488098, -0.4645389914512634, -0.6252319812774658,
        -0.02311599999666214, 0.2469020038843155, 0.9687650203704834, -0.012950999662280083, 0.45514100790023804, 0.8903250098228455,
        -0.001180000021122396, 0.9888520240783691, 0.14889399707317352, 0.019520999863743782, 0.6841210126876831, -0.7291070222854614,
        0.012253000400960445, 0.007784999907016754, -0.9998949766159058, 0.3314639925956726, -0.3832260072231293, 0.8621309995651245,
        0.08274699747562408, -0.16047699749469757, 0.9835649728775024, -0.381630003452301, 0.638043999671936, 0.6687729954719543,
        -0.44988399744033813, 0.787883996963501, -0.42052799463272095, -0.2780170142650604, 0.5983560085296631, -0.7514500021934509,
        0.7378140091896057, -0.4918749928474426, 0.4622659981250763, 0.6153389811515808, -0.45540300011634827, 0.6434019804000854,
        -0.43678900599479675, 0.33411499857902527, 0.8352140188217163, -0.7429530024528503, 0.6388909816741943, -0.1995989978313446,
        -0.7432950139045715, 0.5977380275726318, -0.3003700077533722, 0.7197920083999634, 0.5168960094451904, 0.4633769989013672,
        0.22183099389076233, 0.4485720098018646, 0.8657789826393127, 0.08203200250864029, 0.15848000347614288, 0.9839479923248291,
        0.5953459739685059, 0.4811680018901825, 0.6434599757194519, -0.37556400895118713, -0.6215270161628723, 0.6875,
        -0.42666301131248474, -0.33534398674964905, 0.8399419784545898, -0.44476398825645447, -0.7887529730796814, -0.42432600259780884,
        -0.7557309865951538, -0.6222699880599976, -0.20408600568771362, -0.4292669892311096, -0.5361850261688232, -0.7267979979515076,
        -0.7655900120735168, -0.5671039819717407, -0.30375200510025024, 0.007348000071942806, -0.21113499999046326, 0.9774289727210999,
        -0.01990099996328354, -0.4373210072517395, 0.8990849852561951, -0.008775000460445881, -0.9864199757575989, 0.16400499641895294,
        0.024855999276041985, -0.6829339861869812, -0.7300570011138916, 0.014514000155031681, 0.03655200079083443, -0.9992259740829468,
        0.40192899107933044, -0.4676550030708313, 0.7872430086135864, 0.41696101427078247, -0.6813820004463196, 0.6015490293502808,
        0.5033609867095947, -0.8637740015983582, -0.022839000448584557, 0.2058819979429245, -0.2945750057697296, -0.9331870079040527,
        -0.2351589947938919, 0.5535579919815063, -0.7989199757575989, 0.6533820033073425, -0.435588002204895, 0.619156002998352,
        0.7555500268936157, -0.554410994052887, 0.3489600121974945, 0.7765160202980042, -0.6298360228538513, -0.01814199984073639,
        0.025975000113248825, 0.008264999836683273, -0.9996280074119568, -0.6086519956588745, 0.49536699056625366, -0.6198019981384277,
        -0.9813200235366821, 0.19238099455833435, 0, -0.831650972366333, 0.5552989840507507, 0,
        -0.4425640106201172, 0.38308998942375183, 0.8107889890670776, -0.5623509883880615, 0.11026400327682495, 0.8195139765739441,
        0.367917001247406, -0.15178599953651428, 0.917385995388031, 0.3960669934749603, -0.07774800062179565, 0.9149240255355835,
        0.3283520042896271, -0.13562799990177155, 0.9347670078277588, 0.3530749976634979, -0.06952299922704697, 0.9330080151557922,
        -0.5935590267181396, 0.20035800337791443, 0.7794510126113892, -0.6201800107955933, 0.12245599925518036, 0.7748429775238037,
        -0.5552989840507507, 0.831650972366333, 0, -0.2616960108280182, 0.523730993270874, 0.8106920123100281,
        0.2819640040397644, -0.2819199860095978, 0.9170699715614319, 0.25169798731803894, -0.25161200761795044, 0.9345269799232483,
        -0.4710330069065094, 0.41249701380729675, 0.7797269821166992, -0.19238099455833435, 0.9813200235366821, 0,
        -0.04031100124120712, 0.5840420126914978, 0.8107219934463501, 0.1517850011587143, -0.3678950071334839, 0.9173960089683533,
        0.13561999797821045, -0.3282899856567383, 0.9347900152206421, -0.27737799286842346, 0.561601996421814, 0.779528021812439,
        -1, 0, 0, 0.29074999690055847, 0.5413560271263123, 0.7889220118522644,
        0.07767199724912643, -0.39607399702072144, 0.9149270057678223, 0.0693729966878891, -0.3530940115451813, 0.9330130219459534,
        -0.12221000343561172, 0.6202139854431152, 0.7748550176620483, 0.19238099455833435, 0.9813200235366821, 0,
        0.5552989840507507, 0.831650972366333, 0, 0.38308998942375183, 0.4425640106201172, 0.8107889890670776,
        0.11026400327682495, 0.5623509883880615, 0.8195139765739441, -0.15178599953651428, -0.367917001247406, 0.917385995388031,
        -0.07774800062179565, -0.3960669934749603, 0.9149240255355835, -0.13562799990177155, -0.3283520042896271, 0.9347670078277588,
        -0.06952299922704697, -0.3530749976634979, 0.9330080151557922, 0.20035800337791443, 0.5935590267181396, 0.7794510126113892,
        0.12245599925518036, 0.6201800107955933, 0.7748429775238037, 0.831650972366333, 0.5552989840507507, 0,
        0.523730993270874, 0.2616960108280182, 0.8106920123100281, -0.2819199860095978, -0.2819640040397644, 0.9170699715614319,
        -0.25161200761795044, -0.25169798731803894, 0.9345269799232483, 0.41249701380729675, 0.4710330069065094, 0.7797269821166992,
        0.9813200235366821, 0.19238099455833435, 0, 0.5840420126914978, 0.04031100124120712, 0.8107219934463501,
        -0.3678950071334839, -0.1517850011587143, 0.9173960089683533, -0.3282899856567383, -0.13561999797821045, 0.9347900152206421,
        0.561601996421814, 0.27737799286842346, 0.779528021812439, -1, 0, 0,
        0.5413560271263123, -0.29074999690055847, 0.7889220118522644, -0.39607399702072144, -0.07767199724912643, 0.9149270057678223,
        -0.3530940115451813, -0.0693729966878891, 0.9330130219459534, 0.6202139854431152, 0.12221000343561172, 0.7748550176620483,
        0.9813200235366821, -0.19238099455833435, 0, 0.831650972366333, -0.5552989840507507, 0,
        0.4425640106201172, -0.38308998942375183, 0.8107889890670776, 0.5623509883880615, -0.11026400327682495, 0.8195139765739441,
        -0.367917001247406, 0.15178599953651428, 0.917385995388031, -0.3960669934749603, 0.07774800062179565, 0.9149240255355835,
        -0.3283520042896271, 0.13562799990177155, 0.9347670078277588, -0.3530749976634979, 0.06952299922704697, 0.9330080151557922,
        0.5935590267181396, -0.20035800337791443, 0.7794510126113892, 0.6201800107955933, -0.12245599925518036, 0.7748429775238037,
        0.5552989840507507, -0.831650972366333, 0, 0.2616960108280182, -0.523730993270874, 0.8106920123100281,
        -0.2819640040397644, 0.2819199860095978, 0.9170699715614319, -0.25169798731803894, 0.25161200761795044, 0.9345269799232483,
        0.4710330069065094, -0.41249701380729675, 0.7797269821166992, 0.19238099455833435, -0.9813200235366821, 0,
        0.04031100124120712, -0.5840420126914978, 0.8107219934463501, -0.1517850011587143, 0.3678950071334839, 0.9173960089683533,
        -0.13561999797821045, 0.3282899856567383, 0.9347900152206421, 0.27737799286842346, -0.561601996421814, 0.779528021812439,
        -1, 0, 0, -0.29074999690055847, -0.5413560271263123, 0.7889220118522644,
        -0.07767199724912643, 0.39607399702072144, 0.9149270057678223, -0.0693729966878891, 0.3530940115451813, 0.9330130219459534,
        0.12221000343561172, -0.6202139854431152, 0.7748550176620483, -0.19238099455833435, -0.9813200235366821, 0,
        -0.5552989840507507, -0.831650972366333, 0, -0.38308998942375183, -0.4425640106201172, 0.8107889890670776,
        -0.11026400327682495, -0.5623509883880615, 0.8195139765739441, 0.15178599953651428, 0.367917001247406, 0.917385995388031,
        0.07774800062179565, 0.3960669934749603, 0.9149240255355835, 0.13562799990177155, 0.3283520042896271, 0.9347670078277588,
        0.06952299922704697, 0.3530749976634979, 0.9330080151557922, -0.20035800337791443, -0.5935590267181396, 0.7794510126113892,
        -0.12245599925518036, -0.6201800107955933, 0.7748429775238037, -0.831650972366333, -0.5552989840507507, 0,
        -0.523730993270874, -0.2616960108280182, 0.8106920123100281, 0.2819199860095978, 0.2819640040397644, 0.9170699715614319,
        0.25161200761795044, 0.25169798731803894, 0.9345269799232483, -0.41249701380729675, -0.4710330069065094, 0.7797269821166992,
        -0.9813200235366821, -0.19238099455833435, 0, -0.5840420126914978, -0.04031100124120712, 0.8107219934463501,
        0.3678950071334839, 0.1517850011587143, 0.9173960089683533, 0.3282899856567383, 0.13561999797821045, 0.9347900152206421,
        -0.561601996421814, -0.27737799286842346, 0.779528021812439, -1, 0, 0,
        -0.5413560271263123, 0.29074999690055847, 0.7889220118522644, 0.39607399702072144, 0.07767199724912643, 0.9149270057678223,
        0.3530940115451813, 0.0693729966878891, 0.9330130219459534, -0.6202139854431152, -0.12221000343561172, 0.7748550176620483,
        -0.6201800107955933, 0.12245599925518036, 0.7748429775238037, -0.5616469979286194, 0.27755099534988403, 0.7794349789619446,
        -0.8979210257530212, 0.37159600853919983, 0.23590999841690063, -0.9542099833488464, 0.18841099739074707, 0.23234599828720093,
        -0.9101200103759766, 0.3766449987888336, 0.17268399894237518, -0.966795027256012, 0.19089600443840027, 0.16990099847316742,
        -0.8549879789352417, 0.35383298993110657, 0.3792079985141754, -0.9100499749183655, 0.17969100177288055, 0.3735229969024658,
        -0.8064150214195251, 0.2724289894104004, 0.5248600244522095, -0.8383409976959229, 0.16553199291229248, 0.5194069743156433,
        -0.4125959873199463, 0.47094500064849854, 0.7797279953956604, -0.687192976474762, 0.687192976474762, 0.23565199971199036,
        -0.6965190172195435, 0.6965190172195435, 0.17240400612354279, -0.6544880270957947, 0.6544870138168335, 0.37853899598121643,
        -0.6404970288276672, 0.5611429810523987, 0.5242909789085388, -0.20047900080680847, 0.5933949947357178, 0.7795450091362,
        -0.3715969920158386, 0.8979210257530212, 0.23590999841690063, -0.3766449987888336, 0.9101200103759766, 0.17268399894237518,
        -0.35383298993110657, 0.8549879789352417, 0.3792079985141754, -0.3770729899406433, 0.7630789875984192, 0.5249059796333313,
        -0.12245900183916092, 0.6201940178871155, 0.7748309969902039, -0.18841099739074707, 0.9542099833488464, 0.23234599828720093,
        -0.19089600443840027, 0.966795027256012, 0.16990099847316742, -0.17969200015068054, 0.9100499749183655, 0.3735229969024658,
        -0.16553199291229248, 0.8383409976959229, 0.5194069743156433, 0.12245599925518036, 0.6201800107955933, 0.7748429775238037,
        0.27755099534988403, 0.5616469979286194, 0.7794349789619446, 0.37159600853919983, 0.8979210257530212, 0.23590999841690063,
        0.18841099739074707, 0.9542099833488464, 0.23234599828720093, 0.3766449987888336, 0.9101200103759766, 0.17268399894237518,
        0.19089600443840027, 0.966795027256012, 0.16990099847316742, 0.35383298993110657, 0.8549879789352417, 0.3792079985141754,
        0.17969100177288055, 0.9100499749183655, 0.3735229969024658, 0.2724289894104004, 0.8064150214195251, 0.5248600244522095,
        0.16553199291229248, 0.8383409976959229, 0.5194069743156433, 0.47094500064849854, 0.4125959873199463, 0.7797279953956604,
        0.687192976474762, 0.687192976474762, 0.23565199971199036, 0.6965190172195435, 0.6965190172195435, 0.17240400612354279,
        0.6544870138168335, 0.6544880270957947, 0.37853899598121643, 0.5611429810523987, 0.6404970288276672, 0.5242909789085388,
        0.5933949947357178, 0.20047900080680847, 0.7795450091362, 0.8979210257530212, 0.3715969920158386, 0.23590999841690063,
        0.9101200103759766, 0.3766449987888336, 0.17268399894237518, 0.8549879789352417, 0.35383298993110657, 0.3792079985141754,
        0.7630789875984192, 0.3770729899406433, 0.5249059796333313, 0.6201940178871155, 0.12245900183916092, 0.7748309969902039,
        0.9542099833488464, 0.18841099739074707, 0.23234599828720093, 0.966795027256012, 0.19089600443840027, 0.16990099847316742,
        0.9100499749183655, 0.17969200015068054, 0.3735229969024658, 0.8383409976959229, 0.16553199291229248, 0.5194069743156433,
        0.6201800107955933, -0.12245599925518036, 0.7748429775238037, 0.5616469979286194, -0.27755099534988403, 0.7794349789619446,
        0.8979210257530212, -0.37159600853919983, 0.23590999841690063, 0.9542099833488464, -0.18841099739074707, 0.23234599828720093,
        0.9101200103759766, -0.3766449987888336, 0.17268399894237518, 0.966795027256012, -0.19089600443840027, 0.16990099847316742,
        0.8549879789352417, -0.35383298993110657, 0.3792079985141754, 0.9100499749183655, -0.17969100177288055, 0.3735229969024658,
        0.8064150214195251, -0.2724289894104004, 0.5248600244522095, 0.8383409976959229, -0.16553199291229248, 0.5194069743156433,
        0.4125959873199463, -0.47094500064849854, 0.7797279953956604, 0.687192976474762, -0.687192976474762, 0.23565199971199036,
        0.6965190172195435, -0.6965190172195435, 0.17240400612354279, 0.6544880270957947, -0.6544870138168335, 0.37853899598121643,
        0.6404970288276672, -0.5611429810523987, 0.5242909789085388, 0.20047900080680847, -0.5933949947357178, 0.7795450091362,
        0.3715969920158386, -0.8979210257530212, 0.23590999841690063, 0.3766449987888336, -0.9101200103759766, 0.17268399894237518,
        0.35383298993110657, -0.8549879789352417, 0.3792079985141754, 0.3770729899406433, -0.7630789875984192, 0.5249059796333313,
        0.12245900183916092, -0.6201940178871155, 0.7748309969902039, 0.18841099739074707, -0.9542099833488464, 0.23234599828720093,
        0.19089600443840027, -0.966795027256012, 0.16990099847316742, 0.17969200015068054, -0.9100499749183655, 0.3735229969024658,
        0.16553199291229248, -0.8383409976959229, 0.5194069743156433, -0.12245599925518036, -0.6201800107955933, 0.7748429775238037,
        -0.27755099534988403, -0.5616469979286194, 0.7794349789619446, -0.37159600853919983, -0.8979210257530212, 0.23590999841690063,
        -0.18841099739074707, -0.9542099833488464, 0.23234599828720093, -0.3766449987888336, -0.9101200103759766, 0.17268399894237518,
        -0.19089600443840027, -0.966795027256012, 0.16990099847316742, -0.35383298993110657, -0.8549879789352417, 0.3792079985141754,
        -0.17969100177288055, -0.9100499749183655, 0.3735229969024658, -0.2724289894104004, -0.8064150214195251, 0.5248600244522095,
        -0.16553199291229248, -0.8383409976959229, 0.5194069743156433, -0.47094500064849854, -0.4125959873199463, 0.7797279953956604,
        -0.687192976474762, -0.687192976474762, 0.23565199971199036, -0.6965190172195435, -0.6965190172195435, 0.17240400612354279,
        -0.6544870138168335, -0.6544880270957947, 0.37853899598121643, -0.5611429810523987, -0.6404970288276672, 0.5242909789085388,
        -0.5933949947357178, -0.20047900080680847, 0.7795450091362, -0.8979210257530212, -0.3715969920158386, 0.23590999841690063,
        -0.9101200103759766, -0.3766449987888336, 0.17268399894237518, -0.8549879789352417, -0.35383298993110657, 0.3792079985141754,
        -0.7630789875984192, -0.3770729899406433, 0.5249059796333313, -0.6201940178871155, -0.12245900183916092, 0.7748309969902039,
        -0.9542099833488464, -0.18841099739074707, 0.23234599828720093, -0.966795027256012, -0.19089600443840027, 0.16990099847316742,
        -0.9100499749183655, -0.17969200015068054, 0.3735229969024658, -0.8383409976959229, -0.16553199291229248, 0.5194069743156433 };


float  teapotTexCoords[] = { 2, 2, 0, 1.75, 2, 0, 1.75, 1.975000023841858,
        0, 2, 1.975000023841858, 0, 1.75, 1.9500000476837158, 0, 2,
        1.9500000476837158, 0, 1.75, 1.9249999523162842, 0, 2, 1.9249999523162842, 0,
        1.75, 1.899999976158142, 0, 2, 1.899999976158142, 0, 1.5, 2,
        0, 1.5, 1.975000023841858, 0, 1.5, 1.9500000476837158, 0, 1.5,
        1.9249999523162842, 0, 1.5, 1.899999976158142, 0, 1.25, 2, 0,
        1.25, 1.975000023841858, 0, 1.25, 1.9500000476837158, 0, 1.25, 1.9249999523162842,
        0, 1.25, 1.899999976158142, 0, 1, 2, 0, 1,
        1.975000023841858, 0, 1, 1.9500000476837158, 0, 1, 1.9249999523162842, 0,
        1, 1.899999976158142, 0, 1, 2, 0, 0.75, 2,
        0, 0.75, 1.975000023841858, 0, 1, 1.975000023841858, 0, 0.75,
        1.9500000476837158, 0, 1, 1.9500000476837158, 0, 0.75, 1.9249999523162842, 0,
        1, 1.9249999523162842, 0, 0.75, 1.899999976158142, 0, 1, 1.899999976158142,
        0, 0.5, 2, 0, 0.5, 1.975000023841858, 0, 0.5,
        1.9500000476837158, 0, 0.5, 1.9249999523162842, 0, 0.5, 1.899999976158142, 0,
        0.25, 2, 0, 0.25, 1.975000023841858, 0, 0.25, 1.9500000476837158,
        0, 0.25, 1.9249999523162842, 0, 0.25, 1.899999976158142, 0, 0,
        2, 0, 0, 1.975000023841858, 0, 0, 1.9500000476837158, 0,
        0, 1.9249999523162842, 0, 0, 1.899999976158142, 0, 2, 2,
        0, 1.75, 2, 0, 1.75, 1.975000023841858, 0, 2,
        1.975000023841858, 0, 1.75, 1.9500000476837158, 0, 2, 1.9500000476837158, 0,
        1.75, 1.9249999523162842, 0, 2, 1.9249999523162842, 0, 1.75, 1.899999976158142,
        0, 2, 1.899999976158142, 0, 1.5, 2, 0, 1.5,
        1.975000023841858, 0, 1.5, 1.9500000476837158, 0, 1.5, 1.9249999523162842, 0,
        1.5, 1.899999976158142, 0, 1.25, 2, 0, 1.25, 1.975000023841858,
        0, 1.25, 1.9500000476837158, 0, 1.25, 1.9249999523162842, 0, 1.25,
        1.899999976158142, 0, 1, 2, 0, 1, 1.975000023841858, 0,
        1, 1.9500000476837158, 0, 1, 1.9249999523162842, 0, 1, 1.899999976158142,
        0, 1, 2, 0, 0.75, 2, 0, 0.75,
        1.975000023841858, 0, 1, 1.975000023841858, 0, 0.75, 1.9500000476837158, 0,
        1, 1.9500000476837158, 0, 0.75, 1.9249999523162842, 0, 1, 1.9249999523162842,
        0, 0.75, 1.899999976158142, 0, 1, 1.899999976158142, 0, 0.5,
        2, 0, 0.5, 1.975000023841858, 0, 0.5, 1.9500000476837158, 0,
        0.5, 1.9249999523162842, 0, 0.5, 1.899999976158142, 0, 0.25, 2,
        0, 0.25, 1.975000023841858, 0, 0.25, 1.9500000476837158, 0, 0.25,
        1.9249999523162842, 0, 0.25, 1.899999976158142, 0, 0, 2, 0,
        0, 1.975000023841858, 0, 0, 1.9500000476837158, 0, 0, 1.9249999523162842,
        0, 0, 1.899999976158142, 0, 2, 1.899999976158142, 0, 1.75,
        1.899999976158142, 0, 1.75, 1.6749999523162842, 0, 2, 1.6749999523162842, 0,
        1.75, 1.4500000476837158, 0, 2, 1.4500000476837158, 0, 1.75, 1.225000023841858,
        0, 2, 1.225000023841858, 0, 1.75, 1, 0, 2,
        1, 0, 1.5, 1.899999976158142, 0, 1.5, 1.6749999523162842, 0,
        1.5, 1.4500000476837158, 0, 1.5, 1.225000023841858, 0, 1.5, 1,
        0, 1.25, 1.899999976158142, 0, 1.25, 1.6749999523162842, 0, 1.25,
        1.4500000476837158, 0, 1.25, 1.225000023841858, 0, 1.25, 1, 0,
        1, 1.899999976158142, 0, 1, 1.6749999523162842, 0, 1, 1.4500000476837158,
        0, 1, 1.225000023841858, 0, 1, 1, 0, 1,
        1.899999976158142, 0, 0.75, 1.899999976158142, 0, 0.75, 1.6749999523162842, 0,
        1, 1.6749999523162842, 0, 0.75, 1.4500000476837158, 0, 1, 1.4500000476837158,
        0, 0.75, 1.225000023841858, 0, 1, 1.225000023841858, 0, 0.75,
        1, 0, 1, 1, 0, 0.5, 1.899999976158142, 0,
        0.5, 1.6749999523162842, 0, 0.5, 1.4500000476837158, 0, 0.5, 1.225000023841858,
        0, 0.5, 1, 0, 0.25, 1.899999976158142, 0, 0.25,
        1.6749999523162842, 0, 0.25, 1.4500000476837158, 0, 0.25, 1.225000023841858, 0,
        0.25, 1, 0, 0, 1.899999976158142, 0, 0, 1.6749999523162842,
        0, 0, 1.4500000476837158, 0, 0, 1.225000023841858, 0, 0,
        1, 0, 2, 1.899999976158142, 0, 1.75, 1.899999976158142, 0,
        1.75, 1.6749999523162842, 0, 2, 1.6749999523162842, 0, 1.75, 1.4500000476837158,
        0, 2, 1.4500000476837158, 0, 1.75, 1.225000023841858, 0, 2,
        1.225000023841858, 0, 1.75, 1, 0, 2, 1, 0,
        1.5, 1.899999976158142, 0, 1.5, 1.6749999523162842, 0, 1.5, 1.4500000476837158,
        0, 1.5, 1.225000023841858, 0, 1.5, 1, 0, 1.25,
        1.899999976158142, 0, 1.25, 1.6749999523162842, 0, 1.25, 1.4500000476837158, 0,
        1.25, 1.225000023841858, 0, 1.25, 1, 0, 1, 1.899999976158142,
        0, 1, 1.6749999523162842, 0, 1, 1.4500000476837158, 0, 1,
        1.225000023841858, 0, 1, 1, 0, 1, 1.899999976158142, 0,
        0.75, 1.899999976158142, 0, 0.75, 1.6749999523162842, 0, 1, 1.6749999523162842,
        0, 0.75, 1.4500000476837158, 0, 1, 1.4500000476837158, 0, 0.75,
        1.225000023841858, 0, 1, 1.225000023841858, 0, 0.75, 1, 0,
        1, 1, 0, 0.5, 1.899999976158142, 0, 0.5, 1.6749999523162842,
        0, 0.5, 1.4500000476837158, 0, 0.5, 1.225000023841858, 0, 0.5,
        1, 0, 0.25, 1.899999976158142, 0, 0.25, 1.6749999523162842, 0,
        0.25, 1.4500000476837158, 0, 0.25, 1.225000023841858, 0, 0.25, 1,
        0, 0, 1.899999976158142, 0, 0, 1.6749999523162842, 0, 0,
        1.4500000476837158, 0, 0, 1.225000023841858, 0, 0, 1, 0,
        2, 1, 0, 1.75, 1, 0, 1.75, 0.8500000238418579,
        0, 2, 0.8500000238418579, 0, 1.75, 0.699999988079071, 0, 2,
        0.699999988079071, 0, 1.75, 0.550000011920929, 0, 2, 0.550000011920929, 0,
        1.75, 0.4000000059604645, 0, 2, 0.4000000059604645, 0, 1.5, 1,
        0, 1.5, 0.8500000238418579, 0, 1.5, 0.699999988079071, 0, 1.5,
        0.550000011920929, 0, 1.5, 0.4000000059604645, 0, 1.25, 1, 0,
        1.25, 0.8500000238418579, 0, 1.25, 0.699999988079071, 0, 1.25, 0.550000011920929,
        0, 1.25, 0.4000000059604645, 0, 1, 1, 0, 1,
        0.8500000238418579, 0, 1, 0.699999988079071, 0, 1, 0.550000011920929, 0,
        1, 0.4000000059604645, 0, 1, 1, 0, 0.75, 1,
        0, 0.75, 0.8500000238418579, 0, 1, 0.8500000238418579, 0, 0.75,
        0.699999988079071, 0, 1, 0.699999988079071, 0, 0.75, 0.550000011920929, 0,
        1, 0.550000011920929, 0, 0.75, 0.4000000059604645, 0, 1, 0.4000000059604645,
        0, 0.5, 1, 0, 0.5, 0.8500000238418579, 0, 0.5,
        0.699999988079071, 0, 0.5, 0.550000011920929, 0, 0.5, 0.4000000059604645, 0,
        0.25, 1, 0, 0.25, 0.8500000238418579, 0, 0.25, 0.699999988079071,
        0, 0.25, 0.550000011920929, 0, 0.25, 0.4000000059604645, 0, 0,
        1, 0, 0, 0.8500000238418579, 0, 0, 0.699999988079071, 0,
        0, 0.550000011920929, 0, 0, 0.4000000059604645, 0, 2, 1,
        0, 1.75, 1, 0, 1.75, 0.8500000238418579, 0, 2,
        0.8500000238418579, 0, 1.75, 0.699999988079071, 0, 2, 0.699999988079071, 0,
        1.75, 0.550000011920929, 0, 2, 0.550000011920929, 0, 1.75, 0.4000000059604645,
        0, 2, 0.4000000059604645, 0, 1.5, 1, 0, 1.5,
        0.8500000238418579, 0, 1.5, 0.699999988079071, 0, 1.5, 0.550000011920929, 0,
        1.5, 0.4000000059604645, 0, 1.25, 1, 0, 1.25, 0.8500000238418579,
        0, 1.25, 0.699999988079071, 0, 1.25, 0.550000011920929, 0, 1.25,
        0.4000000059604645, 0, 1, 1, 0, 1, 0.8500000238418579, 0,
        1, 0.699999988079071, 0, 1, 0.550000011920929, 0, 1, 0.4000000059604645,
        0, 1, 1, 0, 0.75, 1, 0, 0.75,
        0.8500000238418579, 0, 1, 0.8500000238418579, 0, 0.75, 0.699999988079071, 0,
        1, 0.699999988079071, 0, 0.75, 0.550000011920929, 0, 1, 0.550000011920929,
        0, 0.75, 0.4000000059604645, 0, 1, 0.4000000059604645, 0, 0.5,
        1, 0, 0.5, 0.8500000238418579, 0, 0.5, 0.699999988079071, 0,
        0.5, 0.550000011920929, 0, 0.5, 0.4000000059604645, 0, 0.25, 1,
        0, 0.25, 0.8500000238418579, 0, 0.25, 0.699999988079071, 0, 0.25,
        0.550000011920929, 0, 0.25, 0.4000000059604645, 0, 0, 1, 0,
        0, 0.8500000238418579, 0, 0, 0.699999988079071, 0, 0, 0.550000011920929,
        0, 0, 0.4000000059604645, 0, 2, 0.4000000059604645, 0, 1.75,
        0.4000000059604645, 0, 1.75, 0.30000001192092896, 0, 2, 0.30000001192092896, 0,
        1.75, 0.20000000298023224, 0, 2, 0.20000000298023224, 0, 1.75, 0.10000000149011612,
        0, 2, 0.10000000149011612, 0, 1.75, 0, 0, 2,
        0, 0, 1.5, 0.4000000059604645, 0, 1.5, 0.30000001192092896, 0,
        1.5, 0.20000000298023224, 0, 1.5, 0.10000000149011612, 0, 1.5, 0,
        0, 1.25, 0.4000000059604645, 0, 1.25, 0.30000001192092896, 0, 1.25,
        0.20000000298023224, 0, 1.25, 0.10000000149011612, 0, 1.25, 0, 0,
        1, 0.4000000059604645, 0, 1, 0.30000001192092896, 0, 1, 0.20000000298023224,
        0, 1, 0.10000000149011612, 0, 1, 0, 0, 1,
        0.4000000059604645, 0, 0.75, 0.4000000059604645, 0, 0.75, 0.30000001192092896, 0,
        1, 0.30000001192092896, 0, 0.75, 0.20000000298023224, 0, 1, 0.20000000298023224,
        0, 0.75, 0.10000000149011612, 0, 1, 0.10000000149011612, 0, 0.75,
        0, 0, 1, 0, 0, 0.5, 0.4000000059604645, 0,
        0.5, 0.30000001192092896, 0, 0.5, 0.20000000298023224, 0, 0.5, 0.10000000149011612,
        0, 0.5, 0, 0, 0.25, 0.4000000059604645, 0, 0.25,
        0.30000001192092896, 0, 0.25, 0.20000000298023224, 0, 0.25, 0.10000000149011612, 0,
        0.25, 0, 0, 0, 0.4000000059604645, 0, 0, 0.30000001192092896,
        0, 0, 0.20000000298023224, 0, 0, 0.10000000149011612, 0, 0,
        0, 0, 2, 0.4000000059604645, 0, 1.75, 0.4000000059604645, 0,
        1.75, 0.30000001192092896, 0, 2, 0.30000001192092896, 0, 1.75, 0.20000000298023224,
        0, 2, 0.20000000298023224, 0, 1.75, 0.10000000149011612, 0, 2,
        0.10000000149011612, 0, 1.75, 0, 0, 2, 0, 0,
        1.5, 0.4000000059604645, 0, 1.5, 0.30000001192092896, 0, 1.5, 0.20000000298023224,
        0, 1.5, 0.10000000149011612, 0, 1.5, 0, 0, 1.25,
        0.4000000059604645, 0, 1.25, 0.30000001192092896, 0, 1.25, 0.20000000298023224, 0,
        1.25, 0.10000000149011612, 0, 1.25, 0, 0, 1, 0.4000000059604645,
        0, 1, 0.30000001192092896, 0, 1, 0.20000000298023224, 0, 1,
        0.10000000149011612, 0, 1, 0, 0, 1, 0.4000000059604645, 0,
        0.75, 0.4000000059604645, 0, 0.75, 0.30000001192092896, 0, 1, 0.30000001192092896,
        0, 0.75, 0.20000000298023224, 0, 1, 0.20000000298023224, 0, 0.75,
        0.10000000149011612, 0, 1, 0.10000000149011612, 0, 0.75, 0, 0,
        1, 0, 0, 0.5, 0.4000000059604645, 0, 0.5, 0.30000001192092896,
        0, 0.5, 0.20000000298023224, 0, 0.5, 0.10000000149011612, 0, 0.5,
        0, 0, 0.25, 0.4000000059604645, 0, 0.25, 0.30000001192092896, 0,
        0.25, 0.20000000298023224, 0, 0.25, 0.10000000149011612, 0, 0.25, 0,
        0, 0, 0.4000000059604645, 0, 0, 0.30000001192092896, 0, 0,
        0.20000000298023224, 0, 0, 0.10000000149011612, 0, 0, 0, 0,
        1, 1, 0, 0.875, 1, 0, 0.875, 0.875,
        0, 1, 0.875, 0, 0.875, 0.75, 0, 1,
        0.75, 0, 0.875, 0.625, 0, 1, 0.625, 0,
        0.875, 0.5, 0, 1, 0.5, 0, 0.75, 1,
        0, 0.75, 0.875, 0, 0.75, 0.75, 0, 0.75,
        0.625, 0, 0.75, 0.5, 0, 0.625, 1, 0,
        0.625, 0.875, 0, 0.625, 0.75, 0, 0.625, 0.625,
        0, 0.625, 0.5, 0, 0.5, 1, 0, 0.5,
        0.875, 0, 0.5, 0.75, 0, 0.5, 0.625, 0,
        0.5, 0.5, 0, 0.5, 1, 0, 0.375, 1,
        0, 0.375, 0.875, 0, 0.5, 0.875, 0, 0.375,
        0.75, 0, 0.5, 0.75, 0, 0.375, 0.625, 0,
        0.5, 0.625, 0, 0.375, 0.5, 0, 0.5, 0.5,
        0, 0.25, 1, 0, 0.25, 0.875, 0, 0.25,
        0.75, 0, 0.25, 0.625, 0, 0.25, 0.5, 0,
        0.125, 1, 0, 0.125, 0.875, 0, 0.125, 0.75,
        0, 0.125, 0.625, 0, 0.125, 0.5, 0, 0,
        1, 0, 0, 0.875, 0, 0, 0.75, 0,
        0, 0.625, 0, 0, 0.5, 0, 1, 0.5,
        0, 0.875, 0.5, 0, 0.875, 0.375, 0, 1,
        0.375, 0, 0.875, 0.25, 0, 1, 0.25, 0,
        0.875, 0.125, 0, 1, 0.125, 0, 0.875, 0,
        0, 1, 0, 0, 0.75, 0.5, 0, 0.75,
        0.375, 0, 0.75, 0.25, 0, 0.75, 0.125, 0,
        0.75, 0, 0, 0.625, 0.5, 0, 0.625, 0.375,
        0, 0.625, 0.25, 0, 0.625, 0.125, 0, 0.625,
        0, 0, 0.5, 0.5, 0, 0.5, 0.375, 0,
        0.5, 0.25, 0, 0.5, 0.125, 0, 0.5, 0,
        0, 0.5, 0.5, 0, 0.375, 0.5, 0, 0.375,
        0.375, 0, 0.5, 0.375, 0, 0.375, 0.25, 0,
        0.5, 0.25, 0, 0.375, 0.125, 0, 0.5, 0.125,
        0, 0.375, 0, 0, 0.5, 0, 0, 0.25,
        0.5, 0, 0.25, 0.375, 0, 0.25, 0.25, 0,
        0.25, 0.125, 0, 0.25, 0, 0, 0.125, 0.5,
        0, 0.125, 0.375, 0, 0.125, 0.25, 0, 0.125,
        0.125, 0, 0.125, 0, 0, 0, 0.5, 0,
        0, 0.375, 0, 0, 0.25, 0, 0, 0.125,
        0, 0, 0, 0, 0.5, 0, 0, 0.625,
        0, 0, 0.625, 0.22499999403953552, 0, 0.5, 0.22499999403953552, 0,
        0.625, 0.44999998807907104, 0, 0.5, 0.44999998807907104, 0, 0.625, 0.675000011920929,
        0, 0.5, 0.675000011920929, 0, 0.625, 0.8999999761581421, 0, 0.5,
        0.8999999761581421, 0, 0.75, 0, 0, 0.75, 0.22499999403953552, 0,
        0.75, 0.44999998807907104, 0, 0.75, 0.675000011920929, 0, 0.75, 0.8999999761581421,
        0, 0.875, 0, 0, 0.875, 0.22499999403953552, 0, 0.875,
        0.44999998807907104, 0, 0.875, 0.675000011920929, 0, 0.875, 0.8999999761581421, 0,
        1, 0, 0, 1, 0.22499999403953552, 0, 1, 0.44999998807907104,
        0, 1, 0.675000011920929, 0, 1, 0.8999999761581421, 0, 0,
        0, 0, 0.125, 0, 0, 0.125, 0.22499999403953552, 0,
        0, 0.22499999403953552, 0, 0.125, 0.44999998807907104, 0, 0, 0.44999998807907104,
        0, 0.125, 0.675000011920929, 0, 0, 0.675000011920929, 0, 0.125,
        0.8999999761581421, 0, 0, 0.8999999761581421, 0, 0.25, 0, 0,
        0.25, 0.22499999403953552, 0, 0.25, 0.44999998807907104, 0, 0.25, 0.675000011920929,
        0, 0.25, 0.8999999761581421, 0, 0.375, 0, 0, 0.375,
        0.22499999403953552, 0, 0.375, 0.44999998807907104, 0, 0.375, 0.675000011920929, 0,
        0.375, 0.8999999761581421, 0, 0.5, 0, 0, 0.5, 0.22499999403953552,
        0, 0.5, 0.44999998807907104, 0, 0.5, 0.675000011920929, 0, 0.5,
        0.8999999761581421, 0, 0.5, 0.8999999761581421, 0, 0.625, 0.8999999761581421, 0,
        0.625, 0.925000011920929, 0, 0.5, 0.925000011920929, 0, 0.625, 0.949999988079071,
        0, 0.5, 0.949999988079071, 0, 0.625, 0.9750000238418579, 0, 0.5,
        0.9750000238418579, 0, 0.625, 1, 0, 0.5, 1, 0,
        0.75, 0.8999999761581421, 0, 0.75, 0.925000011920929, 0, 0.75, 0.949999988079071,
        0, 0.75, 0.9750000238418579, 0, 0.75, 1, 0, 0.875,
        0.8999999761581421, 0, 0.875, 0.925000011920929, 0, 0.875, 0.949999988079071, 0,
        0.875, 0.9750000238418579, 0, 0.875, 1, 0, 1, 0.8999999761581421,
        0, 1, 0.925000011920929, 0, 1, 0.949999988079071, 0, 1,
        0.9750000238418579, 0, 1, 1, 0, 0, 0.8999999761581421, 0,
        0.125, 0.8999999761581421, 0, 0.125, 0.925000011920929, 0, 0, 0.925000011920929,
        0, 0.125, 0.949999988079071, 0, 0, 0.949999988079071, 0, 0.125,
        0.9750000238418579, 0, 0, 0.9750000238418579, 0, 0.125, 1, 0,
        0, 1, 0, 0.25, 0.8999999761581421, 0, 0.25, 0.925000011920929,
        0, 0.25, 0.949999988079071, 0, 0.25, 0.9750000238418579, 0, 0.25,
        1, 0, 0.375, 0.8999999761581421, 0, 0.375, 0.925000011920929, 0,
        0.375, 0.949999988079071, 0, 0.375, 0.9750000238418579, 0, 0.375, 1,
        0, 0.5, 0.8999999761581421, 0, 0.5, 0.925000011920929, 0, 0.5,
        0.949999988079071, 0, 0.5, 0.9750000238418579, 0, 0.5, 1, 0,
        1, 1, 0, 0.875, 1, 0, 0.875, 0.75,
        0, 1, 0.75, 0, 0.875, 0.5, 0, 1,
        0.5, 0, 0.875, 0.25, 0, 1, 0.25, 0,
        0.875, 0, 0, 1, 0, 0, 0.75, 1,
        0, 0.75, 0.75, 0, 0.75, 0.5, 0, 0.75,
        0.25, 0, 0.75, 0, 0, 0.625, 1, 0,
        0.625, 0.75, 0, 0.625, 0.5, 0, 0.625, 0.25,
        0, 0.625, 0, 0, 0.5, 1, 0, 0.5,
        0.75, 0, 0.5, 0.5, 0, 0.5, 0.25, 0,
        0.5, 0, 0, 0.5, 1, 0, 0.375, 1,
        0, 0.375, 0.75, 0, 0.5, 0.75, 0, 0.375,
        0.5, 0, 0.5, 0.5, 0, 0.375, 0.25, 0,
        0.5, 0.25, 0, 0.375, 0, 0, 0.5, 0,
        0, 0.25, 1, 0, 0.25, 0.75, 0, 0.25,
        0.5, 0, 0.25, 0.25, 0, 0.25, 0, 0,
        0.125, 1, 0, 0.125, 0.75, 0, 0.125, 0.5,
        0, 0.125, 0.25, 0, 0.125, 0, 0, 0,
        1, 0, 0, 0.75, 0, 0, 0.5, 0,
        0, 0.25, 0, 0, 0, 0, 1, 1,
        0, 0.875, 1, 0, 0.875, 0.75, 0, 1,
        0.75, 0, 0.875, 0.5, 0, 1, 0.5, 0,
        0.875, 0.25, 0, 1, 0.25, 0, 0.875, 0,
        0, 1, 0, 0, 0.75, 1, 0, 0.75,
        0.75, 0, 0.75, 0.5, 0, 0.75, 0.25, 0,
        0.75, 0, 0, 0.625, 1, 0, 0.625, 0.75,
        0, 0.625, 0.5, 0, 0.625, 0.25, 0, 0.625,
        0, 0, 0.5, 1, 0, 0.5, 0.75, 0,
        0.5, 0.5, 0, 0.5, 0.25, 0, 0.5, 0,
        0, 0.5, 1, 0, 0.375, 1, 0, 0.375,
        0.75, 0, 0.5, 0.75, 0, 0.375, 0.5, 0,
        0.5, 0.5, 0, 0.375, 0.25, 0, 0.5, 0.25,
        0, 0.375, 0, 0, 0.5, 0, 0, 0.25,
        1, 0, 0.25, 0.75, 0, 0.25, 0.5, 0,
        0.25, 0.25, 0, 0.25, 0, 0, 0.125, 1,
        0, 0.125, 0.75, 0, 0.125, 0.5, 0, 0.125,
        0.25, 0, 0.125, 0, 0, 0, 1, 0,
        0, 0.75, 0, 0, 0.5, 0, 0, 0.25,
        0, 0, 0, 0, 1, 1, 0, 0.875,
        1, 0, 0.875, 0.75, 0, 1, 0.75, 0,
        0.875, 0.5, 0, 1, 0.5, 0, 0.875, 0.25,
        0, 1, 0.25, 0, 0.875, 0, 0, 1,
        0, 0, 0.75, 1, 0, 0.75, 0.75, 0,
        0.75, 0.5, 0, 0.75, 0.25, 0, 0.75, 0,
        0, 0.625, 1, 0, 0.625, 0.75, 0, 0.625,
        0.5, 0, 0.625, 0.25, 0, 0.625, 0, 0,
        0.5, 1, 0, 0.5, 0.75, 0, 0.5, 0.5,
        0, 0.5, 0.25, 0, 0.5, 0, 0, 0.5,
        1, 0, 0.375, 1, 0, 0.375, 0.75, 0,
        0.5, 0.75, 0, 0.375, 0.5, 0, 0.5, 0.5,
        0, 0.375, 0.25, 0, 0.5, 0.25, 0, 0.375,
        0, 0, 0.5, 0, 0, 0.25, 1, 0,
        0.25, 0.75, 0, 0.25, 0.5, 0, 0.25, 0.25,
        0, 0.25, 0, 0, 0.125, 1, 0, 0.125,
        0.75, 0, 0.125, 0.5, 0, 0.125, 0.25, 0,
        0.125, 0, 0, 0, 1, 0, 0, 0.75,
        0, 0, 0.5, 0, 0, 0.25, 0, 0,
        0, 0, 1, 1, 0, 0.875, 1, 0,
        0.875, 0.75, 0, 1, 0.75, 0, 0.875, 0.5,
        0, 1, 0.5, 0, 0.875, 0.25, 0, 1,
        0.25, 0, 0.875, 0, 0, 1, 0, 0,
        0.75, 1, 0, 0.75, 0.75, 0, 0.75, 0.5,
        0, 0.75, 0.25, 0, 0.75, 0, 0, 0.625,
        1, 0, 0.625, 0.75, 0, 0.625, 0.5, 0,
        0.625, 0.25, 0, 0.625, 0, 0, 0.5, 1,
        0, 0.5, 0.75, 0, 0.5, 0.5, 0, 0.5,
        0.25, 0, 0.5, 0, 0, 0.5, 1, 0,
        0.375, 1, 0, 0.375, 0.75, 0, 0.5, 0.75,
        0, 0.375, 0.5, 0, 0.5, 0.5, 0, 0.375,
        0.25, 0, 0.5, 0.25, 0, 0.375, 0, 0,
        0.5, 0, 0, 0.25, 1, 0, 0.25, 0.75,
        0, 0.25, 0.5, 0, 0.25, 0.25, 0, 0.25,
        0, 0, 0.125, 1, 0, 0.125, 0.75, 0,
        0.125, 0.5, 0, 0.125, 0.25, 0, 0.125, 0,
        0, 0, 1, 0, 0, 0.75, 0, 0,
        0.5, 0, 0, 0.25, 0, 0, 0, 0 };

uint16_t  teapotIndices[] = { 0, 1, 2, 2, 3, 0, 3, 2, 4, 4, 5, 3, 5, 4, 6, 6, 7, 5, 7, 6, 8, 8, 9, 7,
        1, 10, 11, 11, 2, 1, 2, 11, 12, 12, 4, 2, 4, 12, 13, 13, 6, 4, 6, 13, 14, 14, 8, 6,
        10, 15, 16, 16, 11, 10, 11, 16, 17, 17, 12, 11, 12, 17, 18, 18, 13, 12, 13, 18, 19, 19, 14, 13,
        15, 20, 21, 21, 16, 15, 16, 21, 22, 22, 17, 16, 17, 22, 23, 23, 18, 17, 18, 23, 24, 24, 19, 18,
        25, 26, 27, 27, 28, 25, 28, 27, 29, 29, 30, 28, 30, 29, 31, 31, 32, 30, 32, 31, 33, 33, 34, 32,
        26, 35, 36, 36, 27, 26, 27, 36, 37, 37, 29, 27, 29, 37, 38, 38, 31, 29, 31, 38, 39, 39, 33, 31,
        35, 40, 41, 41, 36, 35, 36, 41, 42, 42, 37, 36, 37, 42, 43, 43, 38, 37, 38, 43, 44, 44, 39, 38,
        40, 45, 46, 46, 41, 40, 41, 46, 47, 47, 42, 41, 42, 47, 48, 48, 43, 42, 43, 48, 49, 49, 44, 43,
        50, 51, 52, 52, 53, 50, 53, 52, 54, 54, 55, 53, 55, 54, 56, 56, 57, 55, 57, 56, 58, 58, 59, 57,
        51, 60, 61, 61, 52, 51, 52, 61, 62, 62, 54, 52, 54, 62, 63, 63, 56, 54, 56, 63, 64, 64, 58, 56,
        60, 65, 66, 66, 61, 60, 61, 66, 67, 67, 62, 61, 62, 67, 68, 68, 63, 62, 63, 68, 69, 69, 64, 63,
        65, 70, 71, 71, 66, 65, 66, 71, 72, 72, 67, 66, 67, 72, 73, 73, 68, 67, 68, 73, 74, 74, 69, 68,
        75, 76, 77, 77, 78, 75, 78, 77, 79, 79, 80, 78, 80, 79, 81, 81, 82, 80, 82, 81, 83, 83, 84, 82,
        76, 85, 86, 86, 77, 76, 77, 86, 87, 87, 79, 77, 79, 87, 88, 88, 81, 79, 81, 88, 89, 89, 83, 81,
        85, 90, 91, 91, 86, 85, 86, 91, 92, 92, 87, 86, 87, 92, 93, 93, 88, 87, 88, 93, 94, 94, 89, 88,
        90, 95, 96, 96, 91, 90, 91, 96, 97, 97, 92, 91, 92, 97, 98, 98, 93, 92, 93, 98, 99, 99, 94, 93,
        100, 101, 102, 102, 103, 100, 103, 102, 104, 104, 105, 103, 105, 104, 106, 106, 107, 105, 107, 106, 108, 108, 109, 107,
        101, 110, 111, 111, 102, 101, 102, 111, 112, 112, 104, 102, 104, 112, 113, 113, 106, 104, 106, 113, 114, 114, 108, 106,
        110, 115, 116, 116, 111, 110, 111, 116, 117, 117, 112, 111, 112, 117, 118, 118, 113, 112, 113, 118, 119, 119, 114, 113,
        115, 120, 121, 121, 116, 115, 116, 121, 122, 122, 117, 116, 117, 122, 123, 123, 118, 117, 118, 123, 124, 124, 119, 118,
        125, 126, 127, 127, 128, 125, 128, 127, 129, 129, 130, 128, 130, 129, 131, 131, 132, 130, 132, 131, 133, 133, 134, 132,
        126, 135, 136, 136, 127, 126, 127, 136, 137, 137, 129, 127, 129, 137, 138, 138, 131, 129, 131, 138, 139, 139, 133, 131,
        135, 140, 141, 141, 136, 135, 136, 141, 142, 142, 137, 136, 137, 142, 143, 143, 138, 137, 138, 143, 144, 144, 139, 138,
        140, 145, 146, 146, 141, 140, 141, 146, 147, 147, 142, 141, 142, 147, 148, 148, 143, 142, 143, 148, 149, 149, 144, 143,
        150, 151, 152, 152, 153, 150, 153, 152, 154, 154, 155, 153, 155, 154, 156, 156, 157, 155, 157, 156, 158, 158, 159, 157,
        151, 160, 161, 161, 152, 151, 152, 161, 162, 162, 154, 152, 154, 162, 163, 163, 156, 154, 156, 163, 164, 164, 158, 156,
        160, 165, 166, 166, 161, 160, 161, 166, 167, 167, 162, 161, 162, 167, 168, 168, 163, 162, 163, 168, 169, 169, 164, 163,
        165, 170, 171, 171, 166, 165, 166, 171, 172, 172, 167, 166, 167, 172, 173, 173, 168, 167, 168, 173, 174, 174, 169, 168,
        175, 176, 177, 177, 178, 175, 178, 177, 179, 179, 180, 178, 180, 179, 181, 181, 182, 180, 182, 181, 183, 183, 184, 182,
        176, 185, 186, 186, 177, 176, 177, 186, 187, 187, 179, 177, 179, 187, 188, 188, 181, 179, 181, 188, 189, 189, 183, 181,
        185, 190, 191, 191, 186, 185, 186, 191, 192, 192, 187, 186, 187, 192, 193, 193, 188, 187, 188, 193, 194, 194, 189, 188,
        190, 195, 196, 196, 191, 190, 191, 196, 197, 197, 192, 191, 192, 197, 198, 198, 193, 192, 193, 198, 199, 199, 194, 193,
        200, 201, 202, 202, 203, 200, 203, 202, 204, 204, 205, 203, 205, 204, 206, 206, 207, 205, 207, 206, 208, 208, 209, 207,
        201, 210, 211, 211, 202, 201, 202, 211, 212, 212, 204, 202, 204, 212, 213, 213, 206, 204, 206, 213, 214, 214, 208, 206,
        210, 215, 216, 216, 211, 210, 211, 216, 217, 217, 212, 211, 212, 217, 218, 218, 213, 212, 213, 218, 219, 219, 214, 213,
        215, 220, 221, 221, 216, 215, 216, 221, 222, 222, 217, 216, 217, 222, 223, 223, 218, 217, 218, 223, 224, 224, 219, 218,
        225, 226, 227, 227, 228, 225, 228, 227, 229, 229, 230, 228, 230, 229, 231, 231, 232, 230, 232, 231, 233, 233, 234, 232,
        226, 235, 236, 236, 227, 226, 227, 236, 237, 237, 229, 227, 229, 237, 238, 238, 231, 229, 231, 238, 239, 239, 233, 231,
        235, 240, 241, 241, 236, 235, 236, 241, 242, 242, 237, 236, 237, 242, 243, 243, 238, 237, 238, 243, 244, 244, 239, 238,
        240, 245, 246, 246, 241, 240, 241, 246, 247, 247, 242, 241, 242, 247, 248, 248, 243, 242, 243, 248, 249, 249, 244, 243,
        250, 251, 252, 252, 253, 250, 253, 252, 254, 254, 255, 253, 255, 254, 256, 256, 257, 255, 257, 256, 258, 258, 259, 257,
        251, 260, 261, 261, 252, 251, 252, 261, 262, 262, 254, 252, 254, 262, 263, 263, 256, 254, 256, 263, 264, 264, 258, 256,
        260, 265, 266, 266, 261, 260, 261, 266, 267, 267, 262, 261, 262, 267, 268, 268, 263, 262, 263, 268, 269, 269, 264, 263,
        265, 270, 271, 271, 266, 265, 266, 271, 272, 272, 267, 266, 267, 272, 273, 273, 268, 267, 268, 273, 274, 274, 269, 268,
        275, 276, 277, 277, 278, 275, 278, 277, 279, 279, 280, 278, 280, 279, 281, 281, 282, 280, 282, 281, 283, 283, 284, 282,
        276, 285, 286, 286, 277, 276, 277, 286, 287, 287, 279, 277, 279, 287, 288, 288, 281, 279, 281, 288, 289, 289, 283, 281,
        285, 290, 291, 291, 286, 285, 286, 291, 292, 292, 287, 286, 287, 292, 293, 293, 288, 287, 288, 293, 294, 294, 289, 288,
        290, 295, 296, 296, 291, 290, 291, 296, 297, 297, 292, 291, 292, 297, 298, 298, 293, 292, 293, 298, 299, 299, 294, 293,
        300, 301, 302, 302, 303, 300, 303, 302, 304, 304, 305, 303, 305, 304, 306, 306, 307, 305, 307, 306, 308, 308, 309, 307,
        301, 310, 311, 311, 302, 301, 302, 311, 312, 312, 304, 302, 304, 312, 313, 313, 306, 304, 306, 313, 314, 314, 308, 306,
        310, 315, 316, 316, 311, 310, 311, 316, 317, 317, 312, 311, 312, 317, 318, 318, 313, 312, 313, 318, 319, 319, 314, 313,
        315, 320, 321, 321, 316, 315, 316, 321, 322, 322, 317, 316, 317, 322, 323, 323, 318, 317, 318, 323, 324, 324, 319, 318,
        325, 326, 327, 327, 328, 325, 328, 327, 329, 329, 330, 328, 330, 329, 331, 331, 332, 330, 332, 331, 333, 333, 334, 332,
        326, 335, 336, 336, 327, 326, 327, 336, 337, 337, 329, 327, 329, 337, 338, 338, 331, 329, 331, 338, 339, 339, 333, 331,
        335, 340, 341, 341, 336, 335, 336, 341, 342, 342, 337, 336, 337, 342, 343, 343, 338, 337, 338, 343, 344, 344, 339, 338,
        340, 345, 346, 346, 341, 340, 341, 346, 347, 347, 342, 341, 342, 347, 348, 348, 343, 342, 343, 348, 349, 349, 344, 343,
        350, 351, 352, 352, 353, 350, 353, 352, 354, 354, 355, 353, 355, 354, 356, 356, 357, 355, 357, 356, 358, 358, 359, 357,
        351, 360, 361, 361, 352, 351, 352, 361, 362, 362, 354, 352, 354, 362, 363, 363, 356, 354, 356, 363, 364, 364, 358, 356,
        360, 365, 366, 366, 361, 360, 361, 366, 367, 367, 362, 361, 362, 367, 368, 368, 363, 362, 363, 368, 369, 369, 364, 363,
        365, 370, 371, 371, 366, 365, 366, 371, 372, 372, 367, 366, 367, 372, 373, 373, 368, 367, 368, 373, 374, 374, 369, 368,
        375, 376, 377, 377, 378, 375, 378, 377, 379, 379, 380, 378, 380, 379, 381, 381, 382, 380, 382, 381, 383, 383, 384, 382,
        376, 385, 386, 386, 377, 376, 377, 386, 387, 387, 379, 377, 379, 387, 388, 388, 381, 379, 381, 388, 389, 389, 383, 381,
        385, 390, 391, 391, 386, 385, 386, 391, 392, 392, 387, 386, 387, 392, 393, 393, 388, 387, 388, 393, 394, 394, 389, 388,
        390, 395, 396, 396, 391, 390, 391, 396, 397, 397, 392, 391, 392, 397, 398, 398, 393, 392, 393, 398, 399, 399, 394, 393,
        400, 401, 402, 402, 403, 400, 403, 402, 404, 404, 405, 403, 405, 404, 406, 406, 407, 405, 407, 406, 408, 408, 409, 407,
        401, 410, 411, 411, 402, 401, 402, 411, 412, 412, 404, 402, 404, 412, 413, 413, 406, 404, 406, 413, 414, 414, 408, 406,
        410, 415, 416, 416, 411, 410, 411, 416, 417, 417, 412, 411, 412, 417, 418, 418, 413, 412, 413, 418, 419, 419, 414, 413,
        415, 420, 421, 421, 416, 415, 416, 421, 422, 422, 417, 416, 417, 422, 423, 423, 418, 417, 418, 423, 424, 424, 419, 418,
        425, 426, 427, 427, 428, 425, 428, 427, 429, 429, 430, 428, 430, 429, 431, 431, 432, 430, 432, 431, 433, 433, 434, 432,
        426, 435, 436, 436, 427, 426, 427, 436, 437, 437, 429, 427, 429, 437, 438, 438, 431, 429, 431, 438, 439, 439, 433, 431,
        435, 440, 441, 441, 436, 435, 436, 441, 442, 442, 437, 436, 437, 442, 443, 443, 438, 437, 438, 443, 444, 444, 439, 438,
        440, 445, 446, 446, 441, 440, 441, 446, 447, 447, 442, 441, 442, 447, 448, 448, 443, 442, 443, 448, 449, 449, 444, 443,
        450, 451, 452, 452, 453, 450, 453, 452, 454, 454, 455, 453, 455, 454, 456, 456, 457, 455, 457, 456, 458, 458, 459, 457,
        451, 460, 461, 461, 452, 451, 452, 461, 462, 462, 454, 452, 454, 462, 463, 463, 456, 454, 456, 463, 464, 464, 458, 456,
        460, 465, 466, 466, 461, 460, 461, 466, 467, 467, 462, 461, 462, 467, 468, 468, 463, 462, 463, 468, 469, 469, 464, 463,
        465, 470, 471, 471, 466, 465, 466, 471, 472, 472, 467, 466, 467, 472, 473, 473, 468, 467, 468, 473, 474, 474, 469, 468,
        475, 476, 477, 477, 478, 475, 478, 477, 479, 479, 480, 478, 480, 479, 481, 481, 482, 480, 482, 481, 483, 483, 484, 482,
        476, 485, 486, 486, 477, 476, 477, 486, 487, 487, 479, 477, 479, 487, 488, 488, 481, 479, 481, 488, 489, 489, 483, 481,
        485, 490, 491, 491, 486, 485, 486, 491, 492, 492, 487, 486, 487, 492, 493, 493, 488, 487, 488, 493, 494, 494, 489, 488,
        490, 495, 496, 496, 491, 490, 491, 496, 497, 497, 492, 491, 492, 497, 498, 498, 493, 492, 493, 498, 499, 499, 494, 493,
        500, 501, 502, 502, 503, 500, 503, 502, 504, 504, 505, 503, 505, 504, 506, 506, 507, 505, 507, 506, 508, 508, 509, 507,
        501, 510, 511, 511, 502, 501, 502, 511, 512, 512, 504, 502, 504, 512, 513, 513, 506, 504, 506, 513, 514, 514, 508, 506,
        510, 515, 516, 516, 511, 510, 511, 516, 517, 517, 512, 511, 512, 517, 518, 518, 513, 512, 513, 518, 519, 519, 514, 513,
        515, 520, 521, 521, 516, 515, 516, 521, 522, 522, 517, 516, 517, 522, 523, 523, 518, 517, 518, 523, 524, 524, 519, 518,
        525, 526, 527, 527, 528, 525, 528, 527, 529, 529, 530, 528, 530, 529, 531, 531, 532, 530, 532, 531, 533, 533, 534, 532,
        526, 535, 536, 536, 527, 526, 527, 536, 537, 537, 529, 527, 529, 537, 538, 538, 531, 529, 531, 538, 539, 539, 533, 531,
        535, 540, 541, 541, 536, 535, 536, 541, 542, 542, 537, 536, 537, 542, 543, 543, 538, 537, 538, 543, 544, 544, 539, 538,
        540, 545, 546, 546, 541, 540, 541, 546, 547, 547, 542, 541, 542, 547, 548, 548, 543, 542, 543, 548, 549, 549, 544, 543,
        550, 551, 552, 552, 553, 550, 553, 552, 554, 554, 555, 553, 555, 554, 556, 556, 557, 555, 557, 556, 558, 558, 559, 557,
        551, 560, 561, 561, 552, 551, 552, 561, 562, 562, 554, 552, 554, 562, 563, 563, 556, 554, 556, 563, 564, 564, 558, 556,
        560, 565, 566, 566, 561, 560, 561, 566, 567, 567, 562, 561, 562, 567, 568, 568, 563, 562, 563, 568, 569, 569, 564, 563,
        565, 570, 571, 571, 566, 565, 566, 571, 572, 572, 567, 566, 567, 572, 573, 573, 568, 567, 568, 573, 574, 574, 569, 568,
        575, 576, 577, 577, 578, 575, 578, 577, 579, 579, 580, 578, 580, 579, 581, 581, 582, 580, 582, 581, 583, 583, 584, 582,
        576, 585, 586, 586, 577, 576, 577, 586, 587, 587, 579, 577, 579, 587, 588, 588, 581, 579, 581, 588, 589, 589, 583, 581,
        585, 590, 591, 591, 586, 585, 586, 591, 592, 592, 587, 586, 587, 592, 593, 593, 588, 587, 588, 593, 594, 594, 589, 588,
        590, 595, 596, 596, 591, 590, 591, 596, 597, 597, 592, 591, 592, 597, 598, 598, 593, 592, 593, 598, 599, 599, 594, 593,
        600, 601, 602, 602, 603, 600, 603, 602, 604, 604, 605, 603, 605, 604, 606, 606, 607, 605, 607, 606, 608, 608, 609, 607,
        601, 610, 611, 611, 602, 601, 602, 611, 612, 612, 604, 602, 604, 612, 613, 613, 606, 604, 606, 613, 614, 614, 608, 606,
        610, 615, 616, 616, 611, 610, 611, 616, 617, 617, 612, 611, 612, 617, 618, 618, 613, 612, 613, 618, 619, 619, 614, 613,
        615, 620, 621, 621, 616, 615, 616, 621, 622, 622, 617, 616, 617, 622, 623, 623, 618, 617, 618, 623, 624, 624, 619, 618,
        625, 626, 627, 627, 628, 625, 628, 627, 629, 629, 630, 628, 630, 629, 631, 631, 632, 630, 632, 631, 633, 633, 634, 632,
        626, 635, 636, 636, 627, 626, 627, 636, 637, 637, 629, 627, 629, 637, 638, 638, 631, 629, 631, 638, 639, 639, 633, 631,
        635, 640, 641, 641, 636, 635, 636, 641, 642, 642, 637, 636, 637, 642, 643, 643, 638, 637, 638, 643, 644, 644, 639, 638,
        640, 645, 646, 646, 641, 640, 641, 646, 647, 647, 642, 641, 642, 647, 648, 648, 643, 642, 643, 648, 649, 649, 644, 643,
        650, 651, 652, 652, 653, 650, 653, 652, 654, 654, 655, 653, 655, 654, 656, 656, 657, 655, 657, 656, 658, 658, 659, 657,
        651, 660, 661, 661, 652, 651, 652, 661, 662, 662, 654, 652, 654, 662, 663, 663, 656, 654, 656, 663, 664, 664, 658, 656,
        660, 665, 666, 666, 661, 660, 661, 666, 667, 667, 662, 661, 662, 667, 668, 668, 663, 662, 663, 668, 669, 669, 664, 663,
        665, 670, 671, 671, 666, 665, 666, 671, 672, 672, 667, 666, 667, 672, 673, 673, 668, 667, 668, 673, 674, 674, 669, 668,
        675, 676, 677, 677, 678, 675, 678, 677, 679, 679, 680, 678, 680, 679, 681, 681, 682, 680, 682, 681, 683, 683, 684, 682,
        676, 685, 686, 686, 677, 676, 677, 686, 687, 687, 679, 677, 679, 687, 688, 688, 681, 679, 681, 688, 689, 689, 683, 681,
        685, 690, 691, 691, 686, 685, 686, 691, 692, 692, 687, 686, 687, 692, 693, 693, 688, 687, 688, 693, 694, 694, 689, 688,
        690, 695, 696, 696, 691, 690, 691, 696, 697, 697, 692, 691, 692, 697, 698, 698, 693, 692, 693, 698, 699, 699, 694, 693,
        700, 701, 702, 702, 703, 700, 703, 702, 704, 704, 705, 703, 705, 704, 706, 706, 707, 705, 707, 706, 708, 708, 709, 707,
        701, 710, 711, 711, 702, 701, 702, 711, 712, 712, 704, 702, 704, 712, 713, 713, 706, 704, 706, 713, 714, 714, 708, 706,
        710, 715, 716, 716, 711, 710, 711, 716, 717, 717, 712, 711, 712, 717, 718, 718, 713, 712, 713, 718, 719, 719, 714, 713,
        715, 720, 721, 721, 716, 715, 716, 721, 722, 722, 717, 716, 717, 722, 723, 723, 718, 717, 718, 723, 724, 724, 719, 718,
        725, 726, 727, 727, 728, 725, 728, 727, 729, 729, 730, 728, 730, 729, 731, 731, 732, 730, 732, 731, 733, 733, 734, 732,
        726, 735, 736, 736, 727, 726, 727, 736, 737, 737, 729, 727, 729, 737, 738, 738, 731, 729, 731, 738, 739, 739, 733, 731,
        735, 740, 741, 741, 736, 735, 736, 741, 742, 742, 737, 736, 737, 742, 743, 743, 738, 737, 738, 743, 744, 744, 739, 738,
        740, 745, 746, 746, 741, 740, 741, 746, 747, 747, 742, 741, 742, 747, 748, 748, 743, 742, 743, 748, 749, 749, 744, 743,
        750, 751, 752, 752, 753, 750, 753, 752, 754, 754, 755, 753, 755, 754, 756, 756, 757, 755, 757, 756, 758, 758, 759, 757,
        751, 760, 761, 761, 752, 751, 752, 761, 762, 762, 754, 752, 754, 762, 763, 763, 756, 754, 756, 763, 764, 764, 758, 756,
        760, 765, 766, 766, 761, 760, 761, 766, 767, 767, 762, 761, 762, 767, 768, 768, 763, 762, 763, 768, 769, 769, 764, 763,
        765, 770, 771, 771, 766, 765, 766, 771, 772, 772, 767, 766, 767, 772, 773, 773, 768, 767, 768, 773, 774, 774, 769, 768,
        775, 776, 777, 777, 778, 775, 778, 777, 779, 779, 780, 778, 780, 779, 781, 781, 782, 780, 782, 781, 783, 783, 784, 782,
        776, 785, 786, 786, 777, 776, 777, 786, 787, 787, 779, 777, 779, 787, 788, 788, 781, 779, 781, 788, 789, 789, 783, 781,
        785, 790, 791, 791, 786, 785, 786, 791, 792, 792, 787, 786, 787, 792, 793, 793, 788, 787, 788, 793, 794, 794, 789, 788,
        790, 795, 796, 796, 791, 790, 791, 796, 797, 797, 792, 791, 792, 797, 798, 798, 793, 792, 793, 798, 799, 799, 794, 793 };

```

`samples-android/Common/external/jsoncpp/AUTHORS`:

```
Baptiste Lepilleur <blep@users.sourceforge.net>

```

`samples-android/Common/external/jsoncpp/LICENSE`:

```
The json-cpp library and this documentation are in Public Domain.

```

`samples-android/Common/external/jsoncpp/include/json/autolink.h`:

```h
#ifndef JSON_AUTOLINK_H_INCLUDED
# define JSON_AUTOLINK_H_INCLUDED

# include "config.h"

# ifdef JSON_IN_CPPTL
#  include <cpptl/cpptl_autolink.h>
# endif

# if !defined(JSON_NO_AUTOLINK)  &&  !defined(JSON_DLL_BUILD)  &&  !defined(JSON_IN_CPPTL)
#  define CPPTL_AUTOLINK_NAME "json"
#  undef CPPTL_AUTOLINK_DLL
#  ifdef JSON_DLL
#   define CPPTL_AUTOLINK_DLL
#  endif
#  include "autolink.h"
# endif

#endif // JSON_AUTOLINK_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/config.h`:

```h
#ifndef JSON_CONFIG_H_INCLUDED
# define JSON_CONFIG_H_INCLUDED

/// If defined, indicates that json library is embedded in CppTL library.
//# define JSON_IN_CPPTL 1

/// If defined, indicates that json may leverage CppTL library
//#  define JSON_USE_CPPTL 1
/// If defined, indicates that cpptl vector based map should be used instead of std::map
/// as Value container.
//#  define JSON_USE_CPPTL_SMALLMAP 1
/// If defined, indicates that Json specific container should be used
/// (hash table & simple deque container with customizable allocator).
/// THIS FEATURE IS STILL EXPERIMENTAL!
//#  define JSON_VALUE_USE_INTERNAL_MAP 1
/// Force usage of standard new/malloc based allocator instead of memory pool based allocator.
/// The memory pools allocator used optimization (initializing Value and ValueInternalLink
/// as if it was a POD) that may cause some validation tool to report errors.
/// Only has effects if JSON_VALUE_USE_INTERNAL_MAP is defined.
//#  define JSON_USE_SIMPLE_INTERNAL_ALLOCATOR 1

/// If defined, indicates that Json use exception to report invalid type manipulation
/// instead of C assert macro.
# define JSON_USE_EXCEPTION 1

# ifdef JSON_IN_CPPTL
#  include <cpptl/config.h>
#  ifndef JSON_USE_CPPTL
#   define JSON_USE_CPPTL 1
#  endif
# endif

# ifdef JSON_IN_CPPTL
#  define JSON_API CPPTL_API
# elif defined(JSON_DLL_BUILD)
#  define JSON_API __declspec(dllexport)
# elif defined(JSON_DLL)
#  define JSON_API __declspec(dllimport)
# else
#  define JSON_API
# endif

#endif // JSON_CONFIG_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/features.h`:

```h
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#ifndef CPPTL_JSON_FEATURES_H_INCLUDED
# define CPPTL_JSON_FEATURES_H_INCLUDED

# include "forwards.h"

namespace Json {

   /** \brief Configuration passed to reader and writer.
    * This configuration object can be used to force the Reader or Writer
    * to behave in a standard conforming way.
    */
   class JSON_API Features
   {
   public:
      /** \brief A configuration that allows all features and assumes all strings are UTF-8.
       * - C & C++ comments are allowed
       * - Root object can be any JSON value
       * - Assumes Value strings are encoded in UTF-8
       */
      static Features all();

      /** \brief A configuration that is strictly compatible with the JSON specification.
       * - Comments are forbidden.
       * - Root object must be either an array or an object value.
       * - Assumes Value strings are encoded in UTF-8
       */
      static Features strictMode();

      /** \brief Initialize the configuration like JsonConfig::allFeatures;
       */
      Features();

      /// \c true if comments are allowed. Default: \c true.
      bool allowComments_;

      /// \c true if root must be either an array or an object value. Default: \c false.
      bool strictRoot_;
   };

} // namespace Json

#endif // CPPTL_JSON_FEATURES_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/forwards.h`:

```h
#ifndef JSON_FORWARDS_H_INCLUDED
# define JSON_FORWARDS_H_INCLUDED

# include "config.h"

namespace Json {

   // writer.h
   class FastWriter;
   class StyledWriter;

   // reader.h
   class Reader;

   // features.h
   class Features;

   // value.h
   typedef int Int;
   typedef unsigned int UInt;
   class StaticString;
   class Path;
   class PathArgument;
   class Value;
   class ValueIteratorBase;
   class ValueIterator;
   class ValueConstIterator;
#ifdef JSON_VALUE_USE_INTERNAL_MAP
   class ValueAllocator;
   class ValueMapAllocator;
   class ValueInternalLink;
   class ValueInternalArray;
   class ValueInternalMap;
#endif // #ifdef JSON_VALUE_USE_INTERNAL_MAP

} // namespace Json


#endif // JSON_FORWARDS_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/json.h`:

```h
#ifndef JSON_JSON_H_INCLUDED
# define JSON_JSON_H_INCLUDED

# include "autolink.h"
# include "value.h"
# include "reader.h"
# include "writer.h"
# include "features.h"

#endif // JSON_JSON_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/reader.h`:

```h
#ifndef CPPTL_JSON_READER_H_INCLUDED
# define CPPTL_JSON_READER_H_INCLUDED

# include "features.h"
# include "value.h"
# include <deque>
# include <stack>
# include <string>
# include <iostream>

namespace Json {

   /** \brief Unserialize a <a HREF="http://www.json.org">JSON</a> document into a Value.
    *
    */
   class JSON_API Reader
   {
   public:
      typedef char Char;
      typedef const Char *Location;

      /** \brief Constructs a Reader allowing all features
       * for parsing.
       */
      Reader();

      /** \brief Constructs a Reader allowing the specified feature set
       * for parsing.
       */
      Reader( const Features &features );

      /** \brief Read a Value from a <a HREF="http://www.json.org">JSON</a> document.
       * \param document UTF-8 encoded string containing the document to read.
       * \param root [out] Contains the root value of the document if it was
       *             successfully parsed.
       * \param collectComments \c true to collect comment and allow writing them back during
       *                        serialization, \c false to discard comments.
       *                        This parameter is ignored if Features::allowComments_
       *                        is \c false.
       * \return \c true if the document was successfully parsed, \c false if an error occurred.
       */
      bool parse( const std::string &document, 
                  Value &root,
                  bool collectComments = true );

      /** \brief Read a Value from a <a HREF="http://www.json.org">JSON</a> document.
       * \param document UTF-8 encoded string containing the document to read.
       * \param root [out] Contains the root value of the document if it was
       *             successfully parsed.
       * \param collectComments \c true to collect comment and allow writing them back during
       *                        serialization, \c false to discard comments.
       *                        This parameter is ignored if Features::allowComments_
       *                        is \c false.
       * \return \c true if the document was successfully parsed, \c false if an error occurred.
       */
      bool parse( const char *beginDoc, const char *endDoc, 
                  Value &root,
                  bool collectComments = true );

      /// \brief Parse from input stream.
      /// \see Json::operator>>(std::istream&, Json::Value&).
      bool parse( std::istream &is,
                  Value &root,
                  bool collectComments = true );

      /** \brief Returns a user friendly string that list errors in the parsed document.
       * \return Formatted error message with the list of errors with their location in 
       *         the parsed document. An empty string is returned if no error occurred
       *         during parsing.
       */
      std::string getFormatedErrorMessages() const;

   private:
      enum TokenType
      {
         tokenEndOfStream = 0,
         tokenObjectBegin,
         tokenObjectEnd,
         tokenArrayBegin,
         tokenArrayEnd,
         tokenString,
         tokenNumber,
         tokenTrue,
         tokenFalse,
         tokenNull,
         tokenArraySeparator,
         tokenMemberSeparator,
         tokenComment,
         tokenError
      };

      class Token
      {
      public:
         TokenType type_;
         Location start_;
         Location end_;
      };

      class ErrorInfo
      {
      public:
         Token token_;
         std::string message_;
         Location extra_;
      };

      typedef std::deque<ErrorInfo> Errors;

      bool expectToken( TokenType type, Token &token, const char *message );
      bool readToken( Token &token );
      void skipSpaces();
      bool match( Location pattern, 
                  int patternLength );
      bool readComment();
      bool readCStyleComment();
      bool readCppStyleComment();
      bool readString();
      void readNumber();
      bool readValue();
      bool readObject( Token &token );
      bool readArray( Token &token );
      bool decodeNumber( Token &token );
      bool decodeString( Token &token );
      bool decodeString( Token &token, std::string &decoded );
      bool decodeDouble( Token &token );
      bool decodeUnicodeCodePoint( Token &token, 
                                   Location &current, 
                                   Location end, 
                                   unsigned int &unicode );
      bool decodeUnicodeEscapeSequence( Token &token, 
                                        Location &current, 
                                        Location end, 
                                        unsigned int &unicode );
      bool addError( const std::string &message, 
                     Token &token,
                     Location extra = 0 );
      bool recoverFromError( TokenType skipUntilToken );
      bool addErrorAndRecover( const std::string &message, 
                               Token &token,
                               TokenType skipUntilToken );
      void skipUntilSpace();
      Value &currentValue();
      Char getNextChar();
      void getLocationLineAndColumn( Location location,
                                     int &line,
                                     int &column ) const;
      std::string getLocationLineAndColumn( Location location ) const;
      void addComment( Location begin, 
                       Location end, 
                       CommentPlacement placement );
      void skipCommentTokens( Token &token );
   
      typedef std::stack<Value *> Nodes;
      Nodes nodes_;
      Errors errors_;
      std::string document_;
      Location begin_;
      Location end_;
      Location current_;
      Location lastValueEnd_;
      Value *lastValue_;
      std::string commentsBefore_;
      Features features_;
      bool collectComments_;
   };

   /** \brief Read from 'sin' into 'root'.

    Always keep comments from the input JSON.

    This can be used to read a file into a particular sub-object.
    For example:
    \code
    Json::Value root;
    cin >> root["dir"]["file"];
    cout << root;
    \endcode
    Result:
    \verbatim
    {
	"dir": {
	    "file": {
		// The input stream JSON would be nested here.
	    }
	}
    }
    \endverbatim
    \throw std::exception on parse error.
    \see Json::operator<<()
   */
   std::istream& operator>>( std::istream&, Value& );

} // namespace Json

#endif // CPPTL_JSON_READER_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/value.h`:

```h
#ifndef CPPTL_JSON_H_INCLUDED
# define CPPTL_JSON_H_INCLUDED

# include "forwards.h"
# include <string>
# include <vector>

# ifndef JSON_USE_CPPTL_SMALLMAP
#  include <map>
# else
#  include <cpptl/smallmap.h>
# endif
# ifdef JSON_USE_CPPTL
#  include <cpptl/forwards.h>
# endif

/** \brief JSON (JavaScript Object Notation).
 */
namespace Json {

   /** \brief Type of the value held by a Value object.
    */
   enum ValueType
   {
      nullValue = 0, ///< 'null' value
      intValue,      ///< signed integer value
      uintValue,     ///< unsigned integer value
      realValue,     ///< double value
      stringValue,   ///< UTF-8 string value
      booleanValue,  ///< bool value
      arrayValue,    ///< array value (ordered list)
      objectValue    ///< object value (collection of name/value pairs).
   };

   enum CommentPlacement
   {
      commentBefore = 0,        ///< a comment placed on the line before a value
      commentAfterOnSameLine,   ///< a comment just after a value on the same line
      commentAfter,             ///< a comment on the line after a value (only make sense for root value)
      numberOfCommentPlacement
   };

//# ifdef JSON_USE_CPPTL
//   typedef CppTL::AnyEnumerator<const char *> EnumMemberNames;
//   typedef CppTL::AnyEnumerator<const Value &> EnumValues;
//# endif

   /** \brief Lightweight wrapper to tag static string.
    *
    * Value constructor and objectValue member assignement takes advantage of the
    * StaticString and avoid the cost of string duplication when storing the
    * string or the member name.
    *
    * Example of usage:
    * \code
    * Json::Value aValue( StaticString("some text") );
    * Json::Value object;
    * static const StaticString code("code");
    * object[code] = 1234;
    * \endcode
    */
   class JSON_API StaticString
   {
   public:
      explicit StaticString( const char *czstring )
         : str_( czstring )
      {
      }

      operator const char *() const
      {
         return str_;
      }

      const char *c_str() const
      {
         return str_;
      }

   private:
      const char *str_;
   };

   /** \brief Represents a <a HREF="http://www.json.org">JSON</a> value.
    *
    * This class is a discriminated union wrapper that can represents a:
    * - signed integer [range: Value::minInt - Value::maxInt]
    * - unsigned integer (range: 0 - Value::maxUInt)
    * - double
    * - UTF-8 string
    * - boolean
    * - 'null'
    * - an ordered list of Value
    * - collection of name/value pairs (javascript object)
    *
    * The type of the held value is represented by a #ValueType and 
    * can be obtained using type().
    *
    * values of an #objectValue or #arrayValue can be accessed using operator[]() methods. 
    * Non const methods will automatically create the a #nullValue element 
    * if it does not exist. 
    * The sequence of an #arrayValue will be automatically resize and initialized 
    * with #nullValue. resize() can be used to enlarge or truncate an #arrayValue.
    *
    * The get() methods can be used to obtanis default value in the case the required element
    * does not exist.
    *
    * It is possible to iterate over the list of a #objectValue values using 
    * the getMemberNames() method.
    */
   class JSON_API Value 
   {
      friend class ValueIteratorBase;
# ifdef JSON_VALUE_USE_INTERNAL_MAP
      friend class ValueInternalLink;
      friend class ValueInternalMap;
# endif
   public:
      typedef std::vector<std::string> Members;
      typedef ValueIterator iterator;
      typedef ValueConstIterator const_iterator;
      typedef Json::UInt UInt;
      typedef Json::Int Int;
      typedef UInt ArrayIndex;

      static const Value null;
      static const Int minInt;
      static const Int maxInt;
      static const UInt maxUInt;

   private:
#ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION
# ifndef JSON_VALUE_USE_INTERNAL_MAP
      class CZString 
      {
      public:
         enum DuplicationPolicy 
         {
            noDuplication = 0,
            duplicate,
            duplicateOnCopy
         };
         CZString( int index );
         CZString( const char *cstr, DuplicationPolicy allocate );
         CZString( const CZString &other );
         ~CZString();
         CZString &operator =( const CZString &other );
         bool operator<( const CZString &other ) const;
         bool operator==( const CZString &other ) const;
         int index() const;
         const char *c_str() const;
         bool isStaticString() const;
      private:
         void swap( CZString &other );
         const char *cstr_;
         int index_;
      };

   public:
#  ifndef JSON_USE_CPPTL_SMALLMAP
      typedef std::map<CZString, Value> ObjectValues;
#  else
      typedef CppTL::SmallMap<CZString, Value> ObjectValues;
#  endif // ifndef JSON_USE_CPPTL_SMALLMAP
# endif // ifndef JSON_VALUE_USE_INTERNAL_MAP
#endif // ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION

   public:
      /** \brief Create a default Value of the given type.

        This is a very useful constructor.
        To create an empty array, pass arrayValue.
        To create an empty object, pass objectValue.
        Another Value can then be set to this one by assignment.
	This is useful since clear() and resize() will not alter types.

        Examples:
	\code
	Json::Value null_value; // null
	Json::Value arr_value(Json::arrayValue); // []
	Json::Value obj_value(Json::objectValue); // {}
	\endcode
      */
      Value( ValueType type = nullValue );
      Value( Int value );
      Value( UInt value );
      Value( double value );
      Value( const char *value );
      Value( const char *beginValue, const char *endValue );
      /** \brief Constructs a value from a static string.

       * Like other value string constructor but do not duplicate the string for
       * internal storage. The given string must remain alive after the call to this
       * constructor.
       * Example of usage:
       * \code
       * Json::Value aValue( StaticString("some text") );
       * \endcode
       */
      Value( const StaticString &value );
      Value( const std::string &value );
# ifdef JSON_USE_CPPTL
      Value( const CppTL::ConstString &value );
# endif
      Value( bool value );
      Value( const Value &other );
      ~Value();

      Value &operator=( const Value &other );
      /// Swap values.
      /// \note Currently, comments are intentionally not swapped, for
      /// both logic and efficiency.
      void swap( Value &other );

      ValueType type() const;

      bool operator <( const Value &other ) const;
      bool operator <=( const Value &other ) const;
      bool operator >=( const Value &other ) const;
      bool operator >( const Value &other ) const;

      bool operator ==( const Value &other ) const;
      bool operator !=( const Value &other ) const;

      int compare( const Value &other );

      const char *asCString() const;
      std::string asString() const;
# ifdef JSON_USE_CPPTL
      CppTL::ConstString asConstString() const;
# endif
      Int asInt() const;
      UInt asUInt() const;
      double asDouble() const;
      bool asBool() const;

      bool isNull() const;
      bool isBool() const;
      bool isInt() const;
      bool isUInt() const;
      bool isIntegral() const;
      bool isDouble() const;
      bool isNumeric() const;
      bool isString() const;
      bool isArray() const;
      bool isObject() const;

      bool isConvertibleTo( ValueType other ) const;

      /// Number of values in array or object
      UInt size() const;

      /// \brief Return true if empty array, empty object, or null;
      /// otherwise, false.
      bool empty() const;

      /// Return isNull()
      bool operator!() const;

      /// Remove all object members and array elements.
      /// \pre type() is arrayValue, objectValue, or nullValue
      /// \post type() is unchanged
      void clear();

      /// Resize the array to size elements. 
      /// New elements are initialized to null.
      /// May only be called on nullValue or arrayValue.
      /// \pre type() is arrayValue or nullValue
      /// \post type() is arrayValue
      void resize( UInt size );

      /// Access an array element (zero based index ).
      /// If the array contains less than index element, then null value are inserted
      /// in the array so that its size is index+1.
      /// (You may need to say 'value[0u]' to get your compiler to distinguish
      ///  this from the operator[] which takes a string.)
      Value &operator[]( UInt index );
      /// Access an array element (zero based index )
      /// (You may need to say 'value[0u]' to get your compiler to distinguish
      ///  this from the operator[] which takes a string.)
      const Value &operator[]( UInt index ) const;
      /// If the array contains at least index+1 elements, returns the element value, 
      /// otherwise returns defaultValue.
      Value get( UInt index, 
                 const Value &defaultValue ) const;
      /// Return true if index < size().
      bool isValidIndex( UInt index ) const;
      /// \brief Append value to array at the end.
      ///
      /// Equivalent to jsonvalue[jsonvalue.size()] = value;
      Value &append( const Value &value );

      /// Access an object value by name, create a null member if it does not exist.
      Value &operator[]( const char *key );
      /// Access an object value by name, returns null if there is no member with that name.
      const Value &operator[]( const char *key ) const;
      /// Access an object value by name, create a null member if it does not exist.
      Value &operator[]( const std::string &key );
      /// Access an object value by name, returns null if there is no member with that name.
      const Value &operator[]( const std::string &key ) const;
      /** \brief Access an object value by name, create a null member if it does not exist.

       * If the object as no entry for that name, then the member name used to store
       * the new entry is not duplicated.
       * Example of use:
       * \code
       * Json::Value object;
       * static const StaticString code("code");
       * object[code] = 1234;
       * \endcode
       */
      Value &operator[]( const StaticString &key );
# ifdef JSON_USE_CPPTL
      /// Access an object value by name, create a null member if it does not exist.
      Value &operator[]( const CppTL::ConstString &key );
      /// Access an object value by name, returns null if there is no member with that name.
      const Value &operator[]( const CppTL::ConstString &key ) const;
# endif
      /// Return the member named key if it exist, defaultValue otherwise.
      Value get( const char *key, 
                 const Value &defaultValue ) const;
      /// Return the member named key if it exist, defaultValue otherwise.
      Value get( const std::string &key,
                 const Value &defaultValue ) const;
# ifdef JSON_USE_CPPTL
      /// Return the member named key if it exist, defaultValue otherwise.
      Value get( const CppTL::ConstString &key,
                 const Value &defaultValue ) const;
# endif
      /// \brief Remove and return the named member.  
      ///
      /// Do nothing if it did not exist.
      /// \return the removed Value, or null.
      /// \pre type() is objectValue or nullValue
      /// \post type() is unchanged
      Value removeMember( const char* key );
      /// Same as removeMember(const char*)
      Value removeMember( const std::string &key );

      /// Return true if the object has a member named key.
      bool isMember( const char *key ) const;
      /// Return true if the object has a member named key.
      bool isMember( const std::string &key ) const;
# ifdef JSON_USE_CPPTL
      /// Return true if the object has a member named key.
      bool isMember( const CppTL::ConstString &key ) const;
# endif

      /// \brief Return a list of the member names.
      ///
      /// If null, return an empty list.
      /// \pre type() is objectValue or nullValue
      /// \post if type() was nullValue, it remains nullValue
      Members getMemberNames() const;

//# ifdef JSON_USE_CPPTL
//      EnumMemberNames enumMemberNames() const;
//      EnumValues enumValues() const;
//# endif

      /// Comments must be //... or /* ... */
      void setComment( const char *comment,
                       CommentPlacement placement );
      /// Comments must be //... or /* ... */
      void setComment( const std::string &comment,
                       CommentPlacement placement );
      bool hasComment( CommentPlacement placement ) const;
      /// Include delimiters and embedded newlines.
      std::string getComment( CommentPlacement placement ) const;

      std::string toStyledString() const;

      const_iterator begin() const;
      const_iterator end() const;

      iterator begin();
      iterator end();

   private:
      Value &resolveReference( const char *key, 
                               bool isStatic );

# ifdef JSON_VALUE_USE_INTERNAL_MAP
      inline bool isItemAvailable() const
      {
         return itemIsUsed_ == 0;
      }

      inline void setItemUsed( bool isUsed = true )
      {
         itemIsUsed_ = isUsed ? 1 : 0;
      }

      inline bool isMemberNameStatic() const
      {
         return memberNameIsStatic_ == 0;
      }

      inline void setMemberNameIsStatic( bool isStatic )
      {
         memberNameIsStatic_ = isStatic ? 1 : 0;
      }
# endif // # ifdef JSON_VALUE_USE_INTERNAL_MAP

   private:
      struct CommentInfo
      {
         CommentInfo();
         ~CommentInfo();

         void setComment( const char *text );

         char *comment_;
      };

      //struct MemberNamesTransform
      //{
      //   typedef const char *result_type;
      //   const char *operator()( const CZString &name ) const
      //   {
      //      return name.c_str();
      //   }
      //};

      union ValueHolder
      {
         Int int_;
         UInt uint_;
         double real_;
         bool bool_;
         char *string_;
# ifdef JSON_VALUE_USE_INTERNAL_MAP
         ValueInternalArray *array_;
         ValueInternalMap *map_;
#else
         ObjectValues *map_;
# endif
      } value_;
      ValueType type_ : 8;
      int allocated_ : 1;     // Notes: if declared as bool, bitfield is useless.
# ifdef JSON_VALUE_USE_INTERNAL_MAP
      unsigned int itemIsUsed_ : 1;      // used by the ValueInternalMap container.
      int memberNameIsStatic_ : 1;       // used by the ValueInternalMap container.
# endif
      CommentInfo *comments_;
   };


   /** \brief Experimental and untested: represents an element of the "path" to access a node.
    */
   class PathArgument
   {
   public:
      friend class Path;

      PathArgument();
      PathArgument( UInt index );
      PathArgument( const char *key );
      PathArgument( const std::string &key );

   private:
      enum Kind
      {
         kindNone = 0,
         kindIndex,
         kindKey
      };
      std::string key_;
      UInt index_;
      Kind kind_;
   };

   /** \brief Experimental and untested: represents a "path" to access a node.
    *
    * Syntax:
    * - "." => root node
    * - ".[n]" => elements at index 'n' of root node (an array value)
    * - ".name" => member named 'name' of root node (an object value)
    * - ".name1.name2.name3"
    * - ".[0][1][2].name1[3]"
    * - ".%" => member name is provided as parameter
    * - ".[%]" => index is provied as parameter
    */
   class Path
   {
   public:
      Path( const std::string &path,
            const PathArgument &a1 = PathArgument(),
            const PathArgument &a2 = PathArgument(),
            const PathArgument &a3 = PathArgument(),
            const PathArgument &a4 = PathArgument(),
            const PathArgument &a5 = PathArgument() );

      const Value &resolve( const Value &root ) const;
      Value resolve( const Value &root, 
                     const Value &defaultValue ) const;
      /// Creates the "path" to access the specified node and returns a reference on the node.
      Value &make( Value &root ) const;

   private:
      typedef std::vector<const PathArgument *> InArgs;
      typedef std::vector<PathArgument> Args;

      void makePath( const std::string &path,
                     const InArgs &in );
      void addPathInArg( const std::string &path, 
                         const InArgs &in, 
                         InArgs::const_iterator &itInArg, 
                         PathArgument::Kind kind );
      void invalidPath( const std::string &path, 
                        int location );

      Args args_;
   };

   /** \brief Experimental do not use: Allocator to customize member name and string value memory management done by Value.
    *
    * - makeMemberName() and releaseMemberName() are called to respectively duplicate and
    *   free an Json::objectValue member name.
    * - duplicateStringValue() and releaseStringValue() are called similarly to
    *   duplicate and free a Json::stringValue value.
    */
   class ValueAllocator
   {
   public:
      enum { unknown = (unsigned)-1 };

      virtual ~ValueAllocator();

      virtual char *makeMemberName( const char *memberName ) = 0;
      virtual void releaseMemberName( char *memberName ) = 0;
      virtual char *duplicateStringValue( const char *value, 
                                          unsigned int length = unknown ) = 0;
      virtual void releaseStringValue( char *value ) = 0;
   };

#ifdef JSON_VALUE_USE_INTERNAL_MAP
   /** \brief Allocator to customize Value internal map.
    * Below is an example of a simple implementation (default implementation actually
    * use memory pool for speed).
    * \code
      class DefaultValueMapAllocator : public ValueMapAllocator
      {
      public: // overridden from ValueMapAllocator
         virtual ValueInternalMap *newMap()
         {
            return new ValueInternalMap();
         }

         virtual ValueInternalMap *newMapCopy( const ValueInternalMap &other )
         {
            return new ValueInternalMap( other );
         }

         virtual void destructMap( ValueInternalMap *map )
         {
            delete map;
         }

         virtual ValueInternalLink *allocateMapBuckets( unsigned int size )
         {
            return new ValueInternalLink[size];
         }

         virtual void releaseMapBuckets( ValueInternalLink *links )
         {
            delete [] links;
         }

         virtual ValueInternalLink *allocateMapLink()
         {
            return new ValueInternalLink();
         }

         virtual void releaseMapLink( ValueInternalLink *link )
         {
            delete link;
         }
      };
    * \endcode
    */ 
   class JSON_API ValueMapAllocator
   {
   public:
      virtual ~ValueMapAllocator();
      virtual ValueInternalMap *newMap() = 0;
      virtual ValueInternalMap *newMapCopy( const ValueInternalMap &other ) = 0;
      virtual void destructMap( ValueInternalMap *map ) = 0;
      virtual ValueInternalLink *allocateMapBuckets( unsigned int size ) = 0;
      virtual void releaseMapBuckets( ValueInternalLink *links ) = 0;
      virtual ValueInternalLink *allocateMapLink() = 0;
      virtual void releaseMapLink( ValueInternalLink *link ) = 0;
   };

   /** \brief ValueInternalMap hash-map bucket chain link (for internal use only).
    * \internal previous_ & next_ allows for bidirectional traversal.
    */
   class JSON_API ValueInternalLink
   {
   public:
      enum { itemPerLink = 6 };  // sizeof(ValueInternalLink) = 128 on 32 bits architecture.
      enum InternalFlags { 
         flagAvailable = 0,
         flagUsed = 1
      };

      ValueInternalLink();

      ~ValueInternalLink();

      Value items_[itemPerLink];
      char *keys_[itemPerLink];
      ValueInternalLink *previous_;
      ValueInternalLink *next_;
   };


   /** \brief A linked page based hash-table implementation used internally by Value.
    * \internal ValueInternalMap is a tradional bucket based hash-table, with a linked
    * list in each bucket to handle collision. There is an addional twist in that
    * each node of the collision linked list is a page containing a fixed amount of
    * value. This provides a better compromise between memory usage and speed.
    * 
    * Each bucket is made up of a chained list of ValueInternalLink. The last
    * link of a given bucket can be found in the 'previous_' field of the following bucket.
    * The last link of the last bucket is stored in tailLink_ as it has no following bucket.
    * Only the last link of a bucket may contains 'available' item. The last link always
    * contains at least one element unless is it the bucket one very first link.
    */
   class JSON_API ValueInternalMap
   {
      friend class ValueIteratorBase;
      friend class Value;
   public:
      typedef unsigned int HashKey;
      typedef unsigned int BucketIndex;

# ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION
      struct IteratorState
      {
         IteratorState() 
            : map_(0)
            , link_(0)
            , itemIndex_(0)
            , bucketIndex_(0) 
         {
         }
         ValueInternalMap *map_;
         ValueInternalLink *link_;
         BucketIndex itemIndex_;
         BucketIndex bucketIndex_;
      };
# endif // ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION

      ValueInternalMap();
      ValueInternalMap( const ValueInternalMap &other );
      ValueInternalMap &operator =( const ValueInternalMap &other );
      ~ValueInternalMap();

      void swap( ValueInternalMap &other );

      BucketIndex size() const;

      void clear();

      bool reserveDelta( BucketIndex growth );

      bool reserve( BucketIndex newItemCount );

      const Value *find( const char *key ) const;

      Value *find( const char *key );

      Value &resolveReference( const char *key, 
                               bool isStatic );

      void remove( const char *key );

      void doActualRemove( ValueInternalLink *link, 
                           BucketIndex index,
                           BucketIndex bucketIndex );

      ValueInternalLink *&getLastLinkInBucket( BucketIndex bucketIndex );

      Value &setNewItem( const char *key, 
                         bool isStatic, 
                         ValueInternalLink *link, 
                         BucketIndex index );

      Value &unsafeAdd( const char *key, 
                        bool isStatic, 
                        HashKey hashedKey );

      HashKey hash( const char *key ) const;

      int compare( const ValueInternalMap &other ) const;

   private:
      void makeBeginIterator( IteratorState &it ) const;
      void makeEndIterator( IteratorState &it ) const;
      static bool equals( const IteratorState &x, const IteratorState &other );
      static void increment( IteratorState &iterator );
      static void incrementBucket( IteratorState &iterator );
      static void decrement( IteratorState &iterator );
      static const char *key( const IteratorState &iterator );
      static const char *key( const IteratorState &iterator, bool &isStatic );
      static Value &value( const IteratorState &iterator );
      static int distance( const IteratorState &x, const IteratorState &y );

   private:
      ValueInternalLink *buckets_;
      ValueInternalLink *tailLink_;
      BucketIndex bucketsSize_;
      BucketIndex itemCount_;
   };

   /** \brief A simplified deque implementation used internally by Value.
   * \internal
   * It is based on a list of fixed "page", each page contains a fixed number of items.
   * Instead of using a linked-list, a array of pointer is used for fast item look-up.
   * Look-up for an element is as follow:
   * - compute page index: pageIndex = itemIndex / itemsPerPage
   * - look-up item in page: pages_[pageIndex][itemIndex % itemsPerPage]
   *
   * Insertion is amortized constant time (only the array containing the index of pointers
   * need to be reallocated when items are appended).
   */
   class JSON_API ValueInternalArray
   {
      friend class Value;
      friend class ValueIteratorBase;
   public:
      enum { itemsPerPage = 8 };    // should be a power of 2 for fast divide and modulo.
      typedef Value::ArrayIndex ArrayIndex;
      typedef unsigned int PageIndex;

# ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION
      struct IteratorState // Must be a POD
      {
         IteratorState() 
            : array_(0)
            , currentPageIndex_(0)
            , currentItemIndex_(0) 
         {
         }
         ValueInternalArray *array_;
         Value **currentPageIndex_;
         unsigned int currentItemIndex_;
      };
# endif // ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION

      ValueInternalArray();
      ValueInternalArray( const ValueInternalArray &other );
      ValueInternalArray &operator =( const ValueInternalArray &other );
      ~ValueInternalArray();
      void swap( ValueInternalArray &other );

      void clear();
      void resize( ArrayIndex newSize );

      Value &resolveReference( ArrayIndex index );

      Value *find( ArrayIndex index ) const;

      ArrayIndex size() const;

      int compare( const ValueInternalArray &other ) const;

   private:
      static bool equals( const IteratorState &x, const IteratorState &other );
      static void increment( IteratorState &iterator );
      static void decrement( IteratorState &iterator );
      static Value &dereference( const IteratorState &iterator );
      static Value &unsafeDereference( const IteratorState &iterator );
      static int distance( const IteratorState &x, const IteratorState &y );
      static ArrayIndex indexOf( const IteratorState &iterator );
      void makeBeginIterator( IteratorState &it ) const;
      void makeEndIterator( IteratorState &it ) const;
      void makeIterator( IteratorState &it, ArrayIndex index ) const;

      void makeIndexValid( ArrayIndex index );

      Value **pages_;
      ArrayIndex size_;
      PageIndex pageCount_;
   };

   /** \brief Experimental: do not use. Allocator to customize Value internal array.
    * Below is an example of a simple implementation (actual implementation use
    * memory pool).
      \code
class DefaultValueArrayAllocator : public ValueArrayAllocator
{
public: // overridden from ValueArrayAllocator
   virtual ~DefaultValueArrayAllocator()
   {
   }

   virtual ValueInternalArray *newArray()
   {
      return new ValueInternalArray();
   }

   virtual ValueInternalArray *newArrayCopy( const ValueInternalArray &other )
   {
      return new ValueInternalArray( other );
   }

   virtual void destruct( ValueInternalArray *array )
   {
      delete array;
   }

   virtual void reallocateArrayPageIndex( Value **&indexes, 
                                          ValueInternalArray::PageIndex &indexCount,
                                          ValueInternalArray::PageIndex minNewIndexCount )
   {
      ValueInternalArray::PageIndex newIndexCount = (indexCount*3)/2 + 1;
      if ( minNewIndexCount > newIndexCount )
         newIndexCount = minNewIndexCount;
      void *newIndexes = realloc( indexes, sizeof(Value*) * newIndexCount );
      if ( !newIndexes )
         throw std::bad_alloc();
      indexCount = newIndexCount;
      indexes = static_cast<Value **>( newIndexes );
   }
   virtual void releaseArrayPageIndex( Value **indexes, 
                                       ValueInternalArray::PageIndex indexCount )
   {
      if ( indexes )
         free( indexes );
   }

   virtual Value *allocateArrayPage()
   {
      return static_cast<Value *>( malloc( sizeof(Value) * ValueInternalArray::itemsPerPage ) );
   }

   virtual void releaseArrayPage( Value *value )
   {
      if ( value )
         free( value );
   }
};
      \endcode
    */ 
   class JSON_API ValueArrayAllocator
   {
   public:
      virtual ~ValueArrayAllocator();
      virtual ValueInternalArray *newArray() = 0;
      virtual ValueInternalArray *newArrayCopy( const ValueInternalArray &other ) = 0;
      virtual void destructArray( ValueInternalArray *array ) = 0;
      /** \brief Reallocate array page index.
       * Reallocates an array of pointer on each page.
       * \param indexes [input] pointer on the current index. May be \c NULL.
       *                [output] pointer on the new index of at least 
       *                         \a minNewIndexCount pages. 
       * \param indexCount [input] current number of pages in the index.
       *                   [output] number of page the reallocated index can handle.
       *                            \b MUST be >= \a minNewIndexCount.
       * \param minNewIndexCount Minimum number of page the new index must be able to
       *                         handle.
       */
      virtual void reallocateArrayPageIndex( Value **&indexes, 
                                             ValueInternalArray::PageIndex &indexCount,
                                             ValueInternalArray::PageIndex minNewIndexCount ) = 0;
      virtual void releaseArrayPageIndex( Value **indexes, 
                                          ValueInternalArray::PageIndex indexCount ) = 0;
      virtual Value *allocateArrayPage() = 0;
      virtual void releaseArrayPage( Value *value ) = 0;
   };
#endif // #ifdef JSON_VALUE_USE_INTERNAL_MAP


   /** \brief base class for Value iterators.
    *
    */
   class ValueIteratorBase
   {
   public:
      typedef unsigned int size_t;
      typedef int difference_type;
      typedef ValueIteratorBase SelfType;

      ValueIteratorBase();
#ifndef JSON_VALUE_USE_INTERNAL_MAP
      explicit ValueIteratorBase( const Value::ObjectValues::iterator &current );
#else
      ValueIteratorBase( const ValueInternalArray::IteratorState &state );
      ValueIteratorBase( const ValueInternalMap::IteratorState &state );
#endif

      bool operator ==( const SelfType &other ) const
      {
         return isEqual( other );
      }

      bool operator !=( const SelfType &other ) const
      {
         return !isEqual( other );
      }

      difference_type operator -( const SelfType &other ) const
      {
         return computeDistance( other );
      }

      /// Return either the index or the member name of the referenced value as a Value.
      Value key() const;

      /// Return the index of the referenced Value. -1 if it is not an arrayValue.
      UInt index() const;

      /// Return the member name of the referenced Value. "" if it is not an objectValue.
      const char *memberName() const;

   protected:
      Value &deref() const;

      void increment();

      void decrement();

      difference_type computeDistance( const SelfType &other ) const;

      bool isEqual( const SelfType &other ) const;

      void copy( const SelfType &other );

   private:
#ifndef JSON_VALUE_USE_INTERNAL_MAP
      Value::ObjectValues::iterator current_;
      // Indicates that iterator is for a null value.
      bool isNull_;
#else
      union
      {
         ValueInternalArray::IteratorState array_;
         ValueInternalMap::IteratorState map_;
      } iterator_;
      bool isArray_;
#endif
   };

   /** \brief const iterator for object and array value.
    *
    */
   class ValueConstIterator : public ValueIteratorBase
   {
      friend class Value;
   public:
      typedef unsigned int size_t;
      typedef int difference_type;
      typedef const Value &reference;
      typedef const Value *pointer;
      typedef ValueConstIterator SelfType;

      ValueConstIterator();
   private:
      /*! \internal Use by Value to create an iterator.
       */
#ifndef JSON_VALUE_USE_INTERNAL_MAP
      explicit ValueConstIterator( const Value::ObjectValues::iterator &current );
#else
      ValueConstIterator( const ValueInternalArray::IteratorState &state );
      ValueConstIterator( const ValueInternalMap::IteratorState &state );
#endif
   public:
      SelfType &operator =( const ValueIteratorBase &other );

      SelfType operator++( int )
      {
         SelfType temp( *this );
         ++*this;
         return temp;
      }

      SelfType operator--( int )
      {
         SelfType temp( *this );
         --*this;
         return temp;
      }

      SelfType &operator--()
      {
         decrement();
         return *this;
      }

      SelfType &operator++()
      {
         increment();
         return *this;
      }

      reference operator *() const
      {
         return deref();
      }
   };


   /** \brief Iterator for object and array value.
    */
   class ValueIterator : public ValueIteratorBase
   {
      friend class Value;
   public:
      typedef unsigned int size_t;
      typedef int difference_type;
      typedef Value &reference;
      typedef Value *pointer;
      typedef ValueIterator SelfType;

      ValueIterator();
      ValueIterator( const ValueConstIterator &other );
      ValueIterator( const ValueIterator &other );
   private:
      /*! \internal Use by Value to create an iterator.
       */
#ifndef JSON_VALUE_USE_INTERNAL_MAP
      explicit ValueIterator( const Value::ObjectValues::iterator &current );
#else
      ValueIterator( const ValueInternalArray::IteratorState &state );
      ValueIterator( const ValueInternalMap::IteratorState &state );
#endif
   public:

      SelfType &operator =( const SelfType &other );

      SelfType operator++( int )
      {
         SelfType temp( *this );
         ++*this;
         return temp;
      }

      SelfType operator--( int )
      {
         SelfType temp( *this );
         --*this;
         return temp;
      }

      SelfType &operator--()
      {
         decrement();
         return *this;
      }

      SelfType &operator++()
      {
         increment();
         return *this;
      }

      reference operator *() const
      {
         return deref();
      }
   };


} // namespace Json


#endif // CPPTL_JSON_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/include/json/writer.h`:

```h
#ifndef JSON_WRITER_H_INCLUDED
# define JSON_WRITER_H_INCLUDED

# include "value.h"
# include <vector>
# include <string>
# include <iostream>

namespace Json {

   class Value;

   /** \brief Abstract class for writers.
    */
   class JSON_API Writer
   {
   public:
      virtual ~Writer();

      virtual std::string write( const Value &root ) = 0;
   };

   /** \brief Outputs a Value in <a HREF="http://www.json.org">JSON</a> format without formatting (not human friendly).
    *
    * The JSON document is written in a single line. It is not intended for 'human' consumption,
    * but may be usefull to support feature such as RPC where bandwith is limited.
    * \sa Reader, Value
    */
   class JSON_API FastWriter : public Writer
   {
   public:
      FastWriter();
      virtual ~FastWriter(){}

      void enableYAMLCompatibility();

   public: // overridden from Writer
      virtual std::string write( const Value &root );

   private:
      void writeValue( const Value &value );

      std::string document_;
      bool yamlCompatiblityEnabled_;
   };

   /** \brief Writes a Value in <a HREF="http://www.json.org">JSON</a> format in a human friendly way.
    *
    * The rules for line break and indent are as follow:
    * - Object value:
    *     - if empty then print {} without indent and line break
    *     - if not empty the print '{', line break & indent, print one value per line
    *       and then unindent and line break and print '}'.
    * - Array value:
    *     - if empty then print [] without indent and line break
    *     - if the array contains no object value, empty array or some other value types,
    *       and all the values fit on one lines, then print the array on a single line.
    *     - otherwise, it the values do not fit on one line, or the array contains
    *       object or non empty array, then print one value per line.
    *
    * If the Value have comments then they are outputed according to their #CommentPlacement.
    *
    * \sa Reader, Value, Value::setComment()
    */
   class JSON_API StyledWriter: public Writer
   {
   public:
      StyledWriter();
      virtual ~StyledWriter(){}

   public: // overridden from Writer
      /** \brief Serialize a Value in <a HREF="http://www.json.org">JSON</a> format.
       * \param root Value to serialize.
       * \return String containing the JSON document that represents the root value.
       */
      virtual std::string write( const Value &root );

   private:
      void writeValue( const Value &value );
      void writeArrayValue( const Value &value );
      bool isMultineArray( const Value &value );
      void pushValue( const std::string &value );
      void writeIndent();
      void writeWithIndent( const std::string &value );
      void indent();
      void unindent();
      void writeCommentBeforeValue( const Value &root );
      void writeCommentAfterValueOnSameLine( const Value &root );
      bool hasCommentForValue( const Value &value );
      static std::string normalizeEOL( const std::string &text );

      typedef std::vector<std::string> ChildValues;

      ChildValues childValues_;
      std::string document_;
      std::string indentString_;
      int rightMargin_;
      int indentSize_;
      bool addChildValues_;
   };

   /** \brief Writes a Value in <a HREF="http://www.json.org">JSON</a> format in a human friendly way,
        to a stream rather than to a string.
    *
    * The rules for line break and indent are as follow:
    * - Object value:
    *     - if empty then print {} without indent and line break
    *     - if not empty the print '{', line break & indent, print one value per line
    *       and then unindent and line break and print '}'.
    * - Array value:
    *     - if empty then print [] without indent and line break
    *     - if the array contains no object value, empty array or some other value types,
    *       and all the values fit on one lines, then print the array on a single line.
    *     - otherwise, it the values do not fit on one line, or the array contains
    *       object or non empty array, then print one value per line.
    *
    * If the Value have comments then they are outputed according to their #CommentPlacement.
    *
    * \param indentation Each level will be indented by this amount extra.
    * \sa Reader, Value, Value::setComment()
    */
   class JSON_API StyledStreamWriter
   {
   public:
      StyledStreamWriter( std::string indentation="\t" );
      ~StyledStreamWriter(){}

   public:
      /** \brief Serialize a Value in <a HREF="http://www.json.org">JSON</a> format.
       * \param out Stream to write to. (Can be ostringstream, e.g.)
       * \param root Value to serialize.
       * \note There is no point in deriving from Writer, since write() should not return a value.
       */
      void write( std::ostream &out, const Value &root );

   private:
      void writeValue( const Value &value );
      void writeArrayValue( const Value &value );
      bool isMultineArray( const Value &value );
      void pushValue( const std::string &value );
      void writeIndent();
      void writeWithIndent( const std::string &value );
      void indent();
      void unindent();
      void writeCommentBeforeValue( const Value &root );
      void writeCommentAfterValueOnSameLine( const Value &root );
      bool hasCommentForValue( const Value &value );
      static std::string normalizeEOL( const std::string &text );

      typedef std::vector<std::string> ChildValues;

      ChildValues childValues_;
      std::ostream* document_;
      std::string indentString_;
      int rightMargin_;
      std::string indentation_;
      bool addChildValues_;
   };

   std::string JSON_API valueToString( Int value );
   std::string JSON_API valueToString( UInt value );
   std::string JSON_API valueToString( double value );
   std::string JSON_API valueToString( bool value );
   std::string JSON_API valueToQuotedString( const char *value );

   /// \brief Output using the StyledStreamWriter.
   /// \see Json::operator>>()
   std::ostream& operator<<( std::ostream&, const Value &root );

} // namespace Json



#endif // JSON_WRITER_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/src/jsontestrunner/main.cpp`:

```cpp
#include <json/json.h>
#include <algorithm> // sort
#include <stdio.h>

#if defined(_MSC_VER)  &&  _MSC_VER >= 1310
# pragma warning( disable: 4996 )     // disable fopen deprecation warning
#endif

static std::string
readInputTestFile( const char *path )
{
   FILE *file = fopen( path, "rb" );
   if ( !file )
      return std::string("");
   fseek( file, 0, SEEK_END );
   long size = ftell( file );
   fseek( file, 0, SEEK_SET );
   std::string text;
   char *buffer = new char[size+1];
   buffer[size] = 0;
   if ( fread( buffer, 1, size, file ) == (unsigned long)size )
      text = buffer;
   fclose( file );
   delete[] buffer;
   return text;
}


static void
printValueTree( FILE *fout, Json::Value &value, const std::string &path = "." )
{
   switch ( value.type() )
   {
   case Json::nullValue:
      fprintf( fout, "%s=null\n", path.c_str() );
      break;
   case Json::intValue:
      fprintf( fout, "%s=%d\n", path.c_str(), value.asInt() );
      break;
   case Json::uintValue:
      fprintf( fout, "%s=%u\n", path.c_str(), value.asUInt() );
      break;
   case Json::realValue:
      fprintf( fout, "%s=%.16g\n", path.c_str(), value.asDouble() );
      break;
   case Json::stringValue:
      fprintf( fout, "%s=\"%s\"\n", path.c_str(), value.asString().c_str() );
      break;
   case Json::booleanValue:
      fprintf( fout, "%s=%s\n", path.c_str(), value.asBool() ? "true" : "false" );
      break;
   case Json::arrayValue:
      {
         fprintf( fout, "%s=[]\n", path.c_str() );
         int size = value.size();
         for ( int index =0; index < size; ++index )
         {
            static char buffer[16];
            sprintf( buffer, "[%d]", index );
            printValueTree( fout, value[index], path + buffer );
         }
      }
      break;
   case Json::objectValue:
      {
         fprintf( fout, "%s={}\n", path.c_str() );
         Json::Value::Members members( value.getMemberNames() );
         std::sort( members.begin(), members.end() );
         std::string suffix = *(path.end()-1) == '.' ? "" : ".";
         for ( Json::Value::Members::iterator it = members.begin(); 
               it != members.end(); 
               ++it )
         {
            const std::string &name = *it;
            printValueTree( fout, value[name], path + suffix + name );
         }
      }
      break;
   default:
      break;
   }
}


static int
parseAndSaveValueTree( const std::string &input, 
                       const std::string &actual,
                       const std::string &kind,
                       Json::Value &root,
                       const Json::Features &features,
                       bool parseOnly )
{
   Json::Reader reader( features );
   bool parsingSuccessful = reader.parse( input, root );
   if ( !parsingSuccessful )
   {
      printf( "Failed to parse %s file: \n%s\n", 
              kind.c_str(),
              reader.getFormatedErrorMessages().c_str() );
      return 1;
   }

   if ( !parseOnly )
   {
      FILE *factual = fopen( actual.c_str(), "wt" );
      if ( !factual )
      {
         printf( "Failed to create %s actual file.\n", kind.c_str() );
         return 2;
      }
      printValueTree( factual, root );
      fclose( factual );
   }
   return 0;
}


static int
rewriteValueTree( const std::string &rewritePath, 
                  const Json::Value &root, 
                  std::string &rewrite )
{
   //Json::FastWriter writer;
   //writer.enableYAMLCompatibility();
   Json::StyledWriter writer;
   rewrite = writer.write( root );
   FILE *fout = fopen( rewritePath.c_str(), "wt" );
   if ( !fout )
   {
      printf( "Failed to create rewrite file: %s\n", rewritePath.c_str() );
      return 2;
   }
   fprintf( fout, "%s\n", rewrite.c_str() );
   fclose( fout );
   return 0;
}


static std::string
removeSuffix( const std::string &path, 
              const std::string &extension )
{
   if ( extension.length() >= path.length() )
      return std::string("");
   std::string suffix = path.substr( path.length() - extension.length() );
   if ( suffix != extension )
      return std::string("");
   return path.substr( 0, path.length() - extension.length() );
}

static int 
printUsage( const char *argv[] )
{
   printf( "Usage: %s [--strict] input-json-file", argv[0] );
   return 3;
}


int
parseCommandLine( int argc, const char *argv[], 
                  Json::Features &features, std::string &path,
                  bool &parseOnly )
{
   parseOnly = false;
   if ( argc < 2 )
   {
      return printUsage( argv );
   }

   int index = 1;
   if ( std::string(argv[1]) == "--json-checker" )
   {
      features = Json::Features::strictMode();
      parseOnly = true;
      ++index;
   }

   if ( index == argc  ||  index + 1 < argc )
   {
      return printUsage( argv );
   }

   path = argv[index];
   return 0;
}


int main( int argc, const char *argv[] )
{
   std::string path;
   Json::Features features;
   bool parseOnly;
   int exitCode = parseCommandLine( argc, argv, features, path, parseOnly );
   if ( exitCode != 0 )
   {
      return exitCode;
   }

   std::string input = readInputTestFile( path.c_str() );
   if ( input.empty() )
   {
      printf( "Failed to read input or empty input: %s\n", path.c_str() );
      return 3;
   }

   std::string basePath = removeSuffix( argv[1], ".json" );
   if ( !parseOnly  &&  basePath.empty() )
   {
      printf( "Bad input path. Path does not end with '.expected':\n%s\n", path.c_str() );
      return 3;
   }

   std::string actualPath = basePath + ".actual";
   std::string rewritePath = basePath + ".rewrite";
   std::string rewriteActualPath = basePath + ".actual-rewrite";

   Json::Value root;
   exitCode = parseAndSaveValueTree( input, actualPath, "input", root, features, parseOnly );
   if ( exitCode == 0  &&  !parseOnly )
   {
      std::string rewrite;
      exitCode = rewriteValueTree( rewritePath, root, rewrite );
      if ( exitCode == 0 )
      {
         Json::Value rewriteRoot;
         exitCode = parseAndSaveValueTree( rewrite, rewriteActualPath, 
            "rewrite", rewriteRoot, features, parseOnly );
      }
   }

   return exitCode;
}


```

`samples-android/Common/external/jsoncpp/src/jsontestrunner/sconscript`:

```
Import( 'env_testing buildJSONTests' )

buildJSONTests( env_testing, Split( """
    main.cpp
     """ ),
    'jsontestrunner' )

# For 'check' to work, 'libs' must be built first.
env_testing.Depends('jsontestrunner', '#libs')

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_batchallocator.h`:

```h
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#ifndef JSONCPP_BATCHALLOCATOR_H_INCLUDED
# define JSONCPP_BATCHALLOCATOR_H_INCLUDED

# include <stdlib.h>
# include <assert.h>

# ifndef JSONCPP_DOC_EXCLUDE_IMPLEMENTATION

namespace Json {

/* Fast memory allocator.
 *
 * This memory allocator allocates memory for a batch of object (specified by
 * the page size, the number of object in each page).
 *
 * It does not allow the destruction of a single object. All the allocated objects
 * can be destroyed at once. The memory can be either released or reused for future
 * allocation.
 * 
 * The in-place new operator must be used to construct the object using the pointer
 * returned by allocate.
 */
template<typename AllocatedType
        ,const unsigned int objectPerAllocation>
class BatchAllocator
{
public:
   typedef AllocatedType Type;

   BatchAllocator( unsigned int objectsPerPage = 255 )
      : freeHead_( 0 )
      , objectsPerPage_( objectsPerPage )
   {
//      printf( "Size: %d => %s\n", sizeof(AllocatedType), typeid(AllocatedType).name() );
      assert( sizeof(AllocatedType) * objectPerAllocation >= sizeof(AllocatedType *) ); // We must be able to store a slist in the object free space.
      assert( objectsPerPage >= 16 );
      batches_ = allocateBatch( 0 );   // allocated a dummy page
      currentBatch_ = batches_;
   }

   ~BatchAllocator()
   {
      for ( BatchInfo *batch = batches_; batch;  )
      {
         BatchInfo *nextBatch = batch->next_;
         free( batch );
         batch = nextBatch;
      }
   }

   /// allocate space for an array of objectPerAllocation object.
   /// @warning it is the responsability of the caller to call objects constructors.
   AllocatedType *allocate()
   {
      if ( freeHead_ ) // returns node from free list.
      {
         AllocatedType *object = freeHead_;
         freeHead_ = *(AllocatedType **)object;
         return object;
      }
      if ( currentBatch_->used_ == currentBatch_->end_ )
      {
         currentBatch_ = currentBatch_->next_;
         while ( currentBatch_  &&  currentBatch_->used_ == currentBatch_->end_ )
            currentBatch_ = currentBatch_->next_;

         if ( !currentBatch_  ) // no free batch found, allocate a new one
         { 
            currentBatch_ = allocateBatch( objectsPerPage_ );
            currentBatch_->next_ = batches_; // insert at the head of the list
            batches_ = currentBatch_;
         }
      }
      AllocatedType *allocated = currentBatch_->used_;
      currentBatch_->used_ += objectPerAllocation;
      return allocated;
   }

   /// Release the object.
   /// @warning it is the responsability of the caller to actually destruct the object.
   void release( AllocatedType *object )
   {
      assert( object != 0 );
      *(AllocatedType **)object = freeHead_;
      freeHead_ = object;
   }

private:
   struct BatchInfo
   {
      BatchInfo *next_;
      AllocatedType *used_;
      AllocatedType *end_;
      AllocatedType buffer_[objectPerAllocation];
   };

   // disabled copy constructor and assignement operator.
   BatchAllocator( const BatchAllocator & );
   void operator =( const BatchAllocator &);

   static BatchInfo *allocateBatch( unsigned int objectsPerPage )
   {
      const unsigned int mallocSize = sizeof(BatchInfo) - sizeof(AllocatedType)* objectPerAllocation
                                + sizeof(AllocatedType) * objectPerAllocation * objectsPerPage;
      BatchInfo *batch = static_cast<BatchInfo*>( malloc( mallocSize ) );
      batch->next_ = 0;
      batch->used_ = batch->buffer_;
      batch->end_ = batch->buffer_ + objectsPerPage;
      return batch;
   }

   BatchInfo *batches_;
   BatchInfo *currentBatch_;
   /// Head of a single linked list within the allocated space of freeed object
   AllocatedType *freeHead_;
   unsigned int objectsPerPage_;
};


} // namespace Json

# endif // ifndef JSONCPP_DOC_INCLUDE_IMPLEMENTATION

#endif // JSONCPP_BATCHALLOCATOR_H_INCLUDED


```

`samples-android/Common/external/jsoncpp/src/lib_json/json_internalarray.inl`:

```inl
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
// included by json_value.cpp
// everything is within Json namespace

// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class ValueInternalArray
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

ValueArrayAllocator::~ValueArrayAllocator()
{
}

// //////////////////////////////////////////////////////////////////
// class DefaultValueArrayAllocator
// //////////////////////////////////////////////////////////////////
#ifdef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR
class DefaultValueArrayAllocator : public ValueArrayAllocator
{
public: // overridden from ValueArrayAllocator
   virtual ~DefaultValueArrayAllocator()
   {
   }

   virtual ValueInternalArray *newArray()
   {
      return new ValueInternalArray();
   }

   virtual ValueInternalArray *newArrayCopy( const ValueInternalArray &other )
   {
      return new ValueInternalArray( other );
   }

   virtual void destructArray( ValueInternalArray *array )
   {
      delete array;
   }

   virtual void reallocateArrayPageIndex( Value **&indexes, 
                                          ValueInternalArray::PageIndex &indexCount,
                                          ValueInternalArray::PageIndex minNewIndexCount )
   {
      ValueInternalArray::PageIndex newIndexCount = (indexCount*3)/2 + 1;
      if ( minNewIndexCount > newIndexCount )
         newIndexCount = minNewIndexCount;
      void *newIndexes = realloc( indexes, sizeof(Value*) * newIndexCount );
      if ( !newIndexes )
         throw std::bad_alloc();
      indexCount = newIndexCount;
      indexes = static_cast<Value **>( newIndexes );
   }
   virtual void releaseArrayPageIndex( Value **indexes, 
                                       ValueInternalArray::PageIndex indexCount )
   {
      if ( indexes )
         free( indexes );
   }

   virtual Value *allocateArrayPage()
   {
      return static_cast<Value *>( malloc( sizeof(Value) * ValueInternalArray::itemsPerPage ) );
   }

   virtual void releaseArrayPage( Value *value )
   {
      if ( value )
         free( value );
   }
};

#else // #ifdef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR
/// @todo make this thread-safe (lock when accessign batch allocator)
class DefaultValueArrayAllocator : public ValueArrayAllocator
{
public: // overridden from ValueArrayAllocator
   virtual ~DefaultValueArrayAllocator()
   {
   }

   virtual ValueInternalArray *newArray()
   {
      ValueInternalArray *array = arraysAllocator_.allocate();
      new (array) ValueInternalArray(); // placement new
      return array;
   }

   virtual ValueInternalArray *newArrayCopy( const ValueInternalArray &other )
   {
      ValueInternalArray *array = arraysAllocator_.allocate();
      new (array) ValueInternalArray( other ); // placement new
      return array;
   }

   virtual void destructArray( ValueInternalArray *array )
   {
      if ( array )
      {
         array->~ValueInternalArray();
         arraysAllocator_.release( array );
      }
   }

   virtual void reallocateArrayPageIndex( Value **&indexes, 
                                          ValueInternalArray::PageIndex &indexCount,
                                          ValueInternalArray::PageIndex minNewIndexCount )
   {
      ValueInternalArray::PageIndex newIndexCount = (indexCount*3)/2 + 1;
      if ( minNewIndexCount > newIndexCount )
         newIndexCount = minNewIndexCount;
      void *newIndexes = realloc( indexes, sizeof(Value*) * newIndexCount );
      if ( !newIndexes )
         throw std::bad_alloc();
      indexCount = newIndexCount;
      indexes = static_cast<Value **>( newIndexes );
   }
   virtual void releaseArrayPageIndex( Value **indexes, 
                                       ValueInternalArray::PageIndex indexCount )
   {
      if ( indexes )
         free( indexes );
   }

   virtual Value *allocateArrayPage()
   {
      return static_cast<Value *>( pagesAllocator_.allocate() );
   }

   virtual void releaseArrayPage( Value *value )
   {
      if ( value )
         pagesAllocator_.release( value );
   }
private:
   BatchAllocator<ValueInternalArray,1> arraysAllocator_;
   BatchAllocator<Value,ValueInternalArray::itemsPerPage> pagesAllocator_;
};
#endif // #ifdef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR

static ValueArrayAllocator *&arrayAllocator()
{
   static DefaultValueArrayAllocator defaultAllocator;
   static ValueArrayAllocator *arrayAllocator = &defaultAllocator;
   return arrayAllocator;
}

static struct DummyArrayAllocatorInitializer {
   DummyArrayAllocatorInitializer() 
   {
      arrayAllocator();      // ensure arrayAllocator() statics are initialized before main().
   }
} dummyArrayAllocatorInitializer;

// //////////////////////////////////////////////////////////////////
// class ValueInternalArray
// //////////////////////////////////////////////////////////////////
bool 
ValueInternalArray::equals( const IteratorState &x, 
                            const IteratorState &other )
{
   return x.array_ == other.array_  
          &&  x.currentItemIndex_ == other.currentItemIndex_  
          &&  x.currentPageIndex_ == other.currentPageIndex_;
}


void 
ValueInternalArray::increment( IteratorState &it )
{
   JSON_ASSERT_MESSAGE( it.array_  &&
      (it.currentPageIndex_ - it.array_->pages_)*itemsPerPage + it.currentItemIndex_
      != it.array_->size_,
      "ValueInternalArray::increment(): moving iterator beyond end" );
   ++(it.currentItemIndex_);
   if ( it.currentItemIndex_ == itemsPerPage )
   {
      it.currentItemIndex_ = 0;
      ++(it.currentPageIndex_);
   }
}


void 
ValueInternalArray::decrement( IteratorState &it )
{
   JSON_ASSERT_MESSAGE( it.array_  &&  it.currentPageIndex_ == it.array_->pages_ 
                        &&  it.currentItemIndex_ == 0,
      "ValueInternalArray::decrement(): moving iterator beyond end" );
   if ( it.currentItemIndex_ == 0 )
   {
      it.currentItemIndex_ = itemsPerPage-1;
      --(it.currentPageIndex_);
   }
   else
   {
      --(it.currentItemIndex_);
   }
}


Value &
ValueInternalArray::unsafeDereference( const IteratorState &it )
{
   return (*(it.currentPageIndex_))[it.currentItemIndex_];
}


Value &
ValueInternalArray::dereference( const IteratorState &it )
{
   JSON_ASSERT_MESSAGE( it.array_  &&
      (it.currentPageIndex_ - it.array_->pages_)*itemsPerPage + it.currentItemIndex_
      < it.array_->size_,
      "ValueInternalArray::dereference(): dereferencing invalid iterator" );
   return unsafeDereference( it );
}

void 
ValueInternalArray::makeBeginIterator( IteratorState &it ) const
{
   it.array_ = const_cast<ValueInternalArray *>( this );
   it.currentItemIndex_ = 0;
   it.currentPageIndex_ = pages_;
}


void 
ValueInternalArray::makeIterator( IteratorState &it, ArrayIndex index ) const
{
   it.array_ = const_cast<ValueInternalArray *>( this );
   it.currentItemIndex_ = index % itemsPerPage;
   it.currentPageIndex_ = pages_ + index / itemsPerPage;
}


void 
ValueInternalArray::makeEndIterator( IteratorState &it ) const
{
   makeIterator( it, size_ );
}


ValueInternalArray::ValueInternalArray()
   : pages_( 0 )
   , size_( 0 )
   , pageCount_( 0 )
{
}


ValueInternalArray::ValueInternalArray( const ValueInternalArray &other )
   : pages_( 0 )
   , pageCount_( 0 )
   , size_( other.size_ )
{
   PageIndex minNewPages = other.size_ / itemsPerPage;
   arrayAllocator()->reallocateArrayPageIndex( pages_, pageCount_, minNewPages );
   JSON_ASSERT_MESSAGE( pageCount_ >= minNewPages, 
                        "ValueInternalArray::reserve(): bad reallocation" );
   IteratorState itOther;
   other.makeBeginIterator( itOther );
   Value *value;
   for ( ArrayIndex index = 0; index < size_; ++index, increment(itOther) )
   {
      if ( index % itemsPerPage == 0 )
      {
         PageIndex pageIndex = index / itemsPerPage;
         value = arrayAllocator()->allocateArrayPage();
         pages_[pageIndex] = value;
      }
      new (value) Value( dereference( itOther ) );
   }
}


ValueInternalArray &
ValueInternalArray::operator =( const ValueInternalArray &other )
{
   ValueInternalArray temp( other );
   swap( temp );
   return *this;
}


ValueInternalArray::~ValueInternalArray()
{
   // destroy all constructed items
   IteratorState it;
   IteratorState itEnd;
   makeBeginIterator( it);
   makeEndIterator( itEnd );
   for ( ; !equals(it,itEnd); increment(it) )
   {
      Value *value = &dereference(it);
      value->~Value();
   }
   // release all pages
   PageIndex lastPageIndex = size_ / itemsPerPage;
   for ( PageIndex pageIndex = 0; pageIndex < lastPageIndex; ++pageIndex )
      arrayAllocator()->releaseArrayPage( pages_[pageIndex] );
   // release pages index
   arrayAllocator()->releaseArrayPageIndex( pages_, pageCount_ );
}


void 
ValueInternalArray::swap( ValueInternalArray &other )
{
   Value **tempPages = pages_;
   pages_ = other.pages_;
   other.pages_ = tempPages;
   ArrayIndex tempSize = size_;
   size_ = other.size_;
   other.size_ = tempSize;
   PageIndex tempPageCount = pageCount_;
   pageCount_ = other.pageCount_;
   other.pageCount_ = tempPageCount;
}

void 
ValueInternalArray::clear()
{
   ValueInternalArray dummy;
   swap( dummy );
}


void 
ValueInternalArray::resize( ArrayIndex newSize )
{
   if ( newSize == 0 )
      clear();
   else if ( newSize < size_ )
   {
      IteratorState it;
      IteratorState itEnd;
      makeIterator( it, newSize );
      makeIterator( itEnd, size_ );
      for ( ; !equals(it,itEnd); increment(it) )
      {
         Value *value = &dereference(it);
         value->~Value();
      }
      PageIndex pageIndex = (newSize + itemsPerPage - 1) / itemsPerPage;
      PageIndex lastPageIndex = size_ / itemsPerPage;
      for ( ; pageIndex < lastPageIndex; ++pageIndex )
         arrayAllocator()->releaseArrayPage( pages_[pageIndex] );
      size_ = newSize;
   }
   else if ( newSize > size_ )
      resolveReference( newSize );
}


void 
ValueInternalArray::makeIndexValid( ArrayIndex index )
{
   // Need to enlarge page index ?
   if ( index >= pageCount_ * itemsPerPage )
   {
      PageIndex minNewPages = (index + 1) / itemsPerPage;
      arrayAllocator()->reallocateArrayPageIndex( pages_, pageCount_, minNewPages );
      JSON_ASSERT_MESSAGE( pageCount_ >= minNewPages, "ValueInternalArray::reserve(): bad reallocation" );
   }

   // Need to allocate new pages ?
   ArrayIndex nextPageIndex = 
      (size_ % itemsPerPage) != 0 ? size_ - (size_%itemsPerPage) + itemsPerPage
                                  : size_;
   if ( nextPageIndex <= index )
   {
      PageIndex pageIndex = nextPageIndex / itemsPerPage;
      PageIndex pageToAllocate = (index - nextPageIndex) / itemsPerPage + 1;
      for ( ; pageToAllocate-- > 0; ++pageIndex )
         pages_[pageIndex] = arrayAllocator()->allocateArrayPage();
   }

   // Initialize all new entries
   IteratorState it;
   IteratorState itEnd;
   makeIterator( it, size_ );
   size_ = index + 1;
   makeIterator( itEnd, size_ );
   for ( ; !equals(it,itEnd); increment(it) )
   {
      Value *value = &dereference(it);
      new (value) Value(); // Construct a default value using placement new
   }
}

Value &
ValueInternalArray::resolveReference( ArrayIndex index )
{
   if ( index >= size_ )
      makeIndexValid( index );
   return pages_[index/itemsPerPage][index%itemsPerPage];
}

Value *
ValueInternalArray::find( ArrayIndex index ) const
{
   if ( index >= size_ )
      return 0;
   return &(pages_[index/itemsPerPage][index%itemsPerPage]);
}

ValueInternalArray::ArrayIndex 
ValueInternalArray::size() const
{
   return size_;
}

int 
ValueInternalArray::distance( const IteratorState &x, const IteratorState &y )
{
   return indexOf(y) - indexOf(x);
}


ValueInternalArray::ArrayIndex 
ValueInternalArray::indexOf( const IteratorState &iterator )
{
   if ( !iterator.array_ )
      return ArrayIndex(-1);
   return ArrayIndex(
      (iterator.currentPageIndex_ - iterator.array_->pages_) * itemsPerPage 
      + iterator.currentItemIndex_ );
}


int 
ValueInternalArray::compare( const ValueInternalArray &other ) const
{
   int sizeDiff( size_ - other.size_ );
   if ( sizeDiff != 0 )
      return sizeDiff;
   
   for ( ArrayIndex index =0; index < size_; ++index )
   {
      int diff = pages_[index/itemsPerPage][index%itemsPerPage].compare( 
         other.pages_[index/itemsPerPage][index%itemsPerPage] );
      if ( diff != 0 )
         return diff;
   }
   return 0;
}

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_internalmap.inl`:

```inl
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
// included by json_value.cpp
// everything is within Json namespace

// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class ValueInternalMap
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

/** \internal MUST be safely initialized using memset( this, 0, sizeof(ValueInternalLink) );
   * This optimization is used by the fast allocator.
   */
ValueInternalLink::ValueInternalLink()
   : previous_( 0 )
   , next_( 0 )
{
}

ValueInternalLink::~ValueInternalLink()
{ 
   for ( int index =0; index < itemPerLink; ++index )
   {
      if ( !items_[index].isItemAvailable() )
      {
         if ( !items_[index].isMemberNameStatic() )
            free( keys_[index] );
      }
      else
         break;
   }
}



ValueMapAllocator::~ValueMapAllocator()
{
}

#ifdef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR
class DefaultValueMapAllocator : public ValueMapAllocator
{
public: // overridden from ValueMapAllocator
   virtual ValueInternalMap *newMap()
   {
      return new ValueInternalMap();
   }

   virtual ValueInternalMap *newMapCopy( const ValueInternalMap &other )
   {
      return new ValueInternalMap( other );
   }

   virtual void destructMap( ValueInternalMap *map )
   {
      delete map;
   }

   virtual ValueInternalLink *allocateMapBuckets( unsigned int size )
   {
      return new ValueInternalLink[size];
   }

   virtual void releaseMapBuckets( ValueInternalLink *links )
   {
      delete [] links;
   }

   virtual ValueInternalLink *allocateMapLink()
   {
      return new ValueInternalLink();
   }

   virtual void releaseMapLink( ValueInternalLink *link )
   {
      delete link;
   }
};
#else
/// @todo make this thread-safe (lock when accessign batch allocator)
class DefaultValueMapAllocator : public ValueMapAllocator
{
public: // overridden from ValueMapAllocator
   virtual ValueInternalMap *newMap()
   {
      ValueInternalMap *map = mapsAllocator_.allocate();
      new (map) ValueInternalMap(); // placement new
      return map;
   }

   virtual ValueInternalMap *newMapCopy( const ValueInternalMap &other )
   {
      ValueInternalMap *map = mapsAllocator_.allocate();
      new (map) ValueInternalMap( other ); // placement new
      return map;
   }

   virtual void destructMap( ValueInternalMap *map )
   {
      if ( map )
      {
         map->~ValueInternalMap();
         mapsAllocator_.release( map );
      }
   }

   virtual ValueInternalLink *allocateMapBuckets( unsigned int size )
   {
      return new ValueInternalLink[size];
   }

   virtual void releaseMapBuckets( ValueInternalLink *links )
   {
      delete [] links;
   }

   virtual ValueInternalLink *allocateMapLink()
   {
      ValueInternalLink *link = linksAllocator_.allocate();
      memset( link, 0, sizeof(ValueInternalLink) );
      return link;
   }

   virtual void releaseMapLink( ValueInternalLink *link )
   {
      link->~ValueInternalLink();
      linksAllocator_.release( link );
   }
private:
   BatchAllocator<ValueInternalMap,1> mapsAllocator_;
   BatchAllocator<ValueInternalLink,1> linksAllocator_;
};
#endif

static ValueMapAllocator *&mapAllocator()
{
   static DefaultValueMapAllocator defaultAllocator;
   static ValueMapAllocator *mapAllocator = &defaultAllocator;
   return mapAllocator;
}

static struct DummyMapAllocatorInitializer {
   DummyMapAllocatorInitializer() 
   {
      mapAllocator();      // ensure mapAllocator() statics are initialized before main().
   }
} dummyMapAllocatorInitializer;



// h(K) = value * K >> w ; with w = 32 & K prime w.r.t. 2^32.

/*
use linked list hash map. 
buckets array is a container.
linked list element contains 6 key/values. (memory = (16+4) * 6 + 4 = 124)
value have extra state: valid, available, deleted
*/


ValueInternalMap::ValueInternalMap()
   : buckets_( 0 )
   , tailLink_( 0 )
   , bucketsSize_( 0 )
   , itemCount_( 0 )
{
}


ValueInternalMap::ValueInternalMap( const ValueInternalMap &other )
   : buckets_( 0 )
   , tailLink_( 0 )
   , bucketsSize_( 0 )
   , itemCount_( 0 )
{
   reserve( other.itemCount_ );
   IteratorState it;
   IteratorState itEnd;
   other.makeBeginIterator( it );
   other.makeEndIterator( itEnd );
   for ( ; !equals(it,itEnd); increment(it) )
   {
      bool isStatic;
      const char *memberName = key( it, isStatic );
      const Value &aValue = value( it );
      resolveReference(memberName, isStatic) = aValue;
   }
}


ValueInternalMap &
ValueInternalMap::operator =( const ValueInternalMap &other )
{
   ValueInternalMap dummy( other );
   swap( dummy );
   return *this;
}


ValueInternalMap::~ValueInternalMap()
{
   if ( buckets_ )
   {
      for ( BucketIndex bucketIndex =0; bucketIndex < bucketsSize_; ++bucketIndex )
      {
         ValueInternalLink *link = buckets_[bucketIndex].next_;
         while ( link )
         {
            ValueInternalLink *linkToRelease = link;
            link = link->next_;
            mapAllocator()->releaseMapLink( linkToRelease );
         }
      }
      mapAllocator()->releaseMapBuckets( buckets_ );
   }
}


void 
ValueInternalMap::swap( ValueInternalMap &other )
{
   ValueInternalLink *tempBuckets = buckets_;
   buckets_ = other.buckets_;
   other.buckets_ = tempBuckets;
   ValueInternalLink *tempTailLink = tailLink_;
   tailLink_ = other.tailLink_;
   other.tailLink_ = tempTailLink;
   BucketIndex tempBucketsSize = bucketsSize_;
   bucketsSize_ = other.bucketsSize_;
   other.bucketsSize_ = tempBucketsSize;
   BucketIndex tempItemCount = itemCount_;
   itemCount_ = other.itemCount_;
   other.itemCount_ = tempItemCount;
}


void 
ValueInternalMap::clear()
{
   ValueInternalMap dummy;
   swap( dummy );
}


ValueInternalMap::BucketIndex 
ValueInternalMap::size() const
{
   return itemCount_;
}

bool 
ValueInternalMap::reserveDelta( BucketIndex growth )
{
   return reserve( itemCount_ + growth );
}

bool 
ValueInternalMap::reserve( BucketIndex newItemCount )
{
   if ( !buckets_  &&  newItemCount > 0 )
   {
      buckets_ = mapAllocator()->allocateMapBuckets( 1 );
      bucketsSize_ = 1;
      tailLink_ = &buckets_[0];
   }
//   BucketIndex idealBucketCount = (newItemCount + ValueInternalLink::itemPerLink) / ValueInternalLink::itemPerLink;
   return true;
}


const Value *
ValueInternalMap::find( const char *key ) const
{
   if ( !bucketsSize_ )
      return 0;
   HashKey hashedKey = hash( key );
   BucketIndex bucketIndex = hashedKey % bucketsSize_;
   for ( const ValueInternalLink *current = &buckets_[bucketIndex]; 
         current != 0; 
         current = current->next_ )
   {
      for ( BucketIndex index=0; index < ValueInternalLink::itemPerLink; ++index )
      {
         if ( current->items_[index].isItemAvailable() )
            return 0;
         if ( strcmp( key, current->keys_[index] ) == 0 )
            return &current->items_[index];
      }
   }
   return 0;
}


Value *
ValueInternalMap::find( const char *key )
{
   const ValueInternalMap *constThis = this;
   return const_cast<Value *>( constThis->find( key ) );
}


Value &
ValueInternalMap::resolveReference( const char *key,
                                    bool isStatic )
{
   HashKey hashedKey = hash( key );
   if ( bucketsSize_ )
   {
      BucketIndex bucketIndex = hashedKey % bucketsSize_;
      ValueInternalLink **previous = 0;
      BucketIndex index;
      for ( ValueInternalLink *current = &buckets_[bucketIndex]; 
            current != 0; 
            previous = &current->next_, current = current->next_ )
      {
         for ( index=0; index < ValueInternalLink::itemPerLink; ++index )
         {
            if ( current->items_[index].isItemAvailable() )
               return setNewItem( key, isStatic, current, index );
            if ( strcmp( key, current->keys_[index] ) == 0 )
               return current->items_[index];
         }
      }
   }

   reserveDelta( 1 );
   return unsafeAdd( key, isStatic, hashedKey );
}


void 
ValueInternalMap::remove( const char *key )
{
   HashKey hashedKey = hash( key );
   if ( !bucketsSize_ )
      return;
   BucketIndex bucketIndex = hashedKey % bucketsSize_;
   for ( ValueInternalLink *link = &buckets_[bucketIndex]; 
         link != 0; 
         link = link->next_ )
   {
      BucketIndex index;
      for ( index =0; index < ValueInternalLink::itemPerLink; ++index )
      {
         if ( link->items_[index].isItemAvailable() )
            return;
         if ( strcmp( key, link->keys_[index] ) == 0 )
         {
            doActualRemove( link, index, bucketIndex );
            return;
         }
      }
   }
}

void 
ValueInternalMap::doActualRemove( ValueInternalLink *link, 
                                  BucketIndex index,
                                  BucketIndex bucketIndex )
{
   // find last item of the bucket and swap it with the 'removed' one.
   // set removed items flags to 'available'.
   // if last page only contains 'available' items, then desallocate it (it's empty)
   ValueInternalLink *&lastLink = getLastLinkInBucket( index );
   BucketIndex lastItemIndex = 1; // a link can never be empty, so start at 1
   for ( ;   
         lastItemIndex < ValueInternalLink::itemPerLink; 
         ++lastItemIndex ) // may be optimized with dicotomic search
   {
      if ( lastLink->items_[lastItemIndex].isItemAvailable() )
         break;
   }
   
   BucketIndex lastUsedIndex = lastItemIndex - 1;
   Value *valueToDelete = &link->items_[index];
   Value *valueToPreserve = &lastLink->items_[lastUsedIndex];
   if ( valueToDelete != valueToPreserve )
      valueToDelete->swap( *valueToPreserve );
   if ( lastUsedIndex == 0 )  // page is now empty
   {  // remove it from bucket linked list and delete it.
      ValueInternalLink *linkPreviousToLast = lastLink->previous_;
      if ( linkPreviousToLast != 0 )   // can not deleted bucket link.
      {
         mapAllocator()->releaseMapLink( lastLink );
         linkPreviousToLast->next_ = 0;
         lastLink = linkPreviousToLast;
      }
   }
   else
   {
      Value dummy;
      valueToPreserve->swap( dummy ); // restore deleted to default Value.
      valueToPreserve->setItemUsed( false );
   }
   --itemCount_;
}


ValueInternalLink *&
ValueInternalMap::getLastLinkInBucket( BucketIndex bucketIndex )
{
   if ( bucketIndex == bucketsSize_ - 1 )
      return tailLink_;
   ValueInternalLink *&previous = buckets_[bucketIndex+1].previous_;
   if ( !previous )
      previous = &buckets_[bucketIndex];
   return previous;
}


Value &
ValueInternalMap::setNewItem( const char *key, 
                              bool isStatic,
                              ValueInternalLink *link, 
                              BucketIndex index )
{
   char *duplicatedKey = valueAllocator()->makeMemberName( key );
   ++itemCount_;
   link->keys_[index] = duplicatedKey;
   link->items_[index].setItemUsed();
   link->items_[index].setMemberNameIsStatic( isStatic );
   return link->items_[index]; // items already default constructed.
}


Value &
ValueInternalMap::unsafeAdd( const char *key, 
                             bool isStatic, 
                             HashKey hashedKey )
{
   JSON_ASSERT_MESSAGE( bucketsSize_ > 0, "ValueInternalMap::unsafeAdd(): internal logic error." );
   BucketIndex bucketIndex = hashedKey % bucketsSize_;
   ValueInternalLink *&previousLink = getLastLinkInBucket( bucketIndex );
   ValueInternalLink *link = previousLink;
   BucketIndex index;
   for ( index =0; index < ValueInternalLink::itemPerLink; ++index )
   {
      if ( link->items_[index].isItemAvailable() )
         break;
   }
   if ( index == ValueInternalLink::itemPerLink ) // need to add a new page
   {
      ValueInternalLink *newLink = mapAllocator()->allocateMapLink();
      index = 0;
      link->next_ = newLink;
      previousLink = newLink;
      link = newLink;
   }
   return setNewItem( key, isStatic, link, index );
}


ValueInternalMap::HashKey 
ValueInternalMap::hash( const char *key ) const
{
   HashKey hash = 0;
   while ( *key )
      hash += *key++ * 37;
   return hash;
}


int 
ValueInternalMap::compare( const ValueInternalMap &other ) const
{
   int sizeDiff( itemCount_ - other.itemCount_ );
   if ( sizeDiff != 0 )
      return sizeDiff;
   // Strict order guaranty is required. Compare all keys FIRST, then compare values.
   IteratorState it;
   IteratorState itEnd;
   makeBeginIterator( it );
   makeEndIterator( itEnd );
   for ( ; !equals(it,itEnd); increment(it) )
   {
      if ( !other.find( key( it ) ) )
         return 1;
   }

   // All keys are equals, let's compare values
   makeBeginIterator( it );
   for ( ; !equals(it,itEnd); increment(it) )
   {
      const Value *otherValue = other.find( key( it ) );
      int valueDiff = value(it).compare( *otherValue );
      if ( valueDiff != 0 )
         return valueDiff;
   }
   return 0;
}


void 
ValueInternalMap::makeBeginIterator( IteratorState &it ) const
{
   it.map_ = const_cast<ValueInternalMap *>( this );
   it.bucketIndex_ = 0;
   it.itemIndex_ = 0;
   it.link_ = buckets_;
}


void 
ValueInternalMap::makeEndIterator( IteratorState &it ) const
{
   it.map_ = const_cast<ValueInternalMap *>( this );
   it.bucketIndex_ = bucketsSize_;
   it.itemIndex_ = 0;
   it.link_ = 0;
}


bool 
ValueInternalMap::equals( const IteratorState &x, const IteratorState &other )
{
   return x.map_ == other.map_  
          &&  x.bucketIndex_ == other.bucketIndex_  
          &&  x.link_ == other.link_
          &&  x.itemIndex_ == other.itemIndex_;
}


void 
ValueInternalMap::incrementBucket( IteratorState &iterator )
{
   ++iterator.bucketIndex_;
   JSON_ASSERT_MESSAGE( iterator.bucketIndex_ <= iterator.map_->bucketsSize_,
      "ValueInternalMap::increment(): attempting to iterate beyond end." );
   if ( iterator.bucketIndex_ == iterator.map_->bucketsSize_ )
      iterator.link_ = 0;
   else
      iterator.link_ = &(iterator.map_->buckets_[iterator.bucketIndex_]);
   iterator.itemIndex_ = 0;
}


void 
ValueInternalMap::increment( IteratorState &iterator )
{
   JSON_ASSERT_MESSAGE( iterator.map_, "Attempting to iterator using invalid iterator." );
   ++iterator.itemIndex_;
   if ( iterator.itemIndex_ == ValueInternalLink::itemPerLink )
   {
      JSON_ASSERT_MESSAGE( iterator.link_ != 0,
         "ValueInternalMap::increment(): attempting to iterate beyond end." );
      iterator.link_ = iterator.link_->next_;
      if ( iterator.link_ == 0 )
         incrementBucket( iterator );
   }
   else if ( iterator.link_->items_[iterator.itemIndex_].isItemAvailable() )
   {
      incrementBucket( iterator );
   }
}


void 
ValueInternalMap::decrement( IteratorState &iterator )
{
   if ( iterator.itemIndex_ == 0 )
   {
      JSON_ASSERT_MESSAGE( iterator.map_, "Attempting to iterate using invalid iterator." );
      if ( iterator.link_ == &iterator.map_->buckets_[iterator.bucketIndex_] )
      {
         JSON_ASSERT_MESSAGE( iterator.bucketIndex_ > 0, "Attempting to iterate beyond beginning." );
         --(iterator.bucketIndex_);
      }
      iterator.link_ = iterator.link_->previous_;
      iterator.itemIndex_ = ValueInternalLink::itemPerLink - 1;
   }
}


const char *
ValueInternalMap::key( const IteratorState &iterator )
{
   JSON_ASSERT_MESSAGE( iterator.link_, "Attempting to iterate using invalid iterator." );
   return iterator.link_->keys_[iterator.itemIndex_];
}

const char *
ValueInternalMap::key( const IteratorState &iterator, bool &isStatic )
{
   JSON_ASSERT_MESSAGE( iterator.link_, "Attempting to iterate using invalid iterator." );
   isStatic = iterator.link_->items_[iterator.itemIndex_].isMemberNameStatic();
   return iterator.link_->keys_[iterator.itemIndex_];
}


Value &
ValueInternalMap::value( const IteratorState &iterator )
{
   JSON_ASSERT_MESSAGE( iterator.link_, "Attempting to iterate using invalid iterator." );
   return iterator.link_->items_[iterator.itemIndex_];
}


int 
ValueInternalMap::distance( const IteratorState &x, const IteratorState &y )
{
   int offset = 0;
   IteratorState it = x;
   while ( !equals( it, y ) )
      increment( it );
   return offset;
}

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_reader.cpp`:

```cpp
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <json/reader.h>
#include <json/value.h>
#include <utility>
#include <cstdio>
#include <cassert>
#include <cstring>
#include <iostream>
#include <stdexcept>

namespace Json {

// Implementation of class Features
// ////////////////////////////////

Features::Features()
   : allowComments_( true )
   , strictRoot_( false )
{
}


Features
Features::all()
{
   return Features();
}


Features
Features::strictMode()
{
   Features features;
   features.allowComments_ = false;
   features.strictRoot_ = true;
   return features;
}

// Implementation of class Reader
// ////////////////////////////////


static inline bool
in( Reader::Char c, Reader::Char c1, Reader::Char c2, Reader::Char c3, Reader::Char c4 )
{
   return c == c1  ||  c == c2  ||  c == c3  ||  c == c4;
}

static inline bool
in( Reader::Char c, Reader::Char c1, Reader::Char c2, Reader::Char c3, Reader::Char c4, Reader::Char c5 )
{
   return c == c1  ||  c == c2  ||  c == c3  ||  c == c4  ||  c == c5;
}


static bool
containsNewLine( Reader::Location begin,
                 Reader::Location end )
{
   for ( ;begin < end; ++begin )
      if ( *begin == '\n'  ||  *begin == '\r' )
         return true;
   return false;
}

static std::string codePointToUTF8(unsigned int cp)
{
   std::string result;

   // based on description from http://en.wikipedia.org/wiki/UTF-8

   if (cp <= 0x7f)
   {
      result.resize(1);
      result[0] = static_cast<char>(cp);
   }
   else if (cp <= 0x7FF)
   {
      result.resize(2);
      result[1] = static_cast<char>(0x80 | (0x3f & cp));
      result[0] = static_cast<char>(0xC0 | (0x1f & (cp >> 6)));
   }
   else if (cp <= 0xFFFF)
   {
      result.resize(3);
      result[2] = static_cast<char>(0x80 | (0x3f & cp));
      result[1] = static_cast<char>(0x80 | static_cast<char>((0x3f & (cp >> 6))));
      result[0] = static_cast<char>(0xE0 | static_cast<char>((0xf & (cp >> 12))));
   }
   else if (cp <= 0x10FFFF)
   {
      result.resize(4);
      result[3] = static_cast<char>(0x80 | (0x3f & cp));
      result[2] = static_cast<char>(0x80 | (0x3f & (cp >> 6)));
      result[1] = static_cast<char>(0x80 | (0x3f & (cp >> 12)));
      result[0] = static_cast<char>(0xF0 | (0x7 & (cp >> 18)));
   }

   return result;
}


// Class Reader
// //////////////////////////////////////////////////////////////////

Reader::Reader()
   : features_( Features::all() )
{
}


Reader::Reader( const Features &features )
   : features_( features )
{
}


bool
Reader::parse( const std::string &document,
               Value &root,
               bool collectComments )
{
   document_ = document;
   const char *begin = document_.c_str();
   const char *end = begin + document_.length();
   return parse( begin, end, root, collectComments );
}


bool
Reader::parse( std::istream& sin,
               Value &root,
               bool collectComments )
{
   //std::istream_iterator<char> begin(sin);
   //std::istream_iterator<char> end;
   // Those would allow streamed input from a file, if parse() were a
   // template function.

   // Since std::string is reference-counted, this at least does not
   // create an extra copy.
   std::string doc;
   std::getline(sin, doc, (char)EOF);
   return parse( doc, root, collectComments );
}

bool
Reader::parse( const char *beginDoc, const char *endDoc,
               Value &root,
               bool collectComments )
{
   if ( !features_.allowComments_ )
   {
      collectComments = false;
   }

   begin_ = beginDoc;
   end_ = endDoc;
   collectComments_ = collectComments;
   current_ = begin_;
   lastValueEnd_ = 0;
   lastValue_ = 0;
   commentsBefore_ = "";
   errors_.clear();
   while ( !nodes_.empty() )
      nodes_.pop();
   nodes_.push( &root );

   bool successful = readValue();
   Token token;
   skipCommentTokens( token );
   if ( collectComments_  &&  !commentsBefore_.empty() )
      root.setComment( commentsBefore_, commentAfter );
   if ( features_.strictRoot_ )
   {
      if ( !root.isArray()  &&  !root.isObject() )
      {
         // Set error location to start of doc, ideally should be first token found in doc
         token.type_ = tokenError;
         token.start_ = beginDoc;
         token.end_ = endDoc;
         addError( "A valid JSON document must be either an array or an object value.",
                   token );
         return false;
      }
   }
   return successful;
}


bool
Reader::readValue()
{
   Token token;
   skipCommentTokens( token );
   bool successful = true;

   if ( collectComments_  &&  !commentsBefore_.empty() )
   {
      currentValue().setComment( commentsBefore_, commentBefore );
      commentsBefore_ = "";
   }


   switch ( token.type_ )
   {
   case tokenObjectBegin:
      successful = readObject( token );
      break;
   case tokenArrayBegin:
      successful = readArray( token );
      break;
   case tokenNumber:
      successful = decodeNumber( token );
      break;
   case tokenString:
      successful = decodeString( token );
      break;
   case tokenTrue:
      currentValue() = true;
      break;
   case tokenFalse:
      currentValue() = false;
      break;
   case tokenNull:
      currentValue() = Value();
      break;
   default:
      return addError( "Syntax error: value, object or array expected.", token );
   }

   if ( collectComments_ )
   {
      lastValueEnd_ = current_;
      lastValue_ = &currentValue();
   }

   return successful;
}


void
Reader::skipCommentTokens( Token &token )
{
   if ( features_.allowComments_ )
   {
      do
      {
         readToken( token );
      }
      while ( token.type_ == tokenComment );
   }
   else
   {
      readToken( token );
   }
}


bool
Reader::expectToken( TokenType type, Token &token, const char *message )
{
   readToken( token );
   if ( token.type_ != type )
      return addError( message, token );
   return true;
}


bool
Reader::readToken( Token &token )
{
   skipSpaces();
   token.start_ = current_;
   Char c = getNextChar();
   bool ok = true;
   switch ( c )
   {
   case '{':
      token.type_ = tokenObjectBegin;
      break;
   case '}':
      token.type_ = tokenObjectEnd;
      break;
   case '[':
      token.type_ = tokenArrayBegin;
      break;
   case ']':
      token.type_ = tokenArrayEnd;
      break;
   case '"':
      token.type_ = tokenString;
      ok = readString();
      break;
   case '/':
      token.type_ = tokenComment;
      ok = readComment();
      break;
   case '0':
   case '1':
   case '2':
   case '3':
   case '4':
   case '5':
   case '6':
   case '7':
   case '8':
   case '9':
   case '-':
      token.type_ = tokenNumber;
      readNumber();
      break;
   case 't':
      token.type_ = tokenTrue;
      ok = match( "rue", 3 );
      break;
   case 'f':
      token.type_ = tokenFalse;
      ok = match( "alse", 4 );
      break;
   case 'n':
      token.type_ = tokenNull;
      ok = match( "ull", 3 );
      break;
   case ',':
      token.type_ = tokenArraySeparator;
      break;
   case ':':
      token.type_ = tokenMemberSeparator;
      break;
   case 0:
      token.type_ = tokenEndOfStream;
      break;
   default:
      ok = false;
      break;
   }
   if ( !ok )
      token.type_ = tokenError;
   token.end_ = current_;
   return true;
}


void
Reader::skipSpaces()
{
   while ( current_ != end_ )
   {
      Char c = *current_;
      if ( c == ' '  ||  c == '\t'  ||  c == '\r'  ||  c == '\n' )
         ++current_;
      else
         break;
   }
}


bool
Reader::match( Location pattern,
               int patternLength )
{
   if ( end_ - current_ < patternLength )
      return false;
   int index = patternLength;
   while ( index-- )
      if ( current_[index] != pattern[index] )
         return false;
   current_ += patternLength;
   return true;
}


bool
Reader::readComment()
{
   Location commentBegin = current_ - 1;
   Char c = getNextChar();
   bool successful = false;
   if ( c == '*' )
      successful = readCStyleComment();
   else if ( c == '/' )
      successful = readCppStyleComment();
   if ( !successful )
      return false;

   if ( collectComments_ )
   {
      CommentPlacement placement = commentBefore;
      if ( lastValueEnd_  &&  !containsNewLine( lastValueEnd_, commentBegin ) )
      {
         if ( c != '*'  ||  !containsNewLine( commentBegin, current_ ) )
            placement = commentAfterOnSameLine;
      }

      addComment( commentBegin, current_, placement );
   }
   return true;
}


void
Reader::addComment( Location begin,
                    Location end,
                    CommentPlacement placement )
{
   assert( collectComments_ );
   if ( placement == commentAfterOnSameLine )
   {
      assert( lastValue_ != 0 );
      lastValue_->setComment( std::string( begin, end ), placement );
   }
   else
   {
      if ( !commentsBefore_.empty() )
         commentsBefore_ += "\n";
      commentsBefore_ += std::string( begin, end );
   }
}


bool
Reader::readCStyleComment()
{
   while ( current_ != end_ )
   {
      Char c = getNextChar();
      if ( c == '*'  &&  *current_ == '/' )
         break;
   }
   return getNextChar() == '/';
}


bool
Reader::readCppStyleComment()
{
   while ( current_ != end_ )
   {
      Char c = getNextChar();
      if (  c == '\r'  ||  c == '\n' )
         break;
   }
   return true;
}


void
Reader::readNumber()
{
   while ( current_ != end_ )
   {
      if ( !(*current_ >= '0'  &&  *current_ <= '9')  &&
           !in( *current_, '.', 'e', 'E', '+', '-' ) )
         break;
      ++current_;
   }
}

bool
Reader::readString()
{
   Char c = 0;
   while ( current_ != end_ )
   {
      c = getNextChar();
      if ( c == '\\' )
         getNextChar();
      else if ( c == '"' )
         break;
   }
   return c == '"';
}


bool
Reader::readObject( Token &tokenStart )
{
   Token tokenName;
   std::string name;
   currentValue() = Value( objectValue );
   while ( readToken( tokenName ) )
   {
      bool initialTokenOk = true;
      while ( tokenName.type_ == tokenComment  &&  initialTokenOk )
         initialTokenOk = readToken( tokenName );
      if  ( !initialTokenOk )
         break;
      if ( tokenName.type_ == tokenObjectEnd  &&  name.empty() )  // empty object
         return true;
      if ( tokenName.type_ != tokenString )
         break;

      name = "";
      if ( !decodeString( tokenName, name ) )
         return recoverFromError( tokenObjectEnd );

      Token colon;
      if ( !readToken( colon ) ||  colon.type_ != tokenMemberSeparator )
      {
         return addErrorAndRecover( "Missing ':' after object member name",
                                    colon,
                                    tokenObjectEnd );
      }
      Value &value = currentValue()[ name ];
      nodes_.push( &value );
      bool ok = readValue();
      nodes_.pop();
      if ( !ok ) // error already set
         return recoverFromError( tokenObjectEnd );

      Token comma;
      if ( !readToken( comma )
            ||  ( comma.type_ != tokenObjectEnd  &&
                  comma.type_ != tokenArraySeparator &&
          comma.type_ != tokenComment ) )
      {
         return addErrorAndRecover( "Missing ',' or '}' in object declaration",
                                    comma,
                                    tokenObjectEnd );
      }
      bool finalizeTokenOk = true;
      while ( comma.type_ == tokenComment &&
              finalizeTokenOk )
         finalizeTokenOk = readToken( comma );
      if ( comma.type_ == tokenObjectEnd )
         return true;
   }
   return addErrorAndRecover( "Missing '}' or object member name",
                              tokenName,
                              tokenObjectEnd );
}


bool
Reader::readArray( Token &tokenStart )
{
   currentValue() = Value( arrayValue );
   skipSpaces();
   if ( *current_ == ']' ) // empty array
   {
      Token endArray;
      readToken( endArray );
      return true;
   }
   int index = 0;
   while ( true )
   {
      Value &value = currentValue()[ index++ ];
      nodes_.push( &value );
      bool ok = readValue();
      nodes_.pop();
      if ( !ok ) // error already set
         return recoverFromError( tokenArrayEnd );

      Token token;
      // Accept Comment after last item in the array.
      ok = readToken( token );
      while ( token.type_ == tokenComment  &&  ok )
      {
         ok = readToken( token );
      }
      bool badTokenType = ( token.type_ == tokenArraySeparator  &&
                            token.type_ == tokenArrayEnd );
      if ( !ok  ||  badTokenType )
      {
         return addErrorAndRecover( "Missing ',' or ']' in array declaration",
                                    token,
                                    tokenArrayEnd );
      }
      if ( token.type_ == tokenArrayEnd )
         break;
   }
   return true;
}


bool
Reader::decodeNumber( Token &token )
{
   bool isDouble = false;
   for ( Location inspect = token.start_; inspect != token.end_; ++inspect )
   {
      isDouble = isDouble
                 ||  in( *inspect, '.', 'e', 'E', '+' )
                 ||  ( *inspect == '-'  &&  inspect != token.start_ );
   }
   if ( isDouble )
      return decodeDouble( token );
   Location current = token.start_;
   bool isNegative = *current == '-';
   if ( isNegative )
      ++current;
   Value::UInt threshold = (isNegative ? Value::UInt(-Value::minInt)
                                       : Value::maxUInt) / 10;
   Value::UInt value = 0;
   while ( current < token.end_ )
   {
      Char c = *current++;
      if ( c < '0'  ||  c > '9' )
         return addError( "'" + std::string( token.start_, token.end_ ) + "' is not a number.", token );
      if ( value >= threshold )
         return decodeDouble( token );
      value = value * 10 + Value::UInt(c - '0');
   }
   if ( isNegative )
      currentValue() = -Value::Int( value );
   else if ( value <= Value::UInt(Value::maxInt) )
      currentValue() = Value::Int( value );
   else
      currentValue() = value;
   return true;
}


bool
Reader::decodeDouble( Token &token )
{
   double value = 0;
   const int bufferSize = 32;
   int count;
   size_t length = token.end_ - token.start_;
   if ( length <= bufferSize )
   {
      Char buffer[bufferSize];
      memcpy( buffer, token.start_, length );
      buffer[length] = 0;
      count = sscanf( buffer, "%lf", &value );
   }
   else
   {
      std::string buffer( token.start_, token.end_ );
      count = sscanf( buffer.c_str(), "%lf", &value );
   }

   if ( count != 1 )
      return addError( "'" + std::string( token.start_, token.end_ ) + "' is not a number.", token );
   currentValue() = value;
   return true;
}


bool
Reader::decodeString( Token &token )
{
   std::string decoded;
   if ( !decodeString( token, decoded ) )
      return false;
   currentValue() = decoded;
   return true;
}


bool
Reader::decodeString( Token &token, std::string &decoded )
{
   decoded.reserve( token.end_ - token.start_ - 2 );
   Location current = token.start_ + 1; // skip '"'
   Location end = token.end_ - 1;      // do not include '"'
   while ( current != end )
   {
      Char c = *current++;
      if ( c == '"' )
         break;
      else if ( c == '\\' )
      {
         if ( current == end )
            return addError( "Empty escape sequence in string", token, current );
         Char escape = *current++;
         switch ( escape )
         {
         case '"': decoded += '"'; break;
         case '/': decoded += '/'; break;
         case '\\': decoded += '\\'; break;
         case 'b': decoded += '\b'; break;
         case 'f': decoded += '\f'; break;
         case 'n': decoded += '\n'; break;
         case 'r': decoded += '\r'; break;
         case 't': decoded += '\t'; break;
         case 'u':
            {
               unsigned int unicode;
               if ( !decodeUnicodeCodePoint( token, current, end, unicode ) )
                  return false;
               decoded += codePointToUTF8(unicode);
            }
            break;
         default:
            return addError( "Bad escape sequence in string", token, current );
         }
      }
      else
      {
         decoded += c;
      }
   }
   return true;
}

bool
Reader::decodeUnicodeCodePoint( Token &token,
                                     Location &current,
                                     Location end,
                                     unsigned int &unicode )
{

   if ( !decodeUnicodeEscapeSequence( token, current, end, unicode ) )
      return false;
   if (unicode >= 0xD800 && unicode <= 0xDBFF)
   {
      // surrogate pairs
      if (end - current < 6)
         return addError( "additional six characters expected to parse unicode surrogate pair.", token, current );
      unsigned int surrogatePair;
      if (*(current++) == '\\' && *(current++)== 'u')
      {
         if (decodeUnicodeEscapeSequence( token, current, end, surrogatePair ))
         {
            unicode = 0x10000 + ((unicode & 0x3FF) << 10) + (surrogatePair & 0x3FF);
         }
         else
            return false;
      }
      else
         return addError( "expecting another \\u token to begin the second half of a unicode surrogate pair", token, current );
   }
   return true;
}

bool
Reader::decodeUnicodeEscapeSequence( Token &token,
                                     Location &current,
                                     Location end,
                                     unsigned int &unicode )
{
   if ( end - current < 4 )
      return addError( "Bad unicode escape sequence in string: four digits expected.", token, current );
   unicode = 0;
   for ( int index =0; index < 4; ++index )
   {
      Char c = *current++;
      unicode *= 16;
      if ( c >= '0'  &&  c <= '9' )
         unicode += c - '0';
      else if ( c >= 'a'  &&  c <= 'f' )
         unicode += c - 'a' + 10;
      else if ( c >= 'A'  &&  c <= 'F' )
         unicode += c - 'A' + 10;
      else
         return addError( "Bad unicode escape sequence in string: hexadecimal digit expected.", token, current );
   }
   return true;
}


bool
Reader::addError( const std::string &message,
                  Token &token,
                  Location extra )
{
   ErrorInfo info;
   info.token_ = token;
   info.message_ = message;
   info.extra_ = extra;
   errors_.push_back( info );
   return false;
}


bool
Reader::recoverFromError( TokenType skipUntilToken )
{
   unsigned long errorCount = errors_.size();
   Token skip;
   while ( true )
   {
      if ( !readToken(skip) )
         errors_.resize( errorCount ); // discard errors caused by recovery
      if ( skip.type_ == skipUntilToken  ||  skip.type_ == tokenEndOfStream )
         break;
   }
   errors_.resize( errorCount );
   return false;
}


bool
Reader::addErrorAndRecover( const std::string &message,
                            Token &token,
                            TokenType skipUntilToken )
{
   addError( message, token );
   return recoverFromError( skipUntilToken );
}


Value &
Reader::currentValue()
{
   return *(nodes_.top());
}


Reader::Char
Reader::getNextChar()
{
   if ( current_ == end_ )
      return 0;
   return *current_++;
}


void
Reader::getLocationLineAndColumn( Location location,
                                  int &line,
                                  int &column ) const
{
   Location current = begin_;
   Location lastLineStart = current;
   line = 0;
   while ( current < location  &&  current != end_ )
   {
      Char c = *current++;
      if ( c == '\r' )
      {
         if ( *current == '\n' )
            ++current;
         lastLineStart = current;
         ++line;
      }
      else if ( c == '\n' )
      {
         lastLineStart = current;
         ++line;
      }
   }
   // column & line start at 1
   column = int(location - lastLineStart) + 1;
   ++line;
}


std::string
Reader::getLocationLineAndColumn( Location location ) const
{
   int line, column;
   getLocationLineAndColumn( location, line, column );
   char buffer[18+16+16+1];
   sprintf( buffer, "Line %d, Column %d", line, column );
   return buffer;
}


std::string
Reader::getFormatedErrorMessages() const
{
   std::string formattedMessage;
   for ( Errors::const_iterator itError = errors_.begin();
         itError != errors_.end();
         ++itError )
   {
      const ErrorInfo &error = *itError;
      formattedMessage += "* " + getLocationLineAndColumn( error.token_.start_ ) + "\n";
      formattedMessage += "  " + error.message_ + "\n";
      if ( error.extra_ )
         formattedMessage += "See " + getLocationLineAndColumn( error.extra_ ) + " for detail.\n";
   }
   return formattedMessage;
}


std::istream& operator>>( std::istream &sin, Value &root )
{
    Json::Reader reader;
    reader.parse(sin, root, true);
    return sin;
}


} // namespace Json

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_value.cpp`:

```cpp
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include <iostream>
#include <json/value.h>
#include <json/writer.h>
#include <utility>
#include <stdexcept>
#include <cstring>
#include <cassert>
#ifdef JSON_USE_CPPTL
# include <cpptl/conststring.h>
#endif
#include <cstddef>    // size_t
#ifndef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR
# include "json_batchallocator.h"
#endif // #ifndef JSON_USE_SIMPLE_INTERNAL_ALLOCATOR

#define JSON_ASSERT_UNREACHABLE assert( false )
#define JSON_ASSERT( condition ) assert( condition );  // @todo <= change this into an exception throw
#if 0
#define JSON_ASSERT_MESSAGE( condition, message ) if (!( condition )) throw std::runtime_error( message );
#else
#define JSON_ASSERT_MESSAGE( condition, message )
#endif

namespace Json {

const Value Value::null;
const Int Value::minInt = Int( ~(UInt(-1)/2) );
const Int Value::maxInt = Int( UInt(-1)/2 );
const UInt Value::maxUInt = UInt(-1);

// A "safe" implementation of strdup. Allow null pointer to be passed.
// Also avoid warning on msvc80.
//
//inline char *safeStringDup( const char *czstring )
//{
//   if ( czstring )
//   {
//      const size_t length = (unsigned int)( strlen(czstring) + 1 );
//      char *newString = static_cast<char *>( malloc( length ) );
//      memcpy( newString, czstring, length );
//      return newString;
//   }
//   return 0;
//}
//
//inline char *safeStringDup( const std::string &str )
//{
//   if ( !str.empty() )
//   {
//      const size_t length = str.length();
//      char *newString = static_cast<char *>( malloc( length + 1 ) );
//      memcpy( newString, str.c_str(), length );
//      newString[length] = 0;
//      return newString;
//   }
//   return 0;
//}

ValueAllocator::~ValueAllocator()
{
}

class DefaultValueAllocator : public ValueAllocator
{
public:
   virtual ~DefaultValueAllocator()
   {
   }

   virtual char *makeMemberName( const char *memberName )
   {
      return duplicateStringValue( memberName );
   }

   virtual void releaseMemberName( char *memberName )
   {
      releaseStringValue( memberName );
   }

   virtual char *duplicateStringValue( const char *value,
                                       unsigned int length = unknown )
   {
      //@todo invesgate this old optimization
      //if ( !value  ||  value[0] == 0 )
      //   return 0;

      if ( length == unknown )
         length = (unsigned int)strlen(value);
      char *newString = static_cast<char *>( malloc( length + 1 ) );
      memcpy( newString, value, length );
      newString[length] = 0;
      return newString;
   }

   virtual void releaseStringValue( char *value )
   {
      if ( value )
         free( value );
   }
};

static ValueAllocator *&valueAllocator()
{
   static DefaultValueAllocator defaultAllocator;
   static ValueAllocator *valueAllocator = &defaultAllocator;
   return valueAllocator;
}

static struct DummyValueAllocatorInitializer {
   DummyValueAllocatorInitializer()
   {
      valueAllocator();      // ensure valueAllocator() statics are initialized before main().
   }
} dummyValueAllocatorInitializer;



// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// ValueInternals...
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
#ifdef JSON_VALUE_USE_INTERNAL_MAP
# include "json_internalarray.inl"
# include "json_internalmap.inl"
#endif // JSON_VALUE_USE_INTERNAL_MAP

# include "json_valueiterator.inl"


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class Value::CommentInfo
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////


Value::CommentInfo::CommentInfo()
   : comment_( 0 )
{
}

Value::CommentInfo::~CommentInfo()
{
   if ( comment_ )
      valueAllocator()->releaseStringValue( comment_ );
}


void
Value::CommentInfo::setComment( const char *text )
{
   if ( comment_ )
      valueAllocator()->releaseStringValue( comment_ );
   JSON_ASSERT( text );
   JSON_ASSERT_MESSAGE( text[0]=='\0' || text[0]=='/', "Comments must start with /");
   // It seems that /**/ style comments are acceptable as well.
   comment_ = valueAllocator()->duplicateStringValue( text );
}


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class Value::CZString
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
# ifndef JSON_VALUE_USE_INTERNAL_MAP

// Notes: index_ indicates if the string was allocated when
// a string is stored.

Value::CZString::CZString( int index )
   : cstr_( 0 )
   , index_( index )
{
}

Value::CZString::CZString( const char *cstr, DuplicationPolicy allocate )
   : cstr_( allocate == duplicate ? valueAllocator()->makeMemberName(cstr)
                                  : cstr )
   , index_( allocate )
{
}

Value::CZString::CZString( const CZString &other )
: cstr_( other.index_ != noDuplication &&  other.cstr_ != 0
                ?  valueAllocator()->makeMemberName( other.cstr_ )
                : other.cstr_ )
   , index_( other.cstr_ ? (other.index_ == noDuplication ? noDuplication : duplicate)
                         : other.index_ )
{
}

Value::CZString::~CZString()
{
   if ( cstr_  &&  index_ == duplicate )
      valueAllocator()->releaseMemberName( const_cast<char *>( cstr_ ) );
}

void
Value::CZString::swap( CZString &other )
{
   std::swap( cstr_, other.cstr_ );
   std::swap( index_, other.index_ );
}

Value::CZString &
Value::CZString::operator =( const CZString &other )
{
   CZString temp( other );
   swap( temp );
   return *this;
}

bool
Value::CZString::operator<( const CZString &other ) const
{
   if ( cstr_ )
      return strcmp( cstr_, other.cstr_ ) < 0;
   return index_ < other.index_;
}

bool
Value::CZString::operator==( const CZString &other ) const
{
   if ( cstr_ )
      return strcmp( cstr_, other.cstr_ ) == 0;
   return index_ == other.index_;
}


int
Value::CZString::index() const
{
   return index_;
}


const char *
Value::CZString::c_str() const
{
   return cstr_;
}

bool
Value::CZString::isStaticString() const
{
   return index_ == noDuplication;
}

#endif // ifndef JSON_VALUE_USE_INTERNAL_MAP


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class Value::Value
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

/*! \internal Default constructor initialization must be equivalent to:
 * memset( this, 0, sizeof(Value) )
 * This optimization is used in ValueInternalMap fast allocator.
 */
Value::Value( ValueType type )
   : type_( type )
   , allocated_( 0 )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   switch ( type )
   {
   case nullValue:
      break;
   case intValue:
   case uintValue:
      value_.int_ = 0;
      break;
   case realValue:
      value_.real_ = 0.0;
      break;
   case stringValue:
      value_.string_ = 0;
      break;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      value_.map_ = new ObjectValues();
      break;
#else
   case arrayValue:
      value_.array_ = arrayAllocator()->newArray();
      break;
   case objectValue:
      value_.map_ = mapAllocator()->newMap();
      break;
#endif
   case booleanValue:
      value_.bool_ = false;
      break;
   default:
      JSON_ASSERT_UNREACHABLE;
   }
}


Value::Value( Int value )
   : type_( intValue )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.int_ = value;
}


Value::Value( UInt value )
   : type_( uintValue )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.uint_ = value;
}

Value::Value( double value )
   : type_( realValue )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.real_ = value;
}

Value::Value( const char *value )
   : type_( stringValue )
   , allocated_( true )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.string_ = valueAllocator()->duplicateStringValue( value );
}


Value::Value( const char *beginValue,
              const char *endValue )
   : type_( stringValue )
   , allocated_( true )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.string_ = valueAllocator()->duplicateStringValue( beginValue,
                                                            UInt(endValue - beginValue) );
}


Value::Value( const std::string &value )
   : type_( stringValue )
   , allocated_( true )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.string_ = valueAllocator()->duplicateStringValue( value.c_str(),
                                                            (unsigned int)value.length() );

}

Value::Value( const StaticString &value )
   : type_( stringValue )
   , allocated_( false )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.string_ = const_cast<char *>( value.c_str() );
}


# ifdef JSON_USE_CPPTL
Value::Value( const CppTL::ConstString &value )
   : type_( stringValue )
   , allocated_( true )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.string_ = valueAllocator()->duplicateStringValue( value, value.length() );
}
# endif

Value::Value( bool value )
   : type_( booleanValue )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   value_.bool_ = value;
}


Value::Value( const Value &other )
   : type_( other.type_ )
   , comments_( 0 )
# ifdef JSON_VALUE_USE_INTERNAL_MAP
   , itemIsUsed_( 0 )
#endif
{
   switch ( type_ )
   {
   case nullValue:
   case intValue:
   case uintValue:
   case realValue:
   case booleanValue:
      value_ = other.value_;
      break;
   case stringValue:
      if ( other.value_.string_ )
      {
         value_.string_ = valueAllocator()->duplicateStringValue( other.value_.string_ );
         allocated_ = true;
      }
      else
         value_.string_ = 0;
      break;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      value_.map_ = new ObjectValues( *other.value_.map_ );
      break;
#else
   case arrayValue:
      value_.array_ = arrayAllocator()->newArrayCopy( *other.value_.array_ );
      break;
   case objectValue:
      value_.map_ = mapAllocator()->newMapCopy( *other.value_.map_ );
      break;
#endif
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   if ( other.comments_ )
   {
      comments_ = new CommentInfo[numberOfCommentPlacement];
      for ( int comment =0; comment < numberOfCommentPlacement; ++comment )
      {
         const CommentInfo &otherComment = other.comments_[comment];
         if ( otherComment.comment_ )
            comments_[comment].setComment( otherComment.comment_ );
      }
   }
}


Value::~Value()
{
   switch ( type_ )
   {
   case nullValue:
   case intValue:
   case uintValue:
   case realValue:
   case booleanValue:
      break;
   case stringValue:
      if ( allocated_ )
         valueAllocator()->releaseStringValue( value_.string_ );
      break;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      delete value_.map_;
      break;
#else
   case arrayValue:
      arrayAllocator()->destructArray( value_.array_ );
      break;
   case objectValue:
      mapAllocator()->destructMap( value_.map_ );
      break;
#endif
   default:
      JSON_ASSERT_UNREACHABLE;
   }

   if ( comments_ )
      delete[] comments_;
}

Value &
Value::operator=( const Value &other )
{
   Value temp( other );
   swap( temp );
   return *this;
}

void
Value::swap( Value &other )
{
   ValueType temp = type_;
   type_ = other.type_;
   other.type_ = temp;
   std::swap( value_, other.value_ );
   int temp2 = allocated_;
   allocated_ = other.allocated_;
   other.allocated_ = temp2;
}

ValueType
Value::type() const
{
   return type_;
}


int
Value::compare( const Value &other )
{
   /*
   int typeDelta = other.type_ - type_;
   switch ( type_ )
   {
   case nullValue:

      return other.type_ == type_;
   case intValue:
      if ( other.type_.isNumeric()
   case uintValue:
   case realValue:
   case booleanValue:
      break;
   case stringValue,
      break;
   case arrayValue:
      delete value_.array_;
      break;
   case objectValue:
      delete value_.map_;
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   */
   return 0;  // unreachable
}

bool
Value::operator <( const Value &other ) const
{
   int typeDelta = type_ - other.type_;
   if ( typeDelta )
      return typeDelta < 0 ? true : false;
   switch ( type_ )
   {
   case nullValue:
      return false;
   case intValue:
      return value_.int_ < other.value_.int_;
   case uintValue:
      return value_.uint_ < other.value_.uint_;
   case realValue:
      return value_.real_ < other.value_.real_;
   case booleanValue:
      return value_.bool_ < other.value_.bool_;
   case stringValue:
      return ( value_.string_ == 0  &&  other.value_.string_ )
             || ( other.value_.string_
                  &&  value_.string_
                  && strcmp( value_.string_, other.value_.string_ ) < 0 );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      {
         int delta = int( value_.map_->size() - other.value_.map_->size() );
         if ( delta )
            return delta < 0;
         return (*value_.map_) < (*other.value_.map_);
      }
#else
   case arrayValue:
      return value_.array_->compare( *(other.value_.array_) ) < 0;
   case objectValue:
      return value_.map_->compare( *(other.value_.map_) ) < 0;
#endif
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0;  // unreachable
}

bool
Value::operator <=( const Value &other ) const
{
   return !(other > *this);
}

bool
Value::operator >=( const Value &other ) const
{
   return !(*this < other);
}

bool
Value::operator >( const Value &other ) const
{
   return other < *this;
}

bool
Value::operator ==( const Value &other ) const
{
   //if ( type_ != other.type_ )
   // GCC 2.95.3 says:
   // attempt to take address of bit-field structure member `Json::Value::type_'
   // Beats me, but a temp solves the problem.
   int temp = other.type_;
   if ( type_ != temp )
      return false;
   switch ( type_ )
   {
   case nullValue:
      return true;
   case intValue:
      return value_.int_ == other.value_.int_;
   case uintValue:
      return value_.uint_ == other.value_.uint_;
   case realValue:
      return value_.real_ == other.value_.real_;
   case booleanValue:
      return value_.bool_ == other.value_.bool_;
   case stringValue:
      return ( value_.string_ == other.value_.string_ )
             || ( other.value_.string_
                  &&  value_.string_
                  && strcmp( value_.string_, other.value_.string_ ) == 0 );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      return value_.map_->size() == other.value_.map_->size()
             && (*value_.map_) == (*other.value_.map_);
#else
   case arrayValue:
      return value_.array_->compare( *(other.value_.array_) ) == 0;
   case objectValue:
      return value_.map_->compare( *(other.value_.map_) ) == 0;
#endif
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0;  // unreachable
}

bool
Value::operator !=( const Value &other ) const
{
   return !( *this == other );
}

const char *
Value::asCString() const
{
   JSON_ASSERT( type_ == stringValue );
   return value_.string_;
}


std::string
Value::asString() const
{
   switch ( type_ )
   {
   case nullValue:
      return "";
   case stringValue:
      return value_.string_ ? value_.string_ : "";
   case booleanValue:
      return value_.bool_ ? "true" : "false";
   case intValue:
   case uintValue:
   case realValue:
   case arrayValue:
   case objectValue:
      JSON_ASSERT_MESSAGE( false, "Type is not convertible to string" );
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return ""; // unreachable
}

# ifdef JSON_USE_CPPTL
CppTL::ConstString
Value::asConstString() const
{
   return CppTL::ConstString( asString().c_str() );
}
# endif

Value::Int
Value::asInt() const
{
   switch ( type_ )
   {
   case nullValue:
      return 0;
   case intValue:
      return value_.int_;
   case uintValue:
      JSON_ASSERT_MESSAGE( value_.uint_ < (unsigned)maxInt, "integer out of signed integer range" );
      return value_.uint_;
   case realValue:
      JSON_ASSERT_MESSAGE( value_.real_ >= minInt  &&  value_.real_ <= maxInt, "Real out of signed integer range" );
      return Int( value_.real_ );
   case booleanValue:
      return value_.bool_ ? 1 : 0;
   case stringValue:
   case arrayValue:
   case objectValue:
      JSON_ASSERT_MESSAGE( false, "Type is not convertible to int" );
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0; // unreachable;
}

Value::UInt
Value::asUInt() const
{
   switch ( type_ )
   {
   case nullValue:
      return 0;
   case intValue:
      JSON_ASSERT_MESSAGE( value_.int_ >= 0, "Negative integer can not be converted to unsigned integer" );
      return value_.int_;
   case uintValue:
      return value_.uint_;
   case realValue:
      JSON_ASSERT_MESSAGE( value_.real_ >= 0  &&  value_.real_ <= maxUInt,  "Real out of unsigned integer range" );
      return UInt( value_.real_ );
   case booleanValue:
      return value_.bool_ ? 1 : 0;
   case stringValue:
   case arrayValue:
   case objectValue:
      JSON_ASSERT_MESSAGE( false, "Type is not convertible to uint" );
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0; // unreachable;
}

double
Value::asDouble() const
{
   switch ( type_ )
   {
   case nullValue:
      return 0.0;
   case intValue:
      return value_.int_;
   case uintValue:
      return value_.uint_;
   case realValue:
      return value_.real_;
   case booleanValue:
      return value_.bool_ ? 1.0 : 0.0;
   case stringValue:
   case arrayValue:
   case objectValue:
      JSON_ASSERT_MESSAGE( false, "Type is not convertible to double" );
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0; // unreachable;
}

bool
Value::asBool() const
{
   switch ( type_ )
   {
   case nullValue:
      return false;
   case intValue:
   case uintValue:
      return value_.int_ != 0;
   case realValue:
      return value_.real_ != 0.0;
   case booleanValue:
      return value_.bool_;
   case stringValue:
      return value_.string_  &&  value_.string_[0] != 0;
   case arrayValue:
   case objectValue:
      return value_.map_->size() != 0;
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return false; // unreachable;
}


bool
Value::isConvertibleTo( ValueType other ) const
{
   switch ( type_ )
   {
   case nullValue:
      return true;
   case intValue:
      return ( other == nullValue  &&  value_.int_ == 0 )
             || other == intValue
             || ( other == uintValue  && value_.int_ >= 0 )
             || other == realValue
             || other == stringValue
             || other == booleanValue;
   case uintValue:
      return ( other == nullValue  &&  value_.uint_ == 0 )
             || ( other == intValue  && value_.uint_ <= (unsigned)maxInt )
             || other == uintValue
             || other == realValue
             || other == stringValue
             || other == booleanValue;
   case realValue:
      return ( other == nullValue  &&  value_.real_ == 0.0 )
             || ( other == intValue  &&  value_.real_ >= minInt  &&  value_.real_ <= maxInt )
             || ( other == uintValue  &&  value_.real_ >= 0  &&  value_.real_ <= maxUInt )
             || other == realValue
             || other == stringValue
             || other == booleanValue;
   case booleanValue:
      return ( other == nullValue  &&  value_.bool_ == false )
             || other == intValue
             || other == uintValue
             || other == realValue
             || other == stringValue
             || other == booleanValue;
   case stringValue:
      return other == stringValue
             || ( other == nullValue  &&  (!value_.string_  ||  value_.string_[0] == 0) );
   case arrayValue:
      return other == arrayValue
             ||  ( other == nullValue  &&  value_.map_->size() == 0 );
   case objectValue:
      return other == objectValue
             ||  ( other == nullValue  &&  value_.map_->size() == 0 );
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return false; // unreachable;
}


/// Number of values in array or object
Value::UInt
Value::size() const
{
   switch ( type_ )
   {
   case nullValue:
   case intValue:
   case uintValue:
   case realValue:
   case booleanValue:
   case stringValue:
      return 0;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:  // size of the array is highest index + 1
      if ( !value_.map_->empty() )
      {
         ObjectValues::const_iterator itLast = value_.map_->end();
         --itLast;
         return (*itLast).first.index()+1;
      }
      return 0;
   case objectValue:
      return Int( value_.map_->size() );
#else
   case arrayValue:
      return Int( value_.array_->size() );
   case objectValue:
      return Int( value_.map_->size() );
#endif
   default:
      JSON_ASSERT_UNREACHABLE;
   }
   return 0; // unreachable;
}


bool
Value::empty() const
{
   if ( isNull() || isArray() || isObject() )
      return size() == 0u;
   else
      return false;
}


bool
Value::operator!() const
{
   return isNull();
}


void
Value::clear()
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == arrayValue  || type_ == objectValue );

   switch ( type_ )
   {
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
   case objectValue:
      value_.map_->clear();
      break;
#else
   case arrayValue:
      value_.array_->clear();
      break;
   case objectValue:
      value_.map_->clear();
      break;
#endif
   default:
      break;
   }
}

void
Value::resize( UInt newSize )
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == arrayValue );
   if ( type_ == nullValue )
      *this = Value( arrayValue );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   UInt oldSize = size();
   if ( newSize == 0 )
      clear();
   else if ( newSize > oldSize )
      (*this)[ newSize - 1 ];
   else
   {
      for ( UInt index = newSize; index < oldSize; ++index )
         value_.map_->erase( index );
      assert( size() == newSize );
   }
#else
   value_.array_->resize( newSize );
#endif
}


Value &
Value::operator[]( UInt index )
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == arrayValue );
   if ( type_ == nullValue )
      *this = Value( arrayValue );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   CZString key( index );
   ObjectValues::iterator it = value_.map_->lower_bound( key );
   if ( it != value_.map_->end()  &&  (*it).first == key )
      return (*it).second;

   ObjectValues::value_type defaultValue( key, null );
   it = value_.map_->insert( it, defaultValue );
   return (*it).second;
#else
   return value_.array_->resolveReference( index );
#endif
}


const Value &
Value::operator[]( UInt index ) const
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == arrayValue );
   if ( type_ == nullValue )
      return null;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   CZString key( index );
   ObjectValues::const_iterator it = value_.map_->find( key );
   if ( it == value_.map_->end() )
      return null;
   return (*it).second;
#else
   Value *value = value_.array_->find( index );
   return value ? *value : null;
#endif
}


Value &
Value::operator[]( const char *key )
{
   return resolveReference( key, false );
}


Value &
Value::resolveReference( const char *key,
                         bool isStatic )
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == objectValue );
   if ( type_ == nullValue )
      *this = Value( objectValue );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   CZString actualKey( key, isStatic ? CZString::noDuplication
                                     : CZString::duplicateOnCopy );
   ObjectValues::iterator it = value_.map_->lower_bound( actualKey );
   if ( it != value_.map_->end()  &&  (*it).first == actualKey )
      return (*it).second;

   ObjectValues::value_type defaultValue( actualKey, null );
   it = value_.map_->insert( it, defaultValue );
   Value &value = (*it).second;
   return value;
#else
   return value_.map_->resolveReference( key, isStatic );
#endif
}


Value
Value::get( UInt index,
            const Value &defaultValue ) const
{
   const Value *value = &((*this)[index]);
   return value == &null ? defaultValue : *value;
}


bool
Value::isValidIndex( UInt index ) const
{
   return index < size();
}



const Value &
Value::operator[]( const char *key ) const
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == objectValue );
   if ( type_ == nullValue )
      return null;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   CZString actualKey( key, CZString::noDuplication );
   ObjectValues::const_iterator it = value_.map_->find( actualKey );
   if ( it == value_.map_->end() )
      return null;
   return (*it).second;
#else
   const Value *value = value_.map_->find( key );
   return value ? *value : null;
#endif
}


Value &
Value::operator[]( const std::string &key )
{
   return (*this)[ key.c_str() ];
}


const Value &
Value::operator[]( const std::string &key ) const
{
   return (*this)[ key.c_str() ];
}

Value &
Value::operator[]( const StaticString &key )
{
   return resolveReference( key, true );
}


# ifdef JSON_USE_CPPTL
Value &
Value::operator[]( const CppTL::ConstString &key )
{
   return (*this)[ key.c_str() ];
}


const Value &
Value::operator[]( const CppTL::ConstString &key ) const
{
   return (*this)[ key.c_str() ];
}
# endif


Value &
Value::append( const Value &value )
{
   return (*this)[size()] = value;
}


Value
Value::get( const char *key,
            const Value &defaultValue ) const
{
   const Value *value = &((*this)[key]);
   return value == &null ? defaultValue : *value;
}


Value
Value::get( const std::string &key,
            const Value &defaultValue ) const
{
   return get( key.c_str(), defaultValue );
}

Value
Value::removeMember( const char* key )
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == objectValue );
   if ( type_ == nullValue )
      return null;
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   CZString actualKey( key, CZString::noDuplication );
   ObjectValues::iterator it = value_.map_->find( actualKey );
   if ( it == value_.map_->end() )
      return null;
   Value old(it->second);
   value_.map_->erase(it);
   return old;
#else
   Value *value = value_.map_->find( key );
   if (value){
      Value old(*value);
      value_.map_.remove( key );
      return old;
   } else {
      return null;
   }
#endif
}

Value
Value::removeMember( const std::string &key )
{
   return removeMember( key.c_str() );
}

# ifdef JSON_USE_CPPTL
Value
Value::get( const CppTL::ConstString &key,
            const Value &defaultValue ) const
{
   return get( key.c_str(), defaultValue );
}
# endif

bool
Value::isMember( const char *key ) const
{
   const Value *value = &((*this)[key]);
   return value != &null;
}


bool
Value::isMember( const std::string &key ) const
{
   return isMember( key.c_str() );
}


# ifdef JSON_USE_CPPTL
bool
Value::isMember( const CppTL::ConstString &key ) const
{
   return isMember( key.c_str() );
}
#endif

Value::Members
Value::getMemberNames() const
{
   JSON_ASSERT( type_ == nullValue  ||  type_ == objectValue );
   if ( type_ == nullValue )
       return Value::Members();
   Members members;
   members.reserve( value_.map_->size() );
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   ObjectValues::const_iterator it = value_.map_->begin();
   ObjectValues::const_iterator itEnd = value_.map_->end();
   for ( ; it != itEnd; ++it )
      members.push_back( std::string( (*it).first.c_str() ) );
#else
   ValueInternalMap::IteratorState it;
   ValueInternalMap::IteratorState itEnd;
   value_.map_->makeBeginIterator( it );
   value_.map_->makeEndIterator( itEnd );
   for ( ; !ValueInternalMap::equals( it, itEnd ); ValueInternalMap::increment(it) )
      members.push_back( std::string( ValueInternalMap::key( it ) ) );
#endif
   return members;
}
//
//# ifdef JSON_USE_CPPTL
//EnumMemberNames
//Value::enumMemberNames() const
//{
//   if ( type_ == objectValue )
//   {
//      return CppTL::Enum::any(  CppTL::Enum::transform(
//         CppTL::Enum::keys( *(value_.map_), CppTL::Type<const CZString &>() ),
//         MemberNamesTransform() ) );
//   }
//   return EnumMemberNames();
//}
//
//
//EnumValues
//Value::enumValues() const
//{
//   if ( type_ == objectValue  ||  type_ == arrayValue )
//      return CppTL::Enum::anyValues( *(value_.map_),
//                                     CppTL::Type<const Value &>() );
//   return EnumValues();
//}
//
//# endif


bool
Value::isNull() const
{
   return type_ == nullValue;
}


bool
Value::isBool() const
{
   return type_ == booleanValue;
}


bool
Value::isInt() const
{
   return type_ == intValue;
}


bool
Value::isUInt() const
{
   return type_ == uintValue;
}


bool
Value::isIntegral() const
{
   return type_ == intValue
          ||  type_ == uintValue
          ||  type_ == booleanValue;
}


bool
Value::isDouble() const
{
   return type_ == realValue;
}


bool
Value::isNumeric() const
{
   return isIntegral() || isDouble();
}


bool
Value::isString() const
{
   return type_ == stringValue;
}


bool
Value::isArray() const
{
   return type_ == nullValue  ||  type_ == arrayValue;
}


bool
Value::isObject() const
{
   return type_ == nullValue  ||  type_ == objectValue;
}


void
Value::setComment( const char *comment,
                   CommentPlacement placement )
{
   if ( !comments_ )
      comments_ = new CommentInfo[numberOfCommentPlacement];
   comments_[placement].setComment( comment );
}


void
Value::setComment( const std::string &comment,
                   CommentPlacement placement )
{
   setComment( comment.c_str(), placement );
}


bool
Value::hasComment( CommentPlacement placement ) const
{
   return comments_ != 0  &&  comments_[placement].comment_ != 0;
}

std::string
Value::getComment( CommentPlacement placement ) const
{
   if ( hasComment(placement) )
      return comments_[placement].comment_;
   return "";
}


std::string
Value::toStyledString() const
{
   StyledWriter writer;
   return writer.write( *this );
}


Value::const_iterator
Value::begin() const
{
   switch ( type_ )
   {
#ifdef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
      if ( value_.array_ )
      {
         ValueInternalArray::IteratorState it;
         value_.array_->makeBeginIterator( it );
         return const_iterator( it );
      }
      break;
   case objectValue:
      if ( value_.map_ )
      {
         ValueInternalMap::IteratorState it;
         value_.map_->makeBeginIterator( it );
         return const_iterator( it );
      }
      break;
#else
   case arrayValue:
   case objectValue:
      if ( value_.map_ )
         return const_iterator( value_.map_->begin() );
      break;
#endif
   default:
      break;
   }
   return const_iterator();
}

Value::const_iterator
Value::end() const
{
   switch ( type_ )
   {
#ifdef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
      if ( value_.array_ )
      {
         ValueInternalArray::IteratorState it;
         value_.array_->makeEndIterator( it );
         return const_iterator( it );
      }
      break;
   case objectValue:
      if ( value_.map_ )
      {
         ValueInternalMap::IteratorState it;
         value_.map_->makeEndIterator( it );
         return const_iterator( it );
      }
      break;
#else
   case arrayValue:
   case objectValue:
      if ( value_.map_ )
         return const_iterator( value_.map_->end() );
      break;
#endif
   default:
      break;
   }
   return const_iterator();
}


Value::iterator
Value::begin()
{
   switch ( type_ )
   {
#ifdef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
      if ( value_.array_ )
      {
         ValueInternalArray::IteratorState it;
         value_.array_->makeBeginIterator( it );
         return iterator( it );
      }
      break;
   case objectValue:
      if ( value_.map_ )
      {
         ValueInternalMap::IteratorState it;
         value_.map_->makeBeginIterator( it );
         return iterator( it );
      }
      break;
#else
   case arrayValue:
   case objectValue:
      if ( value_.map_ )
         return iterator( value_.map_->begin() );
      break;
#endif
   default:
      break;
   }
   return iterator();
}

Value::iterator
Value::end()
{
   switch ( type_ )
   {
#ifdef JSON_VALUE_USE_INTERNAL_MAP
   case arrayValue:
      if ( value_.array_ )
      {
         ValueInternalArray::IteratorState it;
         value_.array_->makeEndIterator( it );
         return iterator( it );
      }
      break;
   case objectValue:
      if ( value_.map_ )
      {
         ValueInternalMap::IteratorState it;
         value_.map_->makeEndIterator( it );
         return iterator( it );
      }
      break;
#else
   case arrayValue:
   case objectValue:
      if ( value_.map_ )
         return iterator( value_.map_->end() );
      break;
#endif
   default:
      break;
   }
   return iterator();
}


// class PathArgument
// //////////////////////////////////////////////////////////////////

PathArgument::PathArgument()
   : kind_( kindNone )
{
}


PathArgument::PathArgument( Value::UInt index )
   : index_( index )
   , kind_( kindIndex )
{
}


PathArgument::PathArgument( const char *key )
   : key_( key )
   , kind_( kindKey )
{
}


PathArgument::PathArgument( const std::string &key )
   : key_( key.c_str() )
   , kind_( kindKey )
{
}

// class Path
// //////////////////////////////////////////////////////////////////

Path::Path( const std::string &path,
            const PathArgument &a1,
            const PathArgument &a2,
            const PathArgument &a3,
            const PathArgument &a4,
            const PathArgument &a5 )
{
   InArgs in;
   in.push_back( &a1 );
   in.push_back( &a2 );
   in.push_back( &a3 );
   in.push_back( &a4 );
   in.push_back( &a5 );
   makePath( path, in );
}


void
Path::makePath( const std::string &path,
                const InArgs &in )
{
   const char *current = path.c_str();
   const char *end = current + path.length();
   InArgs::const_iterator itInArg = in.begin();
   while ( current != end )
   {
      if ( *current == '[' )
      {
         ++current;
         if ( *current == '%' )
            addPathInArg( path, in, itInArg, PathArgument::kindIndex );
         else
         {
            Value::UInt index = 0;
            for ( ; current != end && *current >= '0'  &&  *current <= '9'; ++current )
               index = index * 10 + Value::UInt(*current - '0');
            args_.push_back( index );
         }
         if ( current == end  ||  *current++ != ']' )
            invalidPath( path, int(current - path.c_str()) );
      }
      else if ( *current == '%' )
      {
         addPathInArg( path, in, itInArg, PathArgument::kindKey );
         ++current;
      }
      else if ( *current == '.' )
      {
         ++current;
      }
      else
      {
         const char *beginName = current;
         while ( current != end  &&  !strchr( "[.", *current ) )
            ++current;
         args_.push_back( std::string( beginName, current ) );
      }
   }
}


void
Path::addPathInArg( const std::string &path,
                    const InArgs &in,
                    InArgs::const_iterator &itInArg,
                    PathArgument::Kind kind )
{
   if ( itInArg == in.end() )
   {
      // Error: missing argument %d
   }
   else if ( (*itInArg)->kind_ != kind )
   {
      // Error: bad argument type
   }
   else
   {
      args_.push_back( **itInArg );
   }
}


void
Path::invalidPath( const std::string &path,
                   int location )
{
   // Error: invalid path.
}


const Value &
Path::resolve( const Value &root ) const
{
   const Value *node = &root;
   for ( Args::const_iterator it = args_.begin(); it != args_.end(); ++it )
   {
      const PathArgument &arg = *it;
      if ( arg.kind_ == PathArgument::kindIndex )
      {
         if ( !node->isArray()  ||  node->isValidIndex( arg.index_ ) )
         {
            // Error: unable to resolve path (array value expected at position...
         }
         node = &((*node)[arg.index_]);
      }
      else if ( arg.kind_ == PathArgument::kindKey )
      {
         if ( !node->isObject() )
         {
            // Error: unable to resolve path (object value expected at position...)
         }
         node = &((*node)[arg.key_]);
         if ( node == &Value::null )
         {
            // Error: unable to resolve path (object has no member named '' at position...)
         }
      }
   }
   return *node;
}


Value
Path::resolve( const Value &root,
               const Value &defaultValue ) const
{
   const Value *node = &root;
   for ( Args::const_iterator it = args_.begin(); it != args_.end(); ++it )
   {
      const PathArgument &arg = *it;
      if ( arg.kind_ == PathArgument::kindIndex )
      {
         if ( !node->isArray()  ||  node->isValidIndex( arg.index_ ) )
            return defaultValue;
         node = &((*node)[arg.index_]);
      }
      else if ( arg.kind_ == PathArgument::kindKey )
      {
         if ( !node->isObject() )
            return defaultValue;
         node = &((*node)[arg.key_]);
         if ( node == &Value::null )
            return defaultValue;
      }
   }
   return *node;
}


Value &
Path::make( Value &root ) const
{
   Value *node = &root;
   for ( Args::const_iterator it = args_.begin(); it != args_.end(); ++it )
   {
      const PathArgument &arg = *it;
      if ( arg.kind_ == PathArgument::kindIndex )
      {
         if ( !node->isArray() )
         {
            // Error: node is not an array at position ...
         }
         node = &((*node)[arg.index_]);
      }
      else if ( arg.kind_ == PathArgument::kindKey )
      {
         if ( !node->isObject() )
         {
            // Error: node is not an object at position...
         }
         node = &((*node)[arg.key_]);
      }
   }
   return *node;
}


} // namespace Json

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_valueiterator.inl`:

```inl
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
// included by json_value.cpp
// everything is within Json namespace


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class ValueIteratorBase
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

ValueIteratorBase::ValueIteratorBase()
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   : current_()
   , isNull_( true )
{
}
#else
   : isArray_( true )
   , isNull_( true )
{
   iterator_.array_ = ValueInternalArray::IteratorState();
}
#endif


#ifndef JSON_VALUE_USE_INTERNAL_MAP
ValueIteratorBase::ValueIteratorBase( const Value::ObjectValues::iterator &current )
   : current_( current )
   , isNull_( false )
{
}
#else
ValueIteratorBase::ValueIteratorBase( const ValueInternalArray::IteratorState &state )
   : isArray_( true )
{
   iterator_.array_ = state;
}


ValueIteratorBase::ValueIteratorBase( const ValueInternalMap::IteratorState &state )
   : isArray_( false )
{
   iterator_.map_ = state;
}
#endif

Value &
ValueIteratorBase::deref() const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   return current_->second;
#else
   if ( isArray_ )
      return ValueInternalArray::dereference( iterator_.array_ );
   return ValueInternalMap::value( iterator_.map_ );
#endif
}


void 
ValueIteratorBase::increment()
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   ++current_;
#else
   if ( isArray_ )
      ValueInternalArray::increment( iterator_.array_ );
   ValueInternalMap::increment( iterator_.map_ );
#endif
}


void 
ValueIteratorBase::decrement()
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   --current_;
#else
   if ( isArray_ )
      ValueInternalArray::decrement( iterator_.array_ );
   ValueInternalMap::decrement( iterator_.map_ );
#endif
}


ValueIteratorBase::difference_type 
ValueIteratorBase::computeDistance( const SelfType &other ) const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
# ifdef JSON_USE_CPPTL_SMALLMAP
   return current_ - other.current_;
# else
   // Iterator for null value are initialized using the default
   // constructor, which initialize current_ to the default
   // std::map::iterator. As begin() and end() are two instance 
   // of the default std::map::iterator, they can not be compared.
   // To allow this, we handle this comparison specifically.
   if ( isNull_  &&  other.isNull_ )
   {
      return 0;
   }


   // Usage of std::distance is not portable (does not compile with Sun Studio 12 RogueWave STL,
   // which is the one used by default).
   // Using a portable hand-made version for non random iterator instead:
   //   return difference_type( std::distance( current_, other.current_ ) );
   difference_type myDistance = 0;
   for ( Value::ObjectValues::iterator it = current_; it != other.current_; ++it )
   {
      ++myDistance;
   }
   return myDistance;
# endif
#else
   if ( isArray_ )
      return ValueInternalArray::distance( iterator_.array_, other.iterator_.array_ );
   return ValueInternalMap::distance( iterator_.map_, other.iterator_.map_ );
#endif
}


bool 
ValueIteratorBase::isEqual( const SelfType &other ) const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   if ( isNull_ )
   {
      return other.isNull_;
   }
   return current_ == other.current_;
#else
   if ( isArray_ )
      return ValueInternalArray::equals( iterator_.array_, other.iterator_.array_ );
   return ValueInternalMap::equals( iterator_.map_, other.iterator_.map_ );
#endif
}


void 
ValueIteratorBase::copy( const SelfType &other )
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   current_ = other.current_;
#else
   if ( isArray_ )
      iterator_.array_ = other.iterator_.array_;
   iterator_.map_ = other.iterator_.map_;
#endif
}


Value 
ValueIteratorBase::key() const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   const Value::CZString czstring = (*current_).first;
   if ( czstring.c_str() )
   {
      if ( czstring.isStaticString() )
         return Value( StaticString( czstring.c_str() ) );
      return Value( czstring.c_str() );
   }
   return Value( czstring.index() );
#else
   if ( isArray_ )
      return Value( ValueInternalArray::indexOf( iterator_.array_ ) );
   bool isStatic;
   const char *memberName = ValueInternalMap::key( iterator_.map_, isStatic );
   if ( isStatic )
      return Value( StaticString( memberName ) );
   return Value( memberName );
#endif
}


UInt 
ValueIteratorBase::index() const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   const Value::CZString czstring = (*current_).first;
   if ( !czstring.c_str() )
      return czstring.index();
   return Value::UInt( -1 );
#else
   if ( isArray_ )
      return Value::UInt( ValueInternalArray::indexOf( iterator_.array_ ) );
   return Value::UInt( -1 );
#endif
}


const char *
ValueIteratorBase::memberName() const
{
#ifndef JSON_VALUE_USE_INTERNAL_MAP
   const char *name = (*current_).first.c_str();
   return name ? name : "";
#else
   if ( !isArray_ )
      return ValueInternalMap::key( iterator_.map_ );
   return "";
#endif
}


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class ValueConstIterator
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

ValueConstIterator::ValueConstIterator()
{
}


#ifndef JSON_VALUE_USE_INTERNAL_MAP
ValueConstIterator::ValueConstIterator( const Value::ObjectValues::iterator &current )
   : ValueIteratorBase( current )
{
}
#else
ValueConstIterator::ValueConstIterator( const ValueInternalArray::IteratorState &state )
   : ValueIteratorBase( state )
{
}

ValueConstIterator::ValueConstIterator( const ValueInternalMap::IteratorState &state )
   : ValueIteratorBase( state )
{
}
#endif

ValueConstIterator &
ValueConstIterator::operator =( const ValueIteratorBase &other )
{
   copy( other );
   return *this;
}


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// class ValueIterator
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////

ValueIterator::ValueIterator()
{
}


#ifndef JSON_VALUE_USE_INTERNAL_MAP
ValueIterator::ValueIterator( const Value::ObjectValues::iterator &current )
   : ValueIteratorBase( current )
{
}
#else
ValueIterator::ValueIterator( const ValueInternalArray::IteratorState &state )
   : ValueIteratorBase( state )
{
}

ValueIterator::ValueIterator( const ValueInternalMap::IteratorState &state )
   : ValueIteratorBase( state )
{
}
#endif

ValueIterator::ValueIterator( const ValueConstIterator &other )
   : ValueIteratorBase( other )
{
}

ValueIterator::ValueIterator( const ValueIterator &other )
   : ValueIteratorBase( other )
{
}

ValueIterator &
ValueIterator::operator =( const SelfType &other )
{
   copy( other );
   return *this;
}

```

`samples-android/Common/external/jsoncpp/src/lib_json/json_writer.cpp`:

```cpp
/*
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include <json/writer.h>
#include <utility>
#include <assert.h>
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <sstream>
#include <iomanip>

#if _MSC_VER >= 1400 // VC++ 8.0
#pragma warning( disable : 4996 )   // disable warning about strdup being deprecated.
#endif

namespace Json {

static bool isControlCharacter(char ch)
{
   return ch > 0 && ch <= 0x1F;
}

static bool containsControlCharacter( const char* str )
{
   while ( *str ) 
   {
      if ( isControlCharacter( *(str++) ) )
         return true;
   }
   return false;
}
static void uintToString( unsigned int value, 
                          char *&current )
{
   *--current = 0;
   do
   {
      *--current = (value % 10) + '0';
      value /= 10;
   }
   while ( value != 0 );
}

std::string valueToString( Int value )
{
   char buffer[32];
   char *current = buffer + sizeof(buffer);
   bool isNegative = value < 0;
   if ( isNegative )
      value = -value;
   uintToString( UInt(value), current );
   if ( isNegative )
      *--current = '-';
   assert( current >= buffer );
   return current;
}


std::string valueToString( UInt value )
{
   char buffer[32];
   char *current = buffer + sizeof(buffer);
   uintToString( value, current );
   assert( current >= buffer );
   return current;
}

std::string valueToString( double value )
{
   char buffer[32];
#if defined(_MSC_VER) && defined(__STDC_SECURE_LIB__) // Use secure version with visual studio 2005 to avoid warning. 
   sprintf_s(buffer, sizeof(buffer), "%#.16g", value); 
#else	
   sprintf(buffer, "%#.16g", value); 
#endif
   char* ch = buffer + strlen(buffer) - 1;
   if (*ch != '0') return buffer; // nothing to truncate, so save time
   while(ch > buffer && *ch == '0'){
     --ch;
   }
   char* last_nonzero = ch;
   while(ch >= buffer){
     switch(*ch){
     case '0':
     case '1':
     case '2':
     case '3':
     case '4':
     case '5':
     case '6':
     case '7':
     case '8':
     case '9':
       --ch;
       continue;
     case '.':
       // Truncate zeroes to save bytes in output, but keep one.
       *(last_nonzero+2) = '\0';
       return buffer;
     default:
       return buffer;
     }
   }
   return buffer;
}


std::string valueToString( bool value )
{
   return value ? "true" : "false";
}

std::string valueToQuotedString( const char *value )
{
   // Not sure how to handle unicode...
   if (strpbrk(value, "\"\\\b\f\n\r\t") == NULL && !containsControlCharacter( value ))
      return std::string("\"") + value + "\"";
   // We have to walk value and escape any special characters.
   // Appending to std::string is not efficient, but this should be rare.
   // (Note: forward slashes are *not* rare, but I am not escaping them.)
   unsigned maxsize = strlen(value)*2 + 3; // allescaped+quotes+NULL
   std::string result;
   result.reserve(maxsize); // to avoid lots of mallocs
   result += "\"";
   for (const char* c=value; *c != 0; ++c)
   {
      switch(*c)
      {
         case '\"':
            result += "\\\"";
            break;
         case '\\':
            result += "\\\\";
            break;
         case '\b':
            result += "\\b";
            break;
         case '\f':
            result += "\\f";
            break;
         case '\n':
            result += "\\n";
            break;
         case '\r':
            result += "\\r";
            break;
         case '\t':
            result += "\\t";
            break;
         //case '/':
            // Even though \/ is considered a legal escape in JSON, a bare
            // slash is also legal, so I see no reason to escape it.
            // (I hope I am not misunderstanding something.
            // blep notes: actually escaping \/ may be useful in javascript to avoid </ 
            // sequence.
            // Should add a flag to allow this compatibility mode and prevent this 
            // sequence from occurring.
         default:
            if ( isControlCharacter( *c ) )
            {
               std::ostringstream oss;
               oss << "\\u" << std::hex << std::uppercase << std::setfill('0') << std::setw(4) << static_cast<int>(*c);
               result += oss.str();
            }
            else
            {
               result += *c;
            }
            break;
      }
   }
   result += "\"";
   return result;
}

// Class Writer
// //////////////////////////////////////////////////////////////////
Writer::~Writer()
{
}


// Class FastWriter
// //////////////////////////////////////////////////////////////////

FastWriter::FastWriter()
   : yamlCompatiblityEnabled_( false )
{
}


void 
FastWriter::enableYAMLCompatibility()
{
   yamlCompatiblityEnabled_ = true;
}


std::string 
FastWriter::write( const Value &root )
{
   document_ = "";
   writeValue( root );
   document_ += "\n";
   return document_;
}


void 
FastWriter::writeValue( const Value &value )
{
   switch ( value.type() )
   {
   case nullValue:
      document_ += "null";
      break;
   case intValue:
      document_ += valueToString( value.asInt() );
      break;
   case uintValue:
      document_ += valueToString( value.asUInt() );
      break;
   case realValue:
      document_ += valueToString( value.asDouble() );
      break;
   case stringValue:
      document_ += valueToQuotedString( value.asCString() );
      break;
   case booleanValue:
      document_ += valueToString( value.asBool() );
      break;
   case arrayValue:
      {
         document_ += "[";
         int size = value.size();
         for ( int index =0; index < size; ++index )
         {
            if ( index > 0 )
               document_ += ",";
            writeValue( value[index] );
         }
         document_ += "]";
      }
      break;
   case objectValue:
      {
         Value::Members members( value.getMemberNames() );
         document_ += "{";
         for ( Value::Members::iterator it = members.begin(); 
               it != members.end(); 
               ++it )
         {
            const std::string &name = *it;
            if ( it != members.begin() )
               document_ += ",";
            document_ += valueToQuotedString( name.c_str() );
            document_ += yamlCompatiblityEnabled_ ? ": " 
                                                  : ":";
            writeValue( value[name] );
         }
         document_ += "}";
      }
      break;
   }
}


// Class StyledWriter
// //////////////////////////////////////////////////////////////////

StyledWriter::StyledWriter()
   : rightMargin_( 74 )
   , indentSize_( 3 )
{
}


std::string 
StyledWriter::write( const Value &root )
{
   document_ = "";
   addChildValues_ = false;
   indentString_ = "";
   writeCommentBeforeValue( root );
   writeValue( root );
   writeCommentAfterValueOnSameLine( root );
   document_ += "\n";
   return document_;
}


void 
StyledWriter::writeValue( const Value &value )
{
   switch ( value.type() )
   {
   case nullValue:
      pushValue( "null" );
      break;
   case intValue:
      pushValue( valueToString( value.asInt() ) );
      break;
   case uintValue:
      pushValue( valueToString( value.asUInt() ) );
      break;
   case realValue:
      pushValue( valueToString( value.asDouble() ) );
      break;
   case stringValue:
      pushValue( valueToQuotedString( value.asCString() ) );
      break;
   case booleanValue:
      pushValue( valueToString( value.asBool() ) );
      break;
   case arrayValue:
      writeArrayValue( value);
      break;
   case objectValue:
      {
         Value::Members members( value.getMemberNames() );
         if ( members.empty() )
            pushValue( "{}" );
         else
         {
            writeWithIndent( "{" );
            indent();
            Value::Members::iterator it = members.begin();
            while ( true )
            {
               const std::string &name = *it;
               const Value &childValue = value[name];
               writeCommentBeforeValue( childValue );
               writeWithIndent( valueToQuotedString( name.c_str() ) );
               document_ += " : ";
               writeValue( childValue );
               if ( ++it == members.end() )
               {
                  writeCommentAfterValueOnSameLine( childValue );
                  break;
               }
               document_ += ",";
               writeCommentAfterValueOnSameLine( childValue );
            }
            unindent();
            writeWithIndent( "}" );
         }
      }
      break;
   }
}


void 
StyledWriter::writeArrayValue( const Value &value )
{
   unsigned size = value.size();
   if ( size == 0 )
      pushValue( "[]" );
   else
   {
      bool isArrayMultiLine = isMultineArray( value );
      if ( isArrayMultiLine )
      {
         writeWithIndent( "[" );
         indent();
         bool hasChildValue = !childValues_.empty();
         unsigned index =0;
         while ( true )
         {
            const Value &childValue = value[index];
            writeCommentBeforeValue( childValue );
            if ( hasChildValue )
               writeWithIndent( childValues_[index] );
            else
            {
               writeIndent();
               writeValue( childValue );
            }
            if ( ++index == size )
            {
               writeCommentAfterValueOnSameLine( childValue );
               break;
            }
            document_ += ",";
            writeCommentAfterValueOnSameLine( childValue );
         }
         unindent();
         writeWithIndent( "]" );
      }
      else // output on a single line
      {
         assert( childValues_.size() == size );
         document_ += "[ ";
         for ( unsigned index =0; index < size; ++index )
         {
            if ( index > 0 )
               document_ += ", ";
            document_ += childValues_[index];
         }
         document_ += " ]";
      }
   }
}


bool 
StyledWriter::isMultineArray( const Value &value )
{
   int size = value.size();
   bool isMultiLine = size*3 >= rightMargin_ ;
   childValues_.clear();
   for ( int index =0; index < size  &&  !isMultiLine; ++index )
   {
      const Value &childValue = value[index];
      isMultiLine = isMultiLine  ||
                     ( (childValue.isArray()  ||  childValue.isObject())  &&  
                        childValue.size() > 0 );
   }
   if ( !isMultiLine ) // check if line length > max line length
   {
      childValues_.reserve( size );
      addChildValues_ = true;
      int lineLength = 4 + (size-1)*2; // '[ ' + ', '*n + ' ]'
      for ( int index =0; index < size  &&  !isMultiLine; ++index )
      {
         writeValue( value[index] );
         lineLength += int( childValues_[index].length() );
         isMultiLine = isMultiLine  &&  hasCommentForValue( value[index] );
      }
      addChildValues_ = false;
      isMultiLine = isMultiLine  ||  lineLength >= rightMargin_;
   }
   return isMultiLine;
}


void 
StyledWriter::pushValue( const std::string &value )
{
   if ( addChildValues_ )
      childValues_.push_back( value );
   else
      document_ += value;
}


void 
StyledWriter::writeIndent()
{
   if ( !document_.empty() )
   {
      char last = document_[document_.length()-1];
      if ( last == ' ' )     // already indented
         return;
      if ( last != '\n' )    // Comments may add new-line
         document_ += '\n';
   }
   document_ += indentString_;
}


void 
StyledWriter::writeWithIndent( const std::string &value )
{
   writeIndent();
   document_ += value;
}


void 
StyledWriter::indent()
{
   indentString_ += std::string( indentSize_, ' ' );
}


void 
StyledWriter::unindent()
{
   assert( int(indentString_.size()) >= indentSize_ );
   indentString_.resize( indentString_.size() - indentSize_ );
}


void 
StyledWriter::writeCommentBeforeValue( const Value &root )
{
   if ( !root.hasComment( commentBefore ) )
      return;
   document_ += normalizeEOL( root.getComment( commentBefore ) );
   document_ += "\n";
}


void 
StyledWriter::writeCommentAfterValueOnSameLine( const Value &root )
{
   if ( root.hasComment( commentAfterOnSameLine ) )
      document_ += " " + normalizeEOL( root.getComment( commentAfterOnSameLine ) );

   if ( root.hasComment( commentAfter ) )
   {
      document_ += "\n";
      document_ += normalizeEOL( root.getComment( commentAfter ) );
      document_ += "\n";
   }
}


bool 
StyledWriter::hasCommentForValue( const Value &value )
{
   return value.hasComment( commentBefore )
          ||  value.hasComment( commentAfterOnSameLine )
          ||  value.hasComment( commentAfter );
}


std::string 
StyledWriter::normalizeEOL( const std::string &text )
{
   std::string normalized;
   normalized.reserve( text.length() );
   const char *begin = text.c_str();
   const char *end = begin + text.length();
   const char *current = begin;
   while ( current != end )
   {
      char c = *current++;
      if ( c == '\r' ) // mac or dos EOL
      {
         if ( *current == '\n' ) // convert dos EOL
            ++current;
         normalized += '\n';
      }
      else // handle unix EOL & other char
         normalized += c;
   }
   return normalized;
}


// Class StyledStreamWriter
// //////////////////////////////////////////////////////////////////

StyledStreamWriter::StyledStreamWriter( std::string indentation )
   : document_(NULL)
   , rightMargin_( 74 )
   , indentation_( indentation )
{
}


void
StyledStreamWriter::write( std::ostream &out, const Value &root )
{
   document_ = &out;
   addChildValues_ = false;
   indentString_ = "";
   writeCommentBeforeValue( root );
   writeValue( root );
   writeCommentAfterValueOnSameLine( root );
   *document_ << "\n";
   document_ = NULL; // Forget the stream, for safety.
}


void 
StyledStreamWriter::writeValue( const Value &value )
{
   switch ( value.type() )
   {
   case nullValue:
      pushValue( "null" );
      break;
   case intValue:
      pushValue( valueToString( value.asInt() ) );
      break;
   case uintValue:
      pushValue( valueToString( value.asUInt() ) );
      break;
   case realValue:
      pushValue( valueToString( value.asDouble() ) );
      break;
   case stringValue:
      pushValue( valueToQuotedString( value.asCString() ) );
      break;
   case booleanValue:
      pushValue( valueToString( value.asBool() ) );
      break;
   case arrayValue:
      writeArrayValue( value);
      break;
   case objectValue:
      {
         Value::Members members( value.getMemberNames() );
         if ( members.empty() )
            pushValue( "{}" );
         else
         {
            writeWithIndent( "{" );
            indent();
            Value::Members::iterator it = members.begin();
            while ( true )
            {
               const std::string &name = *it;
               const Value &childValue = value[name];
               writeCommentBeforeValue( childValue );
               writeWithIndent( valueToQuotedString( name.c_str() ) );
               *document_ << " : ";
               writeValue( childValue );
               if ( ++it == members.end() )
               {
                  writeCommentAfterValueOnSameLine( childValue );
                  break;
               }
               *document_ << ",";
               writeCommentAfterValueOnSameLine( childValue );
            }
            unindent();
            writeWithIndent( "}" );
         }
      }
      break;
   }
}


void 
StyledStreamWriter::writeArrayValue( const Value &value )
{
   unsigned size = value.size();
   if ( size == 0 )
      pushValue( "[]" );
   else
   {
      bool isArrayMultiLine = isMultineArray( value );
      if ( isArrayMultiLine )
      {
         writeWithIndent( "[" );
         indent();
         bool hasChildValue = !childValues_.empty();
         unsigned index =0;
         while ( true )
         {
            const Value &childValue = value[index];
            writeCommentBeforeValue( childValue );
            if ( hasChildValue )
               writeWithIndent( childValues_[index] );
            else
            {
	       writeIndent();
               writeValue( childValue );
            }
            if ( ++index == size )
            {
               writeCommentAfterValueOnSameLine( childValue );
               break;
            }
            *document_ << ",";
            writeCommentAfterValueOnSameLine( childValue );
         }
         unindent();
         writeWithIndent( "]" );
      }
      else // output on a single line
      {
         assert( childValues_.size() == size );
         *document_ << "[ ";
         for ( unsigned index =0; index < size; ++index )
         {
            if ( index > 0 )
               *document_ << ", ";
            *document_ << childValues_[index];
         }
         *document_ << " ]";
      }
   }
}


bool 
StyledStreamWriter::isMultineArray( const Value &value )
{
   int size = value.size();
   bool isMultiLine = size*3 >= rightMargin_ ;
   childValues_.clear();
   for ( int index =0; index < size  &&  !isMultiLine; ++index )
   {
      const Value &childValue = value[index];
      isMultiLine = isMultiLine  ||
                     ( (childValue.isArray()  ||  childValue.isObject())  &&  
                        childValue.size() > 0 );
   }
   if ( !isMultiLine ) // check if line length > max line length
   {
      childValues_.reserve( size );
      addChildValues_ = true;
      int lineLength = 4 + (size-1)*2; // '[ ' + ', '*n + ' ]'
      for ( int index =0; index < size  &&  !isMultiLine; ++index )
      {
         writeValue( value[index] );
         lineLength += int( childValues_[index].length() );
         isMultiLine = isMultiLine  &&  hasCommentForValue( value[index] );
      }
      addChildValues_ = false;
      isMultiLine = isMultiLine  ||  lineLength >= rightMargin_;
   }
   return isMultiLine;
}


void 
StyledStreamWriter::pushValue( const std::string &value )
{
   if ( addChildValues_ )
      childValues_.push_back( value );
   else
      *document_ << value;
}


void 
StyledStreamWriter::writeIndent()
{
  /*
    Some comments in this method would have been nice. ;-)

   if ( !document_.empty() )
   {
      char last = document_[document_.length()-1];
      if ( last == ' ' )     // already indented
         return;
      if ( last != '\n' )    // Comments may add new-line
         *document_ << '\n';
   }
  */
   *document_ << '\n' << indentString_;
}


void 
StyledStreamWriter::writeWithIndent( const std::string &value )
{
   writeIndent();
   *document_ << value;
}


void 
StyledStreamWriter::indent()
{
   indentString_ += indentation_;
}


void 
StyledStreamWriter::unindent()
{
   assert( indentString_.size() >= indentation_.size() );
   indentString_.resize( indentString_.size() - indentation_.size() );
}


void 
StyledStreamWriter::writeCommentBeforeValue( const Value &root )
{
   if ( !root.hasComment( commentBefore ) )
      return;
   *document_ << normalizeEOL( root.getComment( commentBefore ) );
   *document_ << "\n";
}


void 
StyledStreamWriter::writeCommentAfterValueOnSameLine( const Value &root )
{
   if ( root.hasComment( commentAfterOnSameLine ) )
      *document_ << " " + normalizeEOL( root.getComment( commentAfterOnSameLine ) );

   if ( root.hasComment( commentAfter ) )
   {
      *document_ << "\n";
      *document_ << normalizeEOL( root.getComment( commentAfter ) );
      *document_ << "\n";
   }
}


bool 
StyledStreamWriter::hasCommentForValue( const Value &value )
{
   return value.hasComment( commentBefore )
          ||  value.hasComment( commentAfterOnSameLine )
          ||  value.hasComment( commentAfter );
}


std::string 
StyledStreamWriter::normalizeEOL( const std::string &text )
{
   std::string normalized;
   normalized.reserve( text.length() );
   const char *begin = text.c_str();
   const char *end = begin + text.length();
   const char *current = begin;
   while ( current != end )
   {
      char c = *current++;
      if ( c == '\r' ) // mac or dos EOL
      {
         if ( *current == '\n' ) // convert dos EOL
            ++current;
         normalized += '\n';
      }
      else // handle unix EOL & other char
         normalized += c;
   }
   return normalized;
}


std::ostream& operator<<( std::ostream &sout, const Value &root )
{
   Json::StyledStreamWriter writer;
   writer.write(sout, root);
   return sout;
}


} // namespace Json

```

`samples-android/Common/external/jsoncpp/src/test_lib_json/jsontest.cpp`:

```cpp
#define _CRT_SECURE_NO_WARNINGS 1 // Prevents deprecation warning with MSVC
#include "jsontest.h"
#include <stdio.h>
#include <string>

#if defined(_MSC_VER)
// Used to install a report hook that prevent dialog on assertion and error.
# include <crtdbg.h>
#endif // if defined(_MSC_VER)

#if defined(_WIN32)
// Used to prevent dialog on memory fault.
// Limits headers included by Windows.h
# define WIN32_LEAN_AND_MEAN
# define NOSERVICE
# define NOMCX
# define NOIME
# define NOSOUND
# define NOCOMM
# define NORPC
# define NOGDI
# define NOUSER
# define NODRIVERS
# define NOLOGERROR
# define NOPROFILER
# define NOMEMMGR
# define NOLFILEIO
# define NOOPENFILE
# define NORESOURCE
# define NOATOM
# define NOLANGUAGE
# define NOLSTRING
# define NODBCS
# define NOKEYBOARDINFO
# define NOGDICAPMASKS
# define NOCOLOR
# define NOGDIOBJ
# define NODRAWTEXT
# define NOTEXTMETRIC
# define NOSCALABLEFONT
# define NOBITMAP
# define NORASTEROPS
# define NOMETAFILE
# define NOSYSMETRICS
# define NOSYSTEMPARAMSINFO
# define NOMSG
# define NOWINSTYLES
# define NOWINOFFSETS
# define NOSHOWWINDOW
# define NODEFERWINDOWPOS
# define NOVIRTUALKEYCODES
# define NOKEYSTATES
# define NOWH
# define NOMENUS
# define NOSCROLL
# define NOCLIPBOARD
# define NOICONS
# define NOMB
# define NOSYSCOMMANDS
# define NOMDI
# define NOCTLMGR
# define NOWINMESSAGES
# include <windows.h>
#endif // if defined(_WIN32)

namespace JsonTest {


// class TestResult
// //////////////////////////////////////////////////////////////////

TestResult::TestResult()
   : predicateId_( 1 )
   , lastUsedPredicateId_( 0 )
   , messageTarget_( 0 )
{
   // The root predicate has id 0
   rootPredicateNode_.id_ = 0;
   rootPredicateNode_.next_ = 0;
   predicateStackTail_ = &rootPredicateNode_;
}


void 
TestResult::setTestName( const std::string &name )
{
   name_ = name;
}

TestResult &
TestResult::addFailure( const char *file, unsigned int line,
                        const char *expr )
{
   /// Walks the PredicateContext stack adding them to failures_ if not already added.
   unsigned int nestingLevel = 0;
   PredicateContext *lastNode = rootPredicateNode_.next_;
   for ( ; lastNode != 0; lastNode = lastNode->next_ )
   {
      if ( lastNode->id_ > lastUsedPredicateId_ ) // new PredicateContext
      {
         lastUsedPredicateId_ = lastNode->id_;
         addFailureInfo( lastNode->file_, lastNode->line_, lastNode->expr_,
                         nestingLevel );
         // Link the PredicateContext to the failure for message target when 
         // popping the PredicateContext.
         lastNode->failure_ = &( failures_.back() );
      }
      ++nestingLevel;
   }

   // Adds the failed assertion
   addFailureInfo( file, line, expr, nestingLevel );
   messageTarget_ = &( failures_.back() );
   return *this;
}


void 
TestResult::addFailureInfo( const char *file, unsigned int line,
                            const char *expr, unsigned int nestingLevel )
{
   Failure failure;
   failure.file_ = file;
   failure.line_ = line;
   if ( expr )
   {
      failure.expr_ = expr;
   }
   failure.nestingLevel_ = nestingLevel;
   failures_.push_back( failure );
}


TestResult &
TestResult::popPredicateContext()
{
   PredicateContext *lastNode = &rootPredicateNode_;
   while ( lastNode->next_ != 0  &&  lastNode->next_->next_ != 0 )
   {
      lastNode = lastNode->next_;
   }
   // Set message target to popped failure
   PredicateContext *tail = lastNode->next_;
   if ( tail != 0  &&  tail->failure_ != 0 )
   {
      messageTarget_ = tail->failure_;
   }
   // Remove tail from list
   predicateStackTail_ = lastNode;
   lastNode->next_ = 0;
   return *this;
}


bool 
TestResult::failed() const
{
   return !failures_.empty();
}


unsigned int 
TestResult::getAssertionNestingLevel() const
{
   unsigned int level = 0;
   const PredicateContext *lastNode = &rootPredicateNode_;
   while ( lastNode->next_ != 0 )
   {
      lastNode = lastNode->next_;
      ++level;
   }
   return level;
}


void 
TestResult::printFailure( bool printTestName ) const
{
   if ( failures_.empty() )
   {
      return;
   }

   if ( printTestName )
   {
      printf( "* Detail of %s test failure:\n", name_.c_str() );
   }

   // Print in reverse to display the callstack in the right order
   Failures::const_iterator itEnd = failures_.end();
   for ( Failures::const_iterator it = failures_.begin(); it != itEnd; ++it )
   {
      const Failure &failure = *it;
      std::string indent( failure.nestingLevel_ * 2, ' ' );
      if ( failure.file_ )
      {
         printf( "%s%s(%d): ", indent.c_str(), failure.file_, failure.line_ );
      }
      if ( !failure.expr_.empty() )
      {
         printf( "%s\n", failure.expr_.c_str() );
      }
      else if ( failure.file_ )
      {
         printf( "\n" );
      }
      if ( !failure.message_.empty() )
      {
         std::string reindented = indentText( failure.message_, indent + "  " );
         printf( "%s\n", reindented.c_str() );
      }
   }
}


std::string 
TestResult::indentText( const std::string &text, 
                        const std::string &indent )
{
   std::string reindented;
   std::string::size_type lastIndex = 0;
   while ( lastIndex < text.size() )
   {
      std::string::size_type nextIndex = text.find( '\n', lastIndex );
      if ( nextIndex == std::string::npos )
      {
         nextIndex = text.size() - 1;
      }
      reindented += indent;
      reindented += text.substr( lastIndex, nextIndex - lastIndex + 1 );
      lastIndex = nextIndex + 1;
   }
   return reindented;
}


TestResult &
TestResult::addToLastFailure( const std::string &message )
{
   if ( messageTarget_ != 0 )
   {
      messageTarget_->message_ += message;
   }
   return *this;
}


TestResult &
TestResult::operator << ( bool value )
{
   return addToLastFailure( value ? "true" : "false" );
}


TestResult &
TestResult::operator << ( int value )
{
   char buffer[32];
   sprintf( buffer, "%d", value );
   return addToLastFailure( buffer );
}


TestResult &
TestResult::operator << ( unsigned int value )
{
   char buffer[32];
   sprintf( buffer, "%u", value );
   return addToLastFailure( buffer );
}


TestResult &
TestResult::operator << ( double value )
{
   char buffer[32];
   sprintf( buffer, "%16g", value );
   return addToLastFailure( buffer );
}


TestResult &
TestResult::operator << ( const char *value )
{
   return addToLastFailure( value ? value 
                                  : "<NULL>" );
}


TestResult &
TestResult::operator << ( const std::string &value )
{
   return addToLastFailure( value );
}



// class TestCase
// //////////////////////////////////////////////////////////////////

TestCase::TestCase()
   : result_( 0 )
{
}


TestCase::~TestCase()
{
}


void 
TestCase::run( TestResult &result )
{
   result_ = &result;
   runTestCase();
}



// class Runner
// //////////////////////////////////////////////////////////////////

Runner::Runner()
{
}


Runner &
Runner::add( TestCaseFactory factory )
{
   tests_.push_back( factory );
   return *this;
}


unsigned int 
Runner::testCount() const
{
   return static_cast<unsigned int>( tests_.size() );
}


std::string 
Runner::testNameAt( unsigned int index ) const
{
   TestCase *test = tests_[index]();
   std::string name = test->testName();
   delete test;
   return name;
}


void 
Runner::runTestAt( unsigned int index, TestResult &result ) const
{
   TestCase *test = tests_[index]();
   result.setTestName( test->testName() );
   printf( "Testing %s: ", test->testName() );
   fflush( stdout );
#if JSON_USE_EXCEPTION
   try 
   {
#endif // if JSON_USE_EXCEPTION
      test->run( result );
#if JSON_USE_EXCEPTION
   } 
   catch ( const std::exception &e ) 
   {
      result.addFailure( __FILE__, __LINE__, 
         "Unexpected exception caugth:" ) << e.what();
   }
#endif // if JSON_USE_EXCEPTION
   delete test;
   const char *status = result.failed() ? "FAILED" 
                                        : "OK";
   printf( "%s\n", status );
   fflush( stdout );
}


bool 
Runner::runAllTest( bool printSummary ) const
{
   unsigned int count = testCount();
   std::deque<TestResult> failures;
   for ( unsigned int index = 0; index < count; ++index )
   {
      TestResult result;
      runTestAt( index, result );
      if ( result.failed() )
      {
         failures.push_back( result );
      }
   }

   if ( failures.empty() )
   {
      if ( printSummary )
      {
         printf( "All %d tests passed\n", count );
      }
      return true;
   }
   else
   {
      for ( unsigned int index = 0; index < failures.size(); ++index )
      {
         TestResult &result = failures[index];
         result.printFailure( count > 1 );
      }

      if ( printSummary )
      {
         unsigned int failedCount = static_cast<unsigned int>( failures.size() );
         unsigned int passedCount = count - failedCount;
         printf( "%d/%d tests passed (%d failure(s))\n", passedCount, count, failedCount );
      }
      return false;
   }
}


bool 
Runner::testIndex( const std::string &testName, 
                   unsigned int &indexOut ) const
{
   unsigned int count = testCount();
   for ( unsigned int index = 0; index < count; ++index )
   {
      if ( testNameAt(index) == testName )
      {
         indexOut = index;
         return true;
      }
   }
   return false;
}


void 
Runner::listTests() const
{
   unsigned int count = testCount();
   for ( unsigned int index = 0; index < count; ++index )
   {
      printf( "%s\n", testNameAt( index ).c_str() );
   }
}


int 
Runner::runCommandLine( int argc, const char *argv[] ) const
{
   typedef std::deque<std::string> TestNames;
   Runner subrunner;
   for ( int index = 1; index < argc; ++index )
   {
      std::string opt = argv[index];
      if ( opt == "--list-tests" )
      {
         listTests();
         return 0;
      }
      else if ( opt == "--test-auto" )
      {
         preventDialogOnCrash();
      }
      else if ( opt == "--test" )
      {
         ++index;
         if ( index < argc )
         {
            unsigned int testNameIndex;
            if ( testIndex( argv[index], testNameIndex ) )
            {
               subrunner.add( tests_[testNameIndex] );
            }
            else
            {
               fprintf( stderr, "Test '%s' does not exist!\n", argv[index] );
               return 2;
            }
         }
         else
         {
            printUsage( argv[0] );
            return 2;
         }
      }
      else
      {
         printUsage( argv[0] );
         return 2;
      }
   }
   bool succeeded;
   if ( subrunner.testCount() > 0 )
   {
      succeeded = subrunner.runAllTest( subrunner.testCount() > 1 );
   }
   else
   {
      succeeded = runAllTest( true );
   }
   return succeeded ? 0 
                    : 1;
}


#if defined(_MSC_VER)
// Hook MSVCRT assertions to prevent dialog from appearing
static int 
msvcrtSilentReportHook( int reportType, char *message, int *returnValue )
{
   // The default CRT handling of error and assertion is to display
   // an error dialog to the user.
   // Instead, when an error or an assertion occurs, we force the 
   // application to terminate using abort() after display
   // the message on stderr. 
   if ( reportType == _CRT_ERROR  ||  
        reportType == _CRT_ASSERT )
   {
      // calling abort() cause the ReportHook to be called
      // The following is used to detect this case and let's the
      // error handler fallback on its default behaviour (
      // display a warning message)
      static volatile bool isAborting = false;
      if ( isAborting ) 
      {
         return TRUE;
      }
      isAborting = true;

      fprintf( stderr, "CRT Error/Assert:\n%s\n", message );
      fflush( stderr );
      abort();
   }
   // Let's other reportType (_CRT_WARNING) be handled as they would by default
   return FALSE;
}
#endif // if defined(_MSC_VER)


void 
Runner::preventDialogOnCrash()
{
#if defined(_MSC_VER)
   // Install a hook to prevent MSVCRT error and assertion from
   // popping a dialog.
   _CrtSetReportHook( &msvcrtSilentReportHook );
#endif // if defined(_MSC_VER)

   // @todo investiguate this handler (for buffer overflow)
   // _set_security_error_handler

#if defined(_WIN32)
   // Prevents the system from popping a dialog for debugging if the
   // application fails due to invalid memory access.
   SetErrorMode( SEM_FAILCRITICALERRORS 
                 | SEM_NOGPFAULTERRORBOX 
                 | SEM_NOOPENFILEERRORBOX );
#endif // if defined(_WIN32)
}

void 
Runner::printUsage( const char *appName )
{
   printf( 
      "Usage: %s [options]\n"
      "\n"
      "If --test is not specified, then all the test cases be run.\n"
      "\n"
      "Valid options:\n"
      "--list-tests: print the name of all test cases on the standard\n"
      "              output and exit.\n"
      "--test TESTNAME: executes the test case with the specified name.\n"
      "                 May be repeated.\n"
      "--test-auto: prevent dialog prompting for debugging on crash.\n"
      , appName );
}



// Assertion functions
// //////////////////////////////////////////////////////////////////

TestResult &
checkStringEqual( TestResult &result, 
                  const std::string &expected, const std::string &actual,
                  const char *file, unsigned int line, const char *expr )
{
   if ( expected != actual )
   {
      result.addFailure( file, line, expr );
      result << "Expected: '" << expected << "'\n";
      result << "Actual  : '" << actual << "'";
   }
   return result;
}


} // namespace JsonTest

```

`samples-android/Common/external/jsoncpp/src/test_lib_json/jsontest.h`:

```h
#ifndef JSONTEST_H_INCLUDED
# define JSONTEST_H_INCLUDED

# include <json/config.h>
# include <stdio.h>
# include <deque>
# include <string>

// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// Mini Unit Testing framework
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////



/** \brief Unit testing framework.
 * \warning: all assertions are non-aborting, test case execution will continue
 *           even if an assertion namespace.
 *           This constraint is for portability: the framework needs to compile
 *           on Visual Studio 6 and must not require exception usage.
 */
namespace JsonTest {


   class Failure
   {
   public:
      const char *file_;
      unsigned int line_;
      std::string expr_;
      std::string message_;
      unsigned int nestingLevel_;
   };


   /// Context used to create the assertion callstack on failure.
   /// Must be a POD to allow inline initialisation without stepping 
   /// into the debugger.
   struct PredicateContext
   {
      typedef unsigned int Id;
      Id id_;
      const char *file_;
      unsigned int line_;
      const char *expr_;
      PredicateContext *next_;
      /// Related Failure, set when the PredicateContext is converted
      /// into a Failure.
      Failure *failure_;
   };

   class TestResult
   {
   public:
      TestResult();

      /// \internal Implementation detail for assertion macros
      /// Not encapsulated to prevent step into when debugging failed assertions
      /// Incremented by one on assertion predicate entry, decreased by one
      /// by addPredicateContext().
      PredicateContext::Id predicateId_;

      /// \internal Implementation detail for predicate macros
      PredicateContext *predicateStackTail_;

      void setTestName( const std::string &name );

      /// Adds an assertion failure.
      TestResult &addFailure( const char *file, unsigned int line,
                              const char *expr = 0 );

      /// Removes the last PredicateContext added to the predicate stack
      /// chained list.
      /// Next messages will be targed at the PredicateContext that was removed.
      TestResult &popPredicateContext();

      bool failed() const;

      void printFailure( bool printTestName ) const;

      TestResult &operator << ( bool value );
      TestResult &operator << ( int value );
      TestResult &operator << ( unsigned int value );
      TestResult &operator << ( double value );
      TestResult &operator << ( const char *value );
      TestResult &operator << ( const std::string &value );

   private:
      TestResult &addToLastFailure( const std::string &message );
      unsigned int getAssertionNestingLevel() const;
      /// Adds a failure or a predicate context
      void addFailureInfo( const char *file, unsigned int line,
                           const char *expr, unsigned int nestingLevel  );
      static std::string indentText( const std::string &text, 
                                     const std::string &indent );

      typedef std::deque<Failure> Failures;
      Failures failures_;
      std::string name_;
      PredicateContext rootPredicateNode_;
      PredicateContext::Id lastUsedPredicateId_;
      /// Failure which is the target of the messages added using operator <<
      Failure *messageTarget_;
   };


   class TestCase
   {
   public:
      TestCase();

      virtual ~TestCase();

      void run( TestResult &result );

      virtual const char *testName() const = 0;

   protected:
      TestResult *result_;

   private:
      virtual void runTestCase() = 0;
   };

   /// Function pointer type for TestCase factory
   typedef TestCase *(*TestCaseFactory)();

   class Runner
   {
   public:
      Runner();

      /// Adds a test to the suite
      Runner &add( TestCaseFactory factory );

      /// Runs test as specified on the command-line
      /// If no command-line arguments are provided, run all tests.
      /// If --list-tests is provided, then print the list of all test cases
      /// If --test <testname> is provided, then run test testname.
      int runCommandLine( int argc, const char *argv[] ) const;

      /// Runs all the test cases
      bool runAllTest( bool printSummary ) const;

      /// Returns the number of test case in the suite
      unsigned int testCount() const;

      /// Returns the name of the test case at the specified index
      std::string testNameAt( unsigned int index ) const;

      /// Runs the test case at the specified index using the specified TestResult
      void runTestAt( unsigned int index, TestResult &result ) const;

      static void printUsage( const char *appName );

   private: // prevents copy construction and assignment
      Runner( const Runner &other );
      Runner &operator =( const Runner &other );

   private:
      void listTests() const;
      bool testIndex( const std::string &testName, unsigned int &index ) const;
      static void preventDialogOnCrash();

   private:
      typedef std::deque<TestCaseFactory> Factories;
      Factories tests_;
   };

   template<typename T>
   TestResult &
   checkEqual( TestResult &result, const T &expected, const T &actual, 
               const char *file, unsigned int line, const char *expr )
   {
      if ( expected != actual )
      {
         result.addFailure( file, line, expr );
         result << "Expected: " << expected << "\n";
         result << "Actual  : " << actual;
      }
      return result;
   }

   TestResult &
   checkStringEqual( TestResult &result, 
                     const std::string &expected, const std::string &actual,
                     const char *file, unsigned int line, const char *expr );

} // namespace JsonTest


/// \brief Asserts that the given expression is true.
/// JSONTEST_ASSERT( x == y ) << "x=" << x << ", y=" << y;
/// JSONTEST_ASSERT( x == y );
#define JSONTEST_ASSERT( expr )                                               \
   if ( condition )                                                           \
   {                                                                          \
   }                                                                          \
   else                                                                       \
      result_->addFailure( __FILE__, __LINE__, #expr )

/// \brief Asserts that the given predicate is true.
/// The predicate may do other assertions and be a member function of the fixture.
#define JSONTEST_ASSERT_PRED( expr )                                    \
   {                                                                    \
      JsonTest::PredicateContext _minitest_Context = {                  \
         result_->predicateId_, __FILE__, __LINE__, #expr };            \
      result_->predicateStackTail_->next_ = &_minitest_Context;         \
      result_->predicateId_ += 1;                                       \
      result_->predicateStackTail_ = &_minitest_Context;                \
      (expr);                                                           \
      result_->popPredicateContext();                                   \
   }                                                                    \
   *result_

/// \brief Asserts that two values are equals.
#define JSONTEST_ASSERT_EQUAL( expected, actual )          \
   JsonTest::checkEqual( *result_, expected, actual,       \
                         __FILE__, __LINE__,               \
                         #expected " == " #actual )

/// \brief Asserts that two values are equals.
#define JSONTEST_ASSERT_STRING_EQUAL( expected, actual ) \
   JsonTest::checkStringEqual( *result_,                 \
      std::string(expected), std::string(actual),        \
      #expected " == " #actual )

/// \brief Begin a fixture test case.
#define JSONTEST_FIXTURE( FixtureType, name )                  \
   class Test##FixtureType##name : public FixtureType          \
   {                                                           \
   public:                                                     \
      static JsonTest::TestCase *factory()                     \
      {                                                        \
         return new Test##FixtureType##name();                 \
      }                                                        \
   public: /* overidden from TestCase */                       \
      virtual const char *testName() const                     \
      {                                                        \
         return #FixtureType "/" #name;                        \
      }                                                        \
      virtual void runTestCase();                              \
   };                                                          \
                                                               \
   void Test##FixtureType##name::runTestCase()

#define JSONTEST_FIXTURE_FACTORY( FixtureType, name ) \
   &Test##FixtureType##name::factory

#define JSONTEST_REGISTER_FIXTURE( runner, FixtureType, name ) \
   (runner).add( JSONTEST_FIXTURE_FACTORY( FixtureType, name ) )

#endif // ifndef JSONTEST_H_INCLUDED

```

`samples-android/Common/external/jsoncpp/src/test_lib_json/main.cpp`:

```cpp
#include <json/json.h>
#include "jsontest.h"


// TODO:
// - boolean value returns that they are integral. Should not be.
// - unsigned integer in integer range are not considered to be valid integer. Should check range.


// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////
// Json Library test cases
// //////////////////////////////////////////////////////////////////
// //////////////////////////////////////////////////////////////////


struct ValueTest : JsonTest::TestCase
{
   Json::Value null_;
   Json::Value emptyArray_;
   Json::Value emptyObject_;
   Json::Value integer_;
   Json::Value unsignedInteger_;
   Json::Value smallUnsignedInteger_;
   Json::Value real_;
   Json::Value array1_;
   Json::Value object1_;
   Json::Value emptyString_;
   Json::Value string1_;
   Json::Value string_;
   Json::Value true_;
   Json::Value false_;

   ValueTest()
      : emptyArray_( Json::arrayValue )
      , emptyObject_( Json::objectValue )
      , integer_( 123456789 )
      , smallUnsignedInteger_( Json::Value::UInt( Json::Value::maxInt ) )
      , unsignedInteger_( 34567890u )
      , real_( 1234.56789 )
      , emptyString_( "" )
      , string1_( "a" )
      , string_( "sometext with space" )
      , true_( true )
      , false_( false )
   {
      array1_.append( 1234 );
      object1_["id"] = 1234;
   }

   struct IsCheck
   {
      /// Initialize all checks to \c false by default.
      IsCheck();

      bool isObject_;
      bool isArray_;
      bool isBool_;
      bool isDouble_;
      bool isInt_;
      bool isUInt_;
      bool isIntegral_;
      bool isNumeric_;
      bool isString_;
      bool isNull_;
   };

   void checkConstMemberCount( const Json::Value &value, unsigned int expectedCount );

   void checkMemberCount( Json::Value &value, unsigned int expectedCount );

   void checkIs( const Json::Value &value, const IsCheck &check );
};


JSONTEST_FIXTURE( ValueTest, size )
{
   JSONTEST_ASSERT_PRED( checkMemberCount(emptyArray_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(emptyObject_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(array1_, 1) );
   JSONTEST_ASSERT_PRED( checkMemberCount(object1_, 1) );
   JSONTEST_ASSERT_PRED( checkMemberCount(null_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(integer_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(real_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(emptyString_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(string_, 0) );
   JSONTEST_ASSERT_PRED( checkMemberCount(true_, 0) );
}


JSONTEST_FIXTURE( ValueTest, isObject )
{
   IsCheck checks;
   checks.isObject_ = true;
   JSONTEST_ASSERT_PRED( checkIs( emptyObject_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( object1_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isArray )
{
   IsCheck checks;
   checks.isArray_ = true;
   JSONTEST_ASSERT_PRED( checkIs( emptyArray_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( array1_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isNull )
{
   IsCheck checks;
   checks.isNull_ = true;
   checks.isObject_ = true;
   checks.isArray_ = true;
   JSONTEST_ASSERT_PRED( checkIs( null_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isString )
{
   IsCheck checks;
   checks.isString_ = true;
   JSONTEST_ASSERT_PRED( checkIs( emptyString_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( string_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( string1_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isBool )
{
   IsCheck checks;
   checks.isBool_ = true;
   checks.isIntegral_ = true;
   checks.isNumeric_ = true;
   JSONTEST_ASSERT_PRED( checkIs( false_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( true_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isDouble )
{
   IsCheck checks;
   checks.isDouble_ = true;
   checks.isNumeric_ = true;
   JSONTEST_ASSERT_PRED( checkIs( real_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isInt )
{
   IsCheck checks;
   checks.isInt_ = true;
   checks.isNumeric_ = true;
   checks.isIntegral_ = true;
   JSONTEST_ASSERT_PRED( checkIs( integer_, checks ) );
}


JSONTEST_FIXTURE( ValueTest, isUInt )
{
   IsCheck checks;
   checks.isUInt_ = true;
   checks.isNumeric_ = true;
   checks.isIntegral_ = true;
   JSONTEST_ASSERT_PRED( checkIs( unsignedInteger_, checks ) );
   JSONTEST_ASSERT_PRED( checkIs( smallUnsignedInteger_, checks ) );
}


void
ValueTest::checkConstMemberCount( const Json::Value &value, unsigned int expectedCount )
{
   unsigned int count = 0;
   Json::Value::const_iterator itEnd = value.end();
   for ( Json::Value::const_iterator it = value.begin(); it != itEnd; ++it )
   {
      ++count;
   }
   JSONTEST_ASSERT_EQUAL( expectedCount, count ) << "Json::Value::const_iterator";
}

void
ValueTest::checkMemberCount( Json::Value &value, unsigned int expectedCount )
{
   JSONTEST_ASSERT_EQUAL( expectedCount, value.size() );

   unsigned int count = 0;
   Json::Value::iterator itEnd = value.end();
   for ( Json::Value::iterator it = value.begin(); it != itEnd; ++it )
   {
      ++count;
   }
   JSONTEST_ASSERT_EQUAL( expectedCount, count ) << "Json::Value::iterator";

   JSONTEST_ASSERT_PRED( checkConstMemberCount(value, expectedCount) );
}


ValueTest::IsCheck::IsCheck()
   : isObject_( false )
   , isArray_( false )
   , isBool_( false )
   , isDouble_( false )
   , isInt_( false )
   , isUInt_( false )
   , isIntegral_( false )
   , isNumeric_( false )
   , isString_( false )
   , isNull_( false )
{
}


void 
ValueTest::checkIs( const Json::Value &value, const IsCheck &check )
{
   JSONTEST_ASSERT_EQUAL( check.isObject_, value.isObject() );
   JSONTEST_ASSERT_EQUAL( check.isArray_, value.isArray() );
   JSONTEST_ASSERT_EQUAL( check.isBool_, value.isBool() );
   JSONTEST_ASSERT_EQUAL( check.isDouble_, value.isDouble() );
   JSONTEST_ASSERT_EQUAL( check.isInt_, value.isInt() );
   JSONTEST_ASSERT_EQUAL( check.isUInt_, value.isUInt() );
   JSONTEST_ASSERT_EQUAL( check.isIntegral_, value.isIntegral() );
   JSONTEST_ASSERT_EQUAL( check.isNumeric_, value.isNumeric() );
   JSONTEST_ASSERT_EQUAL( check.isString_, value.isString() );
   JSONTEST_ASSERT_EQUAL( check.isNull_, value.isNull() );
}



int main( int argc, const char *argv[] )
{
   JsonTest::Runner runner;
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, size );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isObject );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isArray );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isBool );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isInt );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isUInt );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isDouble );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isString );
   JSONTEST_REGISTER_FIXTURE( runner, ValueTest, isNull );
   return runner.runCommandLine( argc, argv );
}

```

`samples-android/Common/external/jsoncpp/src/test_lib_json/sconscript`:

```
Import( 'env_testing buildUnitTests' )

buildUnitTests( env_testing, Split( """
    main.cpp
    jsontest.cpp
     """ ),
    'test_lib_json' )

# For 'check' to work, 'libs' must be built first.
env_testing.Depends('test_lib_json', '#libs')

```

`samples-android/Common/gpg-sdk/build.gradle`:

```gradle
/* Copyright (C) 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*
    sub module to download the Google Play games
 */
project.ext {
    if (!project.hasProperty('gpg_sdk_link')) {
        gpg_sdk_link = System.getenv("GPG_SDK_LINK")
        if (gpg_sdk_link == null || gpg_sdk_link.isEmpty()) {
          gpg_sdk_link = 'https://developers.google.com/games/services/downloads/gpg-cpp-sdk.v3.0.zip'
        }
    }
}
task download_and_stage_gpg_sdk(dependsOn:'unzip_gpg_sdk') {

}

task fetch_gpg_cpp_sdk () {

    doFirst {
        ant.get(src: gpg_sdk_link, dest: 'gpg_cpp_sdk.zip', skipexisting: 'true')
    }
    doLast {
        println "Got ${gpg_sdk_link} as gpg_cpp_sdk.zip"
    }
    outputs.files('gpg_cpp_sdk.zip')
    outputs.upToDateWhen {file('gpg_cpp_sdk.zip').exists()}
}
fetch_gpg_cpp_sdk.description = "Download the gpg sdk from the specified location"

task unzip_gpg_sdk() {
    def dest = file( "${project.projectDir}/gpg-cpp-sdk")
    doFirst {
          if (!dest.exists()) {
            copy {
                from(zipTree('gpg_cpp_sdk.zip')) {
                    exclude 'gpg-cpp-sdk/ios/**/*'
                    include 'gpg-cpp-sdk/android/**/*'
                }

                into { project.projectDir }
            }
        } else {
            println "Skipping sdk unzipping, ${dest.absolutePath} exists"
        }
    }
    outputs.upToDateWhen {file("${dest.absolutePath}/android").exists() &&
    file('gpg-cpp-sdk/android/lib/c++/arm64-v8a/libgpg.a').exists()}
    description = "Unzips the GPG SDK into the correct dir for NDK"
    dependsOn fetch_gpg_cpp_sdk
}

task clean() {
    doFirst {
        file('gpg_cpp_sdk.zip').delete()
    }
    doLast {
        delete 'gpg-cpp-sdk'
        delete 'build'
    }
}

defaultTasks = ['unzip_gpg_sdk']

```

`samples-android/Minimalist/CMakeLists.txt`:

```txt
# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##

cmake_minimum_required(VERSION 3.4.1)

add_library(gpg_sdk STATIC IMPORTED)
set_target_properties(gpg_sdk PROPERTIES IMPORTED_LOCATION
    ${GPG_SDK_PATH}/lib/c++/${ANDROID_ABI}/libgpg.a)

# build native_app_glue as a static lib
add_library(native_app_glue STATIC
    ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)

# Export ANativeActivity_onCreate()
# Refer to: https://github.com/android-ndk/ndk/issues/381.
set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -u ANativeActivity_onCreate")

add_library(native-activity
             SHARED
             src/main/cpp/main.cpp
             src/main/cpp/StateManager.cpp
           )

target_include_directories(native-activity PRIVATE
     ${ANDROID_NDK}/sources/android/native_app_glue
     ${GPG_SDK_PATH}/include
)

target_link_libraries(native-activity
                       gpg_sdk
                       native_app_glue
                       log
                       android
                       EGL
                       GLESv1_CM
                       z)

```

`samples-android/Minimalist/build.gradle`:

```gradle
/*
 * Copyright 2017 (C) Google LLC
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
apply plugin: 'com.android.application'

android {
    compileSdkVersion 27
    defaultConfig {
        //
        //  REPLACE THE APPLICATION ID with your bundle ID
        //
        applicationId "com.google.example.games.ReplaceMe"
        versionCode 1
        versionName "1.0"

        minSdkVersion 14
        targetSdkVersion 27

        ndk.abiFilters 'x86', 'armeabi-v7a', 'arm64-v8a'

        externalNativeBuild {
            cmake {
                cppFlags "-std=c++11 -frtti -Wall -Werror"
                arguments "-DGPG_SDK_PATH=${project(':Common:gpg-sdk').projectDir}/gpg-cpp-sdk/android",
                    "-DANDROID_STL=c++_static",
                    "-DANDROID_TOOLCHAIN=clang"
            }
        }
    }

    externalNativeBuild {
        cmake.path "CMakeLists.txt"
    }
}

dependencies {
    implementation 'com.google.android.gms:play-services-games:11.8.0'
    implementation 'com.google.android.gms:play-services-nearby:11.8.0'
    implementation 'com.android.support:support-v4:27.0.2'
}

```

`samples-android/Minimalist/proguard-project.txt`:

```txt
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

```

`samples-android/Minimalist/src/main/AndroidManifest.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
     Copyright 2018 Google LLC

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->
<!-- BEGIN_INCLUDE(manifest) -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          package="com.google.example.games.Minimalist">

    <!-- This .apk has no Java code itself, so set hasCode to false. -->
    <application android:label="@string/app_name"
                 android:allowBackup="false"
                 android:icon="@drawable/ic_launcher"
                 tools:ignore="GoogleAppIndexingWarning">

        <meta-data android:name="com.google.android.gms.games.APP_ID"
                   android:value="@string/app_id" />
        <meta-data android:name="com.google.android.gms.version"
                   android:value="@integer/google_play_services_version"/>


        <!-- Our activity is the built-in NativeActivity framework class.
             This will take care of integrating with our NDK code. -->
        <activity android:name="android.app.NativeActivity"
                android:label="@string/app_name"
                android:configChanges="orientation|keyboardHidden">
            <!-- Tell NativeActivity the name of or .so -->
            <meta-data android:name="android.app.lib_name"
                    android:value="native-activity" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
<!-- END_INCLUDE(manifest) -->

```

`samples-android/Minimalist/src/main/cpp/StateManager.cpp`:

```cpp
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

#include "StateManager.h"

#include "android/log.h"
#define DEBUG_TAG "Minimalist"
#define LOGI(...) \
    ((void)__android_log_print(ANDROID_LOG_INFO, DEBUG_TAG, __VA_ARGS__))

#include "gpg/achievement_manager.h"
bool StateManager::is_auth_in_progress_ = false;
std::unique_ptr<gpg::GameServices> StateManager::game_services_;

void OnAuthActionFinished(gpg::AuthOperation op, gpg::AuthStatus status) {
  LOGI("OnAuthActionFinished");
}

void OnAuthActionStarted(gpg::AuthOperation op) {
  LOGI("OnAuthActionStarted");
  switch ( op ) {
  case gpg::AuthOperation::SIGN_IN:
    LOGI("Signing In");
    break;
  case gpg::AuthOperation::SIGN_OUT:
    LOGI("Signing Out");
    break;
  }
}

gpg::GameServices* StateManager::GetGameServices() {
  return game_services_.get();
}

void StateManager::BeginUserInitiatedSignIn() {
  if (!game_services_->IsAuthorized()) {
    LOGI("StartAuthorizationUI");
    game_services_->StartAuthorizationUI();
  }
}

void StateManager::SignOut() {
  if (game_services_->IsAuthorized()) {
    LOGI("SignOut");
    game_services_->SignOut();
  }
}

void StateManager::UnlockAchievement(char const *achievement_id) {
  if (game_services_->IsAuthorized()) {
    LOGI("Achievement unlocked");
    game_services_->Achievements().Unlock(achievement_id);
  }
}

void StateManager::SubmitHighScore(char const *leaderboard_id, uint64_t score) {
  if (game_services_->IsAuthorized()) {
    LOGI("High score submitted");
    game_services_->Leaderboards().SubmitScore(leaderboard_id, score);
  }
}

void StateManager::ShowAchievements() {
  if (game_services_->IsAuthorized()) {
    LOGI("Show achievement");
    game_services_->Achievements().ShowAllUI([](const gpg::UIStatus status) {});
  }
}

void StateManager::ShowLeaderboard(char const *leaderboard_id) {
  if (game_services_->IsAuthorized()) {
    LOGI("Show achievement");
    game_services_->Leaderboards().ShowUI(leaderboard_id, [](const gpg::UIStatus status) {});
  }
}


void StateManager::InitServices(
    gpg::PlatformConfiguration const &pc,
    gpg::GameServices::Builder::OnAuthActionStartedCallback started_callback,
    gpg::GameServices::Builder::OnAuthActionFinishedCallback
        finished_callback) {
  LOGI("Initializing Services");
  if (!game_services_) {
    LOGI("Uninitialized services, so creating");
    game_services_ = gpg::GameServices::Builder()
        .SetOnLog(gpg::DEFAULT_ON_LOG, gpg::LogLevel::VERBOSE)
        .SetOnAuthActionStarted([started_callback](gpg::AuthOperation op) {
          is_auth_in_progress_ = true;
          if (started_callback != nullptr)
            started_callback(op);
        })
        .SetOnAuthActionFinished([finished_callback](gpg::AuthOperation op,
                                                     gpg::AuthStatus status) {
          LOGI("Sign %s finished with a result of %d", op == gpg::AuthOperation::SIGN_IN? "in" : "out",status);
          is_auth_in_progress_ = false;
          if (finished_callback != nullptr)
            finished_callback(op, status);

          if (op != gpg::AuthOperation::SIGN_IN) {
            return;
          }
          LOGI("Fetching all blocking");
          gpg::AchievementManager::FetchAllResponse fetchResponse =
                  game_services_->Achievements().FetchAllBlocking(std::chrono::milliseconds(1000));
          LOGI("--------------------------------------------------------------");

          LOGI("Fetching all nonblocking");
          game_services_->Achievements().FetchAll(gpg::DataSource::CACHE_OR_NETWORK,
                   [] (gpg::AchievementManager::FetchAllResponse response) {
                        LOGI("Achievement response status: %d", response.status);});
                        LOGI("--------------------------------------------------------------");

        })
        .Create(pc);
  }
  LOGI("Created");
}

```

`samples-android/Minimalist/src/main/cpp/StateManager.h`:

```h
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
#ifndef TEAPOT_JNI_STATE_MANAGER_H
#define TEAPOT_JNI_STATE_MANAGER_H

#include "gpg/achievement.h"
#include "gpg/achievement_manager.h"
#include "gpg/builder.h"
#include "gpg/debug.h"
#include "gpg/default_callbacks.h"
#include "gpg/game_services.h"
#include "gpg/leaderboard.h"
#include "gpg/leaderboard_manager.h"
#include "gpg/platform_configuration.h"
#include "gpg/player_manager.h"
#include "gpg/score_page.h"
#include "gpg/types.h"

class StateManager {
 public:
  static void InitServices(
      gpg::PlatformConfiguration const &pc,
      gpg::GameServices::Builder::OnAuthActionStartedCallback started_callback,
      gpg::GameServices::Builder::OnAuthActionFinishedCallback
          finished_callback);
  static gpg::GameServices* GetGameServices();
  static void BeginUserInitiatedSignIn();
  static void SignOut();
  static void UnlockAchievement(const char *achievementId);
  static void SubmitHighScore(const char *leaderboardId, uint64_t score);
  static void ShowAchievements();
  static void ShowLeaderboard(const char *leaderboardId);
  static bool IsAuthInProgress() {
    return is_auth_in_progress_;
  }

 private:
  static bool is_auth_in_progress_;
  static std::unique_ptr<gpg::GameServices> game_services_;
};

#endif  // TEAPOT_JNI_STATE_MANAGER_H

```

`samples-android/Minimalist/src/main/cpp/main.cpp`:

```cpp
/*
 * Copyright (C) 2010 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/* This is the Minimalist Play Games C++ SDK sample.
 *
 * This is a tiny startup example that shows how to use
 * the gpg-cpp SDK with a pure native activity, without
 * wrapping it in Java or doing any JNI calls.
 *
 * Most of this code is taken from the standard NDK
 * sample, and has no UI or other interface.
 *
 * Tap once to sign in and once to sign out.  That's
 * all it does!  See StateManager.cpp for unlocking
 * achievements and other systems.
 *
 * All gpg-cpp-specific code is marked with "gpg-cpp"
 */

// BEGIN_INCLUDE(all)
#include <jni.h>

#include <EGL/egl.h>
#include <GLES/gl.h>

#include <android/sensor.h>
#include <android/log.h>
#include <android_native_app_glue.h>

#include "StateManager.h"

#include "gpg/android_initialization.h"
#include "gpg/debug.h"

#define LOGI(...) \
  ((void)__android_log_print(ANDROID_LOG_INFO, "native-activity", __VA_ARGS__))
#define LOGW(...) \
  ((void)__android_log_print(ANDROID_LOG_WARN, "native-activity", __VA_ARGS__))

/**
 * Our saved state data.
 */
struct saved_state {
  float angle;
  int32_t x;
  int32_t y;
};

/**
 * Shared state for our app.
 */
struct engine {
  struct android_app* app;

  ASensorManager* sensorManager;
  const ASensor* accelerometerSensor;
  ASensorEventQueue* sensorEventQueue;

  int animating;
  EGLDisplay display;
  EGLSurface surface;
  EGLContext context;
  int32_t width;
  int32_t height;
  struct saved_state state;
};

/**
 * Initialize an EGL context for the current display.
 */
static int engine_init_display(struct engine* engine) {
  // initialize OpenGL ES and EGL

  /*
   * Here specify the attributes of the desired configuration.
   * Below, we select an EGLConfig with at least 8 bits per color
   * component compatible with on-screen windows
   */
  const EGLint attribs[] = {EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_BLUE_SIZE,
                            8,                EGL_GREEN_SIZE, 8,
                            EGL_RED_SIZE,     8,              EGL_NONE};
  EGLint w, h;
  EGLint numConfigs;
  EGLConfig config;
  EGLSurface surface;
  EGLContext context;

  EGLDisplay display = eglGetDisplay(EGL_DEFAULT_DISPLAY);

  eglInitialize(display, 0, 0);

  /* Here, the application chooses the configuration it desires. In this
   * sample, we have a very simplified selection process, where we pick
   * the first EGLConfig that matches our criteria */
  eglChooseConfig(display, attribs, &config, 1, &numConfigs);

  surface = eglCreateWindowSurface(display, config, engine->app->window, NULL);
  context = eglCreateContext(display, config, NULL, NULL);

  if (eglMakeCurrent(display, surface, surface, context) == EGL_FALSE) {
    LOGW("Unable to eglMakeCurrent");
    return -1;
  }

  eglQuerySurface(display, surface, EGL_WIDTH, &w);
  eglQuerySurface(display, surface, EGL_HEIGHT, &h);

  engine->display = display;
  engine->context = context;
  engine->surface = surface;
  engine->width = w;
  engine->height = h;
  engine->state.angle = 0;

  // Initialize GL state.
  glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST);
  glEnable(GL_CULL_FACE);
  glShadeModel(GL_SMOOTH);
  glDisable(GL_DEPTH_TEST);

  return 0;
}

/**
 * Just the current frame in the display.
 */
static void engine_draw_frame(struct engine* engine) {
  if (engine->display == NULL) {
    // No display.
    return;
  }

  // Just fill the screen with a color.
  glClearColor(((float)engine->state.x) / engine->width, engine->state.angle,
               ((float)engine->state.y) / engine->height, 1);
  glClear(GL_COLOR_BUFFER_BIT);

  eglSwapBuffers(engine->display, engine->surface);
}

/**
 * Tear down the EGL context currently associated with the display.
 */
static void engine_term_display(struct engine* engine) {
  if (engine->display != EGL_NO_DISPLAY) {
    eglMakeCurrent(engine->display, EGL_NO_SURFACE, EGL_NO_SURFACE,
                   EGL_NO_CONTEXT);
    if (engine->context != EGL_NO_CONTEXT) {
      eglDestroyContext(engine->display, engine->context);
    }
    if (engine->surface != EGL_NO_SURFACE) {
      eglDestroySurface(engine->display, engine->surface);
    }
    eglTerminate(engine->display);
  }
  engine->animating = 0;
  engine->display = EGL_NO_DISPLAY;
  engine->context = EGL_NO_CONTEXT;
  engine->surface = EGL_NO_SURFACE;
}

/**
 * Process the next input event.
 */
static int32_t engine_handle_input(struct android_app* app,
                                   AInputEvent* event) {
  struct engine* engine = (struct engine*)app->userData;
  if (AInputEvent_getType(event) == AINPUT_EVENT_TYPE_MOTION) {
    int32_t flags =
        AMotionEvent_getAction(event) & AMOTION_EVENT_ACTION_MASK;

    // gpg-cpp: Sign in or out on tap
    if (flags == AMOTION_EVENT_ACTION_UP ||
        flags == AMOTION_EVENT_ACTION_POINTER_UP) {

      LOGI("Motion");
      if (!StateManager::GetGameServices()->IsAuthorized()) {
        LOGI("Signing in");
        StateManager::BeginUserInitiatedSignIn();
      } else {
        LOGI("Signing out");
        StateManager::SignOut();
      }
    }

    // Make things pretty
    engine->animating = 1;
    engine->state.x = static_cast<int32_t>(AMotionEvent_getX(event, 0));
    engine->state.y =  static_cast<int32_t>(AMotionEvent_getY(event, 0));
    return 1;
  }

  return 0;
}

/**
 * Process the next main command.
 */
static void engine_handle_cmd(struct android_app* app, int32_t cmd) {
  struct engine* engine = (struct engine*)app->userData;
  switch (cmd) {
    case APP_CMD_SAVE_STATE:
      // The system has asked us to save our current state.  Do so.
      engine->app->savedState = malloc(sizeof(struct saved_state));
      *((struct saved_state*)engine->app->savedState) = engine->state;
      engine->app->savedStateSize = sizeof(struct saved_state);
      break;
    case APP_CMD_INIT_WINDOW:
      // The window is being shown, get it ready.
      if (engine->app->window != NULL) {
        engine_init_display(engine);
        engine_draw_frame(engine);
      }
      break;
    case APP_CMD_TERM_WINDOW:
      // The window is being hidden or closed, clean it up.
      engine_term_display(engine);
      break;
    case APP_CMD_GAINED_FOCUS:
      // When our app gains focus, we start monitoring the accelerometer.
      if (engine->accelerometerSensor != NULL) {
        ASensorEventQueue_enableSensor(engine->sensorEventQueue,
                                       engine->accelerometerSensor);
        // We'd like to get 60 events per second (in us).
        ASensorEventQueue_setEventRate(engine->sensorEventQueue,
                                       engine->accelerometerSensor,
                                       (1000L / 60) * 1000);
      }

      break;
    case APP_CMD_LOST_FOCUS:
      // When our app loses focus, we stop monitoring the accelerometer.
      // This is to avoid consuming battery while not being used.
      if (engine->accelerometerSensor != NULL) {
        ASensorEventQueue_disableSensor(engine->sensorEventQueue,
                                        engine->accelerometerSensor);
      }
      // Also stop animating.
      engine->animating = 0;
      engine_draw_frame(engine);
      break;
      default:
        LOGI("Ignoring %d", cmd);
  }
}

/**
 * This is the main entry point of a native application that is using
 * android_native_app_glue.  It runs in its own thread, with its own
 * event loop for receiving input events and doing other things.
 */
void android_main(struct android_app* state) {
  struct engine engine;

  memset(&engine, 0, sizeof(engine));
  state->userData = &engine;
  state->onAppCmd = engine_handle_cmd;
  state->onInputEvent = engine_handle_input;
  engine.app = state;

  // Prepare to monitor accelerometer
  engine.sensorManager = ASensorManager_getInstance();
  engine.accelerometerSensor = ASensorManager_getDefaultSensor(
      engine.sensorManager, ASENSOR_TYPE_ACCELEROMETER);
  engine.sensorEventQueue = ASensorManager_createEventQueue(
      engine.sensorManager, state->looper, LOOPER_ID_USER, NULL, NULL);

  // gpg-cpp: Set platform initialization
  gpg::AndroidInitialization::android_main(state);

  // gpg-cpp:  Here we create the callback on auth operations
  auto callback = [&](gpg::AuthOperation op, gpg::AuthStatus status) {
    LOGI("OnAuthActionFinished");
    if (IsSuccess(status)) {
      LOGI("You are logged in!");
    } else {
      LOGI("You are not logged in!");
    }
    engine.animating = 1;
  };

  // gpg-cpp:  We need to check to see if there's a previous state.
  // If there was, we'll just continue, but if not we'll set up
  // gpg-cpp for the first time.
  if (state->savedState != NULL) {
    // We are starting with a previous saved state; restore from it.
    engine.state = *(struct saved_state*)state->savedState;
  } else {
    LOGI("Setting up gpg-cpp");

    // Get the platform configuration.
    gpg::AndroidPlatformConfiguration platform_configuration;
    platform_configuration.SetActivity(state->activity->clazz);

    // Now, create the game service (see StateManager.cpp)
    // and pass in our callback
    StateManager::InitServices(platform_configuration, NULL, callback);
  }

  // loop waiting for stuff to do.
  while (1) {
    // Read all pending events.
    int ident;
    int events;
    struct android_poll_source* source;

    // If not animating, we will block forever waiting for events.
    // If animating, we loop until all events are read, then continue
    // to draw the next frame of animation.
    while ((ident = ALooper_pollAll(engine.animating ? 0 : -1, NULL, &events,
                                    (void**)&source)) >= 0) {

      // Process this event.
      if (source != NULL) {
        source->process(state, source);
      }

      // If a sensor has data, process it now.
      if (ident == LOOPER_ID_USER) {
        if (engine.accelerometerSensor != NULL) {
          ASensorEvent event;
          while (ASensorEventQueue_getEvents(engine.sensorEventQueue, &event,
                                             1) > 0) {
          }
        }
      }

      // Check if we are exiting.
      if (state->destroyRequested != 0) {
        engine_term_display(&engine);
        return;
      }
    }

    if (engine.animating) {
      // Done with events; draw next animation frame.
      engine.state.angle += .01f;
      if (engine.state.angle > 1) {
        engine.state.angle = 0;
      }

      // Drawing is throttled to the screen update rate, so there
      // is no need to do timing here.
      engine_draw_frame(&engine);
    }
  }
}

```

`samples-android/Minimalist/src/main/java/README`:

```
This directory exists only to make the build system happy.

```

`samples-android/Minimalist/src/main/res/values/ids.xml`:

```xml
<resources>
  <string name="app_id">REPLACE_ME</string>
</resources>

```

`samples-android/Minimalist/src/main/res/values/strings.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">Minimalist Native Sample</string>
</resources>

```

`samples-android/Minimalist/src/main/resources/README`:

```
This directory exists only to make the build system happy.

```

`samples-android/Teapot/CMakeLists.txt`:

```txt
# Copyright (C) 2017 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
##

cmake_minimum_required(VERSION 3.4.1)

add_library(gpg_sdk STATIC IMPORTED)
set_target_properties(gpg_sdk PROPERTIES IMPORTED_LOCATION
    ${GPG_SDK_PATH}/lib/c++/${ANDROID_ABI}/libgpg.a)

# build native_app_glue as a static lib
add_library(native_app_glue STATIC
    ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)

# build cpufeatures as a static lib
add_library(cpufeatures STATIC
             ${ANDROID_NDK}/sources/android/cpufeatures/cpu-features.c)

#include the native part of JUI Helper
add_subdirectory (${JUI_HELPER_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}/libjuihelper")

#include the native part of NDKHelper
add_subdirectory (${NDK_HELPER_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/libs/${ANDROID_ABI}/libndkhelper")

# Export ANativeActivity_onCreate(),
# Refer to: https://github.com/android-ndk/ndk/issues/381.
set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -u ANativeActivity_onCreate")

add_library(teapot
             SHARED
             src/main/cpp/NativeGameActivity.cpp
             src/main/cpp/StateManager.cpp
             ${TEAPOT_RENDERER_PATH}/TeapotRenderer.cpp
           )

target_include_directories(teapot PRIVATE
     ${ANDROID_NDK}/sources/android/native_app_glue
     ${ANDROID_NDK}/sources/android/cpufeatures
     ${GPG_SDK_PATH}/include
     ${juihelper_SOURCE_DIR}/src/main/cpp
     ${ndkhelper_SOURCE_DIR}/src/main/cpp
     ${TEAPOT_RENDERER_PATH}
)

target_link_libraries( # Specifies the target library.
                       teapot
                       gpg_sdk
                        native_app_glue
                        cpufeatures
                        juihelper
                        ndkhelper
                        log
                        android
                        EGL
                        GLESv2
                        z)

```

`samples-android/Teapot/build.gradle`:

```gradle
/*
 * Copyright 2018 (C) Google LLC
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
apply plugin: 'com.android.application'

    android {
        compileSdkVersion 27
        defaultConfig {
            //
            //  REPLACE THE APPLICATION ID with your bundle ID
            //
            applicationId "com.google.example.games.ReplaceMe"
            versionCode 1
            versionName "1.0"

            minSdkVersion 14
            targetSdkVersion 27

            ndk.abiFilters 'x86', 'armeabi-v7a', 'arm64-v8a'

            externalNativeBuild {
                cmake {
                      cppFlags "-std=c++11 -frtti -Wall -Werror"
                      arguments "-DJUI_HELPER_PATH=${project(':Common:JuiHelper').projectDir}" ,
                              "-DNDK_HELPER_PATH=${project(':Common:NDKHelper').projectDir}" ,
                              "-DGPG_SDK_PATH=${project(':Common:gpg-sdk').projectDir}/gpg-cpp-sdk/android",
                              "-DTEAPOT_RENDERER_PATH=${project(':Common').projectDir}/TeapotRenderer" ,
                              "-DANDROID_STL=c++_static",
                              "-DANDROID_TOOLCHAIN=clang"
                }

            }
        }


        externalNativeBuild {
            cmake.path "CMakeLists.txt"
        }
    }
dependencies {
    implementation project(":Common:JuiHelper")
    implementation 'com.google.android.gms:play-services-games:11.8.0'
    implementation 'com.google.android.gms:play-services-nearby:11.8.0'
    implementation 'com.android.support:support-v4:27.0.2'
}

```

`samples-android/Teapot/proguard-project.txt`:

```txt
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

```

`samples-android/Teapot/src/main/AndroidManifest.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          package="com.google.example.nativegame">

    <uses-feature android:glEsVersion="0x00020000"/>
    <application
        android:allowBackup="false"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:hasCode="true"
        android:supportsRtl="true"
        android:name="com.google.example.nativegame.NativeGameApplication"
        tools:ignore="GoogleAppIndexingWarning">

        <meta-data android:name="com.google.android.gms.games.APP_ID"
                       android:value="@string/app_id" />
        <meta-data android:name="com.google.android.gms.version"
                       android:value="@integer/google_play_services_version"/>
        <!-- Our activity is the built-in NativeActivity framework class.
             This will take care of integrating with our NDK code. -->
        <activity android:name="com.google.example.nativegame.NativeGameActivity"
                android:label="@string/app_name"
                android:configChanges="orientation|keyboardHidden">
            <!-- Tell NativeActivity the name of or .so -->
            <meta-data android:name="android.app.lib_name"
                    android:value="teapot" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>

```

`samples-android/Teapot/src/main/assets/Shaders/ShaderPlain.fsh`:

```fsh
//
//  ShaderPlain.fsh
//

#define USE_PHONG (1)

uniform lowp vec3       vMaterialAmbient;
uniform mediump vec4       vMaterialSpecular;

varying lowp vec4 colorDiffuse;

#if USE_PHONG
uniform highp vec3      vLight0;
varying mediump vec3 position;
varying mediump vec3 normal;
#else
varying lowp vec4 colorSpecular;
#endif

void main()
{
#if USE_PHONG
    mediump vec3 halfVector = normalize(-vLight0 + position);
    mediump float NdotH = max(dot(normalize(normal), halfVector), 0.0);
    mediump float fPower = vMaterialSpecular.w;
    mediump float specular = pow(NdotH, fPower);

    lowp vec4 colorSpecular = vec4( vMaterialSpecular.xyz * specular, 1 );
    gl_FragColor = colorDiffuse + colorSpecular;
#else
    gl_FragColor = colorDiffuse + colorSpecular;
#endif
}

```

`samples-android/Teapot/src/main/assets/Shaders/VS_ShaderPlain.vsh`:

```vsh
//
//  ShaderPlain.vsh
//

#define USE_PHONG (1)

attribute highp vec3    myVertex;
attribute highp vec3    myNormal;
attribute mediump vec2  myUV;
attribute mediump vec4  myBone;

varying mediump vec2    texCoord;
varying lowp    vec4    colorDiffuse;

#if USE_PHONG
varying mediump vec3 position;
varying mediump vec3 normal;
#else
varying lowp    vec4    colorSpecular;
#endif

uniform highp mat4      uMVMatrix;
uniform highp mat4      uPMatrix;

uniform highp vec3      vLight0;

uniform lowp vec4       vMaterialDiffuse;
uniform lowp vec3       vMaterialAmbient;
uniform lowp vec4       vMaterialSpecular;

void main(void)
{
    highp vec4 p = vec4(myVertex,1);
    gl_Position = uPMatrix * p;

    texCoord = myUV;

    highp vec3 worldNormal = vec3(mat3(uMVMatrix[0].xyz, uMVMatrix[1].xyz, uMVMatrix[2].xyz) * myNormal);
    highp vec3 ecPosition = p.xyz;

    colorDiffuse = dot( worldNormal, normalize(-vLight0+ecPosition) ) * vMaterialDiffuse  + vec4( vMaterialAmbient, 1 );

#if USE_PHONG
    normal = worldNormal;
    position = ecPosition;
#else
    highp vec3 halfVector = normalize(ecPosition - vLight0);

    highp float NdotH = max(-dot(worldNormal, halfVector), 0.0);
    float fPower = vMaterialSpecular.w;
    highp float specular = min( pow(NdotH, fPower), 1.0);
    colorSpecular = vec4( vMaterialSpecular.xyz * specular, 1 );
#endif
}

```

`samples-android/Teapot/src/main/cpp/NativeGameActivity.cpp`:

```cpp
//
// Copyright 2013 The Android Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http:// www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

//------------------------------------------------------------------------------
// Include files
//------------------------------------------------------------------------------
#include <android/log.h>
#include <android/native_window_jni.h>
#include <android_native_app_glue.h>
#include <cpu-features.h>
#include <errno.h>
#include <jni.h>

// For GPGS
#include "gpg/android_platform_configuration.h"
#include "gpg/android_initialization.h"
#include "gpg/android_support.h"

#include "JavaUI.h"
#include "NDKHelper.h"
#include "StateManager.h"
#include "TeapotRenderer.h"


//------------------------------------------------------------------------------
// Preprocessor
//------------------------------------------------------------------------------
// Class name of helper function
#define HELPER_CLASS_NAME "com.sample.helper.NDKHelper"
// Class name of JUIhelper function
#define JUIHELPER_CLASS_NAME "com.sample.helper.JUIHelper"
// Share object name of helper function library
#define HELPER_CLASS_SONAME "teapot"

//------------------------------------------------------------------------------
// Shared state for our app.
//------------------------------------------------------------------------------
class Engine {
 public:
  static void HandleCmd(android_app *app, int32_t cmd);
  static int32_t HandleInput(android_app *app, AInputEvent *event);

  Engine();
  ~Engine();
  void SetState(android_app *state);
  int InitDisplay(const int32_t cmd);
  void LoadResources();
  void UnloadResources();
  void DrawFrame();
  void TermDisplay();
  void TrimMemory();
  bool IsReady();

  // Callbacks from GPG.
  void OnAuthActionStarted(gpg::AuthOperation op);
  void OnAuthActionFinished(gpg::AuthOperation op, gpg::AuthStatus status);

 private:
  TeapotRenderer renderer_;

  ndk_helper::GLContext *gl_context_;

  bool initialized_resources_;
  bool has_focus_;

  ndk_helper::DoubletapDetector doubletap_detector_;
  ndk_helper::PinchDetector pinch_detector_;
  ndk_helper::DragDetector drag_detector_;
  ndk_helper::PerfMonitor monitor_;

  jui_helper::JUIButton *button_sign_in_;
  jui_helper::JUITextView *status_text_;

  ndk_helper::TapCamera tap_camera_;

  android_app *app_;
  int current_score_ = 0;

  void UpdateFPS(float fps);
  void ShowUI();
  void TransformPosition(ndk_helper::Vec2 *vec);

  void InitUI();
};

Engine g_engine;

Engine::Engine()
    : initialized_resources_(false), has_focus_(false),
      button_sign_in_(nullptr), status_text_(nullptr), app_(nullptr) {
  gl_context_ = ndk_helper::GLContext::GetInstance();
}



Engine::~Engine() {
  jui_helper::JUIWindow::GetInstance()->Close();
}

void Engine::InitUI() {
  // The window is being shown, get it ready.
  jui_helper::JUIWindow::Init(app_->activity, JUIHELPER_CLASS_NAME);

  // Show toast with app label
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([]() {
    jui_helper::JUIToast toast(
      ndk_helper::JNIHelper::GetInstance()->GetAppLabel());
    toast.Show();
  });

  //
  // Buttons
  //
  // Sign in button.
  button_sign_in_ = new jui_helper::JUIButton(
      StateManager::GetGameServices()->IsAuthorized() ? "Sign Out" : "Sign In");
  button_sign_in_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                           jui_helper::LAYOUT_PARAMETER_TRUE);
  button_sign_in_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                           jui_helper::LAYOUT_PARAMETER_TRUE);
  button_sign_in_->SetCallback(
      [](jui_helper::JUIView *view, const int32_t message) {
        LOGI("button_sign_in_ click: %d", message);
        if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
          if (StateManager::GetGameServices()->IsAuthorized()) {
            StateManager::SignOut();
          } else {
            StateManager::BeginUserInitiatedSignIn();
          }
        }
      });
  jui_helper::JUIWindow::GetInstance()->AddView(button_sign_in_);

  // Achievement button
  jui_helper::JUIButton *button_achievement =
      new jui_helper::JUIButton("Unlock Achievement");
  button_achievement->AddRule(jui_helper::LAYOUT_PARAMETER_BELOW,
                              button_sign_in_);
  button_achievement->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                              jui_helper::LAYOUT_PARAMETER_TRUE);
  button_achievement->SetCallback(
      [](jui_helper::JUIView *view, const int32_t message) {
        LOGI("Button click: %d", message);
        if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
            std::string id = ndk_helper::JNIHelper::GetInstance()->GetStringResource("achievement_prime");
            if( id == "" || id == "ReplaceMe") {
                LOGI("Invalid achievement ID!, please check res/values/ids.xml");
                return;
            }
          StateManager::UnlockAchievement(id.c_str());
        }
      });
  jui_helper::JUIWindow::GetInstance()->AddView(button_achievement);

  // Show Achievements button
  jui_helper::JUIButton *button_show_achievements_ui =
      new jui_helper::JUIButton("Show Achievements UI!");
  button_show_achievements_ui->AddRule(jui_helper::LAYOUT_PARAMETER_BELOW,
                                       button_achievement);
  button_show_achievements_ui->AddRule(
      jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
      jui_helper::LAYOUT_PARAMETER_TRUE);
  button_show_achievements_ui->SetCallback(
      [](jui_helper::JUIView *view, const int32_t message) {
        LOGI("Button click: %d", message);
        if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
          StateManager::ShowAchievements();
        }
      });
  jui_helper::JUIWindow::GetInstance()->AddView(button_show_achievements_ui);

  // High score UI
  //
  // Setup SeekBar
  //
  jui_helper::JUISeekBar *seek_bar_high_score = new jui_helper::JUISeekBar();
  seek_bar_high_score->SetCallback(
      jui_helper::JUICALLBACK_SEEKBAR_PROGRESSCHANGED,
      [this](jui_helper::JUIView *view, const int32_t mes, const int32_t p1,
          const int32_t p2) {
        LOGI("Seek progress %d", p1);
        current_score_ = p1;
      });

  // Configure relative layout parameter
  seek_bar_high_score->AddRule(jui_helper::LAYOUT_PARAMETER_BELOW,
                               button_show_achievements_ui);
  seek_bar_high_score->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                               jui_helper::LAYOUT_PARAMETER_TRUE);
  seek_bar_high_score->SetLayoutParams(jui_helper::ATTRIBUTE_SIZE_MATCH_PARENT,
                                       jui_helper::ATTRIBUTE_SIZE_WRAP_CONTENT);
  jui_helper::JUIWindow::GetInstance()->AddView(seek_bar_high_score);

  // Achievement Button
  jui_helper::JUIButton *button_submit_high_score =
      new jui_helper::JUIButton("Submit High Score!!");
  button_submit_high_score->AddRule(jui_helper::LAYOUT_PARAMETER_BELOW,
                                    seek_bar_high_score);
  button_submit_high_score->AddRule(
      jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
      jui_helper::LAYOUT_PARAMETER_TRUE);
  button_submit_high_score->SetCallback(
      [this](jui_helper::JUIView *view, const int32_t message) {
        LOGI("Button click: %d", message);
        if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
            std::string id = ndk_helper::JNIHelper::GetInstance()->GetStringResource("leaderboard_easy");
            if( id == "" || id == "ReplaceMe") {
                LOGI("Invalid Leaderboard ID!, please check res/values/ids.xml");
                return;
            }
          StateManager::SubmitHighScore(id.c_str(), current_score_);
        }
      });
  jui_helper::JUIWindow::GetInstance()->AddView(button_submit_high_score);

  // Show Leaderboard UI
  jui_helper::JUIButton *button_show_leaderboard_ui =
      new jui_helper::JUIButton("Show Leaderboard UI!");
  button_show_leaderboard_ui->AddRule(jui_helper::LAYOUT_PARAMETER_BELOW,
                                      button_submit_high_score);
  button_show_leaderboard_ui->AddRule(
      jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
      jui_helper::LAYOUT_PARAMETER_TRUE);
  button_show_leaderboard_ui->SetCallback(
      [](jui_helper::JUIView *view, const int32_t message) {
        LOGI("Button click: %d", message);
        if (message == jui_helper::JUICALLBACK_BUTTON_UP) {
            std::string id = ndk_helper::JNIHelper::GetInstance()->GetStringResource("leaderboard_easy");
            if( id == "" || id == "ReplaceMe") {
                LOGI("Invalid Leaderboard ID!, please check res/values/ids.xml");
                return;
            }
          StateManager::ShowLeaderboard(id.c_str());
        }
      });
  jui_helper::JUIWindow::GetInstance()->AddView(button_show_leaderboard_ui);

  status_text_ = new jui_helper::JUITextView(
      StateManager::IsAuthInProgress()
      ? "Signing In..."
      : StateManager::GetGameServices()->IsAuthorized()
        ? "Signed In."
        : "Signed Out.");

  status_text_->AddRule(jui_helper::LAYOUT_PARAMETER_ALIGN_PARENT_BOTTOM,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  status_text_->AddRule(jui_helper::LAYOUT_PARAMETER_CENTER_IN_PARENT,
                        jui_helper::LAYOUT_PARAMETER_TRUE);
  jui_helper::JUIWindow::GetInstance()->AddView(status_text_);
  return;
}

void Engine::LoadResources() {
  renderer_.Init();
  renderer_.Bind(&tap_camera_);
}

void Engine::UnloadResources() {
  renderer_.Unload();
}

// Initialize an EGL context for the current display.
int Engine::InitDisplay(const int32_t cmd) {
  if (!initialized_resources_) {
    gl_context_->Init(app_->window);
    InitUI();
    gl_context_->SetSwapInterval(0);  // Set interval of 0 for a benchmark
    LoadResources();
    initialized_resources_ = true;
  } else {
    // initialize OpenGL ES and EGL
    if (EGL_SUCCESS != gl_context_->Resume(app_->window)) {
      UnloadResources();
      LoadResources();
    }
    jui_helper::JUIWindow::GetInstance()->Resume(app_->activity, cmd);
  }

  ShowUI();

  // Initialize GL state.
  glEnable(GL_CULL_FACE);
  glEnable(GL_DEPTH_TEST);
  glDepthFunc(GL_LEQUAL);

  // Note that screen size might have been changed
  glViewport(0, 0, gl_context_->GetScreenWidth(),
             gl_context_->GetScreenHeight());
  renderer_.UpdateViewport();

  tap_camera_.SetFlip(1.f, -1.f, -1.f);
  tap_camera_.SetPinchTransformFactor(2.f, 2.f, 8.f);

  return 0;
}

// Just the current frame in the display.
void Engine::DrawFrame() {
  float fps;
  if (monitor_.Update(fps)) {
    UpdateFPS(fps);
  }
  renderer_.Update(monitor_.GetCurrentTime());

  // Just fill the screen with a color.
  glClearColor(0.5f, 0.5f, 0.5f, 1.f);
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  renderer_.Render();

  // Swap
  if (EGL_SUCCESS != gl_context_->Swap()) {
    UnloadResources();
    LoadResources();
  }
}

// Tear down the EGL context currently associated with the display.
void Engine::TermDisplay() {
  gl_context_->Suspend();
}

void Engine::TrimMemory() {
  LOGI("Trimming memory");
  gl_context_->Invalidate();
}

// Process the next input event.
int32_t Engine::HandleInput(android_app *app, AInputEvent *event) {
  Engine *eng = reinterpret_cast<Engine*>(app->userData);
  if (AInputEvent_getType(event) == AINPUT_EVENT_TYPE_MOTION) {
    ndk_helper::GESTURE_STATE double_tap_state =
        eng->doubletap_detector_.Detect(event);
    ndk_helper::GESTURE_STATE drag_state = eng->drag_detector_.Detect(event);
    ndk_helper::GESTURE_STATE pinch_state = eng->pinch_detector_.Detect(event);

    // Double tap detector has a priority over other detectors
    if (double_tap_state == ndk_helper::GESTURE_STATE_ACTION) {
      // Detect double tap
      eng->tap_camera_.Reset(true);
    } else {
      // Handle drag state
      if (drag_state & ndk_helper::GESTURE_STATE_START) {
        // Otherwise, start dragging
        ndk_helper::Vec2 v;
        eng->drag_detector_.GetPointer(v);
        eng->TransformPosition(&v);
        eng->tap_camera_.BeginDrag(v);
      } else if (drag_state & ndk_helper::GESTURE_STATE_MOVE) {
        ndk_helper::Vec2 v;
        eng->drag_detector_.GetPointer(v);
        eng->TransformPosition(&v);
        eng->tap_camera_.Drag(v);
      } else if (drag_state & ndk_helper::GESTURE_STATE_END) {
        eng->tap_camera_.EndDrag();
      }

      // Handle pinch state
      if (pinch_state & ndk_helper::GESTURE_STATE_START) {
        // Start new pinch
        ndk_helper::Vec2 v1;
        ndk_helper::Vec2 v2;
        eng->pinch_detector_.GetPointers(v1, v2);
        eng->TransformPosition(&v1);
        eng->TransformPosition(&v2);
        eng->tap_camera_.BeginPinch(v1, v2);
      } else if (pinch_state & ndk_helper::GESTURE_STATE_MOVE) {
        // Multi touch
        // Start new pinch
        ndk_helper::Vec2 v1;
        ndk_helper::Vec2 v2;
        eng->pinch_detector_.GetPointers(v1, v2);
        eng->TransformPosition(&v1);
        eng->TransformPosition(&v2);
        eng->tap_camera_.Pinch(v1, v2);
      }
    }
    return 1;
  }
  return 0;
}

// Process the next main command.
void Engine::HandleCmd(struct android_app *app, int32_t cmd) {
  Engine *eng = reinterpret_cast<Engine*>(app->userData);
  switch (cmd) {
    case APP_CMD_INIT_WINDOW: {
      // The window is being shown, get it ready.
      if (app->window != nullptr) {
        eng->InitDisplay(cmd);
        eng->DrawFrame();
      }
      break;
    }
    case APP_CMD_RESUME: {
      jui_helper::JUIWindow::GetInstance()->Resume(app->activity,
                                                   APP_CMD_RESUME);
      break;
    }
    case APP_CMD_GAINED_FOCUS: {
      // Start animation
      eng->has_focus_ = true;
      jui_helper::JUIWindow::GetInstance()->Resume(app->activity,
                                                   APP_CMD_GAINED_FOCUS);
      break;
    }
    case APP_CMD_TERM_WINDOW: {
      // The window is being hidden or closed, clean it up.
      eng->TermDisplay();
      eng->has_focus_ = false;
      break;
    }
    case APP_CMD_LOST_FOCUS: {
      // Also stop animating.
      eng->has_focus_ = false;
      eng->DrawFrame();
      break;
    }
    case APP_CMD_LOW_MEMORY: {
      // Free up GL resources
      eng->TrimMemory();
      break;
    }
    default: {
      // Ignore other messages.
      break;
    }
  }
}

//-------------------------------------------------------------------------
// Misc
//-------------------------------------------------------------------------
void Engine::SetState(android_app *state) {
  app_ = state;
  doubletap_detector_.SetConfiguration(app_->config);
  drag_detector_.SetConfiguration(app_->config);
  pinch_detector_.SetConfiguration(app_->config);
}

bool Engine::IsReady() {
  return has_focus_;
}

void Engine::TransformPosition(ndk_helper::Vec2 *vec) {
  *vec = ndk_helper::Vec2(2.0f, 2.0f) * *vec
      / ndk_helper::Vec2(gl_context_->GetScreenWidth(),
                         gl_context_->GetScreenHeight())
      - ndk_helper::Vec2(1.f, 1.f);
}

void Engine::ShowUI() {
  JNIEnv *jni;
  app_->activity->vm->AttachCurrentThread(&jni, nullptr);

  // Default class retrieval
  jclass clazz = jni->GetObjectClass(app_->activity->clazz);
  jmethodID methodID = jni->GetMethodID(clazz, "showUI", "()V");
  jni->CallVoidMethod(app_->activity->clazz, methodID);

  app_->activity->vm->DetachCurrentThread();
}

void Engine::UpdateFPS(float fps) {
  JNIEnv *jni;
  app_->activity->vm->AttachCurrentThread(&jni, nullptr);

  // Default class retrieval
  jclass clazz = jni->GetObjectClass(app_->activity->clazz);
  jmethodID methodID = jni->GetMethodID(clazz, "updateFPS", "(F)V");
  jni->CallVoidMethod(app_->activity->clazz, methodID, fps);

  app_->activity->vm->DetachCurrentThread();
}

void Engine::OnAuthActionStarted(gpg::AuthOperation op) {
  if (!initialized_resources_) {
    return;
  }
  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this, op]() {
    if (status_text_) {
      if (op == gpg::AuthOperation::SIGN_IN) {
        status_text_->SetAttribute("Text", "Signing In...");
      } else {
        status_text_->SetAttribute("Text", "Signing Out...");
      }
    }
  });
}

void Engine::OnAuthActionFinished(gpg::AuthOperation op,
                                  gpg::AuthStatus status) {
  if (!initialized_resources_) {
    return;
  }

  ndk_helper::JNIHelper::GetInstance()->RunOnUiThread([this, status]() {
    if (status == gpg::AuthStatus::VALID) {
      jui_helper::JUIToast toast("Signed In.");
      toast.Show();
    } else {
      jui_helper::JUIToast toast("Signed Out.");
      toast.Show();
    }

    if (button_sign_in_) {
      button_sign_in_->SetAttribute("Text", status == gpg::AuthStatus::VALID
                                            ? "Sign Out"
                                            : "Sign In");
    }

    if (status_text_) {
      status_text_->SetAttribute("Text", status == gpg::AuthStatus::VALID
                                         ? "Signed In"
                                         : "Signed Out");
    }
  });
}

// This is the main entry point of a native application that is using
// android_native_app_glue.  It runs in its own thread, with its own
// event loop for receiving input events and doing other things.
void android_main(android_app *state) {

  g_engine.SetState(state);

  // Init helper functions
  ndk_helper::JNIHelper::Init(state->activity, HELPER_CLASS_NAME,
                              HELPER_CLASS_SONAME);

  state->userData = &g_engine;
  state->onAppCmd = Engine::HandleCmd;
  state->onInputEvent = Engine::HandleInput;

#ifdef USE_NDK_PROFILER
  monstartup("libteapot.so");
#endif

  // We could initialize in the JNI_OnLoad, but it's also valid here.
  gpg::AndroidInitialization::android_main(state);
  if (state->savedState == nullptr) {
    // We aren't resuming, create a new GameServices.
    gpg::AndroidPlatformConfiguration platform_configuration;
    platform_configuration.SetActivity(state->activity->clazz);
    StateManager::InitServices(
        platform_configuration,
        [](gpg::AuthOperation op) {
          g_engine.OnAuthActionStarted(op);
        },
        [](gpg::AuthOperation op, gpg::AuthStatus status) {
          g_engine.OnAuthActionFinished(op, status);
        });
  }

  // loop waiting for stuff to do.
  while (1) {
    // Read all pending events.
    int id;
    int events;
    android_poll_source *source;

    // If not animating, we will block forever waiting for events.
    // If animating, we loop until all events are read, then continue
    // to draw the next frame of animation.
    while ((id = ALooper_pollAll(g_engine.IsReady() ? 0 : -1, nullptr, &events,
                                 reinterpret_cast<void**>(&source))) >= 0) {
      // Process this event.
      if (source != nullptr) {
        source->process(state, source);
      }

      // Check if we are exiting.
      if (state->destroyRequested != 0) {
        g_engine.TermDisplay();
        return;
      }
    }

    if (g_engine.IsReady()) {
      // Drawing is throttled to the screen update rate, so there
      // is no need to do timing here.
      g_engine.DrawFrame();
    }
  }
}

extern "C" {
JNIEXPORT void
Java_com_google_example_nativegame_NativeGameActivity_OnPauseHandler(
    JNIEnv *env, jobject thiz) {
  // This call is to suppress 'E/WindowManager(): android.view.WindowLeaked...'
  // errors. Since orientation change events in NativeActivity comes later than
  // expected, we can not dismiss popupWindow gracefully from NativeActivity. So
  // we are releasing popupWindows explicitly triggered from Java callback
  // through JNI call.
  jui_helper::JUIWindow::GetInstance()->Suspend(APP_CMD_PAUSE);
}

JNIEXPORT void
Java_com_google_example_nativegame_NativeGameActivity_nativeOnActivityResult(
        JNIEnv *env, jobject thiz, jobject activity, jint requestCode,
        jint resultCode, jobject data) {
  gpg::AndroidSupport::OnActivityResult(env, activity, requestCode, resultCode,
                                        data);
}
}  // extern "C"


```

`samples-android/Teapot/src/main/cpp/StateManager.cpp`:

```cpp
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

#include "StateManager.h"

#include "android/log.h"
#define DEBUG_TAG "TeapotNativeActivity"
#define LOGI(...) \
    ((void)__android_log_print(ANDROID_LOG_INFO, DEBUG_TAG, __VA_ARGS__))

bool StateManager::is_auth_in_progress_ = false;
std::unique_ptr<gpg::GameServices> StateManager::game_services_;

void OnAuthActionFinished(gpg::AuthOperation op, gpg::AuthStatus status) {
  LOGI("OnAuthActionFinished");
}

void OnAuthActionStarted(gpg::AuthOperation op) {
  LOGI("OnAuthActionStarted");
  switch ( op ) {
  case gpg::AuthOperation::SIGN_IN:
    LOGI("Signing In");
    break;
  case gpg::AuthOperation::SIGN_OUT:
    LOGI("Signing Out");
    break;
  }
}

gpg::GameServices* StateManager::GetGameServices() {
  return game_services_.get();
}

void StateManager::BeginUserInitiatedSignIn() {
  if (!game_services_->IsAuthorized()) {
    LOGI("StartAuthorizationUI");
    game_services_->StartAuthorizationUI();
  }
}

void StateManager::SignOut() {
  if (game_services_->IsAuthorized()) {
    LOGI("SignOut");
    game_services_->SignOut();
  }
}

void StateManager::UnlockAchievement(char const *achievement_id) {
  if (game_services_->IsAuthorized()) {
    LOGI("Achievement unlocked");
    game_services_->Achievements().Unlock(achievement_id);
  }
}

void StateManager::SubmitHighScore(char const *leaderboard_id, uint64_t score) {
  if (game_services_->IsAuthorized()) {
    LOGI("High score submitted");
    game_services_->Leaderboards().SubmitScore(leaderboard_id, score);
  }
}

void StateManager::ShowAchievements() {
  if (game_services_->IsAuthorized()) {
    LOGI("Show achievement");
    game_services_->Achievements().ShowAllUI([](gpg::UIStatus status){});
  }
}

void StateManager::ShowLeaderboard(char const *leaderboard_id) {
  if (game_services_->IsAuthorized()) {
    LOGI("Show achievement");
    game_services_->Leaderboards().ShowUI(leaderboard_id,[](gpg::UIStatus status){});
  }
}


void StateManager::InitServices(
    gpg::PlatformConfiguration const &pc,
    gpg::GameServices::Builder::OnAuthActionStartedCallback started_callback,
    gpg::GameServices::Builder::OnAuthActionFinishedCallback
        finished_callback) {
  LOGI("Initializing Services");
  if (!game_services_) {
    LOGI("Uninitialized services, so creating");
    game_services_ = gpg::GameServices::Builder()
        .SetOnLog(gpg::DEFAULT_ON_LOG, gpg::LogLevel::VERBOSE)
        .SetOnAuthActionStarted([started_callback](gpg::AuthOperation op) {
          is_auth_in_progress_ = true;
          started_callback(op);
        })
        .SetOnAuthActionFinished([finished_callback](gpg::AuthOperation op,
                                                     gpg::AuthStatus status) {
          LOGI("Sign %s finished with a result of %d",
               op == gpg::AuthOperation::SIGN_IN ? "in" : "out", status);
          is_auth_in_progress_ = false;
          finished_callback(op, status);
        })
        .Create(pc);
  }
  LOGI("Created");
}

```

`samples-android/Teapot/src/main/cpp/StateManager.h`:

```h
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

#ifndef TEAPOT_JNI_STATE_MANAGER_H
#define TEAPOT_JNI_STATE_MANAGER_H

#include "gpg/achievement.h"
#include "gpg/achievement_manager.h"
#include "gpg/builder.h"
#include "gpg/debug.h"
#include "gpg/default_callbacks.h"
#include "gpg/game_services.h"
#include "gpg/leaderboard.h"
#include "gpg/leaderboard_manager.h"
#include "gpg/platform_configuration.h"
#include "gpg/player_manager.h"
#include "gpg/score_page.h"
#include "gpg/types.h"

class StateManager {
 public:
  static void InitServices(
      gpg::PlatformConfiguration const &pc,
      gpg::GameServices::Builder::OnAuthActionStartedCallback started_callback,
      gpg::GameServices::Builder::OnAuthActionFinishedCallback
          finished_callback);
  static gpg::GameServices *GetGameServices();
  static void BeginUserInitiatedSignIn();
  static void SignOut();
  static void UnlockAchievement(const char *achievementId);
  static void SubmitHighScore(const char *leaderboardId, uint64_t score);
  static void ShowAchievements();
  static void ShowLeaderboard(const char *leaderboardId);
  static bool IsAuthInProgress() {
    return is_auth_in_progress_;
  }

 private:
  static bool is_auth_in_progress_;
  static std::unique_ptr<gpg::GameServices> game_services_;
};

#endif  // TEAPOT_JNI_STATE_MANAGER_H

```

`samples-android/Teapot/src/main/java/com/google/example/nativegame/NativeGameActivity.java`:

```java
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.example.nativegame;

import android.annotation.TargetApi;
import android.app.Activity;
import android.app.NativeActivity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup.MarginLayoutParams;
import android.view.WindowManager.LayoutParams;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.TextView;

import java.util.Locale;

public class NativeGameActivity extends NativeActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Hide toolbar
        int SDK_INT = android.os.Build.VERSION.SDK_INT;
        if(SDK_INT >= 19)
        {
            setImmersiveSticky();

            View decorView = getWindow().getDecorView();
            decorView.setOnSystemUiVisibilityChangeListener
                    (new View.OnSystemUiVisibilityChangeListener() {
                @Override
                public void onSystemUiVisibilityChange(int visibility) {
                    setImmersiveSticky();
                }
            });
        }

    }

    protected void onResume() {
        super.onResume();

        //Hide toolbar
        int SDK_INT = android.os.Build.VERSION.SDK_INT;
        if(SDK_INT >= 11 && SDK_INT < 14)
        {
            getWindow().getDecorView().setSystemUiVisibility(View.STATUS_BAR_HIDDEN);
        }
        else if(SDK_INT >= 16 && SDK_INT < 19)
        {
            getWindow().getDecorView().setSystemUiVisibility(
                    View.SYSTEM_UI_FLAG_FULLSCREEN | View.SYSTEM_UI_FLAG_LOW_PROFILE);
        }
        else if(SDK_INT >= 19)
        {
            setImmersiveSticky();
        }

    }
    // Our popup window, you will call it from your C/C++ code later

    @TargetApi(Build.VERSION_CODES.KITKAT)
    void setImmersiveSticky() {
        View decorView = getWindow().getDecorView();
        decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN
                | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
    }

    NativeGameActivity _activity;
    PopupWindow _popupWindow;
    TextView _label;

    public void showUI()
    {
        if( _popupWindow != null )
            return;

        _activity = this;

        this.runOnUiThread(new Runnable()  {
            @Override
            public void run()  {
                LayoutInflater layoutInflater
                = (LayoutInflater)getBaseContext()
                .getSystemService(LAYOUT_INFLATER_SERVICE);
                if (layoutInflater != null) {
                    View popupView = layoutInflater.inflate(R.layout.widgets, null);
                    _popupWindow = new PopupWindow(
                            popupView,
                            LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT);

                    LinearLayout mainLayout = new LinearLayout(_activity);
                    MarginLayoutParams params = new MarginLayoutParams(LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT);
                    params.setMargins(0, 0, 0, 0);
                    _activity.setContentView(mainLayout, params);

                    // Show our UI over NativeActivity window
                    _popupWindow.showAtLocation(mainLayout, Gravity.TOP | Gravity.START, 10, 10);
                    _popupWindow.update();

                    _label = popupView.findViewById(R.id.textViewFPS);
                } else {
                    throw new IllegalStateException("Cannot get layout service!");
                }

            }});
    }

    public void updateFPS(final float fFPS)
    {
        if( _label == null )
            return;

        _activity = this;
        this.runOnUiThread(new Runnable()  {
            @Override
            public void run()  {
                _label.setText(String.format(Locale.getDefault(),"%2.2f FPS", fFPS));

            }});
    }

    protected void onPause() {
        super.onPause();
        if (_popupWindow != null) {
            _popupWindow.dismiss();
            _popupWindow = null;
        }

        // This call is to suppress 'E/WindowManager():
        // android.view.WindowLeaked...' errors.
        // Since orientation change events in NativeActivity comes later than
        // expected, we can not dismiss
        // popupWindow gracefully from NativeActivity.
        // So we are releasing popupWindows explicitly triggered from Java
        // callback through JNI call.
        OnPauseHandler();
    }

    native public void OnPauseHandler();


    /*
    *   This is needed to forward the onActivityResult call to the games SDK.
    *   The SDK uses this to manage the display of the standard UI calls.
    */
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        nativeOnActivityResult(this, requestCode,resultCode, data);
    }

    // Implemented in C++.
    public static native void nativeOnActivityResult(Activity activity,
                                                     int requestCode, int resultCode, Intent data);
}



```

`samples-android/Teapot/src/main/java/com/google/example/nativegame/NativeGameApplication.java`:

```java
/*
 * Copyright 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.example.nativegame;

import android.app.Application;
import android.util.Log;

public class NativeGameApplication extends Application {
    public void onCreate(){
        super.onCreate();
        Log.w("native-activity", "onCreate");
    }
}

```

`samples-android/Teapot/src/main/res/layout/widgets.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewFPS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:text="@string/fps"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@android:color/white" />

</LinearLayout>
```

`samples-android/Teapot/src/main/res/values/ids.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<!--
Google Play game services IDs.
Save this file as res/values/games-ids.xml in your project.
-->
<resources>
  <string name="app_id">ReplaceMe</string>
  <string name="achievement_prime">ReplaceMe</string>
  <string name="leaderboard_easy">ReplaceMe</string>
</resources>

```

`samples-android/Teapot/src/main/res/values/strings.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<resources>
    <string name="app_name">TeapotNativeGame</string>
    <string name="fps">0.0 FPS</string>
</resources>
```

`samples-android/Teapot/src/main/res/values/styles.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--
// Copyright (c) 2014 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
-->
<resources>

    <!--
        Base application theme, dependent on API level. This theme is replaced
        by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
    -->
    <style name="AppBaseTheme" parent="android:Theme.Light">
        <!--
            Theme customizations available in newer API levels can go in
            res/values-vXX/styles.xml, while customizations related to
            backward-compatibility can go here.
        -->
    </style>

    <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    </style>

</resources>
```

`samples-android/build.gradle`:

```gradle
// Top-level build file where you can add configuration options common to all
// sub-projects/modules.
/*
 * Copyright 2017 (C) Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
buildscript {
    repositories {
        google()
        jcenter()
    }
   dependencies {
    classpath 'com.android.tools.build:gradle:3.5.1'
  }
}

allprojects {
    repositories {
        google()
        jcenter()
    }

  // Depend on another project that downloads and unzips the C++ SDK.
  evaluationDependsOn(':Common:gpg-sdk')

      // As the plugin has created the build tasks, add the gpg-sdk task to
      // the task dependencies so it gets done before compiling
      tasks.whenTaskAdded {
    task-> if (!task.name.endsWith("clean")) project(':Common:gpg-sdk').defaultTasks.each {
      t->task.dependsOn project(':Common:gpg-sdk').tasks[t]
    }
  }
}

```

`samples-android/gradle/wrapper/gradle-wrapper.properties`:

```properties
#Mon Aug 03 01:36:35 BST 2020
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-5.4.1-all.zip

```

`samples-android/gradlew`:

```
#!/usr/bin/env bash

##############################################################################
##
##  Gradle start up script for UN*X
##
##############################################################################

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS=""

APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

warn ( ) {
    echo "$*"
}

die ( ) {
    echo
    echo "$*"
    echo
    exit 1
}

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
case "`uname`" in
  CYGWIN* )
    cygwin=true
    ;;
  Darwin* )
    darwin=true
    ;;
  MINGW* )
    msys=true
    ;;
esac

# For Cygwin, ensure paths are in UNIX format before anything is touched.
if $cygwin ; then
    [ -n "$JAVA_HOME" ] && JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
fi

# Attempt to set APP_HOME
# Resolve links: $0 may be a link
PRG="$0"
# Need this for relative symlinks.
while [ -h "$PRG" ] ; do
    ls=`ls -ld "$PRG"`
    link=`expr "$ls" : '.*-> \(.*\)$'`
    if expr "$link" : '/.*' > /dev/null; then
        PRG="$link"
    else
        PRG=`dirname "$PRG"`"/$link"
    fi
done
SAVED="`pwd`"
cd "`dirname \"$PRG\"`/" >&-
APP_HOME="`pwd -P`"
cd "$SAVED" >&-

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar

# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD="$JAVA_HOME/jre/sh/java"
    else
        JAVACMD="$JAVA_HOME/bin/java"
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD="java"
    which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
fi

# Increase the maximum file descriptors if we can.
if [ "$cygwin" = "false" -a "$darwin" = "false" ] ; then
    MAX_FD_LIMIT=`ulimit -H -n`
    if [ $? -eq 0 ] ; then
        if [ "$MAX_FD" = "maximum" -o "$MAX_FD" = "max" ] ; then
            MAX_FD="$MAX_FD_LIMIT"
        fi
        ulimit -n $MAX_FD
        if [ $? -ne 0 ] ; then
            warn "Could not set maximum file descriptor limit: $MAX_FD"
        fi
    else
        warn "Could not query maximum file descriptor limit: $MAX_FD_LIMIT"
    fi
fi

# For Darwin, add options to specify how the application appears in the dock
if $darwin; then
    GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
fi

# For Cygwin, switch paths to Windows format before running java
if $cygwin ; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`

    # We build the pattern for arguments to be converted via cygpath
    ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`
    SEP=""
    for dir in $ROOTDIRSRAW ; do
        ROOTDIRS="$ROOTDIRS$SEP$dir"
        SEP="|"
    done
    OURCYGPATTERN="(^($ROOTDIRS))"
    # Add a user-defined pattern to the cygpath arguments
    if [ "$GRADLE_CYGPATTERN" != "" ] ; then
        OURCYGPATTERN="$OURCYGPATTERN|($GRADLE_CYGPATTERN)"
    fi
    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    i=0
    for arg in "$@" ; do
        CHECK=`echo "$arg"|egrep -c "$OURCYGPATTERN" -`
        CHECK2=`echo "$arg"|egrep -c "^-"`                                 ### Determine if an option

        if [ $CHECK -ne 0 ] && [ $CHECK2 -eq 0 ] ; then                    ### Added a condition
            eval `echo args$i`=`cygpath --path --ignore --mixed "$arg"`
        else
            eval `echo args$i`="\"$arg\""
        fi
        i=$((i+1))
    done
    case $i in
        (0) set -- ;;
        (1) set -- "$args0" ;;
        (2) set -- "$args0" "$args1" ;;
        (3) set -- "$args0" "$args1" "$args2" ;;
        (4) set -- "$args0" "$args1" "$args2" "$args3" ;;
        (5) set -- "$args0" "$args1" "$args2" "$args3" "$args4" ;;
        (6) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" ;;
        (7) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" ;;
        (8) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" ;;
        (9) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" "$args8" ;;
    esac
fi

# Split up the JVM_OPTS And GRADLE_OPTS values into an array, following the shell quoting and substitution rules
function splitJvmOpts() {
    JVM_OPTS=("$@")
}
eval splitJvmOpts $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS
JVM_OPTS[${#JVM_OPTS[*]}]="-Dorg.gradle.appname=$APP_BASE_NAME"

exec "$JAVACMD" "${JVM_OPTS[@]}" -classpath "$CLASSPATH" org.gradle.wrapper.GradleWrapperMain "$@"

```

`samples-android/gradlew.bat`:

```bat
@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS=

set DIRNAME=%~dp0
if "%DIRNAME%" == "" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if "%ERRORLEVEL%" == "0" goto init

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto init

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:init
@rem Get command-line arguments, handling Windowz variants

if not "%OS%" == "Windows_NT" goto win9xME_args
if "%@eval[2+2]" == "4" goto 4NT_args

:win9xME_args
@rem Slurp the command line arguments.
set CMD_LINE_ARGS=
set _SKIP=2

:win9xME_args_slurp
if "x%~1" == "x" goto execute

set CMD_LINE_ARGS=%*
goto execute

:4NT_args
@rem Get arguments from the 4NT Shell from JP Software
set CMD_LINE_ARGS=%$

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar

@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %CMD_LINE_ARGS%

:end
@rem End local scope for the variables with windows NT shell
if "%ERRORLEVEL%"=="0" goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
if  not "" == "%GRADLE_EXIT_CONSOLE%" exit 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega

```

`samples-android/settings.gradle`:

```gradle
include ':Common:gpg-sdk',
        ':Common:JuiHelper',
        ':Common:NDKHelper',
        ':CollectAllTheStarsNative',
        ':Minimalist',
        ':Teapot'


```