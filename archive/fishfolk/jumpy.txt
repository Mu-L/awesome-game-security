Project Path: arc_fishfolk_jumpy_pruxmktx

Source Tree:

```txt
arc_fishfolk_jumpy_pruxmktx
├── Arcadefile
├── CODE_OF_CONDUCT.md
├── CREDITS.md
├── Cargo.lock
├── Cargo.toml
├── Cross.toml
├── LICENSE
├── PACKAGING.md
├── README.md
├── RELEASE.md
├── assets
│   ├── effects
│   │   └── win_indicator
│   │       ├── win_indicator.atlas.yaml
│   │       ├── win_indicator.attachment.yaml
│   │       ├── win_indicator.attachment_easing.yaml
│   │       ├── win_indicator.ogg
│   │       ├── win_indicator.png
│   │       └── win_indicator.yaml
│   ├── elements
│   │   ├── decoration
│   │   │   ├── anemones
│   │   │   │   ├── anemones.atlas.yaml
│   │   │   │   ├── anemones.element.yaml
│   │   │   │   ├── anemones.png
│   │   │   │   └── animated_decoration.yaml
│   │   │   └── seaweed
│   │   │       ├── animated_decoration.yaml
│   │   │       ├── seaweed.atlas.yaml
│   │   │       ├── seaweed.element.yaml
│   │   │       └── seaweed.png
│   │   ├── environment
│   │   │   ├── coral_spikes
│   │   │   │   ├── coral_spikes.atlas.yaml
│   │   │   │   ├── coral_spikes.element.yaml
│   │   │   │   ├── coral_spikes54x35.png
│   │   │   │   └── spike.yaml
│   │   │   ├── crab
│   │   │   │   ├── crab.atlas.yaml
│   │   │   │   ├── crab.element.yaml
│   │   │   │   ├── crab.png
│   │   │   │   └── crab.yaml
│   │   │   ├── fish_school
│   │   │   │   ├── ArabianAngelfish.atlas.yaml
│   │   │   │   ├── ArabianAngelfish.png
│   │   │   │   ├── BandedButterflyFish.atlas.yaml
│   │   │   │   ├── BandedButterflyFish.png
│   │   │   │   ├── BlueGreenChromis.atlas.yaml
│   │   │   │   ├── BlueGreenChromis.png
│   │   │   │   ├── BlueTang.atlas.yaml
│   │   │   │   ├── BlueTang.png
│   │   │   │   ├── RoyalGramma.atlas.yaml
│   │   │   │   ├── RoyalGramma.png
│   │   │   │   ├── fish_school.element.yaml
│   │   │   │   └── fish_school.yaml
│   │   │   ├── player_spawner
│   │   │   │   ├── player_spawner.element.yaml
│   │   │   │   └── player_spawner.yaml
│   │   │   ├── slippery
│   │   │   │   ├── slippery.atlas.yaml
│   │   │   │   ├── slippery.element.yaml
│   │   │   │   ├── slippery.png
│   │   │   │   └── slippery.yaml
│   │   │   ├── slippery_seaweed
│   │   │   │   ├── seaweed.png
│   │   │   │   ├── slippery_seaweed.atlas.yaml
│   │   │   │   ├── slippery_seaweed.element.yaml
│   │   │   │   └── slippery_seaweed.yaml
│   │   │   ├── snail
│   │   │   │   ├── snail.atlas.yaml
│   │   │   │   ├── snail.element.yaml
│   │   │   │   ├── snail.png
│   │   │   │   └── snail.yaml
│   │   │   ├── sproinger
│   │   │   │   ├── jump.ogg
│   │   │   │   ├── sproinger.atlas.yaml
│   │   │   │   ├── sproinger.element.yaml
│   │   │   │   ├── sproinger.png
│   │   │   │   └── sproinger.yaml
│   │   │   └── urchin
│   │   │       ├── urchin.element.yaml
│   │   │       ├── urchin.png
│   │   │       └── urchin.yaml
│   │   └── item
│   │       ├── blunderbass
│   │       │   └── blunderbass.element.yaml
│   │       ├── buss
│   │       │   ├── bullet
│   │       │   │   ├── buss.bullet.yaml
│   │       │   │   ├── buss_bullet.atlas.yaml
│   │       │   │   └── buss_bullet.png
│   │       │   ├── buss.atlas.yaml
│   │       │   ├── buss.element.yaml
│   │       │   ├── buss.png
│   │       │   ├── buss.yaml
│   │       │   ├── explosion
│   │       │   │   ├── bullet_hit_dull.ogg
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   └── explosion.png
│   │       │   └── shoot
│   │       │       ├── buss_fire.png
│   │       │       ├── buss_shoot.atlas.yaml
│   │       │       ├── gun_empty.ogg
│   │       │       └── shoot.ogg
│   │       ├── cannon
│   │       │   ├── cannon.atlas.yaml
│   │       │   ├── cannon.element.yaml
│   │       │   ├── cannon.png
│   │       │   ├── cannon.yaml
│   │       │   └── shoot
│   │       │       ├── cannon_fire.png
│   │       │       ├── cannon_shoot.atlas.yaml
│   │       │       ├── gun_empty.ogg
│   │       │       └── shoot.ogg
│   │       ├── cannonball
│   │       │   ├── cannonball.atlas.yaml
│   │       │   ├── cannonball.element.yaml
│   │       │   ├── cannonball.png
│   │       │   ├── explosion.atlas.yaml
│   │       │   ├── explosion.ogg
│   │       │   ├── explosion.png
│   │       │   ├── fuse.ogg
│   │       │   └── kick_bomb.yaml
│   │       ├── crate
│   │       │   ├── crate.atlas.yaml
│   │       │   ├── crate.element.yaml
│   │       │   ├── crate.png
│   │       │   ├── crate.yaml
│   │       │   ├── crate_breaking.atlas.yaml
│   │       │   ├── crate_breaking.png
│   │       │   ├── fuse.ogg
│   │       │   └── land.ogg
│   │       ├── grenade
│   │       │   ├── explosion.atlas.yaml
│   │       │   ├── explosion.ogg
│   │       │   ├── explosion.png
│   │       │   ├── fuse.ogg
│   │       │   ├── grenade.atlas.yaml
│   │       │   ├── grenade.element.yaml
│   │       │   ├── grenade.png
│   │       │   └── grenade.yaml
│   │       ├── jellyfish
│   │       │   ├── flappy_jellyfish
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   ├── explosion.ogg
│   │       │   │   ├── explosion.png
│   │       │   │   ├── flappy_jellyfish.atlas.yaml
│   │       │   │   ├── flappy_jellyfish.png
│   │       │   │   └── flappy_jellyfish.yaml
│   │       │   ├── jellyfish.atlas.yaml
│   │       │   ├── jellyfish.element.yaml
│   │       │   ├── jellyfish.png
│   │       │   └── jellyfish.yaml
│   │       ├── kick_bomb
│   │       │   ├── explosion.atlas.yaml
│   │       │   ├── explosion.ogg
│   │       │   ├── explosion.png
│   │       │   ├── fuse.ogg
│   │       │   ├── kick_bomb.atlas.yaml
│   │       │   ├── kick_bomb.element.yaml
│   │       │   ├── kick_bomb.png
│   │       │   └── kick_bomb.yaml
│   │       ├── machine_gun
│   │       │   ├── bullet
│   │       │   │   ├── machine_gun.bullet.yaml
│   │       │   │   ├── machine_gun_bullet.atlas.yaml
│   │       │   │   └── machine_gun_bullet.png
│   │       │   ├── explosion
│   │       │   │   ├── bullet_hit_dull.ogg
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   └── explosion.png
│   │       │   ├── machine_gun.atlas.yaml
│   │       │   ├── machine_gun.element.yaml
│   │       │   ├── machine_gun.png
│   │       │   ├── machine_gun.yaml
│   │       │   └── shoot
│   │       │       ├── gun_empty.ogg
│   │       │       └── shoot.ogg
│   │       ├── mine
│   │       │   ├── arm.ogg
│   │       │   ├── explosion.atlas.yaml
│   │       │   ├── explosion.ogg
│   │       │   ├── explosion.png
│   │       │   ├── mine.atlas.yaml
│   │       │   ├── mine.element.yaml
│   │       │   ├── mine.png
│   │       │   └── mine.yaml
│   │       ├── musket
│   │       │   ├── bullet
│   │       │   │   ├── musket.bullet.yaml
│   │       │   │   ├── musket_bullet.atlas.yaml
│   │       │   │   └── musket_bullet.png
│   │       │   ├── explosion
│   │       │   │   ├── bullet_hit_dull.ogg
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   └── explosion.png
│   │       │   ├── musket.atlas.yaml
│   │       │   ├── musket.element.yaml
│   │       │   ├── musket.png
│   │       │   ├── musket.yaml
│   │       │   ├── muskets.png
│   │       │   └── shoot
│   │       │       ├── gun_empty.ogg
│   │       │       ├── musket_fire.png
│   │       │       ├── musket_shoot.atlas.yaml
│   │       │       └── shoot.ogg
│   │       ├── periscope
│   │       │   ├── bullet
│   │       │   │   ├── periscope.bullet.yaml
│   │       │   │   ├── periscope_bullet.atlas.yaml
│   │       │   │   └── periscope_bullet.png
│   │       │   ├── explosion
│   │       │   │   ├── bullet_hit_dull.ogg
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   └── explosion.png
│   │       │   ├── periscope.atlas.yaml
│   │       │   ├── periscope.element.yaml
│   │       │   ├── periscope.png
│   │       │   ├── periscope.yaml
│   │       │   └── shoot
│   │       │       ├── gun_empty.ogg
│   │       │       ├── periscope_fire.png
│   │       │       ├── periscope_shoot.atlas.yaml
│   │       │       └── shoot.ogg
│   │       ├── sniper_rifle
│   │       │   ├── bullet
│   │       │   │   ├── sniper.bullet.yaml
│   │       │   │   ├── sniper_bullet.atlas.yaml
│   │       │   │   └── sniper_bullet.png
│   │       │   ├── explosion
│   │       │   │   ├── bullet_hit_dull.ogg
│   │       │   │   ├── explosion.atlas.yaml
│   │       │   │   └── explosion.png
│   │       │   ├── musket.yaml
│   │       │   ├── shoot
│   │       │   │   ├── gun_empty.ogg
│   │       │   │   ├── shoot.ogg
│   │       │   │   ├── sniper_fire.png
│   │       │   │   └── sniper_shoot.atlas.yaml
│   │       │   ├── sniper.png
│   │       │   ├── sniper_rifle.atlas.yaml
│   │       │   ├── sniper_rifle.element.yaml
│   │       │   └── snipers.png
│   │       ├── stomp_boots
│   │       │   ├── stomp_boots.atlas.yaml
│   │       │   ├── stomp_boots.element.yaml
│   │       │   ├── stomp_boots.png
│   │       │   ├── stomp_boots.yaml
│   │       │   ├── stomp_boots_icon.atlas.yaml
│   │       │   └── stomp_boots_icon.png
│   │       └── sword
│   │           ├── sword.atlas.yaml
│   │           ├── sword.element.yaml
│   │           ├── sword.ogg
│   │           ├── sword.png
│   │           └── sword.yaml
│   ├── game.yaml
│   ├── locales
│   │   ├── en-US
│   │   │   ├── branding.ftl
│   │   │   ├── controls.ftl
│   │   │   ├── debug-tools.ftl
│   │   │   ├── editor.ftl
│   │   │   ├── locale.yaml
│   │   │   ├── map-select.ftl
│   │   │   ├── menu.ftl
│   │   │   ├── network-game.ftl
│   │   │   ├── player-select.ftl
│   │   │   ├── scoring.ftl
│   │   │   └── settings.ftl
│   │   ├── fr-FR
│   │   │   ├── locale.yaml
│   │   │   └── main.ftl
│   │   └── localization.yaml
│   ├── map
│   │   ├── levels
│   │   │   ├── level_1.map.yaml
│   │   │   ├── level_10.map.yaml
│   │   │   ├── level_11.map.yaml
│   │   │   ├── level_12.map.yaml
│   │   │   ├── level_13.map.yaml
│   │   │   ├── level_14.map.yaml
│   │   │   ├── level_2.map.yaml
│   │   │   ├── level_3.map.yaml
│   │   │   ├── level_4.map.yaml
│   │   │   ├── level_5.map.yaml
│   │   │   ├── level_6.map.yaml
│   │   │   ├── level_7.map.yaml
│   │   │   ├── level_8.map.yaml
│   │   │   └── level_9.map.yaml
│   │   └── resources
│   │       ├── background_01.png
│   │       ├── background_02.png
│   │       ├── background_03.png
│   │       ├── background_04.png
│   │       ├── coral.atlas.yaml
│   │       ├── coral.png
│   │       ├── default_tileset.atlas.yaml
│   │       ├── default_tileset.png
│   │       ├── ground_metal.atlas.yaml
│   │       ├── ground_metal.png
│   │       ├── ground_rock.atlas.yaml
│   │       ├── ground_rock.png
│   │       ├── ground_wood.atlas.yaml
│   │       ├── ground_wood.png
│   │       ├── ship_decorations.atlas.yaml
│   │       └── ship_decorations.png
│   ├── music
│   │   ├── 01 fishycuffs.ogg
│   │   ├── 02 whalecome.ogg
│   │   ├── 03 ahoy!.ogg
│   │   ├── 04 bait the hook.ogg
│   │   ├── 05 fire in the hole.ogg
│   │   ├── 06 fishsticks.ogg
│   │   ├── 07 jolly roger.ogg
│   │   ├── 08 krill or be krilled.ogg
│   │   ├── 09 landlubber.ogg
│   │   ├── 10 fish bucket.ogg
│   │   ├── 11 thar she blows!.ogg
│   │   └── 12 all hands hoay!.ogg
│   ├── pack.yaml
│   ├── player
│   │   ├── emotes
│   │   │   ├── alarm.atlas.yaml
│   │   │   ├── alarm.emote.yaml
│   │   │   └── alarm.png
│   │   ├── hats
│   │   │   ├── bonnet
│   │   │   │   ├── bonnet.atlas.yaml
│   │   │   │   ├── bonnet.hat.yaml
│   │   │   │   └── bonnet.png
│   │   │   ├── bow
│   │   │   │   ├── bow.atlas.yaml
│   │   │   │   ├── bow.hat.yaml
│   │   │   │   └── bow.png
│   │   │   ├── bucket
│   │   │   │   ├── bucket.atlas.yaml
│   │   │   │   ├── bucket.hat.yaml
│   │   │   │   └── bucket.png
│   │   │   ├── chef
│   │   │   │   ├── chef.atlas.yaml
│   │   │   │   ├── chef.hat.yaml
│   │   │   │   └── chef.png
│   │   │   ├── chest
│   │   │   │   ├── chest.atlas.yaml
│   │   │   │   ├── chest.hat.yaml
│   │   │   │   └── chest.png
│   │   │   ├── cowboy
│   │   │   │   ├── cowboy.atlas.yaml
│   │   │   │   ├── cowboy.hat.yaml
│   │   │   │   └── cowboy.png
│   │   │   ├── crown
│   │   │   │   ├── crown.atlas.yaml
│   │   │   │   ├── crown.hat.yaml
│   │   │   │   └── crown.png
│   │   │   ├── diving_goggles
│   │   │   │   ├── diving_goggles.atlas.yaml
│   │   │   │   ├── diving_goggles.hat.yaml
│   │   │   │   └── diving_goggles.png
│   │   │   ├── fisherman
│   │   │   │   ├── fisherman.atlas.yaml
│   │   │   │   ├── fisherman.hat.yaml
│   │   │   │   └── fisherman.png
│   │   │   ├── pineapple
│   │   │   │   ├── pineapple.atlas.yaml
│   │   │   │   ├── pineapple.hat.yaml
│   │   │   │   └── pineapple.png
│   │   │   ├── pirate
│   │   │   │   ├── pirate.atlas.yaml
│   │   │   │   ├── pirate.hat.yaml
│   │   │   │   └── pirate.png
│   │   │   ├── pot
│   │   │   │   ├── pot.atlas.yaml
│   │   │   │   ├── pot.hat.yaml
│   │   │   │   └── pot.png
│   │   │   ├── pufferfish
│   │   │   │   ├── pufferfish.atlas.yaml
│   │   │   │   ├── pufferfish.hat.yaml
│   │   │   │   └── pufferfish.png
│   │   │   ├── spicy_lobster
│   │   │   │   ├── spicy_lobster.atlas.yaml
│   │   │   │   ├── spicy_lobster.hat.yaml
│   │   │   │   └── spicy_lobster.png
│   │   │   ├── straw
│   │   │   │   ├── straw.atlas.yaml
│   │   │   │   ├── straw.hat.yaml
│   │   │   │   └── straw.png
│   │   │   ├── topper
│   │   │   │   ├── topper.atlas.yaml
│   │   │   │   ├── topper.hat.yaml
│   │   │   │   └── topper.png
│   │   │   ├── unicorn
│   │   │   │   ├── unicorn.atlas.yaml
│   │   │   │   ├── unicorn.hat.yaml
│   │   │   │   └── unicorn.png
│   │   │   ├── viking
│   │   │   │   ├── viking.atlas.yaml
│   │   │   │   ├── viking.hat.yaml
│   │   │   │   └── viking.png
│   │   │   └── water_lily
│   │   │       ├── water_lily.atlas.yaml
│   │   │       ├── water_lily.hat.yaml
│   │   │       └── water_lily.png
│   │   ├── skins
│   │   │   ├── fishy
│   │   │   │   ├── fishy-body.atlas.yaml
│   │   │   │   ├── fishy-body.png
│   │   │   │   ├── fishy-face.atlas.yaml
│   │   │   │   ├── fishy-face.png
│   │   │   │   ├── fishy-fin.atlas.yaml
│   │   │   │   ├── fishy-fin.png
│   │   │   │   └── fishy.player.yaml
│   │   │   ├── orcy
│   │   │   │   ├── orcy-body.atlas.yaml
│   │   │   │   ├── orcy-body.png
│   │   │   │   ├── orcy-face.atlas.yaml
│   │   │   │   ├── orcy-face.png
│   │   │   │   ├── orcy-fin.atlas.yaml
│   │   │   │   ├── orcy-fin.png
│   │   │   │   └── orcy.player.yaml
│   │   │   ├── pescy
│   │   │   │   ├── pescy-body.atlas.yaml
│   │   │   │   ├── pescy-body.png
│   │   │   │   ├── pescy-face.atlas.yaml
│   │   │   │   ├── pescy-face.png
│   │   │   │   ├── pescy-fin.atlas.yaml
│   │   │   │   ├── pescy-fin.png
│   │   │   │   └── pescy.player.yaml
│   │   │   └── sharky
│   │   │       ├── sharky-body.atlas.yaml
│   │   │       ├── sharky-body.png
│   │   │       ├── sharky-face.atlas.yaml
│   │   │       ├── sharky-face.png
│   │   │       ├── sharky-fin.atlas.yaml
│   │   │       ├── sharky-fin.png
│   │   │       └── sharky.player.yaml
│   │   └── sounds
│   │       ├── death.ogg
│   │       ├── drop.ogg
│   │       ├── grab.ogg
│   │       ├── jump.ogg
│   │       └── land.ogg
│   ├── plugins
│   │   └── anchor
│   │       ├── AnchorMeta.schema.yaml
│   │       ├── FallingAnchor.schema.yaml
│   │       ├── IdleAnchor.schema.yaml
│   │       ├── anchor.atlas.yaml
│   │       ├── anchor.png
│   │       ├── anchor.yaml
│   │       ├── element.yaml
│   │       └── plugin.lua
│   └── ui
│       ├── FairfaxSM.ttf
│       ├── FairfaxSM.ttf.license.txt
│       ├── ark-pixel-16-px-latin-LICENSE.txt
│       ├── ark-pixel-16px-latin.ttf
│       ├── button-down.png
│       ├── button-focused.png
│       ├── button.png
│       ├── editor
│       │   ├── Cursor.png
│       │   ├── Eraser.png
│       │   ├── Object.png
│       │   ├── Pointer.png
│       │   ├── PointerAndMap.png
│       │   └── Tile.png
│       ├── lifebar-progress.png
│       ├── lifebar.png
│       ├── menu-background.png
│       └── panel.png
├── book
│   ├── book.toml
│   └── src
│       ├── SUMMARY.md
│       ├── chapter_1.md
│       ├── code_of_conduct.md
│       ├── community
│       │   ├── contributing_art
│       │   │   ├── art_section_header.png
│       │   │   ├── cannon_art.gif
│       │   │   ├── cannon_colors.png
│       │   │   ├── cannon_details.png
│       │   │   ├── cannon_outlines.png
│       │   │   └── cannon_references.PNG
│       │   └── contributing_art.md
│       ├── developers
│       │   ├── architecture.md
│       │   └── contributing_code.md
│       ├── extra
│       │   └── legacy_documentation.md
│       ├── game_design
│       │   └── juice.md
│       └── introduction.md
├── build.rs
├── cliff.toml
├── clippy.toml
├── contrib
│   └── jumpy.desktop
├── deny.toml
├── docs
│   └── rustdoc-mermaid-head.html
├── justfile
├── licenses
│   ├── LICENSE-APACHE
│   └── LICENSE-MIT
├── old_assets
│   ├── decoration
│   │   ├── anemones.json
│   │   └── seaweed.json
│   ├── decoration.json
│   ├── images.json
│   ├── images.schema.json
│   ├── items
│   │   ├── blunderbass.json
│   │   ├── blunderbuss.json
│   │   ├── cannon.json
│   │   ├── crate.json
│   │   ├── grenades.json
│   │   ├── kick_bomb.json
│   │   ├── machine_gun.json
│   │   ├── mines.json
│   │   ├── musket.json
│   │   ├── sniper_rifle.json
│   │   ├── starfish.json
│   │   ├── starfish_launcher.json
│   │   ├── sword.json
│   │   ├── trident.json
│   │   └── turtle_shell.json
│   ├── items.json
│   ├── maps
│   │   ├── lev01.json
│   │   ├── lev01.png
│   │   ├── lev02.json
│   │   ├── lev02.png
│   │   ├── lev03.json
│   │   ├── lev03.png
│   │   ├── lev04.json
│   │   ├── lev04.png
│   │   ├── lev05.json
│   │   ├── lev05.png
│   │   ├── lev06.json
│   │   ├── lev06.png
│   │   ├── lev07.json
│   │   ├── lev07.png
│   │   ├── migrate-maps.ts
│   │   ├── no_preview.png
│   │   ├── test_level.json
│   │   ├── test_level.png
│   │   ├── zyrafa01.json
│   │   ├── zyrafa01.png
│   │   ├── zyrafa02.json
│   │   ├── zyrafa02.png
│   │   ├── zyrafa03.json
│   │   ├── zyrafa03.png
│   │   ├── zyrafa04.json
│   │   ├── zyrafa04.png
│   │   ├── zyrafa05.json
│   │   ├── zyrafa05.png
│   │   ├── zyrafa06.json
│   │   └── zyrafa06.png
│   ├── maps.json
│   ├── maps.schema.json
│   ├── music
│   │   ├── across_the_pond.ogg
│   │   ├── ahoy!.ogg
│   │   ├── bait_the_hook.ogg
│   │   ├── fish_and_ships.ogg
│   │   ├── fish_bowl.ogg
│   │   ├── fish_tide.ogg
│   │   ├── fishsticks.ogg
│   │   ├── krill_or_be_krilled.ogg
│   │   ├── thanks_for_all_the_fished.ogg
│   │   └── whale_theme.ogg
│   ├── music.json
│   ├── particle_effects
│   │   ├── blunderbuss_bullet_smoke.json
│   │   ├── blunderbuss_muzzle_smoke.json
│   │   ├── cannon_cannonball_smoke.json
│   │   ├── empty.json
│   │   ├── explosion.json
│   │   ├── explosion_fire.json
│   │   ├── explosion_particles.json
│   │   ├── grenades_smoke.json
│   │   ├── hit.json
│   │   ├── kick_bomb_smoke.json
│   │   ├── life_ui_explosion.json
│   │   ├── machine_gun_firing_smoke.json
│   │   ├── machine_gun_muzzle_smoke.json
│   │   ├── musket_bullet_smoke.json
│   │   ├── musket_muzzle_smoke.json
│   │   ├── smoke.json
│   │   ├── sniper_rifle_bullet_smoke.json
│   │   └── sniper_rifle_muzzle_smoke.json
│   ├── particle_effects.json
│   ├── player_characters.json
│   ├── player_characters.schema.json
│   ├── sounds
│   │   ├── blaster.wav
│   │   ├── bullet_hit_dull.wav
│   │   ├── bullet_hit_metal.wav
│   │   ├── explode_m.wav
│   │   ├── fish_fillet.wav
│   │   ├── gun_empty.wav
│   │   ├── gun_empty_b.wav
│   │   ├── jump.wav
│   │   ├── land.wav
│   │   ├── land_heavy.wav
│   │   ├── land_light.wav
│   │   ├── mine_set.wav
│   │   ├── pickup.wav
│   │   ├── shoot.ogg
│   │   ├── slip.wav
│   │   ├── swing.wav
│   │   ├── sword.wav
│   │   └── throw.wav
│   ├── sounds.json
│   ├── textures
│   │   ├── explosions
│   │   │   ├── Big(176x144).png
│   │   │   ├── Medium(144x112).png
│   │   │   └── Small(112x80).png
│   │   ├── items
│   │   │   ├── ArabianAngelfish(19x12).png
│   │   │   ├── BandedButterflyFish(19x11).png
│   │   │   ├── BlueGreenChromis(22x11).png
│   │   │   ├── BlueTang(19x9).png
│   │   │   ├── Blunderbass(68x24).png
│   │   │   ├── Blunderbuss(65x25).png
│   │   │   ├── BlunderbussBullet.png
│   │   │   ├── Boots(32x32).png
│   │   │   ├── Cannon(64x48).png
│   │   │   ├── CannonBall(17x17).png
│   │   │   ├── Crab(17x12).png
│   │   │   ├── Crate(36x31).png
│   │   │   ├── Curse(30x44).png
│   │   │   ├── FishSchoolIcon(64x64).png
│   │   │   ├── Flippers(45x36).png
│   │   │   ├── Flippers(65x45).png
│   │   │   ├── Grenades(25x52).png
│   │   │   ├── Jellyfish(64x112).png
│   │   │   ├── KickBomb(32x64).png
│   │   │   ├── MachineGun(80x24).png
│   │   │   ├── MachineGunBullet(7x4).png
│   │   │   ├── Mines(33x35).png
│   │   │   ├── Musket(92x32).png
│   │   │   ├── MusketBullet(15x15).png
│   │   │   ├── RoyalGramma(25x11).png
│   │   │   ├── Seaweed(48x51).png
│   │   │   ├── SmallFish1(13x9).png
│   │   │   ├── SmallFish2(13x9).png
│   │   │   ├── SmallFish3(13x9).png
│   │   │   ├── SmallProjectile(8x4).png
│   │   │   ├── SniperRifle(112x32).png
│   │   │   ├── SniperRifle(92x32).png
│   │   │   ├── SniperRifleBullet(7x7).png
│   │   │   ├── SniperRifleBullet.png
│   │   │   ├── Sproinger(31x20).png
│   │   │   ├── StarFish(19x18).png
│   │   │   ├── StarfishLauncher(37x20).png
│   │   │   ├── Sword(65x93).png
│   │   │   ├── Trident(288x96).png
│   │   │   └── TurtleShell(32x32).png
│   │   ├── map
│   │   │   ├── background_01.png
│   │   │   ├── background_02.png
│   │   │   ├── background_03.png
│   │   │   ├── background_04.png
│   │   │   ├── default_tileset.png
│   │   │   └── menu_background.png
│   │   ├── particles
│   │   │   └── CrateBreaking(128x128).png
│   │   ├── player
│   │   │   ├── PlayerCatty(96x80).png
│   │   │   ├── PlayerFishy(96x80).png
│   │   │   ├── PlayerLionfishy(96x80).png
│   │   │   ├── PlayerOrcy(96x80).png
│   │   │   ├── PlayerPescy(96x80).png
│   │   │   └── PlayerSharky(96x80).png
│   │   ├── temp
│   │   │   ├── Cannonball(32x36).png
│   │   │   ├── Galleon(326x300).png
│   │   │   ├── GalleonIcon(32x29).png
│   │   │   ├── LifeRing.png
│   │   │   ├── README.md
│   │   │   ├── Shark(60x220).png
│   │   │   ├── SharkIcon(32x34).png
│   │   │   ├── Volcano(395x100).png
│   │   │   └── VolcanoIcon(36x22).png
│   │   └── ui
│   │       └── editor_icons
│   │           ├── Cursor.png
│   │           ├── Eraser.png
│   │           ├── Object.png
│   │           ├── Pointer and Map.png
│   │           ├── Pointer.png
│   │           ├── Tile.png
│   │           ├── no_icon.png
│   │           ├── visibility.png
│   │           └── visibility_off.png
│   ├── textures.json
│   ├── textures.schema.json
│   ├── tiled_maps
│   │   ├── README.md
│   │   ├── lev01.json
│   │   ├── lev01.png
│   │   ├── lev02.json
│   │   ├── lev02.png
│   │   ├── lev03.json
│   │   ├── lev03.png
│   │   ├── lev04.json
│   │   ├── lev04.png
│   │   ├── lev05.json
│   │   ├── lev05.png
│   │   ├── lev06.json
│   │   ├── lev06.png
│   │   ├── levels.tiled-project
│   │   ├── no_preview.png
│   │   ├── test_level.json
│   │   ├── test_level.png
│   │   ├── zyrafa01.json
│   │   ├── zyrafa01.png
│   │   ├── zyrafa02.json
│   │   ├── zyrafa02.png
│   │   ├── zyrafa03.json
│   │   ├── zyrafa03.png
│   │   ├── zyrafa04.json
│   │   ├── zyrafa04.png
│   │   ├── zyrafa05.json
│   │   ├── zyrafa05.png
│   │   ├── zyrafa06.json
│   │   └── zyrafa06.png
│   └── ui
│       ├── AnonymousPro-Regular.ttf
│       ├── MinimalPixel v2.ttf
│       ├── Wood and Paper UI
│       │   ├── Big Banner
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 17.png
│       │   │   ├── 18.png
│       │   │   ├── 19.png
│       │   │   ├── 2.png
│       │   │   ├── 20.png
│       │   │   ├── 21.png
│       │   │   ├── 22.png
│       │   │   ├── 23.png
│       │   │   ├── 24.png
│       │   │   ├── 25.png
│       │   │   ├── 26.png
│       │   │   ├── 27.png
│       │   │   ├── 28.png
│       │   │   ├── 29.png
│       │   │   ├── 3.png
│       │   │   ├── 30.png
│       │   │   ├── 31.png
│       │   │   ├── 32.png
│       │   │   ├── 33.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Big Banner (guide).png
│       │   ├── Big Text
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 17.png
│       │   │   ├── 18.png
│       │   │   ├── 19.png
│       │   │   ├── 2.png
│       │   │   ├── 20.png
│       │   │   ├── 21.png
│       │   │   ├── 22.png
│       │   │   ├── 23.png
│       │   │   ├── 24.png
│       │   │   ├── 25.png
│       │   │   ├── 26.png
│       │   │   ├── 27.png
│       │   │   ├── 28.png
│       │   │   ├── 29.png
│       │   │   ├── 3.png
│       │   │   ├── 30.png
│       │   │   ├── 31.png
│       │   │   ├── 32.png
│       │   │   ├── 33.png
│       │   │   ├── 34.png
│       │   │   ├── 35.png
│       │   │   ├── 36.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   └── 9.png
│       │   ├── Green Board
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Green Board (guide).png
│       │   ├── Green Button
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Green Button (guide).png
│       │   ├── Inventory
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Inventory (guide).png
│       │   ├── Life Bars
│       │   │   ├── Big Bars
│       │   │   │   ├── 1.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 3.png
│       │   │   │   └── 4.png
│       │   │   ├── Colors
│       │   │   │   ├── 1.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 3.png
│       │   │   │   └── 4.png
│       │   │   ├── Medium Bars
│       │   │   │   ├── 1.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 3.png
│       │   │   │   ├── 4.png
│       │   │   │   └── 5.png
│       │   │   └── Small Bars
│       │   │       ├── 1.png
│       │   │       ├── 2.png
│       │   │       ├── 3.png
│       │   │       ├── 4.png
│       │   │       └── 5.png
│       │   ├── Mobile Buttons
│       │   │   ├── Mobile Buttons
│       │   │   │   ├── 1.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 3.png
│       │   │   │   ├── 4.png
│       │   │   │   ├── 5.png
│       │   │   │   ├── 6.png
│       │   │   │   ├── 7.png
│       │   │   │   └── 8.png
│       │   │   └── Mobile Buttons Cooldown
│       │   │       ├── 1.png
│       │   │       ├── 10.png
│       │   │       ├── 11.png
│       │   │       ├── 12.png
│       │   │       ├── 2.png
│       │   │       ├── 3.png
│       │   │       ├── 4.png
│       │   │       ├── 5.png
│       │   │       ├── 6.png
│       │   │       ├── 7.png
│       │   │       ├── 8.png
│       │   │       └── 9.png
│       │   ├── Orange Paper
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Orange Paper (guide).png
│       │   ├── Prefabs
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   └── 9.png
│       │   ├── Sliders
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   └── 9.png
│       │   ├── Small Banner
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Small Banner (guide).png
│       │   ├── Small Text
│       │   │   ├── Small Icons
│       │   │   │   ├── 1.png
│       │   │   │   ├── 10.png
│       │   │   │   ├── 11.png
│       │   │   │   ├── 12.png
│       │   │   │   ├── 13.png
│       │   │   │   ├── 14.png
│       │   │   │   ├── 15.png
│       │   │   │   ├── 16.png
│       │   │   │   ├── 17.png
│       │   │   │   ├── 18.png
│       │   │   │   ├── 19.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 20.png
│       │   │   │   ├── 21.png
│       │   │   │   ├── 22.png
│       │   │   │   ├── 23.png
│       │   │   │   ├── 24.png
│       │   │   │   ├── 25.png
│       │   │   │   ├── 3.png
│       │   │   │   ├── 4.png
│       │   │   │   ├── 5.png
│       │   │   │   ├── 6.png
│       │   │   │   ├── 7.png
│       │   │   │   ├── 8.png
│       │   │   │   └── 9.png
│       │   │   ├── Small Text
│       │   │   │   ├── 1.png
│       │   │   │   ├── 10.png
│       │   │   │   ├── 11.png
│       │   │   │   ├── 12.png
│       │   │   │   ├── 13.png
│       │   │   │   ├── 14.png
│       │   │   │   ├── 15.png
│       │   │   │   ├── 16.png
│       │   │   │   ├── 17.png
│       │   │   │   ├── 18.png
│       │   │   │   ├── 19.png
│       │   │   │   ├── 2.png
│       │   │   │   ├── 20.png
│       │   │   │   ├── 21.png
│       │   │   │   ├── 22.png
│       │   │   │   ├── 23.png
│       │   │   │   ├── 24.png
│       │   │   │   ├── 25.png
│       │   │   │   ├── 26.png
│       │   │   │   ├── 27.png
│       │   │   │   ├── 28.png
│       │   │   │   ├── 29.png
│       │   │   │   ├── 3.png
│       │   │   │   ├── 30.png
│       │   │   │   ├── 31.png
│       │   │   │   ├── 32.png
│       │   │   │   ├── 33.png
│       │   │   │   ├── 34.png
│       │   │   │   ├── 35.png
│       │   │   │   ├── 36.png
│       │   │   │   ├── 37.png
│       │   │   │   ├── 38.png
│       │   │   │   ├── 39.png
│       │   │   │   ├── 4.png
│       │   │   │   ├── 40.png
│       │   │   │   ├── 41.png
│       │   │   │   ├── 42.png
│       │   │   │   ├── 43.png
│       │   │   │   ├── 44.png
│       │   │   │   ├── 45.png
│       │   │   │   ├── 46.png
│       │   │   │   ├── 47.png
│       │   │   │   ├── 48.png
│       │   │   │   ├── 49.png
│       │   │   │   ├── 5.png
│       │   │   │   ├── 50.png
│       │   │   │   ├── 51.png
│       │   │   │   ├── 52.png
│       │   │   │   ├── 6.png
│       │   │   │   ├── 7.png
│       │   │   │   ├── 8.png
│       │   │   │   └── 9.png
│       │   │   └── White Bar
│       │   │       ├── 1.png
│       │   │       ├── 2.png
│       │   │       ├── 3.png
│       │   │       └── 4.png
│       │   ├── Yellow Board
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Yellow Board (guide).png
│       │   ├── Yellow Button
│       │   │   ├── 1.png
│       │   │   ├── 10.png
│       │   │   ├── 11.png
│       │   │   ├── 12.png
│       │   │   ├── 13.png
│       │   │   ├── 14.png
│       │   │   ├── 15.png
│       │   │   ├── 16.png
│       │   │   ├── 2.png
│       │   │   ├── 3.png
│       │   │   ├── 4.png
│       │   │   ├── 5.png
│       │   │   ├── 6.png
│       │   │   ├── 7.png
│       │   │   ├── 8.png
│       │   │   ├── 9.png
│       │   │   └── Yellow Button (guide).png
│       │   └── Yellow Paper
│       │       ├── 1.png
│       │       ├── 10.png
│       │       ├── 11.png
│       │       ├── 12.png
│       │       ├── 13.png
│       │       ├── 14.png
│       │       ├── 15.png
│       │       ├── 16.png
│       │       ├── 2.png
│       │       ├── 3.png
│       │       ├── 4.png
│       │       ├── 5.png
│       │       ├── 6.png
│       │       ├── 7.png
│       │       ├── 8.png
│       │       ├── 9.png
│       │       └── Yellow Paper (guide).png
│       ├── blank_image.png
│       ├── button_background.png
│       ├── button_background_clicked.png
│       ├── button_background_disabled.png
│       ├── button_background_hovered.png
│       ├── checkbox_background.png
│       ├── checkbox_background_checked.png
│       ├── checkbox_background_checked_hovered.png
│       ├── checkbox_background_clicked.png
│       ├── checkbox_background_hovered.png
│       ├── combobox_background.png
│       ├── editbox_background.png
│       ├── editbox_background_clicked.png
│       ├── main_menu_header.png
│       ├── window_background.png
│       └── window_border.png
├── packs
│   └── devpack
│       ├── assets.yaml
│       ├── hats
│       │   ├── pink_pirate.atlas.yaml
│       │   ├── pink_pirate.hat.yaml
│       │   └── pink_pirate.png
│       ├── items
│       │   └── blunderbass
│       │       ├── Blunderbass.schema.yaml
│       │       ├── BlunderbassMeta.schema.yaml
│       │       ├── blunderbass.png
│       │       ├── blunderbass.yaml
│       │       ├── bullet.atlas.yaml
│       │       ├── bullet.png
│       │       ├── bullet.yaml
│       │       ├── bullet_hit_dull.ogg
│       │       ├── element.yaml
│       │       ├── explosion.atlas.yaml
│       │       ├── explosion.png
│       │       └── plugin.lua
│       ├── maps
│       │   └── devlevel_1.map.yaml
│       └── pack.yaml
├── rust-toolchain
├── scripts
│   ├── build-web.sh
│   └── find-atlas-tiles.sh
├── src
│   ├── README.md
│   ├── audio
│   │   └── music.rs
│   ├── audio.rs
│   ├── core
│   │   ├── attachment.rs
│   │   ├── bullet.rs
│   │   ├── camera.rs
│   │   ├── damage.rs
│   │   ├── debug.rs
│   │   ├── editor.rs
│   │   ├── elements
│   │   │   ├── buss.rs
│   │   │   ├── cannon.rs
│   │   │   ├── crab.rs
│   │   │   ├── crate_item.rs
│   │   │   ├── decoration.rs
│   │   │   ├── fish_school.rs
│   │   │   ├── flappy_jellyfish.rs
│   │   │   ├── grenade.rs
│   │   │   ├── jellyfish.rs
│   │   │   ├── kick_bomb.rs
│   │   │   ├── machine_gun.rs
│   │   │   ├── mine.rs
│   │   │   ├── musket.rs
│   │   │   ├── periscope.rs
│   │   │   ├── player_spawner.rs
│   │   │   ├── slippery.rs
│   │   │   ├── slippery_seaweed.rs
│   │   │   ├── snail.rs
│   │   │   ├── spike.rs
│   │   │   ├── sproinger.rs
│   │   │   ├── stomp_boots.rs
│   │   │   ├── sword.rs
│   │   │   └── urchin.rs
│   │   ├── elements.rs
│   │   ├── globals.rs
│   │   ├── input.rs
│   │   ├── item.rs
│   │   ├── lifetime.rs
│   │   ├── map.rs
│   │   ├── map_constructor
│   │   │   └── shiftnanigans.rs
│   │   ├── map_constructor.rs
│   │   ├── map_pool.rs
│   │   ├── metadata
│   │   │   ├── map.rs
│   │   │   └── player.rs
│   │   ├── metadata.rs
│   │   ├── physics
│   │   │   ├── collisions
│   │   │   │   ├── filtering.rs
│   │   │   │   └── shape.rs
│   │   │   ├── collisions.rs
│   │   │   └── dynamic_body.rs
│   │   ├── physics.rs
│   │   ├── player
│   │   │   ├── state
│   │   │   │   ├── stage.rs
│   │   │   │   ├── states
│   │   │   │   │   ├── crouch.rs
│   │   │   │   │   ├── dead.rs
│   │   │   │   │   ├── default.rs
│   │   │   │   │   ├── drive_jellyfish.rs
│   │   │   │   │   ├── idle.rs
│   │   │   │   │   ├── incapacitated.rs
│   │   │   │   │   ├── midair.rs
│   │   │   │   │   ├── ragdoll.rs
│   │   │   │   │   └── walk.rs
│   │   │   │   └── states.rs
│   │   │   └── state.rs
│   │   ├── player.rs
│   │   ├── random.rs
│   │   ├── scoring.rs
│   │   ├── utils
│   │   │   ├── easing.rs
│   │   │   ├── macros.rs
│   │   │   ├── math.rs
│   │   │   ├── metadata.rs
│   │   │   └── rect.rs
│   │   ├── utils.rs
│   │   └── win_indicator.rs
│   ├── core.rs
│   ├── debug.rs
│   ├── fullscreen.rs
│   ├── input.rs
│   ├── main.rs
│   ├── profiler.rs
│   ├── sessions.rs
│   ├── settings.rs
│   ├── ui
│   │   ├── main_menu
│   │   │   ├── credits.rs
│   │   │   ├── map_select.rs
│   │   │   ├── network_game.rs
│   │   │   ├── player_select.rs
│   │   │   ├── settings
│   │   │   │   ├── audio.rs
│   │   │   │   ├── controls.rs
│   │   │   │   ├── graphics.rs
│   │   │   │   └── networking.rs
│   │   │   └── settings.rs
│   │   ├── main_menu.rs
│   │   ├── map_select.rs
│   │   ├── network_game.rs
│   │   ├── notification.rs
│   │   ├── pause_menu.rs
│   │   ├── player_image.rs
│   │   └── scoring.rs
│   └── ui.rs
├── steam
│   ├── launch_scripts
│   │   └── linux
│   │       ├── jumpy.sh
│   │       └── jumpy_desktop.sh
│   └── package_steam.sh
├── taplo.toml
└── wasm_resources
    └── index.html

```

`Arcadefile`:

```
id: fish-folk-jumpy
name: jumpy
logoUrl: /static/images/ship/original.png
coverImage:
  original: /static/images/cover/original.jpg
marketingAssets:
  - url: /static/images/cover/original.jpg
    type: Image
    title: cover
    description: Cover image
description: |
  Fish Folk: Jumpy is a tactical 2D shooter, played online or on a shared screen.
  Aim either left or right; the rest is up to clever movement and positioning in this fish-on-fish brawler!
admins:
  - fllr
gameplay:
  rejection: Spectate
  players:
    min: 2
    recommended: 4
    max: 8
source:
  assets: ./game/src/resources/
  backend:
    type: Docker
    dockerfile: ./runner/Dockerfile
  frontend:
    type: Unknown
    pkg: ./client/pkg
    executable: client
  sidecar:
    version: 0.1.0
fleet:
  - version: 0.1.0
    status: public
```

`CODE_OF_CONDUCT.md`:

```md

# Contributor Covenant Code of Conduct

## Our Pledge

We as members, contributors, and leaders pledge to make participation in our
community a harassment-free experience for everyone, regardless of age, body
size, visible or invisible disability, ethnicity, sex characteristics, gender
identity and expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, caste, color, religion, or sexual
identity and orientation.

We pledge to act and interact in ways that contribute to an open, welcoming,
diverse, inclusive, and healthy community.

## Our Standards

Examples of behavior that contributes to a positive environment for our
community include:

* Demonstrating empathy and kindness toward other people
* Being respectful of differing opinions, viewpoints, and experiences
* Giving and gracefully accepting constructive feedback
* Accepting responsibility and apologizing to those affected by our mistakes,
  and learning from the experience
* Focusing on what is best not just for us as individuals, but for the overall
  community

Examples of unacceptable behavior include:

* The use of sexualized language or imagery, and sexual attention or advances of
  any kind
* Trolling, insulting or derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or email address,
  without their explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

## Enforcement Responsibilities

Community leaders are responsible for clarifying and enforcing our standards of
acceptable behavior and will take appropriate and fair corrective action in
response to any behavior that they deem inappropriate, threatening, offensive,
or harmful.

Community leaders have the right and responsibility to remove, edit, or reject
comments, commits, code, wiki edits, issues, and other contributions that are
not aligned to this Code of Conduct, and will communicate reasons for moderation
decisions when appropriate.

## Scope

This Code of Conduct applies within all community spaces, and also applies when
an individual is officially representing the community in public spaces.
Examples of representing our community include using an official e-mail address,
posting via an official social media account, or acting as an appointed
representative at an online or offline event.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported to the community leaders responsible for enforcement at
[@erlend-sh](https://github.com/erlend-sh/) (e.soghe@gmail.com / erlend#1111)
All complaints will be reviewed and investigated promptly and fairly.

All community leaders are obligated to respect the privacy and security of the
reporter of any incident.

## Enforcement Guidelines

Community leaders will follow these Community Impact Guidelines in determining
the consequences for any action they deem in violation of this Code of Conduct:

### 1. Correction

**Community Impact**: Use of inappropriate language or other behavior deemed
unprofessional or unwelcome in the community.

**Consequence**: A private, written warning from community leaders, providing
clarity around the nature of the violation and an explanation of why the
behavior was inappropriate. A public apology may be requested.

### 2. Warning

**Community Impact**: A violation through a single incident or series of
actions.

**Consequence**: A warning with consequences for continued behavior. No
interaction with the people involved, including unsolicited interaction with
those enforcing the Code of Conduct, for a specified period of time. This
includes avoiding interactions in community spaces as well as external channels
like social media. Violating these terms may lead to a temporary or permanent
ban.

### 3. Temporary Ban

**Community Impact**: A serious violation of community standards, including
sustained inappropriate behavior.

**Consequence**: A temporary ban from any sort of interaction or public
communication with the community for a specified period of time. No public or
private interaction with the people involved, including unsolicited interaction
with those enforcing the Code of Conduct, is allowed during this period.
Violating these terms may lead to a permanent ban.

### 4. Permanent Ban

**Community Impact**: Demonstrating a pattern of violation of community
standards, including sustained inappropriate behavior, harassment of an
individual, or aggression toward or disparagement of classes of individuals.

**Consequence**: A permanent ban from any sort of public interaction within the
community.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage],
version 2.1, available at
[https://www.contributor-covenant.org/version/2/1/code_of_conduct.html][v2.1].

Community Impact Guidelines were inspired by
[Mozilla's code of conduct enforcement ladder][Mozilla CoC].

For answers to common questions about this code of conduct, see the FAQ at
[https://www.contributor-covenant.org/faq][FAQ]. Translations are available at
[https://www.contributor-covenant.org/translations][translations].

[homepage]: https://www.contributor-covenant.org
[v2.1]: https://www.contributor-covenant.org/version/2/1/code_of_conduct.html
[Mozilla CoC]: https://github.com/mozilla/diversity
[FAQ]: https://www.contributor-covenant.org/faq
[translations]: https://www.contributor-covenant.org/translations

```

`CREDITS.md`:

```md
# Credits

## Forerunners

- Landon [@superjoebob](https://twitter.com/superjoebob) - Duck Game creator
- [The Duck Game modding community](https://steamcommunity.com/app/312530/workshop/)

## Founding Team

- Erlend Sogge Heggen [@erlend-sh](https://github.com/erlend-sh) - General Director
- 'Emerald Jak' [etterklangstudio](https://en.etterklangstudio.no/) - Sound Director
- [@zTecna](https://github.com/zTecna) - Art Director
- [@zicklag](https://github.com/zicklag) - Technical Director

## Regulars

- Orhun Parmaksız [@orhun](https://github.com/orhun) - Infrastructure
- Kultaev Aleksandr [@legendiguess](https://github.com/legendiguess) - Gameplay Code
- Carlo Supina [@cdsupina](https://github.com/cdsupina) - Dev Advocacy
- Micah [@tigleym](https://github.com/tigleym) - Dev Advocacy
- Drake [@Drakeyn](https://github.com/Drakeyn) - Media Content
- Michał Grzegórzek — Kiaszewicz [@SirGiraffey](https://github.com/SirGiraffey) - Gameplay Design

## Contributors

- Fedor Logachev [@not-fl3](https://github.com/not-fl3) - Technical Director (former: v0.0-v0.2)
- Ole A. Sjo Fasting [@olefasting](https://github.com/olefasting) - Technical Director (former: v0.3-v0.4)
- Orlando Herrera [@_pixelfrog](https://twitter.com/_pixelfrog) - Art Director (former: v0.0-v0.3)
- Saverio Miroddi [@64kramsystem](https://github.com/64kramsystem) - Gameplay Code
- [@grufkork](https://github.com/grufkork) - Gameplay Code
- [@PotatoTech](https://github.com/PotatoTech) - Gameplay Code
- Armando Gonzalez [@Chosenundead15](https://github.com/Chosenundead15) - Gameplay Code
- Isaac [@Zac8668](https://github.com/Zac8668) - Gameplay Code
- Kadir Yazıcı [@kadiryazici](https://github.com/kadiryazici) - Gameplay Code
- Ignat Insarov [@kindaro](https://github.com/kindaro) - Gameplay Code
- garoslaw [@ArcOfDream](https://twitter.com/ArcOfDream) - Audio
- Animesh Sahu [@Animeshz](https://github.com/Animeshz) - Infrastructure
- Srayan Jana [@ValorZard](https://github.com/ValorZard) - Dev Advocacy
- Alve Larsson [@AlveLarsson](https://github.com/AlveLarsson) - Website
- William Batista [@billyb2](https://github.com/billyb2) - Gameplay Code
- Yendor [@Yendor](https://github.com/lecoqjacob) - Gameplay Code
- [@tekhnaeraav](https://github.com/tekhnaeraav) - Gameplay Code
- RuppFv [@DRuppFv](https://github.com/DRuppFv) - Gameplay Code
- Axel Viala [@darnuria](https://github.com/darnuria) - Gameplay Code
- [@nikidrillion](https://github.com/nikidrillion) - Artwork
- [@harsulinsghost](https://github.com/harsulinsghost) - Artwork
- Kadir Yazici [@kadiryazici](https://github.com/kadiryazici) - Installation Instructions
- [@ChosenUndead15](https://github.com/Chosenundead15) - Gameplay Code
- [@ThousandthStar](https://github.com/ThousandthStar) - Gameplay Code
- Marcin Puc [@tranzystorek-io](https://github.com/tranzystorek-io) - Desktop File
- Peter Hebden [@Piturnah](https://github.com/Piturnah) - Fix Typos
- Tyler Stewart [@trs](https://github.com/trs) - Utility Code
- Animesh Sahu [@Animeshz](https://github.com/Animeshz) - Github Actions
- Ignat Insarov [@kindaro](https://github.com/kindaro) - Gameplay Code
- [@ArcOfDream](https://github.com/ArcOfDream) - Gameplay Code
- José Luis Cruz [@joseluis](https://github.com/joseluis) - Keybindings
- [@figsoda](https://github.com/iwek7) - Dependency Update
- @Sarahboev - Artwork
- [@lvllvl](https://github.com/lvllvl) - Gameplay Code

## Tech Foundations

- [Bevy](https://bevyengine.org/)
- [Bones](https://github.com/fishfolk/bones)
- [rust-lang.org](https://www.rust-lang.org/)

```

`Cargo.lock`:

```lock
# This file is automatically @generated by Cargo.
# It is not intended for manual editing.
version = 4

[[package]]
name = "ab_glyph"
version = "0.2.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "79faae4620f45232f599d9bc7b290f88247a0834162c4495ab2f02d60004adfb"
dependencies = [
 "ab_glyph_rasterizer",
 "owned_ttf_parser",
]

[[package]]
name = "ab_glyph_rasterizer"
version = "0.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c71b1793ee61086797f5c80b6efa2b8ffa6d5dd703f118545808a7f2e27f7046"

[[package]]
name = "accesskit"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76eb1adf08c5bcaa8490b9851fd53cca27fa9880076f178ea9d29f05196728a8"
dependencies = [
 "enumn",
 "serde",
]

[[package]]
name = "accesskit_consumer"
version = "0.15.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04bb4d9e4772fe0d47df57d0d5dbe5d85dd05e2f37ae1ddb6b105e76be58fb00"
dependencies = [
 "accesskit",
]

[[package]]
name = "accesskit_macos"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "134d0acf6acb667c89d3332999b1a5df4edbc8d6113910f392ebb73f2b03bb56"
dependencies = [
 "accesskit",
 "accesskit_consumer",
 "objc2 0.3.0-beta.3.patch-leaks.3",
 "once_cell",
]

[[package]]
name = "accesskit_windows"
version = "0.14.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9eac0a7f2d7cd7a93b938af401d3d8e8b7094217989a7c25c55a953023436e31"
dependencies = [
 "accesskit",
 "accesskit_consumer",
 "arrayvec",
 "once_cell",
 "paste",
 "windows 0.48.0",
]

[[package]]
name = "accesskit_winit"
version = "0.14.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "825d23acee1bd6d25cbaa3ca6ed6e73faf24122a774ec33d52c5c86c6ab423c0"
dependencies = [
 "accesskit",
 "accesskit_macos",
 "accesskit_windows",
 "winit",
]

[[package]]
name = "acto"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "31c372578ce4215ccf94ec3f3585fbb6a902e47d07b064ff8a55d850ffb5025e"
dependencies = [
 "parking_lot",
 "pin-project-lite",
 "rustc_version",
 "smol_str 0.1.24",
 "tokio",
 "tracing",
]

[[package]]
name = "addr2line"
version = "0.24.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f5fb1d8e4442bd405fdfd1dacb42792696b0cf9cb15882e5d097b742a676d375"
dependencies = [
 "gimli",
]

[[package]]
name = "adler2"
version = "2.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "512761e0bb2578dd7380c6baaa0f4ce03e84f95e960231d1dec8bf4d7d6e2627"

[[package]]
name = "aead"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d122413f284cf2d62fb1b7db97e02edb8cda96d769b16e443a4f6195e35662b0"
dependencies = [
 "bytes",
 "crypto-common",
 "generic-array",
]

[[package]]
name = "ahash"
version = "0.8.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e89da841a80418a9b391ebaea17f5c112ffaaa96f621d2c285b5174da76b9011"
dependencies = [
 "cfg-if",
 "getrandom",
 "once_cell",
 "serde",
 "version_check",
 "zerocopy",
]

[[package]]
name = "aho-corasick"
version = "1.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e60d3430d3a69478ad0993f19238d2df97c507009a52b3c10addcd7f6bcb916"
dependencies = [
 "memchr",
]

[[package]]
name = "allocator-api2"
version = "0.2.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5c6cb57a04249c6480766f7f7cef5467412af1490f8d1e243141daddada3264f"

[[package]]
name = "alsa"
version = "0.9.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed7572b7ba83a31e20d1b48970ee402d2e3e0537dcfe0a3ff4d6eb7508617d43"
dependencies = [
 "alsa-sys",
 "bitflags 2.6.0",
 "cfg-if",
 "libc",
]

[[package]]
name = "alsa-sys"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "db8fee663d06c4e303404ef5f40488a53e062f89ba8bfed81f42325aafad1527"
dependencies = [
 "libc",
 "pkg-config",
]

[[package]]
name = "android-activity"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "64529721f27c2314ced0890ce45e469574a73e5e6fdd6e9da1860eb29285f5e0"
dependencies = [
 "android-properties",
 "bitflags 1.3.2",
 "cc",
 "jni-sys",
 "libc",
 "log",
 "ndk 0.7.0",
 "ndk-context",
 "ndk-sys 0.4.1+23.1.7779620",
 "num_enum 0.6.1",
]

[[package]]
name = "android-properties"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fc7eb209b1518d6bb87b283c20095f5228ecda460da70b44f0802523dea6da04"

[[package]]
name = "android-tzdata"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e999941b234f3131b00bc13c22d06e8c5ff726d1b6318ac7eb276997bbb4fef0"

[[package]]
name = "android_log-sys"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5ecc8056bf6ab9892dcd53216c83d1597487d7dacac16c8df6b877d127df9937"

[[package]]
name = "android_system_properties"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "819e7219dbd41043ac279b19830f2efc897156490d7fd6ea916720117ee66311"
dependencies = [
 "libc",
]

[[package]]
name = "anstream"
version = "0.6.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8acc5369981196006228e28809f761875c0327210a891e941f4c683b3a99529b"
dependencies = [
 "anstyle",
 "anstyle-parse",
 "anstyle-query",
 "anstyle-wincon",
 "colorchoice",
 "is_terminal_polyfill",
 "utf8parse",
]

[[package]]
name = "anstyle"
version = "1.0.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "55cc3b69f167a1ef2e161439aa98aed94e6028e5f9a59be9a6ffb47aef1651f9"

[[package]]
name = "anstyle-parse"
version = "0.2.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b2d16507662817a6a20a9ea92df6652ee4f94f914589377d69f3b21bc5798a9"
dependencies = [
 "utf8parse",
]

[[package]]
name = "anstyle-query"
version = "1.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "79947af37f4177cfead1110013d678905c37501914fba0efea834c3fe9a8d60c"
dependencies = [
 "windows-sys 0.59.0",
]

[[package]]
name = "anstyle-wincon"
version = "3.0.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6680de5231bd6ee4c6191b8a1325daa282b415391ec9d3a37bd34f2060dc73fa"
dependencies = [
 "anstyle",
 "once_cell_polyfill",
 "windows-sys 0.59.0",
]

[[package]]
name = "anyhow"
version = "1.0.89"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "86fdf8605db99b54d3cd748a44c6d04df638eb5dafb219b135d0149bd0db01f6"

[[package]]
name = "append-only-vec"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2bb8633986ce6db557d8a568b0b874d840db9946e589a3de4cf84fb02130745f"

[[package]]
name = "approx"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cab112f0a86d568ea0e627cc1d6be74a1e9cd55214684db5561995f6dad897c6"
dependencies = [
 "num-traits",
]

[[package]]
name = "arboard"
version = "3.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df099ccb16cd014ff054ac1bf392c67feeef57164b05c42f037cd40f5d4357f4"
dependencies = [
 "clipboard-win",
 "core-graphics 0.23.2",
 "image 0.25.2",
 "log",
 "objc2 0.5.2",
 "objc2-app-kit",
 "objc2-foundation",
 "parking_lot",
 "windows-sys 0.48.0",
 "x11rb",
]

[[package]]
name = "arrayref"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76a2e8124351fda1ef8aaaa3bbd7ebbcb486bbcd4225aca0aa0d84bb2db8fecb"

[[package]]
name = "arrayvec"
version = "0.7.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7c02d123df017efcdfbd739ef81735b36c5ba83ec3c59c80a9d7ecc718f92e50"

[[package]]
name = "ash"
version = "0.37.3+1.3.251"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "39e9c3835d686b0a6084ab4234fcd1b07dbf6e4767dce60874b12356a25ecd4a"
dependencies = [
 "libloading 0.7.4",
]

[[package]]
name = "asn1-rs"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5493c3bedbacf7fd7382c6346bbd66687d12bbaad3a89a2d2c303ee6cf20b048"
dependencies = [
 "asn1-rs-derive",
 "asn1-rs-impl",
 "displaydoc",
 "nom",
 "num-traits",
 "rusticata-macros",
 "thiserror 1.0.64",
 "time",
]

[[package]]
name = "asn1-rs-derive"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "965c2d33e53cb6b267e148a4cb0760bc01f4904c1cd4bb4002a085bb016d1490"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "synstructure",
]

[[package]]
name = "asn1-rs-impl"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7b18050c2cd6fe86c3a76584ef5e0baf286d038cda203eb6223df2cc413565f7"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "async-channel"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "81953c529336010edd6d8e358f886d9581267795c61b19475b71314bffa46d35"
dependencies = [
 "concurrent-queue",
 "event-listener 2.5.3",
 "futures-core",
]

[[package]]
name = "async-executor"
version = "1.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "30ca9a001c1e8ba5149f91a74362376cc6bc5b919d92d988668657bd570bdcec"
dependencies = [
 "async-task",
 "concurrent-queue",
 "fastrand 2.1.1",
 "futures-lite 2.6.0",
 "slab",
]

[[package]]
name = "async-recursion"
version = "1.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b43422f69d8ff38f95f1b2bb76517c91589a924d1559a0e935d7c8ce0274c11"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "async-task"
version = "4.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b75356056920673b02621b35afd0f7dda9306d03c79a30f5c56c44cf256e3de"

[[package]]
name = "async-trait"
version = "0.1.83"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "721cae7de5c34fbb2acd27e21e6d2cf7b886dce0c27388d46c4e6c47ea4318dd"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "atomic-polyfill"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8cf2bce30dfe09ef0bfaef228b9d414faaf7e563035494d7fe092dba54b300f4"
dependencies = [
 "critical-section",
]

[[package]]
name = "atomic-waker"
version = "1.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1505bd5d3d116872e7271a6d4e16d81d0c8570876c8de68093a09ac269d8aac0"

[[package]]
name = "atomicell"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bf53d6c43ea3fa42a5d18d6060081bcfddeca7c63faa64e65a59c4372bbe173b"

[[package]]
name = "attohttpc"
version = "0.24.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8d9a9bf8b79a749ee0b911b91b671cc2b6c670bdbc7e3dfd537576ddc94bb2a2"
dependencies = [
 "http 0.2.12",
 "log",
 "url",
]

[[package]]
name = "autocfg"
version = "1.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ace50bade8e6234aa140d9a2f552bbee1db4d353f69b8217bc503490fc1a9f26"

[[package]]
name = "backoff"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b62ddb9cb1ec0a098ad4bbf9344d0713fa193ae1a80af55febcff2627b6a00c1"
dependencies = [
 "getrandom",
 "instant",
 "rand",
]

[[package]]
name = "backtrace"
version = "0.3.74"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8d82cb332cdfaed17ae235a638438ac4d4839913cc2af585c3c6746e8f8bee1a"
dependencies = [
 "addr2line",
 "cfg-if",
 "libc",
 "miniz_oxide",
 "object",
 "rustc-demangle",
 "windows-targets 0.52.6",
]

[[package]]
name = "base16ct"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4c7f02d4ea65f2c1853089ffd8d2787bdbc63de2f0d29dedbcf8ccdfa0ccd4cf"

[[package]]
name = "base64"
version = "0.21.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9d297deb1925b89f2ccc13d7635fa0714f12c87adce1c75356b39ca9b7178567"

[[package]]
name = "base64"
version = "0.22.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72b3254f16251a8381aa12e40e3c4d2f0199f8c6508fbecb9d91f575e0fbb8c6"

[[package]]
name = "base64ct"
version = "1.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8c3c1a368f70d6cf7302d78f8f7093da241fb8e8807c05cc9e51a125895a6d5b"

[[package]]
name = "bevy"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "91c6d3ec4f89e85294dc97334c5b271ddc301fdf67ac9bb994fe44d9273e6ed7"
dependencies = [
 "bevy_internal",
]

[[package]]
name = "bevy_a11y"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "132c9e35a77c5395951f6d25fa2c52ee92296353426df4f961e60f3ff47e2e42"
dependencies = [
 "accesskit",
 "bevy_app",
 "bevy_derive",
 "bevy_ecs",
]

[[package]]
name = "bevy_app"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f557a7d59e1e16892d7544fc37316506ee598cb5310ef0365125a30783c11531"
dependencies = [
 "bevy_derive",
 "bevy_ecs",
 "bevy_reflect",
 "bevy_tasks",
 "bevy_utils",
 "downcast-rs",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "bevy_asset"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9714af523da4cdf58c42a317e5ed40349708ad954a18533991fd64c8ae0a6f68"
dependencies = [
 "anyhow",
 "async-channel",
 "bevy_app",
 "bevy_diagnostic",
 "bevy_ecs",
 "bevy_log",
 "bevy_reflect",
 "bevy_tasks",
 "bevy_utils",
 "bevy_winit",
 "crossbeam-channel",
 "downcast-rs",
 "fastrand 1.9.0",
 "js-sys",
 "parking_lot",
 "serde",
 "thiserror 1.0.64",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
]

[[package]]
name = "bevy_core"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3d5272321be5fcf5ce2fb16023bc825bb10dfcb71611117296537181ce950f48"
dependencies = [
 "bevy_app",
 "bevy_ecs",
 "bevy_math",
 "bevy_reflect",
 "bevy_tasks",
 "bevy_utils",
 "bytemuck",
]

[[package]]
name = "bevy_core_pipeline"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "67382fa9c96ce4f4e5833ed7cedd9886844a8f3284b4a717bd4ac738dcdea0c3"
dependencies = [
 "bevy_app",
 "bevy_asset",
 "bevy_core",
 "bevy_derive",
 "bevy_ecs",
 "bevy_math",
 "bevy_reflect",
 "bevy_render",
 "bevy_transform",
 "bevy_utils",
 "bitflags 2.6.0",
 "radsort",
 "serde",
]

[[package]]
name = "bevy_derive"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a44e4e2784a81430199e4157e02903a987a32127c773985506f020e7d501b62e"
dependencies = [
 "bevy_macro_utils",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "bevy_diagnostic"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6babb230dc383c98fdfc9603e3a7a2a49e1e2879dbe8291059ef37dca897932e"
dependencies = [
 "bevy_app",
 "bevy_core",
 "bevy_ecs",
 "bevy_log",
 "bevy_time",
 "bevy_utils",
 "sysinfo",
]

[[package]]
name = "bevy_dylib"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22ea11f830028e1c9d37f8bc88c5873f1c4c0346661209c2ba015f899c51863c"
dependencies = [
 "bevy_internal",
]

[[package]]
name = "bevy_ecs"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "266144b36df7e834d5198049e037ecdf2a2310a76ce39ed937d1b0a6a2c4e8c6"
dependencies = [
 "async-channel",
 "bevy_ecs_macros",
 "bevy_ptr",
 "bevy_reflect",
 "bevy_tasks",
 "bevy_utils",
 "downcast-rs",
 "event-listener 2.5.3",
 "fixedbitset",
 "rustc-hash 1.1.0",
 "serde",
 "thiserror 1.0.64",
 "thread_local",
]

[[package]]
name = "bevy_ecs_macros"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7157a9c3be038d5008ee3f114feb6cf6b39c1d3d32ee21a7cacb8f81fccdfa80"
dependencies = [
 "bevy_macro_utils",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "bevy_egui"
version = "0.22.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fb1c1f6ad293c60fd8559c4502cda5e832e92b0e0f3d994929b33f24d4352d70"
dependencies = [
 "arboard",
 "bevy",
 "egui",
 "thread_local",
 "webbrowser",
]

[[package]]
name = "bevy_encase_derive"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d0ac0f55ad6bca1be7b0f35bbd5fc95ed3d31e4e9db158fee8e5327f59006001"
dependencies = [
 "bevy_macro_utils",
 "encase_derive_impl",
]

[[package]]
name = "bevy_gizmos"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e286a3e7276431963f4aa29165ea5429fa7dbbc6d5c5ba0c531e7dd44ecc88a2"
dependencies = [
 "bevy_app",
 "bevy_asset",
 "bevy_core",
 "bevy_core_pipeline",
 "bevy_ecs",
 "bevy_math",
 "bevy_reflect",
 "bevy_render",
 "bevy_sprite",
 "bevy_transform",
 "bevy_utils",
]

[[package]]
name = "bevy_hierarchy"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "103f8f58416ac6799b8c7f0b418f1fac9eba44fa924df3b0e16b09256b897e3d"
dependencies = [
 "bevy_app",
 "bevy_core",
 "bevy_ecs",
 "bevy_log",
 "bevy_reflect",
 "bevy_utils",
 "smallvec",
]

[[package]]
name = "bevy_input"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ffbd935401101ac8003f3c3aea70788c65ad03f7a32716a10608bedda7a648bc"
dependencies = [
 "bevy_app",
 "bevy_ecs",
 "bevy_math",
 "bevy_reflect",
 "bevy_utils",
 "thiserror 1.0.64",
]

[[package]]
name = "bevy_internal"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e0e35a9b2bd29aa784b3cc416bcbf2a298f69f00ca51fd042ea39d9af7fad37e"
dependencies = [
 "bevy_a11y",
 "bevy_app",
 "bevy_asset",
 "bevy_core",
 "bevy_core_pipeline",
 "bevy_derive",
 "bevy_diagnostic",
 "bevy_ecs",
 "bevy_gizmos",
 "bevy_hierarchy",
 "bevy_input",
 "bevy_log",
 "bevy_math",
 "bevy_pbr",
 "bevy_ptr",
 "bevy_reflect",
 "bevy_render",
 "bevy_scene",
 "bevy_sprite",
 "bevy_tasks",
 "bevy_time",
 "bevy_transform",
 "bevy_utils",
 "bevy_window",
 "bevy_winit",
]

[[package]]
name = "bevy_log"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "07dcc615ff4f617b06c3f9522fca3c55d56f9644db293318f8ab68fcdea5d4fe"
dependencies = [
 "android_log-sys",
 "bevy_app",
 "bevy_ecs",
 "bevy_utils",
 "console_error_panic_hook",
 "tracing-log 0.1.4",
 "tracing-subscriber",
 "tracing-wasm",
]

[[package]]
name = "bevy_macro_utils"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "23ddc18d489b4e57832d4958cde7cd2f349f0ad91e5892ac9e2f2ee16546b981"
dependencies = [
 "quote",
 "rustc-hash 1.1.0",
 "syn 2.0.101",
 "toml_edit 0.19.15",
]

[[package]]
name = "bevy_math"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78286a81fead796dc4b45ab14f4f02fe29a94423d3587bcfef872b2a8e0a474b"
dependencies = [
 "glam 0.24.2",
 "serde",
]

[[package]]
name = "bevy_mikktspace"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6cfc2a21ea47970a9b1f0f4735af3256a8f204815bd756110051d10f9d909497"
dependencies = [
 "glam 0.24.2",
]

[[package]]
name = "bevy_pbr"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "63ca796a619e61cd43a0a3b11fde54644f7f0732a1fba1eef5d406248c6eba85"
dependencies = [
 "bevy_app",
 "bevy_asset",
 "bevy_core_pipeline",
 "bevy_derive",
 "bevy_ecs",
 "bevy_math",
 "bevy_reflect",
 "bevy_render",
 "bevy_transform",
 "bevy_utils",
 "bevy_window",
 "bitflags 2.6.0",
 "bytemuck",
 "naga_oil",
 "radsort",
]

[[package]]
name = "bevy_prototype_lyon"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9e347c16caede05dc5f774ba388cefeef0ab558a5601fc6b5ffd6606bef77308"
dependencies = [
 "bevy",
 "lyon_algorithms",
 "lyon_tessellation",
 "svgtypes",
]

[[package]]
name = "bevy_ptr"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72c7586401a46f7d8e436028225c1df5288f2e0082d066b247a82466fea155c6"

[[package]]
name = "bevy_reflect"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0778197a1eb3e095a71417c74b7152ede02975cdc95b5ea4ddc5251ed00a2eb5"
dependencies = [
 "bevy_math",
 "bevy_ptr",
 "bevy_reflect_derive",
 "bevy_utils",
 "downcast-rs",
 "erased-serde 0.3.31",
 "glam 0.24.2",
 "once_cell",
 "parking_lot",
 "serde",
 "smallvec",
 "smol_str 0.2.2",
 "thiserror 1.0.64",
]

[[package]]
name = "bevy_reflect_derive"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "342a4b2d09db22c48607d23ad59a056aff1ee004549050a51d490d375ba29528"
dependencies = [
 "bevy_macro_utils",
 "bit-set",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "uuid",
]

[[package]]
name = "bevy_render"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "39df4824b760928c27afc7b00fb649c7a63c9d76661ab014ff5c86537ee906cb"
dependencies = [
 "anyhow",
 "async-channel",
 "bevy_app",
 "bevy_asset",
 "bevy_core",
 "bevy_derive",
 "bevy_ecs",
 "bevy_encase_derive",
 "bevy_hierarchy",
 "bevy_log",
 "bevy_math",
 "bevy_mikktspace",
 "bevy_reflect",
 "bevy_render_macros",
 "bevy_tasks",
 "bevy_time",
 "bevy_transform",
 "bevy_utils",
 "bevy_window",
 "bitflags 2.6.0",
 "bytemuck",
 "codespan-reporting",
 "downcast-rs",
 "encase",
 "futures-lite 1.13.0",
 "hexasphere",
 "image 0.24.9",
 "js-sys",
 "naga",
 "naga_oil",
 "parking_lot",
 "regex",
 "serde",
 "smallvec",
 "thiserror 1.0.64",
 "thread_local",
 "wasm-bindgen",
 "web-sys",
 "wgpu",
 "wgpu-hal",
]

[[package]]
name = "bevy_render_macros"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0bd08c740aac73363e32fb45af869b10cec65bcb76fe3e6cd0f8f7eebf4c36c9"
dependencies = [
 "bevy_macro_utils",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "bevy_scene"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd47e1263506153bef3a8be97fe2d856f206d315668c4f97510ca6cc181d9681"
dependencies = [
 "anyhow",
 "bevy_app",
 "bevy_asset",
 "bevy_derive",
 "bevy_ecs",
 "bevy_hierarchy",
 "bevy_reflect",
 "bevy_render",
 "bevy_transform",
 "bevy_utils",
 "ron",
 "serde",
 "thiserror 1.0.64",
 "uuid",
]

[[package]]
name = "bevy_sprite"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68a8ca824fad75c6ef74cfbbba0a4ce3ccc435fa23d6bf3f003f260548813397"
dependencies = [
 "bevy_app",
 "bevy_asset",
 "bevy_core_pipeline",
 "bevy_derive",
 "bevy_ecs",
 "bevy_log",
 "bevy_math",
 "bevy_reflect",
 "bevy_render",
 "bevy_transform",
 "bevy_utils",
 "bitflags 2.6.0",
 "bytemuck",
 "fixedbitset",
 "guillotiere",
 "rectangle-pack",
 "thiserror 1.0.64",
]

[[package]]
name = "bevy_tasks"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c73bbb847c83990d3927005090df52f8ac49332e1643d2ad9aac3cd2974e66bf"
dependencies = [
 "async-channel",
 "async-executor",
 "async-task",
 "concurrent-queue",
 "futures-lite 1.13.0",
 "wasm-bindgen-futures",
]

[[package]]
name = "bevy_time"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3d58d6dbae9c8225d8c0e0f04d2c5dbb71d22adc01ecd5ab3cebc364139e4a6d"
dependencies = [
 "bevy_app",
 "bevy_ecs",
 "bevy_reflect",
 "bevy_utils",
 "crossbeam-channel",
 "thiserror 1.0.64",
]

[[package]]
name = "bevy_transform"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b9b0ac0149a57cd846cb357a35fc99286f9848e53d4481954608ac9552ed2d4"
dependencies = [
 "bevy_app",
 "bevy_ecs",
 "bevy_hierarchy",
 "bevy_math",
 "bevy_reflect",
]

[[package]]
name = "bevy_utils"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08d9484e32434ea84dc548cff246ce0c6f756c1336f5ea03f24ac120a48595c7"
dependencies = [
 "ahash",
 "bevy_utils_proc_macros",
 "getrandom",
 "hashbrown 0.14.5",
 "instant",
 "petgraph",
 "thiserror 1.0.64",
 "tracing",
 "uuid",
]

[[package]]
name = "bevy_utils_proc_macros"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5391b242c36f556db01d5891444730c83aa9dd648b6a8fd2b755d22cb3bddb57"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "bevy_window"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd584c0da7c4ada6557b09f57f30fb7cff21ccedc641473fc391574b4c9b7944"
dependencies = [
 "bevy_app",
 "bevy_ecs",
 "bevy_input",
 "bevy_math",
 "bevy_reflect",
 "bevy_utils",
 "raw-window-handle",
]

[[package]]
name = "bevy_winit"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bfdc044abdb95790c20053e6326760f0a2985f0dcd78613d397bf35f16039d53"
dependencies = [
 "accesskit_winit",
 "approx",
 "bevy_a11y",
 "bevy_app",
 "bevy_derive",
 "bevy_ecs",
 "bevy_hierarchy",
 "bevy_input",
 "bevy_math",
 "bevy_tasks",
 "bevy_utils",
 "bevy_window",
 "crossbeam-channel",
 "raw-window-handle",
 "wasm-bindgen",
 "web-sys",
 "winit",
]

[[package]]
name = "bincode"
version = "1.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b1f45e9417d87227c7a56d22e471c6206462cba514c7590c09aff4cf6d1ddcad"
dependencies = [
 "serde",
]

[[package]]
name = "bindgen"
version = "0.70.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f49d8fed880d473ea71efb9bf597651e77201bdd4893efe54c9e5d65ae04ce6f"
dependencies = [
 "bitflags 2.6.0",
 "cexpr",
 "clang-sys",
 "itertools",
 "proc-macro2",
 "quote",
 "regex",
 "rustc-hash 1.1.0",
 "shlex",
 "syn 2.0.101",
]

[[package]]
name = "bit-set"
version = "0.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0700ddab506f33b20a03b13996eccd309a48e5ff77d0d95926aa0210fb4e95f1"
dependencies = [
 "bit-vec",
]

[[package]]
name = "bit-vec"
version = "0.6.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "349f9b6a179ed607305526ca489b34ad0a41aed5f7980fa90eb03160b69598fb"

[[package]]
name = "bitfield"
version = "0.14.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2d7e60934ceec538daadb9d8432424ed043a904d8e0243f3c6446bce549a46ac"

[[package]]
name = "bitfield-rle"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "215d5574bfd0d6d9243a9c741690f0b7ee8a0f39d3195283779793ed46d984e1"
dependencies = [
 "anyhow",
 "varinteger",
]

[[package]]
name = "bitflags"
version = "1.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bef38d45163c2f1dde094a7dfd33ccf595c92905c8f8f4fdc18d06fb1037718a"

[[package]]
name = "bitflags"
version = "2.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b048fb63fd8b5923fc5aa7b340d8e156aec7ec02f0c78fa8a6ddc2613f6f71de"
dependencies = [
 "serde",
]

[[package]]
name = "bitset-core"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f421f1bcb30aa9d851a03c2920ab5d96ca920d5786645a597b5fc37922f8b89e"

[[package]]
name = "bitvec"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1bc2832c24239b0141d5674bb9174f9d68a8b5b3f2753311927c172ca46f7e9c"
dependencies = [
 "funty",
 "radium",
 "tap",
 "wyz",
]

[[package]]
name = "block"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0d8c1fef690941d3e7788d328517591fecc684c084084702d6ff1641e993699a"

[[package]]
name = "block-buffer"
version = "0.10.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3078c7629b62d3f0439517fa394996acacc5cbc91c5a20d8c658e77abd503a71"
dependencies = [
 "generic-array",
]

[[package]]
name = "block-sys"
version = "0.1.0-beta.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fa55741ee90902547802152aaf3f8e5248aab7e21468089560d4c8840561146"
dependencies = [
 "objc-sys 0.2.0-beta.2",
]

[[package]]
name = "block2"
version = "0.2.0-alpha.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8dd9e63c1744f755c2f60332b88de39d341e5e86239014ad839bd71c106dec42"
dependencies = [
 "block-sys",
 "objc2-encode 2.0.0-pre.2",
]

[[package]]
name = "block2"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2c132eebf10f5cad5289222520a4a058514204aed6d791f1cf4fe8088b82d15f"
dependencies = [
 "objc2 0.5.2",
]

[[package]]
name = "bones_asset"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "anyhow",
 "append-only-vec",
 "async-channel",
 "bevy_tasks",
 "bones_schema",
 "bones_utils",
 "bs58",
 "dashmap 5.5.3",
 "ehttp",
 "elsa",
 "erased-serde 0.4.5",
 "event-listener 4.0.3",
 "futures-lite 2.6.0",
 "notify",
 "once_cell",
 "parking_lot",
 "paste",
 "path-absolutize",
 "semver",
 "serde",
 "serde_json",
 "serde_yaml",
 "sha2",
 "tracing",
 "ulid",
 "ustr",
 "web-sys",
]

[[package]]
name = "bones_bevy_renderer"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "anyhow",
 "bevy",
 "bevy_egui",
 "bevy_prototype_lyon",
 "bones_framework",
 "directories",
 "glam 0.24.2",
 "serde",
 "serde_yaml",
 "web-sys",
]

[[package]]
name = "bones_ecs"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "anyhow",
 "atomicell",
 "bitset-core",
 "bones_ecs_macros",
 "bones_schema",
 "bones_utils",
 "branches",
 "glam 0.24.2",
 "once_map",
 "paste",
 "thiserror 1.0.64",
 "tracing",
]

[[package]]
name = "bones_ecs_macros"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "bones_ecs_macros_core",
 "proc-macro2",
]

[[package]]
name = "bones_ecs_macros_core"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "bones_framework"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "anyhow",
 "async-channel",
 "bevy_tasks",
 "bones_asset",
 "bones_lib",
 "bones_matchmaker_proto",
 "bones_schema",
 "bones_scripting",
 "bytemuck",
 "bytes",
 "csscolorparser",
 "directories",
 "egui",
 "egui_plot",
 "either",
 "fluent",
 "fluent-langneg",
 "futures-lite 2.6.0",
 "ggrs",
 "gilrs",
 "glam 0.24.2",
 "hex",
 "image 0.24.9",
 "instant",
 "intl-memoizer",
 "iroh",
 "kira",
 "mdns-sd",
 "noise",
 "numquant",
 "once_cell",
 "ping-rs",
 "postcard",
 "rcgen 0.12.1",
 "rustls 0.21.12",
 "send_wrapper",
 "serde",
 "serde_yaml",
 "smallvec",
 "sys-locale",
 "thiserror 1.0.64",
 "tokio",
 "tracing",
 "tracing-appender",
 "tracing-subscriber",
 "tracing-wasm",
 "ttf-parser",
 "turborand",
 "unic-langid",
]

[[package]]
name = "bones_lib"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "bones_ecs",
 "instant",
 "tracing",
 "ustr",
]

[[package]]
name = "bones_matchmaker_proto"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "iroh",
 "serde",
]

[[package]]
name = "bones_schema"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "append-only-vec",
 "bones_schema_macros",
 "bones_utils",
 "erased-serde 0.4.5",
 "fxhash",
 "glam 0.24.2",
 "hashbrown 0.14.5",
 "humantime",
 "parking_lot",
 "paste",
 "serde",
 "sptr",
 "stable_deref_trait",
 "ustr",
]

[[package]]
name = "bones_schema_macros"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "proc-macro2",
 "quote",
 "venial",
]

[[package]]
name = "bones_scripting"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "async-channel",
 "bevy_tasks",
 "bones_asset",
 "bones_lib",
 "futures-lite 2.6.0",
 "gc-arena",
 "gc-arena-derive",
 "parking_lot",
 "piccolo",
 "send_wrapper",
 "tracing",
 "wasm-bindgen-futures",
]

[[package]]
name = "bones_utils"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "bones_utils_macros",
 "fxhash",
 "getrandom",
 "hashbrown 0.14.5",
 "instant",
 "serde",
 "turborand",
 "ulid",
]

[[package]]
name = "bones_utils_macros"
version = "0.4.0"
source = "git+https://github.com/fishfolk/bones#7e1d92578e1b35256debfb95492d0a519d8c796e"
dependencies = [
 "quote",
 "venial",
]

[[package]]
name = "bounded-integer"
version = "0.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78a6932c88f1d2c29533a3b8a5f5a2f84cc19c3339b431677c3160c5c2e6ca85"

[[package]]
name = "branches"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7958fb9748a08a6f46ef773e87c43997a844709bc293b4c3de48135debaf9d2a"

[[package]]
name = "bs58"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bf88ba1141d185c399bee5288d850d63b8369520c1eafc32a0430b5b6c287bf4"
dependencies = [
 "tinyvec",
]

[[package]]
name = "bumpalo"
version = "3.16.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "79296716171880943b8470b5f8d03aa55eb2e645a4874bdbb28adb49162e012c"

[[package]]
name = "bytemuck"
version = "1.18.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "94bbb0ad554ad961ddc5da507a12a29b14e4ae5bda06b19f575a3e6079d2e2ae"
dependencies = [
 "bytemuck_derive",
]

[[package]]
name = "bytemuck_derive"
version = "1.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0cc8b54b395f2fcfbb3d90c47b01c7f444d94d05bdeb775811dec868ac3bbc26"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "byteorder"
version = "1.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1fd0f2584146f6f2ef48085050886acf353beff7305ebd1ae69500e27c67f64b"

[[package]]
name = "byteorder-lite"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f1fe948ff07f4bd06c30984e69f5b4899c516a3ef74f34df92a2df2ab535495"

[[package]]
name = "bytes"
version = "1.7.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "428d9aa8fbc0670b7b8d6030a7fadd0f86151cae55e4dbbece15f3780a3dfaf3"

[[package]]
name = "cc"
version = "1.1.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9540e661f81799159abee814118cc139a2004b3a3aa3ea37724a1b66530b90e0"
dependencies = [
 "jobserver",
 "libc",
 "shlex",
]

[[package]]
name = "cesu8"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6d43a04d8753f35258c91f8ec639f792891f748a1edbd759cf1dcea3382ad83c"

[[package]]
name = "cexpr"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6fac387a98bb7c37292057cffc56d62ecb629900026402633ae9160df93a8766"
dependencies = [
 "nom",
]

[[package]]
name = "cfg-if"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd"

[[package]]
name = "cfg_aliases"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fd16c4719339c4530435d38e511904438d07cce7950afa3718a84ac36c10e89e"

[[package]]
name = "cfg_aliases"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "613afe47fcd5fac7ccf1db93babcb082c5994d996f20b8b159f2ad1658eb5724"

[[package]]
name = "chacha20"
version = "0.9.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c3613f74bd2eac03dad61bd53dbe620703d4371614fe0bc3b9f04dd36fe4e818"
dependencies = [
 "cfg-if",
 "cipher",
 "cpufeatures",
]

[[package]]
name = "chrono"
version = "0.4.38"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a21f936df1771bf62b77f047b726c4625ff2e8aa607c01ec06e5a05bd8463401"
dependencies = [
 "android-tzdata",
 "iana-time-zone",
 "num-traits",
 "serde",
 "windows-targets 0.52.6",
]

[[package]]
name = "cipher"
version = "0.4.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "773f3b9af64447d2ce9850330c473515014aa235e6a783b02db81ff39e4a3dad"
dependencies = [
 "crypto-common",
 "inout",
 "zeroize",
]

[[package]]
name = "clang-sys"
version = "1.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b023947811758c97c59bf9d1c188fd619ad4718dcaa767947df1cadb14f39f4"
dependencies = [
 "glob",
 "libc",
 "libloading 0.8.5",
]

[[package]]
name = "clap"
version = "4.5.39"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fd60e63e9be68e5fb56422e397cf9baddded06dae1d2e523401542383bc72a9f"
dependencies = [
 "clap_builder",
 "clap_derive",
]

[[package]]
name = "clap_builder"
version = "4.5.39"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "89cc6392a1f72bbeb820d71f32108f61fdaf18bc526e1d23954168a67759ef51"
dependencies = [
 "anstream",
 "anstyle",
 "clap_lex",
 "strsim",
]

[[package]]
name = "clap_derive"
version = "4.5.32"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09176aae279615badda0765c0c0b3f6ed53f4709118af73cf4655d85d1530cd7"
dependencies = [
 "heck 0.5.0",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "clap_lex"
version = "0.7.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f46ad14479a25103f283c0f10005961cf086d8dc42205bb44c46ac563475dca6"

[[package]]
name = "clipboard-win"
version = "5.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "15efe7a882b08f34e38556b14f2fb3daa98769d06c7f0c1b076dfd0d983bc892"
dependencies = [
 "error-code",
]

[[package]]
name = "cobs"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "67ba02a97a2bd10f4b59b25c7973101c79642302776489e030cd13cdab09ed15"

[[package]]
name = "codespan-reporting"
version = "0.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3538270d33cc669650c4b093848450d380def10c331d38c768e34cac80576e6e"
dependencies = [
 "termcolor",
 "unicode-width",
]

[[package]]
name = "color_quant"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3d7b894f5411737b7867f4827955924d7c254fc9f4d91a6aad6b097804b1018b"

[[package]]
name = "colorchoice"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5b63caa9aa9397e2d9480a9b13673856c78d8ac123288526c37d7839f2a86990"

[[package]]
name = "com-rs"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bf43edc576402991846b093a7ca18a3477e0ef9c588cde84964b5d3e43016642"

[[package]]
name = "combine"
version = "4.6.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ba5a308b75df32fe02788e748662718f03fde005016435c444eea572398219fd"
dependencies = [
 "bytes",
 "memchr",
]

[[package]]
name = "concurrent-queue"
version = "2.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4ca0197aee26d1ae37445ee532fefce43251d24cc7c166799f4d46817f1d3973"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "console_error_panic_hook"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a06aeb73f470f66dcdbf7223caeebb85984942f22f1adb2a088cf9668146bbbc"
dependencies = [
 "cfg-if",
 "wasm-bindgen",
]

[[package]]
name = "const-oid"
version = "0.9.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c2459377285ad874054d797f3ccebf984978aa39129f6eafde5cdc8315b612f8"

[[package]]
name = "const_fn"
version = "0.4.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "373e9fafaa20882876db20562275ff58d50e0caa2590077fe7ce7bef90211d0d"

[[package]]
name = "const_format"
version = "0.2.33"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "50c655d81ff1114fb0dcdea9225ea9f0cc712a6f8d189378e82bdf62a473a64b"
dependencies = [
 "const_format_proc_macros",
]

[[package]]
name = "const_format_proc_macros"
version = "0.2.33"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eff1a44b93f47b1bac19a27932f5c591e43d1ba357ee4f61526c8a25603f0eb1"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-xid",
]

[[package]]
name = "const_panic"
version = "0.2.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "013b6c2c3a14d678f38cd23994b02da3a1a1b6a5d1eedddfe63a5a5f11b13a81"

[[package]]
name = "const_soft_float"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87ca1caa64ef4ed453e68bb3db612e51cf1b2f5b871337f0fcab1c8f87cc3dff"

[[package]]
name = "constant_time_eq"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7c74b8349d32d297c9134b8c88677813a227df8f779daa29bfc29c183fe3dca6"

[[package]]
name = "constgebra"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e1aaf9b65849a68662ac6c0810c8893a765c960b907dd7cfab9c4a50bf764fbc"
dependencies = [
 "const_soft_float",
]

[[package]]
name = "cordyceps"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "688d7fbb8092b8de775ef2536f36c8c31f2bc4006ece2e8d8ad2d17d00ce0a2a"
dependencies = [
 "loom",
 "tracing",
]

[[package]]
name = "core-foundation"
version = "0.9.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "91e195e091a93c46f7102ec7818a2aa394e1e1771c3ab4825963fa03e45afb8f"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "core-foundation"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b55271e5c8c478ad3f38ad24ef34923091e0548492a266d19b3c0b4d82574c63"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "core-foundation-sys"
version = "0.8.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "773648b94d0e5d620f64f280777445740e61fe701025087ec8b57f45c791888b"

[[package]]
name = "core-graphics"
version = "0.22.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2581bbab3b8ffc6fcbd550bf46c355135d16e9ff2a6ea032ad6b9bf1d7efe4fb"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation 0.9.4",
 "core-graphics-types",
 "foreign-types 0.3.2",
 "libc",
]

[[package]]
name = "core-graphics"
version = "0.23.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c07782be35f9e1140080c6b96f0d44b739e2278479f64e02fdab4e32dfd8b081"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation 0.9.4",
 "core-graphics-types",
 "foreign-types 0.5.0",
 "libc",
]

[[package]]
name = "core-graphics-types"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "45390e6114f68f718cc7a830514a96f903cccd70d02a8f6d9f643ac4ba45afaf"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation 0.9.4",
 "libc",
]

[[package]]
name = "coreaudio-rs"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "321077172d79c662f64f5071a03120748d5bb652f5231570141be24cfcd2bace"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation-sys",
 "coreaudio-sys",
]

[[package]]
name = "coreaudio-sys"
version = "0.2.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2ce857aa0b77d77287acc1ac3e37a05a8c95a2af3647d23b15f263bdaeb7562b"
dependencies = [
 "bindgen",
]

[[package]]
name = "cpal"
version = "0.15.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "873dab07c8f743075e57f524c583985fbaf745602acbe916a01539364369a779"
dependencies = [
 "alsa",
 "core-foundation-sys",
 "coreaudio-rs",
 "dasp_sample",
 "jni 0.21.1",
 "js-sys",
 "libc",
 "mach2",
 "ndk 0.8.0",
 "ndk-context",
 "oboe",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
 "windows 0.54.0",
]

[[package]]
name = "cpufeatures"
version = "0.2.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "608697df725056feaccfa42cffdaeeec3fccc4ffc38358ecd19b243e716a78e0"
dependencies = [
 "libc",
]

[[package]]
name = "crc"
version = "3.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "69e6e4d7b33a94f0991c26729976b10ebde1d34c3ee82408fb536164fa10d636"
dependencies = [
 "crc-catalog",
]

[[package]]
name = "crc-catalog"
version = "2.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "19d374276b40fb8bbdee95aef7c7fa6b5316ec764510eb64b8dd0e2ed0d7e7f5"

[[package]]
name = "crc32fast"
version = "1.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a97769d94ddab943e4510d138150169a2758b5ef3eb191a9ee688de3e23ef7b3"
dependencies = [
 "cfg-if",
]

[[package]]
name = "critical-section"
version = "1.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f64009896348fc5af4222e9cf7d7d82a95a256c634ebcf61c53e4ea461422242"

[[package]]
name = "crossbeam"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1137cd7e7fc0fb5d3c5a8678be38ec56e819125d8d7907411fe24ccb943faca8"
dependencies = [
 "crossbeam-channel",
 "crossbeam-deque",
 "crossbeam-epoch",
 "crossbeam-queue",
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-channel"
version = "0.5.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "33480d6946193aa8033910124896ca395333cae7e2d1113d1fef6c3272217df2"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-deque"
version = "0.8.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "613f8cc01fe9cf1a3eb3d7f488fd2fa8388403e97039e2f73692932e291a770d"
dependencies = [
 "crossbeam-epoch",
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-epoch"
version = "0.9.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5b82ac4a3c2ca9c3460964f020e1402edd5753411d7737aa39c3714ad1b5420e"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-queue"
version = "0.3.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df0346b5d5e76ac2fe4e327c5fd1118d6be7c51dfb18f9b7922923f287471e35"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-utils"
version = "0.8.20"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22ec99545bb0ed0ea7bb9b8e1e9122ea386ff8a48c0922e43f36d45ab09e0e80"

[[package]]
name = "crypto-bigint"
version = "0.5.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0dc92fb57ca44df6db8059111ab3af99a63d5d0f8375d9972e319a379c6bab76"
dependencies = [
 "generic-array",
 "rand_core",
 "subtle",
 "zeroize",
]

[[package]]
name = "crypto-common"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1bfb12502f3fc46cca1bb51ac28df9d618d813cdc3d2f25b9fe775a34af26bb3"
dependencies = [
 "generic-array",
 "rand_core",
 "typenum",
]

[[package]]
name = "crypto_box"
version = "0.9.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "16182b4f39a82ec8a6851155cc4c0cda3065bb1db33651726a29e1951de0f009"
dependencies = [
 "aead",
 "chacha20",
 "crypto_secretbox",
 "curve25519-dalek",
 "salsa20",
 "serdect",
 "subtle",
 "zeroize",
]

[[package]]
name = "crypto_secretbox"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b9d6cf87adf719ddf43a805e92c6870a531aedda35ff640442cbaf8674e141e1"
dependencies = [
 "aead",
 "chacha20",
 "cipher",
 "generic-array",
 "poly1305",
 "salsa20",
 "subtle",
 "zeroize",
]

[[package]]
name = "csscolorparser"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eb2a7d3066da2de787b7f032c736763eb7ae5d355f81a68bab2675a96008b0bf"
dependencies = [
 "phf",
]

[[package]]
name = "curve25519-dalek"
version = "4.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "97fb8b7c4503de7d6ae7b42ab72a5a59857b4c937ec27a3d4539dba95b5ab2be"
dependencies = [
 "cfg-if",
 "cpufeatures",
 "curve25519-dalek-derive",
 "digest",
 "fiat-crypto",
 "rustc_version",
 "subtle",
 "zeroize",
]

[[package]]
name = "curve25519-dalek-derive"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f46882e17999c6cc590af592290432be3bce0428cb0d5f8b6715e4dc7b383eb3"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "d3d12"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d8f0de2f5a8e7bd4a9eec0e3c781992a4ce1724f68aec7d7a3715344de8b39da"
dependencies = [
 "bitflags 1.3.2",
 "libloading 0.7.4",
 "winapi",
]

[[package]]
name = "dashmap"
version = "5.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "978747c1d849a7d2ee5e8adc0159961c48fb7e5db2f06af6723b80123bb53856"
dependencies = [
 "cfg-if",
 "hashbrown 0.14.5",
 "lock_api",
 "once_cell",
 "parking_lot_core",
]

[[package]]
name = "dashmap"
version = "6.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5041cc499144891f3790297212f32a74fb938e5136a14943f338ef9e0ae276cf"
dependencies = [
 "cfg-if",
 "crossbeam-utils",
 "hashbrown 0.14.5",
 "lock_api",
 "once_cell",
 "parking_lot_core",
]

[[package]]
name = "dasp_sample"
version = "0.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0c87e182de0887fd5361989c677c4e8f5000cd9491d6d563161a8f3a5519fc7f"

[[package]]
name = "data-encoding"
version = "2.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e8566979429cf69b49a5c740c60791108e86440e8be149bbea4fe54d2c32d6e2"

[[package]]
name = "der"
version = "0.7.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f55bf8e7b65898637379c1b74eb1551107c8294ed26d855ceb9fd1a09cfc9bc0"
dependencies = [
 "const-oid",
 "der_derive",
 "zeroize",
]

[[package]]
name = "der-parser"
version = "9.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5cd0a5c643689626bec213c4d8bd4d96acc8ffdb4ad4bb6bc16abf27d5f4b553"
dependencies = [
 "asn1-rs",
 "displaydoc",
 "nom",
 "num-bigint",
 "num-traits",
 "rusticata-macros",
]

[[package]]
name = "der_derive"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8034092389675178f570469e6c3b0465d3d30b4505c294a6550db47f3c17ad18"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "deranged"
version = "0.3.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b42b6fa04a440b495c8b04d0e71b707c585f83cb9cb28cf8cd0d976c315e31b4"
dependencies = [
 "powerfmt",
 "serde",
]

[[package]]
name = "derive_more"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4a9b99b9cbbe49445b21764dc0625032a89b145a2642e67603e1c936f5458d05"
dependencies = [
 "derive_more-impl",
]

[[package]]
name = "derive_more-impl"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cb7330aeadfbe296029522e6c40f315320aba36fc43a5b3632f3795348f3bd22"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "unicode-xid",
]

[[package]]
name = "diatomic-waker"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ab03c107fafeb3ee9f5925686dbb7a73bc76e3932abb0d2b365cb64b169cf04c"

[[package]]
name = "digest"
version = "0.10.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ed9a281f7bc9b7576e61468ba615a66a5c8cfdff42420a70aa82701a3b1e292"
dependencies = [
 "block-buffer",
 "const-oid",
 "crypto-common",
 "subtle",
]

[[package]]
name = "directories"
version = "5.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a49173b84e034382284f27f1af4dcbbd231ffa358c0fe316541a7337f376a35"
dependencies = [
 "dirs-sys",
]

[[package]]
name = "dirs-sys"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "520f05a5cbd335fae5a99ff7a6ab8627577660ee5cfd6a94a6a929b52ff0321c"
dependencies = [
 "libc",
 "option-ext",
 "redox_users",
 "windows-sys 0.48.0",
]

[[package]]
name = "dispatch"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd0c93bb4b0c6d9b77f4435b0ae98c24d17f1c45b2ff844c6151a07256ca923b"

[[package]]
name = "displaydoc"
version = "0.2.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "97369cbbc041bc366949bc74d34658d6cda5621039731c6310521892a3a20ae0"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "dlopen2"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09b4f5f101177ff01b8ec4ecc81eead416a8aa42819a2869311b3420fa114ffa"
dependencies = [
 "libc",
 "once_cell",
 "winapi",
]

[[package]]
name = "document-features"
version = "0.2.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cb6969eaabd2421f8a2775cfd2471a2b634372b4a25d41e3bd647b79912850a0"
dependencies = [
 "litrs",
]

[[package]]
name = "downcast-rs"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75b325c5dbd37f80359721ad39aca5a29fb04c89279657cffdda8736d0c0b9d2"

[[package]]
name = "dtoa"
version = "1.0.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dcbb2bf8e87535c23f7a8a321e364ce21462d0ff10cb6407820e8e96dfff6653"

[[package]]
name = "dyn-clone"
version = "1.0.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0d6ef0072f8a535281e4876be788938b528e9a1d43900b82c2569af7da799125"

[[package]]
name = "ecdsa"
version = "0.16.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ee27f32b5c5292967d2d4a9d7f1e0b0aed2c15daded5a60300e4abb9d8020bca"
dependencies = [
 "der",
 "digest",
 "elliptic-curve",
 "rfc6979",
 "signature",
 "spki",
]

[[package]]
name = "ecolor"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cfdf4e52dbbb615cfd30cf5a5265335c217b5fd8d669593cea74a517d9c605af"
dependencies = [
 "bytemuck",
 "serde",
]

[[package]]
name = "ed25519"
version = "2.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "115531babc129696a58c64a4fef0a8bf9e9698629fb97e9e40767d235cfbcd53"
dependencies = [
 "pkcs8",
 "serde",
 "signature",
]

[[package]]
name = "ed25519-dalek"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4a3daa8e81a3963a60642bcc1f90a670680bd4a77535faa384e9d1c79d620871"
dependencies = [
 "curve25519-dalek",
 "ed25519",
 "rand_core",
 "serde",
 "sha2",
 "subtle",
 "zeroize",
]

[[package]]
name = "egui"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8bd69fed5fcf4fbb8225b24e80ea6193b61e17a625db105ef0c4d71dde6eb8b7"
dependencies = [
 "accesskit",
 "ahash",
 "epaint",
 "nohash-hasher",
 "serde",
]

[[package]]
name = "egui_extras"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68ffe3fe5c00295f91c2a61a74ee271c32f74049c94ba0b1cea8f26eb478bc07"
dependencies = [
 "egui",
 "enum-map",
 "log",
 "serde",
]

[[package]]
name = "egui_plot"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c7f33a00fe8eb1ba56535b3dbacdecc7a1365a328908a97c5f3c81bb466be72b"
dependencies = [
 "egui",
]

[[package]]
name = "ehttp"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f88f45662356f96afc7d9e2bc9910ad8352ee01417f7c69b8b16a53c8767a75d"
dependencies = [
 "document-features",
 "js-sys",
 "ureq",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
]

[[package]]
name = "either"
version = "1.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "60b1af1c220855b6ceac025d3f6ecdd2b7c4894bfe9cd9bda4fbb4bc7c0d4cf0"

[[package]]
name = "elliptic-curve"
version = "0.13.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b5e6043086bf7973472e0c7dff2142ea0b680d30e18d9cc40f267efbf222bd47"
dependencies = [
 "base16ct",
 "crypto-bigint",
 "digest",
 "ff",
 "generic-array",
 "group",
 "pkcs8",
 "rand_core",
 "sec1",
 "subtle",
 "zeroize",
]

[[package]]
name = "elsa"
version = "1.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d98e71ae4df57d214182a2e5cb90230c0192c6ddfcaa05c36453d46a54713e10"
dependencies = [
 "stable_deref_trait",
]

[[package]]
name = "emath"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1ef2b29de53074e575c18b694167ccbe6e5191f7b25fe65175a0d905a32eeec0"
dependencies = [
 "bytemuck",
 "serde",
]

[[package]]
name = "embedded-io"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ef1a6892d9eef45c8fa6b9e0086428a2cca8491aca8f787c534a3d6d0bcb3ced"

[[package]]
name = "embedded-io"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "edd0f118536f44f5ccd48bcb8b111bdc3de888b58c74639dfb034a357d0f206d"

[[package]]
name = "encase"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8fce2eeef77fd4a293a54b62aa00ac9daebfbcda4bf8998c5a815635b004aa1c"
dependencies = [
 "const_panic",
 "encase_derive",
 "glam 0.24.2",
 "thiserror 1.0.64",
]

[[package]]
name = "encase_derive"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0e520cde08cbf4f7cc097f61573ec06ce467019803de8ae82fb2823fa1554a0e"
dependencies = [
 "encase_derive_impl",
]

[[package]]
name = "encase_derive_impl"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3fe2568f851fd6144a45fa91cfed8fe5ca8fc0b56ba6797bfc1ed2771b90e37c"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "encoding_rs"
version = "0.8.34"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b45de904aa0b010bce2ab45264d0631681847fa7b6f2eaa7dab7619943bc4f59"
dependencies = [
 "cfg-if",
]

[[package]]
name = "enum-as-inner"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a1e6a265c649f3f5979b601d26f1d05ada116434c87741c9493cb56218f76cbc"
dependencies = [
 "heck 0.5.0",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "enum-map"
version = "2.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6866f3bfdf8207509a033af1a75a7b08abda06bbaaeae6669323fd5a097df2e9"
dependencies = [
 "enum-map-derive",
 "serde",
]

[[package]]
name = "enum-map-derive"
version = "0.17.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f282cfdfe92516eb26c2af8589c274c7c17681f5ecc03c18255fe741c6aa64eb"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "enumflags2"
version = "0.7.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d232db7f5956f3f14313dc2f87985c58bd2c695ce124c8cdd984e08e15ac133d"
dependencies = [
 "enumflags2_derive",
]

[[package]]
name = "enumflags2_derive"
version = "0.7.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "de0d48a183585823424a4ce1aa132d174a6a81bd540895822eb4c8373a8e49e8"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "enumn"
version = "0.1.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2f9ed6b3789237c8a0c1c505af1c7eb2c560df6186f01b098c3a1064ea532f38"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "epaint"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "58067b840d009143934d91d8dcb8ded054d8301d7c11a517ace0a99bb1e1595e"
dependencies = [
 "ab_glyph",
 "ahash",
 "bytemuck",
 "ecolor",
 "emath",
 "nohash-hasher",
 "parking_lot",
 "serde",
]

[[package]]
name = "equivalent"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5443807d6dff69373d433ab9ef5378ad8df50ca6298caf15de6e52e24aaf54d5"

[[package]]
name = "erased-serde"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c138974f9d5e7fe373eb04df7cae98833802ae4b11c24ac7039a21d5af4b26c"
dependencies = [
 "serde",
]

[[package]]
name = "erased-serde"
version = "0.4.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "24e2389d65ab4fab27dc2a5de7b191e1f6617d1f1c8855c0dc569c94a4cbb18d"
dependencies = [
 "serde",
 "typeid",
]

[[package]]
name = "erased_set"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a02a5d186d7bf1cb21f1f95e1a9cfa5c1f2dcd803a47aad454423ceec13525c5"

[[package]]
name = "errno"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "534c5cf6194dfab3db3242765c03bbe257cf92f22b38f6bc0c58d59108a820ba"
dependencies = [
 "libc",
 "windows-sys 0.52.0",
]

[[package]]
name = "error-code"
version = "3.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a5d9305ccc6942a704f4335694ecd3de2ea531b114ac2d51f5f843750787a92f"

[[package]]
name = "euclid"
version = "0.22.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ad9cdb4b747e485a12abb0e6566612956c7a1bafa3bdb8d682c5b6d403589e48"
dependencies = [
 "num-traits",
]

[[package]]
name = "event-listener"
version = "2.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0206175f82b8d6bf6652ff7d71a1e27fd2e4efde587fd368662814d6ec1d9ce0"

[[package]]
name = "event-listener"
version = "4.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "67b215c49b2b248c855fb73579eb1f4f26c38ffdc12973e20e07b91d78d5646e"
dependencies = [
 "concurrent-queue",
 "parking",
 "pin-project-lite",
]

[[package]]
name = "fallible-iterator"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2acce4a10f12dc2fb14a218589d4f1f62ef011b2d0cc4b3cb1bba8e94da14649"

[[package]]
name = "fastrand"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e51093e27b0797c359783294ca4f0a911c270184cb10f85783b118614a1501be"
dependencies = [
 "instant",
]

[[package]]
name = "fastrand"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e8c02a5121d4ea3eb16a80748c74f5549a5665e4c21333c6098f283870fbdea6"

[[package]]
name = "fdeflate"
version = "0.3.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d8090f921a24b04994d9929e204f50b498a33ea6ba559ffaa05e04f7ee7fb5ab"
dependencies = [
 "simd-adler32",
]

[[package]]
name = "ff"
version = "0.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ded41244b729663b1e574f1b4fb731469f69f79c17667b5d776b16cda0479449"
dependencies = [
 "rand_core",
 "subtle",
]

[[package]]
name = "fiat-crypto"
version = "0.2.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "28dea519a9695b9977216879a3ebfddf92f1c08c05d984f8996aecd6ecdc811d"

[[package]]
name = "filetime"
version = "0.2.25"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "35c0522e981e68cbfa8c3f978441a5f34b30b96e146b33cd3359176b50fe8586"
dependencies = [
 "cfg-if",
 "libc",
 "libredox 0.1.3",
 "windows-sys 0.59.0",
]

[[package]]
name = "fixedbitset"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0ce7134b9999ecaf8bcd65542e436736ef32ddca1b3e06094cb6ec5755203b80"

[[package]]
name = "flate2"
version = "1.0.34"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a1b589b4dc103969ad3cf85c950899926ec64300a1a46d76c03a6072957036f0"
dependencies = [
 "crc32fast",
 "miniz_oxide",
]

[[package]]
name = "float_next_after"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8bf7cc16383c4b8d58b9905a8509f02926ce3058053c056376248d958c9df1e8"

[[package]]
name = "fluent"
version = "0.15.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bc4d7142005e2066e4844caf9f271b93fc79836ee96ec85057b8c109687e629a"
dependencies = [
 "fluent-bundle",
 "unic-langid",
]

[[package]]
name = "fluent-bundle"
version = "0.15.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7fe0a21ee80050c678013f82edf4b705fe2f26f1f9877593d13198612503f493"
dependencies = [
 "fluent-langneg",
 "fluent-syntax",
 "intl-memoizer",
 "intl_pluralrules",
 "rustc-hash 1.1.0",
 "self_cell 0.10.3",
 "smallvec",
 "unic-langid",
]

[[package]]
name = "fluent-langneg"
version = "0.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2c4ad0989667548f06ccd0e306ed56b61bd4d35458d54df5ec7587c0e8ed5e94"
dependencies = [
 "unic-langid",
]

[[package]]
name = "fluent-syntax"
version = "0.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2a530c4694a6a8d528794ee9bbd8ba0122e779629ac908d15ad5a7ae7763a33d"
dependencies = [
 "thiserror 1.0.64",
]

[[package]]
name = "flume"
version = "0.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "55ac459de2512911e4b674ce33cf20befaba382d05b62b008afc1c8b57cbf181"
dependencies = [
 "futures-core",
 "futures-sink",
 "nanorand",
 "spin",
]

[[package]]
name = "fnv"
version = "1.0.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f9eec918d3f24069decb9af1554cad7c880e2da24a9afd88aca000531ab82c1"

[[package]]
name = "foreign-types"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f6f339eb8adc052cd2ca78910fda869aefa38d22d5cb648e6485e4d3fc06f3b1"
dependencies = [
 "foreign-types-shared 0.1.1",
]

[[package]]
name = "foreign-types"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d737d9aa519fb7b749cbc3b962edcf310a8dd1f4b67c91c4f83975dbdd17d965"
dependencies = [
 "foreign-types-macros",
 "foreign-types-shared 0.3.1",
]

[[package]]
name = "foreign-types-macros"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1a5c6c585bc94aaf2c7b51dd4c2ba22680844aba4c687be581871a6f518c5742"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "foreign-types-shared"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "00b0228411908ca8685dba7fc2cdd70ec9990a6e753e89b6ac91a84c40fbaf4b"

[[package]]
name = "foreign-types-shared"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "aa9a19cbb55df58761df49b23516a86d432839add4af60fc256da840f66ed35b"

[[package]]
name = "form_urlencoded"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e13624c2627564efccf4934284bdd98cbaa14e79b0b5a141218e507b3a823456"
dependencies = [
 "percent-encoding",
]

[[package]]
name = "fsevent-sys"
version = "4.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76ee7a02da4d231650c7cea31349b889be2f45ddb3ef3032d2ec8185f6313fd2"
dependencies = [
 "libc",
]

[[package]]
name = "funty"
version = "2.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e6d5a32815ae3f33302d95fdcb2ce17862f8c65363dcfd29360480ba1001fc9c"

[[package]]
name = "futures"
version = "0.3.30"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "645c6916888f6cb6350d2550b80fb63e734897a8498abe35cfb732b6487804b0"
dependencies = [
 "futures-channel",
 "futures-core",
 "futures-executor",
 "futures-io",
 "futures-sink",
 "futures-task",
 "futures-util",
]

[[package]]
name = "futures-buffered"
version = "0.2.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fe940397c8b744b9c2c974791c2c08bca2c3242ce0290393249e98f215a00472"
dependencies = [
 "cordyceps",
 "diatomic-waker",
 "futures-core",
 "pin-project-lite",
 "spin",
]

[[package]]
name = "futures-channel"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2dff15bf788c671c1934e366d07e30c1814a8ef514e1af724a602e8a2fbe1b10"
dependencies = [
 "futures-core",
 "futures-sink",
]

[[package]]
name = "futures-concurrency"
version = "7.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4b14ac911e85d57c5ea6eef76d7b4d4a3177ecd15f4bea2e61927e9e3823e19f"
dependencies = [
 "bitvec",
 "futures-buffered",
 "futures-core",
 "futures-lite 1.13.0",
 "pin-project",
 "slab",
 "smallvec",
]

[[package]]
name = "futures-core"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "05f29059c0c2090612e8d742178b0580d2dc940c837851ad723096f87af6663e"

[[package]]
name = "futures-executor"
version = "0.3.30"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a576fc72ae164fca6b9db127eaa9a9dda0d61316034f33a0a0d4eda41f02b01d"
dependencies = [
 "futures-core",
 "futures-task",
 "futures-util",
]

[[package]]
name = "futures-io"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9e5c1b78ca4aae1ac06c48a526a655760685149f0d465d21f37abfe57ce075c6"

[[package]]
name = "futures-lite"
version = "1.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49a9d51ce47660b1e808d3c990b4709f2f415d928835a17dfd16991515c46bce"
dependencies = [
 "fastrand 1.9.0",
 "futures-core",
 "futures-io",
 "memchr",
 "parking",
 "pin-project-lite",
 "waker-fn",
]

[[package]]
name = "futures-lite"
version = "2.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f5edaec856126859abb19ed65f39e90fea3a9574b9707f13539acf4abf7eb532"
dependencies = [
 "fastrand 2.1.1",
 "futures-core",
 "futures-io",
 "parking",
 "pin-project-lite",
]

[[package]]
name = "futures-macro"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "162ee34ebcb7c64a8abebc059ce0fee27c2262618d7b60ed8faf72fef13c3650"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "futures-sink"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e575fab7d1e0dcb8d0c7bcf9a63ee213816ab51902e6d244a95819acacf1d4f7"

[[package]]
name = "futures-task"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f90f7dce0722e95104fcb095585910c0977252f286e354b5e3bd38902cd99988"

[[package]]
name = "futures-timer"
version = "3.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f288b0a4f20f9a56b5d1da57e2227c661b7b16168e2f72365f57b63326e29b24"

[[package]]
name = "futures-util"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9fa08315bb612088cc391249efdc3bc77536f16c91f6cf495e6fbe85b20a4a81"
dependencies = [
 "futures-channel",
 "futures-core",
 "futures-io",
 "futures-macro",
 "futures-sink",
 "futures-task",
 "memchr",
 "pin-project-lite",
 "pin-utils",
 "slab",
]

[[package]]
name = "fxhash"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c31b6d751ae2c7f11320402d34e41349dd1016f8d5d45e48c4312bc8625af50c"
dependencies = [
 "byteorder",
]

[[package]]
name = "gc-arena"
version = "0.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3cd70cf88a32937834aae9614ff2569b5d9467fa0c42c5d7762fd94a8de88266"
dependencies = [
 "allocator-api2",
 "gc-arena-derive",
 "hashbrown 0.14.5",
 "sptr",
]

[[package]]
name = "gc-arena-derive"
version = "0.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c612a69f5557a11046b77a7408d2836fe77077f842171cd211c5ef504bd3cddd"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "synstructure",
]

[[package]]
name = "genawaiter"
version = "0.99.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c86bd0361bcbde39b13475e6e36cb24c329964aa2611be285289d1e4b751c1a0"
dependencies = [
 "futures-core",
 "genawaiter-macro",
 "genawaiter-proc-macro",
 "proc-macro-hack",
]

[[package]]
name = "genawaiter-macro"
version = "0.99.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b32dfe1fdfc0bbde1f22a5da25355514b5e450c33a6af6770884c8750aedfbc"

[[package]]
name = "genawaiter-proc-macro"
version = "0.99.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "784f84eebc366e15251c4a8c3acee82a6a6f427949776ecb88377362a9621738"
dependencies = [
 "proc-macro-error",
 "proc-macro-hack",
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "generator"
version = "0.8.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d18470a76cb7f8ff746cf1f7470914f900252ec36bbc40b569d74b1258446827"
dependencies = [
 "cc",
 "cfg-if",
 "libc",
 "log",
 "rustversion",
 "windows 0.61.1",
]

[[package]]
name = "generic-array"
version = "0.14.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "85649ca51fd72272d7821adaf274ad91c288277713d9c18820d8499a7ff69e9a"
dependencies = [
 "typenum",
 "version_check",
 "zeroize",
]

[[package]]
name = "gethostname"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0176e0459c2e4a1fe232f984bca6890e681076abb9934f6cea7c326f3fc47818"
dependencies = [
 "libc",
 "windows-targets 0.48.5",
]

[[package]]
name = "getrandom"
version = "0.2.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c4567c8db10ae91089c99af84c68c38da3ec2f087c3f82960bcdbf3656b6f4d7"
dependencies = [
 "cfg-if",
 "js-sys",
 "libc",
 "wasi",
 "wasm-bindgen",
]

[[package]]
name = "ggrs"
version = "0.10.1"
source = "git+https://github.com/MaxCWhitehead/ggrs.git?rev=96499377407ce55805a9d0367b86860b74c233bd#96499377407ce55805a9d0367b86860b74c233bd"
dependencies = [
 "bincode",
 "bitfield-rle",
 "bytemuck",
 "instant",
 "js-sys",
 "parking_lot",
 "rand",
 "serde",
]

[[package]]
name = "gilrs"
version = "0.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbb2c998745a3c1ac90f64f4f7b3a54219fd3612d7705e7798212935641ed18f"
dependencies = [
 "fnv",
 "gilrs-core",
 "log",
 "uuid",
 "vec_map",
]

[[package]]
name = "gilrs-core"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "495af945e45efd6386227613cd9fb7bd7c43d3c095040e30c5304c489e6abed5"
dependencies = [
 "core-foundation 0.10.0",
 "inotify 0.11.0",
 "io-kit-sys",
 "js-sys",
 "libc",
 "libudev-sys",
 "log",
 "nix 0.29.0",
 "uuid",
 "vec_map",
 "wasm-bindgen",
 "web-sys",
 "windows 0.58.0",
]

[[package]]
name = "gimli"
version = "0.31.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "32085ea23f3234fc7846555e85283ba4de91e21016dc0455a16286d87a292d64"

[[package]]
name = "git2"
version = "0.18.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "232e6a7bfe35766bf715e55a88b39a700596c0ccfd88cd3680b4cdb40d66ef70"
dependencies = [
 "bitflags 2.6.0",
 "libc",
 "libgit2-sys",
 "log",
 "url",
]

[[package]]
name = "glam"
version = "0.24.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b5418c17512bdf42730f9032c74e1ae39afc408745ebb2acf72fbc4691c17945"
dependencies = [
 "bytemuck",
 "libm",
 "serde",
]

[[package]]
name = "glam"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c28091a37a5d09b555cb6628fd954da299b536433834f5b8e59eba78e0cbbf8a"
dependencies = [
 "mint",
]

[[package]]
name = "glob"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d2fabcfbdc87f4758337ca535fb41a6d701b65693ce38287d856d1674551ec9b"

[[package]]
name = "glow"
version = "0.12.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ca0fe580e4b60a8ab24a868bc08e2f03cbcb20d3d676601fa909386713333728"
dependencies = [
 "js-sys",
 "slotmap",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "governor"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0746aa765db78b521451ef74221663b57ba595bf83f75d0ce23cc09447c8139f"
dependencies = [
 "cfg-if",
 "dashmap 6.1.0",
 "futures-sink",
 "futures-timer",
 "futures-util",
 "no-std-compat",
 "nonzero_ext",
 "parking_lot",
 "portable-atomic",
 "quanta",
 "rand",
 "smallvec",
 "spinning_top",
]

[[package]]
name = "gpu-alloc"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22beaafc29b38204457ea030f6fb7a84c9e4dd1b86e311ba0542533453d87f62"
dependencies = [
 "bitflags 1.3.2",
 "gpu-alloc-types",
]

[[package]]
name = "gpu-alloc-types"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "54804d0d6bc9d7f26db4eaec1ad10def69b599315f487d32c334a80d1efe67a5"
dependencies = [
 "bitflags 1.3.2",
]

[[package]]
name = "gpu-allocator"
version = "0.22.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ce95f9e2e11c2c6fadfce42b5af60005db06576f231f5c92550fdded43c423e8"
dependencies = [
 "backtrace",
 "log",
 "thiserror 1.0.64",
 "winapi",
 "windows 0.44.0",
]

[[package]]
name = "gpu-descriptor"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cc11df1ace8e7e564511f53af41f3e42ddc95b56fd07b3f4445d2a6048bc682c"
dependencies = [
 "bitflags 2.6.0",
 "gpu-descriptor-types",
 "hashbrown 0.14.5",
]

[[package]]
name = "gpu-descriptor-types"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6bf0b36e6f090b7e1d8a4b49c0cb81c1f8376f72198c65dd3ad9ff3556b8b78c"
dependencies = [
 "bitflags 2.6.0",
]

[[package]]
name = "group"
version = "0.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f0f9ef7462f7c099f518d754361858f86d8a07af53ba9af0fe635bbccb151a63"
dependencies = [
 "ff",
 "rand_core",
 "subtle",
]

[[package]]
name = "guillotiere"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b62d5865c036cb1393e23c50693df631d3f5d7bcca4c04fe4cc0fd592e74a782"
dependencies = [
 "euclid",
 "svg_fmt",
]

[[package]]
name = "h2"
version = "0.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "524e8ac6999421f49a846c2d4411f337e53497d8ec55d67753beffa43c5d9205"
dependencies = [
 "atomic-waker",
 "bytes",
 "fnv",
 "futures-core",
 "futures-sink",
 "http 1.1.0",
 "indexmap 2.5.0",
 "slab",
 "tokio",
 "tokio-util",
 "tracing",
]

[[package]]
name = "hash32"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b0c35f58762feb77d74ebe43bdbc3210f09be9fe6742234d573bacc26ed92b67"
dependencies = [
 "byteorder",
]

[[package]]
name = "hashbrown"
version = "0.12.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8a9ee70c43aaf417c914396645a0fa852624801b24ebb7ae78fe8272889ac888"

[[package]]
name = "hashbrown"
version = "0.14.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e5274423e17b7c9fc20b6e7e208532f9b19825d82dfd615708b70edd83df41f1"
dependencies = [
 "ahash",
 "allocator-api2",
 "serde",
]

[[package]]
name = "hassle-rs"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1397650ee315e8891a0df210707f0fc61771b0cc518c3023896064c5407cb3b0"
dependencies = [
 "bitflags 1.3.2",
 "com-rs",
 "libc",
 "libloading 0.7.4",
 "thiserror 1.0.64",
 "widestring",
 "winapi",
]

[[package]]
name = "heapless"
version = "0.7.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cdc6457c0eb62c71aac4bc17216026d8410337c4126773b9c5daba343f17964f"
dependencies = [
 "atomic-polyfill",
 "hash32",
 "rustc_version",
 "serde",
 "spin",
 "stable_deref_trait",
]

[[package]]
name = "heck"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "95505c38b4572b2d910cecb0281560f54b440a19336cbbcb27bf6ce6adc6f5a8"

[[package]]
name = "heck"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2304e00983f87ffb38b55b444b5e3b60a884b5d30c0fca7d82fe33449bbe55ea"

[[package]]
name = "hermit-abi"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d231dfb89cfffdbc30e7fc41579ed6066ad03abda9e567ccafae602b97ec5024"

[[package]]
name = "hex"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f24254aa9a54b5c858eaee2f5bccdb46aaf0e486a595ed5fd8f86ba55232a70"

[[package]]
name = "hexasphere"
version = "9.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7cb3df16a7bcb1b5bc092abd55e14f77ca70aea14445026e264586fc62889a10"
dependencies = [
 "constgebra",
 "glam 0.24.2",
]

[[package]]
name = "hexf-parse"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dfa686283ad6dd069f105e5ab091b04c62850d3e4cf5d67debad1933f55023df"

[[package]]
name = "hickory-proto"
version = "0.24.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "07698b8420e2f0d6447a436ba999ec85d8fbf2a398bbd737b82cac4a2e96e512"
dependencies = [
 "async-trait",
 "cfg-if",
 "data-encoding",
 "enum-as-inner",
 "futures-channel",
 "futures-io",
 "futures-util",
 "idna 0.4.0",
 "ipnet",
 "once_cell",
 "rand",
 "thiserror 1.0.64",
 "tinyvec",
 "tokio",
 "tracing",
 "url",
]

[[package]]
name = "hickory-proto"
version = "0.25.0-alpha.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8270a1857fb962b9914aafd46a89a187a4e63d0eb4190c327e7c7b8256a2d055"
dependencies = [
 "async-recursion",
 "async-trait",
 "cfg-if",
 "data-encoding",
 "enum-as-inner",
 "futures-channel",
 "futures-io",
 "futures-util",
 "idna 0.5.0",
 "ipnet",
 "once_cell",
 "rand",
 "thiserror 1.0.64",
 "time",
 "tinyvec",
 "tokio",
 "tracing",
 "url",
]

[[package]]
name = "hickory-resolver"
version = "0.25.0-alpha.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "46c110355b5703070d9e29c344d79818a7cde3de9c27fc35750defea6074b0ad"
dependencies = [
 "cfg-if",
 "futures-util",
 "hickory-proto 0.25.0-alpha.2",
 "ipconfig",
 "lru-cache",
 "once_cell",
 "parking_lot",
 "rand",
 "resolv-conf",
 "smallvec",
 "thiserror 1.0.64",
 "tokio",
 "tracing",
]

[[package]]
name = "hmac"
version = "0.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c49c37c09c17a53d937dfbb742eb3a961d65a994e6bcdcf37e7399d0cc8ab5e"
dependencies = [
 "digest",
]

[[package]]
name = "hmac-sha1"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6b05da5b9e5d4720bfb691eebb2b9d42da3570745da71eac8a1f5bb7e59aab88"
dependencies = [
 "hmac",
 "sha1",
]

[[package]]
name = "hmac-sha256"
version = "1.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3688e69b38018fec1557254f64c8dc2cc8ec502890182f395dbb0aa997aa5735"

[[package]]
name = "home"
version = "0.5.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e3d1354bf6b7235cb4a0576c2619fd4ed18183f689b12b006a0ee7329eeff9a5"
dependencies = [
 "windows-sys 0.52.0",
]

[[package]]
name = "hostname"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c731c3e10504cc8ed35cfe2f1db4c9274c3d35fa486e3b31df46f068ef3e867"
dependencies = [
 "libc",
 "match_cfg",
 "winapi",
]

[[package]]
name = "hostname"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a56f203cd1c76362b69e3863fd987520ac36cf70a8c92627449b2f64a8cf7d65"
dependencies = [
 "cfg-if",
 "libc",
 "windows-link",
]

[[package]]
name = "hostname-validator"
version = "1.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f558a64ac9af88b5ba400d99b579451af0d39c6d360980045b91aac966d705e2"

[[package]]
name = "http"
version = "0.2.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "601cbb57e577e2f5ef5be8e7b83f0f63994f25aa94d673e54a92d5c516d101f1"
dependencies = [
 "bytes",
 "fnv",
 "itoa",
]

[[package]]
name = "http"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "21b9ddb458710bc376481b842f5da65cdf31522de232c1ca8146abce2a358258"
dependencies = [
 "bytes",
 "fnv",
 "itoa",
]

[[package]]
name = "http-body"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1efedce1fb8e6913f23e0c92de8e62cd5b772a67e7b3946df930a62566c93184"
dependencies = [
 "bytes",
 "http 1.1.0",
]

[[package]]
name = "http-body-util"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "793429d76616a256bcb62c2a2ec2bed781c8307e797e2598c50010f2bee2544f"
dependencies = [
 "bytes",
 "futures-util",
 "http 1.1.0",
 "http-body",
 "pin-project-lite",
]

[[package]]
name = "httparse"
version = "1.9.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fcc0b4a115bf80b728eb8ea024ad5bd707b615bfed49e0665b6e0f86fd082d9"

[[package]]
name = "httpdate"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df3b46402a9d5adb4c86a0cf463f42e19994e3ee891101b1841f30a545cb49a9"

[[package]]
name = "humantime"
version = "2.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a3a5bfb195931eeb336b2a7b4d761daec841b97f947d34394601737a7bba5e4"

[[package]]
name = "humantime-serde"
version = "1.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "57a3db5ea5923d99402c94e9feb261dc5ee9b4efa158b0315f788cf549cc200c"
dependencies = [
 "humantime",
 "serde",
]

[[package]]
name = "hyper"
version = "1.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "50dfd22e0e76d0f662d429a5f80fcaf3855009297eab6a0a9f8543834744ba05"
dependencies = [
 "bytes",
 "futures-channel",
 "futures-util",
 "h2",
 "http 1.1.0",
 "http-body",
 "httparse",
 "httpdate",
 "itoa",
 "pin-project-lite",
 "smallvec",
 "tokio",
 "want",
]

[[package]]
name = "hyper-rustls"
version = "0.27.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08afdbb5c31130e3034af566421053ab03787c640246a446327f550d11bcb333"
dependencies = [
 "futures-util",
 "http 1.1.0",
 "hyper",
 "hyper-util",
 "rustls 0.23.13",
 "rustls-pki-types",
 "tokio",
 "tokio-rustls",
 "tower-service",
 "webpki-roots",
]

[[package]]
name = "hyper-util"
version = "0.1.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "41296eb09f183ac68eec06e03cdbea2e759633d4067b2f6552fc2e009bcad08b"
dependencies = [
 "bytes",
 "futures-channel",
 "futures-util",
 "http 1.1.0",
 "http-body",
 "hyper",
 "pin-project-lite",
 "socket2 0.5.7",
 "tokio",
 "tower-service",
 "tracing",
]

[[package]]
name = "iana-time-zone"
version = "0.1.61"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "235e081f3925a06703c2d0117ea8b91f042756fd6e7a6e5d901e8ca1a996b220"
dependencies = [
 "android_system_properties",
 "core-foundation-sys",
 "iana-time-zone-haiku",
 "js-sys",
 "wasm-bindgen",
 "windows-core 0.52.0",
]

[[package]]
name = "iana-time-zone-haiku"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f31827a206f56af32e590ba56d5d2d085f558508192593743f16b2306495269f"
dependencies = [
 "cc",
]

[[package]]
name = "idna"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7d20d6b07bfbc108882d88ed8e37d39636dcc260e15e30c45e6ba089610b917c"
dependencies = [
 "unicode-bidi",
 "unicode-normalization",
]

[[package]]
name = "idna"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "634d9b1461af396cad843f47fdba5597a4f9e6ddd4bfb6ff5d85028c25cb12f6"
dependencies = [
 "unicode-bidi",
 "unicode-normalization",
]

[[package]]
name = "if-addrs"
version = "0.10.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cabb0019d51a643781ff15c9c8a3e5dedc365c47211270f4e8f82812fedd8f0a"
dependencies = [
 "libc",
 "windows-sys 0.48.0",
]

[[package]]
name = "igd-next"
version = "0.15.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76b0d7d4541def58a37bf8efc559683f21edce7c82f0d866c93ac21f7e098f93"
dependencies = [
 "async-trait",
 "attohttpc",
 "bytes",
 "futures",
 "http 1.1.0",
 "http-body-util",
 "hyper",
 "hyper-util",
 "log",
 "rand",
 "tokio",
 "url",
 "xmltree",
]

[[package]]
name = "image"
version = "0.24.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5690139d2f55868e080017335e4b94cb7414274c74f1669c84fb5feba2c9f69d"
dependencies = [
 "bytemuck",
 "byteorder",
 "color_quant",
 "num-traits",
 "png",
]

[[package]]
name = "image"
version = "0.25.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "99314c8a2152b8ddb211f924cdae532d8c5e4c8bb54728e12fff1b0cd5963a10"
dependencies = [
 "bytemuck",
 "byteorder-lite",
 "num-traits",
 "png",
 "tiff",
]

[[package]]
name = "indexmap"
version = "1.9.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd070e393353796e801d209ad339e89596eb4c8d430d18ede6a1cced8fafbd99"
dependencies = [
 "autocfg",
 "hashbrown 0.12.3",
 "serde",
]

[[package]]
name = "indexmap"
version = "2.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68b900aa2f7301e21c36462b170ee99994de34dff39a4a6a528e80e7376d07e5"
dependencies = [
 "equivalent",
 "hashbrown 0.14.5",
]

[[package]]
name = "inotify"
version = "0.9.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f8069d3ec154eb856955c1c0fbffefbf5f3c40a104ec912d4797314c1801abff"
dependencies = [
 "bitflags 1.3.2",
 "inotify-sys",
 "libc",
]

[[package]]
name = "inotify"
version = "0.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f37dccff2791ab604f9babef0ba14fbe0be30bd368dc541e2b08d07c8aa908f3"
dependencies = [
 "bitflags 2.6.0",
 "inotify-sys",
 "libc",
]

[[package]]
name = "inotify-sys"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e05c02b5e89bff3b946cedeca278abc628fe811e604f027c45a8aa3cf793d0eb"
dependencies = [
 "libc",
]

[[package]]
name = "inout"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a0c10553d664a4d0bcff9f4215d0aac67a639cc68ef660840afe309b807bc9f5"
dependencies = [
 "generic-array",
]

[[package]]
name = "instant"
version = "0.1.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e0242819d153cba4b4b05a5a8f2a7e9bbf97b6055b2a002b395c96b5ff3c0222"
dependencies = [
 "cfg-if",
 "js-sys",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "intl-memoizer"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fe22e020fce238ae18a6d5d8c502ee76a52a6e880d99477657e6acc30ec57bda"
dependencies = [
 "type-map",
 "unic-langid",
]

[[package]]
name = "intl_pluralrules"
version = "7.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "078ea7b7c29a2b4df841a7f6ac8775ff6074020c6776d48491ce2268e068f972"
dependencies = [
 "unic-langid",
]

[[package]]
name = "io-kit-sys"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "617ee6cf8e3f66f3b4ea67a4058564628cde41901316e19f559e14c7c72c5e7b"
dependencies = [
 "core-foundation-sys",
 "mach2",
]

[[package]]
name = "ipconfig"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b58db92f96b720de98181bbbe63c831e87005ab460c1bf306eb2622b4707997f"
dependencies = [
 "socket2 0.5.7",
 "widestring",
 "windows-sys 0.48.0",
 "winreg",
]

[[package]]
name = "ipnet"
version = "2.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "187674a687eed5fe42285b40c6291f9a01517d415fad1c3cbc6a9f778af7fcd4"

[[package]]
name = "iroh"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "80b15215aea8d0367fefb9264521e4a251dc4e113896a3d765f530378518188f"
dependencies = [
 "anyhow",
 "backoff",
 "base64 0.22.1",
 "bytes",
 "der",
 "derive_more",
 "futures-buffered",
 "futures-concurrency",
 "futures-lite 2.6.0",
 "futures-sink",
 "futures-util",
 "genawaiter",
 "governor",
 "hex",
 "hickory-proto 0.25.0-alpha.2",
 "hickory-resolver",
 "hostname 0.4.1",
 "http 1.1.0",
 "http-body-util",
 "hyper",
 "hyper-util",
 "igd-next",
 "iroh-base",
 "iroh-metrics",
 "iroh-net-report",
 "iroh-quinn",
 "iroh-quinn-proto",
 "iroh-quinn-udp",
 "iroh-relay",
 "libc",
 "netdev",
 "netlink-packet-core",
 "netlink-packet-route 0.19.0",
 "netlink-packet-route 0.21.0",
 "netlink-sys",
 "netwatch",
 "num_enum 0.7.3",
 "once_cell",
 "parking_lot",
 "pin-project",
 "pkarr",
 "portmapper",
 "postcard",
 "rand",
 "rcgen 0.13.2",
 "reqwest",
 "ring",
 "rtnetlink 0.13.1",
 "rtnetlink 0.14.1",
 "rustls 0.23.13",
 "rustls-webpki 0.102.8",
 "serde",
 "smallvec",
 "socket2 0.5.7",
 "strum 0.26.3",
 "stun-rs",
 "surge-ping",
 "swarm-discovery",
 "thiserror 2.0.12",
 "time",
 "tokio",
 "tokio-rustls",
 "tokio-stream",
 "tokio-tungstenite 0.24.0",
 "tokio-tungstenite-wasm",
 "tokio-util",
 "tracing",
 "url",
 "watchable",
 "webpki-roots",
 "windows 0.58.0",
 "wmi",
 "x509-parser",
 "z32",
]

[[package]]
name = "iroh-base"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3fd98293ce8e85e6b4f0ce09af7c6bb860f2fece8fcf9238d6e628f1e163e27a"
dependencies = [
 "aead",
 "anyhow",
 "crypto_box",
 "data-encoding",
 "derive_more",
 "ed25519-dalek",
 "getrandom",
 "hex",
 "iroh-blake3",
 "once_cell",
 "postcard",
 "rand",
 "rand_core",
 "serde",
 "ssh-key",
 "thiserror 2.0.12",
 "ttl_cache",
 "url",
 "zeroize",
]

[[package]]
name = "iroh-blake3"
version = "1.4.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "efbba31f40a650f58fa28dd585a8ca76d8ae3ba63aacab4c8269004a0c803930"
dependencies = [
 "arrayref",
 "arrayvec",
 "cc",
 "cfg-if",
 "constant_time_eq",
]

[[package]]
name = "iroh-metrics"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a242381d5da20bb4a6cc7482b5cc687a739da8371aff0ea8c12aaf499801886b"
dependencies = [
 "anyhow",
 "erased_set",
 "http-body-util",
 "hyper",
 "hyper-util",
 "once_cell",
 "prometheus-client",
 "reqwest",
 "serde",
 "struct_iterable",
 "time",
 "tokio",
 "tracing",
]

[[package]]
name = "iroh-net-report"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b82dc449d537176fc90749ae0711c6f81479053086928a2f2bb87cb52646ba74"
dependencies = [
 "anyhow",
 "bytes",
 "derive_more",
 "futures-buffered",
 "futures-lite 2.6.0",
 "hickory-resolver",
 "iroh-base",
 "iroh-metrics",
 "iroh-relay",
 "netwatch",
 "portmapper",
 "rand",
 "reqwest",
 "rustls 0.23.13",
 "surge-ping",
 "thiserror 1.0.64",
 "tokio",
 "tokio-util",
 "tracing",
 "url",
]

[[package]]
name = "iroh-quinn"
version = "0.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "35ba75a5c57cff299d2d7ca1ddee053f66339d1756bd79ec637bcad5aa61100e"
dependencies = [
 "bytes",
 "iroh-quinn-proto",
 "iroh-quinn-udp",
 "pin-project-lite",
 "rustc-hash 2.0.0",
 "rustls 0.23.13",
 "socket2 0.5.7",
 "thiserror 1.0.64",
 "tokio",
 "tracing",
]

[[package]]
name = "iroh-quinn-proto"
version = "0.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2c869ba52683d3d067c83ab4c00a2fda18eaf13b1434d4c1352f428674d4a5d"
dependencies = [
 "bytes",
 "rand",
 "ring",
 "rustc-hash 2.0.0",
 "rustls 0.23.13",
 "rustls-platform-verifier",
 "slab",
 "thiserror 1.0.64",
 "tinyvec",
 "tracing",
]

[[package]]
name = "iroh-quinn-udp"
version = "0.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c53afaa1049f7c83ea1331f5ebb9e6ebc5fdd69c468b7a22dd598b02c9bcc973"
dependencies = [
 "cfg_aliases 0.2.1",
 "libc",
 "once_cell",
 "socket2 0.5.7",
 "tracing",
 "windows-sys 0.59.0",
]

[[package]]
name = "iroh-relay"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "28a0d0d7317795a01caa47ffdaeec84211d1b394530bdb31dbe15f642e58bcff"
dependencies = [
 "anyhow",
 "base64 0.22.1",
 "bytes",
 "clap",
 "derive_more",
 "futures-buffered",
 "futures-lite 2.6.0",
 "futures-sink",
 "futures-util",
 "governor",
 "hex",
 "hickory-proto 0.25.0-alpha.2",
 "hickory-resolver",
 "hostname 0.4.1",
 "http 1.1.0",
 "http-body-util",
 "hyper",
 "hyper-util",
 "iroh-base",
 "iroh-metrics",
 "iroh-quinn",
 "iroh-quinn-proto",
 "libc",
 "num_enum 0.7.3",
 "once_cell",
 "parking_lot",
 "pin-project",
 "postcard",
 "rand",
 "rcgen 0.13.2",
 "regex",
 "reqwest",
 "ring",
 "rustls 0.23.13",
 "rustls-pemfile",
 "rustls-webpki 0.102.8",
 "serde",
 "smallvec",
 "socket2 0.5.7",
 "stun-rs",
 "thiserror 2.0.12",
 "time",
 "tokio",
 "tokio-rustls",
 "tokio-rustls-acme",
 "tokio-tungstenite 0.24.0",
 "tokio-tungstenite-wasm",
 "tokio-util",
 "toml",
 "tracing",
 "tracing-subscriber",
 "url",
 "webpki-roots",
]

[[package]]
name = "is_debug"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "06d198e9919d9822d5f7083ba8530e04de87841eaf21ead9af8f2304efd57c89"

[[package]]
name = "is_terminal_polyfill"
version = "1.70.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7943c866cc5cd64cbc25b2e01621d07fa8eb2a1a23160ee81ce38704e97b8ecf"

[[package]]
name = "itertools"
version = "0.10.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b0fd2260e829bddf4cb6ea802289de2f86d6a7a690192fbe91b3f46e0f2c8473"
dependencies = [
 "either",
]

[[package]]
name = "itoa"
version = "1.0.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49f1f14873335454500d59611f1cf4a4b0f786f9ac11f4312a78e4cf2566695b"

[[package]]
name = "jni"
version = "0.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c6df18c2e3db7e453d3c6ac5b3e9d5182664d28788126d39b91f2d1e22b017ec"
dependencies = [
 "cesu8",
 "combine",
 "jni-sys",
 "log",
 "thiserror 1.0.64",
 "walkdir",
]

[[package]]
name = "jni"
version = "0.21.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1a87aa2bb7d2af34197c04845522473242e1aa17c12f4935d5856491a7fb8c97"
dependencies = [
 "cesu8",
 "cfg-if",
 "combine",
 "jni-sys",
 "log",
 "thiserror 1.0.64",
 "walkdir",
 "windows-sys 0.45.0",
]

[[package]]
name = "jni-sys"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8eaf4bc02d17cbdd7ff4c7438cafcdf7fb9a4613313ad11b4f8fefe7d3fa0130"

[[package]]
name = "jobserver"
version = "0.1.32"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "48d1dbcbbeb6a7fec7e059840aa538bd62aaccf972c7346c4d9d2059312853d0"
dependencies = [
 "libc",
]

[[package]]
name = "jpeg-decoder"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f5d4a7da358eff58addd2877a45865158f0d78c911d43a5784ceb7bbf52833b0"

[[package]]
name = "js-sys"
version = "0.3.70"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1868808506b929d7b0cfa8f75951347aa71bb21144b7791bae35d9bccfcfe37a"
dependencies = [
 "wasm-bindgen",
]

[[package]]
name = "jumpy"
version = "0.12.2"
dependencies = [
 "async-channel",
 "bevy_dylib",
 "bevy_tasks",
 "bitfield",
 "bitflags 2.6.0",
 "bones_bevy_renderer",
 "bones_framework",
 "bytemuck",
 "egui_extras",
 "humantime-serde",
 "indexmap 2.5.0",
 "nalgebra",
 "once_cell",
 "ordered-float 3.9.2",
 "peg",
 "petgraph",
 "postcard",
 "puffin",
 "puffin_egui",
 "rapier2d",
 "serde",
 "serde_yaml",
 "shadow-rs",
 "shiftnanigans",
 "smallvec",
 "strum 0.25.0",
 "thiserror 1.0.64",
 "tracing",
 "turborand",
]

[[package]]
name = "khronos-egl"
version = "4.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8c2352bd1d0bceb871cb9d40f24360c8133c11d7486b68b5381c1dd1a32015e3"
dependencies = [
 "libc",
 "libloading 0.7.4",
 "pkg-config",
]

[[package]]
name = "kira"
version = "0.9.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc562c3c440485a06d529f68bcff850c4eb58ba4caddf14fa12cd6077acce17c"
dependencies = [
 "cpal",
 "glam 0.29.0",
 "mint",
 "paste",
 "ringbuf",
 "send_wrapper",
 "symphonia",
 "triple_buffer",
]

[[package]]
name = "kqueue"
version = "1.0.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7447f1ca1b7b563588a205fe93dea8df60fd981423a768bc1c0ded35ed147d0c"
dependencies = [
 "kqueue-sys",
 "libc",
]

[[package]]
name = "kqueue-sys"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed9625ffda8729b85e45cf04090035ac368927b8cebc34898e7c120f52e4838b"
dependencies = [
 "bitflags 1.3.2",
 "libc",
]

[[package]]
name = "lazy_static"
version = "1.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbd2bcb4c963f2ddae06a2efc7e9f3591312473c50c6685e1f298068316e66fe"
dependencies = [
 "spin",
]

[[package]]
name = "libc"
version = "0.2.159"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "561d97a539a36e26a9a5fad1ea11a3039a67714694aaa379433e580854bc3dc5"

[[package]]
name = "libgit2-sys"
version = "0.16.2+1.7.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ee4126d8b4ee5c9d9ea891dd875cfdc1e9d0950437179104b183d7d8a74d24e8"
dependencies = [
 "cc",
 "libc",
 "libz-sys",
 "pkg-config",
]

[[package]]
name = "libloading"
version = "0.7.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b67380fd3b2fbe7527a606e18729d21c6f3951633d0500574c4dc22d2d638b9f"
dependencies = [
 "cfg-if",
 "winapi",
]

[[package]]
name = "libloading"
version = "0.8.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4979f22fdb869068da03c9f7528f8297c6fd2606bc3a4affe42e6a823fdb8da4"
dependencies = [
 "cfg-if",
 "windows-targets 0.52.6",
]

[[package]]
name = "libm"
version = "0.2.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4ec2a862134d2a7d32d7983ddcdd1c4923530833c9f2ea1a44fc5fa473989058"

[[package]]
name = "libredox"
version = "0.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3af92c55d7d839293953fcd0fda5ecfe93297cfde6ffbdec13b41d99c0ba6607"
dependencies = [
 "bitflags 2.6.0",
 "libc",
 "redox_syscall 0.4.1",
]

[[package]]
name = "libredox"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c0ff37bd590ca25063e35af745c343cb7a0271906fb7b37e4813e8f79f00268d"
dependencies = [
 "bitflags 2.6.0",
 "libc",
 "redox_syscall 0.5.6",
]

[[package]]
name = "libudev-sys"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c8469b4a23b962c1396b9b451dda50ef5b283e8dd309d69033475fa9b334324"
dependencies = [
 "libc",
 "pkg-config",
]

[[package]]
name = "libz-sys"
version = "1.1.20"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d2d16453e800a8cf6dd2fc3eb4bc99b786a9b90c663b8559a5b1a041bf89e472"
dependencies = [
 "cc",
 "libc",
 "pkg-config",
 "vcpkg",
]

[[package]]
name = "linked-hash-map"
version = "0.5.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0717cef1bc8b636c6e1c1bbdefc09e6322da8a9321966e8928ef80d20f7f770f"

[[package]]
name = "linux-raw-sys"
version = "0.4.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78b3ae25bc7c8c38cec158d1f2757ee79e9b3740fbc7ccf0e59e4b08d793fa89"

[[package]]
name = "litrs"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b4ce301924b7887e9d637144fdade93f9dfff9b60981d4ac161db09720d39aa5"

[[package]]
name = "lock_api"
version = "0.4.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "07af8b9cdd281b7915f413fa73f29ebd5d55d0d3f0155584dade1ff18cea1b17"
dependencies = [
 "autocfg",
 "scopeguard",
]

[[package]]
name = "log"
version = "0.4.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a7a70ba024b9dc04c27ea2f0c0548feb474ec5c54bba33a7f72f873a39d07b24"

[[package]]
name = "loom"
version = "0.7.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "419e0dc8046cb947daa77eb95ae174acfbddb7673b4151f56d1eed8e93fbfaca"
dependencies = [
 "cfg-if",
 "generator",
 "scoped-tls",
 "tracing",
 "tracing-subscriber",
]

[[package]]
name = "lru"
version = "0.12.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "37ee39891760e7d94734f6f63fedc29a2e4a152f836120753a72503f09fcf904"

[[package]]
name = "lru-cache"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "31e24f1ad8321ca0e8a1e0ac13f23cb668e6f5466c2c57319f6a5cf1cc8e3b1c"
dependencies = [
 "linked-hash-map",
]

[[package]]
name = "lyon_algorithms"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a3bca95f9a4955b3e4a821fbbcd5edfbd9be2a9a50bb5758173e5358bfb4c623"
dependencies = [
 "lyon_path",
 "num-traits",
]

[[package]]
name = "lyon_geom"
version = "1.0.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "edecfb8d234a2b0be031ab02ebcdd9f3b9ee418fb35e265f7a540a48d197bff9"
dependencies = [
 "arrayvec",
 "euclid",
 "num-traits",
]

[[package]]
name = "lyon_path"
version = "1.0.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9c08a606c7a59638d6c6aa18ac91a06aa9fb5f765a7efb27e6a4da58700740d7"
dependencies = [
 "lyon_geom",
 "num-traits",
]

[[package]]
name = "lyon_tessellation"
version = "1.0.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "579d42360a4b09846eff2feef28f538696c7d6c7439bfa65874ff3cbe0951b2c"
dependencies = [
 "float_next_after",
 "lyon_path",
 "num-traits",
]

[[package]]
name = "lz4_flex"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75761162ae2b0e580d7e7c390558127e5f01b4194debd6221fd8c207fc80e3f5"

[[package]]
name = "mach2"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "19b955cdeb2a02b9117f121ce63aa52d08ade45de53e48fe6a38b39c10f6f709"
dependencies = [
 "libc",
]

[[package]]
name = "mainline"
version = "2.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2b751ffb57303217bcae8f490eee6044a5b40eadf6ca05ff476cad37e7b7970d"
dependencies = [
 "bytes",
 "crc",
 "ed25519-dalek",
 "flume",
 "lru",
 "rand",
 "serde",
 "serde_bencode",
 "serde_bytes",
 "sha1_smol",
 "thiserror 1.0.64",
 "tracing",
]

[[package]]
name = "malloc_buf"
version = "0.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "62bb907fe88d54d8d9ce32a3cceab4218ed2f6b7d35617cafe9adf84e43919cb"
dependencies = [
 "libc",
]

[[package]]
name = "match_cfg"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ffbee8634e0d45d258acb448e7eaab3fce7a0a467395d4d9f228e3c1f01fb2e4"

[[package]]
name = "matchers"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8263075bb86c5a1b1427b5ae862e8889656f126e9f77c484496e8b47cf5c5558"
dependencies = [
 "regex-automata 0.1.10",
]

[[package]]
name = "matrixmultiply"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9380b911e3e96d10c1f415da0876389aaf1b56759054eeb0de7df940c456ba1a"
dependencies = [
 "autocfg",
 "rawpointer",
]

[[package]]
name = "md5"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "490cc448043f947bae3cbee9c203358d62dbee0db12107a74be5c30ccfd09771"

[[package]]
name = "mdns-sd"
version = "0.10.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d8031297470465389c1349c399b927505d0cc4503be7a997c3541765bca82b4d"
dependencies = [
 "flume",
 "if-addrs",
 "polling",
 "socket2 0.5.7",
]

[[package]]
name = "memchr"
version = "2.7.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78ca9ab1a0babb1e7d5695e3530886289c18cf2f87ec19a575a0abdce112e3a3"

[[package]]
name = "metal"
version = "0.24.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "de11355d1f6781482d027a3b4d4de7825dcedb197bf573e0596d00008402d060"
dependencies = [
 "bitflags 1.3.2",
 "block",
 "core-graphics-types",
 "foreign-types 0.3.2",
 "log",
 "objc",
]

[[package]]
name = "mime"
version = "0.3.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6877bb514081ee2a7ff5ef9de3281f14a4dd4bceac4c09388074a6b5df8a139a"

[[package]]
name = "minimal-lexical"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68354c5c6bd36d73ff3feceb05efa59b6acb7626617f4962be322a825e61f79a"

[[package]]
name = "miniz_oxide"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2d80299ef12ff69b16a84bb182e3b9df68b5a91574d3d4fa6e41b65deec4df1"
dependencies = [
 "adler2",
 "simd-adler32",
]

[[package]]
name = "mint"
version = "0.5.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e53debba6bda7a793e5f99b8dacf19e626084f525f7829104ba9898f367d85ff"

[[package]]
name = "mio"
version = "0.8.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a4a650543ca06a924e8b371db273b2756685faae30f8487da1b56505a8f78b0c"
dependencies = [
 "libc",
 "log",
 "wasi",
 "windows-sys 0.48.0",
]

[[package]]
name = "mio"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "80e04d1dcff3aae0704555fe5fee3bcfaf3d1fdf8a7e521d5b9d2b42acb52cec"
dependencies = [
 "hermit-abi",
 "libc",
 "wasi",
 "windows-sys 0.52.0",
]

[[package]]
name = "naga"
version = "0.12.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbcc2e0513220fd2b598e6068608d4462db20322c0e77e47f6f488dfcfc279cb"
dependencies = [
 "bit-set",
 "bitflags 1.3.2",
 "codespan-reporting",
 "hexf-parse",
 "indexmap 1.9.3",
 "log",
 "num-traits",
 "pp-rs",
 "rustc-hash 1.1.0",
 "spirv",
 "termcolor",
 "thiserror 1.0.64",
 "unicode-xid",
]

[[package]]
name = "naga_oil"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8be942a5c21c58b9b0bf4d9b99db3634ddb7a916f8e1d1d0b71820cc4150e56b"
dependencies = [
 "bit-set",
 "codespan-reporting",
 "data-encoding",
 "indexmap 1.9.3",
 "naga",
 "once_cell",
 "regex",
 "regex-syntax 0.6.29",
 "rustc-hash 1.1.0",
 "thiserror 1.0.64",
 "tracing",
 "unicode-ident",
]

[[package]]
name = "nalgebra"
version = "0.32.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7b5c17de023a86f59ed79891b2e5d5a94c705dbe904a5b5c9c952ea6221b03e4"
dependencies = [
 "approx",
 "glam 0.24.2",
 "matrixmultiply",
 "nalgebra-macros",
 "num-complex",
 "num-rational",
 "num-traits",
 "simba",
 "typenum",
]

[[package]]
name = "nalgebra-macros"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "254a5372af8fc138e36684761d3c0cdb758a4410e938babcff1c860ce14ddbfc"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "nanorand"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6a51313c5820b0b02bd422f4b44776fbf47961755c74ce64afc73bfad10226c3"
dependencies = [
 "getrandom",
]

[[package]]
name = "natord"
version = "1.0.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "308d96db8debc727c3fd9744aac51751243420e46edf401010908da7f8d5e57c"

[[package]]
name = "ndk"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "451422b7e4718271c8b5b3aadf5adedba43dc76312454b387e98fae0fc951aa0"
dependencies = [
 "bitflags 1.3.2",
 "jni-sys",
 "ndk-sys 0.4.1+23.1.7779620",
 "num_enum 0.5.11",
 "raw-window-handle",
 "thiserror 1.0.64",
]

[[package]]
name = "ndk"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2076a31b7010b17a38c01907c45b945e8f11495ee4dd588309718901b1f7a5b7"
dependencies = [
 "bitflags 2.6.0",
 "jni-sys",
 "log",
 "ndk-sys 0.5.0+25.2.9519653",
 "num_enum 0.7.3",
 "thiserror 1.0.64",
]

[[package]]
name = "ndk-context"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "27b02d87554356db9e9a873add8782d4ea6e3e58ea071a9adb9a2e8ddb884a8b"

[[package]]
name = "ndk-sys"
version = "0.4.1+23.1.7779620"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3cf2aae958bd232cac5069850591667ad422d263686d75b52a065f9badeee5a3"
dependencies = [
 "jni-sys",
]

[[package]]
name = "ndk-sys"
version = "0.5.0+25.2.9519653"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8c196769dd60fd4f363e11d948139556a344e79d451aeb2fa2fd040738ef7691"
dependencies = [
 "jni-sys",
]

[[package]]
name = "netdev"
version = "0.31.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f901362e84cd407be6f8cd9d3a46bccf09136b095792785401ea7d283c79b91d"
dependencies = [
 "dlopen2",
 "ipnet",
 "libc",
 "netlink-packet-core",
 "netlink-packet-route 0.17.1",
 "netlink-sys",
 "once_cell",
 "system-configuration",
 "windows-sys 0.52.0",
]

[[package]]
name = "netlink-packet-core"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72724faf704479d67b388da142b186f916188505e7e0b26719019c525882eda4"
dependencies = [
 "anyhow",
 "byteorder",
 "netlink-packet-utils",
]

[[package]]
name = "netlink-packet-route"
version = "0.17.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "053998cea5a306971f88580d0829e90f270f940befd7cf928da179d4187a5a66"
dependencies = [
 "anyhow",
 "bitflags 1.3.2",
 "byteorder",
 "libc",
 "netlink-packet-core",
 "netlink-packet-utils",
]

[[package]]
name = "netlink-packet-route"
version = "0.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "74c171cd77b4ee8c7708da746ce392440cb7bcf618d122ec9ecc607b12938bf4"
dependencies = [
 "anyhow",
 "byteorder",
 "libc",
 "log",
 "netlink-packet-core",
 "netlink-packet-utils",
]

[[package]]
name = "netlink-packet-route"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "483325d4bfef65699214858f097d504eb812c38ce7077d165f301ec406c3066e"
dependencies = [
 "anyhow",
 "bitflags 2.6.0",
 "byteorder",
 "libc",
 "log",
 "netlink-packet-core",
 "netlink-packet-utils",
]

[[package]]
name = "netlink-packet-utils"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0ede8a08c71ad5a95cdd0e4e52facd37190977039a4704eb82a283f713747d34"
dependencies = [
 "anyhow",
 "byteorder",
 "paste",
 "thiserror 1.0.64",
]

[[package]]
name = "netlink-proto"
version = "0.11.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "86b33524dc0968bfad349684447bfce6db937a9ac3332a1fe60c0c5a5ce63f21"
dependencies = [
 "bytes",
 "futures",
 "log",
 "netlink-packet-core",
 "netlink-sys",
 "thiserror 1.0.64",
 "tokio",
]

[[package]]
name = "netlink-sys"
version = "0.8.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "416060d346fbaf1f23f9512963e3e878f1a78e707cb699ba9215761754244307"
dependencies = [
 "bytes",
 "futures",
 "libc",
 "log",
 "tokio",
]

[[package]]
name = "netwatch"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "304c0c1b348830b016039f2cb1c5ac8217084a78875262c5594925dd08aa77fc"
dependencies = [
 "anyhow",
 "atomic-waker",
 "bytes",
 "derive_more",
 "futures-lite 2.6.0",
 "futures-sink",
 "futures-util",
 "iroh-quinn-udp",
 "libc",
 "netdev",
 "netlink-packet-core",
 "netlink-packet-route 0.19.0",
 "netlink-sys",
 "once_cell",
 "rtnetlink 0.13.1",
 "rtnetlink 0.14.1",
 "serde",
 "socket2 0.5.7",
 "thiserror 2.0.12",
 "time",
 "tokio",
 "tokio-util",
 "tracing",
 "windows 0.58.0",
 "wmi",
]

[[package]]
name = "nix"
version = "0.26.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "598beaf3cc6fdd9a5dfb1630c2800c7acd31df7aaf0f565796fba2b53ca1af1b"
dependencies = [
 "bitflags 1.3.2",
 "cfg-if",
 "libc",
]

[[package]]
name = "nix"
version = "0.27.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2eb04e9c688eff1c89d72b407f168cf79bb9e867a9d3323ed6c01519eb9cc053"
dependencies = [
 "bitflags 2.6.0",
 "cfg-if",
 "libc",
]

[[package]]
name = "nix"
version = "0.29.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "71e2746dc3a24dd78b3cfcb7be93368c6de9963d30f43a6a73998a9cf4b17b46"
dependencies = [
 "bitflags 2.6.0",
 "cfg-if",
 "cfg_aliases 0.2.1",
 "libc",
]

[[package]]
name = "no-std-compat"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b93853da6d84c2e3c7d730d6473e8817692dd89be387eb01b94d7f108ecb5b8c"

[[package]]
name = "no-std-net"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "43794a0ace135be66a25d3ae77d41b91615fb68ae937f904090203e81f755b65"

[[package]]
name = "nohash-hasher"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2bf50223579dc7cdcfb3bfcacf7069ff68243f8c363f62ffa99cf000a6b9c451"

[[package]]
name = "noise"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6da45c8333f2e152fc665d78a380be060eb84fad8ca4c9f7ac8ca29216cff0cc"
dependencies = [
 "num-traits",
 "rand",
 "rand_xorshift",
]

[[package]]
name = "nom"
version = "7.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d273983c5a657a70a3e8f2a01329822f3b8c8172b73826411a55751e404a0a4a"
dependencies = [
 "memchr",
 "minimal-lexical",
]

[[package]]
name = "nonzero_ext"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "38bf9645c8b145698bb0b18a4637dcacbc421ea49bef2317e4fd8065a387cf21"

[[package]]
name = "notify"
version = "6.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6205bd8bb1e454ad2e27422015fb5e4f2bcc7e08fa8f27058670d208324a4d2d"
dependencies = [
 "bitflags 2.6.0",
 "crossbeam-channel",
 "filetime",
 "fsevent-sys",
 "inotify 0.9.6",
 "kqueue",
 "libc",
 "log",
 "mio 0.8.11",
 "walkdir",
 "windows-sys 0.48.0",
]

[[package]]
name = "ntapi"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e8a3895c6391c39d7fe7ebc444a87eb2991b2a0bc718fdabd071eec617fc68e4"
dependencies = [
 "winapi",
]

[[package]]
name = "nu-ansi-term"
version = "0.46.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "77a8165726e8236064dbb45459242600304b42a5ea24ee2948e18e023bf7ba84"
dependencies = [
 "overload",
 "winapi",
]

[[package]]
name = "num-bigint"
version = "0.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a5e44f723f1133c9deac646763579fdb3ac745e418f2a7af9cd0c431da1f20b9"
dependencies = [
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-bigint-dig"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc84195820f291c7697304f3cbdadd1cb7199c0efc917ff5eafd71225c136151"
dependencies = [
 "byteorder",
 "lazy_static",
 "libm",
 "num-integer",
 "num-iter",
 "num-traits",
 "rand",
 "smallvec",
 "zeroize",
]

[[package]]
name = "num-complex"
version = "0.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "73f88a1307638156682bada9d7604135552957b7818057dcef22705b4d509495"
dependencies = [
 "num-traits",
]

[[package]]
name = "num-conv"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "51d515d32fb182ee37cda2ccdcb92950d6a3c2893aa280e540671c2cd0f3b1d9"

[[package]]
name = "num-derive"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed3955f1a9c7c0c15e092f9c887db08b1fc683305fdf6eb6684f22555355e202"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "num-integer"
version = "0.1.46"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7969661fd2958a5cb096e56c8e1ad0444ac2bbcd0061bd28660485a44879858f"
dependencies = [
 "num-traits",
]

[[package]]
name = "num-iter"
version = "0.1.45"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1429034a0490724d0075ebb2bc9e875d6503c3cf69e235a8941aa757d83ef5bf"
dependencies = [
 "autocfg",
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-rational"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f83d14da390562dca69fc84082e73e548e1ad308d24accdedd2720017cb37824"
dependencies = [
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-traits"
version = "0.2.19"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "071dfc062690e90b734c0b2273ce72ad0ffa95f0c74596bc250dcfd960262841"
dependencies = [
 "autocfg",
 "libm",
]

[[package]]
name = "num_enum"
version = "0.5.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1f646caf906c20226733ed5b1374287eb97e3c2a5c227ce668c1f2ce20ae57c9"
dependencies = [
 "num_enum_derive 0.5.11",
]

[[package]]
name = "num_enum"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a015b430d3c108a207fd776d2e2196aaf8b1cf8cf93253e3a097ff3085076a1"
dependencies = [
 "num_enum_derive 0.6.1",
]

[[package]]
name = "num_enum"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4e613fc340b2220f734a8595782c551f1250e969d87d3be1ae0579e8d4065179"
dependencies = [
 "num_enum_derive 0.7.3",
]

[[package]]
name = "num_enum_derive"
version = "0.5.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dcbff9bc912032c62bf65ef1d5aea88983b420f4f839db1e9b0c281a25c9c799"
dependencies = [
 "proc-macro-crate 1.3.1",
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "num_enum_derive"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "96667db765a921f7b295ffee8b60472b686a51d4f21c2ee4ffdb94c7013b65a6"
dependencies = [
 "proc-macro-crate 1.3.1",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "num_enum_derive"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "af1844ef2428cc3e1cb900be36181049ef3d3193c63e43026cfe202983b27a56"
dependencies = [
 "proc-macro-crate 3.2.0",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "num_threads"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5c7398b9c8b70908f6371f47ed36737907c87c52af34c268fed0bf0ceb92ead9"
dependencies = [
 "libc",
]

[[package]]
name = "numquant"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "54809e43d79aa532432c0d03c6adf62fdd96f2e152b90cef6cd9a316c3da4d99"

[[package]]
name = "objc"
version = "0.2.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "915b1b472bc21c53464d6c8461c9d3af805ba1ef837e1cac254428f4a77177b1"
dependencies = [
 "malloc_buf",
 "objc_exception",
]

[[package]]
name = "objc-sys"
version = "0.2.0-beta.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df3b9834c1e95694a05a828b59f55fa2afec6288359cda67146126b3f90a55d7"

[[package]]
name = "objc-sys"
version = "0.3.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cdb91bdd390c7ce1a8607f35f3ca7151b65afc0ff5ff3b34fa350f7d7c7e4310"

[[package]]
name = "objc2"
version = "0.3.0-beta.3.patch-leaks.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7e01640f9f2cb1220bbe80325e179e532cb3379ebcd1bf2279d703c19fe3a468"
dependencies = [
 "block2 0.2.0-alpha.6",
 "objc-sys 0.2.0-beta.2",
 "objc2-encode 2.0.0-pre.2",
]

[[package]]
name = "objc2"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "46a785d4eeff09c14c487497c162e92766fbb3e4059a71840cecc03d9a50b804"
dependencies = [
 "objc-sys 0.3.5",
 "objc2-encode 4.0.3",
]

[[package]]
name = "objc2-app-kit"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e4e89ad9e3d7d297152b17d39ed92cd50ca8063a89a9fa569046d41568891eff"
dependencies = [
 "bitflags 2.6.0",
 "block2 0.5.1",
 "libc",
 "objc2 0.5.2",
 "objc2-core-data",
 "objc2-core-image",
 "objc2-foundation",
 "objc2-quartz-core",
]

[[package]]
name = "objc2-core-data"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "617fbf49e071c178c0b24c080767db52958f716d9eabdf0890523aeae54773ef"
dependencies = [
 "bitflags 2.6.0",
 "block2 0.5.1",
 "objc2 0.5.2",
 "objc2-foundation",
]

[[package]]
name = "objc2-core-image"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "55260963a527c99f1819c4f8e3b47fe04f9650694ef348ffd2227e8196d34c80"
dependencies = [
 "block2 0.5.1",
 "objc2 0.5.2",
 "objc2-foundation",
 "objc2-metal",
]

[[package]]
name = "objc2-encode"
version = "2.0.0-pre.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "abfcac41015b00a120608fdaa6938c44cb983fee294351cc4bac7638b4e50512"
dependencies = [
 "objc-sys 0.2.0-beta.2",
]

[[package]]
name = "objc2-encode"
version = "4.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7891e71393cd1f227313c9379a26a584ff3d7e6e7159e988851f0934c993f0f8"

[[package]]
name = "objc2-foundation"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0ee638a5da3799329310ad4cfa62fbf045d5f56e3ef5ba4149e7452dcf89d5a8"
dependencies = [
 "bitflags 2.6.0",
 "block2 0.5.1",
 "libc",
 "objc2 0.5.2",
]

[[package]]
name = "objc2-metal"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dd0cba1276f6023976a406a14ffa85e1fdd19df6b0f737b063b95f6c8c7aadd6"
dependencies = [
 "bitflags 2.6.0",
 "block2 0.5.1",
 "objc2 0.5.2",
 "objc2-foundation",
]

[[package]]
name = "objc2-quartz-core"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e42bee7bff906b14b167da2bac5efe6b6a07e6f7c0a21a7308d40c960242dc7a"
dependencies = [
 "bitflags 2.6.0",
 "block2 0.5.1",
 "objc2 0.5.2",
 "objc2-foundation",
 "objc2-metal",
]

[[package]]
name = "objc_exception"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ad970fb455818ad6cba4c122ad012fae53ae8b4795f86378bce65e4f6bab2ca4"
dependencies = [
 "cc",
]

[[package]]
name = "object"
version = "0.36.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "084f1a5821ac4c651660a94a7153d27ac9d8a53736203f58b31945ded098070a"
dependencies = [
 "memchr",
]

[[package]]
name = "oboe"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e8b61bebd49e5d43f5f8cc7ee2891c16e0f41ec7954d36bcb6c14c5e0de867fb"
dependencies = [
 "jni 0.21.1",
 "ndk 0.8.0",
 "ndk-context",
 "num-derive",
 "num-traits",
 "oboe-sys",
]

[[package]]
name = "oboe-sys"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c8bb09a4a2b1d668170cfe0a7d5bc103f8999fb316c98099b6a9939c9f2e79d"
dependencies = [
 "cc",
]

[[package]]
name = "oid-registry"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a8d8034d9489cdaf79228eb9f6a3b8d7bb32ba00d6645ebd48eef4077ceb5bd9"
dependencies = [
 "asn1-rs",
]

[[package]]
name = "once_cell"
version = "1.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3fdb12b2476b595f9358c5161aa467c2438859caa136dec86c26fdd2efe17b92"

[[package]]
name = "once_cell_polyfill"
version = "1.70.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a4895175b425cb1f87721b59f0f286c2092bd4af812243672510e1ac53e2e0ad"

[[package]]
name = "once_map"
version = "0.4.19"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "30c7f82d6d446dd295845094f3a76bcdc5e6183b66667334e169f019cd05e5a0"
dependencies = [
 "ahash",
 "hashbrown 0.14.5",
 "parking_lot",
 "stable_deref_trait",
]

[[package]]
name = "opaque-debug"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c08d65885ee38876c4f86fa503fb49d7b507c2b62552df7c70b2fce627e06381"

[[package]]
name = "openssl-probe"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ff011a302c396a5197692431fc1948019154afc178baf7d8e37367442a4601cf"

[[package]]
name = "option-ext"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04744f49eae99ab78e0d5c0b603ab218f515ea8cfe5a456d7629ad883a3b6e7d"

[[package]]
name = "orbclient"
version = "0.3.47"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "52f0d54bde9774d3a51dcf281a5def240c71996bc6ca05d2c847ec8b2b216166"
dependencies = [
 "libredox 0.0.2",
]

[[package]]
name = "ordered-float"
version = "3.9.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f1e1c390732d15f1d48471625cd92d154e66db2c56645e29a9cd26f4699f72dc"
dependencies = [
 "num-traits",
]

[[package]]
name = "ordered-float"
version = "4.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7bb71e1b3fa6ca1c61f383464aaf2bb0e2f8e772a1f01d486832464de363b951"
dependencies = [
 "num-traits",
]

[[package]]
name = "overload"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b15813163c1d831bf4a13c3610c05c0d03b39feb07f7e09fa234dac9b15aaf39"

[[package]]
name = "owned_ttf_parser"
version = "0.24.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "490d3a563d3122bf7c911a59b0add9389e5ec0f5f0c3ac6b91ff235a0e6a7f90"
dependencies = [
 "ttf-parser",
]

[[package]]
name = "p256"
version = "0.13.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c9863ad85fa8f4460f9c48cb909d38a0d689dba1f6f6988a5e3e0d31071bcd4b"
dependencies = [
 "ecdsa",
 "elliptic-curve",
 "primeorder",
 "sha2",
]

[[package]]
name = "p384"
version = "0.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "70786f51bcc69f6a4c0360e063a4cac5419ef7c5cd5b3c99ad70f3be5ba79209"
dependencies = [
 "ecdsa",
 "elliptic-curve",
 "primeorder",
 "sha2",
]

[[package]]
name = "p521"
version = "0.13.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fc9e2161f1f215afdfce23677034ae137bbd45016a880c2eb3ba8eb95f085b2"
dependencies = [
 "base16ct",
 "ecdsa",
 "elliptic-curve",
 "primeorder",
 "rand_core",
 "sha2",
]

[[package]]
name = "parking"
version = "2.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f38d5652c16fde515bb1ecef450ab0f6a219d619a7274976324d5e377f7dceba"

[[package]]
name = "parking_lot"
version = "0.12.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f1bf18183cf54e8d6059647fc3063646a1801cf30896933ec2311622cc4b9a27"
dependencies = [
 "lock_api",
 "parking_lot_core",
]

[[package]]
name = "parking_lot_core"
version = "0.9.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1e401f977ab385c9e4e3ab30627d6f26d00e2c73eef317493c4ec6d468726cf8"
dependencies = [
 "cfg-if",
 "libc",
 "redox_syscall 0.5.6",
 "smallvec",
 "windows-targets 0.52.6",
]

[[package]]
name = "parry2d"
version = "0.15.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "41c56bf3b44b08f18a6ed01e5c6bf1a41a12efc7e8b806ce0cf50831c88f9fc8"
dependencies = [
 "approx",
 "arrayvec",
 "bitflags 1.3.2",
 "downcast-rs",
 "either",
 "indexmap 1.9.3",
 "log",
 "nalgebra",
 "num-derive",
 "num-traits",
 "rustc-hash 1.1.0",
 "simba",
 "slab",
 "smallvec",
 "spade",
]

[[package]]
name = "paste"
version = "1.0.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "57c0d7b74b563b49d38dae00a0c37d4d6de9b432382b2892f0574ddcae73fd0a"

[[package]]
name = "path-absolutize"
version = "3.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e4af381fe79fa195b4909485d99f73a80792331df0625188e707854f0b3383f5"
dependencies = [
 "path-dedot",
]

[[package]]
name = "path-dedot"
version = "3.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "07ba0ad7e047712414213ff67533e6dd477af0a4e1d14fb52343e53d30ea9397"
dependencies = [
 "once_cell",
]

[[package]]
name = "peg"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "295283b02df346d1ef66052a757869b2876ac29a6bb0ac3f5f7cd44aebe40e8f"
dependencies = [
 "peg-macros",
 "peg-runtime",
]

[[package]]
name = "peg-macros"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bdad6a1d9cf116a059582ce415d5f5566aabcd4008646779dab7fdc2a9a9d426"
dependencies = [
 "peg-runtime",
 "proc-macro2",
 "quote",
]

[[package]]
name = "peg-runtime"
version = "0.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e3aeb8f54c078314c2065ee649a7241f46b9d8e418e1a9581ba0546657d7aa3a"

[[package]]
name = "pem"
version = "3.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e459365e590736a54c3fa561947c84837534b8e9af6fc5bf781307e82658fae"
dependencies = [
 "base64 0.22.1",
 "serde",
]

[[package]]
name = "pem-rfc7468"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "88b39c9bfcfc231068454382784bb460aae594343fb030d46e9f50a645418412"
dependencies = [
 "base64ct",
]

[[package]]
name = "percent-encoding"
version = "2.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e3148f5046208a5d56bcfc03053e3ca6334e51da8dfb19b6cdc8b306fae3283e"

[[package]]
name = "pest"
version = "2.7.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fdbef9d1d47087a895abd220ed25eb4ad973a5e26f6a4367b038c25e28dfc2d9"
dependencies = [
 "memchr",
 "thiserror 1.0.64",
 "ucd-trie",
]

[[package]]
name = "pest_derive"
version = "2.7.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4d3a6e3394ec80feb3b6393c725571754c6188490265c61aaf260810d6b95aa0"
dependencies = [
 "pest",
 "pest_generator",
]

[[package]]
name = "pest_generator"
version = "2.7.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "94429506bde1ca69d1b5601962c73f4172ab4726571a59ea95931218cb0e930e"
dependencies = [
 "pest",
 "pest_meta",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "pest_meta"
version = "2.7.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ac8a071862e93690b6e34e9a5fb8e33ff3734473ac0245b27232222c4906a33f"
dependencies = [
 "once_cell",
 "pest",
 "sha2",
]

[[package]]
name = "petgraph"
version = "0.6.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b4c5cc86750666a3ed20bdaf5ca2a0344f9c67674cae0515bec2da16fbaa47db"
dependencies = [
 "fixedbitset",
 "indexmap 2.5.0",
]

[[package]]
name = "phf"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ade2d8b8f33c7333b51bcf0428d37e217e9f32192ae4772156f65063b8ce03dc"
dependencies = [
 "phf_macros",
 "phf_shared",
]

[[package]]
name = "phf_generator"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "48e4cc64c2ad9ebe670cb8fd69dd50ae301650392e81c05f9bfcb2d5bdbc24b0"
dependencies = [
 "phf_shared",
 "rand",
]

[[package]]
name = "phf_macros"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3444646e286606587e49f3bcf1679b8cef1dc2c5ecc29ddacaffc305180d464b"
dependencies = [
 "phf_generator",
 "phf_shared",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "phf_shared"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "90fcb95eef784c2ac79119d1dd819e162b5da872ce6f3c3abe1e8ca1c082f72b"
dependencies = [
 "siphasher",
]

[[package]]
name = "piccolo"
version = "0.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "003bf52de285e1ff1adcbc6572588db3849988ea660a2d55af3a2ffbc81f597f"
dependencies = [
 "ahash",
 "allocator-api2",
 "anyhow",
 "gc-arena",
 "hashbrown 0.14.5",
 "rand",
 "thiserror 1.0.64",
]

[[package]]
name = "pin-project"
version = "1.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b6bf43b791c5b9e34c3d182969b4abb522f9343702850a2e57f460d00d09b4b3"
dependencies = [
 "pin-project-internal",
]

[[package]]
name = "pin-project-internal"
version = "1.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2f38a4412a78282e09a2cf38d195ea5420d15ba0602cb375210efbc877243965"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "pin-project-lite"
version = "0.2.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bda66fc9667c18cb2758a2ac84d1167245054bcf85d5d1aaa6923f45801bdd02"

[[package]]
name = "pin-utils"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b870d8c151b6f2fb93e84a13146138f05d02ed11c7e7c54f8826aaaf7c9f184"

[[package]]
name = "ping-rs"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d873f038f84371f9c7fa13f6afea4d5f1fbcd5070ba8eb7af2a6d41c768eff8b"
dependencies = [
 "futures",
 "mio 0.8.11",
 "paste",
 "socket2 0.4.10",
 "windows 0.43.0",
]

[[package]]
name = "pkarr"
version = "2.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7945a08031b7e14de57e8385cea3bcc7e10a88701595dc11d82551ba07bae13e"
dependencies = [
 "bytes",
 "document-features",
 "dyn-clone",
 "ed25519-dalek",
 "flume",
 "futures",
 "js-sys",
 "lru",
 "mainline",
 "self_cell 1.0.4",
 "simple-dns",
 "thiserror 1.0.64",
 "tracing",
 "ureq",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
 "z32",
]

[[package]]
name = "pkcs1"
version = "0.7.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c8ffb9f10fa047879315e6625af03c164b16962a5368d724ed16323b68ace47f"
dependencies = [
 "der",
 "pkcs8",
 "spki",
]

[[package]]
name = "pkcs8"
version = "0.10.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f950b2377845cebe5cf8b5165cb3cc1a5e0fa5cfa3e1f7f55707d8fd82e0a7b7"
dependencies = [
 "der",
 "spki",
]

[[package]]
name = "pkg-config"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "953ec861398dccce10c670dfeaf3ec4911ca479e9c02154b3a215178c5f566f2"

[[package]]
name = "pnet_base"
version = "0.34.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fe4cf6fb3ab38b68d01ab2aea03ed3d1132b4868fa4e06285f29f16da01c5f4c"
dependencies = [
 "no-std-net",
]

[[package]]
name = "pnet_macros"
version = "0.34.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "688b17499eee04a0408aca0aa5cba5fc86401d7216de8a63fdf7a4c227871804"
dependencies = [
 "proc-macro2",
 "quote",
 "regex",
 "syn 2.0.101",
]

[[package]]
name = "pnet_macros_support"
version = "0.34.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eea925b72f4bd37f8eab0f221bbe4c78b63498350c983ffa9dd4bcde7e030f56"
dependencies = [
 "pnet_base",
]

[[package]]
name = "pnet_packet"
version = "0.34.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a9a005825396b7fe7a38a8e288dbc342d5034dac80c15212436424fef8ea90ba"
dependencies = [
 "glob",
 "pnet_base",
 "pnet_macros",
 "pnet_macros_support",
]

[[package]]
name = "png"
version = "0.17.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "52f9d46a34a05a6a57566bc2bfae066ef07585a6e3fa30fbbdff5936380623f0"
dependencies = [
 "bitflags 1.3.2",
 "crc32fast",
 "fdeflate",
 "flate2",
 "miniz_oxide",
]

[[package]]
name = "polling"
version = "2.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4b2d323e8ca7996b3e23126511a523f7e62924d93ecd5ae73b333815b0eb3dce"
dependencies = [
 "autocfg",
 "bitflags 1.3.2",
 "cfg-if",
 "concurrent-queue",
 "libc",
 "log",
 "pin-project-lite",
 "windows-sys 0.48.0",
]

[[package]]
name = "poly1305"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8159bd90725d2df49889a078b54f4f79e87f1f8a8444194cdca81d38f5393abf"
dependencies = [
 "cpufeatures",
 "opaque-debug",
 "universal-hash",
]

[[package]]
name = "portable-atomic"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cc9c68a3f6da06753e9335d63e27f6b9754dd1920d941135b7ea8224f141adb2"

[[package]]
name = "portmapper"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68ea24e7552a28ee4a3478ae116c89080957d6816526d0a533bee6cd67048279"
dependencies = [
 "anyhow",
 "base64 0.22.1",
 "bytes",
 "derive_more",
 "futures-lite 2.6.0",
 "futures-util",
 "igd-next",
 "iroh-metrics",
 "libc",
 "netwatch",
 "num_enum 0.7.3",
 "rand",
 "serde",
 "smallvec",
 "socket2 0.5.7",
 "thiserror 2.0.12",
 "time",
 "tokio",
 "tokio-util",
 "tracing",
 "url",
]

[[package]]
name = "postcard"
version = "1.0.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5f7f0a8d620d71c457dd1d47df76bb18960378da56af4527aaa10f515eee732e"
dependencies = [
 "cobs",
 "embedded-io 0.4.0",
 "embedded-io 0.6.1",
 "heapless",
 "postcard-derive",
 "serde",
]

[[package]]
name = "postcard-derive"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0239fa9c1d225d4b7eb69925c25c5e082307a141e470573fbbe3a817ce6a7a37"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "powerfmt"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "439ee305def115ba05938db6eb1644ff94165c5ab5e9420d1c1bcedbba909391"

[[package]]
name = "pp-rs"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bb458bb7f6e250e6eb79d5026badc10a3ebb8f9a15d1fff0f13d17c71f4d6dee"
dependencies = [
 "unicode-xid",
]

[[package]]
name = "ppv-lite86"
version = "0.2.20"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "77957b295656769bb8ad2b6a6b09d897d94f05c41b069aede1fcdaa675eaea04"
dependencies = [
 "zerocopy",
]

[[package]]
name = "precis-core"
version = "0.1.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "25a414cabc93f5f45d53463e73b3d89d3c5c0dc4a34dbf6901f0c6358f017203"
dependencies = [
 "precis-tools",
 "ucd-parse",
 "unicode-normalization",
]

[[package]]
name = "precis-profiles"
version = "0.1.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f58e2841ef58164e2626464d4fde67fa301d5e2c78a10300c1756312a03b169f"
dependencies = [
 "lazy_static",
 "precis-core",
 "precis-tools",
 "unicode-normalization",
]

[[package]]
name = "precis-tools"
version = "0.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "016da884bc4c2c4670211641abef402d15fa2b06c6e9088ff270dac93675aee2"
dependencies = [
 "lazy_static",
 "regex",
 "ucd-parse",
]

[[package]]
name = "primeorder"
version = "0.13.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "353e1ca18966c16d9deb1c69278edbc5f194139612772bd9537af60ac231e1e6"
dependencies = [
 "elliptic-curve",
]

[[package]]
name = "proc-macro-crate"
version = "1.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f4c021e1093a56626774e81216a4ce732a735e5bad4868a03f3ed65ca0c3919"
dependencies = [
 "once_cell",
 "toml_edit 0.19.15",
]

[[package]]
name = "proc-macro-crate"
version = "3.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8ecf48c7ca261d60b74ab1a7b20da18bede46776b2e55535cb958eb595c5fa7b"
dependencies = [
 "toml_edit 0.22.22",
]

[[package]]
name = "proc-macro-error"
version = "0.4.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "18f33027081eba0a6d8aba6d1b1c3a3be58cbb12106341c2d5759fcd9b5277e7"
dependencies = [
 "proc-macro-error-attr",
 "proc-macro2",
 "quote",
 "syn 1.0.109",
 "version_check",
]

[[package]]
name = "proc-macro-error-attr"
version = "0.4.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8a5b4b77fdb63c1eca72173d68d24501c54ab1269409f6b672c85deb18af69de"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.109",
 "syn-mid",
 "version_check",
]

[[package]]
name = "proc-macro-hack"
version = "0.5.20+deprecated"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc375e1527247fe1a97d8b7156678dfe7c1af2fc075c9a4db3690ecd2a148068"

[[package]]
name = "proc-macro2"
version = "1.0.95"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "02b3e5e68a3a1a02aad3ec490a98007cbc13c37cbe84a3cd7b8e406d76e7f778"
dependencies = [
 "unicode-ident",
]

[[package]]
name = "profiling"
version = "1.0.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "43d84d1d7a6ac92673717f9f6d1518374ef257669c24ebc5ac25d5033828be58"

[[package]]
name = "prometheus-client"
version = "0.22.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "504ee9ff529add891127c4827eb481bd69dc0ebc72e9a682e187db4caa60c3ca"
dependencies = [
 "dtoa",
 "itoa",
 "parking_lot",
 "prometheus-client-derive-encode",
]

[[package]]
name = "prometheus-client-derive-encode"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "440f724eba9f6996b75d63681b0a92b06947f1457076d503a4d2e2c8f56442b8"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "puffin"
version = "0.17.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "39009d69b9d547c3ffa974a20648fa02f447c05bd0a664012b1ba5a5b06fb14e"
dependencies = [
 "anyhow",
 "bincode",
 "byteorder",
 "cfg-if",
 "js-sys",
 "lz4_flex",
 "once_cell",
 "parking_lot",
 "serde",
 "web-time 0.2.4",
]

[[package]]
name = "puffin_egui"
version = "0.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c5af236782d21bdd5a6eb2f8cc9a91f8d601c073b7f7d568c95c26604cc12b87"
dependencies = [
 "egui",
 "indexmap 1.9.3",
 "natord",
 "once_cell",
 "puffin",
 "time",
 "vec1",
 "web-time 0.2.4",
]

[[package]]
name = "quanta"
version = "0.12.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e5167a477619228a0b284fac2674e3c388cba90631d7b7de620e6f1fcd08da5"
dependencies = [
 "crossbeam-utils",
 "libc",
 "once_cell",
 "raw-cpuid",
 "wasi",
 "web-sys",
 "winapi",
]

[[package]]
name = "quick-error"
version = "1.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a1d01941d82fa2ab50be1e79e6714289dd7cde78eba4c074bc5a4374f650dfe0"

[[package]]
name = "quinn"
version = "0.11.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8c7c5fdde3cdae7203427dc4f0a68fe0ed09833edc525a03456b153b79828684"
dependencies = [
 "bytes",
 "pin-project-lite",
 "quinn-proto",
 "quinn-udp",
 "rustc-hash 2.0.0",
 "rustls 0.23.13",
 "socket2 0.5.7",
 "thiserror 1.0.64",
 "tokio",
 "tracing",
]

[[package]]
name = "quinn-proto"
version = "0.11.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fadfaed2cd7f389d0161bb73eeb07b7b78f8691047a6f3e73caaeae55310a4a6"
dependencies = [
 "bytes",
 "rand",
 "ring",
 "rustc-hash 2.0.0",
 "rustls 0.23.13",
 "slab",
 "thiserror 1.0.64",
 "tinyvec",
 "tracing",
]

[[package]]
name = "quinn-udp"
version = "0.5.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4fe68c2e9e1a1234e218683dbdf9f9dfcb094113c5ac2b938dfcb9bab4c4140b"
dependencies = [
 "libc",
 "once_cell",
 "socket2 0.5.7",
 "tracing",
 "windows-sys 0.59.0",
]

[[package]]
name = "quote"
version = "1.0.37"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b5b9d34b8991d19d98081b46eacdd8eb58c6f2b201139f7c5f643cc155a633af"
dependencies = [
 "proc-macro2",
]

[[package]]
name = "quoted-string-parser"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0dc75379cdb451d001f1cb667a9f74e8b355e9df84cc5193513cbe62b96fc5e9"
dependencies = [
 "pest",
 "pest_derive",
]

[[package]]
name = "radium"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc33ff2d4973d518d823d61aa239014831e521c75da58e3df4840d3f47749d09"

[[package]]
name = "radsort"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "019b4b213425016d7d84a153c4c73afb0946fbb4840e4eece7ba8848b9d6da22"

[[package]]
name = "rand"
version = "0.8.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "34af8d1a0e25924bc5b7c43c079c942339d8f0a8b57c39049bef581b46327404"
dependencies = [
 "libc",
 "rand_chacha",
 "rand_core",
]

[[package]]
name = "rand_chacha"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e6c10a63a0fa32252be49d21e7709d4d4baf8d231c2dbce1eaa8141b9b127d88"
dependencies = [
 "ppv-lite86",
 "rand_core",
]

[[package]]
name = "rand_core"
version = "0.6.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ec0be4795e2f6a28069bec0b5ff3e2ac9bafc99e6a9a7dc3547996c5c816922c"
dependencies = [
 "getrandom",
]

[[package]]
name = "rand_xorshift"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d25bf25ec5ae4a3f1b92f929810509a2f53d7dca2f50b794ff57e3face536c8f"
dependencies = [
 "rand_core",
]

[[package]]
name = "range-alloc"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9c8a99fddc9f0ba0a85884b8d14e3592853e787d581ca1816c91349b10e4eeab"

[[package]]
name = "rapier2d"
version = "0.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "535b70552dc42dab9054d3d5a80e8430ced502e20acb0bf6118c344ff356f62a"
dependencies = [
 "approx",
 "arrayvec",
 "bit-vec",
 "bitflags 1.3.2",
 "crossbeam",
 "downcast-rs",
 "log",
 "nalgebra",
 "num-derive",
 "num-traits",
 "ordered-float 4.6.0",
 "parry2d",
 "rustc-hash 1.1.0",
 "simba",
]

[[package]]
name = "raw-cpuid"
version = "11.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cb9ee317cfe3fbd54b36a511efc1edd42e216903c9cd575e686dd68a2ba90d8d"
dependencies = [
 "bitflags 2.6.0",
]

[[package]]
name = "raw-window-handle"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f2ff9a1f06a88b01621b7ae906ef0211290d1c8a168a15542486a8f61c0833b9"

[[package]]
name = "rawpointer"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "60a357793950651c4ed0f3f52338f53b2f809f32d83a07f72909fa13e4c6c1e3"

[[package]]
name = "rcgen"
version = "0.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "48406db8ac1f3cbc7dcdb56ec355343817958a356ff430259bb07baf7607e1e1"
dependencies = [
 "pem",
 "ring",
 "time",
 "yasna",
]

[[package]]
name = "rcgen"
version = "0.13.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75e669e5202259b5314d1ea5397316ad400819437857b90861765f24c4cf80a2"
dependencies = [
 "pem",
 "ring",
 "rustls-pki-types",
 "time",
 "yasna",
]

[[package]]
name = "rectangle-pack"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a0d463f2884048e7153449a55166f91028d5b0ea53c79377099ce4e8cf0cf9bb"

[[package]]
name = "redox_syscall"
version = "0.3.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "567664f262709473930a4bf9e51bf2ebf3348f2e748ccc50dea20646858f8f29"
dependencies = [
 "bitflags 1.3.2",
]

[[package]]
name = "redox_syscall"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4722d768eff46b75989dd134e5c353f0d6296e5aaa3132e776cbdb56be7731aa"
dependencies = [
 "bitflags 1.3.2",
]

[[package]]
name = "redox_syscall"
version = "0.5.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "355ae415ccd3a04315d3f8246e86d67689ea74d88d915576e1589a351062a13b"
dependencies = [
 "bitflags 2.6.0",
]

[[package]]
name = "redox_users"
version = "0.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ba009ff324d1fc1b900bd1fdb31564febe58a8ccc8a6fdbb93b543d33b13ca43"
dependencies = [
 "getrandom",
 "libredox 0.1.3",
 "thiserror 1.0.64",
]

[[package]]
name = "regex"
version = "1.10.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4219d74c6b67a3654a9fbebc4b419e22126d13d2f3c4a07ee0cb61ff79a79619"
dependencies = [
 "aho-corasick",
 "memchr",
 "regex-automata 0.4.7",
 "regex-syntax 0.8.4",
]

[[package]]
name = "regex-automata"
version = "0.1.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c230d73fb8d8c1b9c0b3135c5142a8acee3a0558fb8db5cf1cb65f8d7862132"
dependencies = [
 "regex-syntax 0.6.29",
]

[[package]]
name = "regex-automata"
version = "0.4.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "38caf58cc5ef2fed281f89292ef23f6365465ed9a41b7a7754eb4e26496c92df"
dependencies = [
 "aho-corasick",
 "memchr",
 "regex-syntax 0.8.4",
]

[[package]]
name = "regex-lite"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "53a49587ad06b26609c52e423de037e7f57f20d53535d66e08c695f347df952a"

[[package]]
name = "regex-syntax"
version = "0.6.29"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f162c6dd7b008981e4d40210aca20b4bd0f9b60ca9271061b07f78537722f2e1"

[[package]]
name = "regex-syntax"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a66a03ae7c801facd77a29370b4faec201768915ac14a721ba36f20bc9c209b"

[[package]]
name = "renderdoc-sys"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "19b30a45b0cd0bcca8037f3d0dc3421eaf95327a17cad11964fb8179b4fc4832"

[[package]]
name = "reqwest"
version = "0.12.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f8f4955649ef5c38cc7f9e8aa41761d48fb9677197daea9984dc54f56aad5e63"
dependencies = [
 "base64 0.22.1",
 "bytes",
 "futures-core",
 "futures-util",
 "http 1.1.0",
 "http-body",
 "http-body-util",
 "hyper",
 "hyper-rustls",
 "hyper-util",
 "ipnet",
 "js-sys",
 "log",
 "mime",
 "once_cell",
 "percent-encoding",
 "pin-project-lite",
 "quinn",
 "rustls 0.23.13",
 "rustls-pemfile",
 "rustls-pki-types",
 "serde",
 "serde_json",
 "serde_urlencoded",
 "sync_wrapper",
 "tokio",
 "tokio-rustls",
 "tower-service",
 "url",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
 "webpki-roots",
 "windows-registry",
]

[[package]]
name = "resolv-conf"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "52e44394d2086d010551b14b53b1f24e31647570cd1deb0379e2c21b329aba00"
dependencies = [
 "hostname 0.3.1",
 "quick-error",
]

[[package]]
name = "rfc6979"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f8dd2a808d456c4a54e300a23e9f5a67e122c3024119acbfd73e3bf664491cb2"
dependencies = [
 "hmac",
 "subtle",
]

[[package]]
name = "ring"
version = "0.17.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c17fa4cb658e3583423e915b9f3acc01cceaee1860e33d59ebae66adc3a2dc0d"
dependencies = [
 "cc",
 "cfg-if",
 "getrandom",
 "libc",
 "spin",
 "untrusted",
 "windows-sys 0.52.0",
]

[[package]]
name = "ringbuf"
version = "0.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "79abed428d1fd2a128201cec72c5f6938e2da607c6f3745f769fabea399d950a"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "robust"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cbf4a6aa5f6d6888f39e980649f3ad6b666acdce1d78e95b8a2cb076e687ae30"

[[package]]
name = "ron"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b91f7eff05f748767f183df4320a63d6936e9c6107d97c9e6bdd9784f4289c94"
dependencies = [
 "base64 0.21.7",
 "bitflags 2.6.0",
 "serde",
 "serde_derive",
]

[[package]]
name = "rsa"
version = "0.9.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5d0e5124fcb30e76a7e79bfee683a2746db83784b86289f6251b54b7950a0dfc"
dependencies = [
 "const-oid",
 "digest",
 "num-bigint-dig",
 "num-integer",
 "num-traits",
 "pkcs1",
 "pkcs8",
 "rand_core",
 "sha2",
 "signature",
 "spki",
 "subtle",
 "zeroize",
]

[[package]]
name = "rtnetlink"
version = "0.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a552eb82d19f38c3beed3f786bd23aa434ceb9ac43ab44419ca6d67a7e186c0"
dependencies = [
 "futures",
 "log",
 "netlink-packet-core",
 "netlink-packet-route 0.17.1",
 "netlink-packet-utils",
 "netlink-proto",
 "netlink-sys",
 "nix 0.26.4",
 "thiserror 1.0.64",
 "tokio",
]

[[package]]
name = "rtnetlink"
version = "0.14.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b684475344d8df1859ddb2d395dd3dac4f8f3422a1aa0725993cb375fc5caba5"
dependencies = [
 "futures",
 "log",
 "netlink-packet-core",
 "netlink-packet-route 0.19.0",
 "netlink-packet-utils",
 "netlink-proto",
 "netlink-sys",
 "nix 0.27.1",
 "thiserror 1.0.64",
 "tokio",
]

[[package]]
name = "rustc-demangle"
version = "0.1.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "719b953e2095829ee67db738b3bfa9fa368c94900df327b3f07fe6e794d2fe1f"

[[package]]
name = "rustc-hash"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08d43f7aa6b08d49f382cde6a7982047c3426db949b1424bc4b7ec9ae12c6ce2"

[[package]]
name = "rustc-hash"
version = "2.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "583034fd73374156e66797ed8e5b0d5690409c9226b22d87cb7f19821c05d152"

[[package]]
name = "rustc_version"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cfcb3a22ef46e85b45de6ee7e79d063319ebb6594faafcf1c225ea92ab6e9b92"
dependencies = [
 "semver",
]

[[package]]
name = "rusticata-macros"
version = "4.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "faf0c4a6ece9950b9abdb62b1cfcf2a68b3b67a10ba445b3bb85be2a293d0632"
dependencies = [
 "nom",
]

[[package]]
name = "rustix"
version = "0.38.37"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8acb788b847c24f28525660c4d7758620a7210875711f79e7f663cc152726811"
dependencies = [
 "bitflags 2.6.0",
 "errno",
 "libc",
 "linux-raw-sys",
 "windows-sys 0.52.0",
]

[[package]]
name = "rustls"
version = "0.21.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f56a14d1f48b391359b22f731fd4bd7e43c97f3c50eee276f3aa09c94784d3e"
dependencies = [
 "log",
 "ring",
 "rustls-webpki 0.101.7",
 "sct",
]

[[package]]
name = "rustls"
version = "0.23.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f2dabaac7466917e566adb06783a81ca48944c6898a1b08b9374106dd671f4c8"
dependencies = [
 "log",
 "once_cell",
 "ring",
 "rustls-pki-types",
 "rustls-webpki 0.102.8",
 "subtle",
 "zeroize",
]

[[package]]
name = "rustls-native-certs"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e5bfb394eeed242e909609f56089eecfe5fda225042e8b171791b9c95f5931e5"
dependencies = [
 "openssl-probe",
 "rustls-pemfile",
 "rustls-pki-types",
 "schannel",
 "security-framework",
]

[[package]]
name = "rustls-pemfile"
version = "2.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "196fe16b00e106300d3e45ecfcb764fa292a535d7326a29a5875c579c7417425"
dependencies = [
 "base64 0.22.1",
 "rustls-pki-types",
]

[[package]]
name = "rustls-pki-types"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0e696e35370c65c9c541198af4543ccd580cf17fc25d8e05c5a242b202488c55"

[[package]]
name = "rustls-platform-verifier"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "afbb878bdfdf63a336a5e63561b1835e7a8c91524f51621db870169eac84b490"
dependencies = [
 "core-foundation 0.9.4",
 "core-foundation-sys",
 "jni 0.19.0",
 "log",
 "once_cell",
 "rustls 0.23.13",
 "rustls-native-certs",
 "rustls-platform-verifier-android",
 "rustls-webpki 0.102.8",
 "security-framework",
 "security-framework-sys",
 "webpki-roots",
 "winapi",
]

[[package]]
name = "rustls-platform-verifier-android"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f87165f0995f63a9fbeea62b64d10b4d9d8e78ec6d7d51fb2125fda7bb36788f"

[[package]]
name = "rustls-webpki"
version = "0.101.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b6275d1ee7a1cd780b64aca7726599a1dbc893b1e64144529e55c3c2f745765"
dependencies = [
 "ring",
 "untrusted",
]

[[package]]
name = "rustls-webpki"
version = "0.102.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "64ca1bc8749bd4cf37b5ce386cc146580777b4e8572c7b97baf22c83f444bee9"
dependencies = [
 "ring",
 "rustls-pki-types",
 "untrusted",
]

[[package]]
name = "rustversion"
version = "1.0.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "955d28af4278de8121b7ebeb796b6a45735dc01436d898801014aced2773a3d6"

[[package]]
name = "ryu"
version = "1.0.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f3cb5ba0dc43242ce17de99c180e96db90b235b8a9fdc9543c96d2209116bd9f"

[[package]]
name = "safe_arch"
version = "0.7.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c3460605018fdc9612bce72735cba0d27efbcd9904780d44c7e3a9948f96148a"
dependencies = [
 "bytemuck",
]

[[package]]
name = "salsa20"
version = "0.10.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "97a22f5af31f73a954c10289c93e8a50cc23d971e80ee446f1f6f7137a088213"
dependencies = [
 "cipher",
]

[[package]]
name = "same-file"
version = "1.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "93fc1dc3aaa9bfed95e02e6eadabb4baf7e3078b0bd1b4d7b6b0b68378900502"
dependencies = [
 "winapi-util",
]

[[package]]
name = "schannel"
version = "0.1.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e9aaafd5a2b6e3d657ff009d82fbd630b6bd54dd4eb06f21693925cdf80f9b8b"
dependencies = [
 "windows-sys 0.59.0",
]

[[package]]
name = "scoped-tls"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e1cf6437eb19a8f4a6cc0f7dca544973b0b78843adbfeb3683d1a94a0024a294"

[[package]]
name = "scopeguard"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "94143f37725109f92c262ed2cf5e59bce7498c01bcc1502d7b9afe439a4e9f49"

[[package]]
name = "sct"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "da046153aa2352493d6cb7da4b6e5c0c057d8a1d0a9aa8560baffdd945acd414"
dependencies = [
 "ring",
 "untrusted",
]

[[package]]
name = "sec1"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d3e97a565f76233a6003f9f5c54be1d9c5bdfa3eccfb189469f11ec4901c47dc"
dependencies = [
 "base16ct",
 "der",
 "generic-array",
 "pkcs8",
 "subtle",
 "zeroize",
]

[[package]]
name = "security-framework"
version = "2.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "897b2245f0b511c87893af39b033e5ca9cce68824c4d7e7630b5a1d339658d02"
dependencies = [
 "bitflags 2.6.0",
 "core-foundation 0.9.4",
 "core-foundation-sys",
 "libc",
 "num-bigint",
 "security-framework-sys",
]

[[package]]
name = "security-framework-sys"
version = "2.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ea4a292869320c0272d7bc55a5a6aafaff59b4f63404a003887b679a2e05b4b6"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "self_cell"
version = "0.10.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e14e4d63b804dc0c7ec4a1e52bcb63f02c7ac94476755aa579edac21e01f915d"
dependencies = [
 "self_cell 1.0.4",
]

[[package]]
name = "self_cell"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d369a96f978623eb3dc28807c4852d6cc617fed53da5d3c400feff1ef34a714a"

[[package]]
name = "semver"
version = "1.0.23"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "61697e0a1c7e512e84a621326239844a24d8207b4669b41bc18b32ea5cbf988b"
dependencies = [
 "serde",
]

[[package]]
name = "send_wrapper"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cd0b0ec5f1c1ca621c432a25813d8d60c88abe6d3e08a3eb9cf37d97a0fe3d73"

[[package]]
name = "serde"
version = "1.0.210"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c8e3592472072e6e22e0a54d5904d9febf8508f65fb8552499a1abc7d1078c3a"
dependencies = [
 "serde_derive",
]

[[package]]
name = "serde_bencode"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a70dfc7b7438b99896e7f8992363ab8e2c4ba26aa5ec675d32d1c3c2c33d413e"
dependencies = [
 "serde",
 "serde_bytes",
]

[[package]]
name = "serde_bytes"
version = "0.11.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "387cc504cb06bb40a96c8e04e951fe01854cf6bc921053c954e4a606d9675c6a"
dependencies = [
 "serde",
]

[[package]]
name = "serde_derive"
version = "1.0.210"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "243902eda00fad750862fc144cea25caca5e20d615af0a81bee94ca738f1df1f"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "serde_json"
version = "1.0.128"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6ff5456707a1de34e7e37f2a6fd3d3f808c318259cbd01ab6377795054b483d8"
dependencies = [
 "itoa",
 "memchr",
 "ryu",
 "serde",
]

[[package]]
name = "serde_spanned"
version = "0.6.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87607cb1398ed59d48732e575a4c28a7a8ebf2454b964fe3f224f2afc07909e1"
dependencies = [
 "serde",
]

[[package]]
name = "serde_urlencoded"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d3491c14715ca2294c4d6a88f15e84739788c1d030eed8c110436aafdaa2f3fd"
dependencies = [
 "form_urlencoded",
 "itoa",
 "ryu",
 "serde",
]

[[package]]
name = "serde_yaml"
version = "0.9.34+deprecated"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6a8b1a1a2ebf674015cc02edccce75287f1a0130d394307b36743c2f5d504b47"
dependencies = [
 "indexmap 2.5.0",
 "itoa",
 "ryu",
 "serde",
 "unsafe-libyaml",
]

[[package]]
name = "serdect"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a84f14a19e9a014bb9f4512488d9829a68e04ecabffb0f9904cd1ace94598177"
dependencies = [
 "base16ct",
 "serde",
]

[[package]]
name = "sha1"
version = "0.10.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e3bf829a2d51ab4a5ddf1352d8470c140cadc8301b2ae1789db023f01cedd6ba"
dependencies = [
 "cfg-if",
 "cpufeatures",
 "digest",
]

[[package]]
name = "sha1_smol"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbfa15b3dddfee50a0fff136974b3e1bde555604ba463834a7eb7deb6417705d"

[[package]]
name = "sha2"
version = "0.10.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "793db75ad2bcafc3ffa7c68b215fee268f537982cd901d132f89c6343f3a3dc8"
dependencies = [
 "cfg-if",
 "cpufeatures",
 "digest",
]

[[package]]
name = "shadow-rs"
version = "0.25.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "615d846f7174a0850dca101bca72f6913e3376a64c5fda2b965d7fc3d1ff60cb"
dependencies = [
 "const_format",
 "git2",
 "is_debug",
 "time",
 "tzdb 0.5.10",
]

[[package]]
name = "sharded-slab"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f40ca3c46823713e0d4209592e8d6e826aa57e928f09752619fc696c499637f6"
dependencies = [
 "lazy_static",
]

[[package]]
name = "shiftnanigans"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6be970296dbe13c440eef6388432829086db233595a703aa1d7ade5fde49a61f"
dependencies = [
 "bitvec",
 "fastrand 1.9.0",
 "itertools",
 "log",
 "nohash-hasher",
]

[[package]]
name = "shlex"
version = "1.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fda2ff0d084019ba4d7c6f371c95d8fd75ce3524c3cb8fb653a3023f6323e64"

[[package]]
name = "signal-hook-registry"
version = "1.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a9e9e0b4211b72e7b8b6e85c807d36c212bdb33ea8587f7569562a84df5465b1"
dependencies = [
 "libc",
]

[[package]]
name = "signature"
version = "2.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "77549399552de45a898a580c1b41d445bf730df867cc44e6c0233bbc4b8329de"
dependencies = [
 "digest",
 "rand_core",
]

[[package]]
name = "simba"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "061507c94fc6ab4ba1c9a0305018408e312e17c041eb63bef8aa726fa33aceae"
dependencies = [
 "approx",
 "libm",
 "num-complex",
 "num-traits",
 "paste",
 "wide",
]

[[package]]
name = "simd-adler32"
version = "0.3.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d66dc143e6b11c1eddc06d5c423cfc97062865baf299914ab64caa38182078fe"

[[package]]
name = "simple-dns"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "01607fe2e61894468c6dc0b26103abb073fb08b79a3d9e4b6d76a1a341549958"
dependencies = [
 "bitflags 2.6.0",
]

[[package]]
name = "siphasher"
version = "0.3.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "38b58827f4464d87d377d175e90bf58eb00fd8716ff0a62f80356b5e61555d0d"

[[package]]
name = "slab"
version = "0.4.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f92a496fb766b417c996b9c5e57daf2f7ad3b0bebe1ccfca4856390e3d3bb67"
dependencies = [
 "autocfg",
]

[[package]]
name = "slotmap"
version = "1.0.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dbff4acf519f630b3a3ddcfaea6c06b42174d9a44bc70c620e9ed1649d58b82a"
dependencies = [
 "version_check",
]

[[package]]
name = "smallvec"
version = "1.13.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c5e1a9a646d36c3599cd173a41282daf47c44583ad367b8e6837255952e5c67"
dependencies = [
 "serde",
]

[[package]]
name = "smol_str"
version = "0.1.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fad6c857cbab2627dcf01ec85a623ca4e7dcb5691cbaa3d7fb7653671f0d09c9"

[[package]]
name = "smol_str"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dd538fb6910ac1099850255cf94a94df6551fbdd602454387d0adb2d1ca6dead"
dependencies = [
 "serde",
]

[[package]]
name = "socket2"
version = "0.4.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9f7916fc008ca5542385b89a3d3ce689953c143e9304a9bf8beec1de48994c0d"
dependencies = [
 "libc",
 "winapi",
]

[[package]]
name = "socket2"
version = "0.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ce305eb0b4296696835b71df73eb912e0f1ffd2556a501fcede6e0c50349191c"
dependencies = [
 "libc",
 "windows-sys 0.52.0",
]

[[package]]
name = "spade"
version = "2.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "93f5ef1f863aca7d1d7dda7ccfc36a0a4279bd6d3c375176e5e0712e25cb4889"
dependencies = [
 "hashbrown 0.14.5",
 "num-traits",
 "robust",
 "smallvec",
]

[[package]]
name = "spin"
version = "0.9.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6980e8d7511241f8acf4aebddbb1ff938df5eebe98691418c4468d0b72a96a67"
dependencies = [
 "lock_api",
]

[[package]]
name = "spinning_top"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d96d2d1d716fb500937168cc09353ffdc7a012be8475ac7308e1bdf0e3923300"
dependencies = [
 "lock_api",
]

[[package]]
name = "spirv"
version = "0.2.0+1.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "246bfa38fe3db3f1dfc8ca5a2cdeb7348c78be2112740cc0ec8ef18b6d94f830"
dependencies = [
 "bitflags 1.3.2",
 "num-traits",
]

[[package]]
name = "spki"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d91ed6c858b01f942cd56b37a94b3e0a1798290327d1236e4d9cf4eaca44d29d"
dependencies = [
 "base64ct",
 "der",
]

[[package]]
name = "sptr"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b9b39299b249ad65f3b7e96443bad61c02ca5cd3589f46cb6d610a0fd6c0d6a"

[[package]]
name = "ssh-cipher"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "caac132742f0d33c3af65bfcde7f6aa8f62f0e991d80db99149eb9d44708784f"
dependencies = [
 "cipher",
 "ssh-encoding",
]

[[package]]
name = "ssh-encoding"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eb9242b9ef4108a78e8cd1a2c98e193ef372437f8c22be363075233321dd4a15"
dependencies = [
 "base64ct",
 "pem-rfc7468",
 "sha2",
]

[[package]]
name = "ssh-key"
version = "0.6.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ca9b366a80cf18bb6406f4cf4d10aebfb46140a8c0c33f666a144c5c76ecbafc"
dependencies = [
 "ed25519-dalek",
 "p256",
 "p384",
 "p521",
 "rand_core",
 "rsa",
 "sec1",
 "sha2",
 "signature",
 "ssh-cipher",
 "ssh-encoding",
 "subtle",
 "zeroize",
]

[[package]]
name = "stable_deref_trait"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a8f112729512f8e442d81f95a8a7ddf2b7c6b8a1a6f509a95864142b30cab2d3"

[[package]]
name = "static_assertions"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a2eb9349b6444b326872e140eb1cf5e7c522154d69e7a0ffb0fb81c06b37543f"

[[package]]
name = "strsim"
version = "0.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7da8b5736845d9f2fcb837ea5d9e2628564b3b043a70948a3f0b778838c5fb4f"

[[package]]
name = "struct_iterable"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "849a064c6470a650b72e41fa6c057879b68f804d113af92900f27574828e7712"
dependencies = [
 "struct_iterable_derive",
 "struct_iterable_internal",
]

[[package]]
name = "struct_iterable_derive"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8bb939ce88a43ea4e9d012f2f6b4cc789deb2db9d47bad697952a85d6978662c"
dependencies = [
 "erased-serde 0.3.31",
 "proc-macro2",
 "quote",
 "struct_iterable_internal",
 "syn 2.0.101",
]

[[package]]
name = "struct_iterable_internal"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e9426b2a0c03e6cc2ea8dbc0168dbbf943f88755e409fb91bcb8f6a268305f4a"

[[package]]
name = "strum"
version = "0.25.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "290d54ea6f91c969195bdbcd7442c8c2a2ba87da8bf60a7ee86a235d4bc1e125"
dependencies = [
 "strum_macros 0.25.3",
]

[[package]]
name = "strum"
version = "0.26.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8fec0f0aef304996cf250b31b5a10dee7980c85da9d759361292b8bca5a18f06"
dependencies = [
 "strum_macros 0.26.4",
]

[[package]]
name = "strum_macros"
version = "0.25.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "23dc1fa9ac9c169a78ba62f0b841814b7abae11bdd047b9c58f893439e309ea0"
dependencies = [
 "heck 0.4.1",
 "proc-macro2",
 "quote",
 "rustversion",
 "syn 2.0.101",
]

[[package]]
name = "strum_macros"
version = "0.26.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4c6bee85a5a24955dc440386795aa378cd9cf82acd5f764469152d2270e581be"
dependencies = [
 "heck 0.5.0",
 "proc-macro2",
 "quote",
 "rustversion",
 "syn 2.0.101",
]

[[package]]
name = "stun-rs"
version = "0.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0adebf9fb8fba5c39ee34092b0383f247e4d1255b98fcffec94b4b797b85b677"
dependencies = [
 "base64 0.22.1",
 "bounded-integer",
 "byteorder",
 "crc",
 "enumflags2",
 "fallible-iterator",
 "hmac-sha1",
 "hmac-sha256",
 "hostname-validator",
 "lazy_static",
 "md5",
 "paste",
 "precis-core",
 "precis-profiles",
 "quoted-string-parser",
 "rand",
]

[[package]]
name = "subtle"
version = "2.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "13c2bddecc57b384dee18652358fb23172facb8a2c51ccc10d74c157bdea3292"

[[package]]
name = "surge-ping"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "efbf95ce4c7c5b311d2ce3f088af2b93edef0f09727fa50fbe03c7a979afce77"
dependencies = [
 "hex",
 "parking_lot",
 "pnet_packet",
 "rand",
 "socket2 0.5.7",
 "thiserror 1.0.64",
 "tokio",
 "tracing",
]

[[package]]
name = "svg_fmt"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "20e16a0f46cf5fd675563ef54f26e83e20f2366bcf027bcb3cc3ed2b98aaf2ca"

[[package]]
name = "svgtypes"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22975e8a2bac6a76bb54f898a6b18764633b00e780330f0b689f65afb3975564"
dependencies = [
 "siphasher",
]

[[package]]
name = "swarm-discovery"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "39769914108ae68e261d85ceac7bce7095947130f79c29d4535e9b31fc702a40"
dependencies = [
 "acto",
 "anyhow",
 "hickory-proto 0.24.1",
 "rand",
 "socket2 0.5.7",
 "tokio",
 "tracing",
]

[[package]]
name = "symphonia"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "815c942ae7ee74737bb00f965fa5b5a2ac2ce7b6c01c0cc169bbeaf7abd5f5a9"
dependencies = [
 "lazy_static",
 "symphonia-codec-vorbis",
 "symphonia-core",
 "symphonia-format-ogg",
 "symphonia-metadata",
]

[[package]]
name = "symphonia-codec-vorbis"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5a98765fb46a0a6732b007f7e2870c2129b6f78d87db7987e6533c8f164a9f30"
dependencies = [
 "log",
 "symphonia-core",
 "symphonia-utils-xiph",
]

[[package]]
name = "symphonia-core"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "798306779e3dc7d5231bd5691f5a813496dc79d3f56bf82e25789f2094e022c3"
dependencies = [
 "arrayvec",
 "bitflags 1.3.2",
 "bytemuck",
 "lazy_static",
 "log",
]

[[package]]
name = "symphonia-format-ogg"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ada3505789516bcf00fc1157c67729eded428b455c27ca370e41f4d785bfa931"
dependencies = [
 "log",
 "symphonia-core",
 "symphonia-metadata",
 "symphonia-utils-xiph",
]

[[package]]
name = "symphonia-metadata"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bc622b9841a10089c5b18e99eb904f4341615d5aa55bbf4eedde1be721a4023c"
dependencies = [
 "encoding_rs",
 "lazy_static",
 "log",
 "symphonia-core",
]

[[package]]
name = "symphonia-utils-xiph"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "484472580fa49991afda5f6550ece662237b00c6f562c7d9638d1b086ed010fe"
dependencies = [
 "symphonia-core",
 "symphonia-metadata",
]

[[package]]
name = "syn"
version = "1.0.109"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72b64191b275b66ffe2469e8af2c1cfe3bafa67b529ead792a6d0160888b4237"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-ident",
]

[[package]]
name = "syn"
version = "2.0.101"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8ce2b7fc941b3a24138a0a7cf8e858bfc6a992e7978a068a5c760deb0ed43caf"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-ident",
]

[[package]]
name = "syn-mid"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fea305d57546cc8cd04feb14b62ec84bf17f50e3f7b12560d7bfa9265f39d9ed"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "sync_wrapper"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a7065abeca94b6a8a577f9bd45aa0867a2238b74e8eb67cf10d492bc39351394"
dependencies = [
 "futures-core",
]

[[package]]
name = "synstructure"
version = "0.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c8af7666ab7b6390ab78131fb5b0fce11d6b7a6951602017c35fa82800708971"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "sys-locale"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e801cf239ecd6ccd71f03d270d67dd53d13e90aab208bf4b8fe4ad957ea949b0"
dependencies = [
 "libc",
]

[[package]]
name = "sysinfo"
version = "0.29.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cd727fc423c2060f6c92d9534cef765c65a6ed3f428a03d7def74a8c4348e666"
dependencies = [
 "cfg-if",
 "core-foundation-sys",
 "libc",
 "ntapi",
 "once_cell",
 "winapi",
]

[[package]]
name = "system-configuration"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c879d448e9d986b661742763247d3693ed13609438cf3d006f51f5368a5ba6b"
dependencies = [
 "bitflags 2.6.0",
 "core-foundation 0.9.4",
 "system-configuration-sys",
]

[[package]]
name = "system-configuration-sys"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e1d1b10ced5ca923a1fcb8d03e96b8d3268065d724548c0211415ff6ac6bac4"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "tap"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "55937e1799185b12863d447f42597ed69d9928686b8d88a1df17376a097d8369"

[[package]]
name = "termcolor"
version = "1.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "06794f8f6c5c898b3275aebefa6b8a1cb24cd2c6c79397ab15774837a0bc5755"
dependencies = [
 "winapi-util",
]

[[package]]
name = "thiserror"
version = "1.0.64"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d50af8abc119fb8bb6dbabcfa89656f46f84aa0ac7688088608076ad2b459a84"
dependencies = [
 "thiserror-impl 1.0.64",
]

[[package]]
name = "thiserror"
version = "2.0.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "567b8a2dae586314f7be2a752ec7474332959c6460e02bde30d702a66d488708"
dependencies = [
 "thiserror-impl 2.0.12",
]

[[package]]
name = "thiserror-impl"
version = "1.0.64"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08904e7672f5eb876eaaf87e0ce17857500934f4981c4a0ab2b4aa98baac7fc3"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "thiserror-impl"
version = "2.0.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f7cf42b4507d8ea322120659672cf1b9dbb93f8f2d4ecfd6e51350ff5b17a1d"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "thread_local"
version = "1.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b9ef9bad013ada3808854ceac7b46812a6465ba368859a37e2100283d2d719c"
dependencies = [
 "cfg-if",
 "once_cell",
]

[[package]]
name = "tiff"
version = "0.9.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ba1310fcea54c6a9a4fd1aad794ecc02c31682f6bfbecdf460bf19533eed1e3e"
dependencies = [
 "flate2",
 "jpeg-decoder",
 "weezl",
]

[[package]]
name = "time"
version = "0.3.36"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5dfd88e563464686c916c7e46e623e520ddc6d79fa6641390f2e3fa86e83e885"
dependencies = [
 "deranged",
 "itoa",
 "libc",
 "num-conv",
 "num_threads",
 "powerfmt",
 "serde",
 "time-core",
 "time-macros",
]

[[package]]
name = "time-core"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ef927ca75afb808a4d64dd374f00a2adf8d0fcff8e7b184af886c3c87ec4a3f3"

[[package]]
name = "time-macros"
version = "0.2.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f252a68540fde3a3877aeea552b832b40ab9a69e318efd078774a01ddee1ccf"
dependencies = [
 "num-conv",
 "time-core",
]

[[package]]
name = "tinystr"
version = "0.7.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9117f5d4db391c1cf6927e7bea3db74b9a1c1add8f7eda9ffd5364f40f57b82f"
dependencies = [
 "displaydoc",
]

[[package]]
name = "tinyvec"
version = "1.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "445e881f4f6d382d5f27c034e25eb92edd7c784ceab92a0937db7f2e9471b938"
dependencies = [
 "tinyvec_macros",
]

[[package]]
name = "tinyvec_macros"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1f3ccbac311fea05f86f61904b462b55fb3df8837a366dfc601a0161d0532f20"

[[package]]
name = "tokio"
version = "1.40.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2b070231665d27ad9ec9b8df639893f46727666c6767db40317fbe920a5d998"
dependencies = [
 "backtrace",
 "bytes",
 "libc",
 "mio 1.0.2",
 "pin-project-lite",
 "signal-hook-registry",
 "socket2 0.5.7",
 "tokio-macros",
 "windows-sys 0.52.0",
]

[[package]]
name = "tokio-macros"
version = "2.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "693d596312e88961bc67d7f1f97af8a70227d9f90c31bba5806eec004978d752"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "tokio-rustls"
version = "0.26.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0c7bc40d0e5a97695bb96e27995cd3a08538541b0a846f65bba7a359f36700d4"
dependencies = [
 "rustls 0.23.13",
 "rustls-pki-types",
 "tokio",
]

[[package]]
name = "tokio-rustls-acme"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3184e8e292a828dd4bca5b2a60aba830ec5ed873a66c9ebb6e65038fa649e827"
dependencies = [
 "async-trait",
 "base64 0.22.1",
 "chrono",
 "futures",
 "log",
 "num-bigint",
 "pem",
 "proc-macro2",
 "rcgen 0.13.2",
 "reqwest",
 "ring",
 "rustls 0.23.13",
 "serde",
 "serde_json",
 "thiserror 2.0.12",
 "time",
 "tokio",
 "tokio-rustls",
 "webpki-roots",
 "x509-parser",
]

[[package]]
name = "tokio-stream"
version = "0.1.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4f4e6ce100d0eb49a2734f8c0812bcd324cf357d21810932c5df6b96ef2b86f1"
dependencies = [
 "futures-core",
 "pin-project-lite",
 "tokio",
]

[[package]]
name = "tokio-tungstenite"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c83b561d025642014097b66e6c1bb422783339e0909e4429cde4749d1990bc38"
dependencies = [
 "futures-util",
 "log",
 "tokio",
 "tungstenite 0.21.0",
]

[[package]]
name = "tokio-tungstenite"
version = "0.24.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "edc5f74e248dc973e0dbb7b74c7e0d6fcc301c694ff50049504004ef4d0cdcd9"
dependencies = [
 "futures-util",
 "log",
 "tokio",
 "tungstenite 0.24.0",
]

[[package]]
name = "tokio-tungstenite-wasm"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e57a65894797a018b28345fa298a00c450a574aa9671e50b18218a6292a55ac"
dependencies = [
 "futures-channel",
 "futures-util",
 "http 1.1.0",
 "httparse",
 "js-sys",
 "thiserror 1.0.64",
 "tokio",
 "tokio-tungstenite 0.21.0",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "tokio-util"
version = "0.7.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "61e7c3654c13bcd040d4a03abee2c75b1d14a37b423cf5a813ceae1cc903ec6a"
dependencies = [
 "bytes",
 "futures-core",
 "futures-sink",
 "futures-util",
 "hashbrown 0.14.5",
 "pin-project-lite",
 "tokio",
]

[[package]]
name = "toml"
version = "0.8.19"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a1ed1f98e3fdc28d6d910e6737ae6ab1a93bf1985935a1193e68f93eeb68d24e"
dependencies = [
 "serde",
 "serde_spanned",
 "toml_datetime",
 "toml_edit 0.22.22",
]

[[package]]
name = "toml_datetime"
version = "0.6.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0dd7358ecb8fc2f8d014bf86f6f638ce72ba252a2c3a2572f2a795f1d23efb41"
dependencies = [
 "serde",
]

[[package]]
name = "toml_edit"
version = "0.19.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1b5bb770da30e5cbfde35a2d7b9b8a2c4b8ef89548a7a6aeab5c9a576e3e7421"
dependencies = [
 "indexmap 2.5.0",
 "toml_datetime",
 "winnow 0.5.40",
]

[[package]]
name = "toml_edit"
version = "0.22.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4ae48d6208a266e853d946088ed816055e556cc6028c5e8e2b84d9fa5dd7c7f5"
dependencies = [
 "indexmap 2.5.0",
 "serde",
 "serde_spanned",
 "toml_datetime",
 "winnow 0.6.20",
]

[[package]]
name = "tower-service"
version = "0.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8df9b6e13f2d32c91b9bd719c00d1958837bc7dec474d94952798cc8e69eeec3"

[[package]]
name = "tracing"
version = "0.1.40"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c3523ab5a71916ccf420eebdf5521fcef02141234bbc0b8a49f2fdc4544364ef"
dependencies = [
 "log",
 "pin-project-lite",
 "tracing-attributes",
 "tracing-core",
]

[[package]]
name = "tracing-appender"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3566e8ce28cc0a3fe42519fc80e6b4c943cc4c8cef275620eb8dac2d3d4e06cf"
dependencies = [
 "crossbeam-channel",
 "parking_lot",
 "thiserror 1.0.64",
 "time",
 "tracing-subscriber",
]

[[package]]
name = "tracing-attributes"
version = "0.1.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "34704c8d6ebcbc939824180af020566b01a7c01f80641264eba0999f6c2b6be7"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "tracing-core"
version = "0.1.32"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c06d3da6113f116aaee68e4d601191614c9053067f9ab7f6edbcb161237daa54"
dependencies = [
 "once_cell",
 "valuable",
]

[[package]]
name = "tracing-log"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f751112709b4e791d8ce53e32c4ed2d353565a795ce84da2285393f41557bdf2"
dependencies = [
 "log",
 "once_cell",
 "tracing-core",
]

[[package]]
name = "tracing-log"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ee855f1f400bd0e5c02d150ae5de3840039a3f54b025156404e34c23c03f47c3"
dependencies = [
 "log",
 "once_cell",
 "tracing-core",
]

[[package]]
name = "tracing-subscriber"
version = "0.3.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ad0f048c97dbd9faa9b7df56362b8ebcaa52adb06b498c050d2f4e32f90a7a8b"
dependencies = [
 "matchers",
 "nu-ansi-term",
 "once_cell",
 "regex",
 "sharded-slab",
 "smallvec",
 "thread_local",
 "tracing",
 "tracing-core",
 "tracing-log 0.2.0",
]

[[package]]
name = "tracing-wasm"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4575c663a174420fa2d78f4108ff68f65bf2fbb7dd89f33749b6e826b3626e07"
dependencies = [
 "tracing",
 "tracing-subscriber",
 "wasm-bindgen",
]

[[package]]
name = "triple_buffer"
version = "8.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9e66931c8eca6381f0d34656a9341f09bd462010488c1a3bc0acd3f2d08dffce"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "try-lock"
version = "0.2.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e421abadd41a4225275504ea4d6566923418b7f05506fbc9c0fe86ba7396114b"

[[package]]
name = "ttf-parser"
version = "0.24.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5be21190ff5d38e8b4a2d3b6a3ae57f612cc39c96e83cedeaf7abc338a8bac4a"

[[package]]
name = "ttl_cache"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4189890526f0168710b6ee65ceaedf1460c48a14318ceec933cb26baa492096a"
dependencies = [
 "linked-hash-map",
]

[[package]]
name = "tungstenite"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ef1a641ea34f399a848dea702823bbecfb4c486f911735368f1f137cb8257e1"
dependencies = [
 "byteorder",
 "bytes",
 "data-encoding",
 "http 1.1.0",
 "httparse",
 "log",
 "rand",
 "sha1",
 "thiserror 1.0.64",
 "url",
 "utf-8",
]

[[package]]
name = "tungstenite"
version = "0.24.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "18e5b8366ee7a95b16d32197d0b2604b43a0be89dc5fac9f8e96ccafbaedda8a"
dependencies = [
 "byteorder",
 "bytes",
 "data-encoding",
 "http 1.1.0",
 "httparse",
 "log",
 "rand",
 "sha1",
 "thiserror 1.0.64",
 "utf-8",
]

[[package]]
name = "turborand"
version = "0.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ffa9ae3c65785079fa553e8aea4ae4b12579b5c5029b4133b54ea3afb2e3e9fa"
dependencies = [
 "getrandom",
 "instant",
]

[[package]]
name = "type-map"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "deb68604048ff8fa93347f02441e4487594adc20bb8a084f9e564d2b827a0a9f"
dependencies = [
 "rustc-hash 1.1.0",
]

[[package]]
name = "typeid"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0e13db2e0ccd5e14a544e8a246ba2312cd25223f616442d7f2cb0e3db614236e"

[[package]]
name = "typenum"
version = "1.17.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "42ff0bf0c66b8238c6f3b578df37d0b7848e55df8577b3f74f92a69acceeb825"

[[package]]
name = "tz-rs"
version = "0.6.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "33851b15c848fad2cf4b105c6bb66eb9512b6f6c44a4b13f57c53c73c707e2b4"
dependencies = [
 "const_fn",
]

[[package]]
name = "tzdb"
version = "0.5.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6a18ee5bde3433d683d41859650804a5ad89cad17f153a53f1e6a96e0da2d969"
dependencies = [
 "iana-time-zone",
 "tz-rs",
 "tzdb 0.6.1",
]

[[package]]
name = "tzdb"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1b580f6b365fa89f5767cdb619a55d534d04a4e14c2d7e5b9a31e94598687fb1"
dependencies = [
 "iana-time-zone",
 "tz-rs",
 "tzdb_data",
]

[[package]]
name = "tzdb_data"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "654c1ec546942ce0594e8d220e6b8e3899e0a0a8fe70ddd54d32a376dfefe3f8"
dependencies = [
 "tz-rs",
]

[[package]]
name = "ucd-parse"
version = "0.1.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c06ff81122fcbf4df4c1660b15f7e3336058e7aec14437c9f85c6b31a0f279b9"
dependencies = [
 "regex-lite",
]

[[package]]
name = "ucd-trie"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed646292ffc8188ef8ea4d1e0e0150fb15a5c2e12ad9b8fc191ae7a8a7f3c4b9"

[[package]]
name = "ulid"
version = "1.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04f903f293d11f31c0c29e4148f6dc0d033a7f80cebc0282bea147611667d289"
dependencies = [
 "getrandom",
 "rand",
 "web-time 1.1.0",
]

[[package]]
name = "unic-langid"
version = "0.9.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "23dd9d1e72a73b25e07123a80776aae3e7b0ec461ef94f9151eed6ec88005a44"
dependencies = [
 "unic-langid-impl",
]

[[package]]
name = "unic-langid-impl"
version = "0.9.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0a5422c1f65949306c99240b81de9f3f15929f5a8bfe05bb44b034cc8bf593e5"
dependencies = [
 "serde",
 "tinystr",
]

[[package]]
name = "unicode-bidi"
version = "0.3.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08f95100a766bf4f8f28f90d77e0a5461bbdb219042e7679bebe79004fed8d75"

[[package]]
name = "unicode-ident"
version = "1.0.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e91b56cd4cadaeb79bbf1a5645f6b4f8dc5bde8834ad5894a8db35fda9efa1fe"

[[package]]
name = "unicode-normalization"
version = "0.1.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5033c97c4262335cded6d6fc3e5c18ab755e1a3dc96376350f3d8e9f009ad956"
dependencies = [
 "tinyvec",
]

[[package]]
name = "unicode-width"
version = "0.1.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7dd6e30e90baa6f72411720665d41d89b9a3d039dc45b8faea1ddd07f617f6af"

[[package]]
name = "unicode-xid"
version = "0.2.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ebc1c04c71510c7f702b52b7c350734c9ff1295c464a03335b00bb84fc54f853"

[[package]]
name = "universal-hash"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fc1de2c688dc15305988b563c3854064043356019f97a4b46276fe734c4f07ea"
dependencies = [
 "crypto-common",
 "subtle",
]

[[package]]
name = "unsafe-libyaml"
version = "0.2.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "673aac59facbab8a9007c7f6108d11f63b603f7cabff99fabf650fea5c32b861"

[[package]]
name = "untrusted"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8ecb6da28b8a351d773b68d5825ac39017e680750f980f3a1a85cd8dd28a47c1"

[[package]]
name = "ureq"
version = "2.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b74fc6b57825be3373f7054754755f03ac3a8f5d70015ccad699ba2029956f4a"
dependencies = [
 "base64 0.22.1",
 "flate2",
 "log",
 "once_cell",
 "rustls 0.23.13",
 "rustls-pki-types",
 "url",
 "webpki-roots",
]

[[package]]
name = "url"
version = "2.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22784dbdf76fdde8af1aeda5622b546b422b6fc585325248a2bf9f5e41e94d6c"
dependencies = [
 "form_urlencoded",
 "idna 0.5.0",
 "percent-encoding",
 "serde",
]

[[package]]
name = "ustr"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b050b13c1933490b043b8238a75bc7676cb49292f49768c9350eabb284eaeb87"
dependencies = [
 "ahash",
 "byteorder",
 "lazy_static",
 "parking_lot",
]

[[package]]
name = "utf-8"
version = "0.7.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09cc8ee72d2a9becf2f2febe0205bbed8fc6615b7cb429ad062dc7b7ddd036a9"

[[package]]
name = "utf8parse"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "06abde3611657adf66d383f00b093d7faecc7fa57071cce2578660c9f1010821"

[[package]]
name = "uuid"
version = "1.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "81dfa00651efa65069b0b6b651f4aaa31ba9e3c3ce0137aaad053604ee7e0314"
dependencies = [
 "getrandom",
 "serde",
]

[[package]]
name = "valuable"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "830b7e5d4d90034032940e4ace0d9a9a057e7a45cd94e6c007832e39edb82f6d"

[[package]]
name = "varinteger"
version = "1.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7ea29db9f94ff08bb619656b8120878f280526f71dc88b5262c958a510181812"

[[package]]
name = "vcpkg"
version = "0.2.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "accd4ea62f7bb7a82fe23066fb0957d48ef677f6eeb8215f372f52e48bb32426"

[[package]]
name = "vec1"
version = "1.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eab68b56840f69efb0fefbe3ab6661499217ffdc58e2eef7c3f6f69835386322"

[[package]]
name = "vec_map"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f1bddf1187be692e79c5ffeab891132dfb0f236ed36a43c7ed39f1165ee20191"

[[package]]
name = "venial"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "61584a325b16f97b5b25fcc852eb9550843a251057a5e3e5992d2376f3df4bb2"
dependencies = [
 "proc-macro2",
 "quote",
]

[[package]]
name = "version_check"
version = "0.9.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b928f33d975fc6ad9f86c8f283853ad26bdd5b10b7f1542aa2fa15e2289105a"

[[package]]
name = "waker-fn"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "317211a0dc0ceedd78fb2ca9a44aed3d7b9b26f81870d485c07122b4350673b7"

[[package]]
name = "walkdir"
version = "2.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "29790946404f91d9c5d06f9874efddea1dc06c5efe94541a7d6863108e3a5e4b"
dependencies = [
 "same-file",
 "winapi-util",
]

[[package]]
name = "want"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bfa7760aed19e106de2c7c0b581b509f2f25d3dacaf737cb82ac61bc6d760b0e"
dependencies = [
 "try-lock",
]

[[package]]
name = "wasi"
version = "0.11.0+wasi-snapshot-preview1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423"

[[package]]
name = "wasm-bindgen"
version = "0.2.93"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a82edfc16a6c469f5f44dc7b571814045d60404b55a0ee849f9bcfa2e63dd9b5"
dependencies = [
 "cfg-if",
 "once_cell",
 "wasm-bindgen-macro",
]

[[package]]
name = "wasm-bindgen-backend"
version = "0.2.93"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9de396da306523044d3302746f1208fa71d7532227f15e347e2d93e4145dd77b"
dependencies = [
 "bumpalo",
 "log",
 "once_cell",
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-futures"
version = "0.4.43"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "61e9300f63a621e96ed275155c108eb6f843b6a26d053f122ab69724559dc8ed"
dependencies = [
 "cfg-if",
 "js-sys",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "wasm-bindgen-macro"
version = "0.2.93"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "585c4c91a46b072c92e908d99cb1dcdf95c5218eeb6f3bf1efa991ee7a68cccf"
dependencies = [
 "quote",
 "wasm-bindgen-macro-support",
]

[[package]]
name = "wasm-bindgen-macro-support"
version = "0.2.93"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "afc340c74d9005395cf9dd098506f7f44e38f2b4a21c6aaacf9a105ea5e1e836"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
 "wasm-bindgen-backend",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-shared"
version = "0.2.93"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c62a0a307cb4a311d3a07867860911ca130c3494e8c2719593806c08bc5d0484"

[[package]]
name = "watchable"
version = "1.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "45b42a2f611916b5965120a9cde2b60f2db4454826dd9ad5e6f47c24a5b3b259"
dependencies = [
 "event-listener 4.0.3",
 "futures-util",
 "parking_lot",
 "thiserror 1.0.64",
]

[[package]]
name = "wayland-scanner"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f4303d8fa22ab852f789e75a967f0a2cdc430a607751c0499bada3e451cbd53"
dependencies = [
 "proc-macro2",
 "quote",
 "xml-rs",
]

[[package]]
name = "web-sys"
version = "0.3.70"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "26fdeaafd9bd129f65e7c031593c24d62186301e0c72c8978fa1678be7d532c0"
dependencies = [
 "js-sys",
 "wasm-bindgen",
]

[[package]]
name = "web-time"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "aa30049b1c872b72c89866d458eae9f20380ab280ffd1b1e18df2d3e2d98cfe0"
dependencies = [
 "js-sys",
 "wasm-bindgen",
]

[[package]]
name = "web-time"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5a6580f308b1fad9207618087a65c04e7a10bc77e02c8e84e9b00dd4b12fa0bb"
dependencies = [
 "js-sys",
 "wasm-bindgen",
]

[[package]]
name = "webbrowser"
version = "0.8.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "db67ae75a9405634f5882791678772c94ff5f16a66535aae186e26aa0841fc8b"
dependencies = [
 "core-foundation 0.9.4",
 "home",
 "jni 0.21.1",
 "log",
 "ndk-context",
 "objc",
 "raw-window-handle",
 "url",
 "web-sys",
]

[[package]]
name = "webpki-roots"
version = "0.26.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "841c67bff177718f1d4dfefde8d8f0e78f9b6589319ba88312f567fc5841a958"
dependencies = [
 "rustls-pki-types",
]

[[package]]
name = "weezl"
version = "0.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "53a85b86a771b1c87058196170769dd264f66c0782acf1ae6cc51bfd64b39082"

[[package]]
name = "wgpu"
version = "0.16.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "480c965c9306872eb6255fa55e4b4953be55a8b64d57e61d7ff840d3dcc051cd"
dependencies = [
 "arrayvec",
 "cfg-if",
 "js-sys",
 "log",
 "naga",
 "parking_lot",
 "profiling",
 "raw-window-handle",
 "smallvec",
 "static_assertions",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
 "wgpu-core",
 "wgpu-hal",
 "wgpu-types",
]

[[package]]
name = "wgpu-core"
version = "0.16.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f478237b4bf0d5b70a39898a66fa67ca3a007d79f2520485b8b0c3dfc46f8c2"
dependencies = [
 "arrayvec",
 "bit-vec",
 "bitflags 2.6.0",
 "codespan-reporting",
 "log",
 "naga",
 "parking_lot",
 "profiling",
 "raw-window-handle",
 "rustc-hash 1.1.0",
 "smallvec",
 "thiserror 1.0.64",
 "web-sys",
 "wgpu-hal",
 "wgpu-types",
]

[[package]]
name = "wgpu-hal"
version = "0.16.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1ecb3258078e936deee14fd4e0febe1cfe9bbb5ffef165cb60218d2ee5eb4448"
dependencies = [
 "android_system_properties",
 "arrayvec",
 "ash",
 "bit-set",
 "bitflags 2.6.0",
 "block",
 "core-graphics-types",
 "d3d12",
 "foreign-types 0.3.2",
 "glow",
 "gpu-alloc",
 "gpu-allocator",
 "gpu-descriptor",
 "hassle-rs",
 "js-sys",
 "khronos-egl",
 "libc",
 "libloading 0.8.5",
 "log",
 "metal",
 "naga",
 "objc",
 "parking_lot",
 "profiling",
 "range-alloc",
 "raw-window-handle",
 "renderdoc-sys",
 "rustc-hash 1.1.0",
 "smallvec",
 "thiserror 1.0.64",
 "wasm-bindgen",
 "web-sys",
 "wgpu-types",
 "winapi",
]

[[package]]
name = "wgpu-types"
version = "0.16.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d0c153280bb108c2979eb5c7391cb18c56642dd3c072e55f52065e13e2a1252a"
dependencies = [
 "bitflags 2.6.0",
 "js-sys",
 "web-sys",
]

[[package]]
name = "wide"
version = "0.7.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b828f995bf1e9622031f8009f8481a85406ce1f4d4588ff746d872043e855690"
dependencies = [
 "bytemuck",
 "safe_arch",
]

[[package]]
name = "widestring"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7219d36b6eac893fa81e84ebe06485e7dcbb616177469b142df14f1f4deb1311"

[[package]]
name = "winapi"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5c839a674fcd7a98952e593242ea400abe93992746761e38641405d28b00f419"
dependencies = [
 "winapi-i686-pc-windows-gnu",
 "winapi-x86_64-pc-windows-gnu",
]

[[package]]
name = "winapi-i686-pc-windows-gnu"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6"

[[package]]
name = "winapi-util"
version = "0.1.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cf221c93e13a30d793f7645a0e7762c55d169dbb0a49671918a2319d289b10bb"
dependencies = [
 "windows-sys 0.59.0",
]

[[package]]
name = "winapi-x86_64-pc-windows-gnu"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f"

[[package]]
name = "windows"
version = "0.43.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04662ed0e3e5630dfa9b26e4cb823b817f1a9addda855d973a9458c236556244"
dependencies = [
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows"
version = "0.44.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9e745dab35a0c4c77aa3ce42d595e13d2003d6902d6b08c9ef5fc326d08da12b"
dependencies = [
 "windows-targets 0.42.2",
]

[[package]]
name = "windows"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e686886bc078bc1b0b600cac0147aadb815089b6e4da64016cbd754b6342700f"
dependencies = [
 "windows-implement 0.48.0",
 "windows-interface 0.48.0",
 "windows-targets 0.48.5",
]

[[package]]
name = "windows"
version = "0.54.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9252e5725dbed82865af151df558e754e4a3c2c30818359eb17465f1346a1b49"
dependencies = [
 "windows-core 0.54.0",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows"
version = "0.58.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dd04d41d93c4992d421894c18c8b43496aa748dd4c081bac0dc93eb0489272b6"
dependencies = [
 "windows-core 0.58.0",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows"
version = "0.59.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f919aee0a93304be7f62e8e5027811bbba96bcb1de84d6618be56e43f8a32a1"
dependencies = [
 "windows-core 0.59.0",
 "windows-targets 0.53.0",
]

[[package]]
name = "windows"
version = "0.61.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c5ee8f3d025738cb02bad7868bbb5f8a6327501e870bf51f1b455b0a2454a419"
dependencies = [
 "windows-collections",
 "windows-core 0.61.2",
 "windows-future",
 "windows-link",
 "windows-numerics",
]

[[package]]
name = "windows-collections"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3beeceb5e5cfd9eb1d76b381630e82c4241ccd0d27f1a39ed41b2760b255c5e8"
dependencies = [
 "windows-core 0.61.2",
]

[[package]]
name = "windows-core"
version = "0.52.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "33ab640c8d7e35bf8ba19b884ba838ceb4fba93a4e8c65a9059d08afcfc683d9"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-core"
version = "0.54.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "12661b9c89351d684a50a8a643ce5f608e20243b9fb84687800163429f161d65"
dependencies = [
 "windows-result 0.1.2",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-core"
version = "0.58.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6ba6d44ec8c2591c134257ce647b7ea6b20335bf6379a27dac5f1641fcf59f99"
dependencies = [
 "windows-implement 0.58.0",
 "windows-interface 0.58.0",
 "windows-result 0.2.0",
 "windows-strings 0.1.0",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-core"
version = "0.59.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "810ce18ed2112484b0d4e15d022e5f598113e220c53e373fb31e67e21670c1ce"
dependencies = [
 "windows-implement 0.59.0",
 "windows-interface 0.59.1",
 "windows-result 0.3.4",
 "windows-strings 0.3.1",
 "windows-targets 0.53.0",
]

[[package]]
name = "windows-core"
version = "0.61.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c0fdd3ddb90610c7638aa2b3a3ab2904fb9e5cdbecc643ddb3647212781c4ae3"
dependencies = [
 "windows-implement 0.60.0",
 "windows-interface 0.59.1",
 "windows-link",
 "windows-result 0.3.4",
 "windows-strings 0.4.2",
]

[[package]]
name = "windows-future"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fc6a41e98427b19fe4b73c550f060b59fa592d7d686537eebf9385621bfbad8e"
dependencies = [
 "windows-core 0.61.2",
 "windows-link",
 "windows-threading",
]

[[package]]
name = "windows-implement"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5e2ee588991b9e7e6c8338edf3333fbe4da35dc72092643958ebb43f0ab2c49c"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "windows-implement"
version = "0.58.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2bbd5b46c938e506ecbce286b6628a02171d56153ba733b6c741fc627ec9579b"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "windows-implement"
version = "0.59.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "83577b051e2f49a058c308f17f273b570a6a758386fc291b5f6a934dd84e48c1"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "windows-implement"
version = "0.60.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a47fddd13af08290e67f4acabf4b459f647552718f683a7b415d290ac744a836"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "windows-interface"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e6fb8df20c9bcaa8ad6ab513f7b40104840c8867d5751126e4df3b08388d0cc7"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.109",
]

[[package]]
name = "windows-interface"
version = "0.58.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "053c4c462dc91d3b1504c6fe5a726dd15e216ba718e84a0e46a88fbe5ded3515"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "windows-interface"
version = "0.59.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd9211b69f8dcdfa817bfd14bf1c97c9188afa36f4750130fcdf3f400eca9fa8"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "windows-link"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76840935b766e1b0a05c0066835fb9ec80071d4c09a16f6bd5f7e655e3c14c38"

[[package]]
name = "windows-numerics"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9150af68066c4c5c07ddc0ce30421554771e528bde427614c61038bc2c92c2b1"
dependencies = [
 "windows-core 0.61.2",
 "windows-link",
]

[[package]]
name = "windows-registry"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e400001bb720a623c1c69032f8e3e4cf09984deec740f007dd2b03ec864804b0"
dependencies = [
 "windows-result 0.2.0",
 "windows-strings 0.1.0",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-result"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5e383302e8ec8515204254685643de10811af0ed97ea37210dc26fb0032647f8"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-result"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1d1043d8214f791817bab27572aaa8af63732e11bf84aa21a45a78d6c317ae0e"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-result"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "56f42bd332cc6c8eac5af113fc0c1fd6a8fd2aa08a0119358686e5160d0586c6"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-strings"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4cd9b125c486025df0eabcb585e62173c6c9eddcec5d117d3b6e8c30e2ee4d10"
dependencies = [
 "windows-result 0.2.0",
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-strings"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87fa48cc5d406560701792be122a10132491cff9d0aeb23583cc2dcafc847319"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-strings"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "56e6c93f3a0c3b36176cb1327a4958a0353d5d166c2a35cb268ace15e91d3b57"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-sys"
version = "0.45.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75283be5efb2831d37ea142365f009c02ec203cd29a3ebecbc093d52315b66d0"
dependencies = [
 "windows-targets 0.42.2",
]

[[package]]
name = "windows-sys"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "677d2418bec65e3338edb076e806bc1ec15693c5d0104683f2efe857f61056a9"
dependencies = [
 "windows-targets 0.48.5",
]

[[package]]
name = "windows-sys"
version = "0.52.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "282be5f36a8ce781fad8c8ae18fa3f9beff57ec1b52cb3de0789201425d9a33d"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-sys"
version = "0.59.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1e38bc4d79ed67fd075bcc251a1c39b32a1776bbe92e5bef1f0bf1f8c531853b"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-targets"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e5180c00cd44c9b1c88adb3693291f1cd93605ded80c250a75d472756b4d071"
dependencies = [
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows-targets"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a2fa6e2155d7247be68c096456083145c183cbbbc2764150dda45a87197940c"
dependencies = [
 "windows_aarch64_gnullvm 0.48.5",
 "windows_aarch64_msvc 0.48.5",
 "windows_i686_gnu 0.48.5",
 "windows_i686_msvc 0.48.5",
 "windows_x86_64_gnu 0.48.5",
 "windows_x86_64_gnullvm 0.48.5",
 "windows_x86_64_msvc 0.48.5",
]

[[package]]
name = "windows-targets"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9b724f72796e036ab90c1021d4780d4d3d648aca59e491e6b98e725b84e99973"
dependencies = [
 "windows_aarch64_gnullvm 0.52.6",
 "windows_aarch64_msvc 0.52.6",
 "windows_i686_gnu 0.52.6",
 "windows_i686_gnullvm 0.52.6",
 "windows_i686_msvc 0.52.6",
 "windows_x86_64_gnu 0.52.6",
 "windows_x86_64_gnullvm 0.52.6",
 "windows_x86_64_msvc 0.52.6",
]

[[package]]
name = "windows-targets"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b1e4c7e8ceaaf9cb7d7507c974735728ab453b67ef8f18febdd7c11fe59dca8b"
dependencies = [
 "windows_aarch64_gnullvm 0.53.0",
 "windows_aarch64_msvc 0.53.0",
 "windows_i686_gnu 0.53.0",
 "windows_i686_gnullvm 0.53.0",
 "windows_i686_msvc 0.53.0",
 "windows_x86_64_gnu 0.53.0",
 "windows_x86_64_gnullvm 0.53.0",
 "windows_x86_64_msvc 0.53.0",
]

[[package]]
name = "windows-threading"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b66463ad2e0ea3bbf808b7f1d371311c80e115c0b71d60efc142cafbcfb057a6"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "597a5118570b68bc08d8d59125332c54f1ba9d9adeedeef5b99b02ba2b0698f8"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2b38e32f0abccf9987a4e3079dfb67dcd799fb61361e53e2882c3cbaf0d905d8"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "32a4622180e7a0ec044bb555404c800bc9fd9ec262ec147edd5989ccd0c02cd3"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "86b8d5f90ddd19cb4a147a5fa63ca848db3df085e25fee3cc10b39b6eebae764"

[[package]]
name = "windows_aarch64_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e08e8864a60f06ef0d0ff4ba04124db8b0fb3be5776a5cd47641e942e58c4d43"

[[package]]
name = "windows_aarch64_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc35310971f3b2dbbf3f0690a219f40e2d9afcf64f9ab7cc1be722937c26b4bc"

[[package]]
name = "windows_aarch64_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09ec2a7bb152e2252b53fa7803150007879548bc709c039df7627cabbd05d469"

[[package]]
name = "windows_aarch64_msvc"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c7651a1f62a11b8cbd5e0d42526e55f2c99886c77e007179efff86c2b137e66c"

[[package]]
name = "windows_i686_gnu"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c61d927d8da41da96a81f029489353e68739737d3beca43145c8afec9a31a84f"

[[package]]
name = "windows_i686_gnu"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a75915e7def60c94dcef72200b9a8e58e5091744960da64ec734a6c6e9b3743e"

[[package]]
name = "windows_i686_gnu"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e9b5ad5ab802e97eb8e295ac6720e509ee4c243f69d781394014ebfe8bbfa0b"

[[package]]
name = "windows_i686_gnu"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c1dc67659d35f387f5f6c479dc4e28f1d4bb90ddd1a5d3da2e5d97b42d6272c3"

[[package]]
name = "windows_i686_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0eee52d38c090b3caa76c563b86c3a4bd71ef1a819287c19d586d7334ae8ed66"

[[package]]
name = "windows_i686_gnullvm"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ce6ccbdedbf6d6354471319e781c0dfef054c81fbc7cf83f338a4296c0cae11"

[[package]]
name = "windows_i686_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "44d840b6ec649f480a41c8d80f9c65108b92d89345dd94027bfe06ac444d1060"

[[package]]
name = "windows_i686_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f55c233f70c4b27f66c523580f78f1004e8b5a8b659e05a4eb49d4166cca406"

[[package]]
name = "windows_i686_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "240948bc05c5e7c6dabba28bf89d89ffce3e303022809e73deaefe4f6ec56c66"

[[package]]
name = "windows_i686_msvc"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "581fee95406bb13382d2f65cd4a908ca7b1e4c2f1917f143ba16efe98a589b5d"

[[package]]
name = "windows_x86_64_gnu"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8de912b8b8feb55c064867cf047dda097f92d51efad5b491dfb98f6bbb70cb36"

[[package]]
name = "windows_x86_64_gnu"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "53d40abd2583d23e4718fddf1ebec84dbff8381c07cae67ff7768bbf19c6718e"

[[package]]
name = "windows_x86_64_gnu"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "147a5c80aabfbf0c7d901cb5895d1de30ef2907eb21fbbab29ca94c5b08b1a78"

[[package]]
name = "windows_x86_64_gnu"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2e55b5ac9ea33f2fc1716d1742db15574fd6fc8dadc51caab1c16a3d3b4190ba"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "26d41b46a36d453748aedef1486d5c7a85db22e56aff34643984ea85514e94a3"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b7b52767868a23d5bab768e390dc5f5c55825b6d30b86c844ff2dc7414044cc"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "24d5b23dc417412679681396f2b49f3de8c1473deb516bd34410872eff51ed0d"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0a6e035dd0599267ce1ee132e51c27dd29437f63325753051e71dd9e42406c57"

[[package]]
name = "windows_x86_64_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9aec5da331524158c6d1a4ac0ab1541149c0b9505fde06423b02f5ef0106b9f0"

[[package]]
name = "windows_x86_64_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed94fce61571a4006852b7389a063ab983c02eb1bb37b47f8272ce92d06d9538"

[[package]]
name = "windows_x86_64_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "589f6da84c646204747d1270a2a5661ea66ed1cced2631d546fdfb155959f9ec"

[[package]]
name = "windows_x86_64_msvc"
version = "0.53.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "271414315aff87387382ec3d271b52d7ae78726f5d44ac98b4f4030c91880486"

[[package]]
name = "winit"
version = "0.28.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9596d90b45384f5281384ab204224876e8e8bf7d58366d9b795ad99aa9894b94"
dependencies = [
 "android-activity",
 "bitflags 1.3.2",
 "cfg_aliases 0.1.1",
 "core-foundation 0.9.4",
 "core-graphics 0.22.3",
 "dispatch",
 "instant",
 "libc",
 "log",
 "mio 0.8.11",
 "ndk 0.7.0",
 "objc2 0.3.0-beta.3.patch-leaks.3",
 "once_cell",
 "orbclient",
 "percent-encoding",
 "raw-window-handle",
 "redox_syscall 0.3.5",
 "wasm-bindgen",
 "wayland-scanner",
 "web-sys",
 "windows-sys 0.45.0",
 "x11-dl",
]

[[package]]
name = "winnow"
version = "0.5.40"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f593a95398737aeed53e489c785df13f3618e41dbcd6718c6addbf1395aa6876"
dependencies = [
 "memchr",
]

[[package]]
name = "winnow"
version = "0.6.20"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "36c1fec1a2bb5866f07c25f68c26e565c4c200aebb96d7e55710c19d3e8ac49b"
dependencies = [
 "memchr",
]

[[package]]
name = "winreg"
version = "0.50.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "524e57b2c537c0f9b1e69f1965311ec12182b4122e45035b1508cd24d2adadb1"
dependencies = [
 "cfg-if",
 "windows-sys 0.48.0",
]

[[package]]
name = "wmi"
version = "0.14.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7787dacdd8e71cbc104658aade4009300777f9b5fda6a75f19145fedb8a18e71"
dependencies = [
 "chrono",
 "futures",
 "log",
 "serde",
 "thiserror 2.0.12",
 "windows 0.59.0",
 "windows-core 0.59.0",
]

[[package]]
name = "wyz"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "05f360fc0b24296329c78fda852a1e9ae82de9cf7b27dae4b7f62f118f77b9ed"
dependencies = [
 "tap",
]

[[package]]
name = "x11-dl"
version = "2.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "38735924fedd5314a6e548792904ed8c6de6636285cb9fec04d5b1db85c1516f"
dependencies = [
 "libc",
 "once_cell",
 "pkg-config",
]

[[package]]
name = "x11rb"
version = "0.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5d91ffca73ee7f68ce055750bf9f6eca0780b8c85eff9bc046a3b0da41755e12"
dependencies = [
 "gethostname",
 "rustix",
 "x11rb-protocol",
]

[[package]]
name = "x11rb-protocol"
version = "0.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ec107c4503ea0b4a98ef47356329af139c0a4f7750e621cf2973cd3385ebcb3d"

[[package]]
name = "x509-parser"
version = "0.16.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fcbc162f30700d6f3f82a24bf7cc62ffe7caea42c0b2cba8bf7f3ae50cf51f69"
dependencies = [
 "asn1-rs",
 "data-encoding",
 "der-parser",
 "lazy_static",
 "nom",
 "oid-registry",
 "rusticata-macros",
 "thiserror 1.0.64",
 "time",
]

[[package]]
name = "xml-rs"
version = "0.8.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "af4e2e2f7cba5a093896c1e150fbfe177d1883e7448200efb81d40b9d339ef26"

[[package]]
name = "xmltree"
version = "0.10.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d7d8a75eaf6557bb84a65ace8609883db44a29951042ada9b393151532e41fcb"
dependencies = [
 "xml-rs",
]

[[package]]
name = "yasna"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e17bb3549cc1321ae1296b9cdc2698e2b6cb1992adfa19a8c72e5b7a738f44cd"
dependencies = [
 "time",
]

[[package]]
name = "z32"
version = "1.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "edb37266251c28b03d08162174a91c3a092e3bd4f476f8205ee1c507b78b7bdc"

[[package]]
name = "zerocopy"
version = "0.7.35"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1b9b4fd18abc82b8136838da5d50bae7bdea537c574d8dc1a34ed098d6c166f0"
dependencies = [
 "byteorder",
 "zerocopy-derive",
]

[[package]]
name = "zerocopy-derive"
version = "0.7.35"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fa4f8080344d4671fb4e831a13ad1e68092748387dfc4f55e356242fae12ce3e"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.101",
]

[[package]]
name = "zeroize"
version = "1.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ced3678a2879b30306d323f4542626697a464a97c0a07c9aebf7ebca65cd4dde"

```

`Cargo.toml`:

```toml
[package]
authors     = ["The Fish Fight Game & Spicy Lobster Developers"]
default-run = "jumpy"
description = "A tactical 2D shooter"
edition     = "2021"
license     = "MIT OR Apache-2.0"
name        = "jumpy"
version     = "0.12.2"

[features]
default = []
# # Enable to simulate horrible network latency/slowness
# debug-network-slowdown = ["async-timer", "turborand"]
# # Enable bevy tracing scopes in profiling and tracy profiler support.
# profiling-full = ["bevy/trace", "dep:tracing-tracy"]

[dependencies]
bones_framework     = { git = "https://github.com/fishfolk/bones", features = ["net-debug"] }
bones_bevy_renderer = { git = "https://github.com/fishfolk/bones" }
bevy_tasks          = "0.11"
bitflags            = "2.4"
turborand           = { version = "0.10.0", features = ["atomic"] }
tracing             = "0.1.37"
puffin              = { version = "0.17.0", features = ["web"] }
puffin_egui         = "0.23.0"
petgraph            = "0.6.4"
rapier2d = { version = "0.19.0", features = [
    "debug-render",
    "enhanced-determinism",
] }
indexmap = "2.0.0"
serde = { version = "1.0.188", features = ["derive"] }
shiftnanigans = "0.3.3"
humantime-serde = "1.1.1"
ordered-float = "3.9.1"
nalgebra = { version = "0.32", features = ["glam024"] }
once_cell = "1.18.0"
async-channel = "1.9.0"
serde_yaml = "0.9.25"
thiserror = "1.0.48"
peg = "0.8.1"
egui_extras = { version = "0.23.0", default-features = false }
shadow-rs = { version = "0.25.0", default-features = false }
postcard = { version = "1.0", default-features = false, features = ["alloc"] }
strum = { version = "0.25.0", features = ["derive"] }
smallvec = "1"

[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
bevy_dylib = "0.11"
bitfield   = "0.14"
bytemuck   = "1.12"

# anyhow              = "1.0"
# async-channel       = "1.7"
# bevy_console        = "0.7"
# bevy-inspector-egui = { version = "0.18", default-features = false }
# bevy_egui           = "0.21.0"
# bevy_fluent         = "0.6"
# bevy_framepace      = "0.12"
# bevy_kira_audio     = { version = "0.15", features = ["ogg"], default-features = false }
# bevy_tweening       = { version = "0.7", default-features = false }

# async-timer        = { version = "0.7", optional = true }
# bytemuck           = "1.12"
# clap               = { version = "4.0", features = ["derive", "env"] }
# directories        = "5.0"
# downcast-rs        = "1.2"
# egui_extras        = "0.22.0"
# either             = "1.8"
# fluent             = "0.16"
# fluent_content     = "0.0"
# futures-lite       = "1.12"
# getrandom          = { version = "0.2", features = ["js"] }
# log                = { version = "0.4", features = ["release_max_level_debug"] }
# normalize-path     = "0.2"
# once_cell          = "1.17"
# peg                = "0.8"
# puffin             = { version = "0.15", features = ["web"] }
# puffin_egui        = "0.21"
# rand               = "0.8"
# serde              = { version = "1.0", features = ["derive"] }
# serde_yaml         = "0.9"
# thiserror          = "1.0"
# tracing            = { version = "0.1", features = ["release_max_level_debug"] }
# tracing-core       = "0.1"
# tracing-log        = "0.1"
# tracing-subscriber = "0.3"
# unic-langid        = "0.9"
# byte-pool          = "0.2.4"

# [dependencies.turborand]
# features = ["atomic"]
# optional = true
# version  = "0.10"

# [dependencies.tracing-tracy]
# version          = "0.10.0"
# default-features = false
# features         = ["enable", "system-tracing", "context-switch-tracing", "code-transfer"]
# optional         = true

# [target.'cfg(target_arch = "wasm32")'.dependencies]
# wasm-bindgen             = "0.2.83"
# web-sys                  = { version = "0.3", features = ["Window", "Location", "Storage"] }
# tracing-wasm             = "0.2"
# console_error_panic_hook = "0.1"
# js-sys                   = "0.3"
# chrono                   = { version = "0.4", default-features = false, features = ["std", "wasmbind"] }

# [target.'cfg(not(target_arch = "wasm32"))'.dependencies]
# mimalloc = { version = "0.1", default-features = false }
# # Networking deps
# bitfield               = "0.14"
# bones_matchmaker_proto = "0.2"
# bytes                  = "1.4"
# ggrs                   = { version = "0.9", features = ["sync-send"] }
# mdns-sd                = { version = "0.7", default-features = false }
# numquant               = "0.2"
# ping-rs                = "0.1"
# postcard               = { version = "1.0", features = ["alloc"] }
# quinn                  = { version = "0.10", default-features = false, features = ["tls-rustls"] }
# rcgen                  = "0.11.1"
# rustls                 = { version = "0.21", features = ["dangerous_configuration", "quic"] }
# smallvec               = "1.10"
# quinn_runtime_bevy     = "0.2"

# Optimize dependencies even in development
[profile.dev.package."*"]
codegen-units = 1
debug         = 1 # Only keep line numbers
opt-level     = 3

# Optimize our code a little bit.
[profile.dev]
codegen-units = 256
opt-level     = 1

[profile.dev-optimized]
debug     = 1
inherits  = "dev"
opt-level = 3

[profile.release]
codegen-units = 1    # Improved rapier physics perf, so it might help other stuff, too
lto           = true

[build-dependencies]
shadow-rs = "0.25.0"

[package.metadata.cargo-machete]
ignored = [
    "tracing",   # Needed to add `release_max_level_debug` feature
    "getrandom", # Needed to add `js` feature
]

# # Uncomment for testing during bones development, if you clone bones adjacent to the jumpy
# # repo.
# [patch.'https://github.com/fishfolk/bones']
# bones_framework     = { path = "../bones/framework_crates/bones_framework" }
# bones_bevy_renderer = { path = "../bones/framework_crates/bones_bevy_renderer" }

```

`Cross.toml`:

```toml
[target.x86_64-unknown-linux-gnu]
pre-build = [
  "dpkg --add-architecture $CROSS_DEB_ARCH",
  "apt-get update && apt-get install -y pkg-config libasound2-dev:$CROSS_DEB_ARCH libudev-dev:$CROSS_DEB_ARCH",
]

[target.aarch64-unknown-linux-gnu]
pre-build = [
  "dpkg --add-architecture $CROSS_DEB_ARCH",
  "apt-get update && apt-get install -y pkg-config libasound2-dev:$CROSS_DEB_ARCH libudev-dev:$CROSS_DEB_ARCH",
]

```

`LICENSE`:

```
'Fish Folk: Jumpy' source code is dual-licensed under either

* MIT License (licenses/LICENSE-MIT or http://opensource.org/licenses/MIT)
* Apache License, Version 2.0 (licenses/LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0)

at your option.

Fish Folk media assets are Copyright (c) 2020-2024 The Fish Folk Game & Spicy Lobster Developers and licensed as [CC BY-NC](https://creativecommons.org/licenses/by-nc/4.0/).

```

`PACKAGING.md`:

```md
## Packaging Fish Folk: Jumpy

### Dependencies

See [Bevy dependencies](https://github.com/bevyengine/bevy/blob/main/docs/linux_dependencies.md).

#### Build dependencies

- [Rust](https://www.rust-lang.org/tools/install)
- [libudev](https://www.freedesktop.org/software/systemd/man/libudev.html)

#### Runtime dependencies

- [Mesa](https://www.mesa3d.org/) - [OpenGL](https://www.opengl.org) (`3.2+`)
- [alsa-lib](https://github.com/alsa-project/alsa-lib)

### Build

```sh
# export CARGO_TARGET_DIR=target
cargo run --release --locked
```

### Environment variables

- `JUMPY_ASSETS`: assets directory (default: `assets/`)
- `JUMPY_ASSET_PACKS`: mods directory (default: `packs/`)

### Package

Binary will be located at `target/release/jumpy` after [build](#build). To run it, `assets` directory should be placed in the same directory or a path can be specified via `JUMPY_ASSETS` environment variable.

For example:

```sh
export JUMPY_ASSETS=/opt/jumpy/assets/
target/release/jumpy
```

The desktop file in the contrib/ directory can be installed to allow running the game from your desktop's app launcher.

Also see [README.md#distro-packages](./README.md#distro-packages)

### Binary releases

Binary releases are automated via [Continuous Deployment](./.github/workflows/release.yml) workflow and they can be downloaded from the [releases](https://github.com/fishfolks/jumpy/releases) page. Release artifacts are named in the following format:

- `jumpy-<version>-<target>.<ext>`

A single archive includes the `jumpy` binary and `assets` directory. It can be verified by using a SHA256 hash file that has the same name as the artifact except it ends with ".sha256". Release artifacts are not signed at this time.

### Steam

This is WIP. In the `steam` folder there is a `./package_steam.sh` script. This pulls the latest github release and prepares windows/linx/apple builds as .zip files to be prepared for upload to steam. Output is in `./steam/packaged` dir. Subsequent runs cleanup built packages.

To prepare packages other than latest, can be run as: `VERSION=v0.10.0 ./package_steam.sh`.

This script also adds some additional launch scripts (see `./steam/launch_scripts`).

```

`README.md`:

```md
# Fish Folk: Jumpy

[![Build Status](https://img.shields.io/github/actions/workflow/status/fishfolk/jumpy/ci.yml?logo=github&labelColor=1e1c24&color=8bcfcf)](https://github.com/fishfolk/jumpy/actions) [![Documentation](https://img.shields.io/badge/documentation-fishfolk.github.io-green.svg?labelColor=1e1c24&color=f3ee7a)](https://fishfolk.github.io/jumpy/book) [![License](https://img.shields.io/badge/License-MIT%20or%20Apache%202-green.svg?label=license&labelColor=1e1c24&color=34925e)](./LICENSE) [![Discord](https://img.shields.io/badge/chat-on%20discord-green.svg?logo=discord&logoColor=fff&labelColor=1e1c24&color=8d5b3f)](https://discord.gg/4smxjcheE5)

![Fish Folk: Jumpy Preview](https://user-images.githubusercontent.com/24392180/151969075-399e9fea-e2de-4340-96a4-0a0e5b79c281.gif)

👉 **[Live on Kickstarter!](https://www.kickstarter.com/projects/erlendsh/fish-folk)** 👈

## Introduction

Fish Folk: Jumpy is a tactical 2D shooter, played by up to 4 players online or on a shared screen. Aim either left or right; the rest is up to clever movement and positioning in this fish-on-fish brawler! For more information about our origin story (Duck Game et.al.) and big-picture plans, see our [design document](https://www.notion.so/erlendsh/Fish-Fight-1647ed74217e4e38a59bd28f4f5bc81a).

## Web Demo

Jumpy runs in the browser! You can play [web demo][web_demo] to try out the game, without needing to install anything on your computer.

We recommend using the Chrome browser or other derivatives for best performance, or if you have issues with other browsers.

[web_demo]: https://fishfolk.github.io/jumpy/player/latest/

### Key Features (WIP)

- 2 to 4 players in either Local Multiplayer or Online Play
- Easy to pick up, emphasizing strategy over twitch reaction
- Customize characters with hats, saved to your cross-platform profile
- Create & explore user-made weapons, levels, audio and other scripted extensions
- Smart level creation tools
- Tournaments & matchmaking built in

## Community

### Contributing

Anyone involved in the Fish Folk community must follow our [code of conduct](https://github.com/fishfolk/jumpy/blob/main/CODE_OF_CONDUCT.md).

If you'd like to make something for Fish Folk, check out our [help-wanted](https://github.com/fishfolk/jumpy/labels/help%20wanted) issues or just ask us on [Discord](https://discord.gg/4smxjcheE5). We'll soon post an updated roadmap for the next month or two of work ahead.

Before committing and opening a PR, please run the following commands and follow their instructions:

1. `cargo clippy -- -W clippy::correctness -D warnings`
2. `cargo fmt`

### Development Build Profiles

By default, Jumpy will build without optimizations for the `jumpy_core` and `jumpy` crates. This helps reduce re-compile times at the expense of some runtime performance. If you need increased runtime performance during development, you can build with the `--profile dev-optimized` option, to optimize all of the crates:

```bash
cargo r --profile dev-optimized
```

### Learning Materials

#### Rust

- [Rusty Engine Tutorial](https://cleancut.github.io/rusty_engine/)
- [Rust sokoban](https://sokoban.iolivia.me/)
- <https://pragprog.com/titles/hwrust/hands-on-rust/>

#### Bevy

- [Unofficial Bevy Cheat Book](https://bevy-cheatbook.github.io/)

## Download & play

1. Download the latest version from the [releases](https://github.com/fishfolk/jumpy/releases) page.
2. Extract the archive and run the executable. (e.g. `./jumpy` or `jumpy.exe`)

### Launcher

[A cross-platform launcher](https://github.com/spicylobstergames/SpicyLauncher) is also available for downloading and launching the game easily.

### Distro Packages

#### Arch Linux

```sh
pacman -S jumpy
```

## Building

1. Install Rust with [rustup.rs](https://rustup.rs/)
2. Clone this repository: `git clone https://github.com/fishfolk/jumpy.git`
3. `cd jumpy`
4. `cargo run`

## Credits

- [Fish Folk: Jumpy Credits](./CREDITS.md)
- Input Icons: [Kadith's Icons](https://kadith.itch.io/kadiths-free-icons) by Kadith

```

`RELEASE.md`:

```md
# Creating a Release

[GitHub releases](https://github.com/fishfolk/jumpy/releases) are automated via [GitHub actions](./.github/workflows/release.yml) and triggered by pushing a tag.

1. Bump the version in [Cargo.toml](Cargo.toml) and [core/Cargo.toml](core/Cargo.toml).
2. Update [Cargo.lock](Cargo.lock) by building the project. (`cargo build`)
3. Commit and push the changes. (i.e. submit a pull request)
4. Either [draft a new release](https://github.com/fishfolk/jumpy/releases/new) from the GitHub interface or create a new tag and push it via the command line.
5. While naming the release, do not include the version in the title. (e.g. "Level Editor")
6. Add release notes and highlights.

```

`assets/effects/win_indicator/win_indicator.atlas.yaml`:

```yaml
image: ./win_indicator.png
tile_size: [32, 32]
columns: 1
rows: 1

```

`assets/effects/win_indicator/win_indicator.attachment.yaml`:

```yaml
name: win_indicator
atlas: ./win_indicator.atlas.yaml
offset: [0, 40]
animation:
  fps: 1
  frames:
    - 0
attachment_easing: ./win_indicator.attachment_easing.yaml

```

`assets/effects/win_indicator/win_indicator.attachment_easing.yaml`:

```yaml
delta_offset: [0,60]
offset_ease_duration: 3s
ease:
  ease_in: true
  ease_out: false
  function: Quadratic

```

`assets/effects/win_indicator/win_indicator.yaml`:

```yaml
attachment: ./win_indicator.attachment.yaml
sound: ./win_indicator.ogg
volume: 0.5

```

`assets/elements/decoration/anemones/anemones.atlas.yaml`:

```yaml
image: ./anemones.png
tile_size: [48, 51]
rows: 1
columns: 5
```

`assets/elements/decoration/anemones/anemones.element.yaml`:

```yaml
name: Anemones
category: Decorations
editor:
  grab_size: [48, 27]
  grab_offset: [0, -12]
  show_name: false
data: animated_decoration.yaml

```

`assets/elements/decoration/anemones/animated_decoration.yaml`:

```yaml
start_frame: 0
end_frame: 4
fps: 6
atlas: ./anemones.atlas.yaml

```

`assets/elements/decoration/seaweed/animated_decoration.yaml`:

```yaml
start_frame: 0
end_frame: 4
fps: 6
atlas: ./seaweed.atlas.yaml

```

`assets/elements/decoration/seaweed/seaweed.atlas.yaml`:

```yaml
image: ./seaweed.png
tile_size: [48, 51]
rows: 1
columns: 5
```

`assets/elements/decoration/seaweed/seaweed.element.yaml`:

```yaml
name: Seaweed
category: Decorations
editor:
  grab_size: [40, 51]
  show_name: false
data: animated_decoration.yaml

```

`assets/elements/environment/coral_spikes/coral_spikes.atlas.yaml`:

```yaml
image: ./coral_spikes54x35.png
tile_size: [54, 35]
rows: 1
columns: 6

```

`assets/elements/environment/coral_spikes/coral_spikes.element.yaml`:

```yaml
name: Coral Spikes
category: Gameplay
editor:
  grab_size: [70, 50]
  grab_offset: [0, 0]
  show_name: false
data: spike.yaml

```

`assets/elements/environment/coral_spikes/spike.yaml`:

```yaml
atlas: ./coral_spikes.atlas.yaml
body_size: [45, 25]
start_frame: 0
end_frame: 5
fps: 12

```

`assets/elements/environment/crab/crab.atlas.yaml`:

```yaml
image: ./crab.png
tile_size: [19, 14]
rows: 2
columns: 4

```

`assets/elements/environment/crab/crab.element.yaml`:

```yaml
name: Crab
category: Critters
editor:
  grab_size: [20, 15]
data: crab.yaml

```

`assets/elements/environment/crab/crab.yaml`:

```yaml
atlas: ./crab.atlas.yaml
body_size: [17, 12]
walk_frames: [0, 1]
spawn_frames: [3, 3, 3, 3, 4, 5, 6, 7]
comfortable_spawn_distance: 25.0
comfortable_scared_distance: 100.0
uncomfortable_respawn_time: 15s
same_level_threshold: 50.0
walk_speed: 30.0
run_speed: 150.0
fps: 6
# around about 2.5 seconds (45 fix updates per second)
timer_delay_max: 113

```

`assets/elements/environment/fish_school/ArabianAngelfish.atlas.yaml`:

```yaml
image: ./ArabianAngelfish.png
tile_size: [19, 12]
rows: 1
columns: 4
```

`assets/elements/environment/fish_school/BandedButterflyFish.atlas.yaml`:

```yaml
image: ./BandedButterflyFish.png
tile_size: [19, 11]
rows: 1
columns: 4
```

`assets/elements/environment/fish_school/BlueGreenChromis.atlas.yaml`:

```yaml
image: ./BlueGreenChromis.png
tile_size: [22, 11]
rows: 1
columns: 4
```

`assets/elements/environment/fish_school/BlueTang.atlas.yaml`:

```yaml
image: ./BlueTang.png
tile_size: [19, 9]
rows: 1
columns: 4
```

`assets/elements/environment/fish_school/RoyalGramma.atlas.yaml`:

```yaml
image: ./RoyalGramma.png
tile_size: [25, 11]
rows: 1
columns: 4
```

`assets/elements/environment/fish_school/fish_school.element.yaml`:

```yaml
name: Fish School
category: Critters
editor:
  grab_size: [50, 50]
data: fish_school.yaml

```

`assets/elements/environment/fish_school/fish_school.yaml`:

```yaml
kinds: [
  "ArabianAngelfish.atlas.yaml",
  "BandedButterflyFish.atlas.yaml",
  "BlueGreenChromis.atlas.yaml",
  "BlueTang.atlas.yaml",
  "RoyalGramma.atlas.yaml"
  ]
base_count: 3
count_variation: 2
spawn_range: 64
school_size: 100
flee_range: 15.0

```

`assets/elements/environment/player_spawner/player_spawner.element.yaml`:

```yaml
name: Player Spawner
category: Map
editor:
  grab_size: [32, 48]
data: player_spawner.yaml

```

`assets/elements/environment/player_spawner/player_spawner.yaml`:

```yaml
{}

```

`assets/elements/environment/slippery/slippery.atlas.yaml`:

```yaml
image: ./slippery.png
tile_size: [33, 12]
rows: 1
columns: 1
```

`assets/elements/environment/slippery/slippery.element.yaml`:

```yaml
name: Slippery
category: Gameplay
editor:
  grab_size: [33, 10]
  show_name: false
data: slippery.yaml

```

`assets/elements/environment/slippery/slippery.yaml`:

```yaml
atlas: ./slippery.atlas.yaml
body_size: [33, 18]
player_slide: 4
body_friction: 0.95

```

`assets/elements/environment/slippery_seaweed/slippery_seaweed.atlas.yaml`:

```yaml
image: ./seaweed.png
tile_size: [48, 51]
rows: 1
columns: 5
```

`assets/elements/environment/slippery_seaweed/slippery_seaweed.element.yaml`:

```yaml
name: Slippery Seaweed
category: Gameplay
editor:
  grab_size: [40, 51]
  show_name: false
data: slippery_seaweed.yaml

```

`assets/elements/environment/slippery_seaweed/slippery_seaweed.yaml`:

```yaml
atlas: ./slippery_seaweed.atlas.yaml
body_size: [8, 8]
start_frame: 0
end_frame: 4
fps: 6

```

`assets/elements/environment/snail/snail.atlas.yaml`:

```yaml
image: ./snail.png
tile_size: [20, 12]
rows: 1
columns: 6

```

`assets/elements/environment/snail/snail.element.yaml`:

```yaml
name: Snail
category: Critters
editor:
  grab_size: [12, 10]
data: snail.yaml

```

`assets/elements/environment/snail/snail.yaml`:

```yaml
atlas: ./snail.atlas.yaml
fps: 6
body_diameter: 10
bounciness: 0.6
gravity: 1800
hit_speed: 360.0
hide_time: 3.0
crawl_frames: [3, 0, 1, 2, 1, 0]
move_frame_indexes: [1, 2, 3]
hide_frames: [0, 4, 5]

```

`assets/elements/environment/sproinger/sproinger.atlas.yaml`:

```yaml
image: ./sproinger.png
tile_size: [33, 21]
rows: 3
columns: 2

```

`assets/elements/environment/sproinger/sproinger.element.yaml`:

```yaml
name: Sproinger
category: Gameplay
editor:
  grab_size: [30, 10]
  grab_offset: [0, -5]
  show_name: false
data: sproinger.yaml

```

`assets/elements/environment/sproinger/sproinger.yaml`:

```yaml
atlas: ./sproinger.atlas.yaml
sound: ./jump.ogg
sound_volume: 0.1
body_size: [8, 8]
spring_velocity: 960

```

`assets/elements/environment/urchin/urchin.element.yaml`:

```yaml
name: Urchin
category: Decorations
editor:
  grab_size: [20, 15]
data: urchin.yaml

```

`assets/elements/environment/urchin/urchin.yaml`:

```yaml
image: ./urchin.png
body_diameter: 8.0
bounciness: 0.6
spin: 0.0
gravity: 1200
hit_speed: 360.0

```

`assets/elements/item/blunderbass/blunderbass.element.yaml`:

```yaml
name: Blunderbass
category: Weapons

```

`assets/elements/item/buss/bullet/buss.bullet.yaml`:

```yaml
lifetime: 0.2
speed: 900
body_diameter: 15
atlas: ./buss_bullet.atlas.yaml

explosion_fps: 21
explosion_frames: 3
explosion_volume: 0.015
explosion_lifetime: 0.140
explosion_sound: ../explosion/bullet_hit_dull.ogg
explosion_atlas: ../explosion/explosion.atlas.yaml

```

`assets/elements/item/buss/bullet/buss_bullet.atlas.yaml`:

```yaml
image: ./buss_bullet.png
tile_size: [6, 6]
rows: 1
columns: 1

```

`assets/elements/item/buss/buss.atlas.yaml`:

```yaml
image: ./buss.png
tile_size: [62, 24]
rows: 1
columns: 1

```

`assets/elements/item/buss/buss.element.yaml`:

```yaml
name: Buss
category: Weapons
data: buss.yaml

```

`assets/elements/item/buss/buss.yaml`:

```yaml
atlas: ./buss.atlas.yaml

max_ammo: 2
cooldown: 1000ms
bullet_meta: ./bullet/buss.bullet.yaml
bullet_count: 10
bullet_spread: 0.3
bullet_spawn_offset: [28, 6]

shoot_fps: 15
shoot_frames: 3
shoot_lifetime: 0.3
shoot_sound_volume: 0.2
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg
shoot_atlas: ./shoot/buss_shoot.atlas.yaml

bounciness: 0.3
can_rotate: true
body_size: [32, 8]
fin_anim: grab_2
angular_velocity: 0.1
throw_velocity: 180
grab_offset: [7, 0]
kickback: 300

```

`assets/elements/item/buss/explosion/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [11, 11]
rows: 1
columns: 4

```

`assets/elements/item/buss/shoot/buss_shoot.atlas.yaml`:

```yaml
image: ./buss_fire.png
tile_size: [25, 30]
rows: 1
columns: 4

```

`assets/elements/item/cannon/cannon.atlas.yaml`:

```yaml
image: ./cannon.png
tile_size: [60, 42]
rows: 1
columns: 4

```

`assets/elements/item/cannon/cannon.element.yaml`:

```yaml
name: Cannon
category: Weapons
data: cannon.yaml

```

`assets/elements/item/cannon/cannon.yaml`:

```yaml
atlas: ./cannon.atlas.yaml
animation_fps: 12

max_ammo: 4
cooldown: 600ms
bullet_spawn_offset: [22, 2]

shoot_fps: 10
shoot_frames: 5
shoot_lifetime: 0.5
shoot_sound_volume: 0.1
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg
shoot_atlas: ./shoot/cannon_shoot.atlas.yaml

bomb_meta: ../cannonball/kick_bomb.yaml

bounciness: 0.3
can_rotate: true
fin_anim: grab_2
body_size: [32, 18]
angular_velocity: 0.1
throw_velocity: 360
grab_offset: [12, 0]
kickback: 0

```

`assets/elements/item/cannon/shoot/cannon_shoot.atlas.yaml`:

```yaml
image: ./cannon_fire.png
tile_size: [30, 48]
rows: 1
columns: 5

```

`assets/elements/item/cannonball/cannonball.atlas.yaml`:

```yaml
image: ./cannonball.png
tile_size: [17, 17]
rows: 1
columns: 1

```

`assets/elements/item/cannonball/cannonball.element.yaml`:

```yaml
name: Cannonball
category: Weapons
data: kick_bomb.yaml

```

`assets/elements/item/cannonball/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [144, 112]
rows: 1
columns: 11

```

`assets/elements/item/cannonball/kick_bomb.yaml`:

```yaml
fuse_time: 2s
kick_velocity: [0.0, 0.0]
kickable: false
throw_velocity: 800
damage_region_size: [70, 70]
damage_region_lifetime: 0.5

atlas: ./cannonball.atlas.yaml

explosion_atlas: ./explosion.atlas.yaml
explosion_lifetime: 1.0
explosion_frames: 12
explosion_fps: 8
explosion_sound: ./explosion.ogg
explosion_volume: 0.1
explode_on_contact: true

lit_frames_start: 0
lit_frames_end: 1
lit_fps: 1.0

fuse_sound: ./fuse.ogg
fuse_sound_volume: 0.1

body_diameter: 16
grab_offset: [0, -2]
fin_anim: grab_2
can_rotate: true
bounciness: 0.5
angular_velocity: 0.2
arm_delay: 500ms

```

`assets/elements/item/crate/crate.atlas.yaml`:

```yaml
image: ./crate.png
tile_size: [36, 31]
rows: 1
columns: 1

```

`assets/elements/item/crate/crate.element.yaml`:

```yaml
name: Crate
category: Weapons
data: crate.yaml


```

`assets/elements/item/crate/crate.yaml`:

```yaml
throw_velocity: 600

atlas: ./crate.atlas.yaml

breaking_atlas: ./crate_breaking.atlas.yaml
breaking_anim_frames: 25
breaking_anim_fps: 30
crate_break_state_1: 0
crate_break_state_2: 1

# TODO: Better break sound
break_sound: ./fuse.ogg
break_sound_volume: 0.1

bounce_sound: ./land.ogg
bounce_sound_volume: 0.035

body_size: [36, 30]
grab_offset: [14, -2]
break_timeout: 4s
bounciness: 0.5
fin_anim: grab_2

```

`assets/elements/item/crate/crate_breaking.atlas.yaml`:

```yaml
image: ./crate_breaking.png
tile_size: [128, 128]
rows: 1
columns: 25

```

`assets/elements/item/grenade/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [144, 112]
rows: 1
columns: 11

```

`assets/elements/item/grenade/grenade.atlas.yaml`:

```yaml
image: ./grenade.png
tile_size: [25, 52]
rows: 2
columns: 3

```

`assets/elements/item/grenade/grenade.element.yaml`:

```yaml
name: Grenade
category: Weapons
editor:
  grab_size: [30, 30]
data: grenade.yaml

```

`assets/elements/item/grenade/grenade.yaml`:

```yaml
fuse_time: 4.0
throw_velocity: 720
damage_region_size: [60, 60]
damage_region_lifetime: 0.6

atlas: ./grenade.atlas.yaml

explosion_atlas: ./explosion.atlas.yaml
explosion_lifetime: 1.0
explosion_frames: 12
explosion_fps: 8
explosion_volume: 0.1
explosion_sound: ./explosion.ogg

fuse_sound_volume: 0.1
fuse_sound: ./fuse.ogg

body_diameter: 15
grab_offset: [0, -6]
fin_anim: grab_2
can_rotate: true
bounciness: 0.6
angular_velocity: 0.1

```

`assets/elements/item/jellyfish/flappy_jellyfish/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [144, 112]
rows: 1
columns: 11

```

`assets/elements/item/jellyfish/flappy_jellyfish/flappy_jellyfish.atlas.yaml`:

```yaml
image: ./flappy_jellyfish.png
tile_size: [34, 46]
rows: 1
columns: 3

```

`assets/elements/item/jellyfish/flappy_jellyfish/flappy_jellyfish.yaml`:

```yaml
atlas: ./flappy_jellyfish.atlas.yaml
body_size: [34, 46]
start_frame: 0
end_frame: 2
fps: 2

spawn_offset: [64, 64]

explosion_atlas: ./explosion.atlas.yaml
explosion_lifetime: 1.0
explosion_frames: 12
explosion_fps: 8
explosion_volume: 0.1
explosion_sound: ./explosion.ogg

damage_region_size: [60, 60]
damage_region_lifetime: 0.6

```

`assets/elements/item/jellyfish/jellyfish.atlas.yaml`:

```yaml
image: ./jellyfish.png
tile_size: [30, 39]
rows: 1
columns: 1

```

`assets/elements/item/jellyfish/jellyfish.element.yaml`:

```yaml
name: Jellyfish
category: Weapons
data: jellyfish.yaml

```

`assets/elements/item/jellyfish/jellyfish.yaml`:

```yaml
atlas: ./jellyfish.atlas.yaml
body_size: [30, 39]
throw_velocity: 360
angular_velocity: 0.1
fin_anim: grab_2
grab_offset: [0, 0]

max_ammo: 1

flappy_meta: ./flappy_jellyfish/flappy_jellyfish.yaml

```

`assets/elements/item/kick_bomb/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [144, 112]
rows: 1
columns: 11

```

`assets/elements/item/kick_bomb/kick_bomb.atlas.yaml`:

```yaml
image: ./kick_bomb.png
tile_size: [32, 63]
rows: 2
columns: 3

```

`assets/elements/item/kick_bomb/kick_bomb.element.yaml`:

```yaml
name: Kick Bomb
category: Weapons
data: kick_bomb.yaml

```

`assets/elements/item/kick_bomb/kick_bomb.yaml`:

```yaml
fuse_time: 4s
kick_velocity: [600.0, 120.0]
kickable: true
throw_velocity: 600
damage_region_size: [60, 60]
damage_region_lifetime: 0.6

atlas: ./kick_bomb.atlas.yaml

explosion_atlas: ./explosion.atlas.yaml
explosion_lifetime: 1.0
explosion_frames: 12
explosion_fps: 8
explosion_sound: ./explosion.ogg
explosion_volume: 0.1
explode_on_contact: false

lit_frames_start: 3
lit_frames_end: 5
lit_fps: 8.0

fuse_sound_volume: 0.1
fuse_sound: ./fuse.ogg

body_diameter: 26
grab_offset: [5, -2]
fin_anim: grab_2
can_rotate: true
bounciness: 0.2
angular_velocity: 0.1
# arm_delay: 0.02
arm_delay: 500ms

```

`assets/elements/item/machine_gun/bullet/machine_gun.bullet.yaml`:

```yaml
lifetime: 0.65
speed: 650
body_diameter: 15
atlas: ./machine_gun_bullet.atlas.yaml

explosion_fps: 12
explosion_frames: 3
explosion_volume: 0.025
explosion_lifetime: 0.4
explosion_sound: ../explosion/bullet_hit_dull.ogg
explosion_atlas: ../explosion/explosion.atlas.yaml

```

`assets/elements/item/machine_gun/bullet/machine_gun_bullet.atlas.yaml`:

```yaml
image: ./machine_gun_bullet.png
tile_size: [30, 4]
rows: 1
columns: 1

```

`assets/elements/item/machine_gun/explosion/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [11, 11]
rows: 1
columns: 4

```

`assets/elements/item/machine_gun/machine_gun.atlas.yaml`:

```yaml
image: ./machine_gun.png
tile_size: [80, 24]
rows: 2
columns: 2

```

`assets/elements/item/machine_gun/machine_gun.element.yaml`:

```yaml
name: MachineGun
category: Weapons
data: machine_gun.yaml

```

`assets/elements/item/machine_gun/machine_gun.yaml`:

```yaml
atlas: ./machine_gun.atlas.yaml

max_ammo: 25
cooldown: 125ms
empty_cooldown: 600ms
bullet_meta: ./bullet/machine_gun.bullet.yaml
bullet_spread: 0.1
bullet_spawn_offset: [30, 8]

shoot_sound_volume: 0.1
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg

bounciness: 0.3
can_rotate: true
body_size: [32, 8]
fin_anim: grab_2
angular_velocity: 0.1
throw_velocity: 360
grab_offset: [13, -3]
kickback: 75

```

`assets/elements/item/mine/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [144, 112]
rows: 1
columns: 13

```

`assets/elements/item/mine/mine.atlas.yaml`:

```yaml
image: ./mine.png
tile_size: [33, 35]
rows: 1
columns: 13

```

`assets/elements/item/mine/mine.element.yaml`:

```yaml
name: Mine
category: Weapons
data: mine.yaml

```

`assets/elements/item/mine/mine.yaml`:

```yaml
damage_region_size: [60, 60]
damage_region_lifetime: 0.6
arm_delay: 0.5
throw_velocity: 540

atlas: ./mine.atlas.yaml

explosion_atlas: ./explosion.atlas.yaml
explosion_lifetime: 1.0
explosion_frames: 12
explosion_fps: 8
explosion_volume: 0.1
explosion_sound: ./explosion.ogg

armed_frames: 12
armed_fps: 15
arm_sound_volume: 0.1
arm_sound: ./arm.ogg

body_size: [34, 34]
grab_offset: [14, -2]
fin_anim: grab_2
bounciness: 0.3

```

`assets/elements/item/musket/bullet/musket.bullet.yaml`:

```yaml
lifetime: 1.0
speed: 600
body_diameter: 15
atlas: ./musket_bullet.atlas.yaml

explosion_fps: 12
explosion_frames: 3
explosion_volume: 0.025
explosion_lifetime: 0.4
explosion_sound: ../explosion/bullet_hit_dull.ogg
explosion_atlas: ../explosion/explosion.atlas.yaml

```

`assets/elements/item/musket/bullet/musket_bullet.atlas.yaml`:

```yaml
image: ./musket_bullet.png
tile_size: [15, 15]
rows: 1
columns: 1

```

`assets/elements/item/musket/explosion/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [21, 21]
rows: 1
columns: 4

```

`assets/elements/item/musket/musket.atlas.yaml`:

```yaml
image: ./musket.png
tile_size: [92, 32]
rows: 1
columns: 1

```

`assets/elements/item/musket/musket.element.yaml`:

```yaml
name: Musket
category: Weapons
data: musket.yaml

```

`assets/elements/item/musket/musket.yaml`:

```yaml
atlas: ./musket.atlas.yaml

max_ammo: 4
cooldown: 600ms
bullet_meta: ./bullet/musket.bullet.yaml
bullet_spawn_offset: [15, 0]

shoot_fps: 15
shoot_frames: 3
shoot_lifetime: 0.2
shoot_sound_volume: 0.1
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg
shoot_atlas: ./shoot/musket_shoot.atlas.yaml

bounciness: 0.3
can_rotate: true
body_size: [32, 8]
fin_anim: grab_2
angular_velocity: 0.1
throw_velocity: 360
grab_offset: [23, 0]
kickback: 0

```

`assets/elements/item/musket/shoot/musket_shoot.atlas.yaml`:

```yaml
image: ./musket_fire.png
tile_size: [25, 30]
rows: 1
columns: 4

```

`assets/elements/item/periscope/bullet/periscope.bullet.yaml`:

```yaml
lifetime: 1.0
speed: 600
body_diameter: 15
atlas: ./periscope_bullet.atlas.yaml

explosion_fps: 12
explosion_frames: 3
explosion_volume: 0.025
explosion_lifetime: 0.4
explosion_sound: ../explosion/bullet_hit_dull.ogg
explosion_atlas: ../explosion/explosion.atlas.yaml

```

`assets/elements/item/periscope/bullet/periscope_bullet.atlas.yaml`:

```yaml
image: ./periscope_bullet.png
tile_size: [15, 15]
rows: 1
columns: 1

```

`assets/elements/item/periscope/explosion/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [21, 21]
rows: 1
columns: 4

```

`assets/elements/item/periscope/periscope.atlas.yaml`:

```yaml
image: ./periscope.png
tile_size: [50, 74]
rows: 1
columns: 1

```

`assets/elements/item/periscope/periscope.element.yaml`:

```yaml
name: Periscope
category: Weapons
data: periscope.yaml

```

`assets/elements/item/periscope/periscope.yaml`:

```yaml
atlas: ./periscope.atlas.yaml

max_ammo: 6
cooldown: 700ms
bullet_meta: ./bullet/periscope.bullet.yaml
bullet_spawn_offset: [30, 25]

shoot_fps: 15
shoot_frames: 3
shoot_lifetime: 0.2
shoot_sound_volume: 0.1
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg
shoot_atlas: ./shoot/periscope_shoot.atlas.yaml

bounciness: 0.3
can_rotate: true
body_size: [32, 44]
fin_anim: grab_2
angular_velocity: 0.1
throw_velocity: 180
grab_offset: [-2, 24]
kickback: 0

```

`assets/elements/item/periscope/shoot/periscope_shoot.atlas.yaml`:

```yaml
image: ./periscope_fire.png
tile_size: [25, 30]
rows: 1
columns: 4

```

`assets/elements/item/sniper_rifle/bullet/sniper.bullet.yaml`:

```yaml
lifetime: 2.0
speed: 1500
body_diameter: 7.5
atlas: ./sniper_bullet.atlas.yaml

explosion_fps: 12
explosion_frames: 3
explosion_volume: 0.025
explosion_lifetime: 0.4
explosion_sound: ../explosion/bullet_hit_dull.ogg
explosion_atlas: ../explosion/explosion.atlas.yaml

```

`assets/elements/item/sniper_rifle/bullet/sniper_bullet.atlas.yaml`:

```yaml
image: ./sniper_bullet.png
tile_size: [15, 15]
rows: 1
columns: 1

```

`assets/elements/item/sniper_rifle/explosion/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [21, 21]
rows: 1
columns: 4

```

`assets/elements/item/sniper_rifle/musket.yaml`:

```yaml
atlas: ./sniper_rifle.atlas.yaml

max_ammo: 2
cooldown: 300ms
bullet_meta: ./bullet/sniper.bullet.yaml
bullet_spawn_offset: [15, 0]

shoot_fps: 15
shoot_frames: 3
shoot_lifetime: 0.1
shoot_sound_volume: 0.1
shoot_sound: ./shoot/shoot.ogg
empty_shoot_sound_volume: 0.1
empty_shoot_sound: ./shoot/gun_empty.ogg
shoot_atlas: ./shoot/sniper_shoot.atlas.yaml

bounciness: 0.3
can_rotate: true
body_size: [32, 8]
fin_anim: grab_2
angular_velocity: 0.1
throw_velocity: 360
grab_offset: [23, 0]
kickback: 900

```

`assets/elements/item/sniper_rifle/shoot/sniper_shoot.atlas.yaml`:

```yaml
image: ./sniper_fire.png
tile_size: [25, 30]
rows: 1
columns: 4

```

`assets/elements/item/sniper_rifle/sniper_rifle.atlas.yaml`:

```yaml
image: ./sniper.png
tile_size: [81, 25]
rows: 1
columns: 1

```

`assets/elements/item/sniper_rifle/sniper_rifle.element.yaml`:

```yaml
name: Sniper Rifle
category: Weapons
data: musket.yaml

```

`assets/elements/item/stomp_boots/stomp_boots.atlas.yaml`:

```yaml
image: ./stomp_boots.png
tile_size: [96, 80]
rows: 7
columns: 14

```

`assets/elements/item/stomp_boots/stomp_boots.element.yaml`:

```yaml
name: Stomp Boots
category: Weapons
data: stomp_boots.yaml

```

`assets/elements/item/stomp_boots/stomp_boots.yaml`:

```yaml
map_icon: ./stomp_boots_icon.atlas.yaml
player_decoration: ./stomp_boots.atlas.yaml

body_size: [32, 18]
grab_offset: [-8, -4]

```

`assets/elements/item/stomp_boots/stomp_boots_icon.atlas.yaml`:

```yaml
image: ./stomp_boots_icon.png
tile_size: [31, 18]
rows: 1
columns: 1

```

`assets/elements/item/sword/sword.atlas.yaml`:

```yaml
image: ./sword.png
tile_size: [65, 93]
rows: 4
columns: 4

```

`assets/elements/item/sword/sword.element.yaml`:

```yaml
name: Sword
category: Weapons
editor:
  grab_size: [70, 20]
data: sword.yaml

```

`assets/elements/item/sword/sword.yaml`:

```yaml
atlas: ./sword.atlas.yaml
sound: ./sword.ogg
sound_volume: 0.05
fin_anim: grab_2
grab_offset: [18, 26]
body_size: [50, 8]
# The minimum speed the sword must be moving to kill somebody
killing_speed: 420
angular_velocity: -0.04
can_rotate: true
bounciness: 0.32
throw_velocity: 540
cooldown_frames: 22

```

`assets/game.yaml`:

```yaml
music:
  title_screen: music/01 fishycuffs.ogg
  fight:
    - music/02 whalecome.ogg
    - music/03 ahoy!.ogg
    - music/04 bait the hook.ogg
    - music/05 fire in the hole.ogg
    - music/06 fishsticks.ogg
    - music/07 jolly roger.ogg
    - music/08 krill or be krilled.ogg
    - music/09 landlubber.ogg
  character_screen: music/10 fish bucket.ogg
  results_screen: music/11 thar she blows!.ogg
  credits: music/12 all hands hoay!.ogg

main_menu:
  title_font:
    family: Fairfax SM
    color: FFFFFF
    size: 85
  subtitle_font:
    family: Fairfax SM
    color: FFFFFF
    size: 60

  background_image:
    image: ui/menu-background.png
    image_size: [896, 480]

  menu_width: 350

network:
  local_input_delay: 2
  max_prediction_window: 7

default_settings:
  main_volume: 1.0
  matchmaking_server: lokmcpce2uzezmh2iq3vf23cbu3grzrct66qcpdfrizmcrrlk5uq
  player_controls:
    # Gamepad controls
    gamepad:
      movement:
        up: !AxisPositive LeftStickY
        left: !AxisNegative LeftStickX
        down: !AxisNegative LeftStickY
        right: !AxisPositive LeftStickX
      movement_alt:
        up: !Button DPadUp
        left: !Button DPadLeft
        down: !Button DPadDown
        right: !Button DPadRight
      jump: !Button South
      grab: !Button East
      shoot: !Button West
      slide: !Button North
      pause: !Button Start
      ragdoll: !Button RightTrigger
      menu_back: !Button East
      menu_start: !Button Start
      menu_confirm: !Button South

    # Controls for the first keyboard player ( left side )
    keyboard1:
      movement:
        up: !Keyboard W
        down: !Keyboard S
        left: !Keyboard A
        right: !Keyboard D
      jump: !Keyboard Space
      grab: !Keyboard V
      shoot: !Keyboard C
      slide: !Keyboard B
      ragdoll: !Keyboard F
      pause: !Keyboard Escape
      menu_back: !Keyboard Escape
      menu_start: !Keyboard Return
      menu_confirm: !Keyboard Space

    # Controls for the second keyboard player ( right side )
    keyboard2:
      movement:
        up: !Keyboard Up
        down: !Keyboard Down
        left: !Keyboard Left
        right: !Keyboard Right
      jump: !Keyboard Comma
      grab: !Keyboard ShiftRight
      shoot: !Keyboard Period
      slide: !Keyboard Slash
      ragdoll: !Keyboard M
      menu_confirm: !Keyboard Comma
      menu_back: !Keyboard ShiftRight

localization: locales/localization.yaml

theme:
  scale: 1.2
  colors:
    positive: 3EC761
    negative: F52A2A

  widgets:
    border_radius: 1.5
    default: &default
      bg_fill: 3A4444
      bg_stroke: &default-stroke 181425
      text: FFFFFF
    hovered:
      bg_fill: 566363
      bg_stroke: *default-stroke
      text: FFFFFF
    active:
      bg_fill: 566363
      bg_stroke: 86809B
      text: FFFFFF
    noninteractive:
      bg_fill: 262B44
      bg_stroke: 181425
      text: FFFFFF
    menu: *default
    window_fill: 262B44

  fonts:
    - ui/FairfaxSM.ttf
    - ui/ark-pixel-16px-latin.ttf

  font_styles:
    heading:
      family: Ark Pixel 16px latin
      size: 40
      color: FFFFFF
    bigger:
      family: Ark Pixel 16px latin
      size: 25
      color: FFFFFF
    normal:
      family: Ark Pixel 16px latin
      size: 20
      color: FFFFFF
    smaller:
      family: Ark Pixel 16px latin
      size: 15
      color: FFFFFF

  editor:
    icons:
      elements:
        image: ui/editor/Object.png
        image_size: [64, 64]
      tiles:
        image: ui/editor/Tile.png
        image_size: [64, 64]
      collisions:
        image: ui/editor/PointerAndMap.png
        image_size: [64, 64]
      select:
        image: ui/editor/Cursor.png
        image_size: [64, 64]

  panel:
    font_color: FFFFFF
    padding:
      top: 25
      bottom: 25
      left: 25
      right: 25
    border:
      image: ui/panel.png
      image_size: [38, 34]
      border_size:
        top: 11
        bottom: 11
        left: 12
        right: 21
      scale: 4

  buttons:
    normal:
      font:
        family: Ark Pixel 16px latin
        color: FFFFFF
        size: 20
      padding:
        top: 6
        left: 6
        right: 6
        bottom: 9
      borders:
        default:
          image: ui/button.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2
        focused:
          image: ui/button-focused.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2
        clicked:
          image: ui/button-down.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2

    small:
      font:
        family: Ark Pixel 16px latin
        color: FFFFFF
        size: 17
      padding:
        top: 4
        left: 4
        right: 4
        bottom: 6
      borders:
        default:
          image: ui/button.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2
        focused:
          image: ui/button-focused.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2
        clicked:
          image: ui/button-down.png
          image_size: [14, 14]
          border_size:
            top: 5
            bottom: 5
            right: 5
            left: 5
          scale: 2

core:
  config:
    respawn_invincibility_time: 2s
    # How long after 1 or less players live until score is applied
    round_end_score_time: 3s
    # How long after scoring to wait before transitioning out of round
    round_end_post_score_linger_time: 3s
    winning_score_threshold: 15
    rounds_between_intermission: 7

  camera:
    default_height: 448
    border_right: 300
    border_left: 300
    border_top: 50
    border_bottom: 200
    player_camera_box_size: [100, 250]
    min_camera_size: [400, 500]
    zoom_in_lerp_factor: 0.05
    zoom_out_lerp_factor: 0.1
    move_lerp_factor: 0.1

  physics:
    terminal_velocity: 1800
    friction_lerp: 0.85
    stop_threshold: 60.0
    gravity: 2160
    player:
      ragdoll_initial_pop: 200
      ragdoll_initial_ang_vel: 2
      ragdoll_twitch_vel: 50
      ragdoll_twitch_delay: 0.15
      ragdoll_additional_mass: 300

  players:
    - ./player/skins/fishy/fishy.player.yaml
    - ./player/skins/pescy/pescy.player.yaml
    - ./player/skins/sharky/sharky.player.yaml
    - ./player/skins/orcy/orcy.player.yaml

  player_emotes:
    alarm: /player/emotes/alarm.emote.yaml

  player_hats:
    - /player/hats/bonnet/bonnet.hat.yaml
    - /player/hats/bow/bow.hat.yaml
    - /player/hats/bucket/bucket.hat.yaml
    - /player/hats/chef/chef.hat.yaml
    - /player/hats/chest/chest.hat.yaml
    - /player/hats/cowboy/cowboy.hat.yaml
    - /player/hats/crown/crown.hat.yaml
    - /player/hats/diving_goggles/diving_goggles.hat.yaml
    - /player/hats/fisherman/fisherman.hat.yaml
    - /player/hats/pineapple/pineapple.hat.yaml
    - /player/hats/pirate/pirate.hat.yaml
    - /player/hats/pot/pot.hat.yaml
    - /player/hats/pufferfish/pufferfish.hat.yaml
    - /player/hats/spicy_lobster/spicy_lobster.hat.yaml
    - /player/hats/straw/straw.hat.yaml
    - /player/hats/topper/topper.hat.yaml
    - /player/hats/unicorn/unicorn.hat.yaml
    - /player/hats/viking/viking.hat.yaml
    - /player/hats/water_lily/water_lily.hat.yaml

  player_win_indicator: /effects/win_indicator/win_indicator.yaml

  stable_maps:
    - /map/levels/level_1.map.yaml
    - /map/levels/level_2.map.yaml
    - /map/levels/level_3.map.yaml
    - /map/levels/level_4.map.yaml
    - /map/levels/level_5.map.yaml
    - /map/levels/level_6.map.yaml
    - /map/levels/level_7.map.yaml
    - /map/levels/level_8.map.yaml
    - /map/levels/level_9.map.yaml
    - /map/levels/level_10.map.yaml
    - /map/levels/level_11.map.yaml
    - /map/levels/level_12.map.yaml
    - /map/levels/level_13.map.yaml
    - /map/levels/level_14.map.yaml

  map_tilesets:
    - /map/resources/default_tileset.atlas.yaml
    - /map/resources/ground_rock.atlas.yaml
    - /map/resources/ground_wood.atlas.yaml
    - /map/resources/ground_metal.atlas.yaml
    - /map/resources/ship_decorations.atlas.yaml
    - /map/resources/coral.atlas.yaml

  map_elements:
    - /plugins/anchor/element.yaml
    - /elements/decoration/anemones/anemones.element.yaml
    - /elements/decoration/seaweed/seaweed.element.yaml
    - /elements/environment/urchin/urchin.element.yaml
    - /elements/environment/fish_school/fish_school.element.yaml
    - /elements/environment/crab/crab.element.yaml
    - /elements/environment/snail/snail.element.yaml
    - /elements/environment/player_spawner/player_spawner.element.yaml
    - /elements/environment/sproinger/sproinger.element.yaml
    - /elements/environment/slippery/slippery.element.yaml
    - /elements/environment/slippery_seaweed/slippery_seaweed.element.yaml
    - /elements/item/crate/crate.element.yaml
    - /elements/item/cannon/cannon.element.yaml
    - /elements/item/cannonball/cannonball.element.yaml
    - /elements/item/grenade/grenade.element.yaml
    - /elements/item/jellyfish/jellyfish.element.yaml
    - /elements/item/kick_bomb/kick_bomb.element.yaml
    - /elements/item/mine/mine.element.yaml
    - /elements/item/machine_gun/machine_gun.element.yaml
    - /elements/item/musket/musket.element.yaml
    - /elements/item/buss/buss.element.yaml
    - /elements/item/periscope/periscope.element.yaml
    - /elements/item/stomp_boots/stomp_boots.element.yaml
    - /elements/item/sword/sword.element.yaml
    - /elements/item/sniper_rifle/sniper_rifle.element.yaml
    - /elements/environment/coral_spikes/coral_spikes.element.yaml

  experimental_maps: []

```

`assets/locales/en-US/branding.ftl`:

```ftl
title = Fish Folk
subtitle = Jumpy

```

`assets/locales/en-US/controls.ftl`:

```ftl
move-up = Move Up
move-down = Move Down
move-left = Move Left
move-right = Move Right
move-up-alt = Move Up Alt
move-down-alt = Move Down Alt
move-left-alt = Move Left Alt
move-right-alt = Move Right Alt
jump = Jump
grab-drop = Grab / Drop
shoot = Shoot
slide = Slide
ragdoll = Ragdoll
menu-confirm = Menu Confirm
menu-back = Menu Back
menu-start = Menu Start

```

`assets/locales/en-US/debug-tools.ftl`:

```ftl
debug-tools = Debug Tools
kinematic-colliders = Kinematic Colliders
damage-regions = Damage Regions
world-inspector = World Inspector
frame-time-diagnostics = Frame Time Diagnostics
network-visualizer = Network Visualizer
profiler = Profiler
pathfinding-lines = Pathfinding Lines
network-debug = Network Debug
networking-disabled-message = Networking not enabled on this platform.

frame-diagnostics = Frame Diagnostics
frames-per-second = Frames Per Second
frame-time = Frame Time
reset-min-max = Reset Min/Max
pause = Pause
resume = Resume
frame = Frame

last-frame-with-skips = Last Frame With Skips
last-skipped-frame-count = Last Skipped Frame Count
no-frame-skips-detected = No frame skips detected.
current-frame = Current Frame
confirmed-frame = Confirmed Frame
delta = Delta
predicted-frames = Predicted Frames
predicted = predicted
player = Player

snapshot = Snapshot
take-snapshot = Take Snapshot
restore-snapshot = Restore Snapshot

```

`assets/locales/en-US/editor.ftl`:

```ftl
layers = Layers
create-layer = Create a New Layer
map-editor-preview-warning = ⚠ Warning: the map editor is a work-in-progress preview and may be broken or crash.

map-info = Map Info
map-export = Map Export
tiles = Tiles
tile = Tile
tile-layer = Tile Layer
tile-layer-icon = T
elements = Elements
element = Element
element-layer = Element Layer
element-layer-icon = E
add-element = Add Element
delete-element = Delete Element
toggle-visibility = Toggle Visibility
delete-layer = Delete Layer
delete = Delete
randomize = Randomize

create = Create
layer-kind = Layer Kind
create-map = Create Map
name = Name
grid-size = Grid Size
copy-to-clipboard = Copy to Clipboard


tilemap = Tilemap
tilemap-path = Tilemap Path

collision = Collision
collisions = Collisions

none = None

jump-through = Jump Through
empty = Empty
solid = Solid

open-map = Open Map
no-map-loaded = No map loaded

view-zoom = Zoom { $percent }%
view-offset = Camera Offset [ { $x }, { $y } ]
cursor-position = Cursor Position [ { $x }, { $y } ]
view-reset = Reset View
show-grid = Show Grid

```

`assets/locales/en-US/locale.yaml`:

```yaml
locales: [en-US]
resources:
  - branding.ftl
  - menu.ftl
  - debug-tools.ftl

  - network-game.ftl
  - scoring.ftl
  - settings.ftl
  - editor.ftl
  - player-select.ftl
  - map-select.ftl

  - controls.ftl

```

`assets/locales/en-US/map-select.ftl`:

```ftl
map-select-title = Map Select
waiting-for-map = Waiting for other player to select map...

default-maps = Default Maps
experimental-maps = Experimental Maps
user-maps = User Maps
builtin-maps = Builtin Maps
```

`assets/locales/en-US/menu.ftl`:

```ftl
# Menu Pages
local-game = Local Game
network-game = Network Game
lan-game = LAN Game
online-game = Online Game
main-menu = Main Menu
map-editor = Map Editor
settings = Settings
paused = Paused
credits = Credits

# Actions
close = Close
save = Save
reset = Reset
cancel = Cancel
back = Back
continue = Continue
edit = Edit
play = Play
quit = Quit
export = Export
reload = Reload
restart = Restart

```

`assets/locales/en-US/network-game.ftl`:

```ftl
lan = LAN
online = Online
host = Host
join = Join
servers = Servers
players = Players
no-servers = No Servers
server-name = Server Name
start-server = Start Server
stop-server = Stop Server
fish-fight = Fish Fight
configure-match = Configure Match
player-count = Player Count
search = Search
searching = Searching...
search-for-match = Search for Match
connecting = Connecting...
joining = Joining...
connected-and-querying = Connected
waiting-for-players = Waiting for Players: { $current } / { $total }
match-ready = Match Ready!
error = Error

# Pop-ups
disconnected = Disconnected
disconnected-from-all = Disconnected from all other players.
exit-match = Exit Match

```

`assets/locales/en-US/player-select.ftl`:

```ftl
keyboard = Keyboard
you-marker = < You >
no-hat = No Hat
pick-a-fish = Pick a Fish
pick-a-hat = Pick a Hat

player-select-ready = Ready!
player-select-title = Player Select
player-select-unready = Press { $button } to Unready

press-button-to-join = Press { $button } to Join
press-button-to-confirm = Press { $button } to Confirm
press-button-to-go-back = Press { $button } to Go Back
press-button-to-lock-in = Press { $button } to Lock In
press-button-to-remove = Press { $button } to Remove

add-ai-player = Add AI Player
remove-ai-player = Remove AI Player
ai-player = AI Player

```

`assets/locales/en-US/scoring.ftl`:

```ftl
press-confirm-to-ready-up = Press confirm to ready-up
press-confirm-to-play-again = Press confirm to play again
ready = Ready
not-ready = Not Ready
ai = AI
won = Winner
tied = Tied
intermission = Intermission
score = Score

match-complete = Match Complete
tied-for-win = Tied For Win

```

`assets/locales/en-US/settings.ftl`:

```ftl
# Controller Settings

controls = Controls
bind-input =
    Make { $binding_kind ->
        [keyboard]  a keyboard
        [gamepad]   a gamepad
        *[other]    an
    } input to bind to "{ $binding }".
clear-binding = Clear Binding

keyboard-1 = Keyboard 1
keyboard-2 = Keyboard 2
gamepad = Gamepad

action = Action

# Networking settings
networking = Networking
matchmaking-server = Matchmaking Server

# Audio settings
audio = Audio
volume = Volume
volume-main = Main
volume-music = Music
volume-effects = Effects

# Graphics settings
graphics = Graphics
fullscreen = Fullscreen
no-graphics-settings-on-web = There are no graphics settings on web.

```

`assets/locales/fr-FR/locale.yaml`:

```yaml
locales: [fr-FR]
resources:
  - main.ftl

```

`assets/locales/fr-FR/main.ftl`:

```ftl
# Main Menu
start-game = Démarrer Jeu

# Pause Menu
paused = En Pause
continue = Continuez
main-menu = Menu Principal
```

`assets/locales/localization.yaml`:

```yaml
locales:
  - en-US/locale.yaml
  - fr-FR/locale.yaml

```

`assets/map/levels/level_1.map.yaml`:

```yaml
name: Level 1
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(91, 87, 114, 255)
grid_size:
- 27
- 21
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 1
    - 1
    idx: 34
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 36
    collision: Solid
  - pos:
    - 1
    - 2
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 9
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 9
    collision: Solid
  - pos:
    - 23
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 2
    collision: Solid
  - pos:
    - 22
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 11
    idx: 68
    collision: Solid
  - pos:
    - 5
    - 11
    idx: 70
    collision: Solid
  - pos:
    - 21
    - 11
    idx: 68
    collision: Solid
  - pos:
    - 22
    - 11
    idx: 70
    collision: Solid
  - pos:
    - 25
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 70
    collision: Solid
  - pos:
    - 24
    - 14
    idx: 68
    collision: Solid
  - pos:
    - 25
    - 14
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 7
    - 15
    idx: 68
    collision: Solid
  - pos:
    - 8
    - 15
    idx: 78
    collision: Solid
  - pos:
    - 9
    - 15
    idx: 36
    collision: Solid
  - pos:
    - 17
    - 15
    idx: 34
    collision: Solid
  - pos:
    - 18
    - 15
    idx: 77
    collision: Solid
  - pos:
    - 19
    - 15
    idx: 70
    collision: Solid
  - pos:
    - 25
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 9
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 17
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 18
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 25
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 9
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 17
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 18
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 25
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 20
    idx: 4
    collision: Solid
  - pos:
    - 25
    - 20
    idx: 4
    collision: Solid
  elements: []
- id: wood layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 8
    - 8
    idx: 68
    collision: Solid
  - pos:
    - 9
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 8
    idx: 78
    collision: Solid
  - pos:
    - 12
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 8
    idx: 77
    collision: Solid
  - pos:
    - 16
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 8
    idx: 70
    collision: Solid
  - pos:
    - 11
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 12
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 10
    idx: 0
    collision: Solid
  - pos:
    - 12
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 10
    idx: 2
    collision: Solid
  elements: []
- id: decorations
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 8
    - 3
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 3
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 4
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 4
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 5
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 11
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 17
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 5
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 6
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 11
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 17
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 6
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 7
    idx: 35
    collision: Empty
  - pos:
    - 9
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 10
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 11
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 12
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 13
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 14
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 15
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 16
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 17
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 18
    - 7
    idx: 37
    collision: Empty
  - pos:
    - 9
    - 9
    idx: 24
    collision: Empty
  - pos:
    - 10
    - 9
    idx: 25
    collision: Empty
  - pos:
    - 16
    - 9
    idx: 25
    collision: Empty
  - pos:
    - 17
    - 9
    idx: 26
    collision: Empty
  elements:
  - pos:
    - 432.0
    - 362.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 88.0
    - 202.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 776.0
    - 202.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 208.0
    - 106.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 656.0
    - 106.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 96.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 768.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 632.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 184.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 512.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 736.0
    - 217.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 376.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 392.0
    - 185.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 296.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 160.0
    - 409.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 584.0
    - 601.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
- id: decorations 2
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 13
    - 3
    idx: 44
    collision: Empty
  - pos:
    - 13
    - 4
    idx: 33
    collision: Empty
  - pos:
    - 13
    - 5
    idx: 0
    collision: Empty
  - pos:
    - 9
    - 7
    idx: 9
    collision: Empty
  - pos:
    - 17
    - 7
    idx: 9
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 11
    - 4
    idx: 52
    collision: JumpThrough
  - pos:
    - 12
    - 4
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 4
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 4
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 4
    idx: 54
    collision: JumpThrough
  - pos:
    - 10
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 11
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 12
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 16
    idx: 53
    collision: JumpThrough
  - pos:
    - 16
    - 16
    idx: 53
    collision: JumpThrough
  elements: []
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 384.0
    - 118.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 432.0
    - 182.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 728.0
    - 214.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 136.0
    - 214.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 536.0
    - 303.0
    element: /elements/item/buss/buss.element.yaml
  - pos:
    - 784.0
    - 495.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 80.0
    - 495.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 328.0
    - 303.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 432.0
    - 555.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 300.0
    - 700.0
    element: /plugins/anchor/element.yaml
  - pos:
    - 480.0
    - 118.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 790.0
    - 120.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 245.0
    - 198.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 670.0
    - 250.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 351.0
    - 604.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 338.0
    - 295.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 530.0
    - 105.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 75.0
    - 104.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 520.0
    - 549.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 578.0
    - 584.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 174.0
    - 393.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 301.0
    - 172.0
    element: /elements/environment/fish_school/fish_school.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 384.0
    - 376.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 480.0
    - 376.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 240.0
    - 536.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 128.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 736.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 624.0
    - 536.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_10.map.yaml`:

```yaml
name: Level 10
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 27
- 22
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 0
    - 3
    idx: 34
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 77
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 7
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 3
    idx: 80
    collision: Solid
  - pos:
    - 14
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 16
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 69
    collision: Solid
  - pos:
    - 23
    - 3
    idx: 78
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 36
    collision: Solid
  - pos:
    - 0
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 6
    idx: 74
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 6
    idx: 2
    collision: Solid
  - pos:
    - 13
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 24
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 6
    idx: 75
    collision: Solid
  - pos:
    - 0
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 7
    - 7
    idx: 68
    collision: Solid
  - pos:
    - 8
    - 7
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 7
    idx: 70
    collision: Solid
  - pos:
    - 13
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 17
    - 7
    idx: 68
    collision: Solid
  - pos:
    - 18
    - 7
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 7
    idx: 70
    collision: Solid
  - pos:
    - 26
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 13
    - 8
    idx: 4
    collision: Solid
  - pos:
    - 26
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 6
    - 13
    idx: 68
    collision: Solid
  - pos:
    - 7
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 13
    idx: 70
    collision: Solid
  - pos:
    - 16
    - 13
    idx: 68
    collision: Solid
  - pos:
    - 17
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 13
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 13
    idx: 70
    collision: Solid
  - pos:
    - 26
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 20
    idx: 0
    collision: Solid
  - pos:
    - 1
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 2
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 3
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 4
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 5
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 6
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 7
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 14
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 16
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 21
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 22
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 23
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 24
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 25
    - 20
    idx: 69
    collision: Solid
  - pos:
    - 26
    - 20
    idx: 2
    collision: Solid
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 4
    - 4
    idx: 46
    collision: Empty
  - pos:
    - 5
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 6
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 7
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 8
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 9
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 4
    idx: 48
    collision: Empty
  - pos:
    - 14
    - 4
    idx: 46
    collision: Empty
  - pos:
    - 15
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 19
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 20
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 21
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 22
    - 4
    idx: 48
    collision: Empty
  - pos:
    - 4
    - 5
    idx: 46
    collision: Empty
  - pos:
    - 5
    - 5
    idx: 50
    collision: Empty
  - pos:
    - 6
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 7
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 8
    - 5
    idx: 50
    collision: Empty
  - pos:
    - 9
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 12
    - 5
    idx: 48
    collision: Empty
  - pos:
    - 14
    - 5
    idx: 46
    collision: Empty
  - pos:
    - 15
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 16
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 5
    idx: 50
    collision: Empty
  - pos:
    - 19
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 20
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 21
    - 5
    idx: 50
    collision: Empty
  - pos:
    - 22
    - 5
    idx: 48
    collision: Empty
  - pos:
    - 4
    - 6
    idx: 35
    collision: Empty
  - pos:
    - 5
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 6
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 7
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 8
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 9
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 10
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 12
    - 6
    idx: 48
    collision: Empty
  - pos:
    - 14
    - 6
    idx: 46
    collision: Empty
  - pos:
    - 15
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 16
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 18
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 19
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 20
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 21
    - 6
    idx: 36
    collision: Empty
  - pos:
    - 22
    - 6
    idx: 37
    collision: Empty
  - pos:
    - 10
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 11
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 12
    - 7
    idx: 37
    collision: Empty
  - pos:
    - 14
    - 7
    idx: 35
    collision: Empty
  - pos:
    - 15
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 16
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 8
    - 8
    idx: 44
    collision: Empty
  - pos:
    - 18
    - 8
    idx: 44
    collision: Empty
  - pos:
    - 8
    - 9
    idx: 11
    collision: Empty
  - pos:
    - 18
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 8
    - 10
    idx: 33
    collision: Empty
  - pos:
    - 18
    - 10
    idx: 11
    collision: Empty
  - pos:
    - 8
    - 11
    idx: 22
    collision: Empty
  - pos:
    - 18
    - 11
    idx: 33
    collision: Empty
  - pos:
    - 8
    - 12
    idx: 33
    collision: Empty
  - pos:
    - 18
    - 12
    idx: 33
    collision: Empty
  - pos:
    - 6
    - 14
    idx: 24
    collision: Empty
  - pos:
    - 7
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 8
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 9
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 10
    - 14
    idx: 26
    collision: Empty
  - pos:
    - 16
    - 14
    idx: 24
    collision: Empty
  - pos:
    - 17
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 18
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 19
    - 14
    idx: 25
    collision: Empty
  - pos:
    - 20
    - 14
    idx: 26
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 1
    - 11
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 11
    idx: 54
    collision: JumpThrough
  - pos:
    - 24
    - 11
    idx: 52
    collision: JumpThrough
  - pos:
    - 25
    - 11
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 12
    idx: 52
    collision: Empty
  - pos:
    - 7
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 8
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 9
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 10
    - 12
    idx: 54
    collision: Empty
  - pos:
    - 16
    - 12
    idx: 52
    collision: Empty
  - pos:
    - 17
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 18
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 19
    - 12
    idx: 53
    collision: Empty
  - pos:
    - 20
    - 12
    idx: 54
    collision: Empty
  - pos:
    - 1
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 2
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 3
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 4
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 5
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 6
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 7
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 8
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 9
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 10
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 11
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 12
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 13
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 14
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 15
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 16
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 17
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 18
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 19
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 20
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 21
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 22
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 23
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 24
    - 19
    idx: 53
    collision: Empty
  - pos:
    - 25
    - 19
    idx: 53
    collision: Empty
  elements: []
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 192.0
    - 513.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 488.0
    - 353.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 752.0
    - 441.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 184.0
    - 321.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 328.0
    - 135.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 208.0
    - 135.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 584.0
    - 135.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 760.0
    - 231.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 616.0
    - 263.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 224.0
    - 455.5
    element: /elements/environment/urchin/urchin.element.yaml
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 432.0
    - 298.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 184.0
    - 153.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 48.0
    - 234.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 776.0
    - 249.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 304.0
    - 473.5
    element: /elements/decoration/anemones/anemones.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 400.0
    - 138.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 464.0
    - 138.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 816.0
    - 234.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 800.0
    - 406.5
    element: /elements/item/cannon/cannon.element.yaml
  - pos:
    - 64.0
    - 406.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 592.0
    - 458.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 272.0
    - 458.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 592.0
    - 278.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 272.0
    - 278.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 368.0
    - 143.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 496.0
    - 143.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 688.0
    - 143.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 176.0
    - 143.0
    element: /elements/item/grenade/grenade.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 304.0
    - 152.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 624.0
    - 152.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 240.0
    - 152.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 560.0
    - 152.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
- id: foreground
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 7
    - 6
    idx: 9
    collision: Empty
  - pos:
    - 9
    - 6
    idx: 9
    collision: Empty
  - pos:
    - 17
    - 6
    idx: 9
    collision: Empty
  - pos:
    - 19
    - 6
    idx: 9
    collision: Empty
  elements: []

```

`assets/map/levels/level_11.map.yaml`:

```yaml
name: Level 11
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 34
- 23
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_metal.atlas.yaml
  tiles:
  - pos:
    - 0
    - 0
    idx: 83
    collision: Solid
  - pos:
    - 1
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 2
    - 0
    idx: 78
    collision: Solid
  - pos:
    - 3
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 13
    - 0
    idx: 83
    collision: Solid
  - pos:
    - 14
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 0
    idx: 78
    collision: Solid
  - pos:
    - 16
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 0
    idx: 77
    collision: Solid
  - pos:
    - 19
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 84
    collision: Solid
  - pos:
    - 26
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 27
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 28
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 29
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 31
    - 0
    idx: 77
    collision: Solid
  - pos:
    - 32
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 33
    - 0
    idx: 84
    collision: Solid
  - pos:
    - 0
    - 1
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 1
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 74
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 5
    idx: 2
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 27
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 31
    - 5
    idx: 75
    collision: Solid
  - pos:
    - 33
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 13
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 13
    - 7
    idx: 0
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 7
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 7
    idx: 2
    collision: Solid
  - pos:
    - 31
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 6
    - 10
    idx: 68
    collision: Solid
  - pos:
    - 7
    - 10
    idx: 70
    collision: Solid
  - pos:
    - 26
    - 10
    idx: 68
    collision: Solid
  - pos:
    - 27
    - 10
    idx: 70
    collision: Solid
  - pos:
    - 31
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 13
    - 13
    idx: 68
    collision: Solid
  - pos:
    - 14
    - 13
    idx: 70
    collision: Solid
  - pos:
    - 19
    - 13
    idx: 68
    collision: Solid
  - pos:
    - 20
    - 13
    idx: 70
    collision: Solid
  - pos:
    - 31
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 31
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 33
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 16
    idx: 36
    collision: Solid
  - pos:
    - 26
    - 16
    idx: 34
    collision: Solid
  - pos:
    - 27
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 28
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 29
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 31
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 17
    idx: 83
    collision: Solid
  - pos:
    - 14
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 17
    idx: 78
    collision: Solid
  - pos:
    - 16
    - 17
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 17
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 17
    idx: 77
    collision: Solid
  - pos:
    - 19
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 17
    idx: 84
    collision: Solid
  - pos:
    - 26
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 20
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 20
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 20
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 20
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 21
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 21
    idx: 21
    collision: Solid
  - pos:
    - 15
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 21
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 27
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 21
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 22
    idx: 0
    collision: Solid
  - pos:
    - 1
    - 22
    idx: 69
    collision: Solid
  - pos:
    - 2
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 22
    idx: 2
    collision: Solid
  - pos:
    - 13
    - 22
    idx: 0
    collision: Solid
  - pos:
    - 14
    - 22
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 22
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 22
    idx: 2
    collision: Solid
  - pos:
    - 26
    - 22
    idx: 0
    collision: Solid
  - pos:
    - 27
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 31
    - 22
    idx: 1
    collision: Solid
  - pos:
    - 32
    - 22
    idx: 69
    collision: Solid
  - pos:
    - 33
    - 22
    idx: 2
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles: []
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 624.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 232.0
    - 377.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 968.0
    - 202.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 120.0
    - 202.0
    element: /elements/environment/sproinger/sproinger.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 338.0
    - 135.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 768.0
    - 264.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 520.0
    - 470.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 734.0
    - 475.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 624.0
    - 261.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 168.0
    - 197.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 888.0
    - 357.0
    element: /elements/environment/snail/snail.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 336.0
    - 1098.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 624.0
    - 278.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 752.0
    - 1098.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 464.0
    - 278.5
    element: /elements/item/buss/buss.element.yaml
  - pos:
    - 548.2856
    - 265.5
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 864.0
    - 374.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 640.0
    - 470.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
  - pos:
    - 224.0
    - 374.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 448.0
    - 470.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
  - pos:
    - 880.0
    - 214.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
  - pos:
    - 208.0
    - 214.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 448.0
    - 472.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 640.0
    - 472.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 880.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 208.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_12.map.yaml`:

```yaml
name: Level 12
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 32
- 23
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 4
    - 2
    idx: 34
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 36
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 34
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 35
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 36
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 34
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 23
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 24
    collision: Solid
  - pos:
    - 7
    - 3
    idx: 36
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 34
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 23
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 3
    idx: 24
    collision: Solid
  - pos:
    - 28
    - 3
    idx: 36
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 7
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 27
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 28
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 34
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 6
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 7
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 5
    idx: 36
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 34
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 27
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 28
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 5
    idx: 36
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 3
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 6
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 6
    idx: 2
    collision: Solid
  - pos:
    - 23
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 24
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 27
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 6
    idx: 2
    collision: Solid
  elements: []
- id: metal layer
  tilemap: /map/resources/ground_metal.atlas.yaml
  tiles:
  - pos:
    - 5
    - 4
    idx: 38
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 38
    collision: Solid
  - pos:
    - 5
    - 5
    idx: 4
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 4
    collision: Solid
  - pos:
    - 13
    - 9
    idx: 68
    collision: Solid
  - pos:
    - 14
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 16
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 9
    idx: 70
    collision: Solid
  - pos:
    - 11
    - 15
    idx: 68
    collision: Solid
  - pos:
    - 12
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 14
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 15
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 16
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 15
    idx: 70
    collision: Solid
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 5
    - 7
    idx: 44
    collision: Empty
  - pos:
    - 26
    - 7
    idx: 44
    collision: Empty
  - pos:
    - 5
    - 8
    idx: 33
    collision: Empty
  - pos:
    - 14
    - 8
    idx: 9
    collision: Empty
  - pos:
    - 17
    - 8
    idx: 9
    collision: Empty
  - pos:
    - 26
    - 8
    idx: 11
    collision: Empty
  - pos:
    - 5
    - 9
    idx: 11
    collision: Empty
  - pos:
    - 26
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 5
    - 10
    idx: 33
    collision: Empty
  - pos:
    - 26
    - 10
    idx: 11
    collision: Empty
  - pos:
    - 5
    - 11
    idx: 11
    collision: Empty
  - pos:
    - 26
    - 11
    idx: 33
    collision: Empty
  - pos:
    - 5
    - 12
    idx: 33
    collision: Empty
  - pos:
    - 26
    - 12
    idx: 33
    collision: Empty
  - pos:
    - 4
    - 13
    idx: 24
    collision: Empty
  - pos:
    - 5
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 6
    - 13
    idx: 26
    collision: Empty
  - pos:
    - 25
    - 13
    idx: 24
    collision: Empty
  - pos:
    - 26
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 27
    - 13
    idx: 26
    collision: Empty
  - pos:
    - 12
    - 14
    idx: 9
    collision: Empty
  - pos:
    - 19
    - 14
    idx: 9
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 4
    - 12
    idx: 52
    collision: JumpThrough
  - pos:
    - 5
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 12
    idx: 54
    collision: JumpThrough
  - pos:
    - 25
    - 12
    idx: 52
    collision: JumpThrough
  - pos:
    - 26
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 27
    - 12
    idx: 54
    collision: JumpThrough
  elements: []
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 456.0
    - 327.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 824.0
    - 423.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 704.0
    - 321.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 424.0
    - 585.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 112.0
    - 229.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 304.0
    - 377.0
    element: /elements/environment/fish_school/fish_school.element.yaml
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 240.0
    - 249.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 472.0
    - 537.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 896.0
    - 249.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 848.0
    - 234.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 176.0
    - 234.0
    element: /elements/environment/sproinger/sproinger.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 512.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 624.0
    - 534.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 176.0
    - 431.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 848.0
    - 431.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 400.0
    - 534.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 512.0
    - 534.5
    element: /elements/item/musket/musket.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 112.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 240.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 784.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 912.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_13.map.yaml`:

```yaml
name: Level 13
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 35
- 35
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 0
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 1
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 2
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 27
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 28
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 29
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 31
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 32
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 33
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 34
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 0
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 5
    idx: 23
    collision: Solid
  - pos:
    - 11
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 5
    idx: 2
    collision: Solid
  - pos:
    - 20
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 21
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 24
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 6
    idx: 23
    collision: Solid
  - pos:
    - 10
    - 6
    idx: 2
    collision: Solid
  - pos:
    - 24
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 24
    collision: Solid
  - pos:
    - 26
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 7
    idx: 75
    collision: Solid
  - pos:
    - 25
    - 7
    idx: 74
    collision: Solid
  - pos:
    - 26
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 7
    idx: 12
    collision: Solid
  - pos:
    - 30
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 6
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 7
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 8
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 9
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 27
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 28
    - 8
    idx: 8
    collision: Empty
  - pos:
    - 29
    - 8
    idx: 7
    collision: Solid
  - pos:
    - 30
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 9
    idx: 23
    collision: Solid
  - pos:
    - 6
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 9
    idx: 2
    collision: Solid
  - pos:
    - 25
    - 9
    idx: 0
    collision: Solid
  - pos:
    - 26
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 9
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 9
    idx: 24
    collision: Solid
  - pos:
    - 30
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 13
    idx: 23
    collision: Solid
  - pos:
    - 6
    - 13
    idx: 70
    collision: Solid
  - pos:
    - 16
    - 13
    idx: 34
    collision: Solid
  - pos:
    - 17
    - 13
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 13
    idx: 36
    collision: Solid
  - pos:
    - 28
    - 13
    idx: 68
    collision: Solid
  - pos:
    - 29
    - 13
    idx: 24
    collision: Solid
  - pos:
    - 30
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 15
    - 14
    idx: 34
    collision: Solid
  - pos:
    - 16
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 14
    idx: 36
    collision: Solid
  - pos:
    - 29
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 10
    - 17
    idx: 68
    collision: Solid
  - pos:
    - 11
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 17
    idx: 70
    collision: Solid
  - pos:
    - 13
    - 17
    idx: 24
    collision: Empty
  - pos:
    - 14
    - 17
    idx: 18
    collision: Empty
  - pos:
    - 15
    - 17
    idx: 19
    collision: Empty
  - pos:
    - 19
    - 17
    idx: 17
    collision: Empty
  - pos:
    - 20
    - 17
    idx: 18
    collision: Empty
  - pos:
    - 21
    - 17
    idx: 23
    collision: Empty
  - pos:
    - 22
    - 17
    idx: 68
    collision: Solid
  - pos:
    - 23
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 24
    - 17
    idx: 70
    collision: Solid
  - pos:
    - 29
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 17
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 13
    - 18
    idx: 0
    collision: Empty
  - pos:
    - 14
    - 18
    idx: 24
    collision: Empty
  - pos:
    - 15
    - 18
    idx: 18
    collision: Empty
  - pos:
    - 19
    - 18
    idx: 18
    collision: Empty
  - pos:
    - 20
    - 18
    idx: 23
    collision: Empty
  - pos:
    - 21
    - 18
    idx: 2
    collision: Empty
  - pos:
    - 29
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 18
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 14
    - 19
    idx: 0
    collision: Empty
  - pos:
    - 15
    - 19
    idx: 24
    collision: Empty
  - pos:
    - 19
    - 19
    idx: 23
    collision: Empty
  - pos:
    - 20
    - 19
    idx: 2
    collision: Empty
  - pos:
    - 29
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 15
    - 20
    idx: 0
    collision: Empty
  - pos:
    - 19
    - 20
    idx: 2
    collision: Empty
  - pos:
    - 29
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 22
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 22
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 22
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 22
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 23
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 23
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 23
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 23
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 23
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 24
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 24
    idx: 19
    collision: Solid
  - pos:
    - 29
    - 24
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 24
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 24
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 25
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 25
    idx: 23
    collision: Solid
  - pos:
    - 6
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 7
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 25
    idx: 84
    collision: Solid
  - pos:
    - 25
    - 25
    idx: 83
    collision: Solid
  - pos:
    - 26
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 27
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 28
    - 25
    idx: 69
    collision: Solid
  - pos:
    - 29
    - 25
    idx: 24
    collision: Solid
  - pos:
    - 30
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 25
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 25
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 26
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 26
    idx: 19
    collision: Solid
  - pos:
    - 9
    - 26
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 26
    idx: 21
    collision: Solid
  - pos:
    - 29
    - 26
    idx: 17
    collision: Solid
  - pos:
    - 30
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 26
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 26
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 27
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 27
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 28
    - 27
    idx: 35
    collision: Solid
  - pos:
    - 29
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 27
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 27
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 28
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 28
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 28
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 29
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 29
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 29
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 30
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 30
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 30
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 31
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 7
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 8
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 9
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 10
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 11
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 12
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 17
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 28
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 29
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 30
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 31
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 32
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 33
    - 31
    idx: 18
    collision: Solid
  - pos:
    - 34
    - 31
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 32
    idx: 0
    collision: Solid
  - pos:
    - 1
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 2
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 31
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 32
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 33
    - 32
    idx: 1
    collision: Solid
  - pos:
    - 34
    - 32
    idx: 2
    collision: Solid
  elements: []
- id: wood layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 15
    - 13
    idx: 34
    collision: Solid
  - pos:
    - 16
    - 13
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 13
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 13
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 13
    idx: 36
    collision: Solid
  - pos:
    - 14
    - 14
    idx: 68
    collision: Solid
  - pos:
    - 15
    - 14
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 14
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 14
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 14
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 14
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 14
    idx: 70
    collision: Solid
  - pos:
    - 13
    - 17
    idx: 34
    collision: Solid
  - pos:
    - 14
    - 17
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 17
    idx: 36
    collision: Solid
  - pos:
    - 19
    - 17
    idx: 34
    collision: Solid
  - pos:
    - 20
    - 17
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 17
    idx: 36
    collision: Solid
  - pos:
    - 13
    - 18
    idx: 0
    collision: Solid
  - pos:
    - 14
    - 18
    idx: 24
    collision: Solid
  - pos:
    - 15
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 19
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 20
    - 18
    idx: 23
    collision: Solid
  - pos:
    - 21
    - 18
    idx: 2
    collision: Solid
  - pos:
    - 14
    - 19
    idx: 0
    collision: Solid
  - pos:
    - 15
    - 19
    idx: 75
    collision: Solid
  - pos:
    - 19
    - 19
    idx: 74
    collision: Solid
  - pos:
    - 20
    - 19
    idx: 2
    collision: Solid
  - pos:
    - 15
    - 20
    idx: 4
    collision: Solid
  - pos:
    - 19
    - 20
    idx: 4
    collision: Solid
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 14
    - 15
    idx: 46
    collision: Empty
  - pos:
    - 15
    - 15
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 15
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 15
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 15
    idx: 47
    collision: Empty
  - pos:
    - 19
    - 15
    idx: 47
    collision: Empty
  - pos:
    - 20
    - 15
    idx: 48
    collision: Empty
  - pos:
    - 14
    - 16
    idx: 35
    collision: Empty
  - pos:
    - 15
    - 16
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 16
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 16
    idx: 49
    collision: Empty
  - pos:
    - 18
    - 16
    idx: 47
    collision: Empty
  - pos:
    - 19
    - 16
    idx: 47
    collision: Empty
  - pos:
    - 20
    - 16
    idx: 37
    collision: Empty
  - pos:
    - 16
    - 17
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 17
    idx: 38
    collision: Empty
  - pos:
    - 18
    - 17
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 18
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 18
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 18
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 19
    idx: 24
    collision: Empty
  - pos:
    - 16
    - 19
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 19
    idx: 50
    collision: Empty
  - pos:
    - 18
    - 19
    idx: 47
    collision: Empty
  - pos:
    - 21
    - 19
    idx: 26
    collision: Empty
  - pos:
    - 14
    - 20
    idx: 24
    collision: Empty
  - pos:
    - 16
    - 20
    idx: 36
    collision: Empty
  - pos:
    - 17
    - 20
    idx: 36
    collision: Empty
  - pos:
    - 18
    - 20
    idx: 36
    collision: Empty
  - pos:
    - 20
    - 20
    idx: 26
    collision: Empty
  - pos:
    - 15
    - 21
    idx: 24
    collision: Empty
  - pos:
    - 16
    - 21
    idx: 25
    collision: Empty
  - pos:
    - 17
    - 21
    idx: 25
    collision: Empty
  - pos:
    - 18
    - 21
    idx: 25
    collision: Empty
  - pos:
    - 19
    - 21
    idx: 26
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 10
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 11
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 12
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 9
    idx: 54
    collision: JumpThrough
  - pos:
    - 21
    - 9
    idx: 52
    collision: JumpThrough
  - pos:
    - 22
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 23
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 24
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 10
    - 13
    idx: 54
    collision: JumpThrough
  - pos:
    - 24
    - 13
    idx: 52
    collision: JumpThrough
  - pos:
    - 25
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 26
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 27
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 25
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 26
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 27
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 28
    - 17
    idx: 53
    collision: JumpThrough
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 848.0
    - 330.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 272.0
    - 330.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 912.0
    - 458.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 864.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 880.0
    - 345.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 224.0
    - 345.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 744.0
    - 217.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 800.0
    - 601.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 248.0
    - 857.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 400.0
    - 217.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 376.0
    - 601.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 728.0
    - 601.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 448.0
    - 217.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 208.0
    - 458.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 560.0
    - 490.0
    element: /elements/environment/sproinger/sproinger.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 304.0
    - 657.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 400.0
    - 481.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 712.0
    - 729.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 624.0
    - 305.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 520.0
    - 487.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 584.0
    - 487.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 840.0
    - 583.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 232.0
    - 325.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 616.0
    - 485.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 376.0
    - 327.5
    element: /elements/environment/crab/crab.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 720.0
    - 207.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 496.0
    - 490.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 368.0
    - 591.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 624.0
    - 490.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 400.0
    - 207.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 752.0
    - 591.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 496.0
    - 694.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 216.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 904.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 624.0
    - 694.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 408.0
    - 342.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 712.0
    - 342.5
    element: /elements/item/crate/crate.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 368.0
    - 344.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 272.0
    - 472.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 752.0
    - 344.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 848.0
    - 472.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 880.0
    - 600.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 240.0
    - 600.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_14.map.yaml`:

```yaml
name: Level 14
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(91, 87, 114, 255)
grid_size:
- 34
- 14
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/coral.atlas.yaml
  tiles:
  - pos:
    - 5
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 34
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 23
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 24
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 1
    idx: 36
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 68
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 11
    - 4
    idx: 34
    collision: Solid
  - pos:
    - 12
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 4
    idx: 77
    collision: Solid
  - pos:
    - 17
    - 4
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 4
    idx: 70
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 12
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 5
    idx: 85
    collision: Empty
  - pos:
    - 24
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 5
    idx: 70
    collision: Solid
  - pos:
    - 11
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 12
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 6
    idx: 24
    collision: Solid
  - pos:
    - 15
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 0
    collision: Solid
  - pos:
    - 15
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 7
    idx: 2
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 12
    - 2
    idx: 44
    collision: Empty
  - pos:
    - 17
    - 2
    idx: 44
    collision: Empty
  - pos:
    - 12
    - 3
    idx: 11
    collision: Empty
  - pos:
    - 17
    - 3
    idx: 22
    collision: Empty
  - pos:
    - 20
    - 8
    idx: 52
    collision: JumpThrough
  - pos:
    - 21
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 22
    - 8
    idx: 54
    collision: JumpThrough
  - pos:
    - 7
    - 9
    idx: 52
    collision: JumpThrough
  - pos:
    - 8
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 9
    idx: 54
    collision: JumpThrough
  elements: []
- id: background
  tilemap: null
  tiles: []
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 752.0
    - 74.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 720.0
    - 89.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 168.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 416.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 840.0
    - 217.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 656.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 568.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 480.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 360.0
    - 89.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 576.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 392.0
    - 249.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 688.0
    - 298.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 272.0
    - 330.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 472.0
    - 86.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 144.0
    - 182.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 568.0
    - 182.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 880.0
    - 214.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 424.0
    - 246.5
    element: /elements/item/crate/crate.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 659.0
    - 166.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 295.0
    - 119.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 488.0
    - 263.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 782.0
    - 240.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 208.0
    - 221.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 696.0
    - 71.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 394.0
    - 231.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 818.0
    - 202.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 392.0
    - 71.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 576.0
    - 165.0
    element: /elements/environment/snail/snail.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 288.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 248.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 712.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 672.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_2.map.yaml`:

```yaml
name: Level 2
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(91, 87, 114, 255)
grid_size:
- 34
- 14
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/coral.atlas.yaml
  tiles:
  - pos:
    - 5
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 34
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 23
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 24
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 1
    idx: 36
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 68
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 11
    - 4
    idx: 34
    collision: Solid
  - pos:
    - 12
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 4
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 4
    idx: 77
    collision: Solid
  - pos:
    - 17
    - 4
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 4
    idx: 70
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 12
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 5
    idx: 85
    collision: Empty
  - pos:
    - 24
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 5
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 5
    idx: 70
    collision: Solid
  - pos:
    - 11
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 12
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 6
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 6
    idx: 24
    collision: Solid
  - pos:
    - 15
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 16
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 0
    collision: Solid
  - pos:
    - 15
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 7
    idx: 2
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 12
    - 2
    idx: 44
    collision: Empty
  - pos:
    - 17
    - 2
    idx: 44
    collision: Empty
  - pos:
    - 12
    - 3
    idx: 11
    collision: Empty
  - pos:
    - 17
    - 3
    idx: 22
    collision: Empty
  - pos:
    - 20
    - 8
    idx: 52
    collision: JumpThrough
  - pos:
    - 21
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 22
    - 8
    idx: 54
    collision: JumpThrough
  - pos:
    - 7
    - 9
    idx: 52
    collision: JumpThrough
  - pos:
    - 8
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 9
    idx: 54
    collision: JumpThrough
  elements: []
- id: background
  tilemap: null
  tiles: []
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 752.0
    - 74.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 720.0
    - 89.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 168.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 416.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 840.0
    - 217.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 656.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 568.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 480.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 360.0
    - 89.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 576.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 392.0
    - 249.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 688.0
    - 298.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 272.0
    - 330.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 472.0
    - 86.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 144.0
    - 182.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 568.0
    - 182.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 880.0
    - 214.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 424.0
    - 246.5
    element: /elements/item/crate/crate.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 659.0
    - 166.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 295.0
    - 119.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 488.0
    - 263.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 782.0
    - 240.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 208.0
    - 221.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 696.0
    - 71.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 394.0
    - 231.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 818.0
    - 202.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 392.0
    - 71.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 576.0
    - 165.0
    element: /elements/environment/snail/snail.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 288.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 248.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 712.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 672.0
    - 88.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_3.map.yaml`:

```yaml
name: Level 3
background:
  speed: [0.09, 0.04]
  layers:
  - image: /map/resources/background_04.png
    size: [896.0, 480.0]
    depth: 6.0
    scale: 6.0
    offset: [0.0, 0.0]
  - image: /map/resources/background_03.png
    size: [896.0, 480.0]
    depth: 5.8
    scale: 2.2
    offset: [100.0, 0.0]
  - image: /map/resources/background_02.png
    size: [896.0, 480.0]
    depth: 4.0
    scale: 2.2
    offset: [600.0, 0.0]
  - image: /map/resources/background_01.png
    size: [896.0, 480.0]
    depth: 1.0
    scale: 2.2
    offset: [500.0, 0.0]
background_color: rgba(91, 87, 114, 255)
grid_size:
- 27
- 22
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - { pos: [3, 2], idx: 34, collision: Solid }
  - { pos: [4, 2], idx: 35, collision: Solid }
  - { pos: [5, 2], idx: 35, collision: Solid }
  - { pos: [6, 2], idx: 35, collision: Solid }
  - { pos: [7, 2], idx: 35, collision: Solid }
  - { pos: [8, 2], idx: 35, collision: Solid }
  - { pos: [9, 2], idx: 35, collision: Solid }
  - { pos: [10, 2], idx: 35, collision: Solid }
  - { pos: [11, 2], idx: 35, collision: Solid }
  - { pos: [12, 2], idx: 35, collision: Solid }
  - { pos: [13, 2], idx: 35, collision: Solid }
  - { pos: [14, 2], idx: 35, collision: Solid }
  - { pos: [15, 2], idx: 35, collision: Solid }
  - { pos: [16, 2], idx: 35, collision: Solid }
  - { pos: [17, 2], idx: 35, collision: Solid }
  - { pos: [18, 2], idx: 35, collision: Solid }
  - { pos: [19, 2], idx: 35, collision: Solid }
  - { pos: [20, 2], idx: 35, collision: Solid }
  - { pos: [21, 2], idx: 35, collision: Solid }
  - { pos: [22, 2], idx: 35, collision: Solid }
  - { pos: [23, 2], idx: 36, collision: Solid }
  - { pos: [2, 3], idx: 34, collision: Solid }
  - { pos: [3, 3], idx: 23, collision: Solid }
  - { pos: [4, 3], idx: 1, collision: Solid }
  - { pos: [5, 3], idx: 1, collision: Solid }
  - { pos: [6, 3], idx: 1, collision: Solid }
  - { pos: [7, 3], idx: 1, collision: Solid }
  - { pos: [8, 3], idx: 1, collision: Solid }
  - { pos: [9, 3], idx: 1, collision: Solid }
  - { pos: [10, 3], idx: 1, collision: Solid }
  - { pos: [11, 3], idx: 1, collision: Solid }
  - { pos: [12, 3], idx: 1, collision: Solid }
  - { pos: [13, 3], idx: 1, collision: Solid }
  - { pos: [14, 3], idx: 1, collision: Solid }
  - { pos: [15, 3], idx: 1, collision: Solid }
  - { pos: [16, 3], idx: 1, collision: Solid }
  - { pos: [17, 3], idx: 1, collision: Solid }
  - { pos: [18, 3], idx: 1, collision: Solid }
  - { pos: [19, 3], idx: 1, collision: Solid }
  - { pos: [20, 3], idx: 1, collision: Solid }
  - { pos: [21, 3], idx: 1, collision: Solid }
  - { pos: [22, 3], idx: 1, collision: Solid }
  - { pos: [23, 3], idx: 12, collision: Solid }
  - { pos: [24, 3], idx: 36, collision: Solid }
  - { pos: [2, 4], idx: 17, collision: Solid }
  - { pos: [3, 4], idx: 19, collision: Solid }
  - { pos: [23, 4], idx: 17, collision: Solid }
  - { pos: [24, 4], idx: 19, collision: Solid }
  - { pos: [0, 5], idx: 34, collision: Solid }
  - { pos: [1, 5], idx: 35, collision: Solid }
  - { pos: [2, 5], idx: 23, collision: Solid }
  - { pos: [3, 5], idx: 2, collision: Solid }
  - { pos: [23, 5], idx: 0, collision: Solid }
  - { pos: [24, 5], idx: 24, collision: Solid }
  - { pos: [25, 5], idx: 35, collision: Solid }
  - { pos: [26, 5], idx: 36, collision: Solid }
  - { pos: [0, 6], idx: 34, collision: Solid }
  - { pos: [1, 6], idx: 1, collision: Solid }
  - { pos: [2, 6], idx: 2, collision: Solid }
  - { pos: [24, 6], idx: 0, collision: Solid }
  - { pos: [25, 6], idx: 1, collision: Solid }
  - { pos: [26, 6], idx: 84, collision: Solid }
  - { pos: [0, 7], idx: 21, collision: Solid }
  - { pos: [26, 7], idx: 21, collision: Solid }
  - { pos: [0, 8], idx: 21, collision: Solid }
  - { pos: [26, 8], idx: 21, collision: Solid }
  - { pos: [0, 9], idx: 21, collision: Solid }
  - { pos: [26, 9], idx: 21, collision: Solid }
  - { pos: [0, 10], idx: 21, collision: JumpThrough }
  - { pos: [26, 10], idx: 21, collision: JumpThrough }
  - { pos: [0, 11], idx: 21, collision: Solid }
  - { pos: [26, 11], idx: 21, collision: Solid }
  - { pos: [0, 12], idx: 21, collision: Solid }
  - { pos: [26, 12], idx: 21, collision: Solid }
  - { pos: [0, 13], idx: 21, collision: JumpThrough }
  - { pos: [26, 13], idx: 21, collision: JumpThrough }
  - { pos: [0, 14], idx: 21, collision: Solid }
  - { pos: [26, 14], idx: 21, collision: Solid }
  - { pos: [0, 15], idx: 21, collision: Solid }
  - { pos: [26, 15], idx: 21, collision: Solid }
  - { pos: [0, 16], idx: 21, collision: Solid }
  - { pos: [26, 16], idx: 21, collision: Solid }
  - { pos: [0, 17], idx: 21, collision: Solid }
  - { pos: [26, 17], idx: 21, collision: Solid }
  - { pos: [0, 18], idx: 21, collision: Solid }
  - { pos: [26, 18], idx: 21, collision: Solid }
  - { pos: [0, 19], idx: 17, collision: Solid }
  - { pos: [1, 19], idx: 36, collision: Solid }
  - { pos: [25, 19], idx: 34, collision: Solid }
  - { pos: [26, 19], idx: 19, collision: Solid }
  - { pos: [0, 20], idx: 0, collision: Solid }
  - { pos: [1, 20], idx: 24, collision: Solid }
  - { pos: [2, 20], idx: 35, collision: Solid }
  - { pos: [3, 20], idx: 35, collision: Solid }
  - { pos: [4, 20], idx: 35, collision: Solid }
  - { pos: [5, 20], idx: 35, collision: Solid }
  - { pos: [6, 20], idx: 35, collision: Solid }
  - { pos: [7, 20], idx: 35, collision: Solid }
  - { pos: [8, 20], idx: 35, collision: Solid }
  - { pos: [9, 20], idx: 35, collision: Solid }
  - { pos: [10, 20], idx: 35, collision: Solid }
  - { pos: [11, 20], idx: 35, collision: Solid }
  - { pos: [12, 20], idx: 35, collision: Solid }
  - { pos: [13, 20], idx: 35, collision: Solid }
  - { pos: [14, 20], idx: 35, collision: Solid }
  - { pos: [15, 20], idx: 35, collision: Solid }
  - { pos: [16, 20], idx: 35, collision: Solid }
  - { pos: [17, 20], idx: 35, collision: Solid }
  - { pos: [18, 20], idx: 35, collision: Solid }
  - { pos: [19, 20], idx: 35, collision: Solid }
  - { pos: [20, 20], idx: 35, collision: Solid }
  - { pos: [21, 20], idx: 35, collision: Solid }
  - { pos: [22, 20], idx: 35, collision: Solid }
  - { pos: [23, 20], idx: 35, collision: Solid }
  - { pos: [24, 20], idx: 35, collision: Solid }
  - { pos: [25, 20], idx: 23, collision: Solid }
  - { pos: [26, 20], idx: 2, collision: Solid }
  - { pos: [1, 21], idx: 0, collision: Solid }
  - { pos: [2, 21], idx: 1, collision: Solid }
  - { pos: [3, 21], idx: 1, collision: Solid }
  - { pos: [4, 21], idx: 1, collision: Solid }
  - { pos: [5, 21], idx: 1, collision: Solid }
  - { pos: [6, 21], idx: 1, collision: Solid }
  - { pos: [7, 21], idx: 1, collision: Solid }
  - { pos: [8, 21], idx: 1, collision: Solid }
  - { pos: [9, 21], idx: 1, collision: Solid }
  - { pos: [10, 21], idx: 1, collision: Solid }
  - { pos: [11, 21], idx: 1, collision: Solid }
  - { pos: [12, 21], idx: 1, collision: Solid }
  - { pos: [13, 21], idx: 1, collision: Solid }
  - { pos: [14, 21], idx: 1, collision: Solid }
  - { pos: [15, 21], idx: 1, collision: Solid }
  - { pos: [16, 21], idx: 1, collision: Solid }
  - { pos: [17, 21], idx: 1, collision: Solid }
  - { pos: [18, 21], idx: 1, collision: Solid }
  - { pos: [19, 21], idx: 1, collision: Solid }
  - { pos: [20, 21], idx: 1, collision: Solid }
  - { pos: [21, 21], idx: 1, collision: Solid }
  - { pos: [22, 21], idx: 1, collision: Solid }
  - { pos: [23, 21], idx: 1, collision: Solid }
  - { pos: [24, 21], idx: 1, collision: Solid }
  - { pos: [25, 21], idx: 2, collision: Solid }
  elements: []
- id: wood layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - { pos: [12, 6], idx: 34, collision: Solid }
  - { pos: [13, 6], idx: 35, collision: Solid }
  - { pos: [14, 6], idx: 36, collision: Solid }
  - { pos: [12, 7], idx: 17, collision: Solid }
  - { pos: [13, 7], idx: 18, collision: Solid }
  - { pos: [14, 7], idx: 19, collision: Solid }
  - { pos: [7, 8], idx: 68, collision: Solid }
  - { pos: [8, 8], idx: 69, collision: Solid }
  - { pos: [9, 8], idx: 69, collision: Solid }
  - { pos: [10, 8], idx: 69, collision: Solid }
  - { pos: [11, 8], idx: 69, collision: Solid }
  - { pos: [12, 8], idx: 1, collision: Solid }
  - { pos: [13, 8], idx: 1, collision: Solid }
  - { pos: [14, 8], idx: 1, collision: Solid }
  - { pos: [15, 8], idx: 69, collision: Solid }
  - { pos: [16, 8], idx: 69, collision: Solid }
  - { pos: [17, 8], idx: 69, collision: Solid }
  - { pos: [18, 8], idx: 69, collision: Solid }
  - { pos: [19, 8], idx: 70, collision: Solid }
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [13, 4], idx: 44, collision: Empty }
  - { pos: [13, 5], idx: 33, collision: Empty }
  - { pos: [7, 9], idx: 24, collision: Empty }
  - { pos: [8, 9], idx: 25, collision: Empty }
  - { pos: [9, 9], idx: 25, collision: Empty }
  - { pos: [10, 9], idx: 25, collision: Empty }
  - { pos: [11, 9], idx: 25, collision: Empty }
  - { pos: [12, 9], idx: 25, collision: Empty }
  - { pos: [13, 9], idx: 44, collision: Empty }
  - { pos: [14, 9], idx: 25, collision: Empty }
  - { pos: [15, 9], idx: 25, collision: Empty }
  - { pos: [16, 9], idx: 25, collision: Empty }
  - { pos: [17, 9], idx: 25, collision: Empty }
  - { pos: [18, 9], idx: 25, collision: Empty }
  - { pos: [19, 9], idx: 26, collision: Empty }
  - { pos: [13, 10], idx: 11, collision: Empty }
  - { pos: [13, 11], idx: 33, collision: Empty }
  - { pos: [13, 12], idx: 33, collision: Empty }
  - { pos: [13, 13], idx: 22, collision: Empty }
  - { pos: [13, 14], idx: 33, collision: Empty }
  - { pos: [13, 15], idx: 33, collision: Empty }
  - { pos: [13, 16], idx: 33, collision: Empty }
  - { pos: [11, 17], idx: 16, collision: Empty }
  - { pos: [12, 17], idx: 17, collision: Empty }
  - { pos: [13, 17], idx: 18, collision: Empty }
  - { pos: [11, 18], idx: 5, collision: Empty }
  - { pos: [12, 18], idx: 6, collision: Empty }
  - { pos: [13, 18], idx: 7, collision: Empty }
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - { pos: [464.0, 313.5], element: /elements/decoration/anemones/anemones.element.yaml }
  - { pos: [48.0, 234.0], element: /elements/environment/sproinger/sproinger.element.yaml }
  - { pos: [816.0, 234.0], element: /elements/environment/sproinger/sproinger.element.yaml }
  - { pos: [648.0, 153.5], element: /elements/decoration/anemones/anemones.element.yaml }
  - { pos: [48.0, 249.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
  - { pos: [256.0, 153.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
  - { pos: [688.0, 153.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
  - { pos: [264.0, 313.5], element: /elements/decoration/anemones/anemones.element.yaml }
  - { pos: [752.0, 217.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
  - { pos: [528.0, 153.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
  - { pos: [392.0, 153.5], element: /elements/decoration/seaweed/seaweed.element.yaml }
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - { pos: [288.0, 312.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [576.0, 312.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [80.0, 248.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [784.0, 248.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
- id: critters
  tilemap: null
  tiles: []
  elements:
  - { pos: [185.0, 227.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [673.0, 192.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [282.0, 498.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [537.0, 387.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [272.0, 295.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [568.0, 295.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [504.0, 135.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [104.0, 199.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [312.0, 135.5], element: /elements/environment/crab/crab.element.yaml }
- id: items
  tilemap: null
  tiles: []
  elements:
  - { pos: [232.0, 470.5], element: /elements/item/stomp_boots/stomp_boots.element.yaml }
  - { pos: [664.0, 150.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [200.0, 150.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [48.0, 463.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [816.0, 463.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [104.0, 367.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [760.0, 367.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [632.0, 470.5], element: /elements/item/stomp_boots/stomp_boots.element.yaml }
  - { pos: [432.0, 382.5], element: /elements/item/musket/musket.element.yaml }
  - { pos: [512.0, 246.5], element: /elements/item/buss/buss.element.yaml }
  - { pos: [432.0, 510.5], element: /elements/item/musket/musket.element.yaml }
  - { pos: [352.0, 246.5], element: /elements/item/musket/musket.element.yaml }
- id: foreground
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [7, 9], idx: 2, collision: Empty }
  - { pos: [8, 9], idx: 3, collision: Empty }
  - { pos: [9, 9], idx: 4, collision: Empty }
  - { pos: [17, 9], idx: 2, collision: Empty }
  - { pos: [18, 9], idx: 3, collision: Empty }
  - { pos: [19, 9], idx: 4, collision: Empty }
  - { pos: [7, 10], idx: 2, collision: Empty }
  - { pos: [8, 10], idx: 3, collision: Empty }
  - { pos: [17, 10], idx: 2, collision: Empty }
  - { pos: [19, 10], idx: 4, collision: Empty }
  - { pos: [7, 11], idx: 2, collision: Empty }
  - { pos: [8, 11], idx: 3, collision: Empty }
  - { pos: [9, 11], idx: 4, collision: Empty }
  - { pos: [12, 11], idx: 30, collision: Empty }
  - { pos: [13, 11], idx: 31, collision: Empty }
  - { pos: [14, 11], idx: 32, collision: Empty }
  - { pos: [17, 11], idx: 2, collision: Empty }
  - { pos: [18, 11], idx: 3, collision: Empty }
  - { pos: [19, 11], idx: 4, collision: Empty }
  - { pos: [7, 12], idx: 2, collision: Empty }
  - { pos: [8, 12], idx: 3, collision: Empty }
  - { pos: [9, 12], idx: 4, collision: Empty }
  - { pos: [18, 12], idx: 3, collision: Empty }
  - { pos: [19, 12], idx: 4, collision: Empty }
  - { pos: [8, 13], idx: 3, collision: Empty }
  - { pos: [9, 13], idx: 4, collision: Empty }
  - { pos: [17, 13], idx: 2, collision: Empty }
  - { pos: [18, 13], idx: 3, collision: Empty }
  - { pos: [19, 13], idx: 4, collision: Empty }
  - { pos: [12, 15], idx: 30, collision: Empty }
  - { pos: [13, 15], idx: 31, collision: Empty }
  - { pos: [14, 15], idx: 32, collision: Empty }
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [10, 6], idx: 52, collision: JumpThrough }
  - { pos: [11, 6], idx: 53, collision: JumpThrough }
  - { pos: [15, 6], idx: 53, collision: JumpThrough }
  - { pos: [16, 6], idx: 54, collision: JumpThrough }
  - { pos: [1, 10], idx: 53, collision: JumpThrough }
  - { pos: [2, 10], idx: 53, collision: JumpThrough }
  - { pos: [3, 10], idx: 54, collision: JumpThrough }
  - { pos: [13, 10], idx: 10, collision: JumpThrough }
  - { pos: [23, 10], idx: 52, collision: JumpThrough }
  - { pos: [24, 10], idx: 53, collision: JumpThrough }
  - { pos: [25, 10], idx: 53, collision: JumpThrough }
  - { pos: [1, 13], idx: 54, collision: JumpThrough }
  - { pos: [6, 13], idx: 52, collision: JumpThrough }
  - { pos: [7, 13], idx: 53, collision: JumpThrough }
  - { pos: [8, 13], idx: 53, collision: JumpThrough }
  - { pos: [9, 13], idx: 53, collision: JumpThrough }
  - { pos: [10, 13], idx: 54, collision: JumpThrough }
  - { pos: [16, 13], idx: 52, collision: JumpThrough }
  - { pos: [17, 13], idx: 53, collision: JumpThrough }
  - { pos: [18, 13], idx: 53, collision: JumpThrough }
  - { pos: [19, 13], idx: 53, collision: JumpThrough }
  - { pos: [20, 13], idx: 54, collision: JumpThrough }
  - { pos: [25, 13], idx: 52, collision: JumpThrough }
  - { pos: [13, 14], idx: 10, collision: JumpThrough }
  elements: []

```

`assets/map/levels/level_4.map.yaml`:

```yaml
name: Level 4
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(91, 87, 114, 255)
grid_size:
- 35
- 15
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_metal.atlas.yaml
  tiles:
  - pos:
    - 0
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 12
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 12
    - 4
    idx: 24
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 23
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 33
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 12
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 13
    - 5
    idx: 75
    collision: Solid
  - pos:
    - 21
    - 5
    idx: 74
    collision: Solid
  - pos:
    - 22
    - 5
    idx: 2
    collision: Solid
  - pos:
    - 33
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 23
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 3
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 4
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 5
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 6
    - 6
    idx: 70
    collision: Solid
  - pos:
    - 13
    - 6
    idx: 0
    collision: Solid
  - pos:
    - 14
    - 6
    idx: 84
    collision: Solid
  - pos:
    - 20
    - 6
    idx: 83
    collision: Solid
  - pos:
    - 21
    - 6
    idx: 2
    collision: Solid
  - pos:
    - 28
    - 6
    idx: 68
    collision: Solid
  - pos:
    - 29
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 30
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 31
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 32
    - 6
    idx: 69
    collision: Solid
  - pos:
    - 33
    - 6
    idx: 24
    collision: Solid
  - pos:
    - 34
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 4
    collision: Solid
  - pos:
    - 20
    - 7
    idx: 4
    collision: Solid
  - pos:
    - 33
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 9
    - 11
    idx: 38
    collision: Solid
  - pos:
    - 25
    - 11
    idx: 38
    collision: Solid
  - pos:
    - 33
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 9
    - 12
    idx: 0
    collision: Solid
  - pos:
    - 10
    - 12
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 12
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 12
    idx: 70
    collision: Solid
  - pos:
    - 22
    - 12
    idx: 68
    collision: Solid
  - pos:
    - 23
    - 12
    idx: 69
    collision: Solid
  - pos:
    - 24
    - 12
    idx: 69
    collision: Solid
  - pos:
    - 25
    - 12
    idx: 2
    collision: Solid
  - pos:
    - 33
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 33
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 34
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 14
    idx: 0
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 2
    collision: Solid
  - pos:
    - 33
    - 14
    idx: 0
    collision: Solid
  - pos:
    - 34
    - 14
    idx: 2
    collision: Solid
  elements: []
- id: rock layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 0
    - 1
    idx: 34
    collision: Solid
  - pos:
    - 1
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 27
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 28
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 29
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 31
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 32
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 33
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 34
    - 1
    idx: 36
    collision: Solid
  - pos:
    - 0
    - 2
    idx: 0
    collision: Solid
  - pos:
    - 1
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 29
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 31
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 32
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 33
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 34
    - 2
    idx: 2
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 15
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 16
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 17
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 18
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 19
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 3
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 4
    - 9
    idx: 54
    collision: JumpThrough
  - pos:
    - 30
    - 9
    idx: 52
    collision: JumpThrough
  - pos:
    - 31
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 32
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 16
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 17
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 18
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 19
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 20
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 21
    - 12
    idx: 53
    collision: JumpThrough
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 496.0
    - 101.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 648.0
    - 101.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 176.0
    - 153.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 560.0
    - 106.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 504.0
    - 263.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 656.0
    - 423.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 824.0
    - 185.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 256.0
    - 449.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 896.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 504.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 624.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 848.0
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 144.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 616.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 248.0
    - 121.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 104.0
    - 249.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 752.0
    - 441.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 560.0
    - 266.0
    element: /elements/environment/sproinger/sproinger.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 336.0
    - 438.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 784.0
    - 438.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 560.0
    - 438.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 488.0
    - 106.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 1088.0
    - 502.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
  - pos:
    - 32.0
    - 502.5
    element: /elements/item/stomp_boots/stomp_boots.element.yaml
  - pos:
    - 1008.0
    - 118.5
    element: /elements/item/buss/buss.element.yaml
  - pos:
    - 1008.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 632.0
    - 106.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 112.0
    - 118.5
    element: /elements/item/buss/buss.element.yaml
  - pos:
    - 112.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 136.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 728.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 392.0
    - 216.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 984.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_5.map.yaml`:

```yaml
name: Level 5
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 27
- 21
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 0
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 1
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 2
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 0
    idx: 77
    collision: Solid
  - pos:
    - 4
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 5
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 70
    collision: Solid
  - pos:
    - 10
    - 0
    idx: 68
    collision: Solid
  - pos:
    - 11
    - 0
    idx: 70
    collision: Solid
  - pos:
    - 15
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 16
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 26
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 0
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 1
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 15
    - 2
    idx: 0
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 2
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 3
    idx: 74
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 1
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 2
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 24
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 6
    - 5
    idx: 7
    collision: Solid
  - pos:
    - 7
    - 5
    idx: 7
    collision: Solid
  - pos:
    - 8
    - 5
    idx: 7
    collision: Solid
  - pos:
    - 9
    - 5
    idx: 7
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 12
    - 7
    idx: 7
    collision: Solid
  - pos:
    - 13
    - 7
    idx: 7
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 7
    collision: Solid
  - pos:
    - 23
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 7
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 8
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 17
    - 9
    idx: 7
    collision: Solid
  - pos:
    - 18
    - 9
    idx: 7
    collision: Solid
  - pos:
    - 19
    - 9
    idx: 7
    collision: Solid
  - pos:
    - 20
    - 9
    idx: 7
    collision: Solid
  - pos:
    - 23
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 24
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 25
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 26
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 23
    - 12
    idx: 0
    collision: Solid
  - pos:
    - 24
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 26
    - 12
    idx: 75
    collision: Solid
  - pos:
    - 0
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 26
    - 14
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 5
    - 15
    idx: 68
    collision: Solid
  - pos:
    - 6
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 7
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 15
    idx: 70
    collision: Solid
  - pos:
    - 14
    - 15
    idx: 0
    collision: Solid
  - pos:
    - 15
    - 15
    idx: 69
    collision: Solid
  - pos:
    - 16
    - 15
    idx: 24
    collision: Solid
  - pos:
    - 17
    - 15
    idx: 36
    collision: Solid
  - pos:
    - 26
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 16
    - 16
    idx: 0
    collision: Solid
  - pos:
    - 17
    - 16
    idx: 24
    collision: Solid
  - pos:
    - 18
    - 16
    idx: 36
    collision: Solid
  - pos:
    - 26
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 17
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 18
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 17
    idx: 69
    collision: Solid
  - pos:
    - 21
    - 17
    idx: 70
    collision: Solid
  - pos:
    - 26
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 6
    - 18
    idx: 34
    collision: Solid
  - pos:
    - 7
    - 18
    idx: 36
    collision: Solid
  - pos:
    - 26
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 6
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 7
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 26
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 0
    - 20
    idx: 4
    collision: Solid
  - pos:
    - 6
    - 20
    idx: 0
    collision: Solid
  - pos:
    - 7
    - 20
    idx: 2
    collision: Solid
  - pos:
    - 26
    - 20
    idx: 4
    collision: Solid
  elements: []
- id: metal layer
  tilemap: /map/resources/ground_metal.atlas.yaml
  tiles:
  - pos:
    - 6
    - 5
    idx: 68
    collision: Solid
  - pos:
    - 7
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 8
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 9
    - 5
    idx: 70
    collision: Solid
  - pos:
    - 12
    - 7
    idx: 68
    collision: Solid
  - pos:
    - 13
    - 7
    idx: 69
    collision: Solid
  - pos:
    - 14
    - 7
    idx: 70
    collision: Solid
  - pos:
    - 17
    - 9
    idx: 68
    collision: Solid
  - pos:
    - 18
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 19
    - 9
    idx: 69
    collision: Solid
  - pos:
    - 20
    - 9
    idx: 70
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 1
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 6
    idx: 54
    collision: JumpThrough
  - pos:
    - 1
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 9
    idx: 54
    collision: JumpThrough
  - pos:
    - 1
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 12
    idx: 54
    collision: JumpThrough
  - pos:
    - 1
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 2
    - 15
    idx: 54
    collision: JumpThrough
  - pos:
    - 24
    - 15
    idx: 52
    collision: JumpThrough
  - pos:
    - 25
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 18
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 18
    idx: 53
    collision: JumpThrough
  - pos:
    - 10
    - 18
    idx: 54
    collision: JumpThrough
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 776.0
    - 441.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 80.0
    - 153.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 176.0
    - 537.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 480.0
    - 537.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 704.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 344.0
    - 57.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 517.09735
    - 121.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 56.0
    - 249.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 624.0
    - 345.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 624.0
    - 601.5
    element: /elements/decoration/anemones/anemones.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 640.0
    - 409.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 264.0
    - 97.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 232.0
    - 199.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 120.0
    - 585.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 576.0
    - 583.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 448.0
    - 261.0
    element: /elements/environment/snail/snail.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 800.0
    - 534.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 64.0
    - 342.5
    element: /elements/item/mine/mine.element.yaml
  - pos:
    - 608.0
    - 342.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 256.0
    - 214.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 704.0
    - 170.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 512.0
    - 106.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 304.0
    - 630.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 672.0
    - 598.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 96.0
    - 150.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 200.0
    - 534.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 176.0
    - 54.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 592.0
    - 598.5
    element: /elements/item/musket/musket.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 64.0
    - 248.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 296.0
    - 536.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 800.0
    - 440.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 408.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 480.0
    - 536.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 456.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_6.map.yaml`:

```yaml
name: Level 6
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 45
- 15
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 2
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 3
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 8
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 9
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 14
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 15
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 28
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 29
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 34
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 35
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 36
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 40
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 41
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 42
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 28
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 29
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 34
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 35
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 36
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 40
    - 1
    idx: 74
    collision: Solid
  - pos:
    - 41
    - 1
    idx: 1
    collision: Solid
  - pos:
    - 42
    - 1
    idx: 75
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 10
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 14
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 28
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 30
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 34
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 36
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 40
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 2
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 10
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 14
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 15
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 24
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 28
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 29
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 30
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 34
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 36
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 40
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 10
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 14
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 15
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 20
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 28
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 29
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 30
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 34
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 36
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 40
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 10
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 34
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 36
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 40
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 5
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 9
    - 6
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 34
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 35
    - 6
    idx: 35
    collision: Solid
  - pos:
    - 36
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 40
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 7
    idx: 0
    collision: Solid
  - pos:
    - 9
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 7
    idx: 2
    collision: Solid
  - pos:
    - 34
    - 7
    idx: 0
    collision: Solid
  - pos:
    - 35
    - 7
    idx: 1
    collision: Solid
  - pos:
    - 36
    - 7
    idx: 2
    collision: Solid
  - pos:
    - 40
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 40
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 42
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 2
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 9
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 40
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 41
    - 9
    idx: 35
    collision: Solid
  - pos:
    - 42
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 2
    - 10
    idx: 0
    collision: Solid
  - pos:
    - 3
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 10
    idx: 2
    collision: Solid
  - pos:
    - 40
    - 10
    idx: 0
    collision: Solid
  - pos:
    - 41
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 42
    - 10
    idx: 2
    collision: Solid
  elements: []
- id: wood layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 18
    - 10
    idx: 34
    collision: Solid
  - pos:
    - 19
    - 10
    idx: 36
    collision: Solid
  - pos:
    - 25
    - 10
    idx: 34
    collision: Solid
  - pos:
    - 26
    - 10
    idx: 36
    collision: Solid
  - pos:
    - 17
    - 11
    idx: 34
    collision: Solid
  - pos:
    - 18
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 25
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 26
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 27
    - 11
    idx: 36
    collision: Solid
  - pos:
    - 16
    - 12
    idx: 68
    collision: Solid
  - pos:
    - 17
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 12
    idx: 2
    collision: Solid
  - pos:
    - 25
    - 12
    idx: 0
    collision: Solid
  - pos:
    - 26
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 27
    - 12
    idx: 1
    collision: Solid
  - pos:
    - 28
    - 12
    idx: 70
    collision: Solid
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 16
    - 5
    idx: 44
    collision: Empty
  - pos:
    - 20
    - 5
    idx: 44
    collision: Empty
  - pos:
    - 24
    - 5
    idx: 44
    collision: Empty
  - pos:
    - 28
    - 5
    idx: 44
    collision: Empty
  - pos:
    - 16
    - 6
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 6
    idx: 33
    collision: Empty
  - pos:
    - 24
    - 6
    idx: 11
    collision: Empty
  - pos:
    - 28
    - 6
    idx: 33
    collision: Empty
  - pos:
    - 16
    - 7
    idx: 22
    collision: Empty
  - pos:
    - 20
    - 7
    idx: 33
    collision: Empty
  - pos:
    - 24
    - 7
    idx: 33
    collision: Empty
  - pos:
    - 28
    - 7
    idx: 33
    collision: Empty
  - pos:
    - 16
    - 8
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 8
    idx: 11
    collision: Empty
  - pos:
    - 24
    - 8
    idx: 33
    collision: Empty
  - pos:
    - 28
    - 8
    idx: 33
    collision: Empty
  - pos:
    - 16
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 24
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 28
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 16
    - 10
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 10
    idx: 47
    collision: Empty
  - pos:
    - 21
    - 10
    idx: 47
    collision: Empty
  - pos:
    - 22
    - 10
    idx: 47
    collision: Empty
  - pos:
    - 23
    - 10
    idx: 47
    collision: Empty
  - pos:
    - 24
    - 10
    idx: 47
    collision: Empty
  - pos:
    - 28
    - 10
    idx: 22
    collision: Empty
  - pos:
    - 16
    - 11
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 11
    idx: 47
    collision: Empty
  - pos:
    - 21
    - 11
    idx: 50
    collision: Empty
  - pos:
    - 22
    - 11
    idx: 47
    collision: Empty
  - pos:
    - 23
    - 11
    idx: 50
    collision: Empty
  - pos:
    - 24
    - 11
    idx: 47
    collision: Empty
  - pos:
    - 28
    - 11
    idx: 33
    collision: Empty
  - pos:
    - 20
    - 12
    idx: 36
    collision: Empty
  - pos:
    - 21
    - 12
    idx: 36
    collision: Empty
  - pos:
    - 22
    - 12
    idx: 36
    collision: Empty
  - pos:
    - 23
    - 12
    idx: 36
    collision: Empty
  - pos:
    - 24
    - 12
    idx: 36
    collision: Empty
  - pos:
    - 16
    - 13
    idx: 24
    collision: Empty
  - pos:
    - 17
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 18
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 19
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 20
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 21
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 22
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 23
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 24
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 25
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 26
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 27
    - 13
    idx: 25
    collision: Empty
  - pos:
    - 28
    - 13
    idx: 26
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 19
    - 9
    idx: 52
    collision: JumpThrough
  - pos:
    - 20
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 21
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 22
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 23
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 24
    - 9
    idx: 53
    collision: JumpThrough
  - pos:
    - 25
    - 9
    idx: 54
    collision: JumpThrough
  - pos:
    - 9
    - 12
    idx: 52
    collision: JumpThrough
  - pos:
    - 10
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 11
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 12
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 20
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 21
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 22
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 23
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 24
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 29
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 30
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 31
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 32
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 33
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 34
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 35
    - 12
    idx: 54
    collision: JumpThrough
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 112.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 1136.0
    - 89.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 688.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 1336.0
    - 377.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 723.2671
    - 169.5
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 768.0
    - 185.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 704.0
    - 89.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 320.0
    - 281.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 960.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 96.0
    - 377.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 1160.0
    - 281.5
    element: /elements/decoration/anemones/anemones.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 944.0
    - 481.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 312.0
    - 321.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 859.0
    - 232.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 541.0
    - 525.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 656.0
    - 423.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 752.0
    - 423.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 704.0
    - 327.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 296.0
    - 69.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 1336.0
    - 69.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 1120.0
    - 263.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 544.0
    - 423.5
    element: /elements/environment/urchin/urchin.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 776.0
    - 335.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 400.0
    - 438.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 1328.0
    - 362.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 496.0
    - 170.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 944.0
    - 170.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 112.0
    - 362.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 664.0
    - 335.0
    element: /elements/item/grenade/grenade.element.yaml
  - pos:
    - 688.0
    - 438.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 296.0
    - 278.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 1136.0
    - 278.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 768.0
    - 438.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 1040.0
    - 438.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 872.0
    - 438.5
    element: /elements/item/crate/crate.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 328.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 1112.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 280.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 1160.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
- id: foreground
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles: []
  elements: []

```

`assets/map/levels/level_7.map.yaml`:

```yaml
name: Level 7
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 25
- 20
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/coral.atlas.yaml
  tiles:
  - pos:
    - 2
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 3
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 11
    - 0
    idx: 68
    collision: Solid
  - pos:
    - 12
    - 0
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 0
    idx: 70
    collision: Solid
  - pos:
    - 18
    - 0
    idx: 34
    collision: Solid
  - pos:
    - 19
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 0
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 0
    idx: 36
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 17
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 19
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 18
    - 2
    idx: 17
    collision: Solid
  - pos:
    - 19
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 19
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 18
    - 3
    idx: 17
    collision: Solid
  - pos:
    - 19
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 68
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 2
    collision: Solid
  - pos:
    - 18
    - 4
    idx: 0
    collision: Solid
  - pos:
    - 19
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 4
    idx: 70
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 34
    collision: Solid
  - pos:
    - 2
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 8
    idx: 36
    collision: Solid
  - pos:
    - 20
    - 8
    idx: 34
    collision: Solid
  - pos:
    - 21
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 8
    idx: 36
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 10
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 11
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 12
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 13
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 14
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 15
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 10
    - 16
    idx: 34
    collision: Solid
  - pos:
    - 11
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 16
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 16
    idx: 36
    collision: Solid
  - pos:
    - 20
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 22
    - 16
    idx: 18
    collision: Solid
  - pos:
    - 23
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 0
    - 17
    idx: 68
    collision: Solid
  - pos:
    - 1
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 2
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 10
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 11
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 20
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 21
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 23
    - 17
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 17
    idx: 70
    collision: Solid
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 12
    - 1
    idx: 44
    collision: Empty
  - pos:
    - 12
    - 2
    idx: 33
    collision: Empty
  - pos:
    - 12
    - 3
    idx: 33
    collision: Empty
  - pos:
    - 15
    - 3
    idx: 4
    collision: Empty
  - pos:
    - 10
    - 4
    idx: 2
    collision: Empty
  - pos:
    - 12
    - 4
    idx: 11
    collision: Empty
  - pos:
    - 15
    - 4
    idx: 4
    collision: Empty
  - pos:
    - 10
    - 5
    idx: 2
    collision: Empty
  - pos:
    - 11
    - 5
    idx: 4
    collision: Empty
  - pos:
    - 12
    - 5
    idx: 33
    collision: Empty
  - pos:
    - 14
    - 5
    idx: 2
    collision: Empty
  - pos:
    - 15
    - 5
    idx: 4
    collision: Empty
  - pos:
    - 10
    - 6
    idx: 2
    collision: Empty
  - pos:
    - 11
    - 6
    idx: 4
    collision: Empty
  - pos:
    - 12
    - 6
    idx: 33
    collision: Empty
  - pos:
    - 14
    - 6
    idx: 2
    collision: Empty
  - pos:
    - 15
    - 6
    idx: 4
    collision: Empty
  - pos:
    - 12
    - 7
    idx: 33
    collision: Empty
  - pos:
    - 12
    - 8
    idx: 11
    collision: Empty
  - pos:
    - 12
    - 9
    idx: 33
    collision: Empty
  - pos:
    - 12
    - 10
    idx: 33
    collision: Empty
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 9
    - 6
    idx: 52
    collision: JumpThrough
  - pos:
    - 10
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 11
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 12
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 6
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 6
    idx: 54
    collision: JumpThrough
  - pos:
    - 5
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 8
    idx: 54
    collision: JumpThrough
  - pos:
    - 17
    - 8
    idx: 52
    collision: JumpThrough
  - pos:
    - 18
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 19
    - 8
    idx: 53
    collision: JumpThrough
  - pos:
    - 11
    - 10
    idx: 52
    collision: JumpThrough
  - pos:
    - 12
    - 10
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 10
    idx: 54
    collision: JumpThrough
  - pos:
    - 5
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 12
    idx: 54
    collision: JumpThrough
  - pos:
    - 16
    - 12
    idx: 52
    collision: JumpThrough
  - pos:
    - 17
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 18
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 19
    - 12
    idx: 53
    collision: JumpThrough
  - pos:
    - 5
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 16
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 17
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 18
    - 17
    idx: 53
    collision: JumpThrough
  - pos:
    - 19
    - 17
    idx: 53
    collision: JumpThrough
  elements: []
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 288.0
    - 321.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 416.0
    - 449.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 488.0
    - 265.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 504.0
    - 633.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 272.0
    - 583.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 648.0
    - 583.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 344.0
    - 231.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 544.0
    - 423.5
    element: /elements/environment/urchin/urchin.element.yaml
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 392.0
    - 601.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 560.0
    - 441.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 416.0
    - 57.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 168.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 288.0
    - 601.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 112.0
    - 601.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 632.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 88.0
    - 185.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 616.0
    - 426.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 184.0
    - 426.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 400.0
    - 42.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 432.0
    - 42.0
    element: /elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 368.0
    - 42.0
    element: /elements/environment/sproinger/sproinger.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 680.0
    - 598.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 216.0
    - 310.5
    element: /elements/item/machine_gun/machine_gun.element.yaml
  - pos:
    - 248.0
    - 438.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 88.0
    - 182.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 712.0
    - 182.5
    element: /elements/item/periscope/periscope.element.yaml
  - pos:
    - 552.0
    - 438.5
    element: /elements/item/crate/crate.element.yaml
  - pos:
    - 120.0
    - 598.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 584.0
    - 310.5
    element: /elements/item/buss/buss.element.yaml
  - pos:
    - 400.0
    - 374.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 392.0
    - 586.0
    element: /elements/item/sword/sword.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 184.0
    - 184.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 752.0
    - 600.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 624.0
    - 184.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 48.0
    - 600.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/levels/level_8.map.yaml`:

```yaml
name: Level 8
background:
  speed: [0.09, 0.04]
  layers:
  - image: /map/resources/background_04.png
    size: [896.0, 480.0]
    depth: 6.0
    scale: 6.0
    offset: [0.0, 0.0]
  - image: /map/resources/background_03.png
    size: [896.0, 480.0]
    depth: 5.8
    scale: 2.2
    offset: [100.0, 0.0]
  - image: /map/resources/background_02.png
    size: [896.0, 480.0]
    depth: 4.0
    scale: 2.2
    offset: [600.0, 0.0]
  - image: /map/resources/background_01.png
    size: [896.0, 480.0]
    depth: 1.0
    scale: 2.2
    offset: [500.0, 0.0]
background_color: rgba(126, 168, 166, 255)
grid_size: [27, 21]
tile_size: [32.0, 32.0]
layers:
- id: main layer
  tilemap: /map/resources/ground_wood.atlas.yaml
  tiles:
  - { pos: [8, 0], idx: 34, collision: Solid }
  - { pos: [9, 0], idx: 35, collision: Solid }
  - { pos: [10, 0], idx: 35, collision: Solid }
  - { pos: [11, 0], idx: 35, collision: Solid }
  - { pos: [12, 0], idx: 35, collision: Solid }
  - { pos: [13, 0], idx: 35, collision: Solid }
  - { pos: [14, 0], idx: 35, collision: Solid }
  - { pos: [15, 0], idx: 35, collision: Solid }
  - { pos: [16, 0], idx: 35, collision: Solid }
  - { pos: [17, 0], idx: 35, collision: Solid }
  - { pos: [18, 0], idx: 36, collision: Solid }
  - { pos: [7, 1], idx: 34, collision: Solid }
  - { pos: [8, 1], idx: 18, collision: Solid }
  - { pos: [9, 1], idx: 18, collision: Solid }
  - { pos: [10, 1], idx: 18, collision: Solid }
  - { pos: [11, 1], idx: 18, collision: Solid }
  - { pos: [12, 1], idx: 18, collision: Solid }
  - { pos: [13, 1], idx: 18, collision: Solid }
  - { pos: [14, 1], idx: 18, collision: Solid }
  - { pos: [15, 1], idx: 18, collision: Solid }
  - { pos: [16, 1], idx: 18, collision: Solid }
  - { pos: [17, 1], idx: 18, collision: Solid }
  - { pos: [18, 1], idx: 18, collision: Solid }
  - { pos: [19, 1], idx: 36, collision: Solid }
  - { pos: [6, 2], idx: 34, collision: Solid }
  - { pos: [7, 2], idx: 18, collision: Solid }
  - { pos: [8, 2], idx: 18, collision: Solid }
  - { pos: [9, 2], idx: 18, collision: Solid }
  - { pos: [10, 2], idx: 18, collision: Solid }
  - { pos: [11, 2], idx: 18, collision: Solid }
  - { pos: [12, 2], idx: 18, collision: Solid }
  - { pos: [13, 2], idx: 18, collision: Solid }
  - { pos: [14, 2], idx: 18, collision: Solid }
  - { pos: [15, 2], idx: 18, collision: Solid }
  - { pos: [16, 2], idx: 18, collision: Solid }
  - { pos: [17, 2], idx: 18, collision: Solid }
  - { pos: [18, 2], idx: 18, collision: Solid }
  - { pos: [19, 2], idx: 18, collision: Solid }
  - { pos: [20, 2], idx: 36, collision: Solid }
  - { pos: [5, 3], idx: 34, collision: Solid }
  - { pos: [6, 3], idx: 18, collision: Solid }
  - { pos: [7, 3], idx: 18, collision: Solid }
  - { pos: [8, 3], idx: 18, collision: Solid }
  - { pos: [9, 3], idx: 18, collision: Solid }
  - { pos: [10, 3], idx: 18, collision: Solid }
  - { pos: [11, 3], idx: 18, collision: Solid }
  - { pos: [12, 3], idx: 18, collision: Solid }
  - { pos: [13, 3], idx: 18, collision: Solid }
  - { pos: [14, 3], idx: 18, collision: Solid }
  - { pos: [15, 3], idx: 18, collision: Solid }
  - { pos: [16, 3], idx: 18, collision: Solid }
  - { pos: [17, 3], idx: 18, collision: Solid }
  - { pos: [18, 3], idx: 18, collision: Solid }
  - { pos: [19, 3], idx: 18, collision: Solid }
  - { pos: [20, 3], idx: 18, collision: Solid }
  - { pos: [21, 3], idx: 36, collision: Solid }
  - { pos: [5, 4], idx: 0, collision: Solid }
  - { pos: [6, 4], idx: 1, collision: Solid }
  - { pos: [7, 4], idx: 1, collision: Solid }
  - { pos: [8, 4], idx: 1, collision: Solid }
  - { pos: [9, 4], idx: 1, collision: Solid }
  - { pos: [10, 4], idx: 1, collision: Solid }
  - { pos: [11, 4], idx: 1, collision: Solid }
  - { pos: [12, 4], idx: 1, collision: Solid }
  - { pos: [13, 4], idx: 1, collision: Solid }
  - { pos: [14, 4], idx: 1, collision: Solid }
  - { pos: [15, 4], idx: 1, collision: Solid }
  - { pos: [16, 4], idx: 1, collision: Solid }
  - { pos: [17, 4], idx: 1, collision: Solid }
  - { pos: [18, 4], idx: 1, collision: Solid }
  - { pos: [19, 4], idx: 1, collision: Solid }
  - { pos: [20, 4], idx: 1, collision: Solid }
  - { pos: [21, 4], idx: 2, collision: Solid }
  - { pos: [3, 7], idx: 34, collision: Solid }
  - { pos: [4, 7], idx: 77, collision: Solid }
  - { pos: [5, 7], idx: 70, collision: Solid }
  - { pos: [10, 7], idx: 68, collision: Solid }
  - { pos: [11, 7], idx: 69, collision: Solid }
  - { pos: [12, 7], idx: 69, collision: Solid }
  - { pos: [13, 7], idx: 69, collision: Solid }
  - { pos: [14, 7], idx: 69, collision: Solid }
  - { pos: [15, 7], idx: 69, collision: Solid }
  - { pos: [16, 7], idx: 70, collision: Solid }
  - { pos: [21, 7], idx: 68, collision: Solid }
  - { pos: [22, 7], idx: 78, collision: Solid }
  - { pos: [23, 7], idx: 36, collision: Solid }
  - { pos: [3, 8], idx: 17, collision: Solid }
  - { pos: [4, 8], idx: 19, collision: Solid }
  - { pos: [22, 8], idx: 17, collision: Solid }
  - { pos: [23, 8], idx: 19, collision: Solid }
  - { pos: [3, 9], idx: 17, collision: Solid }
  - { pos: [4, 9], idx: 19, collision: Solid }
  - { pos: [22, 9], idx: 17, collision: Solid }
  - { pos: [23, 9], idx: 19, collision: Solid }
  - { pos: [3, 10], idx: 17, collision: Solid }
  - { pos: [4, 10], idx: 19, collision: Solid }
  - { pos: [7, 10], idx: 68, collision: Solid }
  - { pos: [8, 10], idx: 69, collision: Solid }
  - { pos: [9, 10], idx: 69, collision: Solid }
  - { pos: [10, 10], idx: 70, collision: Solid }
  - { pos: [16, 10], idx: 68, collision: Solid }
  - { pos: [17, 10], idx: 69, collision: Solid }
  - { pos: [18, 10], idx: 69, collision: Solid }
  - { pos: [19, 10], idx: 70, collision: Solid }
  - { pos: [22, 10], idx: 17, collision: Solid }
  - { pos: [23, 10], idx: 19, collision: Solid }
  - { pos: [3, 11], idx: 17, collision: Solid }
  - { pos: [4, 11], idx: 19, collision: Solid }
  - { pos: [22, 11], idx: 17, collision: Solid }
  - { pos: [23, 11], idx: 19, collision: Solid }
  - { pos: [3, 12], idx: 0, collision: Solid }
  - { pos: [4, 12], idx: 2, collision: Solid }
  - { pos: [22, 12], idx: 0, collision: Solid }
  - { pos: [23, 12], idx: 2, collision: Solid }
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [5, 5], idx: 46, collision: Empty }
  - { pos: [6, 5], idx: 47, collision: Empty }
  - { pos: [7, 5], idx: 47, collision: Empty }
  - { pos: [8, 5], idx: 47, collision: Empty }
  - { pos: [9, 5], idx: 47, collision: Empty }
  - { pos: [10, 5], idx: 46, collision: Empty }
  - { pos: [11, 5], idx: 47, collision: Empty }
  - { pos: [12, 5], idx: 47, collision: Empty }
  - { pos: [13, 5], idx: 47, collision: Empty }
  - { pos: [14, 5], idx: 47, collision: Empty }
  - { pos: [15, 5], idx: 47, collision: Empty }
  - { pos: [16, 5], idx: 48, collision: Empty }
  - { pos: [17, 5], idx: 47, collision: Empty }
  - { pos: [18, 5], idx: 47, collision: Empty }
  - { pos: [19, 5], idx: 47, collision: Empty }
  - { pos: [20, 5], idx: 47, collision: Empty }
  - { pos: [21, 5], idx: 48, collision: Empty }
  - { pos: [5, 6], idx: 35, collision: Empty }
  - { pos: [6, 6], idx: 47, collision: Empty }
  - { pos: [7, 6], idx: 47, collision: Empty }
  - { pos: [8, 6], idx: 47, collision: Empty }
  - { pos: [9, 6], idx: 47, collision: Empty }
  - { pos: [10, 6], idx: 35, collision: Empty }
  - { pos: [11, 6], idx: 47, collision: Empty }
  - { pos: [12, 6], idx: 47, collision: Empty }
  - { pos: [13, 6], idx: 47, collision: Empty }
  - { pos: [14, 6], idx: 47, collision: Empty }
  - { pos: [15, 6], idx: 47, collision: Empty }
  - { pos: [16, 6], idx: 37, collision: Empty }
  - { pos: [17, 6], idx: 47, collision: Empty }
  - { pos: [18, 6], idx: 47, collision: Empty }
  - { pos: [19, 6], idx: 47, collision: Empty }
  - { pos: [20, 6], idx: 47, collision: Empty }
  - { pos: [21, 6], idx: 37, collision: Empty }
  - { pos: [6, 7], idx: 36, collision: Empty }
  - { pos: [7, 7], idx: 36, collision: Empty }
  - { pos: [8, 7], idx: 36, collision: Empty }
  - { pos: [9, 7], idx: 36, collision: Empty }
  - { pos: [17, 7], idx: 36, collision: Empty }
  - { pos: [18, 7], idx: 36, collision: Empty }
  - { pos: [19, 7], idx: 36, collision: Empty }
  - { pos: [20, 7], idx: 36, collision: Empty }
  - { pos: [5, 8], idx: 47, collision: Empty }
  - { pos: [6, 8], idx: 47, collision: Empty }
  - { pos: [7, 8], idx: 47, collision: Empty }
  - { pos: [8, 8], idx: 47, collision: Empty }
  - { pos: [9, 8], idx: 47, collision: Empty }
  - { pos: [10, 8], idx: 48, collision: Empty }
  - { pos: [11, 8], idx: 47, collision: Empty }
  - { pos: [12, 8], idx: 47, collision: Empty }
  - { pos: [13, 8], idx: 44, collision: Empty }
  - { pos: [14, 8], idx: 47, collision: Empty }
  - { pos: [15, 8], idx: 47, collision: Empty }
  - { pos: [16, 8], idx: 46, collision: Empty }
  - { pos: [17, 8], idx: 47, collision: Empty }
  - { pos: [18, 8], idx: 47, collision: Empty }
  - { pos: [19, 8], idx: 47, collision: Empty }
  - { pos: [20, 8], idx: 47, collision: Empty }
  - { pos: [21, 8], idx: 47, collision: Empty }
  - { pos: [5, 9], idx: 47, collision: Empty }
  - { pos: [6, 9], idx: 47, collision: Empty }
  - { pos: [7, 9], idx: 36, collision: Empty }
  - { pos: [8, 9], idx: 36, collision: Empty }
  - { pos: [9, 9], idx: 36, collision: Empty }
  - { pos: [10, 9], idx: 37, collision: Empty }
  - { pos: [11, 9], idx: 47, collision: Empty }
  - { pos: [12, 9], idx: 47, collision: Empty }
  - { pos: [13, 9], idx: 33, collision: Empty }
  - { pos: [14, 9], idx: 47, collision: Empty }
  - { pos: [15, 9], idx: 47, collision: Empty }
  - { pos: [16, 9], idx: 35, collision: Empty }
  - { pos: [17, 9], idx: 36, collision: Empty }
  - { pos: [18, 9], idx: 36, collision: Empty }
  - { pos: [19, 9], idx: 36, collision: Empty }
  - { pos: [20, 9], idx: 47, collision: Empty }
  - { pos: [21, 9], idx: 47, collision: Empty }
  - { pos: [5, 10], idx: 36, collision: Empty }
  - { pos: [6, 10], idx: 36, collision: Empty }
  - { pos: [11, 10], idx: 36, collision: Empty }
  - { pos: [12, 10], idx: 36, collision: Empty }
  - { pos: [13, 10], idx: 22, collision: Empty }
  - { pos: [14, 10], idx: 36, collision: Empty }
  - { pos: [15, 10], idx: 36, collision: Empty }
  - { pos: [20, 10], idx: 36, collision: Empty }
  - { pos: [21, 10], idx: 36, collision: Empty }
  - { pos: [8, 11], idx: 44, collision: Empty }
  - { pos: [13, 11], idx: 33, collision: Empty }
  - { pos: [18, 11], idx: 44, collision: Empty }
  - { pos: [8, 12], idx: 11, collision: Empty }
  - { pos: [13, 12], idx: 33, collision: Empty }
  - { pos: [18, 12], idx: 33, collision: Empty }
  - { pos: [8, 13], idx: 33, collision: JumpThrough }
  - { pos: [13, 13], idx: 22, collision: Empty }
  - { pos: [18, 13], idx: 11, collision: JumpThrough }
  - { pos: [8, 14], idx: 0, collision: Empty }
  - { pos: [13, 14], idx: 33, collision: Empty }
  - { pos: [18, 14], idx: 0, collision: Empty }
  - { pos: [13, 15], idx: 33, collision: Empty }
  - { pos: [11, 16], idx: 16, collision: Empty }
  - { pos: [12, 16], idx: 17, collision: Empty }
  - { pos: [13, 16], idx: 18, collision: Empty }
  - { pos: [11, 17], idx: 5, collision: Empty }
  - { pos: [12, 17], idx: 6, collision: Empty }
  - { pos: [13, 17], idx: 7, collision: Empty }
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - { pos: [312.0, 185.5], element: /elements/decoration/anemones/anemones.element.yaml }
  - { pos: [504.0, 281.5], element: /elements/decoration/anemones/anemones.element.yaml }
  - { pos: [136.0, 441.5], element: /elements/decoration/anemones/anemones.element.yaml }
- id: items
  tilemap: null
  tiles: []
  elements:
  - { pos: [496.0, 170.0], element: /elements/item/sword/sword.element.yaml }
  - { pos: [320.0, 374.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [368.0, 170.0], element: /elements/item/sword/sword.element.yaml }
  - { pos: [544.0, 374.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [432.0, 534.5], element: /elements/item/stomp_boots/stomp_boots.element.yaml }
  - { pos: [648.0, 182.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [216.0, 182.5], element: /elements/item/mine/mine.element.yaml }
  - { pos: [272.0, 471.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [592.0, 471.0], element: /elements/item/grenade/grenade.element.yaml }
  - { pos: [736.0, 426.0], element: /elements/item/sword/sword.element.yaml }
  - { pos: [128.0, 426.0], element: /elements/item/sword/sword.element.yaml }
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - { pos: [400.0, 440.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [496.0, 280.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [368.0, 280.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
  - { pos: [464.0, 440.0], element: /elements/environment/player_spawner/player_spawner.element.yaml }
- id: critters
  tilemap: null
  tiles: []
  elements:
  - { pos: [556.0, 456.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [544.0, 359.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [231.0, 478.0], element: /elements/environment/fish_school/fish_school.element.yaml }
  - { pos: [376.0, 263.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [464.0, 263.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [568.0, 167.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [408.0, 423.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [288.0, 359.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [304.0, 167.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [608.0, 359.5], element: /elements/environment/crab/crab.element.yaml }
  - { pos: [448.0, 519.5], element: /elements/environment/urchin/urchin.element.yaml }
- id: foreground
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [12, 8], idx: 3, collision: Empty }
  - { pos: [14, 8], idx: 2, collision: Empty }
  - { pos: [15, 8], idx: 4, collision: Empty }
  - { pos: [12, 9], idx: 3, collision: Empty }
  - { pos: [14, 9], idx: 3, collision: Empty }
  - { pos: [15, 9], idx: 4, collision: Empty }
  - { pos: [11, 10], idx: 2, collision: Empty }
  - { pos: [12, 10], idx: 3, collision: Empty }
  - { pos: [14, 10], idx: 2, collision: Empty }
  - { pos: [15, 10], idx: 4, collision: Empty }
  - { pos: [11, 11], idx: 2, collision: Empty }
  - { pos: [12, 11], idx: 4, collision: Empty }
  - { pos: [14, 11], idx: 3, collision: Empty }
  - { pos: [15, 11], idx: 4, collision: Empty }
  - { pos: [11, 12], idx: 2, collision: Empty }
  - { pos: [12, 12], idx: 3, collision: Empty }
  - { pos: [14, 12], idx: 3, collision: Empty }
  - { pos: [8, 13], idx: 10, collision: Empty }
  - { pos: [13, 13], idx: 3, collision: Empty }
  - { pos: [14, 13], idx: 4, collision: Empty }
  - { pos: [18, 13], idx: 10, collision: Empty }
  - { pos: [7, 14], idx: 30, collision: Empty }
  - { pos: [8, 14], idx: 31, collision: Empty }
  - { pos: [9, 14], idx: 32, collision: Empty }
  - { pos: [12, 14], idx: 2, collision: Empty }
  - { pos: [13, 14], idx: 3, collision: Empty }
  - { pos: [17, 14], idx: 30, collision: Empty }
  - { pos: [18, 14], idx: 31, collision: Empty }
  - { pos: [19, 14], idx: 32, collision: Empty }
  - { pos: [12, 15], idx: 2, collision: Empty }
  - { pos: [13, 15], idx: 3, collision: Empty }
  - { pos: [14, 15], idx: 4, collision: Empty }
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - { pos: [11, 12], idx: 52, collision: JumpThrough }
  - { pos: [12, 12], idx: 53, collision: JumpThrough }
  - { pos: [13, 12], idx: 53, collision: JumpThrough }
  - { pos: [14, 12], idx: 53, collision: JumpThrough }
  - { pos: [15, 12], idx: 54, collision: JumpThrough }
  - { pos: [12, 15], idx: 52, collision: JumpThrough }
  - { pos: [13, 15], idx: 53, collision: JumpThrough }
  - { pos: [14, 15], idx: 54, collision: JumpThrough }
  elements: []

```

`assets/map/levels/level_9.map.yaml`:

```yaml
name: Level 9
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: /map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: /map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: /map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: /map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(126, 168, 166, 255)
grid_size:
- 23
- 26
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: /map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 1
    - 3
    idx: 34
    collision: Solid
  - pos:
    - 2
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 3
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 3
    idx: 36
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 4
    idx: 23
    collision: Solid
  - pos:
    - 3
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 4
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 4
    idx: 24
    collision: Solid
  - pos:
    - 21
    - 4
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 5
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 5
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 6
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 6
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 7
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 7
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 8
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 8
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 10
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 10
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 11
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 11
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 12
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 12
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 13
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 13
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 14
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 14
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 15
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 15
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 17
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 17
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 20
    - 18
    idx: 17
    collision: Solid
  - pos:
    - 21
    - 18
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 19
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 19
    idx: 36
    collision: Solid
  - pos:
    - 19
    - 19
    idx: 34
    collision: Solid
  - pos:
    - 20
    - 19
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 19
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 19
    - 20
    idx: 17
    collision: Solid
  - pos:
    - 20
    - 20
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 20
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 21
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 21
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 21
    idx: 36
    collision: Solid
  - pos:
    - 17
    - 21
    idx: 34
    collision: Solid
  - pos:
    - 18
    - 21
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 21
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 21
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 22
    idx: 17
    collision: Solid
  - pos:
    - 2
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 3
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 4
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 5
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 6
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 22
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 18
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 19
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 20
    - 22
    idx: 18
    collision: Solid
  - pos:
    - 21
    - 22
    idx: 19
    collision: Solid
  - pos:
    - 1
    - 23
    idx: 0
    collision: Solid
  - pos:
    - 2
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 5
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 23
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 23
    idx: 2
    collision: Solid
  elements: []
- id: metal layer
  tilemap: /map/resources/ground_metal.atlas.yaml
  tiles:
  - pos:
    - 9
    - 8
    idx: 83
    collision: Solid
  - pos:
    - 10
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 8
    idx: 84
    collision: Solid
  - pos:
    - 9
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 13
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 9
    - 10
    idx: 0
    collision: Solid
  - pos:
    - 10
    - 10
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 10
    idx: 69
    collision: Solid
  - pos:
    - 12
    - 10
    idx: 69
    collision: Solid
  - pos:
    - 13
    - 10
    idx: 2
    collision: Solid
  - pos:
    - 11
    - 15
    idx: 72
    collision: Solid
  elements: []
- id: platforms
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 3
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 4
    - 7
    idx: 54
    collision: JumpThrough
  - pos:
    - 18
    - 7
    idx: 52
    collision: JumpThrough
  - pos:
    - 19
    - 7
    idx: 53
    collision: JumpThrough
  - pos:
    - 6
    - 10
    idx: 52
    collision: JumpThrough
  - pos:
    - 7
    - 10
    idx: 53
    collision: JumpThrough
  - pos:
    - 8
    - 10
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 10
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 10
    idx: 53
    collision: JumpThrough
  - pos:
    - 16
    - 10
    idx: 54
    collision: JumpThrough
  - pos:
    - 3
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 4
    - 13
    idx: 54
    collision: JumpThrough
  - pos:
    - 18
    - 13
    idx: 52
    collision: JumpThrough
  - pos:
    - 19
    - 13
    idx: 53
    collision: JumpThrough
  - pos:
    - 7
    - 15
    idx: 52
    collision: JumpThrough
  - pos:
    - 8
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 9
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 10
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 12
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 13
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 14
    - 15
    idx: 53
    collision: JumpThrough
  - pos:
    - 15
    - 15
    idx: 54
    collision: JumpThrough
  elements: []
- id: background
  tilemap: /map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 10
    - 7
    idx: 9
    collision: Empty
  - pos:
    - 12
    - 7
    idx: 9
    collision: Empty
  - pos:
    - 10
    - 9
    idx: 13
    collision: Empty
  - pos:
    - 11
    - 9
    idx: 13
    collision: Empty
  - pos:
    - 12
    - 9
    idx: 13
    collision: Empty
  elements: []
- id: decorations
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 408.0
    - 185.5
    element: /elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 184.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 272.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 584.0
    - 185.5
    element: /elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 304.0
    - 377.5
    element: /elements/decoration/anemones/anemones.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 232.0
    - 428.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 414.0
    - 208.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 495.0
    - 602.0
    element: /elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 384.0
    - 359.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 336.0
    - 519.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 256.0
    - 167.5
    element: /elements/environment/crab/crab.element.yaml
  - pos:
    - 360.0
    - 293.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 568.0
    - 165.0
    element: /elements/environment/snail/snail.element.yaml
  - pos:
    - 440.0
    - 167.5
    element: /elements/environment/urchin/urchin.element.yaml
  - pos:
    - 136.0
    - 455.5
    element: /elements/environment/urchin/urchin.element.yaml
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 368.0
    - 534.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 312.0
    - 374.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 424.0
    - 374.5
    element: /elements/item/musket/musket.element.yaml
  - pos:
    - 368.0
    - 170.0
    element: /elements/item/sword/sword.element.yaml
  - pos:
    - 128.0
    - 470.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 608.0
    - 470.5
    element: /elements/item/kick_bomb/kick_bomb.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 216.0
    - 376.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 520.0
    - 376.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 128.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 608.0
    - 280.0
    element: /elements/environment/player_spawner/player_spawner.element.yaml

```

`assets/map/resources/coral.atlas.yaml`:

```yaml
image: ./coral.png
tile_size: [32, 32]
columns: 17
rows: 10

```

`assets/map/resources/default_tileset.atlas.yaml`:

```yaml
image: ./default_tileset.png
tile_size: [32, 32]
columns: 7
rows: 9
```

`assets/map/resources/ground_metal.atlas.yaml`:

```yaml
image: ./ground_metal.png
tile_size: [32, 32]
columns: 17
rows: 5

```

`assets/map/resources/ground_rock.atlas.yaml`:

```yaml
image: ./ground_rock.png
tile_size: [32, 32]
columns: 17
rows: 5

```

`assets/map/resources/ground_wood.atlas.yaml`:

```yaml
image: ./ground_wood.png
tile_size: [32, 32]
columns: 17
rows: 5

```

`assets/map/resources/ship_decorations.atlas.yaml`:

```yaml
image: ./ship_decorations.png
tile_size: [32, 32]
columns: 11
rows: 5
tile_collision:
  52:
    min:
    - 0.2
    - 0.75
    max:
    - 1.0
    - 1.0
  53:
    min:
    - 0.0
    - 0.75
    max:
    - 1.0
    - 1.0
  54:
    min:
    - 0.0
    - 0.75
    max:
    - 0.8
    - 1.0

```

`assets/pack.yaml`:

```yaml
root: game.yaml
schemas:
  - plugins/anchor/AnchorMeta.schema.yaml
  - plugins/anchor/IdleAnchor.schema.yaml
  - plugins/anchor/FallingAnchor.schema.yaml

```

`assets/player/emotes/alarm.atlas.yaml`:

```yaml
image: ./alarm.png
tile_size: [46, 32]
columns: 2
rows: 1

```

`assets/player/emotes/alarm.emote.yaml`:

```yaml
name: Alarm
atlas: ./alarm.atlas.yaml

offset: [11, 15]
animation:
  # Matches player face FPS
  fps: 9
  frames:
    - 1
    - 0

```

`assets/player/hats/bonnet/bonnet.atlas.yaml`:

```yaml
image: ./bonnet.png
tile_size: [35, 25]
columns: 1
rows: 1

```

`assets/player/hats/bonnet/bonnet.hat.yaml`:

```yaml
name: Bonnet Hat
atlas: ./bonnet.atlas.yaml

offset: [-11, 28]
body_size: [35, 25]

```

`assets/player/hats/bow/bow.atlas.yaml`:

```yaml
image: ./bow.png
tile_size: [23, 19]
columns: 1
rows: 1

```

`assets/player/hats/bow/bow.hat.yaml`:

```yaml
name: Bow Hat
atlas: ./bow.atlas.yaml

offset: [-10, 28]
body_size: [23, 19]

```

`assets/player/hats/bucket/bucket.atlas.yaml`:

```yaml
image: ./bucket.png
tile_size: [34, 33]
columns: 1
rows: 1

```

`assets/player/hats/bucket/bucket.hat.yaml`:

```yaml
name: Bucket Hat
atlas: ./bucket.atlas.yaml

offset: [-3, 31]
body_size: [34, 33]

```

`assets/player/hats/chef/chef.atlas.yaml`:

```yaml
image: ./chef.png
tile_size: [35, 28]
columns: 1
rows: 1

```

`assets/player/hats/chef/chef.hat.yaml`:

```yaml
name: Chef Hat
atlas: ./chef.atlas.yaml

offset: [-6, 36]
body_size: [35, 28]

```

`assets/player/hats/chest/chest.atlas.yaml`:

```yaml
image: ./chest.png
tile_size: [36, 31]
columns: 1
rows: 1

```

`assets/player/hats/chest/chest.hat.yaml`:

```yaml
name: Chest Hat
atlas: ./chest.atlas.yaml

offset: [-3, 40]
body_size: [36, 31]

```

`assets/player/hats/cowboy/cowboy.atlas.yaml`:

```yaml
image: ./cowboy.png
tile_size: [49, 25]
columns: 1
rows: 1

```

`assets/player/hats/cowboy/cowboy.hat.yaml`:

```yaml
name: Cowboy Hat
atlas: ./cowboy.atlas.yaml

offset: [-5, 27]
body_size: [49, 25]

```

`assets/player/hats/crown/crown.atlas.yaml`:

```yaml
image: ./crown.png
tile_size: [32, 28]
columns: 1
rows: 1

```

`assets/player/hats/crown/crown.hat.yaml`:

```yaml
name: Crown Hat
atlas: ./crown.atlas.yaml

offset: [-4, 31]
body_size: [32, 28]

```

`assets/player/hats/diving_goggles/diving_goggles.atlas.yaml`:

```yaml
image: ./diving_goggles.png
tile_size: [36, 23]
columns: 1
rows: 1

```

`assets/player/hats/diving_goggles/diving_goggles.hat.yaml`:

```yaml
name: Diving Goggles Hat
atlas: ./diving_goggles.atlas.yaml

offset: [-1, 28]
body_size: [36, 23]

```

`assets/player/hats/fisherman/fisherman.atlas.yaml`:

```yaml
image: ./fisherman.png
tile_size: [37, 28]
columns: 1
rows: 1

```

`assets/player/hats/fisherman/fisherman.hat.yaml`:

```yaml
name: Fisherman Hat
atlas: ./fisherman.atlas.yaml

offset: [-2, 26]
body_size: [37, 28]

```

`assets/player/hats/pineapple/pineapple.atlas.yaml`:

```yaml
image: ./pineapple.png
tile_size: [34, 39]
columns: 1
rows: 1

```

`assets/player/hats/pineapple/pineapple.hat.yaml`:

```yaml
name: Pineapple Hat
atlas: ./pineapple.atlas.yaml

offset: [-4, 40]
body_size: [34, 39]

```

`assets/player/hats/pirate/pirate.atlas.yaml`:

```yaml
image: ./pirate.png
tile_size: [50, 29]
columns: 1
rows: 1

```

`assets/player/hats/pirate/pirate.hat.yaml`:

```yaml
name: Pirate Hat
atlas: ./pirate.atlas.yaml

offset: [-2, 33]
body_size: [50, 29]

```

`assets/player/hats/pot/pot.atlas.yaml`:

```yaml
image: ./pot.png
tile_size: [38, 40]
columns: 1
rows: 1

```

`assets/player/hats/pot/pot.hat.yaml`:

```yaml
name: Pot Hat
atlas: ./pot.atlas.yaml

offset: [-2, 36]
body_size: [38, 40]

```

`assets/player/hats/pufferfish/pufferfish.atlas.yaml`:

```yaml
image: ./pufferfish.png
tile_size: [41, 39]
columns: 1
rows: 1

```

`assets/player/hats/pufferfish/pufferfish.hat.yaml`:

```yaml
name: Pufferfish Hat
atlas: ./pufferfish.atlas.yaml

offset: [-2, 32]
body_size: [41, 39]

```

`assets/player/hats/spicy_lobster/spicy_lobster.atlas.yaml`:

```yaml
image: ./spicy_lobster.png
tile_size: [50, 34]
columns: 1
rows: 1

```

`assets/player/hats/spicy_lobster/spicy_lobster.hat.yaml`:

```yaml
name: Spicy Lobster Hat
atlas: ./spicy_lobster.atlas.yaml

offset: [-3, 30]
body_size: [50, 34]

```

`assets/player/hats/straw/straw.atlas.yaml`:

```yaml
image: ./straw.png
tile_size: [46, 29]
columns: 1
rows: 1

```

`assets/player/hats/straw/straw.hat.yaml`:

```yaml
name: Straw Hat
atlas: ./straw.atlas.yaml

offset: [-3, 28]
body_size: [46, 29]

```

`assets/player/hats/topper/topper.atlas.yaml`:

```yaml
image: ./topper.png
tile_size: [31, 34]
columns: 1
rows: 1

```

`assets/player/hats/topper/topper.hat.yaml`:

```yaml
name: Topper Hat
atlas: ./topper.atlas.yaml

offset: [0, 42]
body_size: [31, 34]

```

`assets/player/hats/unicorn/unicorn.atlas.yaml`:

```yaml
image: ./unicorn.png
tile_size: [30, 37]
columns: 1
rows: 1

```

`assets/player/hats/unicorn/unicorn.hat.yaml`:

```yaml
name: Unicorn Hat
atlas: ./unicorn.atlas.yaml

offset: [-4, 26]
body_size: [30, 37]

```

`assets/player/hats/viking/viking.atlas.yaml`:

```yaml
image: ./viking.png
tile_size: [37, 28]
columns: 1
rows: 1

```

`assets/player/hats/viking/viking.hat.yaml`:

```yaml
name: Viking Hat
atlas: ./viking.atlas.yaml

offset: [-11, 30]
body_size: [37, 28]

```

`assets/player/hats/water_lily/water_lily.atlas.yaml`:

```yaml
image: ./water_lily.png
tile_size: [50, 23]
columns: 1
rows: 1

```

`assets/player/hats/water_lily/water_lily.hat.yaml`:

```yaml
name: Water Lily Hat
atlas: ./water_lily.atlas.yaml

offset: [-1, 29]
body_size: [50, 23]

```

`assets/player/skins/fishy/fishy-body.atlas.yaml`:

```yaml
image: ./fishy-body.png
tile_size: [96, 80]
columns: 14
rows: 7

```

`assets/player/skins/fishy/fishy-face.atlas.yaml`:

```yaml
image: ./fishy-face.png
tile_size: [46, 32]
columns: 11
rows: 1

```

`assets/player/skins/fishy/fishy-fin.atlas.yaml`:

```yaml
image: ./fishy-fin.png
tile_size: [24, 34]
columns: 5
rows: 7

```

`assets/player/skins/fishy/fishy.player.yaml`:

```yaml
name: Fishy

sounds:
  jump: ../../sounds/jump.ogg
  jump_volume: 0.05
  land: ../../sounds/land.ogg
  land_volume: 0.025
  grab: ../../sounds/grab.ogg
  grab_volume: 0.05
  drop: ../../sounds/drop.ogg
  drop_volume: 0.05
  death: ../../sounds/death.ogg
  death_volume: 0.3

stats:
  air_speed: 360
  accel_air_speed: 60
  walk_speed: 360
  accel_walk_speed: 60
  jump_speed: 660
  slow_fall_speed: 90
  slowdown: 48.0

body_size: [32, 48]
slide_body_size: [48, 32]
gravity: 2160

layers:
  body:
    atlas: ./fishy-body.atlas.yaml
    animations: &default_anims
      idle:
        frames:
          - idx: 0
            offset: [0, 0]
          - idx: 1
            offset: [0, 0]
          - idx: 2
            offset: [0, -1]
          - idx: 3
            offset: [0, -2]
          - idx: 4
            offset: [0, -2]
          - idx: 5
            offset: [0, -1]
          - idx: 6
            offset: [0, 0]
          - idx: 7
            offset: [0, 0]
          - idx: 8
            offset: [0, 0]
          - idx: 9
            offset: [0, -1]
          - idx: 10
            offset: [0, -2]
          - idx: 11
            offset: [0, -2]
          - idx: 12
            offset: [0, -1]
          - idx: 13
            offset: [0, 0]
        fps: &fps 9
        repeat: true
      fall:
        frames:
          - idx: 42
            offset: [0, 3]
        fps: *fps
        repeat: false
      rise:
        frames:
          - idx: 28
            offset: [0, 3]
        fps: *fps
        repeat: false
      walk:
        frames:
          - idx: 14
            offset: [0, 0]
          - idx: 15
            offset: [0, -1]
          - idx: 16
            offset: [0, -2]
          - idx: 17
            offset: [0, 0]
          - idx: 18
            offset: [0, -1]
          - idx: 19
            offset: [0, -2]
        fps: *fps
        repeat: true
      crouch:
        frames:
          - idx: 56
            offset: [0, -4]
        fps: *fps
        repeat: false
      ragdoll:
        fps: *fps
        frames:
          - idx: 28
            offset: [0, 3]
        repeat: false
      ragdoll_twitch:
        fps: *fps
        frames:
          - idx: 42
            offset: [0, 3]
      slide:
        fps: *fps
        frames:
          - idx: 58
            offset: [1, -8]
            head_offset: [9, -17]
        repeat: false
      death_spine:
        frames:
          - idx: 70
          - idx: 71
          - idx: 72
          - idx: 73
          - idx: 74
          - idx: 75
          - idx: 76
        fps: *fps
        repeat: false
      death_belly:
        frames:
          - idx: 84
          - idx: 85
          - idx: 86
          - idx: 87
          - idx: 88
          - idx: 89
          - idx: 90
        fps: *fps
        repeat: false
      death_ragdoll:
        frames:
          - idx: 56
            offset: [0, -4]
        fps: *fps
        repeat: false
  fin:
    atlas: ./fishy-fin.atlas.yaml
    offset: [-14, 3]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
      walk:
        fps: *fps
        frames:
          - 5
          - 6
          - 7
          - 8
          - 9
      rise:
        fps: *fps
        frames:
          - 10
      fall:
        fps: *fps
        frames:
          - 15
      crouch:
        fps: *fps
        frames:
          - 20
      ragdoll:
        fps: *fps
        frames:
          - 10
      ragdoll_twitch:
        fps: *fps
        frames:
          - 15
      slide:
        fps: *fps
        frames:
          - 25
      death_spine:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 20
      grab_1:
        fps: *fps
        frames:
          - 25
      grab_2:
        fps: *fps
        frames:
          - 30
  face:
    atlas: ./fishy-face.atlas.yaml
    offset: [11, 15]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 4
          - 5
          - 6
          - 0
      walk:
        fps: *fps
        frames:
          - 0
      rise:
        fps: *fps
        frames:
          - 1
      fall:
        fps: *fps
        frames:
          - 2
      crouch:
        fps: *fps
        frames:
          - 5
      ragdoll:
        fps: *fps
        frames:
          - 9
      ragdoll_twitch:
        fps: *fps
        frames:
          - 4
      slide:
        fps: *fps
        frames:
          - 10 # Intentionally an invisible frame
      death_spine:
        fps: *fps
        frames:
          - 10 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 10 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 5
      emote_alarm:
        fps: *fps
        frames:
          - 9
          - 8
          - 9
          - 8
          - 9
          - 8

```

`assets/player/skins/orcy/orcy-body.atlas.yaml`:

```yaml
image: ./orcy-body.png
tile_size: [96, 80]
columns: 14
rows: 7

```

`assets/player/skins/orcy/orcy-face.atlas.yaml`:

```yaml
image: ./orcy-face.png
tile_size: [46, 32]
columns: 9
rows: 1

```

`assets/player/skins/orcy/orcy-fin.atlas.yaml`:

```yaml
image: ./orcy-fin.png
tile_size: [24, 34]
columns: 5
rows: 7

```

`assets/player/skins/orcy/orcy.player.yaml`:

```yaml
name: Orcy

sounds:
  jump: ../../sounds/jump.ogg
  jump_volume: 0.05
  land: ../../sounds/land.ogg
  land_volume: 0.025
  grab: ../../sounds/grab.ogg
  grab_volume: 0.05
  drop: ../../sounds/drop.ogg
  drop_volume: 0.05
  death: ../../sounds/death.ogg
  death_volume: 0.3

stats:
  air_speed: 360
  accel_air_speed: 60
  walk_speed: 360
  accel_walk_speed: 60
  jump_speed: 660
  slow_fall_speed: 90
  slowdown: 48.0

body_size: [32, 48]
slide_body_size: [48, 32]
gravity: 2160

layers:
  body:
    atlas: ./orcy-body.atlas.yaml
    animations: &default_anims
      idle:
        frames:
          - idx: 0
            offset: [0, 0]
          - idx: 1
            offset: [0, 0]
          - idx: 2
            offset: [0, -1]
          - idx: 3
            offset: [0, -2]
          - idx: 4
            offset: [0, -2]
          - idx: 5
            offset: [0, -1]
          - idx: 6
            offset: [0, 0]
          - idx: 7
            offset: [0, 0]
          - idx: 8
            offset: [0, 0]
          - idx: 9
            offset: [0, -1]
          - idx: 10
            offset: [0, -2]
          - idx: 11
            offset: [0, -2]
          - idx: 12
            offset: [0, -1]
          - idx: 13
            offset: [0, 0]
        fps: &fps 9
        repeat: true
      fall:
        frames:
          - idx: 42
            offset: [0, 3]
        fps: *fps
        repeat: false
      rise:
        frames:
          - idx: 28
            offset: [0, 3]
        fps: *fps
        repeat: false
      walk:
        frames:
          - idx: 14
            offset: [0, 0]
          - idx: 15
            offset: [0, -1]
          - idx: 16
            offset: [0, -2]
          - idx: 17
            offset: [0, 0]
          - idx: 18
            offset: [0, -1]
          - idx: 19
            offset: [0, -2]
        fps: *fps
        repeat: true
      crouch:
        frames:
          - idx: 56
            offset: [0, -4]
        fps: *fps
        repeat: false
      ragdoll:
        fps: *fps
        frames:
          - idx: 28
            offset: [0, 3]
        repeat: false
      ragdoll_twitch:
        fps: *fps
        frames:
          - idx: 42
            offset: [0, 3]
      slide:
        fps: *fps
        frames:
          - idx: 58
            offset: [1, -8]
            head_offset: [9, -17]
        repeat: false
      death_spine:
        frames:
          - idx: 70
          - idx: 71
          - idx: 72
          - idx: 73
          - idx: 74
          - idx: 75
          - idx: 76
        fps: *fps
        repeat: false
      death_belly:
        frames:
          - idx: 84
          - idx: 85
          - idx: 86
          - idx: 87
          - idx: 88
          - idx: 89
          - idx: 90
        fps: *fps
        repeat: false
      death_ragdoll:
        fps: *fps
        frames:
          - idx: 56
            offset: [0, -4]
  fin:
    atlas: ./orcy-fin.atlas.yaml
    offset: [-14, 3]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
      walk:
        fps: *fps
        frames:
          - 5
          - 6
          - 7
          - 8
          - 9
      rise:
        fps: *fps
        frames:
          - 10
      fall:
        fps: *fps
        frames:
          - 15
      crouch:
        fps: *fps
        frames:
          - 20
      ragdoll:
        fps: *fps
        frames:
          - 10
      ragdoll_twitch:
        fps: *fps
        frames:
          - 15
      slide:
        fps: *fps
        frames:
          - 25
      death_spine:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_ragdoll:
        frames:
          - 20
      grab_1:
        fps: *fps
        frames:
          - 25
      grab_2:
        fps: *fps
        frames:
          - 30
  face:
    atlas: ./orcy-face.atlas.yaml
    offset: [7, 20]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 5
          - 4
          - 0
      walk:
        fps: *fps
        frames:
          - 0
      rise:
        fps: *fps
        frames:
          - 1
      fall:
        fps: *fps
        frames:
          - 2
      crouch:
        fps: *fps
        frames:
          - 4
      slide:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      ragdoll:
        fps: *fps
        frames:
          - 7
      ragdoll_twitch:
        fps: *fps
        frames:
          - 4
      death_spine:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 5
      emote_alarm:
        fps: *fps
        frames:
          - 7
          - 6
          - 7
          - 6
          - 7
          - 6

```

`assets/player/skins/pescy/pescy-body.atlas.yaml`:

```yaml
image: ./pescy-body.png
tile_size: [96, 80]
columns: 14
rows: 7

```

`assets/player/skins/pescy/pescy-face.atlas.yaml`:

```yaml
image: ./pescy-face.png
tile_size: [46, 32]
columns: 9
rows: 1

```

`assets/player/skins/pescy/pescy-fin.atlas.yaml`:

```yaml
image: ./pescy-fin.png
tile_size: [24, 34]
columns: 5
rows: 7

```

`assets/player/skins/pescy/pescy.player.yaml`:

```yaml
name: Pescy

sounds:
  jump: ../../sounds/jump.ogg
  jump_volume: 0.05
  land: ../../sounds/land.ogg
  land_volume: 0.025
  grab: ../../sounds/grab.ogg
  grab_volume: 0.05
  drop: ../../sounds/drop.ogg
  drop_volume: 0.05
  death: ../../sounds/death.ogg
  death_volume: 0.3

stats:
  air_speed: 360
  accel_air_speed: 60
  walk_speed: 360
  accel_walk_speed: 60
  jump_speed: 660
  slow_fall_speed: 90
  slowdown: 48.0

body_size: [32, 48]
slide_body_size: [48, 32]
gravity: 2160

layers:
  body:
    atlas: ./pescy-body.atlas.yaml
    animations: &default_anims
      idle:
        frames:
          - idx: 0
            offset: [0, 0]
          - idx: 1
            offset: [0, 0]
          - idx: 2
            offset: [0, -1]
          - idx: 3
            offset: [0, -2]
          - idx: 4
            offset: [0, -2]
          - idx: 5
            offset: [0, -1]
          - idx: 6
            offset: [0, 0]
          - idx: 7
            offset: [0, 0]
          - idx: 8
            offset: [0, 0]
          - idx: 9
            offset: [0, -1]
          - idx: 10
            offset: [0, -2]
          - idx: 11
            offset: [0, -2]
          - idx: 12
            offset: [0, -1]
          - idx: 13
            offset: [0, 0]
        fps: &fps 9
        repeat: true
      fall:
        frames:
          - idx: 42
            offset: [0, 3]
        fps: *fps
        repeat: false
      rise:
        frames:
          - idx: 28
            offset: [0, 3]
        fps: *fps
        repeat: false
      walk:
        frames:
          - idx: 14
            offset: [0, 0]
          - idx: 15
            offset: [0, -1]
          - idx: 16
            offset: [0, -2]
          - idx: 17
            offset: [0, 0]
          - idx: 18
            offset: [0, -1]
          - idx: 19
            offset: [0, -2]
        fps: *fps
        repeat: true
      crouch:
        frames:
          - idx: 56
            offset: [0, -4]
        fps: *fps
        repeat: false
      ragdoll:
        fps: *fps
        frames:
          - idx: 28
            offset: [0, 3]
        repeat: false
      ragdoll_twitch:
        fps: *fps
        frames:
          - idx: 42
            offset: [0, 3]
      slide:
        fps: *fps
        frames:
          - idx: 58
            offset: [1, -8]
            head_offset: [9, -17]
        repeat: false
      death_spine:
        frames:
          - idx: 70
          - idx: 71
          - idx: 72
          - idx: 73
          - idx: 74
          - idx: 75
          - idx: 76
        fps: *fps
        repeat: false
      death_belly:
        frames:
          - idx: 84
          - idx: 85
          - idx: 86
          - idx: 87
          - idx: 88
          - idx: 89
          - idx: 90
        fps: *fps
        repeat: false
      death_ragdoll:
        fps: *fps
        frames:
          - idx: 56
            offset: [0, -4]
  fin:
    atlas: ./pescy-fin.atlas.yaml
    offset: [-14, 3]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
      walk:
        fps: *fps
        frames:
          - 5
          - 6
          - 7
          - 8
          - 9
      rise:
        fps: *fps
        frames:
          - 10
      fall:
        fps: *fps
        frames:
          - 15
      crouch:
        fps: *fps
        frames:
          - 20
      ragdoll:
        fps: *fps
        frames:
          - 15
      ragdoll_twitch:
        fps: *fps
        frames:
          - 15
      slide:
        fps: *fps
        frames:
          - 25
      death_spine:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 20
      grab_1:
        fps: *fps
        frames:
          - 25
      grab_2:
        fps: *fps
        frames:
          - 30
  face:
    atlas: ./pescy-face.atlas.yaml
    offset: [6, 18]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 5
          - 4
          - 0
      walk:
        fps: *fps
        frames:
          - 0
      rise:
        fps: *fps
        frames:
          - 1
      fall:
        fps: *fps
        frames:
          - 2
      crouch:
        fps: *fps
        frames:
          - 4
      slide:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      ragdoll:
        fps: *fps
        frames:
          - 5
      ragdoll_twitch:
        fps: *fps
        frames:
          - 4
      death_spine:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 5
      emote_alarm:
        fps: *fps
        frames:
          - 7
          - 6
          - 7
          - 6
          - 7
          - 6

```

`assets/player/skins/sharky/sharky-body.atlas.yaml`:

```yaml
image: ./sharky-body.png
tile_size: [96, 80]
columns: 14
rows: 7

```

`assets/player/skins/sharky/sharky-face.atlas.yaml`:

```yaml
image: ./sharky-face.png
tile_size: [46, 32]
columns: 9
rows: 1

```

`assets/player/skins/sharky/sharky-fin.atlas.yaml`:

```yaml
image: ./sharky-fin.png
tile_size: [24, 34]
columns: 5
rows: 7

```

`assets/player/skins/sharky/sharky.player.yaml`:

```yaml
name: Sharky

sounds:
  jump: ../../sounds/jump.ogg
  jump_volume: 0.05
  land: ../../sounds/land.ogg
  land_volume: 0.025
  grab: ../../sounds/grab.ogg
  grab_volume: 0.05
  drop: ../../sounds/drop.ogg
  drop_volume: 0.05
  death: ../../sounds/death.ogg
  death_volume: 0.3

stats:
  air_speed: 360
  accel_air_speed: 60
  walk_speed: 360
  accel_walk_speed: 60
  jump_speed: 660
  slow_fall_speed: 90
  slowdown: 48.0

body_size: [32, 48]
slide_body_size: [48, 32]
gravity: 2160

layers:
  body:
    atlas: ./sharky-body.atlas.yaml
    animations: &default_anims
      idle:
        frames:
          - idx: 0
            offset: [0, 0]
          - idx: 1
            offset: [0, 0]
          - idx: 2
            offset: [0, -1]
          - idx: 3
            offset: [0, -2]
          - idx: 4
            offset: [0, -2]
          - idx: 5
            offset: [0, -1]
          - idx: 6
            offset: [0, 0]
          - idx: 7
            offset: [0, 0]
          - idx: 8
            offset: [0, 0]
          - idx: 9
            offset: [0, -1]
          - idx: 10
            offset: [0, -2]
          - idx: 11
            offset: [0, -2]
          - idx: 12
            offset: [0, -1]
          - idx: 13
            offset: [0, 0]
        fps: &fps 9
        repeat: true
      fall:
        frames:
          - idx: 42
            offset: [0, 3]
        fps: *fps
        repeat: false
      rise:
        frames:
          - idx: 28
            offset: [0, 3]
        fps: *fps
        repeat: false
      walk:
        frames:
          - idx: 14
            offset: [0, 0]
          - idx: 15
            offset: [0, -1]
          - idx: 16
            offset: [0, -2]
          - idx: 17
            offset: [0, 0]
          - idx: 18
            offset: [0, -1]
          - idx: 19
            offset: [0, -2]
        fps: *fps
        repeat: true
      crouch:
        frames:
          - idx: 56
            offset: [0, -4]
        fps: *fps
        repeat: false
      ragdoll:
        fps: *fps
        frames:
          - idx: 28
            offset: [0, 3]
        repeat: false
      ragdoll_twitch:
        fps: *fps
        frames:
          - idx: 42
            offset: [0, 3]
      slide:
        fps: *fps
        frames:
          - idx: 58
            offset: [1, -8]
            head_offset: [9, -17]
        repeat: false
      death_spine:
        frames:
          - idx: 70
          - idx: 71
          - idx: 72
          - idx: 73
          - idx: 74
          - idx: 75
          - idx: 76
        fps: *fps
        repeat: false
      death_belly:
        frames:
          - idx: 84
          - idx: 85
          - idx: 86
          - idx: 87
          - idx: 88
          - idx: 89
          - idx: 90
        fps: *fps
        repeat: false
      death_ragdoll:
        fps: *fps
        frames:
          - idx: 56
            offset: [0, -4]
  fin:
    atlas: ./sharky-fin.atlas.yaml
    offset: [-14, 3]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
          - 0
          - 0
          - 1
          - 1
          - 0
          - 2
          - 2
      walk:
        fps: *fps
        frames:
          - 5
          - 6
          - 7
          - 8
          - 9
      rise:
        fps: *fps
        frames:
          - 10
      fall:
        fps: *fps
        frames:
          - 15
      crouch:
        fps: *fps
        frames:
          - 20
      ragdoll:
        fps: *fps
        frames:
          - 10
      ragdoll_twitch:
        fps: *fps
        frames:
          - 15
      slide:
        fps: *fps
        frames:
          - 25
      death_spine:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 3 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 20
      grab_1:
        fps: *fps
        frames:
          - 25
      grab_2:
        fps: *fps
        frames:
          - 30
  face:
    atlas: ./sharky-face.atlas.yaml
    offset: [10, 15]
    animations:
      idle:
        fps: *fps
        frames:
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 0
          - 5
          - 4
          - 0
      walk:
        fps: *fps
        frames:
          - 0
      rise:
        fps: *fps
        frames:
          - 1
      fall:
        fps: *fps
        frames:
          - 2
      crouch:
        fps: *fps
        frames:
          - 4
      ragdoll:
        fps: *fps
        frames:
          - 7
      ragdoll_twitch:
        fps: *fps
        frames:
          - 4
      slide:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_spine:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_belly:
        fps: *fps
        frames:
          - 8 # Intentionally an invisible frame
      death_ragdoll:
        fps: *fps
        frames:
          - 5
      emote_alarm:
        fps: *fps
        frames:
          - 7
          - 6
          - 7
          - 6
          - 7
          - 6

```

`assets/plugins/anchor/AnchorMeta.schema.yaml`:

```yaml
name: AnchorMeta
full_name: core::AnchorMeta
asset_extension: anchor
kind: !Struct
  fields:
    - name: atlas
      # Handle<Atlas>
      schema: UntypedHandle
    - name: fall_speed
      schema: f32
    - name: body_size
      schema: Vec2
    - name: fin_anim
      schema: Ustr
    - name: grab_offset
      schema: Vec2


```

`assets/plugins/anchor/FallingAnchor.schema.yaml`:

```yaml
name: FallingAnchor
full_name: core::FallingAnchor
kind: !Struct

```

`assets/plugins/anchor/IdleAnchor.schema.yaml`:

```yaml
name: IdleAnchor
full_name: core::IdleAnchor
kind: !Struct

```

`assets/plugins/anchor/anchor.atlas.yaml`:

```yaml
image: ./anchor.png
tile_size: [28, 35]
columns: 1
rows: 1


```

`assets/plugins/anchor/anchor.yaml`:

```yaml
atlas: ./anchor.atlas.yaml
grab_offset: [5, -2]
body_size: [28, 34]
fin_anim: grab_2
fall_speed: 8

```

`assets/plugins/anchor/element.yaml`:

```yaml
name: Anchor
category: Weapons
data: anchor.yaml
plugin: plugin.lua

```

`assets/plugins/anchor/plugin.lua`:

```lua
local Entities = s"Entities"
local MapElementHydrated = s"MapElementHydrated"
local ElementHandle = s"ElementHandle"
local AnchorMeta = s"AnchorMeta"
local AtlasSprite = s"AtlasSprite"
local Item = s"Item"
local ItemThrow = s"ItemThrow"
local ItemGrab = s"ItemGrab"
local DehydrateOutOfBounds = s"DehydrateOutOfBounds"
local KinematicBody = s"KinematicBody"
local Transform = s"Transform"
local DropItem = s"DropItem"
local ItemUsed = s"ItemUsed"
local IdleAnchor = s"IdleAnchor"
local FallingAnchor = s"FallingAnchor"
local DamageRegion = s"DamageRegion"
local DamageRegionOwner = s"DamageRegionOwner"

local function hydrate()
  local entities = resources:get(Entities)
  
  for spawner_ent, element_handle in entities:iter_with(ElementHandle, MapElementHydrated:without()) do
    local element = assets:get(element_handle[0])
    local anchor_meta = assets:get(element.data)

    if schema_of(anchor_meta) == AnchorMeta then
      -- Spawn an anchor
      local ent = entities:create()
      local sprite = AtlasSprite:create();
      sprite.atlas = anchor_meta.atlas
      components:insert(ent, element_handle)
      components:insert(ent, MapElementHydrated:create())
      components:insert(ent, IdleAnchor:create())
      components:insert(ent, sprite)
      components:insert(ent, components:get(spawner_ent, Transform))
      components:insert(ent, Item:create())
      local item_grab = ItemGrab:create()
      item_grab.fin_anim = anchor_meta.fin_anim
      item_grab.grab_offset = anchor_meta.grab_offset
      components:insert(ent, item_grab)
      components:insert(ent, ItemThrow:create())
      local dehydrate_out_of_bounds = DehydrateOutOfBounds:create()
      dehydrate_out_of_bounds[0] = spawner_ent
      components:insert(ent, dehydrate_out_of_bounds)
      local body = KinematicBody:create()
      -- TODO: Set the body shape and size. Doesn't work in lua yet because
      -- the body shape is an enum.
      body.gravity = assets.root.core.physics.gravity
      body.has_mass = true
      body.has_friction = true
      body.bounciness = 0
      components:insert(ent, body)

      -- Mark spawner as hydrated
      components:insert(spawner_ent, MapElementHydrated:create())
    end
  end
end

local function update()
  local entities = resources:get(Entities)

  for ent in entities:iter_with(IdleAnchor) do
    local element_handle = components:get(ent, ElementHandle)
    local element = assets:get(element_handle[0])
    local anchor_meta = assets:get(element.data)

    local used = components:get(ent, ItemUsed)
    if used then
      -- components:remove(ent, ItemUsed)
      components:remove(ent, KinematicBody)
      components:remove(ent, IdleAnchor)
      components:insert(ent, FallingAnchor:create())
      components:insert(ent, DropItem:create())
      local damage = DamageRegion:create()
      damage.size = anchor_meta.body_size
      components:insert(ent, damage)
      local damageOwner = DamageRegionOwner:create()
      damageOwner[0] = used.owner
      components:insert(ent, damageOwner)
    end
  end

  for ent in entities:iter_with(FallingAnchor) do
    local element_handle = components:get(ent, ElementHandle)
    local element = assets:get(element_handle[0])
    local anchor_meta = assets:get(element.data)

    local trans = components:get(ent, Transform)
    trans.translation.y = trans.translation.y - anchor_meta.fall_speed
  end
end

session:add_system_to_stage(CoreStage.PreUpdate, hydrate)
session:add_system_to_stage(CoreStage.PostUpdate, update)

```

`assets/ui/FairfaxSM.ttf.license.txt`:

```txt
Copyright (c) 2008-2020 Kreative Software.

This Font Software is licensed under the SIL Open Font License, Version 1.1.
This license is copied below, and is also available with a FAQ at:
http://scripts.sil.org/OFL


-----------------------------------------------------------
SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007
-----------------------------------------------------------

PREAMBLE
The goals of the Open Font License (OFL) are to stimulate worldwide
development of collaborative font projects, to support the font creation
efforts of academic and linguistic communities, and to provide a free and
open framework in which fonts may be shared and improved in partnership
with others.

The OFL allows the licensed fonts to be used, studied, modified and
redistributed freely as long as they are not sold by themselves. The
fonts, including any derivative works, can be bundled, embedded, 
redistributed and/or sold with any software provided that any reserved
names are not used by derivative works. The fonts and derivatives,
however, cannot be released under any other type of license. The
requirement for fonts to remain under this license does not apply
to any document created using the fonts or their derivatives.

DEFINITIONS
"Font Software" refers to the set of files released by the Copyright
Holder(s) under this license and clearly marked as such. This may
include source files, build scripts and documentation.

"Reserved Font Name" refers to any names specified as such after the
copyright statement(s).

"Original Version" refers to the collection of Font Software components as
distributed by the Copyright Holder(s).

"Modified Version" refers to any derivative made by adding to, deleting,
or substituting -- in part or in whole -- any of the components of the
Original Version, by changing formats or by porting the Font Software to a
new environment.

"Author" refers to any designer, engineer, programmer, technical
writer or other person who contributed to the Font Software.

PERMISSION & CONDITIONS
Permission is hereby granted, free of charge, to any person obtaining
a copy of the Font Software, to use, study, copy, merge, embed, modify,
redistribute, and sell modified and unmodified copies of the Font
Software, subject to the following conditions:

1) Neither the Font Software nor any of its individual components,
in Original or Modified Versions, may be sold by itself.

2) Original or Modified Versions of the Font Software may be bundled,
redistributed and/or sold with any software, provided that each copy
contains the above copyright notice and this license. These can be
included either as stand-alone text files, human-readable headers or
in the appropriate machine-readable metadata fields within text or
binary files as long as those fields can be easily viewed by the user.

3) No Modified Version of the Font Software may use the Reserved Font
Name(s) unless explicit written permission is granted by the corresponding
Copyright Holder. This restriction only applies to the primary font name as
presented to the users.

4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font
Software shall not be used to promote, endorse or advertise any
Modified Version, except to acknowledge the contribution(s) of the
Copyright Holder(s) and the Author(s) or with their explicit written
permission.

5) The Font Software, modified or unmodified, in part or in whole,
must be distributed entirely under this license, and must not be
distributed under any other license. The requirement for fonts to
remain under this license does not apply to any document created
using the Font Software.

TERMINATION
This license becomes null and void if any of the above conditions are
not met.

DISCLAIMER
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT
OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE
COPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL
DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM
OTHER DEALINGS IN THE FONT SOFTWARE.
```

`assets/ui/ark-pixel-16-px-latin-LICENSE.txt`:

```txt
Copyright (c) 2021, TakWolf (https://ark-pixel-font.takwolf.com),
with Reserved Font Name 'Ark Pixel'.

This Font Software is licensed under the SIL Open Font License, Version 1.1.
This license is copied below, and is also available with a FAQ at:
http://scripts.sil.org/OFL


-----------------------------------------------------------
SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007
-----------------------------------------------------------

PREAMBLE
The goals of the Open Font License (OFL) are to stimulate worldwide
development of collaborative font projects, to support the font creation
efforts of academic and linguistic communities, and to provide a free and
open framework in which fonts may be shared and improved in partnership
with others.

The OFL allows the licensed fonts to be used, studied, modified and
redistributed freely as long as they are not sold by themselves. The
fonts, including any derivative works, can be bundled, embedded, 
redistributed and/or sold with any software provided that any reserved
names are not used by derivative works. The fonts and derivatives,
however, cannot be released under any other type of license. The
requirement for fonts to remain under this license does not apply
to any document created using the fonts or their derivatives.

DEFINITIONS
"Font Software" refers to the set of files released by the Copyright
Holder(s) under this license and clearly marked as such. This may
include source files, build scripts and documentation.

"Reserved Font Name" refers to any names specified as such after the
copyright statement(s).

"Original Version" refers to the collection of Font Software components as
distributed by the Copyright Holder(s).

"Modified Version" refers to any derivative made by adding to, deleting,
or substituting -- in part or in whole -- any of the components of the
Original Version, by changing formats or by porting the Font Software to a
new environment.

"Author" refers to any designer, engineer, programmer, technical
writer or other person who contributed to the Font Software.

PERMISSION & CONDITIONS
Permission is hereby granted, free of charge, to any person obtaining
a copy of the Font Software, to use, study, copy, merge, embed, modify,
redistribute, and sell modified and unmodified copies of the Font
Software, subject to the following conditions:

1) Neither the Font Software nor any of its individual components,
in Original or Modified Versions, may be sold by itself.

2) Original or Modified Versions of the Font Software may be bundled,
redistributed and/or sold with any software, provided that each copy
contains the above copyright notice and this license. These can be
included either as stand-alone text files, human-readable headers or
in the appropriate machine-readable metadata fields within text or
binary files as long as those fields can be easily viewed by the user.

3) No Modified Version of the Font Software may use the Reserved Font
Name(s) unless explicit written permission is granted by the corresponding
Copyright Holder. This restriction only applies to the primary font name as
presented to the users.

4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font
Software shall not be used to promote, endorse or advertise any
Modified Version, except to acknowledge the contribution(s) of the
Copyright Holder(s) and the Author(s) or with their explicit written
permission.

5) The Font Software, modified or unmodified, in part or in whole,
must be distributed entirely under this license, and must not be
distributed under any other license. The requirement for fonts to
remain under this license does not apply to any document created
using the Font Software.

TERMINATION
This license becomes null and void if any of the above conditions are
not met.

DISCLAIMER
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT
OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE
COPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL
DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM
OTHER DEALINGS IN THE FONT SOFTWARE.

```

`book/book.toml`:

```toml
[book]
authors      = ["Carlo Supina", "Srayan Jana", "grufkork", "Micah Tigley"]
language     = "en"
multilingual = false
src          = "src"
title        = "Jumpy Documentation"

[build]
build-dir      = "dist"
create-missing = false

[output.html]
default-theme       = "navy"
git-repository-url  = "https://github.com/fishfolk/jumpy"
git-repository-icon = "fa-github"

```

`book/src/SUMMARY.md`:

```md
# Overview

[Introduction](./introduction.md)
[Code of Conduct](./code_of_conduct.md)

# Community

- [Contributing art](./community/contributing_art.md)

# Developers

- [Architecture](./developers/architecture.md)
- [Contributing Code](./developers/contributing_code.md)

# Game Design

- [Juice](./game_design/juice.md)

# Extra

- [Legacy Docs](./extra/legacy_documentation.md)
```

`book/src/chapter_1.md`:

```md
# Chapter 1

```

`book/src/code_of_conduct.md`:

```md
{{#include ../../CODE_OF_CONDUCT.md}}
```

`book/src/community/contributing_art.md`:

```md
# Contributing Art

![art_section_header](./contributing_art/art_section_header.png)

This guide will show you the steps to draw art using the Fish Fight style. Following these steps will help your custom art fit better in the Fish Fight world. For this example, we will focus on creating a cannon weapon, but these principles can be applied to other assets as well. If you are completely new to pixel art, make sure to take a look at the [Additional Resources](#additional-resources) section first.

## Concept

Before you start drawing, you need to have a clear idea of what it is you are creating. We recommend finding a few reference images that you can look at while creating your art. Even the best artists do this. Drawing something completely from memory tends to not give the best results. Below are some reference images we found for cannons.

![cannon_references](./contributing_art/cannon_references.PNG)

## Outline

Now that you have some references, you can start drawing your art! To start off, draw an outline of the object's prominent features. Keep outlining more details until it is recognizable as the object you are creating. Below is the outline for the cannon weapon:

![cannon_outlines](./contributing_art/cannon_outlines.png)

Here are the guidelines we use for outlining:

- All details for the object should be completely surrounded by outlines
- All outlines should be 1 pixel thick
- Outlines should use a dark color
- Generally, all outlines should be the same color
- Only non-solid materials like smoke, fire, etc. should be drawn without outlines
- If the object has holes, make them the same color as the outline

## Color

After you've finished outlining your object you are ready to begin coloring. Below is the cannon weapon after being colored:

![cannon_colors](./contributing_art/cannon_colors.png)

Here are the guidelines we use for applying color:

- Use colors that have a similar saturation level with game's existing assets
- Use contrasting colors to distinguish different parts of the object
- The entire object should be filled with color (no transparency)

## Shadows and Details

After coloring, shadows and details can be added to the object, but try to keep it clean and recognizable. Below is the cannon after adding shadows and details.

![cannon_details](./contributing_art/cannon_details.png)

Here are the guidelines we use for adding shadows and details:

- For contrasting shadows, use one light and one dark color
- Use hue shifting to create color ramps
- Avoid anti-aliasing

## Conclusion

Below is the full process for creating the cannon art:

![cannon_art](./contributing_art/cannon_art.gif)

### Additional Resources

If you are new to pixel art, we recommend that you take a look at these tutorials to learn the basics first.

- [3 PixelArt Techniques/Common Mistakes](https://www.youtube.com/watch?v=gW1G_FLsuEs)
- [Hue Shifting in Pixel Art](https://www.youtube.com/watch?v=PNtMAxYaGyg)
- [Light & Shading Basics](https://www.youtube.com/watch?v=u7v4uEDwW9o)

We hope this guide was helpful for understanding the Fish Fight art style. If you have any more questions feel free to ask on the [#pixels](https://discord.com/channels/865004050357682246/868813078119202886) Discord channel.

```

`book/src/developers/architecture.md`:

```md
# Architecture

The Jumpy architecture is documented in the project [Rustdoc](./rustdoc/jumpy/index.html).

Our Rustdoc isn't just API documentation, but also includes guide-level explanations of various
aspects of the game, such as networking. It's the best way to get in deep and understand how the
game is put together from a code perspective.

```

`book/src/developers/contributing_code.md`:

```md
# Contributing Code to Fish Fight

Proposing code changes has 3 main steps:

1. Setting up your development environment
2. Pick an issue to work on
3. Write code and submitting for review

## 1. Setting up your development environment

### Before starting

Make sure [Rust](https://www.rust-lang.org/) is installed with [Rustup.rs](https://rustup.rs/).

Have an account on [GitHub](https://github.com/): this is where you'll find the [source code](https://github.com/fishfolk/jumpy) for Fish Fight.

### Getting the source code

Fish Fight uses [git](https://git-scm.com/) as its established choice of version control. You'll be
using it to clone, track, and manage the source code locally on your machine.

To get a copy of the code, you'll first need to [fork the repository](https://docs.github.com/en/get-started/quickstart/fork-a-repo).
The GitHub repository for Fight Fight is [available here](https://github.com/fishfolk/jumpy).
This will allow you to make changes to the project without affecting the original one.

Once you've forked the Fish Fight repository, you can now clone it:

`git clone https://github.com/fishfolk/jumpy.git`

It's also possible to clone the repo using SSH or GitHub CLI. For more information on how to do
this, see the [official GitHub documentation](https://docs.github.com/en/get-started/quickstart/fork-a-repo#cloning-your-forked-repository).

Depending on your connection, the clone can take around 1 minute.

By the end of this step, you should have successfully forked and downloaded a clone of Fish Fight on your machine.

### Build and run

You can now build your forked copy of Fish Fight:

`cargo build`

This process should take about a minute or two depending on your machine. You can also **build and run** the game with a single command:

`cargo run`

## 2. Finding a good first issue

Now that you can build and run Fish Fight source code, let's find something to work on!
We recommend all newcomers start with our [Development Tracks](https://github.com/fishfolk/jumpy/issues/124).
You can also browse [project's issues list](https://github.com/fishfolk/jumpy/issues) and pick something with a [help wanted label](https://github.com/fishfolk/jumpy/labels/help%20wanted).
In general, you can comment on an issue expressing interest and someone will assign it to you.

Additionally, if there's a track or issue you're particularly interested in, but you don't know where to start, feel free to
reach out to the [Fish Fight Discord community](https://discord.gg/4smxjcheE5) with your questions
and someone should reach out shortly!

## 3. Write code and submitting for review

In general, Fish Fight uses a branch-based workflow (or [GitHub flow](https://docs.github.com/en/get-started/quickstart/github-flow)) for submitting changes to the project.

### Create a new branch

You'll want to [create a new branch](https://docs.github.com/en/get-started/quickstart/github-flow#create-a-branch) off `main`:

`git checkout -b <branch_name> main`

You'll replace `<branch-name>` with something short and descriptive. For example, if you're adding a new
item to Fish Fight, your branch name might look like this:

`git checkout -b add_new_weapon main`

### Commit your changes

Once you've made the desired changes to the code and you're ready for someone on the Fish Fight
team to review, you need to [commit your work](https://git-scm.com/docs/git-commit). But first,
we have to run a few commands to ensure the code you're submitting is properly formatted:

1. `cargo clippy -- -W clippy::correctness -D warnings`
2. `cargo fmt`

Now we can start committing your work. First, stage your changes:
`git add`

Now commit. It's always good practice to provide a short message that details what the changes are. For example:
`git commit -m "Add a new weapon"`

### Submitting for review

You can now start submitting your work for review. First, push your changes:

`git push`

This will create a new branch on your forked copy of Fish Fight. You can then proceed [making a pull request](https://docs.github.com/en/desktop/contributing-and-collaborating-using-github-desktop/working-with-your-remote-repository-on-github-or-github-enterprise/creating-an-issue-or-pull-request#creating-a-pull-request).
This is how the Fish Fight team will review and provide feedback on your work.

[More information on contributing using GitHub](https://docs.github.com/en/desktop/contributing-and-collaborating-using-github-desktop).

```

`book/src/extra/legacy_documentation.md`:

```md
# Legacy Documentation

After the Bevy rewrite, the Jumpy book was revised, but not all of the old pages have been migrated
to the new revision.

The legacy documentation can still be read [here](https://fishfolk.github.io/jumpy-legacy-docs/),
and while much of it is now out of date, some of the pages still have useful thoughts, and may be
good to migrate to this book.

```

`book/src/game_design/juice.md`:

```md
# Juice and Feel

**Juice**, or **game feel**, is the science and art of making pushing a button viscerally satisfying. Well, more precisely it's about giving feedback to confirm the player's actions. For games where flow and feeling matter, juice is the thing that makes the player understand your game without reading dials and processing numbers. Juice gives a game life and soul that makes the player feel like a part of the world. Juice is what makes a game feel fun without actually making any mechanical difference. And juice might just be what makes or breaks your game.

Whenever you do something in real life you get a wide range of sensory input in return indicating that what you tried to do actually happened. That response grounds you and makes you realise the reality and weight of things. As you might guess, replicating that kind of feedback on a flatscreen is hard. To get anywhere near reality you need hyperreal effects and nerve-blasting feedback to fill in for all the missing senses, all the while walking the fine line of overloading your player and making a dry, unresponsive world.

Of course, not all games need equal amounts of juice. Some games are played mostly in your head, and therefore all that visual feedback is not needed. Civilization has little more than flavour animations when a unit attacks, a town is built or a nuke blows up (actually the last one is pretty nice, but the real juice is your enemy’s tears). These are rather abstract both mechanically and visually, rarely pertaining to situations and perspectives we encounter in our everyday life. These games would still work with nothing but coloured circles and lines, because the strategy and the story exists in the player’s head. These games are *planning* games, where the payoff is to after thousands of years of careful strategising triumph over your enemy.

On the other side of the spectrum are *execution* games that test your reflexes and motor skills. These are played visually with the game continually telling the player what is going on. Here, the payoff is landing that single-frame-margin combo and watching your enemy explode into a glorious cloud of gibs. The juice that in a planning game exists in the player’s head must here be given by the game.

For realistic first-person games, juicing is difficult and labour-intensive in practice but easier in concept, as you can model the feedback off reality to align with the player’s expectations. But a side-scrolling shooter like Fish Fight is more difficult in theory. I’d doubt you have a clear picture of how stylised two-dimensional fish running and shooting each other would look in real life. For something so far detached from reality, you must work a lot in the same way as with symbol drawing: finding effects that represent their real-life counterparts without actually being them. You'll have to unhinge your expectations and think out of the box to find the feel you need.

## Working with game feel

The worst part about working with game feel is that it is only ever noticed if it is bad. Good game feel is only felt, never seen. If the juice is so grandiose that the player starts thinking of it, it will wear them out and possibly even make them sick if too much stuff is moving onscreen. But if there is not enough of it, the game will feel dry and lifeless. The juice is there to constantly trigger and must therefore be *just* right. On that matter, juicing games is more artsy compared to, for instance, UI design. There are certain guidelines to follow, but mostly it's lots of tuning and testing. The easiest way to try the feel is simply to play the game! If even mundane actions like walking feels nice, you have really succeeded.

Juicing also regards making the world feel alive by making it respond, cause and effect, to the player's actions. Whipping up dust while running or jostling foliage when walking through it are common effects that give the impression of a breathing coherent world in which all its separate parts coexist and interact. This doesn't do anything mechanically, but is equivalent to hitting a wooden crate and it not breaking. Now you maybe even shudder a bit at the thought of how lifeless, bland and plain wrong it would feel. Well, the player too has expectations on how the world should respond. Your task is to meet and feed into those expectations on all levels, from the core greyboxed mechanics to minute tweens and particle effects.
Now, for some ways to actually squeeze some juice out of your games!

## Screen Shake

Screen shake is an immensely powerful tool for giving heavy, visceral feedback that disorients the player as if their whole body was actually rumbling. When the entire scene shakes the player *feels* it, usually without thinking of it. Regular flatscreen games are only connected to two of the players senses, vision and hearing, and that is all you have to work with. The ears can be shaken about with some explosion noises, but to equally rustle the player’s eyes you need screen shake.

Screen shake moves the player’s viewpoint around, translationally and/or rotationally, to make it appear the world is rumbling. Adding the right amount of shake is an art; it is crucial to not overdo screen shake as it can hamper readability and even make sensitive players motion sick, but at the same time it must be significant enough to be felt. People usually have very split opinions on screen shake. Some love the punch it gives, others detest the blurry jostling. Try to take a step back and don't get too caught up in the looks, the game must still be playable.

### Screen shake in practice in Fish Fight

Screen shake is a lot about feel, and as such requires a lot of dialling in. In jumpy we will have three kinds of screen shake: noise (Perlin) translational, sinusoidal translational and rotational. Translational noise moves the world up- and sideways, while the rotational noise rotates the world around the screen midpoint. To that, you can also make the screen shake only in a certain axis to give it directionality. Omnidirectional shaking is the most common and can be used for pretty much everything. It fits explosions really well, but won't feel out of place for anything else either. The directional type on the other hand is more specialised and can for example be used vertically for jump impacts or horizontally for guns firing sideways. This further enhances feedback and narrows its meaning down, increasing clarity and readability.

To those types there’s three parameters: magnitude, frequency and length. Magnitude affects how far the screen moves when shaking (the amplitude of the oscillation) while frequency controls how ”many” shakes happen per second. The length decides for how long the shake will last for, and the magnitude decreases over this time to zero.

By mixing and matching different values for these parameters different effects can be made. Here are a few examples:

- Gunshot: a short omnidirectional shake with low amplitude and high frequency. This gives a small kick that doesn’t move the screen too much, just enough to confirm the firing.
Fish Fight supports setting multipliers for X/Y movement, so a 1 for X and a smaller number for Y makes the player feel the direction of the action.
- Explosion: a medium-length omnidirectional shake with decent amplitude and lower frequency. This makes a kind of rumble that seriously jostles the screen. The bigger the explosive the lower the frequency!
- Jump impact: a directional sinusoidal shake makes the world bounce like a spring.

To calculate the final scene position, the current position of every active shake is added together. That value is then capped using a logarithmic function so that if many explosives go off at once, the scene does not fly off-screen. The second logarithm (log<sub>2</sub>x) is useful for this, as it is almost linear from 0-1 and then quickly flattens.

## Particles

Particles like those in games rarely occur in real life, as most of us go through our daily routine avoiding high-impact situations. But games tend to be a bit more forceful and violent, and that of course means heaps of particles! Particles are a great way to create dynamic and exciting effects that further give impact and weight to actions, but also make the world seem more alive and responsive. Some examples are sparks flying when a bullet hits a wall or dust blowing around in a storm.

```

`book/src/introduction.md`:

```md
{{#include ../../README.md}}
```

`build.rs`:

```rs
fn main() -> shadow_rs::SdResult<()> {
    shadow_rs::new()
}

```

`cliff.toml`:

```toml
# configuration file for git-cliff
# see https://github.com/orhun/git-cliff#configuration-file

[changelog]
# changelog header
header = """
# Changelog\n
All notable changes to this project will be documented in this file.\n
"""
# template for the changelog body
# https://tera.netlify.app/docs/#introduction
body = """
{% if version %}\
    ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
    ## [unreleased]
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | upper_first }}
    {% for commit in commits %}
        - {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }} by {{commit.author.name}} \
    {% endfor %}
{% endfor %}\n
"""
# remove the leading and trailing whitespace from the template
trim = true
# changelog footer
footer = """
<!-- generated by git-cliff -->
"""

[git]
# parse the commits based on https://www.conventionalcommits.org
conventional_commits = true
# filter out the commits that are not conventional
filter_unconventional = false
# process each line of a commit as an individual commit
split_commits = false
# regex for preprocessing the commit messages
commit_preprocessors = [
  { pattern = '\n.*', replace = "" }, # Discard all but the first line
]
# regex for parsing and grouping commits
commit_parsers = [
  { message = "^feat", group = "Features" },
  { message = "^fix", group = "Bug Fixes" },
  { message = "^doc", group = "Documentation" },
  { message = "^perf", group = "Performance" },
  { message = "^refactor", group = "Refactor" },
  { message = "^style", group = "Styling" },
  { message = "^test", group = "Testing" },
  { message = "^chore\\(release\\): prepare for", skip = true },
  { message = "^chore", group = "Miscellaneous Tasks" },
  { body = ".*security", group = "Security" },
  { message = ".*", group = "Other", default_scope = "other" },

]
# protect breaking changes from being skipped due to matching a skipping commit_parser
protect_breaking_commits = false
# filter out the commits that are not matched by commit parsers
filter_commits = false
# glob pattern for matching git tags
tag_pattern = "v[0-9]*"
# regex for skipping tags
skip_tags = "v0.1.0-beta.1"
# regex for ignoring tags
ignore_tags = ""
# sort the tags topologically
topo_order = false
# sort the commits inside sections by oldest/newest order
sort_commits = "oldest"
# limit the number of commits included in the changelog.
# limit_commits = 42

```

`clippy.toml`:

```toml
type-complexity-threshold = 400

```

`contrib/jumpy.desktop`:

```desktop
[Desktop Entry]
Name=Jumpy
Comment=Tactical 2D shooter in fishy pixels style
Exec=jumpy
Terminal=false
Type=Application
Categories=Game;ActionGame;Shooter;

```

`deny.toml`:

```toml
# This section is considered when running `cargo deny check licenses`
# More documentation for the licenses section can be found here:
# https://embarkstudios.github.io/cargo-deny/checks/licenses/cfg.html
[licenses]
version = 2
allow = [
    "Apache-2.0 WITH LLVM-exception",
    "Apache-2.0",
    "BSD-2-Clause",
    "BSD-2-Clause-Patent",
    "BSD-3-Clause",
    "BSL-1.0",
    "CC0-1.0",
    "ISC",
    "LicenseRef-UFL-1.0",
    "MIT",
    "MIT-0",
    "MPL-2.0",
    "OFL-1.1",
    "OpenSSL",
    "Unicode-3.0",
    "Unicode-DFS-2016",
    "Unlicense",
    "Zlib",
]

[[licenses.clarify]]
name          = "ring"
expression    = "OpenSSL"
license-files = [{ path = "LICENSE", hash = 0xbd0eed23 }]

[sources]
allow-git = [
    "https://github.com/dimforge/rapier.git",
    "https://github.com/gschup/ggrs.git",
]

[sources.allow-org]
github = ["fishfolk"]

[advisories]
ignore = [
    # proc-macro-error is unmaintained - https://github.com/fishfolk/bones/issues/479
    "RUSTSEC-2024-0370",
]

```

`docs/rustdoc-mermaid-head.html`:

```html
<script src='https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js'></script>
<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10.2.2/dist/mermaid.esm.min.mjs"
    mermaid.initialize({
        startOnLoad: false,
        securityLevel: 'loose',
        theme: 'dark',
        themeVariables: {
            fontSize: '16px',
            lineColor: '#F8B229',
            clusterBkg: '#0000',
            edgeLabelBackground: '#1A1A1A'
        }
    });
    mermaid.run({
        querySelector: '.mermaid',
        postRenderCallback: id => {
            let el = document.getElementById(id);
            const pz = panzoom(el, {
                smoothScroll: false,
                zoomDoubleClickSpeed: 1,
                beforeWheel: function (e) {
                    // allow wheel-zoom only if ctrl is down. Otherwise - ignore
                    var shouldIgnore = !e.ctrlKey;
                    return shouldIgnore;
                }
            })

            const plusDiv = document.createElement('div');
            plusDiv.style = "width: 25px; height: 25px; position: absolute; right: 0.8em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            plusDiv.innerText = "+"
            plusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 1.2)
            }
            el.parentNode.appendChild(plusDiv);

            const minusDiv = document.createElement('div');
            minusDiv.style = "width: 25px; height: 25px; position: absolute; right: 2.4em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            minusDiv.innerText = "-"
            minusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 0.8)
            }
            el.parentNode.appendChild(minusDiv);
        }
    })

    // Callback for use in mermaid diagrams that will open a relative doc link when clicking.
    //
    // Example doc link for `arg` would be: jumpy/session/struct.SessionManager.html
    window.docLink = (arg) => {
        let pathElems = new URL(window.location.href).pathname.split('/').filter(x => x != '');
        for (let i = pathElems.length - 1; i > -1; i--) {
            if (pathElems[i] != 'jumpy' && pathElems[i] != 'jumpy_core') {
                pathElems = pathElems.slice(0, i - 1);
                break;
            }
        }
        window.location.href = '/' + pathElems.join('/') + '/' + arg;
    }
</script>
<style>
    /*
        Hide the lock icons shown for private items. It isn't helpful
        in this context.
    */
    [title="Restricted Visibility"] {
        display: none;
    }

    .mermaid {
        overflow: hidden !important;
        border: 1px solid #BBB;
        border-radius: 1em;
        cursor: move;
        position: relative;
    }

    .dotted rect {
        stroke-dasharray: 5;
    }

    .code .nodeLabel {
        color: #2dbfb8 !important;
    }

    .code rect {
        transition: 0.2s;
        stroke: #2dbfb8 !important;
    }

    .code:hover rect {
        transform: scale(1.05)
    }
</style>

```

`justfile`:

```
# This is a justfile. See https://github.com/casey/just

list:
    just --list

check:
    cargo clippy -- -W clippy::correctness -D warnings
    cargo fmt --check

build:
    cargo build

build-release:
    cargo build --release

build-web basepath='':
    ./scripts/build-web.sh

build-release-web basepath='':
    ./scripts/build-web.sh release

docs:
    RUSTDOCFLAGS="--html-in-header docs/rustdoc-mermaid-head.html" \
    cargo +nightly doc --document-private-items --workspace --no-deps
    for link in `grep -hor 'click .* call docLink\(.*\)' target/doc | awk -F '(' '{ print $2 }' | tr -d ')'`; do \
        if [ ! -e "target/doc/$link" ]; then \
            echo "broken doc link in diagram: $link" 1>&2; \
            exit 1; \
        fi \
    done

run *args:
    cargo run -- {{args}}

run-web port='4000' host='127.0.0.1': build-web
    @echo "Debug link: http://{{host}}:{{port}}?RUST_LOG=debug"
    basic-http-server -a '{{host}}:{{port}}' -x web-target/wasm-debug

run-release-web port='4000' host='127.0.0.1': build-release-web
    @echo "Debug link: http://{{host}}:{{port}}?RUST_LOG=debug"
    basic-http-server -a '{{host}}:{{port}}' -x web-target/wasm-release

```

`licenses/LICENSE-APACHE`:

```
                              Apache License
                        Version 2.0, January 2004
                     http://www.apache.org/licenses/

TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

1. Definitions.

   "License" shall mean the terms and conditions for use, reproduction,
   and distribution as defined by Sections 1 through 9 of this document.

   "Licensor" shall mean the copyright owner or entity authorized by
   the copyright owner that is granting the License.

   "Legal Entity" shall mean the union of the acting entity and all
   other entities that control, are controlled by, or are under common
   control with that entity. For the purposes of this definition,
   "control" means (i) the power, direct or indirect, to cause the
   direction or management of such entity, whether by contract or
   otherwise, or (ii) ownership of fifty percent (50%) or more of the
   outstanding shares, or (iii) beneficial ownership of such entity.

   "You" (or "Your") shall mean an individual or Legal Entity
   exercising permissions granted by this License.

   "Source" form shall mean the preferred form for making modifications,
   including but not limited to software source code, documentation
   source, and configuration files.

   "Object" form shall mean any form resulting from mechanical
   transformation or translation of a Source form, including but
   not limited to compiled object code, generated documentation,
   and conversions to other media types.

   "Work" shall mean the work of authorship, whether in Source or
   Object form, made available under the License, as indicated by a
   copyright notice that is included in or attached to the work
   (an example is provided in the Appendix below).

   "Derivative Works" shall mean any work, whether in Source or Object
   form, that is based on (or derived from) the Work and for which the
   editorial revisions, annotations, elaborations, or other modifications
   represent, as a whole, an original work of authorship. For the purposes
   of this License, Derivative Works shall not include works that remain
   separable from, or merely link (or bind by name) to the interfaces of,
   the Work and Derivative Works thereof.

   "Contribution" shall mean any work of authorship, including
   the original version of the Work and any modifications or additions
   to that Work or Derivative Works thereof, that is intentionally
   submitted to Licensor for inclusion in the Work by the copyright owner
   or by an individual or Legal Entity authorized to submit on behalf of
   the copyright owner. For the purposes of this definition, "submitted"
   means any form of electronic, verbal, or written communication sent
   to the Licensor or its representatives, including but not limited to
   communication on electronic mailing lists, source code control systems,
   and issue tracking systems that are managed by, or on behalf of, the
   Licensor for the purpose of discussing and improving the Work, but
   excluding communication that is conspicuously marked or otherwise
   designated in writing by the copyright owner as "Not a Contribution."

   "Contributor" shall mean Licensor and any individual or Legal Entity
   on behalf of whom a Contribution has been received by Licensor and
   subsequently incorporated within the Work.

2. Grant of Copyright License. Subject to the terms and conditions of
   this License, each Contributor hereby grants to You a perpetual,
   worldwide, non-exclusive, no-charge, royalty-free, irrevocable
   copyright license to reproduce, prepare Derivative Works of,
   publicly display, publicly perform, sublicense, and distribute the
   Work and such Derivative Works in Source or Object form.

3. Grant of Patent License. Subject to the terms and conditions of
   this License, each Contributor hereby grants to You a perpetual,
   worldwide, non-exclusive, no-charge, royalty-free, irrevocable
   (except as stated in this section) patent license to make, have made,
   use, offer to sell, sell, import, and otherwise transfer the Work,
   where such license applies only to those patent claims licensable
   by such Contributor that are necessarily infringed by their
   Contribution(s) alone or by combination of their Contribution(s)
   with the Work to which such Contribution(s) was submitted. If You
   institute patent litigation against any entity (including a
   cross-claim or counterclaim in a lawsuit) alleging that the Work
   or a Contribution incorporated within the Work constitutes direct
   or contributory patent infringement, then any patent licenses
   granted to You under this License for that Work shall terminate
   as of the date such litigation is filed.

4. Redistribution. You may reproduce and distribute copies of the
   Work or Derivative Works thereof in any medium, with or without
   modifications, and in Source or Object form, provided that You
   meet the following conditions:

   (a) You must give any other recipients of the Work or
       Derivative Works a copy of this License; and

   (b) You must cause any modified files to carry prominent notices
       stating that You changed the files; and

   (c) You must retain, in the Source form of any Derivative Works
       that You distribute, all copyright, patent, trademark, and
       attribution notices from the Source form of the Work,
       excluding those notices that do not pertain to any part of
       the Derivative Works; and

   (d) If the Work includes a "NOTICE" text file as part of its
       distribution, then any Derivative Works that You distribute must
       include a readable copy of the attribution notices contained
       within such NOTICE file, excluding those notices that do not
       pertain to any part of the Derivative Works, in at least one
       of the following places: within a NOTICE text file distributed
       as part of the Derivative Works; within the Source form or
       documentation, if provided along with the Derivative Works; or,
       within a display generated by the Derivative Works, if and
       wherever such third-party notices normally appear. The contents
       of the NOTICE file are for informational purposes only and
       do not modify the License. You may add Your own attribution
       notices within Derivative Works that You distribute, alongside
       or as an addendum to the NOTICE text from the Work, provided
       that such additional attribution notices cannot be construed
       as modifying the License.

   You may add Your own copyright statement to Your modifications and
   may provide additional or different license terms and conditions
   for use, reproduction, or distribution of Your modifications, or
   for any such Derivative Works as a whole, provided Your use,
   reproduction, and distribution of the Work otherwise complies with
   the conditions stated in this License.

5. Submission of Contributions. Unless You explicitly state otherwise,
   any Contribution intentionally submitted for inclusion in the Work
   by You to the Licensor shall be under the terms and conditions of
   this License, without any additional terms or conditions.
   Notwithstanding the above, nothing herein shall supersede or modify
   the terms of any separate license agreement you may have executed
   with Licensor regarding such Contributions.

6. Trademarks. This License does not grant permission to use the trade
   names, trademarks, service marks, or product names of the Licensor,
   except as required for reasonable and customary use in describing the
   origin of the Work and reproducing the content of the NOTICE file.

7. Disclaimer of Warranty. Unless required by applicable law or
   agreed to in writing, Licensor provides the Work (and each
   Contributor provides its Contributions) on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
   implied, including, without limitation, any warranties or conditions
   of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
   PARTICULAR PURPOSE. You are solely responsible for determining the
   appropriateness of using or redistributing the Work and assume any
   risks associated with Your exercise of permissions under this License.

8. Limitation of Liability. In no event and under no legal theory,
   whether in tort (including negligence), contract, or otherwise,
   unless required by applicable law (such as deliberate and grossly
   negligent acts) or agreed to in writing, shall any Contributor be
   liable to You for damages, including any direct, indirect, special,
   incidental, or consequential damages of any character arising as a
   result of this License or out of the use or inability to use the
   Work (including but not limited to damages for loss of goodwill,
   work stoppage, computer failure or malfunction, or any and all
   other commercial damages or losses), even if such Contributor
   has been advised of the possibility of such damages.

9. Accepting Warranty or Additional Liability. While redistributing
   the Work or Derivative Works thereof, You may choose to offer,
   and charge a fee for, acceptance of support, warranty, indemnity,
   or other liability obligations and/or rights consistent with this
   License. However, in accepting such obligations, You may act only
   on Your own behalf and on Your sole responsibility, not on behalf
   of any other Contributor, and only if You agree to indemnify,
   defend, and hold each Contributor harmless for any liability
   incurred by, or claims asserted against, such Contributor by reason
   of your accepting any such warranty or additional liability.

END OF TERMS AND CONDITIONS

APPENDIX: How to apply the Apache License to your work.

   To apply the Apache License to your work, attach the following
   boilerplate notice, with the fields enclosed by brackets "[]"
   replaced with your own identifying information. (Don't include
   the brackets!)  The text should be enclosed in the appropriate
   comment syntax for the file format. We also recommend that a
   file or class name and description of purpose be included on the
   same "printed page" as the copyright notice for easier
   identification within third-party archives.

Copyright (c) 2020-2022 The Fish Fight Game & Spicy Lobster Developers

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

```

`licenses/LICENSE-MIT`:

```
Copyright (c) 2020-2022 The Fish Fight Game & Spicy Lobster Developers

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.


```

`old_assets/decoration.json`:

```json
[
  "decoration/anemones.json",
  "decoration/seaweed.json"
]
```

`old_assets/decoration/anemones.json`:

```json
{
  "id": "anemones",
  "sprite": {
    "texture": "default_decoration",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 1,
        "frames": 5,
        "fps": 6,
        "is_looping": true
      }
    ]
  }
}
```

`old_assets/decoration/seaweed.json`:

```json
{
  "id": "seaweed",
  "sprite": {
    "texture": "default_decoration",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 5,
        "fps": 8,
        "is_looping": true
      }
    ]
  }
}

```

`old_assets/images.json`:

```json
[
  {
    "id": "blank_image",
    "path": "ui/blank_image.png"
  },
  {
    "id": "button_background",
    "path": "ui/button_background.png"
  },
  {
    "id": "button_background_clicked",
    "path": "ui/button_background_clicked.png"
  },
  {
    "id": "button_background_disabled",
    "path": "ui/button_background_disabled.png"
  },
  {
    "id": "button_background_hovered",
    "path": "ui/button_background_hovered.png"
  },
  {
    "id": "checkbox_background",
    "path": "ui/checkbox_background.png"
  },
  {
    "id": "checkbox_background_checked",
    "path": "ui/checkbox_background_checked.png"
  },
  {
    "id": "checkbox_background_checked_hovered",
    "path": "ui/checkbox_background_checked_hovered.png"
  },
  {
    "id": "checkbox_background_clicked",
    "path": "ui/checkbox_background_clicked.png"
  },
  {
    "id": "checkbox_background_hovered",
    "path": "ui/checkbox_background_hovered.png"
  },
  {
    "id": "combobox_background",
    "path": "ui/combobox_background.png"
  },
  {
    "id": "editbox_background",
    "path": "ui/editbox_background.png"
  },
  {
    "id": "editbox_background_clicked",
    "path": "ui/editbox_background_clicked.png"
  },
  {
    "id": "main_menu_header",
    "path": "ui/main_menu_header.png"
  },
  {
    "id": "window_background",
    "path": "ui/window_background.png"
  },
  {
    "id": "window_border",
    "path": "ui/window_border.png"
  }
]
```

`old_assets/images.schema.json`:

```json
{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/object1636321952.json",
  "title": "Root",
  "type": "array",
  "default": [],
  "items": {
    "$id": "#root/items",
    "title": "Items",
    "type": "object",
    "required": ["id", "path"],
    "properties": {
      "id": {
        "$id": "#root/items/id",
        "title": "Id",
        "type": "string",
        "default": "",
        "examples": ["window_background"],
        "pattern": "^.*$"
      },
      "path": {
        "$id": "#root/items/path",
        "title": "Path",
        "type": "string",
        "default": "",
        "examples": ["ui/window_background.png"],
        "pattern": "^.*$"
      }
    }
  }
}

```

`old_assets/items.json`:

```json
[
  "items/blunderbass.json",
  "items/blunderbuss.json",
  "items/cannon.json",
  "items/grenades.json",
  "items/machine_gun.json",
  "items/mines.json",
  "items/starfish.json",
  "items/starfish_launcher.json",
  "items/musket.json",
  "items/sniper_rifle.json",
  "items/sword.json",
  "items/trident.json",
  "items/kick_bomb.json",
  "items/turtle_shell.json",
  "items/crate.json",
  "items/pirate_hat.json",
  "items/bonnet_hat.json",
  "items/bucket_hat.json",
  "items/chefs_hat.json",
  "items/chest_hat.json",
  "items/cowboy_hat.json",
  "items/crown_hat.json"
]
```

`old_assets/items/blunderbass.json`:

```json
{
  "id": "blunderbass",
  "name": "Blunderbass",
  "type": "weapon",
  "uses": 4,
  "cooldown": 2.0,
  "attack_duration": 1.0,
  "recoil": 5.5,
  "sound_effect": "shoot",
  "collider_size": {
    "x": 68,
    "y": 24
  },
  "effect_offset": {
    "x": 68,
    "y": 24
  },
  "mount_offset": {
    "x": -34,
    "y": -2
  },
  "effects": [
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 55.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "small_projectile",
          "size": {
            "x": 8,
            "y": 4
          },
          "tint": {
            "r": 0.9,
            "g": 0.75,
            "b": 0.12,
            "a": 1.0
          }
        }
      },
      "range": 300.0,
      "speed": 9.0
    }
  ],
  "sprite": {
    "texture": "blunderbass",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      },
      {
        "id": "attack",
        "row": 1,
        "frames": 3,
        "fps": 15
      }
    ]
  },
  "effect_sprite": {
    "texture": "blunderbass",
    "animations": [
      {
        "id": "attack",
        "row": 2,
        "frames": 4,
        "fps": 12
      }
    ]
  }
}

```

`old_assets/items/blunderbuss.json`:

```json
{
  "id": "blunderbuss",
  "name": "Blunderbuss",
  "type": "weapon",
  "uses": 2,
  "cooldown": 1.25,
  "attack_duration": 1.0,
  "recoil": 5.5,
  "sound_effect": "shoot",
  "particles": [
    {
      "particle_effect": "blunderbuss_muzzle_smoke",
      "interval": 0.01,
      "emissions": 16
    }
  ],
  "collider_size": {
    "x": 64,
    "y": 25
  },
  "effect_offset": {
    "x": 64,
    "y": 8
  },
  "mount_offset": {
    "x": -24,
    "y": -6
  },
  "effects": [
    {
      "type": "projectile",
      "spread": 23.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "blunderbuss_bullet",
          "size": {
            "x": 6,
            "y": 6
          }
        }
      },
      "particles": [
        {
          "particle_effect": "blunderbuss_bullet_smoke",
          "interval": 0.01
        }
      ],
      "range": 280.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 23.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "blunderbuss_bullet",
          "size": {
            "x": 6,
            "y": 6
          }
        }
      },
      "particles": [
        {
          "particle_effect": "blunderbuss_bullet_smoke",
          "interval": 0.01
        }
      ],
      "range": 280.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 23.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "blunderbuss_bullet",
          "size": {
            "x": 6,
            "y": 6
          }
        }
      },
      "particles": [
        {
          "particle_effect": "blunderbuss_bullet_smoke",
          "interval": 0.01
        }
      ],
      "range": 280.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 23.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "blunderbuss_bullet",
          "size": {
            "x": 6,
            "y": 6
          }
        }
      },
      "particles": [
        {
          "particle_effect": "blunderbuss_bullet_smoke",
          "interval": 0.01
        }
      ],
      "range": 280.0,
      "speed": 9.0
    },
    {
      "type": "projectile",
      "spread": 23.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "blunderbuss_bullet",
          "size": {
            "x": 6,
            "y": 6
          }
        }
      },
      "particles": [
        {
          "particle_effect": "blunderbuss_bullet_smoke",
          "interval": 0.01
        }
      ],
      "range": 280.0,
      "speed": 9.0
    }
  ],
  "sprite": {
    "texture": "blunderbuss",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      }
    ]
  },
  "effect_sprite": {
    "texture": "blunderbuss",
    "animations": [
      {
        "id": "attack",
        "row": 0,
        "frames": 1,
        "fps": 1
      }
    ]
  }
}
```

`old_assets/items/cannon.json`:

```json
{
  "id": "cannon",
  "name": "Cannon",
  "type": "weapon",
  "cooldown": 1.5,
  "attack_duration": 1.0,
  "recoil": 4.0,
  "uses": 3,
  "mount_offset": {
    "x": -28,
    "y": -26
  },
  "effect_offset": {
    "x": 50,
    "y": 28
  },
  "collider_size": {
    "x": 64,
    "y": 24
  },
  "collider_offset": {
    "x": 0,
    "y": 20
  },
  "sound_effect": "shoot",
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": [
        "enemy",
        "ground",
        "explosion"
      ],
      "gravity": 0.5,
      "velocity": {
        "x": 20.0,
        "y": -2
      },
      "size": {
        "x": 17,
        "y": 17
      },
      "timed_trigger": 1.5,
      "effects": [
        {
          "type": "circle_collider",
          "radius": 80,
          "is_explosion": true,
          "sound_effect": "explode"
        },
        {
          "type": "triggered_effect",
          "size": {
            "x": 176,
            "y": 144
          },
          "collide_with_platforms": true,
          "timed_trigger": 0.7,
          "sprite": {
            "texture": "explosion_big",
            "autoplay_id": "effect",
            "animations": [
              {
                "id": "effect",
                "row": 0,
                "frames": 12,
                "fps": 24
              }
            ]
          }
        }
      ],
      "sprite": {
        "texture": "cannon_ball",
        "autoplay_id": "effect",
        "animations": [
          {
            "id": "effect",
            "row": 0,
            "frames": 1,
            "fps": 1,
            "is_looping": true
          }
        ]
      },
      "particles": [
        {
          "particle_effect": "cannon_cannonball_smoke",
          "interval": 0.04,
          "delay": 0.04
        }
      ]
    }
  ],
  "sprite": {
    "texture": "cannon",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      },
      {
        "id": "attack",
        "row": 0,
        "frames": 4,
        "fps": 8
      }
    ]
  },
  "effect_sprite": {
    "texture": "cannon",
    "animations": [
      {
        "id": "attack",
        "row": 1,
        "frames": 5,
        "fps": 12
      }
    ]
  }
}

```

`old_assets/items/crate.json`:

```json
{
  "id": "crate",
  "name": "Crate",
  "type": "weapon",
  "uses": 1,
  "deplete_behavior": "destroy",
  "collider_size": {
    "x": 36,
    "y": 31
  },
  "mount_offset": {
    "x": 0,
    "y": -16
  },
  "effect_offset": {
    "x": 0,
    "y": 22
  },
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": [
        "enemy",
        "ground"
      ],
      "collide_with_platforms": true,
      "velocity": {
        "x": 10.0,
        "y": -4.0
      },
      "gravity": 0.5,
      "can_rotate": true,
      "size": {
        "x": 30,
        "y": 30
      },
      "effects": [
        {
          "type": "rect_collider",
          "width": 36,
          "height": 32
        },
        {
          "type": "triggered_effect",
          "size": {
            "x": 128,
            "y": 128
          },
          "collide_with_platforms": true,
          "timed_trigger": 0.7,
          "sprite": {
            "texture": "crate_breaking",
            "autoplay_id": "effect",
            "animations": [
              {
                "id": "effect",
                "row": 0,
                "frames": 24,
                "fps": 60
              }
            ]
          }
        }
      ],
      "sprite": {
        "texture": "crate",
        "animations": [
          {
            "id": "idle",
            "row": 0,
            "frames": 1,
            "fps": 1
          }
        ]
      }
    }
  ],
  "sprite": {
    "texture": "crate",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1
      }
    ]
  }
}
```

`old_assets/items/grenades.json`:

```json
{
  "id": "grenades",
  "name": "Grenades",
  "type": "weapon",
  "cooldown": 0.5,
  "uses": 3,
  "deplete_behavior": "destroy",
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": [],
      "velocity": {
        "x": 6.0,
        "y": -5.0
      },
      "can_rotate": true,
      "size": {
        "x": 17,
        "y": 17
      },
      "collide_with_platforms": true,
      "timed_trigger": 1.5,
      "effects": [
        {
          "type": "circle_collider",
          "radius": 52,
          "is_explosion": true,
          "sound_effect": "explode"
        },
        {
          "type": "triggered_effect",
          "size": {
            "x": 112,
            "y": 80
          },
          "collide_with_platforms": true,
          "timed_trigger": 0.7,
          "sprite": {
            "texture": "explosion_small",
            "autoplay_id": "effect",
            "animations": [
              {
                "id": "effect",
                "row": 0,
                "frames": 12,
                "fps": 24
              }
            ]
          }
        }
      ],
      "sprite": {
        "texture": "grenades",
        "autoplay_id": "effect",
        "animations": [
          {
            "id": "effect",
            "row": 1,
            "frames": 3,
            "fps": 12,
            "is_looping": true
          }
        ]
      },
      "particles": [
        {
          "particle_effect": "grenades_smoke",
          "interval": 0.04,
          "should_autostart": true,
          "offset": {
            "x": 0,
            "y": -12
          }
        }
      ]
    }
  ],
  "collider_size": {
    "x": 25,
    "y": 34
  },
  "mount_offset": {
    "x": 0,
    "y": -24
  },
  "effect_offset": {
    "x": 0,
    "y": 24
  },
  "sprite": {
    "texture": "grenades",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      }
    ]
  }
}

```

`old_assets/items/kick_bomb.json`:

```json
{
  "id": "kick_bomb",
  "name": "Kick Bomb",
  "type": "weapon",
  "uses": 1,
  "deplete_behavior": "destroy",
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": [
        "player",
        "enemy",
        "explosion",
        "projectile"
      ],
      "velocity": {
        "x": 7.0,
        "y": -2.0
      },
      "rotation": 90.0,
      "can_rotate": true,
      "collide_with_platforms": true,
      "size": {
        "x": 26,
        "y": 23
      },
      "is_kickable": true,
      "timed_trigger": 1.5,
      "particles": [
        {
          "particle_effect": "kick_bomb_smoke",
          "interval": 0.04,
          "should_autostart": true,
          "offset": {
            "x": 0,
            "y": -16
          }
        }
      ],
      "effects": [
        {
          "type": "circle_collider",
          "radius": 64,
          "is_explosion": true,
          "sound_effect": "explode"
        },
        {
          "type": "triggered_effect",
          "size": {
            "x": 112,
            "y": 80
          },
          "collide_with_platforms": true,
          "timed_trigger": 0.7,
          "sprite": {
            "texture": "explosion_small",
            "autoplay_id": "effect",
            "animations": [
              {
                "id": "effect",
                "row": 0,
                "frames": 12,
                "fps": 24
              }
            ]
          }
        }
      ],
      "sprite": {
        "texture": "kick_bomb",
        "autoplay_id": "effect",
        "offset": {
          "x": 0,
          "y": 0
        },
        "animations": [
          {
            "id": "effect",
            "row": 1,
            "frames": 3,
            "fps": 12,
            "is_looping": true
          }
        ]
      }
    }
  ],
  "collider_size": {
    "x": 32,
    "y": 45
  },
  "mount_offset": {
    "x": 0,
    "y": -24
  },
  "effect_offset": {
    "x": 0,
    "y": 24
  },
  "sprite": {
    "texture": "kick_bomb",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      }
    ]
  }
}

```

`old_assets/items/machine_gun.json`:

```json
{
  "id": "machine_gun",
  "name": "Machine Gun",
  "type": "weapon",
  "cooldown": 0.15,
  "attack_duration": 0.1,
  "recoil": 1.25,
  "uses": 24,
  "mount_offset": {
    "x": -28,
    "y": -4
  },
  "effect_offset": {
    "x": 64,
    "y": 4
  },
  "sound_effect": "shoot",
  "particles": [
    {
      "particle_effect": "machine_gun_muzzle_smoke",
      "delay": 0.2,
      "interval": 0.05,
      "emissions": 5
    },
    {
      "particle_effect": "machine_gun_firing_smoke",
      "emissions": 1
    }
  ],
  "effects": [
    {
      "type": "projectile",
      "range": 512.0,
      "speed": 8.0,
      "spread": 5.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "machine_gun_bullet",
          "size": {
            "x": 30,
            "y": 4
          }
        },
        "can_rotate": true
      }
    }
  ],
  "collider_size": {
    "x": 68,
    "y": 24
  },
  "sprite": {
    "texture": "machine_gun",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      },
      {
        "id": "attack",
        "row": 1,
        "frames": 2,
        "fps": 8,
        "is_looping": true
      }
    ]
  }
}

```

`old_assets/items/mines.json`:

```json
{
  "id": "mines",
  "name": "Mines",
  "type": "weapon",
  "cooldown": 0.5,
  "uses": 3,
  "deplete_behavior": "destroy",
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": [
        "player",
        "enemy",
        "explosion",
        "projectile"
      ],
      "can_rotate": true,
      "rotation": 300.0,
      "velocity": {
        "x": 2.0,
        "y": -4.0
      },
      "size": {
        "x": 33,
        "y": 35
      },
      "activation_delay": 1.5,
      "effects": [
        {
          "type": "circle_collider",
          "radius": 64,
          "is_explosion": true,
          "sound_effect": "explode"
        },
        {
          "type": "triggered_effect",
          "size": {
            "x": 112,
            "y": 80
          },
          "collide_with_platforms": true,
          "timed_trigger": 0.7,
          "sprite": {
            "texture": "explosion_small",
            "autoplay_id": "effect",
            "animations": [
              {
                "id": "effect",
                "row": 0,
                "frames": 12,
                "fps": 24
              }
            ]
          }
        }
      ],
      "collide_with_platforms": true,
      "sprite": {
        "texture": "mines",
        "autoplay_id": "effect",
        "animations": [
          {
            "id": "effect",
            "row": 0,
            "frames": 13,
            "fps": 12,
            "is_looping": true
          }
        ]
      }
    }
  ],
  "collider_size": {
    "x": 33,
    "y": 35
  },
  "mount_offset": {
    "x": 6,
    "y": -12
  },
  "effect_offset": {
    "x": 32,
    "y": 6
  },
  "sprite": {
    "texture": "mines",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      }
    ]
  }
}

```

`old_assets/items/musket.json`:

```json
{
  "id": "musket",
  "name": "Musket",
  "type": "weapon",
  "uses": 3,
  "cooldown": 1.0,
  "attack_duration": 0.5,
  "recoil": 6.0,
  "sound_effect": "shoot",
  "particles": [
    {
      "particle_effect": "musket_muzzle_smoke",
      "delay": 1,
      "interval": 0.05,
      "emissions": 6
    }
  ],
  "effects": [
    {
      "type": "projectile",
      "range": 512.0,
      "speed": 5.0,
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "musket_bullet",
          "size": {
            "x": 15,
            "y": 15
          }
        }
      },
      "particles": [
        {
          "particle_effect": "musket_bullet_smoke",
          "delay": 0.075,
          "interval": 0.075
        }
      ]
    }
  ],
  "collider_size": {
    "x": 64,
    "y": 24
  },
  "effect_offset": {
    "x": 61,
    "y": 16
  },
  "mount_offset": {
    "x": -24,
    "y": -12
  },
  "sprite": {
    "texture": "musket",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      },
      {
        "id": "attack",
        "row": 1,
        "frames": 3,
        "fps": 14
      }
    ]
  },
  "effect_sprite": {
    "texture": "musket",
    "animations": [
      {
        "id": "attack",
        "row": 2,
        "frames": 4,
        "fps": 12
      }
    ]
  }
}

```

`old_assets/items/sniper_rifle.json`:

```json
{
  "id": "sniper_rifle",
  "name": "Sniper Rifle",
  "type": "weapon",
  "uses": 2,
  "cooldown": 1.5,
  "attack_duration": 0.5,
  "recoil": 14.0,
  "sound_effect": "shoot",
  "particles": [
    {
      "particle_effect": "sniper_rifle_muzzle_smoke",
      "interval": 0.05,
      "emissions": 12
    }
  ],
  "collider_size": {
    "x": 84,
    "y": 25
  },
  "effect_offset": {
    "x": 82,
    "y": 16
  },
  "mount_offset": {
    "x": -24,
    "y": -12
  },
  "effects": [
    {
      "type": "projectile",
      "projectile": {
        "type": "sprite",
        "sprite": {
          "texture": "sniper_rifle_bullet",
          "size": {
            "x": 7,
            "y": 7
          },
          "offset": {
            "x": -3.5,
            "y": -3.5
          }
        }
      },
      "range": 600.0,
      "speed": 25.0,
      "particles": [
        {
          "particle_effect": "sniper_rifle_bullet_smoke",
          "interval": 0.01
        }
      ]
    }
  ],
  "sprite": {
    "texture": "sniper_rifle",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1,
        "is_looping": true
      },
      {
        "id": "attack",
        "row": 1,
        "frames": 3,
        "fps": 14
      }
    ]
  },
  "effect_sprite": {
    "texture": "sniper_rifle",
    "animations": [
      {
        "id": "attack",
        "row": 2,
        "frames": 4,
        "fps": 12
      }
    ]
  }
}

```

`old_assets/items/starfish.json`:

```json
{
  "id": "starfish",
  "name": "Starfish",
  "type": "weapon",
  "can_rotate": true,
  "cooldown": 0.5,
  "uses": 1,
  "deplete_behavior": "destroy",
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": ["player", "enemy", "explosion", "projectile"],
      "expire_time": 3.0,
      "expire_effects": [
        {
          "type": "spawn_item",
          "item": "starfish",
          "offset": {
            "x": 0,
            "y": -10
          },
          "inherit_spawner_velocity": true
        }
      ],
      "can_rotate": true,
      "angular_velocity": -620,
      "velocity": {
        "x": 12.0,
        "y": 0.0
      },
      "gravity": 0.01,
      "bouncyness": 1.0,
      "size": {
        "x": 19,
        "y": 18
      },
      "activation_delay": 0.1,
      "grab_options": {
        "zone_size": {
          "x": 60,
          "y": 18
        },
        "zone_offset": {
          "x": 0,
          "y": -9
        },
        "equips_item": "starfish"
      },
      "effects": [
        {
          "type": "circle_collider",
          "radius": 25,
          "is_explosion": true,
          "sound_effect": "bullet_hit_dull"
        },
        {
          "type": "spawn_item",
          "item": "starfish",
          "offset": {
            "x": 20,
            "y": -10
          },
          "inherit_spawner_velocity": true
        }
      ],
      "collide_with_platforms": true,
      "sprite": {
        "texture": "starfish",
        "autoplay_id": "effect",
        "animations": [
          {
            "id": "effect",
            "row": 0,
            "frames": 1,
            "fps": 1
          }
        ]
      }
    }
  ],
  "collider_size": {
    "x": 19,
    "y": 18
  },
  "mount_offset": {
    "x": -25,
    "y": 5
  },
  "effect_offset": {
    "x": 10,
    "y": 9
  },
  "sprite": {
    "texture": "starfish",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1
      }
    ]
  }
}

```

`old_assets/items/starfish_launcher.json`:

```json
{
  "id": "starfish_launcher",
  "name": "Starfish Launcher",
  "type": "weapon",
  "cooldown": 0.75,
  "uses": 4,
  "effects": [
    {
      "type": "triggered_effect",
      "trigger": ["player", "enemy", "explosion", "projectile"],
      "expire_time": 3.0,
      "can_rotate": true,
      "angular_velocity": -620,
      "velocity": {
        "x": 12.0,
        "y": 0.0
      },
      "spread": 30,
      "gravity": 0.01,
      "bouncyness": 1.0,
      "size": {
        "x": 19,
        "y": 18
      },
      "activation_delay": 0.1,
      "grab_options": {
        "zone_size": {
          "x": 50,
          "y": 18
        },
        "zone_offset": {
          "x": 0,
          "y": -9
        },
        "equips_item": "starfish"
      },
      "effects": [
        {
          "type": "circle_collider",
          "radius": 25,
          "is_explosion": true,
          "sound_effect": "bullet_hit_dull"
        }
      ],
      "collide_with_platforms": true,
      "sprite": {
        "texture": "starfish",
        "autoplay_id": "effect",
        "animations": [
          {
            "id": "effect",
            "row": 0,
            "frames": 1,
            "fps": 1
          }
        ]
      }
    }
  ],
  "collider_size": {
    "x": 37,
    "y": 20
  },
  "mount_offset": {
    "x": -17,
    "y": -5
  },
  "effect_offset": {
    "x": 10,
    "y": 9
  },
  "sprite": {
    "texture": "starfish_launcher",
    "autoplay_id": "idle",
    "animations": [
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1
      }
    ]
  }
}

```

`old_assets/items/sword.json`:

```json
{
  "id": "sword",
  "name": "Sword",
  "type": "weapon",
  "cooldown": 1.0,
  "sound_effect": "sword",
  "effects": [
    {
      "type": "rect_collider",
      "width": 65,
      "height": 60
    }
  ],
  "collider_size": {
    "x": 65,
    "y": 17
  },
  "mount_offset": {
    "x": -20,
    "y": -64
  },
  "effect_offset": {
    "x": 0,
    "y": 33
  },
  "sprite": {
    "texture": "sword",
    "autoplay_id": "ground",
    "animations": [
      {
        "id": "ground",
        "row": 0,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "idle",
        "row": 1,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "attack",
        "row": 2,
        "frames": 4,
        "fps": 15
      }
    ]
  }
}

```

`old_assets/items/trident.json`:

```json
{
  "id": "trident",
  "name": "Trident",
  "type": "weapon",
  "cooldown": 0.5,
  "sound_effect": "sword",
  "effects": [
    {
      "type": "rect_collider",
      "width": 40,
      "height": 35
    }
  ],
  "collider_size": {
    "x": 60,
    "y": 20
  },
  "mount_offset": {
    "x": -35,
    "y": -5
  },
  "effect_offset": {
    "x": 55,
    "y": 0
  },
  "sprite": {
    "texture": "trident",
    "autoplay_id": "ground",
    "animations": [
      {
        "id": "ground",
        "row": 2,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "idle",
        "row": 0,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "attack",
        "row": 1,
        "frames": 3,
        "fps": 15
      }
    ]
  }
}

```

`old_assets/items/turtle_shell.json`:

```json
{
  "id": "turtle_shell",
  "name": "Turtle Shell",
  "type": "item",
  "uses": 3,
  "collider_size": {
    "x": 32,
    "y": 32
  },
  "effects": [
    {
      "name": "Turtle Shell",
      "function_id": "turtle_shell",
      "activated_on": [
        "receive_damage"
      ],
      "blocks_damage": true
    }
  ],
  "sprite": {
    "texture": "turtle_shell",
    "autoplay_id": "ground",
    "animations": [
      {
        "id": "ground",
        "row": 0,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "ground_broken",
        "row": 0,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "idle",
        "row": 2,
        "frames": 1,
        "fps": 1
      },
      {
        "id": "idle_broken",
        "row": 3,
        "frames": 1,
        "fps": 1
      }
    ]
  },
  "mount_offset": {
    "x": -32,
    "y": 18
  },
  "drop_behavior": "persist_state",
  "deplete_behavior": "destroy"
}

```

`old_assets/maps.json`:

```json
[
  {
    "name": "lev01",
    "path": "maps/lev01.json",
    "preview_path": "maps/lev01.png"
  },
  {
    "name": "lev02",
    "path": "maps/lev02.json",
    "preview_path": "maps/lev02.png"
  },
  {
    "name": "lev03",
    "path": "maps/lev03.json",
    "preview_path": "maps/lev03.png"
  },
  {
    "name": "lev04",
    "path": "maps/lev04.json",
    "preview_path": "maps/lev04.png"
  },
  {
    "name": "lev05",
    "path": "maps/lev05.json",
    "preview_path": "maps/lev05.png"
  },
  {
    "name": "lev06",
    "path": "maps/lev06.json",
    "preview_path": "maps/lev06.png"
  },
  {
    "name": "lev07",
    "path": "maps/lev07.json",
    "preview_path": "maps/lev07.png"
  },
  {
    "name": "zyrafa01",
    "path": "maps/zyrafa01.json",
    "preview_path": "maps/zyrafa01.png"
  },
  {
    "name": "zyrafa02",
    "path": "maps/zyrafa02.json",
    "preview_path": "maps/zyrafa02.png"
  },
  {
    "name": "zyrafa03",
    "path": "maps/zyrafa03.json",
    "preview_path": "maps/zyrafa03.png"
  },
  {
    "name": "zyrafa04",
    "path": "maps/zyrafa04.json",
    "preview_path": "maps/zyrafa04.png"
  },
  {
    "name": "zyrafa05",
    "path": "maps/zyrafa05.json",
    "preview_path": "maps/zyrafa05.png"
  },
  {
    "name": "zyrafa06",
    "path": "maps/zyrafa06.json",
    "preview_path": "maps/zyrafa06.png"
  },
  {
    "name": "test_level",
    "path": "maps/test_level.json",
    "preview_path": "maps/test_level.png",
    "is_user_map": true
  }
]
```

`old_assets/maps.schema.json`:

```json
{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/object1636321057.json",
  "title": "Root",
  "type": "array",
  "default": [],
  "items": {
    "$id": "#root/items",
    "title": "Items",
    "type": "object",
    "required": ["name", "path", "preview_path"],
    "properties": {
      "name": {
        "$id": "#root/items/name",
        "title": "Name",
        "type": "string",
        "default": "",
        "examples": ["lev01"],
        "pattern": "^.*$"
      },
      "path": {
        "$id": "#root/items/path",
        "title": "Path",
        "type": "string",
        "default": "",
        "examples": ["maps/lev01.json"],
        "pattern": "^.*$"
      },
      "preview_path": {
        "$id": "#root/items/preview_path",
        "title": "Preview_path",
        "type": "string",
        "default": "",
        "examples": ["maps/lev01.png"],
        "pattern": "^.*$"
      },
      "is_tiled_map": {
        "$id": "#root/items/is_tiled_map",
        "title": "Is_tiled_map",
        "type": "boolean",
        "examples": [false],
        "default": false
      },
      "is_user_map": {
        "$id": "#root/items/is_user_map",
        "title": "is_user_map",
        "type": "boolean",
        "examples": [false],
        "default": false
      }
    }
  }
}

```

`old_assets/maps/lev01.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 27,
    "y": 21
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        33,
        35,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        33,
        35,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        40,
        41,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        40,
        42,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        57,
        59,
        47,
        49,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        47,
        49,
        59,
        61,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        15,
        16,
        16,
        16,
        17,
        57,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        21,
        41,
        41,
        24,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        22,
        41,
        41,
        14,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        12,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 415.37436,
            "y": 300.92984
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 64.00003,
            "y": 461.0
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 767.8716,
            "y": 459.7865
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 61.333332,
            "y": 526.9167
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 753.6591,
            "y": 526.0606
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 650.25,
            "y": 527.0833
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 169.25,
            "y": 525.0833
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 424.08334,
            "y": 525.7917
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 406.6438,
            "y": 270.14053
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 586.0,
            "y": 333.5
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 412.83334,
            "y": 77.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 232.9389,
            "y": 333.92783
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 261.91666,
            "y": 45.25
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 748.8186,
            "y": 237.01471
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 554.125,
            "y": 46.345245
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 66.12503,
            "y": 238.25002
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 515.6666,
            "y": 345.88892
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 262.1136,
            "y": 37.9151
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 541.9653,
            "y": 371.5408
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 482.40002,
            "y": 116.43323
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 161.53336,
            "y": 499.3333
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 742.2285,
            "y": 228.029
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 284.0278,
            "y": 344.69443
          }
        },
        {
          "id": "machine_gun",
          "kind": "item",
          "position": {
            "x": 102.012344,
            "y": 527.4436
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 542.5,
            "y": 71.666664
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 260.5,
            "y": 67.83333
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 141.7857,
            "y": 240.12857
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 688.20105,
            "y": 253.18137
          }
        },
        {
          "id": "cannon",
          "kind": "item",
          "position": {
            "x": 692.4999,
            "y": 524.875
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 298.5,
            "y": 557.0
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 562.375,
            "y": 557.0
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 268.33334,
      "y": 0.0
    },
    {
      "x": 124.16667,
      "y": 415.49997
    },
    {
      "x": 701.74677,
      "y": 414.88095
    },
    {
      "x": 559.6667,
      "y": 0.0
    }
  ]
}
```

`old_assets/maps/lev02.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 27,
    "y": 21
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        15,
        17,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        26,
        41,
        41,
        41,
        24,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        46,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        59,
        61,
        22,
        41,
        41,
        41,
        41,
        41,
        41,
        24,
        0,
        0,
        0,
        22,
        41,
        20,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        5,
        6,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        12,
        13,
        8,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        61,
        0,
        0,
        40,
        41,
        14,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        5,
        6,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        12,
        13,
        8,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        41,
        14,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        5,
        6,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        3,
        11,
        12,
        13,
        8,
        10,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        29,
        30,
        40,
        41,
        14,
        8,
        10,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        3,
        0,
        0,
        0,
        0,
        1,
        3,
        11,
        5,
        6,
        8,
        10,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        29,
        30,
        0,
        0,
        0,
        0,
        29,
        30,
        11,
        12,
        13,
        8,
        12,
        2,
        2,
        3,
        59,
        59,
        61,
        0,
        0,
        0,
        1,
        3,
        0,
        0,
        0,
        36,
        37,
        0,
        0,
        0,
        0,
        1,
        3,
        40,
        41,
        14,
        8
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 770.25,
            "y": 206.08333
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 34.25,
            "y": 492.75
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 207.25,
            "y": 111.416664
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 457.25,
            "y": 109.416664
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 678.9167,
            "y": 462.08334
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 250.91667,
            "y": 429.08334
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 486.54868,
            "y": 525.0937
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 35.88199,
            "y": 301.0937
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 564.54865,
            "y": 302.0937
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 623.21533,
            "y": 45.76034
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 798.1076,
            "y": 120.600006
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 419.0,
            "y": 399.33334
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 608.94116,
            "y": 82.56866
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 135.36362,
            "y": 147.27274
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 248.2858,
            "y": 424.99997
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 765.28577,
            "y": 205.14287
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 204.00006,
            "y": 108.42859
          }
        },
        {
          "id": "sniper_rifle",
          "kind": "item",
          "position": {
            "x": 578.4286,
            "y": 54.14292
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 41.571472,
            "y": 221.28577
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 569.85706,
            "y": 306.33325
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 199.16669,
            "y": 444.16672
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 705.6667,
            "y": 491.83334
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 143.18549,
            "y": 612.7539
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 401.6703,
            "y": 385.7691
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 274.90082,
            "y": 32.108643
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 98.210815,
      "y": 490.57727
    },
    {
      "x": 271.61115,
      "y": 101.75456
    },
    {
      "x": 787.6791,
      "y": 195.83423
    },
    {
      "x": 650.2078,
      "y": 458.88315
    }
  ]
}
```

`old_assets/maps/lev03.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 35,
    "y": 35
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        16,
        16,
        16,
        16,
        28,
        16,
        16,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        16,
        16,
        28,
        16,
        16,
        16,
        16,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        9,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        9,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        9,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        9,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        10,
        9,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        9,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        10,
        9,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        9,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        21,
        23,
        23,
        23,
        23,
        49,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        47,
        23,
        23,
        23,
        23,
        14,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        4,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        13,
        11,
        12,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        13,
        5,
        11,
        6,
        12,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        13,
        5,
        45,
        7,
        46,
        6,
        12,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        57,
        59,
        59,
        59,
        22,
        23,
        23,
        23,
        23,
        23,
        14,
        9,
        21,
        23,
        23,
        23,
        23,
        23,
        24,
        59,
        59,
        59,
        61,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        6,
        12,
        46,
        28,
        45,
        13,
        5,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        6,
        12,
        11,
        13,
        5,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        5,
        6,
        9,
        9,
        12,
        13,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        6,
        11,
        5,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        21,
        24,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        15,
        18,
        17,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        24,
        14,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        21,
        23,
        23,
        23,
        35,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        33,
        23,
        23,
        23,
        14,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        2,
        2,
        2,
        7,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        7,
        2,
        2,
        2,
        13,
        5,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        12,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        6,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 698.3333,
            "y": 876.9167
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 780.25,
            "y": 749.0833
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 237.25,
            "y": 621.0833
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 872.8333,
            "y": 334.16666
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 539.5,
            "y": 366.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 809.5,
            "y": 334.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 264.83334,
            "y": 334.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 375.66666,
            "y": 876.8333
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 365.58334,
            "y": 493.25
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 859.125,
            "y": 493.91666
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 203.45833,
            "y": 333.91666
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 777.2001,
            "y": 827.5333
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 230.25632,
            "y": 780.5556
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 859.55554,
            "y": 779.0
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 353.16675,
            "y": 456.16672
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 795.4643,
            "y": 530.2143
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 232.0,
            "y": 616.0
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 220.63892,
            "y": 295.95834
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 838.77277,
            "y": 300.51138
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 768.89795,
            "y": 717.31824
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 521.8443,
            "y": 403.16885
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 530.1667,
            "y": 348.6667
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 431.33334,
            "y": 860.6667
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 280.66666,
            "y": 495.66666
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 882.6667,
            "y": 486.66666
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 727.3333,
            "y": 859.0
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    },
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ]
      }
    }
  ],
  "spawn_points": [
    {
      "x": 255.66667,
      "y": 736.6667
    },
    {
      "x": 367.83334,
      "y": 476.16666
    },
    {
      "x": 864.6515,
      "y": 735.8333
    },
    {
      "x": 751.0,
      "y": 479.66666
    }
  ]
}
```

`old_assets/maps/lev04.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 35,
    "y": 15
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        33,
        23,
        23,
        24,
        57,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        61,
        22,
        23,
        23,
        35,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        18,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        18,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        21,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        14,
        9,
        9,
        10,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        46,
        59,
        59,
        59,
        45,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        21,
        23,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        46,
        17,
        0,
        0,
        0,
        15,
        45,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        23,
        14,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        46,
        17,
        0,
        0,
        0,
        0,
        0,
        15,
        45,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        46,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        45,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        17,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        15,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        5,
        38,
        34,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        34,
        23,
        34,
        23,
        23,
        23,
        23,
        34,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        34,
        23,
        23,
        23,
        23,
        23,
        23,
        34,
        39,
        6,
        12,
        13,
        4,
        9,
        9,
        21,
        14,
        9,
        9,
        9,
        4,
        9,
        28,
        9,
        9,
        9,
        9,
        4,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        4,
        9,
        9,
        9,
        28,
        9,
        9,
        4,
        12,
        13,
        9,
        9,
        11,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        11,
        9,
        7,
        9,
        9,
        9,
        9,
        11,
        9,
        9,
        21,
        14,
        9,
        9,
        9,
        11,
        9,
        9,
        9,
        7,
        9,
        9,
        11,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sniper_rifle",
          "kind": "item",
          "position": {
            "x": 956.28564,
            "y": 217.14284
          }
        },
        {
          "id": "blunderbass",
          "kind": "item",
          "position": {
            "x": 77.7143,
            "y": 231.42854
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 549.5714,
            "y": 208.1429
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 468.71423,
            "y": 49.571457
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 867.2858,
            "y": 323.14285
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 65.7143,
            "y": 102.14285
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 872.8333,
            "y": 334.16666
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 472.5,
            "y": 334.00003
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 979.5,
            "y": 334.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 264.83334,
            "y": 334.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 88.458336,
            "y": 334.91666
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 708.1818,
            "y": 12.863632
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 73.45456,
            "y": 110.35715
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 304.0,
            "y": 13.5
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 945.0,
            "y": 204.5
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 92.20001,
            "y": 325.08463
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 1002.99225,
            "y": 324.26926
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 79.70007,
            "y": 118.27142
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 1013.9857,
            "y": 124.75714
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 368.078,
            "y": 28.023087
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 646.6118,
            "y": 24.362648
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 595.79486,
            "y": 352.79916
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 796.6667,
            "y": 15.666667
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 518.0513,
            "y": 35.35897
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 864.0,
            "y": 327.0
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 256.85715,
            "y": 354.85715
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 778.05804,
            "y": 29.276031
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 544.4851,
            "y": 364.33054
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 176.83333,
      "y": 327.16666
    },
    {
      "x": 947.0,
      "y": 328.66666
    },
    {
      "x": 137.42857,
      "y": 101.28572
    },
    {
      "x": 973.857,
      "y": 100.14285
    }
  ]
}
```

`old_assets/maps/lev05.json`:

```json
{
  "background_color": {
    "red": 0.5,
    "green": 0.7,
    "blue": 0.7,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 45,
    "y": 15
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        59,
        61,
        22,
        23,
        23,
        23,
        35,
        0,
        0,
        0,
        0,
        0,
        33,
        23,
        23,
        23,
        24,
        57,
        59,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        6,
        11,
        0,
        0,
        0,
        0,
        0,
        11,
        5,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        11,
        0,
        0,
        0,
        0,
        0,
        11,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        47,
        57,
        59,
        59,
        59,
        61,
        49,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        5,
        28,
        6,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        12,
        7,
        13,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        8,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        5,
        28,
        6,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0,
        0,
        11,
        7,
        11,
        0,
        0,
        0,
        11,
        28,
        11,
        0,
        0
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 703.63354,
            "y": 301.37103
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 641.5769,
            "y": 270.30768
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 1326.5,
            "y": 77.5
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 748.1667,
            "y": 109.999985
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 475.45834,
            "y": 268.91666
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 985.3333,
            "y": 13.833333
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 83.0,
            "y": 77.5
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 304.0,
            "y": 13.5
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 1108.1666,
            "y": 173.66666
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 829.98456,
            "y": 26.192322
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 930.8,
            "y": 272.2923
          }
        },
        {
          "id": "sniper_rifle",
          "kind": "item",
          "position": {
            "x": 354.8334,
            "y": 25.500061
          }
        },
        {
          "id": "cannon",
          "kind": "item",
          "position": {
            "x": 1076.3333,
            "y": 15.166718
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 897.29407,
            "y": 49.588287
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 440.6078,
            "y": 48.627304
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 982.3334,
            "y": 6.7777405
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 720.0,
            "y": 144.11111
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 474.55557,
            "y": 259.22214
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 452.36362,
            "y": 286.1818
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 655.02856,
            "y": 127.46002
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 1103.5,
            "y": 198.16664
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 559.8334,
            "y": 39.499985
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 887.5,
            "y": 38.16667
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 275.33334,
            "y": 198.66666
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    },
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    }
  ],
  "spawn_points": [
    {
      "x": 114.5,
      "y": 49.0
    },
    {
      "x": 1334.3334,
      "y": 49.0
    }
  ]
}
```

`old_assets/maps/lev06.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 25,
    "y": 20
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        23,
        23,
        23,
        23,
        35,
        0,
        0,
        0,
        0,
        0,
        33,
        35,
        2,
        33,
        35,
        0,
        0,
        0,
        0,
        0,
        33,
        23,
        23,
        23,
        23,
        9,
        9,
        9,
        9,
        11,
        59,
        59,
        59,
        59,
        59,
        47,
        49,
        16,
        47,
        49,
        59,
        59,
        59,
        59,
        59,
        11,
        9,
        9,
        9,
        9,
        9,
        1,
        3,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        1,
        3,
        9,
        15,
        17,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        15,
        17,
        9,
        9,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        1,
        3,
        9,
        9,
        1,
        3,
        9,
        9,
        11,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        11,
        15,
        17,
        9,
        9,
        15,
        17,
        9,
        9,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        9,
        9,
        9,
        9,
        9,
        1,
        3,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        1,
        3,
        9,
        9,
        9,
        15,
        17,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        9,
        15,
        17,
        9,
        23,
        23,
        23,
        23,
        49,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        47,
        23,
        23,
        23,
        23,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        61,
        0,
        0,
        0,
        57,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        8,
        9,
        5,
        16,
        6,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        5,
        16,
        6,
        9,
        10,
        0,
        0,
        8,
        9,
        10,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        8,
        9,
        10,
        0,
        0,
        8,
        9,
        10,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        8,
        9,
        10,
        0
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 711.8333,
            "y": 237.33333
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 556.6228,
            "y": 173.47368
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 376.79166,
            "y": 236.91667
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 74.333336,
            "y": 236.83333
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 366.0,
            "y": 12.833333
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 176.0,
            "y": 45.5
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 646.6667,
            "y": 428.83334
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 68.666664,
            "y": 430.16666
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 739.2429,
            "y": 31.428589
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 190.74286,
            "y": 304.98572
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 159.52945,
            "y": 204.47061
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 609.2202,
            "y": 204.23442
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 567.6667,
            "y": 318.49997
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 373.5,
            "y": 227.33334
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 171.00003,
            "y": 35.5
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 643.00006,
            "y": 419.0
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 263.00006,
            "y": 80.153854
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 543.36365,
            "y": 78.90906
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 221.78943,
            "y": 192.63158
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 45.75,
            "y": 37.583336
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 688.0,
            "y": 452.33328
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 134.00003,
            "y": 452.66666
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 446.6667,
            "y": 29.333336
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 382.82352,
            "y": 588.4706
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "58": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 161.33333,
      "y": 422.0
    },
    {
      "x": 641.3333,
      "y": 424.0
    },
    {
      "x": 671.6667,
      "y": 3.6666667
    },
    {
      "x": 129.33333,
      "y": 2.0
    }
  ]
}
```

`old_assets/maps/lev07.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 27,
    "y": 22
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        6,
        10,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        59,
        61,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        57,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        12,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        13,
        9,
        9,
        12,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        13,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        9,
        9,
        9,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 30.0,
            "y": 460.0
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 800.0,
            "y": 460.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 768.0,
            "y": 429.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 27.2,
            "y": 430.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 288.0,
            "y": 525.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 288.0,
            "y": 205.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 224.0,
            "y": 205.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 576.0,
            "y": 205.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 512.0,
            "y": 525.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 36.699997,
            "y": 217.32353
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 802.0353,
            "y": 218.47058
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 422.70523,
            "y": 560.3316
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 279.03857,
            "y": 482.9924
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 505.96265,
            "y": 483.39175
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 281.59424,
            "y": 162.25056
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 568.1927,
            "y": 167.87035
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 547.12604,
            "y": 401.90884
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 284.48053,
            "y": 400.4414
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 544.0,
            "y": 544.0
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 300.05713,
            "y": 534.22864
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 403.9903,
            "y": 325.77615
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 556.06573,
            "y": 217.50752
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 288.0,
            "y": 224.0
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "60": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 253.37262,
      "y": 184.73
    },
    {
      "x": 572.10425,
      "y": 193.55582
    },
    {
      "x": 195.5694,
      "y": 498.38507
    },
    {
      "x": 628.5847,
      "y": 510.97748
    }
  ]
}
```

`old_assets/maps/migrate-maps.ts`:

```ts
/**
 * This is a deno script that converts the old Jumpy maps to the new map format.
 */

import { assert } from "https://deno.land/std@0.158.0/testing/asserts.ts";
import { bufferToHex } from "https://deno.land/x/hextools@v1.0.0/mod.ts";

export interface OldMap {
  name: string;
  background_color: BackgroundColor;
  background_layers: BackgroundLayer[];
  world_offset: GridSize;
  grid_size: GridSize;
  tile_size: GridSize;
  layers: Layer[];
  tilesets: Tileset[];
  spawn_points: GridSize[];
}

export interface BackgroundColor {
  red: number;
  green: number;
  blue: number;
  alpha: number;
}

export interface BackgroundLayer {
  texture_id: string;
  depth: number;
  offset: GridSize;
}

export interface GridSize {
  x: number;
  y: number;
}

export interface Layer {
  id: string;
  kind: string;
  has_collision: boolean;
  tiles?: number[];
  is_visible: boolean;
  objects?: Object[];
}

export interface Object {
  id: string;
  kind: Kind;
  position: GridSize;
}

export enum Kind {
  Decoration = "decoration",
  Environment = "environment",
  Item = "item",
}

export interface Tileset {
  id: string;
  texture_id: string;
  texture_size: GridSize;
  tile_size: GridSize;
  grid_size: GridSize;
  first_tile_id: number;
  tile_cnt: number;
  tile_subdivisions: GridSize;
  autotile_mask: boolean[];
  tile_attributes?: { [key: string]: string[] };
}

const dir = Deno.readDir(".");
const inMaps: OldMap[] = [];

for await (const item of dir) {
  if (item.isFile && item.name.endsWith("json") && !item.name.includes("map")) {
    const json = JSON.parse(await Deno.readTextFile(`./${item.name}`));
    json.name = item.name.replace(".json", "");
    inMaps.push(json);
  }
}

const newMaps = [] as any;

for (const map of inMaps) {
  const newMap = {} as any;

  newMap.name = map.name;

  // newMap.background_color = bufferToHex(
  //   new Uint8Array([
  //     255 * map.background_color.red,
  //     255 * map.background_color.green,
  //     255 * map.background_color.blue,
  //     255 * map.background_color.alpha,
  //   ])
  // );

  // This is the background color all maps should have but only some of them actually had it set, so
  // we set it manually instead of pulling it from the map JSON like the commented code above does.
  newMap.background_color = "7EA8A6";
  newMap.grid_size = [map.grid_size.x, map.grid_size.y];
  newMap.tile_size = [map.tile_size.x, map.tile_size.y];
  newMap.layers = [];

  newMap.background_layers = [
    {
      image: "../resources/background_04.png",
      speed: 0,
      tile_size: [896, 480],
      z: -110,
      position: [0, 360],
      scale: 2.0,
    },
    {
      image: "../resources/background_03.png",
      speed: 0.74,
      tile_size: [896, 480],
      z: -109,
      position: [0, 360],
      scale: 2.0,
    },
    {
      image: "../resources/background_02.png",
      speed: 0.82,
      tile_size: [896, 480],
      z: -108,
      position: [0, 360],
      scale: 2.0,
    },
    {
      image: "../resources/background_01.png",
      speed: 100,
      tile_size: [896, 480],
      z: -107,
      position: [0, 360],
      scale: 2.0,
    },
  ];

  const tileset = map.tilesets[0];

  for (const layer of map.layers) {
    const newLayer = {} as any;

    newLayer.id = layer.id;

    if (layer.tiles && layer.tiles.length > 0) {
      assert(layer.tiles.length == map.grid_size.x * map.grid_size.y);

      newLayer.kind = { tile: {} };
      newLayer.kind.tile.has_collision = layer.has_collision;
      newLayer.kind.tile.tiles = [];
      newLayer.kind.tile.tilemap = "../resources/default_tileset.atlas.yaml";

      for (let i = 0; i < layer.tiles!.length; i++) {
        const tile = layer.tiles![i];
        if (tile == 0) continue;
        const posX = i % map.grid_size.x;
        const posY = map.grid_size.y - 1 - Math.floor(i / map.grid_size.x);

        assert(posX < map.grid_size.x);
        assert(
          posY < map.grid_size.y,
          `posY ( ${posY} ) isn't less than map.grid_size.y ( ${map.grid_size.y} ) for tile index ${i}`
        );

        const idx = tile - 1;
        newLayer.kind.tile.tiles.push({
          pos: [posX, posY],
          idx,
          jump_through:
            (tileset.tile_attributes &&
              tileset.tile_attributes[idx.toString()]?.includes(
                "jumpthrough"
              )) ||
            undefined,
        });
      }
    } else if (layer.objects && layer.objects.length > 0) {
      newLayer.kind = { element: { elements: [] } };
      for (const object of layer.objects) {
        const element = {} as any;
        // We have some weird offsets here because in the new format items are positioned at their
        // center, intead of the bottom left.
        //
        // Optimizing for the anemone and seaweed positions is hacky, but works well enough for now
        // and we can tweak the maps in the editor afterward.
        let item_specific_offset = [0, 0];
        switch (object.id) {
          case "crab":
            item_specific_offset = [0, 20];
          case "sword":
            item_specific_offset = [0, 20];
          case "sproinger":
            item_specific_offset = [-10, 15];
        }
        element.pos = [
          object.position.x + 48 / 2 + item_specific_offset[0],
          (map.grid_size.y - 1) * map.tile_size.y -
            object.position.y +
            8 +
            item_specific_offset[1],
        ];

        // Do some weird rounding to try and snap the elements to an 8x8 pixel grid and then
        // compensate for weirdness.
        let remainder = element.pos[0] % 8;
        element.pos[0] =
          element.pos[0] + (remainder >= 4 ? remainder : -remainder);
        element.pos[1] = Math.round(element.pos[1]);
        remainder = element.pos[1] % 8;
        element.pos[1] =
          element.pos[1] + (remainder >= 4 ? remainder : -remainder);
        element.pos[1] += 1.5;

        element.element = `/elements/${object.kind}/${object.id}/${object.id}.element.yaml`;
        newLayer.kind.element.elements.push(element);
      }
    } else {
      continue;
    }

    newMap.layers.push(newLayer);
  }

  // Add spawn points
  const spawnersLayer = {
    id: "spawners",
    kind: { element: { elements: [] } },
  } as any;
  for (const spawn_point of map.spawn_points) {
    spawnersLayer.kind.element.elements.push({
      pos: [
        spawn_point.x,
        (map.grid_size.y - 1) * map.tile_size.y - spawn_point.y,
      ],
      element: `/elements/environment/player_spawner/player_spawner.element.yaml`,
    });
  }

  newMap.layers.push(spawnersLayer);

  newMaps.push(newMap);
}

for (const map of newMaps) {
  const name = map.name;
  const filename = `../../assets/map/levels/${name}.map.json`;

  await Deno.writeTextFile(filename, JSON.stringify(map, undefined, "  "));
}

```

`old_assets/maps/test_level.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 31,
    "y": 23
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        57,
        59,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        59,
        61,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        57,
        59,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        59,
        61,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        57,
        59,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        59,
        61,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        12,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        13,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        57,
        59,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        59,
        61,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        57,
        59,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        59,
        61,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        12,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        13,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 313.01,
            "y": 269.10092
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 637.80585,
            "y": 269.37476
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "starfish_launcher",
          "kind": "item",
          "position": {
            "x": 782.8819,
            "y": 675.5
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 312.14642,
            "y": 615.9121
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 466.00787,
            "y": 497.32727
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 622.8744,
            "y": 246.50894
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 486.8546,
            "y": 178.04547
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 640.52356,
            "y": 432.3415
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 414.69,
            "y": 305.67166
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 610.0421,
            "y": 302.41638
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 530.3602,
            "y": 677.60126
          }
        },
        {
          "id": "trident",
          "kind": "item",
          "position": {
            "x": 702.3754,
            "y": 287.63873
          }
        },
        {
          "id": "crown_hat",
          "kind": "item",
          "position": {
            "x": 519.0186,
            "y": 405.68817
          }
        },
        {
          "id": "cowboy_hat",
          "kind": "item",
          "position": {
            "x": 307.5,
            "y": 394.0
          }
        },
        {
          "id": "chest_hat",
          "kind": "item",
          "position": {
            "x": 421.5,
            "y": 372.0
          }
        },
        {
          "id": "chefs_hat",
          "kind": "item",
          "position": {
            "x": 731.4,
            "y": 559.6
          }
        },
        {
          "id": "bucket_hat",
          "kind": "item",
          "position": {
            "x": 656.5,
            "y": 541.0
          }
        },
        {
          "id": "pirate_hat",
          "kind": "item",
          "position": {
            "x": 332.5,
            "y": 539.0
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 66.916664,
            "y": 684.9167
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 34.75,
            "y": 364.91666
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 894.875,
            "y": 685.375
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 933.5,
            "y": 365.16666
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 186.0,
            "y": 518.0
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 185.66667,
            "y": 132.33333
          }
        },
        {
          "id": "turtle_shell",
          "kind": "item",
          "position": {
            "x": 184.33333,
            "y": 258.66666
          }
        },
        {
          "id": "machine_gun",
          "kind": "item",
          "position": {
            "x": 185.0,
            "y": 388.0
          }
        },
        {
          "id": "cannon",
          "kind": "item",
          "position": {
            "x": 764.6667,
            "y": 50.0
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 774.0,
            "y": 403.0
          }
        },
        {
          "id": "sniper_rifle",
          "kind": "item",
          "position": {
            "x": 414.88895,
            "y": 667.1703
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 769.3333,
            "y": 552.0
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 600.5203,
            "y": 656.10565
          }
        },
        {
          "id": "blunderbuss",
          "kind": "item",
          "position": {
            "x": 176.682,
            "y": 653.12787
          }
        },
        {
          "id": "crate",
          "kind": "item",
          "position": {
            "x": 271.9712,
            "y": 536.9942
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 255.66667,
      "y": 641.0
    },
    {
      "x": 715.6667,
      "y": 639.6667
    }
  ]
}
```

`old_assets/maps/zyrafa01.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 27,
    "y": 21
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        3,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        57,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        61,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        15,
        19,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        20,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        22,
        23,
        23,
        23,
        23,
        23,
        24,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        5,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        6,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 320.0,
            "y": 461.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 128.0,
            "y": 301.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 736.0,
            "y": 301.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 352.0,
            "y": 365.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 640.0,
            "y": 461.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 706.4,
            "y": 313.525
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 68.5,
            "y": 301.0
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 437.15137,
            "y": 454.3866
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 426.4284,
            "y": 305.14282
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 767.923,
            "y": 323.23077
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 632.07684,
            "y": 437.76926
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 124.46149,
            "y": 282.15387
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 690.7143,
            "y": 323.14285
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 239.88235,
            "y": 252.94118
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 73.71431,
            "y": 326.0
          }
        },
        {
          "id": "blunderbass",
          "kind": "item",
          "position": {
            "x": 410.4353,
            "y": 484.04706
          }
        },
        {
          "id": "mines",
          "kind": "item",
          "position": {
            "x": 592.2353,
            "y": 252.94118
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 407.52942,
            "y": 287.05884
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 128.0,
      "y": 288.0
    },
    {
      "x": 736.0,
      "y": 288.0
    },
    {
      "x": 256.0,
      "y": 448.0
    },
    {
      "x": 608.0,
      "y": 448.0
    }
  ]
}
```

`old_assets/maps/zyrafa02.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 23,
    "y": 26
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        4,
        9,
        9,
        5,
        5,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        6,
        6,
        9,
        9,
        4,
        11,
        9,
        5,
        17,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        15,
        6,
        9,
        11,
        11,
        9,
        5,
        16,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        16,
        6,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        25,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        22,
        23,
        24,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        15,
        16,
        17,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        8,
        9,
        11,
        11,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        11,
        11,
        9,
        10,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        8,
        9,
        11,
        18,
        9,
        12,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        13,
        9,
        18,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 416.0,
            "y": 621.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 192.0,
            "y": 621.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 352.0,
            "y": 429.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 576.0,
            "y": 589.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 96.0,
            "y": 333.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 416.4546,
            "y": 465.9091
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 352.66663,
            "y": 308.1515
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 350.99994,
            "y": 407.5
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 188.24997,
            "y": 603.6665
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 241.66666,
            "y": 286.55557
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 423.5556,
            "y": 286.0
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 204.11111,
            "y": 448.55554
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 465.0,
            "y": 444.6667
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 338.88892,
            "y": 646.6666
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "60": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 128.0,
      "y": 320.0
    },
    {
      "x": 608.0,
      "y": 320.0
    },
    {
      "x": 128.0,
      "y": 512.0
    },
    {
      "x": 608.0,
      "y": 512.0
    }
  ]
}
```

`old_assets/maps/zyrafa03.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 27,
    "y": 22
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        5,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        16,
        6,
        10,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        4,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        12,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        13,
        9,
        9,
        12,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        13,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        11,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        7,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        9,
        9,
        9,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        2,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 32.0,
            "y": 461.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 768.0,
            "y": 429.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 64.0,
            "y": 429.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 288.0,
            "y": 525.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 288.0,
            "y": 205.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 224.0,
            "y": 205.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 576.0,
            "y": 205.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 512.0,
            "y": 525.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 575.9231,
            "y": 196.76924
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 284.90906,
            "y": 194.54543
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 507.72723,
            "y": 506.1818
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 383.70593,
            "y": 556.70593
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 448.14288,
            "y": 557.1429
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 801.16675,
            "y": 460.05554
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 544.0,
            "y": 544.0
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 266.25003,
            "y": 544.7352
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 403.375,
            "y": 326.875
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 566.125,
            "y": 227.75
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 288.0,
            "y": 224.0
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    },
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "58": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ]
      }
    }
  ],
  "spawn_points": [
    {
      "x": 64.0,
      "y": 288.0
    },
    {
      "x": 800.0,
      "y": 288.0
    },
    {
      "x": 192.0,
      "y": 512.0
    },
    {
      "x": 672.0,
      "y": 512.0
    }
  ]
}
```

`old_assets/maps/zyrafa04.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 34,
    "y": 23
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        5,
        16,
        16,
        6,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        12,
        2,
        2,
        13,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        12,
        13,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        15,
        16,
        16,
        16,
        16,
        16,
        16,
        17,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        5,
        16,
        16,
        16,
        16,
        17,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        15,
        16,
        16,
        16,
        16,
        6,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        22,
        24,
        57,
        59,
        59,
        61,
        22,
        24,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        8,
        12,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        5,
        16,
        16,
        6,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        13,
        10,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        12,
        2,
        2,
        13,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        15,
        8,
        10,
        16,
        16,
        8,
        10,
        17,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        12,
        13,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        12,
        13,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        0,
        0,
        8,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        10,
        9,
        9,
        9,
        9,
        9,
        9
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 448.0,
            "y": 429.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 146.16666,
            "y": 493.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 417.6667,
            "y": 238.66667
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 864.0,
            "y": 493.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 928.0,
            "y": 365.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 96.143555,
            "y": 524.88995
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 961.0,
            "y": 524.3334
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 595.4545,
            "y": 261.0909
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 142.91943,
            "y": 483.826
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 858.0,
            "y": 474.83337
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 410.00006,
            "y": 230.0
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 870.3333,
            "y": 384.16666
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 221.50003,
            "y": 503.16666
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 125.66667,
            "y": 376.0
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 528.1428,
            "y": 461.5
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 840.83344,
            "y": 504.0
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 595.7143,
            "y": 443.0
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 466.52383,
            "y": 440.9762
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    },
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "58": [
          "jumpthrough"
        ]
      }
    }
  ],
  "spawn_points": [
    {
      "x": 126.57143,
      "y": 355.7143
    },
    {
      "x": 959.2857,
      "y": 350.71432
    },
    {
      "x": 896.0,
      "y": 480.0
    },
    {
      "x": 192.0,
      "y": 480.0
    }
  ]
}
```

`old_assets/maps/zyrafa05.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 32,
    "y": 23
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        22,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        23,
        24,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        59,
        59,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        8,
        13,
        9,
        9,
        9,
        12,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        13,
        9,
        9,
        9,
        12,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        1,
        2,
        3,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        1,
        2,
        3,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        8,
        9,
        10,
        9,
        10,
        0,
        0
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 749.1538,
            "y": 447.53845
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 416.0,
            "y": 365.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 77.57143,
            "y": 462.14285
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 448.0,
            "y": 173.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 757.28577,
            "y": 462.14285
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 544.0,
            "y": 173.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 75.99994,
            "y": 435.85715
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 501.14282,
            "y": 402.2857
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 441.74994,
            "y": 161.99997
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 160.76923,
            "y": 492.00003
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 830.46155,
            "y": 492.00003
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 512.0,
            "y": 384.0
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 366.00003,
            "y": 200.46153
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 597.6923,
            "y": 199.6923
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 195.84616,
            "y": 185.84615
          }
        },
        {
          "id": "grenades",
          "kind": "item",
          "position": {
            "x": 865.53845,
            "y": 185.07692
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "58": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 172.61539,
      "y": 170.30772
    },
    {
      "x": 224.0,
      "y": 448.0
    },
    {
      "x": 800.0,
      "y": 448.0
    },
    {
      "x": 842.1539,
      "y": 172.61542
    }
  ]
}
```

`old_assets/maps/zyrafa06.json`:

```json
{
  "background_color": {
    "red": 0.0,
    "green": 0.0,
    "blue": 0.0,
    "alpha": 1.0
  },
  "background_layers": [
    {
      "texture_id": "background_04",
      "depth": 0.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_03",
      "depth": 2.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_02",
      "depth": 1.0,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    },
    {
      "texture_id": "background_01",
      "depth": 0.5,
      "offset": {
        "x": 0.0,
        "y": 0.0
      }
    }
  ],
  "world_offset": {
    "x": 0.0,
    "y": 0.0
  },
  "grid_size": {
    "x": 34,
    "y": 14
  },
  "tile_size": {
    "x": 32.0,
    "y": 32.0
  },
  "layers": [
    {
      "id": "main layer",
      "kind": "tile_layer",
      "has_collision": true,
      "tiles": [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        57,
        59,
        61,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        3,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        1,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        10,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        8,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        10,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        3,
        0,
        0,
        0,
        0,
        8,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        9,
        10,
        0,
        0
      ],
      "is_visible": true
    },
    {
      "id": "logic",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [],
      "is_visible": true
    },
    {
      "id": "decorations",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 512.0,
            "y": 237.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 192.0,
            "y": 333.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 416.0,
            "y": 333.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 864.0,
            "y": 205.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 736.0,
            "y": 333.0
          }
        },
        {
          "id": "seaweed",
          "kind": "decoration",
          "position": {
            "x": 384.0,
            "y": 141.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 896.0,
            "y": 333.0
          }
        },
        {
          "id": "anemones",
          "kind": "decoration",
          "position": {
            "x": 96.0,
            "y": 333.0
          }
        }
      ],
      "is_visible": true
    },
    {
      "id": "items",
      "kind": "object_layer",
      "has_collision": false,
      "objects": [
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 191.3334,
            "y": 304.6667
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 415.0,
            "y": 240.33337
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 694.00006,
            "y": 370.6667
          }
        },
        {
          "id": "fish_school",
          "kind": "environment",
          "position": {
            "x": 861.6666,
            "y": 188.33334
          }
        },
        {
          "id": "crab",
          "kind": "environment",
          "position": {
            "x": 457.33334,
            "y": 179.00003
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 232.88095,
            "y": 350.97617
          }
        },
        {
          "id": "musket",
          "kind": "item",
          "position": {
            "x": 622.2857,
            "y": 348.7143
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 433.0,
            "y": 146.00003
          }
        },
        {
          "id": "kick_bomb",
          "kind": "item",
          "position": {
            "x": 983.5714,
            "y": 337.2857
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 321.5556,
            "y": 364.6667
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 737.05554,
            "y": 364.86102
          }
        },
        {
          "id": "sproinger",
          "kind": "environment",
          "position": {
            "x": 928.71796,
            "y": 364.87183
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 687.4286,
            "y": 103.14284
          }
        },
        {
          "id": "sword",
          "kind": "item",
          "position": {
            "x": 212.42856,
            "y": 135.85715
          }
        }
      ],
      "is_visible": true
    }
  ],
  "tilesets": [
    {
      "id": "tileset",
      "texture_id": "default_tileset",
      "texture_size": {
        "x": 224,
        "y": 288
      },
      "tile_size": {
        "x": 32.0,
        "y": 32.0
      },
      "grid_size": {
        "x": 7,
        "y": 9
      },
      "first_tile_id": 1,
      "tile_cnt": 63,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "tile_attributes": {
        "58": [
          "jumpthrough"
        ],
        "56": [
          "jumpthrough"
        ],
        "60": [
          "jumpthrough"
        ]
      }
    },
    {
      "id": "decorations1",
      "texture_id": "default_decoration",
      "texture_size": {
        "x": 240,
        "y": 102
      },
      "tile_size": {
        "x": 48.0,
        "y": 51.0
      },
      "grid_size": {
        "x": 5,
        "y": 2
      },
      "first_tile_id": 64,
      "tile_cnt": 10,
      "tile_subdivisions": {
        "x": 3,
        "y": 3
      },
      "autotile_mask": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  ],
  "spawn_points": [
    {
      "x": 160.0,
      "y": 224.0
    },
    {
      "x": 320.0,
      "y": 320.0
    },
    {
      "x": 576.0,
      "y": 224.0
    },
    {
      "x": 704.0,
      "y": 320.0
    },
    {
      "x": 800.0,
      "y": 192.0
    },
    {
      "x": 960.0,
      "y": 320.0
    }
  ]
}
```

`old_assets/music.json`:

```json
[
  {
    "id": "across_the_pond",
    "path": "music/across_the_pond.ogg"
  },
  {
    "id": "ahoy",
    "path": "music/ahoy!.ogg"
  },
  {
    "id": "bait_the_hook",
    "path": "music/bait_the_hook.ogg"
  },
  {
    "id": "fish_and_ships",
    "path": "music/fish_and_ships.ogg"
  },
  {
    "id": "fish_bowl",
    "path": "music/fish_bowl.ogg"
  },
  {
    "id": "fish_tide",
    "path": "music/fish_tide.ogg"
  },
  {
    "id": "fishsticks",
    "path": "music/fishsticks.ogg"
  },
  {
    "id": "krill_or_be_krilled",
    "path": "music/krill_or_be_krilled.ogg"
  },
  {
    "id": "whale_theme",
    "path": "music/whale_theme.ogg"
  },
  {
    "id": "thanks_for_all_the_fished",
    "path": "music/thanks_for_all_the_fished.ogg"
  }
]
```

`old_assets/particle_effects.json`:

```json
[
  {
    "id": "musket_bullet_smoke",
    "path": "particle_effects/musket_bullet_smoke.json"
  },
  {
    "id": "musket_muzzle_smoke",
    "path": "particle_effects/musket_muzzle_smoke.json"
  },
  {
    "id": "explosion",
    "path": "particle_effects/explosion.json"
  },
  {
    "id": "explosion_fire",
    "path": "particle_effects/explosion_fire.json"
  },
  {
    "id": "explosion_particles",
    "path": "particle_effects/explosion_particles.json"
  },
  {
    "id": "hit",
    "path": "particle_effects/hit.json"
  },
  {
    "id": "life_ui_explosion",
    "path": "particle_effects/life_ui_explosion.json"
  },
  {
    "id": "smoke",
    "path": "particle_effects/smoke.json"
  },
  {
    "id": "machine_gun_muzzle_smoke",
    "path": "particle_effects/machine_gun_muzzle_smoke.json"
  },
  {
    "id": "machine_gun_firing_smoke",
    "path": "particle_effects/machine_gun_firing_smoke.json"
  },
  {
    "id": "grenades_smoke",
    "path": "particle_effects/grenades_smoke.json"
  },
  {
    "id": "empty",
    "path": "particle_effects/empty.json"
  },
  {
    "id": "kick_bomb_smoke",
    "path": "particle_effects/kick_bomb_smoke.json"
  },
  {
    "id": "sniper_rifle_muzzle_smoke",
    "path": "particle_effects/sniper_rifle_muzzle_smoke.json"
  },
  {
    "id": "sniper_rifle_bullet_smoke",
    "path": "particle_effects/sniper_rifle_bullet_smoke.json"
  },
  {
    "id": "cannon_cannonball_smoke",
    "path": "particle_effects/cannon_cannonball_smoke.json"
  },
  {
    "id": "blunderbuss_muzzle_smoke",
    "path": "particle_effects/blunderbuss_muzzle_smoke.json"
  },
  {
    "id": "blunderbuss_bullet_smoke",
    "path": "particle_effects/blunderbuss_bullet_smoke.json"
  }
]

```

`old_assets/particle_effects/blunderbuss_bullet_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.4,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 1,
  "shape": {
    "Circle": {
      "subdivisions": 20
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 0.3,
  "initial_velocity": 0,
  "initial_velocity_randomness": 0,
  "linear_accel": 0.00000017881393,
  "size": 2,
  "size_randomness": 0,
  "size_curve": {
    "points": [
      [
        0,
        2
      ],
      [
        0.48,
        1
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.8863636,
      "g": 0.8863636,
      "b": 0.8863636,
      "a": 1
    },
    "mid": {
      "r": 0.59090906,
      "g": 0.59090906,
      "b": 0.59090906,
      "a": 1
    },
    "end": {
      "r": 0.4090909,
      "g": 0.4090909,
      "b": 0.4090909,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 0.0000011920929
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/blunderbuss_muzzle_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.5,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 1,
  "shape": {
    "Circle": {
      "subdivisions": 20
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 0.3,
  "initial_velocity": 54.300003,
  "initial_velocity_randomness": 0.4,
  "linear_accel": -0.89999986,
  "size": 4.0,
  "size_randomness": 0,
  "size_curve": {
    "points": [
      [
        0,
        1.64
      ],
      [
        0.49,
        1.88
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.75,
      "g": 0.75,
      "b": 0.75,
      "a": 1
    },
    "mid": {
      "r": 0.90909094,
      "g": 0.90909094,
      "b": 0.90909094,
      "a": 1
    },
    "end": {
      "r": 1,
      "g": 1,
      "b": 1,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": -54.1
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/cannon_cannonball_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 1.0,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 1,
  "shape": {
    "Circle": {
      "subdivisions": 18
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 6.2831855,
  "initial_velocity": 0,
  "initial_velocity_randomness": 0,
  "linear_accel": 0,
  "size": 6,
  "size_randomness": 0.2,
  "size_curve": {
    "points": [
      [
        0,
        2
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.4,
      "g": 0.4,
      "b": 0.4,
      "a": 1
    },
    "mid": {
      "r": 0.8,
      "g": 0.8,
      "b": 0.8,
      "a": 1
    },
    "end": {
      "r": 1,
      "g": 1,
      "b": 1,
      "a": 0
    }
  },
  "gravity": {
    "x": 0,
    "y": 0
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/empty.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": false,
  "lifetime": 0,
  "lifetime_randomness": 0,
  "explosiveness": 0,
  "amount": 0,
  "shape": "Rectangle",
  "emitting": true,
  "initial_direction": {
    "x": 0,
    "y": 0
  },
  "initial_direction_spread": 0,
  "initial_velocity": 0,
  "initial_velocity_randomness": 0,
  "linear_accel": 0,
  "size": 0,
  "size_randomness": 0,
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 1,
      "g": 1,
      "b": 1,
      "a": 1
    },
    "mid": {
      "r": 1,
      "g": 1,
      "b": 1,
      "a": 1
    },
    "end": {
      "r": 1,
      "g": 1,
      "b": 1,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 0
  }
}
```

`old_assets/particle_effects/explosion.json`:

```json
{
  "local_coords": false,
  "emission_shape": {
    "Sphere": {
      "radius": 0.6
    }
  },
  "one_shot": true,
  "lifetime": 0.35,
  "lifetime_randomness": 0,
  "explosiveness": 0.6,
  "amount": 131,
  "shape": {
    "Circle": {
      "subdivisions": 10
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 6.2831855,
  "initial_velocity": 316,
  "initial_velocity_randomness": 0.6,
  "linear_accel": -7.4000025,
  "size": 5.0,
  "size_randomness": 0.3,
  "size_curve": {
    "points": [
      [
        0.005,
        1.48
      ],
      [
        0.255,
        1.0799999
      ],
      [
        1,
        0.120000005
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Additive",
  "colors_curve": {
    "start": {
      "r": 0.9825908,
      "g": 1,
      "b": 0.13,
      "a": 1
    },
    "mid": {
      "r": 0.8,
      "g": 0.19999999,
      "b": 0.2000002,
      "a": 1
    },
    "end": {
      "r": 0.101,
      "g": 0.099,
      "b": 0.099,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": -500
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/explosion_fire.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.2,
  "lifetime_randomness": 0,
  "explosiveness": 0.65,
  "amount": 41,
  "shape": {
    "Circle": {
      "subdivisions": 10
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 6.2831855,
  "initial_velocity": 73.9,
  "initial_velocity_randomness": 0.2,
  "linear_accel": 0,
  "size": 20.0,
  "size_randomness": 0.0,
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.8200004,
      "g": 1,
      "b": 0.31818175,
      "a": 1
    },
    "mid": {
      "r": 0.71000004,
      "g": 0.36210018,
      "b": 0,
      "a": 1
    },
    "end": {
      "r": 0.02,
      "g": 0,
      "b": 0.000000007152557,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 0
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/explosion_particles.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 1.0,
  "lifetime_randomness": 0.0,
  "explosiveness": 1.0,
  "amount": 50,
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 4.5,
  "initial_velocity": 800,
  "initial_velocity_randomness": 0.5,
  "linear_accel": -5.0,
  "size": 10.3,
  "size_randomness": 0.4,
  "blend_mode": "Additive",
  "gravity": {
    "x": 0,
    "y": 800
  },
  "colors_curve": {
    "start": {
      "r": 1,
      "g": 0.79319996,
      "b": 0.059999943,
      "a": 1
    },
    "mid": {
      "r": 0.46000004,
      "g": 0.06899994,
      "b": 0,
      "a": 0.8
    },
    "end": {
      "r": 1,
      "g": 0.9624,
      "b": 0.96000004,
      "a": 0.1
    }
  },
  "shape": {
    "Circle": {
      "subdivisions": 5
    }
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/grenades_smoke.json`:

```json
{
    "local_coords": false,
    "emission_shape": "Point",
    "one_shot": true,
    "lifetime": 0.7999999,
    "lifetime_randomness": 0,
    "explosiveness": 1,
    "amount": 1,
    "shape": {
        "Circle": {
            "subdivisions": 8
        }
    },
    "emitting": false,
    "initial_direction": {
        "x": 0,
        "y": -1
    },
    "initial_direction_spread": 0.3,
    "initial_velocity": 54.300003,
    "initial_velocity_randomness": 0.4,
    "linear_accel": -0.89999986,
    "size": 2,
    "size_randomness": 0,
    "size_curve": {
        "points": [
            [
                0,
                1.72
            ],
            [
                0.42,
                0.55999994
            ],
            [
                1,
                0
            ]
        ],
        "interpolation": "Linear",
        "resolution": 30
    },
    "blend_mode": "Alpha",
    "colors_curve": {
        "start": {
            "r": 0.18181819,
            "g": 0.1764,
            "b": 0.18360001,
            "a": 1
        },
        "mid": {
            "r": 0.36363637,
            "g": 0.3582,
            "b": 0.3582,
            "a": 1
        },
        "end": {
            "r": 0.4984091,
            "g": 0.49528182,
            "b": 0.4772727,
            "a": 1
        }
    },
    "gravity": {
        "x": 0,
        "y": -54.1
    },
    "post_processing": {}
}
```

`old_assets/particle_effects/hit.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.2,
  "lifetime_randomness": 0,
  "explosiveness": 0.65,
  "amount": 41,
  "shape": {
    "Circle": {
      "subdivisions": 10
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 6.2831855,
  "initial_velocity": 73.9,
  "initial_velocity_randomness": 0.2,
  "linear_accel": 0,
  "size": 5.6000004,
  "size_randomness": 0.4,
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.8200004,
      "g": 1,
      "b": 0.31818175,
      "a": 1
    },
    "mid": {
      "r": 0.71000004,
      "g": 0.36210018,
      "b": 0,
      "a": 1
    },
    "end": {
      "r": 0.02,
      "g": 0,
      "b": 0.000000007152557,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 0
  },
  "post_processing": {}
}

```

`old_assets/particle_effects/kick_bomb_smoke.json`:

```json
{
    "local_coords": false,
    "emission_shape": "Point",
    "one_shot": true,
    "lifetime": 0.9,
    "lifetime_randomness": 0,
    "explosiveness": 1,
    "amount": 1,
    "shape": {
        "Circle": {
            "subdivisions": 8
        }
    },
    "emitting": false,
    "initial_direction": {
        "x": 0,
        "y": -1
    },
    "initial_direction_spread": 0.3,
    "initial_velocity": 54.300003,
    "initial_velocity_randomness": 0.4,
    "linear_accel": -0.89999986,
    "size": 2.5,
    "size_randomness": 0,
    "size_curve": {
        "points": [
            [
                0,
                1.72
            ],
            [
                0.445,
                0.79999995
            ],
            [
                1,
                0
            ]
        ],
        "interpolation": "Linear",
        "resolution": 30
    },
    "blend_mode": "Alpha",
    "colors_curve": {
        "start": {
            "r": 0.18181819,
            "g": 0.1764,
            "b": 0.18360001,
            "a": 1
        },
        "mid": {
            "r": 0.25,
            "g": 0.25,
            "b": 0.25,
            "a": 1
        },
        "end": {
            "r": 0.30136362,
            "g": 0.30136362,
            "b": 0.28954545,
            "a": 1
        }
    },
    "gravity": {
        "x": 0,
        "y": -54.1
    },
    "post_processing": {}
}
```

`old_assets/particle_effects/life_ui_explosion.json`:

```json
{
  "local_coords": false,
  "emission_shape": {
    "Sphere": {
      "radius": 1.9
    }
  },
  "one_shot": true,
  "lifetime": 1.6500002,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 131,
  "shape": {
    "Circle": {
      "subdivisions": 20
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1.2
  },
  "initial_direction_spread": 0.5,
  "initial_velocity": 316,
  "initial_velocity_randomness": 0.70000005,
  "linear_accel": 0,
  "size": 5.5,
  "size_randomness": 0.3,
  "size_curve": {
    "points": [
      [
        0.005,
        1.48
      ],
      [
        0.255,
        1.0799999
      ],
      [
        1,
        0.120000005
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Additive",
  "colors_curve": {
    "start": {
      "r": 0.9825908,
      "g": 1,
      "b": 0.13,
      "a": 1
    },
    "mid": {
      "r": 0.8,
      "g": 0.19999999,
      "b": 0.2000002,
      "a": 1
    },
    "end": {
      "r": 0.101,
      "g": 0.099,
      "b": 0.099,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 1000
  },
  "post_processing": {}
}

```

`old_assets/particle_effects/machine_gun_firing_smoke.json`:

```json
{
    "local_coords": false,
    "emission_shape": {
        "Sphere": {
            "radius": 3
        }
    },
    "one_shot": true,
    "lifetime": 0.29999995,
    "lifetime_randomness": 0,
    "explosiveness": 1,
    "amount": 1,
    "shape": {
        "Circle": {
            "subdivisions": 16
        }
    },
    "emitting": false,
    "initial_direction": {
        "x": 0,
        "y": -1
    },
    "initial_direction_spread": 0.3,
    "initial_velocity": 54.300003,
    "initial_velocity_randomness": 0.4,
    "linear_accel": -0.89999986,
    "size": 2,
    "size_randomness": 0,
    "size_curve": {
        "points": [
            [
                0.005,
                1.36
            ],
            [
                0.49,
                1.84
            ],
            [
                1,
                0
            ]
        ],
        "interpolation": "Linear",
        "resolution": 30
    },
    "blend_mode": "Alpha",
    "colors_curve": {
        "start": {
            "r": 0.6818182,
            "g": 0.6818182,
            "b": 0.6818182,
            "a": 1
        },
        "mid": {
            "r": 0.77272725,
            "g": 0.77272725,
            "b": 0.77272725,
            "a": 1
        },
        "end": {
            "r": 1,
            "g": 1,
            "b": 1,
            "a": 1
        }
    },
    "gravity": {
        "x": 0,
        "y": -54.1
    },
    "post_processing": {}
}
```

`old_assets/particle_effects/machine_gun_muzzle_smoke.json`:

```json
{
    "local_coords": false,
    "emission_shape": {
        "Sphere": {
            "radius": 3
        }
    },
    "one_shot": true,
    "lifetime": 0.7999999,
    "lifetime_randomness": 0,
    "explosiveness": 1,
    "amount": 1,
    "shape": {
        "Circle": {
            "subdivisions": 16
        }
    },
    "emitting": false,
    "initial_direction": {
        "x": 0,
        "y": -1
    },
    "initial_direction_spread": 0.3,
    "initial_velocity": 54.300003,
    "initial_velocity_randomness": 0.4,
    "linear_accel": -0.89999986,
    "size": 2.9,
    "size_randomness": 0,
    "size_curve": {
        "points": [
            [
                0,
                0.88
            ],
            [
                0.49,
                1.88
            ],
            [
                1,
                0
            ]
        ],
        "interpolation": "Linear",
        "resolution": 30
    },
    "blend_mode": "Alpha",
    "colors_curve": {
        "start": {
            "r": 0.29545453,
            "g": 0.29545453,
            "b": 0.29545453,
            "a": 1
        },
        "mid": {
            "r": 0.52272725,
            "g": 0.52272725,
            "b": 0.52272725,
            "a": 1
        },
        "end": {
            "r": 0.84090906,
            "g": 0.84090906,
            "b": 0.84090906,
            "a": 1
        }
    },
    "gravity": {
        "x": 0,
        "y": -54.1
    },
    "post_processing": {}
}
```

`old_assets/particle_effects/musket_bullet_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.3,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 20,
  "shape": {
    "Circle": {
      "subdivisions": 12
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 6.2831855,
  "initial_velocity": 54.3,
  "initial_velocity_randomness": 0.2,
  "linear_accel": 0,
  "size": 5.6000004,
  "size_randomness": 0.2,
  "size_curve": {
    "points": [
      [
        0,
        1.6
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.47727272,
      "g": 0.47727272,
      "b": 0.47727272,
      "a": 1
    },
    "mid": {
      "r": 0.59090906,
      "g": 0.59090906,
      "b": 0.59090906,
      "a": 1
    },
    "end": {
      "r": 0.9,
      "g": 0.9,
      "b": 0.9,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": 0
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/musket_muzzle_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.7999999,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 1,
  "shape": {
    "Circle": {
      "subdivisions": 16
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 0.3,
  "initial_velocity": 54.300003,
  "initial_velocity_randomness": 0.4,
  "linear_accel": -0.89999986,
  "size": 2.9,
  "size_randomness": 0,
  "size_curve": {
    "points": [
      [
        0,
        0.88
      ],
      [
        0.49,
        1.88
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.6818182,
      "g": 0.6818182,
      "b": 0.6818182,
      "a": 1
    },
    "mid": {
      "r": 0.70454544,
      "g": 0.70454544,
      "b": 0.70454544,
      "a": 1
    },
    "end": {
      "r": 0.84090906,
      "g": 0.84090906,
      "b": 0.84090906,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": -54.1
  },
  "post_processing": {}
}
```

`old_assets/particle_effects/smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": false,
  "lifetime": 2.0,
  "lifetime_randomness": 0.3,
  "explosiveness": 0,
  "amount": 2,
  "emitting": true,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 3,
  "initial_velocity": 200,
  "initial_velocity_randomness": 0.3,
  "linear_accel": -4,
  "size": 20,
  "size_randomness": 0.2,
  "blend_mode": "Alpha",
  "gravity": {
    "x": 0,
    "y": -40.0
  },
  "colors_curve": {
    "start": {
      "r": 0.25,
      "g": 0.25,
      "b": 0.25,
      "a": 0.5
    },
    "mid": {
      "r": 0.3409091,
      "g": 0.3409091,
      "b": 0.3409091,
      "a": 0.3
    },
    "end": {
      "r": 0.84090906,
      "g": 0.84090906,
      "b": 0.84090906,
      "a": 0.0
    }
  },
  "shape": {
    "Circle": {
      "subdivisions": 5
    }
  }
}
```

`old_assets/particle_effects/sniper_rifle_bullet_smoke.json`:

```json
{
    "local_coords": false,
    "emission_shape": "Point",
    "one_shot": true,
    "lifetime": 0.4,
    "lifetime_randomness": 0,
    "explosiveness": 1,
    "amount": 1,
    "shape": {
        "Circle": {
            "subdivisions": 16
        }
    },
    "emitting": false,
    "initial_direction": {
        "x": 0,
        "y": -1
    },
    "initial_direction_spread": 0,
    "initial_velocity": 20,
    "initial_velocity_randomness": 0,
    "linear_accel": 0,
    "size": 2,
    "size_randomness": 0,
    "size_curve": {
        "points": [
            [
                0.005,
                1.36
            ],
            [
                0.49,
                1.84
            ],
            [
                1,
                0
            ]
        ],
        "interpolation": "Linear",
        "resolution": 30
    },
    "blend_mode": "Alpha",
    "colors_curve": {
        "start": {
            "r": 0.6818182,
            "g": 0.6818182,
            "b": 0.6818182,
            "a": 1
        },
        "mid": {
            "r": 0.77272725,
            "g": 0.77272725,
            "b": 0.77272725,
            "a": 1
        },
        "end": {
            "r": 1,
            "g": 1,
            "b": 1,
            "a": 1
        }
    },
    "gravity": {
        "x": 0,
        "y": -40
    },
    "post_processing": {}
}
```

`old_assets/particle_effects/sniper_rifle_muzzle_smoke.json`:

```json
{
  "local_coords": false,
  "emission_shape": "Point",
  "one_shot": true,
  "lifetime": 0.7999999,
  "lifetime_randomness": 0,
  "explosiveness": 1,
  "amount": 1,
  "shape": {
    "Circle": {
      "subdivisions": 16
    }
  },
  "emitting": false,
  "initial_direction": {
    "x": 0,
    "y": -1
  },
  "initial_direction_spread": 0.3,
  "initial_velocity": 54.300003,
  "initial_velocity_randomness": 0.4,
  "linear_accel": -0.89999986,
  "size": 3.5,
  "size_randomness": 0,
  "size_curve": {
    "points": [
      [
        0,
        0.88
      ],
      [
        0.49,
        1.88
      ],
      [
        1,
        0
      ]
    ],
    "interpolation": "Linear",
    "resolution": 30
  },
  "blend_mode": "Alpha",
  "colors_curve": {
    "start": {
      "r": 0.3181818,
      "g": 0.3181818,
      "b": 0.3181818,
      "a": 1
    },
    "mid": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5,
      "a": 1
    },
    "end": {
      "r": 0.8636364,
      "g": 0.8636364,
      "b": 0.8636364,
      "a": 1
    }
  },
  "gravity": {
    "x": 0,
    "y": -54.1
  },
  "post_processing": {}
}
```

`old_assets/player_characters.json`:

```json
[
  {
    "id": "pescy",
    "name": "Pescy",
    "texture": "player_pescy",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  },
  {
    "id": "sharky",
    "name": "Sharky",
    "texture": "player_sharky",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  },
  {
    "id": "fishy",
    "name": "Fishy",
    "texture": "player_fishy",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  },
  {
    "id": "orcy",
    "name": "Orcy",
    "texture": "player_orcy",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  },
  {
    "id": "lionfishy",
    "name": "Lionfishy",
    "texture": "player_lionfishy",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  },
  {
    "id": "catty",
    "name": "Catty",
    "texture": "player_catty",
    "offset": {
      "x": 0.0,
      "y": 16.0
    }
  }
]

```

`old_assets/player_characters.schema.json`:

```json
{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/object1637075321.json",
  "title": "Root",
  "type": "array",
  "default": [],
  "items":{
    "$id": "#root/items",
    "title": "Items",
    "type": "object",
    "required": [
      "id",
      "name",
      "texture"
    ],
    "properties": {
      "id": {
        "$id": "#root/items/id",
        "title": "Id",
        "type": "string",
        "default": "",
        "examples": [
          "blue"
        ],
        "pattern": "^.*$"
      },
      "name": {
        "$id": "#root/items/name",
        "title": "Name",
        "type": "string",
        "default": "",
        "examples": [
          "Blue"
        ],
        "pattern": "^.*$"
      },
      "description": {
        "$id": "#root/items/description",
        "title": "Description",
        "type": "string",
        "default": "",
        "examples": [
          "My name is 'Blue'"
        ],
        "pattern": "^.*$"
      },
      "texture": {
        "$id": "#root/items/texture",
        "title": "Texture",
        "type": "string",
        "default": "",
        "examples": [
          "player_blue"
        ],
        "pattern": "^.*$"
      },
      "scale": {
        "$id": "#root/items/scale",
        "title": "Scale",
        "type": "integer",
        "examples": [
          1
        ],
        "default": 0
      },
      "offset": {
        "$id": "#root/items/offset",
        "title": "Offset",
        "type": "object",
        "required": [
          "x",
          "y"
        ],
        "properties": {
          "x": {
            "$id": "#root/items/offset/x",
            "title": "X",
            "type": "number",
            "examples": [
              0.0
            ],
            "default": 0.0
          },
          "y": {
            "$id": "#root/items/offset/y",
            "title": "Y",
            "type": "number",
            "examples": [
              0.0
            ],
            "default": 0.0
          }
        }
      }
    ,
      "frame_size": {
        "$id": "#root/items/frame_size",
        "title": "Frame_size",
        "type": "object",
        "required": [
          "x",
          "y"
        ],
        "properties": {
          "x": {
            "$id": "#root/items/frame_size/x",
            "title": "X",
            "type": "integer",
            "examples": [
              50
            ],
            "default": 0
          },
          "y": {
            "$id": "#root/items/frame_size/y",
            "title": "Y",
            "type": "integer",
            "examples": [
              100
            ],
            "default": 0
          }
        }
      }
    ,
      "tint": {
        "$id": "#root/items/tint",
        "title": "Tint",
        "type": "object",
        "required": [
          "r",
          "g",
          "b",
          "a"
        ],
        "properties": {
          "r": {
            "$id": "#root/items/tint/r",
            "title": "R",
            "type": "integer",
            "examples": [
              1
            ],
            "default": 0
          },
          "g": {
            "$id": "#root/items/tint/g",
            "title": "G",
            "type": "integer",
            "examples": [
              1
            ],
            "default": 0
          },
          "b": {
            "$id": "#root/items/tint/b",
            "title": "B",
            "type": "integer",
            "examples": [
              1
            ],
            "default": 0
          },
          "a": {
            "$id": "#root/items/tint/a",
            "title": "A",
            "type": "integer",
            "examples": [
              1
            ],
            "default": 0
          }
        }
      }
    ,
      "animations": {
        "$id": "#root/items/animations",
        "title": "Animations",
        "type": "object",
        "required": [
          "idle",
          "move",
          "death",
          "death_alt",
          "float",
          "crouch",
          "slide"
        ],
        "properties": {
          "idle": {
            "$id": "#root/items/animations/idle",
            "title": "Idle",
            "type": "object",
            "required": [
              "id",
              "row",
              "frames",
              "fps",
              "is_looping"
            ],
            "properties": {
              "id": {
                "$id": "#root/items/animations/idle/id",
                "title": "Id",
                "type": "string",
                "default": "",
                "examples": [
                  "idle"
                ],
                "pattern": "^.*$"
              },
              "row": {
                "$id": "#root/items/animations/idle/row",
                "title": "Row",
                "type": "integer",
                "examples": [
                  0
                ],
                "default": 0
              },
              "frames": {
                "$id": "#root/items/animations/idle/frames",
                "title": "Frames",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "fps": {
                "$id": "#root/items/animations/idle/fps",
                "title": "Fps",
                "type": "integer",
                "examples": [
                  8
                ],
                "default": 0
              },
              "is_looping": {
                "$id": "#root/items/animations/idle/is_looping",
                "title": "Is_looping",
                "type": "boolean",
                "examples": [
                  true
                ],
                "default": true
              }
            }
          }
        ,
          "move": {
            "$id": "#root/items/animations/move",
            "title": "Move",
            "type": "object",
            "required": [
              "id",
              "row",
              "frames",
              "fps",
              "is_looping"
            ],
            "properties": {
              "id": {
                "$id": "#root/items/animations/move/id",
                "title": "Id",
                "type": "string",
                "default": "",
                "examples": [
                  "move"
                ],
                "pattern": "^.*$"
              },
              "row": {
                "$id": "#root/items/animations/move/row",
                "title": "Row",
                "type": "integer",
                "examples": [
                  1
                ],
                "default": 0
              },
              "frames": {
                "$id": "#root/items/animations/move/frames",
                "title": "Frames",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "fps": {
                "$id": "#root/items/animations/move/fps",
                "title": "Fps",
                "type": "integer",
                "examples": [
                  8
                ],
                "default": 0
              },
              "is_looping": {
                "$id": "#root/items/animations/move/is_looping",
                "title": "Is_looping",
                "type": "boolean",
                "examples": [
                  true
                ],
                "default": true
              }
            }
          }
        ,
          "jump": {
            "$id": "#root/items/animations/jump",
            "title": "Jump",
            "type": "object",
            "required": [
              "id",
              "row",
              "frames",
              "fps",
              "is_looping"
            ],
            "properties": {
              "id": {
                "$id": "#root/items/animations/jump/id",
                "title": "Id",
                "type": "string",
                "default": "",
                "examples": [
                  "jump"
                ],
                "pattern": "^.*$"
              },
              "row": {
                "$id": "#root/items/animations/jump/row",
                "title": "Row",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "frames": {
                "$id": "#root/items/animations/jump/frames",
                "title": "Frames",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "fps": {
                "$id": "#root/items/animations/jump/fps",
                "title": "Fps",
                "type": "integer",
                "examples": [
                  8
                ],
                "default": 0
              },
              "is_looping": {
                "$id": "#root/items/animations/jump/is_looping",
                "title": "Is_looping",
                "type": "boolean",
                "examples": [
                  true
                ],
                "default": true
              }
            }
          }
        ,
          "slide": {
            "$id": "#root/items/animations/fall",
            "title": "Fall",
            "type": "object",
            "required": [
              "id",
              "row",
              "frames",
              "fps",
              "is_looping"
            ],
            "properties": {
              "id": {
                "$id": "#root/items/animations/fall/id",
                "title": "Id",
                "type": "string",
                "default": "",
                "examples": [
                  "fall"
                ],
                "pattern": "^.*$"
              },
              "row": {
                "$id": "#root/items/animations/fall/row",
                "title": "Row",
                "type": "integer",
                "examples": [
                  6
                ],
                "default": 0
              },
              "frames": {
                "$id": "#root/items/animations/fall/frames",
                "title": "Frames",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "fps": {
                "$id": "#root/items/animations/fall/fps",
                "title": "Fps",
                "type": "integer",
                "examples": [
                  8
                ],
                "default": 0
              },
              "is_looping": {
                "$id": "#root/items/animations/fall/is_looping",
                "title": "Is_looping",
                "type": "boolean",
                "examples": [
                  true
                ],
                "default": true
              }
            }
          }
        ,
          "crouch": {
            "$id": "#root/items/animations/crouch",
            "title": "Crouch",
            "type": "object",
            "required": [
              "id",
              "row",
              "frames",
              "fps",
              "is_looping"
            ],
            "properties": {
              "id": {
                "$id": "#root/items/animations/crouch/id",
                "title": "Id",
                "type": "string",
                "default": "",
                "examples": [
                  "crouch"
                ],
                "pattern": "^.*$"
              },
              "row": {
                "$id": "#root/items/animations/crouch/row",
                "title": "Row",
                "type": "integer",
                "examples": [
                  5
                ],
                "default": 0
              },
              "frames": {
                "$id": "#root/items/animations/crouch/frames",
                "title": "Frames",
                "type": "integer",
                "examples": [
                  4
                ],
                "default": 0
              },
              "fps": {
                "$id": "#root/items/animations/crouch/fps",
                "title": "Fps",
                "type": "integer",
                "examples": [
                  8
                ],
                "default": 0
              },
              "is_looping": {
                "$id": "#root/items/animations/crouch/is_looping",
                "title": "Is_looping",
                "type": "boolean",
                "examples": [
                  true
                ],
                "default": true
              }
            }
          }

        }
      }
    ,
      "collider_size": {
        "$id": "#root/items/collider_size",
        "title": "Collider_size",
        "type": "object",
        "required": [
          "x",
          "y"
        ],
        "properties": {
          "x": {
            "$id": "#root/items/collider_size/x",
            "title": "X",
            "type": "integer",
            "examples": [
              50
            ],
            "default": 0
          },
          "y": {
            "$id": "#root/items/collider_size/y",
            "title": "Y",
            "type": "integer",
            "examples": [
              100
            ],
            "default": 0
          }
        }
      }
    ,
      "weapon_mount": {
        "$id": "#root/items/weapon_mount",
        "title": "Weapon_mount",
        "type": "object",
        "required": [
          "x",
          "y"
        ],
        "properties": {
          "x": {
            "$id": "#root/items/weapon_mount/x",
            "title": "X",
            "type": "integer",
            "examples": [
              25
            ],
            "default": 0
          },
          "y": {
            "$id": "#root/items/weapon_mount/y",
            "title": "Y",
            "type": "integer",
            "examples": [
              50
            ],
            "default": 0
          }
        }
      }
    ,
      "head_threshold": {
        "$id": "#root/items/head_threshold",
        "title": "Head_threshold",
        "type": "integer",
        "examples": [
          24
        ],
        "default": 0
      },
      "legs_threshold": {
        "$id": "#root/items/legs_threshold",
        "title": "Legs_threshold",
        "type": "integer",
        "examples": [
          48
        ],
        "default": 0
      },
      "jump_force": {
        "$id": "#root/items/jump_force",
        "title": "Jump_force",
        "type": "integer",
        "examples": [
          500
        ],
        "default": 0
      },
      "move_speed": {
        "$id": "#root/items/move_speed",
        "title": "Move_speed",
        "type": "integer",
        "examples": [
          250
        ],
        "default": 0
      },
      "slide_speed_factor": {
        "$id": "#root/items/slide_speed_factor",
        "title": "Slide_speed_factor",
        "type": "integer",
        "examples": [
          2
        ],
        "default": 0
      },
      "slide_duration": {
        "$id": "#root/items/slide_duration",
        "title": "Slide_duration",
        "type": "number",
        "examples": [
          1.5
        ],
        "default": 0.0
      },
      "float_gravity_factor": {
        "$id": "#root/items/float_gravity_factor",
        "title": "Float_gravity_factor",
        "type": "number",
        "examples": [
          0.5
        ],
        "default": 0.0
      }
    }
  }

}
```

`old_assets/sounds.json`:

```json
[
  {
    "id": "jump",
    "path": "sounds/jump.wav"
  },
  {
    "id": "pickup",
    "path": "sounds/pickup.wav"
  },
  {
    "id": "land",
    "path": "sounds/land.wav"
  },
  {
    "id": "slip",
    "path": "sounds/slip.wav"
  },
  {
    "id": "throw",
    "path": "sounds/throw.wav"
  },
  {
    "id": "death",
    "path": "sounds/fish_fillet.wav"
  },
  {
    "id": "shoot",
    "path": "sounds/shoot.ogg"
  },
  {
    "id": "swing",
    "path": "sounds/swing.wav"
  },
  {
    "id": "sword",
    "path": "sounds/sword.wav"
  },
  {
    "id": "explode",
    "path": "sounds/explode_m.wav"
  },
  {
    "id": "bullet_hit_dull",
    "path": "sounds/bullet_hit_dull.wav"
  }
]
```

`old_assets/textures.json`:

```json
[
  {
    "id": "yellow_board_upper_lh_corner",
    "path": "ui/Wood and Paper UI/Yellow Board/1.png"
  },
  {
    "id": "yellow_board_top",
    "path": "ui/Wood and Paper UI/Yellow Board/2.png"
  },
  {
    "id": "yellow_board_upper_rh_corner",
    "path": "ui/Wood and Paper UI/Yellow Board/3.png"
  },
  {
    "id": "yellow_board_lh_side",
    "path": "ui/Wood and Paper UI/Yellow Board/4.png"
  },
  {
    "id": "yellow_board_bg",
    "path": "ui/Wood and Paper UI/Yellow Board/5.png"
  },
  {
    "id": "yellow_board_rh_side",
    "path": "ui/Wood and Paper UI/Yellow Board/6.png"
  },
  {
    "id": "yellow_board_lower_lh_corner",
    "path": "ui/Wood and Paper UI/Yellow Board/7.png"
  },
  {
    "id": "yellow_board_bottom",
    "path": "ui/Wood and Paper UI/Yellow Board/8.png"
  },
  {
    "id": "yellow_board_lower_rh_corner",
    "path": "ui/Wood and Paper UI/Yellow Board/9.png"
  },
  {
    "id": "default_tool_icon",
    "path": "textures/ui/editor_icons/no_icon.png",
    "sprite_size": {
      "x": 0,
      "y": 0
    }
  },
  {
    "id": "cursor_tool_icon",
    "path": "textures/ui/editor_icons/Cursor.png",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "eraser_tool_icon",
    "path": "textures/ui/editor_icons/Eraser.png",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "object_placement_tool_icon",
    "path": "textures/ui/editor_icons/Object.png",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "tile_placement_tool_icon",
    "path": "textures/ui/editor_icons/Tile.png",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "spawn_point_icon",
    "path": "textures/ui/editor_icons/Pointer.png",
    "sprite_size": {
      "x": 38,
      "y": 49
    }
  },
  {
    "id": "spawn_point_placement_tool_icon",
    "path": "textures/ui/editor_icons/Pointer and Map.png",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "visibility_icon",
    "path": "textures/ui/editor_icons/visibility.png",
    "sprite_size": {
      "x": 512,
      "y": 512
    }
  },
  {
    "id": "visibility_off_icon",
    "path": "textures/ui/editor_icons/visibility_off.png",
    "sprite_size": {
      "x": 512,
      "y": 512
    }
  },
  {
    "id": "map_preview_placeholder",
    "path": "maps/no_preview.png",
    "sprite_size": {
      "x": 0,
      "y": 0
    }
  },
  {
    "id": "default_tileset",
    "path": "textures/map/default_tileset.png",
    "type": "tileset",
    "sprite_size": {
      "x": 32,
      "y": 32
    }
  },
  {
    "id": "default_decoration",
    "path": "textures/map/default_decoration.png",
    "type": "tileset",
    "sprite_size": {
      "x": 48,
      "y": 51
    }
  },
  {
    "id": "background_01",
    "path": "textures/map/background_01.png",
    "type": "background"
  },
  {
    "id": "background_02",
    "path": "textures/map/background_02.png",
    "type": "background"
  },
  {
    "id": "background_03",
    "path": "textures/map/background_03.png",
    "type": "background"
  },
  {
    "id": "background_04",
    "path": "textures/map/background_04.png",
    "type": "background"
  },
  {
    "id": "main_menu_header",
    "path": "ui/main_menu_header.png"
  },
  {
    "id": "player_sharky",
    "path": "textures/player/PlayerSharky(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "player_pescy",
    "path": "textures/player/PlayerPescy(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "player_fishy",
    "path": "textures/player/PlayerFishy(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "player_orcy",
    "path": "textures/player/PlayerOrcy(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "player_lionfishy",
    "path": "textures/player/PlayerLionfishy(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "player_catty",
    "path": "textures/player/PlayerCatty(96x80).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 80
    }
  },
  {
    "id": "pirate_hat",
    "path": "textures/items/hats/pirate hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 51,
      "y": 29
    }
  },
  {
    "id": "bonnet_hat",
    "path": "textures/items/hats/bonnet hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 35,
      "y": 25
    }
  },
  {
    "id": "bucket_hat",
    "path": "textures/items/hats/bucket hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 34,
      "y": 33
    }
  },
  {
    "id": "chefs_hat",
    "path": "textures/items/hats/chef's hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 35,
      "y": 28
    }
  },
  {
    "id": "chest_hat",
    "path": "textures/items/hats/chest hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 36,
      "y": 31
    }
  },
  {
    "id": "cowboy_hat",
    "path": "textures/items/hats/cowboy hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 49,
      "y": 25
    }
  },
  {
    "id": "crown_hat",
    "path": "textures/items/hats/crown hat.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 32,
      "y": 28
    }
  },
  {
    "id": "blunderbass",
    "path": "textures/items/Blunderbass(68x24).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 68,
      "y": 24
    }
  },
  {
    "id": "blunderbuss",
    "path": "textures/items/Blunderbuss(65x25).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 65,
      "y": 25
    }
  },
  {
    "id": "boots",
    "path": "textures/items/Boots(32x32).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 32,
      "y": 32
    }
  },
  {
    "id": "cannon",
    "path": "textures/items/Cannon(64x48).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 64,
      "y": 48
    }
  },
  {
    "id": "cannon_ball",
    "path": "textures/items/CannonBall(17x17).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 17,
      "y": 17
    }
  },
  {
    "id": "crate",
    "path": "textures/items/Crate(36x31).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 36,
      "y": 31
    }
  },
  {
    "id": "curse",
    "path": "textures/items/Curse(30x44).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 30,
      "y": 44
    }
  },
  {
    "id": "grenades",
    "path": "textures/items/Grenades(25x52).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 25,
      "y": 52
    }
  },
  {
    "id": "jellyfish",
    "path": "textures/items/Jellyfish(64x112).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 64,
      "y": 112
    }
  },
  {
    "id": "kick_bomb",
    "path": "textures/items/KickBomb(32x64).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 32,
      "y": 64
    }
  },
  {
    "id": "machine_gun",
    "path": "textures/items/MachineGun(80x24).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 80,
      "y": 24
    }
  },
  {
    "id": "mines",
    "path": "textures/items/Mines(33x35).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 33,
      "y": 35
    }
  },
  {
    "id": "musket",
    "path": "textures/items/Musket(92x32).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 92,
      "y": 32
    }
  },
  {
    "id": "seaweed",
    "path": "textures/items/Seaweed(48x51).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 48,
      "y": 51
    }
  },
  {
    "id": "small_projectile",
    "path": "textures/items/SmallProjectile(8x4).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 8,
      "y": 4
    }
  },
  {
    "id": "sniper_rifle",
    "path": "textures/items/SniperRifle(112x32).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 112,
      "y": 32
    }
  },
  {
    "id": "sproinger",
    "path": "textures/items/Sproinger(31x20).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 31,
      "y": 20
    }
  },
  {
    "id": "crab",
    "path": "textures/items/Crab(17x12).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 17,
      "y": 12
    }
  },
  {
    "id": "blue_tang",
    "path": "textures/items/BlueTang(19x9).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 19,
      "y": 9
    }
  },
  {
    "id": "royal_gramma",
    "path": "textures/items/RoyalGramma(25x11).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 25,
      "y": 11
    }
  },
  {
    "id": "arabian_angelfish",
    "path": "textures/items/ArabianAngelfish(19x12).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 19,
      "y": 12
    }
  },
  {
    "id": "blue_green_chromis",
    "path": "textures/items/BlueGreenChromis(22x11).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 22,
      "y": 11
    }
  },
  {
    "id": "banded_butterfly_fish",
    "path": "textures/items/BandedButterflyFish(19x11).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 19,
      "y": 11
    }
  },
  {
    "id": "small_fish1",
    "path": "textures/items/SmallFish1(13x9).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 13,
      "y": 9
    }
  },
  {
    "id": "small_fish1",
    "path": "textures/items/SmallFish1(13x9).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 13,
      "y": 9
    }
  },
  {
    "id": "small_fish2",
    "path": "textures/items/SmallFish3(13x9).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 13,
      "y": 9
    }
  },
  {
    "id": "small_fish3",
    "path": "textures/items/SmallFish2(13x9).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 13,
      "y": 9
    }
  },
  {
    "id": "starfish",
    "path": "textures/items/StarFish(19x18).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 19,
      "y": 18
    }
  },
  {
    "id": "starfish_launcher",
    "path": "textures/items/StarfishLauncher(37x20).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 37,
      "y": 20
    }
  },
  {
    "id": "fish_school_icon",
    "path": "textures/items/FishSchoolIcon(64x64).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 64,
      "y": 64
    }
  },
  {
    "id": "sword",
    "path": "textures/items/Sword(65x93).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 65,
      "y": 93
    }
  },
  {
    "id": "trident",
    "path": "textures/items/Trident(288x96).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 96,
      "y": 32
    }
  },
  {
    "id": "turtle_shell",
    "path": "textures/items/TurtleShell(32x32).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 32,
      "y": 32
    }
  },
  {
    "id": "galleon",
    "path": "textures/temp/Galleon(326x300).png"
  },
  {
    "id": "galleon_icon",
    "path": "textures/temp/GalleonIcon(32x29).png"
  },
  {
    "id": "shark",
    "path": "textures/temp/Shark(60x220).png"
  },
  {
    "id": "shark_icon",
    "path": "textures/temp/SharkIcon(32x34).png"
  },
  {
    "id": "volcano",
    "path": "textures/temp/Volcano(395x100).png"
  },
  {
    "id": "volcano_icon",
    "path": "textures/temp/VolcanoIcon(36x22).png"
  },
  {
    "id": "musket_bullet",
    "path": "textures/items/MusketBullet(15x15).png"
  },
  {
    "id": "machine_gun_bullet",
    "path": "textures/items/MachineGunBullet(7x4).png"
  },
  {
    "id": "sniper_rifle_bullet",
    "path": "textures/items/SniperRifleBullet(7x7).png"
  },
  {
    "id": "explosion_small",
    "path": "textures/explosions/Small(112x80).png",
    "sprite_size": {
      "x": 112,
      "y": 80
    }
  },
  {
    "id": "explosion_medium",
    "path": "textures/explosions/Medium(144x112).png",
    "sprite_size": {
      "x": 144,
      "y": 112
    }
  },
  {
    "id": "explosion_big",
    "path": "textures/explosions/Big(176x144).png",
    "sprite_size": {
      "x": 176,
      "y": 144
    }
  },
  {
    "id": "crate_breaking",
    "path": "textures/particles/CrateBreaking(128x128).png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 128,
      "y": 128
    }
  },
  {
    "id": "blunderbuss_bullet",
    "path": "textures/items/BlunderbussBullet.png",
    "type": "spritesheet",
    "sprite_size": {
      "x": 6,
      "y": 6
    }
  }
]

```

`old_assets/textures.schema.json`:

```json
{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/object1636321952.json",
  "title": "Root",
  "type": "array",
  "default": [],
  "items": {
    "$id": "#root/items",
    "title": "Items",
    "type": "object",
    "required": ["id", "path"],
    "properties": {
      "id": {
        "$id": "#root/items/id",
        "title": "Id",
        "type": "string",
        "default": "",
        "examples": ["default_tool_icon"],
        "pattern": "^.*$"
      },
      "path": {
        "$id": "#root/items/path",
        "title": "Path",
        "type": "string",
        "default": "",
        "examples": ["textures/editor_icons/no_icon.png"],
        "pattern": "^.*$"
      },
      "sprite_size": {
        "$id": "#root/items/sprite_size",
        "title": "Sprite_size",
        "type": "object",
        "required": ["x", "y"],
        "properties": {
          "x": {
            "$id": "#root/items/sprite_size/x",
            "title": "X",
            "type": "integer",
            "examples": [0],
            "default": 0
          },
          "y": {
            "$id": "#root/items/sprite_size/y",
            "title": "Y",
            "type": "integer",
            "examples": [0],
            "default": 0
          }
        }
      }
    }
  }
}

```

`old_assets/textures/temp/README.md`:

```md
### License exemption

All assets in /temp are exempt from our default CC BY-NC asset license, as we did not make them.

Assets in this folder are strictly meant for prototyping purposes and not to be used in any commercial build of the game.

When adding an asset to this folder, please list the asset license, creator name and source link (if applicable) under Attribution.

### Attribution

#### RainingShark(60x220).png
License: [OGA-BY-3.0](https://static.opengameart.org/OGA-BY-3.0.txt) \
Creator: [Pillarist](https://opengameart.org/users/pillarist) \
Source: https://opengameart.org/content/2d-shark-not-animated

```

`old_assets/tiled_maps/README.md`:

```md
# How to add a level to the Fish Folk: Jumpy

Tiled: https://www.mapeditor.org/, also in most distros is available as `tiled` package. 
1.7+ version is required, or you will have to open your `json` map file in a text editor and change the maps `version`
field to a `string`, manually, in order for it to work.

## Project window

Tiled projects are an optional thing to help navigate the levels while in tiled.

To open the project toolbar, click:
`View -> Toolbars -> Project`

To open the project with all our levels:
`File -> Open file or project -> levels.tiled-project`

This should result in a list of all the available maps in your project toolbar (the left-most list view)

## Creating a level

Section heavily under construction, if you feel there is some tips that can help designing levels - just throw them here, will reformat and make it nice later!

Usually to create a new level I click "Right Click -> Open containing folder" on lev*.json in Project window and in the file manager I duplicate this file. 

If you do not copy an existing map, there are a few requirements for Tiled maps that need to be met, in order to make them compatible with our internal format:

- Every tileset needs a `String` prop, named `texture_id`, that references a texture in `assets/textures.json`. This texture entry also needs to be of type `tilemap`.
The default ones, used in the core maps, are `default_tileset`, for the tiles, and `default_decoration` for the decorations (decorations are objects, not tiles, though. More on that below).
- Every tile layer with collisions needs a `bool` prop, named `collision`, set to true.
- Every object needs both a `name` and a `type` set (except for spawn points, which only need a `type`). The `name` acts as an id in-game, which will reference an entry in the appropriate data file, based on the objects `type`. Available types are:
    * `item` for items such as power-ups and weapons 
    * `decoration` for decorations, such as `seaweed` and `pots`, found in most maps
    * `spawn` for player spawn points

## Adding a map to the game

Add an entry to `assets/maps.json` and it will show up in the in-game maps menu:

```json
{
  "name": "My Awesome Map",
  "path": "assets/levels/lev01.json",
  "preview": "assets/levels/lev01.png",
  "is_tiled": true
}
```

Remember to set `is_tiled` to `true` for any map made in Tiled, so that the game knows that it must be converted to the internal format when it is loaded.

If you have no preview for your map, yet, you can use the generic `no_preview.png` in stead. This should not be used outside of testing, though.

This is it, after adding level to `levels.json`, it should appear in the game!
Levels are sorted in the same order as they are in the toml.

## Making a PR

To put level back into the game - level should make it to our git repo. 

The easiest way to do it is making a pull request.

I guess there are some UI clients for git, feel free to add some guides right here :)

but the idea is: 

Check what files were changed
```bash
> git status

On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	assets/levels/levels.toml

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	assets/levels/lev07.json
	assets/levels/lev07.png
```

This mean that "levels.toml" was changed and lev07 is a new level unknown to git.

Add all the files that should go to the repo:
```bash
git add asssets/levels
```

Check status again: 
```bash
On branch master
Your branch is up to date with 'origin/master'.

Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	new file:   assets/levels/lev07.json
	new file:   assets/levels/lev07.png
	modified:   assets/levels/levels.toml
```

Looks good enough, then to actually make a PR:

Create a named branch 
```bash
git switch -m "assets_lev07"
```
Commit changes
```bash
git commit -m "I made a level!"
```

## Pushing to GitHub

- Fork a repo in github's web UI
- Push to your repo `git push git://github.com/YOUR_USERNAME/fish2`
- Click the green button that will appear on your fork of github web ui

And there is no way to break anything in the main repo doing this, so dont be afraid. It's OK to commit extra files, do tons of extra commits, commit with a crazy commit message etc. 

```

`old_assets/tiled_maps/lev01.json`:

```json
{ "compressionlevel":-1,
 "height":21,
 "infinite":false,
 "layers":[
        {
         "data":[9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 33, 35, 0, 0, 0, 0, 0, 0, 0, 33, 35, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 40, 41, 59, 59, 59, 59, 59, 59, 59, 40, 42, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 57, 47, 49, 0, 0, 0, 0, 0, 0, 0, 47, 49, 61, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 5, 6, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 12, 13, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 57, 59, 59, 59, 61, 15, 16, 16, 17, 57, 59, 59, 61, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 21, 41, 41, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 41, 41, 14, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 13, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16],
         "height":21,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":27,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":1,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":223.666666666667,
                 "y":95.6666666666667
                }, 
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":94.833333333333,
                 "y":416.166666666667
                }, 
                {
                 "height":0,
                 "id":4,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":767.651515151516,
                 "y":416.833333333333
                }, 
                {
                 "height":0,
                 "id":5,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":641,
                 "y":95.6666666666663
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":39,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":61.3333333333333,
                 "y":526.916666666666
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":40,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":753.659090909091,
                 "y":526.060606060605
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":43,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":650.25,
                 "y":527.083333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":44,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":169.25,
                 "y":525.083333333333
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":45,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":424.083333333334,
                 "y":525.791666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":47,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":423.833333333333,
                 "y":237.166666666667
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":48,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":591.5,
                 "y":333
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":59,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":412.833333333333,
                 "y":77
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":49,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":226.666666666667,
                 "y":333.833333333333
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":51,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":261.916666666667,
                 "y":45.25
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":64,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":750.583333333334,
                 "y":205.25
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":52,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":554.125000000001,
                 "y":44.916666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":65,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":65.4583333333341,
                 "y":204.916666666667
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":53,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":464,
                 "y":239.5
                }, 
                {
                 "height":0,
                 "id":54,
                 "name":"machine_gun",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":446.166666666667,
                 "y":529.833333333333
                }, 
                {
                 "height":0,
                 "id":62,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":558,
                 "y":48.6666666666665
                }, 
                {
                 "height":0,
                 "id":63,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":333.333333333333,
                 "y":49.9999999999998
                }, 
                {
                 "height":0,
                 "id":64,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":171.333333333333,
                 "y":220.333333333334
                }, 
                {
                 "height":0,
                 "id":66,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":750.333333333333,
                 "y":232.666666666667
                }, 
                {
                 "height":0,
                 "id":67,
                 "name":"curse",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":210,
                 "y":548
                }, 
                {
                 "height":0,
                 "id":70,
                 "name":"cannon",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":700,
                 "y":548
                }, 
                {
                 "height":0,
                 "id":68,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":276,
                 "y":562
                }, 
                {
                 "height":0,
                 "id":69,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":563,
                 "y":562
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":71,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":27
}
```

`old_assets/tiled_maps/lev02.json`:

```json
{ "compressionlevel":-1,
 "height":21,
 "infinite":false,
 "layers":[
        {
         "data":[10, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 15, 17, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 26, 41, 41, 41, 24, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 46, 17, 0, 0, 0, 0, 0, 0, 0, 8, 10, 59, 61, 22, 41, 41, 41, 41, 41, 41, 24, 0, 0, 0, 22, 41, 20, 17, 0, 0, 0, 0, 0, 0, 57, 59, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 8, 10, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 5, 6, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 12, 13, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 61, 0, 0, 40, 41, 14, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 5, 6, 8, 10, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 11, 12, 13, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 41, 14, 8, 10, 0, 0, 0, 0, 0, 57, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 5, 6, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 11, 12, 13, 8, 10, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 40, 41, 14, 8, 10, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 1, 3, 11, 5, 6, 8, 10, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 29, 30, 0, 0, 0, 0, 29, 30, 11, 12, 13, 8, 12, 2, 2, 3, 59, 59, 61, 0, 0, 0, 1, 3, 0, 0, 0, 36, 37, 0, 0, 0, 0, 1, 3, 40, 41, 14, 8],
         "height":21,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":27,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":82.574422806927,
                 "y":468.849930806175
                }, 
                {
                 "height":0,
                 "id":65,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":316.61114553215,
                 "y":103.421244664739
                }, 
                {
                 "height":0,
                 "id":66,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":787.679058240397,
                 "y":195.834228280325
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":64,
                 "height":51,
                 "id":43,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":770.25,
                 "y":206.083333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":72,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":34.25,
                 "y":492.75
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":67,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":207.25,
                 "y":111.416666666666
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":74,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":457.25,
                 "y":109.416666666666
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":69,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":678.916666666667,
                 "y":462.083333333333
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":75,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":250.916666666667,
                 "y":429.083333333333
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":50,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":486.548661800487,
                 "y":525.093673965936
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":78,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":37.548661800487,
                 "y":237.760340632603
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":76,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":564.548661800487,
                 "y":302.093673965936
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":73,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":623.215328467154,
                 "y":45.760340632603
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":55,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":225.003649635037,
                 "y":570.935743710497
                }, 
                {
                 "height":0,
                 "id":79,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":655.003649635037,
                 "y":284.935743710497
                }, 
                {
                 "height":0,
                 "id":56,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":353.082628011287,
                 "y":19.381383664701
                }, 
                {
                 "height":0,
                 "id":81,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":726,
                 "y":70
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":82,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":27
}
```

`old_assets/tiled_maps/lev03.json`:

```json
{ "compressionlevel":-1,
 "height":35,
 "infinite":false,
 "layers":[
        {
         "data":[9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 5, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 5, 16, 16, 16, 16, 28, 16, 16, 17, 0, 0, 0, 0, 0, 0, 0, 15, 16, 16, 28, 16, 16, 16, 16, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 9, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 9, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 10, 9, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 10, 9, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 21, 23, 23, 23, 23, 49, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 47, 23, 23, 23, 23, 14, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 13, 11, 12, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 1, 13, 5, 11, 6, 12, 3, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 1, 13, 5, 45, 7, 46, 6, 12, 3, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 57, 59, 59, 59, 22, 23, 23, 23, 23, 23, 14, 9, 21, 23, 23, 23, 23, 23, 24, 59, 59, 59, 61, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 15, 6, 12, 46, 28, 45, 13, 5, 17, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 15, 6, 12, 11, 13, 5, 17, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 5, 6, 9, 9, 12, 13, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 6, 11, 5, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 21, 24, 59, 59, 59, 61, 0, 0, 0, 0, 0, 15, 18, 17, 0, 0, 0, 0, 0, 57, 59, 59, 59, 24, 14, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 21, 23, 23, 23, 35, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 33, 23, 23, 23, 14, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 2, 2, 2, 7, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 7, 2, 2, 2, 13, 5, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 12, 2, 2, 2, 3, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 5, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 6, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9],
         "height":35,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":35,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":1,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":255.666666666667,
                 "y":736.666666666667
                }, 
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":367.833333333333,
                 "y":476.166666666667
                }, 
                {
                 "height":0,
                 "id":4,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":864.651515151516,
                 "y":735.833333333333
                }, 
                {
                 "height":0,
                 "id":5,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":751,
                 "y":479.666666666666
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":39,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":698.333333333333,
                 "y":876.916666666666
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":43,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":780.25,
                 "y":749.083333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":44,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":237.25,
                 "y":621.083333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":47,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":872.833333333333,
                 "y":334.166666666667
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":48,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":539.5,
                 "y":366
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":67,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":809.5,
                 "y":334
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":59,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":264.833333333333,
                 "y":334
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":49,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":375.666666666667,
                 "y":876.833333333333
                }, 
                {
                 "gid":2147483712,
                 "height":51,
                 "id":66,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":365.583333333334,
                 "y":493.25
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":52,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":859.125000000001,
                 "y":493.916666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":65,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":203.458333333334,
                 "y":333.916666666667
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":53,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":591,
                 "y":337.833333333333
                }, 
                {
                 "height":0,
                 "id":55,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":431.333333333334,
                 "y":860.666666666666
                }, 
                {
                 "height":0,
                 "id":68,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":280.666666666667,
                 "y":495.666666666666
                }, 
                {
                 "height":0,
                 "id":69,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":882.666666666667,
                 "y":486.666666666666
                }, 
                {
                 "height":0,
                 "id":56,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":727.333333333332,
                 "y":859
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":70,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":35
}
```

`old_assets/tiled_maps/lev04.json`:

```json
{ "compressionlevel":-1,
 "height":15,
 "infinite":false,
 "layers":[
        {
         "data":[9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 33, 23, 23, 24, 57, 59, 59, 59, 59, 59, 59, 59, 61, 22, 23, 23, 35, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 18, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 21, 23, 23, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 23, 23, 14, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 46, 59, 59, 59, 45, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 21, 23, 23, 23, 23, 24, 0, 0, 0, 0, 0, 0, 1, 46, 17, 0, 0, 0, 15, 45, 3, 0, 0, 0, 0, 0, 0, 22, 23, 23, 23, 23, 14, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 46, 17, 0, 0, 0, 0, 0, 15, 45, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 46, 17, 0, 0, 0, 0, 0, 0, 0, 15, 45, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 17, 11, 0, 0, 0, 0, 0, 0, 0, 11, 15, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 5, 38, 34, 23, 23, 23, 23, 23, 23, 23, 34, 23, 34, 23, 23, 23, 23, 34, 23, 23, 23, 23, 23, 23, 23, 34, 23, 23, 23, 23, 23, 23, 34, 39, 6, 12, 13, 4, 9, 9, 21, 14, 9, 9, 9, 4, 9, 28, 9, 9, 9, 9, 4, 9, 9, 9, 9, 9, 9, 9, 4, 9, 9, 9, 28, 9, 9, 4, 12, 13, 9, 9, 11, 9, 9, 9, 9, 9, 9, 9, 11, 9, 7, 9, 9, 9, 9, 11, 9, 9, 21, 14, 9, 9, 9, 11, 9, 9, 9, 7, 9, 9, 11, 9, 9],
         "height":15,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":35,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":176.833333333333,
                 "y":327.166666666667
                }, 
                {
                 "height":0,
                 "id":5,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":947,
                 "y":328.666666666666
                }, 
                {
                 "height":0,
                 "id":70,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":141,
                 "y":72
                }, 
                {
                 "height":0,
                 "id":71,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":976,
                 "y":73
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":64,
                 "height":51,
                 "id":47,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":872.833333333333,
                 "y":334.166666666667
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":48,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":472.5,
                 "y":334
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":67,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":979.5,
                 "y":334
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":59,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":264.833333333333,
                 "y":334
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":65,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":88.458333333334,
                 "y":334.916666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":72,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":710,
                 "y":16.5
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":73,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":83,
                 "y":67.5
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":74,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":304,
                 "y":13.5
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":75,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":945,
                 "y":204.5
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":53,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":589,
                 "y":330.833333333333
                }, 
                {
                 "height":0,
                 "id":68,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":796.666666666667,
                 "y":15.666666666666
                }, 
                {
                 "height":0,
                 "id":69,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":382.666666666667,
                 "y":7.666666666666
                }, 
                {
                 "height":0,
                 "id":76,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":864,
                 "y":327
                }, 
                {
                 "height":0,
                 "id":77,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":309,
                 "y":327
                }, 
                {
                 "height":0,
                 "id":79,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":635.590525500428,
                 "y":41.0942150108035
                }, 
                {
                 "height":0,
                 "id":81,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":499.485180806392,
                 "y":367.108320763178
                }, 
                {
                 "height":0,
                 "id":82,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":586.874896381154,
                 "y":366.118458423363
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":84,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":35
}
```

`old_assets/tiled_maps/lev05.json`:

```json
{ "compressionlevel":-1,
 "height":15,
 "infinite":false,
 "layers":[
        {
         "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 59, 61, 22, 23, 23, 23, 35, 0, 0, 0, 0, 0, 33, 23, 23, 23, 24, 57, 59, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 6, 11, 0, 0, 0, 0, 0, 11, 5, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 11, 0, 0, 0, 0, 0, 11, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 47, 24, 57, 59, 61, 22, 49, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 1, 2, 3, 0, 0, 0, 11, 5, 28, 6, 11, 0, 0, 0, 1, 2, 3, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 21, 23, 14, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 12, 7, 13, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 9, 9, 9, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 5, 28, 6, 11, 0, 0, 0, 11, 28, 11, 0, 0, 0, 11, 7, 11, 0, 0, 0, 11, 28, 11, 0, 0],
         "height":15,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":45,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":70,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":114.5,
                 "y":49
                }, 
                {
                 "height":0,
                 "id":71,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":1334.33333333333,
                 "y":49
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":2147483717,
                 "height":51,
                 "id":48,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":668.5,
                 "y":238
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":67,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":1326.5,
                 "y":77.5
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":59,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":748.166666666666,
                 "y":110
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":65,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":475.458333333334,
                 "y":268.916666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":72,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":985.333333333333,
                 "y":13.8333333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":73,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":83,
                 "y":77.5
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":74,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":304,
                 "y":13.5
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":75,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":1109,
                 "y":74.5
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":53,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":753,
                 "y":239.5
                }, 
                {
                 "height":0,
                 "id":68,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":1167.66666666667,
                 "y":175.666666666666
                }, 
                {
                 "height":0,
                 "id":69,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":540.666666666667,
                 "y":28.666666666666
                }, 
                {
                 "height":0,
                 "id":76,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":991.666666666667,
                 "y":25.6666666666667
                }, 
                {
                 "height":0,
                 "id":77,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":337,
                 "y":177
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":78,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":45
}
```

`old_assets/tiled_maps/lev06.json`:

```json
{ "compressionlevel":-1,
 "height":20,
 "infinite":false,
 "layers":[
        {
         "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 23, 23, 23, 23, 35, 0, 0, 0, 0, 0, 33, 35, 2, 33, 35, 0, 0, 0, 0, 0, 33, 23, 23, 23, 23, 9, 9, 9, 9, 11, 59, 59, 59, 59, 59, 47, 49, 16, 47, 49, 59, 59, 59, 59, 59, 11, 9, 9, 9, 9, 9, 1, 3, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 1, 3, 9, 15, 17, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 15, 17, 9, 9, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 1, 3, 9, 9, 1, 3, 9, 9, 11, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 11, 15, 17, 9, 9, 15, 17, 9, 9, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 9, 9, 9, 9, 9, 1, 3, 11, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 11, 9, 1, 3, 9, 9, 9, 15, 17, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 9, 15, 17, 9, 23, 23, 23, 23, 49, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 47, 23, 23, 23, 23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 3, 0, 0, 8, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 10, 0, 0, 8, 9, 5, 16, 6, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 5, 16, 6, 9, 10, 0, 0, 8, 9, 10, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 8, 9, 10, 0, 0, 8, 9, 10, 0, 8, 10, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 8, 10, 0, 8, 9, 10, 0],
         "height":20,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":25,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":70,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":161.333333333333,
                 "y":422
                }, 
                {
                 "height":0,
                 "id":78,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":641.333333333333,
                 "y":424
                }, 
                {
                 "height":0,
                 "id":79,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":671.666666666667,
                 "y":3.66666666666661
                }, 
                {
                 "height":0,
                 "id":80,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":129.333333333333,
                 "y":1.9999999999999
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":2147483717,
                 "height":51,
                 "id":48,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":711.833333333333,
                 "y":237.333333333333
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":59,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":560.833333333333,
                 "y":174
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":65,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":376.791666666667,
                 "y":236.916666666667
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":73,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":74.3333333333333,
                 "y":236.833333333333
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":74,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":366,
                 "y":12.8333333333333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":81,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":176,
                 "y":45.5
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":82,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":646.666666666667,
                 "y":428.833333333333
                }, 
                {
                 "gid":2147483717,
                 "height":51,
                 "id":83,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":68.6666666666666,
                 "y":430.166666666667
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":69,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":782.666666666667,
                 "y":5.33333333333267
                }, 
                {
                 "height":0,
                 "id":84,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":420.666666666667,
                 "y":243.333333333333
                }, 
                {
                 "height":0,
                 "id":85,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":79.0833333333333,
                 "y":6.25
                }, 
                {
                 "height":0,
                 "id":86,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":754,
                 "y":435
                }, 
                {
                 "height":0,
                 "id":87,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":111.333333333333,
                 "y":433.333333333333
                }, 
                {
                 "height":0,
                 "id":88,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":432,
                 "y":40
                }, 
                {
                 "height":0,
                 "id":89,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":384,
                 "y":592
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":90,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":25
}
```

`old_assets/tiled_maps/levels.tiled-project`:

```tiled-project
{
    "automappingRulesFile": "",
    "commands": [
    ],
    "extensionsPath": "extensions",
    "folders": [
        "."
    ],
    "objectTypesFile": ""
}

```

`old_assets/tiled_maps/test_level.json`:

```json
{ "compressionlevel":-1,
 "height":23,
 "infinite":false,
 "layers":[
        {
         "data":[10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 57, 59, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 59, 61, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 57, 59, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 59, 61, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 57, 59, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 59, 61, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 12, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 13, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 57, 59, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 59, 61, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 57, 59, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 59, 61, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 13, 9],
         "height":23,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":31,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":1,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":255.666666666667,
                 "y":641
                }, 
                {
                 "height":0,
                 "id":5,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":715.666666666667,
                 "y":639.666666666666
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":135,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":66.9166666666666,
                 "y":684.916666666666
                }, 
                {
                 "height":0,
                 "id":136,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":34.75,
                 "y":364.916666666666
                }, 
                {
                 "height":0,
                 "id":137,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":894.875,
                 "y":685.375
                }, 
                {
                 "height":0,
                 "id":138,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":933.5,
                 "y":365.166666666666
                }, 
                {
                 "height":0,
                 "id":139,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":186,
                 "y":518
                }, 
                {
                 "height":0,
                 "id":100,
                 "name":"jellyfish",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":700,
                 "y":650
                }, 
                {
                 "height":0,
                 "id":147,
                 "name":"galleon",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":500,
                 "y":650
                }, 
                {
                 "height":0,
                 "id":149,
                 "name":"volcano",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":350,
                 "y":650
                }, 
                {
                 "height":0,
                 "id":148,
                 "name":"shark_rain",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":300,
                 "y":50
                }, 
                {
                 "height":0,
                 "id":140,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":185.666666666667,
                 "y":132.333333333333
                }, 
                {
                 "height":0,
                 "id":141,
                 "name":"turtle_shell",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":184.333333333333,
                 "y":258.666666666667
                }, 
                {
                 "height":0,
                 "id":142,
                 "name":"machine_gun",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":185,
                 "y":388
                }, 
                {
                 "height":0,
                 "id":143,
                 "name":"shoes",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":770,
                 "y":147
                }, 
                {
                 "height":0,
                 "id":144,
                 "name":"curse",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":772,
                 "y":266
                }, 
                {
                 "height":0,
                 "id":145,
                 "name":"cannon",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":764.666666666667,
                 "y":50.0000000000001
                }, 
                {
                 "height":0,
                 "id":146,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":774,
                 "y":403
                }, 
                {
                 "height":0,
                 "id":147,
                 "name":"sniper_rifle",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":414.888933360016,
                 "y":667.170302181309
                }, 
                {
                 "height":0,
                 "id":150,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":769.333333333333,
                 "y":552
                }, 
                {
                 "height":0,
                 "id":151,
                 "name":"life_ring",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":435.333333333333,
                 "y":547.333333333334
                }, 
                {
                 "height":0,
                 "id":152,
                 "name":"flippers",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":500,
                 "y":650
                }, 
                {
                 "height":0,
                 "id":152,
                 "name":"kick_bomb",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":600.520312187312,
                 "y":656.105663398038
                }, 
                {
                 "height":0,
                 "id":153,
                 "name":"kick_bomb",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":176.682009205524,
                 "y":653.127876726035
                }, 
                {
                 "height":0,
                 "id":154,
                 "name":"kick_bomb",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":271.971182709626,
                 "y":536.994196517911
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":155,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":31
}
```

`old_assets/tiled_maps/zyrafa01.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":21,
 "infinite":false,
 "layers":[
        {
         "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 3, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 8, 10, 0, 0, 0, 0, 0, 57, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 61, 0, 0, 0, 0, 0, 8, 10, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 15, 19, 23, 23, 23, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 23, 23, 23, 20, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 22, 23, 23, 23, 23, 23, 24, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 5, 16, 16, 16, 16, 16, 16, 16, 16, 16, 6, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 10, 0, 0, 0, 0, 0],
         "height":21,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":27,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":128,
                 "y":288
                }, 
                {
                 "height":0,
                 "id":67,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":736,
                 "y":288
                }, 
                {
                 "height":0,
                 "id":68,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":256,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":69,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":608,
                 "y":448
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":39,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":320,
                 "y":461
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":44,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":128,
                 "y":301
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":70,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":736,
                 "y":301
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":72,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":352,
                 "y":365
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":73,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":640,
                 "y":461
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":55,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":640,
                 "y":256
                }, 
                {
                 "height":0,
                 "id":64,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":224,
                 "y":480
                }, 
                {
                 "height":0,
                 "id":74,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":288,
                 "y":256
                }, 
                {
                 "height":0,
                 "id":75,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":464,
                 "y":384
                }, 
                {
                 "height":0,
                 "id":76,
                 "name":"mines",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":704,
                 "y":480
                }, 
                {
                 "height":0,
                 "id":77,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":464,
                 "y":480
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":78,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":27
}
```

`old_assets/tiled_maps/zyrafa02.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":26,
 "infinite":false,
 "layers":[
        {
         "data":[9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 4, 9, 9, 5, 5, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 6, 6, 9, 9, 4, 11, 9, 5, 17, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 15, 6, 9, 11, 11, 9, 5, 16, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 16, 6, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 57, 59, 59, 59, 25, 59, 59, 59, 61, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 57, 59, 59, 59, 22, 23, 24, 59, 59, 59, 61, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 10, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 59, 61, 0, 0, 0, 0, 0, 15, 16, 17, 0, 0, 0, 0, 0, 57, 59, 8, 9, 11, 11, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 11, 11, 9, 10, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 8, 9, 11, 18, 9, 12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 13, 9, 18, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9],
         "height":26,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":23,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":128,
                 "y":320
                }, 
                {
                 "height":0,
                 "id":82,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":608,
                 "y":320
                }, 
                {
                 "height":0,
                 "id":83,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":128,
                 "y":512
                }, 
                {
                 "height":0,
                 "id":84,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":608,
                 "y":512
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":39,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":416,
                 "y":621
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":78,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":192,
                 "y":621
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":79,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":352,
                 "y":429
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":80,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":576,
                 "y":589
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":81,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":96,
                 "y":333
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":85,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":320,
                 "y":256
                }, 
                {
                 "height":0,
                 "id":86,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":448,
                 "y":256
                }, 
                {
                 "height":0,
                 "id":87,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":288,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":88,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":480,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":89,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":400,
                 "y":640
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":90,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":23
}
```

`old_assets/tiled_maps/zyrafa03.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":22,
 "infinite":false,
 "layers":[
        {
         "data":[9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 5, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 6, 10, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 22, 23, 23, 23, 24, 0, 0, 0, 0, 0, 22, 23, 23, 23, 24, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 12, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 13, 9, 9, 12, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 13, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 12, 2, 2, 2, 2, 2, 2, 2, 2, 2, 7, 2, 2, 2, 2, 2, 2, 2, 2, 2, 13, 9, 9, 9, 9, 9, 9, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 9, 9, 2, 9, 2, 9, 2, 9, 2, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9],
         "height":22,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":27,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":64,
                 "y":288
                }, 
                {
                 "height":0,
                 "id":82,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":800,
                 "y":288
                }, 
                {
                 "height":0,
                 "id":83,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":192,
                 "y":512
                }, 
                {
                 "height":0,
                 "id":84,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":672,
                 "y":512
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":39,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":768,
                 "y":429
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":78,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":64,
                 "y":429
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":79,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":288,
                 "y":525
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":80,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":288,
                 "y":205
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":81,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":224,
                 "y":205
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":90,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":576,
                 "y":205
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":91,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":512,
                 "y":525
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":87,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":544,
                 "y":544
                }, 
                {
                 "height":0,
                 "id":88,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":320,
                 "y":544
                }, 
                {
                 "height":0,
                 "id":89,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":464,
                 "y":320
                }, 
                {
                 "height":0,
                 "id":92,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":608,
                 "y":224
                }, 
                {
                 "height":0,
                 "id":93,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":288,
                 "y":224
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":94,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":27
}
```

`old_assets/tiled_maps/zyrafa04.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":23,
 "infinite":false,
 "layers":[
        {
         "data":[9, 9, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 5, 16, 16, 6, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 12, 2, 2, 13, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 12, 13, 9, 9, 9, 12, 13, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 15, 16, 16, 16, 16, 16, 16, 17, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 9, 9, 9, 8, 5, 16, 16, 16, 16, 17, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 16, 16, 16, 16, 6, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 22, 24, 57, 59, 59, 61, 22, 24, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 8, 12, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 8, 9, 5, 16, 16, 6, 9, 10, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 13, 10, 9, 9, 9, 9, 9, 12, 13, 8, 10, 0, 0, 0, 0, 0, 8, 9, 12, 2, 2, 13, 9, 10, 0, 0, 0, 0, 0, 8, 10, 12, 13, 9, 9, 9, 9, 9, 12, 13, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 15, 8, 10, 16, 16, 8, 10, 17, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 13, 9, 8, 10, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 8, 10, 9, 12, 13, 9, 9, 9, 9, 9, 9, 9, 9, 9, 8, 10, 0, 0, 0, 0, 0, 0, 8, 10, 0, 0, 8, 10, 0, 0, 0, 0, 0, 0, 8, 10, 9, 9, 9, 9, 9, 9],
         "height":23,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":34,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":124,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":128,
                 "y":480
                }, 
                {
                 "height":0,
                 "id":135,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":960,
                 "y":480
                }, 
                {
                 "height":0,
                 "id":136,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":896,
                 "y":480
                }, 
                {
                 "height":0,
                 "id":137,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":192,
                 "y":480
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":81,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":448,
                 "y":429
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":116,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":192,
                 "y":593
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":132,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":416,
                 "y":237
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":133,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":864,
                 "y":493
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":134,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":928,
                 "y":365
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":129,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":224,
                 "y":384
                }, 
                {
                 "height":0,
                 "id":130,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":544,
                 "y":256
                }, 
                {
                 "height":0,
                 "id":131,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":531,
                 "y":461.5
                }, 
                {
                 "height":0,
                 "id":138,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":960,
                 "y":384
                }, 
                {
                 "height":0,
                 "id":139,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":640,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":140,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":512,
                 "y":448
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":141,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":34
}
```

`old_assets/tiled_maps/zyrafa05.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":23,
 "infinite":false,
 "layers":[
        {
         "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 59, 59, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 8, 13, 9, 9, 9, 12, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 13, 9, 9, 9, 12, 10, 0, 0, 0, 0, 8, 9, 1, 2, 3, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 1, 2, 3, 9, 10, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 8, 9, 10, 9, 10, 0, 0],
         "height":23,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":32,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":128,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":104,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":224,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":105,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":800,
                 "y":448
                }, 
                {
                 "height":0,
                 "id":106,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":896,
                 "y":448
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":81,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":416,
                 "y":365
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":91,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":64,
                 "y":465
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":111,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":448,
                 "y":173
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":112,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":768,
                 "y":465
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":113,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":544,
                 "y":173
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":103,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":160,
                 "y":512
                }, 
                {
                 "height":0,
                 "id":107,
                 "name":"sproinger",
                 "point":true,
                 "rotation":0,
                 "type":"environment",
                 "visible":true,
                 "width":0,
                 "x":832,
                 "y":512
                }, 
                {
                 "height":0,
                 "id":108,
                 "name":"musket",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":512,
                 "y":384
                }, 
                {
                 "height":0,
                 "id":109,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":416,
                 "y":192
                }, 
                {
                 "height":0,
                 "id":110,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":640,
                 "y":192
                }, 
                {
                 "height":0,
                 "id":114,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":192,
                 "y":192
                }, 
                {
                 "height":0,
                 "id":115,
                 "name":"grenades",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":864,
                 "y":192
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":116,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":32
}
```

`old_assets/tiled_maps/zyrafa06.json`:

```json
{ "compressionlevel":-1,
 "editorsettings":
    {
     "export":
        {
         "format":"json"
        }
    },
 "height":14,
 "infinite":false,
 "layers":[
        {
         "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 57, 59, 61, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 8, 9, 9, 9, 1, 2, 2, 3, 0, 0, 0, 0, 0, 8, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 10, 0, 0, 0, 0, 8, 9, 9, 9, 8, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 10, 0, 0, 0, 0, 8, 9, 9, 9, 8, 9, 9, 10, 0, 0, 0, 0, 0, 8, 9, 9, 9, 10, 0, 0, 0, 0, 0, 0, 0, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 0, 0, 0, 0, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 0, 0],
         "height":14,
         "id":1,
         "name":"main layer",
         "opacity":1,
         "properties":[
                {
                 "name":"collision",
                 "type":"bool",
                 "value":true
                }],
         "type":"tilelayer",
         "visible":true,
         "width":34,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":2,
         "name":"logic",
         "objects":[
                {
                 "height":0,
                 "id":3,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":160,
                 "y":224
                }, 
                {
                 "height":0,
                 "id":122,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":320,
                 "y":320
                }, 
                {
                 "height":0,
                 "id":123,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":576,
                 "y":224
                }, 
                {
                 "height":0,
                 "id":124,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":704,
                 "y":320
                }, 
                {
                 "height":0,
                 "id":125,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":800,
                 "y":192
                }, 
                {
                 "height":0,
                 "id":126,
                 "name":"spawn",
                 "point":true,
                 "rotation":0,
                 "type":"spawn_point",
                 "visible":true,
                 "width":0,
                 "x":960,
                 "y":320
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":4,
         "name":"decorations",
         "objects":[
                {
                 "gid":69,
                 "height":51,
                 "id":81,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":512,
                 "y":237
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":91,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":192,
                 "y":333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":116,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":416,
                 "y":333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":117,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":864,
                 "y":205
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":118,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":736,
                 "y":333
                }, 
                {
                 "gid":64,
                 "height":51,
                 "id":119,
                 "name":"seaweed",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":384,
                 "y":141
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":120,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":896,
                 "y":333
                }, 
                {
                 "gid":69,
                 "height":51,
                 "id":121,
                 "name":"anemones",
                 "rotation":0,
                 "type":"decoration",
                 "visible":true,
                 "width":48,
                 "x":96,
                 "y":333
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }, 
        {
         "draworder":"topdown",
         "id":5,
         "name":"items",
         "objects":[
                {
                 "height":0,
                 "id":109,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":448,
                 "y":160
                }, 
                {
                 "height":0,
                 "id":128,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":736,
                 "y":96
                }, 
                {
                 "height":0,
                 "id":129,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":256,
                 "y":128
                }, 
                {
                 "height":0,
                 "id":130,
                 "name":"sword",
                 "point":true,
                 "rotation":0,
                 "type":"item",
                 "visible":true,
                 "width":0,
                 "x":896,
                 "y":224
                }],
         "opacity":1,
         "type":"objectgroup",
         "visible":true,
         "x":0,
         "y":0
        }],
 "nextlayerid":6,
 "nextobjectid":131,
 "orientation":"orthogonal",
 "renderorder":"right-down",
 "tiledversion":"1.7.2",
 "tileheight":32,
 "tilesets":[
        {
         "columns":7,
         "firstgid":1,
         "image":"..\/textures\/map\/default_tileset.png",
         "imageheight":288,
         "imagewidth":224,
         "margin":0,
         "name":"tileset",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_tileset"
                }],
         "spacing":0,
         "tilecount":63,
         "tileheight":32,
         "tiles":[
                {
                 "id":56,
                 "type":"jumpthrough"
                }, 
                {
                 "id":58,
                 "type":"jumpthrough"
                }, 
                {
                 "id":60,
                 "type":"jumpthrough"
                }],
         "tilewidth":32
        }, 
        {
         "columns":5,
         "firstgid":64,
         "image":"..\/textures\/map\/default_decoration.png",
         "imageheight":102,
         "imagewidth":240,
         "margin":0,
         "name":"decorations1",
         "properties":[
                {
                 "name":"texture_id",
                 "type":"string",
                 "value":"default_decoration"
                }],
         "spacing":0,
         "tilecount":10,
         "tileheight":51,
         "tilewidth":48
        }],
 "tilewidth":32,
 "type":"map",
 "version":"1.6",
 "width":34
}
```

`packs/devpack/assets.yaml`:

```yaml
maps:
  - ./maps/devlevel_1.map.yaml
player_hats:
  - ./hats/pink_pirate.hat.yaml
map_elements:
  - ./items/blunderbass/element.yaml

```

`packs/devpack/hats/pink_pirate.atlas.yaml`:

```yaml
image: ./pink_pirate.png
tile_size: [50, 29]
columns: 1
rows: 1

```

`packs/devpack/hats/pink_pirate.hat.yaml`:

```yaml
name: Pink Pirate Hat
atlas: ./pink_pirate.atlas.yaml

offset: [-2, 33]
body_size: [50, 29]

```

`packs/devpack/items/blunderbass/Blunderbass.schema.yaml`:

```yaml
name: Blunderbass
full_name: devpack::Blunderbass
kind: !Struct
  fields:
    - name: cooldown
      schema: f32

```

`packs/devpack/items/blunderbass/BlunderbassMeta.schema.yaml`:

```yaml
name: BlunderbassMeta
full_name: devpack::BlunderbassMeta
asset_extension: blunderbass
kind: !Struct
  fields:
    - name: sprite
      schema: UntypedHandle # Handle<Image>
    - name: bullet_sprite
      schema: UntypedHandle # Handle<Image>
    - name: body_size
      schema: Vec2
    - name: grab_offset
      schema: Vec2
    - name: throw_velocity
      schema: f32
    - name: fin_anim
      schema: Ustr
    - name: cooldown
      schema: f32
    - name: bullet_count
      schema: u32
    - name: bullet_spread
      schema: f32
    - name: bullet
      schema: UntypedHandle # Handle<BulletMeta>
    - name: kickback
      schema: f32


```

`packs/devpack/items/blunderbass/blunderbass.yaml`:

```yaml
sprite: blunderbass.png
bullet_sprite: bullet.png
body_size: [32, 8]
grab_offset: [5, -7]
throw_velocity: 360
fin_anim: grab_2
cooldown: 0.75
bullet_count: 4
bullet_spread: 0.8
bullet: ./bullet.yaml
kickback: 600

```

`packs/devpack/items/blunderbass/bullet.atlas.yaml`:

```yaml
image: ./bullet.png
tile_size: [6, 6]
rows: 1
columns: 1

```

`packs/devpack/items/blunderbass/bullet.yaml`:

```yaml
lifetime: 1.0
speed: 720
body_diameter: 15
atlas: ./bullet.atlas.yaml

explosion_fps: 12
explosion_frames: 3
explosion_volume: 0.025
explosion_lifetime: 0.4
explosion_sound: ./bullet_hit_dull.ogg
explosion_atlas: ./explosion.atlas.yaml

```

`packs/devpack/items/blunderbass/element.yaml`:

```yaml
name: Blunderbass
category: Weapons
data: blunderbass.yaml
plugin: ./plugin.lua

```

`packs/devpack/items/blunderbass/explosion.atlas.yaml`:

```yaml
image: ./explosion.png
tile_size: [21, 21]
rows: 1
columns: 4

```

`packs/devpack/items/blunderbass/plugin.lua`:

```lua
local Entities = s"Entities"
local MapElementHydrated = s"MapElementHydrated"
local ElementHandle = s"ElementHandle"
local BlunderbassMeta = s"BlunderbassMeta"
local AtlasSprite = s"AtlasSprite"
local Sprite = s"Sprite"
local Item = s"Item"
local ItemThrow = s"ItemThrow"
local ItemGrab = s"ItemGrab"
local DehydrateOutOfBounds = s"DehydrateOutOfBounds"
local KinematicBody = s"KinematicBody"
local Transform = s"Transform"
local DropItem = s"DropItem"
local ItemUsed = s"ItemUsed"
local Blunderbass = s"Blunderbass"
local DamageRegion = s"DamageRegion"
local DamageRegionOwner = s"DamageRegionOwner"
local Time = s"Time"
local GlobalRng = s"GlobalRng"
local Lifetime = s"Lifetime"
local BulletHandle = s"BulletHandle"
local Bullet = s"Bullet"
local Vec2 = s"Vec2"

local function hydrate()
  local entities = resources:get(Entities)
  
  for spawner_ent, element_handle in entities:iter_with(ElementHandle, MapElementHydrated:without()) do
    local element = assets:get(element_handle[0])
    local blunderbass_meta = assets:get(element.data)

    if schema_of(blunderbass_meta) == BlunderbassMeta then
      -- Spawn a blunderbass
      local ent = entities:create()
      local sprite = Sprite:create();
      sprite.image = blunderbass_meta.sprite
      components:insert(ent, element_handle)
      components:insert(ent, MapElementHydrated:create())
      components:insert(ent, Blunderbass:create())
      components:insert(ent, sprite)
      components:insert(ent, components:get(spawner_ent, Transform))
      components:insert(ent, Item:create())
      local item_grab = ItemGrab:create()
      item_grab.fin_anim = blunderbass_meta.fin_anim
      item_grab.grab_offset = blunderbass_meta.grab_offset
      components:insert(ent, item_grab)
      components:insert(ent, ItemThrow:create())
      local dehydrate_out_of_bounds = DehydrateOutOfBounds:create()
      dehydrate_out_of_bounds[0] = spawner_ent
      components:insert(ent, dehydrate_out_of_bounds)
      local body = KinematicBody:create()
      body.gravity = assets.root.core.physics.gravity
      body.has_mass = true
      body.has_friction = true
      body.bounciness = 0
      components:insert(ent, body)

      -- Mark spawner as hydrated
      components:insert(spawner_ent, MapElementHydrated:create())
    end
  end
end

local function update()
  local entities = resources:get(Entities)
  local time = resources:get(Time)
  local rng = resources:get(GlobalRng)

  for ent, blunderbass in entities:iter_with(Blunderbass) do
    if blunderbass.cooldown > 0 then
        blunderbass.cooldown = blunderbass.cooldown - time.delta_seconds
    end
  
    local element_handle = components:get(ent, ElementHandle)
    local element = assets:get(element_handle[0])
    local blunderbass_meta = assets:get(element.data)

    local used = components:get(ent, ItemUsed)
    if used then
        if blunderbass.cooldown <= 0 then
            local player_ent = used.owner
            local player_sprite = components:get(player_ent, AtlasSprite)
            local player_transform = components:get(player_ent, Transform)
            local player_body = components:get(player_ent, KinematicBody)
            
            if player_sprite.flip_x then
                player_body.velocity.x = player_body.velocity.x + blunderbass_meta.kickback
            else
                player_body.velocity.x = player_body.velocity.x - blunderbass_meta.kickback
            end
            
            -- Spawn bullets
            for i = 1, blunderbass_meta.bullet_count do
                local bullet_ent = entities:create()
                components:insert(bullet_ent, player_transform)

                local bullet_sprite = Sprite:create()
                bullet_sprite.image = blunderbass_meta.bullet_sprite
                components:insert(bullet_ent, bullet_sprite)

                local bullet_handle = BulletHandle:create()
                bullet_handle[0] = blunderbass_meta.bullet
                components:insert(bullet_ent, bullet_handle)
            
                local bullet = Bullet:create()
                bullet.owner = player_ent
                local direction = Vec2:create()
                if player_sprite.flip_x then
                    direction.x = -1
                else
                    direction.x = 1
                end
                direction.y = (rng:f32() - 0.5) * blunderbass_meta.bullet_spread
                bullet.direction = direction
                components:insert(bullet_ent, bullet)
            end
            
            blunderbass.cooldown = blunderbass_meta.cooldown
        end
        
        components:remove(ent, ItemUsed)
    end
  end
end

session:add_system_to_stage(CoreStage.PreUpdate, hydrate)
session:add_system_to_stage(CoreStage.PostUpdate, update)

```

`packs/devpack/maps/devlevel_1.map.yaml`:

```yaml
name: Dev Level 1
background:
  speed:
  - 0.09
  - 0.04
  layers:
  - image: core:/map/resources/background_04.png
    size:
    - 896.0
    - 480.0
    depth: 6.0
    scale: 6.0
    offset:
    - 0.0
    - 0.0
  - image: core:/map/resources/background_03.png
    size:
    - 896.0
    - 480.0
    depth: 5.8
    scale: 2.2
    offset:
    - 100.0
    - 0.0
  - image: core:/map/resources/background_02.png
    size:
    - 896.0
    - 480.0
    depth: 4.0
    scale: 2.2
    offset:
    - 600.0
    - 0.0
  - image: core:/map/resources/background_01.png
    size:
    - 896.0
    - 480.0
    depth: 1.0
    scale: 2.2
    offset:
    - 500.0
    - 0.0
background_color: rgba(91, 87, 114, 255)
grid_size:
- 27
- 21
tile_size:
- 32.0
- 32.0
layers:
- id: main layer
  tilemap: core:/map/resources/ground_rock.atlas.yaml
  tiles:
  - pos:
    - 1
    - 1
    idx: 34
    collision: Solid
  - pos:
    - 2
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 3
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 4
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 5
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 6
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 7
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 8
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 9
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 10
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 11
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 12
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 16
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 17
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 18
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 19
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 20
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 21
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 22
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 23
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 24
    - 1
    idx: 35
    collision: Solid
  - pos:
    - 25
    - 1
    idx: 36
    collision: Solid
  - pos:
    - 1
    - 2
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 3
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 4
    - 2
    idx: 9
    collision: Solid
  - pos:
    - 5
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 6
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 7
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 8
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 9
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 10
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 11
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 12
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 16
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 17
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 18
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 19
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 20
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 21
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 22
    - 2
    idx: 9
    collision: Solid
  - pos:
    - 23
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 24
    - 2
    idx: 1
    collision: Solid
  - pos:
    - 25
    - 2
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 22
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 3
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 22
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 4
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 5
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 3
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 4
    - 5
    idx: 2
    collision: Solid
  - pos:
    - 22
    - 5
    idx: 0
    collision: Solid
  - pos:
    - 23
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 24
    - 5
    idx: 69
    collision: Solid
  - pos:
    - 25
    - 5
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 6
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 7
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 8
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 9
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 10
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 4
    - 11
    idx: 68
    collision: Solid
  - pos:
    - 5
    - 11
    idx: 70
    collision: Solid
  - pos:
    - 21
    - 11
    idx: 68
    collision: Solid
  - pos:
    - 22
    - 11
    idx: 70
    collision: Solid
  - pos:
    - 25
    - 11
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 12
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 13
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 14
    idx: 74
    collision: Solid
  - pos:
    - 2
    - 14
    idx: 70
    collision: Solid
  - pos:
    - 24
    - 14
    idx: 68
    collision: Solid
  - pos:
    - 25
    - 14
    idx: 75
    collision: Solid
  - pos:
    - 1
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 7
    - 15
    idx: 68
    collision: Solid
  - pos:
    - 8
    - 15
    idx: 78
    collision: Solid
  - pos:
    - 9
    - 15
    idx: 36
    collision: Solid
  - pos:
    - 17
    - 15
    idx: 34
    collision: Solid
  - pos:
    - 18
    - 15
    idx: 77
    collision: Solid
  - pos:
    - 19
    - 15
    idx: 70
    collision: Solid
  - pos:
    - 25
    - 15
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 9
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 17
    - 16
    idx: 17
    collision: Solid
  - pos:
    - 18
    - 16
    idx: 19
    collision: Solid
  - pos:
    - 25
    - 16
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 8
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 9
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 17
    - 17
    idx: 0
    collision: Solid
  - pos:
    - 18
    - 17
    idx: 2
    collision: Solid
  - pos:
    - 25
    - 17
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 18
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 25
    - 19
    idx: 21
    collision: Solid
  - pos:
    - 1
    - 20
    idx: 4
    collision: Solid
  - pos:
    - 25
    - 20
    idx: 4
    collision: Solid
  elements: []
- id: wood layer
  tilemap: core:/map/resources/ground_wood.atlas.yaml
  tiles:
  - pos:
    - 8
    - 8
    idx: 68
    collision: Solid
  - pos:
    - 9
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 10
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 11
    - 8
    idx: 78
    collision: Solid
  - pos:
    - 12
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 13
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 14
    - 8
    idx: 35
    collision: Solid
  - pos:
    - 15
    - 8
    idx: 77
    collision: Solid
  - pos:
    - 16
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 17
    - 8
    idx: 69
    collision: Solid
  - pos:
    - 18
    - 8
    idx: 70
    collision: Solid
  - pos:
    - 11
    - 9
    idx: 17
    collision: Solid
  - pos:
    - 12
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 13
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 14
    - 9
    idx: 18
    collision: Solid
  - pos:
    - 15
    - 9
    idx: 19
    collision: Solid
  - pos:
    - 11
    - 10
    idx: 0
    collision: Solid
  - pos:
    - 12
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 13
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 14
    - 10
    idx: 1
    collision: Solid
  - pos:
    - 15
    - 10
    idx: 2
    collision: Solid
  elements: []
- id: decorations
  tilemap: core:/map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 8
    - 3
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 3
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 3
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 4
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 11
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 17
    - 4
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 4
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 5
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 11
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 5
    idx: 49
    collision: Empty
  - pos:
    - 17
    - 5
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 5
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 6
    idx: 46
    collision: Empty
  - pos:
    - 9
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 10
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 11
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 12
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 13
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 14
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 15
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 16
    - 6
    idx: 38
    collision: Empty
  - pos:
    - 17
    - 6
    idx: 47
    collision: Empty
  - pos:
    - 18
    - 6
    idx: 48
    collision: Empty
  - pos:
    - 8
    - 7
    idx: 35
    collision: Empty
  - pos:
    - 9
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 10
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 11
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 12
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 13
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 14
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 15
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 16
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 17
    - 7
    idx: 36
    collision: Empty
  - pos:
    - 18
    - 7
    idx: 37
    collision: Empty
  - pos:
    - 9
    - 9
    idx: 23
    collision: Empty
  - pos:
    - 10
    - 9
    idx: 24
    collision: Empty
  - pos:
    - 16
    - 9
    idx: 24
    collision: Empty
  - pos:
    - 17
    - 9
    idx: 25
    collision: Empty
  elements:
  - pos:
    - 432.0
    - 362.0
    element: core:/elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 88.0
    - 202.0
    element: core:/elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 776.0
    - 202.0
    element: core:/elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 208.0
    - 106.0
    element: core:/elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 656.0
    - 106.0
    element: core:/elements/environment/sproinger/sproinger.element.yaml
  - pos:
    - 96.0
    - 121.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 768.0
    - 121.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 632.0
    - 121.5
    element: core:/elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 184.0
    - 121.5
    element: core:/elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 512.0
    - 121.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 736.0
    - 217.5
    element: core:/elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 376.0
    - 121.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 392.0
    - 185.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 296.0
    - 121.5
    element: core:/elements/decoration/anemones/anemones.element.yaml
  - pos:
    - 160.0
    - 409.5
    element: core:/elements/decoration/seaweed/seaweed.element.yaml
  - pos:
    - 584.0
    - 601.5
    element: core:/elements/decoration/seaweed/seaweed.element.yaml
- id: decorations 2
  tilemap: core:/map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 13
    - 3
    idx: 44
    collision: Empty
  - pos:
    - 13
    - 4
    idx: 33
    collision: Empty
  - pos:
    - 13
    - 5
    idx: 0
    collision: Empty
  - pos:
    - 9
    - 7
    idx: 20
    collision: Empty
  - pos:
    - 17
    - 7
    idx: 20
    collision: Empty
  elements: []
- id: platforms
  tilemap: core:/map/resources/ship_decorations.atlas.yaml
  tiles:
  - pos:
    - 11
    - 4
    idx: 41
    collision: JumpThrough
  - pos:
    - 12
    - 4
    idx: 42
    collision: JumpThrough
  - pos:
    - 13
    - 4
    idx: 42
    collision: JumpThrough
  - pos:
    - 14
    - 4
    idx: 42
    collision: JumpThrough
  - pos:
    - 15
    - 4
    idx: 43
    collision: JumpThrough
  - pos:
    - 10
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 11
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 12
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 13
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 14
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 15
    - 16
    idx: 42
    collision: JumpThrough
  - pos:
    - 16
    - 16
    idx: 42
    collision: JumpThrough
  elements: []
- id: items
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 384.0
    - 118.5
    element: core:/elements/item/kick_bomb/kick_bomb.element.yaml
  - pos:
    - 432.0
    - 182.5
    element: core:/elements/item/musket/musket.element.yaml
  - pos:
    - 728.0
    - 214.5
    element: core:/elements/item/crate/crate.element.yaml
  - pos:
    - 136.0
    - 214.5
    element: core:/elements/item/crate/crate.element.yaml
  - pos:
    - 536.0
    - 303.0
    element: core:/elements/item/grenade/grenade.element.yaml
  - pos:
    - 784.0
    - 495.0
    element: core:/elements/item/grenade/grenade.element.yaml
  - pos:
    - 80.0
    - 495.0
    element: core:/elements/item/grenade/grenade.element.yaml
  - pos:
    - 328.0
    - 303.0
    element: core:/elements/item/grenade/grenade.element.yaml
  - pos:
    - 432.0
    - 555.0
    element: /items/blunderbass/element.yaml
  - pos:
    - 300.0
    - 710.0
    element: core:/elements/item/jellyfish/jellyfish.element.yaml
  - pos:
    - 480.0
    - 118.5
    element: core:/elements/item/kick_bomb/kick_bomb.element.yaml
- id: critters
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 790.0
    - 120.0
    element: core:/elements/environment/snail/snail.element.yaml
  - pos:
    - 245.0
    - 198.0
    element: core:/elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 670.0
    - 250.0
    element: core:/elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 351.0
    - 604.0
    element: core:/elements/environment/fish_school/fish_school.element.yaml
  - pos:
    - 338.0
    - 295.5
    element: core:/elements/environment/crab/crab.element.yaml
  - pos:
    - 530.0
    - 105.5
    element: core:/elements/environment/crab/crab.element.yaml
  - pos:
    - 75.0
    - 104.0
    element: core:/elements/environment/snail/snail.element.yaml
  - pos:
    - 520.0
    - 549.0
    element: core:/elements/environment/snail/snail.element.yaml
  - pos:
    - 578.0
    - 584.5
    element: core:/elements/environment/urchin/urchin.element.yaml
  - pos:
    - 174.0
    - 393.5
    element: core:/elements/environment/urchin/urchin.element.yaml
  - pos:
    - 301.0
    - 172.0
    element: core:/elements/environment/fish_school/fish_school.element.yaml
- id: spawners
  tilemap: null
  tiles: []
  elements:
  - pos:
    - 384.0
    - 376.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 480.0
    - 376.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 240.0
    - 536.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 128.0
    - 216.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 736.0
    - 216.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml
  - pos:
    - 624.0
    - 536.0
    element: core:/elements/environment/player_spawner/player_spawner.element.yaml

```

`packs/devpack/pack.yaml`:

```yaml
name: Dev Pack
id: devpack_01hgrar12df9rva3mxrh2x3vgj
version: 0.1.0
game_version: 0.12.2
root: ./assets.yaml
schemas:
  - /items/blunderbass/BlunderbassMeta.schema.yaml
  - /items/blunderbass/Blunderbass.schema.yaml

```

`rust-toolchain`:

```
1.93.0
```

`scripts/build-web.sh`:

```sh
#!/usr/bin/env bash

#
# This script is usually run by the justfile
#

is_release="$1"
target=wasm32-unknown-unknown
target_dir="web-target"

release_arg=""
build_kind="debug"
dist_dir="$target_dir/wasm-debug"

if [ "$is_release" == "release" ]; then
    release_arg="--release"
    build_kind="release"
    dist_dir="$target_dir/wasm-release"
fi

export CARGO_TARGET_DIR=$target_dir

set -ex

cargo build --target $target $release_arg
rm -rf $dist_dir
mkdir -p $dist_dir
wasm-bindgen --out-dir $dist_dir --target web --no-typescript $target_dir/$target/$build_kind/jumpy.wasm
cp wasm_resources/index.html $dist_dir/index.html
cp -r assets $dist_dir

```

`scripts/find-atlas-tiles.sh`:

```sh
#!/usr/bin/env bash

HERE="$(dirname "$(dirname "${BASH_SOURCE[0]}")")" || exit

find_layers() {
    yq -y -er --arg target_tilemap "$1" --arg indexes_raw "$2" '
        def filter_layer_by_tilemap:
            .tilemap // empty | endswith("/" + $target_tilemap);

        def filter_layer_by_indexes($indexes):
            .tiles as $tiles
            | $indexes
            | any(. as $i | $tiles | any(.idx == $i));

        def find_layers_with_indexes($indexes):
            .layers
            | map(select(filter_layer_by_tilemap))
            | map(select(filter_layer_by_indexes($indexes)))
            | map(.id);

        find_layers_with_indexes($indexes_raw | fromjson)
    '
}

declare LAYERS

echo
find "$HERE"/assets/map/levels -type f | sort -V | while read f; do
    LAYERS="$(find_layers "$1" "$2" < "$f")"
    [ "$LAYERS" = '[]' ] || printf '%s\n' "$f" "$LAYERS" ''
done

```

`src/README.md`:

```md
# Jumpy

Jumpy is a pixel-style, tactical 2D shooter with a fishy theme.

This is the project's internal developer API and architecture documentation. We want these docs to
be the go-to place for understanding how Jumpy works, so you'll find much more than the comments on
various types and functions.

#### 🚧 Under Construction

Jumpy is still under heavy development and the docs as well as the code will be changing and
incomplete. If you want to help out, feel free to fill in some missing docs or clarify something we
didn't explain very well. We're glad to answer any questions you might have along the way!

#### Diagrams

Throughout the docs there are diagrams to explain certain topics. These may contain clickable links,
highlighted in blue, that will bring you to the relevant module or struct. We also use a convention to
indicate what kind of code object it links to, based on the shape of the box.

<pre class="mermaid">
graph LR
  ex("Example Link ( Note )"):::dotted -.-> sm(GameMeta):::code
  click sm call docLink(jumpy/struct.GameMeta.html)

  crate:::code --> module([module]):::code --> struct(struct):::code --> concept>Concept]
</pre>

You can pan the diagram by clicking and dragging or zoom by holding `ctrl` and scrolling.

[gh_issue]: https://github.com/fishfolk/jumpy/issues/new

## Overall Architecture

Jumpy has just finished a migration to the new [`bones_framework`] and some of the docs might not
be up-to-date yet.

The good news is that everything is simpler now! All of jumpy has been moved to one crate with many
of it's more foundational features being moved into [`bones_framework`]. Additionally, Jumpy no longer
uses Bevy or the Bevy ECS directly. The game is fully built on Bones with Bevy being used in the
background, but only for rendering.

An explanation post and more up-to-date docs are comming soon!

[`bones_framework`]: https://fishfolk.github.io/bones/rustdoc/bones_framework/index.html

```

`src/audio.rs`:

```rs
use crate::prelude::*;

pub mod music;
use kira::sound::static_sound::StaticSoundSettings;
pub use music::*;

pub fn game_plugin(game: &mut Game) {
    game.init_shared_resource::<AudioCenter>();

    let modified_session = game.sessions.modify_and_replace_existing_session(
        SessionNames::AUDIO,
        |session: &mut SessionBuilder| {
            session.stages().add_system_to_stage(First, music_system);
        },
    );

    if modified_session.is_none() {
        panic!("Audio plugin failed to find existing bones audio session, make sure jumpy audio plugin is installed after bones default plugins.")
    }
}

/// Extension of bones [`AudioCenter`].
pub trait AudioCenterExt {
    /// Play some music using [`StaticSoundSettings`]. These may or may not loop.
    ///
    /// `force_restart` determines if the same music is played if it should restart or not.
    fn play_music_from_settings(
        &mut self,
        sound_source: Handle<AudioSource>,
        sound_settings: StaticSoundSettings,
        force_restart: bool,
    );
}

impl AudioCenterExt for AudioCenter {
    fn play_music_from_settings(
        &mut self,
        sound_source: Handle<AudioSource>,
        sound_settings: StaticSoundSettings,
        force_restart: bool,
    ) {
        self.push_event(AudioEvent::PlayMusic {
            sound_source,
            sound_settings: Box::new(sound_settings),
            force_restart,
        });
    }
}

```

`src/audio/music.rs`:

```rs
use bones_framework::prelude::kira::{
    sound::{static_sound::StaticSoundSettings, PlaybackState, Region},
    tween::Tween,
};

use crate::{prelude::*, ui::main_menu::MenuPage};

/// The music playback state.
#[derive(HasSchema, Default, PartialEq, Eq)]
#[schema(no_clone)]
pub enum MusicState {
    /// Music is not playing.
    #[default]
    None,
    /// Playing the main menu music.
    MainMenu,
    /// Playing the character select music.
    CharacterSelect,
    /// Playing the credits music.
    Credits,
    /// Playing the fight music.
    Fight {
        /// The index of the song in the shuffled playlist.
        idx: usize,
    },
}

/// Bevy resource containing the in-game music playlist shuffled.
#[derive(HasSchema, Deref, DerefMut, Clone, Default)]
#[repr(C)]
pub struct ShuffledPlaylist(pub SVec<Handle<AudioSource>>);

/// The amount of time to spend fading the music in and out.
pub const MUSIC_FADE_DURATION: Duration = Duration::from_millis(500);

pub const MUSIC_VOLUME: f64 = 0.1;

/// System that plays music according to the game mode.
pub(super) fn music_system(
    meta: Root<GameMeta>,
    mut audio: ResMut<AudioCenter>,
    mut shuffled_fight_music: ResMutInit<ShuffledPlaylist>,
    mut music_state: ResMutInit<MusicState>,
    ctx: Res<EguiCtx>,
    sessions: Res<Sessions>,
) {
    if shuffled_fight_music.is_empty() {
        let mut songs = meta.music.fight.clone();
        THREAD_RNG.with(|rng| rng.shuffle(&mut songs));
        **shuffled_fight_music = songs;
    }

    let tween = Tween {
        start_time: kira::StartTime::Immediate,
        duration: MUSIC_FADE_DURATION,
        easing: kira::tween::Easing::Linear,
    };
    let play_settings = StaticSoundSettings::default()
        .volume(MUSIC_VOLUME)
        .fade_in_tween(tween);

    // If we are in a game
    if sessions.get(SessionNames::GAME).is_some() {
        if let MusicState::Fight { idx } = &mut *music_state {
            if let Some(PlaybackState::Stopped) = audio.music_state() {
                *idx = (*idx + 1) % shuffled_fight_music.len();
                audio.play_music_from_settings(shuffled_fight_music[*idx], play_settings, true);
            }
        } else if let Some(song) = shuffled_fight_music.get(0) {
            audio.play_music_from_settings(*song, play_settings, false);
            *music_state = MusicState::Fight { idx: 0 };
        }

    // If we are on a menu page
    } else if sessions.get(SessionNames::MAIN_MENU).is_some() {
        let menu_page = ctx.get_state::<MenuPage>();
        match menu_page {
            MenuPage::PlayerSelect | MenuPage::MapSelect { .. } | MenuPage::NetworkGame => {
                if *music_state != MusicState::CharacterSelect {
                    audio.play_music_from_settings(
                        meta.music.title_screen,
                        play_settings.loop_region(Region::default()),
                        false,
                    );
                    *music_state = MusicState::CharacterSelect;
                }
            }
            MenuPage::Home | MenuPage::Settings => {
                if *music_state != MusicState::MainMenu {
                    audio.play_music_from_settings(meta.music.title_screen, play_settings, false);
                    *music_state = MusicState::MainMenu;
                }
            }
            MenuPage::Credits => {
                if *music_state != MusicState::Credits {
                    audio.play_music_from_settings(meta.music.credits, play_settings, false);
                    *music_state = MusicState::Credits;
                }
            }
        }
    }
}

```

`src/core.rs`:

```rs
pub mod attachment;
pub mod bullet;
pub mod camera;
pub mod damage;
pub mod debug;
pub mod editor;
pub mod elements;
pub mod globals;
pub mod input;
pub mod item;
pub mod lifetime;
pub mod map;
pub mod map_constructor;
pub mod map_pool;
pub mod metadata;
pub mod physics;
pub mod player;
pub mod random;
pub mod scoring;
pub mod utils;
pub mod win_indicator;

/// The target fixed frames-per-second that the game sumulation runs at.
pub const FPS: f32 = 60.0;

/// The maximum number of players per match.
pub const MAX_PLAYERS: u32 = 4;

use std::time::Duration;

use crate::prelude::*;

pub mod prelude {
    pub use super::{
        attachment::*, bullet::*, camera::*, damage::*, debug::*, editor::*, elements::prelude::*,
        flappy_jellyfish::*, globals::*, input::*, item::*, lifetime::*, map::*,
        map_constructor::*, map_pool::*, metadata::*, physics::*, player::*, random::*, scoring::*,
        utils::*, win_indicator::*, FPS, MAX_PLAYERS,
    };
}

pub fn game_plugin(game: &mut Game) {
    PlayerMeta::register_schema();
    AudioSource::register_schema();
    HatMeta::register_schema();
    MapMeta::register_schema();
    game.install_plugin(elements::game_plugin)
        .install_plugin(bullet::game_plugin)
        .install_plugin(win_indicator::game_plugin)
        .init_shared_resource::<AssetServer>();
}

pub struct MatchPlugin {
    pub maps: MapPool,
    pub player_info: [PlayerInput; MAX_PLAYERS as usize],
    /// The lua plugins to enable for this match.
    pub plugins: Arc<Vec<Handle<LuaPlugin>>>,

    /// Tracks score for match. Should be default if installing for
    /// new match, but if restarting MatchPlugin to transition between rounds,
    /// should be inputted from previous session resourc.
    pub score: MatchScore,

    pub session_runner: Box<dyn SessionRunner>,
}

pub struct MatchPlayerInfo {
    /// If control_source is `None` then the player is an AI.
    pub control_source: Option<ControlSource>,
    /// The player skin that has been selected.
    pub selected_player: Handle<PlayerMeta>,
}

impl SessionPlugin for MatchPlugin {
    fn install(self, session: &mut SessionBuilder) {
        session
            .install_plugin(DefaultSessionPlugin)
            .install_plugin(LuaPluginLoaderSessionPlugin(self.plugins));

        physics::install(session);
        input::install(session);
        map::install(session);
        player::plugin(session);
        elements::session_plugin(session);
        damage::install(session);
        camera::install(session);
        lifetime::install(session);
        random::plugin(session);
        debug::plugin(session);
        item::install(session);
        attachment::install(session);
        bullet::session_plugin(session);
        editor::install(session);
        scoring::session_plugin(session);

        let current_map = self.maps.current_map;
        session.insert_resource(self.maps);

        // Initialize LoadedMap on startup as we cannot access AssetServer during MatchPlugin install
        // to get map meta.
        session.add_startup_system(
            move |mut loaded_map: ResMutInit<LoadedMap>, assets: Res<AssetServer>| {
                let map_meta = assets.get(current_map).clone();
                *loaded_map = LoadedMap(Arc::new(map_meta))
            },
        );

        session.insert_resource(MatchInputs {
            players: self.player_info,
        });
        session.insert_resource(self.score);
        session.set_session_runner(self.session_runner);
    }
}

#[derive(Default)]
pub struct JumpyDefaultMatchRunner {
    /// The jumpy match runner has it's own input collector instead of using the global one, because
    /// it needs different `just_[input]` behavior due to it running on a fixed update.
    pub input_collector: PlayerInputCollector,
    pub accumulator: f64,
    pub last_run: Option<Instant>,
    /// Disables local input for session.
    disable_local_input: bool,
}

impl SessionRunner for JumpyDefaultMatchRunner {
    fn step(&mut self, frame_start: Instant, world: &mut World, stages: &mut SystemStages) {
        pub const STEP: f64 = 1.0 / FPS as f64;
        let last_run = self.last_run.unwrap_or(frame_start);
        let delta = (frame_start - last_run).as_secs_f64();

        self.input_collector.apply_inputs(world);

        let mut run = || {
            // Advance the world time
            world
                .resource_mut::<Time>()
                .advance_exact(Duration::from_secs_f64(STEP));

            self.input_collector.update_just_pressed();
            let input = self.input_collector.get_current_controls();
            {
                let mut player_inputs = world.resource_mut::<MatchInputs>();
                (0..MAX_PLAYERS as usize).for_each(|i| {
                    let player_input = &mut player_inputs.players[i];
                    let Some(source) = &player_input.control_source else {
                        return;
                    };
                    if !self.disable_local_input {
                        player_input.control = *input.get(source).unwrap();
                    } else {
                        // This runner is only used for offline play, use default control for all to
                        // disable input by using default (no input).
                        player_input.control = PlayerControl::default();
                    }
                });
            }

            // Mark inputs as consumed for this frame
            self.input_collector.advance_frame();

            // Advance the simulation
            stages.run(world);
        };

        self.accumulator += delta;

        let loop_start = Instant::now();
        loop {
            if self.accumulator >= STEP {
                let loop_too_long = (Instant::now() - loop_start).as_secs_f64() > STEP;

                if loop_too_long {
                    warn!("Frame took too long: couldn't keep up with fixed update.");
                    self.accumulator = 0.0;
                    break;
                } else {
                    self.accumulator -= STEP;
                    run()
                }
            } else {
                break;
            }
        }

        self.last_run = Some(frame_start);
    }

    fn restart_session(&mut self) {
        *self = JumpyDefaultMatchRunner::default();
    }

    fn disable_local_input(&mut self, disable_input: bool) {
        self.disable_local_input = disable_input;
    }
}

```

`src/core/attachment.rs`:

```rs
//! Utilities for attaching entities to other entities.
//!
//! There are two kinds of attachments: [`Attachment`] and [`PlayerBodyAttachment`].
//!
//! [`Attachment`] just makes one entity follow another, with some special handling for sprites, and
//! the [`PlayerBodyAttachment`] specifically matches the player's body movement animation to make
//! sure that, for example, a held item will bob up and down with the player.
use crate::prelude::*;

pub fn install(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::Last, update_player_body_attachments)
        .add_system_to_stage(CoreStage::Last, remove_player_body_attachments)
        .add_system_to_stage(CoreStage::Last, update_attachments);
}

/// Component for attaching an entity to another entity.
///
/// > **Warning:** attachments are not a general-purpose hierarchy system. Generally, only expect an
/// > attachment to work properly if the entity it is attached to is not also attached to another
/// > entity.
///
/// Attachments have special behavior built-in for attaching to other [`Sprite`] or [`AtlasSprite`]
/// entities. When attached to a sprite, the attached item will automatically flip it's offset and
/// sprite flip value when the sprite is flipped if `sync_flip` is  set.
#[derive(Clone, Copy, HasSchema, Debug, Default)]
pub struct Attachment {
    /// The entity to attach to.
    pub entity: Entity,
    /// The offset to the attached entity.
    pub offset: Vec3,
    /// Synchronize [`AtlasSprite`] animation with entity animation
    pub sync_animation: bool,
    /// Synchronize [`Sprite`] color with entity color
    pub sync_color: bool,
    /// Synchronize [`Sprite`] flip values from parent (both flip and offset)
    pub sync_flip: bool,
    /// Should attachment inherit parent's rotation (applied to offset and sprite)
    pub offset_inherits_rotation: bool,
}

/// Component that animates attachment offset with easing
#[derive(Clone, HasSchema, Debug, Default)]
pub struct AttachmentEasing {
    /// Initial offset of entity
    pub initial_offset: Vec2,
    /// Target offset after easing is complete
    pub target_offset: Vec2,

    /// Offset ease timer used to update progress of Ease
    pub offset_ease_timer: Timer,

    /// Ease
    pub ease: Ease,
}

/// Metadata for attachment
#[derive(HasSchema, Clone, Default)]
#[type_data(metadata_asset("attachment"))]
#[repr(C)]
pub struct AttachmentMeta {
    pub name: Ustr,
    pub atlas: Handle<Atlas>,
    pub offset: Vec2,
    pub animation: AnimatedSprite,

    /// Synchronize [`AtlasSprite`] animation with entity animation
    pub sync_animation: bool,
    /// Synchronize [`Sprite`] color with entity color
    pub sync_color: bool,
    /// Synchronize [`Sprite`] flip values from parent (both flip and offset)
    pub sync_flip: bool,
    /// Should attachment inherit parent's rotation (applied to offset and sprite)
    pub offset_inherits_rotation: bool,

    pub attachment_easing: Handle<AttachmentEasingMeta>,
}

impl AttachmentMeta {
    /// Make [`Attachment`] from meta and entity
    pub fn attachment(&self, entity: Entity, offset_z: f32) -> Attachment {
        Attachment {
            entity,
            offset: self.offset.extend(offset_z),
            sync_animation: self.sync_animation,
            sync_color: self.sync_color,
            sync_flip: self.sync_flip,
            offset_inherits_rotation: self.offset_inherits_rotation,
        }
    }
}

/// Metadata for [`AttachmentEasing`]
#[derive(HasSchema, Clone, Default)]
#[type_data(metadata_asset("attachment_easing"))]
#[repr(C)]
pub struct AttachmentEasingMeta {
    /// Amount offset is changed over time (target offset = initial_offset + delta_offset)
    pub delta_offset: Vec2,
    /// How long to apply ease function until delta_offset fully applied
    pub offset_ease_duration: Duration,

    pub ease: EaseMeta,
}

impl AttachmentEasing {
    /// Ease progress with delta time
    pub fn tick(&mut self, delta_time: Duration) {
        self.offset_ease_timer.tick(delta_time);
        self.ease.progress = self.offset_ease_timer.percent();
    }
    /// Compute offset from current progress
    pub fn compute_offset(&self) -> Vec2 {
        let progress = self.ease.output();
        self.initial_offset.lerp(self.target_offset, progress)
    }
}

/// System to update the transforms of entities with the [`Attachment`] component.
pub fn update_attachments(
    time: Res<Time>,
    entities: Res<Entities>,
    mut sprites: CompMut<Sprite>,
    attachments: Comp<Attachment>,
    mut attachment_easings: CompMut<AttachmentEasing>,
    invincibles: Comp<Invincibility>,
    mut transforms: CompMut<Transform>,
    mut atlas_sprites: CompMut<AtlasSprite>,
) {
    for (ent, (attachment, easing)) in
        entities.iter_with((&attachments, &mut OptionalMut(&mut attachment_easings)))
    {
        let Some(attached_transform) = transforms.get(attachment.entity).copied() else {
            continue;
        };

        let mut offset = attachment.offset;

        // If have a AttachmentEasing component, update offset
        if let Some(easing) = easing {
            easing.tick(time.delta());
            offset = easing.compute_offset().extend(offset.z);
        }

        let transform = transforms
            .get_mut(ent)
            .expect("Entities with `Attachment` component must also have a `Transform` component.");

        if attachment.offset_inherits_rotation {
            *transform = attached_transform;
        } else {
            // Copy transform values except for rotation
            transform.translation = attached_transform.translation;
            transform.scale = attached_transform.scale;
        }

        if attachment.sync_flip {
            if let Some((flip_x, flip_y)) = atlas_sprites
                .get(attachment.entity)
                .map(|x| (x.flip_x, x.flip_y))
                .or_else(|| sprites.get(attachment.entity).map(|x| (x.flip_x, x.flip_y)))
            {
                if flip_x {
                    offset.x *= -1.0;
                }
                if flip_y {
                    offset.y *= -1.0;
                }

                if let Some((self_flip_x, self_flip_y)) = atlas_sprites
                    .get_mut(ent)
                    .map(|x| (&mut x.flip_x, &mut x.flip_y))
                    .or_else(|| sprites.get_mut(ent).map(|x| (&mut x.flip_x, &mut x.flip_y)))
                {
                    *self_flip_x = flip_x;
                    *self_flip_y = flip_y;
                }
            }
        }

        // Sync animation of attached entity
        if attachment.sync_animation {
            if let Some((index, attach_atlas)) = atlas_sprites
                .get(attachment.entity)
                .map(|atlas| atlas.index)
                .zip(atlas_sprites.get_mut(ent))
            {
                attach_atlas.index = index
            }
        }

        // Sync color of attached entity
        if attachment.sync_color {
            let mut sync_sprite_colors = |alpha| {
                if let Some(entity_sprite) = atlas_sprites.get_mut(ent) {
                    entity_sprite.color.set_a(alpha);
                }

                if let Some(attachment_sprite) = atlas_sprites.get_mut(attachment.entity) {
                    attachment_sprite.color.set_a(alpha);
                }
            };

            match invincibles.get(attachment.entity) {
                None => sync_sprite_colors(1.0),
                Some(_) => sync_sprite_colors(sine_between(
                    *INVINCIBILITY_ALPHA_RANGE.start(),
                    *INVINCIBILITY_ALPHA_RANGE.end(),
                    (time.elapsed().as_millis() / 150) as f32,
                )),
            }
        }

        if attachment.offset_inherits_rotation {
            // Apply parent rotation to offset. Currently scale is not applied (but probably should be.)
            offset = attached_transform.rotation * offset;
        }

        transform.translation += offset;
    }
}

/// A component for attaching an entity to the player's body.
///
/// This is similar to the [`Attachment`] component, but it is special in the way that it will
/// follow the body as it bobs up and down in animations such as standing and walking. This makes it
/// useful for things like hats, etc., that will stick to the player's body.
#[derive(Clone, HasSchema, Default)]
pub struct PlayerBodyAttachment {
    /// The player to attach to.
    pub player: Entity,
    /// The offset relative to the center of the player's sprite.
    pub offset: Vec3,
    /// Whether the attachment should be to the head instead of the body ( i.e. like a hat ).
    pub head: bool,
    /// Whether or not to automatically play the same animation bank animation as the sprite that it
    /// is attached to.
    pub sync_animation: bool,
    /// Whether or not to automatically sync the color of the attached entity with the player's
    pub sync_color: bool,
}

impl PlayerBodyAttachment {
    /// Create a new body attachment to the given player.
    pub fn new(player: Entity) -> Self {
        Self {
            player,
            offset: Vec3::ZERO,
            head: false,
            sync_animation: true,
            sync_color: true,
        }
    }
}

/// This is used by the [`update_player_body_attachments`] system internally.
///
/// It keeps track whether or not an entity had a [`PlayerBodyAttachment`] on the last frame.
#[derive(Clone, Copy, HasSchema, Default)]
struct HadPlayerBodyAttachmentMarker;

/// System that updates entities with the [`PlayerBodyAttachment`] component.
fn update_player_body_attachments(
    entities: Res<Entities>,
    mut attachments: CompMut<Attachment>,
    mut player_body_attachment_markers: CompMut<HadPlayerBodyAttachmentMarker>,
    animated_sprites: Comp<AnimatedSprite>,
    animation_banks: Comp<AnimationBankSprite>,
    player_body_attachments: Comp<PlayerBodyAttachment>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    assets: Res<AssetServer>,
) {
    for (ent, body_attachment) in entities.iter_with(&player_body_attachments) {
        let player_ent = body_attachment.player;
        let player_idx = player_indexes.get(player_ent).unwrap();
        let player_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(player_handle);
        let player_sprite = animated_sprites.get(player_ent).unwrap();
        let current_frame = player_sprite.index;
        let current_anim = animation_banks.get(player_ent).unwrap().current;

        let current_body_offset =
            meta.layers.body.animations.offsets[&current_anim][current_frame as usize].body
                + if body_attachment.head {
                    meta.layers.body.animations.offsets[&current_anim][current_frame as usize].head
                } else {
                    Vec2::ZERO
                };

        player_body_attachment_markers.insert(ent, HadPlayerBodyAttachmentMarker);
        attachments.insert(
            ent,
            Attachment {
                entity: player_ent,
                sync_color: body_attachment.sync_color,
                sync_animation: body_attachment.sync_animation,
                offset: current_body_offset.extend(0.0) + body_attachment.offset,
                sync_flip: true,
                offset_inherits_rotation: true,
            },
        );
    }
}

/// System that cleans up old [`Attachment`] and [`HadPlayerBodyAttachmentMarker`] components from
/// an entity when the [`PlayerBodyAttachment`] is removed.
fn remove_player_body_attachments(
    entities: Res<Entities>,
    player_body_attachments: Comp<PlayerBodyAttachment>,
    mut had_player_body_attachment_markers: CompMut<HadPlayerBodyAttachmentMarker>,
    mut attachments: CompMut<Attachment>,
) {
    let mut bitset = had_player_body_attachment_markers.bitset().clone();
    bitset.bit_andnot(player_body_attachments.bitset());

    for entity in entities.iter_with_bitset(&bitset) {
        attachments.remove(entity);
        had_player_body_attachment_markers.remove(entity);
    }
}

```

`src/core/bullet.rs`:

```rs
//! Generic bullet implementation.
//!
//! These components are used for things like the musket and sniper rifle bullets.

use crate::prelude::*;

pub fn game_plugin(game: &mut Game) {
    BulletMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

/// Install this module.
pub fn session_plugin(session: &mut SessionBuilder) {
    Bullet::register_schema();
    BulletHandle::register_schema();

    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

/// Bullet component.
#[derive(Clone, Debug, HasSchema, Default, Copy)]
#[repr(C)]
pub struct Bullet {
    /// The direction that the bullet is moving.
    pub direction: Vec2,
    /// The player entity that shot the bullet.
    pub owner: Entity,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("bullet"))]
#[repr(C)]
pub struct BulletMeta {
    pub speed: f32,
    pub body_diameter: f32,
    pub atlas: Handle<Atlas>,

    pub lifetime: f32,
    pub explosion_fps: f32,
    pub explosion_volume: f64,
    pub explosion_lifetime: f32,
    pub explosion_frames: u32,
    pub explosion_atlas: Handle<Atlas>,
    pub explosion_sound: Handle<AudioSource>,
}

/// Component containing the bullet's metadata handle.
#[derive(Deref, DerefMut, HasSchema, Default, Clone)]
#[repr(C)]
pub struct BulletHandle(pub Handle<BulletMeta>);

/// Hydrate bullets.
fn hydrate(
    entities: Res<Entities>,
    mut actors: CompMut<Actor>,
    mut colliders: CompMut<Collider>,
    mut lifetimes: CompMut<Lifetime>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    bullet_handles: Comp<BulletHandle>,
    assets: Res<AssetServer>,
) {
    // We consider all entities with bullet handles, but that don't have physics actors on them to
    // be non-hydrated.
    let mut not_hydrated_bitset = actors.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(bullet_handles.bitset());

    let bullets = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for entity in bullets {
        let bullet_handle = bullet_handles.get(entity).unwrap();
        let bullet_meta = assets.get(bullet_handle.0);

        let BulletMeta {
            atlas,
            body_diameter,
            ..
        } = &*bullet_meta;

        atlas_sprites.insert(entity, AtlasSprite::new(*atlas));

        // Setup custom collider
        actors.insert(entity, Actor);
        colliders.insert(
            entity,
            Collider {
                shape: ColliderShape::Circle {
                    diameter: *body_diameter,
                },
                ..default()
            },
        );

        lifetimes.insert(entity, Lifetime::new(bullet_meta.lifetime));
    }
}

/// Update bullets.
fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    bullet_handles: Comp<BulletHandle>,
    player_indexes: Comp<PlayerIdx>,
    collision_world: CollisionWorld,
    mut transforms: CompMut<Transform>,
    mut bullets: CompMut<Bullet>,
    mut audio_center: ResMut<AudioCenter>,
    invincibles: CompMut<Invincibility>,
    mut emote_regions: CompMut<EmoteRegion>,
    asset_server: Res<AssetServer>,
    time: Res<Time>,
) {
    for (entity, (bullet, bullet_handle)) in entities.iter_with((&mut bullets, &bullet_handles)) {
        let bullet_meta = asset_server.get(bullet_handle.0);

        let BulletMeta {
            speed,
            body_diameter,
            explosion_fps,
            explosion_volume,
            explosion_sound,
            explosion_atlas,
            explosion_frames,
            explosion_lifetime,
            ..
        } = &*bullet_meta;

        // Move bullet
        let position = {
            let position = transforms.get_mut(entity).unwrap();
            let delta_time = time.delta_seconds();
            position.translation += (bullet.direction * *speed * delta_time).extend(0.0);

            let emote_size = Vec2::new(*body_diameter * 6.0, *body_diameter * 3.5);
            emote_regions.insert(entity, EmoteRegion::basic(Emote::Alarm, emote_size, true));

            *position
        };

        // Check actor collisions
        let mut hit_player = false;
        collision_world
            .actor_collisions_filtered(entity, |e| {
                player_indexes.contains(e) && invincibles.get(e).is_none()
            })
            .into_iter()
            .filter(|player| *player != bullet.owner)
            .for_each(|player| {
                hit_player = true;
                commands.add(PlayerCommand::kill(player, Some(position.translation.xy())));
            });

        // check solid tile collisions
        let hit_solid = collision_world.tile_collision(
            position,
            ColliderShape::Circle {
                diameter: *body_diameter,
            },
        ) == TileCollisionKind::Solid;

        // Bullet hit something
        if hit_player || hit_solid {
            audio_center.play_sound(*explosion_sound, *explosion_volume);

            let mut explosion_transform = *transforms.get(entity).unwrap();
            explosion_transform.translation.z += 1.0;

            let explosion_fps = *explosion_fps;
            let explosion_frames = *explosion_frames;
            let explosion_lifetime = *explosion_lifetime;
            let explosion_atlas = *explosion_atlas;

            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut lifetimes: CompMut<Lifetime>,
                      mut sprites: CompMut<AtlasSprite>,
                      mut animated_sprites: CompMut<AnimatedSprite>| {
                    // Despawn the bullet
                    entities.kill(entity);

                    // spawn bullet explosion animation
                    {
                        let ent = entities.create();
                        transforms.insert(ent, explosion_transform);
                        sprites.insert(
                            ent,
                            AtlasSprite {
                                atlas: explosion_atlas,
                                ..default()
                            },
                        );

                        animated_sprites.insert(
                            ent,
                            AnimatedSprite {
                                frames: (0..explosion_frames).collect(),
                                fps: explosion_fps,
                                repeat: false,
                                ..default()
                            },
                        );
                        lifetimes.insert(ent, Lifetime::new(explosion_lifetime));
                    }
                },
            );
        }
    }
}

```

`src/core/camera.rs`:

```rs
//! Camera controller and parallax.

use crate::prelude::*;

/// Install this module.
pub fn install(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::Last, camera_controller);
    session
        .stages
        .add_system_to_stage(CoreStage::Last, camera_parallax);
}

/// A sprite that is spawned as a part of the parallax background.
#[derive(Clone, HasSchema, Default)]
pub struct ParallaxBackgroundSprite {
    /// The sprite with `idx` of `0` will be centered, with indexes increasing and decreasing
    /// representing repeated tiles to the right and left respectively.
    pub idx: i32,
    /// Information about the parallax layer it is a part of.
    pub meta: ParallaxLayerMeta,
}

/// A subject of the camera.
///
/// The camera will move and zoom to ensure that all subjects remain visible. Entities must also
/// have a `Transform` component and a `KinematicBody` component for this to work properly.
#[derive(Clone, Copy, Debug, Default, HasSchema)]
pub struct CameraSubject {
    /// A rectangle around the subject that is larger than the subject, and will always move to
    /// contain it. The camera will seek to contain this rectangle, instead of the subject itself.
    ///
    /// The advantage of this processing method is that the larger rect doesn't move as much as the
    /// subject, because, for instance, a player jumping up and down in place will still be inside
    /// of their camera rect, so the camera will not move around annoyingly.
    rect: Rect,
}

/// The state of the camera.
#[derive(Clone, Debug, HasSchema, Default)]
pub struct CameraState {
    /// Disables the default camera controller. Useful, for example, when taking over the camera
    /// from the editor.
    pub disable_controller: bool,
}

/// Implemenets the camera controller.
fn camera_controller(
    meta: Root<GameMeta>,
    entities: Res<Entities>,
    map: Res<LoadedMap>,
    mut cameras: CompMut<Camera>,
    mut camera_shakes: CompMut<CameraShake>,
    camera_states: Comp<CameraState>,
    mut camera_subjects: CompMut<CameraSubject>,
    transforms: Comp<Transform>,
    bodies: Comp<KinematicBody>,
    window: Res<Window>,
) {
    let meta = &meta.core.camera;

    let Some((_ent, (camera, camera_shake, camera_state))) = entities
        .iter_with((&mut cameras, &mut camera_shakes, &camera_states))
        .next()
    else {
        return;
    };
    if camera_state.disable_controller {
        return;
    }

    // Update player camera rects
    for (_ent, (camera_subj, transform, body)) in
        entities.iter_with((&mut camera_subjects, &transforms, &bodies))
    {
        let camera_box_size = meta.player_camera_box_size;

        // Get the player's camera box
        let camera_box = &mut camera_subj.rect;

        // If it's not be initialized.
        if camera_box.min == Vec2::ZERO && camera_box.max == Vec2::ZERO {
            // Set it's size and position according to the player
            *camera_box = Rect::new(
                transform.translation.x,
                transform.translation.y,
                camera_box_size.x,
                camera_box_size.y,
            );
        }

        // Get the player's body rect
        let rect = body.bounding_box(*transform);

        // Push the camera rect just enough to contain the player's body rect
        if rect.min.x < camera_box.min.x {
            camera_box.min.x = rect.min.x;
            camera_box.max.x = camera_box.min.x + camera_box_size.x;
        }
        if rect.max.x > camera_box.max.x {
            camera_box.max.x = rect.max.x;
            camera_box.min.x = rect.max.x - camera_box_size.x;
        }
        if rect.min.y < camera_box.min.y {
            camera_box.min.y = rect.min.y;
            camera_box.max.y = camera_box.min.y + camera_box_size.y;
        }
        if rect.max.y > camera_box.max.y {
            camera_box.max.y = rect.max.y;
            camera_box.min.y = rect.max.y - camera_box_size.y;
        }
    }

    let viewport_size = camera
        .viewport
        .option()
        .map(|x| x.size.as_vec2())
        .unwrap_or(window.size);
    let viewport_aspect = viewport_size.x / viewport_size.y;
    let default_height = meta.default_height;
    let default_width = viewport_aspect * default_height;
    let camera_height = if let CameraSize::FixedHeight(height) = camera.size {
        height
    } else {
        400.0
    };
    let mut scale = camera_height / default_height;
    let map_size = map.grid_size.as_vec2() * map.tile_size;

    let mut min = Vec2::MAX;
    let mut max = Vec2::MIN;

    for CameraSubject { rect } in camera_subjects.iter_mut() {
        min = (rect.min - vec2(meta.border_left, meta.border_bottom))
            .min(min)
            .max(Vec2::ZERO);
        max = (rect.max + vec2(meta.border_right, meta.border_top)).max(max);
        max.x = max.x.min(map_size.x)
    }

    let camera_pos = &mut camera_shake.center;

    let subject_count = camera_subjects.iter().count();
    let mut middle_point = if subject_count == 0 {
        camera_pos.truncate()
    } else {
        Rect { min, max }.center()
    };

    let size = max - min;
    let size = size.max(meta.min_camera_size);

    let rh = size.y / default_height;
    let rw = size.x / default_width;
    let r_target = if rh > rw { rh } else { rw };
    let r_diff = r_target - scale;
    if r_diff > 0.0 {
        scale += r_diff * meta.zoom_out_lerp_factor;
    } else {
        scale += r_diff * meta.zoom_in_lerp_factor;
    }

    // Keep camera above the map floor
    if middle_point.y - size.y / 2. < 0.0 {
        middle_point.y = size.y / 2.0;
    }

    let delta = camera_pos.truncate() - middle_point;
    let dist = delta * meta.move_lerp_factor;
    camera.size = CameraSize::FixedHeight(scale * default_height);
    *camera_pos -= dist.extend(0.0);
}

/// Implements the background layer parallax.
fn camera_parallax(
    entities: Res<Entities>,
    mut transforms: CompMut<Transform>,
    parallax_bg_sprites: Comp<ParallaxBackgroundSprite>,
    cameras: Comp<Camera>,
    map: Res<LoadedMap>,
) {
    // TODO: This constant represents that maximum camera-visible distance, and should be moved
    // somewhere more appropriate.
    const FAR_PLANE: f32 = 1000.0;

    let map_size = map.grid_size.as_vec2() * map.tile_size;

    let camera_transform = entities
        .iter_with((&transforms, &cameras))
        .next()
        .map(|x| x.1 .0)
        .copied()
        .unwrap();
    let camera_offset = map_size / 2.0 - camera_transform.translation.truncate();

    for (_ent, (transform, bg)) in entities.iter_with((&mut transforms, &parallax_bg_sprites)) {
        transform.scale.x = bg.meta.scale;
        transform.scale.y = bg.meta.scale;
        let display_size = transform.scale.truncate() * bg.meta.size;
        transform.translation.x = bg.idx as f32 * display_size.x;
        transform.translation.y = map_size.y / 2.0;
        transform.translation.z = -FAR_PLANE + 1.0 - bg.meta.depth / 100.0;
        transform.translation += bg.meta.offset.extend(1.0);

        transform.translation.x -= camera_offset.x * bg.meta.depth * map.background.speed.x;
        transform.translation.y += camera_offset.y * bg.meta.depth * map.background.speed.y;
    }
}

```

`src/core/damage.rs`:

```rs
//! Damage / kill regions.
//!
//! Any player that intersects a damage region will be killed.

use crate::prelude::*;

use super::utils::Rect;

/// Install this module.
pub fn install(session: &mut SessionBuilder) {
    DamageRegion::register_schema();
    DamageRegionOwner::register_schema();

    session.add_system_to_stage(CoreStage::PostUpdate, kill_players_in_damage_region);
}

/// A rectangular damage region.
///
/// While this _might_ change in the future, damage regions will kill players immediately, so there
/// is no "damage" field.
#[derive(Debug, Clone, Default, HasSchema)]
#[repr(C)]
pub struct DamageRegion {
    /// The size of the damage region in pixels
    pub size: Vec2,
}

impl DamageRegion {
    /// Get the collision rectangle of this damage region, given it's transform.
    pub fn collider_rect(&self, position: Vec3) -> Rect {
        Rect::new(position.x, position.y, self.size.x, self.size.y)
    }
}

/// A component that may be added to a damage region entity to indicate the triggering entity.
///
/// If this entity is a player, it will not be harmed by the damage region.
// TODO: Make `DamageRegionOwner` a part of the `DamageRegion` component?
#[derive(Debug, Clone, HasSchema, Default)]
#[repr(C)]
pub struct DamageRegionOwner(pub Entity);

/// System that will eliminate players that are intersecting with a damage region.
fn kill_players_in_damage_region(
    entities: Res<Entities>,
    mut commands: Commands,
    player_indexes: Comp<PlayerIdx>,
    transforms: Comp<Transform>,
    damage_regions: Comp<DamageRegion>,
    damage_region_owners: Comp<DamageRegionOwner>,
    bodies: Comp<KinematicBody>,
    invincibles: CompMut<Invincibility>,
) {
    let mut bitset = player_indexes.bitset().clone();
    bitset.bit_and(transforms.bitset());
    bitset.bit_and(bodies.bitset());
    bitset.bit_andnot(invincibles.bitset());

    for player_ent in entities.iter_with_bitset(&bitset) {
        let transform = transforms.get(player_ent).unwrap();
        let body = bodies.get(player_ent).unwrap();

        let player_rect = body.bounding_box(*transform);
        for (ent, (damage_region, transform)) in entities.iter_with((&damage_regions, &transforms))
        {
            let owner = damage_region_owners.get(ent);
            // Don't damage the player that owns this damage region
            if let Some(owner) = owner {
                if owner.0 == player_ent {
                    continue;
                }
            }

            let damage_rect = damage_region.collider_rect(transform.translation);
            if player_rect.overlaps(&damage_rect) {
                commands.add(PlayerCommand::kill(
                    player_ent,
                    Some(transform.translation.xy()),
                ));
            }
        }
    }
}

```

`src/core/debug.rs`:

```rs
//! Debug rendering for collision boxes, etc.

use crate::prelude::*;
use rapier2d::prelude as rapier;

/// Install this module.
pub fn plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::Last, debug_render_colliders)
        .add_system_to_stage(CoreStage::Last, debug_render_damage_regions)
        .add_system_to_stage(CoreStage::Last, debug_render_emote_regions);
}

/// Resource configuring various debugging settings.
#[derive(Copy, Clone, HasSchema, Default)]
pub struct DebugSettings {
    /// Whether or not to render kinematic collider shapes.
    pub show_kinematic_colliders: bool,
    /// Whether or not to render damage region collider shapes.
    pub show_damage_regions: bool,
    /// Whether or not to show the pathfinding lines.
    pub show_pathfinding_lines: bool,
}

/// Resource containing the physics debug line entity.
#[derive(HasSchema)]
#[schema(no_default)]
pub struct RapierDebugContext {
    path_entity: Entity,
    debug_pipeline: rapier::DebugRenderPipeline,
}

/// An implementation of the rapier `DebugRenderingBackend` that we use to create bones `Path2d`
/// entities with.
struct RapierDebugBackend<'a> {
    points: &'a mut Vec<Vec2>,
    line_breaks: &'a mut Vec<usize>,
}

impl<'a> rapier::DebugRenderBackend for RapierDebugBackend<'a> {
    fn draw_line(
        &mut self,
        object: rapier::DebugRenderObject,
        a: rapier::Point<rapier::Real>,
        b: rapier::Point<rapier::Real>,
        // TODO: implement multi-colored rendering
        _color: [f32; 4],
    ) {
        let render = match object {
            rapier::DebugRenderObject::RigidBody(_, body) => body.is_enabled(),
            rapier::DebugRenderObject::Collider(_, collider) => collider.is_enabled(),
            rapier::DebugRenderObject::ImpulseJoint(_, _) => true,
            rapier::DebugRenderObject::MultibodyJoint(_, _, _) => true,
            rapier::DebugRenderObject::ColliderAabb(_, _, _) => true,
            rapier::DebugRenderObject::ContactPair(_, _, _) => true,
        };
        if render {
            self.points.push(vec2(a.x, a.y));
            self.points.push(vec2(b.x, b.y));
            self.line_breaks.push(self.points.len());
        }
    }
}

impl Clone for RapierDebugContext {
    fn clone(&self) -> Self {
        Self {
            path_entity: self.path_entity,
            debug_pipeline: default(),
        }
    }
}

impl FromWorld for RapierDebugContext {
    fn from_world(world: &World) -> Self {
        let path_entity = world.resource_mut::<Entities>().create();

        let transforms = world.components.get::<Transform>();
        let mut transforms = transforms.borrow_mut();
        transforms.insert(
            path_entity,
            Transform::from_translation(vec3(0.0, 0.0, -1.0)),
        );

        Self {
            path_entity,
            debug_pipeline: default(),
        }
    }
}

/// Renders debug lines for rapier colliders.
fn debug_render_colliders(
    settings: ResInit<DebugSettings>,
    mut collision_world: CollisionWorld,
    transforms: Comp<Transform>,
    mut dynamic_bodies: CompMut<DynamicBody>,
    mut paths: CompMut<Path2d>,
    mut debug_context: ResMutInit<RapierDebugContext>,
) {
    if settings.show_kinematic_colliders {
        // TODO: It's unfortunate that we are doing an extra sync here, just for debug rendering. We
        // should try find a way to avoid this. Without this, the collider body positions will be
        // out of sync when they are rendered.
        collision_world.sync_bodies(&transforms, &mut dynamic_bodies);

        let mut points = Vec::new();
        let mut line_breaks = Vec::new();

        debug_context.debug_pipeline.render_colliders(
            &mut RapierDebugBackend {
                points: &mut points,
                line_breaks: &mut line_breaks,
            },
            &collision_world.ctx.rigid_body_set,
            &collision_world.ctx.collider_set,
        );

        // TODO: Provide a way to change the collider colors
        paths.insert(
            debug_context.path_entity,
            Path2d {
                // An orange-y color
                color: Color::from([205.0 / 255.0, 94.0 / 255.0, 15.0 / 255.0, 1.0]),
                points,
                line_breaks,
                ..default()
            },
        );
    } else {
        paths.remove(debug_context.path_entity);
    }
}

/// Renders debug lines for damage regions.
fn debug_render_damage_regions(
    settings: ResInit<DebugSettings>,
    entities: Res<Entities>,
    regions: Comp<DamageRegion>,
    transforms: Comp<Transform>,
    mut paths: CompMut<Path2d>,
) {
    let path_for_region = |rotation: f32, region: &DamageRegion| {
        let rect = Rect::new(0.0, 0.0, region.size.x, region.size.y);

        // The collision boxes don't rotate, so apply the opposite rotation of the object to the
        // debug lines to keep it upright.
        let angle = Vec2::from_angle(-rotation);

        Path2d {
            color: Color::RED,
            points: vec![
                angle.rotate(rect.top_left()),
                angle.rotate(rect.top_right()),
                angle.rotate(rect.bottom_right()),
                angle.rotate(rect.bottom_left()),
                angle.rotate(rect.top_left()),
            ],
            thickness: 1.0,
            ..default()
        }
    };

    if settings.show_damage_regions {
        for (ent, (region, transform)) in entities.iter_with((&regions, &transforms)) {
            paths.insert(
                ent,
                path_for_region(transform.rotation.to_euler(EulerRot::XYZ).2, region),
            );
        }
    } else {
        for ent in entities.iter_with_bitset(regions.bitset()) {
            paths.remove(ent);
        }
    }
}

/// Renders debug lines for emote regions.
fn debug_render_emote_regions(
    settings: ResInit<DebugSettings>,
    entities: Res<Entities>,
    regions: Comp<EmoteRegion>,
    transforms: Comp<Transform>,
    mut paths: CompMut<Path2d>,
) {
    let path_for_region = |rotation: f32, region: &EmoteRegion| {
        let rect = Rect::new(0.0, 0.0, region.size.x, region.size.y);

        // The collision boxes don't rotate, so apply the opposite rotation of the object to the
        // debug lines to keep it upright.
        let angle = Vec2::from_angle(-rotation);

        Path2d {
            // Green color
            color: Color::from([39.0 / 255.0, 191.0 / 255.0, 68.0 / 255.0, 1.0]),
            points: vec![
                angle.rotate(rect.top_left()),
                angle.rotate(rect.top_right()),
                angle.rotate(rect.bottom_right()),
                angle.rotate(rect.bottom_left()),
                angle.rotate(rect.top_left()),
            ],
            thickness: 1.0,
            ..default()
        }
    };

    if settings.show_damage_regions {
        for (ent, (region, transform)) in entities.iter_with((&regions, &transforms)) {
            paths.insert(
                ent,
                path_for_region(transform.rotation.to_euler(EulerRot::XYZ).2, region),
            );
        }
    } else {
        for ent in entities.iter_with_bitset(regions.bitset()) {
            paths.remove(ent);
        }
    }
}

```

`src/core/editor.rs`:

```rs
//! Map editing implementation.
//!
//! Allows you to edit the game map while the game is running.

use crate::core::map_constructor::{shiftnanigans::ShiftnanigansMapConstructor, MapConstructor};
use crate::prelude::*;

/// Install this module.
pub fn install(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, handle_editor_input);
}

impl_system_param! {
    /// A system parameter for editing the map.
    ///
    /// [`MapManager`] provides an interface for editing the map contents easily while the match is
    /// running. This can be used both for manual map editing, and by algorithms for generating or
    /// randomizing maps.
    ///
    /// Map generators implement the [`MapConstructor`]
    /// trait, which is given a [`MapManager`] to make its changes with.
    pub struct MapManager<'a> {
        commands: Commands<'a>,
        entities: ResMutInit<'a, Entities>,
        spawned_map_meta: ResMutInit<'a, SpawnedMapMeta>,
        element_handles: CompMut<'a, ElementHandle>,
        transforms: CompMut<'a, Transform>,
        spawned_map_layer_metas: CompMut<'a, SpawnedMapLayerMeta>,
        tile_layers: CompMut<'a, TileLayer>,
        tiles: CompMut<'a, Tile>,
        tile_collisions: CompMut<'a, TileCollisionKind>,
        map: Res<'a, LoadedMap>,
        element_kill_callbacks: Comp<'a, ElementKillCallback>,
        spawner_manager: SpawnerManager<'a>,
    }
}

impl<'a> MapManager<'a> {
    /// Create a new map element at the given location on the given layer.
    pub fn create_element(
        &mut self,
        element_meta_handle: &Handle<ElementMeta>,
        translation: &Vec2,
        layer_index: u32,
    ) {
        let entity = self.entities.create();
        // TODO remove element handles as the underlying elements are removed
        self.element_handles
            .insert(entity, ElementHandle(*element_meta_handle));
        let z_depth = z_depth_for_map_layer(layer_index);
        self.transforms.insert(
            entity,
            Transform::from_translation(translation.extend(z_depth)),
        );
        self.spawned_map_layer_metas.insert(
            entity,
            SpawnedMapLayerMeta {
                layer_idx: layer_index,
            },
        );
    }
    /// Create a new layer with the given name.
    pub fn create_layer(&mut self, name: Ustr) {
        let entity = self.entities.create();
        let layer_index = self.spawned_map_meta.layer_names.len() as u32;
        self.spawned_map_meta.layer_names = self
            .spawned_map_meta
            .layer_names
            .clone()
            .iter()
            .cloned()
            .chain([name])
            .collect();
        self.spawned_map_layer_metas.insert(
            entity,
            SpawnedMapLayerMeta {
                layer_idx: layer_index,
            },
        );
        self.tile_layers.insert(
            entity,
            TileLayer::new(
                self.spawned_map_meta.grid_size,
                self.spawned_map_meta.tile_size,
                default(),
            ),
        );
        self.transforms.insert(
            entity,
            Transform::from_translation(Vec3::new(0.0, 0.0, z_depth_for_map_layer(layer_index))),
        );
    }
    /// Delete the layer with the given index.
    pub fn delete_layer(&mut self, layer_index: u32) {
        let layer_count = self.spawned_map_meta.layer_names.len() as u32;
        let layers_to_decrement = layer_count - layer_index;
        self.spawned_map_meta.layer_names = self
            .spawned_map_meta
            .layer_names
            .clone()
            .iter()
            .cloned()
            .enumerate()
            .filter_map(|(i, name)| {
                if i as u32 == layer_index {
                    None
                } else {
                    Some(name)
                }
            })
            .collect();
        let mut to_kill = Vec::new();
        self.entities
            .iter_with(&mut self.spawned_map_layer_metas)
            .for_each(|(entity, layer)| {
                if layer.layer_idx == layer_index {
                    to_kill.push(entity);

                    if let Some(tile_layer) = self.tile_layers.get(entity) {
                        for tile in tile_layer.tiles.iter().flatten() {
                            to_kill.push(*tile);
                        }
                    }
                };

                if layer.layer_idx > layer_count - layers_to_decrement {
                    layer.layer_idx -= 1;
                }
            });
        to_kill.into_iter().for_each(|ent| {
            self.entities.kill(ent);
        });
    }
    /// Rename the layer with the given index.
    pub fn rename_layer(&mut self, layer_index: u32, name: &str) {
        self.spawned_map_meta.layer_names = self
            .spawned_map_meta
            .layer_names
            .clone()
            .iter()
            .cloned()
            .enumerate()
            .map(|(i, n)| {
                if i as u32 == layer_index {
                    ustr(name)
                } else {
                    n
                }
            })
            .collect();
    }
    /// Move an element to a new position on the map.
    pub fn move_element(&mut self, entity: Entity, position: &Vec2) {
        let transform = self.transforms.get_mut(entity).unwrap();
        transform.translation.x = position.x;
        transform.translation.y = position.y;
    }
    /// Delete an element off of the map.
    pub fn delete_element(&mut self, entity: Entity) {
        if let Some(element_kill_callback) = self.element_kill_callbacks.get(entity) {
            let system = element_kill_callback.system.clone();
            self.commands
                .add(move |world: &World| (system.lock().unwrap().run)(world, ()));
        } else if self.spawner_manager.is_entity_a_spawner(entity) {
            // if the entity is a spawner, there are specific rules around how child entities may be killed
            self.spawner_manager.kill_spawner_entity(
                entity,
                &mut self.entities,
                &self.element_kill_callbacks,
                &mut self.commands,
            );
        } else {
            self.entities.kill(entity);
        }
    }
    /// Set the tilemap for the given layer.
    pub fn set_layer_tilemap(&mut self, layer_index: u32, tilemap: &Option<Handle<Atlas>>) {
        if let Some((_, (tile_layer, _))) = self
            .entities
            .iter_with((&mut self.tile_layers, &self.spawned_map_layer_metas))
            .find(|x| x.1 .1.layer_idx == layer_index)
        {
            if let Some(handle) = tilemap {
                tile_layer.atlas = *handle;
            } else {
                tile_layer.atlas = default();
            }
        };
    }
    /// Set the tile index of a tile on the given layer.
    pub fn set_tile(
        &mut self,
        layer_index: u32,
        position: UVec2,
        tilemap_tile_index: &Option<u32>,
        tile_collision_kind: TileCollisionKind,
    ) {
        if let Some((_, (tile_layer, _))) = self
            .entities
            .iter_with((&mut self.tile_layers, &self.spawned_map_layer_metas))
            .find(|x| x.1 .1.layer_idx == layer_index)
        {
            if let Some(entity) = tile_layer.get(position) {
                if let Some(idx) = tilemap_tile_index.as_ref() {
                    self.tiles.get_mut(entity).unwrap().idx = *idx;

                    // TODO: technically setting the collision to empty should be
                    // equivalent to removing the component, but it isn't working like
                    // that right now.
                    if tile_collision_kind != TileCollisionKind::Empty {
                        self.tile_collisions.insert(entity, tile_collision_kind);
                    } else {
                        self.tile_collisions.remove(entity);
                    }
                } else {
                    self.entities.kill(entity);
                    tile_layer.set(position, None);
                }
            } else if let Some(idx) = tilemap_tile_index {
                let entity = self.entities.create();
                tile_layer.set(position, Some(entity));
                self.tiles.insert(
                    entity,
                    Tile {
                        idx: *idx,
                        ..default()
                    },
                );

                // TODO: technically setting the collision to empty should be
                // equivalent to removing the component, but it isn't workidesired_keyng like
                // that right now.
                if tile_collision_kind != TileCollisionKind::Empty {
                    self.tile_collisions.insert(entity, tile_collision_kind);
                } else {
                    self.tile_collisions.remove(entity);
                }
            }

            self.commands
                .add(move |mut collision_world: CollisionWorld| {
                    collision_world.update_tile(layer_index, position);
                });
        };
    }
    /// Swap the position of two layers.
    pub fn swap_layer(&mut self, layer_index: u32, is_downward: bool) {
        let origin_layer_index = layer_index;
        let other_layer_index = if is_downward {
            origin_layer_index + 1
        } else {
            origin_layer_index - 1
        };
        let mut layer_names = self.spawned_map_meta.layer_names.to_vec();
        layer_names.swap(origin_layer_index as usize, other_layer_index as usize);
        self.spawned_map_meta.layer_names = layer_names.into_iter().collect();

        for (_, (transform, layer_meta)) in self
            .entities
            .iter_with((&mut self.transforms, &mut self.spawned_map_layer_metas))
        {
            if layer_meta.layer_idx == origin_layer_index {
                layer_meta.layer_idx = other_layer_index;
                transform.translation.z = z_depth_for_map_layer(other_layer_index);
            } else if layer_meta.layer_idx == other_layer_index {
                layer_meta.layer_idx = origin_layer_index;
                transform.translation.z = z_depth_for_map_layer(origin_layer_index);
            }
        }
    }
    /// Rename the map.
    pub fn rename_map(&mut self, name: &str) {
        self.spawned_map_meta.name = ustr(name);
    }
    /// Get the size of the map.
    pub fn get_size(&self) -> UVec2 {
        self.spawned_map_meta.grid_size
    }
    /// The the number of layers.
    pub fn get_layers_total(&self) -> usize {
        self.spawned_map_meta.layer_names.len()
    }
    /// Clear all the tiles on the map.
    pub fn clear_tiles(&mut self) {
        let empty_tile: Option<u32> = Option::None;
        for y in 0..self.spawned_map_meta.grid_size.y {
            for x in 0..self.spawned_map_meta.grid_size.x {
                let position = UVec2 { x, y };
                for layer_index in 0..self.spawned_map_meta.layer_names.len() as u32 {
                    self.set_tile(layer_index, position, &empty_tile, TileCollisionKind::Empty);
                }
            }
        }
    }
    /// Clear all of the elements on the map.
    pub fn clear_elements(&mut self) {
        let mut to_kill: Vec<Entity> = Vec::new();
        self.entities
            .iter_with(&mut self.element_handles)
            .for_each(|(entity, _)| {
                to_kill.push(entity);
            });

        to_kill.into_iter().for_each(|entity| {
            self.delete_element(entity);
        });
    }
}

/// Handles user input comming from the editor and makes the required changes to the map.
fn handle_editor_input(player_inputs: Res<MatchInputs>, mut map_manager: MapManager) {
    for player in &player_inputs.players {
        if let Some(editor_input) = &player.editor_input {
            match editor_input {
                EditorInput::SpawnElement {
                    handle,
                    translation,
                    layer,
                } => {
                    map_manager.create_element(handle, translation, *layer as u32);
                }
                EditorInput::CreateLayer { id } => {
                    map_manager.create_layer(ustr(id));
                }
                EditorInput::DeleteLayer { layer } => {
                    map_manager.delete_layer(*layer as u32);
                }
                EditorInput::RenameLayer {
                    layer,
                    name: new_name,
                } => map_manager.rename_layer(*layer as u32, new_name),
                EditorInput::MoveEntity { entity, pos } => {
                    map_manager.move_element(*entity, pos);
                }
                EditorInput::DeleteEntity { entity } => {
                    map_manager.delete_element(*entity);
                }
                EditorInput::SetTilemap { layer, handle } => {
                    map_manager.set_layer_tilemap(*layer as u32, handle);
                }
                EditorInput::SetTile {
                    layer,
                    pos,
                    tilemap_tile_idx,
                    collision,
                } => {
                    map_manager.set_tile(*layer as u32, *pos, tilemap_tile_idx, *collision);
                }
                EditorInput::MoveLayer { layer, down } => {
                    map_manager.swap_layer(*layer as u32, *down)
                }
                EditorInput::RenameMap { name } => {
                    map_manager.rename_map(name);
                }
                EditorInput::RandomizeTiles {
                    tile_layers,
                    element_layers,
                    tile_size,
                } => {
                    let map_constructor = ShiftnanigansMapConstructor::new(
                        map_manager.get_size(),
                        *tile_size,
                        tile_layers,
                        element_layers,
                    );
                    map_constructor.construct_map(&mut map_manager);
                }
            }
        }
    }
}

```

`src/core/elements.rs`:

```rs
//! Map element implementations.
//!
//! A map element is anything that can be placed on the map in the editor.

use std::sync::Mutex;

use crate::{impl_system_param, prelude::*};

pub mod buss;
pub mod cannon;
pub mod crab;
pub mod crate_item;
pub mod decoration;
pub mod fish_school;
pub mod flappy_jellyfish;
pub mod grenade;
pub mod jellyfish;
pub mod kick_bomb;
pub mod machine_gun;
pub mod mine;
pub mod musket;
pub mod periscope;
pub mod player_spawner;
pub mod slippery;
pub mod slippery_seaweed;
pub mod snail;
pub mod spike;
pub mod sproinger;
pub mod stomp_boots;
pub mod sword;
pub mod urchin;

pub mod prelude {
    pub use super::{
        buss::*, crab::*, crate_item::*, decoration::*, fish_school::*, grenade::*, jellyfish::*,
        kick_bomb::*, machine_gun::*, mine::*, musket::*, periscope::*, player_spawner::*,
        slippery::*, slippery_seaweed::*, snail::*, spike::*, sproinger::*, stomp_boots::*,
        sword::*, urchin::*, *,
    };
}

#[derive(HasSchema, Default, Clone, Debug)]
#[type_data(metadata_asset("element"))]
#[repr(C)]
pub struct ElementMeta {
    pub name: Ustr,
    pub category: Ustr,
    pub data: Handle<SchemaBox>,
    pub editor: ElementEditorMeta,
    pub plugin: Handle<LuaPlugin>,
}

#[derive(HasSchema, Default, Debug, Clone, Copy)]
#[type_data(metadata_asset("solid"))]
#[repr(C)]
pub struct ElementSolidMeta {
    pub disabled: bool,
    pub offset: Vec2,
    pub size: Vec2,
}

#[derive(HasSchema, Deserialize, Clone, Debug)]
#[repr(C)]
pub struct ElementEditorMeta {
    /// The size of the bounding rect for the element in the editor
    pub grab_size: Vec2,
    /// The offset of the bounding rect for the element in the editor.
    pub grab_offset: Vec2,
    /// Show the element name above the bounding rect in the editor.
    pub show_name: bool,
}

impl Default for ElementEditorMeta {
    fn default() -> Self {
        Self {
            grab_size: Vec2::splat(45.0),
            grab_offset: Vec2::ZERO,
            show_name: true,
        }
    }
}

/// Marker component added to map elements that have been hydrated.
#[derive(Clone, HasSchema, Default)]
#[repr(C)]
pub struct MapElementHydrated;

/// Component that contains the [`Entity`] to de-hydrate when the entity with this component is out
/// of the [`LoadedMap`] bounds.
///
/// This is useful for map elements that spawn items: when the item falls off the map, it should
/// de-hydrate it's spawner, so that the spawner will re-spawn the item in it's default state.
#[derive(Clone, HasSchema, Default, Deref, DerefMut)]
#[repr(C)]
pub struct DehydrateOutOfBounds(pub Entity);

/// Component containing an element's metadata handle.
#[derive(Clone, Copy, HasSchema, Default, Deref, DerefMut)]
#[repr(C)]
pub struct ElementHandle(pub Handle<ElementMeta>);

#[derive(Clone, HasSchema, Default, Deref, DerefMut)]
#[repr(C)]
pub struct ElementSolid(pub Entity);

#[derive(Clone, HasSchema)]
#[schema(no_default)]
pub struct ElementKillCallback {
    pub system: Arc<Mutex<StaticSystem<(), ()>>>,
}

impl ElementKillCallback {
    pub fn new<Args>(system: impl IntoSystem<Args, (), (), Sys = StaticSystem<(), ()>>) -> Self {
        ElementKillCallback {
            system: Arc::new(Mutex::new(system.system())),
        }
    }
}

#[derive(Clone, HasSchema)]
pub struct Spawner {
    /// The group identifier where all of the elements are meant to be shared between them
    pub group_identifier: String,
}

impl Default for Spawner {
    fn default() -> Self {
        Self {
            group_identifier: Ulid::create().to_string(),
        }
    }
}

impl Spawner {
    pub fn new() -> Self {
        Spawner {
            group_identifier: Ulid::create().to_string(),
        }
    }
    pub fn new_grouped(group_identifier: String) -> Self {
        Spawner { group_identifier }
    }
}

#[derive(HasSchema, Default, Clone)]
pub struct SpawnerEntities {
    pub entities_per_spawner_group_identifier: HashMap<String, Vec<Entity>>,
}

impl_system_param! {
    pub struct SpawnerManager<'a> {
        spawners: CompMut<'a, Spawner>,
        spawner_entities: ResMutInit<'a, SpawnerEntities>,
    }
}

impl<'a> SpawnerManager<'a> {
    /// Stores the spawned elements as having been spawned by the provided entity, finding an
    /// existing spawner element, if it exists, to group these spawned elements with.
    pub fn create_grouped_spawner<T: HasSchema>(
        &mut self,
        entity: Entity,
        mut spawned_elements: Vec<Entity>,
        spawner_elements: &CompMut<T>,
        entities: &Res<Entities>,
    ) {
        // try to find one other spawner and store the existing player entities
        if let Some((_, (_, first_spawner))) = entities
            .iter_with((spawner_elements, &self.spawners))
            .next()
        {
            // all of the player spawners share the same group identifier
            let spawner = Spawner::new_grouped(first_spawner.group_identifier.clone());

            // add the spawned elements to the existing resource
            self.spawner_entities
                .entities_per_spawner_group_identifier
                .get_mut(&spawner.group_identifier)
                .expect("The spawner group should already exist in the SpawnerEntities resource.")
                .append(&mut spawned_elements);

            self.spawners.insert(entity, spawner);
        } else {
            let spawner = Spawner::new();

            // add the spawned elements to the newly created resource
            self.spawner_entities
                .entities_per_spawner_group_identifier
                .insert(spawner.group_identifier.clone(), spawned_elements);

            self.spawners.insert(entity, spawner);
        }
    }
    /// Stores the spawned elements as having been spawned by the provided entity
    pub fn create_spawner(&mut self, entity: Entity, spawned_elements: Vec<Entity>) {
        let spawner = Spawner::new();

        // add the spawned elements to the newly created resource
        self.spawner_entities
            .entities_per_spawner_group_identifier
            .insert(spawner.group_identifier.clone(), spawned_elements);

        self.spawners.insert(entity, spawner);
    }

    /// Stores the spawned elements as having come from the same group of spawners as the spawner_elements.
    pub fn insert_spawned_entity_into_grouped_spawner<T: HasSchema>(
        &mut self,
        spawned_entity: Entity,
        spawner_elements: &Comp<T>,
        entities: &ResMutInit<Entities>,
    ) {
        let (_, (_, spawner)) = entities
            .iter_with((spawner_elements, &self.spawners))
            .next()
            .expect("There should already exist at least one spawner of the type provided.");
        self.spawner_entities.entities_per_spawner_group_identifier
            .get_mut(&spawner.group_identifier)
            .expect("There should exist a cooresponding SpawnerEntities for this spawner group identifier.")
            .push(spawned_entity);
    }
    /// Removes that spawned entity from the spawner entities resource
    pub fn remove_spawned_entity_from_grouped_spawner<T: HasSchema>(
        &mut self,
        spawned_entity: Entity,
        spawner_elements: &Comp<T>,
        entities: &ResMutInit<Entities>,
    ) {
        let (_, (_, spawner)) = entities
            .iter_with((spawner_elements, &self.spawners))
            .next()
            .expect("There should already exist at least one spawner of the type provided.");
        self.spawner_entities.entities_per_spawner_group_identifier
            .get_mut(&spawner.group_identifier)
            .expect("There should exist a cooresponding SpawnerEntities for this spawner group identifier.")
            .retain(|entity| *entity != spawned_entity);
    }
    /// Returns if the entity provided is a spawner
    pub fn is_entity_a_spawner(&self, entity: Entity) -> bool {
        self.spawners.contains(entity)
    }
    /// Kills the provided spawner entity and any spawned entities (if applicable)
    pub fn kill_spawner_entity(
        &mut self,
        spawner_entity: Entity,
        entities: &mut ResMutInit<Entities>,
        element_kill_callbacks: &Comp<ElementKillCallback>,
        commands: &mut Commands,
    ) {
        let spawner = self
            .spawners
            .get(spawner_entity)
            .expect("The spawner must exist in order to be deleted.");
        let grouped_spawners_count = self
            .spawners
            .iter()
            .filter(|other_spawner| spawner.group_identifier == other_spawner.group_identifier)
            .count();
        if grouped_spawners_count == 1 {
            let entities_per_spawner_group_identifier = self.spawner_entities
                .entities_per_spawner_group_identifier
                .remove(&spawner.group_identifier)
                .expect("The spawner still exists to be deleted, so there should be a cooresponding vector of spawned entities.");

            entities_per_spawner_group_identifier
                .into_iter()
                .for_each(|spawned_entity| {
                    if let Some(element_kill_callback) = element_kill_callbacks.get(spawned_entity)
                    {
                        let system = element_kill_callback.system.clone();
                        commands.add(move |world: &World| (system.lock().unwrap().run)(world, ()));
                    } else {
                        entities.kill(spawned_entity);
                    }
                });
        }
        entities.kill(spawner_entity);

        // remove the spawner_entity from spawners so that subsequent calls to this function behave appropriately
        self.spawners.remove(spawner_entity);
    }
}

/// Helper macro to install element game and session plugins
macro_rules! install_plugins {
    ($($module:ident),* $(,)?) => {
        pub fn session_plugin(session: &mut SessionBuilder) {
            ElementHandle::register_schema();
            MapElementHydrated::register_schema();
            DehydrateOutOfBounds::register_schema();

            session
                .stages
                .add_system_to_stage(CoreStage::First, handle_out_of_bounds_items);

            $(
                session.install_plugin($module::session_plugin);
            )*
        }

        pub fn game_plugin(game: &mut Game) {
            ElementMeta::register_schema();
            game.init_shared_resource::<AssetServer>();

            $(
                game.install_plugin($module::game_plugin);
            )*
        }
    };
}

install_plugins!(
    crab,
    crate_item,
    cannon,
    decoration,
    fish_school,
    grenade,
    jellyfish,
    kick_bomb,
    mine,
    machine_gun,
    musket,
    buss,
    player_spawner,
    periscope,
    slippery_seaweed,
    slippery,
    snail,
    spike,
    sproinger,
    stomp_boots,
    sword,
    urchin,
);

fn handle_out_of_bounds_items(
    mut commands: Commands,
    mut hydrated: CompMut<MapElementHydrated>,
    entities: ResMutInit<Entities>,
    transforms: CompMut<Transform>,
    spawners: Comp<DehydrateOutOfBounds>,
    map: Res<LoadedMap>,
) {
    for (item_ent, (transform, spawner)) in entities.iter_with((&transforms, &spawners)) {
        if map.is_out_of_bounds(&transform.translation) {
            hydrated.remove(**spawner);
            commands.add(move |mut entities: ResMutInit<Entities>| {
                entities.kill(item_ent);
            });
        }
    }
}

```

`src/core/elements/buss.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("buss"))]
#[repr(C)]
pub struct BussMeta {
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,

    pub body_size: Vec2,
    pub bounciness: f32,
    pub can_rotate: bool,
    pub throw_velocity: f32,
    pub angular_velocity: f32,
    pub atlas: Handle<Atlas>,

    pub max_ammo: u32,
    pub cooldown: Duration,
    pub bullet_count: u32,
    pub bullet_spread: f32,
    pub bullet_meta: Handle<BulletMeta>,
    pub bullet_spawn_offset: Vec2,
    pub kickback: f32,

    pub shoot_fps: f32,
    pub shoot_lifetime: f32,
    pub shoot_frames: u32,
    pub shoot_sound_volume: f64,
    pub empty_shoot_sound_volume: f64,
    pub shoot_atlas: Handle<Atlas>,
    pub shoot_sound: Handle<AudioSource>,
    pub empty_shoot_sound: Handle<AudioSource>,
}

pub fn game_plugin(game: &mut Game) {
    BussMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Buss {
    pub ammo: u32,
    pub cooldown: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut busses: CompMut<Buss>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(BussMeta {
            atlas,
            fin_anim,
            grab_offset,
            max_ammo,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(buss_drop(entity, *max_ammo)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            busses.insert(
                entity,
                Buss {
                    ammo: *max_ammo,
                    cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,

    mut busses: CompMut<Buss>,
    transforms: CompMut<Transform>,
    mut sprites: CompMut<AtlasSprite>,
    mut audio_center: ResMut<AudioCenter>,

    player_inventories: PlayerInventories,
    mut items_used: CompMut<ItemUsed>,
    items_dropped: CompMut<ItemDropped>,
    time: Res<Time>,

    mut bodies: CompMut<KinematicBody>,
) {
    for (entity, (buss, element_handle)) in entities.iter_with((&mut busses, &element_handles)) {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(BussMeta {
            max_ammo,
            shoot_fps,
            shoot_atlas,
            shoot_frames,
            shoot_lifetime,
            cooldown,
            bullet_meta,
            bullet_count,
            bullet_spread,
            bullet_spawn_offset,
            shoot_sound,
            empty_shoot_sound,
            shoot_sound_volume,
            empty_shoot_sound_volume,
            kickback,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        buss.cooldown.tick(time.delta());

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used && buss.cooldown.finished() {
                // Reset fire cooldown
                buss.cooldown = Timer::new(*cooldown, TimerMode::Once);
                // Empty
                if buss.ammo.eq(&0) {
                    audio_center.play_sound(*empty_shoot_sound, *empty_shoot_sound_volume);
                    continue;
                }

                // Subtract ammo
                buss.ammo = buss.ammo.saturating_sub(1).clamp(0, buss.ammo);
                audio_center.play_sound(*shoot_sound, *shoot_sound_volume);

                let player_sprite = sprites.get_mut(player).unwrap();
                let player_flip_x = player_sprite.flip_x;
                let player_body = bodies.get_mut(player).unwrap();

                //Set kickback
                player_body.velocity.x = if player_flip_x { 1.0 } else { -1.0 } * kickback;

                let mut shoot_animation_transform = *transforms.get(entity).unwrap();
                let bullet_spawn_offset = *bullet_spawn_offset;
                shoot_animation_transform.translation.z += 1.0;
                shoot_animation_transform.translation.y += bullet_spawn_offset.y;
                shoot_animation_transform.translation.x += if player_sprite.flip_x {
                    -bullet_spawn_offset.x
                } else {
                    bullet_spawn_offset.x
                };

                let shoot_fps = *shoot_fps;
                let shoot_frames = *shoot_frames;
                let shoot_lifetime = *shoot_lifetime;
                let shoot_atlas = *shoot_atlas;

                let bullet_meta = *bullet_meta;
                let bullet_spread = *bullet_spread;
                let bullet_count = *bullet_count;

                commands.add(
                    move |rng: Res<GlobalRng>,
                          mut entities: ResMutInit<Entities>,
                          mut lifetimes: CompMut<Lifetime>,
                          mut sprites: CompMut<AtlasSprite>,
                          mut transforms: CompMut<Transform>,
                          mut bullets: CompMut<Bullet>,
                          mut bullet_handles: CompMut<BulletHandle>,
                          mut animated_sprites: CompMut<AnimatedSprite>| {
                        // spawn fire animation
                        {
                            let ent = entities.create();
                            transforms.insert(ent, shoot_animation_transform);
                            sprites.insert(
                                ent,
                                AtlasSprite {
                                    flip_x: player_flip_x,
                                    atlas: shoot_atlas,
                                    ..default()
                                },
                            );

                            animated_sprites.insert(
                                ent,
                                AnimatedSprite {
                                    frames: (0..shoot_frames).collect(),
                                    fps: shoot_fps,
                                    repeat: false,
                                    ..default()
                                },
                            );
                            lifetimes.insert(ent, Lifetime::new(shoot_lifetime));
                        }

                        // spawn bullet
                        {
                            for _bullet in 0..bullet_count {
                                let ent = entities.create();
                                bullets.insert(
                                    ent,
                                    Bullet {
                                        owner: player,
                                        direction: if player_flip_x {
                                            vec2(-1.0, (rng.f32() - 0.5) * bullet_spread)
                                        } else {
                                            vec2(1.0, (rng.f32() - 0.5) * bullet_spread)
                                        },
                                    },
                                );
                                transforms.insert(ent, shoot_animation_transform);
                                bullet_handles.insert(ent, BulletHandle(bullet_meta));
                            }
                        }
                    },
                );
            }
        }

        // If the item was dropped
        if items_dropped.get(entity).is_some() {
            // reload gun
            buss.ammo = *max_ammo;
        }
    }
}

fn buss_drop(entity: Entity, max_ammo: u32) -> StaticSystem<(), ()> {
    (move |mut busses: CompMut<Buss>| {
        // Reload musket
        busses.get_mut(entity).unwrap().ammo = max_ammo;
    })
    .system()
}

```

`src/core/elements/cannon.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("cannon"))]
#[repr(C)]
pub struct CannonMeta {
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,

    pub body_size: Vec2,
    pub bounciness: f32,
    pub can_rotate: bool,
    pub throw_velocity: f32,
    pub angular_velocity: f32,
    pub atlas: Handle<Atlas>,
    pub animation_fps: u32,

    pub max_ammo: u32,
    pub bomb_meta: Handle<KickBombMeta>,
    pub cooldown: Duration,
    pub bullet_spawn_offset: Vec2,
    pub kickback: f32,

    pub shoot_fps: f32,
    pub shoot_lifetime: f32,
    pub shoot_frames: u32,
    pub shoot_sound_volume: f64,
    pub empty_shoot_sound_volume: f64,
    pub shoot_atlas: Handle<Atlas>,
    pub shoot_sound: Handle<AudioSource>,
    pub empty_shoot_sound: Handle<AudioSource>,
}

pub fn game_plugin(game: &mut Game) {
    CannonMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Cannon {
    pub ammo: u32,
    pub cooldown: Timer,
    pub animation_cooldown: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut cannons: CompMut<Cannon>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(CannonMeta {
            atlas,
            fin_anim,
            grab_offset,
            max_ammo,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(cannon_drop(entity, *max_ammo)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            cannons.insert(
                entity,
                Cannon {
                    ammo: *max_ammo,
                    cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                    animation_cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,

    mut cannons: CompMut<Cannon>,
    transforms: CompMut<Transform>,
    mut sprites: CompMut<AtlasSprite>,
    mut audio_center: ResMut<AudioCenter>,

    player_inventories: PlayerInventories,
    mut items_used: CompMut<ItemUsed>,
    items_dropped: CompMut<ItemDropped>,
    time: Res<Time>,

    mut bodies: CompMut<KinematicBody>,
) {
    for (entity, (cannon, element_handle)) in entities.iter_with((&mut cannons, &element_handles)) {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(CannonMeta {
            animation_fps,
            max_ammo,
            shoot_fps,
            shoot_atlas,
            shoot_frames,
            shoot_lifetime,
            cooldown,
            bullet_spawn_offset,
            bomb_meta,
            shoot_sound,
            empty_shoot_sound,
            shoot_sound_volume,
            empty_shoot_sound_volume,
            kickback,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        cannon.cooldown.tick(time.delta());
        cannon.animation_cooldown.tick(time.delta());

        let sprite = sprites.get_mut(entity).unwrap();
        if sprite.index != 0 && cannon.animation_cooldown.finished() {
            // Reset animation cooldown & turn FPS into MS
            cannon.animation_cooldown = Timer::new(
                Duration::from_millis((1000 / animation_fps).into()),
                TimerMode::Once,
            );
            // Update sprite
            match sprite.index {
                1 => sprite.index = 2,
                2 => sprite.index = 3,
                3 => sprite.index = 0,
                _ => (),
            };
        }

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used && cannon.cooldown.finished() {
                // Reset fire cooldown
                cannon.cooldown = Timer::new(*cooldown, TimerMode::Once);
                // Empty
                if cannon.ammo.eq(&0) {
                    audio_center.play_sound(*empty_shoot_sound, *empty_shoot_sound_volume);
                    continue;
                }

                // Update sprite
                sprite.index = 1;
                // Reset animation cooldown & turn FPS into MS
                cannon.animation_cooldown = Timer::new(
                    Duration::from_millis((1000 / animation_fps).into()),
                    TimerMode::Once,
                );

                // Subtract ammo
                cannon.ammo = cannon.ammo.saturating_sub(1).clamp(0, cannon.ammo);
                audio_center.play_sound(*shoot_sound, *shoot_sound_volume);

                let player_sprite = sprites.get_mut(player).unwrap();
                let player_flip_x = player_sprite.flip_x;
                let player_body = bodies.get_mut(player).unwrap();

                //Set kickback
                player_body.velocity.x = if player_flip_x { 1.0 } else { -1.0 } * kickback;

                let mut shoot_animation_transform = *transforms.get(entity).unwrap();
                let bullet_spawn_offset = *bullet_spawn_offset;
                shoot_animation_transform.translation.z += 1.0;
                shoot_animation_transform.translation.y += bullet_spawn_offset.y;
                shoot_animation_transform.translation.x += if player_sprite.flip_x {
                    -bullet_spawn_offset.x
                } else {
                    bullet_spawn_offset.x
                };

                let shoot_fps = *shoot_fps;
                let shoot_frames = *shoot_frames;
                let shoot_lifetime = *shoot_lifetime;
                let shoot_atlas = *shoot_atlas;

                let bomb_meta = *bomb_meta;

                commands.add(
                    move |mut entities: ResMutInit<Entities>,
                          mut lifetimes: CompMut<Lifetime>,
                          mut sprites: CompMut<AtlasSprite>,
                          mut transforms: CompMut<Transform>,
                          mut animated_sprites: CompMut<AnimatedSprite>| {
                        // spawn fire animation
                        {
                            let ent = entities.create();
                            transforms.insert(ent, shoot_animation_transform);
                            sprites.insert(
                                ent,
                                AtlasSprite {
                                    flip_x: player_flip_x,
                                    atlas: shoot_atlas,
                                    ..default()
                                },
                            );

                            animated_sprites.insert(
                                ent,
                                AnimatedSprite {
                                    frames: (0..shoot_frames).collect(),
                                    fps: shoot_fps,
                                    repeat: false,
                                    ..default()
                                },
                            );
                            lifetimes.insert(ent, Lifetime::new(shoot_lifetime));
                        }
                    },
                );
                //Spawn bomb
                commands.add(KickBombCommand::spawn_kick_bomb(
                    None,
                    shoot_animation_transform,
                    bomb_meta.untyped(),
                    true,
                    Some(player_flip_x),
                ));
            }
        }

        // If the item was dropped
        if items_dropped.get(entity).is_some() {
            // reload gun
            cannon.ammo = *max_ammo;
        }
    }
}

fn cannon_drop(entity: Entity, max_ammo: u32) -> StaticSystem<(), ()> {
    (move |mut cannons: CompMut<Cannon>| {
        cannons.get_mut(entity).unwrap().ammo = max_ammo;
    })
    .system()
}

```

`src/core/elements/crab.rs`:

```rs
use crate::prelude::*;

/// A crab roaming on the ocean floor
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("crab"))]
#[repr(C)]
pub struct CrabMeta {
    pub body_size: Vec2,
    pub walk_frames: SVec<u32>,
    pub spawn_frames: SVec<u32>,
    pub fps: f32,
    pub comfortable_spawn_distance: f32,
    pub comfortable_scared_distance: f32,
    /// How long a crab has to be away from it's spawn point before it digs into the ground and
    /// digs back out in his spawn point.
    pub uncomfortable_respawn_time: Duration,
    pub same_level_threshold: f32,
    pub walk_speed: f32,
    pub run_speed: f32,
    // TODO: migrate this to a duration like `uncomfortable_respawn_time`.
    pub timer_delay_max: u8,
    pub atlas: Handle<Atlas>,
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_crabs);
}

pub fn game_plugin(game: &mut Game) {
    CrabMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

#[derive(Default, Clone, HasSchema, Debug, Copy)]
pub enum CrabState {
    #[default]
    Paused,
    Walking {
        left: bool,
    },
    Fleeing {
        scared_of: Entity,
    },
    Spawning,
    Despawning,
}

impl CrabState {
    fn is_moving(&self) -> bool {
        matches!(self, CrabState::Walking { .. } | CrabState::Fleeing { .. })
    }
}

#[derive(HasSchema, Clone, Default)]
pub struct CrabCritter {
    state: CrabState,
    start_pos: Vec2,
    state_count: u8,
    state_count_max: u8,
    respawn_timer: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut despawns: CompMut<DehydrateOutOfBounds>,
    mut element_handles: CompMut<ElementHandle>,
    mut crabs: CompMut<CrabCritter>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut spawner_manager: SpawnerManager,
    assets: Res<AssetServer>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(CrabMeta {
            atlas,
            body_size,
            spawn_frames,
            uncomfortable_respawn_time,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            crabs.insert(
                entity,
                CrabCritter {
                    state_count: 0,
                    state_count_max: 60,
                    state: CrabState::Spawning,
                    start_pos: Vec2::new(transform.translation.x, transform.translation.y),
                    respawn_timer: Timer::from_seconds(
                        uncomfortable_respawn_time.as_secs_f32(),
                        TimerMode::Once,
                    ),
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            despawns.insert(entity, DehydrateOutOfBounds(spawner_ent));

            bodies.insert(
                entity,
                KinematicBody {
                    gravity: game_meta.core.physics.gravity,
                    has_mass: true,
                    has_friction: true,
                    shape: ColliderShape::Rectangle { size: *body_size },
                    ..default()
                },
            );

            animated_sprites.insert(
                entity,
                AnimatedSprite {
                    repeat: false,
                    frames: spawn_frames.iter().cloned().collect(),
                    ..default()
                },
            );

            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update_crabs(
    rng: Res<GlobalRng>,
    time: Res<Time>,
    entities: Res<Entities>,
    player_indexes: Comp<PlayerIdx>,
    mut crabs: CompMut<CrabCritter>,
    mut sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut commands: Commands,
    spawners: Comp<DehydrateOutOfBounds>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
) {
    for (entity, (crab, element_handle, spawner)) in
        entities.iter_with((&mut crabs, &element_handles, &spawners))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let CrabMeta {
            fps,
            run_speed,
            walk_speed,
            walk_frames,
            spawn_frames,
            comfortable_spawn_distance,
            comfortable_scared_distance,
            same_level_threshold,
            timer_delay_max,
            ..
        } = asset.cast_ref();

        let body = bodies.get_mut(entity).unwrap();
        let sprite = sprites.get_mut(entity).unwrap();
        let animated_sprite = animated_sprites.get_mut(entity).unwrap();
        let transform = transforms.get_mut(entity).unwrap();
        let pos = Vec2::new(transform.translation.x, transform.translation.y);

        if (crab.start_pos - pos).length() > *comfortable_spawn_distance {
            crab.respawn_timer.tick(time.delta());
        } else {
            crab.respawn_timer.reset();
        }

        if let CrabState::Despawning = crab.state {
            if finished_playing(animated_sprite).unwrap() {
                crab.state = CrabState::Spawning;
                hydrated.remove(**spawner);
                commands.add(move |mut entities: ResMutInit<Entities>| entities.kill(entity));
            }
            continue;
        } else if body.is_on_ground && crab.respawn_timer.finished() {
            crab.state = CrabState::Despawning;
            body.is_deactivated = true;
            *animated_sprite = AnimatedSprite {
                frames: spawn_frames.iter().rev().cloned().collect(),
                repeat: false,
                fps: *fps,
                ..default()
            };
            continue;
        }

        if let CrabState::Spawning = crab.state {
            if body.is_on_ground {
                body.velocity = Vec2::ZERO;
                animated_sprite.fps = *fps;
                if finished_playing(animated_sprite).unwrap() {
                    crab.state = CrabState::Paused;
                    *animated_sprite = AnimatedSprite {
                        frames: walk_frames.iter().cloned().collect(),
                        repeat: true,
                        fps: *fps,
                        ..default()
                    };
                }
            }
            continue;
        }

        crab.state_count += 1;
        let rand_bool = |true_bias: u8| -> bool { rng.u8(0..(1_u8 + true_bias)) > 0 };
        let rand_timer_delay = |max: u8| rng.u8(0..max);

        let next_scary_thing = || {
            for (scary_entity, (_player_idx, scary_thing_transform)) in
                entities.iter_with((&player_indexes, &transforms))
            {
                let scary_thing_pos = Vec2::new(
                    scary_thing_transform.translation.x,
                    scary_thing_transform.translation.y,
                );

                if pos.distance(scary_thing_pos) < *comfortable_scared_distance
                    && (pos.y - scary_thing_pos.y).abs() < *same_level_threshold
                {
                    return Some(scary_entity);
                }
            }
            None
        };

        let pick_next_move = |crab: &CrabCritter| {
            let pause_bias = if crab.state.is_moving() { 2 } else { 0 };

            if rand_bool(pause_bias) {
                (CrabState::Paused, rand_timer_delay(*timer_delay_max))
            } else {
                let distance_from_home = pos.x - crab.start_pos.x;
                let left = if distance_from_home.abs() > *comfortable_spawn_distance && rand_bool(2)
                {
                    distance_from_home > 0.0
                } else {
                    rand_bool(0)
                };
                (
                    CrabState::Walking { left },
                    rand_timer_delay(*timer_delay_max),
                )
            }
        };

        let get_scared_of_pos = |scared_of: Entity| {
            transforms
                .get(scared_of)
                .map(|x| x.translation.xy())
                .unwrap_or_default()
        };

        if crab.state_count >= crab.state_count_max {
            crab.state_count = 0;

            if let Some(scared_of_pos) = next_scary_thing() {
                crab.state = CrabState::Fleeing {
                    scared_of: scared_of_pos,
                };
                crab.state_count_max = rand_timer_delay(*timer_delay_max);
            } else {
                match &crab.state {
                    CrabState::Paused | CrabState::Walking { .. } => {
                        let (state, timer) = pick_next_move(crab);
                        crab.state = state;
                        crab.state_count_max = timer;
                    }
                    CrabState::Fleeing { scared_of } => {
                        let scared_of_pos = get_scared_of_pos(*scared_of);

                        if pos.distance(scared_of_pos) > *comfortable_scared_distance {
                            if let Some(scared_of) = next_scary_thing() {
                                crab.state = CrabState::Fleeing { scared_of };
                                crab.state_count_max = rand_timer_delay(*timer_delay_max / 3);
                            } else {
                                let (state, timer) = pick_next_move(crab);
                                crab.state = state;
                                crab.state_count_max = timer;
                            }
                        }
                    }
                    _ => {}
                }
            }
        }

        match &crab.state {
            CrabState::Paused => {
                animated_sprite.fps = 0.0;
                body.velocity.x = 0.0;
            }
            CrabState::Walking { left } => {
                animated_sprite.fps = *fps;
                sprite.flip_x = *left;

                let direction = if *left { -1.0 } else { 1.0 };
                body.velocity.x = *walk_speed * direction;
            }
            CrabState::Fleeing { scared_of } => {
                animated_sprite.fps = *fps;
                let scared_of_pos = get_scared_of_pos(*scared_of);
                let direction = (pos.x - scared_of_pos.x).signum();
                body.velocity.x = direction * *run_speed;
            }
            _ => {}
        }
    }
}

fn finished_playing(
    AnimatedSprite {
        index,
        frames,
        fps,
        timer,
        repeat,
    }: &AnimatedSprite,
) -> Option<bool> {
    (!repeat)
        .then(|| *index == frames.len() as u32 - 1 && *timer > 1.0 / fps.max(f32::MIN_POSITIVE))
}

```

`src/core/elements/crate_item.rs`:

```rs
use crate::prelude::*;

/// The throwable crate item
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("crate"))]
#[repr(C)]
pub struct CrateMeta {
    pub atlas: Handle<Atlas>,

    pub breaking_atlas: Handle<Atlas>,
    pub breaking_anim_frames: u32,
    pub breaking_anim_fps: f32,

    pub break_sound: Handle<AudioSource>,
    pub break_sound_volume: f64,
    pub bounce_sound: Handle<AudioSource>,
    pub bounce_sound_volume: f64,

    pub throw_velocity: f32,

    pub body_size: Vec2,
    pub grab_offset: Vec2,
    // How long to wait before despawning a thrown crate, if it hans't it anything yet.
    pub break_timeout: Duration,
    pub bounciness: f32,
    pub fin_anim: Ustr,
    pub crate_break_state_1: u32,
    pub crate_break_state_2: u32,
}

pub fn game_plugin(game: &mut Game) {
    CrateMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate_crates)
        .add_system_to_stage(CoreStage::PostUpdate, update_idle_crates)
        .add_system_to_stage(CoreStage::PostUpdate, update_thrown_crates);
}

#[derive(Clone, HasSchema, Default)]
struct IdleCrate;

#[derive(Clone, HasSchema, Default)]
struct ThrownCrate {
    owner: Entity,
    damage_delay: Timer,
    break_timeout: Timer,
    crate_break_state: u8,
    was_colliding: bool,
}

fn hydrate_crates(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut idle_crates: CompMut<IdleCrate>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_entity in spawner_entities {
        let transform = *transforms.get(spawner_entity).unwrap();
        let element_handle = *element_handles.get(spawner_entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(CrateMeta {
            atlas,
            fin_anim,
            grab_offset,
            body_size,
            throw_velocity,
            bounciness,
            ..
        }) = asset.try_cast_ref()
        else {
            continue;
        };

        hydrated.insert(spawner_entity, MapElementHydrated);

        let entity = entities.create();
        items.insert(entity, Item);
        idle_crates.insert(entity, IdleCrate);
        item_throws.insert(entity, ItemThrow::strength(*throw_velocity));
        item_grabs.insert(
            entity,
            ItemGrab {
                fin_anim: *fin_anim,
                sync_animation: false,
                grab_offset: *grab_offset,
            },
        );
        atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
        respawn_points.insert(entity, DehydrateOutOfBounds(spawner_entity));
        transforms.insert(entity, transform);
        element_handles.insert(entity, element_handle);
        hydrated.insert(entity, MapElementHydrated);
        animated_sprites.insert(entity, default());
        bodies.insert(
            entity,
            KinematicBody {
                shape: ColliderShape::Rectangle { size: *body_size },
                has_mass: true,
                can_rotate: false,
                has_friction: true,
                gravity: game_meta.core.physics.gravity,
                bounciness: *bounciness,
                ..default()
            },
        );
        spawner_manager.create_spawner(spawner_entity, vec![entity])
    }
}

fn update_idle_crates(
    entities: Res<Entities>,
    mut items_used: CompMut<ItemUsed>,
    assets: Res<AssetServer>,
    element_handles: Comp<ElementHandle>,
    idle_crates: CompMut<IdleCrate>,
    player_inventories: PlayerInventories,
    mut commands: Commands,
) {
    for (entity, (_le_crate, element_handle)) in
        entities.iter_with((&idle_crates, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(CrateMeta { break_timeout, .. }) = asset.try_cast_ref() else {
            continue;
        };

        let break_timeout = *break_timeout;

        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            if items_used.remove(entity).is_some() {
                commands.add(PlayerCommand::set_inventory(player, None));
                commands.add(
                    move |mut idle: CompMut<IdleCrate>, mut thrown: CompMut<ThrownCrate>| {
                        idle.remove(entity);
                        thrown.insert(
                            entity,
                            ThrownCrate {
                                owner: player,
                                damage_delay: Timer::new(
                                    Duration::from_secs_f32(0.25),
                                    TimerMode::Once,
                                ),
                                break_timeout: Timer::new(break_timeout, TimerMode::Once),
                                was_colliding: false,
                                crate_break_state: 0,
                            },
                        );
                    },
                );
            }
        }
    }
}

fn update_thrown_crates(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    assets: Res<AssetServer>,
    element_handles: Comp<ElementHandle>,
    mut thrown_crates: CompMut<ThrownCrate>,
    mut commands: Commands,
    mut atlas_sprites: CompMut<AtlasSprite>,
    players: Comp<PlayerIdx>,
    collision_world: CollisionWorld,
    mut bodies: CompMut<KinematicBody>,
    mut audio_center: ResMut<AudioCenter>,
    transforms: Comp<Transform>,
    spawners: Comp<DehydrateOutOfBounds>,
    invincibles: CompMut<Invincibility>,
    time: Res<Time>,
) {
    for (entity, (thrown_crate, element_handle, transform, atlas_sprite, body, spawner)) in entities
        .iter_with((
            &mut thrown_crates,
            &element_handles,
            &transforms,
            &mut atlas_sprites,
            &mut bodies,
            &spawners,
        ))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(CrateMeta {
            breaking_anim_frames,
            breaking_atlas,
            breaking_anim_fps,
            break_sound,
            break_sound_volume,
            bounce_sound,
            bounce_sound_volume,
            crate_break_state_1,
            crate_break_state_2,
            ..
        }) = asset.try_cast_ref()
        else {
            continue;
        };

        thrown_crate.damage_delay.tick(time.delta());
        thrown_crate.break_timeout.tick(time.delta());

        let colliding_with_tile = {
            let collider = collision_world.get_collider(entity);
            let aabb = collider.shape.compute_aabb(default());
            let width = aabb.extents().x + 2.0;
            let height = aabb.extents().y + 2.0;
            collision_world.tile_collision(
                Transform::from_translation(transform.translation),
                ColliderShape::Rectangle {
                    size: vec2(width, height),
                },
            ) != TileCollisionKind::Empty
        };

        if colliding_with_tile && !thrown_crate.was_colliding {
            thrown_crate.was_colliding = true;
            thrown_crate.crate_break_state += 1;
            audio_center.play_sound(*bounce_sound, *bounce_sound_volume);
        } else if !colliding_with_tile {
            thrown_crate.was_colliding = false;
        }

        match thrown_crate.crate_break_state {
            1 => {
                atlas_sprite.atlas = *breaking_atlas;
                atlas_sprite.index = *crate_break_state_1;
            }
            3 => {
                atlas_sprite.index = *crate_break_state_2;
            }
            _ => {}
        }

        let colliding_with_players = collision_world
            .actor_collisions_filtered(entity, |e| {
                players.contains(e)
                    && invincibles.get(e).is_none()
                    && thrown_crate.damage_delay.finished()
            })
            .into_iter()
            .collect::<Vec<_>>();

        for player_entity in &colliding_with_players {
            commands.add(PlayerCommand::kill(
                *player_entity,
                Some(transform.translation.xy()),
            ));
        }
        let kill_nearby_colliding: bool = kill_all_colliding_if_freshly_thrown(
            thrown_crate,
            &collision_world,
            &players,
            &invincibles,
            &mut commands,
            transform,
        );

        if !colliding_with_players.is_empty()
            || kill_nearby_colliding
            || thrown_crate.break_timeout.finished()
            || thrown_crate.crate_break_state >= 4
            || body.is_on_ground && body.velocity.length_squared() < 0.1
        {
            hydrated.remove(**spawner);

            let breaking_anim_frames = *breaking_anim_frames;
            let breaking_anim_fps = *breaking_anim_fps;
            let atlas = *breaking_atlas;

            audio_center.play_sound(*break_sound, *break_sound_volume);

            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut animated_sprites: CompMut<AnimatedSprite>,
                      mut lifetimes: CompMut<Lifetime>,
                      mut atlas_sprites: CompMut<AtlasSprite>| {
                    let pos = *transforms.get(entity).unwrap();
                    entities.kill(entity);
                    let breaking_anim_ent = entities.create();
                    atlas_sprites.insert(breaking_anim_ent, AtlasSprite { atlas, ..default() });
                    animated_sprites.insert(
                        breaking_anim_ent,
                        AnimatedSprite {
                            repeat: false,
                            fps: breaking_anim_fps,
                            frames: (1..breaking_anim_frames).collect(),
                            ..default()
                        },
                    );
                    lifetimes.insert(breaking_anim_ent, Lifetime::new(1.0));
                    transforms.insert(breaking_anim_ent, pos);
                },
            );
        }
    }
}

fn kill_all_colliding_if_freshly_thrown(
    thrown_crate: &ThrownCrate,
    collision_world: &CollisionWorld,
    players: &Comp<PlayerIdx>,
    invincibles: &CompMut<Invincibility>,
    commands: &mut Commands,
    transform: &Transform,
) -> bool {
    if thrown_crate.damage_delay.finished() {
        return false;
    }

    let colliding_with_players = collision_world
        .actor_collisions_filtered(thrown_crate.owner, |e| players.contains(e))
        .into_iter()
        .collect::<Vec<_>>();

    if !colliding_with_players.is_empty() {
        for player_entity in &colliding_with_players {
            if invincibles.get(*player_entity).is_none() {
                commands.add(PlayerCommand::kill(
                    *player_entity,
                    Some(transform.translation.xy()),
                ));
            }
        }
        commands.add(PlayerCommand::kill(
            thrown_crate.owner,
            Some(transform.translation.xy()),
        ));
        true
    } else {
        false
    }
}

```

`src/core/elements/decoration.rs`:

```rs
use crate::prelude::*;

/// An animated decoration such as seaweed or anemones
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("animated_decoration"))]
#[repr(C)]
pub struct AnimatedDecorationMeta {
    pub start_frame: u32,
    pub end_frame: u32,
    pub fps: f32,
    pub atlas: Handle<Atlas>,
}

pub fn game_plugin(game: &mut Game) {
    AnimatedDecorationMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::First, hydrate);
}

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(AnimatedDecorationMeta {
            start_frame,
            end_frame,
            fps,
            atlas,
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(entity, MapElementHydrated);
            atlas_sprites.insert(
                entity,
                AtlasSprite {
                    atlas: *atlas,
                    ..default()
                },
            );
            animated_sprites.insert(
                entity,
                AnimatedSprite {
                    frames: (*start_frame..*end_frame).collect(),
                    fps: *fps,
                    repeat: true,
                    ..default()
                },
            );
        }
    }
}

```

`src/core/elements/fish_school.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("fish_school"))]
#[repr(C)]
pub struct FishSchoolMeta {
    pub kinds: SVec<Handle<Atlas>>,
    /// The default and most-likely to ocurr number of fish in a school
    pub base_count: u32,
    /// The ammount greater or less than the base number of fish that may spawn
    pub count_variation: u32,
    /// The distance from the spawn point on each axis that the individual fish in the school will be
    /// initially spawned within
    pub spawn_range: f32,
    /// The distance that the fish wish to stay within the center of their school
    pub school_size: f32,
    // The distance a collider must be for the fish to run away
    pub flee_range: f32,
}

pub fn game_plugin(game: &mut Game) {
    FishSchoolMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_fish_schools);
}

#[derive(Default, Clone, HasSchema, Debug, Deref, DerefMut)]
pub struct FishSchool {
    fish: Vec<Entity>,
}

#[derive(Clone, HasSchema, Debug)]
#[schema(no_default)]
pub struct Fish {
    state: FishState,
    state_timer: Timer,
}

#[derive(Debug, Clone)]
pub enum FishState {
    /// Moving to a location
    Moving { from: Vec2, to: Vec2 },
}

pub fn hydrate(
    rng: Res<GlobalRng>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut fish_schools: CompMut<FishSchool>,
    mut fishes: CompMut<Fish>,
    mut transforms: CompMut<Transform>,
    mut actors: CompMut<Actor>,
    mut colliders: CompMut<Collider>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);
        if let Ok(FishSchoolMeta {
            kinds,
            base_count,
            count_variation,
            spawn_range,
            flee_range,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            // We can use the spawner entity itself for our
            // school because there is no respawning.
            let fish_school_ent = spawner_ent;

            hydrated.insert(fish_school_ent, MapElementHydrated);
            transforms.insert(fish_school_ent, transform);
            element_handles.insert(fish_school_ent, element_handle);

            let mut fish_ents = Vec::new();

            let rand_bool = || rng.u8(0u8..2) == 0;

            let mut fish_count = *base_count;
            if rand_bool() {
                for _ in 0..*count_variation {
                    if rand_bool() {
                        fish_count = if rand_bool() {
                            fish_count.saturating_sub(1)
                        } else {
                            fish_count.saturating_add(1)
                        };
                    }
                }
            }

            let spawn_point = transform.translation.xy();

            for _ in 0..fish_count {
                let spawn_point = spawn_point
                    + vec2(
                        rng.f32_normalized() * spawn_range,
                        rng.f32_normalized() * spawn_range,
                    );

                let duration = {
                    let min = 0.2;
                    let max = 1.0;
                    rng.f32() * (max - min) + min
                };

                let atlas = &kinds[rng.usize(0..kinds.len())];

                let fish_ent = entities.create();
                fishes.insert(
                    fish_ent,
                    Fish {
                        state: FishState::Moving {
                            from: spawn_point,
                            to: spawn_point,
                        },
                        state_timer: Timer::new(
                            Duration::from_secs_f32(duration),
                            TimerMode::Repeating,
                        ),
                    },
                );
                transforms.insert(fish_ent, transform);
                actors.insert(fish_ent, Actor);
                colliders.insert(
                    fish_ent,
                    Collider {
                        shape: ColliderShape::Circle {
                            diameter: flee_range * 2.0,
                        },
                        ..default()
                    },
                );
                atlas_sprites.insert(fish_ent, AtlasSprite::new(*atlas));
                animated_sprites.insert(
                    fish_ent,
                    AnimatedSprite {
                        frames: [0, 1, 2, 3].into_iter().collect(),
                        fps: 6.0,
                        repeat: true,
                        ..default()
                    },
                );

                fish_ents.push(fish_ent);
            }
            fish_schools.insert(
                fish_school_ent,
                FishSchool {
                    fish: fish_ents.clone(),
                },
            );
            spawner_manager.create_spawner(fish_school_ent, fish_ents);
        }
    }
}

pub fn update_fish_schools(
    rng: Res<GlobalRng>,
    time: Res<Time>,
    entities: Res<Entities>,
    fish_schools: Comp<FishSchool>,
    mut fishes: CompMut<Fish>,
    element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut transforms: CompMut<Transform>,
    collision_world: CollisionWorld,
    bodies: Comp<KinematicBody>,
) {
    for (school_ent, school) in entities.iter_with(&fish_schools) {
        let element_handle = element_handles.get(school_ent).unwrap();
        let element_meta = assets.get(element_handle.0);
        let asset = assets.get(element_meta.data);
        let Ok(FishSchoolMeta { school_size, .. }) = asset.try_cast_ref() else {
            continue;
        };

        let transform = transforms.get(school_ent).unwrap();
        let mut fish_transforms = school
            .fish
            .iter()
            .map(|entity| transforms.get(*entity).unwrap());
        let Some(fish_transform) = fish_transforms.next() else {
            continue;
        };

        let mut school_bounds_min = fish_transform.translation.xy();
        let mut school_bounds_max = fish_transform.translation.xy();

        for transform in fish_transforms {
            let pos = &transform.translation.xy();

            school_bounds_min.x = school_bounds_min.x.min(pos.x);
            school_bounds_min.y = school_bounds_min.y.min(pos.y);
            school_bounds_max.x = school_bounds_max.x.max(pos.x);
            school_bounds_max.y = school_bounds_max.y.max(pos.y);
        }

        let size = school_bounds_max - school_bounds_min;
        let center = school_bounds_min + size / 2.0;
        let is_grouped = size.x.max(size.y) < *school_size;
        let spawn_pos = transform.translation.xy();

        for fish_ent in school.fish.iter() {
            let flee = collision_world
                .actor_collisions(*fish_ent)
                .into_iter()
                .find(|ent| {
                    !fishes.contains(*ent)
                        && bodies
                            .get(*ent)
                            .map(|x| x.velocity != Vec2::ZERO)
                            .unwrap_or_default()
                });

            let fish = fishes.get_mut(*fish_ent).unwrap();
            let sprite = atlas_sprites.get_mut(*fish_ent).unwrap();

            let mut pos = transforms.get(*fish_ent).unwrap().translation.xy();

            let rand_bool = || rng.u8(0u8..2) == 0;
            let rand_range = |min: f32, max: f32| rng.f32() * (max - min) + min;

            let pick_next_move = || {
                if !is_grouped {
                    let target_point = pos.lerp(center, rand_range(0.1, 0.4));

                    (
                        FishState::Moving {
                            from: pos,
                            to: target_point,
                        },
                        Timer::new(
                            Duration::from_secs_f32(rand_range(0.2, 0.7)),
                            TimerMode::Repeating,
                        ),
                    )
                } else if rand_bool() {
                    let target_point = vec2(
                        pos.x + rand_range(-20.0, 20.0),
                        pos.y + rand_range(-20.0, 20.0),
                    );
                    (
                        FishState::Moving {
                            from: pos,
                            to: target_point,
                        },
                        Timer::new(
                            Duration::from_secs_f32(rand_range(0.5, 1.5)),
                            TimerMode::Repeating,
                        ),
                    )
                } else {
                    let target_point = pos.lerp(spawn_pos, rand_range(0.10, 0.25));
                    (
                        FishState::Moving {
                            from: pos,
                            to: target_point,
                        },
                        Timer::new(
                            Duration::from_secs_f32(rand_range(0.5, 1.5)),
                            TimerMode::Repeating,
                        ),
                    )
                }
            };

            fish.state_timer.tick(time.delta());

            if let Some(scary_thing) = flee {
                let diff = pos - transforms.get(scary_thing).unwrap().translation.xy();
                fish.state = FishState::Moving {
                    from: pos,
                    to: pos + diff.normalize() * rand_range(30.0, 60.0),
                };
                fish.state_timer = Timer::new(
                    Duration::from_secs_f32(rand_range(0.2, 0.6)),
                    TimerMode::Repeating,
                );
                // We tick the timer an extra time here to make sure that the fish gets moving
                // immediately without waiting for an extra frame, because if we keep colliding we
                // may just keep re-setting the timer and the fish get's stuck until it stops
                // colliding.
                fish.state_timer.tick(time.delta());
            } else if fish.state_timer.finished() {
                let (state, timer) = pick_next_move();
                fish.state = state;
                fish.state_timer = timer;
            }

            match &fish.state {
                FishState::Moving { from, to } => {
                    let lerp_progress = Ease {
                        ease_in: false,
                        ease_out: true,
                        function: EaseFunction::Sinusoidial,
                        progress: fish.state_timer.percent(),
                    }
                    .output();

                    sprite.flip_x = from.x > to.x;
                    sprite.index = (4.0 * lerp_progress).floor() as u32;

                    pos = from.lerp(*to, lerp_progress);
                }
            }
            let transform = transforms.get_mut(*fish_ent).unwrap();
            transform.translation.x = pos.x;
            transform.translation.y = pos.y;
        }
    }
}

```

`src/core/elements/flappy_jellyfish.rs`:

```rs
use smallvec::SmallVec;

use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("flappy_jellyfish"))]
#[repr(C)]
pub struct FlappyJellyfishMeta {
    pub atlas: Handle<Atlas>,
    pub body_size: Vec2,
    pub start_frame: u32,
    pub end_frame: u32,
    pub fps: f32,
    pub spawn_offset: Vec2,
    pub explosion_atlas: Handle<Atlas>,
    pub explosion_lifetime: f32,
    pub explosion_frames: u32,
    pub explosion_fps: f32,
    pub explosion_volume: f64,
    pub explosion_sound: Handle<AudioSource>,
    pub damage_region_size: Vec2,
    pub damage_region_lifetime: f32,
}

impl FlappyJellyfishMeta {
    pub fn frames(&self) -> SVec<u32> {
        (self.start_frame..self.end_frame).collect()
    }
}

pub trait FlappyJellyfishMetaSchemaExts {
    /// Try to cast the `asset` to a `JellyfishMeta` and get the
    /// `FlappyJellyfishMeta` from it.
    fn try_get_flappy_meta(&self) -> Option<Handle<FlappyJellyfishMeta>>;
}

impl FlappyJellyfishMetaSchemaExts for SchemaBox {
    fn try_get_flappy_meta(&self) -> Option<Handle<FlappyJellyfishMeta>> {
        self.try_cast_ref::<JellyfishMeta>()
            .ok()
            .map(|m| m.flappy_meta)
    }
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PostUpdate, control_flappy_jellyfish)
        .add_system_to_stage(CoreStage::PostUpdate, explode_flappy_jellyfish);
}

#[derive(Clone, Copy, Debug, Default, HasSchema)]
pub struct FlappyJellyfish {
    pub owner: Entity,
    pub jellyfish: Entity,
}

/// A player with a jellyfish is holding shoot. Take control of the flappy if
/// one exists or spawn one.
pub fn spawn_or_take_control(
    owner: Entity,
    jellyfish_ent: Entity,
    flappy_ent: Option<Entity>,
) -> StaticSystem<(), ()> {
    (move |world: &World| {
        if let Some(flappy_ent) = flappy_ent {
            take_control(owner, flappy_ent).run(world, ());
        } else {
            {
                let mut jellyfishes = world.components.get::<Jellyfish>().borrow_mut();
                let Some(jellyfish) = jellyfishes.get_mut(jellyfish_ent) else {
                    return;
                };
                if jellyfish.ammo == 0 {
                    return;
                }
                jellyfish.ammo -= 1;
            }
            spawn(owner, jellyfish_ent).run(world, ());
        }
    })
    .system()
}

/// Take control of the flappy associated with a jellyfish for a player.
fn take_control(owner: Entity, flappy_ent: Entity) -> StaticSystem<(), ()> {
    (move |mut player_driving: CompMut<PlayerDrivingJellyfish>| {
        player_driving.insert(owner, PlayerDrivingJellyfish { flappy: flappy_ent });
    })
    .system()
}

/// Spawn a flappy jellyfish.
fn spawn(owner: Entity, jellyfish_ent: Entity) -> StaticSystem<(), ()> {
    (move |mut entities: ResMut<Entities>,
           element_handles: Comp<ElementHandle>,
           mut player_driving: CompMut<PlayerDrivingJellyfish>,
           mut jellyfishes: CompMut<Jellyfish>,
           mut flappy_jellyfishes: CompMut<FlappyJellyfish>,
           mut bodies: CompMut<KinematicBody>,
           assets: Res<AssetServer>,
           mut atlas_sprites: CompMut<AtlasSprite>,
           mut animated_sprites: CompMut<AnimatedSprite>,
           mut transforms: CompMut<Transform>,
           mut camera_subjects: CompMut<CameraSubject>| {
        let Some(flappy_meta) = element_handles
            .get(jellyfish_ent)
            .map(|element_h| assets.get(element_h.0))
            .map(|element_meta| assets.get(element_meta.data))
            .as_deref()
            .and_then(SchemaBox::try_get_flappy_meta)
            .map(|flappy_h| assets.get(flappy_h))
        else {
            return;
        };

        let flappy_ent = entities.create();

        player_driving.insert(owner, PlayerDrivingJellyfish { flappy: flappy_ent });
        if let Some(jellyfish) = jellyfishes.get_mut(jellyfish_ent) {
            jellyfish.flappy = Some(flappy_ent);
        }

        flappy_jellyfishes.insert(
            flappy_ent,
            FlappyJellyfish {
                owner,
                jellyfish: jellyfish_ent,
            },
        );
        bodies.insert(
            flappy_ent,
            KinematicBody {
                shape: ColliderShape::Rectangle {
                    size: flappy_meta.body_size,
                },
                has_mass: true,
                gravity: GRAVITY,
                fall_through: true,
                is_controlled: true,
                ..default()
            },
        );
        atlas_sprites.insert(flappy_ent, AtlasSprite::new(flappy_meta.atlas));
        animated_sprites.insert(
            flappy_ent,
            AnimatedSprite {
                frames: flappy_meta.frames(),
                fps: flappy_meta.fps,
                repeat: true,
                ..default()
            },
        );
        let mut transf = *transforms.get(owner).unwrap();
        transf.translation += flappy_meta.spawn_offset.extend(0.0);
        transforms.insert(flappy_ent, transf);
        camera_subjects.insert(flappy_ent, default());
    })
    .system()
}

const SPEED_X: f32 = 19440.0;
const SPEED_JUMP: f32 = 210.0;
const GRAVITY: f32 = 360.0;
const MIN_SPEED: Vec2 = vec2(-SPEED_X, -240.0);
const MAX_SPEED: Vec2 = vec2(SPEED_X, 240.0);

fn control_flappy_jellyfish(
    time: Res<Time>,
    entities: Res<Entities>,
    player_driving: Comp<PlayerDrivingJellyfish>,
    player_indexes: Comp<PlayerIdx>,
    player_inputs: Res<MatchInputs>,
    mut explode_flappies: CompMut<ExplodeFlappyJellyfish>,
    mut bodies: CompMut<KinematicBody>,
    flappy_jellyfishes: Comp<FlappyJellyfish>,
) {
    let t = time.delta_seconds();

    for (_player_ent, (driving, player_idx)) in
        entities.iter_with((&player_driving, &player_indexes))
    {
        let owner_control = player_inputs.players[player_idx.0 as usize].control;

        if owner_control.grab_just_pressed {
            explode_flappies.insert(driving.flappy, ExplodeFlappyJellyfish);
            continue;
        }

        let Some(body) = bodies.get_mut(driving.flappy) else {
            continue;
        };

        if owner_control.left == owner_control.right {
            body.velocity.x = 0.0;
        } else if owner_control.left > f32::EPSILON {
            body.velocity.x = -owner_control.left * SPEED_X * t;
        } else if owner_control.right > f32::EPSILON {
            body.velocity.x = owner_control.right * SPEED_X * t;
        }

        if owner_control.jump_just_pressed {
            body.velocity.y += SPEED_JUMP;
        }
    }

    for (_, (_, body)) in entities.iter_with((&flappy_jellyfishes, &mut bodies)) {
        body.velocity = body.velocity.clamp(MIN_SPEED, MAX_SPEED);
    }
}

/// A marker component for flappy jellyfish to indicate that it should explode.
#[derive(Clone, Copy, Debug, Default, HasSchema)]
pub struct ExplodeFlappyJellyfish;

/// Explode flappy jellyfish that either have the `KillFlappyJellyfish` marker
/// or that have a dead owner.
fn explode_flappy_jellyfish(
    mut entities: ResMut<Entities>,
    explode_flappies: Comp<ExplodeFlappyJellyfish>,
    flappy_jellyfishes: Comp<FlappyJellyfish>,
    mut jellyfishes: CompMut<Jellyfish>,
    player_indexes: Comp<PlayerIdx>,
    invincibles: Comp<Invincibility>,
    bodies: Comp<KinematicBody>,
    map: Res<LoadedMap>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut transforms: CompMut<Transform>,
    mut audio_center: ResMut<AudioCenter>,
    mut trauma_events: ResMut<CameraTraumaEvents>,
    mut sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut damage_regions: CompMut<DamageRegion>,
    mut lifetimes: CompMut<Lifetime>,
    mut dehydrate_jellyfish: CompMut<DehydrateJellyfish>,
) {
    // Collect the hitboxes of all players
    let mut player_hitboxes =
        SmallVec::<[Rect; MAX_PLAYERS as usize]>::with_capacity(MAX_PLAYERS as usize);
    player_hitboxes.extend(
        entities
            .iter_with((&player_indexes, &transforms, &bodies))
            .filter(|(player_ent, _)| !invincibles.contains(*player_ent))
            .map(|(_, (_, transform, body))| body.bounding_box(*transform)),
    );

    let mut explode_flappy_entities =
        SmallVec::<[Entity; 8]>::with_capacity(flappy_jellyfishes.bitset().bit_count());

    for (flappy_ent, (_flappy_jellyfish, transform, body)) in
        entities.iter_with((&flappy_jellyfishes, &transforms, &bodies))
    {
        // If flappy has the explode marker
        if explode_flappies.contains(flappy_ent) {
            explode_flappy_entities.push(flappy_ent);
            continue;
        }
        // If the flappy collides with any player
        let flappy_hitbox = body.bounding_box(*transform);
        if player_hitboxes.iter().any(|b| b.overlaps(&flappy_hitbox)) {
            explode_flappy_entities.push(flappy_ent);
            continue;
        }
        // If the flappy is out of bounds
        if map.is_out_of_bounds(&transform.translation) {
            explode_flappy_entities.push(flappy_ent);
            continue;
        }
    }

    for flappy_ent in explode_flappy_entities {
        let Some(flappy) = flappy_jellyfishes.get(flappy_ent) else {
            continue;
        };
        let Some(jellyfish) = jellyfishes.get_mut(flappy.jellyfish) else {
            continue;
        };
        jellyfish.flappy.take();

        /*
         * Get explosion data
         */

        let Some(flappy_meta) = element_handles
            .get(flappy.jellyfish)
            .map(|element_h| assets.get(element_h.0))
            .map(|element_meta| assets.get(element_meta.data))
            .as_deref()
            .and_then(SchemaBox::try_get_flappy_meta)
            .map(|flappy_h| assets.get(flappy_h))
        else {
            return;
        };

        let Some(mut explosion_transform) = transforms.get(flappy_ent).copied() else {
            return;
        };
        explosion_transform.translation.z = -10.0;

        /*
         * Setup the explosion
         */

        entities.kill(flappy_ent);

        audio_center.play_sound(flappy_meta.explosion_sound, flappy_meta.explosion_volume);

        trauma_events.send(5.0);

        // Explosion animation entity
        {
            let explosion_ent = entities.create();
            transforms.insert(explosion_ent, explosion_transform);
            sprites.insert(
                explosion_ent,
                AtlasSprite {
                    atlas: flappy_meta.explosion_atlas,
                    ..default()
                },
            );
            animated_sprites.insert(
                explosion_ent,
                AnimatedSprite {
                    frames: (0..flappy_meta.explosion_frames).collect(),
                    fps: flappy_meta.explosion_fps,
                    repeat: false,
                    ..default()
                },
            );
            lifetimes.insert(explosion_ent, Lifetime::new(flappy_meta.explosion_lifetime));
        }

        // Damage region entity
        {
            let damage_ent = entities.create();
            transforms.insert(damage_ent, explosion_transform);
            damage_regions.insert(
                damage_ent,
                DamageRegion {
                    size: flappy_meta.damage_region_size,
                },
            );
            lifetimes.insert(
                damage_ent,
                Lifetime::new(flappy_meta.damage_region_lifetime),
            );
        }

        /*
         * Despawn the jellyfish if out of ammo
         */

        if jellyfish.ammo == 0 {
            dehydrate_jellyfish.insert(
                flappy.jellyfish,
                DehydrateJellyfish {
                    owner: flappy.owner,
                },
            );
        }
    }
}

```

`src/core/elements/grenade.rs`:

```rs
use crate::prelude::*;

/// Grenades item
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("grenade"))]
#[repr(C)]
pub struct GrenadeMeta {
    pub body_diameter: f32,
    pub fin_anim: Ustr,
    pub grab_offset: Vec2,
    pub damage_region_size: Vec2,
    pub damage_region_lifetime: f32,
    pub throw_velocity: f32,
    pub explosion_lifetime: f32,
    pub explosion_frames: u32,
    pub explosion_fps: f32,
    pub explosion_sound: Handle<AudioSource>,
    pub explosion_volume: f64,
    pub fuse_sound: Handle<AudioSource>,
    pub fuse_sound_volume: f64,
    /// The time in seconds before a grenade explodes
    pub fuse_time: f32,
    pub can_rotate: bool,
    /// The grenade atlas
    pub atlas: Handle<Atlas>,
    pub explosion_atlas: Handle<Atlas>,
    pub bounciness: f32,
    pub angular_velocity: f32,
}

pub fn game_plugin(game: &mut Game) {
    GrenadeMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_lit_grenades)
        .add_system_to_stage(CoreStage::PostUpdate, update_idle_grenades);
}

#[derive(Clone, HasSchema, Debug, Copy, Default)]
pub struct IdleGrenade;

#[derive(Clone, HasSchema, Debug, Default)]
pub struct LitGrenade {
    /// The owner of the grenade.
    pub owner: Entity,
    /// The amount of time left until the grenade explodes.
    pub fuse_time: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut idle_grenades: CompMut<IdleGrenade>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(GrenadeMeta {
            atlas,
            fin_anim,
            grab_offset,
            body_diameter,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            idle_grenades.insert(entity, IdleGrenade);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity).with_spin(*angular_velocity),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            animated_sprites.insert(entity, default());
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Circle {
                        diameter: *body_diameter,
                    },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update_idle_grenades(
    mut commands: Commands,
    entities: Res<Entities>,
    items_used: Comp<ItemUsed>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut audio_center: ResMut<AudioCenter>,
    mut idle_grenades: CompMut<IdleGrenade>,
    mut animated_sprites: CompMut<AnimatedSprite>,
) {
    for (entity, (_grenade, element_handle)) in
        entities.iter_with((&mut idle_grenades, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(GrenadeMeta {
            fuse_sound,
            fuse_sound_volume,
            fuse_time,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };
        let fuse_time = *fuse_time;

        if items_used.get(entity).is_some() {
            // Animate Grenade
            let animated_sprite = animated_sprites.get_mut(entity).unwrap();
            animated_sprite.frames = [3, 4, 5].into_iter().collect();
            animated_sprite.repeat = true;
            animated_sprite.fps = 8.0;

            // Play that hissss sound
            audio_center.play_sound(*fuse_sound, *fuse_sound_volume);

            commands.add(
                move |mut lit: CompMut<LitGrenade>,
                      mut idle: CompMut<IdleGrenade>,
                      mut items_used: CompMut<ItemUsed>| {
                    idle.remove(entity);

                    lit.insert(
                        entity,
                        LitGrenade {
                            owner: items_used.get(entity).unwrap().owner,
                            fuse_time: Timer::new(
                                Duration::from_secs_f32(fuse_time),
                                TimerMode::Once,
                            ),
                        },
                    );

                    items_used.remove(entity);
                },
            );
        }
    }
}

fn update_lit_grenades(
    time: Res<Time>,
    mut commands: Commands,
    entities: Res<Entities>,
    transforms: CompMut<Transform>,
    element_handles: Comp<ElementHandle>,
    spawners: Comp<DehydrateOutOfBounds>,
    mut audio_center: ResMut<AudioCenter>,
    mut lit_grenades: CompMut<LitGrenade>,
    player_inventories: PlayerInventories,
    assets: Res<AssetServer>,
    mut emote_regions: CompMut<EmoteRegion>,
    mut player_layers: CompMut<PlayerLayers>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut trauma_events: ResMutInit<CameraTraumaEvents>,
) {
    for (entity, (grenade, element_handle, spawner)) in
        entities.iter_with((&mut lit_grenades, &element_handles, &spawners))
    {
        let element_meta = assets.get(element_handle.0);
        let asset = assets.get(element_meta.data);
        let Ok(GrenadeMeta {
            explosion_sound,
            explosion_volume,
            damage_region_lifetime,
            damage_region_size,
            explosion_lifetime,
            explosion_atlas,
            explosion_fps,
            explosion_frames,
            fin_anim,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        grenade.fuse_time.tick(time.delta());

        if !emote_regions.contains(entity) {
            emote_regions.insert(
                entity,
                EmoteRegion {
                    active: true,
                    emote: Emote::Alarm,
                    owner: Some(grenade.owner),
                    direction_sensitive: true,
                    size: *damage_region_size * 2.0,
                    buffer: Some(Timer::new(Duration::from_millis(400), TimerMode::Once)),
                },
            );
        }
        let emote_region = emote_regions.get_mut(entity).unwrap();

        // If the item is being held
        if let Some(inventory) = player_inventories.find_item(entity) {
            let player = inventory.player;
            let layers = player_layers.get_mut(player).unwrap();
            layers.fin_anim = *fin_anim;

            emote_region.active = false;

        // If the item is not being held
        } else {
            emote_region.active = true;
        }

        // If it's time to explode
        if grenade.fuse_time.finished() {
            audio_center.play_sound(*explosion_sound, *explosion_volume);

            trauma_events.send(5.0);

            // Cause the item to respawn by un-hydrating it's spawner.
            hydrated.remove(**spawner);
            let mut explosion_transform = *transforms.get(entity).unwrap();
            explosion_transform.translation.z = -10.0; // On top of almost everything
            explosion_transform.rotation = Quat::IDENTITY;

            // Clone types for move into closure
            let damage_region_size = *damage_region_size;
            let damage_region_lifetime = *damage_region_lifetime;
            let explosion_lifetime = *explosion_lifetime;
            let explosion_atlas = *explosion_atlas;
            let explosion_fps = *explosion_fps;
            let explosion_frames = *explosion_frames;
            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut damage_regions: CompMut<DamageRegion>,
                      mut lifetimes: CompMut<Lifetime>,
                      mut sprites: CompMut<AtlasSprite>,
                      mut animated_sprites: CompMut<AnimatedSprite>| {
                    // Despawn the grenade
                    entities.kill(entity);

                    // Spawn the damage region
                    let ent = entities.create();
                    transforms.insert(ent, explosion_transform);
                    damage_regions.insert(
                        ent,
                        DamageRegion {
                            size: damage_region_size,
                        },
                    );
                    lifetimes.insert(ent, Lifetime::new(damage_region_lifetime));

                    // Spawn the explosion animation
                    let ent = entities.create();
                    transforms.insert(ent, explosion_transform);
                    sprites.insert(
                        ent,
                        AtlasSprite {
                            atlas: explosion_atlas,
                            ..default()
                        },
                    );
                    animated_sprites.insert(
                        ent,
                        AnimatedSprite {
                            frames: (0..explosion_frames).collect(),
                            fps: explosion_fps,
                            repeat: false,
                            ..default()
                        },
                    );
                    lifetimes.insert(ent, Lifetime::new(explosion_lifetime));
                },
            );
        }
    }
}

```

`src/core/elements/jellyfish.rs`:

```rs
use crate::{core::player::idle, prelude::*};

use super::flappy_jellyfish::{self, FlappyJellyfishMeta};

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("jellyfish"))]
#[repr(C)]
pub struct JellyfishMeta {
    /// The atlas for the item image.
    pub atlas: Handle<Atlas>,
    /// The size of the item.
    pub body_size: Vec2,
    /// The velocity of the item when thrown.
    pub throw_velocity: f32,
    /// The angular velocity of the item when thrown.
    pub angular_velocity: f32,
    /// The animation frame a player's fin should use when holding the item.
    pub fin_anim: Ustr,
    /// The offset relative to the center of the player that is holding the
    /// item.
    pub grab_offset: Vec2,
    /// The maximum amount of uses of the item. Resets when dropped.
    pub max_ammo: u32,
    /// The metadata of a flappy jellyfish.
    pub flappy_meta: Handle<FlappyJellyfishMeta>,
}

pub fn game_plugin(game: &mut Game) {
    JellyfishMeta::register_schema();
    FlappyJellyfishMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PreUpdate, dehydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_player_driving);
    flappy_jellyfish::session_plugin(session);
}

/// A jellyfish item.
#[derive(Clone, Debug, Default, HasSchema)]
pub struct Jellyfish {
    pub ammo: u32,
    pub flappy: Option<Entity>,
}

impl Jellyfish {
    pub fn new(ammo: u32) -> Self {
        Self { ammo, flappy: None }
    }
}

/// A marker component for players to indicate that they are driving a flappy
/// jellyfish.
#[derive(Clone, Debug, Default, HasSchema)]
pub struct PlayerDrivingJellyfish {
    pub flappy: Entity,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    mut entities: ResMutInit<Entities>,
    assets: Res<AssetServer>,
    mut jellyfishes: CompMut<Jellyfish>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut spawners: CompMut<DehydrateOutOfBounds>,
    mut items: CompMut<Item>,
    mut item_grabs: CompMut<ItemGrab>,
    mut item_throws: CompMut<ItemThrow>,
    mut transforms: CompMut<Transform>,
    mut bodies: CompMut<KinematicBody>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);
        let transform = *transforms.get(spawner_ent).unwrap();

        if let Ok(JellyfishMeta {
            atlas,
            body_size,
            throw_velocity,
            angular_velocity,
            fin_anim,
            grab_offset,
            max_ammo,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            spawners.insert(entity, DehydrateOutOfBounds(spawner_ent));
            hydrated.insert(entity, MapElementHydrated);
            jellyfishes.insert(entity, Jellyfish::new(*max_ammo));
            items.insert(entity, Item);
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity).with_spin(*angular_velocity),
            );
            element_handles.insert(entity, element_handle);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            transforms.insert(entity, transform);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity]);
        }
    }
}

/// A marker component for jellyfish items to indicate that it has been used and
/// should dehydrate. This will also remove and despawn the jellyfish from the
/// player's inventory.
#[derive(Clone, Debug, Default, HasSchema)]
pub struct DehydrateJellyfish {
    pub owner: Entity,
}

fn dehydrate(
    entities: Res<Entities>,
    dehydrate_jellyfish: Comp<DehydrateJellyfish>,
    spawners: Comp<DehydrateOutOfBounds>,
    mut player_driving: CompMut<PlayerDrivingJellyfish>,
    mut player_inventories: CompMut<Inventory>,
    mut commands: Commands,
    mut hydrated: CompMut<MapElementHydrated>,
) {
    for (jellyfish_ent, (dehydrate, spawner)) in
        entities.iter_with((&dehydrate_jellyfish, &spawners))
    {
        if player_inventories
            .get(dehydrate.owner)
            .and_then(|inv| inv.0)
            .filter(|item| *item == jellyfish_ent)
            .is_some()
        {
            player_driving.remove(dehydrate.owner);
            player_inventories.insert(dehydrate.owner, Inventory(None));
        }
        commands.add(move |mut entities: ResMut<Entities>| entities.kill(jellyfish_ent));
        hydrated.remove(**spawner);
    }
}

fn update_player_driving(
    entities: Res<Entities>,
    player_indexes: Comp<PlayerIdx>,
    player_inventories: Comp<Inventory>,
    player_states: Comp<PlayerState>,
    mut jellyfishes: CompMut<Jellyfish>,
    player_inputs: Res<MatchInputs>,
    mut player_driving: CompMut<PlayerDrivingJellyfish>,
    mut commands: Commands,
) {
    for (player_ent, (player_idx, player_inv, player_state)) in
        entities.iter_with((&player_indexes, &player_inventories, &player_states))
    {
        let Some(jellyfish_ent) = player_inv.0 else {
            continue;
        };
        let Some(jellyfish) = jellyfishes.get_mut(jellyfish_ent) else {
            continue;
        };

        let player_control = player_inputs.players[player_idx.0 as usize].control;

        if player_control.shoot_pressed {
            if player_state.current != *idle::ID || player_driving.contains(player_ent) {
                continue;
            }
            commands.add(flappy_jellyfish::spawn_or_take_control(
                player_ent,
                jellyfish_ent,
                jellyfish.flappy,
            ));
        } else {
            player_driving.remove(player_ent);
        }
    }
}

```

`src/core/elements/kick_bomb.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("kick_bomb"))]
#[repr(C)]
pub struct KickBombMeta {
    pub body_diameter: f32,
    pub fin_anim: Ustr,
    pub grab_offset: Vec2,
    pub damage_region_size: Vec2,
    pub damage_region_lifetime: f32,
    pub kick_velocity: Vec2,
    pub kickable: bool,
    pub throw_velocity: f32,
    pub explosion_lifetime: f32,
    pub explosion_frames: u32,
    pub explosion_fps: f32,
    pub explosion_sound: Handle<AudioSource>,
    pub explosion_volume: f64,
    pub lit_frames_start: u32,
    pub lit_frames_end: u32,
    pub lit_fps: f32,
    pub fuse_sound: Handle<AudioSource>,
    pub fuse_sound_volume: f64,
    /// The time in seconds before a grenade explodes
    pub fuse_time: Duration,
    pub can_rotate: bool,
    /// The grenade atlas
    pub atlas: Handle<Atlas>,
    pub explosion_atlas: Handle<Atlas>,
    pub bounciness: f32,
    pub angular_velocity: f32,
    pub arm_delay: Duration,
    pub explode_on_contact: bool,
}

pub fn game_plugin(_game: &mut Game) {
    KickBombMeta::register_schema();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_lit_kick_bombs)
        .add_system_to_stage(CoreStage::PostUpdate, update_idle_kick_bombs);
}

#[derive(Clone, HasSchema, Default, Debug, Copy)]
pub struct IdleKickBomb;

#[derive(Clone, HasSchema, Default, Debug)]
pub struct LitKickBomb {
    arm_delay: Timer,
    fuse_time: Timer,
    kicking: bool,
    kicks: u32,
}

/// Component containing the kick bombs's metadata handle.
#[derive(Deref, DerefMut, HasSchema, Default, Clone)]
#[repr(C)]
pub struct KickBombHandle(pub Handle<KickBombMeta>);

/// Commands for KickBombs
#[derive(Clone, Debug)]
pub struct KickBombCommand;

impl KickBombCommand {
    /// Command for spawning  a kick bomb.
    /// If entity is provided, components are added to this entity, otherwise command spawns the entity
    ///
    /// `kick_bomb_handle` must cast to `Handle<KickBombMeta>` or `Handle<ElementMeta>` where [`ElementMeta`]
    /// contains handle that casts to `Handle<KickBombMeta>`.
    /// [`Handle::untyped`] should be used to convert to [`UntypedHandle`].
    #[must_use]
    pub fn spawn_kick_bomb(
        entity: Option<Entity>,
        transform: Transform,
        kick_bomb_meta_handle: UntypedHandle,
        lit: bool,
        player_flip_f: Option<bool>,
    ) -> StaticSystem<(), ()> {
        (move |game_meta: Root<GameMeta>,
               assets: Res<AssetServer>,
               mut animated_sprites: CompMut<AnimatedSprite>,
               mut atlas_sprites: CompMut<AtlasSprite>,
               mut bodies: CompMut<KinematicBody>,
               mut entities: ResMutInit<Entities>,
               mut idle_bombs: CompMut<IdleKickBomb>,
               mut lit_bombs: CompMut<LitKickBomb>,
               mut items: CompMut<Item>,
               mut item_throws: CompMut<ItemThrow>,
               mut item_grabs: CompMut<ItemGrab>,
               mut kick_bomb_handles: CompMut<KickBombHandle>,
               mut transforms: CompMut<Transform>| {
            // Unwrap entity or spawn if existing entity was not provided.
            let entity = entity.unwrap_or_else(|| entities.create());

            // Try to use handle as Handle<KickBombMeta>.
            let kick_bomb_meta_handle =
                match try_cast_meta_handle::<KickBombMeta>(kick_bomb_meta_handle, &assets) {
                    Ok(handle) => handle,
                    Err(err) => {
                        error!("KickBombCommand::spawn_kick_bomb() failed: {err}");
                        return;
                    }
                };

            let KickBombMeta {
                atlas,
                fin_anim,
                grab_offset,
                body_diameter,
                can_rotate,
                bounciness,
                throw_velocity,
                angular_velocity,
                arm_delay,
                fuse_time,
                ..
            } = *assets.get(kick_bomb_meta_handle);

            kick_bomb_handles.insert(entity, KickBombHandle(kick_bomb_meta_handle));
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(throw_velocity).with_spin(angular_velocity),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim,
                    sync_animation: false,
                    grab_offset,
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(atlas));
            transforms.insert(entity, transform);
            animated_sprites.insert(entity, default());
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Circle {
                        diameter: body_diameter,
                    },
                    gravity: game_meta.core.physics.gravity,
                    has_mass: true,
                    has_friction: true,
                    can_rotate,
                    bounciness,
                    ..default()
                },
            );

            if lit {
                lit_bombs.insert(
                    entity,
                    LitKickBomb {
                        arm_delay: Timer::new(arm_delay, TimerMode::Once),
                        fuse_time: Timer::new(fuse_time, TimerMode::Once),
                        kicking: false,
                        kicks: 0,
                    },
                );

                if let Some(body) = bodies.get_mut(entity) {
                    let horizontal_flip_factor = if player_flip_f.unwrap() {
                        Vec2::new(-1.0, 1.0)
                    } else {
                        Vec2::ONE
                    };

                    body.velocity = Vec2::new(
                        horizontal_flip_factor.x * throw_velocity,
                        horizontal_flip_factor.y * throw_velocity / 2.5,
                    );
                    body.angular_velocity = angular_velocity;
                }
            } else {
                idle_bombs.insert(entity, IdleKickBomb);
            }
        })
        .system()
    }
}

fn hydrate(
    assets: Res<AssetServer>,
    mut entities: ResMutInit<Entities>,
    transforms: Comp<Transform>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
    mut commands: Commands,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();

        // Check if spawner element handle is for kick bomb
        let element_meta = assets.get(element_handle.0);
        if assets
            .get(element_meta.data)
            .try_cast_ref::<KickBombMeta>()
            .is_ok()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            hydrated.insert(entity, MapElementHydrated);
            element_handles.insert(entity, element_handle);
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            spawner_manager.create_spawner(spawner_ent, vec![entity]);

            commands.add(KickBombCommand::spawn_kick_bomb(
                Some(entity),
                transform,
                element_meta.data.untyped(),
                false,
                None,
            ));
        }
    }
}

fn update_idle_kick_bombs(
    entities: Res<Entities>,
    mut commands: Commands,
    mut items_used: CompMut<ItemUsed>,
    mut audio_center: ResMut<AudioCenter>,
    kick_bomb_handles: Comp<KickBombHandle>,
    mut idle_bombs: CompMut<IdleKickBomb>,
    assets: Res<AssetServer>,
    mut animated_sprites: CompMut<AnimatedSprite>,
) {
    for (entity, (_kick_bomb, kick_bomb_handle)) in
        entities.iter_with((&mut idle_bombs, &kick_bomb_handles))
    {
        let kick_bomb_meta = assets.get(kick_bomb_handle.0);

        let KickBombMeta {
            fuse_sound,
            fuse_sound_volume,
            arm_delay,
            fuse_time,
            lit_frames_start,
            lit_frames_end,
            lit_fps,
            ..
        } = *kick_bomb_meta;

        if items_used.remove(entity).is_some() {
            audio_center.play_sound(fuse_sound, fuse_sound_volume);
            let animated_sprite = animated_sprites.get_mut(entity).unwrap();
            animated_sprite.frames = (lit_frames_start..lit_frames_end).collect();
            animated_sprite.repeat = true;
            animated_sprite.fps = lit_fps;
            commands.add(
                move |mut idle: CompMut<IdleKickBomb>, mut lit: CompMut<LitKickBomb>| {
                    idle.remove(entity);
                    lit.insert(
                        entity,
                        LitKickBomb {
                            arm_delay: Timer::new(arm_delay, TimerMode::Once),
                            fuse_time: Timer::new(fuse_time, TimerMode::Once),
                            kicking: false,
                            kicks: 0,
                        },
                    );
                },
            );
        }
    }
}

fn update_lit_kick_bombs(
    entities: Res<Entities>,
    kick_bomb_handles: Comp<KickBombHandle>,
    assets: Res<AssetServer>,
    collision_world: CollisionWorld,
    player_indexes: Comp<PlayerIdx>,
    mut audio_center: ResMut<AudioCenter>,
    mut trauma_events: ResMutInit<CameraTraumaEvents>,
    mut lit_grenades: CompMut<LitKickBomb>,
    mut sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut hydrated: CompMut<MapElementHydrated>,
    player_inventories: PlayerInventories,
    mut transforms: CompMut<Transform>,
    mut commands: Commands,
    time: Res<Time>,
    spawners: Comp<DehydrateOutOfBounds>,
    invincibles: CompMut<Invincibility>,
) {
    for (entity, (kick_bomb, kick_bomb_handle, spawner)) in
        entities.iter_with((&mut lit_grenades, &kick_bomb_handles, &Optional(&spawners)))
    {
        let kick_bomb_meta = assets.get(kick_bomb_handle.0);
        let KickBombMeta {
            explosion_sound,
            explosion_volume,
            explode_on_contact,
            kick_velocity,
            kickable,
            damage_region_lifetime,
            damage_region_size,
            explosion_lifetime,
            explosion_atlas,
            explosion_fps,
            explosion_frames,
            ..
        } = *kick_bomb_meta;

        kick_bomb.fuse_time.tick(time.delta());
        kick_bomb.arm_delay.tick(time.delta());

        let should_explode = 'should_explode: {
            if kick_bomb.fuse_time.finished() {
                break 'should_explode true;
            }

            if explode_on_contact {
                let players = entities
                    .iter_with(&player_indexes)
                    .map(|x| x.0)
                    .collect::<Vec<_>>();

                let colliding_with_players = collision_world
                    .actor_collisions_filtered(entity, |e| {
                        players.contains(&e) && invincibles.get(e).is_none()
                    })
                    .into_iter()
                    .collect::<Vec<_>>();

                if !colliding_with_players.is_empty() && kick_bomb.arm_delay.finished() {
                    break 'should_explode true;
                }
            }

            // If the item is being held
            if player_inventories.find_item(entity).is_some() {
                kick_bomb.kicking = false;
                break 'should_explode false;
            }

            if kickable {
                // If the item is colliding with a non-invincible player
                if let Some(player_entity) = collision_world
                    .actor_collisions_filtered(entity, |e| !invincibles.contains(e))
                    .into_iter()
                    .find(|&x| player_indexes.contains(x))
                {
                    if !std::mem::replace(&mut kick_bomb.kicking, true) {
                        kick_bomb.kicks += 1;
                    }

                    // Explode on the 3rd kick.
                    // Dropping the bomb is detected as a kick so we explode when
                    // the counter reaches 4.
                    if kick_bomb.kicks > 3 {
                        break 'should_explode true;
                    }

                    let body = bodies.get_mut(entity).unwrap();
                    let translation = transforms.get_mut(entity).unwrap().translation;

                    let player_sprite = sprites.get_mut(player_entity).unwrap();
                    let player_translation = transforms.get(player_entity).unwrap().translation;

                    let player_standing_left = player_translation.x <= translation.x;

                    if body.velocity.x == 0.0 {
                        body.velocity = kick_velocity;
                        if player_sprite.flip_x {
                            body.velocity.x *= -1.0;
                        }
                    } else if player_standing_left && !player_sprite.flip_x {
                        body.velocity.x = kick_velocity.x;
                        body.velocity.y = kick_velocity.y;
                    } else if !player_standing_left && player_sprite.flip_x {
                        body.velocity.x = -kick_velocity.x;
                        body.velocity.y = kick_velocity.y;
                    } else if kick_bomb.arm_delay.finished() {
                        break 'should_explode true;
                    }
                } else {
                    kick_bomb.kicking = false;
                }
            }
            false
        };

        // If it's time to explode
        if should_explode {
            audio_center.play_sound(explosion_sound, explosion_volume);

            trauma_events.send(7.5);

            if let Some(spawner) = spawner {
                // Cause the item to respawn by un-hydrating it's spawner.
                hydrated.remove(**spawner);
            }

            let mut explosion_transform = *transforms.get(entity).unwrap();
            explosion_transform.translation.z = -10.0; // On top of almost everything
            explosion_transform.rotation = Quat::IDENTITY;

            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut damage_regions: CompMut<DamageRegion>,
                      mut lifetimes: CompMut<Lifetime>,
                      mut sprites: CompMut<AtlasSprite>,
                      mut animated_sprites: CompMut<AnimatedSprite>| {
                    // Despawn the kick bomb
                    entities.kill(entity);

                    // Spawn the damage region
                    let ent = entities.create();
                    transforms.insert(ent, explosion_transform);
                    damage_regions.insert(
                        ent,
                        DamageRegion {
                            size: damage_region_size,
                        },
                    );
                    lifetimes.insert(ent, Lifetime::new(damage_region_lifetime));

                    // Spawn the explosion animation
                    let ent = entities.create();
                    transforms.insert(ent, explosion_transform);
                    sprites.insert(
                        ent,
                        AtlasSprite {
                            atlas: explosion_atlas,
                            ..default()
                        },
                    );
                    animated_sprites.insert(
                        ent,
                        AnimatedSprite {
                            frames: (0..explosion_frames).collect(),
                            fps: explosion_fps,
                            repeat: false,
                            ..default()
                        },
                    );
                    lifetimes.insert(ent, Lifetime::new(explosion_lifetime));
                },
            );
        }
    }
}

```

`src/core/elements/machine_gun.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("machine_gun"))]
#[repr(C)]
pub struct MachineGunMeta {
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,

    pub body_size: Vec2,
    pub bounciness: f32,
    pub can_rotate: bool,
    pub throw_velocity: f32,
    pub angular_velocity: f32,
    pub atlas: Handle<Atlas>,

    pub max_ammo: u32,
    pub cooldown: Duration,
    pub empty_cooldown: Duration,
    pub bullet_meta: Handle<BulletMeta>,
    pub bullet_spread: f32,
    pub bullet_spawn_offset: Vec2,
    pub kickback: f32,

    pub shoot_sound_volume: f64,
    pub empty_shoot_sound_volume: f64,
    pub shoot_sound: Handle<AudioSource>,
    pub empty_shoot_sound: Handle<AudioSource>,
}

pub fn game_plugin(game: &mut Game) {
    MachineGunMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct MachineGun {
    pub ammo: u32,
    pub cooldown: Timer,
    pub empty_cooldown: Timer,
    pub state: MachineGunState,
}

#[derive(Default, Clone, Copy, Debug)]
pub enum MachineGunState {
    #[default]
    Idle,
    Shooting,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut machine_guns: CompMut<MachineGun>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(MachineGunMeta {
            atlas,
            fin_anim,
            grab_offset,
            max_ammo,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(machine_gun_drop(entity, *max_ammo)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            machine_guns.insert(
                entity,
                MachineGun {
                    ammo: *max_ammo,
                    cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                    empty_cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                    state: MachineGunState::Idle,
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,

    mut machine_guns: CompMut<MachineGun>,
    transforms: CompMut<Transform>,
    mut sprites: CompMut<AtlasSprite>,
    mut audio_center: ResMut<AudioCenter>,

    player_inventories: PlayerInventories,
    mut items_used: CompMut<ItemUsed>,
    items_dropped: CompMut<ItemDropped>,
    time: Res<Time>,

    mut bodies: CompMut<KinematicBody>,
) {
    for (entity, (machine_gun, element_handle)) in
        entities.iter_with((&mut machine_guns, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(MachineGunMeta {
            max_ammo,
            cooldown,
            empty_cooldown,
            bullet_spread,
            bullet_meta,
            bullet_spawn_offset,
            shoot_sound,
            empty_shoot_sound,
            shoot_sound_volume,
            empty_shoot_sound_volume,
            kickback,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        machine_gun.cooldown.tick(time.delta());
        machine_gun.empty_cooldown.tick(time.delta());

        let sprite = sprites.get_mut(entity).unwrap();
        // Reset machine gun animation
        if let MachineGunState::Idle = machine_gun.state {
            sprite.index = 0;
        }

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used {
                if machine_gun.cooldown.finished() {
                    // Reset fire cooldown
                    machine_gun.cooldown = Timer::new(*cooldown, TimerMode::Once);

                    // Run machine gun animation
                    if let MachineGunState::Shooting = machine_gun.state {
                        if sprite.index == 2 {
                            sprite.index = 3;
                        } else if sprite.index == 3 {
                            sprite.index = 2;
                        }
                    }

                    // Empty
                    if machine_gun.ammo.eq(&0) {
                        // Reset machine gun state if out of ammo
                        machine_gun.state = MachineGunState::Idle;
                        if machine_gun.empty_cooldown.finished() {
                            audio_center.play_sound(*empty_shoot_sound, *empty_shoot_sound_volume);
                            machine_gun.empty_cooldown =
                                Timer::new(*empty_cooldown, TimerMode::Once);
                        }
                        continue;
                    }

                    if matches!(machine_gun.state, MachineGunState::Idle) {
                        machine_gun.state = MachineGunState::Shooting;
                        sprite.index = 2;
                    }

                    // Subtract ammo
                    machine_gun.ammo = machine_gun
                        .ammo
                        .saturating_sub(1)
                        .clamp(0, machine_gun.ammo);
                    audio_center.play_sound(*shoot_sound, *shoot_sound_volume);

                    let player_sprite = sprites.get_mut(player).unwrap();
                    let player_flip_x = player_sprite.flip_x;
                    let player_body = bodies.get_mut(player).unwrap();

                    //Set kickback
                    player_body.velocity.x = if player_flip_x { 1.0 } else { -1.0 } * kickback;

                    let mut shoot_animation_transform = *transforms.get(entity).unwrap();
                    let bullet_spawn_offset = *bullet_spawn_offset;
                    shoot_animation_transform.translation.z += 1.0;
                    shoot_animation_transform.translation.y += bullet_spawn_offset.y;
                    shoot_animation_transform.translation.x += if player_sprite.flip_x {
                        -bullet_spawn_offset.x
                    } else {
                        bullet_spawn_offset.x
                    };

                    let bullet_meta = *bullet_meta;
                    let bullet_spread = *bullet_spread;

                    commands.add(
                        move |rng: Res<GlobalRng>,
                              mut entities: ResMutInit<Entities>,
                              mut transforms: CompMut<Transform>,
                              mut bullets: CompMut<Bullet>,
                              mut bullet_handles: CompMut<BulletHandle>| {
                            // spawn bullet
                            {
                                let ent = entities.create();
                                bullets.insert(
                                    ent,
                                    Bullet {
                                        owner: player,
                                        direction: if player_flip_x {
                                            vec2(-1.0, (rng.f32() - 0.5) * bullet_spread)
                                        } else {
                                            vec2(1.0, (rng.f32() - 0.5) * bullet_spread)
                                        },
                                    },
                                );
                                transforms.insert(ent, shoot_animation_transform);
                                bullet_handles.insert(ent, BulletHandle(bullet_meta));
                            }
                        },
                    );
                }
            } else {
                match machine_gun.state {
                    MachineGunState::Idle => (),
                    MachineGunState::Shooting => {
                        machine_gun.state = MachineGunState::Idle;
                    }
                }
            }
        } else {
            machine_gun.state = MachineGunState::Idle;
        }

        // If the item was dropped
        if items_dropped.get(entity).is_some() {
            // reload gun
            machine_gun.ammo = *max_ammo;
        }
    }
}

fn machine_gun_drop(entity: Entity, max_ammo: u32) -> StaticSystem<(), ()> {
    (move |mut machine_guns: CompMut<MachineGun>| {
        machine_guns.get_mut(entity).unwrap().ammo = max_ammo;
    })
    .system()
}

```

`src/core/elements/mine.rs`:

```rs
use crate::prelude::*;

/// The mine item
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("mine"))]
#[repr(C)]
pub struct MineMeta {
    pub atlas: Handle<Atlas>,

    pub damage_region_size: Vec2,
    pub damage_region_lifetime: f32,
    pub explosion_atlas: Handle<Atlas>,
    pub explosion_lifetime: f32,
    pub explosion_frames: u32,
    pub explosion_fps: f32,
    pub explosion_volume: f64,
    pub explosion_sound: Handle<AudioSource>,

    /// The delay after throwing the mine, before it becomes armed and will blow up on contact.
    pub arm_delay: f32,
    pub armed_frames: u32,
    pub armed_fps: f32,
    pub arm_sound_volume: f64,
    pub arm_sound: Handle<AudioSource>,

    pub throw_velocity: f32,
    pub body_size: Vec2,
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,
    pub bounciness: f32,
}

pub fn game_plugin(game: &mut Game) {
    MineMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_thrown_mines)
        .add_system_to_stage(CoreStage::PostUpdate, update_idle_mines);
}

#[derive(Clone, HasSchema, Default, Debug, Copy)]
pub struct IdleMine;

#[derive(Clone, HasSchema, Default, Debug)]
pub struct ThrownMine {
    // The mine won't explode until this timer finishes.
    arm_delay: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut idle_mines: CompMut<IdleMine>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(MineMeta {
            atlas,
            fin_anim,
            grab_offset,
            body_size,
            bounciness,
            throw_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            idle_mines.insert(entity, IdleMine);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            item_throws.insert(entity, ItemThrow::strength(*throw_velocity));
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            animated_sprites.insert(entity, default());
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update_idle_mines(
    entities: Res<Entities>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut idle_mines: CompMut<IdleMine>,
    mut items_used: CompMut<ItemUsed>,
    player_inventories: PlayerInventories,
    mut commands: Commands,
) {
    for (entity, (_mine, element_handle)) in entities.iter_with((&mut idle_mines, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(MineMeta { arm_delay, .. }) = asset.try_cast_ref() else {
            unreachable!();
        };
        let arm_delay = *arm_delay;

        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            if items_used.remove(entity).is_some() {
                commands.add(PlayerCommand::set_inventory(player, None));
                commands.add(
                    move |mut idle: CompMut<IdleMine>, mut thrown: CompMut<ThrownMine>| {
                        idle.remove(entity);
                        thrown.insert(
                            entity,
                            ThrownMine {
                                arm_delay: Timer::new(
                                    Duration::from_secs_f32(arm_delay),
                                    TimerMode::Once,
                                ),
                            },
                        );
                    },
                );
            }
        }
    }
}

fn update_thrown_mines(
    entities: Res<Entities>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut audio_center: ResMut<AudioCenter>,
    mut trauma_events: ResMutInit<CameraTraumaEvents>,
    mut thrown_mines: CompMut<ThrownMine>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut hydrated: CompMut<MapElementHydrated>,
    player_indexes: Comp<PlayerIdx>,
    mut commands: Commands,
    collision_world: CollisionWorld,
    transforms: Comp<Transform>,
    time: Res<Time>,
    spawners: Comp<DehydrateOutOfBounds>,
    invincibles: CompMut<Invincibility>,
) {
    let players = entities
        .iter_with(&player_indexes)
        .map(|x| x.0)
        .collect::<Vec<_>>();
    for (entity, (thrown_mine, element_handle, sprite, spawner)) in entities.iter_with((
        &mut thrown_mines,
        &element_handles,
        &mut animated_sprites,
        &spawners,
    )) {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(MineMeta {
            explosion_fps,
            explosion_frames,
            explosion_sound,
            explosion_atlas,
            arm_sound,
            armed_frames,
            armed_fps,
            damage_region_size,
            damage_region_lifetime,
            explosion_volume,
            arm_sound_volume,
            explosion_lifetime,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        thrown_mine.arm_delay.tick(time.delta());

        if thrown_mine.arm_delay.just_finished() {
            audio_center.play_sound(*arm_sound, *arm_sound_volume);

            sprite.frames = (0..*armed_frames).collect();
            sprite.fps = *armed_fps;
            sprite.repeat = true;
        }

        let colliding_with_players = collision_world
            .actor_collisions_filtered(entity, |e| {
                players.contains(&e) && invincibles.get(e).is_none()
            })
            .into_iter()
            .collect::<Vec<_>>();

        if !colliding_with_players.is_empty() && thrown_mine.arm_delay.finished() {
            let mine_transform = *transforms.get(entity).unwrap();

            trauma_events.send(6.0);

            for player in &colliding_with_players {
                commands.add(PlayerCommand::kill(
                    *player,
                    Some(mine_transform.translation.xy()),
                ));
            }

            audio_center.play_sound(*explosion_sound, *explosion_volume);

            hydrated.remove(**spawner);

            // Clone types for move into closure
            let damage_region_size = *damage_region_size;
            let damage_region_lifetime = *damage_region_lifetime;
            let explosion_lifetime = *explosion_lifetime;
            let explosion_atlas = *explosion_atlas;
            let explosion_fps = *explosion_fps;
            let explosion_frames = *explosion_frames;
            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut damage_regions: CompMut<DamageRegion>,
                      mut lifetimes: CompMut<Lifetime>,
                      mut sprites: CompMut<AtlasSprite>,
                      mut animated_sprites: CompMut<AnimatedSprite>| {
                    let mut explosion_transform = mine_transform;
                    explosion_transform.translation.z = -10.0; // On top of almost everything
                    explosion_transform.rotation = Quat::IDENTITY;

                    // Despawn the grenade
                    entities.kill(entity);

                    // Spawn the damage region
                    let damage_ent = entities.create();
                    transforms.insert(damage_ent, explosion_transform);
                    damage_regions.insert(
                        damage_ent,
                        DamageRegion {
                            size: damage_region_size,
                        },
                    );
                    lifetimes.insert(damage_ent, Lifetime::new(damage_region_lifetime));

                    // Spawn the explosion animation
                    let ent = entities.create();
                    transforms.insert(ent, explosion_transform);
                    sprites.insert(
                        ent,
                        AtlasSprite {
                            atlas: explosion_atlas,
                            ..default()
                        },
                    );
                    animated_sprites.insert(
                        ent,
                        AnimatedSprite {
                            frames: (0..explosion_frames).collect(),
                            fps: explosion_fps,
                            repeat: false,
                            ..default()
                        },
                    );
                    lifetimes.insert(ent, Lifetime::new(explosion_lifetime));
                },
            );
        }
    }
}

```

`src/core/elements/musket.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("musket"))]
#[repr(C)]
pub struct MusketMeta {
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,

    pub body_size: Vec2,
    pub bounciness: f32,
    pub can_rotate: bool,
    pub throw_velocity: f32,
    pub angular_velocity: f32,
    pub atlas: Handle<Atlas>,

    pub max_ammo: u32,
    pub cooldown: Duration,
    pub bullet_meta: Handle<BulletMeta>,
    pub bullet_spawn_offset: Vec2,
    pub kickback: f32,

    pub shoot_fps: f32,
    pub shoot_lifetime: f32,
    pub shoot_frames: u32,
    pub shoot_sound_volume: f64,
    pub empty_shoot_sound_volume: f64,
    pub shoot_atlas: Handle<Atlas>,
    pub shoot_sound: Handle<AudioSource>,
    pub empty_shoot_sound: Handle<AudioSource>,
}

pub fn game_plugin(game: &mut Game) {
    MusketMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Musket {
    pub ammo: u32,
    pub cooldown: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut muskets: CompMut<Musket>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(MusketMeta {
            atlas,
            fin_anim,
            grab_offset,
            max_ammo,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(musket_drop(entity, *max_ammo)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            muskets.insert(
                entity,
                Musket {
                    ammo: *max_ammo,
                    cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,

    mut muskets: CompMut<Musket>,
    transforms: CompMut<Transform>,
    mut sprites: CompMut<AtlasSprite>,
    mut audio_center: ResMut<AudioCenter>,

    player_inventories: PlayerInventories,
    mut items_used: CompMut<ItemUsed>,
    items_dropped: CompMut<ItemDropped>,
    time: Res<Time>,

    mut bodies: CompMut<KinematicBody>,
) {
    for (entity, (musket, element_handle)) in entities.iter_with((&mut muskets, &element_handles)) {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(MusketMeta {
            max_ammo,
            shoot_fps,
            shoot_atlas,
            shoot_frames,
            shoot_lifetime,
            cooldown,
            bullet_meta,
            bullet_spawn_offset,
            shoot_sound,
            empty_shoot_sound,
            shoot_sound_volume,
            empty_shoot_sound_volume,
            kickback,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        musket.cooldown.tick(time.delta());

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used && musket.cooldown.finished() {
                // Reset fire cooldown
                musket.cooldown = Timer::new(*cooldown, TimerMode::Once);
                // Empty
                if musket.ammo.eq(&0) {
                    audio_center.play_sound(*empty_shoot_sound, *empty_shoot_sound_volume);
                    continue;
                }

                // Subtract ammo
                musket.ammo = musket.ammo.saturating_sub(1).clamp(0, musket.ammo);
                audio_center.play_sound(*shoot_sound, *shoot_sound_volume);

                let player_sprite = sprites.get_mut(player).unwrap();
                let player_flip_x = player_sprite.flip_x;
                let player_body = bodies.get_mut(player).unwrap();

                //Set kickback
                player_body.velocity.x = if player_flip_x { 1.0 } else { -1.0 } * kickback;

                let mut shoot_animation_transform = *transforms.get(entity).unwrap();
                let bullet_spawn_offset = *bullet_spawn_offset;
                shoot_animation_transform.translation.z += 1.0;
                shoot_animation_transform.translation.y += bullet_spawn_offset.y;
                shoot_animation_transform.translation.x += if player_sprite.flip_x {
                    -bullet_spawn_offset.x
                } else {
                    bullet_spawn_offset.x
                };

                let shoot_fps = *shoot_fps;
                let shoot_frames = *shoot_frames;
                let shoot_lifetime = *shoot_lifetime;
                let shoot_atlas = *shoot_atlas;

                let bullet_meta = *bullet_meta;

                commands.add(
                    move |mut entities: ResMutInit<Entities>,
                          mut lifetimes: CompMut<Lifetime>,
                          mut sprites: CompMut<AtlasSprite>,
                          mut transforms: CompMut<Transform>,
                          mut bullets: CompMut<Bullet>,
                          mut bullet_handles: CompMut<BulletHandle>,
                          mut animated_sprites: CompMut<AnimatedSprite>| {
                        // spawn fire animation
                        {
                            let ent = entities.create();
                            transforms.insert(ent, shoot_animation_transform);
                            sprites.insert(
                                ent,
                                AtlasSprite {
                                    flip_x: player_flip_x,
                                    atlas: shoot_atlas,
                                    ..default()
                                },
                            );

                            animated_sprites.insert(
                                ent,
                                AnimatedSprite {
                                    frames: (0..shoot_frames).collect(),
                                    fps: shoot_fps,
                                    repeat: false,
                                    ..default()
                                },
                            );
                            lifetimes.insert(ent, Lifetime::new(shoot_lifetime));
                        }

                        // spawn bullet
                        {
                            let ent = entities.create();
                            bullets.insert(
                                ent,
                                Bullet {
                                    owner: player,
                                    direction: if player_flip_x {
                                        vec2(-1.0, 0.0)
                                    } else {
                                        vec2(1.0, 0.0)
                                    },
                                },
                            );
                            transforms.insert(ent, shoot_animation_transform);
                            bullet_handles.insert(ent, BulletHandle(bullet_meta));
                        }
                    },
                );
            }
        }

        // If the item was dropped
        if items_dropped.get(entity).is_some() {
            // reload gun
            musket.ammo = *max_ammo;
        }
    }
}

fn musket_drop(entity: Entity, max_ammo: u32) -> StaticSystem<(), ()> {
    (move |mut muskets: CompMut<Musket>| {
        // Reload musket
        muskets.get_mut(entity).unwrap().ammo = max_ammo;
    })
    .system()
}

```

`src/core/elements/periscope.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("periscope"))]
#[repr(C)]
pub struct PeriscopeMeta {
    pub grab_offset: Vec2,
    pub fin_anim: Ustr,

    pub body_size: Vec2,
    pub bounciness: f32,
    pub can_rotate: bool,
    pub throw_velocity: f32,
    pub angular_velocity: f32,
    pub atlas: Handle<Atlas>,

    pub max_ammo: u32,
    pub cooldown: Duration,
    pub bullet_meta: Handle<BulletMeta>,
    pub bullet_spawn_offset: Vec2,
    pub kickback: f32,

    pub shoot_fps: f32,
    pub shoot_lifetime: f32,
    pub shoot_frames: u32,
    pub shoot_sound_volume: f64,
    pub empty_shoot_sound_volume: f64,
    pub shoot_atlas: Handle<Atlas>,
    pub shoot_sound: Handle<AudioSource>,
    pub empty_shoot_sound: Handle<AudioSource>,
}

pub fn game_plugin(game: &mut Game) {
    PeriscopeMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Periscope {
    pub ammo: u32,
    pub cooldown: Timer,
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut periscopes: CompMut<Periscope>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(PeriscopeMeta {
            atlas,
            fin_anim,
            grab_offset,
            max_ammo,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(periscope_drop(entity, *max_ammo)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            periscopes.insert(
                entity,
                Periscope {
                    ammo: *max_ammo,
                    cooldown: Timer::new(Duration::from_millis(0), TimerMode::Once),
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut commands: Commands,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,

    mut periscopes: CompMut<Periscope>,
    transforms: CompMut<Transform>,
    mut sprites: CompMut<AtlasSprite>,
    mut audio_center: ResMut<AudioCenter>,

    player_inventories: PlayerInventories,
    mut items_used: CompMut<ItemUsed>,
    items_dropped: CompMut<ItemDropped>,
    time: Res<Time>,

    mut bodies: CompMut<KinematicBody>,
) {
    for (entity, (periscope, element_handle)) in
        entities.iter_with((&mut periscopes, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(PeriscopeMeta {
            max_ammo,
            shoot_fps,
            shoot_atlas,
            shoot_frames,
            shoot_lifetime,
            cooldown,
            bullet_meta,
            bullet_spawn_offset,
            shoot_sound,
            empty_shoot_sound,
            shoot_sound_volume,
            empty_shoot_sound_volume,
            kickback,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        periscope.cooldown.tick(time.delta());

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used && periscope.cooldown.finished() {
                // Reset fire cooldown
                periscope.cooldown = Timer::new(*cooldown, TimerMode::Once);
                // Empty
                if periscope.ammo.eq(&0) {
                    audio_center.play_sound(*empty_shoot_sound, *empty_shoot_sound_volume);
                    continue;
                }

                // Subtract ammo
                periscope.ammo = periscope.ammo.saturating_sub(1).clamp(0, periscope.ammo);
                audio_center.play_sound(*shoot_sound, *shoot_sound_volume);

                let player_sprite = sprites.get_mut(player).unwrap();
                let player_flip_x = player_sprite.flip_x;
                let player_body = bodies.get_mut(player).unwrap();

                //Set kickback
                player_body.velocity.x = if player_flip_x { 1.0 } else { -1.0 } * kickback;

                let mut shoot_animation_transform = *transforms.get(entity).unwrap();
                let bullet_spawn_offset = *bullet_spawn_offset;
                shoot_animation_transform.translation.z += 1.0;
                shoot_animation_transform.translation.y += bullet_spawn_offset.y;
                shoot_animation_transform.translation.x += if player_sprite.flip_x {
                    -bullet_spawn_offset.x
                } else {
                    bullet_spawn_offset.x
                };

                let shoot_fps = *shoot_fps;
                let shoot_frames = *shoot_frames;
                let shoot_lifetime = *shoot_lifetime;
                let shoot_atlas = *shoot_atlas;

                let bullet_meta = *bullet_meta;

                commands.add(
                    move |mut entities: ResMutInit<Entities>,
                          mut lifetimes: CompMut<Lifetime>,
                          mut sprites: CompMut<AtlasSprite>,
                          mut transforms: CompMut<Transform>,
                          mut bullets: CompMut<Bullet>,
                          mut bullet_handles: CompMut<BulletHandle>,
                          mut animated_sprites: CompMut<AnimatedSprite>| {
                        // spawn fire animation
                        {
                            let ent = entities.create();
                            transforms.insert(ent, shoot_animation_transform);
                            sprites.insert(
                                ent,
                                AtlasSprite {
                                    flip_x: player_flip_x,
                                    atlas: shoot_atlas,
                                    ..default()
                                },
                            );

                            animated_sprites.insert(
                                ent,
                                AnimatedSprite {
                                    frames: (0..shoot_frames).collect(),
                                    fps: shoot_fps,
                                    repeat: false,
                                    ..default()
                                },
                            );
                            lifetimes.insert(ent, Lifetime::new(shoot_lifetime));
                        }

                        // spawn bullet
                        {
                            let ent = entities.create();
                            bullets.insert(
                                ent,
                                Bullet {
                                    owner: player,
                                    direction: if player_flip_x {
                                        vec2(-1.0, 0.0)
                                    } else {
                                        vec2(1.0, 0.0)
                                    },
                                },
                            );
                            transforms.insert(ent, shoot_animation_transform);
                            bullet_handles.insert(ent, BulletHandle(bullet_meta));
                        }
                    },
                );
            }
        }

        // If the item was dropped
        if items_dropped.get(entity).is_some() {
            // reload gun
            periscope.ammo = *max_ammo;
        }
    }
}

fn periscope_drop(entity: Entity, max_ammo: u32) -> StaticSystem<(), ()> {
    (move |mut periscopes: CompMut<Periscope>| {
        periscopes.get_mut(entity).unwrap().ammo = max_ammo;
    })
    .system()
}

```

`src/core/elements/player_spawner.rs`:

```rs
use crate::prelude::*;

/// Player spawner element
#[derive(HasSchema, Default, Debug, Clone, Copy)]
#[type_data(metadata_asset("player_spawner"))]
#[repr(C)]
pub struct PlayerSpawnerMeta;

pub fn game_plugin(game: &mut Game) {
    PlayerSpawnerMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::First, hydrate)
        .add_system_to_stage(CoreStage::First, update);
}

/// Marker component for player spawners.
#[derive(Clone, Debug, HasSchema, Default)]
#[type_data(metadata_asset("player_spawner"))]
#[repr(C)]
pub struct PlayerSpawner;

/// Resource that stores the next spawner to use when spawning a player.
#[derive(Clone, Debug, HasSchema, Default)]
pub struct CurrentSpawner(pub usize);

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut player_spawners: CompMut<PlayerSpawner>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(PlayerSpawner) = assets.get(element_meta.data).try_cast_ref() {
            hydrated.insert(entity, MapElementHydrated);
            player_spawners.insert(entity, PlayerSpawner);

            spawner_manager.create_grouped_spawner(entity, vec![], &player_spawners, &entities);
        }
    }
}

fn update(
    mut entities: ResMutInit<Entities>,
    mut current_spawner: ResMutInit<CurrentSpawner>,
    player_spawners: Comp<PlayerSpawner>,
    mut player_indexes: CompMut<PlayerIdx>,
    mut transforms: CompMut<Transform>,
    player_inputs: Res<MatchInputs>,
    mut spawner_manager: SpawnerManager,
) {
    let alive_players = entities
        .iter_with(&player_indexes)
        .map(|(_ent, pidx)| pidx.0)
        .collect::<Vec<_>>();
    let spawn_points = entities
        .iter_with((&player_spawners, &transforms))
        .map(|(_ent, (_spawner, transform))| transform.translation)
        .collect::<Vec<_>>();

    // For every player
    for i in 0..MAX_PLAYERS {
        let player = &player_inputs.players[i as usize];

        // If the player is active, but not alive
        if player.active && !alive_players.contains(&i) {
            // Increment the spawner index
            current_spawner.0 += 1;
            current_spawner.0 %= spawn_points.len().max(1);

            let Some(mut spawn_point) = spawn_points.get(current_spawner.0).copied() else {
                return;
            };

            // Make sure each player spawns at a different z level ( give enough room for 10 players
            // to fit between map layers )
            spawn_point.z += i as f32 * MAP_LAYERS_GAP_DEPTH / 10.0;

            let player_ent = entities.create();
            player_indexes.insert(player_ent, PlayerIdx(i));
            transforms.insert(player_ent, Transform::from_translation(spawn_point));

            spawner_manager.insert_spawned_entity_into_grouped_spawner(
                player_ent,
                &player_spawners,
                &entities,
            );
        }
    }
}

```

`src/core/elements/slippery.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("slippery"))]
#[repr(C)]
pub struct SlipperyMeta {
    pub atlas: Handle<Atlas>,
    pub body_size: Vec2,
    pub player_slide: f32,
    pub body_friction: f32,
}

pub fn game_plugin(game: &mut Game) {
    SlipperyMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PreUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Slippery {
    pub player_slide: f32,
    pub body_friction: f32,
}

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut slippery: CompMut<Slippery>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SlipperyMeta {
            atlas,
            body_size,
            player_slide,
            body_friction,
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(entity, MapElementHydrated);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: false,
                    ..default()
                },
            );
            slippery.insert(
                entity,
                Slippery {
                    player_slide: *player_slide,
                    body_friction: *body_friction,
                },
            );
        }
    }
}

pub fn update(
    entities: Res<Entities>,
    slippery: CompMut<Slippery>,
    collision_world: CollisionWorld,
    mut bodies: CompMut<KinematicBody>,
) {
    for (slippery_ent, slippery) in entities.iter_with(&slippery) {
        for (p_ent, body) in entities.iter_with(&mut bodies) {
            if collision_world
                .actor_collisions(p_ent)
                .contains(&slippery_ent)
            {
                body.frame_friction_override = Some(slippery.body_friction);
            }
        }
    }
}

```

`src/core/elements/slippery_seaweed.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("slippery_seaweed"))]
#[repr(C)]
pub struct SlipperySeaweedMeta {
    pub atlas: Handle<Atlas>,
    pub start_frame: u32,
    pub end_frame: u32,
    pub fps: f32,
    pub body_size: Vec2,
}

pub fn game_plugin(game: &mut Game) {
    SlipperySeaweedMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(PlayerStateStage, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct SlipperySeaweed;

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut slippery_seaweeds: CompMut<SlipperySeaweed>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut bodies: CompMut<KinematicBody>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SlipperySeaweedMeta {
            atlas,
            body_size,
            start_frame,
            end_frame,
            fps,
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(entity, MapElementHydrated);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            animated_sprites.insert(
                entity,
                AnimatedSprite {
                    frames: (*start_frame..*end_frame).collect(),
                    fps: *fps,
                    repeat: true,
                    ..default()
                },
            );
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: false,
                    ..default()
                },
            );
            slippery_seaweeds.insert(entity, slippery_seaweed::default());
        }
    }
}

pub fn update(
    entities: Res<Entities>,
    slippery_seaweeds: CompMut<SlipperySeaweed>,
    collision_world: CollisionWorld,
    mut player_states: CompMut<PlayerState>,
) {
    for (seaweed_ent, _) in entities.iter_with(&slippery_seaweeds) {
        for (p_ent, state) in entities.iter_with(&mut player_states) {
            if collision_world
                .actor_collisions(p_ent)
                .contains(&seaweed_ent)
            {
                state.current = *incapacitated::ID;
                continue;
            }
        }
    }
}

```

`src/core/elements/snail.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("snail"))]
#[repr(C)]
pub struct SnailMeta {
    pub atlas: Handle<Atlas>,
    pub fps: f32,
    pub body_diameter: f32,
    pub bounciness: f32,
    pub gravity: f32,
    pub hit_speed: f32,
    /// The animation frames for when the snail is crawling
    pub crawl_frames: SVec<u32>,
    /// The `crawl_frames` indexes in which to move the snail
    pub move_frame_indexes: SVec<u32>,
    /// The animation frames for when the snail is fleeing into its shell.
    ///
    /// **Note:** This is reversed for the snail coming out of its shell.
    pub hide_frames: SVec<u32>,
    pub hide_time: f32,
}

pub fn game_plugin(game: &mut Game) {
    SnailMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_snails);
}

#[derive(Clone, HasSchema, Debug, Copy, Default)]
pub enum Snail {
    Hiding(f32),
    #[default]
    UnHiding,
    Moving {
        attempted_x: Option<f32>,
        frame_timer: f32,
        anim_index: u32,
    },
}

fn hydrate(
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut dehrydate_bounds: CompMut<DehydrateOutOfBounds>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut snails: CompMut<Snail>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut animation_banks: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SnailMeta {
            atlas,
            fps,
            body_diameter,
            gravity,
            bounciness,
            hide_time,
            hide_frames,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            snails.insert(entity, Snail::Hiding(*hide_time));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            dehrydate_bounds.insert(entity, DehydrateOutOfBounds(spawner_ent));

            bodies.insert(
                entity,
                KinematicBody {
                    gravity: *gravity,
                    has_mass: true,
                    has_friction: true,
                    bounciness: *bounciness,
                    shape: ColliderShape::Circle {
                        diameter: *body_diameter,
                    },
                    ..default()
                },
            );
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            animated_sprites.insert(entity, default());

            let mut animations = SMap::default();

            animations.insert("disabled".into(), default());
            animations.insert(
                "hide".into(),
                AnimatedSprite {
                    frames: hide_frames.iter().cloned().collect(),
                    fps: *fps,
                    repeat: false,
                    ..default()
                },
            );
            animations.insert(
                "unhide".into(),
                AnimatedSprite {
                    frames: hide_frames.iter().rev().cloned().collect(),
                    fps: *fps,
                    repeat: false,
                    ..default()
                },
            );
            animation_banks.insert(
                entity,
                AnimationBankSprite {
                    current: "hide".into(),
                    animations,
                    last_animation: "hide".into(),
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update_snails(
    entities: Res<Entities>,
    mut snails: CompMut<Snail>,
    mut sprites: CompMut<AtlasSprite>,
    mut animated_sprites: CompMut<AnimatedSprite>,
    mut animation_banks: CompMut<AnimationBankSprite>,
    time: Res<Time>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    damage_regions: CompMut<DamageRegion>,
) {
    for (entity, (snail, element_handle, body, sprite)) in
        entities.iter_with((&mut snails, &element_handles, &mut bodies, &mut sprites))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(SnailMeta {
            fps,
            bounciness,
            hide_time,
            hit_speed,
            crawl_frames,
            move_frame_indexes,
            hide_frames,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };
        let Some(animated_sprite) = animated_sprites.get_mut(entity) else {
            continue;
        };
        let Some(animation_bank) = animation_banks.get_mut(entity) else {
            continue;
        };

        let mut hit = false;

        for (_, (damage_region, region_transform)) in
            entities.iter_with((&damage_regions, &transforms))
        {
            let transform = transforms.get(entity).unwrap();
            let region_pos = region_transform.translation;
            if damage_region
                .collider_rect(region_pos)
                .overlaps(&body.bounding_box(*transform))
            {
                hit = true;
                body.velocity = -Vec2::from_angle(
                    Vec2::X.angle_between(region_pos.xy() - transform.translation.xy()),
                ) * *hit_speed;
            }
        }

        match &snail {
            Snail::UnHiding | Snail::Moving { .. } => {
                if hit {
                    *snail = Snail::Hiding(0.0);
                    body.bounciness = *bounciness;
                    animation_bank.current = "hide".into();
                }
            }
            _ => {}
        }

        match snail {
            Snail::Hiding(time) => {
                if hit {
                    *time = 0.0;
                    sprite.flip_x = !sprite.flip_x;
                } else {
                    *time += 1.0 / crate::FPS;
                    if *time >= *hide_time {
                        *snail = Snail::UnHiding;
                        animation_bank.current = "unhide".into();
                    }
                }
            }
            Snail::UnHiding => {
                if animated_sprite.index == hide_frames.len() as u32 - 1 {
                    *snail = Snail::Moving {
                        attempted_x: None,
                        frame_timer: 0.0,
                        anim_index: 0,
                    };
                    sprite.index = 0;
                    animation_bank.current = "disabled".into();
                    body.bounciness = 0.0;
                }
            }
            Snail::Moving {
                attempted_x,
                frame_timer,
                anim_index,
            } => {
                let translation = &mut transforms.get_mut(entity).unwrap().translation;

                if let Some(attempted_x) = attempted_x {
                    if attempted_x != &translation.x {
                        *snail = Snail::Hiding(*hide_time);
                        body.bounciness = *bounciness;
                        animation_bank.current = "hide".into();
                        sprite.flip_x = !sprite.flip_x;
                        continue;
                    }
                }

                *frame_timer += time.delta_seconds();

                if *frame_timer > 1.0 / fps.max(f32::MIN_POSITIVE) {
                    *frame_timer = 0.0;
                    *anim_index = (*anim_index + 1) % crawl_frames.len() as u32;
                    sprite.index = crawl_frames[*anim_index as usize];

                    if move_frame_indexes.iter().any(|i| i == anim_index) {
                        let next_x = translation.x - 1.0 * if sprite.flip_x { -1.0 } else { 1.0 };
                        *attempted_x = Some(next_x);
                        translation.x = next_x;
                    }
                } else {
                    *attempted_x = None
                }
            }
        }
    }
}

```

`src/core/elements/spike.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("spike"))]
#[repr(C)]
pub struct SpikeMeta {
    pub atlas: Handle<Atlas>,
    pub body_size: Vec2,
    pub start_frame: u32,
    pub end_frame: u32,
    pub fps: f32,
}

pub fn game_plugin(game: &mut Game) {
    SpikeMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Spike;

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut spikes: CompMut<Spike>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut animated_sprites: CompMut<AnimatedSprite>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SpikeMeta {
            atlas,
            body_size,
            start_frame,
            end_frame,
            fps,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(entity, MapElementHydrated);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            animated_sprites.insert(
                entity,
                AnimatedSprite {
                    frames: (*start_frame..*end_frame).collect(),
                    fps: *fps,
                    repeat: true,
                    ..default()
                },
            );
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: false,
                    ..default()
                },
            );
            spikes.insert(entity, spike::default());
        }
    }
}

fn update(
    entities: Res<Entities>,
    mut spikes: CompMut<Spike>,
    collision_world: CollisionWorld,
    player_indexes: Comp<PlayerIdx>,
    invincibles: CompMut<Invincibility>,
    mut commands: Commands,
    transforms: Comp<Transform>,
) {
    for (entity, (_, pos)) in entities.iter_with((&mut spikes, &transforms)) {
        collision_world
            .actor_collisions_filtered(entity, |e| {
                player_indexes.contains(e) && invincibles.get(e).is_none()
            })
            .into_iter()
            .for_each(|player| {
                commands.add(PlayerCommand::kill(player, Some(pos.translation.xy())));
            });
    }
}

```

`src/core/elements/sproinger.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("sproinger"))]
#[repr(C)]
/// This is a sproinger
pub struct SproingerMeta {
    pub atlas: Handle<Atlas>,
    pub sound: Handle<AudioSource>,
    pub sound_volume: f64,
    pub body_size: Vec2,
    pub spring_velocity: f32,
}

pub fn game_plugin(game: &mut Game) {
    SproingerMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Clone, Debug, HasSchema, Default)]
pub struct Sproinger {
    pub frame: u32,
    pub sproinging: bool,
}

fn hydrate(
    entities: Res<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut sproingers: CompMut<Sproinger>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut nav_graph: ResMutInit<NavGraph>,
    transforms: Comp<Transform>,
    map: Res<LoadedMap>,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let mut new_sproingers = Vec::new();
    for entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SproingerMeta {
            atlas, body_size, ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            new_sproingers.push(entity);
            hydrated.insert(entity, MapElementHydrated);
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: false,
                    ..default()
                },
            );
            sproingers.insert(entity, sproinger::default());
        }
    }

    // Update the navigation graph with the new sproingers
    if !new_sproingers.is_empty() {
        let mut new_graph = nav_graph.as_ref().clone();

        for ent in new_sproingers {
            let pos = transforms.get(ent).unwrap().translation;
            let node = NavNode((pos.truncate() / map.tile_size).as_ivec2());
            let sproing_to = node.above().above().above().above().above().above();

            new_graph.add_edge(
                node,
                sproing_to,
                NavGraphEdge {
                    inputs: [PlayerControl::default()].into(),
                    distance: node.distance(&sproing_to),
                },
            );
        }
        **nav_graph = Arc::new(new_graph);
    }
}

fn update(
    entities: Res<Entities>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut sproingers: CompMut<Sproinger>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    dynamic_bodies: Comp<DynamicBody>,
    mut collision_world: CollisionWorld,
    mut audio_center: ResMut<AudioCenter>,
) {
    for (entity, (sproinger, sprite)) in entities.iter_with((&mut sproingers, &mut atlas_sprites)) {
        let element_handle = element_handles.get(entity).unwrap();
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(SproingerMeta {
            sound,
            sound_volume,
            spring_velocity,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        if sproinger.sproinging {
            match sproinger.frame {
                1 => sprite.index = 2,
                4 => sprite.index = 3,
                8 => sprite.index = 4,
                12 => sprite.index = 5,
                x if x >= 20 => {
                    sprite.index = 0;
                    sproinger.sproinging = false;
                    sproinger.frame = 0;
                }
                _ => (),
            }
            sproinger.frame += 1;
        }

        for collider_ent in collision_world.actor_collisions(entity) {
            if let Some(body) = bodies.get_mut(collider_ent) {
                let dynamic_body = dynamic_bodies.get(collider_ent);
                let is_dynamic = if let Some(dynamic_body) = dynamic_body {
                    dynamic_body.is_dynamic
                } else {
                    false
                };

                if !is_dynamic {
                    if body.velocity.y < *spring_velocity {
                        audio_center.play_sound(*sound, *sound_volume);
                        body.velocity.y = *spring_velocity;
                        sproinger.sproinging = true;
                    }
                } else {
                    let spring_velocity = *spring_velocity;

                    let _ = collision_world.mutate_rigidbody(
                        collider_ent,
                        |rb: &mut rapier::RigidBody| {
                            let mut vel = *rb.linvel();
                            if vel.y < spring_velocity {
                                vel.y = spring_velocity;
                                rb.set_linvel(vel, true);
                                audio_center.play_sound(*sound, *sound_volume);
                            }
                        },
                    );
                }
            }
        }
    }
}

```

`src/core/elements/stomp_boots.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("stomp_boots"))]
#[repr(C)]
pub struct StompBootsMeta {
    pub map_icon: Handle<Atlas>,
    pub player_decoration: Handle<Atlas>,

    pub body_size: Vec2,
    pub grab_offset: Vec2,
}

pub fn game_plugin(game: &mut Game) {
    StompBootsMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update)
        .add_system_to_stage(CoreStage::PostUpdate, update_wearer);
}

/// Marker component added to things ( presumably players, but not necessarily! ) that are wearing
/// stomp boots
#[derive(Debug, Clone, Copy, Default, HasSchema)]
pub struct WearingStompBoots {
    stomp_boots: Entity,
}

#[derive(Copy, Clone, Debug, HasSchema, Default)]
pub struct StompBoots;

#[derive(Copy, Clone, Debug, HasSchema, Default)]
pub struct WornStompBoots;

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut stomp_boots: CompMut<StompBoots>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(StompBootsMeta {
            grab_offset,
            body_size,
            map_icon,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(entity, ItemThrow::strength(0.0));
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: "grab_2".into(),
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            stomp_boots.insert(entity, StompBoots);
            atlas_sprites.insert(entity, AtlasSprite::new(*map_icon));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update(
    entities: Res<Entities>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    mut stomp_boots: CompMut<StompBoots>,
    items_used: Comp<ItemUsed>,
    player_inventories: PlayerInventories,
    mut inventoris: CompMut<Inventory>,
    mut commands: Commands,
    spawners: Comp<DehydrateOutOfBounds>,
) {
    for (entity, (_stomp_boots, element_handle, spawner)) in
        entities.iter_with((&mut stomp_boots, &element_handles, &spawners))
    {
        let element_meta = assets.get(element_handle.0);

        let asset = assets.get(element_meta.data);
        let Ok(StompBootsMeta {
            player_decoration, ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            // If the item is being used
            let is_item_used = items_used.get(entity).is_some();
            let player_decoration = *player_decoration;

            if is_item_used {
                inventoris.insert(player, Inventory(None));
                let spawner = spawner.clone();

                commands.add(
                    move |mut entities: ResMutInit<Entities>,
                          mut sprites: CompMut<AtlasSprite>,
                          mut attachments: CompMut<Attachment>,
                          mut transforms: CompMut<Transform>,
                          mut worn_stomp_boots: CompMut<WornStompBoots>,
                          mut respawn_points: CompMut<DehydrateOutOfBounds>,
                          mut wearing_stomp_boots: CompMut<WearingStompBoots>| {
                        entities.kill(entity);

                        let attachment_ent = entities.create();
                        let attachment = Attachment {
                            entity: player,
                            sync_color: false,
                            offset: Vec3::ZERO,
                            sync_animation: true,
                            sync_flip: true,
                            offset_inherits_rotation: true,
                        };

                        worn_stomp_boots.insert(attachment_ent, WornStompBoots);
                        attachments.insert(attachment_ent, attachment);
                        sprites.insert(attachment_ent, AtlasSprite::new(player_decoration));
                        transforms.insert(attachment_ent, Transform::default());
                        respawn_points.insert(attachment_ent, spawner.clone());
                        wearing_stomp_boots.insert(
                            player,
                            WearingStompBoots {
                                stomp_boots: attachment_ent,
                            },
                        );
                    },
                );
            }
        }
    }
}

fn update_wearer(
    entities: Res<Entities>,
    mut commands: Commands,
    wearing_stomp_boots: CompMut<WearingStompBoots>,
    mut worn_stomp_boots: CompMut<WornStompBoots>,
    player_indexes: Comp<PlayerIdx>,
    collision_world: CollisionWorld,
    kinematic_bodies: Comp<KinematicBody>,
    killed_players: Comp<PlayerKilled>,
    mut hydrated: CompMut<MapElementHydrated>,
    spawners: Comp<DehydrateOutOfBounds>,
    transforms: Comp<Transform>,
) {
    for (entity, WearingStompBoots { stomp_boots }) in entities.iter_with(&wearing_stomp_boots) {
        if killed_players.get(entity).is_some() {
            // Respawn the boots worn by the player who was just killed
            if let Some(spawner) = spawners.get(*stomp_boots) {
                if worn_stomp_boots.get(*stomp_boots).is_some() {
                    worn_stomp_boots.remove(*stomp_boots);
                    hydrated.remove(**spawner);
                }
            }
            // We don't need to proceed because the player is dead
            continue;
        }

        let kinematic_body = kinematic_bodies.get(entity).unwrap();
        if kinematic_body.velocity.y > 0.
            || kinematic_body.is_on_ground
            || kinematic_body.is_on_platform
        {
            continue;
        }
        collision_world
            .actor_collisions_filtered(entity, |e| player_indexes.contains(e))
            .into_iter()
            .for_each(|player| {
                let wearer_transform = transforms
                    .get(entity)
                    .expect("stomp boots wearer should have Transform component");
                let player_transform = transforms.get(player).unwrap();
                let player_kinematic_body = kinematic_bodies.get(player).unwrap();
                if kinematic_body.bounding_box(*wearer_transform).bottom()
                    > player_kinematic_body
                        .bounding_box(*player_transform)
                        .center()
                        .y
                {
                    commands.add(PlayerCommand::kill(
                        player,
                        Some(player_transform.translation.xy()),
                    ))
                }
            });
    }
}

```

`src/core/elements/sword.rs`:

```rs
use crate::prelude::*;

/// This is a sword
#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("sword"))]
#[repr(C)]
pub struct SwordMeta {
    pub atlas: Handle<Atlas>,
    pub sound: Handle<AudioSource>,
    pub sound_volume: f64,
    pub body_size: Vec2,
    pub fin_anim: Ustr,
    pub grab_offset: Vec2,
    pub killing_speed: f32,
    pub angular_velocity: f32,
    pub can_rotate: bool,
    pub bounciness: f32,
    pub throw_velocity: f32,
    pub cooldown_frames: u32,
}

pub fn game_plugin(game: &mut Game) {
    SwordMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update);
}

#[derive(Copy, Clone, Debug, HasSchema, Default)]
pub struct Sword {
    pub state: SwordState,
    pub dropped_time: f32,
}

#[derive(Default, Clone, Copy, Debug)]
pub enum SwordState {
    #[default]
    Idle,
    Swinging {
        frame: u32,
    },
    Cooldown {
        frame: u32,
    },
}

fn hydrate(
    game_meta: Root<GameMeta>,
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut swords: CompMut<Sword>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut items: CompMut<Item>,
    mut item_throws: CompMut<ItemThrow>,
    mut item_grabs: CompMut<ItemGrab>,
    mut respawn_points: CompMut<DehydrateOutOfBounds>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(SwordMeta {
            atlas,
            fin_anim,
            grab_offset,
            body_size,
            can_rotate,
            bounciness,
            throw_velocity,
            angular_velocity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            items.insert(entity, Item);
            item_throws.insert(
                entity,
                ItemThrow::strength(*throw_velocity)
                    .with_spin(*angular_velocity)
                    .with_system(sword_drop(entity)),
            );
            item_grabs.insert(
                entity,
                ItemGrab {
                    fin_anim: *fin_anim,
                    sync_animation: false,
                    grab_offset: *grab_offset,
                },
            );
            swords.insert(entity, Sword::default());
            atlas_sprites.insert(entity, AtlasSprite::new(*atlas));
            respawn_points.insert(entity, DehydrateOutOfBounds(spawner_ent));
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            bodies.insert(
                entity,
                KinematicBody {
                    shape: ColliderShape::Rectangle { size: *body_size },
                    has_mass: true,
                    has_friction: true,
                    can_rotate: *can_rotate,
                    bounciness: *bounciness,
                    gravity: game_meta.core.physics.gravity,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

#[derive(Clone, HasSchema, Default, Deref, DerefMut)]
struct PendingDamageRegions(Vec<(Vec2, Vec2, Entity)>);

fn update(
    entities: Res<Entities>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
    collision_world: CollisionWorld,
    mut audio_center: ResMut<AudioCenter>,
    mut swords: CompMut<Sword>,
    mut sprites: CompMut<AtlasSprite>,
    bodies: CompMut<KinematicBody>,
    mut items_used: CompMut<ItemUsed>,
    player_indexes: Comp<PlayerIdx>,
    player_inventories: PlayerInventories,
    mut commands: Commands,
    mut player_layers: CompMut<PlayerLayers>,
    transforms: CompMut<Transform>,
    invincibles: CompMut<Invincibility>,
) {
    for (entity, (sword, element_handle)) in entities.iter_with((&mut swords, &element_handles)) {
        let element_meta = assets.get(element_handle.0);

        // Helper to spawn a damage region for the sword attack
        let mut spawn_damage_region = |pos: Vec3, size: Vec2, owner: Entity| {
            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut transforms: CompMut<Transform>,
                      mut emote_regions: CompMut<EmoteRegion>,
                      mut damage_regions: CompMut<DamageRegion>,
                      mut damage_region_owners: CompMut<DamageRegionOwner>,
                      mut lifetimes: CompMut<Lifetime>| {
                    let entity = entities.create();

                    emote_regions.insert(
                        entity,
                        EmoteRegion {
                            active: true,
                            size: size * 3.5,
                            owner: Some(owner),
                            emote: Emote::Alarm,
                            direction_sensitive: true,
                            buffer: Some(Timer::new(Duration::from_millis(200), TimerMode::Once)),
                        },
                    );

                    lifetimes.insert(entity, Lifetime::new(2.0 / 60.0));
                    damage_regions.insert(entity, DamageRegion { size });
                    transforms.insert(entity, Transform::from_translation(pos));
                    damage_region_owners.insert(entity, DamageRegionOwner(owner));
                },
            );
        };

        let asset = assets.get(element_meta.data);
        let Ok(SwordMeta {
            cooldown_frames,
            sound,
            sound_volume,
            killing_speed,
            ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        // If the item is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(entity) {
            let sprite = sprites.get_mut(entity).unwrap();
            let player_translation = transforms.get(player).unwrap().translation;
            let flip = sprite.flip_x;
            let flip_factor = if flip { -1.0 } else { 1.0 };

            let player_layer = player_layers.get_mut(player).unwrap();

            // Reset the sword animation if we're not swinging it
            if !matches!(sword.state, SwordState::Swinging { .. }) {
                sprite.index = 4;
            }

            let mut next_state = None;
            match &mut sword.state {
                SwordState::Idle => (),
                SwordState::Swinging { frame } => {
                    // If we're at the end of the swinging animation
                    if sprite.index >= 11 {
                        player_layer.fin_offset = Vec2::ZERO;
                        // Go to cooldown frames
                        next_state = Some(SwordState::Cooldown { frame: 0 });

                    // If we're still swinging
                    } else {
                        // Set the current attack frame to the animation index
                        sprite.index = 8 + *frame / 3;
                    }

                    // TODO: Move all these constants to the builtin item config
                    match *frame / 3 {
                        0 => {
                            spawn_damage_region(
                                Vec3::new(
                                    player_translation.x + 20.0 * flip_factor,
                                    player_translation.y + 20.0,
                                    player_translation.z,
                                ),
                                Vec2::new(30.0, 70.0),
                                player,
                            );

                            player_layer.fin_offset = vec2(-1.0, 2.0);
                        }
                        1 => {
                            spawn_damage_region(
                                Vec3::new(
                                    player_translation.x + 25.0 * flip_factor,
                                    player_translation.y + 20.0,
                                    player_translation.z,
                                ),
                                Vec2::new(40.0, 50.0),
                                player,
                            );
                            player_layer.fin_offset = vec2(0.0, -1.0);
                        }
                        2 => {
                            spawn_damage_region(
                                Vec3::new(
                                    player_translation.x + 20.0 * flip_factor,
                                    player_translation.y,
                                    player_translation.z,
                                ),
                                Vec2::new(40.0, 40.0),
                                player,
                            );
                            player_layer.fin_offset = vec2(0.0, -2.0);
                        }
                        _ => (),
                    }

                    *frame += 1;
                }
                SwordState::Cooldown { frame } => {
                    if *frame >= *cooldown_frames {
                        next_state = Some(SwordState::Idle);
                    } else {
                        *frame += 1;
                    }
                }
            }

            if let Some(next) = next_state {
                sword.state = next;
            }

            // If the item is being used
            let item_used = items_used.remove(entity).is_some();
            if item_used && matches!(sword.state, SwordState::Idle) {
                sprite.index = 8;
                sword.state = SwordState::Swinging { frame: 0 };
                audio_center.play_sound(*sound, *sound_volume);
            }
        } else {
            let body = bodies.get(entity).unwrap();
            sword.dropped_time += 1.0 / crate::FPS;

            if body.velocity.length() >= *killing_speed {
                let sword_transform = transforms.get(entity).unwrap();

                collision_world
                    .actor_collisions_filtered(entity, |e| {
                        player_indexes.contains(e)
                            && {
                                let player_body = bodies.get(e).unwrap();
                                (player_body.velocity - body.velocity).length() >= *killing_speed
                            }
                            && invincibles.get(e).is_none()
                    })
                    .into_iter()
                    .for_each(|player| {
                        commands.add(PlayerCommand::kill(
                            player,
                            Some(sword_transform.translation.xy()),
                        ))
                    });
            }
        }
    }
}

fn sword_drop(entity: Entity) -> StaticSystem<(), ()> {
    (move |mut swords: CompMut<Sword>, mut sprites: CompMut<AtlasSprite>| {
        // Put sword in rest position
        sprites.get_mut(entity).unwrap().index = 0;
        *swords.get_mut(entity).unwrap() = default();
    })
    .system()
}

```

`src/core/elements/urchin.rs`:

```rs
use crate::prelude::*;

#[derive(HasSchema, Default, Debug, Clone)]
#[type_data(metadata_asset("urchin"))]
#[repr(C)]
pub struct UrchinMeta {
    pub image: Handle<Image>,
    pub body_diameter: f32,
    pub hit_speed: f32,
    pub gravity: f32,
    pub bounciness: f32,
    pub spin: f32,
}

pub fn game_plugin(game: &mut Game) {
    UrchinMeta::register_schema();
    game.init_shared_resource::<AssetServer>();
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::PreUpdate, hydrate)
        .add_system_to_stage(CoreStage::PostUpdate, update_urchins);
}

#[derive(Default, Clone, HasSchema, Debug, Copy)]
pub struct Urchin;

fn hydrate(
    mut entities: ResMutInit<Entities>,
    mut hydrated: CompMut<MapElementHydrated>,
    mut dehrydate_bounds: CompMut<DehydrateOutOfBounds>,
    mut element_handles: CompMut<ElementHandle>,
    assets: Res<AssetServer>,
    mut urchins: CompMut<Urchin>,
    mut sprites: CompMut<Sprite>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
    mut spawner_manager: SpawnerManager,
) {
    let mut not_hydrated_bitset = hydrated.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(element_handles.bitset());

    let spawner_entities = entities
        .iter_with_bitset(&not_hydrated_bitset)
        .collect::<Vec<_>>();

    for spawner_ent in spawner_entities {
        let transform = *transforms.get(spawner_ent).unwrap();
        let element_handle = *element_handles.get(spawner_ent).unwrap();
        let element_meta = assets.get(element_handle.0);

        if let Ok(UrchinMeta {
            image,
            body_diameter,
            bounciness,
            gravity,
            ..
        }) = assets.get(element_meta.data).try_cast_ref()
        {
            hydrated.insert(spawner_ent, MapElementHydrated);

            let entity = entities.create();
            urchins.insert(entity, Urchin);
            sprites.insert(
                entity,
                Sprite {
                    image: *image,
                    ..Default::default()
                },
            );
            transforms.insert(entity, transform);
            element_handles.insert(entity, element_handle);
            hydrated.insert(entity, MapElementHydrated);
            dehrydate_bounds.insert(entity, DehydrateOutOfBounds(spawner_ent));

            bodies.insert(
                entity,
                KinematicBody {
                    gravity: *gravity,
                    has_mass: true,
                    has_friction: true,
                    can_rotate: true,
                    shape: ColliderShape::Circle {
                        diameter: *body_diameter,
                    },
                    bounciness: *bounciness,
                    ..default()
                },
            );
            spawner_manager.create_spawner(spawner_ent, vec![entity])
        }
    }
}

fn update_urchins(
    entities: Res<Entities>,
    mut urchins: CompMut<Urchin>,
    mut bodies: CompMut<KinematicBody>,
    transforms: Comp<Transform>,
    damage_regions: Comp<DamageRegion>,
    element_handles: Comp<ElementHandle>,
    assets: Res<AssetServer>,
) {
    for (entity, (_urchin, transform, element_handle)) in
        entities.iter_with((&mut urchins, &transforms, &element_handles))
    {
        let element_meta = assets.get(element_handle.0);
        let asset = assets.get(element_meta.data);
        let Ok(UrchinMeta {
            hit_speed, spin, ..
        }) = asset.try_cast_ref()
        else {
            unreachable!();
        };

        let pos = transform.translation;
        let body = bodies.get_mut(entity).unwrap();

        for (_, (damage_region, region_transform)) in
            entities.iter_with((&damage_regions, &transforms))
        {
            let region_pos = region_transform.translation;
            if damage_region
                .collider_rect(region_pos)
                .overlaps(&body.bounding_box(*transform))
            {
                body.velocity =
                    -Vec2::from_angle(Vec2::X.angle_between(region_pos.xy() - pos.xy()))
                        * *hit_speed;
                body.angular_velocity = spin * body.velocity.x.signum();
            }
        }
    }
}

```

`src/core/globals.rs`:

```rs
//! Global constants.

/// The alpha range for the player sprite during spawn invincibility.
pub const INVINCIBILITY_ALPHA_RANGE: std::ops::RangeInclusive<f32> = 0.25..=1.0;

```

`src/core/input.rs`:

```rs
//! Player and editor input types.

use std::array;

use bones_framework::input::Controls;

use crate::{prelude::*, MAX_PLAYERS};

pub fn install(session: &mut SessionBuilder) {
    session.init_resource::<MatchInputs>();
}

/// The inputs for each player in this simulation frame.
#[derive(Clone, Debug, HasSchema)]
pub struct MatchInputs {
    pub players: [PlayerInput; MAX_PLAYERS as usize],
}
impl MatchInputs {
    pub fn get_control_source(&self, player_idx: usize) -> Option<ControlSource> {
        self.players.get(player_idx).unwrap().control_source
    }
}
impl Default for MatchInputs {
    fn default() -> Self {
        Self {
            players: array::from_fn(|_| default()),
        }
    }
}
impl Controls<'_, PlayerControl> for MatchInputs {
    fn get_control(&self, player_idx: usize) -> &PlayerControl {
        &self.players.get(player_idx).unwrap().control
    }

    fn get_control_mut(&mut self, player_idx: usize) -> &mut PlayerControl {
        &mut self.players.get_mut(player_idx).unwrap().control
    }
}

/// Player input, not just controls, but also other status that comes from the player, such as the
/// selected player and whether the player is actually active.
#[derive(Default, Clone, Debug, HasSchema)]
pub struct PlayerInput {
    /// Whether or not the player is present.
    pub active: bool,
    /// The selected player skin.
    pub selected_player: Handle<PlayerMeta>,
    /// The selected player hat.
    pub selected_hat: Option<Handle<HatMeta>>,
    /// The player control input
    pub control: PlayerControl,
    /// The editor inputs the player is making, if any.
    pub editor_input: Option<EditorInput>,
    /// If this is [`None`] it means the player is an AI, or remote player in networked game.
    pub control_source: Option<ControlSource>,

    /// Whether or not this is an AI player.
    pub is_ai: bool,
}

#[derive(Clone, Debug, Serialize, Deserialize)]
pub struct LocatedTileLayer {
    pub layer_index: u32,
    pub located_tiles: Vec<(UVec2, u32, TileCollisionKind)>,
}

#[derive(Clone, HasSchema, Default, Debug)]
pub struct ElementLayer {
    pub layer_index: u32,
    pub located_elements: Vec<(Vec2, Handle<ElementMeta>)>,
}

/// The editor inputs that a player may make.
#[derive(Clone, Debug)]
pub enum EditorInput {
    /// Spawn an element onto the map.
    SpawnElement {
        /// The handle to the element that is being spawned.
        handle: Handle<ElementMeta>,
        /// The translation to spawn the element with.
        translation: Vec2,
        /// The map layer index to spawn the element on.
        layer: u8,
    },
    MoveEntity {
        /// The entity to move.
        entity: Entity,
        /// The amount to move the entity.
        pos: Vec2,
    },
    DeleteEntity {
        /// The entity to delete.
        entity: Entity,
    },
    /// Create a new layer
    CreateLayer {
        /// The name of the layer.
        id: String,
    },
    /// Rename a map layer.
    RenameLayer {
        /// The index of the layer to rename.
        layer: u8,
        /// The new name of the layer.
        name: String,
    },
    DeleteLayer {
        layer: u8,
    },
    /// Move a layer up or down.
    MoveLayer {
        /// The layer to move
        layer: u8,
        /// Whether or not to move the layer down. If false, move the layer up.
        down: bool,
    },
    /// Update the tilemap of a layer.
    SetTilemap {
        /// The layer index of the layer to update.
        layer: u8,
        /// The handle to the tilemap to use or [`None`] to clear the tilemap.
        handle: Option<Handle<Atlas>>,
    },
    SetTile {
        /// The layer index of the layer to update
        layer: u8,
        /// The position of the tile to set
        pos: UVec2,
        /// The index in the tilemap to set the tile, or [`None`] to delete the tile.
        tilemap_tile_idx: Option<u32>,
        /// The tile collision kind
        collision: TileCollisionKind,
    },
    RenameMap {
        name: String,
    },
    RandomizeTiles {
        tile_layers: Vec<LocatedTileLayer>,
        element_layers: Vec<ElementLayer>,
        tile_size: Vec2,
    },
}

```

`src/core/item.rs`:

```rs
//! Common item code.
//!
//! An item is anything in the game that can be picked up by the player.

use crate::prelude::*;

pub fn install(session: &mut SessionBuilder) {
    Item::register_schema();
    ItemThrow::register_schema();
    ItemGrab::register_schema();
    DropItem::register_schema();
    ItemUsed::register_schema();

    session
        .stages
        .add_system_to_stage(CoreStage::Last, grab_items)
        .add_system_to_stage(CoreStage::Last, drop_items)
        .add_system_to_stage(CoreStage::Last, throw_dropped_items);
}

/// Marker component for items.
///
/// Items are any entity that players can pick up and use.
#[derive(Clone, Copy, HasSchema, Default)]
#[repr(C)]
pub struct Item;

/// An intventory component, indicating another entity that the player is carrying.
#[derive(Clone, HasSchema, Default, Deref, DerefMut)]
pub struct Inventory(pub Option<Entity>);

/// Marker component that may be added to an item to cause it to be droped by a player.
#[derive(Clone, HasSchema, Default)]
#[repr(C)]
pub struct DropItem;

/// A helper struct containing a player-inventory pair that indicates the given player is holding
/// the other entity in their inventory.
#[derive(Debug, Clone, Copy)]
pub struct Inv {
    pub player: Entity,
    pub inventory: Entity,
}

/// System param that can be used to conveniently get the inventory of each player.
#[derive(Deref, DerefMut, Debug)]
pub struct PlayerInventories<'a>(&'a [Option<Inv>; MAX_PLAYERS as usize]);

impl PlayerInventories<'_> {
    pub fn find_item(&self, item: Entity) -> Option<Inv> {
        self.0
            .iter()
            .find_map(|i| i.filter(|inv| inv.inventory == item))
    }
}

impl<'a> SystemParam for PlayerInventories<'a> {
    type State = [Option<Inv>; MAX_PLAYERS as usize];
    type Param<'s> = PlayerInventories<'s>;

    fn get_state(world: &World) -> Self::State {
        world.run_system(
            |entities: Res<Entities>,
             player_indexes: Comp<PlayerIdx>,
             inventories: Comp<Inventory>| {
                let mut player_inventories = [None; MAX_PLAYERS as usize];
                for (player, (idx, inventory)) in
                    entities.iter_with((&player_indexes, &inventories))
                {
                    if let Some(inventory) = inventory.0 {
                        player_inventories[idx.0 as usize] = Some(Inv { player, inventory });
                    }
                }

                player_inventories
            },
            (),
        )
    }

    fn borrow<'s>(_world: &'s World, state: &'s mut Self::State) -> Self::Param<'s> {
        PlayerInventories(state)
    }
}

/// Marker component added to items when they are dropped.
#[derive(Clone, Copy, HasSchema, Default)]
pub struct ItemDropped {
    /// The player that dropped the item
    pub player: Entity,
}

/// Marker component added to items when they are grabbed.
#[derive(Clone, Copy, HasSchema, Default)]
pub struct ItemGrabbed {
    /// The player that grabbed the item
    pub player: Entity,
}

/// Marker component added to items when they are used.
#[derive(Clone, Copy, HasSchema, Default)]
#[repr(C)]
pub struct ItemUsed {
    /// The player that used the item
    pub owner: Entity,
}

/// Component defining the grab settings when an item is grabbed.
///
/// Mainly handled by the [`grab_items`] system which consumes the
/// [`ItemGrabbed`] components for entities which have this component.
/// [`Item`] is required for the system to take affect.
#[derive(Clone, HasSchema, Default)]
#[repr(C)]
pub struct ItemGrab {
    pub fin_anim: Ustr,
    pub grab_offset: Vec2,
    pub sync_animation: bool,
}

/// Drop items that have the `DropItem` component added to them.
pub fn drop_items(
    mut commands: Commands,
    mut drop_items: CompMut<DropItem>,
    player_inventories: PlayerInventories,
) {
    for Inv { player, inventory } in player_inventories.iter().flatten() {
        if drop_items.remove(*inventory).is_some() {
            commands.add(PlayerCommand::set_inventory(*player, None));
        }
    }
}

pub fn grab_items(
    entities: Res<Entities>,
    item_grab: Comp<ItemGrab>,
    items: Comp<Item>,
    mut items_grabbed: CompMut<ItemGrabbed>,
    mut bodies: CompMut<KinematicBody>,
    mut attachments: CompMut<PlayerBodyAttachment>,
    mut player_layers: CompMut<PlayerLayers>,
) {
    for (entity, (_item, item_grab)) in entities.iter_with((&items, &item_grab)) {
        let ItemGrab {
            fin_anim,
            grab_offset,
            sync_animation,
        } = *item_grab;

        if let Some(ItemGrabbed { player }) = items_grabbed.remove(entity) {
            player_layers.get_mut(player).unwrap().fin_anim = fin_anim;

            if let Some(body) = bodies.get_mut(entity) {
                body.is_deactivated = true
            }

            attachments.insert(
                entity,
                PlayerBodyAttachment {
                    player,
                    sync_animation,
                    sync_color: false,
                    head: false,
                    offset: grab_offset.extend(PlayerLayers::FIN_Z_OFFSET / 2.0),
                },
            );
        }
    }
}

/// Component defining the strength of the throw types when an item is dropped.
///
/// Mainly handled by the [`throw_dropped_items`] system which consumes the
/// [`ItemDropped`] components for entities which have this component.
/// [`Item`] is required for the system to take affect.
#[derive(Clone, HasSchema)]
#[repr(C)]
pub struct ItemThrow {
    normal: Vec2,
    fast: Vec2,
    up: Vec2,
    drop: Vec2,
    lob: Vec2,
    roll: Vec2,
    spin: f32,
    #[schema(opaque)]
    /// An optional system value that gets run once on throw.
    system: Option<Arc<AtomicCell<StaticSystem<(), ()>>>>,
}

impl Default for ItemThrow {
    fn default() -> Self {
        Self::base()
    }
}

impl ItemThrow {
    /// The relative velocities of each different throw type.
    ///
    /// This is multiiplied by the desired throw strength in [`Self::strength`] to get a deafault
    /// throw pattern from a single velocity.
    pub fn base() -> Self {
        Self {
            normal: Vec2::new(1.5, 1.2).normalize() * 0.6,
            fast: Vec2::new(1.5, 1.2).normalize(),
            up: Vec2::new(0.0, 1.1),
            drop: Vec2::new(0.0, 0.0),
            lob: Vec2::new(1.0, 2.5).normalize() * 1.1,
            roll: Vec2::new(0.4, -0.1),
            spin: 0.0,
            system: None,
        }
    }

    /// [`Self::base`] with the throw values multiplied by `strength`.
    pub fn strength(strength: f32) -> Self {
        let base = Self::base();
        Self {
            normal: base.normal * strength,
            fast: base.fast * strength,
            up: base.up * strength,
            drop: base.drop * strength,
            lob: base.lob * strength,
            roll: base.roll * strength,
            spin: 0.0,
            system: None,
        }
    }

    pub fn with_spin(self, spin: f32) -> Self {
        Self { spin, ..self }
    }

    pub fn with_system<Args, I>(self, system: I) -> Self
    where
        I: IntoSystem<Args, (), (), Sys = StaticSystem<(), ()>>,
    {
        Self {
            system: Some(Arc::new(AtomicCell::new(system.system()))),
            ..self
        }
    }

    /// Chooses one of the throw values based on a [`PlayerControl`]
    pub fn velocity_from_control(&self, player_control: &PlayerControl) -> Vec2 {
        let PlayerControl { move_direction, .. } = player_control;
        let y = move_direction.y;
        let moving = move_direction.x.abs() > 0.0;
        if y < 0.0 {
            if moving {
                return self.roll;
            } else {
                return self.drop;
            }
        }
        if moving {
            if y > 0.0 {
                self.lob
            } else {
                self.fast
            }
        } else if y > 0.0 {
            self.up
        } else {
            self.normal
        }
    }
}

pub fn throw_dropped_items(
    entities: Res<Entities>,
    item_throws: Comp<ItemThrow>,
    items: Comp<Item>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    mut items_dropped: CompMut<ItemDropped>,
    mut bodies: CompMut<KinematicBody>,
    mut attachments: CompMut<PlayerBodyAttachment>,
    mut sprites: CompMut<AtlasSprite>,
    mut transforms: CompMut<Transform>,
    item_spawners: Comp<DehydrateOutOfBounds>,
    map_layers: Comp<SpawnedMapLayerMeta>,
    player_spawnwers: Comp<PlayerSpawner>,
    mut commands: Commands,
) {
    for (entity, (_items, item_throw, transform)) in
        entities.iter_with((&items, &item_throws, &mut transforms))
    {
        if let Some(ItemDropped { player }) = items_dropped.get(entity).cloned() {
            if let Some(system) = item_throw.system.clone() {
                commands.add(move |world: &World| (system.borrow_mut().run)(world, ()));
            }
            items_dropped.remove(entity);
            attachments.remove(entity);

            let player_sprite = sprites.get_mut(player).unwrap();

            let horizontal_flip_factor = if player_sprite.flip_x {
                Vec2::new(-1.0, 1.0)
            } else {
                Vec2::ONE
            };

            let throw_velocity = item_throw.velocity_from_control(
                &player_inputs.players[player_indexes.get(player).unwrap().0 as usize].control,
            );

            // Use the item's spawner depth as the drop depth
            if let Some(item_spawner) = item_spawners.get(entity) {
                let map_layer = map_layers.get(item_spawner.0).unwrap();
                transform.translation.z = z_depth_for_map_layer(map_layer.layer_idx);
            } else {
                // Grab a random player spawner and use that for the z depth
                let (_, (_, layer)) = entities
                    .iter_with((&player_spawnwers, &map_layers))
                    .next()
                    .unwrap();
                transform.translation.z = z_depth_for_map_layer(layer.layer_idx);
            }

            if let Some(body) = bodies.get_mut(entity) {
                body.velocity = throw_velocity * horizontal_flip_factor;
                body.angular_velocity =
                    item_throw.spin * horizontal_flip_factor.x * throw_velocity.y.signum();

                body.is_deactivated = false;
            }
        }
    }
}

```

`src/core/lifetime.rs`:

```rs
//! Entity lifetimes for deleting an entity after a period of time.

use std::time::Duration;

use crate::{core::FPS, prelude::*};

pub fn install(session: &mut SessionBuilder) {
    Lifetime::register_schema();

    session
        .add_system_to_stage(CoreStage::PostUpdate, lifetime_system)
        .add_system_to_stage(CoreStage::PostUpdate, invincibility);
}

/// The lifetime state of an entity
///
/// > **Note:** The age represents how long the entity has had the [`Lifetime`] component on it, not
/// > necessarily how long since the entity was spawned, if the [`Lifetime`] component was added
/// > later, after it was spawned.
/// >
/// > Also, the age and lifetime are public, subject to other system's modification.
#[derive(Copy, Clone, Default, HasSchema)]
#[repr(C)]
pub struct Lifetime {
    /// How long the entity should be allowed to live in seconds.
    pub lifetime: f32,
    /// How long the entity has lived in seconds.
    pub age: f32,
}

impl Lifetime {
    pub fn new(lifetime: f32) -> Self {
        Self {
            lifetime,
            ..default()
        }
    }
}

/// Despawns entities that have an expired lifetime
fn lifetime_system(mut entities: ResMutInit<Entities>, mut lifetimes: CompMut<Lifetime>) {
    let mut to_kill = Vec::new();
    for (entity, lifetime) in &mut entities.iter_with(&mut lifetimes) {
        lifetime.age += 1.0 / FPS;
        if lifetime.age > lifetime.lifetime {
            to_kill.push(entity);
        }
    }
    for entity in to_kill {
        entities.kill(entity);
    }
}

/// A timer that can be used to make an entity invincible for a certain amount of time
///
/// This is a general purpose invinvibility timer, but will serve as our spawn protection timer.
#[derive(Clone, Default, HasSchema, Debug)]
pub struct Invincibility(Timer);

impl Invincibility {
    pub fn new(duration: Duration) -> Self {
        Self(Timer::new(duration, TimerMode::Once))
    }
}

fn invincibility(
    time: Res<Time>,
    mut commands: Commands,
    entities: ResMutInit<Entities>,
    mut invincibles: CompMut<Invincibility>,
) {
    for (player_ent, invincible) in &mut entities.iter_with(&mut invincibles) {
        invincible.0.tick(time.delta());

        if invincible.0.finished() {
            commands.add(move |mut invincibles: CompMut<Invincibility>| {
                invincibles.remove(player_ent);
            });
        }
    }
}

```

`src/core/map.rs`:

```rs
//! Map and navigation mesh implementation.

use std::{
    cmp::{max, min},
    collections::VecDeque,
};

use super::physics::collisions::{CollisionWorld, TileCollisionKind, TileDynamicCollider};
use crate::prelude::*;

pub fn install(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::First, spawn_map)
        .add_system_to_stage(CoreStage::First, handle_out_of_bounds_players);
}

/// Resource containing the map metadata for this game session.
#[derive(Clone, HasSchema, Deref, DerefMut, Default)]
pub struct LoadedMap(pub Arc<MapMeta>);

/// Resource indicating whether the map has been spawned.
#[derive(Clone, HasSchema, Default, Deref, DerefMut)]
pub struct MapSpawned(pub bool);

/// The Z depth of the deepest map layer.
pub const MAP_LAYERS_MIN_DEPTH: f32 = -900.0;
/// The Z depth in between each map layer.
pub const MAP_LAYERS_GAP_DEPTH: f32 = 10.0;

/// Helper for getting the z-depth of the map layer with the given index.
pub fn z_depth_for_map_layer(layer_idx: u32) -> f32 {
    // We start map layers at -900 and for ever layer we place a gap of 10 units in between
    MAP_LAYERS_MIN_DEPTH + layer_idx as f32 * MAP_LAYERS_GAP_DEPTH
}

/// Resource containing essential the map metadata for the map once spawned. This allows the
/// complete map metadata to be re-constructed from the world after the map has been spawned and
/// potentially modified.
#[derive(HasSchema, Clone)]
pub struct SpawnedMapMeta {
    pub name: Ustr,
    pub background: Arc<BackgroundMeta>,
    pub background_color: Color,
    pub grid_size: UVec2,
    pub tile_size: Vec2,
    pub layer_names: Arc<[Ustr]>,
}

impl Default for SpawnedMapMeta {
    fn default() -> Self {
        Self {
            name: "".into(),
            background: default(),
            background_color: default(),
            grid_size: default(),
            tile_size: default(),
            layer_names: Arc::new([]),
        }
    }
}

/// Component containing the map layer that an entity is associated to.
///
/// This is used when exporting the world to `MapMeta` to decide which layer to put an element or
/// tile layer in.
#[derive(HasSchema, Clone, Copy, Default)]
pub struct SpawnedMapLayerMeta {
    /// The layer index of the layer that the element belongs to in the map.
    pub layer_idx: u32,
}

/// The map navigation graph resource.
#[derive(Clone, Debug, Deref, DerefMut, HasSchema, Default)]
pub struct NavGraph(pub Arc<NavGraphInner>);

/// The inner graph type of [`NavGraph`].
pub type NavGraphInner = petgraph::graphmap::DiGraphMap<NavNode, NavGraphEdge>;

/// The type of nodes in the map navigation graph.
///
/// This is merely a wrapper around [`UVec2`] to add an [`Ord`] implementation.
#[derive(PartialEq, Eq, Clone, Copy, Debug, Hash, Deref, DerefMut)]
pub struct NavNode(pub IVec2);

impl NavNode {
    /// Calculates the Pythagorean distance between two nodes.
    pub fn distance(&self, other: &Self) -> f32 {
        let dx = (max(self.x, other.x) - min(self.x, other.x)) as f32;
        let dy = (max(self.y, other.y) - min(self.y, other.y)) as f32;
        (dx * dx) + (dy * dy)
    }

    pub fn right(&self) -> NavNode {
        NavNode(self.0 + ivec2(1, 0))
    }

    pub fn above(&self) -> NavNode {
        NavNode(self.0 + ivec2(0, 1))
    }

    pub fn left(&self) -> NavNode {
        NavNode(self.0 - ivec2(1, 0))
    }

    pub fn below(&self) -> NavNode {
        NavNode(self.0 - ivec2(0, 1))
    }
}

impl From<IVec2> for NavNode {
    fn from(v: IVec2) -> Self {
        Self(v)
    }
}
impl From<NavNode> for IVec2 {
    fn from(v: NavNode) -> Self {
        v.0
    }
}
impl std::cmp::Ord for NavNode {
    fn cmp(&self, other: &Self) -> std::cmp::Ordering {
        let xcmp = self.0.x.cmp(&other.0.x);
        if xcmp == std::cmp::Ordering::Equal {
            self.0.y.cmp(&other.0.y)
        } else {
            xcmp
        }
    }
}
impl std::cmp::PartialOrd for NavNode {
    fn partial_cmp(&self, other: &Self) -> Option<std::cmp::Ordering> {
        Some(self.cmp(other))
    }
}

/// Represents the way to get from one tile to another tile in the navigation graph.
#[derive(Debug, Clone)]
pub struct NavGraphEdge {
    /// The sequence of inputs for each frame, required to get to the connected tile.
    pub inputs: VecDeque<PlayerControl>,
    /// The distance to the connected tile. This is used as the heuristic for pathfinding.
    pub distance: f32,
}

fn spawn_map(
    mut commands: Commands,
    mut entities: ResMutInit<Entities>,
    mut clear_color: ResMutInit<ClearColor>,
    assets: Res<AssetServer>,
    map: Res<LoadedMap>,
    mut map_spawned: ResMutInit<MapSpawned>,
    mut tiles: CompMut<Tile>,
    mut tile_layers: CompMut<TileLayer>,
    mut transforms: CompMut<Transform>,
    mut element_handles: CompMut<ElementHandle>,
    mut tile_collisions: CompMut<TileCollisionKind>,
    mut tile_dynamic_colliders: CompMut<TileDynamicCollider>,
    mut parallax_bg_sprites: CompMut<ParallaxBackgroundSprite>,
    mut sprites: CompMut<Sprite>,
    mut nav_graph: ResMutInit<NavGraph>,
    mut cameras: CompMut<Camera>,
    mut camera_shakes: CompMut<CameraShake>,
    mut camera_states: CompMut<CameraState>,
    mut spawned_map_layer_metas: CompMut<SpawnedMapLayerMeta>,
    mut spawned_map_meta: ResMutInit<SpawnedMapMeta>,
) {
    if map_spawned.0 {
        return;
    }

    // Fill in the spawned map metadata
    *spawned_map_meta = SpawnedMapMeta {
        name: map.name,
        background: Arc::new(map.background.clone()),
        background_color: map.background_color,
        grid_size: map.grid_size,
        tile_size: map.tile_size,
        layer_names: map.layers.iter().map(|x| x.id).collect(),
    };

    // Spawn the camera
    {
        let ent = entities.create();
        camera_shakes.insert(
            ent,
            CameraShake {
                center: (map.tile_size * (map.grid_size / 2).as_vec2()).extend(0.0),
                ..CameraShake::new(2.0, vec2(20.0, 20.0), 1.0, 1.0)
            },
        );
        cameras.insert(ent, default());
        transforms.insert(ent, default());
        camera_states.insert(ent, default());
    }

    map_spawned.0 = true;
    **clear_color = map.background_color;

    // Load the navigation graph
    nav_graph.0 = create_nav_graph(&map);

    // Spawn parallax backgrounds
    for layer in &map.background.layers {
        for i in -1..=1 {
            let ent = entities.create();
            sprites.insert(
                ent,
                Sprite {
                    image: layer.image,
                    ..default()
                },
            );
            transforms.insert(ent, default());
            parallax_bg_sprites.insert(
                ent,
                ParallaxBackgroundSprite {
                    idx: i,
                    meta: layer.clone(),
                },
            );
        }
    }

    // Load tiles
    for (layer_idx, layer) in map.layers.iter().enumerate() {
        let layer_idx = layer_idx as u32;
        let layer_z = z_depth_for_map_layer(layer_idx);

        if let Set(tilemap) = layer.tilemap {
            let mut tile_layer = TileLayer::new(map.grid_size, map.tile_size, tilemap);

            for tile_meta in &layer.tiles {
                let tile_ent = entities.create();
                tile_layer.set(tile_meta.pos, Some(tile_ent));
                tiles.insert(
                    tile_ent,
                    Tile {
                        idx: tile_meta.idx,
                        ..default()
                    },
                );
                // TODO: Due to a bug in the way that collisions are handled in the
                // `physics/collisions.rs` file, having an empty collision isn't equivalent to not
                // having a collision component.
                //
                // We should fix this so that we can insert an empty tile collision kind and have that
                // work properly. For now, though, just not adding the tile collider component behaves
                // properly.
                if tile_meta.collision != TileCollisionKind::Empty {
                    tile_collisions.insert(tile_ent, tile_meta.collision);
                }

                let atlas = assets.get(tilemap);
                let optional_tile_colliders = &atlas.tile_collision;
                // If metadata has valid dynamics collider, create component for it.
                if let Some(extra_collider) =
                    optional_tile_colliders.get(&format!("{}", tile_meta.idx))
                {
                    if extra_collider.has_area() {
                        // clamp collider between 0.0, 1.0
                        let extra_collider = extra_collider.clamped_values();

                        // scale min/max between 0 and tile size.
                        let tile_size = spawned_map_meta.tile_size;
                        let min = extra_collider.min * tile_size;
                        let max = extra_collider.max * tile_size;

                        // compute offset from center of tile
                        let collider_center = min + (max - min) * 0.5;
                        let offset =
                            collider_center - Vec2::new(tile_size.x * 0.5, tile_size.y * 0.5);

                        let extents = max - min;
                        let shape = ColliderShape::Rectangle { size: extents };

                        tile_dynamic_colliders
                            .insert(tile_ent, TileDynamicCollider { shape, offset });
                    }
                }
            }
            let layer_ent = entities.create();
            spawned_map_layer_metas.insert(layer_ent, SpawnedMapLayerMeta { layer_idx });
            tile_layers.insert(layer_ent, tile_layer);
            transforms.insert(
                layer_ent,
                Transform::from_translation(Vec3::new(0.0, 0.0, layer_z)),
            );
        }

        // Spawn the elements
        for element_meta in &layer.elements {
            let element_ent = entities.create();

            spawned_map_layer_metas.insert(element_ent, SpawnedMapLayerMeta { layer_idx });
            transforms.insert(
                element_ent,
                Transform::from_translation(element_meta.pos.extend(layer_z)),
            );
            element_handles.insert(element_ent, ElementHandle(element_meta.element));
        }
    }

    // Update collision world with map tiles
    commands.add(|mut collision_world: CollisionWorld| {
        collision_world.update_tiles();
    });
}

fn handle_out_of_bounds_players(
    entities: Res<Entities>,
    mut commands: Commands,
    transforms: CompMut<Transform>,
    player_indexes: Comp<PlayerIdx>,
    map: Res<LoadedMap>,
) {
    for (player_ent, (_player_idx, transform)) in entities.iter_with((&player_indexes, &transforms))
    {
        if map.is_out_of_bounds(&transform.translation) {
            commands.add(PlayerCommand::kill(player_ent, None));
        }
    }
}

/// Helper method to create a navigation graph from the map metadata.
fn create_nav_graph(meta: &MapMeta) -> Arc<NavGraphInner> {
    // Load the navigation graph
    let mut graph = NavGraphInner::default();

    // Initialize set of traversable tiles, assuming all tiles are traversable
    for x in 0..meta.grid_size.x as i32 {
        for y in 0..meta.grid_size.y as i32 {
            graph.add_node(NavNode(ivec2(x, y)));
        }
    }

    // Find all solid tiles and remove them from the traversable tiles list, while also recording
    // the jump-through tiles.
    let mut semi_solids = HashSet::default();
    for layer in &meta.layers {
        for tile in &layer.tiles {
            if tile.collision == TileCollisionKind::JumpThrough {
                semi_solids.insert(NavNode(tile.pos.as_ivec2()));
            } else if tile.collision != TileCollisionKind::Empty {
                graph.remove_node(NavNode(tile.pos.as_ivec2()));
            }
        }
    }

    // Calculate possible movements from every node
    macro_rules! is_solid {
        ($node:expr) => {
            !graph.contains_node($node) || semi_solids.contains(&$node)
        };
    }

    for node in graph.nodes().collect::<Vec<_>>() {
        // walk left or right along the ground
        let has_ground = is_solid!(node.below());
        let maybe_has_ground =
            has_ground || is_solid!(node.below().left()) || is_solid!(node.below().right());

        /////////////////
        // Grounded
        /////////////////

        if maybe_has_ground {
            // Moving Right
            let right = node.right();
            if graph.contains_node(right) {
                graph.add_edge(
                    node,
                    right,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            moving: true,
                            move_direction: vec2(1.0, 0.0),
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&right),
                    },
                );
            }

            // Moving Left
            let left = node.left();
            if graph.contains_node(left) {
                graph.add_edge(
                    node,
                    left,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            moving: true,
                            move_direction: vec2(-1.0, 0.0),
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&left),
                    },
                );
            }
        }

        if has_ground {
            /////////////////
            // JUMPING
            /////////////////
            let above1 = node.above();
            let above2 = above1.above();
            let above3 = above2.above();
            let contains_above1 = graph.contains_node(above1);
            let contains_above2 = graph.contains_node(above2);
            let contains_above3 = graph.contains_node(above3);

            if contains_above1 {
                // Jump staight up
                graph.add_edge(
                    node,
                    above1,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            jump_just_pressed: true,
                            jump_pressed: true,
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&above1),
                    },
                );
            }
            if contains_above2 && contains_above1 {
                // Jump staight up
                graph.add_edge(
                    node,
                    above2,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            jump_just_pressed: true,
                            jump_pressed: true,
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&above2),
                    },
                );
            }
            if contains_above3 && contains_above2 && contains_above1 {
                // Jump staight up
                graph.add_edge(
                    node,
                    above2,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            jump_just_pressed: true,
                            jump_pressed: true,
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&above3),
                    },
                );
            }

            // Jump up and left
            let above3l2 = above3.left().left();
            let above2l = above2.left();
            let contains_above2l = graph.contains_node(above2l);
            let contains_above3l2 = graph.contains_node(above3l2);
            if contains_above3l2 && contains_above2 && contains_above3 && contains_above2l {
                graph.add_edge(
                    node,
                    above3l2,
                    NavGraphEdge {
                        inputs: std::iter::repeat_n(
                            PlayerControl {
                                move_direction: vec2(-1.0, 0.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            20,
                        )
                        .collect(),
                        distance: node.distance(&above3l2),
                    },
                );
            }
            let above3l3 = above3.left().left().left();
            if graph.contains_node(above3l3)
                && graph.contains_node(above3.left())
                && contains_above3l2
                && contains_above2
                && contains_above3
                && contains_above2l
            {
                graph.add_edge(
                    node,
                    above3l3,
                    NavGraphEdge {
                        inputs: std::iter::repeat_n(
                            PlayerControl {
                                move_direction: vec2(-1.0, 0.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            20,
                        )
                        .collect(),
                        distance: node.distance(&above3l3),
                    },
                );
            }

            // Jump up and right
            let above3r2 = above3.right().right();
            let above2r = above2.right();
            let contains_above2r = graph.contains_node(above2r);
            let contains_above3r2 = graph.contains_node(above3r2);
            if contains_above3r2 && contains_above2 && contains_above3 && contains_above2r {
                graph.add_edge(
                    node,
                    above3r2,
                    NavGraphEdge {
                        inputs: std::iter::repeat_n(
                            PlayerControl {
                                move_direction: vec2(1.0, 0.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            20,
                        )
                        .collect(),
                        distance: node.distance(&above3r2),
                    },
                );
            }
            let above3r3 = above3.right().right().right();
            if graph.contains_node(above3r3)
                && graph.contains_node(above3.right())
                && contains_above3r2
                && contains_above2
                && contains_above3
                && contains_above2r
            {
                graph.add_edge(
                    node,
                    above3r3,
                    NavGraphEdge {
                        inputs: std::iter::repeat_n(
                            PlayerControl {
                                move_direction: vec2(1.0, 0.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            20,
                        )
                        .collect(),
                        distance: node.distance(&above3r3),
                    },
                );
            }
        }

        /////////////////
        // Falling Down
        /////////////////

        // Fall straight down
        let below = node.below();
        if graph.contains_node(below) {
            if semi_solids.contains(&below) {
                graph.add_edge(
                    node,
                    below,
                    NavGraphEdge {
                        inputs: [
                            PlayerControl {
                                move_direction: vec2(0.0, -1.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            default(),
                            default(),
                            default(),
                            default(),
                        ]
                        .into(),
                        distance: node.distance(&below),
                    },
                );
            } else {
                graph.add_edge(
                    node,
                    below,
                    NavGraphEdge {
                        inputs: [PlayerControl::default()].into(),
                        distance: node.distance(&below),
                    },
                );
            }
        }

        // Fall diagonally down right
        let below_right = node.below().right();
        if graph.contains_node(below_right) {
            if semi_solids.contains(&below_right) {
                graph.add_edge(
                    node,
                    below_right,
                    NavGraphEdge {
                        inputs: [
                            PlayerControl {
                                move_direction: vec2(1.0, -1.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(1.0, -1.0),
                                jump_pressed: true,
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(1.0, 0.0),
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(1.0, 0.0),
                                ..default()
                            },
                        ]
                        .into(),
                        distance: node.distance(&below_right),
                    },
                );
            } else {
                graph.add_edge(
                    node,
                    below_right,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            move_direction: vec2(1.0, 0.0),
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&below_right),
                    },
                );
            }
        }
        // Fall diagonally down left
        let below_left = node.below().left();
        if graph.contains_node(below_left) {
            if semi_solids.contains(&below_left) {
                graph.add_edge(
                    node,
                    below_left,
                    NavGraphEdge {
                        inputs: [
                            PlayerControl {
                                move_direction: vec2(-1.0, -1.0),
                                jump_just_pressed: true,
                                jump_pressed: true,
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(-1.0, -1.0),
                                jump_pressed: true,
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(-1.0, 0.0),
                                ..default()
                            },
                            PlayerControl {
                                move_direction: vec2(-1.0, 0.0),
                                ..default()
                            },
                        ]
                        .into(),
                        distance: node.distance(&below_left),
                    },
                );
            } else {
                graph.add_edge(
                    node,
                    below_left,
                    NavGraphEdge {
                        inputs: [PlayerControl {
                            move_direction: vec2(-1.0, 0.0),
                            ..default()
                        }]
                        .into(),
                        distance: node.distance(&below_left),
                    },
                );
            }
        }

        // Slow fall right
        let far_right_below = node.right().right().right().right().below();
        let path = [
            node.right(),
            node.right().right(),
            node.right().right().right(),
            node.right().right().right().right(),
            far_right_below,
        ];
        if path.iter().all(|x| graph.contains_node(*x)) {
            graph.add_edge(
                node,
                far_right_below,
                NavGraphEdge {
                    inputs: std::iter::repeat_n(
                        PlayerControl {
                            move_direction: vec2(1.0, 0.0),
                            jump_pressed: true,
                            ..default()
                        },
                        20,
                    )
                    .collect(),
                    // Bias against using this move because it doesn't always work, by adding an
                    // extra distance.
                    distance: node.distance(&far_right_below) + 1.0,
                },
            );
        }
        // Slow fall left
        let far_left_below = node.left().left().left().left().below();
        let path = [
            node.left(),
            node.left().left(),
            node.left().left().left(),
            node.left().left().left().left(),
            far_left_below,
        ];
        if path.iter().all(|x| graph.contains_node(*x)) {
            graph.add_edge(
                node,
                far_left_below,
                NavGraphEdge {
                    inputs: std::iter::repeat_n(
                        PlayerControl {
                            move_direction: vec2(-1.0, 0.0),
                            jump_pressed: true,
                            ..default()
                        },
                        20,
                    )
                    .collect(),
                    // Bias against using this move because it doesn't always work, by adding an
                    // extra distance.
                    distance: node.distance(&far_left_below) + 1.0,
                },
            );
        }
    }

    Arc::new(graph)
}

```

`src/core/map_constructor.rs`:

```rs
//! Map constructor implementations.
//!
//! Map constructors are algorithms that can be used to create or edit game maps, usually through
//! the jumpy editor.

use super::editor::MapManager;

pub mod shiftnanigans;

/// Trait implemented by map constructors.
pub trait MapConstructor {
    /// Take the map manager and use it to either modify or construct a new map.
    fn construct_map(&self, map_manager: &mut MapManager);
}

```

`src/core/map_constructor/shiftnanigans.rs`:

```rs
//! Map randomizer using [Shiftnanigans](https://github.com/AustinHellerRepo/Shiftnanigans).

use std::{cell::RefCell, rc::Rc};

use super::MapConstructor;
use crate::prelude::*;
use ::shiftnanigans::pixel_board::{
    pixel_board_randomizer::PixelBoardRandomizer, Pixel, PixelBoard,
};

/// Map randomizer using [Shiftnanigans](https://github.com/AustinHellerRepo/Shiftnanigans).
pub struct ShiftnanigansMapConstructor {
    pixel_board_randomizer: PixelBoardRandomizer<PixelType>,
    compressed_top_height: usize,
    compressed_left_width: usize,
    tile_size: Vec2,
}

impl ShiftnanigansMapConstructor {
    pub fn new(
        map_size: UVec2,
        tile_size: Vec2,
        tile_layers: &[LocatedTileLayer],
        element_layers: &[ElementLayer],
    ) -> ShiftnanigansMapConstructor {
        // . map tiles and elements into pixel types
        // . run pixel randomizer
        // . transform tiles and elements based on where they exist in the randomized map

        let mut ungrouped_pixel_per_y_per_x: Vec<Vec<Option<UngroupedPixel>>> = Vec::new();
        for x in 0..map_size.x {
            let mut ungrouped_pixel_per_y: Vec<Option<UngroupedPixel>> = Vec::new();
            for y in 0..map_size.y {
                let ungrouped_pixel_option =
                    UngroupedPixel::from_layers_and_location(tile_layers, element_layers, x, y);
                ungrouped_pixel_per_y.push(ungrouped_pixel_option);
            }
            ungrouped_pixel_per_y_per_x.push(ungrouped_pixel_per_y);
        }

        let top_height;
        'get_top_height: {
            for y in 0..map_size.y as usize {
                // if any column is missing a pixel, then the ceiling wall is as thick as the current value of 'y'
                for ungrouped_pixel_per_y in ungrouped_pixel_per_y_per_x.iter() {
                    if ungrouped_pixel_per_y[y].is_none() {
                        top_height = y;
                        break 'get_top_height;
                    }
                }
            }
            top_height = map_size.y as usize;
        }

        let left_width;
        'get_left_width: {
            for (x, ungrouped_pixel_per_y) in ungrouped_pixel_per_y_per_x.iter().enumerate() {
                for ungrouped_pixel in ungrouped_pixel_per_y.iter() {
                    if ungrouped_pixel.is_none() {
                        left_width = x;
                        break 'get_left_width;
                    }
                }
            }
            left_width = map_size.x as usize;
        }

        let bottom_height;
        'get_bottom_height: {
            for y in (0..map_size.y as usize).rev() {
                for ungrouped_pixel_per_y in ungrouped_pixel_per_y_per_x.iter() {
                    if ungrouped_pixel_per_y[y].is_none() {
                        bottom_height = map_size.y as usize - y - 1;
                        break 'get_bottom_height;
                    }
                }
            }
            bottom_height = 0; // pretend the bottom is missing since the top_height must also be the entire height
        }

        let right_width;
        'get_right_width: {
            for (x, ungrouped_pixel_per_y) in ungrouped_pixel_per_y_per_x.iter().enumerate().rev() {
                for ungrouped_pixel in ungrouped_pixel_per_y.iter() {
                    if ungrouped_pixel.is_none() {
                        right_width = map_size.x as usize - x - 1;
                        break 'get_right_width;
                    }
                }
            }
            right_width = 0; // pretend the right is missing since the left_width must also be the entire width
        }

        let composite_map_width =
            map_size.x as usize - std::cmp::max(left_width, 1) - std::cmp::max(right_width, 1) + 2;
        let composite_map_height =
            map_size.y as usize - std::cmp::max(top_height, 1) - std::cmp::max(bottom_height, 1)
                + 2;

        let mut grouped_pixels_per_y_per_x: Vec<Vec<Vec<GroupedPixel>>> =
            Vec::with_capacity(composite_map_width);
        for _ in 0..composite_map_width {
            let mut grouped_pixels_per_y: Vec<Vec<GroupedPixel>> =
                Vec::with_capacity(composite_map_height);
            for _ in 0..composite_map_height {
                grouped_pixels_per_y.push(Vec::new());
            }
            grouped_pixels_per_y_per_x.push(grouped_pixels_per_y);
        }

        ungrouped_pixel_per_y_per_x
            .into_iter()
            .enumerate()
            .for_each(|(x, ungrouped_pixel_per_y)| {
                ungrouped_pixel_per_y
                    .into_iter()
                    .enumerate()
                    .for_each(|(y, ungrouped_pixel)| {
                        // the pixel board coordinates based on the map grid coordinates 'x' and 'y'
                        let pixel_board_x;
                        let pixel_board_y;

                        if x < left_width {
                            pixel_board_x = 0;
                        } else if x >= map_size.x as usize - right_width {
                            pixel_board_x = composite_map_width - 1;
                        } else if left_width == 0 {
                            pixel_board_x = x;
                        } else {
                            pixel_board_x = x - left_width + 1;
                        }

                        if y < top_height {
                            pixel_board_y = 0;
                        } else if y >= map_size.y as usize - bottom_height {
                            pixel_board_y = composite_map_height - 1;
                        } else if top_height == 0 {
                            pixel_board_y = y;
                        } else {
                            pixel_board_y = y - top_height + 1
                        }

                        // add the existing pixel to the grouped pixels (changing from None to an instance if applicable)
                        // at this point we know that (x, y) in ungrouped pixels equates to (pixel_board_x, pixel_board_y) in grouped pixels

                        if let Some(ungrouped_pixel) = ungrouped_pixel {
                            grouped_pixels_per_y_per_x[pixel_board_x][pixel_board_y].push(
                                GroupedPixel {
                                    ungrouped_pixel,
                                    ungrouped_pixel_location: UVec2 {
                                        x: x as u32,
                                        y: y as u32,
                                    },
                                },
                            );
                        }
                    });
            });

        // at this point all of the grouped pixels are known and so the pixel types can now be added to the pixel board

        let mut pixel_board: PixelBoard<PixelType> =
            PixelBoard::new(composite_map_width, composite_map_height);

        grouped_pixels_per_y_per_x
            .into_iter()
            .enumerate()
            .for_each(|(x, grouped_pixels_per_y)| {
                grouped_pixels_per_y
                    .into_iter()
                    .enumerate()
                    .for_each(|(y, grouped_pixels)| {
                        if !grouped_pixels.is_empty() {
                            let pixel_type = PixelType { grouped_pixels };
                            pixel_board.set(x, y, Rc::new(RefCell::new(pixel_type)));
                        }
                    });
            });

        ShiftnanigansMapConstructor {
            pixel_board_randomizer: PixelBoardRandomizer::new(pixel_board),
            compressed_top_height: top_height,
            compressed_left_width: left_width,
            tile_size,
        }
    }
}

impl MapConstructor for ShiftnanigansMapConstructor {
    fn construct_map(&self, map_manager: &mut MapManager) {
        let random_pixel_board = self.pixel_board_randomizer.get_random_pixel_board();

        // remove all tiles
        map_manager.clear_tiles();

        // remove all elements
        map_manager.clear_elements();

        // place all tiles and elements
        for y in 0..random_pixel_board.get_height() {
            for x in 0..random_pixel_board.get_width() {
                if random_pixel_board.exists(x, y) {
                    let wrapped_pixel = random_pixel_board.get(x, y).unwrap();
                    let borrowed_pixel: &PixelType = &wrapped_pixel.borrow();
                    let top_left_position: UVec2 = borrowed_pixel
                        .grouped_pixels
                        .first()
                        .unwrap()
                        .ungrouped_pixel_location;

                    // calculate the x and y that the grouped pixels uncompress to
                    let uncompressed_y: usize = if y == 0 {
                        0
                    } else {
                        let top_offset: usize = if self.compressed_top_height == 0 {
                            0
                        } else {
                            self.compressed_top_height - 1
                        };
                        y + top_offset
                    };
                    let uncompressed_x: usize = if x == 0 {
                        0
                    } else {
                        let left_offset: usize = if self.compressed_left_width == 0 {
                            0
                        } else {
                            self.compressed_left_width - 1
                        };
                        x + left_offset
                    };

                    borrowed_pixel.grouped_pixels.iter().for_each(|gp| {
                        gp.ungrouped_pixel
                            .layer_pixel_entity_types
                            .iter()
                            .for_each(|lpet| match lpet {
                                LayerPixelEntityType::Tile(tile) => {
                                    let position = UVec2 {
                                        x: uncompressed_x as u32 + gp.ungrouped_pixel_location.x
                                            - top_left_position.x,
                                        y: uncompressed_y as u32 + gp.ungrouped_pixel_location.y
                                            - top_left_position.y,
                                    };
                                    map_manager.set_tile(
                                        tile.layer_index,
                                        position,
                                        &Some(tile.tilemap_tile_index),
                                        tile.tile_collision_kind,
                                    );
                                }
                                LayerPixelEntityType::Element(element) => {
                                    let position = Vec2 {
                                        x: (uncompressed_x as f32
                                            + gp.ungrouped_pixel_location.x as f32
                                            - top_left_position.x as f32
                                            + element.position.x)
                                            * self.tile_size.x,
                                        y: (uncompressed_y as f32
                                            + gp.ungrouped_pixel_location.y as f32
                                            - top_left_position.y as f32
                                            + element.position.y)
                                            * self.tile_size.y,
                                    };
                                    map_manager.create_element(
                                        &element.element_meta_handle,
                                        &position,
                                        element.layer_index,
                                    );
                                }
                            });
                    });
                }
            }
        }
    }
}

/// The tile as it exists in the map
struct Tile {
    layer_index: u32,
    tilemap_tile_index: u32,
    tile_collision_kind: TileCollisionKind,
}

/// An element at a location within the map
struct Element {
    layer_index: u32,
    element_meta_handle: Handle<ElementMeta>,
    position: Vec2,
}

/// The entity as it exists in the map
enum LayerPixelEntityType {
    Tile(Tile),
    Element(Element),
}

/// This contains the layer pixels
struct UngroupedPixel {
    layer_pixel_entity_types: Vec<LayerPixelEntityType>,
}

impl UngroupedPixel {
    fn from_layers_and_location(
        tile_layers: &[LocatedTileLayer],
        element_layers: &[ElementLayer],
        x: u32,
        y: u32,
    ) -> Option<Self> {
        // iterate over each layer at the provided location, creating a vector of MapEntityType
        let mut entity_types: Vec<LayerPixelEntityType> = Vec::new();
        tile_layers.iter().for_each(|tile_layer| {
            tile_layer.located_tiles.iter().for_each(|tile| {
                if tile.0.x == x && tile.0.y == y {
                    entity_types.push(LayerPixelEntityType::Tile(Tile {
                        layer_index: tile_layer.layer_index,
                        tilemap_tile_index: tile.1,
                        tile_collision_kind: tile.2,
                    }));
                }
            });
        });
        element_layers.iter().for_each(|element_layer| {
            element_layer.located_elements.iter().for_each(|element| {
                // grab elements nearby this location
                if element.0.x as u32 == x && element.0.y as u32 == y {
                    // TODO determine which element this is in 'element' for custom spacing requirements
                    entity_types.push(LayerPixelEntityType::Element(Element {
                        layer_index: element_layer.layer_index,
                        element_meta_handle: element.1,
                        position: Vec2::new(element.0.x - x as f32, element.0.y - y as f32),
                    }));
                }
            });
        });
        if entity_types.is_empty() {
            None
        } else {
            Some(UngroupedPixel {
                layer_pixel_entity_types: entity_types,
            })
        }
    }
}

/// This can contain one or more ungrouped pixels, allowing for combining adjacent pixels into one grouped pixel
///     This is useful for when thick walls need to be considered as one-pixel-wide walls
struct GroupedPixel {
    ungrouped_pixel: UngroupedPixel,
    ungrouped_pixel_location: UVec2,
}

/// The pixel provided to the pixel board randomizer
struct PixelType {
    grouped_pixels: Vec<GroupedPixel>,
}

impl Pixel for PixelType {
    fn get_invalid_location_offsets_for_other_pixel(&self, _: &Self) -> Vec<(i16, i16)> {
        let invalid_location_offsets: Vec<(i16, i16)> = Vec::new();
        // TODO add invalid location offsets as needed
        self.grouped_pixels.iter().for_each(|gp| {
            gp.ungrouped_pixel
                .layer_pixel_entity_types
                .iter()
                .for_each(|lpet| {
                    match lpet {
                        LayerPixelEntityType::Tile(_) => {
                            // there are no restrictions on where the other pixel can exist
                        }
                        LayerPixelEntityType::Element(_) => {
                            // there may be restrictions in the future (as needed)
                        }
                    }
                });
        });
        invalid_location_offsets
    }
}

```

`src/core/map_pool.rs`:

```rs
use crate::prelude::*;

#[derive(Clone, Debug, HasSchema)]
#[schema(no_default)]
pub struct MapPool {
    pub maps: Vec<Handle<MapMeta>>,
    pub current_map: Handle<MapMeta>,
}

impl MapPool {
    /// Convert to [`MapPoolNetwork`] which is serializable for replication.
    pub fn into_network(&self, assets: &AssetServer) -> MapPoolNetwork {
        MapPoolNetwork {
            maps: self.maps.iter().map(|h| h.network_handle(assets)).collect(),
            current_map: self.current_map.network_handle(assets),
        }
    }

    /// Convert [`MapPoolNetwork`] into a [`MapPool`]
    pub fn from_network(map_pool: MapPoolNetwork, assets: &AssetServer) -> MapPool {
        MapPool {
            maps: map_pool
                .maps
                .iter()
                .map(|h| h.into_handle(assets))
                .collect(),
            current_map: map_pool.current_map.into_handle(assets),
        }
    }

    /// Make a `MapPool` consisting of single map.
    pub fn from_single_map(map: Handle<MapMeta>) -> Self {
        Self {
            maps: vec![map],
            current_map: map,
        }
    }

    /// Construct `MapPool` from slice of maps.
    /// Current map is first in array.
    pub fn from_slice(maps: &[Handle<MapMeta>]) -> Self {
        Self {
            maps: maps.into(),
            current_map: maps[0],
        }
    }

    /// Randomize current map. Updates `curent_map` on self and returns `Handle<MapMeta>`.
    pub fn randomize_current_map(&mut self, rng: &GlobalRng) -> Handle<MapMeta> {
        self.current_map = *rng.sample(&self.maps).unwrap();
        self.current_map
    }

    /// Return a random map handle from pool
    pub fn get_random_map(&self, rng: &GlobalRng) -> Handle<MapMeta> {
        *rng.sample(&self.maps).unwrap()
    }
}

#[derive(Serialize, Deserialize)]
pub struct MapPoolNetwork {
    pub maps: Vec<NetworkHandle<MapMeta>>,
    pub current_map: NetworkHandle<MapMeta>,
}

```

`src/core/metadata.rs`:

```rs
//! Core game metadata

use serde::Deserializer;
use std::time::Duration;

use crate::prelude::*;

mod map;
mod player;

pub use map::*;
pub use player::*;

/// Extension trait for the bones [`AssetServer`].
pub trait MatchAssetServerExt {
    /// Register the default assets from `bones_framework`.
    fn register_match_assets(self) -> Self;
}
impl MatchAssetServerExt for &mut AssetServer {
    fn register_match_assets(self) -> Self {
        CoreMeta::register_schema();
        PlayerMeta::register_schema();
        ElementMeta::register_schema();
        BulletMeta::register_schema();
        MapMeta::register_schema();
        HatMeta::register_schema();

        self
    }
}

#[derive(Clone, Debug, HasSchema, Default)]
#[repr(C)]
pub struct CoreMeta {
    pub camera: CameraMeta,
    pub physics: PhysicsMeta,
    pub config: CoreConfigMeta,
    pub map_tilesets: SVec<Handle<Atlas>>,
    pub players: SVec<Handle<PlayerMeta>>,
    pub player_emotes: SMap<Ustr, Handle<EmoteMeta>>,
    pub player_hats: SVec<Handle<HatMeta>>,
    pub player_win_indicator: Handle<WinIndicatorMeta>,
    pub stable_maps: SVec<Handle<MapMeta>>,
    pub map_elements: SVec<Handle<ElementMeta>>,
    pub experimental_maps: SVec<Handle<MapMeta>>,
}

#[derive(HasSchema, Clone, Debug)]
#[repr(C)]
pub struct CameraMeta {
    pub default_height: f32,
    pub border_top: f32,
    pub border_bottom: f32,
    pub border_left: f32,
    pub border_right: f32,
    pub move_lerp_factor: f32,
    pub zoom_in_lerp_factor: f32,
    pub zoom_out_lerp_factor: f32,
    pub min_camera_size: Vec2,
    pub player_camera_box_size: Vec2,
}

impl Default for CameraMeta {
    fn default() -> Self {
        Self {
            default_height: 400.0,
            border_top: 0.0,
            border_bottom: 0.0,
            border_left: 0.0,
            border_right: 0.0,
            move_lerp_factor: 1.0,
            zoom_in_lerp_factor: 1.0,
            zoom_out_lerp_factor: 1.0,
            min_camera_size: Vec2::ZERO,
            player_camera_box_size: Vec2::ZERO,
        }
    }
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PhysicsMeta {
    pub gravity: f32,
    pub terminal_velocity: f32,
    pub friction_lerp: f32,
    pub stop_threshold: f32,
    pub player: PhysicsPlayerMeta,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PhysicsPlayerMeta {
    pub ragdoll_initial_pop: f32,
    pub ragdoll_initial_ang_vel: f32,
    pub ragdoll_twitch_vel: f32,
    pub ragdoll_twitch_delay: f32,
    // Add additional mass to ragdoll body
    pub ragdoll_additional_mass: f32,
}

#[derive(HasSchema, Deserialize, Clone, Debug, Default)]
#[derive_type_data(SchemaDeserialize)]
pub struct CoreConfigMeta {
    #[serde(default)]
    #[serde(with = "humantime_serde")]
    pub respawn_invincibility_time: Duration,

    /// After one or fewer players left, how long to watch before scoring
    #[serde(default)]
    #[serde(with = "humantime_serde")]
    pub round_end_score_time: Duration,

    /// How long round lingers after displaying round winner
    #[serde(default)]
    #[serde(with = "humantime_serde")]
    pub round_end_post_score_linger_time: Duration,

    /// How many rounds must be won to end match
    pub winning_score_threshold: u32,

    /// How many rounds between intermissions
    pub rounds_between_intermission: u32,
}

```

`src/core/metadata/map.rs`:

```rs
use super::*;

#[derive(Clone, HasSchema, Default, Debug)]
#[type_data(metadata_asset("map"))]
#[repr(C)]
pub struct MapMeta {
    pub name: Ustr,
    /// The parallax background layers
    pub background: BackgroundMeta,
    /// The background color of the map, behind the parallax layers
    pub background_color: Color,
    /// Size of the map in tiles
    pub grid_size: UVec2,
    /// The size of the tiles in pixels
    pub tile_size: Vec2,
    /// The layers of the map
    pub layers: SVec<MapLayerMeta>,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct BackgroundMeta {
    pub speed: Vec2,
    pub layers: SVec<ParallaxLayerMeta>,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct ParallaxLayerMeta {
    pub image: Handle<Image>,
    pub size: Vec2,
    pub depth: f32,
    pub scale: f32,
    pub offset: Vec2,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct MapLayerMeta {
    pub id: Ustr,
    pub tilemap: Maybe<Handle<Atlas>>,
    pub tiles: SVec<MapTileMeta>,
    pub elements: SVec<ElementSpawn>,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct ElementSpawn {
    pub pos: Vec2,
    pub element: Handle<ElementMeta>,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct MapTileMeta {
    pub pos: UVec2,
    pub idx: u32,
    pub collision: TileCollisionKind,
}

impl MapMeta {
    /// Checks if the given position is out of the bounds of the map.
    pub fn is_out_of_bounds(&self, pos: &Vec3) -> bool {
        const KILL_ZONE_BORDER: f32 = 500.0;
        let map_width = self.grid_size.x as f32 * self.tile_size.x;
        let left_kill_zone = -KILL_ZONE_BORDER;
        let right_kill_zone = map_width + KILL_ZONE_BORDER;
        let bottom_kill_zone = -KILL_ZONE_BORDER;
        pos.x < left_kill_zone || pos.x > right_kill_zone || pos.y < bottom_kill_zone
    }
}

```

`src/core/metadata/player.rs`:

```rs
use super::*;

#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("player"))]
#[repr(C)]
pub struct PlayerMeta {
    pub name: Ustr,
    pub body_size: Vec2,
    pub slide_body_size: Vec2,
    pub gravity: f32,
    pub sounds: PlayerSoundsMeta,
    pub stats: PlayerStatsMeta,
    pub layers: PlayerLayersMeta,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerLayersMeta {
    pub body: PlayerBodyLayerMeta,
    pub fin: PlayerLayerMeta,
    pub face: PlayerLayerMeta,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerBodyLayerMeta {
    pub atlas: Handle<Atlas>,
    // #[serde(deserialize_with = "deserialize_body_animations")]
    // #[asset(deserialize_only)]
    pub animations: BodyAnimationsMeta,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[derive_type_data(SchemaDeserialize)]
pub struct BodyAnimationsMeta {
    // TODO: Put Animation Frames in an `Arc` to Avoid Snapshot Clone Cost.
    pub offsets: SMap<Ustr, SVec<Offsets>>,
    pub frames: SMap<Ustr, AnimatedSprite>,
}

impl<'de> Deserialize<'de> for BodyAnimationsMeta {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: Deserializer<'de>,
    {
        deserialize_body_animations(deserializer)
    }
}

#[derive(Clone, Debug, Default, HasSchema)]
#[repr(C)]
pub struct Offsets {
    pub body: Vec2,
    pub head: Vec2,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerLayerMeta {
    pub atlas: Handle<Atlas>,
    pub offset: Vec2,
    // TODO: Put Animation Frames in an `Arc` to Avoid Snapshot Clone Cost.
    // The current blocker to this is `Arc` doesn't implement `HasSchema`, and we have to figure
    // that out.
    // TODO: Use more economic key type such as `ustr`
    // The current blocker is implementing `HasSchema` for `ustr`.
    pub animations: SMap<Ustr, AnimatedSprite>,
}

#[derive(HasSchema, Deserialize, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerStatsMeta {
    pub jump_speed: f32,
    pub slow_fall_speed: f32,
    pub air_speed: f32,
    pub accel_air_speed: f32,
    pub walk_speed: f32,
    pub slowdown: f32,
    pub accel_walk_speed: f32,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerSoundsMeta {
    pub land_volume: f64,
    pub land: Handle<AudioSource>,

    pub jump_volume: f64,
    pub jump: Handle<AudioSource>,

    pub grab_volume: f64,
    pub grab: Handle<AudioSource>,

    pub drop_volume: f64,
    pub drop: Handle<AudioSource>,

    pub death_volume: f64,
    pub death: Handle<AudioSource>,
}

fn deserialize_arc<'de, T: Deserialize<'de>, D: Deserializer<'de>>(
    deserializer: D,
) -> Result<Arc<T>, D::Error> {
    let item = T::deserialize(deserializer)?;
    Ok(Arc::new(item))
}
fn deserialize_arc_slice<'de, T: Deserialize<'de>, D: Deserializer<'de>>(
    deserializer: D,
) -> Result<Arc<[T]>, D::Error> {
    let item = <Vec<T>>::deserialize(deserializer)?;
    Ok(Arc::from(item))
}
fn default_true() -> bool {
    true
}

fn deserialize_body_animations<'de, D: Deserializer<'de>>(
    deserializer: D,
) -> Result<BodyAnimationsMeta, D::Error> {
    #[derive(Clone, Deserialize)]
    #[serde(deny_unknown_fields)]
    struct AnimatedBodySprite {
        #[serde(default)]
        pub index: u32,
        #[serde(deserialize_with = "deserialize_arc_slice")]
        #[serde(serialize_with = "serialize_arc_slice")]
        pub frames: Arc<[BodyFrame]>,
        /// The frames per second to play the animation at.
        pub fps: f32,
        /// The amount of time the current frame has been playing
        #[serde(default)]
        pub timer: f32,
        /// Whether or not to repeat the animation
        #[serde(default = "default_true")]
        pub repeat: bool,
    }

    #[derive(Clone, Deserialize)]
    #[serde(deny_unknown_fields)]
    struct BodyFrame {
        pub idx: u32,
        #[serde(default)]
        pub offset: Vec2,
        #[serde(default)]
        pub head_offset: Vec2,
    }

    let body_sprite_anmations = <HashMap<String, AnimatedBodySprite>>::deserialize(deserializer)?;

    let offsets = body_sprite_anmations
        .iter()
        .map(|(k, v)| {
            (
                ustr(k),
                v.frames
                    .iter()
                    .map(|x| Offsets {
                        body: x.offset,
                        head: x.head_offset,
                    })
                    .collect::<SVec<_>>(),
            )
        })
        .collect();
    let frames = body_sprite_anmations
        .into_iter()
        .map(|(k, v)| {
            (
                ustr(&k),
                AnimatedSprite {
                    index: v.index,
                    frames: v.frames.iter().map(|x| x.idx).collect(),
                    fps: v.fps,
                    timer: v.timer,
                    repeat: v.repeat,
                },
            )
        })
        .collect();

    Ok(BodyAnimationsMeta { offsets, frames })
}

/// Metadata for a player emote.
#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("emote"))]
#[repr(C)]
pub struct EmoteMeta {
    pub name: Ustr,
    pub atlas: Handle<Atlas>,
    pub offset: Vec2,
    pub animation: AnimatedSprite,
}

/// Metadata for a player hat.
#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("hat"))]
#[repr(C)]
pub struct HatMeta {
    pub name: Ustr,
    pub atlas: Handle<Atlas>,
    pub offset: Vec2,
    pub body_size: Vec2,
}

```

`src/core/physics.rs`:

```rs
//! Physics and collision detection.

use crate::prelude::*;

pub use collisions::{
    Actor, Collider, ColliderShape, CollisionWorld, PhysicsParams, RapierContext, RapierUserData,
    Solid, TileCollisionKind,
};

use super::utils::Rect;
pub use rapier2d::prelude as rapier;

pub mod collisions;
pub mod dynamic_body;

pub use dynamic_body::*;

/// For now kinematic mode is globally position based.
pub static KINEMATIC_MODE: rapier::RigidBodyType = rapier::RigidBodyType::KinematicPositionBased;

#[derive(Debug, Clone, Copy)]
enum PhysicsStage {
    Update,
}

impl StageLabel for PhysicsStage {
    fn name(&self) -> String {
        format!("{self:?}")
    }

    fn id(&self) -> Ulid {
        match self {
            PhysicsStage::Update => Ulid(2026032502318358068964002697585621138),
        }
    }
}

pub fn install(session: &mut SessionBuilder) {
    KinematicBody::register_schema();
    ColliderShape::register_schema();

    session
        .stages
        // TODO: Think again about exactly how to organize the physics sync systems. At the time of
        // writing, we have to do an extra `collision_world.step()` when debug rendering to make
        // sure everything is synced. It'd be good to avoid this and maybe take inspiration from
        // bevy_rapier.
        .insert_stage_after(
            CoreStage::PostUpdate,
            SimpleSystemStage::new(PhysicsStage::Update),
        )
        .add_system_to_stage(PhysicsStage::Update, hydrate_physics_bodies)
        .add_system_to_stage(PhysicsStage::Update, update_kinematic_bodies);
}

/// A kinematic physics body
///
/// Used primarily for players and things that need to walk around, detect what kind of platform
/// they are standing on, etc.
///
/// For now, all kinematic bodies have axis-aligned, rectangular colliders. This may or may not
/// change in the future.
#[derive(Default, Debug, Clone, Copy, HasSchema)]
#[repr(C)]
pub struct KinematicBody {
    pub velocity: Vec2,
    pub shape: ColliderShape,
    /// Angular velocity in degrees per second
    pub angular_velocity: f32,
    pub gravity: f32,
    pub bounciness: f32,
    /// Sets a 1 frame override for the body friction. It will be re-set to `None` every frame so if
    /// you wish to apply a continuous friction change, you must re-set it every frame.
    ///
    /// This is useful for things like slippery blocks or other things that want to modify a body's
    /// friction while it is on the block.
    #[schema(opaque)]
    pub frame_friction_override: Option<f32>,
    pub is_on_ground: bool,
    pub was_on_ground: bool,
    /// Will be `true` if the body is currently on top of a platform/jumpthrough tile
    pub is_on_platform: bool,
    /// If this is `true` the body will be affected by gravity
    pub has_mass: bool,
    pub has_friction: bool,
    pub can_rotate: bool,
    /// Whether or not physics has been disabled for this body.
    pub is_deactivated: bool,
    /// Whether or not the body should fall through jump_through platforms
    pub fall_through: bool,
    /// Indicates that we should reset the collider like it was just added to the world.
    ///
    /// This is important to make sure that it falls through JumpThrough platforms if it happens to
    /// spawn inside of one.
    pub is_spawning: bool,

    /// If body is controlled by player or some system simulating input.
    /// Allows us to make safe optimizations of non-controlled kinematics that have not moved.
    pub is_controlled: bool,

    /// Position cached from last kinematic body update, used to determine if object is "sleeping"
    /// (is not moving) to avoid collision detection / resolution against static objects.
    pub last_update_position: Vec2,
    /// See comment for `last_update_position`, this tracks previous rotation to detect if object has moved.
    pub last_update_rotation: f32,
}

impl KinematicBody {
    /// Get the body's axis-aligned-bounding-box ( AABB ).
    ///
    /// An AABB is the smallest non-rotated rectangle that completely contains the the collision
    /// shape.
    ///
    /// By passing in the body's global transform you will get the world-space bounding box.
    pub fn bounding_box(&self, transform: Transform) -> Rect {
        let aabb = self.shape.compute_aabb(transform);

        Rect {
            min: vec2(aabb.mins.x, aabb.mins.y),
            max: vec2(aabb.maxs.x, aabb.maxs.y),
        }
    }
}

/// Hydrate newly added [`KinematicBody`]s.
fn hydrate_physics_bodies(
    entities: Res<Entities>,
    bodies: Comp<KinematicBody>,
    mut collision_world: CollisionWorld,
) {
    let mut needs_hydrate = collision_world.colliders.bitset().clone();
    needs_hydrate.bit_not();
    needs_hydrate.bit_and(bodies.bitset());

    for entity in entities.iter_with_bitset(&needs_hydrate) {
        let body = bodies.get(entity).unwrap();

        collision_world.colliders.insert(
            entity,
            Collider {
                shape: body.shape,
                ..default()
            },
        );
        collision_world.actors.insert(entity, Actor);
        collision_world.handle_teleport(entity);
    }
}

/// Update physics for kinematic bodies.
fn update_kinematic_bodies(
    meta: Root<GameMeta>,
    entities: Res<Entities>,
    mut bodies: CompMut<KinematicBody>,
    mut dynamic_bodies: CompMut<DynamicBody>,
    mut collision_world: CollisionWorld,
    mut transforms: CompMut<Transform>,
    time: Res<Time>,
) {
    puffin::profile_function!();

    let time_factor = time.delta().as_secs_f32();

    let global_gravity = meta.core.physics.gravity;
    collision_world.update(
        time_factor,
        PhysicsParams {
            gravity: global_gravity,
            terminal_velocity: Some(meta.core.physics.terminal_velocity),
        },
        &mut transforms,
        &mut dynamic_bodies,
    );
    for (entity, (body, dynamic_body)) in
        entities.iter_with((&mut bodies, &mut OptionalMut(&mut dynamic_bodies)))
    {
        if body.is_deactivated {
            collision_world.colliders.get_mut(entity).unwrap().disabled = true;
            continue;
        } else {
            collision_world.colliders.get_mut(entity).unwrap().disabled = false;
        }

        if let Some(dynamic_body) = dynamic_body {
            if dynamic_body.is_dynamic {
                continue;
            }
        }
        // has the body moved since last call to update_kinematic_bodies?
        let has_moved = {
            let transform = transforms.get(entity).copied().unwrap();
            let rotation = transform.rotation.to_euler(EulerRot::XYZ).2;
            body.last_update_position != transform.translation.xy()
                || body.last_update_rotation != rotation
                || body.is_spawning // Don't consider new objects
        };

        let transform = transforms.get_mut(entity).unwrap();
        body.last_update_position = transform.translation.xy();
        body.last_update_rotation = transform.rotation.to_euler(EulerRot::XYZ).2;

        if body.has_mass && has_moved {
            puffin::profile_scope!("Shove objects out of walls");

            // Shove objects out of walls
            loop {
                let mut transform = transforms.get(entity).copied().unwrap();

                if collision_world.tile_collision(transform, body.shape) != TileCollisionKind::Solid
                {
                    break;
                }

                let rect = body.bounding_box(transform);
                // We add a small border, because rapier will consider the collision box colliding
                // if it is perfectly lined up along the edge of a tile, and `solid_at` won't.
                let border = 0.1;

                let collisions = (
                    collision_world.solid_at(vec2(rect.min.x - border, rect.max.y + border)), // Top left
                    collision_world.solid_at(vec2(rect.max.x + border, rect.max.y + border)), // Top right
                    collision_world.solid_at(vec2(rect.max.x + border, rect.min.y - border)), // Bottom right
                    collision_world.solid_at(vec2(rect.min.x - border, rect.min.y - border)), // Bottom left
                );
                match collisions {
                    // If we have no solid collisions at any corner.
                    (false, false, false, false) => {
                        // For some reason the `tile_collision` test did detect a collision, but
                        // `solid_at` did not detect a collision at any of the corners of the aabb.
                        warn!(
                            "Collision test error resulting in physics \
                            body stuck in wall at {rect:?}",
                        );
                        break;
                    }
                    // Check for collisions on each side of the rectangle
                    (false, false, _, _) => transform.translation.y += 1.0,
                    (_, false, false, _) => transform.translation.x += 1.0,
                    (_, _, false, false) => transform.translation.y -= 1.0,
                    (false, _, _, false) => transform.translation.x -= 1.0,
                    // If none of the sides of the rectangle are un-collided, then we don't know
                    // which direction to move to get out of the wall, and we just give up.
                    _ => {
                        break;
                    }
                }

                *transforms.get_mut(entity).unwrap() = transform;
            }
        }

        // Sync body attributes with collider
        {
            let collider = collision_world.colliders.get_mut(entity).unwrap();
            collider.shape = body.shape;
        }

        if body.is_spawning {
            collision_world.handle_teleport(entity);
            body.is_spawning = false;
        }

        if body.fall_through {
            collision_world.descent(entity);
        }

        {
            puffin::profile_scope!("move body");

            if collision_world.move_vertical(&mut transforms, entity, body.velocity.y * time_factor)
            {
                body.velocity.y *= -body.bounciness;
            }

            // NOTE: It's important that we move horizontally after we move vertically, or else the
            // horizontal movement will clear our `descent` and `seen_wood` flags and we may not go
            // through drop through platforms while moving horizontally.
            if collision_world.move_horizontal(
                &mut transforms,
                entity,
                body.velocity.x * time_factor,
            ) {
                body.velocity.x *= -body.bounciness;
            }
        }

        // Check ground collision
        {
            let mut transform = transforms.get(entity).copied().unwrap();

            // If not moving, this collision test should give the same result, and will not change the value of fall_through.
            // for controlled bodies, fall_through may be modified based on inputs, and we may actually want this to be set again here,
            // so only skip if not moving for bodies that are not controlled.
            if has_moved || !body.is_controlled {
                puffin::profile_scope!("fall through check");
                // Don't get stuck floating in fall-through platforms
                if body.velocity == Vec2::ZERO
                    && collision_world.tile_collision_filtered(transform, body.shape, |ent| {
                        collision_world
                            .tile_collision_kinds
                            .get(ent)
                            .map(|x| *x == TileCollisionKind::JumpThrough)
                            .unwrap_or(false)
                    }) == TileCollisionKind::JumpThrough
                {
                    body.fall_through = true;
                }
            }

            // Move transform check down 1 slightly
            transform.translation.y -= 0.1;

            body.was_on_ground = body.is_on_ground;

            let collider = collision_world.get_collider(entity);

            let tile = collision_world.tile_collision_filtered(transform, body.shape, |ent| {
                if collider.seen_wood {
                    collision_world
                        .tile_collision_kinds
                        .get(ent)
                        .map(|x| *x != TileCollisionKind::JumpThrough)
                        .unwrap_or(false)
                } else {
                    true
                }
            });

            let on_jump_through_tile = tile == TileCollisionKind::JumpThrough;
            body.is_on_ground =
                tile != TileCollisionKind::Empty && !(on_jump_through_tile && body.fall_through);
            body.is_on_platform = body.is_on_ground && on_jump_through_tile;
        }

        if body.is_on_ground {
            if body.has_friction {
                body.velocity.x *= if let Some(friction) = body.frame_friction_override {
                    friction
                } else {
                    meta.core.physics.friction_lerp
                };
                body.frame_friction_override = None;

                if body.velocity.x.abs() <= meta.core.physics.stop_threshold {
                    body.velocity.x = 0.0;
                }

                body.velocity.y *= meta.core.physics.friction_lerp;
            }

            if body.velocity.y <= body.gravity * time_factor {
                body.velocity.y = 0.0;
            }
        }

        if !body.is_on_ground && body.has_mass {
            body.velocity.y -= body.gravity * time_factor;

            if body.velocity.y < -meta.core.physics.terminal_velocity {
                body.velocity.y = -meta.core.physics.terminal_velocity;
            }
        }

        if body.can_rotate {
            apply_rotation(
                time_factor,
                transforms.get_mut(entity).unwrap(),
                body.velocity,
                body.angular_velocity,
                body.is_on_ground,
                body.shape,
            );
        }
    }
}

/// Helper function to apply rotation to a kinematic body.
fn apply_rotation(
    delta_time: f32,
    transform: &mut Transform,
    velocity: Vec2,
    angular_velocity: f32,
    is_on_ground: bool,
    collider_shape: ColliderShape,
) {
    puffin::profile_function!();

    let mut angle = transform.rotation.to_euler(EulerRot::XYZ).2;

    if is_on_ground {
        if matches!(collider_shape, ColliderShape::Circle { .. }) {
            angle += velocity.x.abs() * angular_velocity;
        }
    } else {
        angle += (angular_velocity * delta_time).to_radians();
    }

    transform.rotation = Quat::from_rotation_z(angle);
}

```

`src/core/physics/collisions.rs`:

```rs
//! Collision detection implementation.

use std::hash::BuildHasherDefault;

use indexmap::IndexMap;

use rapier::Vector;
use rapier2d::geometry::InteractionGroups;
use rapier2d::parry::query::ShapeCastOptions;
pub use rapier2d::prelude as rapier;
pub use shape::*;

pub mod filtering;
mod shape;

use crate::collisions::filtering::CollisionGroup;
use crate::collisions::filtering::SolverGroup;
use crate::impl_system_param;
use crate::prelude::*;

/// Resource containing the data structures needed for rapier collision detection.
#[derive(HasSchema, Default)]
pub struct RapierContext {
    pub collision_pipeline: rapier::CollisionPipeline,
    pub broad_phase: rapier::DefaultBroadPhase,
    pub narrow_phase: rapier::NarrowPhase,
    pub query_pipeline: rapier::QueryPipeline,
    pub collider_set: rapier::ColliderSet,
    pub rigid_body_set: rapier::RigidBodySet,
    pub collider_shape_cache: ColliderShapeCache,
    pub collision_cache: CollisionCache,
    pub physics_hooks: PhysicsHooks,
    pub physics_pipeline: rapier::PhysicsPipeline,
    pub islands: rapier::IslandManager,
    pub impulse_joints: rapier::ImpulseJointSet,
    pub ccd_solver: rapier::CCDSolver,
    pub multibody_joints: rapier::MultibodyJointSet,
    pub integration_params: rapier::IntegrationParameters,
}

impl Clone for RapierContext {
    fn clone(&self) -> Self {
        Self {
            // The collision pipeline is just a cache and while we can't clone it, creating a new one is
            // perfectly valid.
            collision_pipeline: default(),
            broad_phase: self.broad_phase.clone(),
            narrow_phase: self.narrow_phase.clone(),
            query_pipeline: self.query_pipeline.clone(),
            collider_set: self.collider_set.clone(),
            rigid_body_set: self.rigid_body_set.clone(),
            collider_shape_cache: self.collider_shape_cache.clone(),
            collision_cache: self.collision_cache.clone(),
            physics_hooks: self.physics_hooks.clone(),
            // Probably should keep this around, it's safe to drop data as only temp buffers,
            // but re-creating may hurt performance.
            physics_pipeline: rapier::PhysicsPipeline::default(),
            islands: self.islands.clone(),
            impulse_joints: self.impulse_joints.clone(),
            ccd_solver: self.ccd_solver.clone(),
            multibody_joints: self.multibody_joints.clone(),
            integration_params: self.integration_params,
        }
    }
}

/// A cache containing a map of entities, to the list of entities that each entity is currently
/// intersecting with.
pub struct CollisionCache {
    /// The collisions in the cache.
    pub collisions: Arc<AtomicCell<IndexMap<Entity, Vec<Entity>, EntityBuildHasher>>>,

    /// Map removed collider handles to entities. When Rapier gives collision event for removal,
    /// the collider is no longer in [`rapier::ColliderSet`], thus we cannot retrieve our user data
    /// and determine entity to be removed.
    ///
    /// Colliders should be added here on removal for event processing, this is cleared each frame.
    ///
    /// TODO: Consider a safer way to handle this that doesn't involve remembering to update this on
    /// removal.
    removed_colliders: IndexMap<rapier::ColliderHandle, Entity>,
}

impl Default for CollisionCache {
    fn default() -> Self {
        Self {
            collisions: Arc::new(AtomicCell::new(IndexMap::default())),
            removed_colliders: Default::default(),
        }
    }
}

/// Pass-through hasher for entities to reduce hashing cost when using them as keys in a hash map.
#[derive(Default)]
pub struct EntityHasher {
    bytes_so_far: usize,
    data: [u8; 8],
}
type EntityBuildHasher = BuildHasherDefault<EntityHasher>;

impl std::hash::Hasher for EntityHasher {
    fn finish(&self) -> u64 {
        u64::from_ne_bytes(self.data)
    }
    fn write(&mut self, bytes: &[u8]) {
        if self.bytes_so_far + bytes.len() <= 8 {
            self.data[self.bytes_so_far..(self.bytes_so_far + bytes.len())].copy_from_slice(bytes);
            self.bytes_so_far += bytes.len()
        } else {
            panic!("Too much data for `EntityHasher`. Will only accept 64 bits.")
        }
    }
}

impl CollisionCache {
    /// Get the set of entities that the given `entity` is intersecting.
    pub fn get(&self, entity: Entity) -> RefMut<'_, Vec<Entity>> {
        RefMut::map(self.collisions.borrow_mut(), |x| {
            x.entry(entity).or_default()
        })
    }

    /// Notify cache of removal of collider to correctly handle stop event on removed collider.
    /// see `Self::removed_colliders_userdata` field comment for details.
    pub fn collider_removed(&mut self, entity: Entity, collider_handle: rapier::ColliderHandle) {
        self.removed_colliders.insert(collider_handle, entity);
    }

    /// Clear tracked data for removed colliders this frame (call after rapier update)
    pub fn clear_removed_colliders(&mut self) {
        self.removed_colliders.clear();
    }
}

impl Clone for CollisionCache {
    fn clone(&self) -> Self {
        Self {
            collisions: Arc::new(AtomicCell::new((*self.collisions.borrow()).clone())),
            removed_colliders: self.removed_colliders.clone(),
        }
    }
}

/// Update the collision cache with rapier collision events.
impl rapier::EventHandler for &mut CollisionCache {
    fn handle_collision_event(
        &self,
        _bodies: &rapier::RigidBodySet,
        colliders: &rapier::ColliderSet,
        event: rapier::CollisionEvent,
        _contact_pair: Option<&rapier::ContactPair>,
    ) {
        match event {
            rapier::CollisionEvent::Started(a, b, _) => {
                let a_ent = RapierUserData::entity(colliders.get(a).unwrap().user_data);
                let b_ent = RapierUserData::entity(colliders.get(b).unwrap().user_data);

                self.collisions
                    .borrow_mut()
                    .entry(a_ent)
                    .or_default()
                    .push(b_ent);
                self.collisions
                    .borrow_mut()
                    .entry(b_ent)
                    .or_default()
                    .push(a_ent);
            }
            rapier::CollisionEvent::Stopped(a, b, _) => {
                let a_ent = match colliders.get(a) {
                    Some(a) => RapierUserData::entity(a.user_data),
                    None => {
                        if let Some(a_ent) = self.removed_colliders.get(&a) {
                            *a_ent
                        } else {
                            return;
                        }
                    }
                };
                let b_ent = match colliders.get(b) {
                    Some(b) => RapierUserData::entity(b.user_data),
                    None => {
                        if let Some(b_ent) = self.removed_colliders.get(&b) {
                            *b_ent
                        } else {
                            return;
                        }
                    }
                };

                self.collisions
                    .borrow_mut()
                    .entry(a_ent)
                    .or_default()
                    .retain(|e| e != &b_ent);
                self.collisions
                    .borrow_mut()
                    .entry(b_ent)
                    .or_default()
                    .retain(|e| e != &a_ent);
            }
        }
    }

    fn handle_contact_force_event(
        &self,
        _dt: rapier::Real,
        _bodies: &rapier::RigidBodySet,
        _colliders: &rapier::ColliderSet,
        _contact_pair: &rapier::ContactPair,
        _total_force_magnitude: rapier::Real,
    ) {
    }
}

/// Errors produced from physics system
#[derive(thiserror::Error, Debug)]
pub enum PhysicsError {
    #[error("Physics body not initialized: {0}")]
    BodyNotInitialized(String),
}

#[derive(Default, Clone)]
pub struct PhysicsHooks;

impl rapier::PhysicsHooks for PhysicsHooks {
    fn filter_contact_pair(
        &self,
        _context: &rapier::PairFilterContext,
    ) -> Option<rapier::SolverFlags> {
        // No contact pair filtering hook currently implemented
        Some(rapier::SolverFlags::COMPUTE_IMPULSES)
    }

    fn filter_intersection_pair(&self, _context: &rapier::PairFilterContext) -> bool {
        // No intersection pair hook currently implemented
        true
    }

    fn modify_solver_contacts(&self, context: &mut rapier::ContactModificationContext) {
        // Determine if jump through modifiation is needed:
        // (If one body is a player, and other is jump through tile.)

        let collider1 = context.colliders.get(context.collider1).unwrap();
        let body1 = context.bodies.get(context.rigid_body1.unwrap()).unwrap();
        let collider2 = context.colliders.get(context.collider2).unwrap();
        let body2 = context.bodies.get(context.rigid_body2.unwrap()).unwrap();

        let mut jump_through_body: Option<&rapier::RigidBody> = None;
        let mut other_body: Option<&rapier::RigidBody> = None;

        // Determine which body is jump through collider, if any.
        if collider1
            .solver_groups()
            .memberships
            .intersects(SolverGroup::JUMP_THROUGH.bits().into())
        {
            jump_through_body = Some(body1);
            other_body = Some(body2);
        } else if collider2
            .solver_groups()
            .memberships
            .intersects(SolverGroup::JUMP_THROUGH.bits().into())
        {
            jump_through_body = Some(body2);
            other_body = Some(body1);
        }

        if jump_through_body.is_some() {
            let other_body = other_body.unwrap();

            if other_body.linvel().y > 0.0 {
                context.solver_contacts.clear();
            }
        }
    }
}

impl_system_param! {
    pub struct CollisionWorld<'a> {
        entities: Res<'a, Entities>,

        /// The rapier context.
        ctx: ResMutInit<'a, RapierContext>,

        /// Actors are things like players that move around and detect collisions, but don't collide
        /// with other actors.
        actors: CompMut<'a, Actor>,
        /// Solids are things like walls and platforms, that aren't tiles, that have solid
        /// collisions.
        solids: CompMut<'a, Solid>,
        /// A collider is anything that can detect collisions in the world other than tiles, and
        /// must either be an [`Actor`] or [`Solid`] to participate in collision detection.
        colliders: CompMut<'a, Collider>,
        /// Contains the rapier collider handles for each map tile.
        tile_rapier_handles: CompMut<'a, TileRapierHandle>,

        tile_layers: Comp<'a, TileLayer>,
        tile_collision_kinds: Comp<'a, TileCollisionKind>,
        tile_dynamic_colliders: Comp<'a, TileDynamicCollider>,
        spawned_map_layer_metas: Comp<'a, SpawnedMapLayerMeta>,
    }
}

impl<'a> CollisionWorld<'a> {
    /// Update shape of actor's [`Collider`]. Warns if entity does not have an [`Actor`] component.
    ///
    /// Updates shape on `Collider` and rebuilds rapier's collider on rigidbody.
    ///
    /// Use [`Self::set_actor_shape_from_builder`] for more control over new collider's settings.
    pub fn set_actor_shape(&mut self, entity: Entity, shape: ColliderShape) {
        let shared_shape = self.ctx.collider_shape_cache.shared_shape(shape);
        let new_collider = build_actor_rapier_collider(entity, shared_shape.clone());
        self.set_actor_shape_from_builder(entity, new_collider, shape);
    }

    /// Update shape of actor's [`Collider`]. Warns if entity does not have an [`Actor`] component.
    ///
    /// Updates shape on `Collider` and rebuilds rapier's collider on rigidbody.
    ///
    /// Accepts a [`rapier::ColliderBuilder`] (can get one with [`build_actor_rapier_collider`]) so
    /// other settings may be configured on new collider.
    pub fn set_actor_shape_from_builder(
        &mut self,
        entity: Entity,
        mut collider_builder: rapier::ColliderBuilder,
        shape: ColliderShape,
    ) {
        if !self.actors.contains(entity) {
            // This doesn't technically need be restricted, however we use default settings of collider for Actor,
            // and function would need to be updated to do this correctly for Solids, Tiles, or other classes of body.
            warn!("CollisionWorld::set_actor_shape called on entity that is not an Actor.");
            return;
        }

        if let Some(collider) = self.colliders.get_mut(entity) {
            collider.shape = shape;

            if let Some(handle) = collider.rapier_handle {
                let RapierContext {
                    rigid_body_set,
                    collision_cache,
                    collider_set,
                    islands,
                    ..
                } = &mut *self.ctx;

                let rapier_body = rigid_body_set.get_mut(handle).unwrap();

                {
                    let collider_handle = rapier_body.colliders()[0];
                    let current_rapier_collider = collider_set.get(collider_handle).unwrap();

                    // Update new collider with any settings that need to be synchronized
                    collider_builder = collider_builder.sensor(current_rapier_collider.is_sensor());

                    // Remove body's current collider
                    let wake_up = true;
                    collider_set.remove(collider_handle, islands, rigid_body_set, wake_up);

                    // Notify collision event cache handle was removed
                    //
                    // We may get a stop/start even while changing collider. This is required to make sure
                    // collision event is properly handled by rapier.
                    collision_cache.collider_removed(entity, collider_handle);
                }

                // Insert body's new collider
                collider_set.insert_with_parent(collider_builder, handle, rigid_body_set);
            } else {
                // We have an existing Collider but no rapier body yet, shape was updated on Collider
                // and will be used when body is created.
            }
        } else {
            // No existing collider, insert new one with shape.
            // Not really expecting this case to be called, but might as well handle it.
            // rapier body will be created on next call to `sync_colliders`.
            self.colliders.insert(
                entity,
                Collider {
                    shape,
                    ..Default::default()
                },
            );
        }
    }

    /// Call closure with mutable reference to [`rapier::RigidBody`] for entity.
    ///
    /// # Errors
    /// - [`PhysicsError::BodyNotInitialized`] when called before physics is updated to initialize body after
    ///   a [`Collider`] component is newly added. (If missing collider or rapier handle does not map to body).
    pub fn mutate_rigidbody(
        &mut self,
        entity: Entity,
        command: impl FnOnce(&mut rapier::RigidBody),
    ) -> Result<(), PhysicsError> {
        if let Some(collider) = self.colliders.get(entity) {
            if let Some(handle) = collider.rapier_handle {
                if let Some(body) = self.ctx.rigid_body_set.get_mut(handle) {
                    command(body);
                    Ok(())
                } else {
                    Err(PhysicsError::BodyNotInitialized(
                        "Rigidbody handle found but not in rigid body set.".to_string(),
                    ))
                }
            } else {
                Err(PhysicsError::BodyNotInitialized(
                    "Entity has collider that is missing rapier handle.".to_string(),
                ))
            }
        } else {
            Err(PhysicsError::BodyNotInitialized(
                "Entity does not have a Collider component.".to_string(),
            ))
        }
    }
}

/// Helper function for configuring ColliderBuilder for actors.
pub fn build_actor_rapier_collider(
    entity: Entity,
    shared_shape: rapier::SharedShape,
) -> rapier::ColliderBuilder {
    // Do not filter collision pairs, get all collision events
    let collision_membership = CollisionGroup::DEFAULT;
    let collision_filter = CollisionGroup::ALL;
    // Only generate contact forces (when simulating) with solids/tiles, not other dynamics.
    // This is not relevant if only Kinematic, only relevant if DynamicBody is added and switched to simulating.
    let simulation_membership = SolverGroup::DYNAMIC;
    let simulation_filter = SolverGroup::SOLID_WORLD | SolverGroup::JUMP_THROUGH;

    rapier::ColliderBuilder::new(shared_shape)
        .active_events(rapier::ActiveEvents::COLLISION_EVENTS)
        .active_collision_types(rapier::ActiveCollisionTypes::all())
        .collision_groups(rapier::InteractionGroups::new(
            collision_membership.bits().into(),
            collision_filter.bits().into(),
        ))
        .solver_groups(rapier::InteractionGroups::new(
            simulation_membership.bits().into(),
            simulation_filter.bits().into(),
        ))
        .sensor(true)
        .user_data(RapierUserData::from(entity))
}

/// An actor in the physics simulation.
#[derive(Default, Clone, Copy, Debug, HasSchema)]
#[repr(C)]
pub struct Actor;

/// A solid in the physics simulation.
#[derive(Default, Clone, Copy, Debug, HasSchema)]
#[repr(C)]
pub struct Solid {
    pub disabled: bool,
    pub pos: Vec2,
    pub size: Vec2,
    #[schema(opaque)]
    pub rapier_handle: Option<rapier::RigidBodyHandle>,
}

/// A collider body in the physics simulation.
///
/// This is only used for actors in the simulation, not for tiles or solids.
#[derive(Default, Clone, Debug, HasSchema)]
#[repr(C)]
pub struct Collider {
    // TODO: We used to have an offset here in the `Collider` struct, but I think maybe that should
    // become a part of the collision shape, not part of the collider. So if you need an offset
    // collider, maybe that means a compound collider shape with an offset collider in it.
    //
    // When we have a separate offset here, we have to remember and correctly apply the offset,
    // every time we check a collision between this colliders shape, at the colliders transform. It
    // kept causing bugs in colliders with offsets. That may still be the best option, and we just
    // have to deal with it, but we should consider the offset being included in the collider shape.
    pub shape: ColliderShape,
    // Whether or not the collider is disabled.
    pub disabled: bool,
    /// Whether or not the collider wants to drop through jump-through platforms.
    pub descent: bool,
    /// Whether or not the collider is in the process of going through a jump-through platform.
    pub seen_wood: bool,
    /// The handle to the Rapier rigid body associated to this collider, if one has been spawned as
    /// of yet.
    #[schema(opaque)]
    pub rapier_handle: Option<rapier::RigidBodyHandle>,
}

/// Component added to tiles that have been given corresponding rapier colliders.
#[derive(Default, Clone, Debug, HasSchema, Deref, DerefMut)]
pub struct TileRapierHandle(pub rapier::RigidBodyHandle);

/// Component added to tiles that have an additional collider used for interaction with
/// dynamic bodies that simulate physics.
///
/// This collider is added to rapier body stored in [`TileRapierHandle`]. If present,
/// default collider will not interact with dynamics, and this one will.
///
/// This is mostly useful for Jump through tiles.
#[derive(Default, Clone, HasSchema)]
pub struct TileDynamicCollider {
    /// Shape of collider, should be contained within tile.
    pub shape: ColliderShape,

    /// Offset of collider from center of tile.
    pub offset: Vec2,
}

/// Namespace struct for converting rapier collider user data to/from [`Entity`].
pub struct RapierUserData;
impl RapierUserData {
    /// Create rapier user data value from the entity `e`.
    pub fn from(e: Entity) -> u128 {
        let mut out = 0u128;

        out |= e.index() as u128;
        out |= (e.generation() as u128) << 32;

        out
    }

    /// Get an [`Entity`] from the given Rapier user data ( assuming the user data was created with
    /// [`RapierUserData::from`] ).
    pub fn entity(user_data: u128) -> Entity {
        let index = (u32::MAX as u128) & user_data;
        let generation = (u32::MAX as u128) & (user_data >> 32);
        Entity::new(index as u32, generation as u32)
    }
}

/// The kind of collision that a map tile has.
#[derive(Default, PartialEq, Eq, Clone, Copy, Debug, HasSchema, Serialize, Deserialize)]
#[repr(u8)]
#[derive_type_data(SchemaDeserialize)]
pub enum TileCollisionKind {
    #[default]
    Empty,
    Solid,
    JumpThrough,
}

impl TileCollisionKind {
    /// Get the solver group for tile, this is collision filtering group
    /// used against dynamic bodies that simulate physical collision.
    /// Does not impact event filtering.
    pub fn simulation_group_membership(&self) -> SolverGroup {
        match self {
            TileCollisionKind::Empty => SolverGroup::NONE,
            TileCollisionKind::Solid => SolverGroup::SOLID_WORLD,
            TileCollisionKind::JumpThrough => SolverGroup::JUMP_THROUGH,
        }
    }
}

/// Parameters for physics step
pub struct PhysicsParams {
    /// Gravity (positive value is downward force)
    pub gravity: f32,

    /// Terminal velocity (effectively min velocity on y axis, body will not fall faster than this).
    pub terminal_velocity: Option<f32>,
}

impl<'a> CollisionWorld<'a> {
    /// Updates the collision world with the entity's actual transforms.
    /// Advance physics, synchronize position of dynamic bodies.
    ///
    /// If the transform of an entity is changed without calling `update()`, then collision queries
    /// will be out-of-date with the actual entity positions.
    ///
    /// > **⚠️ Warning:** This does **not** update the map tile collisions. To do that, call
    /// > [`update_tiles()`][Self::update_tiles] instead.
    pub fn update(
        &mut self,
        dt: f32,
        physics_params: PhysicsParams,
        transforms: &mut CompMut<Transform>,
        dynamic_bodies: &mut CompMut<DynamicBody>,
    ) {
        puffin::profile_function!();

        self.sync_bodies(&*transforms, dynamic_bodies);
        self.apply_simulation_commands(&mut *dynamic_bodies);

        let RapierContext {
            broad_phase,
            collider_set,
            query_pipeline,
            collision_cache,
            rigid_body_set,
            narrow_phase,
            physics_hooks,
            physics_pipeline,
            islands,
            impulse_joints,
            ccd_solver,
            multibody_joints,
            integration_params,
            ..
        } = &mut *self.ctx;

        // Delete any bodies that don't have alive entities
        let mut to_delete = Vec::new();
        for (handle, body) in rigid_body_set.iter() {
            let entity = RapierUserData::entity(body.user_data);

            if !self.entities.is_alive(entity) {
                // Remove any collisions with the killed entity from the collision cache.
                let mut collisions = collision_cache.collisions.borrow_mut();
                let colliding_with = collisions.swap_remove(&entity);
                if let Some(colliding_with) = colliding_with {
                    for other_entity in colliding_with {
                        if let Some(collisions) = collisions.get_mut(&other_entity) {
                            collisions.retain(|e| e != &entity);
                        }
                    }
                }

                // Delete the rigid body
                to_delete.push(handle);
            }
        }

        for body_handle in to_delete {
            rigid_body_set.remove(
                body_handle,
                islands,
                collider_set,
                impulse_joints,
                multibody_joints,
                true,
            );
        }

        // Step physics pipeline, also steps collision pipeline and updates collision cache.
        integration_params.dt = dt;
        physics_pipeline.step(
            &Vector::new(0.0, -physics_params.gravity),
            integration_params,
            islands,
            broad_phase,
            narrow_phase,
            rigid_body_set,
            collider_set,
            impulse_joints,
            multibody_joints,
            ccd_solver,
            Some(query_pipeline),
            physics_hooks,
            &collision_cache,
        );

        // Force a full rebuild of broadphase
        // PhysicsPipeline step should incrementally update it, but due to an issue with
        // incrementally rebalancing BVH in parry2d, the tree becomes unbalanced and query perf tanks.
        // Rebuilding it every frame is quite fast for our game, and avoids this issue.
        // https://github.com/fishfolk/jumpy/issues/961
        query_pipeline.update(rigid_body_set, collider_set);

        // Iter on each dynamic rigid-bodies that moved.
        for rigid_body_handle in islands.active_dynamic_bodies() {
            let rigid_body = rigid_body_set.get_mut(*rigid_body_handle).unwrap();
            let entity = RapierUserData::entity(rigid_body.user_data);
            if let Some(dynamic_body) = dynamic_bodies.get_mut(entity) {
                if dynamic_body.is_dynamic {
                    let transform = transforms.get_mut(entity).unwrap();
                    let rotation = Quat::from_rotation_z(rigid_body.rotation().angle());
                    // Get translation from physics and preserve Z offset of transform
                    let translation: Vec3 = rigid_body
                        .translation()
                        .xy()
                        .push(transform.translation.z)
                        .into();
                    transform.translation = translation;
                    transform.rotation = rotation;

                    // Apply terminal velocity. Without this kinematic and dynamic objects may
                    // fall at different speeds even if same graviy applied. This is used to mirror
                    // kinematic motion of gravity + terminal vel limit.
                    if let Some(terminal_vel) = physics_params.terminal_velocity {
                        let mut vel = *rigid_body.linvel();
                        if vel.y < -terminal_vel {
                            vel.y = -terminal_vel;
                            rigid_body.set_linvel(vel, true);
                        }
                    }

                    // Update simulation output for tracking if transform is modified outside of rapier
                    // next frame.
                    dynamic_body.update_last_rapier_synced_transform(translation, rotation)
                } else {
                    warn!("Active dynamic bodies contained DynamicBody that is not simulating");
                }
            } else {
                warn!("Active dynamic bodies contained entity that does not have a DynamicBody.");
            }
        }

        // Reset tracking of removed colliders for this frame
        collision_cache.clear_removed_colliders();
    }

    /// Sync the transforms and attributes ( like `disabled` ) of the colliders.
    /// Creates rapier bodies for any object with collision.
    ///
    /// Handle [`DynamicBody`] toggling between simulation and kinematic mode.
    pub fn sync_bodies<'b, Tq>(&mut self, transforms: Tq, dynamic_bodies: &mut CompMut<DynamicBody>)
    where
        Tq: QueryItem,
        Tq::Iter: Iterator<Item = &'b Transform>,
    {
        puffin::profile_function!();

        let RapierContext {
            rigid_body_set,
            collider_set,
            collider_shape_cache,
            ..
        } = &mut *self.ctx;
        for (ent, (transform, collider, dynamic_body)) in self.entities.iter_with((
            transforms,
            &mut self.colliders,
            &mut OptionalMut(dynamic_bodies),
        )) {
            // Get the rapier shape.
            //
            // TODO: Evaluate whether or not caching the colliders like this actually improves
            // performance.
            let shared_shape = collider_shape_cache.shared_shape(collider.shape);

            let is_dynamic = match dynamic_body.as_ref() {
                Some(dynamic_body) => dynamic_body.is_dynamic,
                None => false,
            };

            // Get the handle to the rapier collider, creating it if it doesn't exist.
            let rapier_handle = collider.rapier_handle.get_or_insert_with(|| {
                // Initialize body
                let body_handle = rigid_body_set.insert(if is_dynamic {
                    rapier::RigidBodyBuilder::dynamic().user_data(RapierUserData::from(ent))
                } else if KINEMATIC_MODE == rapier::RigidBodyType::KinematicPositionBased {
                    rapier::RigidBodyBuilder::kinematic_position_based()
                        .user_data(RapierUserData::from(ent))
                } else {
                    rapier::RigidBodyBuilder::kinematic_velocity_based()
                        .user_data(RapierUserData::from(ent))
                });

                collider_set.insert_with_parent(
                    build_actor_rapier_collider(ent, shared_shape.clone()),
                    body_handle,
                    rigid_body_set,
                );
                body_handle
            });
            let rapier_body = rigid_body_set.get_mut(*rapier_handle).unwrap();
            let rapier_collider = collider_set.get_mut(rapier_body.colliders()[0]).unwrap();

            if let Some(dynamic_body) = dynamic_body {
                // Handle changes in is_dynamic
                let was_dynamic = matches!(rapier_body.body_type(), rapier::RigidBodyType::Dynamic);
                if !was_dynamic && is_dynamic {
                    rapier_body.set_body_type(rapier::RigidBodyType::Dynamic, true);

                    // Clear any velocity that may be left from previously simulating body.
                    // If Dynamic is newly initialized or user wants to apply velocity changes before next step,
                    // `DynamicBody::push_simulation_command` may be used which is called after this operation.
                    rapier_body.set_linvel(Vector::zeros(), true);
                    rapier_body.set_angvel(0.0, true);

                    // TODO: We may want to synchronize kinematic body's gravity, mass, and other properties.

                    rapier_collider.set_sensor(false);

                    // Enable contact modification for all bodies to handle stuff like jump through.
                    rapier_collider.set_active_hooks(rapier::ActiveHooks::MODIFY_SOLVER_CONTACTS);
                } else if was_dynamic && !is_dynamic {
                    rapier_collider.set_sensor(true);
                    rapier_collider.set_active_hooks(rapier::ActiveHooks::empty());

                    rapier_body.set_body_type(KINEMATIC_MODE, true);
                }

                // This function still calls for position update if is_dynamic = false
                if dynamic_body.simulation_transform_needs_update(transform) {
                    rapier_body.set_position(
                        rapier::Isometry::new(
                            transform.translation.truncate().to_array().into(),
                            transform.rotation.to_euler(EulerRot::XYZ).2,
                        ),
                        true,
                    )
                }
            } else {
                // update position of kinematics
                //
                // TODO: we may want to use rapier::RigidBody::set_next_kinematic_position
                // so rapier computes velocity of kinematics for better interaction with dynamics,
                // however we don't currently have any kinematic <-> dynamic interaction.
                rapier_body.set_position(
                    rapier::Isometry::new(
                        transform.translation.truncate().to_array().into(),
                        transform.rotation.to_euler(EulerRot::XYZ).2,
                    ),
                    true,
                );
            }
            rapier_collider.set_enabled(!collider.disabled);
        }

        for (solid_ent, solid) in self.entities.iter_with(&mut self.solids) {
            let bones_shape = ColliderShape::Rectangle { size: solid.size };
            let shared_shape = collider_shape_cache.shared_shape(bones_shape);

            // Get or create a collider for the solid
            let handle = solid.rapier_handle.get_or_insert_with(|| {
                let body_handle = rigid_body_set.insert(
                    rapier::RigidBodyBuilder::fixed().user_data(RapierUserData::from(solid_ent)),
                );
                // Membership default, does not filter out collision events.
                let collision_membership = CollisionGroup::DEFAULT;
                let collision_filter = CollisionGroup::ALL;
                // Solids do not filter contact forces with other bodies.
                let simulation_membership = SolverGroup::SOLID_WORLD;
                let simulation_filter = SolverGroup::ALL;
                collider_set.insert_with_parent(
                    rapier::ColliderBuilder::new(shared_shape.clone())
                        .active_events(rapier::ActiveEvents::COLLISION_EVENTS)
                        .active_collision_types(rapier::ActiveCollisionTypes::all())
                        .collision_groups(InteractionGroups::new(
                            collision_membership.bits().into(),
                            collision_filter.bits().into(),
                        ))
                        .solver_groups(InteractionGroups::new(
                            simulation_membership.bits().into(),
                            simulation_filter.bits().into(),
                        ))
                        .user_data(RapierUserData::from(solid_ent)),
                    body_handle,
                    rigid_body_set,
                );
                body_handle
            });
            let solid_body = rigid_body_set.get_mut(*handle).unwrap();

            // Update the solid position
            solid_body.set_translation(rapier::Vector::new(solid.pos.x, solid.pos.y), false);

            let rapier_collider = collider_set.get_mut(solid_body.colliders()[0]).unwrap();
            rapier_collider.set_enabled(!solid.disabled);
            rapier_collider.set_position_wrt_parent(rapier::Isometry::new(default(), 0.0));
            rapier_collider.set_shape(shared_shape.clone());
        }
    }

    /// Apply simulation commands to dynamic bodies.
    ///
    /// # Panics
    ///
    /// This should be called after bodies are initialized, [`DynamicBody`] must have
    /// a [`Collider`] with valid `rapier::RigidBodyHandle` otherwise will panic.
    fn apply_simulation_commands<'b, Dq>(&mut self, dynamic_bodies: Dq)
    where
        Dq: QueryItem,
        Dq::Iter: Iterator<Item = &'b mut DynamicBody>,
    {
        for (ent, dynamic_body) in self.entities.iter_with(dynamic_bodies) {
            // This will consume commands even if body is_dynamic is false.
            let commands = dynamic_body.simulation_commands();
            if dynamic_body.is_dynamic {
                let collider = self.colliders.get(ent).unwrap();
                let rapier_handle = collider.rapier_handle.unwrap();
                let rapier_body = self.ctx.rigid_body_set.get_mut(rapier_handle).unwrap();
                for command in commands {
                    command(rapier_body);
                }
            }
        }
    }

    /// Update all of the map tile collisions.
    ///
    /// You should only need to call this when spawning or otherwise completely rebuilding the map
    /// layout.
    pub fn update_tiles(&mut self) {
        self.update_tiles_with_filter(|_, _| true);
    }

    /// Update the collision for the tile with the given layer index and map grid position.
    pub fn update_tile(&mut self, layer_idx: u32, pos: UVec2) {
        self.update_tiles_with_filter(|idx, p| layer_idx == idx && pos == p);
    }

    /// Update the collisions for map tiles that pass the given filter.
    ///
    /// The filter is a function that takes the layer index and the tile position as an argument.
    pub fn update_tiles_with_filter<F>(&mut self, mut filter: F)
    where
        F: FnMut(u32, UVec2) -> bool,
    {
        let RapierContext {
            rigid_body_set,
            collider_set,
            collider_shape_cache,
            ..
        } = &mut *self.ctx;
        for (_, (layer, meta)) in self
            .entities
            .iter_with((&self.tile_layers, &self.spawned_map_layer_metas))
        {
            let tile_shared_shape = collider_shape_cache
                .shared_shape(ColliderShape::Rectangle {
                    size: layer.tile_size,
                })
                .clone();
            for x in 0..layer.grid_size.x {
                for y in 0..layer.grid_size.y {
                    let pos = uvec2(x, y);
                    if !filter(meta.layer_idx, pos) {
                        continue;
                    };

                    let Some(tile_ent) = layer.get(pos) else {
                        continue;
                    };
                    let collider_x = x as f32 * layer.tile_size.x + layer.tile_size.x / 2.0;
                    let collider_y = y as f32 * layer.tile_size.y + layer.tile_size.y / 2.0;

                    // Get dynamic collider if we have one
                    let dynamic_collider = self.tile_dynamic_colliders.get(tile_ent);

                    // Get or create a collider for the tile
                    let handle = self
                        .tile_rapier_handles
                        .get(tile_ent)
                        .map(|x| **x)
                        .unwrap_or_else(|| {
                            let body_handle = rigid_body_set.insert(
                                rapier::RigidBodyBuilder::fixed()
                                    .user_data(RapierUserData::from(tile_ent)),
                            );

                            // Set SolverGroup based on collision kind so dynamic bodies
                            // know if they should generate contact forces with tile or not.
                            let mut simulation_membership = SolverGroup::NONE;
                            if let Some(collision_kind) = self.tile_collision_kinds.get(tile_ent) {
                                simulation_membership =
                                    collision_kind.simulation_group_membership();
                            }
                            let simulation_filter = SolverGroup::ALL;

                            // Sim group for default tile collider. This is not used for collision
                            // (only used for events) if an additional "dynamic" collider is present
                            // to be used for collision response.
                            let mut default_collider_sim_membership = simulation_membership;
                            if dynamic_collider.is_some() {
                                default_collider_sim_membership = SolverGroup::NONE;
                            }

                            // Insert default collider
                            collider_set.insert_with_parent(
                                rapier::ColliderBuilder::new(tile_shared_shape.clone())
                                    .active_events(rapier::ActiveEvents::COLLISION_EVENTS)
                                    .active_collision_types(rapier::ActiveCollisionTypes::all())
                                    .solver_groups(InteractionGroups::new(
                                        default_collider_sim_membership.bits().into(),
                                        simulation_filter.bits().into(),
                                    ))
                                    .user_data(RapierUserData::from(tile_ent)),
                                body_handle,
                                rigid_body_set,
                            );

                            // Insert dynamic collider if we have one
                            if let Some(dynamic_collider) = dynamic_collider {
                                let shared_shape =
                                    collider_shape_cache.shared_shape(dynamic_collider.shape);
                                collider_set.insert_with_parent(
                                    rapier::ColliderBuilder::new(shared_shape.clone())
                                        // Don't generate events for this collider
                                        .active_events(rapier::ActiveEvents::empty())
                                        // Only needs to collide with dynamics
                                        .active_collision_types(
                                            rapier::ActiveCollisionTypes::DYNAMIC_FIXED,
                                        )
                                        .solver_groups(InteractionGroups::new(
                                            simulation_membership.bits().into(),
                                            simulation_filter.bits().into(),
                                        ))
                                        .position(dynamic_collider.offset.into())
                                        .user_data(RapierUserData::from(tile_ent)),
                                    body_handle,
                                    rigid_body_set,
                                );
                            }
                            self.tile_rapier_handles
                                .insert(tile_ent, TileRapierHandle(body_handle));
                            body_handle
                        });
                    let tile_body = rigid_body_set.get_mut(handle).unwrap();

                    // Update the collider position
                    tile_body.set_translation(rapier::Vector::new(collider_x, collider_y), false);
                }
            }
        }
    }

    /// When spawning or teleporting an entity, this should be called to make sure the entity
    /// doesn't get stuck in semi-solid platforms, and properly falls out of them if it happens to
    /// be colliding with one when spawned.
    //
    // TODO: I believe we can make this method unnecessary by correctly detecting when a body is
    // stuck in a wood platform, with no ground below it.
    pub fn handle_teleport(&mut self, entity: Entity) {
        if self
            .ctx
            .collision_cache
            .get(entity)
            .iter()
            .any(|x| self.tile_collision_kinds.get(*x) == Some(&TileCollisionKind::JumpThrough))
        {
            let collider = self.colliders.get_mut(entity).unwrap();
            collider.descent = true;
            collider.seen_wood = true;
        }
    }

    /// Returns the collisions that one actor has with any other actors.
    pub fn actor_collisions(&self, entity: Entity) -> Vec<Entity> {
        if !self.actors.contains(entity) {
            return default();
        }
        if !self.colliders.contains(entity) {
            return default();
        };

        self.ctx
            .collision_cache
            .get(entity)
            .iter()
            .filter(|x| self.actors.contains(**x))
            .copied()
            .collect()
    }

    /// Returns the collisions that one actor has with any other actors filtered by the given Fn
    pub fn actor_collisions_filtered(
        &self,
        entity: Entity,
        filter: impl Fn(Entity) -> bool,
    ) -> Vec<Entity> {
        if !self.actors.contains(entity) {
            return default();
        }
        if !self.colliders.contains(entity) {
            return default();
        };

        self.ctx
            .collision_cache
            .get(entity)
            .iter()
            .filter(|x| self.actors.contains(**x) && filter(**x))
            .copied()
            .collect()
    }

    /// Put the entity's collider into descent mode so that it will fall through jump-through
    /// platforms.
    pub fn descent(&mut self, entity: Entity) {
        if self.actors.contains(entity) {
            let collider = self.colliders.get_mut(entity).unwrap();
            collider.descent = true;
        }
    }

    /// Attempt to move a body vertically. This will return `true` if an obstacle was run into that
    /// caused the movement to stop short.
    pub fn move_vertical(
        &mut self,
        transforms: &mut CompMut<Transform>,
        entity: Entity,
        mut dy: f32,
    ) -> bool {
        puffin::profile_function!();

        let RapierContext {
            query_pipeline,
            collider_set,
            rigid_body_set,
            collider_shape_cache,
            ..
        } = &mut *self.ctx;
        assert!(self.actors.contains(entity));
        if dy == 0.0 {
            return false;
        }

        // Get the shape and position info for the given entity
        let collider = self.colliders.get_mut(entity).unwrap();
        let transform = *transforms.get(entity).unwrap();
        let mut position = rapier::Isometry::new(
            transform.translation.truncate().into(),
            transform.rotation.to_euler(EulerRot::XYZ).2,
        );
        let shape = collider_shape_cache.shared_shape(collider.shape);

        let mut movement = 0.0;
        let collided = loop {
            // Do a shape cast in the direction of movement
            let velocity = rapier::Vector::new(0.0, dy);
            let collision = query_pipeline.cast_shape(
                rigid_body_set,
                collider_set,
                &position,
                &velocity,
                &**shape,
                ShapeCastOptions::with_max_time_of_impact(1.0),
                rapier::QueryFilter::new().predicate(&|_handle, rapier_collider| {
                    let ent = RapierUserData::entity(rapier_collider.user_data);

                    if self.solids.contains(ent) {
                        // Include all solid collisions
                        return true;
                    }

                    let Some(tile_kind) = self.tile_collision_kinds.get(ent) else {
                        // Ignore non-tile collisions
                        return false;
                    };

                    // Ignore jump-through tiles if we have already seen wood
                    !(collider.seen_wood && *tile_kind == TileCollisionKind::JumpThrough)
                }),
            );

            if let Some((handle, toi)) = collision {
                let ent = RapierUserData::entity(collider_set.get(handle).unwrap().user_data);

                // Move up to the point of collision
                let diff = dy * toi.time_of_impact;
                movement += diff;
                position.translation.y += diff;

                // Subtract from the remaining attempted movement
                dy -= diff;

                if self.solids.contains(ent) {
                    break true;
                }

                let tile_kind = *self.tile_collision_kinds.get(ent).unwrap();

                // collider wants to go down and collided with jumpthrough tile
                if tile_kind == TileCollisionKind::JumpThrough && collider.descent {
                    collider.seen_wood = true;
                }
                // collider wants to go up and encoutered jumpthrough obstace
                if tile_kind == TileCollisionKind::JumpThrough && dy > 0.0 {
                    collider.seen_wood = true;
                    collider.descent = true;
                }

                // If we hit a solid block, or a jumpthrough tile that we aren't falling through
                if !(tile_kind == TileCollisionKind::JumpThrough
                    && (collider.descent || dy > 0.0 || collider.seen_wood))
                {
                    // Indicate we ran into something and stop processing
                    break true;
                }

            // If there is no collision
            } else {
                movement += dy;
                // Indicate we didn't run into anything and stop processing
                break false;
            }
        };

        // Move the entity
        let transform = transforms.get_mut(entity).unwrap();
        transform.translation.y += movement - if collided { 0.1 * dy.signum() } else { 0.0 };

        // Final check, if we are out of woods after the move - reset wood flags
        {
            puffin::profile_scope!("out of woods check");
            let is_in_jump_through = query_pipeline
                .intersection_with_shape(
                    rigid_body_set,
                    collider_set,
                    &(
                        transform.translation.truncate(),
                        transform.rotation.to_euler(EulerRot::XYZ).2,
                    )
                        .into(),
                    &**shape,
                    rapier::QueryFilter::new().predicate(&|_handle, collider| {
                        let ent = RapierUserData::entity(collider.user_data);
                        self.tile_collision_kinds.get(ent) == Some(&TileCollisionKind::JumpThrough)
                    }),
                )
                .is_some();

            if !is_in_jump_through {
                collider.seen_wood = false;
                collider.descent = false;
            }
        }

        collided
    }

    /// Attempt to move a body horizontally. This will return `true` if an obstacle was run into
    /// that caused the movement to stop short.
    pub fn move_horizontal(
        &mut self,
        transforms: &mut CompMut<Transform>,
        entity: Entity,
        mut dx: f32,
    ) -> bool {
        puffin::profile_function!();

        let RapierContext {
            query_pipeline,
            collider_set,
            rigid_body_set,
            collider_shape_cache,
            ..
        } = &mut *self.ctx;
        assert!(self.actors.contains(entity));
        if dx == 0.0 {
            return false;
        }

        // Get the shape and position info for the given entity
        let collider = self.colliders.get_mut(entity).unwrap();
        let transform = *transforms.get(entity).unwrap();
        let mut position = (
            transform.translation.truncate(),
            transform.rotation.to_euler(EulerRot::XYZ).2,
        )
            .into();
        let shape = collider_shape_cache.shared_shape(collider.shape);

        let mut movement = 0.0;
        let collided = 'collision: loop {
            // Do a shape cast in the direction of movement
            let velocity = rapier::Vector::new(dx, 0.0);
            let collision = {
                puffin::profile_scope!("cast shape");
                query_pipeline.cast_shape(
                    rigid_body_set,
                    collider_set,
                    &position,
                    &velocity,
                    &**shape,
                    ShapeCastOptions::with_max_time_of_impact(1.0),
                    rapier::QueryFilter::new().predicate(&|_handle, rapier_collider| {
                        let ent = RapierUserData::entity(rapier_collider.user_data);

                        if self.solids.contains(ent) {
                            // Include all solid collisions
                            return true;
                        }

                        let Some(tile_kind) = self.tile_collision_kinds.get(ent) else {
                            // Ignore non-tile collisions
                            return false;
                        };

                        // Ignore jump-through tiles if we have already seen wood.
                        !(collider.seen_wood && *tile_kind == TileCollisionKind::JumpThrough)
                    }),
                )
            };

            if let Some((handle, toi)) = collision {
                let ent = RapierUserData::entity(collider_set.get(handle).unwrap().user_data);

                // Move up to the point of collision
                let diff = dx * toi.time_of_impact;
                movement += diff;
                position.translation.x += diff;

                // Subtract from the remaining attempted movement
                dx -= diff;

                if self.solids.contains(ent) {
                    break true;
                }

                let tile_kind = *self.tile_collision_kinds.get(ent).unwrap();

                // If we ran into a jump-through tile, go through it and continue casting
                if tile_kind == TileCollisionKind::JumpThrough {
                    collider.seen_wood = true;
                    collider.descent = true;

                // If we ran into any other kind of tile
                } else {
                    // Indicate we ran into something and stop processing
                    break 'collision true;
                }

            // If there is no collision
            } else {
                movement += dx;
                // Indicate we didn't run into anything and stop processing
                break 'collision false;
            }
        };

        // Move the entity
        let transform = transforms.get_mut(entity).unwrap();
        transform.translation.x += movement - if collided { 0.1 * dx.signum() } else { 0.0 };

        // Final check, if we are out of woods after the move - reset wood flags
        {
            puffin::profile_scope!("out of woods check");
            let is_in_jump_through = query_pipeline
                .intersection_with_shape(
                    rigid_body_set,
                    collider_set,
                    &(
                        transform.translation.truncate(),
                        transform.rotation.to_euler(EulerRot::XYZ).2,
                    )
                        .into(),
                    &**shape,
                    rapier::QueryFilter::new().predicate(&|_handle, collider| {
                        let ent = RapierUserData::entity(collider.user_data);
                        self.tile_collision_kinds.get(ent) == Some(&TileCollisionKind::JumpThrough)
                    }),
                )
                .is_some();

            if !is_in_jump_through {
                collider.seen_wood = false;
                collider.descent = false;
            }
        }

        collided
    }

    /// Returns whether or not there is a tile or solid at the given position.
    ///
    /// > ⚠️ **Warning:** There is a slight difference to how `tile_collision_point` and
    /// > [`tile_collision`][Self::tile_collision] reports collisions.
    /// >
    /// > [`tile_collision`][Self::tile_collision] will report a collision if the collider shape is
    /// > perfectly lined up along the edge of a tile, but `tile_collision_point` won't.
    #[allow(unused)]
    pub fn solid_at(&self, pos: Vec2) -> bool {
        self.solid_collision_point(pos)
            || self.tile_collision_point(pos) == TileCollisionKind::Solid
    }

    pub fn solid_collision_point(&self, pos: Vec2) -> bool {
        for (_, (solid, collider)) in self.entities.iter_with((&self.solids, &self.colliders)) {
            let bbox = collider
                .shape
                .bounding_box(Transform::from_translation(solid.pos.extend(0.0)));
            if bbox.contains(pos) {
                return true;
            }
        }

        false
    }

    /// Returns the tile collision at the given point.
    ///
    /// > ⚠️ **Warning:** There is a slight difference to how `tile_collision_point` and
    /// > [`tile_collision`][Self::tile_collision] reports collisions.
    /// >
    /// > [`tile_collision`][Self::tile_collision] will report a collision if the collider shape is
    /// > perfectly lined up along the edge of a tile, but `tile_collision_point` won't.
    #[allow(unused)]
    pub fn tile_collision_point(&self, pos: Vec2) -> TileCollisionKind {
        for (entity, tile_layer) in self.entities.iter_with(&self.tile_layers) {
            let TileLayer { tile_size, .. } = tile_layer;

            let x = (pos.x / tile_size.y).floor() as u32;
            let y = (pos.y / tile_size.x).floor() as u32;
            let tile_entity = tile_layer.get(UVec2::new(x, y));
            if let Some(tile_entity) = tile_entity {
                return self
                    .tile_collision_kinds
                    .get(tile_entity)
                    .copied()
                    .unwrap_or_default();
            }
        }

        TileCollisionKind::Empty
    }

    /// Get the [`TileCollisionKind`] of the first tile detected colliding with the `shape` at the
    /// given `transform`.
    pub fn tile_collision(&self, transform: Transform, shape: ColliderShape) -> TileCollisionKind {
        self.tile_collision_filtered(transform, shape, |_| true)
    }

    pub fn tile_collision_filtered(
        &self,
        transform: Transform,
        shape: ColliderShape,
        filter: impl Fn(Entity) -> bool,
    ) -> TileCollisionKind {
        self.ctx
            .query_pipeline
            .intersection_with_shape(
                &self.ctx.rigid_body_set,
                &self.ctx.collider_set,
                &(
                    transform.translation.truncate(),
                    transform.rotation.to_euler(EulerRot::XYZ).2,
                )
                    .into(),
                &*shape.shared_shape(),
                rapier::QueryFilter::new().predicate(&|_handle, collider| {
                    let ent = RapierUserData::entity(collider.user_data);
                    (self.solids.contains(ent) || self.tile_collision_kinds.contains(ent))
                        && filter(ent)
                }),
            )
            .map(|x| RapierUserData::entity(self.ctx.collider_set.get(x).unwrap().user_data))
            .and_then(|ent| {
                if self.solids.contains(ent) {
                    return Some(TileCollisionKind::Solid);
                }
                self.tile_collision_kinds.get(ent).copied()
            })
            .unwrap_or_default()
    }

    /// Get the collider for the given entity.
    pub fn get_collider(&self, actor: Entity) -> &Collider {
        assert!(self.actors.contains(actor));
        self.colliders.get(actor).unwrap()
    }
}

#[cfg(test)]
mod test {
    use super::*;

    #[test]
    fn convert_entity_to_from_user_data() {
        let e1 = Entity::new(102395950, 10394875);
        let bits = RapierUserData::from(e1);
        let e2 = RapierUserData::entity(bits);
        assert_eq!(e1, e2);
    }
}

```

`src/core/physics/collisions/filtering.rs`:

```rs
use bitflags::bitflags;

bitflags! {
/// Flags for collision filtering, this is used for collision events.
pub struct CollisionGroup: u32 {
    // May not detect colliions
    const NONE = 0b0000;
    /// Default membership for bodies
    const DEFAULT= 0b0001;
    // All CollisionGroups are on body / or filtered for body
    const ALL = u32::MAX;
}
}

bitflags! {
/// Flags for filtering simulated collision for dynamics.
/// First [`CollisionGroup`] filters intersection, and then
/// if `SimulationGroup` flags do not intersect, collision event is generated,
/// but not contact forces.
#[derive(Copy, Clone)]
pub struct SolverGroup: u32 {
    const NONE = 0b0000;
    // Solid world geometry like tiles go in this group
    const SOLID_WORLD = 0b0001;
    // Jump through world geometry. (Contacts will be modified so simulated objects only collide from above).
    const JUMP_THROUGH = 0b0010;
    // Dynamic bodies go in this group
    const DYNAMIC = 0b0100;
    const ALL = u32::MAX;
}
}

```

`src/core/physics/collisions/shape.rs`:

```rs
use super::*;

/// Resource that maps [`ColliderShape`]s to a rapier [`SharedShape`][rapier::SharedShape].
#[derive(Clone, Deref, DerefMut, HasSchema, Default)]
pub struct ColliderShapeCache(HashMap<ColliderShape, rapier::SharedShape>);

impl ColliderShapeCache {
    pub fn shared_shape(&mut self, shape: ColliderShape) -> &mut rapier::SharedShape {
        self.entry(shape).or_insert_with(|| shape.shared_shape())
    }
}

/// The Jumpy collision shape type.
#[derive(Clone, Copy, Debug, HasSchema)]
#[repr(C, u8)]
pub enum ColliderShape {
    Circle { diameter: f32 },
    Rectangle { size: Vec2 },
    // Capsule aligned with Y axis
    CapsuleY { half_length: f32, radius: f32 },
}

impl ColliderShape {
    pub fn compute_aabb(&self, transform: Transform) -> rapier::Aabb {
        match self {
            ColliderShape::Circle { diameter } => rapier::Ball {
                radius: *diameter / 2.0,
            }
            .aabb(&rapier::Isometry::new(
                transform.translation.truncate().to_array().into(),
                transform.rotation.to_euler(EulerRot::XYZ).2,
            )),
            ColliderShape::Rectangle { size } => rapier::Cuboid {
                half_extents: (*size / 2.0).to_array().into(),
            }
            .aabb(&rapier::Isometry::new(
                transform.translation.truncate().to_array().into(),
                transform.rotation.to_euler(EulerRot::XYZ).2,
            )),
            ColliderShape::CapsuleY {
                half_length,
                radius,
            } => { rapier::Capsule::new_y(*half_length, *radius) }.aabb(&rapier::Isometry::new(
                transform.translation.truncate().to_array().into(),
                transform.rotation.to_euler(EulerRot::XYZ).2,
            )),
        }
    }

    /// Get the shape's axis-aligned-bounding-box ( AABB ).
    ///
    /// An AABB is the smallest non-rotated rectangle that completely contains the the collision
    /// shape.
    ///
    /// By passing in the shape's global transform you will get the world-space bounding box.
    pub fn bounding_box(self, transform: Transform) -> Rect {
        let aabb = self.compute_aabb(transform);

        Rect {
            min: vec2(aabb.mins.x, aabb.mins.y),
            max: vec2(aabb.maxs.x, aabb.maxs.y),
        }
    }

    pub fn shared_shape(&self) -> rapier::SharedShape {
        match self {
            ColliderShape::Circle { diameter } => rapier::SharedShape::ball(*diameter / 2.0),
            ColliderShape::Rectangle { size } => {
                rapier::SharedShape::cuboid(size.x / 2.0, size.y / 2.0)
            }
            ColliderShape::CapsuleY {
                half_length,
                radius,
            } => rapier::SharedShape::capsule_y(*half_length, *radius),
        }
    }
}

impl Default for ColliderShape {
    fn default() -> Self {
        Self::Rectangle {
            size: vec2(10.0, 10.0),
        }
    }
}

impl PartialEq for ColliderShape {
    fn eq(&self, other: &Self) -> bool {
        use ordered_float::OrderedFloat as F;
        match (self, other) {
            (
                Self::Circle {
                    diameter: l_diameter,
                },
                Self::Circle {
                    diameter: r_diameter,
                },
            ) => F(*l_diameter) == F(*r_diameter),
            (Self::Rectangle { size: l_size }, Self::Rectangle { size: r_size }) => {
                F(l_size.x) == F(r_size.x) && F(l_size.y) == F(r_size.y)
            }
            _ => false,
        }
    }
}
impl Eq for ColliderShape {}

impl std::hash::Hash for ColliderShape {
    fn hash<H: std::hash::Hasher>(&self, state: &mut H) {
        use ordered_float::OrderedFloat as F;
        core::mem::discriminant(self).hash(state);

        match self {
            ColliderShape::Circle { diameter } => F(*diameter).hash(state),
            ColliderShape::Rectangle { size } => {
                F(size.x).hash(state);
                F(size.y).hash(state);
            }
            ColliderShape::CapsuleY {
                half_length,
                radius,
            } => {
                F(*half_length).hash(state);
                F(*radius).hash(state);
            }
        }
    }
}

impl PartialOrd for ColliderShape {
    fn partial_cmp(&self, other: &Self) -> Option<std::cmp::Ordering> {
        Some(self.cmp(other))
    }
}
impl Ord for ColliderShape {
    fn cmp(&self, other: &Self) -> std::cmp::Ordering {
        use ordered_float::OrderedFloat as F;
        use std::cmp::Ordering::*;

        match self {
            ColliderShape::Circle { diameter: r1 } => match other {
                ColliderShape::Circle { diameter: r2 } => F(*r1).cmp(&F(*r2)),
                ColliderShape::Rectangle { .. } => Less,
                ColliderShape::CapsuleY { .. } => Less,
            },
            ColliderShape::Rectangle { size: s1 } => match other {
                ColliderShape::Rectangle { size: s2 } => {
                    let xdiff = F(s1.x).cmp(&F(s2.x));
                    if xdiff == Equal {
                        F(s1.y).cmp(&F(s2.y))
                    } else {
                        xdiff
                    }
                }
                ColliderShape::Circle { .. } => Greater,
                ColliderShape::CapsuleY { .. } => Less,
            },
            ColliderShape::CapsuleY {
                half_length: l1,
                radius: r1,
            } => match other {
                ColliderShape::CapsuleY {
                    half_length: l2,
                    radius: r2,
                } => {
                    let ldiff = F(*l1).cmp(&F(*l2));
                    if ldiff == Equal {
                        F(*r1).cmp(&F(*r2))
                    } else {
                        ldiff
                    }
                }
                ColliderShape::Circle { .. } => Greater,
                ColliderShape::Rectangle { .. } => Greater,
            },
        }
    }
}

```

`src/core/physics/dynamic_body.rs`:

```rs
//! DynamicBody component allows simultaing phyiscs of a body.

use std::sync::Mutex;

use crate::prelude::*;

pub type SimulationCommand = dyn FnOnce(&mut rapier::RigidBody) + 'static + Send;

/// Bodies with `DynamicBody` will be simulated dynamically
/// if `is_dynamic` is True. Currently `DynamicBody` requires component
/// [`KinematicBody`], as it shares shape.
///
/// `if is_dynamic` is false, body is treated as kinematic.
#[derive(Default, Clone, HasSchema)]
#[repr(C)]
pub struct DynamicBody {
    /// Is body simulating or kinematic mode?
    pub is_dynamic: bool,

    /// This transform is used to determine if position has moved in gameplay code outside of rapier sim.
    /// Is only relevant when `is_dynamic` = true. It is updated whenever transform is synced to or from rapier.
    ///
    /// If this does not match entity `Transform` at beginning of physics update, rapier simulation body
    /// will be teleported to match gameplay.
    ///
    /// See [`Self::simulation_transform_needs_update`] for context.
    last_rapier_synced_transform: Transform,

    /// Simulation command queue. See [`Self::push_simulation_command`] for details.
    #[schema(opaque)]
    command_queue: Arc<Mutex<Vec<Box<SimulationCommand>>>>,
}

impl DynamicBody {
    /// Create new `DynamicBody`. is_dynamic = true simulates physics, false remains kinematic.
    pub fn new(is_dynamic: bool) -> Self {
        Self {
            is_dynamic,
            ..Default::default()
        }
    }
    /// Check if rapier simulation's body's transform is dirty (If it was modified outside of
    /// physics simulation). Always returns true if object is not simulating.
    ///
    /// Updates `last_rapier_synced_transform` if called, should only be called before updating rapier positions from gameplay.
    pub fn simulation_transform_needs_update(&mut self, transform: &Transform) -> bool {
        if !self.is_dynamic {
            // Body not simulating, we should always update transform in sim
            return true;
        }

        // Only use 2D translation + rotation, as this is what rapier sim uses.
        let last_translation = self.last_rapier_synced_transform.translation.xy();
        let current_translation = transform.translation.xy();
        let last_rotation = self
            .last_rapier_synced_transform
            .rotation
            .to_euler(EulerRot::XYZ)
            .2;
        let current_rotation = transform.rotation.to_euler(EulerRot::XYZ).2;

        // transform was modified in gameplay outside of rapier sim
        if last_translation != current_translation || last_rotation != current_rotation {
            self.last_rapier_synced_transform.translation = transform.translation;
            self.last_rapier_synced_transform.rotation = transform.rotation;

            return true;
        }

        // Transform was not modified outside of rapier sim, is not dirty
        false
    }

    /// Update `last_rapier_synced_transform` from simulation output so we can determine when gameplay has modified transform
    /// outside of rapier for [`Self::simulation_transform_needs_update`].
    ///
    /// This does NOT update position of entity.
    pub fn update_last_rapier_synced_transform(&mut self, translation: Vec3, rotation: Quat) {
        self.last_rapier_synced_transform.translation = translation;
        self.last_rapier_synced_transform.rotation = rotation;
    }

    /// Push command that is executed before next physics step, after body is guranteed to be initialized in rapier
    /// and set to [`rapier::RigidBodyType::Dynamic`] (if transitioning from Kinematic to Dynamic).
    ///
    /// Commands are only executed if `is_dynamic` = true (body is simulating) next frame! Otherwise they are discarded.
    /// This restriction is in place to prevent switching back to kinematic and modifying simulation state in an unintentional way.
    ///
    /// Commands are executed in order they are pushed. If you need to immediately apply changes, use [`CollisionWorld::mutate_rigidbody`].
    pub fn push_simulation_command(&mut self, command: Box<SimulationCommand>) {
        self.command_queue.lock().unwrap().push(command);
    }

    /// Retrieve [`SimulationCommand`] queue for processing. Values are moved out of self, flushing queue.
    pub fn simulation_commands(&mut self) -> Vec<Box<SimulationCommand>> {
        let mut dummy: Vec<Box<SimulationCommand>> = vec![];
        let mut queue = self.command_queue.lock().unwrap();
        std::mem::swap(&mut *queue, &mut dummy);
        dummy
    }
}

```

`src/core/player.rs`:

```rs
//! Player controller, states, and animation implementation.

use std::collections::VecDeque;

use crate::prelude::*;

mod state;
pub use state::*;
use turborand::GenCore;

const PLAYER_COLORS: [Color; 4] = [
    Color::RED,
    Color::GREEN,
    Color::BLUE,
    Color::rgb(1.0, 0.0, 1.0),
];

pub fn plugin(session: &mut SessionBuilder) {
    session.install_plugin(state::plugin);

    // Add other player systems
    session
        .stages
        .add_system_to_stage(CoreStage::First, hydrate_players)
        .add_system_to_stage(CoreStage::First, player_ai_system)
        .add_system_to_stage(CoreStage::PostUpdate, play_itemless_fin_animations)
        .add_system_to_stage(CoreStage::PostUpdate, player_facial_animations)
        .add_system_to_stage(CoreStage::PostUpdate, equip_hats)
        .add_system_to_stage(CoreStage::Last, delete_dead_ai_swords)
        .add_system_to_stage(CoreStage::Last, update_player_layers);
}

/// The player index, for example Player 1, Player 2, and so on.
#[derive(Copy, Clone, Debug, Eq, PartialEq, Hash, HasSchema, Deref, DerefMut, Default)]
pub struct PlayerIdx(pub u32);

/// Contains the entities of the extra player layers, such as the player face and fin.
#[derive(Clone, HasSchema, Default)]
pub struct PlayerLayers {
    pub fin_anim: Ustr,
    pub fin_ent: Entity,
    pub fin_offset: Vec2,
    pub face_ent: Entity,
    pub face_anim: Ustr,
    pub hat_ent: Option<Entity>,
}

impl PlayerLayers {
    pub const FIN_Z_OFFSET: f32 = 0.5;
    pub const FACE_Z_OFFSET: f32 = 0.01;
    pub const HAT_Z_OFFSET: f32 = 0.02;
}

/// A component representing the current emote state of a player.
#[derive(Clone, HasSchema, Default)]
enum EmoteState {
    /// The player is not emoting
    #[default]
    Neutral,
    /// The player is emoting.
    Emoting((Emote, Entity)),
}

/// A component representing a region in which a player should emote in some way.
///
/// For example, a lit grenade could have a
#[derive(Debug, Clone, HasSchema)]
pub struct EmoteRegion {
    /// The entity that owns this emote region.
    pub owner: Option<Entity>,
    /// A buffer to prevent the player from spamming emotes.
    pub buffer: Option<Timer>,
    /// Whether or not the player must be looking at the center of the region to emote.
    pub direction_sensitive: bool,
    /// The size of the emote region
    pub size: Vec2,
    /// The emote the player should make
    pub emote: Emote,
    /// Whether or not this emote region is active. This provides an easy way to disable a region
    /// temporarily, without having to remove the component.
    pub active: bool,
}

impl Default for EmoteRegion {
    fn default() -> Self {
        Self {
            owner: None,
            active: true,
            buffer: None,
            emote: default(),
            size: Vec2::ZERO,
            direction_sensitive: true,
        }
    }
}

impl EmoteRegion {
    pub fn basic(emote: Emote, size: Vec2, sensitive: bool) -> Self {
        Self {
            emote,
            size,
            active: true,
            direction_sensitive: sensitive,
            ..default()
        }
    }
}

/// A kind of emote the player can make.
#[derive(Debug, Clone, Copy, Default, PartialEq, Eq)]
pub enum Emote {
    /// The player is alarmed!! Like a lit grenade was just thrown at them.
    #[default]
    Alarm,
}

impl Emote {
    pub fn face_animation_key(&self) -> Ustr {
        match self {
            Emote::Alarm => ustr("emote_alarm"),
        }
    }

    pub fn emote_animation_key(&self) -> Ustr {
        match self {
            Emote::Alarm => ustr("alarm"),
        }
    }
}

impl Emote {
    pub fn start_animation(player_ent: Entity, emote: Self) -> StaticSystem<(), ()> {
        (move |meta: Root<GameMeta>,
               assets: ResMut<AssetServer>,
               mut emote_states: CompMut<EmoteState>,
               mut entities: ResMut<Entities>,
               mut transforms: CompMut<Transform>,
               mut attachments: CompMut<PlayerBodyAttachment>,
               mut sprites: CompMut<AtlasSprite>,
               mut animated_sprites: CompMut<AnimatedSprite>| {
            let emote_key = emote.emote_animation_key();
            let Some(emote_meta) = meta
                .core
                .player_emotes
                .iter()
                .find(|(key, _)| **key == emote_key)
                .map(|(_, handle)| assets.get(*handle))
            else {
                return;
            };

            let ent = entities.create();

            let emote_state = emote_states.get_mut(player_ent).unwrap();
            *emote_state = EmoteState::Emoting((emote, ent));

            let transform = *transforms.get(player_ent).unwrap();
            transforms.insert(ent, transform);
            attachments.insert(
                ent,
                PlayerBodyAttachment {
                    player: player_ent,
                    offset: emote_meta.offset.extend(PlayerLayers::FACE_Z_OFFSET),
                    head: true,
                    ..default()
                },
            );
            sprites.insert(
                ent,
                AtlasSprite {
                    atlas: emote_meta.atlas,
                    ..default()
                },
            );
            animated_sprites.insert(
                ent,
                AnimatedSprite {
                    frames: emote_meta.animation.frames.clone(),
                    fps: emote_meta.animation.fps,
                    repeat: true,
                    ..default()
                },
            );
        })
        .system()
    }

    pub fn stop_animation(player_ent: Entity) -> StaticSystem<(), ()> {
        (move |mut emote_states: CompMut<EmoteState>, mut entities: ResMut<Entities>| {
            let emote_state = emote_states.get_mut(player_ent).unwrap();
            if let EmoteState::Emoting((_, emote_ent)) = *emote_state {
                entities.kill(emote_ent);
            }
            *emote_state = EmoteState::Neutral;
        })
        .system()
    }
}

/// Marker component indicating that a player has been killed.
///
/// This usually means their death animation is playing, and they are about to be de-spawned.
#[derive(Clone, HasSchema, Default)]
pub struct PlayerKilled {
    pub hit_from: Option<Vec2>,
}

/// Events that can be used to trigger player actions, such as killing, setting inventory, etc.
#[derive(Clone, Debug)]
pub struct PlayerCommand;

impl PlayerCommand {
    /// Kill a player.
    ///
    /// > **Note:** This doesn't despawn the player, it just puts the player into it's death animation.
    pub fn kill(player: Entity, hit_from: Option<Vec2>) -> StaticSystem<(), ()> {
        (move |entities: Res<Entities>,
               mut players_killed: CompMut<PlayerKilled>,
               mut items_dropped: CompMut<ItemDropped>,
               mut inventories: CompMut<Inventory>,
               player_indexes: Comp<PlayerIdx>| {
            if players_killed.contains(player) {
                // No need to kill him again
                return;
            }

            let Some(idx) = player_indexes.get(player) else {
                // Not a player, just ignore it.
                warn!("Tried to kill non-player entity.");
                return;
            };

            debug!("Killing player: {}", idx.0);

            // Drop any items the player was carrying
            let inventory = inventories.get(player).cloned().unwrap_or_default();
            if let Some(item) = inventory.0 {
                if entities.is_alive(item) {
                    items_dropped.insert(item, ItemDropped { player });
                }
            }

            // Update the inventory
            inventories.insert(player, Inventory(None));

            players_killed.insert(player, PlayerKilled { hit_from });
        })
        .system()
    }

    /// Despawn a player.
    ///
    /// > **Note:** This is different than the [`kill`][Self::kill] event in that it immediately
    /// > removes the player from the world, while [`kill`][Self::kill] will usually cause the
    /// > player to enter the death animation.
    /// >
    /// > [`despawn`][Self::despawn] is usually sent at the end of the player death animation.
    pub fn despawn(player: Entity) -> StaticSystem<(), ()> {
        (move |mut entities: ResMutInit<Entities>,
               attachments: Comp<Attachment>,
               player_indexes: Comp<PlayerIdx>,
               player_layers: Comp<PlayerLayers>,
               player_spawners: Comp<PlayerSpawner>,
               mut spawner_manager: SpawnerManager| {
            if player_indexes.contains(player) {
                entities
                    .iter_with(&attachments)
                    .filter(|(_, attachment)| attachment.entity == player)
                    .map(|(entity, _)| entity)
                    .collect::<Vec<_>>()
                    .iter()
                    .for_each(|entity| {
                        entities.kill(*entity);
                    });
                let layers = player_layers.get(player).unwrap();
                entities.kill(layers.fin_ent);
                entities.kill(layers.face_ent);
                entities.kill(player);

                // remove player from all player spawners
                spawner_manager.remove_spawned_entity_from_grouped_spawner(
                    player,
                    &player_spawners,
                    &entities,
                );
            } else {
                warn!("Tried to despawn non-player entity.");
            }
        })
        .system()
    }

    /// Set the player's inventory
    pub fn set_inventory(player: Entity, item: Option<Entity>) -> StaticSystem<(), ()> {
        (move |mut items_grabbed: CompMut<ItemGrabbed>,
               mut items_dropped: CompMut<ItemDropped>,
               mut inventories: CompMut<Inventory>| {
            let inventory = inventories.get(player).cloned().unwrap_or_default();

            // If there was a previous item, drop it
            if let Some(item) = inventory.0 {
                items_dropped.insert(item, ItemDropped { player });
            }

            // If there is a new item, grab it
            if let Some(item) = item {
                items_grabbed.insert(item, ItemGrabbed { player });
            }

            // Update the inventory
            inventories.insert(player, Inventory(item));
        })
        .system()
    }

    /// Have the player use the item they are carrying, if any.
    pub fn use_item(player: Entity) -> StaticSystem<(), ()> {
        (move |mut items_used: CompMut<ItemUsed>, inventories: CompMut<Inventory>| {
            // If the player has an item
            if let Some(item) = inventories.get(player).and_then(|x| x.0) {
                // Use it
                items_used.insert(item, ItemUsed { owner: player });
            }
        })
        .system()
    }

    /// Drop the player's hat and reset its state.
    pub fn drop_hat(player: Entity) -> StaticSystem<(), ()> {
        (move |player_layers: Comp<PlayerLayers>,
               mut player_body_attachments: CompMut<PlayerBodyAttachment>,
               mut bodies: CompMut<KinematicBody>,
               mut atlas_sprites: CompMut<AtlasSprite>| {
            let Some(layers) = player_layers.get(player) else {
                return;
            };
            let Some(hat_ent) = layers.hat_ent else {
                return;
            };
            // Drop the hat
            player_body_attachments.remove(hat_ent);
            bodies.get_mut(hat_ent).unwrap().is_deactivated = false;
            // Reset its states
            if let Some(hat_sprite) = atlas_sprites.get_mut(hat_ent) {
                hat_sprite.color.set_a(1.0);
            }
        })
        .system()
    }
}

#[derive(Clone, Debug, HasSchema)]
pub struct AiPlayer {
    /// Tick timer that is used for AI pausing logic.
    tick: Timer,
    /// Indicates the player is taking pause for the given number of ticks.
    pausing: u32,
    /// Buffers planned AI movements
    movement_buffer: Option<VecDeque<PlayerControl>>,
    /// The player that the AI is targeting.
    target_player: Option<Entity>,
}

impl Default for AiPlayer {
    fn default() -> Self {
        Self {
            tick: Timer::from_seconds(0.5, TimerMode::Repeating),
            pausing: 0,
            movement_buffer: Default::default(),
            target_player: Default::default(),
        }
    }
}

#[derive(Debug, HasSchema, Clone)]
#[schema(no_default)]
pub struct PathfindingDebugLines {
    pub entities: Vec<Entity>,
}

impl FromWorld for PathfindingDebugLines {
    fn from_world(world: &World) -> Self {
        let entities = world.run_system(
            |mut entities: ResMut<Entities>, mut transforms: CompMut<Transform>| {
                (0..MAX_PLAYERS)
                    .map(|_| {
                        let ent = entities.create();

                        transforms
                            .insert(ent, Transform::from_translation(Vec3::new(0.0, 0.0, -1.0)));

                        ent
                    })
                    .collect::<Vec<_>>()
            },
            (),
        );

        Self { entities }
    }
}

fn player_ai_system(
    entities: Res<Entities>,
    nav_graph: ResMutInit<NavGraph>,
    mut player_inputs: ResMutInit<MatchInputs>,
    mut ai_players: CompMut<AiPlayer>,
    player_indexes: Comp<PlayerIdx>,
    map: Res<LoadedMap>,
    transforms: Comp<Transform>,
    pathfinding_debug_line: ResMutInit<PathfindingDebugLines>,
    mut paths: CompMut<Path2d>,
    bodies: Comp<KinematicBody>,
    debug_settings: ResInit<DebugSettings>,
    rng: Res<GlobalRng>,
    time: Res<Time>,
) {
    const SWORD_SWING_DIST: f32 = 10.0;
    const AI_SPEED_MULTIPLIER: f32 = 0.65;

    for (ai_ent, (player_idx, transform, ai_player)) in
        entities.iter_with((&player_indexes, &transforms, &mut ai_players))
    {
        // Tick the AI timer
        ai_player.tick.tick(time.delta());

        // If a tick has elapsed
        if ai_player.tick.just_finished() {
            // If the player isn't pausing, then there's a 40% chance
            if ai_player.pausing == 0 && rng.chance(0.4) {
                // That we will pause for a random number of ticks between 0 and 2
                ai_player.pausing = (rng.f32_normalized() * 2.0).round() as u32
            }

            // If the player is pausing
            if ai_player.pausing > 0 {
                // Subtract a tick from how long they should pause.
                ai_player.pausing -= 1;
            }
        }

        // If the player is pausing, don't have the AI move this frame.
        if ai_player.pausing > 0 {
            continue;
        }

        let target_transform = match ai_player.target_player {
            Some(target_player) if transforms.contains(target_player) => {
                transforms.get(target_player).unwrap()
            }
            _ => {
                let players = entities
                    .iter_with((&player_indexes, &transforms))
                    .filter(|(ent, _)| *ent != ai_ent)
                    .collect::<Vec<_>>();
                if players.is_empty() {
                    continue;
                }

                let (target_player, (_, transform)) = players[rng.gen_usize() % players.len()];

                ai_player.target_player = Some(target_player);
                transform
            }
        };
        let target_pos = target_transform.translation.truncate();
        let tile = (target_pos / map.tile_size).floor().as_ivec2();
        let target_node = NavNode(tile);
        let ai_pos = transform.translation.truncate();
        let tile = (ai_pos / map.tile_size).floor().as_ivec2();
        let current_node = NavNode(tile);

        // Complete any previous movement instructions if we are in the middle of any
        if let Some(movement_buffer) = &mut ai_player.movement_buffer {
            if let Some(control) = movement_buffer.pop_front() {
                player_inputs.players[player_idx.0 as usize].control = control;
                if movement_buffer.is_empty() {
                    ai_player.movement_buffer = None;
                }
                continue;
            }
        }

        let path = petgraph::algo::astar(
            nav_graph.as_ref(),
            current_node,
            |x| x == target_node,
            |(_, _, edge)| edge.distance,
            |_| 0.0,
        );

        if let Some((_cost, path)) = path {
            if debug_settings.show_pathfinding_lines {
                paths.insert(
                    pathfinding_debug_line.entities[player_idx.0 as usize],
                    Path2d {
                        points: path
                            .iter()
                            .map(|x| x.0.as_vec2() * map.tile_size + map.tile_size / 2.0)
                            .collect(),
                        thickness: 2.0,
                        color: PLAYER_COLORS[player_idx.0 as usize],
                        ..default()
                    },
                );
            }

            if let Some(&next_node) = path.get(1) {
                let edge = nav_graph.edge_weight(current_node, next_node).unwrap();
                let mut movement_buffer = edge.inputs.clone();
                let mut first_movement = movement_buffer.pop_front().unwrap();

                // Slow down the AI movement according to the fixed multiplier
                first_movement.move_direction *= vec2(AI_SPEED_MULTIPLIER, 1.0);

                // This is a hack to prevent us from getting stuck when we think we should be falling
                // straight down and we actually need to move off of the block we're half-standing on.
                //
                // If we aren't moving at all, just move in the direction of player 1
                if bodies.get(ai_ent).unwrap().velocity == Vec2::ZERO
                    && first_movement.move_direction == Vec2::ZERO
                {
                    let sign = (path.get(2).unwrap_or(&next_node).x as f32 * map.tile_size.x
                        - transform.translation.x)
                        .signum();
                    first_movement.move_direction.x = sign;
                }

                player_inputs.players[player_idx.0 as usize].control = first_movement;
                if !movement_buffer.is_empty() {
                    ai_player.movement_buffer = Some(movement_buffer)
                }
            }

            if (target_pos - ai_pos).length() < SWORD_SWING_DIST {
                player_inputs.players[player_idx.0 as usize]
                    .control
                    .shoot_just_pressed = true;
                player_inputs.players[player_idx.0 as usize]
                    .control
                    .shoot_pressed = true;
            }
        } else if debug_settings.show_pathfinding_lines {
            let pos =
                current_node.0.as_vec2() * map.tile_size + map.tile_size / 2.0 - vec2(0.0, 4.0);
            paths.insert(
                pathfinding_debug_line.entities[player_idx.0 as usize],
                Path2d {
                    points: vec![pos, pos + vec2(0.0, 4.0)],
                    thickness: 8.0,
                    color: Color::RED,
                    ..default()
                },
            );
        }

        if !debug_settings.show_pathfinding_lines {
            paths.remove(pathfinding_debug_line.entities[player_idx.0 as usize]);
        }
    }
}

/// Resource that tracks which players have already been spawned before.
///
/// This lets us handle re-spawns differently, like not spawning you with a hat on a re-spawn.
///
/// TODO: This is probably temporary and will be removed when we have the proper tournament flow
/// down.
#[derive(Debug, Clone, HasSchema, Default)]
struct PlayersHaveSpawned {
    /// For each player, whether they have spawned before.
    pub players: [bool; MAX_PLAYERS as usize],
}

/// Marker component for a player hat.
#[derive(Debug, Clone, HasSchema, Default)]
struct Hat(Handle<HatMeta>);

/// Build `ColliderShape` for player from `PlayerMeta`.
pub fn player_collider_shape(meta: &PlayerMeta) -> ColliderShape {
    ColliderShape::Rectangle {
        size: meta.body_size,
    }
}

fn hydrate_players(
    mut commands: Commands,
    mut entities: ResMutInit<Entities>,
    game_meta: Root<GameMeta>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    assets: Res<AssetServer>,
    mut player_states: CompMut<PlayerState>,
    mut inventories: CompMut<Inventory>,
    mut animation_bank_sprites: CompMut<AnimationBankSprite>,
    mut atlas_sprites: CompMut<AtlasSprite>,
    mut kinematic_bodies: CompMut<KinematicBody>,
    mut camera_subjects: CompMut<CameraSubject>,
    mut player_layers: CompMut<PlayerLayers>,
    mut player_body_attachments: CompMut<PlayerBodyAttachment>,
    mut transforms: CompMut<Transform>,
    mut emote_states: CompMut<EmoteState>,
    mut ai_players: CompMut<AiPlayer>,
    mut invincibles: CompMut<Invincibility>,
    mut element_kill_callbacks: CompMut<ElementKillCallback>,
    mut players_have_spawned: ResMutInit<PlayersHaveSpawned>,
    mut item_grabs: CompMut<ItemGrab>,
    mut item_throws: CompMut<ItemThrow>,
    mut items: CompMut<Item>,
    mut hats: CompMut<Hat>,
) {
    let mut not_hydrated_bitset = player_states.bitset().clone();
    not_hydrated_bitset.bit_not();
    not_hydrated_bitset.bit_and(player_indexes.bitset());

    // Create entities that we will use for the extra player layers
    let entity_count = not_hydrated_bitset.bit_count() * 3;
    let mut new_entities = (0..entity_count)
        .map(|_| entities.create())
        .collect::<Vec<_>>()
        .into_iter();
    // If a player doesn't have a hat we'll kill the entity we allocated for it.
    let mut to_kill = Vec::with_capacity(entity_count / 3);

    for player_entity in entities.iter_with_bitset(&not_hydrated_bitset) {
        let player_idx = player_indexes.get(player_entity).unwrap();
        let player_has_spawned = &mut players_have_spawned.players[player_idx.0 as usize];
        let player_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let player_hat = &player_inputs.players[player_idx.0 as usize].selected_hat;
        let is_ai = player_inputs.players[player_idx.0 as usize].is_ai;

        let meta = assets.get(player_handle);

        let animation_bank_sprite = AnimationBankSprite {
            current: "idle".into(),
            animations: meta.layers.body.animations.frames.clone(),
            last_animation: default(),
        };

        player_states.insert(player_entity, default());
        emote_states.insert(player_entity, default());
        animation_bank_sprites.insert(player_entity, animation_bank_sprite);
        inventories.insert(player_entity, default());
        invincibles.insert(
            player_entity,
            Invincibility::new(game_meta.core.config.respawn_invincibility_time),
        );
        element_kill_callbacks.insert(
            player_entity,
            ElementKillCallback::new(player_kill_callback(player_entity)),
        );

        atlas_sprites.insert(
            player_entity,
            AtlasSprite {
                atlas: meta.layers.body.atlas,
                ..default()
            },
        );
        kinematic_bodies.insert(
            player_entity,
            KinematicBody {
                shape: player_collider_shape(&meta),
                has_mass: true,
                has_friction: false,
                gravity: meta.gravity,
                is_controlled: true,
                ..default()
            },
        );
        camera_subjects.insert(player_entity, default());

        // Spawn the player's fin and face
        let fin_entity = new_entities.next().unwrap();
        let face_entity = new_entities.next().unwrap();

        // Fin
        transforms.insert(fin_entity, default());
        atlas_sprites.insert(
            fin_entity,
            AtlasSprite {
                atlas: meta.layers.fin.atlas,
                ..default()
            },
        );
        animation_bank_sprites.insert(
            fin_entity,
            AnimationBankSprite {
                current: "idle".into(),
                animations: meta.layers.fin.animations.clone(),
                last_animation: default(),
            },
        );
        player_body_attachments.insert(
            fin_entity,
            PlayerBodyAttachment {
                sync_color: true,
                sync_animation: false,
                head: false,
                player: player_entity,
                offset: meta.layers.fin.offset.extend(PlayerLayers::FIN_Z_OFFSET),
            },
        );

        // Face
        transforms.insert(face_entity, default());
        atlas_sprites.insert(
            face_entity,
            AtlasSprite {
                atlas: meta.layers.face.atlas,
                ..default()
            },
        );
        animation_bank_sprites.insert(
            face_entity,
            AnimationBankSprite {
                current: "idle".into(),
                animations: meta.layers.face.animations.clone(),
                last_animation: default(),
            },
        );
        player_body_attachments.insert(
            face_entity,
            PlayerBodyAttachment {
                player: player_entity,
                sync_color: true,
                sync_animation: false,
                head: true,
                offset: meta.layers.face.offset.extend(PlayerLayers::FACE_Z_OFFSET),
            },
        );

        // Hat
        let hat_ent = new_entities.next().unwrap();
        let hat_ent = if !*player_has_spawned {
            if let Some(hat_handle) = player_hat {
                let hat_meta = assets.get(*hat_handle);
                let atlas = hat_meta.atlas;
                let offset = hat_meta.offset.extend(PlayerLayers::HAT_Z_OFFSET);
                hats.insert(hat_ent, Hat(*hat_handle));
                transforms.insert(hat_ent, default());
                atlas_sprites.insert(hat_ent, AtlasSprite { atlas, ..default() });
                player_body_attachments.insert(
                    hat_ent,
                    PlayerBodyAttachment {
                        player: player_entity,
                        offset,
                        head: true,
                        sync_animation: false,
                        sync_color: true,
                    },
                );
                kinematic_bodies.insert(
                    hat_ent,
                    KinematicBody {
                        shape: ColliderShape::Rectangle {
                            size: hat_meta.body_size,
                        },
                        has_mass: true,
                        has_friction: true,
                        gravity: meta.gravity,
                        is_deactivated: true,
                        ..default()
                    },
                );
                items.insert(hat_ent, Item);
                item_grabs.insert(
                    hat_ent,
                    ItemGrab {
                        fin_anim: "grab_2".into(),
                        grab_offset: Vec2::ZERO,
                        sync_animation: false,
                    },
                );
                item_throws.insert(hat_ent, ItemThrow::strength(420.0));
                Some(hat_ent)
            } else {
                to_kill.push(hat_ent);
                None
            }
        } else {
            to_kill.push(hat_ent);
            None
        };

        // Insert player layers component
        player_layers.insert(
            player_entity,
            PlayerLayers {
                fin_anim: "idle".into(),
                fin_ent: fin_entity,
                fin_offset: Vec2::ZERO,
                face_anim: "idle".into(),
                face_ent: face_entity,
                hat_ent,
            },
        );

        *player_has_spawned = true;

        // Handle AI players
        if is_ai {
            ai_players.insert(player_entity, default());

            // Give the player a sword NOTE: It's not good that we're duplicating the sword hydrate
            // functionality here, and this is pretty hacky, but the AI as it stands is temporary
            // anyway, so it's fine for now.
            commands.add(
                move |mut entities: ResMutInit<Entities>,
                      mut swords: CompMut<sword::Sword>,
                      mut element_handles: CompMut<ElementHandle>,
                      assets: Res<AssetServer>,
                      mut hydrated: CompMut<MapElementHydrated>,
                      mut bodies: CompMut<KinematicBody>,
                      mut atlas_sprites: CompMut<AtlasSprite>,
                      mut items: CompMut<Item>,
                      mut transforms: CompMut<Transform>,
                      game_meta: Root<GameMeta>,
                      mut attachments: CompMut<PlayerBodyAttachment>,
                      mut inventories: CompMut<Inventory>| {
                    let element_handle = game_meta
                        .core
                        .map_elements
                        .iter()
                        .find(|handle| {
                            assets
                                .get(assets.get(**handle).data)
                                .try_cast_ref::<SwordMeta>()
                                .is_ok()
                        })
                        .unwrap();
                    let element_meta = assets.get(*element_handle);
                    if let Ok(SwordMeta {
                        atlas,
                        body_size,
                        can_rotate,
                        bounciness,
                        grab_offset,
                        ..
                    }) = assets.get(element_meta.data).try_cast_ref()
                    {
                        let sword_ent = entities.create();
                        inventories.insert(player_entity, Inventory(Some(sword_ent)));
                        items.insert(sword_ent, Item);
                        swords.insert(sword_ent, sword::Sword::default());
                        atlas_sprites.insert(sword_ent, AtlasSprite::new(*atlas));
                        transforms.insert(sword_ent, default());
                        element_handles.insert(sword_ent, ElementHandle(*element_handle));
                        hydrated.insert(sword_ent, MapElementHydrated);
                        bodies.insert(
                            sword_ent,
                            KinematicBody {
                                shape: ColliderShape::Rectangle { size: *body_size },
                                has_mass: true,
                                has_friction: true,
                                can_rotate: *can_rotate,
                                bounciness: *bounciness,
                                gravity: game_meta.core.physics.gravity,
                                ..default()
                            },
                        );
                        attachments.insert(
                            sword_ent,
                            PlayerBodyAttachment {
                                sync_color: false,
                                sync_animation: false,
                                player: player_entity,
                                head: false,
                                offset: grab_offset.extend(1.0),
                            },
                        );
                    }
                },
            );
        }
    }

    for entity in to_kill {
        entities.kill(entity);
    }
}

fn player_kill_callback(player_entity: Entity) -> StaticSystem<(), ()> {
    (move |mut entities: ResMutInit<Entities>,
           attachments: Comp<Attachment>,
           player_layers: Comp<PlayerLayers>| {
        entities
            .iter_with(&attachments)
            .filter(|(_, attachment)| attachment.entity == player_entity)
            .map(|(entity, _)| entity)
            .collect::<Vec<_>>()
            .iter()
            .for_each(|entity| {
                entities.kill(*entity);
            });
        let layers = player_layers.get(player_entity).unwrap();
        entities.kill(layers.fin_ent);
        entities.kill(layers.face_ent);
        entities.kill(player_entity);
    })
    .system()
}

/// System that makes sure the swords held by AI are despawned when they are killed.
fn delete_dead_ai_swords(
    mut entities: ResMutInit<Entities>,
    ai_players: Comp<AiPlayer>,
    items: Comp<Item>,
    dropped: Comp<ItemDropped>,
) {
    let mut to_kill = Vec::new();
    for (ent, (_item, dropped)) in entities.iter_with((&items, &dropped)) {
        if ai_players.contains(dropped.player) {
            to_kill.push(ent);
        }
    }
    for entity in to_kill {
        entities.kill(entity);
    }
}

/// Animate the player's fins while
fn play_itemless_fin_animations(
    entities: Res<Entities>,
    mut player_layers: CompMut<PlayerLayers>,
    animation_bank_sprites: Comp<AnimationBankSprite>,
    player_indexes: Comp<PlayerIdx>,
    player_inventories: PlayerInventories,
) {
    for (_, (player_layers, player_idx, animation_bank)) in
        entities.iter_with((&mut player_layers, &player_indexes, &animation_bank_sprites))
    {
        let inventory = player_inventories[player_idx.0 as usize];

        if inventory.is_none() {
            player_layers.fin_anim = animation_bank.current;
        }
    }
}

fn player_facial_animations(
    time: Res<Time>,
    entities: Res<Entities>,
    mut player_layers: CompMut<PlayerLayers>,
    mut emote_regions: CompMut<EmoteRegion>,
    transforms: Comp<Transform>,
    atlas_sprites: Comp<AtlasSprite>,
    mut emote_states: CompMut<EmoteState>,
    mut commands: Commands,
    players_killed: Comp<PlayerKilled>,
    animation_bank_sprites: CompMut<AnimationBankSprite>,
) {
    for (player_ent, (player_layer, atlas_sprite, animation_bank, emote_state)) in entities
        .iter_with((
            &mut player_layers,
            &atlas_sprites,
            &animation_bank_sprites,
            &mut emote_states,
        ))
    {
        if players_killed.contains(player_ent) {
            *emote_state = EmoteState::Neutral;
            player_layer.face_anim = animation_bank.current;
            continue;
        }

        let player_pos = transforms.get(player_ent).unwrap().translation.truncate();

        let mut triggered_emote = None;
        for (_, (emote_region, transform)) in entities.iter_with((&mut emote_regions, &transforms))
        {
            if !emote_region.active {
                continue;
            }

            // If a buffer exists, tick it.
            if let Some(buffer) = emote_region.buffer.as_mut() {
                buffer.tick(time.delta());

                // If the buffer is not finished, and the player is the owner, skip this emote.
                if let Some(owner) = emote_region.owner.as_ref() {
                    if *owner == player_ent && !(buffer.finished()) {
                        continue;
                    }
                }
            }

            let emote_pos = transform.translation.truncate();
            let direction = if atlas_sprite.flip_x { -1.0f32 } else { 1.0 };
            let is_facing_region = direction.signum() != (player_pos.x - emote_pos.x).signum();

            if !emote_region.direction_sensitive || is_facing_region {
                let emote_rect = Rect::new(
                    emote_pos.x,
                    emote_pos.y,
                    emote_region.size.x,
                    emote_region.size.y,
                );
                if emote_rect.contains(player_pos) {
                    triggered_emote = Some(emote_region.emote);
                }
            }
        }

        if let Some(new_emote) = triggered_emote {
            if let EmoteState::Emoting(already_emote) = emote_state {
                if new_emote != already_emote.0 {
                    player_layer.face_anim = new_emote.face_animation_key();
                    commands.add(Emote::stop_animation(player_ent));
                    commands.add(Emote::start_animation(player_ent, new_emote));
                }
            } else {
                player_layer.face_anim = new_emote.face_animation_key();
                commands.add(Emote::start_animation(player_ent, new_emote));
            }
        } else {
            player_layer.face_anim = animation_bank.current;
            commands.add(Emote::stop_animation(player_ent));
        }
    }
}

/// System that reads the [`PlayerLayers`] component and updates the animated sprite banks to match
/// the animations specified.
fn update_player_layers(
    entities: Res<Entities>,
    player_inputs: ResMutInit<MatchInputs>,
    mut animation_bank_sprites: CompMut<AnimationBankSprite>,
    mut player_body_attachments: CompMut<PlayerBodyAttachment>,
    player_layers: Comp<PlayerLayers>,
    player_indexes: Comp<PlayerIdx>,
    assets: Res<AssetServer>,
) {
    for (_ent, (layers, player_idx)) in entities.iter_with((&player_layers, &player_indexes)) {
        let player_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let player_meta = assets.get(player_handle);

        let face_bank = animation_bank_sprites.get_mut(layers.face_ent).unwrap();
        face_bank.current = layers.face_anim;

        let base_fin_offset = player_meta.layers.fin.offset;
        let total_fin_offset = base_fin_offset + layers.fin_offset;
        let fin_attachment = player_body_attachments.get_mut(layers.fin_ent).unwrap();
        fin_attachment.offset.x = total_fin_offset.x;
        fin_attachment.offset.y = total_fin_offset.y;

        let fin_bank = animation_bank_sprites.get_mut(layers.fin_ent).unwrap();
        fin_bank.current = layers.fin_anim;
    }
}

/// Equip player hats that have been picked up and used.
fn equip_hats(
    entities: Res<Entities>,
    mut items_used: CompMut<ItemUsed>,
    mut kinematic_bodies: CompMut<KinematicBody>,
    mut player_body_attachments: CompMut<PlayerBodyAttachment>,
    hats: Comp<Hat>,
    assets: Res<AssetServer>,
    player_inventories: PlayerInventories,
    mut player_layers: CompMut<PlayerLayers>,
    mut inventories: CompMut<Inventory>,
) {
    for (hat_ent, hat) in entities.iter_with(&hats) {
        // If the hat is being held
        if let Some(Inv { player, .. }) = player_inventories.find_item(hat_ent) {
            if items_used.remove(hat_ent).is_some() {
                inventories.get_mut(player).unwrap().0 = None;

                let hat_meta = assets.get(hat.0);
                kinematic_bodies.get_mut(hat_ent).unwrap().is_deactivated = true;
                player_body_attachments.insert(
                    hat_ent,
                    PlayerBodyAttachment {
                        player,
                        offset: hat_meta.offset.extend(PlayerLayers::HAT_Z_OFFSET),
                        head: true,
                        sync_animation: false,
                        sync_color: true,
                    },
                );
                player_layers.get_mut(player).unwrap().hat_ent = Some(hat_ent);
            }
        }
    }
}

```

`src/core/player/state.rs`:

```rs
use super::*;

pub use stage::*;
mod stage;

pub use states::*;
mod states;

/// The state of the player controller.
#[derive(Clone, HasSchema, Default)]
pub struct PlayerState {
    /// The ID for the current state.
    pub current: Ustr,
    /// The number of frames that this state has been active.
    pub age: u64,
    /// The ID of the state that the player was in in the last frame.
    pub last: Ustr,
}
impl PlayerState {
    /// Adds a system to the appropriate stage in a [`Session`] for a player state transition.
    pub fn add_player_state_transition_system<Args>(
        session: &mut SessionBuilder,
        system: impl IntoSystem<Args, (), (), Sys = StaticSystem<(), ()>>,
    ) {
        session.stages.add_system_to_stage(PlayerStateStage, system);
    }

    /// Adds a system to the appropriate stage in a [`Session`] for a player state update.
    pub fn add_player_state_update_system<Args>(
        session: &mut SessionBuilder,
        system: impl IntoSystem<Args, (), (), Sys = StaticSystem<(), ()>>,
    ) {
        session
            .stages
            .add_system_to_stage(CoreStage::PreUpdate, system);
    }
}

pub fn plugin(session: &mut SessionBuilder) {
    // Add the player state stage
    session
        .stages
        .insert_stage_before(CoreStage::PreUpdate, PlayerStateStageImpl::new());

    session
        .stages
        .add_system_to_stage(CoreStage::Last, update_player_state_age);

    crouch::install(session);
    dead::install(session);
    default::install(session);
    drive_jellyfish::install(session);
    idle::install(session);
    incapacitated::install(session);
    ragdoll::install(session);
    midair::install(session);
    walk::install(session);
}

fn update_player_state_age(entities: Res<Entities>, mut player_states: CompMut<PlayerState>) {
    for (_ent, state) in entities.iter_with(&mut player_states) {
        state.age = state.age.saturating_add(1);
    }
}

fn use_drop_or_grab_items_system(id: Ustr) -> StaticSystem<(), ()> {
    (move |entities: Res<Entities>,
           player_inputs: Res<MatchInputs>,
           player_indexes: Comp<PlayerIdx>,
           player_states: Comp<PlayerState>,
           assets: Res<AssetServer>,
           items: Comp<Item>,
           collision_world: CollisionWorld,
           mut inventories: CompMut<Inventory>,
           mut audio_center: ResMut<AudioCenter>,
           mut commands: Commands| {
        // Collect a list of items that are being held by players
        let held_items = entities
            .iter_with(&inventories)
            .filter_map(|(_ent, inventory)| inventory.0)
            .collect::<Vec<_>>();

        for (player_ent, (player_state, player_idx, inventory)) in
            entities.iter_with((&player_states, &player_indexes, &mut inventories))
        {
            if player_state.current != id {
                continue;
            }
            let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
            let meta = assets.get(meta_handle);

            let control = &player_inputs.players[player_idx.0 as usize].control;
            // If we are grabbing
            if control.grab_just_pressed {
                if inventory.is_none() {
                    // If we don't have an item
                    let colliders = collision_world
                        // Get all things colliding with the player
                        .actor_collisions(player_ent)
                        .into_iter()
                        // Filter out anything not an item
                        .filter(|ent| items.contains(*ent))
                        // TODO: Use the ItemGrabbed tag for this detection after fixing the ItemGrabbed handling
                        // Filter out any items held by other players
                        .filter(|ent| !held_items.contains(ent))
                        .collect::<Vec<_>>();

                    // Grab the first item we are touching
                    if let Some(item) = colliders.first() {
                        // Add the item to the player inventory
                        commands.add(PlayerCommand::set_inventory(player_ent, Some(*item)));

                        // Play grab sound
                        audio_center.play_sound(meta.sounds.grab, meta.sounds.grab_volume);
                    }

                // If we are already carrying an item
                } else {
                    // Drop it
                    commands.add(PlayerCommand::set_inventory(player_ent, None));

                    // Play drop sound
                    audio_center.play_sound(meta.sounds.drop, meta.sounds.drop_volume);
                }
            }

            // If we are using an item
            if control.shoot_pressed && inventory.is_some() {
                commands.add(PlayerCommand::use_item(player_ent));
            }
        }
    })
    .system()
}

```

`src/core/player/state/stage.rs`:

```rs
use super::*;

#[derive(Debug)]
pub struct PlayerStateStage;

impl StageLabel for PlayerStateStage {
    fn name(&self) -> String {
        format!("{self:?}")
    }

    fn id(&self) -> Ulid {
        PlayerStateStageImpl::ID
    }
}

#[derive(Default)]
pub struct PlayerStateStageImpl {
    systems: Vec<StaticSystem<(), ()>>,
}

impl PlayerStateStageImpl {
    pub fn new() -> Self {
        default()
    }
}

impl PlayerStateStageImpl {
    pub const ID: Ulid = Ulid(2022686805174362721866480948664103805);
}

impl SystemStage for PlayerStateStageImpl {
    fn id(&self) -> Ulid {
        Self::ID
    }

    fn name(&self) -> String {
        "PlayerStateStage".into()
    }

    fn run(&mut self, world: &World) {
        trace!("Starting player state transitions");
        loop {
            // Get the current player states
            let last_player_states = world.run_system(
                |entities: Res<Entities>,
                 player_indexes: Comp<PlayerIdx>,
                 player_states: Comp<PlayerState>| {
                    let mut states: [Option<Ustr>; MAX_PLAYERS as usize] =
                        std::array::from_fn(|_| None);
                    for (_ent, (idx, state)) in
                        entities.iter_with((&player_indexes, &player_states))
                    {
                        states[idx.0 as usize] = Some(state.current);
                    }

                    states
                },
                (),
            );
            trace!(?last_player_states, "Checcking current states");

            trace!("Running state transitions");
            // Run all of the player state systems
            for system in &mut self.systems {
                system.run(world, ());
            }

            // Get whether the states have changed
            let has_changed = world.run_system(
                move |entities: Res<Entities>,
                      player_indexes: Comp<PlayerIdx>,
                      mut player_states: CompMut<PlayerState>| {
                    let mut has_changed = false;
                    for (_ent, (idx, state)) in
                        entities.iter_with((&player_indexes, &mut player_states))
                    {
                        let old_state = last_player_states[idx.0 as usize].unwrap();

                        if old_state != state.current {
                            state.last = old_state;
                            state.age = 0;
                            has_changed = true;
                        }
                    }

                    has_changed
                },
                (),
            );

            // If the states haven't changed
            if !has_changed {
                trace!("No state changes, done with state transition loop");
                // Then we are finished applying player state transitions
                break;
            }
        }
    }

    fn add_system(&mut self, system: StaticSystem<(), ()>) {
        self.systems.push(system.system())
    }

    fn remove_all_systems(&mut self) {
        self.systems.clear();
    }
}

```

`src/core/player/state/states.rs`:

```rs
use super::*;

pub mod crouch;
pub mod dead;
pub mod default;
pub mod drive_jellyfish;
pub mod idle;
pub mod incapacitated;
pub mod midair;
pub mod ragdoll;
pub mod walk;

```

`src/core/player/state/states/crouch.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::crouch"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
    PlayerState::add_player_state_update_system(session, handle_player_state);
    PlayerState::add_player_state_update_system(session, use_drop_or_grab_items_system(*ID));
}

pub fn player_state_transition(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    mut player_states: CompMut<PlayerState>,
    assets: Res<AssetServer>,
    mut bodies: CompMut<KinematicBody>,
    mut transforms: CompMut<Transform>,
) {
    for (_ent, (state, player_idx, body, transform)) in entities.iter_with((
        &mut player_states,
        &player_indexes,
        &mut bodies,
        &mut transforms,
    )) {
        let player_input = &player_inputs.players[player_idx.0 as usize];
        let meta_handle = player_input.selected_player;
        let meta = assets.get(meta_handle);

        // Reset the body size and position if we stop sliding
        if state.last == *ID && state.current != *ID {
            if let ColliderShape::Rectangle { size } = &body.shape {
                if *size != meta.body_size {
                    body.shape = ColliderShape::Rectangle {
                        size: meta.body_size,
                    };
                    let offset = (meta.body_size.y - meta.slide_body_size.y) / 2.0;
                    let direction = player_input.control.move_direction.x.signum();
                    transform.translation.x += offset * direction;
                    transform.translation.y += offset;
                }
            }
        }

        if state.current != *ID {
            continue;
        }
        let control = &player_inputs.players[player_idx.0 as usize].control;

        if control.ragdoll_just_pressed {
            state.current = *ragdoll::ID;
        } else if !body.is_on_ground || control.move_direction.y > -0.5 {
            state.current = *idle::ID;
        }
    }
}

pub fn handle_player_state(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_states: Comp<PlayerState>,
    player_indexes: Comp<PlayerIdx>,
    mut animations: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
    assets: Res<AssetServer>,
    mut transforms: CompMut<Transform>,
) {
    for (_player_ent, (state, player_idx, animation, body, transform)) in entities.iter_with((
        &player_states,
        &player_indexes,
        &mut animations,
        &mut bodies,
        &mut transforms,
    )) {
        if state.current != *ID {
            continue;
        }
        let player_input = &player_inputs.players[player_idx.0 as usize];
        let meta_handle = player_input.selected_player;
        let meta = assets.get(meta_handle);

        if body.velocity.x == 0.0 {
            animation.current = "crouch".into();
            if let ColliderShape::Rectangle { size } = &body.shape {
                if *size != meta.body_size {
                    body.shape = ColliderShape::Rectangle {
                        size: meta.body_size,
                    };
                    let offset = (meta.body_size.y - meta.slide_body_size.y) / 2.0;
                    let direction = player_input.control.move_direction.x.signum();
                    transform.translation.x += offset * direction;
                    transform.translation.y += offset;
                }
            }
        } else if let ColliderShape::Rectangle { size } = &body.shape {
            animation.current = "slide".into();

            if *size != meta.slide_body_size {
                body.shape = ColliderShape::Rectangle {
                    size: meta.slide_body_size,
                };
                let offset = (meta.body_size.y - meta.slide_body_size.y) / 2.0;
                transform.translation.x -= offset;
                transform.translation.y -= offset;
            }
        }

        let control = &player_inputs.players[player_idx.0 as usize].control;

        if control.jump_just_pressed {
            body.fall_through = true;
        }
    }
}

```

`src/core/player/state/states/dead.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::dead"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
    PlayerState::add_player_state_update_system(session, handle_player_state);
}

pub fn player_state_transition(
    entities: Res<Entities>,
    killed_players: Comp<PlayerKilled>,
    mut player_states: CompMut<PlayerState>,
) {
    for (_ent, (state, _killed)) in entities.iter_with((&mut player_states, &killed_players)) {
        state.current = *ID;
    }
}

pub fn handle_player_state(
    entities: Res<Entities>,
    mut commands: Commands,
    assets: Res<AssetServer>,
    player_indices: Comp<PlayerIdx>,
    player_inputs: Res<MatchInputs>,
    player_states: Comp<PlayerState>,
    killed_players: Comp<PlayerKilled>,
    _sprites: Comp<AtlasSprite>,
    _transform: Comp<Transform>,
    mut kinematic_bodies: CompMut<KinematicBody>,
    mut dynamic_bodies: CompMut<DynamicBody>,
    mut animations: CompMut<AnimationBankSprite>,
    game_meta: Root<GameMeta>,
    mut collision_world: CollisionWorld,
    mut audio_center: ResMut<AudioCenter>,
) {
    for (player_ent, (state, animation, _killed_player, player_idx)) in entities.iter_with((
        &player_states,
        &mut animations,
        &killed_players,
        &player_indices,
    )) {
        if state.current != *ID {
            continue;
        };

        if state.age == 0 {
            // let sprite = sprites.get(player_ent).unwrap();
            // let player_on_right = !sprite.flip_x;
            // let transform = transform.get(player_ent).unwrap();

            // Knock the player's hat off if they had one.
            commands.add(PlayerCommand::drop_hat(player_ent));

            if !dynamic_bodies.contains(player_ent) {
                let dynamic_body = DynamicBody::new(true);
                dynamic_bodies.insert(player_ent, dynamic_body);
            } else {
                dynamic_bodies.get_mut(player_ent).unwrap().is_dynamic = true;
            }

            let player_physics = &game_meta.core.physics.player;
            let dynamic = dynamic_bodies.get_mut(player_ent).unwrap();
            let pop_vel = Vec2::new(0.0, player_physics.ragdoll_initial_pop);
            let ang_vel = player_physics.ragdoll_initial_ang_vel;
            let current_vel = kinematic_bodies.get_mut(player_ent).unwrap().velocity;
            dynamic.push_simulation_command(Box::new(move |body: &mut rapier::RigidBody| {
                let mass = body.mass();
                body.set_linvel(current_vel.into(), true);

                // apply initial impulse
                body.apply_impulse((pop_vel * mass).into(), true);
                body.apply_torque_impulse(
                    ang_vel * body.mass_properties().effective_angular_inertia(),
                    true,
                )
            }));

            let player_meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
            let player_meta = &*assets.get(player_meta_handle);
            ragdoll::use_ragdoll_collider(player_ent, player_meta, &mut collision_world);

            audio_center.play_sound(player_meta.sounds.death, player_meta.sounds.death_volume);

            // animation.current = match killed_player.hit_from {
            //     Some(hit_from)
            //         if {
            //             let is_hit_right = transform.translation.x < hit_from.x;
            //             (player_on_right && is_hit_right) || (!player_on_right && !is_hit_right)
            //         } =>
            //     {
            //         "death_spine".into()
            //     }
            //     _ => "death_belly".into(),
            // };

            animation.current = "death_ragdoll".into();
        }

        if state.age >= 80 {
            // If only one player in match, we wont' score / transition rounds, so respawn player.
            if player_indices.bitset().bit_count() == 1 {
                commands.add(PlayerCommand::despawn(player_ent));
            }
        }
    }
}

```

`src/core/player/state/states/default.rs`:

```rs
use super::*;

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
}

pub fn player_state_transition(entities: Res<Entities>, mut player_states: CompMut<PlayerState>) {
    for (_ent, state) in entities.iter_with(&mut player_states) {
        // If the current state is the default, meaningless state
        if state.current.is_empty() {
            state.current = *idle::ID;
        }
    }
}

```

`src/core/player/state/states/drive_jellyfish.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::drive_jellyfish"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
}

pub fn player_state_transition(
    entities: Res<Entities>,
    player_driving: Comp<PlayerDrivingJellyfish>,
    mut player_states: CompMut<PlayerState>,
    killed_players: Comp<PlayerKilled>,
) {
    for (player_ent, player_state) in entities.iter_with(&mut player_states) {
        if player_driving.contains(player_ent) {
            if killed_players.contains(player_ent) {
                continue;
            }
            if player_state.current != *ID {
                player_state.current = *ID;
            }
        } else if player_state.current == *ID {
            player_state.current = *idle::ID;
        }
    }
}

```

`src/core/player/state/states/idle.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::idle"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
    PlayerState::add_player_state_update_system(session, handle_player_state);
    PlayerState::add_player_state_update_system(session, use_drop_or_grab_items_system(*ID));
}

pub fn player_state_transition(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    mut player_states: CompMut<PlayerState>,
    bodies: Comp<KinematicBody>,
) {
    for (_ent, (player_idx, player_state, body)) in
        entities.iter_with((&player_indexes, &mut player_states, &bodies))
    {
        if player_state.current != *ID {
            continue;
        }

        let control = &player_inputs.players[player_idx.0 as usize].control;

        if control.ragdoll_just_pressed {
            player_state.current = *ragdoll::ID;
        } else if !body.is_on_ground {
            player_state.current = *midair::ID;
        } else if control.move_direction.y < -0.5 {
            player_state.current = *crouch::ID;
        } else if control.move_direction.x != 0.0 {
            player_state.current = *walk::ID;
        }
    }
}

pub fn handle_player_state(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    player_states: Comp<PlayerState>,
    assets: Res<AssetServer>,
    mut sprites: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut audio_center: ResMut<AudioCenter>,
    collision_world: CollisionWorld,
    slippery: CompMut<Slippery>,
) {
    let players = entities.iter_with((&player_states, &player_indexes, &mut sprites, &mut bodies));
    for (player_ent, (player_state, player_idx, animation, body)) in players {
        if player_state.current != *ID {
            continue;
        }
        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(meta_handle);

        // If this is the first frame of this state
        if player_state.age == 0 {
            // set our animation to idle
            animation.current = "idle".into();
        }

        let control = &player_inputs.players[player_idx.0 as usize].control;

        // If we are jumping
        if control.jump_just_pressed {
            // Play jump sound
            audio_center.play_sound(meta.sounds.jump, meta.sounds.jump_volume);

            // Move up
            body.velocity.y = meta.stats.jump_speed;
        }

        let mut slide_factor = 1.;
        for (slippery_ent, slippery_meta) in entities.iter_with(&slippery) {
            if collision_world
                .actor_collisions(player_ent)
                .contains(&slippery_ent)
            {
                slide_factor = 1. / slippery_meta.player_slide;
            }
        }

        // Since we are idling, slide
        if body.velocity.x != 0.0 {
            if body.velocity.x.is_sign_positive() {
                body.velocity.x = (body.velocity.x - meta.stats.slowdown * slide_factor).max(0.0);
            } else {
                body.velocity.x = (body.velocity.x + meta.stats.slowdown * slide_factor).min(0.0);
            }
        }
    }
}

```

`src/core/player/state/states/incapacitated.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::incapacitated"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_update_system(session, handle_player_state);
}

const SLOWING_SPEED: f32 = 0.3;

pub fn handle_player_state(
    entities: Res<Entities>,
    mut player_states: CompMut<PlayerState>,
    player_indexes: Comp<PlayerIdx>,
    assets: Res<AssetServer>,
    player_inputs: Res<MatchInputs>,
    atlas_sprites: Comp<AtlasSprite>,
    mut animations: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
) {
    for (player_ent, (state, animation, body, player_idx, atlas_sprite)) in entities.iter_with((
        &mut player_states,
        &mut animations,
        &mut bodies,
        &player_indexes,
        &atlas_sprites,
    )) {
        if state.current != *ID {
            continue;
        };

        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(meta_handle);

        match state.age {
            0 => {
                // TODO find right animation
                animation.current = "rise".into();
                PlayerCommand::set_inventory(player_ent, None);

                if body.velocity.x.abs() < meta.stats.walk_speed {
                    body.velocity.x = 5. * if atlas_sprite.flip_x { -1.0f32 } else { 1.0 };
                }
            }
            n if n < 80 => {
                if body.velocity.x.abs() < SLOWING_SPEED {
                    body.velocity.x = 0.;
                } else {
                    body.velocity.x -= body.velocity.x.signum() * SLOWING_SPEED
                }
            }
            n if n >= 80 => {
                state.current = *idle::ID;
                animation.current = ustr("idle");
            }
            _ => (),
        }
    }
}

```

`src/core/player/state/states/midair.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::midair"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
    PlayerState::add_player_state_update_system(session, handle_player_state);
    PlayerState::add_player_state_update_system(session, use_drop_or_grab_items_system(*ID));
}

pub fn player_state_transition(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    assets: Res<AssetServer>,
    mut player_states: CompMut<PlayerState>,
    bodies: Comp<KinematicBody>,
    mut audio_center: ResMut<AudioCenter>,
) {
    for (_ent, (player_idx, player_state, body)) in
        entities.iter_with((&player_indexes, &mut player_states, &bodies))
    {
        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(meta_handle);
        let control = &player_inputs.players[player_idx.0 as usize].control;
        if player_state.current != *ID {
            continue;
        }

        if body.is_on_ground {
            // Play land sound
            audio_center.play_sound(meta.sounds.land, meta.sounds.land_volume);
            // Switch to idle state
            player_state.current = *idle::ID;
        } else if control.ragdoll_just_pressed {
            // TODO audio
            player_state.current = *ragdoll::ID;
        }
    }
}

pub fn handle_player_state(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    player_states: Comp<PlayerState>,
    assets: Res<AssetServer>,
    mut sprites: CompMut<AtlasSprite>,
    mut animations: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
) {
    let players = entities.iter_with((
        &player_states,
        &player_indexes,
        &mut animations,
        &mut sprites,
        &mut bodies,
    ));
    for (_player_ent, (player_state, player_idx, animation, sprite, body)) in players {
        if player_state.current != *ID {
            continue;
        }
        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(meta_handle);
        let control = &player_inputs.players[player_idx.0 as usize].control;

        if body.velocity.y > 0.0 {
            animation.current = "rise".into();
        } else {
            animation.current = "fall".into();
        }

        // Limit fall speed if holding jump button
        if control.jump_pressed {
            body.velocity.y = body.velocity.y.max(-meta.stats.slow_fall_speed);
        }

        // Walk in movement direction
        body.velocity.x += meta.stats.accel_air_speed * control.move_direction.x;
        if control.move_direction.x.is_sign_positive() {
            body.velocity.x = body.velocity.x.min(meta.stats.air_speed);
        } else {
            body.velocity.x = body.velocity.x.max(-meta.stats.air_speed);
        }

        if control.move_direction.x == 0.0 {
            if body.velocity.x.is_sign_positive() {
                body.velocity.x = (body.velocity.x - meta.stats.slowdown).max(0.0);
            } else {
                body.velocity.x = (body.velocity.x + meta.stats.slowdown).min(0.0);
            }
        }

        // Fall through platforms
        body.fall_through = control.move_direction.y < -0.5 && control.jump_pressed;

        // Point in movement direction
        if control.move_direction.x > 0.0 {
            sprite.flip_x = false;
        } else if control.move_direction.x < 0.0 {
            sprite.flip_x = true;
        }
    }
}

```

`src/core/player/state/states/ragdoll.rs`:

```rs
use rapier::vector;
use rapier2d::prelude as rapier;

use self::collisions::build_actor_rapier_collider;

use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::ragdoll"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_update_system(session, handle_player_state);
}

/// Track state of ragdoll.
#[derive(HasSchema, Clone, Default)]
pub struct PlayerRagdollState {
    /// If ticking, cannot twitch
    twitch_timer: Timer,

    // Last frame that started twitch animation
    last_twitch_anim_frame: u64,
}

pub fn handle_player_state(
    entities: Res<Entities>,
    time: Res<Time>,
    mut player_states: CompMut<PlayerState>,
    player_indexes: Comp<PlayerIdx>,
    mut transform: CompMut<Transform>,
    assets: Res<AssetServer>,
    player_inputs: Res<MatchInputs>,
    atlas_sprites: Comp<AtlasSprite>,
    mut animations: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut dynamic_bodies: CompMut<DynamicBody>,
    mut ragdoll_states: CompMut<PlayerRagdollState>,
    game_meta: Root<GameMeta>,
    mut collision_world: CollisionWorld,
    mut commands: Commands,
) {
    for (player_ent, (state, transform, animation, player_idx, atlas_sprite)) in
        entities.iter_with((
            &mut player_states,
            &mut transform,
            &mut animations,
            &player_indexes,
            &atlas_sprites,
        ))
    {
        if state.current != *ID {
            continue;
        };

        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = &*assets.get(meta_handle);
        let player_physics = &game_meta.core.physics.player;
        let control = player_inputs.players[player_idx.0 as usize].control;

        match state.age {
            0 => {
                // TODO find right animation
                animation.current = "ragdoll".into();

                // drop item
                commands.add(PlayerCommand::set_inventory(player_ent, None));

                // Knock the player's hat off if they had one.
                commands.add(PlayerCommand::drop_hat(player_ent));

                // Set to simulate physics
                let dynamic_body =
                    dynamic_bodies.get_mut_or_insert(player_ent, DynamicBody::default);
                dynamic_body.is_dynamic = true;

                let body = bodies.get_mut(player_ent).unwrap();
                let player_physics = &game_meta.core.physics.player;
                let pop_vel = Vec2::new(0.0, player_physics.ragdoll_initial_pop);
                let ang_vel = player_physics.ragdoll_initial_ang_vel;
                let sprite_dir = atlas_sprite.flip_x;
                let current_vel = body.velocity;
                let additional_mass = player_physics.ragdoll_additional_mass;

                dynamic_body.push_simulation_command(Box::new(
                    move |body: &mut rapier::RigidBody| {
                        // Transfer current kinematic velocity to dynamic
                        body.set_linvel((current_vel).into(), true);

                        // Apply initial pop upward
                        body.apply_impulse((pop_vel * body.mass()).into(), true);

                        // Apply angular velocity
                        let angular_dir = if sprite_dir { 1.0 } else { -1.0 };
                        body.apply_torque_impulse(
                            ang_vel
                                * angular_dir
                                * body.mass_properties().effective_angular_inertia(),
                            true,
                        );

                        body.set_additional_mass(additional_mass, true);
                    },
                ));

                ragdoll_states.insert(
                    player_ent,
                    PlayerRagdollState {
                        twitch_timer: Timer::from_seconds(
                            player_physics.ragdoll_twitch_delay,
                            TimerMode::Once,
                        ),
                        last_twitch_anim_frame: 0,
                    },
                );
                use_ragdoll_collider(player_ent, meta, &mut collision_world)
            }
            n if n > 1 => {
                let ragdoll_state = ragdoll_states.get_mut(player_ent).unwrap();
                if control.ragdoll_just_pressed {
                    state.current = *idle::ID;
                    animation.current = ustr("idle");

                    // Switch back to kinematic
                    dynamic_bodies.get_mut(player_ent).unwrap().is_dynamic = false;
                    transform.rotation = Quat::default();

                    let pop_vel = Vec2::new(0.0, player_physics.ragdoll_initial_pop);
                    let body = bodies.get_mut(player_ent).unwrap();
                    body.velocity = pop_vel;

                    restore_player_collider(player_ent, meta, &mut collision_world);
                }
                // Handle twitching on input
                else if control.move_direction != Vec2::ZERO {
                    // Update timer determining if we may twitch on input
                    let timer = &mut ragdoll_state.twitch_timer;
                    timer.tick(time.delta());
                    let can_twitch = timer.finished();

                    animation.current = "ragdoll_twitch".into();
                    ragdoll_state.last_twitch_anim_frame = n;

                    // Check if touching solid, no twitching in air
                    // TODO: Maybe it's fun to allow the minor air control?
                    // let touching_solid = collision_world.tile_collision(*transform, body.shape)
                    //     != TileCollisionKind::Empty;

                    // Don't twitch when holding, only tap.
                    if can_twitch && control.just_moved
                    /*&& touching_solid*/
                    {
                        let dynamic_body = dynamic_bodies.get_mut(player_ent).unwrap();
                        let twitch_vel = player_physics.ragdoll_twitch_vel;

                        dynamic_body.push_simulation_command(Box::new(
                            move |body: &mut rapier::RigidBody| {
                                let mut lin_vel = *body.linvel();
                                let dir_x = control.move_direction.x;
                                lin_vel += vector!(dir_x * twitch_vel, 3.0 * twitch_vel);
                                body.set_linvel(lin_vel, true);
                            },
                        ));

                        timer.reset();
                    }
                } else {
                    // Not twitching, back to normal animation if twitch anim held for at least 2 frames
                    if n >= ragdoll_state.last_twitch_anim_frame + 4 {
                        animation.current = "ragdoll".into();
                    }
                }
            }
            _ => {}
        }
    }
}

/// Switch entity to a capsule collider based on collider
/// from [`PlayerMeta`].
pub fn use_ragdoll_collider(
    entity: Entity,
    player_meta: &PlayerMeta,
    collision_world: &mut CollisionWorld,
) {
    // Build capsule from player size.
    let radius = player_meta.body_size.x / 2.0;
    let half_length = player_meta.body_size.y * 0.5 - radius;
    let capsule = ColliderShape::CapsuleY {
        half_length,
        radius,
    };
    let mut builder = build_actor_rapier_collider(entity, capsule.shared_shape());

    // Shift capsule slightly to lineup with animation
    let translation = rapier::Translation::new(0.0, 5.0);
    builder = builder.position(translation.into());

    collision_world.set_actor_shape_from_builder(entity, builder, capsule);
}

/// Restore player shape back to default from `PlayerMeta`.
fn restore_player_collider(
    player_ent: Entity,
    player_meta: &PlayerMeta,
    collision_world: &mut CollisionWorld,
) {
    collision_world.set_actor_shape(player_ent, player_collider_shape(player_meta));
}

```

`src/core/player/state/states/walk.rs`:

```rs
use super::*;

pub static ID: Lazy<Ustr> = Lazy::new(|| ustr("core::walk"));

pub fn install(session: &mut SessionBuilder) {
    PlayerState::add_player_state_transition_system(session, player_state_transition);
    PlayerState::add_player_state_update_system(session, handle_player_state);
    PlayerState::add_player_state_update_system(session, use_drop_or_grab_items_system(*ID));
}

pub fn player_state_transition(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    mut player_states: CompMut<PlayerState>,
    bodies: Comp<KinematicBody>,
) {
    for (_ent, (player_idx, player_state, body)) in
        entities.iter_with((&player_indexes, &mut player_states, &bodies))
    {
        if player_state.current != *ID {
            continue;
        }

        let control = &player_inputs.players[player_idx.0 as usize].control;

        if control.ragdoll_just_pressed {
            player_state.current = *ragdoll::ID;
        } else if !body.is_on_ground {
            player_state.current = *midair::ID;
        } else if control.move_direction.y < -0.5 {
            player_state.current = *crouch::ID;
        } else if control.move_direction.x == 0.0 {
            player_state.current = *idle::ID;
        }
    }
}

pub fn handle_player_state(
    entities: Res<Entities>,
    player_inputs: Res<MatchInputs>,
    player_indexes: Comp<PlayerIdx>,
    player_states: Comp<PlayerState>,
    assets: Res<AssetServer>,
    mut sprites: CompMut<AtlasSprite>,
    mut animations: CompMut<AnimationBankSprite>,
    mut bodies: CompMut<KinematicBody>,
    mut audio_center: ResMut<AudioCenter>,
) {
    let players = entities.iter_with((
        &player_states,
        &player_indexes,
        &mut animations,
        &mut sprites,
        &mut bodies,
    ));
    for (_player_ent, (player_state, player_idx, animation, sprite, body)) in players {
        if player_state.current != *ID {
            continue;
        }
        let meta_handle = player_inputs.players[player_idx.0 as usize].selected_player;
        let meta = assets.get(meta_handle);
        let control = &player_inputs.players[player_idx.0 as usize].control;

        // If this is the first frame of this state
        if player_state.age == 0 {
            // set our animation
            animation.current = "walk".into();
        }

        // If we are jumping
        if control.jump_just_pressed {
            audio_center.play_sound(meta.sounds.jump, meta.sounds.jump_volume);

            // Move up
            body.velocity.y = meta.stats.jump_speed;
        }

        // Walk in movement direction
        body.velocity.x += meta.stats.accel_walk_speed * control.move_direction.x;
        if control.move_direction.x.is_sign_positive() {
            body.velocity.x = body
                .velocity
                .x
                .min(meta.stats.walk_speed * control.move_direction.x);
        } else {
            body.velocity.x = body
                .velocity
                .x
                .max(meta.stats.walk_speed * control.move_direction.x);
        }

        // Point in movement direction
        if control.move_direction.x > 0.0 {
            sprite.flip_x = false;
        } else if control.move_direction.x < 0.0 {
            sprite.flip_x = true;
        }
    }
}

```

`src/core/random.rs`:

```rs
//! Global, deterministic random resource.

use crate::prelude::*;

use bones_framework::{
    prelude::bindings::EcsRef,
    scripting::lua::{
        bindings::SchemaLuaEcsRefMetatable,
        piccolo::{self as lua, Callback},
    },
};
pub use turborand::prelude::*;

pub fn plugin(session: &mut SessionBuilder) {
    session.init_resource::<GlobalRng>();
}

/// Resource that can produce deterministic, pseudo-random numbers.
///
/// Access in a system with [`Res<GlobalRng>`].
#[derive(Clone, HasSchema, Deref, DerefMut)]
#[type_data(SchemaLuaEcsRefMetatable(lua_metatable))]
pub struct GlobalRng(AtomicRng);

pub const DEFAULT_RANDOM_SEED: u32 = 7;

impl Default for GlobalRng {
    fn default() -> Self {
        Self(AtomicRng::with_seed(DEFAULT_RANDOM_SEED as u64))
    }
}

fn lua_metatable(ctx: lua::Context) -> lua::Table {
    let metatable = lua::Table::new(&ctx);

    let f32_fn = ctx.registry().stash(
        &ctx,
        Callback::from_fn(&ctx, |ctx, _fuel, mut stack| {
            let this: &EcsRef = stack.consume(ctx)?;
            let mut b = this.borrow_mut();
            let global_rng = b.schema_ref_mut()?.cast_into_mut::<GlobalRng>();
            let n = global_rng.0.f32();
            stack.replace(ctx, n);
            Ok(lua::CallbackReturn::Return)
        }),
    );
    metatable
        .set(
            ctx,
            "__index",
            Callback::from_fn(&ctx, move |ctx, _fuel, mut stack| {
                let (_this, key): (lua::Value, lua::String) = stack.consume(ctx)?;

                #[allow(clippy::single_match)]
                match key.as_bytes() {
                    b"f32" => {
                        stack.push_front(ctx.registry().fetch(&f32_fn).into());
                    }
                    _ => (),
                }
                Ok(lua::CallbackReturn::Return)
            }),
        )
        .unwrap();

    metatable
}

```

`src/core/scoring.rs`:

```rs
//! Track scoring of rounds / tournament

use crate::{prelude::*, ui::scoring::ScoringMenuState};

/// Timer tracking how long until round is scored once one or fewer players are alive
#[derive(HasSchema, Clone, Default)]
pub struct RoundScoringState {
    /// Timer used to count down to scoring, or to round transition post scoring.
    /// Is `None` if round is in progress.
    pub timer: Option<Timer>,

    /// If true: round has been scored, timer counts down to round transition.
    pub round_scored: bool,

    /// Save MapPool state to transitin with when determining round end.
    pub next_maps: Option<MapPool>,

    /// Save the frame round was marked to transition on in network play.
    /// Transition does not execute until this is confirmed by remote players.
    pub network_round_end_frame: Option<i32>,
}

impl RoundScoringState {
    /// Are timers for round scoring + linger before transition complete?
    pub fn transition_timers_done(&self) -> bool {
        if let Some(timer) = self.timer.as_ref() {
            return timer.finished() && self.round_scored;
        }
        false
    }

    /// Is scoring timer complete but round not yet scored?
    pub fn should_score_round(&self) -> bool {
        if let Some(timer) = self.timer.as_ref() {
            return timer.finished() && !self.round_scored;
        }
        false
    }
}

/// Store player's match score's (rounds won)
#[derive(HasSchema, Clone, Default, Debug)]
pub struct MatchScore {
    /// Map player to score, if no entry is 0.
    player_score: HashMap<PlayerIdx, u32>,

    /// How many rounds have completed this match
    rounds_completed: u32,
}

impl MatchScore {
    /// Get player's score
    pub fn score(&self, player: PlayerIdx) -> u32 {
        self.player_score.get(&player).map_or(0, |s| *s)
    }

    /// Mark round as completed and increment score of winner. None should be provided
    /// on a draw.
    pub fn complete_round(&mut self, winner: Option<PlayerIdx>) {
        self.rounds_completed += 1;

        // Increment winner's score if not a draw
        if let Some(winner) = winner {
            if let Some(score) = self.player_score.get_mut(&winner) {
                *score += 1;
            } else {
                self.player_score.insert(winner, 1);
            }
        }
    }

    /// How many rounds have been played in this match
    pub fn rounds_completed(&self) -> u32 {
        self.rounds_completed
    }
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session.add_system_to_stage(CoreStage::PostUpdate, round_end);
}

pub fn round_end(
    mut commands: Commands,
    meta: Root<GameMeta>,
    entities: Res<Entities>,
    rng: Res<GlobalRng>,
    map_pool: Res<MapPool>,
    mut score: ResMutInit<MatchScore>,
    mut sessions: ResMut<Sessions>,
    mut session_options: ResMut<SessionOptions>,
    time: Res<Time>,
    mut state: ResMutInit<RoundScoringState>,
    mut scoring_menu: ResMut<ScoringMenuState>,
    killed_players: Comp<PlayerKilled>,
    player_indices: Comp<PlayerIdx>,
    #[cfg(not(target_arch = "wasm32"))] syncing_info: Option<Res<SyncingInfo>>,
) {
    // Count players so we can avoid ending round if it's a one player match
    let mut player_count = 0;

    // Is Some if one player left, or none if all players dead.
    // Exits function if >= 2 players left: otherwise we handle continue to handle
    // round scoring.
    let last_player_or_draw: Option<(PlayerIdx, Entity)> = {
        let mut last_player: Option<(PlayerIdx, Entity)> = None;
        for (ent, (player_idx, killed)) in
            entities.iter_with((&player_indices, &Optional(&killed_players)))
        {
            player_count += 1;
            if killed.is_none() {
                if last_player.is_some() {
                    // At least two players alive, not the round end.
                    return;
                }

                last_player = Some((*player_idx, ent));
            }
        }

        // We either found only one player or None.
        last_player
    };

    if player_count == 1 {
        // Single player match - don't end round.
        return;
    }

    // Tick any round end timer we have
    if let Some(timer) = state.timer.as_mut() {
        timer.tick(time.delta());
    }

    // There are one or fewer players alive if we have not already returned from function

    // Ready to score the round?
    if state.should_score_round() {
        state.round_scored = true;
        score.complete_round(last_player_or_draw.map(|x| x.0));

        if let Some((_, winner_ent)) = last_player_or_draw {
            // commands.add(PlayerCommand::won_round(winner));
            commands.add(spawn_win_indicator(winner_ent));
        }

        // Start the post-score linger timer before next round
        state.timer = Some(Timer::new(
            meta.core.config.round_end_post_score_linger_time,
            TimerMode::Once,
        ));
    } else if state.transition_timers_done() {
        // post-score linger timer complete, go to next round if all players confirmed transition

        // Is round transition sycnrhonized on all clients in network play?
        // Will evaluate to true in local play.
        #[allow(unused_assignments)]
        let mut round_transition_synchronized = false;

        // If in network play and determined a prev frame round should end on:
        #[allow(unused_variables)]
        if let Some(end_net_frame) = state.network_round_end_frame {
            // check if this frame is confirmed by all players.
            #[cfg(not(target_arch = "wasm32"))]
            {
                round_transition_synchronized = match syncing_info {
                    Some(syncing_info) => end_net_frame <= syncing_info.last_confirmed_frame(),
                    None => true,
                };
            }
        } else {
            // Network frame for round end not yet recorded (or in local only)

            // Randomize map and save MapPool to be used for transition
            let mut map_pool = map_pool.clone();
            map_pool.randomize_current_map(&rng);
            state.next_maps = Some(map_pool);

            // Save current predicted frame for round end.
            // Will not follow through with transition until this frame is confirmed
            // by all players in network play.
            #[cfg(not(target_arch = "wasm32"))]
            if let Some(syncing_info) = syncing_info {
                state.network_round_end_frame = Some(syncing_info.current_frame());
            } else {
                // No sync info - must be local and sychronized.
                round_transition_synchronized = true;
            }
        }

        // Wasm32 is always local, can transition now.
        #[cfg(target_arch = "wasm32")]
        {
            round_transition_synchronized = true;
        }

        if round_transition_synchronized {
            if score
                .rounds_completed
                .is_multiple_of(meta.core.config.rounds_between_intermission)
            {
                scoring_menu.active = true;
                scoring_menu.match_score = score.clone();
                scoring_menu.next_maps = state.next_maps.clone();

                session_options.active = false;
            } else {
                // Not at intermission, tranisition immediately

                // Use maps originally determined on synchronized transition frame
                let next_maps = state.next_maps.clone().unwrap();
                sessions.add_command(Box::new(|sessions: &mut Sessions| {
                    sessions.restart_game(Some(next_maps), false);
                }));
            }
        }
    } else if state.timer.is_none() {
        // Scoring timer does not exist, start a new one

        state.timer = Some(Timer::new(
            meta.core.config.round_end_score_time,
            TimerMode::Once,
        ));
        state.round_scored = false;
    } else {
        // Timer still ticking
    }
}

```

`src/core/utils.rs`:

```rs
//! Miscellaneous utilities.

mod easing;
pub use easing::*;
mod math;
pub use math::*;
mod rect;
pub use rect::*;
mod macros;
#[allow(unused)]
pub use macros::*;
mod metadata;
pub use metadata::*;

```

`src/core/utils/easing.rs`:

```rs
use std::f32::consts::PI;

use crate::prelude::*;

/// Simple easing calculator
#[derive(Clone, Debug)]
pub struct Ease {
    pub ease_in: bool,
    pub ease_out: bool,
    pub function: EaseFunction,
    pub progress: f32,
}

#[derive(HasSchema, Clone, Default)]
#[type_data(metadata_asset("ease"))]
#[repr(C)]
pub struct EaseMeta {
    pub ease_in: bool,
    pub ease_out: bool,
    pub function: EaseFunction,
}

#[derive(HasSchema, Copy, Clone, Debug, Default)]
#[repr(u8)]
pub enum EaseFunction {
    #[default]
    Quadratic,
    Cubic,
    Sinusoidial,
}

impl Default for Ease {
    fn default() -> Self {
        Self {
            ease_in: true,
            ease_out: true,
            function: EaseFunction::Quadratic,
            progress: 0.0,
        }
    }
}

impl Ease {
    pub fn output(&self) -> f32 {
        let mut k = self.progress;

        // Reference for easing functions:
        // https://echarts.apache.org/examples/en/editor.html?c=line-easing&lang=ts
        //
        // TODO: Add tests to make sure easings are correct
        match (&self.function, self.ease_in, self.ease_out) {
            (EaseFunction::Quadratic, true, true) => {
                k *= 2.0;
                if k < 1.0 {
                    0.5 * k * k
                } else {
                    k -= 1.0;
                    -0.5 * (k * (k - 2.0) - 1.0)
                }
            }
            (EaseFunction::Quadratic, true, false) => k * k,
            (EaseFunction::Quadratic, false, true) => k * (2.0 - k),
            (EaseFunction::Cubic, true, true) => {
                k *= 2.0;
                if k < 1.0 {
                    0.5 * k * k * k
                } else {
                    k -= 2.0;
                    0.5 * (k * k * k + 2.0)
                }
            }
            (EaseFunction::Cubic, true, false) => k * k * k,
            (EaseFunction::Cubic, false, true) => {
                k -= 1.0;
                k * k * k + 1.0
            }
            (EaseFunction::Sinusoidial, true, true) => 0.5 * (1.0 - f32::cos(PI * k)),
            (EaseFunction::Sinusoidial, true, false) => 1.0 - f32::cos((k * PI) / 2.0),
            (EaseFunction::Sinusoidial, false, true) => f32::sin((k * PI) / 2.0),
            (_, false, false) => k,
        }
    }
}

```

`src/core/utils/macros.rs`:

```rs
/// Macro to "derive" ( not really a derive macro ) SystemParam for a struct.
#[macro_export]
macro_rules! impl_system_param {
    (
        $( #[$m:meta] )*
        pub struct $t:ident<'a> {
            $(
                $( #[$attrs:meta] )*
                $f_name:ident: $f_ty:ty
            ),*
            $(,)?
        }
    ) => {
        $( #[$m] )*
        pub struct $t<'a> {
            $(
                $( #[$attrs] )*
                pub $f_name: $f_ty
            ),*
        }

        impl<'a> SystemParam for $t<'a> {
            type State = (
                $(
                    <$f_ty as SystemParam>::State
                ),*
            );
            type Param<'p> = $t<'p>;

            fn get_state(world: &World) -> Self::State {
                (
                    $(
                        <$f_ty as SystemParam>::get_state(world)
                    ),*
                )
            }

            fn borrow<'s>(world: &'s World, state: &'s mut Self::State) -> Self::Param<'s> {
                let (
                    $(
                        $f_name
                    ),*
                ) = state;
                let (
                    $(
                        $f_name
                    ),*
                ) = (
                    $(
                        <$f_ty as SystemParam>::borrow(world, $f_name)
                    ),*
                );

                Self::Param {
                    $(
                        $f_name
                    ),*
                }
            }
        }
    };
}

```

`src/core/utils/math.rs`:

```rs
/// Clamps a sin wave between a minimum and maximum value.
pub fn sine_between(min: f32, max: f32, t: f32) -> f32 {
    ((max - min) * t.sin() + max + min) / 2.
}

```

`src/core/utils/metadata.rs`:

```rs
//! Utilities for asset and meta data handling.

use crate::prelude::*;

/// Error type for failure to resolve [`UntypedHandle`] to metadata asset from  `Handle<T>` or `Handle<ElementMeta>`
/// (where `T` is metadata type).
#[derive(thiserror::Error, Debug, Clone)]
pub enum MetaHandleCastError {
    #[error("UntypedHandle does not represent Handle<{0}> or Handle<ElementMeta>")]
    BadHandleType(String),
    #[error("UntypedHandle maps to Handle<ElementMeta> but ElementMeta inner handle does not cast to {0}")]
    ElementDataMismatch(String),
    #[error("Failed to retrieve asset for handle (required for cast type valdiation)")]
    InvalidHandle,
}

/// Try to get metadata handle from [`UntypedHandle`] that may represent direct handle to meta (`Handle<T>`)
/// or `Handle<ElementMeta>` where [`ElementMeta`]'s data is castable to `Handle<T>`.
///
/// [`Handle::untyped`] can be used to convert to [`UntypedHandle`].
///
/// This is useful for code that wants to spawn an item and take UntypedHandle to allow either direct meta handle
/// or `Handle<ElementMeta>` as argument.
pub fn try_cast_meta_handle<T: HasSchema>(
    handle: UntypedHandle,
    assets: &AssetServer,
) -> Result<Handle<T>, MetaHandleCastError> {
    // Get untyped asset from handle or error on failure
    let asset = assets
        .try_get_untyped(handle)
        .ok_or(MetaHandleCastError::InvalidHandle)?;

    // If asset casts to T, return it as Handle<T>
    if asset.try_cast_ref::<T>().is_ok() {
        return Ok(handle.typed::<T>());
    }

    // Check if handle type is ElementMeta
    if let Ok(element_meta) = asset.try_cast_ref::<ElementMeta>() {
        // Does element data cast to T?
        if assets.get(element_meta.data).try_cast_ref::<T>().is_ok() {
            // Return ElementMeta's data as Handle<T>
            Ok(element_meta.data.untyped().typed())
        } else {
            // ElementMeta data does not cast to T.
            Err(MetaHandleCastError::ElementDataMismatch(
                std::any::type_name::<T>().to_string(),
            ))
        }
    } else {
        // UntypedHandle is neither Handle<T> or Handle<ElementMeta>.
        Err(MetaHandleCastError::BadHandleType(
            std::any::type_name::<T>().to_string(),
        ))
    }
}

```

`src/core/utils/rect.rs`:

```rs
use crate::prelude::*;

#[derive(Debug, Copy, Clone, Default)]
#[repr(C)]
pub struct Rect {
    pub min: Vec2,
    pub max: Vec2,
}

impl Rect {
    pub fn new(x: f32, y: f32, width: f32, height: f32) -> Self {
        let half_size = vec2(width / 2.0, height / 2.0);
        let min = vec2(x, y) - half_size;
        let max = min + vec2(width, height);
        Self { min, max }
    }

    #[inline]
    pub fn width(&self) -> f32 {
        self.max.x - self.min.x
    }

    #[inline]
    pub fn height(&self) -> f32 {
        self.max.y - self.min.y
    }

    #[inline]
    pub fn size(&self) -> Vec2 {
        vec2(self.width(), self.height())
    }

    #[inline]
    pub fn left(&self) -> f32 {
        self.min.x
    }

    #[inline]
    pub fn right(&self) -> f32 {
        self.max.x
    }

    #[inline]
    pub fn top(&self) -> f32 {
        self.max.y
    }

    #[inline]
    pub fn bottom(&self) -> f32 {
        self.min.y
    }

    #[inline]
    pub fn top_left(&self) -> Vec2 {
        vec2(self.min.x, self.max.y)
    }

    #[inline]
    pub fn top_right(&self) -> Vec2 {
        vec2(self.max.x, self.max.y)
    }

    #[inline]
    pub fn bottom_left(&self) -> Vec2 {
        vec2(self.min.x, self.min.y)
    }

    #[inline]
    pub fn bottom_right(&self) -> Vec2 {
        vec2(self.max.x, self.min.y)
    }

    pub fn overlaps(&self, other: &Rect) -> bool {
        self.left() <= other.right()
            && self.right() >= other.left()
            && self.top() >= other.bottom()
            && self.bottom() <= other.top()
    }

    pub fn contains(&self, point: Vec2) -> bool {
        point.x <= self.right()
            && point.x >= self.left()
            && point.y >= self.bottom()
            && point.y <= self.top()
    }

    #[inline]
    pub fn center(&self) -> Vec2 {
        let half_size = self.size() / 2.0;
        self.min + half_size
    }

    pub fn min(&self) -> Vec2 {
        self.min
    }

    pub fn max(&self) -> Vec2 {
        self.max
    }
}

```

`src/core/win_indicator.rs`:

```rs
use crate::prelude::*;

/// Use value significantly father than map layers to make sure is in front
const WIN_INDICATOR_Z: f32 = -700.0;

#[derive(HasSchema, Clone, Default)]
#[type_data(metadata_asset("win_indicator"))]
#[repr(C)]
pub struct WinIndicatorMeta {
    pub attachment: Handle<AttachmentMeta>,
    pub sound: Handle<AudioSource>,
    pub volume: f32,
}

pub fn game_plugin(_: &mut Game) {
    WinIndicatorMeta::register_schema();
}

/// Command to spawn a win indicator and attach to entity
pub fn spawn_win_indicator(attach_entity: Entity) -> StaticSystem<(), ()> {
    (move |assets: Res<AssetServer>,
           mut audio_center: ResMut<AudioCenter>,
           mut entities: ResMut<Entities>,
           meta: Root<GameMeta>,
           mut transforms: CompMut<Transform>,
           mut atlas_sprites: CompMut<AtlasSprite>,
           mut attachments: CompMut<Attachment>,
           mut attachment_easings: CompMut<AttachmentEasing>| {
        let win_indicator_handle = meta.core.player_win_indicator;
        let win_indicator_meta = assets.get(win_indicator_handle);
        let attachment_meta = assets.get(win_indicator_meta.attachment);
        let easing_meta = assets.get(attachment_meta.attachment_easing);
        let win_entity = entities.create();

        // Compute z offset such that indicator is at target Z value
        let attach_transform = transforms.get(attach_entity).unwrap();
        let z_offset = WIN_INDICATOR_Z - attach_transform.translation.z;

        transforms.insert(win_entity, default());
        atlas_sprites.insert(
            win_entity,
            AtlasSprite {
                index: 0,
                atlas: attachment_meta.atlas,
                ..default()
            },
        );
        attachments.insert(
            win_entity,
            attachment_meta.attachment(attach_entity, z_offset),
        );

        let initial_offset = attachment_meta.offset;
        let target_offset = initial_offset + easing_meta.delta_offset;
        attachment_easings.insert(
            win_entity,
            AttachmentEasing {
                initial_offset,
                target_offset,
                offset_ease_timer: Timer::new(easing_meta.offset_ease_duration, TimerMode::Once),
                ease: Ease {
                    ease_in: easing_meta.ease.ease_in,
                    ease_out: easing_meta.ease.ease_out,
                    function: easing_meta.ease.function,
                    progress: 0.0,
                },
            },
        );

        audio_center.play_sound(win_indicator_meta.sound, win_indicator_meta.volume as f64);
    })
    .system()
}

```

`src/debug.rs`:

```rs
//! Debug tools and menus.

use crate::prelude::*;
use bones_framework::debug::frame_time_diagnostics_plugin;

#[cfg(not(target_arch = "wasm32"))]
use bones_framework::networking::debug::network_debug_window;

pub fn game_plugin(game: &mut Game) {
    game.sessions
        .create_with(SessionNames::DEBUG, |builder: &mut SessionBuilder| {
            builder
                .install_plugin(session_plugin)
                .install_plugin(frame_time_diagnostics_plugin);
        });
}

fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::First, debug_menu);

    #[cfg(not(target_arch = "wasm32"))]
    session
        .stages
        .add_system_to_stage(CoreStage::First, network_debug_window);
}

#[derive(HasSchema, Clone, Debug, Default)]
struct DebugMenuState {
    pub show_menu: bool,
    pub snapshot: Option<World>,
}

fn debug_menu(
    mut sessions: ResMut<Sessions>,
    keyboard_inputs: Res<KeyboardInputs>,
    mut state: ResMutInit<DebugMenuState>,
    ctx: ResMut<EguiCtx>,
    localization: Localization<GameMeta>,
) {
    let DebugMenuState {
        snapshot,
        show_menu,
    } = &mut *state;

    let toggle_debug = keyboard_inputs
        .key_events
        .iter()
        .any(|x| x.key_code.option() == Some(KeyCode::F12) && !x.button_state.pressed());

    if toggle_debug {
        *show_menu = !*show_menu;
    }
    let game_session = sessions.get_mut(SessionNames::GAME);

    // Delete the snapshot if there is one and we are not in the middle of a game.
    if game_session.is_none() && snapshot.is_some() {
        *snapshot = None;
    }

    egui::Window::new(localization.get("debug-tools"))
        .id(egui::Id::from("debug"))
        .open(show_menu)
        .show(&ctx, |ui| {
            ui.horizontal(|ui| {
                ui.set_enabled(game_session.is_some());

                if ui.button(localization.get("take-snapshot")).clicked() {
                    if let Some(session) = game_session {
                        *snapshot = Some(session.snapshot());
                    }
                } else if ui.button(localization.get("restore-snapshot")).clicked() {
                    if let Some(session) = game_session {
                        if let Some(mut snapshot) = snapshot.clone() {
                            session.restore(&mut snapshot);
                        }
                    }
                }

                let show_frame_time_window = &mut ctx
                    .get_state::<bones_framework::debug::FrameTimeWindowState>()
                    .open;
                if ui
                    .button(localization.get("frame-time-diagnostics"))
                    .clicked()
                {
                    *show_frame_time_window = !*show_frame_time_window;
                    ctx.set_state(bones_framework::debug::FrameTimeWindowState {
                        open: *show_frame_time_window,
                    });
                }

                // Show net diagnostics button
                #[cfg(not(target_arch = "wasm32"))]
                {
                    let show_network_debug = &mut ctx.get_state::<NetworkDebugMenuState>().open;
                    if ui.button(localization.get("network-debug")).clicked() {
                        *show_network_debug = !*show_network_debug;
                        // Set state so other debug menus may access
                        ctx.set_state(NetworkDebugMenuState {
                            open: *show_network_debug,
                        });
                    }
                }

                // Network debug disabled in wasm.
                #[cfg(target_arch = "wasm32")]
                ui.add_enabled_ui(false, |ui| {
                    let _ = ui.button(localization.get("network-debug"));
                });
            })
        });
}

```

`src/fullscreen.rs`:

```rs
use crate::prelude::*;

pub fn game_plugin(game: &mut Game) {
    game.systems.add_before_system(update_fullscreen);
}

fn update_fullscreen(game: &mut Game) {
    #[cfg(target_arch = "wasm32")]
    let _ = game;

    #[cfg(not(target_arch = "wasm32"))]
    {
        let storage = game.shared_resource_cell::<Storage>().unwrap();
        let mut storage = storage.borrow_mut().unwrap();
        let window = game.shared_resource_cell::<Window>().unwrap();
        let mut window = window.borrow_mut().unwrap();
        let keyboard = game.shared_resource::<KeyboardInputs>();

        let f11_pressed = keyboard
            .key_events
            .iter()
            .any(|x| x.key_code == Set(KeyCode::F11) && x.button_state.pressed());

        let settings = storage.get_mut::<Settings>().unwrap();
        if f11_pressed {
            settings.fullscreen = !settings.fullscreen;
        }
        window.fullscreen = settings.fullscreen;
    }
}

```

`src/input.rs`:

```rs
use crate::{
    prelude::*,
    settings::{InputKind, PlayerControlMapping, Settings},
};

use strum::EnumIter;

pub fn game_plugin(game: &mut Game) {
    game.systems.add_startup_system(load_controler_mapping);
    game.insert_shared_resource(EguiInputHook::new(handle_egui_input));
    game.init_shared_resource::<GlobalPlayerControls>();
    game.init_shared_resource::<PlayerInputCollector>();
}

// Startup system to load game control mapping resource from the storage and insert the player input
// collector.
fn load_controler_mapping(game: &mut Game) {
    let control_mapping = {
        let storage = game.shared_resource::<Storage>();
        storage.get::<Settings>().unwrap().player_controls.clone()
    };
    game.insert_shared_resource(control_mapping);
}

fn collect_player_controls(game: &mut Game) {
    let controls = 'controls: {
        let mut collector = game.shared_resource_mut::<PlayerInputCollector>();
        let Some(mapping) = game.get_shared_resource::<PlayerControlMapping>() else {
            break 'controls default();
        };
        let keyboard = game.shared_resource::<KeyboardInputs>();
        let gamepad = game.shared_resource::<GamepadInputs>();
        collector.apply_inputs_inner(&mapping, &keyboard, &gamepad);
        collector.update_just_pressed();
        collector.advance_frame();
        GlobalPlayerControls(
            collector
                .get_current_controls()
                .clone()
                .into_iter()
                .collect(),
        )
    };
    game.insert_shared_resource(controls);
}

/// Settings to configure the [`handle_egui_input`] system
#[derive(Default, Debug, Clone, Copy)]
pub struct EguiInputSettings {
    /// If set to `true`, then all keyboard inputs will be sucked into a black hole so that egui
    /// doesn't read them.
    pub disable_keyboard_input: bool,
    /// If set to `true`, gamepad inputs will not be converted to egui inputs for menu navigation.
    pub disable_gamepad_input: bool,
}

/// Game system that takes the raw input events and converts it to player controls based on the
/// player input map.
pub fn handle_egui_input(game: &mut Game, egui_input: &mut egui::RawInput) {
    // We collect the global player controls here in the egui input hoook so that it will be
    // available immediately to egui, and then available to the rest of the systems that run after.
    collect_player_controls(game);

    let ctx = game.shared_resource::<EguiCtx>();
    let settings = ctx.get_state::<EguiInputSettings>();
    let events = &mut egui_input.events;

    // Remove keyboard events if disabled.
    if settings.disable_keyboard_input {
        events.retain(|x| !matches!(x, egui::Event::Key { .. }));
    }

    // Forward gamepad events to egui if not disabled.
    if !settings.disable_gamepad_input {
        let controls = game.shared_resource::<GlobalPlayerControls>();

        let push_key = |events: &mut Vec<egui::Event>, key| {
            events.push(egui::Event::Key {
                key,
                pressed: true,
                repeat: false,
                modifiers: default(),
            });
        };

        for (source, player_control) in controls.iter() {
            if !matches!(source, ControlSource::Gamepad(_)) {
                continue;
            };

            if player_control.menu_confirm_just_pressed {
                push_key(events, egui::Key::Enter);
            }
            if player_control.menu_back_just_pressed {
                push_key(events, egui::Key::Escape);
            }

            if player_control.just_moved {
                if player_control.move_direction.y > 0.1 {
                    push_key(events, egui::Key::ArrowUp);
                } else if player_control.move_direction.y < -0.1 {
                    push_key(events, egui::Key::ArrowDown);
                } else if player_control.move_direction.x < -0.1 {
                    push_key(events, egui::Key::ArrowLeft);
                } else if player_control.move_direction.x > 0.1 {
                    push_key(events, egui::Key::ArrowRight);
                }
            }
        }
    }
}

/// Resource containing the global player control inputs.
///
/// It is important to note that these controls are updated every system frame, and therefore
/// the `just_pressed` and `just_moved` flags are not accurate in the context of a fixed
/// update match loop. Matches with fixed updates have their own input resource.
///
/// This resource is used throughout the menu where the inputs are collected every frame, not
/// every fixed update.
#[derive(HasSchema, Clone, Default, Deref, DerefMut)]
pub struct GlobalPlayerControls(HashMap<ControlSource, PlayerControl>);

impl GlobalPlayerControls {
    /// Iterator over inputs that originated from gamepads.
    pub fn gamepads(&self) -> impl Iterator<Item = &PlayerControl> {
        self.iter().filter_map(|(source, control)| {
            matches!(source, ControlSource::Gamepad(_)).then_some(control)
        })
    }
}

/// The source of player control inputs
#[derive(Debug, Clone, Copy, Default, HasSchema, Hash, Eq, PartialEq, EnumIter)]
#[repr(C, u8)]
pub enum ControlSource {
    #[default]
    /// The first keyboard controls
    Keyboard1,
    /// The second keyboard controls
    Keyboard2,
    /// A gamepad control with the given index
    Gamepad(u32),
}

/// Player control input state
#[derive(HasSchema, Default, Clone, Copy, Debug)]
#[repr(C)]
pub struct PlayerControl {
    pub left: f32,
    pub right: f32,
    pub up: f32,
    pub down: f32,
    pub move_direction: Vec2,
    pub just_moved: bool,
    pub moving: bool,

    pub menu_back_pressed: bool,
    pub menu_back_just_pressed: bool,
    pub menu_confirm_pressed: bool,
    pub menu_confirm_just_pressed: bool,
    pub menu_start_pressed: bool,
    pub menu_start_just_pressed: bool,

    pub pause_pressed: bool,
    pub pause_just_pressed: bool,

    pub jump_pressed: bool,
    pub jump_just_pressed: bool,

    pub shoot_pressed: bool,
    pub shoot_just_pressed: bool,

    pub grab_pressed: bool,
    pub grab_just_pressed: bool,

    pub slide_pressed: bool,
    pub slide_just_pressed: bool,

    pub ragdoll_pressed: bool,
    pub ragdoll_just_pressed: bool,
}

#[derive(HasSchema, Clone)]
pub struct PlayerInputCollector {
    /// The local player's [`ControlSource`] in an online / lan game.
    control_source: ControlSource,
    current_controls: HashMap<ControlSource, PlayerControl>,
    last_controls: HashMap<ControlSource, PlayerControl>,
}

impl PlayerInputCollector {
    pub fn get_current_controls(&self) -> &HashMap<ControlSource, PlayerControl> {
        &self.current_controls
    }
}

impl Default for PlayerInputCollector {
    fn default() -> Self {
        let def_controls = || {
            let mut m = HashMap::default();
            // We always have the keyboard controls "plugged in"
            m.insert(ControlSource::Keyboard1, default());
            m.insert(ControlSource::Keyboard2, default());
            for i in 0..MAX_PLAYERS {
                m.insert(ControlSource::Gamepad(i), default());
            }
            m
        };
        Self {
            control_source: ControlSource::Keyboard1,
            current_controls: def_controls(),
            last_controls: def_controls(),
        }
    }
}

impl<'a> bones_framework::input::InputCollector<'a, PlayerControl> for PlayerInputCollector {
    fn update_just_pressed(&mut self) {
        self.current_controls
            .iter_mut()
            .for_each(|(source, current)| {
                let last = self.last_controls.entry(*source).or_default();

                current.move_direction =
                    vec2(current.right - current.left, current.up - current.down);
                current.moving = current.move_direction.length_squared() > 0.01;

                for (just_pressed, current_pressed, last_pressed) in [
                    (
                        &mut current.pause_just_pressed,
                        current.pause_pressed,
                        last.pause_pressed,
                    ),
                    (
                        &mut current.jump_just_pressed,
                        current.jump_pressed,
                        last.jump_pressed,
                    ),
                    (
                        &mut current.shoot_just_pressed,
                        current.shoot_pressed,
                        last.shoot_pressed,
                    ),
                    (
                        &mut current.grab_just_pressed,
                        current.grab_pressed,
                        last.grab_pressed,
                    ),
                    (
                        &mut current.slide_just_pressed,
                        current.slide_pressed,
                        last.slide_pressed,
                    ),
                    (
                        &mut current.ragdoll_just_pressed,
                        current.ragdoll_pressed,
                        last.ragdoll_pressed,
                    ),
                    (
                        &mut current.menu_back_just_pressed,
                        current.menu_back_pressed,
                        last.menu_back_pressed,
                    ),
                    (
                        &mut current.menu_confirm_just_pressed,
                        current.menu_confirm_pressed,
                        last.menu_confirm_pressed,
                    ),
                    (
                        &mut current.menu_start_just_pressed,
                        current.menu_start_pressed,
                        last.menu_start_pressed,
                    ),
                    (&mut current.just_moved, current.moving, last.moving),
                ] {
                    *just_pressed = current_pressed && !last_pressed;
                }
            });
    }

    fn advance_frame(&mut self) {
        self.last_controls = self.current_controls.clone();
    }

    /// Update the internal state with new inputs. This must be called every render frame with the
    /// input events.
    fn apply_inputs(&mut self, world: &World) {
        let keyboard = world.resource::<KeyboardInputs>();
        let gamepad = world.resource::<GamepadInputs>();
        let mapping = world.resource::<PlayerControlMapping>();
        self.apply_inputs_inner(&mapping, &keyboard, &gamepad);

        #[cfg(not(target_arch = "wasm32"))]
        // Get the first local player control source which should be the only
        // local player in an online game.
        if let Some(user_control_source) = world
            .resource::<MatchInputs>()
            .players
            .iter()
            .find_map(|player| player.control_source)
        {
            // `self.control_source` is only used in online / lan games to
            // tell the `GgrsSessionRunner` which controls to grab for the
            // one local player via `InputCollecter::get_control`.
            self.control_source = user_control_source;

            // `apply_inputs` is called before `get_control` so this will
            // always update the source in time.
        } else {
            panic!("no local player control source")
        }
    }

    fn get_control(&self) -> &PlayerControl {
        self.current_controls.get(&self.control_source).unwrap()
    }
}

impl PlayerInputCollector {
    fn apply_inputs_inner(
        &mut self,
        mapping: &PlayerControlMapping,
        keyboard: &KeyboardInputs,
        gamepad: &GamepadInputs,
    ) {
        // Helper to get the value of the given input type for the given player.
        let get_input_value = |input_map: &InputKind, control_source: &ControlSource| match (
            input_map,
            control_source,
        ) {
            (InputKind::Button(mapped_button), ControlSource::Gamepad(idx)) => {
                for input in gamepad.gamepad_events.iter().rev() {
                    if let GamepadEvent::Button(e) = input {
                        if &e.button == mapped_button && e.gamepad == *idx {
                            let value = if e.value < 0.1 { 0.0 } else { e.value };
                            return Some(value);
                        }
                    }
                }
                None
            }
            (InputKind::AxisPositive(mapped_axis), ControlSource::Gamepad(idx)) => {
                for input in gamepad.gamepad_events.iter().rev() {
                    if let GamepadEvent::Axis(e) = input {
                        if &e.axis == mapped_axis && e.gamepad == *idx {
                            let value = if e.value < 0.1 { 0.0 } else { e.value };
                            return Some(value);
                        }
                    }
                }
                None
            }
            (InputKind::AxisNegative(mapped_axis), ControlSource::Gamepad(idx)) => {
                for input in gamepad.gamepad_events.iter().rev() {
                    if let GamepadEvent::Axis(e) = input {
                        if &e.axis == mapped_axis && e.gamepad == *idx {
                            let value = if e.value > -0.1 { 0.0 } else { e.value };
                            return Some(value);
                        }
                    }
                }
                None
            }
            (
                InputKind::Keyboard(mapped_key),
                ControlSource::Keyboard1 | ControlSource::Keyboard2,
            ) => {
                for input in keyboard.key_events.iter().rev() {
                    if input.key_code.option() == Some(*mapped_key) {
                        return Some(if input.button_state.pressed() {
                            1.0
                        } else {
                            0.0
                        });
                    }
                }
                None
            }
            _ => None,
        };

        for (source, control) in self.current_controls.iter_mut() {
            let mapping = match source {
                ControlSource::Keyboard1 => &mapping.keyboard1,
                ControlSource::Keyboard2 => &mapping.keyboard2,
                ControlSource::Gamepad(_) => &mapping.gamepad,
            };

            for (button_pressed, button_map) in [
                (&mut control.pause_pressed, &mapping.pause),
                (&mut control.jump_pressed, &mapping.jump),
                (&mut control.grab_pressed, &mapping.grab),
                (&mut control.shoot_pressed, &mapping.shoot),
                (&mut control.slide_pressed, &mapping.slide),
                (&mut control.ragdoll_pressed, &mapping.ragdoll),
                (&mut control.menu_back_pressed, &mapping.menu_back),
                (&mut control.menu_confirm_pressed, &mapping.menu_confirm),
                (&mut control.menu_start_pressed, &mapping.menu_start),
            ] {
                if let Some(value) = get_input_value(button_map, source) {
                    *button_pressed = value > 0.0;
                }
            }

            // helper for merging two inputs (like dpad + joystick for example) allowing multiple bindings
            // for same control
            let merge_inputs = |input1: &InputKind, input2: &InputKind| -> Option<f32> {
                match (
                    get_input_value(input1, source),
                    get_input_value(input2, source),
                ) {
                    // Both inputs have a value and the first is zero -- use the second value
                    (Some(0.0), Some(value2)) => Some(value2),
                    // First input has a non-zero value -- use the first value
                    (Some(value1), _) => Some(value1),
                    // First input has no value -- use the second
                    (None, value2) => value2,
                }
                .map(f32::abs)
            };

            if let Some(left) = merge_inputs(&mapping.movement.left, &mapping.movement_alt.left) {
                control.left = left;
            }
            if let Some(right) = merge_inputs(&mapping.movement.right, &mapping.movement_alt.right)
            {
                control.right = right;
            }
            if let Some(up) = merge_inputs(&mapping.movement.up, &mapping.movement_alt.up) {
                control.up = up;
            }
            if let Some(down) = merge_inputs(&mapping.movement.down, &mapping.movement_alt.down) {
                control.down = down;
            }
        }
    }
}

#[cfg(not(target_arch = "wasm32"))]
impl DenseControl<DensePlayerControl> for PlayerControl {
    fn get_dense_input(&self) -> DensePlayerControl {
        let mut dense_control = DensePlayerControl::default();
        dense_control.set_jump_pressed(self.jump_pressed);
        dense_control.set_grab_pressed(self.grab_pressed);
        dense_control.set_slide_pressed(self.slide_pressed);
        dense_control.set_shoot_pressed(self.shoot_pressed);
        dense_control.set_ragdoll_pressed(self.ragdoll_pressed);
        dense_control.set_move_direction(proto::DenseMoveDirection(self.move_direction));
        dense_control
    }

    fn update_from_dense(&mut self, new_control: &DensePlayerControl) {
        let jump_pressed = new_control.jump_pressed();
        self.jump_just_pressed = jump_pressed && !self.jump_pressed;
        self.jump_pressed = jump_pressed;

        let grab_pressed = new_control.grab_pressed();
        self.grab_just_pressed = grab_pressed && !self.grab_pressed;
        self.grab_pressed = grab_pressed;

        let shoot_pressed = new_control.shoot_pressed();
        self.shoot_just_pressed = shoot_pressed && !self.shoot_pressed;
        self.shoot_pressed = shoot_pressed;

        let ragdoll_pressed = new_control.ragdoll_pressed();
        self.ragdoll_just_pressed = ragdoll_pressed && !self.ragdoll_pressed;
        self.ragdoll_pressed = ragdoll_pressed;

        let was_moving = self.move_direction.length_squared() > f32::MIN_POSITIVE;
        self.move_direction = new_control.move_direction().0;
        let is_moving = self.move_direction.length_squared() > f32::MIN_POSITIVE;
        self.just_moved = !was_moving && is_moving;
    }
}

#[cfg(not(target_arch = "wasm32"))]
bitfield::bitfield! {
    /// A player's controller inputs densely packed into a single u32.
    ///
    /// This is used when sending player inputs across the network.
    #[derive(bytemuck::Pod, bytemuck::Zeroable, Copy, Clone, PartialEq, Eq)]//, Reflect)]
    #[repr(transparent)]
    pub struct DensePlayerControl(u32);
    impl Debug;
    pub jump_pressed, set_jump_pressed: 0;
    pub shoot_pressed, set_shoot_pressed: 1;
    pub grab_pressed, set_grab_pressed: 2;
    pub slide_pressed, set_slide_pressed: 3;
    pub ragdoll_pressed, set_ragdoll_pressed: 4;
    pub from into proto::DenseMoveDirection, move_direction, set_move_direction: 16, 5;
}

#[cfg(not(target_arch = "wasm32"))]
impl Default for DensePlayerControl {
    fn default() -> Self {
        let mut control = Self(0);
        control.set_move_direction(default());
        control
    }
}

#[cfg(not(target_arch = "wasm32"))]
/// Used to implement input type config for bones networking.
pub struct NetworkInputConfig;

#[cfg(not(target_arch = "wasm32"))]
impl<'a> DenseInputConfig<'a> for NetworkInputConfig {
    type Dense = DensePlayerControl;
    type Control = PlayerControl;
    type Controls = MatchInputs;
    type InputCollector = PlayerInputCollector;
}

```

`src/main.rs`:

```rs
#![doc(html_logo_url = "https://avatars.githubusercontent.com/u/87333478?s=200&v=4")]
// This cfg_attr is needed because `rustdoc::all` includes lints not supported on stable
#![cfg_attr(doc, allow(unknown_lints))]
#![deny(rustdoc::all)]
#![allow(clippy::too_many_arguments)]
// TODO: Warn on dead code.
// This is temporarily disabled while migrating to the new bones.
#![allow(dead_code)]
#![allow(ambiguous_glob_reexports)]
#![doc = include_str!("./README.md")]

use bones_bevy_renderer::BonesBevyRenderer;
use bones_framework::prelude::*;

pub mod audio;
pub mod core;
pub mod debug;
pub mod fullscreen;
pub mod input;
pub mod profiler;
pub mod sessions;
pub mod settings;
pub mod ui;

mod prelude {
    pub use crate::{
        audio::*, core::prelude::*, impl_system_param, input::*, sessions::*, settings::*, GameMeta,
    };
    pub use bones_framework::prelude::*;
    pub use once_cell::sync::Lazy;
    pub use serde::{Deserialize, Serialize};
    pub use std::{sync::Arc, time::Duration};
    #[allow(unused)]
    pub use tracing::{debug, error, info, trace, warn};
}
use crate::prelude::*;

// This will cause Bevy to be dynamically linked during development,
// which can greatly reduce re-compile times in some circumstances.
#[cfg(all(debug_assertions, not(target_arch = "wasm32")))]
#[allow(unused_imports)]
#[allow(clippy::single_component_path_imports)]
use bevy_dylib;

#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("game"))]
#[repr(C)]
pub struct GameMeta {
    pub plugins: SVec<Handle<LuaPlugin>>,
    pub core: CoreMeta,
    pub default_settings: settings::Settings,
    pub localization: Handle<LocalizationAsset>,
    pub theme: ui::UiTheme,
    pub main_menu: ui::main_menu::MainMenuMeta,
    pub music: GameMusic,
    pub network: NetworkMeta,
}

#[derive(HasSchema, Copy, Clone, Debug)]
#[repr(C)]
pub struct NetworkMeta {
    pub max_prediction_window: usize,
    pub local_input_delay: usize,
}

// In wasm build get derivable_impls clippy warning which breaks CI
#[allow(clippy::derivable_impls)]
impl Default for NetworkMeta {
    fn default() -> Self {
        #[cfg(target_arch = "wasm32")]
        {
            Self {
                local_input_delay: 0,
                max_prediction_window: 0,
            }
        }
        #[cfg(not(target_arch = "wasm32"))]
        {
            Self {
                local_input_delay: bones_framework::networking::NETWORK_LOCAL_INPUT_DELAY_DEFAULT,
                max_prediction_window:
                    bones_framework::networking::NETWORK_MAX_PREDICTION_WINDOW_DEFAULT,
            }
        }
    }
}

#[derive(HasSchema, Clone, Debug, Default)]
#[type_data(metadata_asset("assets"))]
#[repr(C)]
pub struct PackMeta {
    pub plugins: SVec<Handle<LuaPlugin>>,
    pub map_tilesets: SVec<Handle<Atlas>>,
    pub players: SVec<Handle<PlayerMeta>>,
    pub player_hats: SVec<Handle<HatMeta>>,
    pub maps: SVec<Handle<MapMeta>>,
    pub map_elements: SVec<Handle<ElementMeta>>,
}

impl GameMeta {
    /// Get the lua plugins loaded by the game.
    pub fn get_plugins(&self, asset_server: &AssetServer) -> Arc<Vec<Handle<LuaPlugin>>> {
        let mut plugins = Vec::new();
        plugins.extend(self.plugins.iter().copied());
        plugins.extend(
            self.core
                .map_elements
                .iter()
                .map(|eh| asset_server.get(*eh).plugin)
                .filter(|plugin_handle| plugin_handle != &Handle::default()),
        );

        for pack in asset_server.packs() {
            let pack_meta = asset_server.get(pack.root.typed::<PackMeta>());
            plugins.extend(pack_meta.plugins.iter().copied());
            plugins.extend(
                pack_meta
                    .map_elements
                    .iter()
                    .map(|eh| asset_server.get(*eh).plugin)
                    .filter(|plugin_handle| plugin_handle != &Handle::default()),
            );
        }
        Arc::new(plugins)
    }
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct GameMusic {
    pub title_screen: Handle<AudioSource>,
    pub fight: SVec<Handle<AudioSource>>,
    pub character_screen: Handle<AudioSource>,
    pub results_screen: Handle<AudioSource>,
    pub credits: Handle<AudioSource>,
}

fn main() {
    // Init logging
    setup_logs!("org", "fishfolk", "jumpy");

    // Initialize the Bevy task pool manually so that we can use it during startup.
    bevy_tasks::IoTaskPool::init(bevy_tasks::TaskPool::new);

    // Register types that we will load from persistent storage.
    settings::Settings::register_schema();

    // First create bones game.
    let mut game = Game::new();

    // Register our game and pack meta types
    GameMeta::register_schema();
    PackMeta::register_schema();

    game
        // Install game plugins
        .install_plugin(DefaultGamePlugin)
        .install_plugin(audio::game_plugin)
        .install_plugin(settings::game_plugin)
        .install_plugin(fullscreen::game_plugin)
        .install_plugin(input::game_plugin)
        .install_plugin(core::game_plugin)
        .install_plugin(debug::game_plugin)
        .install_plugin(profiler::game_plugin)
        .install_plugin(ui::scoring::game_plugin)
        // We initialize the asset server and register asset types
        .init_shared_resource::<AssetServer>()
        .register_default_assets();

    // Create a new session for the game menu. Each session is it's own bones world with it's own
    // plugins, systems, and entities.
    game.sessions.start_menu();

    // Create a new session for the pause menu, which sits in the background by default and only
    // does anything while the game is running.
    game.sessions
        .create_with(SessionNames::PAUSE_MENU, |builder: &mut SessionBuilder| {
            builder.install_plugin(ui::pause_menu::session_plugin);
        });

    // Set priority to ensure pause menu comes before scoring menu (drawn on top)
    game.sessions
        .get_mut(SessionNames::PAUSE_MENU)
        .unwrap()
        .priority = 1;

    // Scoring menu plugin, activated by game between round tarnsitions when appropriate
    game.sessions
        .create_with(SessionNames::SCORING, |builder: &mut SessionBuilder| {
            builder.install_plugin(ui::scoring::session_plugin);
        });

    // session for pop-ups / nofication UI
    game.sessions.create_with(
        SessionNames::NOTIFICATION,
        |builder: &mut SessionBuilder| {
            builder.install_plugin(ui::notification::session_plugin);
        },
    );

    // Create a bevy renderer for the bones game and run it.
    BonesBevyRenderer {
        game,
        pixel_art: true,
        game_version: Version::new(
            env!("CARGO_PKG_VERSION_MAJOR").parse().unwrap(),
            env!("CARGO_PKG_VERSION_MINOR").parse().unwrap(),
            env!("CARGO_PKG_VERSION_PATCH").parse().unwrap(),
        ),
        app_namespace: ("org".into(), "fishfolk".into(), "jumpy".into()),
        asset_dir: std::env::var("JUMPY_ASSETS")
            .unwrap_or_else(|_| "assets".into())
            .into(),
        packs_dir: std::env::var("JUMPY_ASSET_PACKS")
            .unwrap_or_else(|_| "packs".into())
            .into(),
        custom_load_progress: Some(Box::new(load_progress)),
        preload: true,
    }
    .app()
    .run();
}

fn load_progress(assets: &AssetServer, ctx: &egui::Context) {
    let errored = assets.load_progress.errored();
    egui::CentralPanel::default()
        .frame(egui::Frame::default().fill(egui::Color32::from_rgb(0x26, 0x2b, 0x44)))
        .show(ctx, |ui| {
            let height = ui.available_height();
            let ctx = ui.ctx().clone();

            let space_size = 0.03;
            let spinner_size = 0.10;
            let text_size = 0.034;
            ui.vertical_centered(|ui| {
                ui.add_space(height * 0.3);

                if errored > 0 {
                    let err_color = egui::Color32::RED;
                    ui.label(
                        egui::RichText::new("⚠")
                            .color(err_color)
                            .size(height * spinner_size),
                    );
                    ui.add_space(height * space_size);
                    ui.label(
                        egui::RichText::new(format!(
                            "Error loading {errored} asset{}.",
                            if errored > 1 { "s" } else { "" }
                        ))
                        .color(err_color)
                        .size(height * text_size * 0.75),
                    );
                } else {
                    let rect = ui
                        .label(
                            egui::RichText::new("⚓")
                                .color(egui::Color32::WHITE)
                                .size(height * spinner_size),
                        )
                        .rect;
                    egui::Spinner::new().paint_at(ui, rect.expand(spinner_size * height * 0.2));
                    ui.add_space(height * space_size);
                    ui.label(
                        egui::RichText::new("Loading")
                            .color(egui::Color32::WHITE)
                            .size(height * text_size),
                    );
                }
            });

            ctx.data_mut(|d| {
                d.insert_temp(ui.id(), (spinner_size, space_size, text_size));
            })
        });
}

```

`src/profiler.rs`:

```rs
//! Game plugin for performance profiling tools.

use crate::prelude::*;

/// Installs profiler ui plugins
pub fn game_plugin(game: &mut Game) {
    game.systems.add_before_system(mark_new_frame);
    game.sessions
        .create_with(SessionNames::PROFILER, |builder: &mut SessionBuilder| {
            builder.install_plugin(session_plugin);
        });
}

/// Install the profiler UI to profiler session.
fn session_plugin(session: &mut SessionBuilder) {
    session
        .stages
        .add_system_to_stage(CoreStage::First, profiler);
}

#[derive(HasSchema, Clone, Debug, Default)]
struct ProfilerState {
    pub show_window: bool,
}

fn profiler(
    ctx: ResMut<EguiCtx>,
    localization: Localization<GameMeta>,
    mut state: ResMutInit<ProfilerState>,
    keyboard_inputs: Res<KeyboardInputs>,
) {
    puffin::set_scopes_on(true);

    let toggle_window = keyboard_inputs
        .key_events
        .iter()
        .any(|x| x.key_code.option() == Some(KeyCode::F10) && !x.button_state.pressed());

    let show_window = &mut state.show_window;
    if toggle_window {
        *show_window = !*show_window;
    }

    egui::Window::new(localization.get("profiler"))
        .id(egui::Id::new("profiler"))
        .open(show_window)
        .show(&ctx, |ui| {
            puffin_egui::profiler_ui(ui);
        });
}

/// Notify profilers we are at frame boundary
pub fn mark_new_frame(_game: &mut Game) {
    puffin::GlobalProfiler::lock().new_frame();
}

```

`src/sessions.rs`:

```rs
use crate::{core::JumpyDefaultMatchRunner, prelude::*, ui::scoring::ScoringMenuState};

pub struct SessionNames;
impl SessionNames {
    pub const AUDIO: &'static str = DEFAULT_BONES_AUDIO_SESSION;
    pub const DEBUG: &'static str = "debug";
    pub const GAME: &'static str = "game";
    pub const MAIN_MENU: &'static str = "main_menu";
    pub const PAUSE_MENU: &'static str = "pause_menu";
    pub const PROFILER: &'static str = "profiler";
    pub const SCORING: &'static str = "scoring";
    pub const NOTIFICATION: &'static str = "notification";
}

pub trait SessionExt {
    fn start_menu(&mut self);
    fn end_game(&mut self);
    /// Optionally provide map_pool to restart game with. If not provided,
    /// current game's [`MapPool`] will be used.
    fn restart_game(&mut self, map_pool: Option<MapPool>, reset_score: bool);
    fn start_game(&mut self, match_plugin: crate::core::MatchPlugin);
}

impl SessionExt for Sessions {
    fn start_menu(&mut self) {
        self.create_with(SessionNames::MAIN_MENU, |builder: &mut SessionBuilder| {
            builder.install_plugin(crate::ui::main_menu::session_plugin);
        });
    }

    fn end_game(&mut self) {
        self.delete(SessionNames::GAME);

        // Make sure that scoring menu closed if was open
        if let Some(scoring_session) = self.get_mut(SessionNames::SCORING) {
            if let Some(mut state) = scoring_session.world.get_resource_mut::<ScoringMenuState>() {
                state.active = false;
            }
        }
    }

    #[track_caller]
    fn restart_game(&mut self, map_pool: Option<MapPool>, reset_score: bool) {
        if let Some((existing_map_pool, player_info, plugins, mut session_runner, score)) =
            self.get_mut(SessionNames::GAME).map(|session| {
                let existing_map_pool = (*session.world.resource::<MapPool>()).clone();
                let match_inputs = session.world.resource::<MatchInputs>();
                let score = (*session.world.resource::<MatchScore>()).clone();

                // Take ownership of session runner (we want to preserve socket and such for network runner)
                // by swapping a dummy one with session.
                let mut session_runner: Box<dyn SessionRunner> =
                    Box::<JumpyDefaultMatchRunner>::default();
                std::mem::swap(&mut session.runner, &mut session_runner);

                (
                    existing_map_pool,
                    match_inputs.players.clone(),
                    session.world.resource::<LuaPlugins>().0.clone(),
                    session_runner,
                    score,
                )
            })
        {
            self.end_game();

            // Reset session runner
            session_runner.restart_session();

            let map_pool = map_pool.unwrap_or(existing_map_pool);
            let score = if reset_score {
                MatchScore::default()
            } else {
                score
            };

            self.create_with(SessionNames::GAME, |builder: &mut SessionBuilder| {
                builder.install_plugin(crate::core::MatchPlugin {
                    maps: map_pool,
                    player_info,
                    plugins,
                    session_runner,
                    score,
                });
            });
        } else {
            panic!("Cannot restart game when game is not running");
        }
    }

    fn start_game(&mut self, match_plugin: crate::core::MatchPlugin) {
        self.create_with(SessionNames::GAME, |builder: &mut SessionBuilder| {
            builder.install_plugin(match_plugin);
        });
    }
}

```

`src/settings.rs`:

```rs
use strum::IntoEnumIterator;

use crate::prelude::*;

/// Settings plugin
pub fn game_plugin(game: &mut Game) {
    game.systems.add_startup_system(load_settings);
}

/// Startup system to load the game settings or use the default settings specified in the game meta.
fn load_settings(game: &mut Game) {
    let default_settings = {
        let assets = game.shared_resource::<AssetServer>();
        let settings = &assets.root::<GameMeta>().default_settings;
        settings.clone()
    };
    let mut storage = game.shared_resource_mut::<Storage>();
    if storage.get::<Settings>().is_none() {
        storage.insert(default_settings);
    }
}

/// Global settings, stored and accessed through [`Storage`].
#[derive(HasSchema, Debug, Clone)]
#[repr(C)]
pub struct Settings {
    /// The main scaling factor for all game audios. This is done on top of the
    /// scaling factor specific to the audio type.
    pub main_volume: f32,
    /// The scaling factor for music.
    pub music_volume: f32,
    /// The scaling factor for sound effects.
    pub effects_volume: f32,
    /// Whether to display the game fullscreen.
    pub fullscreen: bool,
    /// The player controller bindings
    pub player_controls: PlayerControlMapping,
    /// The address of the matchmaking server to connect to for online games.
    pub matchmaking_server: String,
}

impl Default for Settings {
    fn default() -> Self {
        Self {
            main_volume: 1.0,
            music_volume: 1.0,
            effects_volume: 1.0,
            fullscreen: true,
            player_controls: default(),
            matchmaking_server: default(),
        }
    }
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerControlMapping {
    /// Controls for game remotes
    pub gamepad: PlayerControlSetting,
    /// Controls for keyboard player 1
    pub keyboard1: PlayerControlSetting,
    /// Controls for keyboard player 2
    pub keyboard2: PlayerControlSetting,
}

impl PlayerControlMapping {
    pub fn map_control_source(&self, source: ControlSource) -> &PlayerControlSetting {
        match source {
            ControlSource::Keyboard1 => &self.keyboard1,
            ControlSource::Keyboard2 => &self.keyboard2,
            ControlSource::Gamepad(_) => &self.gamepad,
        }
    }

    /// Return an iterator for PlayerControlSetting for all control sources.
    pub fn all_settings(&self) -> impl Iterator<Item = &PlayerControlSetting> {
        ControlSource::iter().map(|s| self.map_control_source(s))
    }
}

/// Binds inputs to player actions
#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct PlayerControlSetting {
    pub movement: VirtualDPad,
    pub movement_alt: VirtualDPad,
    pub pause: InputKind,
    pub jump: InputKind,
    pub grab: InputKind,
    pub shoot: InputKind,
    pub slide: InputKind,
    pub ragdoll: InputKind,
    pub menu_back: InputKind,
    pub menu_start: InputKind,
    pub menu_confirm: InputKind,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C)]
pub struct VirtualDPad {
    pub up: InputKind,
    pub down: InputKind,
    pub left: InputKind,
    pub right: InputKind,
}

#[derive(HasSchema, Clone, Debug, Default)]
#[repr(C, u8)]
pub enum InputKind {
    #[default]
    None,
    Button(GamepadButton),
    AxisPositive(GamepadAxis),
    AxisNegative(GamepadAxis),
    Keyboard(KeyCode),
}

impl std::fmt::Display for InputKind {
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
        match self {
            InputKind::None => write!(f, "[None]"),
            InputKind::Button(btn) => write!(f, "{btn}"),
            InputKind::AxisPositive(axis) => write!(f, "{axis} +"),
            InputKind::AxisNegative(axis) => write!(f, "{axis} -"),
            InputKind::Keyboard(key) => write!(f, "{key:?}"),
        }
    }
}

```

`src/ui.rs`:

```rs
use crate::prelude::*;

pub mod main_menu;
pub mod map_select;
pub mod notification;
pub mod pause_menu;
pub mod player_image;
pub mod scoring;

#[cfg(not(target_arch = "wasm32"))]
pub mod network_game;

#[derive(HasSchema, Clone, Debug)]
#[repr(C)]
pub struct UiTheme {
    pub scale: f64,
    pub colors: UiThemeColors,
    pub widgets: UiThemeWidgets,
    pub fonts: SVec<Handle<Font>>,
    pub font_styles: UiThemeFontStyles,
    pub buttons: UiThemeButtons,
    pub panel: UiThemePanel,
    pub editor: UiThemeEditor,
}

impl Default for UiTheme {
    fn default() -> Self {
        Self {
            scale: 1.0,
            colors: default(),
            widgets: default(),
            fonts: default(),
            buttons: default(),
            font_styles: default(),
            panel: default(),
            editor: default(),
        }
    }
}

#[derive(HasSchema, Debug, Default, Clone)]
#[repr(C)]
pub struct ImageMeta {
    image: Handle<Image>,
    image_size: Vec2,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeColors {
    pub positive: Color,
    pub negative: Color,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeWidgets {
    pub border_radius: f32,
    pub default: UiThemeWidgetColors,
    pub hovered: UiThemeWidgetColors,
    pub active: UiThemeWidgetColors,
    pub noninteractive: UiThemeWidgetColors,
    pub menu: UiThemeWidgetColors,
    pub window_fill: Color,
    pub panel: UiThemePanel,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeWidgetColors {
    pub bg_fill: Color,
    pub bg_stroke: Color,
    pub text: Color,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeFontStyles {
    pub heading: FontMeta,
    pub bigger: FontMeta,
    pub normal: FontMeta,
    pub smaller: FontMeta,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeButtons {
    pub normal: ButtonThemeMeta,
    pub small: ButtonThemeMeta,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemePanel {
    pub font_color: Color,
    pub padding: MarginMeta,
    pub border: BorderImageMeta,
}

#[derive(HasSchema, Default, Debug, Clone)]
#[repr(C)]
pub struct UiThemeEditor {
    pub icons: UiThemeEditorIcons,
}

#[derive(HasSchema, Debug, Default, Clone)]
#[repr(C)]
pub struct UiThemeEditorIcons {
    pub elements: ImageMeta,
    pub tiles: ImageMeta,
    pub collisions: ImageMeta,
    pub select: ImageMeta,
}

```

`src/ui/main_menu.rs`:

```rs
use crate::prelude::*;

use super::ImageMeta;

mod credits;
mod map_select;
pub mod player_select;
pub(super) mod settings;
use shadow_rs::shadow;

// Generate build info.
shadow!(build_info);

#[cfg(not(target_arch = "wasm32"))]
mod network_game;

#[derive(HasSchema, Debug, Default, Clone)]
#[repr(C)]
pub struct MainMenuMeta {
    pub title_font: FontMeta,
    pub subtitle_font: FontMeta,
    pub background_image: ImageMeta,
    pub menu_width: f32,
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session
        // Install the default bones_framework plugin for this session
        .install_plugin(DefaultSessionPlugin)
        .add_startup_system(setup_menu)
        // Add our menu system to the update stage
        .add_system_to_stage(Update, main_menu_system);
}

fn setup_menu(
    meta: Root<GameMeta>,
    mut egui_settings: ResMutInit<EguiSettings>,
    mut entities: ResMut<Entities>,
    mut sprites: CompMut<Sprite>,
    mut transforms: CompMut<Transform>,
    mut cameras: CompMut<Camera>,
    mut clear_color: ResMutInit<ClearColor>,
) {
    egui_settings.scale = meta.theme.scale;
    **clear_color = Color::BLACK;
    spawn_default_camera(&mut entities, &mut transforms, &mut cameras);

    for i in -1..=1 {
        let ent = entities.create();
        transforms.insert(
            ent,
            Transform::from_translation(vec3(
                meta.main_menu.background_image.image_size.x * i as f32,
                0.,
                0.,
            )),
        );
        sprites.insert(
            ent,
            Sprite {
                image: meta.main_menu.background_image.image,
                ..default()
            },
        );
    }
}

/// Which page of the menu we are on
#[derive(HasSchema, Clone, Copy, Default)]
#[repr(C, u8)]
pub enum MenuPage {
    #[default]
    Home,
    Settings,
    PlayerSelect,
    MapSelect {
        /// Indicates the client is waiting for the map to be selected, not actually picking the
        /// map.
        is_waiting: bool,
    },
    Credits,
    NetworkGame,
}

#[allow(clippy::const_is_empty)]
static VERSION_STRING: Lazy<String> = Lazy::new(|| {
    format!(
        "{}{}",
        build_info::PKG_VERSION,
        if !build_info::SHORT_COMMIT.is_empty() {
            format!(
                "-{}{}",
                build_info::SHORT_COMMIT,
                if build_info::GIT_CLEAN {
                    ""
                } else {
                    " (dirty)"
                }
            )
        } else {
            String::default()
        }
    )
});

fn main_menu_system(world: &World) {
    let ctx = (*world.resource::<EguiCtx>()).clone();
    let mut close_settings_menu = false;

    // Go to player select menu if either of the `TEST_PLAYER` or `TEST_MAP`
    // debug env vars are present.
    #[cfg(debug_assertions)]
    {
        use std::env::var_os;
        use std::sync::atomic::{AtomicBool, Ordering};
        static DEBUG_DID_CHECK_ENV_VARS: AtomicBool = AtomicBool::new(false);
        if DEBUG_DID_CHECK_ENV_VARS
            .compare_exchange(false, true, Ordering::Acquire, Ordering::Relaxed)
            .is_ok()
        {
            let test_vars = [
                var_os("TEST_MAP"),
                var_os("TEST_PLAYER"),
                var_os("TEST_HAT"),
                var_os("TEST_CONTROLLER"),
            ];
            if test_vars.iter().any(Option::is_some) {
                ctx.set_state(MenuPage::PlayerSelect);
            }
        }
    }

    egui::CentralPanel::default()
        .frame(egui::Frame::none())
        .show(&ctx, |ui| match ctx.get_state::<MenuPage>() {
            MenuPage::Home => world.run_system(home_menu, ui),
            MenuPage::Settings => {
                world.run_system(settings::widget, (ui, &mut close_settings_menu))
            }
            MenuPage::PlayerSelect => world.run_system(player_select::widget, ui),
            MenuPage::MapSelect { .. } => world.run_system(map_select::widget, ui),
            MenuPage::Credits => world.run_system(credits::widget, ui),
            MenuPage::NetworkGame =>
            {
                #[cfg(not(target_arch = "wasm32"))]
                world.run_system(network_game::widget, ui)
            }
        });

    if close_settings_menu {
        ctx.set_state(MenuPage::Home);
    }

    egui::CentralPanel::default()
        .frame(egui::Frame::none())
        .show(&ctx, |ui| {
            ui.with_layout(egui::Layout::bottom_up(egui::Align::Max), |ui| {
                ui.add_space(5.0);
                ui.with_layout(egui::Layout::right_to_left(egui::Align::Max), |ui| {
                    ui.add_space(5.0);

                    ui.label(
                        egui::RichText::new(VERSION_STRING.as_str()).color(egui::Color32::WHITE),
                    );
                })
            });
        });
}

/// System to render the home menu.
fn home_menu(
    mut ui: In<&mut egui::Ui>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    #[cfg(not(target_arch = "wasm32"))] exit_game: Option<ResMut<ExitBones>>,
) {
    let ui = &mut *ui;
    ui.vertical_centered(|ui| {
        ui.add_space(meta.main_menu.title_font.size / 2.0);
        ui.label(meta.main_menu.title_font.rich(localization.get("title")));
        ui.label(
            meta.main_menu
                .subtitle_font
                .rich(localization.get("subtitle")),
        );

        ui.add_space(meta.main_menu.subtitle_font.size / 2.0);

        BorderedFrame::new(&meta.theme.panel.border)
            .padding(meta.theme.panel.padding)
            .show(ui, |ui| {
                ui.set_width(meta.main_menu.menu_width);

                // Local game
                if BorderedButton::themed(
                    &meta.theme.buttons.normal,
                    localization.get("local-game"),
                )
                .min_size(vec2(ui.available_width(), 0.0))
                .show(ui)
                .focus_by_default(ui)
                .clicked()
                {
                    ui.ctx().set_state(MenuPage::PlayerSelect);
                }

                // Online game
                #[cfg(not(target_arch = "wasm32"))]
                if BorderedButton::themed(
                    &meta.theme.buttons.normal,
                    localization.get("online-game"),
                )
                .min_size(vec2(ui.available_width(), 0.0))
                .show(ui)
                .clicked()
                {
                    ui.ctx().set_state(MenuPage::NetworkGame);
                }

                // Settings
                if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("settings"))
                    .min_size(vec2(ui.available_width(), 0.0))
                    .show(ui)
                    .clicked()
                {
                    ui.ctx().set_state(MenuPage::Settings);
                }

                // Credits
                if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("credits"))
                    .min_size(vec2(ui.available_width(), 0.0))
                    .show(ui)
                    .clicked()
                {
                    ui.ctx().set_state(MenuPage::Credits);
                }

                #[cfg(not(target_arch = "wasm32"))]
                if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("quit"))
                    .min_size(vec2(ui.available_width(), 0.0))
                    .show(ui)
                    .clicked()
                {
                    if let Some(mut exit) = exit_game {
                        **exit = true;
                    }
                }
            });
    });
}

#[cfg(debug_assertions)]
fn handle_names_to_string<'handles, T, It, F>(it: It, get_name: F) -> String
where
    T: 'handles,
    It: IntoIterator<Item = Handle<T>>,
    F: Fn(Handle<T>) -> &'static str,
{
    let mut names = String::new();
    let mut is_first = true;
    for h in it.into_iter() {
        if is_first {
            is_first = false;
        } else {
            names.push_str(", ");
        }
        names.push('"');
        names.push_str(get_name(h));
        names.push('"');
    }
    names
}

```

`src/ui/main_menu/credits.rs`:

```rs
use super::*;

const CREDITS_STR: &str = include_str!("../../../CREDITS.md");

static CREDITS: Lazy<Credits> = Lazy::new(|| credits_parser::credits(CREDITS_STR).unwrap());

pub struct Credits {
    pub sections: Vec<CreditsSection>,
}

pub struct CreditsSection {
    pub title: String,
    pub entries: Vec<CreditsEntry>,
}

pub struct CreditsEntry {
    pub name: Option<String>,
    pub handle: Option<CreditsHandle>,
    pub contribution: Option<String>,
}

pub struct CreditsHandle {
    pub name: String,
    pub link: String,
}

peg::parser! {
    grammar credits_parser() for str {
      rule _ = " "*
      rule __ = [' ' | '\n']*

      rule handle() -> CreditsHandle
          = "[" name:$([^']']*) "](" link:$([^')']*) ")" {
              CreditsHandle { name: name.trim().into(), link: link.trim().into() }
          }

      rule entry_name() -> String
          = name:$([^'[' | '-' | '\n']*) { name.trim().into() }

      rule contribution() -> String
          = "-" _ contribution:$([^'\n']*) {
            contribution.trim().into()
          }

      rule entry() -> CreditsEntry
          = "-" _ name:entry_name()? _ handle:handle()? _ contribution:contribution()? "\n" {
            CreditsEntry { name, handle, contribution }
          }

      rule section() -> CreditsSection
          = "##" _ title:$([^'\n']*) __
            entries:(entry() ** __)
          {
            CreditsSection { title: title.trim().into(), entries }
          }

      pub rule credits() -> Credits
          = "# Credits" __ sections:(section() ** __) __ {
            Credits {
                sections,
            }
          }
    }
}

pub fn widget(
    mut ui: In<&mut egui::Ui>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    input: Res<GlobalPlayerControls>,
) {
    let outer_margin = egui::style::Margin::symmetric(
        ui.available_width() * 0.1,
        meta.theme.font_styles.bigger.size,
    );

    BorderedFrame::new(&meta.theme.panel.border)
        .margin(outer_margin)
        .padding(meta.theme.panel.padding)
        .show(*ui, |ui| {
            let font_color = meta.theme.panel.font_color;
            let heading_font = meta.theme.font_styles.heading.with_color(font_color);
            let heading_size = heading_font.size;
            let normal_size = meta.theme.font_styles.normal.size;
            let bigger_font = meta.theme.font_styles.bigger.with_color(font_color);
            let bigger_size = bigger_font.size;

            ui.vertical_centered(|ui| {
                ui.label(
                    meta.theme
                        .font_styles
                        .heading
                        .rich(localization.get("credits")),
                );
            });
            ui.set_min_width(ui.available_width());

            ui.with_layout(egui::Layout::bottom_up(egui::Align::Min), |ui| {
                ui.add_space(normal_size / 2.0);

                // Back button
                if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("back"))
                    .show(ui)
                    .focus_by_default(ui)
                    .clicked()
                    || input.values().any(|x| x.menu_back_just_pressed)
                {
                    ui.ctx().set_state(MenuPage::Home);
                }

                ui.with_layout(default(), |ui| {
                    egui::ScrollArea::vertical().show(ui, |ui| {
                        ui.set_width(ui.available_width());
                        for section in &CREDITS.sections {
                            ui.add_space(heading_size / 2.0);
                            ui.label(heading_font.rich(&section.title));
                            ui.add_space(heading_size / 2.0);

                            for entry in &section.entries {
                                ui.add(egui::Separator::default().spacing(normal_size));
                                ui.horizontal(|ui| {
                                    ui.add_space(bigger_size);

                                    if let Some(name) = &entry.name {
                                        ui.label(bigger_font.rich(name));
                                    }

                                    if let Some(handle) = &entry.handle {
                                        ui.label(bigger_font.rich(&handle.name));
                                    }
                                });
                                ui.horizontal(|ui| {
                                    if let Some(contribution) = &entry.contribution {
                                        ui.with_layout(
                                            egui::Layout::right_to_left(egui::Align::Center),
                                            |ui| {
                                                ui.add_space(bigger_size);
                                                ui.label(bigger_font.rich(format!(
                                                    "{} {contribution}",
                                                    if entry.name.is_some()
                                                        || entry.handle.is_some()
                                                    {
                                                        "-"
                                                    } else {
                                                        ""
                                                    }
                                                )));
                                            },
                                        );
                                    }
                                });
                            }
                            ui.add(egui::Separator::default().spacing(normal_size));
                        }
                    });
                });
            });
        });
}

```

`src/ui/main_menu/map_select.rs`:

```rs
use crate::core::{JumpyDefaultMatchRunner, MatchPlugin};
use crate::prelude::*;

use crate::ui::map_select::{map_select_menu, MapSelectAction};

#[cfg(not(target_arch = "wasm32"))]
use crate::ui::network_game::NetworkGameState;

use super::player_select::PlayerSelectState;
use super::MenuPage;

#[cfg(not(target_arch = "wasm32"))]
use bones_framework::networking::{GgrsSessionRunner, GgrsSessionRunnerInfo, NetworkMatchSocket};

/// Network message that may be sent when selecting a map.
#[derive(Serialize, Deserialize)]
pub enum MapSelectMessage {
    SelectMap(MapPoolNetwork),
}

pub fn widget(
    ui: In<&mut egui::Ui>,
    world: &World,
    meta: Root<GameMeta>,
    mut sessions: ResMut<Sessions>,
    mut session_options: ResMut<SessionOptions>,
    assets: Res<AssetServer>,

    #[cfg(not(target_arch = "wasm32"))] network_socket: Option<Res<NetworkMatchSocket>>,
) {
    let mut select_action = MapSelectAction::None;

    // Get map select action from network
    #[cfg(not(target_arch = "wasm32"))]
    if let Some(MapSelectAction::SelectMap(map_meta)) =
        handle_match_setup_messages(&network_socket, &assets)
    {
        select_action = MapSelectAction::SelectMap(map_meta);
    }

    // If the `TEST_MAP` debug env var is present start the game with the map
    // matching the provided name.
    #[cfg(debug_assertions)]
    'test: {
        use std::env::{var, VarError};
        use std::sync::atomic::{AtomicBool, Ordering};
        static DEBUG_DID_CHECK_ENV_VARS: AtomicBool = AtomicBool::new(false);
        if DEBUG_DID_CHECK_ENV_VARS
            .compare_exchange(false, true, Ordering::Acquire, Ordering::Relaxed)
            .is_ok()
        {
            let test_map = match var("TEST_MAP") {
                Ok(name) => name,
                Err(VarError::NotPresent) => break 'test,
                Err(VarError::NotUnicode(err)) => {
                    warn!("Invalid TEST_MAP, not unicode: {err:?}");
                    break 'test;
                }
            };

            let asset_server = world.resource::<AssetServer>();
            let game_meta = asset_server.root::<GameMeta>();

            let get_map_handles = || {
                let mut map_handles = Vec::new();
                map_handles.extend(game_meta.core.stable_maps.iter().copied());
                for pack in asset_server.packs() {
                    let pack_meta = asset_server.get(pack.root.typed::<crate::PackMeta>());
                    map_handles.extend(pack_meta.maps.iter().copied());
                }
                map_handles
            };

            let Some(test_map) = get_map_handles()
                .into_iter()
                .find(|h| asset_server.get(*h).name == test_map)
            else {
                warn!("TEST_MAP not found: {test_map}");
                let available_names = super::handle_names_to_string(get_map_handles(), |h| {
                    asset_server.get(h).name.as_str()
                });
                warn!("Available map names: {available_names}");
                break 'test;
            };

            select_action = MapSelectAction::SelectMap(MapPool::from_single_map(test_map));
        }
    }

    // If no network action - update action from UI
    if matches!(select_action, MapSelectAction::None) {
        select_action = world.run_system(map_select_menu, ());

        #[cfg(not(target_arch = "wasm32"))]
        // Replicate local action
        replicate_map_select_action(&select_action, &network_socket, &assets);
    }

    match select_action {
        MapSelectAction::None => (),
        MapSelectAction::SelectMap(maps) => {
            session_options.delete = true;
            ui.ctx().set_state(MenuPage::Home);

            #[cfg(not(target_arch = "wasm32"))]
            let session_runner: Box<dyn SessionRunner> = match network_socket {
                Some(socket) => {
                    let random_seed = ui.ctx().get_state::<NetworkGameState>().random_seed();

                    Box::new(GgrsSessionRunner::<NetworkInputConfig>::new(
                        Some(FPS),
                        GgrsSessionRunnerInfo::new(
                            socket.ggrs_socket(),
                            Some(meta.network.max_prediction_window),
                            Some(meta.network.local_input_delay),
                            random_seed,
                        ),
                    ))
                }
                None => Box::<JumpyDefaultMatchRunner>::default(),
            };
            #[cfg(target_arch = "wasm32")]
            let session_runner = Box::<JumpyDefaultMatchRunner>::default();

            let player_select_state = ui.ctx().get_state::<PlayerSelectState>();
            sessions.start_game(MatchPlugin {
                maps,
                player_info: std::array::from_fn(|i| {
                    let slot = player_select_state.slots[i];

                    PlayerInput {
                        active: !slot.is_empty(),
                        selected_player: slot
                            .selected_player()
                            .unwrap_or(player_select_state.players[0]),
                        selected_hat: slot.selected_hat(),
                        control_source: slot.user_control_source(),
                        editor_input: default(),
                        control: default(),
                        is_ai: slot.is_ai(),
                    }
                }),
                plugins: meta.get_plugins(&assets),
                session_runner,
                score: default(),
            });
            ui.ctx().set_state(PlayerSelectState::default());
        }
        MapSelectAction::GoBack => ui.ctx().set_state(MenuPage::PlayerSelect),
    }
}

/// Send a MapSelectMessage over network if local player has selected a map.
#[cfg(not(target_arch = "wasm32"))]
fn replicate_map_select_action(
    action: &MapSelectAction,
    socket: &Option<Res<NetworkMatchSocket>>,
    asset_server: &AssetServer,
) {
    use bones_framework::networking::SocketTarget;
    if let Some(socket) = socket {
        if let MapSelectAction::SelectMap(maps) = action {
            info!("Sending network SelectMap message.");
            socket.send_reliable(
                SocketTarget::All,
                &postcard::to_allocvec(&MapSelectMessage::SelectMap(
                    maps.into_network(asset_server),
                ))
                .unwrap(),
            );
        }
    }
}

#[cfg(not(target_arch = "wasm32"))]
fn handle_match_setup_messages(
    socket: &Option<Res<NetworkMatchSocket>>,
    asset_server: &AssetServer,
) -> Option<MapSelectAction> {
    if let Some(socket) = socket {
        let datas: Vec<(u32, Vec<u8>)> = socket.recv_reliable();

        for (_player, data) in datas {
            match postcard::from_bytes::<MapSelectMessage>(&data) {
                Ok(message) => match message {
                    MapSelectMessage::SelectMap(maps) => {
                        info!("Map select message received, starting game");

                        return Some(MapSelectAction::SelectMap(MapPool::from_network(
                            maps,
                            asset_server,
                        )));
                    }
                },
                Err(e) => {
                    // TODO: The second player in an online match is having this triggered by
                    // picking up a `ConfirmSelection` message, that might have been sent to
                    // _itself_.
                    warn!("Ignoring network message that was not understood: {e} data: {data:?}");
                }
            }
        }
    }

    None
}

```

`src/ui/main_menu/network_game.rs`:

```rs
use crate::ui::network_game::network_game_menu;

use super::*;

// TODO remove ui param?
pub fn widget(_ui: In<&mut egui::Ui>, world: &World) {
    // let mut params: MatchmakingMenu = state.get_mut(world);
    // let menu_input = params.menu_input.single();

    world.run_system(network_game_menu, ());

    // TODO
    // params.state.ping_update_timer.tick(params.time.delta());
}

```

`src/ui/main_menu/player_select.rs`:

```rs
#[cfg(not(target_arch = "wasm32"))]
use bones_framework::networking::{NetworkMatchSocket, SocketTarget};
use smallvec::SmallVec;

use crate::{ui::player_image::player_image, PackMeta};

use super::*;

#[derive(Default, Clone, Debug, HasSchema)]
pub struct PlayerSelectState {
    pub slots: [PlayerSlot; MAX_PLAYERS as usize],
    /// Cache of available players from the game and packs.
    pub players: Vec<Handle<PlayerMeta>>,
    /// Cache of available hats from the game and packs.
    pub hats: Vec<Option<Handle<HatMeta>>>,
}

impl PlayerSelectState {
    pub fn any_slot_has_source(&self, source: ControlSource) -> bool {
        self.slots
            .iter()
            .any(|slot| slot.user_control_source() == Some(source))
    }

    /// Cache the hats and player assets in PlayerSelectState
    pub fn cache_player_and_hat_assets(
        &mut self,
        meta: &Root<GameMeta>,
        asset_server: Res<AssetServer>,
    ) {
        // Cache the player list
        if self.players.is_empty() {
            for player in meta.core.players.iter() {
                self.players.push(*player);
            }
            for pack in asset_server.packs() {
                let pack_meta = asset_server.get(pack.root.typed::<PackMeta>());
                for player in pack_meta.players.iter() {
                    self.players.push(*player)
                }
            }
        }

        // Cache the hat list
        if self.hats.is_empty() {
            self.hats.push(None); // No hat selected
            for hat in meta.core.player_hats.iter() {
                self.hats.push(Some(*hat));
            }
            for pack in asset_server.packs() {
                let pack_meta = asset_server.get(pack.root.typed::<PackMeta>());
                for hat in pack_meta.player_hats.iter() {
                    self.hats.push(Some(*hat));
                }
            }
        }
    }
}

#[derive(Default, Clone, Copy, Debug)]
pub enum PlayerSlot {
    #[default]
    Empty,
    /// This is used instead of Empty for a required player slot that has not yet selected control source.
    /// (Could be 1st player in local, or the local player in online.)
    SelectingLocalControlSource,
    SelectingPlayer {
        control_source: PlayerSlotControlSource,
        current_player: Handle<PlayerMeta>,
        current_hat: Option<Handle<HatMeta>>,
    },
    SelectingHat {
        control_source: PlayerSlotControlSource,
        selected_player: Handle<PlayerMeta>,
        current_hat: Option<Handle<HatMeta>>,
    },
    Ready {
        control_source: PlayerSlotControlSource,
        selected_player: Handle<PlayerMeta>,
        selected_hat: Option<Handle<HatMeta>>,
    },
}

impl PlayerSlot {
    pub fn is_empty(&self) -> bool {
        matches!(self, Self::Empty)
    }

    pub fn is_selecting_player(&self) -> bool {
        matches!(self, Self::SelectingPlayer { .. })
    }

    pub fn is_selecting_hat(&self) -> bool {
        matches!(self, Self::SelectingHat { .. })
    }

    pub fn is_ready(&self) -> bool {
        matches!(self, Self::Ready { .. })
    }

    pub fn is_local_player(&self) -> bool {
        match self {
            Self::Empty => false,
            Self::SelectingLocalControlSource => true,
            Self::SelectingPlayer { control_source, .. }
            | Self::SelectingHat { control_source, .. }
            | Self::Ready { control_source, .. } => control_source.is_user(),
        }
    }

    pub fn is_ai(&self) -> bool {
        match self {
            Self::Empty => false,
            Self::SelectingLocalControlSource => false,
            Self::SelectingPlayer { control_source, .. }
            | Self::SelectingHat { control_source, .. }
            | Self::Ready { control_source, .. } => control_source.is_ai(),
        }
    }

    pub fn control_source(&self) -> Option<PlayerSlotControlSource> {
        match self {
            Self::Empty => None,
            Self::SelectingLocalControlSource => None,
            Self::SelectingPlayer { control_source, .. }
            | Self::SelectingHat { control_source, .. }
            | Self::Ready { control_source, .. } => Some(*control_source),
        }
    }

    pub fn user_control_source(&self) -> Option<ControlSource> {
        match self {
            Self::Empty => None,
            Self::SelectingLocalControlSource => None,
            Self::SelectingPlayer { control_source, .. }
            | Self::SelectingHat { control_source, .. }
            | Self::Ready { control_source, .. } => control_source.user_source(),
        }
    }

    pub fn selected_player(&self) -> Option<Handle<PlayerMeta>> {
        match self {
            Self::Empty | Self::SelectingLocalControlSource => None,
            Self::SelectingPlayer { current_player, .. } => Some(*current_player),
            Self::SelectingHat {
                selected_player, ..
            } => Some(*selected_player),
            Self::Ready {
                selected_player, ..
            } => Some(*selected_player),
        }
    }

    pub fn selected_hat(&self) -> Option<Handle<HatMeta>> {
        match self {
            Self::Empty | Self::SelectingLocalControlSource => None,
            Self::SelectingPlayer { current_hat, .. } => *current_hat,
            Self::SelectingHat { current_hat, .. } => *current_hat,
            Self::Ready { selected_hat, .. } => *selected_hat,
        }
    }
}

#[derive(Clone, Copy, Debug)]
pub enum PlayerSlotControlSource {
    User(ControlSource),
    Remote,
    Ai,
}

impl PlayerSlotControlSource {
    pub fn is_user(self) -> bool {
        matches!(self, Self::User(_))
    }

    pub fn is_ai(self) -> bool {
        matches!(self, Self::Ai)
    }

    pub fn user_source(self) -> Option<ControlSource> {
        match self {
            Self::User(src) => Some(src),
            _ => None,
        }
    }
}

#[cfg(debug_assertions)]
impl PlayerSlot {
    pub fn test_player() -> Option<String> {
        match std::env::var("TEST_PLAYER") {
            Ok(name) => Some(name),
            Err(std::env::VarError::NotUnicode(err)) => {
                warn!("Invalid TEST_PLAYER, not unicode: {err:?}");
                Some("Fishy".to_string())
            }
            Err(std::env::VarError::NotPresent) => {
                let test_vars = [
                    std::env::var_os("TEST_MAP"),
                    std::env::var_os("TEST_HAT"),
                    std::env::var_os("TEST_CONTROLLER"),
                ];
                if test_vars.iter().any(Option::is_some) {
                    Some("Fishy".to_string())
                } else {
                    None
                }
            }
        }
    }

    pub fn test_control_source() -> ControlSource {
        match std::env::var("TEST_CONTROLLER") {
            Ok(name) => match &*name {
                "Keyboard1" => ControlSource::Keyboard1,
                "Keyboard2" => ControlSource::Keyboard2,
                "Gamepad" => ControlSource::Gamepad(0),
                _ => {
                    warn!("Invalid TEST_CONTROLLER: {name}");
                    warn!(r#"Available controllers: "Keyboard1", "Keyboard2", "Gamepad""#);
                    ControlSource::Keyboard1
                }
            },
            Err(std::env::VarError::NotPresent) => ControlSource::Keyboard1,
            Err(std::env::VarError::NotUnicode(err)) => {
                warn!("Invalid TEST_CONTROLLER, not unicode: {err:?}");
                ControlSource::Keyboard1
            }
        }
    }

    pub fn test_hat(
        asset_server: &AssetServer,
        hat_handles: &[Handle<HatMeta>],
    ) -> Option<Handle<HatMeta>> {
        match std::env::var("TEST_HAT") {
            Err(std::env::VarError::NotPresent) => None,
            Err(std::env::VarError::NotUnicode(err)) => {
                warn!("Invalid TEST_HAT, not unicode: {err:?}");
                None
            }
            Ok(test_hat) => match hat_handles
                .iter()
                .copied()
                .find(|h| asset_server.get(*h).name == test_hat)
            {
                Some(hat_handle) => Some(hat_handle),
                None => {
                    warn!("TEST_HAT not found: {test_hat}");
                    let available_names =
                        handle_names_to_string(hat_handles.iter().copied(), |h| {
                            asset_server.get(h).name.as_str()
                        });
                    warn!("Available hat names: {available_names}");
                    None
                }
            },
        }
    }
}

/// Network message that may be sent during player selection.
#[derive(Serialize, Deserialize)]
pub enum PlayerSelectMessage {
    SelectPlayer(NetworkHandle<PlayerMeta>),
    SelectHat(Option<NetworkHandle<HatMeta>>),
    ConfirmSelection(bool),
}

pub fn widget(
    mut ui: In<&mut egui::Ui>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    controls: Res<GlobalPlayerControls>,
    world: &World,
    asset_server: Res<AssetServer>,
    #[cfg(not(target_arch = "wasm32"))] network_socket: Option<Res<NetworkMatchSocket>>,
) {
    let mut state = ui.ctx().get_state::<PlayerSelectState>();
    ui.ctx().set_state(EguiInputSettings {
        disable_keyboard_input: true,
        disable_gamepad_input: true,
    });

    #[cfg(not(target_arch = "wasm32"))]
    if let Some(socket) = network_socket.as_ref() {
        handle_match_setup_messages(socket, &mut state, &asset_server);
    }

    // Set player slot 0 using the debug env vars and go to the map select menu.
    // Default the player to Jumpy if none is provided.
    #[cfg(debug_assertions)]
    'test_player: {
        use std::sync::atomic::{AtomicBool, Ordering};
        static DEBUG_DID_CHECK_ENV_VARS: AtomicBool = AtomicBool::new(false);
        if DEBUG_DID_CHECK_ENV_VARS
            .compare_exchange(false, true, Ordering::Acquire, Ordering::Relaxed)
            .is_ok()
        {
            let Some(test_player) = PlayerSlot::test_player() else {
                break 'test_player;
            };

            let test_controller = PlayerSlot::test_control_source();

            let asset_server = world.resource::<AssetServer>();
            let game_meta = asset_server.root::<GameMeta>();
            let core_player_handles = &*game_meta.core.players;
            let core_hat_handles = &*game_meta.core.player_hats;

            match core_player_handles
                .iter()
                .copied()
                .find(|h| asset_server.get(*h).name == test_player)
            {
                None => {
                    warn!("TEST_PLAYER not found: {test_player}");
                    let available_names =
                        handle_names_to_string(core_player_handles.iter().copied(), |h| {
                            asset_server.get(h).name.as_str()
                        });
                    warn!("Available player names: {available_names}");
                }
                Some(player_handle) => {
                    state.slots[0] = PlayerSlot::Ready {
                        control_source: PlayerSlotControlSource::User(test_controller),
                        selected_player: player_handle,
                        selected_hat: PlayerSlot::test_hat(&asset_server, core_hat_handles),
                    };

                    ui.ctx()
                        .set_state(MenuPage::MapSelect { is_waiting: false });
                }
            }
        }
    }

    state.cache_player_and_hat_assets(&meta, asset_server);

    // Initialize state of player slots - we wait on all non-empty slots being ready before allowing
    // transition to map select. Transition slots of required players from empty to initial state.
    //
    // In Offline, we have one required player. Other slots are optional.
    #[cfg(target_arch = "wasm32")]
    {
        let first_slot = &mut state.slots[0];
        if first_slot.is_empty() {
            *first_slot = PlayerSlot::SelectingLocalControlSource;
        }
    }

    // In Online, we have one local player, and some number of remotes that must be initialized.
    #[cfg(not(target_arch = "wasm32"))]
    if let Some(socket) = network_socket.as_ref() {
        for (slot_id, slot) in state.slots.iter_mut().enumerate() {
            let is_local_player_slot = slot_id == socket.player_idx() as usize;
            let is_empty = slot.is_empty();

            if slot_id >= socket.player_count() as usize {
                // unused slots in online don't need to be initialized
                break;
            } else if is_local_player_slot && is_empty {
                *slot = PlayerSlot::SelectingLocalControlSource;
            } else if !is_local_player_slot && is_empty {
                *slot = PlayerSlot::SelectingPlayer {
                    control_source: PlayerSlotControlSource::Remote,
                    // Use default player until we get a message from them on change in selection
                    current_player: state.players[0],
                    current_hat: None,
                };
            }
        }
    }

    // Whether or not the continue button should be enabled
    let mut ready_players = 0;
    let mut unconfirmed_players = 0;

    let mut at_least_one_non_ai_ready = false;
    for slot in &state.slots {
        if slot.is_ready() {
            ready_players += 1;
            if !slot.is_ai() {
                at_least_one_non_ai_ready = true;
            }
        } else if !slot.is_empty() {
            unconfirmed_players += 1;
        }
    }
    let may_continue = ready_players >= 1 && unconfirmed_players == 0 && at_least_one_non_ai_ready;

    #[cfg(not(target_arch = "wasm32"))]
    if let Some(socket) = network_socket.as_ref() {
        if may_continue {
            // The first player picks the map
            let is_waiting = socket.player_idx() != 0;

            ui.ctx().set_state(MenuPage::MapSelect { is_waiting });
        }
    }

    let bigger_text_style = &meta
        .theme
        .font_styles
        .bigger
        .with_color(meta.theme.panel.font_color);
    let heading_text_style = &meta
        .theme
        .font_styles
        .heading
        .with_color(meta.theme.panel.font_color);
    let normal_button_style = &meta.theme.buttons.normal;

    ui.vertical_centered(|ui| {
        ui.add_space(heading_text_style.size / 4.0);

        #[cfg(target_arch = "wasm32")]
        let is_network = false;
        #[cfg(not(target_arch = "wasm32"))]
        let is_network = network_socket.is_some();

        // Title
        if is_network {
            ui.label(heading_text_style.rich(localization.get("online-game")));
        } else {
            ui.label(heading_text_style.rich(localization.get("local-game")));
        }

        ui.label(bigger_text_style.rich(localization.get("player-select-title")));
        ui.add_space(normal_button_style.font.size);

        ui.with_layout(egui::Layout::bottom_up(egui::Align::Center), |ui| {
            ui.add_space(normal_button_style.font.size * 2.0);
            ui.horizontal(|ui| {
                // Calculate button size and spacing
                let width = ui.available_width();
                let button_width = width / 3.0;
                let button_min_size = vec2(button_width, 0.0);
                let button_spacing = (width - 2.0 * button_width) / 3.0;

                ui.add_space(button_spacing);

                // Back button
                let back_button =
                    BorderedButton::themed(normal_button_style, localization.get("back"))
                        .min_size(button_min_size)
                        .show(ui)
                        .focus_by_default(ui);

                if back_button.clicked()
                    || (ready_players == 0
                        && unconfirmed_players == 0
                        && controls.values().any(|x| x.menu_back_just_pressed))
                {
                    ui.ctx().set_state(MenuPage::Home);
                    ui.ctx().set_state(EguiInputSettings::default());
                    ui.ctx().set_state(PlayerSelectState::default());

                    #[cfg(not(target_arch = "wasm32"))]
                    if let Some(socket) = network_socket {
                        socket.close();
                    }
                }

                ui.add_space(button_spacing);

                // Continue button
                let continue_button = ui
                    .scope(|ui| {
                        ui.set_enabled(may_continue);

                        BorderedButton::themed(normal_button_style, localization.get("continue"))
                            .min_size(button_min_size)
                            .show(ui)
                    })
                    .inner;

                if !controls.values().any(|x| x.menu_back_just_pressed)
                    && (continue_button.clicked()
                        || (controls.values().any(|x| x.menu_start_just_pressed) && may_continue))
                {
                    ui.ctx()
                        .set_state(MenuPage::MapSelect { is_waiting: false });
                    ui.ctx().set_state(EguiInputSettings::default());
                    ui.ctx().set_state(PlayerSelectState::default());
                }
            });

            ui.add_space(normal_button_style.font.size);

            ui.vertical_centered(|ui| {
                ui.set_width(ui.available_width() - normal_button_style.font.size * 2.0);

                ui.columns(MAX_PLAYERS as usize, |columns| {
                    for (i, ui) in columns.iter_mut().enumerate() {
                        world.run_system(
                            player_select_panel,
                            (ui, u32::try_from(i).unwrap(), &mut state),
                        )
                    }
                });
            });
        });
    });

    ui.ctx().set_state(state);
}

#[cfg(not(target_arch = "wasm32"))]
fn handle_match_setup_messages(
    network_socket: &NetworkMatchSocket,
    player_select_state: &mut PlayerSelectState,
    asset_server: &AssetServer,
) {
    let datas: Vec<(u32, Vec<u8>)> = network_socket.recv_reliable();

    for (player, data) in datas {
        match postcard::from_bytes::<PlayerSelectMessage>(&data) {
            Ok(message) => match message {
                PlayerSelectMessage::SelectPlayer(player_handle) => {
                    let slot = player_select_state.slots[player as usize];
                    let control_source = slot
                        .control_source()
                        .unwrap_or(PlayerSlotControlSource::Remote);
                    let selected_player = player_handle.into_handle(asset_server);
                    let current_hat = slot.selected_hat();
                    player_select_state.slots[player as usize] = PlayerSlot::SelectingHat {
                        control_source,
                        selected_player,
                        current_hat,
                    };
                }
                PlayerSelectMessage::ConfirmSelection(confirmed) => {
                    let slot = player_select_state.slots[player as usize];
                    let control_source = slot
                        .control_source()
                        .unwrap_or(PlayerSlotControlSource::Remote);
                    let selected_player = slot.selected_player().unwrap_or_else(|| {
                            warn!("got confirm message while in empty state, falling back to default player");
                            player_select_state.players[0]
                        });
                    let hat = slot.selected_hat();
                    player_select_state.slots[player as usize] = if confirmed {
                        PlayerSlot::Ready {
                            control_source,
                            selected_player,
                            selected_hat: hat,
                        }
                    } else {
                        PlayerSlot::SelectingHat {
                            control_source,
                            selected_player,
                            current_hat: hat,
                        }
                    };
                }
                PlayerSelectMessage::SelectHat(hat_handle) => {
                    let slot = player_select_state.slots[player as usize];
                    let control_source = slot
                        .control_source()
                        .unwrap_or(PlayerSlotControlSource::Remote);
                    let selected_player = slot.selected_player().unwrap_or_else(|| {
                            warn!("got confirm message while in empty state, falling back to default player");
                            player_select_state.players[0]
                        });
                    let current_hat = hat_handle.map(|h| h.into_handle(asset_server));
                    player_select_state.slots[player as usize] = PlayerSlot::SelectingHat {
                        control_source,
                        selected_player,
                        current_hat,
                    };
                }
            },
            Err(e) => warn!("Ignoring network message that was not understood: {e}"),
        }
    }
}

fn player_select_panel(
    mut params: In<(&mut egui::Ui, u32, &mut PlayerSelectState)>,
    meta: Root<GameMeta>,
    controls: Res<GlobalPlayerControls>,
    asset_server: Res<AssetServer>,
    localization: Localization<GameMeta>,
    mapping: Res<PlayerControlMapping>,
    world: &World,
    #[cfg(not(target_arch = "wasm32"))] network_socket: Option<Res<NetworkMatchSocket>>,
) {
    let (ui, slot_id, state) = &mut *params;
    let slot_id = *slot_id;

    #[cfg(not(target_arch = "wasm32"))]
    let network_socket = network_socket.as_deref();

    #[cfg(not(target_arch = "wasm32"))]
    if let Some(socket) = network_socket {
        // Don't show panels for non-connected players.
        if slot_id + 1 > socket.player_count() {
            return;
        }
    }

    #[cfg(target_arch = "wasm32")]
    let is_network = false;
    #[cfg(not(target_arch = "wasm32"))]
    let is_network = network_socket.is_some();

    let is_next_open_slot = state
        .slots
        .iter()
        .enumerate()
        .any(|(i, slot)| slot.control_source().is_none() && i == slot_id as usize);

    #[cfg(target_arch = "wasm32")]
    let (network_local_player_slot, slot_allows_new_player) = (None::<u32>, is_next_open_slot);
    #[cfg(not(target_arch = "wasm32"))]
    let (network_local_player_slot, slot_allows_new_player) = match network_socket {
        Some(socket) => {
            let socket_id = socket.player_idx();
            (Some(socket_id), slot_id == socket_id)
        }
        None => (None, is_next_open_slot),
    };

    //
    // React to user inputs
    //

    #[cfg(not(target_arch = "wasm32"))]
    let net_send_player = |handle: Handle<PlayerMeta>| {
        if let Some(socket) = network_socket {
            let network_handle = handle.network_handle(&asset_server);
            let message = PlayerSelectMessage::SelectPlayer(network_handle);
            socket.send_reliable(SocketTarget::All, &postcard::to_allocvec(&message).unwrap());
        }
    };

    #[cfg(not(target_arch = "wasm32"))]
    let net_send_hat = |handle: Option<Handle<HatMeta>>| {
        if let Some(socket) = network_socket {
            let network_handle = handle.map(|h| h.network_handle(&asset_server));
            let message = PlayerSelectMessage::SelectHat(network_handle);
            socket.send_reliable(SocketTarget::All, &postcard::to_allocvec(&message).unwrap());
        }
    };

    #[cfg(not(target_arch = "wasm32"))]
    let net_send_confirm = |confirm| {
        if let Some(socket) = network_socket {
            let message = PlayerSelectMessage::ConfirmSelection(confirm);
            socket.send_reliable(SocketTarget::All, &postcard::to_allocvec(&message).unwrap());
        }
    };

    let mut next_state = None::<PlayerSlot>;

    match state.slots[slot_id as usize] {
        PlayerSlot::Empty | PlayerSlot::SelectingLocalControlSource => {
            if slot_allows_new_player {
                // Check if a new player is trying to join
                let new_player_join = controls.iter().find_map(|(source, control)| {
                    (
                        // If this control input is pressing the join button
                        control.menu_confirm_just_pressed &&
                        // And this control source is not bound to a player slot already
                        !state.any_slot_has_source(*source)
                    )
                    // Return this source
                    .then_some(*source)
                });
                next_state = new_player_join.map(|control_source| PlayerSlot::SelectingPlayer {
                    control_source: PlayerSlotControlSource::User(control_source),
                    current_player: state.players[0],
                    current_hat: None,
                });
            }
        }

        PlayerSlot::SelectingPlayer {
            control_source: control_source @ PlayerSlotControlSource::User(src),
            current_player,
            current_hat,
        } => {
            let Some(player_control) = controls.get(&src) else {
                return;
            };
            if player_control.menu_confirm_just_pressed {
                next_state = Some(PlayerSlot::SelectingHat {
                    control_source,
                    selected_player: current_player,
                    current_hat,
                });
            } else if player_control.menu_back_just_pressed && !is_network {
                next_state = Some(PlayerSlot::Empty);
            } else if player_control.just_moved {
                let current_player_handle_idx = state
                    .players
                    .iter()
                    .enumerate()
                    .find(|(_, handle)| **handle == current_player)
                    .map(|(i, _)| i)
                    .unwrap_or(0);
                let next_idx = if player_control.move_direction.x > 0.0 {
                    (current_player_handle_idx + 1) % state.players.len()
                } else {
                    (current_player_handle_idx + state.players.len() - 1) % state.players.len()
                };
                let next_player = state.players[next_idx];

                #[cfg(not(target_arch = "wasm32"))]
                net_send_player(next_player);

                next_state = Some(PlayerSlot::SelectingPlayer {
                    control_source,
                    current_player: next_player,
                    current_hat,
                });
            }
        }

        PlayerSlot::SelectingHat {
            control_source: control_source @ PlayerSlotControlSource::User(src),
            selected_player,
            current_hat,
        } => {
            let Some(player_control) = controls.get(&src) else {
                return;
            };
            if player_control.menu_confirm_just_pressed {
                #[cfg(not(target_arch = "wasm32"))]
                net_send_confirm(true);
                next_state = Some(PlayerSlot::Ready {
                    control_source,
                    selected_player,
                    selected_hat: current_hat,
                });
            } else if player_control.menu_back_just_pressed {
                next_state = Some(PlayerSlot::SelectingPlayer {
                    control_source,
                    current_player: selected_player,
                    current_hat,
                });
            } else if player_control.just_moved {
                let current_hat_handle_idx = state
                    .hats
                    .iter()
                    .enumerate()
                    .find(|(_, handle)| **handle == current_hat)
                    .map(|(i, _)| i)
                    .unwrap_or(0);

                let next_idx = if player_control.move_direction.x > 0.0 {
                    (current_hat_handle_idx + 1) % state.hats.len()
                } else {
                    (current_hat_handle_idx + state.hats.len() - 1) % state.hats.len()
                };
                let next_hat = state.hats[next_idx];

                #[cfg(not(target_arch = "wasm32"))]
                net_send_hat(next_hat);

                next_state = Some(PlayerSlot::SelectingHat {
                    control_source,
                    selected_player,
                    current_hat: next_hat,
                });
            }
        }

        PlayerSlot::Ready {
            control_source: control_source @ PlayerSlotControlSource::User(src),
            selected_player,
            selected_hat,
        } => {
            let Some(player_control) = controls.get(&src) else {
                return;
            };
            if player_control.menu_back_just_pressed {
                #[cfg(not(target_arch = "wasm32"))]
                net_send_confirm(false);
                next_state = Some(PlayerSlot::SelectingHat {
                    control_source,
                    selected_player,
                    current_hat: selected_hat,
                });
            }
        }

        _ => {}
    }

    if let Some(slot) = next_state.take() {
        state.slots[slot_id as usize] = slot;
    }

    //
    // Render panel
    //

    // Input sources that may be used to join a new player
    let available_input_sources = {
        let mut sources = SmallVec::<[_; 3]>::from_slice(&[
            ControlSource::Keyboard1,
            ControlSource::Keyboard2,
            ControlSource::Gamepad(0),
        ]);

        for slot in &state.slots {
            if matches!(
                slot.user_control_source(),
                Some(ControlSource::Keyboard1 | ControlSource::Keyboard2)
            ) {
                sources.retain(|&mut x| Some(x) != slot.user_control_source());
            }
        }
        sources
    };

    let panel = &meta.theme.panel;
    BorderedFrame::new(&panel.border)
        .padding(panel.padding)
        .show(ui, |ui| {
            ui.set_width(ui.available_width());
            ui.set_height(ui.available_height());

            let normal_font = &meta.theme.font_styles.normal.with_color(panel.font_color);
            let smaller_font = &meta.theme.font_styles.smaller.with_color(panel.font_color);
            let heading_font = &meta.theme.font_styles.heading.with_color(panel.font_color);

            let slot = state.slots[slot_id as usize];

            // Marker for current player in online matches
            if is_network && slot.is_local_player() {
                ui.vertical_centered(|ui| {
                    ui.label(normal_font.rich(localization.get("you-marker")));
                });
            } else {
                ui.add_space(normal_font.size);
            }

            ui.add_space(normal_font.size);

            let display_fish =
                |ui: &mut egui::Ui,
                 player_meta_handle: Handle<PlayerMeta>,
                 hat_meta_handle: Option<Handle<HatMeta>>| {
                    let player_meta = asset_server.get(player_meta_handle);
                    let hat_meta = hat_meta_handle.map(|h| asset_server.get(h));

                    ui.with_layout(egui::Layout::bottom_up(egui::Align::Center), |ui| {
                        ui.label(if slot.is_selecting_player() {
                            normal_font.rich(format!("<  {}  >", player_meta.name))
                        } else {
                            normal_font.rich(player_meta.name.as_str())
                        });

                        let hat_label = match slot {
                            PlayerSlot::Empty
                            | PlayerSlot::SelectingLocalControlSource
                            | PlayerSlot::SelectingPlayer { .. } => String::new(),
                            PlayerSlot::SelectingHat { .. } => match hat_meta.as_ref() {
                                Some(hat) => format!("< {} >", hat.name),
                                None => format!("< {} >", localization.get("no-hat")),
                            },
                            PlayerSlot::Ready { .. } => match hat_meta.as_ref() {
                                Some(hat) => hat.name.to_string(),
                                None => localization.get("no-hat").to_string(),
                            },
                        };
                        ui.label(smaller_font.rich(hat_label));

                        world.run_system(player_image, (ui, &player_meta, hat_meta.as_deref()));
                    });
                };

            if let Some(selected_player) = slot.selected_player() {
                let confirm_binding = match slot.user_control_source() {
                    Some(source) => mapping.map_control_source(source).menu_confirm.to_string(),
                    None => available_input_sources
                        .iter()
                        .map(|s| mapping.map_control_source(*s).menu_confirm.to_string())
                        .collect::<SmallVec<[_; 3]>>()
                        .join("/"),
                };

                let back_binding = match slot.user_control_source() {
                    Some(source) => mapping.map_control_source(source).menu_back.to_string(),
                    None => available_input_sources
                        .iter()
                        .map(|s| mapping.map_control_source(*s).menu_back.to_string())
                        .collect::<SmallVec<[_; 3]>>()
                        .join("/"),
                };
                ui.vertical_centered(|ui| {
                    if !slot.is_ready() {
                        if slot.is_local_player() {
                            if slot.is_selecting_hat() {
                                ui.label(normal_font.rich(localization.get("pick-a-hat")));
                            } else {
                                ui.label(normal_font.rich(localization.get("pick-a-fish")));
                            }
                        }

                        if network_local_player_slot.is_some_and(|s| s == slot_id) || !is_network {
                            let label_id = if slot.is_selecting_hat() {
                                "press-button-to-lock-in"
                            } else {
                                "press-button-to-confirm"
                            };
                            ui.label(normal_font.rich(localization.get_with(
                                label_id,
                                &fluent_args! {
                                    "button" => confirm_binding.as_str()
                                },
                            )));
                        }

                        if !is_network {
                            let label_id = if slot.is_selecting_hat() {
                                "press-button-to-go-back"
                            } else {
                                "press-button-to-remove"
                            };
                            ui.label(normal_font.rich(localization.get_with(
                                label_id,
                                &fluent_args! {
                                    "button" => back_binding.as_str()
                                },
                            )));
                        }
                    }

                    ui.vertical_centered(|ui| {
                        ui.set_height(heading_font.size * 1.5);

                        if slot.is_ready() && !slot.is_ai() {
                            ui.label(
                                heading_font
                                    .with_color(meta.theme.colors.positive)
                                    .rich(localization.get("player-select-ready")),
                            );
                            ui.add_space(normal_font.size / 2.0);

                            if slot.is_local_player() {
                                ui.label(normal_font.rich(localization.get_with(
                                    "player-select-unready",
                                    &fluent_args! {
                                        "button" => back_binding.as_str()
                                    },
                                )));
                            }
                        }
                        if !is_network && slot_id != 0 && slot.is_ai() {
                            ui.label(
                                heading_font
                                    .with_color(meta.theme.colors.positive)
                                    .rich(localization.get("ai-player")),
                            );
                            ui.add_space(normal_font.size / 2.0);
                            if BorderedButton::themed(
                                &meta.theme.buttons.normal,
                                localization.get("remove-ai-player"),
                            )
                            .show(ui)
                            .clicked()
                            {
                                next_state = Some(PlayerSlot::Empty);
                            }
                        }
                    });

                    display_fish(ui, selected_player, slot.selected_hat());
                });

            // If this slot has not selected player
            } else {
                let bindings = available_input_sources
                    .iter()
                    .map(|s| mapping.map_control_source(*s).menu_confirm.to_string())
                    .collect::<SmallVec<[_; 3]>>()
                    .join("/");

                ui.vertical_centered(|ui| {
                    if !is_network || slot.is_local_player() {
                        ui.label(normal_font.rich(localization.get_with(
                            "press-button-to-join",
                            &fluent_args! {
                                "button" => bindings
                            },
                        )));
                    }

                    if !is_network {
                        ui.add_space(meta.theme.font_styles.bigger.size);
                        if slot_id != 0
                            && BorderedButton::themed(
                                &meta.theme.buttons.normal,
                                localization.get("add-ai-player"),
                            )
                            .show(ui)
                            .clicked()
                        {
                            let player_idx =
                                THREAD_RNG.with(|rng| rng.usize(0..state.players.len()));
                            next_state = Some(PlayerSlot::Ready {
                                control_source: PlayerSlotControlSource::Ai,
                                selected_player: state.players[player_idx],
                                selected_hat: None,
                            });
                        }
                    } else {
                        // In network play, display default fish/hat for player if not yet selected.
                        let default_player_meta_handle = state.players[0];
                        display_fish(ui, default_player_meta_handle, None);
                    }
                });
            }
        });

    if let Some(slot) = next_state {
        state.slots[slot_id as usize] = slot;
    }
}

```

`src/ui/main_menu/settings.rs`:

```rs
use crate::{
    prelude::*,
    settings::{PlayerControlMapping, Settings},
};

mod audio;
mod controls;
mod graphics;
mod networking;

#[derive(Clone, Default)]
struct SettingsState {
    tab: SettingsTab,
    modified_settings: Settings,
    settings_loaded: bool,
    currently_binding_input_idx: Option<usize>,
}

/// Which settings tab we are on
#[derive(Clone, Copy, PartialEq, Eq, Default)]
enum SettingsTab {
    #[default]
    Controls,
    Networking,
    Audio,
    Graphics,
}

impl SettingsTab {
    const TABS: &'static [(Self, &'static str)] = &[
        (Self::Controls, "controls"),
        (Self::Networking, "networking"),
        (Self::Audio, "audio"),
        (Self::Graphics, "graphics"),
    ];
}

pub fn widget(
    mut ui: In<(&mut egui::Ui, &mut bool)>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    input: Res<GlobalPlayerControls>,
    mut mapping: ResMut<PlayerControlMapping>,
    mut storage: ResMut<Storage>,
    world: &World,
) {
    let (ui, close_settings_menu) = &mut *ui;
    let mut state = ui.ctx().get_state::<SettingsState>();
    let screen_rect = ui.max_rect();

    if !state.settings_loaded {
        state.modified_settings = storage.get::<Settings>().unwrap().clone();
        state.settings_loaded = true;
    }

    let mut should_reset = false;

    // Calculate a margin
    let outer_margin = screen_rect.size() * 0.10;
    let outer_margin = egui::Margin {
        left: outer_margin.x,
        right: outer_margin.x,
        // Make top and bottom margins smaller
        top: outer_margin.y / 1.5,
        bottom: outer_margin.y / 1.5,
    };

    let heading_font = meta
        .theme
        .font_styles
        .heading
        .with_color(meta.theme.panel.font_color);

    BorderedFrame::new(&meta.theme.panel.border)
        .margin(outer_margin)
        .padding(meta.theme.panel.padding)
        .show(ui, |ui| {
            // Disable all the buttons if we are currently binding an input
            ui.set_enabled(state.currently_binding_input_idx.is_none());

            ui.vertical_centered(|ui| {
                // Settings Heading
                ui.label(heading_font.rich(localization.get("settings")));

                // Add tab list at the top of the panel
                ui.horizontal(|ui| {
                    for (i, (tab, name)) in SettingsTab::TABS.iter().enumerate() {
                        let name = localization.get(name);
                        let mut name = egui::RichText::new(name);

                        // Underline the current tab
                        if *tab == state.tab {
                            name = name.underline();
                        }

                        let mut button =
                            BorderedButton::themed(&meta.theme.buttons.normal, name).show(ui);

                        // Focus the first tab by default
                        if i == 0 {
                            button = button.focus_by_default(ui);
                        }

                        // Change tab when clicked
                        if button.clicked() {
                            state.tab = *tab;
                        }
                    }
                });

                // Add buttons to the bottom
                ui.with_layout(egui::Layout::bottom_up(egui::Align::Center), |ui| {
                    let buttons_response = ui.horizontal(|ui| {
                        // Calculate button size and spacing
                        let width = ui.available_width();
                        let button_width = width / 4.0;
                        let button_min_size = vec2(button_width, 0.0);
                        let button_spacing = (width - 3.0 * button_width) / 4.0;

                        ui.add_space(button_spacing);

                        // Cancel button
                        if (BorderedButton::themed(
                            &meta.theme.buttons.normal,
                            localization.get("cancel"),
                        )
                        .min_size(button_min_size)
                        .show(ui)
                        .clicked()
                            || input.values().any(|x| x.menu_back_just_pressed))
                            && state.currently_binding_input_idx.is_none()
                        {
                            **close_settings_menu = true;
                            // Reset the modified settings to their stored settings.
                            state.modified_settings = storage.get::<Settings>().unwrap().clone();
                            // Run cancel callbacks
                            if state.tab == SettingsTab::Audio {
                                world.run_system(audio::on_cancel, &state);
                            }
                        }

                        ui.add_space(button_spacing);

                        // Reset button
                        if BorderedButton::themed(
                            &meta.theme.buttons.normal,
                            localization.get("reset"),
                        )
                        .min_size(button_min_size)
                        .show(ui)
                        .clicked()
                        {
                            should_reset = true;
                        }

                        ui.add_space(button_spacing);

                        // Save button
                        if BorderedButton::themed(
                            &meta.theme.buttons.normal,
                            localization.get("save"),
                        )
                        .min_size(button_min_size)
                        .show(ui)
                        .clicked()
                        {
                            // Save the settings to disk.
                            *mapping = state.modified_settings.player_controls.clone();
                            storage.insert(state.modified_settings.clone());
                            storage.save();
                            **close_settings_menu = true;
                        }
                    });

                    let buttons_rect = buttons_response.response.rect;
                    ui.add_space(buttons_rect.height() / 2.0);

                    ui.vertical(|ui| match state.tab {
                        SettingsTab::Controls => {
                            world.run_system(controls::widget, (ui, &mut state, should_reset))
                        }
                        SettingsTab::Networking => {
                            world.run_system(networking::widget, (ui, &mut state, should_reset))
                        }
                        SettingsTab::Audio => {
                            world.run_system(audio::widget, (ui, &mut state, should_reset))
                        }
                        SettingsTab::Graphics => {
                            world.run_system(graphics::widget, (ui, &mut state, should_reset))
                        }
                    });
                });
            });
        });

    // Update the state with our modified one
    ui.ctx().set_state(state);
}

```

`src/ui/main_menu/settings/audio.rs`:

```rs
use bones_framework::render::ui::egui;

use super::*;

trait SettingsExts {
    fn volume_change_event(&self) -> AudioEvent;
}

impl SettingsExts for Settings {
    fn volume_change_event(&self) -> AudioEvent {
        AudioEvent::VolumeScaleUpdate {
            main_volume_scale: self.main_volume,
            music_volume_scale: self.music_volume,
            effects_volume_scale: self.effects_volume,
        }
    }
}

pub(super) fn on_cancel(In(state): In<&SettingsState>, mut audio_center: ResMut<AudioCenter>) {
    audio_center.push_event(state.modified_settings.volume_change_event());
}

pub(super) fn widget(
    In((ui, state, should_reset)): In<(&mut egui::Ui, &mut SettingsState, bool)>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    mut audio_center: ResMut<AudioCenter>,
) {
    let bigger_font = meta
        .theme
        .font_styles
        .bigger
        .with_color(meta.theme.panel.font_color);
    let normal_font = meta
        .theme
        .font_styles
        .normal
        .with_color(meta.theme.panel.font_color);

    if should_reset {
        state.modified_settings.main_volume = meta.default_settings.main_volume;
        audio_center.push_event(state.modified_settings.volume_change_event());
    }

    ui.add_space(normal_font.size);

    ui.scope(|ui| {
        let style = ui.style_mut();
        style.drag_value_text_style = egui::TextStyle::Monospace;
        style.spacing.indent = normal_font.size / 2.5;
        style.spacing.button_padding = egui::vec2(6.0, 3.0);
        style.spacing.slider_width = 200.0;
        style.visuals.indent_has_left_vline = false;

        ui.indent("audio-controls", |ui| {
            ui.label(bigger_font.rich(localization.get("volume")));
            ui.add_space(normal_font.size / 2.0);

            egui::Grid::new("volume-grid").show(ui, |ui| {
                // Main
                let main_changed = volume_control_widget(
                    ui,
                    normal_font.rich(localization.get("volume-main")),
                    &mut state.modified_settings.main_volume,
                )
                .changed();
                ui.end_row();

                // Music
                let music_changed = volume_control_widget(
                    ui,
                    normal_font.rich(localization.get("volume-music")),
                    &mut state.modified_settings.music_volume,
                )
                .changed();
                ui.end_row();

                // Effects
                let effects_changed = volume_control_widget(
                    ui,
                    normal_font.rich(localization.get("volume-effects")),
                    &mut state.modified_settings.effects_volume,
                )
                .changed();
                ui.end_row();

                if main_changed || music_changed || effects_changed {
                    audio_center.push_event(state.modified_settings.volume_change_event());
                }
            });
        });
    });
}

fn volume_control_widget(
    ui: &mut egui::Ui,
    label: impl Into<egui::WidgetText>,
    value: &mut f32,
) -> egui::Response {
    ui.label(label);
    let slider = egui::Slider::new(value, 0.0..=1.0)
        .smallest_positive(0.0)
        .step_by(0.01)
        .fixed_decimals(3)
        .custom_formatter(|x, _| format!("{:5.1}", x * 100.0))
        .custom_parser(|s| s.parse::<f64>().ok().map(|f| f / 100.0));
    ui.add(slider)
}

```

`src/ui/main_menu/settings/controls.rs`:

```rs
use egui_extras::{Column, TableBuilder};

use crate::settings::InputKind;

use super::*;

pub(super) fn widget(
    mut args: In<(&mut egui::Ui, &mut SettingsState, bool)>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    keyboard: Res<KeyboardInputs>,
    gamepad: Res<GamepadInputs>,
) {
    let (ui, state, should_reset) = &mut *args;

    if *should_reset {
        state.modified_settings.player_controls = meta.default_settings.player_controls.clone();
    }

    let bigger_font = meta
        .theme
        .font_styles
        .bigger
        .with_color(meta.theme.panel.font_color);
    let normal_font = meta
        .theme
        .font_styles
        .normal
        .with_color(meta.theme.panel.font_color);

    ui.add_space(bigger_font.size * 0.1);

    // Calculate the row height so that it can fit the input buttons
    let small_button_style = &meta.theme.buttons.small;
    let row_height = small_button_style.font.size
        + small_button_style.padding.top
        + small_button_style.padding.bottom;

    let mapping = &mut state.modified_settings.player_controls;

    let mut input_rows = [
        (
            localization.get("move-up"),
            [
                &mut mapping.keyboard1.movement.up,
                &mut mapping.keyboard2.movement.up,
                &mut mapping.gamepad.movement.up,
            ],
        ),
        (
            localization.get("move-down"),
            [
                &mut mapping.keyboard1.movement.down,
                &mut mapping.keyboard2.movement.down,
                &mut mapping.gamepad.movement.down,
            ],
        ),
        (
            localization.get("move-left"),
            [
                &mut mapping.keyboard1.movement.left,
                &mut mapping.keyboard2.movement.left,
                &mut mapping.gamepad.movement.left,
            ],
        ),
        (
            localization.get("move-right"),
            [
                &mut mapping.keyboard1.movement.right,
                &mut mapping.keyboard2.movement.right,
                &mut mapping.gamepad.movement.right,
            ],
        ),
        (
            localization.get("move-up-alt"),
            [
                &mut mapping.keyboard1.movement_alt.up,
                &mut mapping.keyboard2.movement_alt.up,
                &mut mapping.gamepad.movement_alt.up,
            ],
        ),
        (
            localization.get("move-down-alt"),
            [
                &mut mapping.keyboard1.movement_alt.down,
                &mut mapping.keyboard2.movement_alt.down,
                &mut mapping.gamepad.movement_alt.down,
            ],
        ),
        (
            localization.get("move-left-alt"),
            [
                &mut mapping.keyboard1.movement_alt.left,
                &mut mapping.keyboard2.movement_alt.left,
                &mut mapping.gamepad.movement_alt.left,
            ],
        ),
        (
            localization.get("move-right-alt"),
            [
                &mut mapping.keyboard1.movement_alt.right,
                &mut mapping.keyboard2.movement_alt.right,
                &mut mapping.gamepad.movement_alt.right,
            ],
        ),
        (
            localization.get("jump"),
            [
                &mut mapping.keyboard1.jump,
                &mut mapping.keyboard2.jump,
                &mut mapping.gamepad.jump,
            ],
        ),
        (
            localization.get("grab-drop"),
            [
                &mut mapping.keyboard1.grab,
                &mut mapping.keyboard2.grab,
                &mut mapping.gamepad.grab,
            ],
        ),
        (
            localization.get("shoot"),
            [
                &mut mapping.keyboard1.shoot,
                &mut mapping.keyboard2.shoot,
                &mut mapping.gamepad.shoot,
            ],
        ),
        (
            localization.get("slide"),
            [
                &mut mapping.keyboard1.slide,
                &mut mapping.keyboard2.slide,
                &mut mapping.gamepad.slide,
            ],
        ),
        (
            localization.get("ragdoll"),
            [
                &mut mapping.keyboard1.ragdoll,
                &mut mapping.keyboard2.ragdoll,
                &mut mapping.gamepad.ragdoll,
            ],
        ),
        (
            localization.get("pause"),
            [
                &mut mapping.keyboard1.pause,
                &mut mapping.keyboard2.pause,
                &mut mapping.gamepad.pause,
            ],
        ),
        (
            localization.get("menu-confirm"),
            [
                &mut mapping.keyboard1.menu_confirm,
                &mut mapping.keyboard2.menu_confirm,
                &mut mapping.gamepad.menu_confirm,
            ],
        ),
        (
            localization.get("menu-back"),
            [
                &mut mapping.keyboard1.menu_back,
                &mut mapping.keyboard2.menu_back,
                &mut mapping.gamepad.menu_back,
            ],
        ),
        (
            localization.get("menu-start"),
            [
                &mut mapping.keyboard1.menu_start,
                &mut mapping.keyboard2.menu_start,
                &mut mapping.gamepad.menu_start,
            ],
        ),
    ];

    // Create input table
    let width = ui.available_width();
    let label_size = normal_font.size * 7.0;
    let remaining_width = width - label_size;
    let cell_width = remaining_width / 3.1;
    TableBuilder::new(ui)
        .cell_layout(egui::Layout::centered_and_justified(
            egui::Direction::LeftToRight,
        ))
        .column(Column::exact(label_size))
        .column(Column::exact(cell_width))
        .column(Column::exact(cell_width))
        .column(Column::exact(cell_width))
        .header(bigger_font.size * 1.5, |mut row| {
            row.col(|ui| {
                ui.label(bigger_font.rich(localization.get("action")));
            });
            row.col(|ui| {
                ui.label(bigger_font.rich(localization.get("keyboard-1")));
            });
            row.col(|ui| {
                ui.label(bigger_font.rich(localization.get("keyboard-2")));
            });
            row.col(|ui| {
                ui.label(bigger_font.rich(localization.get("gamepad")));
            });
        })
        .body(|mut body| {
            // Keep track of the input button index we are on
            let mut input_idx = 0;

            // Loop through the input rows
            for (title, inputs) in &mut input_rows {
                body.row(row_height, |mut row| {
                    // Add row label
                    row.col(|ui| {
                        ui.label(normal_font.rich(title.to_string()));
                    });

                    // Add buttons for each kind of input
                    for (button_idx, input) in inputs.iter_mut().enumerate() {
                        // The last button is a gamepad binding, the others are keyboard
                        let binding_kind = if button_idx == 2 {
                            BindingKind::Gamepad
                        } else {
                            BindingKind::Keyboard
                        };

                        // Render the button
                        row.col(|ui| {
                            ui.set_width(ui.available_width() * 0.92);

                            let button = BorderedButton::themed(
                                &meta.theme.buttons.small,
                                input.to_string(),
                            )
                            .show(ui);

                            // Start an input binding if the button is clicked
                            if button.clicked() {
                                state.currently_binding_input_idx = Some(input_idx);
                            }
                            // If we are binding an input for this button
                            else if state.currently_binding_input_idx == Some(input_idx) {
                                // Render the binding window
                                egui::Window::new("input_binding_overlay")
                                    .auto_sized()
                                    .collapsible(false)
                                    .anchor(egui::Align2::CENTER_CENTER, egui::Vec2::ZERO)
                                    .frame(egui::Frame::none())
                                    .title_bar(false)
                                    .show(ui.ctx(), |ui| {
                                        let m = meta.theme.panel.border.border_size;
                                        let s = meta.theme.panel.border.scale;
                                        BorderedFrame::new(&meta.theme.panel.border)
                                            // Just enough padding to fit the frame's border image
                                            .padding(egui::Margin {
                                                left: m.left * s,
                                                right: m.right * s,
                                                top: m.top * s,
                                                bottom: m.bottom * s,
                                            })
                                            .show(ui, |ui| {
                                                ui.label(normal_font.rich(localization.get_with(
                                                    "bind-input",
                                                    &fluent_args! {
                                                        "binding" => title.as_ref(),
                                                        "binding_kind" => match binding_kind {
                                                            BindingKind::Keyboard => "keyboard",
                                                            BindingKind::Gamepad => "gamepad",
                                                        }
                                                    },
                                                )));

                                                ui.add_space(normal_font.size / 2.0);

                                                ui.horizontal(|ui| {
                                                    // Cancel button
                                                    if BorderedButton::themed(
                                                        &meta.theme.buttons.small,
                                                        localization.get("cancel"),
                                                    )
                                                    .show(ui)
                                                    .clicked()
                                                    {
                                                        button.request_focus();
                                                        state.currently_binding_input_idx = None;
                                                    }

                                                    // Clear button
                                                    if BorderedButton::themed(
                                                        &meta.theme.buttons.small,
                                                        localization.get("clear-binding"),
                                                    )
                                                    .show(ui)
                                                    .clicked()
                                                    {
                                                        **input = InputKind::None;
                                                        button.request_focus();
                                                        state.currently_binding_input_idx = None;
                                                    }
                                                });

                                                // See if there has been any inputs of the kind we
                                                // are binding.
                                                let bound_input =
                                                    get_input(binding_kind, &keyboard, &gamepad);

                                                // If there has been an input
                                                if let Some(input_kind) = bound_input {
                                                    // Stop listening for inputs
                                                    state.currently_binding_input_idx = None;

                                                    // Reset the focus on the input button
                                                    button.request_focus();

                                                    // Set the input for this button to the pressed
                                                    // input
                                                    **input = input_kind;
                                                }
                                            });
                                    });
                            }
                        });

                        // Increment the input button index
                        input_idx += 1;
                    }
                });
            }
        });
}

/// The kind of input binding to listen for.
enum BindingKind {
    Keyboard,
    Gamepad,
}

fn get_input(
    kind: BindingKind,
    keyboard: &KeyboardInputs,
    gamepad: &GamepadInputs,
) -> Option<InputKind> {
    match kind {
        BindingKind::Keyboard => keyboard.key_events.iter().next().and_then(|event| {
            event
                .button_state
                .pressed()
                .then(|| event.key_code.option().map(InputKind::Keyboard))
                .flatten()
        }),
        BindingKind::Gamepad => {
            gamepad
                .gamepad_events
                .iter()
                .next()
                .and_then(|event| match event {
                    GamepadEvent::Button(e) => {
                        (e.value.abs() > 0.1).then_some(InputKind::Button(e.button))
                    }
                    GamepadEvent::Axis(e) => {
                        if e.value > 0.1 {
                            Some(InputKind::AxisPositive(e.axis))
                        } else if e.value < -0.1 {
                            Some(InputKind::AxisNegative(e.axis))
                        } else {
                            None
                        }
                    }
                    _ => None,
                })
        }
    }
}

```

`src/ui/main_menu/settings/graphics.rs`:

```rs
use super::*;

pub(super) fn widget(
    mut args: In<(&mut egui::Ui, &mut SettingsState, bool)>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
) {
    let (ui, state, should_reset) = &mut *args;

    let normal_font = meta
        .theme
        .font_styles
        .normal
        .with_color(meta.theme.panel.font_color);

    if *should_reset {
        state.modified_settings.fullscreen = meta.default_settings.fullscreen;
    }

    ui.add_space(normal_font.size / 2.0);

    #[cfg(not(target_arch = "wasm32"))]
    ui.horizontal(|ui| {
        ui.add_space(normal_font.size * 3.0);
        ui.checkbox(
            &mut state.modified_settings.fullscreen,
            normal_font.rich(localization.get("fullscreen")),
        );
    });

    #[cfg(target_arch = "wasm32")]
    ui.label(normal_font.rich(localization.get("no-graphics-settings-on-web")));
}

```

`src/ui/main_menu/settings/networking.rs`:

```rs
use super::*;

pub(super) fn widget(
    mut args: In<(&mut egui::Ui, &mut SettingsState, bool)>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
) {
    let (ui, state, should_reset) = &mut *args;

    let bigger_font = meta
        .theme
        .font_styles
        .bigger
        .with_color(meta.theme.panel.font_color);
    let normal_font = meta
        .theme
        .font_styles
        .normal
        .with_color(meta.theme.panel.font_color);

    if *should_reset {
        state.modified_settings.matchmaking_server =
            meta.default_settings.matchmaking_server.clone();
    }

    ui.add_space(bigger_font.size / 2.0);

    ui.horizontal(|ui| {
        ui.label(bigger_font.rich(localization.get("matchmaking-server")));

        ui.add(
            egui::TextEdit::singleline(&mut state.modified_settings.matchmaking_server)
                .font(normal_font)
                .desired_width(ui.available_width() - bigger_font.size * 2.0),
        );
    });
}

```

`src/ui/map_select.rs`:

```rs
use crate::{prelude::*, PackMeta};

use super::main_menu::MenuPage;

#[derive(Clone, Debug, Default)]
pub enum MapSelectAction {
    #[default]
    None,
    SelectMap(MapPool),
    GoBack,
}

/// Network message that may be sent when selecting a map.
#[derive(Serialize, Deserialize)]
pub enum MapSelectMessage {
    SelectMap(NetworkHandle<MapMeta>),
}

pub fn map_select_menu(
    asset_server: Res<AssetServer>,
    meta: Root<GameMeta>,
    ctx: Res<EguiCtx>,
    localization: Localization<GameMeta>,
    player_controls: Res<GlobalPlayerControls>,
    rng: ResInit<GlobalRng>,
) -> MapSelectAction {
    if player_controls.values().any(|x| x.menu_back_just_pressed) {
        return MapSelectAction::GoBack;
    }

    egui::CentralPanel::default()
        .frame(egui::Frame::none())
        .show(&ctx, |ui| {
            let screen_rect = ui.max_rect();

            let pause_menu_width = meta.main_menu.menu_width;
            let x_margin = (screen_rect.width() - pause_menu_width) / 2.0;
            let outer_margin = egui::style::Margin::symmetric(x_margin, screen_rect.height() * 0.1);

            BorderedFrame::new(&meta.theme.panel.border)
                .margin(outer_margin)
                .padding(meta.theme.panel.padding)
                .show(ui, |ui| {
                    ui.set_min_width(ui.available_width());

                    ui.vertical_centered(|ui| {
                        ui.label(
                            meta.theme
                                .font_styles
                                .bigger
                                .rich(localization.get("map-select-title")),
                        );
                    });

                    ui.add_space(meta.theme.font_styles.normal.size);

                    let menu_page_state = ui.ctx().get_state::<MenuPage>();
                    let is_waiting = match menu_page_state {
                        MenuPage::MapSelect { is_waiting } => is_waiting,
                        // If we are not on the map select menu page it means we are selecting
                        // a map from the pause menu.
                        _ => false,
                    };
                    if is_waiting {
                        ui.label(
                            meta.theme
                                .font_styles
                                .bigger
                                .rich(localization.get("waiting-for-map")),
                        );

                        MapSelectAction::None
                    } else {
                        egui::ScrollArea::vertical()
                            .show(ui, |ui| {
                                ui.vertical_centered_justified(|ui| {
                                    let all_maps_button = BorderedButton::themed(
                                        &meta.theme.buttons.small,
                                        "All Maps".to_string(),
                                    )
                                    .show(ui)
                                    .focus_by_default(ui);

                                    if all_maps_button.has_focus() {
                                        all_maps_button.scroll_to_me(None);
                                    }

                                    if all_maps_button.clicked() {
                                        // TODO: Currently does not include packs, only stable maps.
                                        let mut map_pool =
                                            MapPool::from_slice(&meta.core.stable_maps);
                                        map_pool.randomize_current_map(&rng);
                                        return MapSelectAction::SelectMap(map_pool);
                                    }

                                    for handle in meta.core.stable_maps.iter() {
                                        let map_meta = asset_server.get(*handle);

                                        let button = BorderedButton::themed(
                                            &meta.theme.buttons.small,
                                            map_meta.name.to_string(),
                                        )
                                        .show(ui);

                                        if button.has_focus() {
                                            button.scroll_to_me(None);
                                        }

                                        if button.clicked() {
                                            return MapSelectAction::SelectMap(
                                                MapPool::from_single_map(*handle),
                                            );
                                        }
                                    }

                                    for pack in asset_server.packs() {
                                        let pack_meta =
                                            asset_server.get(pack.root.typed::<PackMeta>());
                                        for map in pack_meta.maps.iter() {
                                            let map_meta = asset_server.get(*map);
                                            let button = BorderedButton::themed(
                                                &meta.theme.buttons.small,
                                                map_meta.name.to_string(),
                                            )
                                            .show(ui);

                                            if button.has_focus() {
                                                button.scroll_to_me(None);
                                            }

                                            if button.clicked() {
                                                return MapSelectAction::SelectMap(
                                                    MapPool::from_single_map(*map),
                                                );
                                            }
                                        }
                                    }

                                    MapSelectAction::None
                                })
                                .inner
                            })
                            .inner
                    }
                })
                .inner
        })
        .inner
}

```

`src/ui/network_game.rs`:

```rs
use bones_framework::networking::online::{
    OnlineMatchmaker, OnlineMatchmakerResponse, PlayerIdxAssignment,
};

use crate::prelude::*;

use super::main_menu::MenuPage;

/// Game id for matchmaking
const GAME_ID: &str = "jumpy";

/// The jumpy mdns service type for lan games.
const JUMPY_LAN_SERVICE_TYPE: &str = "_jumpy._udp.local.";

#[derive(Clone, Debug, Default)]
pub enum NetworkGameAction {
    #[default]
    None,
    GoBack,
}

#[derive(Default, Clone)]
pub enum LanMode {
    #[default]
    Join,
    Host {
        service_name: String,
        player_count: u32,
    },
}

#[derive(Eq, PartialEq, Clone)]
pub struct OnlineState {
    player_count: u32,
    matchmaking_server: String,
}

impl Default for OnlineState {
    fn default() -> Self {
        Self {
            player_count: 2,
            matchmaking_server: String::new(),
        }
    }
}

#[derive(Clone)]
pub enum MatchKind {
    Lan(LanMode),
    Online(OnlineState),
}

impl Default for MatchKind {
    fn default() -> Self {
        MatchKind::Lan(LanMode::Join)
    }
}

#[derive(Default, PartialEq, Clone, Copy)]
pub enum NetworkGameStatus {
    #[default]
    Idle,
    /// Joining a lobby
    Joining,
    /// Hosting a lobby,
    Hosting,
    /// Searching with matchmaker
    Matchmaking(MatchmakingStatus),
}

/// States for
#[derive(PartialEq, Eq, Clone, Copy)]
pub enum MatchmakingStatus {
    /// Sent request to matchmaker but have not yet received a response
    Connecting,
    /// Got response from matchmaker but not enough players in game yet
    WaitingForPlayers,
    /// Starting match
    MatchStarting,
}

#[derive(Clone)]
pub struct NetworkGameState {
    match_kind: MatchKind,
    lan_service_discovery_recv: Option<lan::ServiceDiscoveryReceiver>,
    service_info: Option<lan::ServerInfo>,
    status: NetworkGameStatus,
    joined_players: usize,
    lan_servers: Vec<lan::ServerInfo>,
    ping_update_timer: Timer,
    random_seed: u64,
}

impl Default for NetworkGameState {
    fn default() -> Self {
        Self {
            match_kind: default(),
            lan_service_discovery_recv: default(),
            service_info: default(),
            status: default(),
            lan_servers: default(),
            joined_players: default(),
            ping_update_timer: Timer::new(Duration::from_secs(1), TimerMode::Repeating),
            random_seed: DEFAULT_RANDOM_SEED as u64,
        }
    }
}

impl NetworkGameState {
    pub fn random_seed(&self) -> u64 {
        self.random_seed
    }
}

pub fn network_game_menu(
    world: &World,
    // commands: &mut Commands,
    localization: Localization<GameMeta>,
    meta: Root<GameMeta>,
    ctx: Res<EguiCtx>,
    player_controls: Res<GlobalPlayerControls>,
    storage: ResMut<Storage>,
) //-> NetworkGameAction {
{
    // if player_controls.values().any(|x| x.menu_back_just_pressed) {
    //     return NetworkGameAction::GoBack;
    // }

    let bigger_text_style = &meta.theme.font_styles.bigger;
    let normal_text_style = &meta.theme.font_styles.normal;
    let smaller_text_style = &meta.theme.font_styles.smaller;
    let heading_text_style = &meta.theme.font_styles.heading;
    let normal_button_style = &meta.theme.buttons.normal;
    let small_button_style = &meta.theme.buttons.small;

    // TODO CentralPanel ok?
    egui::CentralPanel::default()
        .frame(egui::Frame::none())
        .show(&ctx, |ui| {
            ui.vertical_centered(|ui| {
                ui.add_space(heading_text_style.size / 4.0);
                ui.label(heading_text_style.rich(localization.get("network-game")));
                ui.label(bigger_text_style.rich(localization.get("configure-match")));
                ui.add_space(heading_text_style.size * 4.0);
            });

            // TODO: set state at end. Is it initialiezd?
            let mut state = ui.ctx().get_state::<NetworkGameState>();


            let available_size = ui.available_size();
            let x_margin = available_size.x / 4.0;
            let outer_margin = egui::style::Margin::symmetric(x_margin, 0.0);

            BorderedFrame::new(&meta.theme.panel.border)
                .margin(outer_margin)
                .padding(meta.theme.panel.padding)
                .show(ui, |ui| {
                    ui.set_width(ui.available_width());

                    ui.horizontal(|ui| {
                        // Lan tab
                        let mut lan = egui::RichText::new(localization.get("lan"));
                        if matches!(state.match_kind, MatchKind::Lan(..)) {
                            lan = lan.underline();
                        }
                        if BorderedButton::themed(normal_button_style, lan)
                            .show(ui)
                            .focus_by_default(ui)
                            .clicked()
                        {

                            // If currently searching for online match and switched to lan tab - cancel it.
                            if let NetworkGameStatus::Matchmaking(_) = state.status {
                                if let MatchKind::Online(OnlineState { matchmaking_server, .. }) = &state.match_kind {
                                    if let Ok(matchmaking_server) = matchmaking_server.parse() {
                                        info!("Swithed to LAN mode during online matchmaking - stopping search.");
                                        let _ = OnlineMatchmaker::stop_search_for_match(matchmaking_server);
                                    }
                                }
                            }
                            state.match_kind = MatchKind::Lan(default());
                        }

                        // Online tab
                        let mut online = egui::RichText::new(localization.get("online"));
                        if matches!(state.match_kind, MatchKind::Online(..)) {
                            online = online.underline();
                        }
                        if BorderedButton::themed(normal_button_style, online)
                            .show(ui)
                            .clicked()
                        {
                            state.match_kind = MatchKind::Online(default());
                        }
                        match &mut state.match_kind {
                            MatchKind::Lan(mode) => {
                                ui.with_layout(
                                    egui::Layout::right_to_left(egui::Align::Center),
                                    |ui| {
                                        ui.horizontal(|ui| {
                                            // Host tab
                                            let mut host =
                                                egui::RichText::new(localization.get("host"));
                                            if matches!(mode, LanMode::Host { .. }) {
                                                host = host.underline();
                                            }
                                            if BorderedButton::themed(
                                                &meta.theme.buttons.small,
                                                host,
                                            )
                                            .show(ui)
                                            .clicked()
                                            {
                                                *mode = LanMode::Host {
                                                    service_name: localization.get("fish-fight").into_owned(),
                                                    player_count: 2,
                                                };
                                            }

                                            // Join tab
                                            let mut join =
                                                egui::RichText::new(localization.get("join"));
                                            if matches!(mode, LanMode::Join) {
                                                join = join.underline();
                                            }
                                            if BorderedButton::themed(
                                                &meta.theme.buttons.small,
                                                join,
                                            )
                                            .show(ui)
                                            .clicked()
                                            {
                                                *mode = LanMode::Join
                                            }
                                        });
                                    },
                                );
                            },
                            MatchKind::Online(_online_state) => {
                                ui.with_layout(
                                    egui::Layout::right_to_left(egui::Align::Center),
                                    |ui| {
                                        ui.label(
                                            normal_text_style.rich(localization.get("search-for-match"))
                                        );
                                    },
                                );
                            }
                        }
                    });

                    let NetworkGameState {
                        match_kind,
                        lan_service_discovery_recv,
                        lan_servers,
                        service_info: host_info,
                        status,
                        ping_update_timer,
                        joined_players,
                        random_seed
                    } = &mut state;

                    ui.separator();
                    ui.add_space(normal_text_style.size);

                    match match_kind {
                        // LAN game
                        MatchKind::Lan(mode) => match mode {
                            LanMode::Join => {
                                // Stop any running server
                                if let Some(service_info) = host_info.take() {
                                    lan::stop_server(&service_info);
                                    *status = NetworkGameStatus::Idle;
                                }
                                lan::prepare_to_join(JUMPY_LAN_SERVICE_TYPE, lan_servers, lan_service_discovery_recv, ping_update_timer);

                                if *status != NetworkGameStatus::Joining {
                                    ui.label(
                                        normal_text_style.rich(localization.get("servers"))
                                    );
                                    ui.add_space(normal_text_style.size / 2.0);

                                    ui.indent("servers", |ui| {
                                        for server in lan_servers.iter() {
                                            ui.horizontal(|ui| {
                                                if BorderedButton::themed(
                                                    &meta.theme.buttons.normal,
                                                    server.service.get_hostname().trim_end_matches('.'),
                                                )
                                                .min_size(vec2(ui.available_width() * 0.8, 0.0))
                                                .show(ui)
                                                .clicked()
                                                {
                                                    // TODO: show error message
                                                    lan::join_server(server).expect("failed to join lan");
                                                    *status = NetworkGameStatus::Joining;
                                                }

                                                let label_text = egui::RichText::new(format!(
                                                    "🖧 {}ms",
                                                    server
                                                        .ping
                                                        .map(|x| x.to_string())
                                                        .unwrap_or("?".into())
                                                ))
                                                .size(normal_text_style.size);
                                                ui.label(label_text)
                                            });
                                        }

                                        if lan_servers.is_empty() {
                                            ui.label(
                                                normal_text_style.rich(
                                                localization.get("no-servers")),
                                            );
                                        }
                                    });

                                // If we are trying to join a match.
                                } else {
                                    ui.label(
                                        normal_text_style.rich(
                                        localization.get("joining"))
                                    );

                                    if let Some(lan_socket) = lan::wait_game_start() {
                                        world.resources.insert(lan_socket);
                                        *status = default();
                                       ui.ctx().set_state(MenuPage::PlayerSelect);
                                    }
                                }

                                ui.add_space(normal_text_style.size / 2.0);
                            }
                            LanMode::Host {
                                service_name,
                                player_count,
                            } => {
                                ui.scope(|ui| {
                                    ui.set_enabled(*status != NetworkGameStatus::Hosting);
                                    ui.horizontal(|ui| {
                                        ui.label(
                                            normal_text_style.rich(
                                            localization.get("server-name"))
                                        );
                                        ui.add(
                                            egui::TextEdit::singleline(service_name)
                                                .font(normal_text_style.id()),
                                        );
                                        *service_name = service_name.replace(' ', "-");
                                    });
                                    ui.add_space(normal_text_style.size / 2.0);
                                    ui.horizontal(|ui| {
                                        ui.label(
                                            normal_text_style.rich(localization.get("player-count"))
                                        );
                                        ui.add_space(normal_text_style.size);
                                        ui.scope(|ui| {
                                            ui.set_enabled(*player_count > 2);
                                            if BorderedButton::themed(small_button_style, "-")
                                                .min_size(vec2(normal_text_style.size * 2.0, 0.0))
                                                .show(ui)
                                                .clicked()
                                            {
                                                *player_count = player_count
                                                    .saturating_sub(1)
                                                    .clamp(2, MAX_PLAYERS);
                                            }
                                        });
                                        ui.label(normal_text_style.rich(player_count.to_string()));
                                        ui.scope(|ui| {
                                            ui.set_enabled(*player_count < MAX_PLAYERS);
                                            if BorderedButton::themed(small_button_style, "+")
                                          .min_size(vec2(normal_text_style.size * 2.0, 0.0))
                                                .show(ui)
                                                .clicked()
                                            {
                                                *player_count = player_count
                                                    .saturating_add(1)
                                                    .clamp(2, MAX_PLAYERS);
                                            }
                                        });

                                        *service_name = service_name.replace(' ', "-");
                                    });
                                });

                                let (is_recreated, service_info) = RUNTIME.block_on(async {
                                    lan::prepare_to_host(host_info, JUMPY_LAN_SERVICE_TYPE, service_name).await
                                });
                                if is_recreated {
                                    *status = NetworkGameStatus::Idle;
                                }

                                ui.add_space(meta.theme.font_styles.normal.size);

                                if *status == NetworkGameStatus::Idle {
                                    if BorderedButton::themed(
                                        small_button_style,
                                        localization.get("start-server"),
                                    )
                                    .show(ui)
                                    .clicked()
                                    {
                                        *status = NetworkGameStatus::Hosting;
                                        lan::start_server(service_info.clone(), *player_count);
                                    }

                                // If we are hosting a match currently
                                } else if *status == NetworkGameStatus::Hosting {
                                    if let Some(socket) = lan::wait_players(joined_players, service_info) {
                                        world.resources.insert(socket);
                                        *status = default();
                                        ui.ctx().set_state(MenuPage::PlayerSelect);
                                    }

                                    ui.horizontal(|ui| {
                                        if BorderedButton::themed(
                                            small_button_style,
                                            localization.get("stop-server"),
                                        )
                                        .show(ui)
                                        .clicked()
                                        {
                                            lan::stop_server(service_info);
                                            *status = NetworkGameStatus::Idle;
                                        }

                                        ui.label(
                                            normal_text_style.rich(
                                            format!(
                                                "{} {} / {}",
                                                localization.get("players"),
                                                *joined_players + 1, // Add one to count the host.
                                                player_count
                                            ))
                                        );
                                    });
                                }
                            }
                        }

                        // Online game
                        MatchKind::Online(OnlineState {
                            player_count,
                            matchmaking_server,
                        }) => {
                            // Get the matchmaking server from the settings.
                            if matchmaking_server.is_empty() {
                                *matchmaking_server =
                                    storage
                                    .get::<Settings>()
                                    .unwrap_or_else(|| &meta.default_settings)
                                    .matchmaking_server.clone();
                            }

                            ui.horizontal(|ui| {
                                ui.set_enabled(*status == NetworkGameStatus::Idle);
                                ui.label(
                                    normal_text_style.rich(localization.get("player-count"))
                                );

                                ui.scope(|ui| {
                                    ui.set_enabled(*player_count > 2);
                                    if BorderedButton::themed(small_button_style, "-")
                                        .min_size(vec2(normal_text_style.size * 2.0, 0.0))
                                        .show(ui)
                                        .clicked()
                                    {
                                        *player_count =
                                            player_count.saturating_sub(1).clamp(2, MAX_PLAYERS);
                                    }
                                });
                                ui.label(normal_text_style.rich(player_count.to_string()));
                                ui.scope(|ui| {
                                    ui.set_enabled(*player_count < MAX_PLAYERS);
                                    if BorderedButton::themed(small_button_style, "+")
                                        .min_size(vec2(normal_text_style.size * 2.0, 0.0))
                                        .show(ui)
                                        .clicked()
                                    {
                                        *player_count =
                                            player_count.saturating_add(1).clamp(2, MAX_PLAYERS);
                                    }
                                });
                            });

                            ui.add_space(normal_text_style.size);

                            match *status {
                                NetworkGameStatus::Idle => {
                                    if BorderedButton::themed(
                                        small_button_style,
                                        localization.get("search"),
                                    )
                                    .show(ui)
                                    .clicked()
                                    {
                                        *status = NetworkGameStatus::Matchmaking(MatchmakingStatus::Connecting);
                                        let server = matchmaking_server.parse().expect("invalid server id");
                                        let custom_match_data = vec![];
                                        OnlineMatchmaker::start_search_for_match(server, GAME_ID.to_string(), *player_count, custom_match_data, PlayerIdxAssignment::Random).unwrap();
                                        info!("Connecting to matchmaker to search for match...");
                                    }
                                },
                                NetworkGameStatus::Matchmaking(matchmaking_status) => {
                                    if let Some(response) = OnlineMatchmaker::read_matchmaker_response() {
                                        match response {
                                            OnlineMatchmakerResponse::MatchmakingUpdate { player_count } => {
                                                *joined_players = player_count as usize;
                                                *status = NetworkGameStatus::Matchmaking(MatchmakingStatus::WaitingForPlayers);
                                            },
                                            OnlineMatchmakerResponse::GameStarting {
                                                                socket,
                                                                // Player idx is on socket - don't need it here atm
                                                                player_idx: _,
                                                                player_count: _,
                                                                random_seed: new_random_seed,
                                            } => {
                                                world.resources.insert(socket);
                                                *status = NetworkGameStatus::default();
                                                *random_seed = new_random_seed;
                                                ui.ctx().set_state(MenuPage::PlayerSelect);
                                                info!("Matchmaking complete, going to player select.");
                                            },
                                            OnlineMatchmakerResponse::Error(err) => {
                                                warn!("Error from matchmaker: {err}");
                                            }
                                            _ => ()
                                        }
                                    }

                                    ui.horizontal(|ui| {
                                        if BorderedButton::themed(
                                            small_button_style,
                                            localization.get("cancel"),
                                        )
                                        .show(ui)
                                        .clicked()
                                        {
                                            let server = matchmaking_server.parse().expect("invalid server id");
                                            if let Err(err) = OnlineMatchmaker::stop_search_for_match(server) {
                                                error!("Failed to stop searching for online game: {err}");
                                            }
                                            // search_state = default();
                                            *status = NetworkGameStatus::Idle;
                                        }
                                    });

                                    ui.label(
                                        smaller_text_style.rich(
                                            match matchmaking_status {
                                                MatchmakingStatus::Connecting=> {
                                                    localization.get("connecting").to_string()
                                                }
                                                MatchmakingStatus::WaitingForPlayers => {
                                                    localization.get_with("waiting-for-players",
                                                        &fluent_args! {
                                                            "current" => *joined_players,
                                                            "total" => *player_count
                                                        }).to_string()
                                                },
                                                _ => {
                                                    localization.get("match-ready").to_string()
                                                }
                                            }
                                        )
                                    );
                                },
                                NetworkGameStatus::Joining => (),
                                    // Joining is not currently implemented in the context of online play - though will likely be used
                                    // for joining online lobbies later.
                                NetworkGameStatus::Hosting => (),
                                    // Hosting is not currently implemented in the context of online play - though will likely be used
                                    // for hosting online lobbies later.

                            }
                        }
                    }

                ui.with_layout(egui::Layout::right_to_left(egui::Align::Min), |ui| {
                    if BorderedButton::themed(normal_button_style, localization.get("back"))
                        .show(ui)
                        .clicked()
                        || player_controls.values().any(|x| x.menu_back_just_pressed)
                    {
                        match *status {
                            NetworkGameStatus::Idle => (),
                            NetworkGameStatus::Matchmaking(_)=> {
                                if let  MatchKind::Online(OnlineState {
                                    matchmaking_server,
                                    ..
                                    }) = match_kind {
                                        let server = matchmaking_server.parse().expect("invalid server id");
                                        if let Err(err) = OnlineMatchmaker::stop_search_for_match(server) {
                                            error!("Error stopping search: {:?}", err);
                                        }
                                    }

                                *status = NetworkGameStatus::Idle;
                            },
                            NetworkGameStatus::Joining => {
                                lan::leave_server();
                                *status = NetworkGameStatus::Idle;
                            },
                            NetworkGameStatus::Hosting => {
                                *status = NetworkGameStatus::Idle;
                                if let Some(service_info) = host_info.take() {
                                    lan::stop_server(&service_info);
                                }
                            }
                        }

                        ui.ctx().set_state(MenuPage::Home);
                    }
                });
            });



        // Update state after modifications
        ui.ctx().set_state(state);

    });
}

```

`src/ui/notification.rs`:

```rs
use std::borrow::BorrowMut;

use crate::prelude::*;

#[allow(unused_variables)]
pub fn session_plugin(session: &mut SessionBuilder) {
    #[cfg(not(target_arch = "wasm32"))]
    session.add_system_to_stage(Update, network_disconnect_notify);
}

pub fn network_disconnect_notify(
    meta: Root<GameMeta>,
    ctx: Res<EguiCtx>,
    mut sessions: ResMut<Sessions>,
    world: &World,
) {
    let sessions = sessions.borrow_mut();
    #[allow(unused_assignments, unused_mut)]
    let mut all_players_disconnected = false;

    #[cfg(not(target_arch = "wasm32"))]
    {
        all_players_disconnected = if let Some(game_session) = sessions.get(SessionNames::GAME) {
            if let Some(disconnected_players) =
                game_session.world.resources.get::<DisconnectedPlayers>()
            {
                // Determine if all remote players have been disconnected
                // (Disconnected players should be player count - 1, can not have local player)
                let player_indices = game_session.world.components.get::<PlayerIdx>().borrow();

                !disconnected_players.disconnected_players.is_empty()
                    && player_indices.bitset().bit_count() - 1
                        == disconnected_players.disconnected_players.len()
            } else {
                false
            }
        } else {
            false
        };
    }

    if all_players_disconnected {
        egui::CentralPanel::default()
            .frame(egui::Frame::none())
            .show(&ctx, |ui| {
                ui.vertical_centered(|ui| {
                    // Calculate a margin
                    let screen_rect = ui.max_rect();
                    let outer_margin = screen_rect.size() * 0.10;
                    let outer_margin = egui::Margin {
                        left: outer_margin.x,
                        right: outer_margin.x,
                        top: outer_margin.y * 3.0,
                        bottom: outer_margin.y,
                    };

                    BorderedFrame::new(&meta.theme.panel.border)
                        .margin(outer_margin)
                        .padding(meta.theme.panel.padding)
                        .show(ui, |ui| {
                            world.run_system(
                                network_disconnect_notify_ui,
                                (ui, sessions.borrow_mut()),
                            )
                        });
                });
            });
    }
}

fn network_disconnect_notify_ui(
    mut param: In<(&mut egui::Ui, &mut Sessions)>,
    localization: Localization<GameMeta>,
    meta: Root<GameMeta>,
) {
    let (ui, sessions) = &mut *param;
    ui.vertical_centered(|ui| {
        ui.label(
            meta.theme
                .font_styles
                .heading
                .rich(localization.get("disconnected")),
        );

        ui.add_space(meta.theme.font_styles.normal.size);
        ui.label(
            meta.theme
                .font_styles
                .normal
                .rich(localization.get("disconnected-from-all")),
        );
        ui.add_space(meta.theme.font_styles.normal.size);

        if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("exit-match"))
            .show(ui)
            .focus_by_default(ui)
            .clicked()
        {
            sessions.add_command(Box::new(move |sessions: &mut Sessions| {
                sessions.end_game();
                sessions.start_menu();
            }));
        }
    });
}

```

`src/ui/pause_menu.rs`:

```rs
use std::ops::Deref;

use crate::{core::JumpyDefaultMatchRunner, prelude::*};

use super::scoring::ScoringMenuState;

#[derive(Clone, Debug, Copy, Default)]
enum PauseMenuPage {
    #[default]
    Pause,
    MapSelect,
    Settings,
}

pub fn session_plugin(session: &mut SessionBuilder) {
    session.add_system_to_stage(Update, pause_menu_system);
}

#[derive(HasSchema, Debug, Clone, Default)]
struct PauseMenu {
    menu_open: bool,
}

fn pause_menu_system(
    meta: Root<GameMeta>,
    mut sessions: ResMut<Sessions>,
    ctx: Res<EguiCtx>,
    controls: Res<GlobalPlayerControls>,
    world: &World,
    assets: Res<AssetServer>,
    mut pause_menu: ResMutInit<PauseMenu>,
) {
    let mut back_to_menu = false;
    let mut restart_game = false;
    let mut close_pause_menu = false;
    let mut close_settings_menu = false;
    let mut select_map = None;
    if let Some(session) = sessions.get_mut(SessionNames::GAME) {
        let pause_pressed = controls.values().any(|x| x.pause_just_pressed);

        #[cfg(not(target_arch = "wasm32"))]
        let is_online = session
            .world
            .get_resource::<SyncingInfo>()
            .is_some_and(|x| x.is_online());

        #[cfg(target_arch = "wasm32")]
        let is_online = false;

        if pause_menu.menu_open {
            let page = ctx.get_state::<PauseMenuPage>();

            match page {
                PauseMenuPage::Pause => {
                    egui::CentralPanel::default()
                        .frame(egui::Frame::none())
                        .show(&ctx, |ui| {
                            let screen_rect = ui.max_rect();

                            let pause_menu_width = meta.main_menu.menu_width;
                            let x_margin = (screen_rect.width() - pause_menu_width) / 2.0;
                            let outer_margin = egui::style::Margin::symmetric(
                                x_margin,
                                screen_rect.height() * 0.2,
                            );

                            BorderedFrame::new(&meta.theme.panel.border)
                                .margin(outer_margin)
                                .padding(meta.theme.panel.padding)
                                .show(ui, |ui| {
                                    ui.set_min_width(ui.available_width());

                                    world.run_system(
                                        main_pause_menu,
                                        (
                                            ui,
                                            session,
                                            &mut restart_game,
                                            &mut back_to_menu,
                                            &mut close_pause_menu,
                                            is_online,
                                        ),
                                    );
                                });
                        });
                }
                PauseMenuPage::MapSelect => {
                    let action = world.run_system(crate::ui::map_select::map_select_menu, ());

                    match action {
                        super::map_select::MapSelectAction::None => (),
                        super::map_select::MapSelectAction::SelectMap(map) => {
                            select_map = Some(map);
                            ctx.set_state(PauseMenuPage::Pause);
                        }
                        super::map_select::MapSelectAction::GoBack => {
                            ctx.set_state(PauseMenuPage::Pause);
                        }
                    }
                }
                PauseMenuPage::Settings => {
                    egui::CentralPanel::default()
                        .frame(egui::Frame::none())
                        .show(&ctx, |ui| {
                            world.run_system(
                                super::main_menu::settings::widget,
                                (ui, &mut close_settings_menu),
                            );
                        });
                }
            }

            // When pause menu is open (and not about to be closed), we -re-pause every frame regardless of if just pressed
            // because in online, if menu is open during a map transition, we need to make sure new net session
            // disables input to re-pause itself.
            if !close_pause_menu {
                pause_session(true, is_online, session, false);
            }
        } else if pause_pressed {
            pause_menu.menu_open = true;
        }
    }

    if back_to_menu {
        sessions.end_game();
        sessions.start_menu();
        pause_menu.menu_open = false;
    } else if restart_game {
        sessions.restart_game(None, false);
        pause_menu.menu_open = false;
    } else if let Some(maps) = select_map {
        let match_info = sessions
            .get(SessionNames::GAME)
            .unwrap()
            .world
            .resource::<MatchInputs>()
            .deref()
            .clone();
        sessions.end_game();
        sessions.create_with(SessionNames::GAME, |builder: &mut SessionBuilder| {
            builder.install_plugin(crate::core::MatchPlugin {
                maps,
                player_info: std::array::from_fn(|i| PlayerInput {
                    control: default(),
                    editor_input: default(),
                    ..match_info.players[i]
                }),
                plugins: meta.get_plugins(&assets),
                session_runner: Box::<JumpyDefaultMatchRunner>::default(),
                score: default(),
            });
        });
        pause_menu.menu_open = false;
    }

    if close_pause_menu {
        pause_menu.menu_open = false;
    }

    if close_settings_menu {
        ctx.set_state(PauseMenuPage::Pause);
    }
}

fn main_pause_menu(
    mut param: In<(
        &mut egui::Ui,
        &mut Session,
        &mut bool,
        &mut bool,
        &mut bool,
        bool,
    )>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    controls: Res<GlobalPlayerControls>,
    scoring_menu: Res<ScoringMenuState>,
) {
    let (ui, session, restart_game, back_to_menu, close_pause_menu, is_online) = &mut *param;

    // Unpause the game
    if controls.values().any(|x| x.pause_just_pressed) {
        // Do not unpause game session if scoring menu open.
        // TODO: Use some kind of pause stack to track what different systems
        // might want session to remain inactive.
        pause_session(false, *is_online, session, scoring_menu.active);
        **close_pause_menu = true;
    }

    ui.vertical_centered(|ui| {
        let width = ui.available_width();

        // Heading
        ui.label(
            meta.theme
                .font_styles
                .heading
                .rich(localization.get("paused"))
                .color(meta.theme.panel.font_color),
        );

        // Map title
        if let Some(map_meta) = session.world.get_resource::<SpawnedMapMeta>() {
            ui.label(
                meta.theme
                    .font_styles
                    .bigger
                    .rich(map_meta.name.to_string()),
            );
        }

        ui.add_space(10.0);

        // Continue button
        if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("continue"))
            .min_size(vec2(width, 0.0))
            .show(ui)
            .focus_by_default(ui)
            .clicked()
        {
            pause_session(false, *is_online, session, false);
            **close_pause_menu = true;
        }

        // Local game buttons
        ui.scope(|ui| {
            // Map select button
            if BorderedButton::themed(
                &meta.theme.buttons.normal,
                localization.get("map-select-title"),
            )
            .min_size(vec2(width, 0.0))
            .show(ui)
            .clicked()
            {
                ui.ctx().set_state(PauseMenuPage::MapSelect);
            }

            // Settings button
            if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("settings"))
                .min_size(vec2(width, 0.0))
                .show(ui)
                .clicked()
            {
                ui.ctx().set_state(PauseMenuPage::Settings);
            }

            // Restart button
            if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("restart"))
                .min_size(vec2(width, 0.0))
                .show(ui)
                .clicked()
            {
                **restart_game = true;
            }
        });

        // Re-add edit button once map editor is back in game.
        //
        // Edit button
        // ui.scope(|ui| {
        //     if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("edit"))
        //         .min_size(vec2(width, 0.0))
        //         .show(ui)
        //         .clicked()
        //     {
        //         // TODO: show editor.
        //         pause_session(false, *is_online, session, false);
        //         **close_pause_menu = true;
        //     }
        // });

        // Main menu button
        if BorderedButton::themed(&meta.theme.buttons.normal, localization.get("main-menu"))
            .min_size(vec2(width, 0.0))
            .show(ui)
            .clicked()
        {
            **back_to_menu = true;
        }
    });
}

/// Helper for pausing session depending on if online or offline match.
/// `remain_inactive` is used if other systems like scoring have set session inactive and wish to
/// prevent that change.
fn pause_session(paused: bool, is_online: bool, session: &mut Session, remain_inactive: bool) {
    if is_online {
        // Online session remains active so that it will not timeout with other players.
        // Instead we disable the input so it is not captured by game while paused.
        session.runner.disable_local_input(paused);
    } else if !paused && !remain_inactive {
        session.active = true;
    } else if paused {
        session.active = false;
    }
}

```

`src/ui/player_image.rs`:

```rs
//! System for rendering player image in UI

use crate::prelude::*;

pub fn player_image(
    mut params: In<(&mut egui::Ui, &PlayerMeta, Option<&HatMeta>)>,
    egui_textures: Res<EguiTextures>,
    asset_server: Res<AssetServer>,
) {
    let (ui, player_meta, hat_meta) = &mut *params;
    let time = ui.ctx().input(|i| i.time as f32);
    let width = ui.available_width();
    let available_height = ui.available_width();

    let body_rect;
    let body_scale;
    let body_offset;
    let y_offset;
    // Render the body sprite
    {
        let atlas_handle = &player_meta.layers.body.atlas;
        let atlas = asset_server.get(*atlas_handle);
        let anim_clip = player_meta
            .layers
            .body
            .animations
            .frames
            .get(&ustr("idle"))
            .unwrap();
        let fps = anim_clip.fps;
        let frame_in_time_idx = (time * fps).round() as usize;
        let frame_in_clip_idx = frame_in_time_idx % anim_clip.frames.len();
        let frame_in_sheet_idx = anim_clip.frames[frame_in_clip_idx];
        let sprite_pos = atlas.tile_pos(frame_in_sheet_idx);
        body_offset =
            player_meta.layers.body.animations.offsets[&ustr("idle")][frame_in_clip_idx].body;

        let sprite_aspect = atlas.tile_size.y / atlas.tile_size.x;
        let height = sprite_aspect * width;
        y_offset = -(available_height - height) / 2.0;
        let (rect, _) = ui.allocate_exact_size(egui::vec2(width, height), egui::Sense::hover());

        let uv_min = sprite_pos / atlas.size();
        let uv_max = (sprite_pos + atlas.tile_size) / atlas.size();
        let uv = egui::Rect {
            min: egui::pos2(uv_min.x, uv_min.y),
            max: egui::pos2(uv_max.x, uv_max.y),
        };

        let mut mesh = egui::Mesh {
            texture_id: *egui_textures.0.get(&atlas.image).unwrap(),
            ..default()
        };

        mesh.add_rect_with_uv(rect, uv, egui::Color32::WHITE);
        mesh.translate(egui::vec2(0.0, y_offset));
        ui.painter().add(mesh);

        body_rect = rect;
        body_scale = width / atlas.tile_size.x;
    }

    // Render the fin & face animation
    for layer in [&player_meta.layers.fin, &player_meta.layers.face] {
        let atlas_handle = &layer.atlas;
        let atlas = asset_server.get(*atlas_handle);
        let anim_clip = layer.animations.get(&ustr("idle")).unwrap();
        let fps = anim_clip.fps;
        let frame_in_time_idx = (time * fps).round() as usize;
        let frame_in_clip_idx = frame_in_time_idx % anim_clip.frames.len();
        let frame_in_sheet_idx = anim_clip.frames[frame_in_clip_idx];
        let sprite_pos = atlas.tile_pos(frame_in_sheet_idx);

        let uv_min = sprite_pos / atlas.size();
        let uv_max = (sprite_pos + atlas.tile_size) / atlas.size();
        let uv = egui::Rect {
            min: egui::pos2(uv_min.x, uv_min.y),
            max: egui::pos2(uv_max.x, uv_max.y),
        };

        let mut mesh = egui::Mesh {
            texture_id: *egui_textures.0.get(&atlas.image).unwrap(),
            ..default()
        };

        let sprite_size = atlas.tile_size * body_scale;
        let offset = (layer.offset + body_offset) * body_scale;
        let rect = egui::Rect::from_center_size(
            body_rect.center() + egui::vec2(offset.x, -offset.y + y_offset),
            egui::vec2(sprite_size.x, sprite_size.y),
        );

        mesh.add_rect_with_uv(rect, uv, egui::Color32::WHITE);
        ui.painter().add(mesh);
    }

    // Render the player hat
    if let Some(hat_meta) = hat_meta {
        let atlas_handle = &hat_meta.atlas;
        let atlas = asset_server.get(*atlas_handle);
        let sprite_pos = Vec2::ZERO;

        let uv_min = sprite_pos / atlas.size();
        let uv_max = (sprite_pos + atlas.tile_size) / atlas.size();
        let uv = egui::Rect {
            min: egui::pos2(uv_min.x, uv_min.y),
            max: egui::pos2(uv_max.x, uv_max.y),
        };

        let mut mesh = egui::Mesh {
            texture_id: *egui_textures.0.get(&atlas.image).unwrap(),
            ..default()
        };

        let sprite_size = atlas.tile_size * body_scale;
        let offset = (hat_meta.offset + body_offset) * body_scale;
        let rect = egui::Rect::from_center_size(
            body_rect.center() + egui::vec2(offset.x, -offset.y + y_offset),
            egui::vec2(sprite_size.x, sprite_size.y),
        );

        mesh.add_rect_with_uv(rect, uv, egui::Color32::WHITE);
        ui.painter().add(mesh);
    }
}

```

`src/ui/scoring.rs`:

```rs
#[allow(unused_imports)]
use std::ops::Deref;

#[cfg(not(target_arch = "wasm32"))]
use bones_framework::networking::{socket::Socket, NetworkSocket, SocketTarget, SyncingInfo};

use crate::prelude::*;

use super::player_image::player_image;

pub fn session_plugin(session: &mut SessionBuilder) {
    session.add_system_to_stage(Update, scoring_menu_system);
}

pub fn game_plugin(game: &mut Game) {
    game.insert_shared_resource(ScoringMenuState::default());
}

#[derive(HasSchema, Debug, Default, Clone)]
pub struct ScoringMenuState {
    pub active: bool,
    pub ready_players: HashSet<PlayerIdx>,
    pub match_score: MatchScore,
    pub next_maps: Option<MapPool>,
}

impl ScoringMenuState {
    /// Reset menu state
    pub fn reset(&mut self) {
        *self = default();
    }
}

struct PlayerScoreInfo {
    pub entity: Entity,
    pub player_idx: PlayerIdx,
    pub score: u32,
}

const SCORING_MESSAGE_MAGIC: u8 = 183;

#[derive(Serialize, Deserialize)]
struct ScoringMessage {
    pub data: ScoringMessageEnum,
    pub magic: u8,
}

#[derive(Serialize, Deserialize)]
enum ScoringMessageEnum {
    PlayerReady(u32),
}

impl From<ScoringMessageEnum> for ScoringMessage {
    fn from(value: ScoringMessageEnum) -> Self {
        Self {
            data: value,
            magic: SCORING_MESSAGE_MAGIC,
        }
    }
}

/// The width of each player panel
const PLAYER_PANEL_WIDTH: f32 = 200.0;

/// If Player won the match or is tied for win
enum PlayerWon {
    Tied,
    SoleWinner,
}

fn scoring_menu_system(
    meta: Root<GameMeta>,
    mut sessions: ResMut<Sessions>,
    ctx: Res<EguiCtx>,
    mut state: ResMut<ScoringMenuState>,
    controls: Res<GlobalPlayerControls>,
    world: &World,
) {
    if !state.active {
        // Make sure state is cleared if menu is closed
        state.reset();
        return;
    }

    let mut continue_game = false;
    let mut game_won = false;
    if let Some(session) = sessions.get_mut(SessionNames::GAME) {
        let player_indices = session.world.components.get::<PlayerIdx>();
        let player_indices_ref = player_indices.borrow();
        let game_entities = session.world.get_resource::<Entities>().unwrap();
        let match_inputs = session.world.get_resource::<MatchInputs>().unwrap();

        #[cfg(not(target_arch = "wasm32"))]
        let network_socket: Option<Socket> = session
            .world
            .get_resource::<SyncingInfo>()
            .and_then(|x| x.socket().cloned());

        // Build Vec<PlayerScoreInfo> sorted by player indices
        let mut player_entities: Vec<(Entity, &PlayerIdx)> =
            game_entities.iter_with(&player_indices_ref).collect();
        player_entities.sort_by_key(|x| x.1 .0);
        let player_score_info: Vec<PlayerScoreInfo> = player_entities
            .iter()
            .map(|x| PlayerScoreInfo {
                entity: x.0,
                player_idx: *x.1,
                score: state.match_score.score(*x.1),
            })
            .collect();

        // Contains any players who have broken win threshold. If multiple players have winning scores,
        // contains player with highest score. If players are tied, tied players are all included.
        let mut winning_players = Vec::<PlayerIdx>::default();

        let win_threshold = meta.core.config.winning_score_threshold;
        let mut highest_score = 0;

        for score_info in player_score_info.iter() {
            let score = score_info.score;
            if score >= win_threshold && score >= highest_score {
                if score > highest_score {
                    // New winning player, clear prev winners
                    winning_players.clear();
                    highest_score = score;
                }

                winning_players.push(score_info.player_idx);
            }
        }
        if winning_players.len() == 1 {
            game_won = true;
        }

        // Check for inputs from local players toggling ready state
        for (_, player_idx) in player_entities.iter() {
            if let Some(source) = match_inputs.get_control_source(player_idx.0 as usize) {
                if let Some(control) = controls.get(&source) {
                    if control.menu_confirm_just_pressed
                        && !state.ready_players.contains(*player_idx)
                    {
                        #[cfg(not(target_arch = "wasm32"))]
                        {
                            if let Some(socket) = network_socket.as_ref() {
                                socket.send_reliable(
                                    SocketTarget::All,
                                    &postcard::to_allocvec(&ScoringMessage::from(
                                        ScoringMessageEnum::PlayerReady(player_idx.0),
                                    ))
                                    .unwrap(),
                                );

                                debug!("Send message local player {} ready", player_idx.0);
                            }
                        }

                        state.ready_players.insert(**player_idx);
                    }
                }
            }
        }

        #[cfg(not(target_arch = "wasm32"))]
        if let Some(socket) = network_socket.as_ref() {
            handle_scoring_messages(socket, &mut state);
        }

        // Check if all non-ai players are ready
        let mut all_players_ready = true;
        for (_, player_idx) in player_entities.iter() {
            let is_ai = match_inputs
                .players
                .get(player_idx.0 as usize)
                .unwrap()
                .is_ai;
            if !is_ai && !state.ready_players.contains(*player_idx) {
                all_players_ready = false;
            }
        }
        if all_players_ready {
            continue_game = true;
        }

        egui::CentralPanel::default()
            .frame(egui::Frame::none())
            .show(&ctx, |ui| {
                let screen_rect = ui.max_rect();

                // Determine x margin based on size of player panels, some extra spacing, and screen space available.
                // This way window does not cover whole screen if < 4 players, and has consistent layout.
                let player_panel_spacing = 20.0;
                let max_width =
                    (PLAYER_PANEL_WIDTH + player_panel_spacing) * player_score_info.len() as f32;
                let x_margin = (screen_rect.width() - max_width) / 2.0;

                // x margin is dynamic, y margin percentage of screen
                let outer_margin =
                    egui::style::Margin::symmetric(x_margin, screen_rect.height() * 0.2);

                ui.vertical_centered(|ui| {
                    BorderedFrame::new(&meta.theme.panel.border)
                        .margin(outer_margin)
                        .padding(meta.theme.panel.padding)
                        .show(ui, |ui| {
                            world.run_system(
                                scoring_menu,
                                (
                                    ui,
                                    &player_score_info,
                                    &*match_inputs,
                                    &state,
                                    &winning_players,
                                ),
                            );
                        });
                });
            });
    } else {
        error!("Scoring menu failed to load score from existing game session. Closing scoring UI.");
        state.reset();
    }

    if continue_game {
        state.reset();
        let next_maps = state.next_maps.clone();
        let reset_score = game_won;
        sessions.add_command(Box::new(move |sessions: &mut Sessions| {
            sessions.restart_game(next_maps, reset_score);
        }));
    }
}

fn scoring_menu(
    mut param: In<(
        &mut egui::Ui,
        &Vec<PlayerScoreInfo>,
        &MatchInputs,
        &ScoringMenuState,
        &Vec<PlayerIdx>,
    )>,
    meta: Root<GameMeta>,
    localization: Localization<GameMeta>,
    world: &World,
) {
    let (ui, player_score_info, match_inputs, menu_state, winning_players) = &mut *param;

    // Scoring heading label
    ui.vertical_centered(|ui| {
        let (text, color) = match winning_players.len() {
            0 => ("intermission", meta.theme.panel.font_color),
            1 => ("match-complete", meta.theme.colors.positive),
            _ => ("tied-for-win", meta.theme.panel.font_color),
        };

        ui.label(
            meta.theme
                .font_styles
                .heading
                .rich(localization.get(text))
                .color(color),
        );
    });

    ui.vertical_centered(|ui| {
        ui.horizontal_centered(|ui| {
            let player_count = player_score_info.len();
            let available_spacing = ui.available_width() - PLAYER_PANEL_WIDTH * player_count as f32;

            // Compute how much space to use in gaps between panels
            let spacing = available_spacing / (player_count + 1) as f32;
            ui.add_space(spacing);
            for (i, _) in player_score_info.iter().enumerate() {
                let player_input = match_inputs.players.get(i).unwrap();
                let player_score_info = player_score_info.get(i).unwrap();
                let player_idx = player_score_info.player_idx;

                let ready = menu_state.ready_players.contains(&player_idx);
                let player_won =
                    if winning_players.contains(&player_idx) && winning_players.len() == 1 {
                        Some(PlayerWon::SoleWinner)
                    } else if winning_players.contains(&player_idx) {
                        Some(PlayerWon::Tied)
                    } else {
                        None
                    };

                world.run_system(
                    player_score_panel,
                    (ui, player_input, player_score_info, ready, player_won),
                );
                ui.add_space(spacing);
            }
        });
    });

    let match_complete = winning_players.len() == 1;
    ui.horizontal(|ui| {
        if match_complete {
            ui.label(
                meta.theme
                    .font_styles
                    .normal
                    .rich(localization.get("press-confirm-to-play-again"))
                    .color(meta.theme.panel.font_color),
            );
        } else {
            ui.label(
                meta.theme
                    .font_styles
                    .normal
                    .rich(localization.get("press-confirm-to-ready-up"))
                    .color(meta.theme.panel.font_color),
            );
        }
    });
}

fn player_score_panel(
    mut params: In<(
        &mut egui::Ui,
        &PlayerInput,
        &PlayerScoreInfo,
        bool,
        Option<PlayerWon>,
    )>,
    meta: Root<GameMeta>,
    assets: Res<AssetServer>,
    localization: Localization<GameMeta>,
    world: &World,
) {
    let (ui, player_input, player_score_info, ready, won) = &mut *params;
    let panel = &meta.theme.panel;

    BorderedFrame::new(&panel.border)
        .padding(panel.padding)
        .show(ui, |ui| {
            // PLAYER_PANEL_WIDTH is total space for entire bordered frame, remove space lost to padding
            // and use this for inner contents.
            ui.set_width(PLAYER_PANEL_WIDTH - panel.padding.left - panel.padding.right);

            ui.vertical_centered(|ui| {
                ui.label(
                    meta.theme
                        .font_styles
                        .bigger
                        .rich(format!(
                            "{} {}",
                            localization.get("player"),
                            player_score_info.player_idx.0
                        ))
                        .color(meta.theme.panel.font_color),
                );

                match won {
                    Some(won) => {
                        let text = match won {
                            PlayerWon::Tied => localization.get("tied"),
                            PlayerWon::SoleWinner => localization.get("won"),
                        };

                        ui.label(
                            meta.theme
                                .font_styles
                                .bigger
                                .rich(text)
                                .color(meta.theme.colors.positive),
                        );
                    }
                    None => {
                        ui.add_space(meta.theme.font_styles.bigger.size);
                    }
                }

                let player_meta = assets.get(player_input.selected_player);
                let hat_meta = player_input.selected_hat.map(|x| assets.get(x));
                world.run_system(player_image, (ui, &player_meta, hat_meta.as_deref()));

                ui.label(
                    meta.theme
                        .font_styles
                        .bigger
                        .rich(format!(
                            "{}: {}",
                            localization.get("score"),
                            player_score_info.score,
                        ))
                        .color(meta.theme.panel.font_color),
                );

                if !player_input.is_ai {
                    let (ready_str, color) = match *ready {
                        true => ("ready", meta.theme.colors.positive),
                        false => ("not-ready", meta.theme.colors.negative),
                    };
                    let ready_localized = localization.get(ready_str);
                    ui.label(
                        meta.theme
                            .font_styles
                            .normal
                            .rich(ready_localized)
                            .color(color),
                    );
                } else {
                    ui.label(
                        meta.theme
                            .font_styles
                            .normal
                            .rich(localization.get("ai"))
                            .color(meta.theme.panel.font_color),
                    );
                }
            });
        });
}

#[cfg(not(target_arch = "wasm32"))]
fn handle_scoring_messages(
    network_socket: &(impl NetworkSocket + ?Sized),
    state: &mut ScoringMenuState,
) {
    // TODO handle disconnects
    let datas: Vec<(u32, Vec<u8>)> = network_socket.recv_reliable();
    let local_player_idx = network_socket.player_idx();
    for (_, data) in datas {
        match postcard::from_bytes::<ScoringMessage>(&data) {
            Ok(message) => match message.data {
                ScoringMessageEnum::PlayerReady(player) => {
                    if message.magic == SCORING_MESSAGE_MAGIC && player != local_player_idx {
                        state.ready_players.insert(PlayerIdx(player));
                        debug!("Received message player {} ready", player);
                    }
                }
            },
            Err(e) => warn!("Ignoring network message that was not understood: {e}"),
        }
    }
}

```

`steam/launch_scripts/linux/jumpy.sh`:

```sh
#!/bin/sh

# If display appears to be steam deck and using native display,
# fix text scaled too high due to bad dpi calculation: https://github.com/rust-windowing/winit/issues/2401

VENDOR=$(cat "/sys/devices/virtual/dmi/id/board_vendor")
echo "Vendor: $VENDOR" > jumpy.log

if [[ $VENDOR == "Valve" ]]; then
  # We are probably a steam deck, check if using native display:
  xrandr >> jumpy.log

  # Identify primary display
  RESOLUTION=$(xrandr | awk '/primary/{print $4}')
  if [ -z $RESOLUTION ]; then
    # If single display / none tagged as primary, use thiss
    RESOLUTION=$(xrandr | awk '/connected/{print $3}')
  fi

  echo "Resolution: $RESOLUTION" >> jumpy.log
  if [[ "$RESOLUTION" =~ '1280x800'* ]]; then
    echo "Launching game with WINIT_X11_SCALE_FACTOR=1 to fix scaling on steam deck display" >> jumpy.log
    WINIT_X11_SCALE_FACTOR=1 ./jumpy 2>&1 >> jumpy.log
    pwd >> jumpy.log

    # Exit if game is closed
    exit 0;
  fi
fi

# Launch game
echo "Launching game without modified scaling" >> jumpy.log
./jumpy 2>&1 >> jumpy.log

```

`steam/launch_scripts/linux/jumpy_desktop.sh`:

```sh
#!/bin/sh
./jumpy > jumpy.log

```

`steam/package_steam.sh`:

```sh
# If Version is not set, get latest github release.
# example: VERSION=v0.10.0
if [ -z $VERSION ]; then
  VERSION=$(gh release list --json name -L 1 | jq '.[0]'.name | tr -d '"')
fi

# Name of github release, also the root folder name that is inside the downloaded releases.
RELEASE="jumpy-$VERSION"

# If run in root, cd to ./steam
FOLDER="$(basename $(pwd))"
if [ "$FOLDER" != "steam" ]; then
  cd steam
fi

rm -r packaged/*
mkdir -p packaged

cd packaged
APPLE_AMD64="$RELEASE-x86_64-apple-darwin"
gh release download $VERSION --pattern "$APPLE_AMD64.tar.gz"
tar -xzvf  $APPLE_AMD64.tar.gz
cd $RELEASE
rm ../$APPLE_AMD64.tar.gz
zip -r ../$APPLE_AMD64.zip .
cd ..
rm -r $RELEASE

WINDOWS="$RELEASE-x86_64-pc-windows-msvc"
gh release download $VERSION --pattern "$WINDOWS.zip"
unzip $WINDOWS.zip
cd $RELEASE
rm ../$WINDOWS.zip
zip -r ../$WINDOWS.zip .
cd ..
rm -r $RELEASE

LINUX="$RELEASE-x86_64-unknown-linux-gnu"
gh release download $VERSION --pattern "$LINUX.tar.gz"
tar -xzvf  $LINUX.tar.gz
cd $RELEASE
cp ../../launch_scripts/linux/* .
chmod +x
rm ../$LINUX.tar.gz
zip -r ../$LINUX.zip .
cd ..
rm -r $RELEASE

echo ".zip files in ./steam are prepared to be uploaded to steam for respective platforms."

```

`taplo.toml`:

```toml
[formatting]
align_entries = true
column_width  = 120

```

`wasm_resources/index.html`:

```html
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      body {
        margin: 0;
        height: 100vh;
        background-color: black;
        user-select: none;
      }
      canvas {
        background-color: black;
      }
    </style>
    <!-- Nifty spinner from: https://github.com/loadingio/css-spinner/blob/088aefa790d015e9c7df664d426374952e65124a/dist/dual-ring.html#L1 -->
    <style type="text/css">
      .lds-dual-ring {
        width: 80px;
        height: 80px;
      }
      .lds-dual-ring:after {
        content: " ";
        display: block;
        width: 64px;
        height: 64px;
        border-radius: 50%;
        border: 6px solid #fff;
        border-color: #fff transparent #fff transparent;
        animation: lds-dual-ring 1.2s linear infinite;
      }
      @keyframes lds-dual-ring {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .loading-container {
        z-index: -1;
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        color: white;
      }

      .loading-container > div {
        margin: auto;
        display: flex;
        flex-direction: column;
        color: white;
        align-items: center;
      }

      .loading-text {
        font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        margin-top: 2em;
        font-size: 1.2em;
      }
    </style>
  </head>
  <body>
    <div class="loading-container">
      <div>
        <div class="lds-dual-ring"></div>
        <div class="loading-text">Loading game...</div>
      </div>
    </div>
    <script>
      // Insert hack to make sound autoplay on Chrome as soon as the user interacts with the tab:
      // https://developers.google.com/web/updates/2018/11/web-audio-autoplay#moving-forward
      (function () {
        // An array of all contexts to resume on the page
        const audioContextList = [];

        // An array of various user interaction events we should listen for
        const userInputEventNames = [
          "click",
          "contextmenu",
          "auxclick",
          "dblclick",
          "mousedown",
          "mouseup",
          "pointerup",
          "touchend",
          "keydown",
          "keyup",
        ];

        // A proxy object to intercept AudioContexts and
        // add them to the array for tracking and resuming later
        self.AudioContext = new Proxy(self.AudioContext, {
          construct(target, args) {
            const result = new target(...args);
            audioContextList.push(result);
            return result;
          },
        });

        // To resume all AudioContexts being tracked
        function resumeAllContexts(event) {
          let count = 0;

          audioContextList.forEach((context) => {
            if (context.state !== "running") {
              context.resume();
            } else {
              count++;
            }
          });

          // If all the AudioContexts have now resumed then we
          // unbind all the event listeners from the page to prevent
          // unnecessary resume attempts
          if (count && count == audioContextList.length) {
            userInputEventNames.forEach((eventName) => {
              document.removeEventListener(eventName, resumeAllContexts);
            });
          }
        }

        // We bind the resume function for each user interaction
        // event on the page
        userInputEventNames.forEach((eventName) => {
          document.addEventListener(eventName, resumeAllContexts);
        });
      })();
    </script>
    <script type="module">
      import init from "./jumpy.js";
      init();
      const ignoreCanvasContextMenu = () => {
        const canvases = document.getElementsByTagName('canvas');
        if (canvases[0]) {
            canvases[0].oncontextmenu = (e) => {
                e.preventDefault()
            };
        } else {
            setTimeout(ignoreCanvasContextMenu, 1000)
        }
      };
      setTimeout(ignoreCanvasContextMenu, 1000)
    </script>
  </body>
</html>

```